import{b as x6,c as _6,d as w6}from"./chunk-67NDRJKX.js";import{a as E6,b as T6,c as M6,d as N6,e as V6,g as B6,h as G6}from"./chunk-JIF6FC2D.js";import"./chunk-NGCDLITE.js";import{a as Zs,b as ws,c as Vl}from"./chunk-Y3TWWRWU.js";import"./chunk-5YLBCFDT.js";import{f as C6}from"./chunk-IPTAAT5T.js";import"./chunk-N6UAH77V.js";import{a as y0,b as Bp,c as S0,d as S6,f as x0,g as A6,h as P6,i as D6,p as k6,q as I6,s as fb,t as F6,w as O6,x as L6,y as R6}from"./chunk-3Z35ZEOH.js";import{a as NA,c as Od,d as VA,f as BA,g as GA,h as pb,i as Nl,j as UA,k as HA,l as zA,n as WA,o as $A,p as KA,q as h0,r as jA,s as m0,t as f0,u as r6}from"./chunk-KW67K7GE.js";import{a as c6,b as Rd,c as Da,f as Ho,g as v0}from"./chunk-RLY667LZ.js";import{A as h6,B as p6,D as m6,E as C0,F as g6,G as f6,P as gb,Q as Bl,R as v6,S as y6,T as b0,_ as b6,a as s6,c as mb,d as Jc,e as o6,f as a6,g as l6,n as Nd,q as u6,r as d6}from"./chunk-VTNMJBW4.js";import{A as Rl,B as c0,C as u0,D as ub,E as db,F as hb,G as Go,I as PA,J as DA,K as xs,L as $r,M as Uo,N as kA,O as IA,Q as FA,R as OA,S as LA,T as d0,U as RA,d as bs,da as p0,g as xA,ha as Ld,i as On,j as Vp,k as _A,m as EA,ma as YA,n as Zc,na as qA,o as Qc,p as Pa,r as Ss,s as TA}from"./chunk-3R47PHPO.js";import{$ as Ip,$a as iT,$b as yd,A as Xe,Aa as Op,Ab as MT,Ac as aM,B as M,Ba as NE,Bb as Bf,Bc as lM,C as cr,Ca as gd,Cb as AT,Cc as cM,D as aE,Da as VE,Db as PT,Dc as $c,E as vt,Ea as fd,Eb as DT,Ec as uM,F as lE,Fa as BE,Fb as kT,Fc as dM,G as cE,Ga as GE,Gb as fn,Gc as hM,H as uE,Ha as xl,Hb as Gf,Hc as pM,I as ps,Ia as UE,Ib as Ea,Ic as mM,J as ae,Ja as HE,Jb as Uf,Jc as ib,K as dE,Ka as zE,Kb as IT,Kc as gM,L as ce,La as WE,Lb as FT,Lc as Kc,M as Df,Ma as ko,Mb as Fo,Mc as fM,N as kf,Na as Xs,Nb as OT,Nc as bd,O as zc,Oa as $E,Ob as Hf,Oc as nb,P as If,Pa as _l,Pb as LT,Pc as Yi,Q as hE,Qa as Vf,Qb as Oo,R as Ff,Ra as KE,Rb as wl,S as tn,Sa as jE,Sb as In,T as Do,Ta as YE,Tb as vn,U as Of,Ua as qE,Ub as Lo,V as pE,Va as XE,Vb as RT,W as mE,Wa as ZE,Wb as ur,X as gE,Xa as QE,Xb as zf,Y as md,Ya as JE,Yb as wr,Z as Lf,Za as eT,Zb as NT,_ as fE,_a as tT,_b as Wc,a as q2,aa as vE,ab as nT,ac as Cd,b as qe,ba as Fp,bb as rT,bc as VT,c as jt,ca as yE,cb as sT,cc as BT,d as X2,da as Rf,db as oT,dc as GT,e as Po,ea as CE,eb as aT,ec as Wf,f as J,fa as bE,fb as lT,fc as UT,g as _i,ga as SE,gb as cT,gc as HT,h as De,ha as xE,hb as uT,hc as zT,i as k,ia as _E,ib as dT,ic as WT,j as ji,ja as Wr,jb as hT,jc as $T,k as Z2,ka as wE,kb as pT,kc as KT,l as hd,la as EE,lb as mT,lc as jT,m as Ii,ma as TE,mb as gT,mc as YT,n as gn,na as Gi,nb as fT,nc as qT,o as be,oa as hi,ob as vT,oc as XT,p as Q2,pa as ME,pb as yT,pc as ZT,q as J2,qa as AE,qb as CT,qc as QT,r as X,ra as PE,rb as bT,rc as JT,s as eE,sa as DE,sb as ST,sc as eM,t as tE,ta as kE,tb as xT,tc as tM,u as pd,ua as IE,ub as _T,uc as iM,v as iE,va as FE,vb as wT,vc as nM,w as nE,wa as Nf,wb as Io,wc as rM,x as rE,xa as OE,xb as vd,xc as sM,y as sE,ya as LE,yb as ET,yc as oM,z as oE,za as RE,zb as TT,zc as $f}from"./chunk-6IVSCMHT.js";import{d as wA,f as _s,g as XA,h as ZA,i as QA,l as JA,m as e6,n as t6,o as g0,p as i6,q as n6}from"./chunk-E4T36IQ3.js";import{c as cb,h as Ll,i as MA,j as Bo,k as AA}from"./chunk-O3BOZ3M4.js";import{$a as Td,A as Lp,Ac as o0,Ad as bA,B as ut,Bb as Cn,Bc as Dd,Bd as SA,Cb as zM,Cc as Fl,Cd as lb,D as jc,Da as RM,Dc as rA,E as CM,Eb as WM,Ec as Ol,F as Yc,Fc as Xn,G as rb,Ga as NM,H as jn,Ha as Qf,Hb as Xc,I as Yf,Ia as Ta,Ic as sA,J as sb,Jb as $M,Ka as VM,Kb as KM,Lb as jM,Mb as Ml,Nc as ob,O as bM,Ob as Ma,Oc as a0,P as qc,Pb as Aa,Pc as oA,Q as Rp,Qc as aA,Rb as Er,Rc as lA,Sb as Pd,Sc as ab,Tb as e0,Tc as cA,Ua as BM,Ub as Np,Uc as uA,Vb as YM,Wb as t0,Xb as qM,Yb as XM,Za as Tl,Zb as Cs,Zc as dA,_a as GM,a as P2,ab as UM,ad as hA,b as D2,bb as HM,bd as pA,c as V2,cb as Md,cd as Vo,d as B2,db as Ad,dc as Al,dd as mA,e as Af,ec as ZM,f as G2,fa as IM,fc as QM,fd as kd,g as U2,ga as FM,gc as JM,gd as gA,h as H2,ha as OM,hc as pi,i as Pf,ia as LM,ic as i0,id as Et,j as z2,jc as eA,jd as fA,k as $n,kc as tA,kd as Id,l as W2,ld as Zn,m as $2,n as K2,nc as n0,o as tb,oa as _d,ob as Jf,oc as iA,p as j2,pb as _t,pc as nA,q as Y2,qb as qn,qc as r0,r as Kf,rb as pt,rc as Tr,s as vM,sd as l0,t as yM,tc as Pl,ud as vA,vc as Dl,vd as yA,x as jf,xc as kl,y as Ee,ya as wd,yc as Il,yd as CA,z as Kn,za as Ed,zc as s0,zd as Fd}from"./chunk-OFJ5SZPL.js";import{$ as Eo,$c as wf,A as l2,Aa as ff,Ac as x,Ad as oi,Ae as No,Ba as g2,Bb as Sf,Bc as H,Be as qf,Ca as f2,Cb as b2,Cd as _r,Ce as fs,Da as v2,Dg as kM,Ec as w2,Ee as xM,Fb as _,Fc as ne,Fe as _M,G as c2,Ga as Jt,Gb as st,H as Be,Ha as vf,Hc as V,He as vs,I as cd,Ia as Je,Ic as P,Id as k2,Jb as S2,Jc as E2,Kc as T2,Ke as Sd,Kg as xd,La as dd,Lc as M2,Le as wM,Ma as Zt,Mb as pe,Mc as eb,Me as EM,Mg as yB,Nb as $t,Ne as TM,P as wo,Pa as Hi,Pc as bi,Pd as Ke,Pe as MM,Pg as Zf,Q as u2,Qa as yf,Qc as Si,Qe as AM,R as Pp,Rb as xf,Rc as xi,Rd as I2,Re as Yn,Sa as Dp,Se as Fn,T as gt,Tc as Kt,Te as nn,Ua as en,Ub as ge,Uc as si,Uf as yn,Va as ee,Vb as _f,Vc as ki,Vd as Sl,Wc as A,Wd as F2,Xc as Re,Xd as Mf,Yb as Cl,Yc as ye,Yd as O2,Z as Pi,Za as y2,Zc as Ao,_a as C2,_b as Z,_d as yi,a as Se,aa as d2,ad as Ef,ae as Oe,b as dt,bd as Tf,ca as mf,d as i2,db as z,dd as bl,e as fB,ea as hs,eb as W,ed as qs,f as vB,fb as To,fd as de,g as n2,gb as yl,gd as zi,ha as ud,hb as Mo,hd as kp,i as Uc,j as hf,ja as gf,jc as Dn,kb as xr,ke as L2,lc as kn,ld as fe,le as R2,m as QC,ma as h2,mb as lt,mc as mn,md as Te,me as N2,na as pn,nb as Cf,nc as F,nd as ci,ne as Fe,oa as Di,ob as bf,oc as x2,oe as ms,og as Xf,p as r2,pb as it,pc as js,pd as Wi,pe as Ft,pg as ys,q as pf,qb as rt,qc as Ys,qe as Ce,r as s2,rc as Nt,re as Ve,sc as Hc,sd as A2,sg as PM,t as o2,ta as p2,uc as q,ue as SM,v as ld,vc as zr,ve as El,wb as JC,wc as _2,we as ii,x as a2,xc as St,xe as Ro,yc as xt,ye as gs,yg as DM,z as Ji,za as m2,zc as C}from"./chunk-K3475DQT.js";var U6=fB((Mle,_0)=>{(function(i,e,t,n){"use strict";var r=["","webkit","Moz","MS","ms","o"],s=e.createElement("div"),o="function",a=Math.round,l=Math.abs,c=Date.now;function u(N,G,Q){return setTimeout(b(N,Q),G)}function d(N,G,Q){return Array.isArray(N)?(h(N,Q[G],Q),!0):!1}function h(N,G,Q){var he;if(N)if(N.forEach)N.forEach(G,Q);else if(N.length!==n)for(he=0;he<N.length;)G.call(Q,N[he],he,N),he++;else for(he in N)N.hasOwnProperty(he)&&G.call(Q,N[he],he,N)}function p(N,G,Q){var he="DEPRECATED METHOD: "+G+`
`+Q+` AT 
`;return function(){var Ae=new Error("get-stack-trace"),Ye=Ae&&Ae.stack?Ae.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Rt=i.console&&(i.console.warn||i.console.log);return Rt&&Rt.call(i.console,he,Ye),N.apply(this,arguments)}}var m;typeof Object.assign!="function"?m=function(G){if(G===n||G===null)throw new TypeError("Cannot convert undefined or null to object");for(var Q=Object(G),he=1;he<arguments.length;he++){var Ae=arguments[he];if(Ae!==n&&Ae!==null)for(var Ye in Ae)Ae.hasOwnProperty(Ye)&&(Q[Ye]=Ae[Ye])}return Q}:m=Object.assign;var g=p(function(G,Q,he){for(var Ae=Object.keys(Q),Ye=0;Ye<Ae.length;)(!he||he&&G[Ae[Ye]]===n)&&(G[Ae[Ye]]=Q[Ae[Ye]]),Ye++;return G},"extend","Use `assign`."),f=p(function(G,Q){return g(G,Q,!0)},"merge","Use `assign`.");function y(N,G,Q){var he=G.prototype,Ae;Ae=N.prototype=Object.create(he),Ae.constructor=N,Ae._super=he,Q&&m(Ae,Q)}function b(N,G){return function(){return N.apply(G,arguments)}}function v(N,G){return typeof N==o?N.apply(G&&G[0]||n,G):N}function S(N,G){return N===n?G:N}function w(N,G,Q){h(R(G),function(he){N.addEventListener(he,Q,!1)})}function T(N,G,Q){h(R(G),function(he){N.removeEventListener(he,Q,!1)})}function D(N,G){for(;N;){if(N==G)return!0;N=N.parentNode}return!1}function O(N,G){return N.indexOf(G)>-1}function R(N){return N.trim().split(/\s+/g)}function L(N,G,Q){if(N.indexOf&&!Q)return N.indexOf(G);for(var he=0;he<N.length;){if(Q&&N[he][Q]==G||!Q&&N[he]===G)return he;he++}return-1}function B(N){return Array.prototype.slice.call(N,0)}function $(N,G,Q){for(var he=[],Ae=[],Ye=0;Ye<N.length;){var Rt=G?N[Ye][G]:N[Ye];L(Ae,Rt)<0&&he.push(N[Ye]),Ae[Ye]=Rt,Ye++}return Q&&(G?he=he.sort(function(Bn,lr){return Bn[G]>lr[G]}):he=he.sort()),he}function U(N,G){for(var Q,he,Ae=G[0].toUpperCase()+G.slice(1),Ye=0;Ye<r.length;){if(Q=r[Ye],he=Q?Q+Ae:G,he in N)return he;Ye++}return n}var K=1;function ie(){return K++}function te(N){var G=N.ownerDocument||N;return G.defaultView||G.parentWindow||i}var j=/mobile|tablet|ip(ad|hone|od)|android/i,Y="ontouchstart"in i,se=U(i,"PointerEvent")!==n,me=Y&&j.test(navigator.userAgent),re="touch",ve="pen",_e="mouse",Ge="kinect",Le=25,We=1,xe=2,$e=4,He=8,at=1,Ct=2,ri=4,Wt=8,tt=16,wt=Ct|ri,It=Wt|tt,Bi=wt|It,An=["x","y"],Sr=["clientX","clientY"];function Ki(N,G){var Q=this;this.manager=N,this.callback=G,this.element=N.element,this.target=N.options.inputTarget,this.domHandler=function(he){v(N.options.enable,[N])&&Q.handler(he)},this.init()}Ki.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(te(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(te(this.element),this.evWin,this.domHandler)}};function ba(N){var G,Q=N.options.inputClass;return Q?G=Q:se?G=zC:me?G=of:Y?G=WC:G=sf,new G(N,cs)}function cs(N,G,Q){var he=Q.pointers.length,Ae=Q.changedPointers.length,Ye=G&We&&he-Ae===0,Rt=G&($e|He)&&he-Ae===0;Q.isFirst=!!Ye,Q.isFinal=!!Rt,Ye&&(N.session={}),Q.eventType=G,Sa(N,Q),N.emit("hammer.input",Q),N.recognize(Q),N.session.prevInput=Q}function Sa(N,G){var Q=N.session,he=G.pointers,Ae=he.length;Q.firstInput||(Q.firstInput=Ep(G)),Ae>1&&!Q.firstMultiple?Q.firstMultiple=Ep(G):Ae===1&&(Q.firstMultiple=!1);var Ye=Q.firstInput,Rt=Q.firstMultiple,Pn=Rt?Rt.center:Ye.center,Bn=G.center=od(he);G.timeStamp=c(),G.deltaTime=G.timeStamp-Ye.timeStamp,G.angle=HC(Pn,Bn),G.distance=rf(Pn,Bn),us(Q,G),G.offsetDirection=Hw(G.deltaX,G.deltaY);var lr=Uw(G.deltaTime,G.deltaX,G.deltaY);G.overallVelocityX=lr.x,G.overallVelocityY=lr.y,G.overallVelocity=l(lr.x)>l(lr.y)?lr.x:lr.y,G.scale=Rt?qV(Rt.pointers,he):1,G.rotation=Rt?YV(Rt.pointers,he):0,G.maxPointers=Q.prevInput?G.pointers.length>Q.prevInput.maxPointers?G.pointers.length:Q.prevInput.maxPointers:G.pointers.length,fl(Q,G);var _o=N.element;D(G.srcEvent.target,_o)&&(_o=G.srcEvent.target),G.target=_o}function us(N,G){var Q=G.center,he=N.offsetDelta||{},Ae=N.prevDelta||{},Ye=N.prevInput||{};(G.eventType===We||Ye.eventType===$e)&&(Ae=N.prevDelta={x:Ye.deltaX||0,y:Ye.deltaY||0},he=N.offsetDelta={x:Q.x,y:Q.y}),G.deltaX=Ae.x+(Q.x-he.x),G.deltaY=Ae.y+(Q.y-he.y)}function fl(N,G){var Q=N.lastInterval||G,he=G.timeStamp-Q.timeStamp,Ae,Ye,Rt,Pn;if(G.eventType!=He&&(he>Le||Q.velocity===n)){var Bn=G.deltaX-Q.deltaX,lr=G.deltaY-Q.deltaY,_o=Uw(he,Bn,lr);Ye=_o.x,Rt=_o.y,Ae=l(_o.x)>l(_o.y)?_o.x:_o.y,Pn=Hw(Bn,lr),N.lastInterval=G}else Ae=Q.velocity,Ye=Q.velocityX,Rt=Q.velocityY,Pn=Q.direction;G.velocity=Ae,G.velocityX=Ye,G.velocityY=Rt,G.direction=Pn}function Ep(N){for(var G=[],Q=0;Q<N.pointers.length;)G[Q]={clientX:a(N.pointers[Q].clientX),clientY:a(N.pointers[Q].clientY)},Q++;return{timeStamp:c(),pointers:G,center:od(G),deltaX:N.deltaX,deltaY:N.deltaY}}function od(N){var G=N.length;if(G===1)return{x:a(N[0].clientX),y:a(N[0].clientY)};for(var Q=0,he=0,Ae=0;Ae<G;)Q+=N[Ae].clientX,he+=N[Ae].clientY,Ae++;return{x:a(Q/G),y:a(he/G)}}function Uw(N,G,Q){return{x:G/N||0,y:Q/N||0}}function Hw(N,G){return N===G?at:l(N)>=l(G)?N<0?Ct:ri:G<0?Wt:tt}function rf(N,G,Q){Q||(Q=An);var he=G[Q[0]]-N[Q[0]],Ae=G[Q[1]]-N[Q[1]];return Math.sqrt(he*he+Ae*Ae)}function HC(N,G,Q){Q||(Q=An);var he=G[Q[0]]-N[Q[0]],Ae=G[Q[1]]-N[Q[1]];return Math.atan2(Ae,he)*180/Math.PI}function YV(N,G){return HC(G[1],G[0],Sr)+HC(N[1],N[0],Sr)}function qV(N,G){return rf(G[0],G[1],Sr)/rf(N[0],N[1],Sr)}var XV={mousedown:We,mousemove:xe,mouseup:$e},ZV="mousedown",QV="mousemove mouseup";function sf(){this.evEl=ZV,this.evWin=QV,this.pressed=!1,Ki.apply(this,arguments)}y(sf,Ki,{handler:function(G){var Q=XV[G.type];Q&We&&G.button===0&&(this.pressed=!0),Q&xe&&G.which!==1&&(Q=$e),this.pressed&&(Q&$e&&(this.pressed=!1),this.callback(this.manager,Q,{pointers:[G],changedPointers:[G],pointerType:_e,srcEvent:G}))}});var JV={pointerdown:We,pointermove:xe,pointerup:$e,pointercancel:He,pointerout:He},eB={2:re,3:ve,4:_e,5:Ge},zw="pointerdown",Ww="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&(zw="MSPointerDown",Ww="MSPointerMove MSPointerUp MSPointerCancel");function zC(){this.evEl=zw,this.evWin=Ww,Ki.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y(zC,Ki,{handler:function(G){var Q=this.store,he=!1,Ae=G.type.toLowerCase().replace("ms",""),Ye=JV[Ae],Rt=eB[G.pointerType]||G.pointerType,Pn=Rt==re,Bn=L(Q,G.pointerId,"pointerId");Ye&We&&(G.button===0||Pn)?Bn<0&&(Q.push(G),Bn=Q.length-1):Ye&($e|He)&&(he=!0),!(Bn<0)&&(Q[Bn]=G,this.callback(this.manager,Ye,{pointers:Q,changedPointers:[G],pointerType:Rt,srcEvent:G}),he&&Q.splice(Bn,1))}});var tB={touchstart:We,touchmove:xe,touchend:$e,touchcancel:He},iB="touchstart",nB="touchstart touchmove touchend touchcancel";function $w(){this.evTarget=iB,this.evWin=nB,this.started=!1,Ki.apply(this,arguments)}y($w,Ki,{handler:function(G){var Q=tB[G.type];if(Q===We&&(this.started=!0),!!this.started){var he=rB.call(this,G,Q);Q&($e|He)&&he[0].length-he[1].length===0&&(this.started=!1),this.callback(this.manager,Q,{pointers:he[0],changedPointers:he[1],pointerType:re,srcEvent:G})}}});function rB(N,G){var Q=B(N.touches),he=B(N.changedTouches);return G&($e|He)&&(Q=$(Q.concat(he),"identifier",!0)),[Q,he]}var sB={touchstart:We,touchmove:xe,touchend:$e,touchcancel:He},oB="touchstart touchmove touchend touchcancel";function of(){this.evTarget=oB,this.targetIds={},Ki.apply(this,arguments)}y(of,Ki,{handler:function(G){var Q=sB[G.type],he=aB.call(this,G,Q);he&&this.callback(this.manager,Q,{pointers:he[0],changedPointers:he[1],pointerType:re,srcEvent:G})}});function aB(N,G){var Q=B(N.touches),he=this.targetIds;if(G&(We|xe)&&Q.length===1)return he[Q[0].identifier]=!0,[Q,Q];var Ae,Ye,Rt=B(N.changedTouches),Pn=[],Bn=this.target;if(Ye=Q.filter(function(lr){return D(lr.target,Bn)}),G===We)for(Ae=0;Ae<Ye.length;)he[Ye[Ae].identifier]=!0,Ae++;for(Ae=0;Ae<Rt.length;)he[Rt[Ae].identifier]&&Pn.push(Rt[Ae]),G&($e|He)&&delete he[Rt[Ae].identifier],Ae++;if(Pn.length)return[$(Ye.concat(Pn),"identifier",!0),Pn]}var lB=2500,Kw=25;function WC(){Ki.apply(this,arguments);var N=b(this.handler,this);this.touch=new of(this.manager,N),this.mouse=new sf(this.manager,N),this.primaryTouch=null,this.lastTouches=[]}y(WC,Ki,{handler:function(G,Q,he){var Ae=he.pointerType==re,Ye=he.pointerType==_e;if(!(Ye&&he.sourceCapabilities&&he.sourceCapabilities.firesTouchEvents)){if(Ae)cB.call(this,Q,he);else if(Ye&&uB.call(this,he))return;this.callback(G,Q,he)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function cB(N,G){N&We?(this.primaryTouch=G.changedPointers[0].identifier,jw.call(this,G)):N&($e|He)&&jw.call(this,G)}function jw(N){var G=N.changedPointers[0];if(G.identifier===this.primaryTouch){var Q={x:G.clientX,y:G.clientY};this.lastTouches.push(Q);var he=this.lastTouches,Ae=function(){var Ye=he.indexOf(Q);Ye>-1&&he.splice(Ye,1)};setTimeout(Ae,lB)}}function uB(N){for(var G=N.srcEvent.clientX,Q=N.srcEvent.clientY,he=0;he<this.lastTouches.length;he++){var Ae=this.lastTouches[he],Ye=Math.abs(G-Ae.x),Rt=Math.abs(Q-Ae.y);if(Ye<=Kw&&Rt<=Kw)return!0}return!1}var Yw=U(s.style,"touchAction"),qw=Yw!==n,Xw="compute",Zw="auto",$C="manipulation",Gc="none",Tp="pan-x",Mp="pan-y",af=hB();function KC(N,G){this.manager=N,this.set(G)}KC.prototype={set:function(N){N==Xw&&(N=this.compute()),qw&&this.manager.element.style&&af[N]&&(this.manager.element.style[Yw]=N),this.actions=N.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var N=[];return h(this.manager.recognizers,function(G){v(G.options.enable,[G])&&(N=N.concat(G.getTouchAction()))}),dB(N.join(" "))},preventDefaults:function(N){var G=N.srcEvent,Q=N.offsetDirection;if(this.manager.session.prevented){G.preventDefault();return}var he=this.actions,Ae=O(he,Gc)&&!af[Gc],Ye=O(he,Mp)&&!af[Mp],Rt=O(he,Tp)&&!af[Tp];if(Ae){var Pn=N.pointers.length===1,Bn=N.distance<2,lr=N.deltaTime<250;if(Pn&&Bn&&lr)return}if(!(Rt&&Ye)&&(Ae||Ye&&Q&wt||Rt&&Q&It))return this.preventSrc(G)},preventSrc:function(N){this.manager.session.prevented=!0,N.preventDefault()}};function dB(N){if(O(N,Gc))return Gc;var G=O(N,Tp),Q=O(N,Mp);return G&&Q?Gc:G||Q?G?Tp:Mp:O(N,$C)?$C:Zw}function hB(){if(!qw)return!1;var N={},G=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Q){N[Q]=G?i.CSS.supports("touch-action",Q):!0}),N}var lf=1,ds=2,ad=4,vl=8,xa=vl,Ap=16,xo=32;function _a(N){this.options=m({},this.defaults,N||{}),this.id=ie(),this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=lf,this.simultaneous={},this.requireFail=[]}_a.prototype={defaults:{},set:function(N){return m(this.options,N),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(N){if(d(N,"recognizeWith",this))return this;var G=this.simultaneous;return N=cf(N,this),G[N.id]||(G[N.id]=N,N.recognizeWith(this)),this},dropRecognizeWith:function(N){return d(N,"dropRecognizeWith",this)?this:(N=cf(N,this),delete this.simultaneous[N.id],this)},requireFailure:function(N){if(d(N,"requireFailure",this))return this;var G=this.requireFail;return N=cf(N,this),L(G,N)===-1&&(G.push(N),N.requireFailure(this)),this},dropRequireFailure:function(N){if(d(N,"dropRequireFailure",this))return this;N=cf(N,this);var G=L(this.requireFail,N);return G>-1&&this.requireFail.splice(G,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(N){return!!this.simultaneous[N.id]},emit:function(N){var G=this,Q=this.state;function he(Ae){G.manager.emit(Ae,N)}Q<vl&&he(G.options.event+Qw(Q)),he(G.options.event),N.additionalEvent&&he(N.additionalEvent),Q>=vl&&he(G.options.event+Qw(Q))},tryEmit:function(N){if(this.canEmit())return this.emit(N);this.state=xo},canEmit:function(){for(var N=0;N<this.requireFail.length;){if(!(this.requireFail[N].state&(xo|lf)))return!1;N++}return!0},recognize:function(N){var G=m({},N);if(!v(this.options.enable,[this,G])){this.reset(),this.state=xo;return}this.state&(xa|Ap|xo)&&(this.state=lf),this.state=this.process(G),this.state&(ds|ad|vl|Ap)&&this.tryEmit(G)},process:function(N){},getTouchAction:function(){},reset:function(){}};function Qw(N){return N&Ap?"cancel":N&vl?"end":N&ad?"move":N&ds?"start":""}function Jw(N){return N==tt?"down":N==Wt?"up":N==Ct?"left":N==ri?"right":""}function cf(N,G){var Q=G.manager;return Q?Q.get(N):N}function Ks(){_a.apply(this,arguments)}y(Ks,_a,{defaults:{pointers:1},attrTest:function(N){var G=this.options.pointers;return G===0||N.pointers.length===G},process:function(N){var G=this.state,Q=N.eventType,he=G&(ds|ad),Ae=this.attrTest(N);return he&&(Q&He||!Ae)?G|Ap:he||Ae?Q&$e?G|vl:G&ds?G|ad:ds:xo}});function uf(){Ks.apply(this,arguments),this.pX=null,this.pY=null}y(uf,Ks,{defaults:{event:"pan",threshold:10,pointers:1,direction:Bi},getTouchAction:function(){var N=this.options.direction,G=[];return N&wt&&G.push(Mp),N&It&&G.push(Tp),G},directionTest:function(N){var G=this.options,Q=!0,he=N.distance,Ae=N.direction,Ye=N.deltaX,Rt=N.deltaY;return Ae&G.direction||(G.direction&wt?(Ae=Ye===0?at:Ye<0?Ct:ri,Q=Ye!=this.pX,he=Math.abs(N.deltaX)):(Ae=Rt===0?at:Rt<0?Wt:tt,Q=Rt!=this.pY,he=Math.abs(N.deltaY))),N.direction=Ae,Q&&he>G.threshold&&Ae&G.direction},attrTest:function(N){return Ks.prototype.attrTest.call(this,N)&&(this.state&ds||!(this.state&ds)&&this.directionTest(N))},emit:function(N){this.pX=N.deltaX,this.pY=N.deltaY;var G=Jw(N.direction);G&&(N.additionalEvent=this.options.event+G),this._super.emit.call(this,N)}});function jC(){Ks.apply(this,arguments)}y(jC,Ks,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Gc]},attrTest:function(N){return this._super.attrTest.call(this,N)&&(Math.abs(N.scale-1)>this.options.threshold||this.state&ds)},emit:function(N){if(N.scale!==1){var G=N.scale<1?"in":"out";N.additionalEvent=this.options.event+G}this._super.emit.call(this,N)}});function YC(){_a.apply(this,arguments),this._timer=null,this._input=null}y(YC,_a,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Zw]},process:function(N){var G=this.options,Q=N.pointers.length===G.pointers,he=N.distance<G.threshold,Ae=N.deltaTime>G.time;if(this._input=N,!he||!Q||N.eventType&($e|He)&&!Ae)this.reset();else if(N.eventType&We)this.reset(),this._timer=u(function(){this.state=xa,this.tryEmit()},G.time,this);else if(N.eventType&$e)return xa;return xo},reset:function(){clearTimeout(this._timer)},emit:function(N){this.state===xa&&(N&&N.eventType&$e?this.manager.emit(this.options.event+"up",N):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function qC(){Ks.apply(this,arguments)}y(qC,Ks,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Gc]},attrTest:function(N){return this._super.attrTest.call(this,N)&&(Math.abs(N.rotation)>this.options.threshold||this.state&ds)}});function XC(){Ks.apply(this,arguments)}y(XC,Ks,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:wt|It,pointers:1},getTouchAction:function(){return uf.prototype.getTouchAction.call(this)},attrTest:function(N){var G=this.options.direction,Q;return G&(wt|It)?Q=N.overallVelocity:G&wt?Q=N.overallVelocityX:G&It&&(Q=N.overallVelocityY),this._super.attrTest.call(this,N)&&G&N.offsetDirection&&N.distance>this.options.threshold&&N.maxPointers==this.options.pointers&&l(Q)>this.options.velocity&&N.eventType&$e},emit:function(N){var G=Jw(N.offsetDirection);G&&this.manager.emit(this.options.event+G,N),this.manager.emit(this.options.event,N)}});function df(){_a.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}y(df,_a,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[$C]},process:function(N){var G=this.options,Q=N.pointers.length===G.pointers,he=N.distance<G.threshold,Ae=N.deltaTime<G.time;if(this.reset(),N.eventType&We&&this.count===0)return this.failTimeout();if(he&&Ae&&Q){if(N.eventType!=$e)return this.failTimeout();var Ye=this.pTime?N.timeStamp-this.pTime<G.interval:!0,Rt=!this.pCenter||rf(this.pCenter,N.center)<G.posThreshold;this.pTime=N.timeStamp,this.pCenter=N.center,!Rt||!Ye?this.count=1:this.count+=1,this._input=N;var Pn=this.count%G.taps;if(Pn===0)return this.hasRequireFailures()?(this._timer=u(function(){this.state=xa,this.tryEmit()},G.interval,this),ds):xa}return xo},failTimeout:function(){return this._timer=u(function(){this.state=xo},this.options.interval,this),xo},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==xa&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function wa(N,G){return G=G||{},G.recognizers=S(G.recognizers,wa.defaults.preset),new ZC(N,G)}wa.VERSION="2.0.7",wa.defaults={domEvents:!1,touchAction:Xw,enable:!0,inputTarget:null,inputClass:null,preset:[[qC,{enable:!1}],[jC,{enable:!1},["rotate"]],[XC,{direction:wt}],[uf,{direction:wt},["swipe"]],[df],[df,{event:"doubletap",taps:2},["tap"]],[YC]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var pB=1,e2=2;function ZC(N,G){this.options=m({},wa.defaults,G||{}),this.options.inputTarget=this.options.inputTarget||N,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=N,this.input=ba(this),this.touchAction=new KC(this,this.options.touchAction),t2(this,!0),h(this.options.recognizers,function(Q){var he=this.add(new Q[0](Q[1]));Q[2]&&he.recognizeWith(Q[2]),Q[3]&&he.requireFailure(Q[3])},this)}ZC.prototype={set:function(N){return m(this.options,N),N.touchAction&&this.touchAction.update(),N.inputTarget&&(this.input.destroy(),this.input.target=N.inputTarget,this.input.init()),this},stop:function(N){this.session.stopped=N?e2:pB},recognize:function(N){var G=this.session;if(!G.stopped){this.touchAction.preventDefaults(N);var Q,he=this.recognizers,Ae=G.curRecognizer;(!Ae||Ae&&Ae.state&xa)&&(Ae=G.curRecognizer=null);for(var Ye=0;Ye<he.length;)Q=he[Ye],G.stopped!==e2&&(!Ae||Q==Ae||Q.canRecognizeWith(Ae))?Q.recognize(N):Q.reset(),!Ae&&Q.state&(ds|ad|vl)&&(Ae=G.curRecognizer=Q),Ye++}},get:function(N){if(N instanceof _a)return N;for(var G=this.recognizers,Q=0;Q<G.length;Q++)if(G[Q].options.event==N)return G[Q];return null},add:function(N){if(d(N,"add",this))return this;var G=this.get(N.options.event);return G&&this.remove(G),this.recognizers.push(N),N.manager=this,this.touchAction.update(),N},remove:function(N){if(d(N,"remove",this))return this;if(N=this.get(N),N){var G=this.recognizers,Q=L(G,N);Q!==-1&&(G.splice(Q,1),this.touchAction.update())}return this},on:function(N,G){if(N!==n&&G!==n){var Q=this.handlers;return h(R(N),function(he){Q[he]=Q[he]||[],Q[he].push(G)}),this}},off:function(N,G){if(N!==n){var Q=this.handlers;return h(R(N),function(he){G?Q[he]&&Q[he].splice(L(Q[he],G),1):delete Q[he]}),this}},emit:function(N,G){this.options.domEvents&&mB(N,G);var Q=this.handlers[N]&&this.handlers[N].slice();if(!(!Q||!Q.length)){G.type=N,G.preventDefault=function(){G.srcEvent.preventDefault()};for(var he=0;he<Q.length;)Q[he](G),he++}},destroy:function(){this.element&&t2(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function t2(N,G){var Q=N.element;if(Q.style){var he;h(N.options.cssProps,function(Ae,Ye){he=U(Q.style,Ye),G?(N.oldCssProps[he]=Q.style[he],Q.style[he]=Ae):Q.style[he]=N.oldCssProps[he]||""}),G||(N.oldCssProps={})}}function mB(N,G){var Q=e.createEvent("Event");Q.initEvent(N,!0,!0),Q.gesture=G,G.target.dispatchEvent(Q)}m(wa,{INPUT_START:We,INPUT_MOVE:xe,INPUT_END:$e,INPUT_CANCEL:He,STATE_POSSIBLE:lf,STATE_BEGAN:ds,STATE_CHANGED:ad,STATE_ENDED:vl,STATE_RECOGNIZED:xa,STATE_CANCELLED:Ap,STATE_FAILED:xo,DIRECTION_NONE:at,DIRECTION_LEFT:Ct,DIRECTION_RIGHT:ri,DIRECTION_UP:Wt,DIRECTION_DOWN:tt,DIRECTION_HORIZONTAL:wt,DIRECTION_VERTICAL:It,DIRECTION_ALL:Bi,Manager:ZC,Input:Ki,TouchAction:KC,TouchInput:of,MouseInput:sf,PointerEventInput:zC,TouchMouseInput:WC,SingleTouchInput:$w,Recognizer:_a,AttrRecognizer:Ks,Tap:df,Pan:uf,Swipe:XC,Pinch:jC,Rotate:qC,Press:YC,on:w,off:T,each:h,merge:f,extend:g,assign:m,inherit:y,bindFn:b,prefixed:U});var gB=typeof i<"u"?i:typeof self<"u"?self:{};gB.Hammer=wa,typeof define=="function"&&define.amd?define(function(){return wa}):typeof _0<"u"&&_0.exports?_0.exports=wa:i[t]=wa})(window,document,"Hammer")});var TBe=n2(U6());var Rx={};vB(Rx,{AgChart:()=>Ox,AgCharts:()=>Dr,AgErrorBarSupportedSeriesTypes:()=>EB,AgTooltipPositionType:()=>mS,Marker:()=>Hn,VERSION:()=>Lx,_ModuleSupport:()=>da,_Scale:()=>Ls,_Scene:()=>le,_Theme:()=>En,_Util:()=>ai,__FORCE_MODULE_DETECTION:()=>DB,time:()=>dv});var hS=Object.defineProperty,CB=Object.defineProperties,bB=Object.getOwnPropertyDescriptor,SB=Object.getOwnPropertyDescriptors,Y0=Object.getOwnPropertySymbols,xB=Object.getPrototypeOf,OP=Object.prototype.hasOwnProperty,LP=Object.prototype.propertyIsEnumerable,_B=Reflect.get,vb=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),mt=Math.pow,H6=(i,e,t)=>e in i?hS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ue=(i,e)=>{for(var t in e||(e={}))OP.call(e,t)&&H6(i,t,e[t]);if(Y0)for(var t of Y0(e))LP.call(e,t)&&H6(i,t,e[t]);return i},Ue=(i,e)=>CB(i,SB(e)),Xi=(i,e)=>{var t={};for(var n in i)OP.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&Y0)for(var n of Y0(i))e.indexOf(n)<0&&LP.call(i,n)&&(t[n]=i[n]);return t},na=(i,e)=>{for(var t in e)hS(i,t,{get:e[t],enumerable:!0})},E=(i,e,t,n)=>{for(var r=n>1?void 0:n?bB(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&hS(e,t,r),r},cm=(i,e,t)=>_B(xB(i),t,e),we=(i,e,t)=>new Promise((n,r)=>{var s=l=>{try{a(t.next(l))}catch(c){r(c)}},o=l=>{try{a(t.throw(l))}catch(c){r(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(i,e)).next())}),wB=function(i,e){this[0]=i,this[1]=e},pS=i=>{var e=i[vb("asyncIterator")],t=!1,n,r={};return e==null?(e=i[vb("iterator")](),n=s=>r[s]=o=>e[s](o)):(e=e.call(i),n=s=>r[s]=o=>{if(t){if(t=!1,s==="throw")throw o;return o}return t=!0,{done:!1,value:new wB(new Promise(a=>{var l=e[s](o);if(!(l instanceof Object))throw TypeError("Object expected");a(l)}),1)}}),r[vb("iterator")]=()=>r,n("next"),"throw"in e?n("throw"):r.throw=s=>{throw s},"return"in e&&n("return"),r},EB=["bar","line","scatter"],TB={},MB=void 0;MB=TB;var mS=(i=>(i.POINTER="pointer",i.NODE="node",i.TOP="top",i.RIGHT="right",i.BOTTOM="bottom",i.LEFT="left",i.TOP_LEFT="top-left",i.TOP_RIGHT="top-right",i.BOTTOM_RIGHT="bottom-right",i.BOTTOM_LEFT="bottom-left",i))(mS||{}),AB={},PB=void 0;PB=AB;var DB=0,dv={};na(dv,{day:()=>zP,friday:()=>YB,hour:()=>HP,millisecond:()=>RP,minute:()=>GP,monday:()=>WB,month:()=>$P,saturday:()=>qB,second:()=>VP,sunday:()=>WP,thursday:()=>jB,tuesday:()=>$B,utcDay:()=>l5,utcHour:()=>s5,utcMinute:()=>i5,utcMonth:()=>d5,utcYear:()=>m5,wednesday:()=>KB,year:()=>KP});var Fb=new Map;function Ob(i,e){Fb.has(e)||(Fb.set(e,!0),i())}Ob.clear=()=>Fb.clear();function z6(i){return i}function*Wp(...i){for(let e of i)yield*hf(pS(e))}function*kB(i){for(let e=i.length-1;e>=0;e--)yield i[e]}function W6(i,e=0,t){let{leading:n=!0,trailing:r=!0}=t??{},s,o,a=!1;function l(){r&&o?(s=setTimeout(l,e),i(...o)):a=!1,o=null}function c(...u){a?o=u:(a=!0,s=setTimeout(l,e),n?i(...u):o=u)}return Object.assign(c,{cancel(){clearTimeout(s),a=!1,o=null}})}function IB(...i){return()=>{for(let e of i)e()}}var Ie={log(...i){console.log(...i)},warn(i,...e){console.warn(`AG Charts - ${i}`,...e)},error(i,...e){typeof i=="object"?console.error("AG Charts error",i,...e):console.error(`AG Charts - ${i}`,...e)},table(...i){console.table(...i)},warnOnce(i,...e){Ob(()=>Ie.warn(i,...e),`Logger.warn: ${i}`)},errorOnce(i,...e){Ob(()=>Ie.error(i,...e),`Logger.error: ${i}`)}},um=class{constructor(i,e,t){this._encode=i,this._decode=e,this._rangeCallback=t}floor(i){let e=new Date(i),t=this._encode(e);return this._decode(t)}ceil(i){let e=new Date(Number(i)-1),t=this._encode(e);return this._decode(t+1)}range(i,e,t){var n;let r=(n=this._rangeCallback)==null?void 0:n.call(this,i,e),s=this._encode(t?this.floor(i):this.ceil(i)),o=this._encode(t?this.ceil(e):this.floor(e));if(o<s)return[];let a=[];for(let l=s;l<=o;l++){let c=this._decode(l);a.push(c)}return r?.(),a}},Xr=class extends um{getOffset(i,e){let t=typeof i=="number"||i instanceof Date?this._encode(new Date(i)):0;return Math.floor(t)%e}every(i,e){let t=0,n,r=i;i=Math.max(1,Math.round(i)),r!==i&&Ie.warnOnce(`interval step of [${r}] rounded to [${i}].`);let{snapTo:s="start"}=e??{};if(typeof s=="string"){let l=t;n=(c,u)=>{let d=s==="start"?c:u;return t=this.getOffset(d,i),()=>t=l}}else typeof s=="number"?t=this.getOffset(new Date(s),i):s instanceof Date&&(t=this.getOffset(s,i));let o=l=>{let c=this._encode(l);return Math.floor((c-t)/i)},a=l=>this._decode(l*i+t);return new um(o,a,n)}};function FB(i){return i.getTime()}function OB(i){return new Date(i)}var RP=new Xr(FB,OB),LB=RP,Ale=new Date(0).getFullYear(),cu=1e3,tr=cu*60,Pr=tr*60,Wa=Pr*24,Ul=Wa*7,Gp=Wa*30,em=Wa*365,NP=new Date().getTimezoneOffset()*tr;function RB(i){return Math.floor((i.getTime()-NP)/cu)}function NB(i){return new Date(NP+i*cu)}var VP=new Xr(RB,NB),$p=VP,BP=new Date().getTimezoneOffset()*tr;function VB(i){return Math.floor((i.getTime()-BP)/tr)}function BB(i){return new Date(BP+i*tr)}var GP=new Xr(VB,BB),Kp=GP,UP=new Date().getTimezoneOffset()*tr;function GB(i){return Math.floor((i.getTime()-UP)/Pr)}function UB(i){return new Date(UP+i*Pr)}var HP=new Xr(GB,UB),jp=HP;function HB(i){let e=i.getTimezoneOffset()*tr;return Math.floor((i.getTime()-e)/Wa)}function zB(i){let e=new Date(1970,0,1);return e.setDate(e.getDate()+i),e}var zP=new Xr(HB,zB),Lb=zP;function Cu(i){let t=(7+i-4)%7;function n(s){let o=s.getTimezoneOffset()*tr;return Math.floor((s.getTime()-o)/Ul-t/7)}function r(s){let o=new Date(1970,0,1);return o.setDate(o.getDate()+s*7+t),o}return new Xr(n,r)}var WP=Cu(0),WB=Cu(1),$B=Cu(2),KB=Cu(3),jB=Cu(4),YB=Cu(5),qB=Cu(6),R0=WP;function XB(i){return i.getFullYear()*12+i.getMonth()}function ZB(i){let e=Math.floor(i/12),t=i-e*12;return new Date(e,t,1)}var $P=new Xr(XB,ZB),Bd=$P;function QB(i){return i.getFullYear()}function JB(i){let e=new Date;return e.setFullYear(i),e.setMonth(0,1),e.setHours(0,0,0,0),e}var KP=new Xr(QB,JB),Rb=KP;function e5(i){return Math.floor(i.getTime()/tr)}function t5(i){return new Date(i*tr)}var i5=new Xr(e5,t5);function n5(i){return Math.floor(i.getTime()/Pr)}function r5(i){return new Date(i*Pr)}var s5=new Xr(n5,r5);function o5(i){return Math.floor(i.getTime()/Wa)}function a5(i){let e=new Date(0);return e.setUTCDate(e.getUTCDate()+i),e.setUTCHours(0,0,0,0),e}var l5=new Xr(o5,a5);function c5(i){return i.getUTCFullYear()*12+i.getUTCMonth()}function u5(i){let e=Math.floor(i/12),t=i-e*12;return new Date(Date.UTC(e,t,1))}var d5=new Xr(c5,u5);function h5(i){return i.getUTCFullYear()}function p5(i){let e=new Date;return e.setUTCFullYear(i),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}var m5=new Xr(h5,p5),sh={isEnterprise:!1},hv=class{constructor(){this.destroyFns=[]}destroy(){for(let i of this.destroyFns)i()}},g5=class{constructor(){this.modules=[],this.dependencies=new Set,this.dependents=new Set}register(...i){for(let e of i){this.registerDependencies(e);let t=this.modules.find(n=>e.type===n.type&&e.optionsKey===n.optionsKey&&e.identifier===n.identifier);if(t){if(e.packageType==="enterprise"&&t.packageType==="community"){let n=this.modules.indexOf(t);this.modules.splice(n,1,e)}}else this.modules.push(e)}}hasEnterpriseModules(){return this.modules.some(i=>i.packageType==="enterprise")}*byType(...i){for(let e of this.modules)i.includes(e.type)&&this.dependencies.has(e.optionsKey)&&(yield e);for(let e of this.modules)i.includes(e.type)&&!this.dependencies.has(e.optionsKey)&&!this.dependents.has(e.optionsKey)&&(yield e);for(let e of this.modules)i.includes(e.type)&&this.dependents.has(e.optionsKey)&&(yield e)}registerDependencies(i){if(!(i.dependencies==null||i.dependencies.length===0)){if(this.dependencies.has(i.optionsKey))throw new Error(`Module [${i.optionsKey}] can not both be depended upon by any module and have dependencies of [${i.dependencies}].`);for(let e of i.dependencies){if(this.dependents.has(e))throw new Error(`Module [${e}] can not both be depended upon by any module and have dependencies of [${i.optionsKey}].`);this.dependencies.add(e)}this.dependents.add(i.optionsKey)}}},zl=new g5,f5=class{constructor(){this.axesMap=new Map,this.hidden=new Set,this.themeTemplates=new Map}register(i,e){this.axesMap.set(i,e.instanceConstructor),e.themeTemplate&&this.setThemeTemplate(i,e.themeTemplate),e.hidden&&this.hidden.add(i)}create(i,e){let t=this.axesMap.get(i);if(t)return new t(e);throw new Error(`AG Charts - unknown axis type: ${i}`)}has(i){return this.axesMap.has(i)}keys(){return this.axesMap.keys()}publicKeys(){return[...this.keys()].filter(i=>!this.hidden.has(i))}setThemeTemplate(i,e){return this.themeTemplates.set(i,e),this}getThemeTemplate(i){return this.themeTemplates.get(i)}},Kl=new f5,q0=Symbol("BREAK"),oh="__decorator_config";function jP(i,e){Object.getOwnPropertyDescriptor(i,oh)==null&&Object.defineProperty(i,oh,{value:{}});let t=i[oh],n=e.toString();if(typeof t[n]<"u")return t[n];let r=new WeakMap;t[n]={setters:[],getters:[],observers:[],valuesMap:r};let s=Object.getOwnPropertyDescriptor(i,e),o=s?.set,a=s?.get;return Object.defineProperty(i,e,{set:function(u){let{setters:d,observers:h}=t[n],p;d.some(m=>m.length>2)&&(p=a?a.call(this):r.get(this));for(let m of d)if(u=m(this,e,u,p),u===q0)return;o?o.call(this,u):r.set(this,u);for(let m of h)m(this,u,p)},get:function(){let u=a?a.call(this):r.get(this);for(let d of t[n].getters)if(u=d(this,e,u),u===q0)return;return u},enumerable:!0,configurable:!1}),t[n]}function $a(i,e,t){return(n,r)=>{let s=jP(n,r);s.setters.push(i),e&&s.getters.unshift(e),t&&Object.assign(s,t)}}function v5(i){return(e,t)=>{jP(e,t).observers.push(i)}}function pv(i){return typeof i<"u"&&oh in i}function ah(i){let e=new Set;for(;pv(i);)e.add(i?.[oh]),i=Object.getPrototypeOf(i);return Array.from(e).flatMap(t=>Object.keys(t))}function y5(i){return ah(i).reduce((e,t)=>{var n;return e[t]=(n=i[t])!=null?n:null,e},{})}function C5(i,e){let t=e.toString();for(;pv(i);){let n=i[oh];if(Object.hasOwn(n,t))return n[t];i=Object.getPrototypeOf(i)}}function X0(i){return i!=null}function sn(i){return Array.isArray(i)}function YP(i){return typeof i=="boolean"}function mv(i){return i instanceof Date}function Pm(i){return mv(i)&&!isNaN(Number(i))}function qP(i){return i instanceof RegExp}function bu(i){return typeof i=="function"}function Js(i){return typeof i=="object"&&i!==null&&!sn(i)}function b5(i){return sn(i)||Ts(i)}function Ts(i){return typeof i=="object"&&i!==null&&i.constructor===Object}function qr(i){return typeof i=="string"}function Yr(i){return typeof i=="number"}function qt(i){return Yr(i)&&Number.isFinite(i)}function XP(i){return typeof window<"u"&&i instanceof HTMLElement}function S5(i,e){return qr(e)&&Object.keys(i).includes(e)}function ZP(i,e){return Object.values(i).includes(e)}function QP(i){return typeof i=="symbol"}function x5(...i){return kt(...i.reverse())}function kt(...i){var e;let t={};for(let n of i){if(!Js(n))continue;let r=pv(n)?ah(n):Object.keys(n);for(let s of r)Ts(t[s])&&Ts(n[s])?t[s]=kt(t[s],n[s]):(e=t[s])!=null||(t[s]=n[s])}return t}function Nb(i,...e){return e&&sn(i)?i.map(t=>kt(t,...e)):i}function gv(i,e){return Object.entries(i).reduce((t,[n,r])=>(t[n]=e(r,n,i),t),{})}function Vb(i,e){let t=ue({},i);for(let n of e)delete t[n];return t}function gS(i,e){return(sn(e)?e:e.split(".")).reduce((n,r)=>n[r],i)}var fS=new Set(["__proto__","constructor","prototype"]);function vS(i,e,t){let n=sn(e)?e.slice():e.split("."),r=n.pop();if(n.some(o=>fS.has(o)))return;let s=n.reduce((o,a)=>o[a],i);s[r]=t}function uu(i,e,t){if(t===void 0)return e;for(let n of i){let r=t[n];r!==void 0&&(e[n]=r)}return e}var JP=class extends Map{get(i){var e;return(e=super.get(i))!=null?e:"unknown"}isCartesian(i){return this.get(i)==="cartesian"}isPolar(i){return this.get(i)==="polar"}isHierarchy(i){return this.get(i)==="hierarchy"}isTopology(i){return this.get(i)==="topology"}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter(i=>this.isCartesian(i))}get polarTypes(){return this.seriesTypes.filter(i=>this.isPolar(i))}get hierarchyTypes(){return this.seriesTypes.filter(i=>this.isHierarchy(i))}get topologyTypes(){return this.seriesTypes.filter(i=>this.isTopology(i))}},_5=class extends Map{set(i,e){return super.set(i,kt(e,this.get(i)))}},Jn=new JP,eD=new JP,Bb=new _5,xh=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology"],optionsInnerKey:"image"},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology"]},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"],optionsInnerKey:"miniChart"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}];function w5(i){return xh.some(e=>e.type==="series"&&e.identifier===i)}function fv(i){var e;return(e=xh.find(t=>t.type==="series"&&t.identifier===i))==null?void 0:e.chartTypes}function E5(i){var e;return((e=fv(i))==null?void 0:e.find(n=>n==="cartesian"))==="cartesian"}function T5(i){var e;return((e=fv(i))==null?void 0:e.find(n=>n==="polar"))==="polar"}function M5(i){var e;return((e=fv(i))==null?void 0:e.find(n=>n==="hierarchy"))==="hierarchy"}function A5(i){var e;return((e=fv(i))==null?void 0:e.find(n=>n==="topology"))==="topology"}function P5(i){return i.packageType==="enterprise"}function D5(i){var e;if(!P5(i))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");let t=xh.find(n=>n.type===i.type&&n.optionsKey===i.optionsKey&&n.identifier===i.identifier&&i.chartTypes.every(r=>n.chartTypes.includes(r)));return t&&((e=t.useCount)!=null||(t.useCount=0),t.useCount++),t!=null}function k5(){return xh.filter(({useCount:i})=>i==null||i===0)}function _h(i){var e,t,n;return(n=(t=(e=i.series)==null?void 0:e[0])==null?void 0:t.type)!=null?n:"line"}function du(i){let e=_h(i);return e==null?!0:e==="cartesian"?(Ie.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Jn.isCartesian(e)||E5(e)}function vv(i){let e=_h(i);return e==null?!1:e==="polar"?(Ie.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Jn.isPolar(e)||T5(e)}function yS(i){let e=_h(i);return e==null?!1:e==="hierarchy"?(Ie.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Jn.isHierarchy(e)||M5(e)}function CS(i){let e=_h(i);return e==null?!1:e==="topology"?(Ie.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Jn.isTopology(e)||A5(e)}function I5(i){let e=_h(i);return vv(i)&&e!=="pie"&&e!=="donut"}function F5(i){return i==null?!1:Jn.has(i)}function O5(i){return i==null?!1:Kl.has(i)}function L5(i){var e,t,n,r;let s=[],o=Jn.get(_h(i));for(let{type:a,chartTypes:l,optionsKey:c,optionsInnerKey:u,identifier:d}of xh)if(!(o!=="unknown"&&!l.includes(o))){if(a==="root"||a==="legend"){let h=i[c];if(h==null)continue;u?h[u]&&(s.push(`${c}.${u}`),delete h[u]):(s.push(c),delete i[c])}else if(a==="axis"){if(!("axes"in i)||!((e=i.axes)!=null&&e.some(h=>h.type===d)))continue;s.push(`axis[type=${d}]`),i.axes=i.axes.filter(h=>h.type!==d)}else if(a==="axis-option"){if(!("axes"in i)||!((t=i.axes)!=null&&t.some(h=>h[c])))continue;s.push(`axis.${c}`),i.axes.forEach(h=>{h[c]&&delete h[c]})}else if(a==="series"){if(!((n=i.series)!=null&&n.some(h=>h.type===d)))continue;s.push(`series[type=${d}]`),i.series=i.series.filter(h=>h.type!==d)}else if(a==="series-option"){if(!((r=i.series)!=null&&r.some(h=>h[c])))continue;s.push(`series.${c}`),i.series.forEach(h=>{h[c]&&delete h[c]})}}if(s.length){let a="ag-charts-enterprise",l="https://charts.ag-grid.com/javascript/installation/";i.mode==="integrated"&&(a="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",l="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),Ie.warnOnce([`unable to use these enterprise features as '${a}' has not been loaded:`,"",...s,"",`See: ${l}`].join(`
`))}}var Ot=class{set(i){let{className:e=this.constructor.name}=this.constructor;if(typeof i!="object")return Ie.warn(`unable to set ${e} - expecting a properties object`),this;let t=new Set(Object.keys(i));for(let n of ah(this))if(t.has(n)){let r=i[n],s=this;Qo(s[n])?s[n]=s[n]instanceof Dm?s[n].reset(r):s[n].set(r):s[n]=r,t.delete(n)}for(let n of t)Ie.warn(`unable to set [${n}] in ${e} - property is unknown`);return this}isValid(){return ah(this).every(i=>{let{optional:e}=C5(this,i),t=e||typeof this[i]<"u";return t||Ie.warnOnce(`[${i}] is required.`),t})}toJson(){return ah(this).reduce((i,e)=>{let t=this[e];return i[e]=Qo(t)?t.toJson():t,i},{})}},Dm=class tD extends Array{constructor(e,...t){super(t.length),Object.defineProperty(this,"itemFactory",{value:e,enumerable:!1,configurable:!1}),this.set(t)}set(e){if(sn(e)){this.length=e.length;for(let t=0;t<e.length;t++)this[t]=new this.itemFactory().set(e[t])}return this}reset(e){return new tD(this.itemFactory,...e)}toJson(){return this.map(e=>{var t,n;return(n=(t=e?.toJson)==null?void 0:t.call(e))!=null?n:e})}};function Qo(i){return i instanceof Ot||i instanceof Dm}var N0="class-instance";function Ms(i,e,t){if(sn(e)){if(!sn(i)||i.length!==e.length||e.some((n,r)=>Ms(i[r],n)!=null))return e}else if(Ts(e)){if(!Ts(i))return e;let n={},r=new Set([...Object.keys(i),...Object.keys(e)]);for(let s of r)if(!(i[s]===e[s]||t?.includes(s)))if(typeof i[s]==typeof e[s]){let o=Ms(i[s],e[s]);o!==null&&(n[s]=o)}else n[s]=e[s];return Object.keys(n).length?n:null}else if(i!==e)return e;return null}function er(i,e){return sn(i)?i.map(t=>er(t,e)):Ts(i)?gv(i,(t,n)=>{var r;return(r=e?.shallow)!=null&&r.includes(n)?Z0(t):er(t,e)}):Z0(i)}function Z0(i){return sn(i)?[...i]:Ts(i)?ue({},i):mv(i)?new Date(i):qP(i)?new RegExp(i.source,i.flags):i}function Yo(i,e,t,...n){var r;if(sn(i))e(i,...n),i.forEach((s,o)=>{Yo(s,e,t,...$6(n,o))});else if(Ts(i)){e(i,...n);for(let s of Object.keys(i)){if((r=t?.skip)!=null&&r.includes(s))continue;let o=i[s];(sn(o)||Ts(o))&&Yo(o,e,t,...$6(n,s))}}}function Ga(i,e,t={}){let{path:n,constructedArrays:r,matcherPath:s=n?.replace(/(\[[0-9+]+])/i,"[]"),skip:o=[]}=t;if(i==null)throw new Error(`AG Charts - target is uninitialised: ${n??"<root>"}`);if(e==null)return i;if(Qo(i))return i.set(e);let a=i,l=yb(i);for(let c in e){if(fS.has(c))continue;let u=`${s?s+".":""}${c}`;if(o.includes(u))continue;let d=e[c],h=`${n?n+".":""}${c}`,p=a.constructor,m=a[c],g;try{let f=yb(m),y=yb(d);if(l===N0&&!(c in i)){Ie.warn(`unable to set [${h}] in ${p?.name} - property is unknown`);continue}if(f!=null&&y!=null&&y!==f&&(f!==N0||y!=="object")){Ie.warn(`unable to set [${h}] in ${p?.name} - can't apply type of [${y}], allowed types are: [${f}]`);continue}if(Qo(m))a[c].set(d);else if(y==="array")if(g??(g=r?.get(m)),g==null)a[c]=d;else{let b=d;a[c]=b.map(v=>Ga(new g,v,Ue(ue({},t),{path:h,matcherPath:u+"[]"})))}else y===N0?a[c]=d:y==="object"?m!=null?Ga(m,d,Ue(ue({},t),{path:h,matcherPath:u})):g==null?(a[c]={},Ga(a[c],d,Ue(ue({},t),{path:h,matcherPath:u}))):a[c]=Ga(new g,d,Ue(ue({},t),{path:h,matcherPath:u})):a[c]=d}catch(f){Ie.warn(`unable to set [${h}] in [${p?.name}]; nested error is: ${f.message}`)}}return i}function $6(i,e){return i.map(t=>t?.[e])}function yb(i){return i==null?null:XP(i)||mv(i)?"primitive":sn(i)?"array":Js(i)?Ts(i)?"object":N0:bu(i)?"function":"primitive"}var R5=class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(i,{chartTypes:[e],instanceConstructor:t,defaultAxes:n,themeTemplate:r,enterpriseThemeTemplate:s,paletteFactory:o,solo:a,stackable:l,groupable:c,stackedByDefault:u,swapDefaultAxesCondition:d,hidden:h}){this.setThemeTemplate(i,r,s),this.seriesMap.set(i,{instanceConstructor:t,defaultAxes:n,paletteFactory:o,solo:a,stackable:l,groupable:c,stackedByDefault:u,swapDefaultAxesCondition:d}),Jn.set(i,e),h||eD.set(i,e)}create(i,e){var t;let n=(t=this.seriesMap.get(i))==null?void 0:t.instanceConstructor;if(n)return new n(e);throw new Error(`AG Charts - unknown series type: ${i}`)}cloneDefaultAxes(i){var e;let t=(e=this.seriesMap.get(i))==null?void 0:e.defaultAxes;return t?{axes:er(t)}:null}setThemeTemplate(i,e,t={}){let n=this.themeTemplates.get(i);this.themeTemplates.set(i,{community:kt(e,n?.community),enterprise:kt(t,e,n?.community)})}getThemeTemplate(i){let e=this.themeTemplates.get(i);return sh.isEnterprise?e?.enterprise:e?.community}getPaletteFactory(i){var e;return(e=this.seriesMap.get(i))==null?void 0:e.paletteFactory}isSolo(i){var e,t;return(t=(e=this.seriesMap.get(i))==null?void 0:e.solo)!=null?t:!1}isGroupable(i){var e,t;return(t=(e=this.seriesMap.get(i))==null?void 0:e.groupable)!=null?t:!1}isStackable(i){var e,t;return(t=(e=this.seriesMap.get(i))==null?void 0:e.stackable)!=null?t:!1}isStackedByDefault(i){var e,t;return(t=(e=this.seriesMap.get(i))==null?void 0:e.stackedByDefault)!=null?t:!1}isDefaultAxisSwapNeeded(i){var e,t,n;let r;for(let s of(e=i.series)!=null?e:[]){let{type:o="line"}=s,a=(n=(t=this.seriesMap.get(o))==null?void 0:t.swapDefaultAxesCondition)==null?void 0:n.call(t,s);if(a!=null){if(r!=null&&r!=a)throw new Error("AG Charts - The provided series have incompatible directions");r=a}}return r}},Kr=new R5,N5=class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(i,{optionsKey:e,instanceConstructor:t,themeTemplate:n}){this.legendMap.set(i,{optionsKey:e,instanceConstructor:t}),this.themeTemplates.set(e,n)}create(i,e){var t;let n=(t=this.legendMap.get(i))==null?void 0:t.instanceConstructor;if(n)return new n(e);throw new Error(`AG Charts - unknown legend type: ${i}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce((i,[e,t])=>(i[e]=t.optionsKey,i),{})}},bS=new N5,iD=(i=>(i[i.SMALL=12]="SMALL",i[i.MEDIUM=13]="MEDIUM",i[i.LARGE=17]="LARGE",i))(iD||{}),nD=(i=>(i.NORMAL="normal",i.BOLD="bold",i.BOLDER="bolder",i.LIGHTER="lighter",i))(nD||{}),rD=(i=>(i.TOP="top",i.RIGHT="right",i.BOTTOM="bottom",i.LEFT="left",i))(rD||{}),sD=(i=>(i.CATEGORY="category",i.ORDINAL_TIME="ordinal-time",i.NUMBER="number",i.TIME="time",i.LOG="log",i))(sD||{}),oD=(i=>(i.ANGLE_CATEGORY="angle-category",i.ANGLE_NUMBER="angle-number",i.RADIUS_CATEGORY="radius-category",i.RADIUS_NUMBER="radius-number",i))(oD||{}),aD=(i=>(i.CIRCLE="circle",i.POLYGON="polygon",i))(aD||{}),Es={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Ba={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},lu=Symbol("is-dark-theme"),lD=Symbol("extends-axes-defaults"),cD=Symbol("extends-axes-line-defaults"),uD=Symbol("extends-axes-tick-defaults"),dD=Symbol("extends-axes-grid-line-defaults"),Ka=Symbol("extends-series-defaults"),wh=Symbol("extends-cartesian-marker-defaults"),Sn=Symbol("default-font"),ti=Symbol("default-label-colour"),hD=Symbol("default-inverted-label-colour"),Eh=Symbol("default-inside-series-label-colour"),lh=Symbol("default-muted-label-colour"),Q0=Symbol("default-axis-grid-colour"),V0=Symbol("default-axis-line-colour"),tm=Symbol("default-cross-lines-colour"),dm=Symbol("default-background-colour"),Th=Symbol("default-shadow-colour"),io=Symbol("default-colours"),no=Symbol("default-waterfall-series-positive-colors"),ro=Symbol("default-waterfall-series-negative-colors"),so=Symbol("default-waterfall-series-total-colors"),oo=Symbol("default-waterfall-series-connector-line-stroke"),SS=Symbol("default-polar-series-stroke"),ao=Symbol("default-diverging-series-colour-range"),xS=Symbol("default-hierarchy-fills"),_S=Symbol("default-hierarchy-strokes"),lo=Symbol("default-annotation-stroke"),co=Symbol("default-annotation-background-fill"),wS=Symbol("default-annotation-handle-fill"),w0="white",V5={fills:Object.values(Es),strokes:Object.values(Ba)},Gb={get cartesian(){return{seriesTypes:Jn.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:Jn.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:Jn.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:Jn.topologyTypes,commonOptions:[]}}},B5=Object.values(Gb).reduce((i,{commonOptions:e})=>i.concat(e),[]),tu=class Mr{getPalette(){return V5}static getAxisDefaults(e){return kt(e,{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:"normal",fontSize:13,fontFamily:Sn,color:ti},label:{fontSize:12,fontFamily:Sn,padding:5,color:ti,avoidCollisions:!0},line:{enabled:!0,width:1,color:V0},tick:{enabled:!1,width:1,color:V0},gridLine:{enabled:!0,style:[{stroke:Q0,lineDash:[]}]},crossLines:{enabled:!1,fill:tm,stroke:tm,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:Sn,padding:5,color:ti}}})}static getSeriesDefaults(){return{visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"#ffffff54",stroke:"#0006",strokeWidth:2},series:{dimOpacity:1}},nodeClickRange:"exact",tooltip:{enabled:!0}}}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:7,strokeWidth:1}}static getChartDefaults(){return{background:{visible:!0,fill:dm},padding:{top:20,right:20,bottom:20,left:20},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",fontWeight:"normal",fontSize:17,fontFamily:Sn,color:ti,wrapping:"hyphenate"},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontSize:13,fontFamily:Sn,color:lh,wrapping:"hyphenate"},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:13,fontFamily:Sn,color:"rgb(140, 140, 140)",wrapping:"hyphenate"},legend:{position:"bottom",spacing:30,listeners:{},item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},toggleSeriesVisible:!0,label:{color:ti,fontSize:12,fontFamily:Sn}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:ti},inactiveStyle:{fill:lh},highlightStyle:{fill:ti},label:{color:ti}}},tooltip:{enabled:!0,darkTheme:lu,range:"nearest",delay:0},overlays:{loading:{darkTheme:lu},noData:{darkTheme:lu},noVisibleSeries:{darkTheme:lu}},listeners:{}}}constructor(e={}){let{overrides:t,palette:n}=er(e),r=this.createChartConfigPerChartType(this.getDefaults());t&&this.mergeOverrides(r,t),this.config=Object.freeze(this.templateTheme(r)),this.palette=kt(n,this.getPalette())}mergeOverrides(e,t){for(let{seriesTypes:n,commonOptions:r}of Object.values(Gb)){let s=ue({},t.common);for(let o of B5)r.includes(o)||delete s[o];if(s)for(let o of n){let a=o;e[a]=kt(s,e[a])}}Jn.seriesTypes.forEach(n=>{let r=n;t[r]&&(e[r]=kt(t[r],e[r]))})}createChartConfigPerChartType(e){for(let[t,{seriesTypes:n}]of Object.entries(Gb)){let r=Bb.get(t);for(let s of n)e[s]||(e[s]=er(r))}return e}getDefaults(){let e=(t,n)=>{var r;let s={},o=ue(ue(ue({axes:{}},bS.getThemeTemplates()),Mr.getChartDefaults()),Bb.get(t));for(let a of n){s[a]=kt(Kr.getThemeTemplate(a),(r=s[a])!=null?r:er(o));let{axes:l}=s[a];for(let c of Kl.keys())l[c]=kt(l[c],Kl.getThemeTemplate(c),t==="cartesian"&&Mr.cartesianAxisDefault[c])}return s};return kt(e("cartesian",Jn.cartesianTypes),e("polar",Jn.polarTypes),e("hierarchy",Jn.hierarchyTypes),e("topology",Jn.topologyTypes))}templateTheme(e){let t=er(e),{extensions:n,properties:r}=this.getTemplateParameters();return Yo(t,s=>{if(s.__extends__){let o=s.__extends__,a=n.get(o);if(a==null)throw new Error(`AG Charts - no template variable provided for: ${o}`);Object.keys(a).forEach(l=>{l in s?Js(s[l])&&(s[l]=kt(s[l],a[l])):s[l]=a[l]}),delete s.__extends__}if(sn(s))for(let o=0;o<s.length;o++){let a=s[o];r.has(a)&&(s[o]=r.get(a))}else for(let[o,a]of Object.entries(s))r.has(a)&&(s[o]=r.get(a))}),er(t)}static getDefaultColors(){return{fills:Es,strokes:Ba}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Es.BLUE,stroke:Ba.BLUE,label:{color:ti}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Es.ORANGE,stroke:Ba.ORANGE,label:{color:ti}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Es.GRAY,stroke:Ba.GRAY,label:{color:ti}}}getTemplateParameters(){let e=new Map;e.set(lD,Mr.getAxisDefaults()),e.set(cD,Mr.getAxisDefaults().line),e.set(uD,Mr.getAxisDefaults().tick),e.set(dD,Mr.getAxisDefaults().gridLine),e.set(Ka,Mr.getSeriesDefaults()),e.set(wh,Mr.getCartesianSeriesMarkerDefaults());let t=new Map;return t.set(lu,!1),t.set(Sn,"Verdana, sans-serif"),t.set(ti,"rgb(70, 70, 70)"),t.set(hD,"white"),t.set(lh,"rgb(140, 140, 140)"),t.set(Q0,"rgb(224,234,241)"),t.set(V0,"rgb(195, 195, 195)"),t.set(tm,"rgb(70, 70, 70)"),t.set(Eh,w0),t.set(dm,w0),t.set(Th,"rgba(0, 0, 0, 0.5)"),t.set(ao,[Es.ORANGE,Es.YELLOW,Es.GREEN]),t.set(xS,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),t.set(_S,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),t.set(SS,w0),t.set(io,Mr.getDefaultColors()),t.set(no,Mr.getWaterfallSeriesDefaultPositiveColors()),t.set(ro,Mr.getWaterfallSeriesDefaultNegativeColors()),t.set(so,Mr.getWaterfallSeriesDefaultTotalColors()),t.set(oo,Mr.getWaterfallSeriesDefaultTotalColors().stroke),t.set(lo,Ba.BLUE),t.set(co,Es.BLUE),t.set(wS,w0),{extensions:e,properties:t}}};tu.cartesianAxisDefault={number:tu.getAxisDefaults({line:{enabled:!1}}),log:tu.getAxisDefaults({base:10,line:{enabled:!1}}),category:tu.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:!1}}),time:tu.getAxisDefaults({gridLine:{enabled:!1}}),"grouped-category":tu.getAxisDefaults()};var ja=tu,E0="#192232",ka={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Gd={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},G5={fills:Object.values(ka),strokes:Object.values(Gd)},km=class Ud extends ja{static getDefaultColors(){return{fills:ka,strokes:Gd}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:ka.BLUE,stroke:Gd.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:ka.ORANGE,stroke:Gd.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:ka.GRAY,stroke:Gd.GRAY,label:{color:"white"}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(lu,!0),e.properties.set(io,Ud.getDefaultColors()),e.properties.set(no,Ud.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ro,Ud.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(so,Ud.getWaterfallSeriesDefaultTotalColors()),e.properties.set(oo,Ud.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(SS,E0),e.properties.set(ti,"white"),e.properties.set(lh,"#7D91A0"),e.properties.set(Q0,"#545A6E"),e.properties.set(tm,"white"),e.properties.set(ao,[ka.ORANGE,ka.YELLOW,ka.GREEN]),e.properties.set(xS,["#192834","#253746","#324859","#3f596c","#4d6a80"]),e.properties.set(_S,["#192834","#3b5164","#496275","#577287","#668399"]),e.properties.set(dm,E0),e.properties.set(Eh,E0),e.properties.set(lo,Gd.BLUE),e.properties.set(co,ka.BLUE),e.properties.set(wS,E0),e}getPalette(){return G5}constructor(e){super(e)}},Ia={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Hd={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},U5={fills:Object.values(Ia),strokes:Object.values(Hd)},H5=class zd extends km{static getDefaultColors(){return{fills:Ia,strokes:Hd}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Ia.BLUE,stroke:Hd.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Ia.RED,stroke:Hd.RED,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Ia.GRAY,stroke:Hd.GRAY,label:{color:"white"}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(io,zd.getDefaultColors()),e.properties.set(no,zd.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ro,zd.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(so,zd.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ao,[Ia.ORANGE,Ia.YELLOW,Ia.GREEN]),e.properties.set(oo,zd.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(lo,Hd.BLUE),e.properties.set(co,Ia.BLUE),e}getPalette(){return U5}},Fa={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Wd={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},z5={fills:Object.values(Fa),strokes:Object.values(Wd)},W5=class $d extends ja{static getDefaultColors(){return{fills:Fa,strokes:Wd}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Fa.BLUE,stroke:Wd.BLUE,label:{color:ti}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Fa.RED,stroke:Wd.RED,label:{color:ti}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Fa.GRAY,stroke:Wd.GRAY,label:{color:ti}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(io,$d.getDefaultColors()),e.properties.set(no,$d.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ro,$d.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(so,$d.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ao,[Fa.ORANGE,Fa.YELLOW,Fa.GREEN]),e.properties.set(oo,$d.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(lo,Wd.BLUE),e.properties.set(co,Fa.BLUE),e}getPalette(){return z5}},iu={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},Yp={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},$5="#bbbbbb",K5="#eeeeee",j5={fills:Object.values(iu),strokes:Object.values(Yp)},Y5=class Kd extends km{static getDefaultColors(){return{fills:iu,strokes:Yp}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:iu.BLUE,stroke:Yp.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:iu.RED,stroke:Yp.RED,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:$5,stroke:K5,label:{color:"white"}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(io,Kd.getDefaultColors()),e.properties.set(no,Kd.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ro,Kd.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(so,Kd.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ao,[iu.BLUE,iu.RED]),e.properties.set(oo,Kd.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(lo,Yp.BLUE),e.properties.set(co,iu.BLUE),e}getPalette(){return j5}},nu={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},qp={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},q5="#bbbbbb",X5="#888888",Z5={fills:Object.values(nu),strokes:Object.values(qp)},Q5=class jd extends ja{static getDefaultColors(){return{fills:nu,strokes:qp}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:nu.BLUE,stroke:qp.BLUE,label:{color:ti}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:nu.RED,stroke:qp.RED,label:{color:ti}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:q5,stroke:X5,label:{color:ti}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(io,jd.getDefaultColors()),e.properties.set(no,jd.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ro,jd.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(so,jd.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ao,[nu.BLUE,nu.RED]),e.properties.set(oo,jd.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(lo,qp.BLUE),e.properties.set(co,nu.BLUE),e}getPalette(){return Z5}},zo={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},ru={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},J5={fills:Object.values(zo),strokes:Object.values(ru)},eG=class Yd extends km{static getDefaultColors(){return{fills:Ue(ue({},zo),{RED:zo.ORANGE}),strokes:Ue(ue({},ru),{RED:ru.ORANGE})}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:zo.BLUE,stroke:ru.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:zo.ORANGE,stroke:ru.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:zo.GRAY,stroke:ru.GRAY,label:{color:"white"}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(io,Yd.getDefaultColors()),e.properties.set(no,Yd.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ro,Yd.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(so,Yd.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ao,[zo.ORANGE,zo.YELLOW,zo.GREEN]),e.properties.set(oo,Yd.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(lo,ru.BLUE),e.properties.set(co,zo.BLUE),e}getPalette(){return J5}},Wo={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},su={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},tG={fills:Object.values(Wo),strokes:Object.values(su)},iG=class qd extends ja{static getDefaultColors(){return{fills:Ue(ue({},Wo),{RED:Wo.ORANGE}),strokes:Ue(ue({},su),{RED:su.ORANGE})}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Wo.BLUE,stroke:su.BLUE,label:{color:ti}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Wo.ORANGE,stroke:su.ORANGE,label:{color:ti}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Wo.GRAY,stroke:su.GRAY,label:{color:ti}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(io,qd.getDefaultColors()),e.properties.set(no,qd.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ro,qd.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(so,qd.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ao,[Wo.ORANGE,Wo.YELLOW,Wo.GREEN]),e.properties.set(oo,qd.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(lo,su.BLUE),e.properties.set(co,Wo.BLUE),e}getPalette(){return tG}},Oa={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Xd={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#c18aff",YELLOW:"#fff653",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},nG={fills:Object.values(Oa),strokes:Object.values(Xd)},rG=class Zd extends km{static getDefaultColors(){return{fills:Oa,strokes:Xd}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Oa.BLUE,stroke:Xd.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Oa.ORANGE,stroke:Xd.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Oa.GRAY,stroke:Xd.GRAY,label:{color:"white"}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(io,Zd.getDefaultColors()),e.properties.set(no,Zd.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ro,Zd.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(so,Zd.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ao,[Oa.ORANGE,Oa.YELLOW,Oa.GREEN]),e.properties.set(oo,Zd.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(lo,Xd.BLUE),e.properties.set(co,Oa.BLUE),e}getPalette(){return nG}},La={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Qd={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},sG={fills:Object.values(La),strokes:Object.values(Qd)},oG=class Jd extends ja{static getDefaultColors(){return{fills:La,strokes:Qd}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:La.BLUE,stroke:Qd.BLUE,label:{color:ti}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:La.ORANGE,stroke:Qd.ORANGE,label:{color:ti}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:La.GRAY,stroke:Qd.GRAY,label:{color:ti}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(io,Jd.getDefaultColors()),e.properties.set(no,Jd.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ro,Jd.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(so,Jd.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ao,[La.ORANGE,La.YELLOW,La.GREEN]),e.properties.set(oo,Jd.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(lo,Qd.BLUE),e.properties.set(co,La.BLUE),e}getPalette(){return sG}},im=()=>new ja,Cb=()=>new km,aG={undefined:im,null:im,"ag-default":im,"ag-sheets":()=>new iG,"ag-polychroma":()=>new Q5,"ag-vivid":()=>new oG,"ag-material":()=>new W5},lG={undefined:Cb,null:Cb,"ag-default-dark":Cb,"ag-sheets-dark":()=>new eG,"ag-polychroma-dark":()=>new Y5,"ag-vivid-dark":()=>new rG,"ag-material-dark":()=>new H5},pD=ue(ue({},lG),aG);function cG(i){if(i===null)return;let e=!0,{baseTheme:t,palette:n,overrides:r}=i;if(t!==void 0&&typeof t!="string"&&typeof t!="object"&&(Ie.warn(`invalid theme.baseTheme type ${typeof t}, expected (string | object).`),e=!1),r!==void 0&&typeof r!="object"&&(Ie.warn(`invalid theme.overrides type ${typeof r}, expected object.`),e=!1),typeof n=="object"){if(n!==null){let{fills:s,strokes:o}=n;s!==void 0&&!Array.isArray(s)&&(Ie.warn("theme.overrides.fills must be undefined or an array"),e=!1),o!==void 0&&!Array.isArray(o)&&(Ie.warn("theme.overrides.strokes must be undefined or an array"),e=!1)}}else n!==void 0&&(Ie.warn(`invalid theme.palette type ${typeof n}, expected object.`),e=!1);if(e)return i}function uG(i){if(i===void 0||typeof i=="string"||i instanceof ja)return i;if(typeof i=="object")return cG(i);Ie.warn(`invalid theme value type ${typeof i}, expected object or string.`)}function ES(i){let e=uG(i);if(e instanceof ja)return e;if(e==null||typeof e=="string"){let o=pD[e];return o?o():(Ie.warnOnce(`the theme [${e}] is invalid, using [ag-default] instead.`),im())}let t=[],n;for(;typeof e=="object";)t.push(e.overrides),n??(n=e.palette),e=e.baseTheme;let r={baseTheme:e,overrides:kt(...t),palette:n},s=r.baseTheme?ES(r.baseTheme):im();return new s.constructor(r)}function ra(i){if(i.length===0)return;let e=1/0,t=-1/0;for(let r of i)r instanceof Date&&(r=r.getTime()),typeof r=="number"&&(r<e&&(e=r),r>t&&(t=r));let n=[e,t];if(n.every(isFinite))return n}function mD(i,e,t){return Im(i,e,t).extent}function Im(i,e,t){var n;let r=!1;return i.length>2&&(i=(n=ra(i))!=null?n:[NaN,NaN]),isNaN(e)||(r||(r=e>i[0]),i=[e,i[1]]),isNaN(t)||(r||(r=t<i[1]),i=[i[0],t]),i[0]>i[1]&&(i=[]),{extent:i,clipped:r}}function nm(i,e){if(i==null||e==null||i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(Array.isArray(i[t])&&Array.isArray(e[t])){if(!nm(i[t],e[t]))return!1}else if(i[t]!==e[t])return!1;return!0}function Ub(i){return typeof i>"u"?[]:Array.isArray(i)?i:[i]}function TS(i){return Array.from(new Set(i))}function MS(i,e){return i.reduce((t,n)=>{var r;let s=e(n);return(r=t[s])!=null||(t[s]=[]),t[s].push(n),t},{})}function Hb(i,e,t=0){if(i.length===0)return[];let n=[];for(let r=0;r<e;r++)n.push(i.at((r+t)%i.length));return n}function gD(i,e){return e.reduce(([t,n],r)=>i(r)?[[...t,r],n]:[t,[...n,r]],[[],[]])}function*dG(i,e){for(let t of i)yield e(t)}function hG(i,e){return i.includes(e)}function pG(i,e){return hG(i,e)}function B0(i,e){return!e.some(t=>!pG(i,t))}var Jo={},T0=new WeakMap;typeof window<"u"?Jo.window=window:typeof global<"u"&&(Jo.window=global.window);typeof document<"u"?Jo.document=document:typeof global<"u"&&(Jo.document=global.document);function ea(i){var e;return i?(e=Jo.document)==null?void 0:e[i]:Jo.document}function ta(i){var e;return i?(e=Jo.window)==null?void 0:e[i]:Jo.window}function Ui(i,e,t){let n=ea().createElement(i);return typeof e=="object"&&(t=e,e=void 0),e&&n.classList.add(e),t&&Object.assign(n.style,t),n}function fD(i,e){let{body:t}=ea(),n=Ui("a",{display:"none"});n.href=i,n.download=e,t.appendChild(n),n.click(),setTimeout(()=>t.removeChild(n))}function Su(i,e){var t,n;let r=ea();if(e&&((t=T0.get(r))!=null&&t.has(e)))return;let s=Ui("style");s.innerHTML=i,r.head.insertBefore(s,r.head.querySelector("style")),e&&!T0.has(r)?T0.set(r,new Set([e])):e&&((n=T0.get(r))==null||n.add(e))}function vD(i){Jo.document=i}function yD(i){Jo.window=i}var mG=2e3,K6=Date.now(),gG=()=>{let i=Date.now()-K6;if(i>mG){let e=(Math.floor(i/100)/10).toFixed(1);Ie.log(`**** ${e}s since last log message ****`)}K6=Date.now()},Mi={create(...i){return Object.assign((...t)=>{Mi.check(...i)&&(typeof t[0]=="function"&&(t=Ub(t[0]())),gG(),Ie.log(...t))},{check:()=>Mi.check(...i)})},check(...i){return i.length===0&&i.push(!0),Ub(ta("agChartsDebug")).some(t=>i.includes(t))}},fG=new Set(["map-shape-background","map-line-background"]),CD=class{constructor(i,e){var t,n,r;let s={shallow:["data"]},o=er(i,s),a=this.optionsType(o);this.sanityCheckAndCleanup(o),this.userOptions=o,this.activeTheme=ES(o.theme),this.defaultAxes=this.getDefaultAxes(o),this.specialOverrides=this.specialOverridesDefaults(ue({},e));let l=this.getSeriesThemeConfig(a),{axes:c={},annotations:u={},series:d}=l,h=Xi(l,["axes","annotations","series"]);this.processedOptions=er(kt(this.userOptions,h,this.defaultAxes),s),this.processAxesOptions(this.processedOptions,c),this.processSeriesOptions(this.processedOptions),this.processMiniChartSeriesOptions(this.processedOptions),this.processAnnotationsOptions(this.processedOptions,u),(du(this.processedOptions)||I5(this.processedOptions))&&((t=this.processedOptions.legend)==null?void 0:t.enabled)==null&&((r=(n=this.processedOptions).legend)!=null||(n.legend={}),this.processedOptions.legend.enabled=this.processedOptions.series.length>1),this.enableConfiguredOptions(this.processedOptions),sh.isEnterprise||L5(this.processedOptions)}getOptions(){var i;return(i=this.processedOptions)!=null?i:{}}diffOptions(i){return Ms(i,this.processedOptions)}getSeriesThemeConfig(i){var e,t;return er((t=(e=this.activeTheme)==null?void 0:e.config[i])!=null?t:{})}getDefaultAxes(i){let e=this.optionsType(i),t=Kr.cloneDefaultAxes(e);return Kr.isDefaultAxisSwapNeeded(i)&&this.swapAxesPosition(t),t}optionsType(i){var e,t,n;return(n=(t=(e=i.series)==null?void 0:e[0])==null?void 0:t.type)!=null?n:"line"}sanityCheckAndCleanup(i){var e;this.deprecationWarnings(i),this.axesTypeIntegrity(i),this.seriesTypeIntegrity(i),this.soloSeriesIntegrity(i),this.removeDisabledOptions(i),this.removeLeftoverSymbols(i),(e=i.series)!=null&&e.some(t=>t.type==="bullet")&&i.sync!=null&&i.sync.enabled!==!1&&(Ie.warnOnce("bullet series cannot be synced, disabling synchronization."),delete i.sync)}swapAxesPosition(i){var e;if(du(i)){let[t,n]=(e=i.axes)!=null?e:[];i.axes=[Ue(ue({},t),{position:n.position}),Ue(ue({},n),{position:t.position})]}}processAxesOptions(i,e){"axes"in i&&(i.axes=i.axes.map(t=>{var n,r,s;let o=kt((n=e[t.type])==null?void 0:n[t.position],e[t.type]),{crossLines:a}=o,l=Xi(o,["crossLines"]);t.crossLines&&(t.crossLines=Nb(t.crossLines,a));let c=(r=l.gridLine)==null?void 0:r.style;(s=t.gridLine)!=null&&s.style&&c?.length&&(t.gridLine.style=t.gridLine.style.map((f,y)=>f.stroke!=null||f.lineDash!=null?kt(f,c.at(y%c.length)):f));let u=kt(t,l),{top:d,right:h,bottom:p,left:m}=u;return Xi(u,["top","right","bottom","left"])}))}processSeriesOptions(i){let e=this.getDefaultSeriesType(i),t=this.getTooltipPositionDefaults(i),n=!!(Js(i.theme)&&i.theme.palette),r={colourIndex:0,userPalette:n},s=i.series.map(o=>{var a,l;(a=o.type)!=null||(o.type=e);let c=(l=this.getSeriesThemeConfig(o.type).series)!=null?l:{},{innerLabels:u}=c,d=Xi(c,["innerLabels"]),h=fG.has(o.type)?{colourIndex:0,userPalette:n}:r,p=this.getSeriesPalette(o.type,h),m=kt(this.getSeriesGroupingOptions(o),o,t,d,p);return m.innerLabels&&(m.innerLabels=Nb(m.innerLabels,u)),this.activeTheme.templateTheme(m)});i.series=this.setSeriesGroupingOptions(s)}processMiniChartSeriesOptions(i){var e,t;let n=(t=(e=i.navigator)==null?void 0:e.miniChart)==null?void 0:t.series;if(n==null)return;let r={colourIndex:0,userPalette:!!(Js(i.theme)&&i.theme.palette)};n=n.map(s=>{var o,a;(o=s.type)!=null||(s.type="line");let l=(a=this.getSeriesThemeConfig(s.type).series)!=null?a:{},{innerLabels:c}=l,u=Xi(l,["innerLabels"]),d=kt(this.getSeriesGroupingOptions(s),s,u,this.getSeriesPalette(s.type,r));return this.activeTheme.templateTheme(d)}),i.navigator.miniChart.series=this.setSeriesGroupingOptions(n)}processAnnotationsOptions(i,e){du(i)}getSeriesPalette(i,e){let t=Kr.getPaletteFactory(i),{colourIndex:n,userPalette:r}=e,{fills:s=[],strokes:o=[]}=this.activeTheme.palette;return t?.({userPalette:r,colorsCount:Math.max(s.length,o.length),themeTemplateParameters:this.activeTheme.getTemplateParameters(),takeColors(a){return e.colourIndex+=a,{fills:Hb(s,a,n),strokes:Hb(o,a,n)}}})}getSeriesGroupingOptions(i){let e=Kr.isGroupable(i.type),t=Kr.isStackable(i.type),n=Kr.isStackedByDefault(i.type);i.grouped&&!e&&Ie.warnOnce(`unsupported grouping of series type "${i.type}".`),(i.stacked||i.stackGroup)&&!t&&Ie.warnOnce(`unsupported stacking of series type "${i.type}".`);let{grouped:r,stacked:s}=i;return s??(s=(n||i.stackGroup!=null)&&!(e&&r)),r??(r=!0),{stacked:t&&s,grouped:e&&r&&!(t&&s)}}setSeriesGroupingOptions(i){let e=this.getSeriesGrouping(i);Mi.create(!0,"opts")("setSeriesGroupingOptions() - series grouping: ",e);let t={},n=e.reduce((r,s)=>{var o,a;return s.groupType==="default"||((a=r[o=s.seriesType])!=null||(r[o]=0),r[s.seriesType]+=s.groupType==="stack"?1:s.series.length),r},{});return e.flatMap(r=>{var s,o;switch((o=t[s=r.seriesType])!=null||(t[s]=0),r.groupType){case"stack":let a=t[r.seriesType]++;return r.series.map((l,c)=>Object.assign(l,{seriesGrouping:{groupIndex:a,groupCount:n[r.seriesType],stackIndex:c,stackCount:r.series.length}}));case"group":return r.series.map(l=>Object.assign(l,{seriesGrouping:{groupIndex:t[r.seriesType]++,groupCount:n[r.seriesType],stackIndex:0,stackCount:0}}))}return r.series}).map(r=>{var s=r,{stacked:o,grouped:a}=s,l=Xi(s,["stacked","grouped"]);return l})}getSeriesGroupId(i){var e;return[i.type,i.xKey,i.stacked?(e=i.stackGroup)!=null?e:"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(i){let e=new Map;return i.reduce((t,n)=>{let r=n.type;if(!n.stacked&&!n.grouped)t.push({groupType:"default",seriesType:r,series:[n]});else{let s=this.getSeriesGroupId(n);if(!e.has(s)){let a={groupType:n.stacked?"stack":"group",seriesType:r,series:[]};e.set(s,a),t.push(a)}e.get(s).series.push(n)}return t},[])}getDefaultSeriesType(i){if(du(i))return"line";if(vv(i))return"pie";if(yS(i))return"treemap";if(CS(i))return"map-shape";throw new Error("Invalid chart options type detected.")}getTooltipPositionDefaults(i){var e;let t=(e=i.tooltip)==null?void 0:e.position;if(!Ts(t))return;let{type:n,xOffset:r,yOffset:s}=t,o={};return qr(n)&&ZP(mS,n)&&(o.type=n),qt(r)&&(o.xOffset=r),qt(s)&&(o.yOffset=s),{tooltip:{position:o}}}deprecationWarnings(i){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([t,n])=>{var r;(r=i.series)!=null&&r.some(s=>s[t]!=null)&&Ie.warnOnce(`Property [series.${t}] is deprecated, please use [series.${n}] and multiple series instead.`)})}axesTypeIntegrity(i){var e;if("axes"in i){let t=(e=i.axes)!=null?e:[];for(let{type:n}of t)if(!O5(n)){delete i.axes;let r=Array.from(Kl.publicKeys()).join(", ");Ie.warnOnce(`unknown axis type: ${n}; expected one of: ${r}`)}}}seriesTypeIntegrity(i){var e;let t=(e=i.series)!=null?e:[];i.series=t.filter(({type:n})=>{if(n==null||F5(n)||w5(n))return!0;Ie.warnOnce(`unknown series type: ${n}; expected one of: ${eD.seriesTypes.join(", ")}`)})}soloSeriesIntegrity(i){let e=i.series;if(e&&e.length>1&&e.some(t=>Kr.isSolo(t.type))){let t=this.optionsType(i);if(Kr.isSolo(t))Ie.warn(`series[0] of type '${t}' is incompatible with other series types. Only processing series[0]`),i.series=e.slice(0,1);else{let{solo:n,nonSolo:r}=MS(e,o=>Kr.isSolo(o.type)?"solo":"nonSolo"),s=TS(n.map(o=>o.type)).join(", ");Ie.warn(`Unable to mix these series types with the lead series type: ${s}`),i.series=r}}}enableConfiguredOptions(i){Yo(this.userOptions,(e,t)=>{t&&"enabled"in t&&!t._enabledFromTheme&&e.enabled==null&&(t.enabled=!0)},{skip:["data","theme"]},i),Yo(i,e=>{e._enabledFromTheme!=null&&delete e._enabledFromTheme},{skip:["data","theme"]})}removeDisabledOptions(i){Yo(i,e=>{"enabled"in e&&e.enabled===!1&&Object.keys(e).forEach(t=>{t!=="enabled"&&delete e[t]})},{skip:["data","theme"]})}removeLeftoverSymbols(i){Yo(i,e=>{if(!(!e||!Js(e)))for(let[t,n]of Object.entries(e))QP(n)&&delete e[t]},{skip:["data"]})}specialOverridesDefaults(i){if(i.window!=null?yD(i.window):typeof window<"u"?i.window=window:typeof global<"u"&&(i.window=global.window),i.document!=null?vD(i.document):typeof document<"u"?i.document=document:typeof global<"u"&&(i.document=global.document),i.window==null)throw new Error("AG Charts - unable to resolve global window");if(i.document==null)throw new Error("AG Charts - unable to resolve global document");return i}};function yv(){return(i,e)=>{let t=[`Property [${i}] is deprecated.`,e].filter(Boolean).join(" ");Ie.warnOnce(t)}}function xu(i,e){let t=yv(),n=e?.default;return $a((r,s,o)=>(o!==n&&t(s.toString(),i),o))}function vG(i,e){let t=yv();return $a((n,r,s)=>(s!==n[i]&&(t(r.toString(),`Use [${i}] instead.`),vS(n,i,e?e(s):s)),q0),(n,r)=>(t(r.toString(),`Use [${i}] instead.`),gS(n,i)))}var bD={};na(bD,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>dr,fromToMotion:()=>Ei,staticFromToMotion:()=>oa});var zb=new Map;function SD(){zb.clear()}function sa(i){var e;let t=i.constructor,n=Object.hasOwn(t,"className")?t.className:t.name;if(!n)throw new Error(`The ${t} is missing the 'className' property.`);let r=((e=zb.get(n))!=null?e:0)+1;return zb.set(n,r),`${n}-${r}`}var Cv="$interpolate",j6=i=>i[Cv]!=null;function Dt(i,e,t){return Math.min(t,Math.max(i,e))}function J0(i,e){let[t,n]=eo(e);return Dt(t,i,n)}function eo(i){return i.length?[Math.min(...i),Math.max(...i)]:[]}function hm(i){let[e,t]=eo(i);return t-e}function pu(i,e,t=1e-10){return Math.abs(i-e)<t}function Fm(i){return Math.sign(i)===-1||Object.is(i,-0)}function AS(i,e=2){let t=mt(10,e);return Math.round(i*t)/t}function bv(i,e=2){let t=Math.floor(Math.log(Math.abs(i))/Math.LN10);return t>=0||!isFinite(t)?i.toFixed(e):i.toFixed(Math.abs(t)-1+e)}function Sv(i,e){return Math.floor(i%e+(i<0?e:0))}function PS(i,e=10){let[,t=""]=(Math.abs(i)%1).toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:e}).split(".");return t.length}function xv(i,e,t,n=1/0){let r={nearest:void 0,distanceSquared:n};for(let s of t){let o=s.distanceSquared(i,e);if(o===0)return{nearest:s,distanceSquared:0};o<r.distanceSquared&&(r.nearest=s,r.distanceSquared=o)}return r}function yG(i,e,t,n=1/0){let{x:r,y:s}=t.transformPoint(i,e),o={nearest:void 0,distanceSquared:n};for(let a of t.children){let{nearest:l,distanceSquared:c}=a.nearestSquared(r,s,o.distanceSquared);if(c===0)return{nearest:l,distanceSquared:c};c<o.distanceSquared&&(o.nearest=l,o.distanceSquared=c)}return o}var pm=class G0{constructor(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r}clone(){let{x:e,y:t,width:n,height:r}=this;return new G0(e,t,n,r)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}containsPoint(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height}collidesBBox(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(e,t){if(this.containsPoint(e,t))return 0;let n=e-Dt(this.x,e,this.x+this.width),r=t-Dt(this.y,t,this.y+this.height);return n*n+r*r}static nearestBox(e,t,n){return xv(e,t,n)}clip(e){if(e===void 0)return this;let t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.y=n,this.width=Math.max(0,r-t),this.height=Math.max(0,s-n),this}shrink(e,t){let n=(r,s)=>{switch(r){case"top":this.y+=s;case"bottom":this.height-=s;break;case"left":this.x+=s;case"right":this.width-=s;break;case"vertical":this.y+=s,this.height-=s*2;break;case"horizontal":this.x+=s,this.width-=s*2;break;case void 0:this.x+=s,this.width-=s*2,this.y+=s,this.height-=s*2;break;default:}};return typeof e=="number"?n(t,e):typeof e=="object"&&Object.entries(e).forEach(([r,s])=>n(r,s)),this}grow(e,t){if(typeof e=="number")this.shrink(-e,t);else{let n=ue({},e);for(let r in n)n[r]*=-1;this.shrink(n)}return this}combine(e){let{x:t,y:n,width:r,height:s}=this;this.x=Math.min(t,e.x),this.y=Math.min(n,e.y),this.width=Math.max(t+r,e.x+e.width)-this.x,this.height=Math.max(n+s,e.y+e.height)-this.y}static merge(e){let t=1/0,n=1/0,r=-1/0,s=-1/0;for(let o of e)o.x<t&&(t=o.x),o.y<n&&(n=o.y),o.x+o.width>r&&(r=o.x+o.width),o.y+o.height>s&&(s=o.y+o.height);return new G0(t,n,r-t,s-n)}[Cv](e,t){return new G0(this.x*(1-t)+e.x*t,this.y*(1-t)+e.y*t,this.width*(1-t)+e.width*t,this.height*(1-t)+e.height*t)}};pm.zero=new pm(0,0,0,0);pm.NaN=new pm(NaN,NaN,NaN,NaN);var nt=pm,Wl=(i=>(i[i.NONE=0]="NONE",i[i.TRIVIAL=1]="TRIVIAL",i[i.MINOR=2]="MINOR",i[i.MAJOR=3]="MAJOR",i))(Wl||{});function CG(){try{return new Function("return true"),!0}catch{return!1}}var bG=CG();function Ze(i){let{changeCb:e,convertor:t}=i??{};return function(n,r){let s=`__${r}`;n[r]||(bG&&e==null&&t==null?SG(n,r,s,i):xG(n,r,s,i))}}function SG(i,e,t,n){let{redraw:r=1,type:s="normal",checkDirtyOnAssignment:o=!1}=n??{},a=new Function("value",`
        const oldValue = this.${t};
        if (value !== oldValue) {
            this.${t} = value;
            ${s==="normal"?`this.markDirty(this, ${r});`:""}
            ${s==="transform"?`this.markDirtyTransform(${r});`:""}
            ${s==="path"?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${r}); }`:""}
            ${s==="font"?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${r}); }`:""}
        }
        ${o?"if (value != null && value._dirty > 0) { this.markDirty(value, value._dirty); }":""}
`),l=new Function(`return this.${t};`);Object.defineProperty(i,e,{set:a,get:l,enumerable:!0,configurable:!0})}function xG(i,e,t,n){let{redraw:r=1,type:s="normal",changeCb:o,convertor:a,checkDirtyOnAssignment:l=!1}=n??{};Object.defineProperty(i,e,{set:function(d){let h=this[t];d=a?a(d):d,d!==h&&(this[t]=d,s==="normal"&&this.markDirty(this,r),s==="transform"&&this.markDirtyTransform(r),s==="path"&&!this._dirtyPath&&(this._dirtyPath=!0,this.markDirty(this,r)),s==="font"&&!this._dirtyFont&&(this._dirtyFont=!0,this.markDirty(this,r)),o?.(this)),l&&d!=null&&d._dirty>0&&this.markDirty(d,d._dirty)},get:function(){return this[t]},enumerable:!0,configurable:!0})}var _G=class{constructor(){this._dirty=3}markDirty(i,e=1){this._dirty<e&&(this._dirty=e)}markClean(i){this._dirty=0}isDirty(){return this._dirty>0}},Wb=class Xp{get e(){return[...this.elements]}constructor(e=[1,0,0,1,0,0]){this.elements=e}setElements(e){let t=this.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],this}get identity(){let e=this.elements;return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1&&e[4]===0&&e[5]===0}AxB(e,t,n){let r=e[0]*t[0]+e[2]*t[1],s=e[1]*t[0]+e[3]*t[1],o=e[0]*t[2]+e[2]*t[3],a=e[1]*t[2]+e[3]*t[3],l=e[0]*t[4]+e[2]*t[5]+e[4],c=e[1]*t[4]+e[3]*t[5]+e[5];n=n??e,n[0]=r,n[1]=s,n[2]=o,n[3]=a,n[4]=l,n[5]=c}multiplySelf(e){return this.AxB(this.elements,e.elements),this}multiply(e){let t=new Array(6);return this.AxB(this.elements,e.elements,t),new Xp(t)}preMultiplySelf(e){return this.AxB(e.elements,this.elements,this.elements),this}inverse(){let e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=1/(t*s-n*r);return t*=l,n*=l,r*=l,s*=l,new Xp([s,-n,-r,t,r*a-s*o,n*o-t*a])}inverseTo(e){let t=this.elements,n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=1/(n*o-r*s);return n*=c,r*=c,s*=c,o*=c,e.setElements([o,-r,-s,n,s*l-o*a,r*a-n*l]),this}invertSelf(){let e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=1/(t*s-n*r);return t*=l,n*=l,r*=l,s*=l,e[0]=s,e[1]=-n,e[2]=-r,e[3]=t,e[4]=r*a-s*o,e[5]=n*o-t*a,this}transformPoint(e,t){let n=this.elements;return{x:e*n[0]+t*n[2]+n[4],y:e*n[1]+t*n[3]+n[5]}}transformBBox(e,t){let n=this.elements,r=n[0],s=n[1],o=n[2],a=n[3],l=e.width*.5,c=e.height*.5,u=e.x+l,d=e.y+c,h=Math.abs(l*r)+Math.abs(c*o),p=Math.abs(l*s)+Math.abs(c*a);return t||(t=new nt(0,0,0,0)),t.x=u*r+d*o+n[4]-h,t.y=u*s+d*a+n[5]-p,t.width=h+h,t.height=p+p,t}toContext(e){if(this.identity)return;let t=this.elements;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}static flyweight(e){return Xp.instance.setElements(e.elements)}static updateTransformMatrix(e,t,n,r,s,o,a){let[l,c]=[0,0],u=t,d=n,h,p;u===1&&d===1?(h=0,p=0):(h=a?.scalingCenterX==null?l:a?.scalingCenterX,p=a?.scalingCenterY==null?c:a?.scalingCenterY);let m=r,g=Math.cos(m),f=Math.sin(m),y,b;m===0?(y=0,b=0):(y=a?.rotationCenterX==null?l:a?.rotationCenterX,b=a?.rotationCenterY==null?c:a?.rotationCenterY);let v=s,S=o,w=h*(1-u)-y,T=p*(1-d)-b;return e.setElements([g*u,f*u,-f*d,g*d,g*w-f*T+y+v,f*w+g*T+b+S]),e}static fromContext(e){let t=e.getTransform();return new Xp([t.a,t.b,t.c,t.d,t.e,t.f])}};Wb.instance=new Wb;var qo=Wb,xD=(i=>(i[i.All=0]="All",i[i.None=1]="None",i))(xD||{}),Zr=(()=>{let i=class _D extends _G{constructor({isVirtual:t,tag:n,zIndex:r}={}){super(),this.serialNumber=_D._nextSerialNumber++,this.id=sa(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new qo,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this._childNodeCounts={groups:0,nonGroups:0},this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=0,this.isVirtual=t??!1,this.tag=n??NaN,this.zIndex=r??0}get datum(){var t,n;return(n=this._datum)!=null?n:(t=this._parent)==null?void 0:t.datum}get previousDatum(){return this._previousDatum}set datum(t){this._datum!==t&&(this._previousDatum=this._datum),this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=t?.debug;for(let n of this._children)n._setLayerManager(t);for(let n of this._virtualChildren)n._setLayerManager(t)}get layerManager(){return this._layerManager}*ancestors(){let t=this;for(;t=t.parent;)yield t}*traverseUp(){yield this,yield*hf(pS(this.ancestors()))}get parent(){return this._parent}get children(){return this._virtualChildren.length?this._children.concat(this._virtualChildren.flatMap(t=>t.children)):this._children}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(t,n){let r=n??Object.keys(t);for(let s of r)this[s]=t[s];return this}append(t){Array.isArray(t)||(t=[t]);for(let n of t){if(n.parent)throw new Error(`${n} already belongs to another parent: ${n.parent}.`);if(n.layerManager)throw new Error(`${n} already belongs to a scene: ${n.layerManager}.`);if(this.childSet[n.id])throw new Error(`Duplicate ${n.constructor.name} node: ${n}`);n.isVirtual?this._virtualChildren.push(n):this._children.push(n),this.childSet[n.id]=!0,n._parent=this,n._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,3)}appendChild(t){return this.append(t),t}removeChild(t){let n=()=>{throw new Error("The node to be removed is not a child of this node.")};if(t.parent!==this&&n(),t.isVirtual){let r=this._virtualChildren.indexOf(t);r<0&&n(),this._virtualChildren.splice(r,1)}else{let r=this._children.indexOf(t);r<0&&n(),this._children.splice(r,1)}return delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,3),t}calculateCumulativeMatrix(){this.computeTransformMatrix();let t=qo.flyweight(this.matrix);for(let n of this.ancestors())n.computeTransformMatrix(),t.preMultiplySelf(n.matrix);return t}transformPoint(t,n){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,n)}inverseTransformPoint(t,n){return this.calculateCumulativeMatrix().transformPoint(t,n)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,3)}containsPoint(t,n){return!1}pickNode(t,n){var r;if(!this.visible||this.pointerEvents===1||!this.containsPoint(t,n))return;let{children:s}=this;if(s.length>1e3)for(let o=s.length-1;o>=0;o--){let a=s[o],c=((r=a.computeTransformedBBox())==null?void 0:r.containsPoint(t,n))?a.pickNode(t,n):void 0;if(c)return c}else if(s.length)for(let o=s.length-1;o>=0;o--){let a=s[o].pickNode(t,n);if(a)return a}else if(!this.isContainerNode)return this}getCachedBBox(){var t;return(t=this.cachedBBox)!=null?t:nt.zero}computeBBox(){}computeTransformedBBox(){let t=this.computeBBox();if(!t)return;this.computeTransformMatrix();let n=qo.flyweight(this.matrix);for(let r of this.ancestors())r.computeTransformMatrix(),n.preMultiplySelf(r.matrix);return n.transformBBox(t,t),t}computeTransformMatrix(){if(!this.dirtyTransform)return;let{matrix:t,scalingX:n,scalingY:r,rotation:s,translationX:o,translationY:a,scalingCenterX:l,scalingCenterY:c,rotationCenterX:u,rotationCenterY:d}=this;qo.updateTransformMatrix(t,n,r,s,o,a,{scalingCenterX:l,scalingCenterY:c,rotationCenterX:u,rotationCenterY:d}),this.dirtyTransform=!1}preRender(){this._childNodeCounts.groups=0,this._childNodeCounts.nonGroups=1;for(let t of this.children){let n=t.preRender();this._childNodeCounts.groups+=n.groups,this._childNodeCounts.nonGroups+=n.nonGroups}return this._childNodeCounts}render(t){let{stats:n}=t;this._dirty=0,this.cachedBBox=this.computeBBox(),n&&n.nodesRendered++}markDirty(t,n=1,r=n){this._dirty>n||this._dirty===n&&n===r||(this._dirty=n,this.parent?this.parent.markDirty(this,r):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){let{force:n=!1,recursive:r=!0}=t??{};if(!(this._dirty===0&&!n)){if(this._dirty=0,r!==!1)for(let s of this._virtualChildren)s.markClean({force:n});if(r===!0)for(let s of this._children)s.markClean({force:n})}}onVisibleChange(){}get nodeCount(){let t=1,n=this._dirty>=0||this.dirtyTransform?1:0,r=this.visible?1:0,s=o=>{let{count:a,visibleCount:l,dirtyCount:c}=o.nodeCount;t+=a,r+=l,n+=c};for(let o of this._children)s(o);for(let o of this._virtualChildren)s(o);return{count:t,visibleCount:r,dirtyCount:n}}onZIndexChange(){this.parent&&(this.parent.dirtyZIndex=!0)}};return i._nextSerialNumber=0,i})();E([Ze({type:"transform"})],Zr.prototype,"scalingX",2);E([Ze({type:"transform"})],Zr.prototype,"scalingY",2);E([Ze({type:"transform"})],Zr.prototype,"scalingCenterX",2);E([Ze({type:"transform"})],Zr.prototype,"scalingCenterY",2);E([Ze({type:"transform"})],Zr.prototype,"rotationCenterX",2);E([Ze({type:"transform"})],Zr.prototype,"rotationCenterY",2);E([Ze({type:"transform"})],Zr.prototype,"rotation",2);E([Ze({type:"transform"})],Zr.prototype,"translationX",2);E([Ze({type:"transform"})],Zr.prototype,"translationY",2);E([Ze({redraw:3,changeCb:i=>i.onVisibleChange()})],Zr.prototype,"visible",2);E([Ze({redraw:1,changeCb:i=>i.onZIndexChange()})],Zr.prototype,"zIndex",2);E([Ze({redraw:1,changeCb:i=>i.onZIndexChange()})],Zr.prototype,"zIndexSubOrder",2);var Mh=Zr,bb=i=>{let e=i<0?-1:1,t=Math.abs(i);return t<=.04045?i/12.92:e*mt((t+.055)/1.055,2.4)},Sb=i=>{let e=i<0?-1:1,t=Math.abs(i);return t>.0031308?e*(1.055*mt(t,1/2.4)-.055):12.92*i},DS=class Yt{constructor(e,t,n,r=1){this.r=Dt(0,e||0,1),this.g=Dt(0,t||0,1),this.b=Dt(0,n||0,1),this.a=Dt(0,r||0,1)}static validColorString(e){return e.indexOf("#")>=0?!!Yt.parseHex(e):e.indexOf("rgb")>=0?!!Yt.stringToRgba(e):!!Yt.nameToHex[e.toLowerCase()]}static fromString(e){if(e.indexOf("#")>=0)return Yt.fromHexString(e);let t=Yt.nameToHex[e.toLowerCase()];if(t)return Yt.fromHexString(t);if(e.indexOf("rgb")>=0)return Yt.fromRgbaString(e);throw new Error(`Invalid color string: '${e}'`)}static tryParseFromString(e){try{return Yt.fromString(e)}catch{return Ie.warnOnce(`invalid color string: '${e}'.`),Yt.fromArray([0,0,0])}}static parseHex(e){e=e.replace(/ /g,"").slice(1);let t;switch(e.length){case 6:case 8:t=[];for(let n=0;n<e.length;n+=2)t.push(parseInt(`${e[n]}${e[n+1]}`,16));break;case 3:case 4:t=e.split("").map(n=>parseInt(n,16)).map(n=>n+n*16);break}if(t?.length>=3&&t.every(n=>n>=0))return t.length===3&&t.push(255),t}static fromHexString(e){let t=Yt.parseHex(e);if(t){let[n,r,s,o]=t;return new Yt(n/255,r/255,s/255,o/255)}throw new Error(`Malformed hexadecimal color string: '${e}'`)}static stringToRgba(e){let[t,n]=[NaN,NaN];for(let a=0;a<e.length;a++){let l=e[a];if(!t&&l==="(")t=a;else if(l===")"){n=a;break}}let r=t&&n&&e.substring(t+1,n);if(!r)return;let s=r.split(","),o=[];for(let a=0;a<s.length;a++){let l=s[a],c=parseFloat(l);if(isNaN(c))return;l.indexOf("%")>=0?(c=Dt(0,c,100),c/=100):a===3?c=Dt(0,c,1):(c=Dt(0,c,255),c/=255),o.push(c)}return o}static fromRgbaString(e){let t=Yt.stringToRgba(e);if(t){if(t.length===3)return new Yt(t[0],t[1],t[2]);if(t.length===4)return new Yt(t[0],t[1],t[2],t[3])}throw new Error(`Malformed rgb/rgba color string: '${e}'`)}static fromArray(e){if(e.length===4)return new Yt(e[0],e[1],e[2],e[3]);if(e.length===3)return new Yt(e[0],e[1],e[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(e,t,n,r=1){let s=Yt.HSBtoRGB(e,t,n);return new Yt(s[0],s[1],s[2],r)}static fromHSL(e,t,n,r=1){let s=Yt.HSLtoRGB(e,t,n);return new Yt(s[0],s[1],s[2],r)}static fromOKLCH(e,t,n,r=1){let s=Yt.OKLCHtoRGB(e,t,n);return new Yt(s[0],s[1],s[2],r)}static padHex(e){return e.length===1?"0"+e:e}toHexString(){let e="#"+Yt.padHex(Math.round(this.r*255).toString(16))+Yt.padHex(Math.round(this.g*255).toString(16))+Yt.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(e+=Yt.padHex(Math.round(this.a*255).toString(16))),e}toRgbaString(e=3){let t=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],n=Math.pow(10,e);return this.a!==1?(t.push(Math.round(this.a*n)/n),`rgba(${t.join(", ")})`):`rgb(${t.join(", ")})`}toString(){return this.a===1?this.toHexString():this.toRgbaString()}toHSB(){return Yt.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(e,t,n){let r=bb(e),s=bb(t),o=bb(n),a=Math.cbrt(.4122214708*r+.5363325363*s+.0514459929*o),l=Math.cbrt(.2119034982*r+.6806995451*s+.1073969566*o),c=Math.cbrt(.0883024619*r+.2817188376*s+.6299787005*o),u=.2104542553*a+.793617785*l-.0040720468*c,d=1.9779984951*a-2.428592205*l+.4505937099*c,h=.0259040371*a+.7827717662*l-.808675766*c,p=Math.atan2(h,d)*180/Math.PI,m=u,g=Math.hypot(d,h),f=p>=0?p:p+360;return[m,g,f]}static OKLCHtoRGB(e,t,n){let r=e,s=t*Math.cos(n*Math.PI/180),o=t*Math.sin(n*Math.PI/180),a=mt(r+.3963377774*s+.2158037573*o,3),l=mt(r-.1055613458*s-.0638541728*o,3),c=mt(r-.0894841775*s-1.291485548*o,3),u=4.0767416621*a-3.3077115913*l+.2309699292*c,d=-1.2684380046*a+2.6097574011*l-.3413193965*c,h=-.0041960863*a-.7034186147*l+1.707614701*c,p=Sb(u),m=Sb(d),g=Sb(h);return[p,m,g]}static RGBtoHSL(e,t,n){let r=Math.min(e,t,n),s=Math.max(e,t,n),o=(s+r)/2,a,l;if(s===r)a=NaN,l=0;else{let c=s-r;l=o>.5?c/(2-s-r):c/(s+r),s===e?a=(t-n)/c+(t<n?6:0):s===t?a=(n-e)/c+2:a=(e-t)/c+4,a*=360/6}return[a,l,o]}static HSLtoRGB(e,t,n){if(t===0)return[n,n,n];let r=n<.5?n*(1+t):n+t-n*t,s=2*n-r;function o(u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?s+(r-s)*6*u:u<1/2?r:u<2/3?s+(r-s)*(2/3-u)*6:s}let a=o(e/360+1/3),l=o(e/360),c=o(e/360-1/3);return[a,l,c]}static RGBtoHSB(e,t,n){let r=Math.min(e,t,n),s=Math.max(e,t,n),o=s===0?0:(s-r)/s,a=NaN;if(r!==s){let l=s-r,c=(s-e)/l,u=(s-t)/l,d=(s-n)/l;e===s?a=d-u:t===s?a=2+c-d:a=4+u-c,a/=6,a<0&&(a=a+1)}return[a*360,o,s]}static HSBtoRGB(e,t,n){isNaN(e)&&(e=0),e=(e%360+360)%360/360;let r=0,s=0,o=0;if(t===0)r=s=o=n;else{let a=(e-Math.floor(e))*6,l=a-Math.floor(a),c=n*(1-t),u=n*(1-t*l),d=n*(1-t*(1-l));switch(a>>0){case 0:r=n,s=d,o=c;break;case 1:r=u,s=n,o=c;break;case 2:r=c,s=n,o=d;break;case 3:r=c,s=u,o=n;break;case 4:r=d,s=c,o=n;break;case 5:r=n,s=c,o=u;break}}return[r,s,o]}derive(e,t,n,r){let s=Yt.RGBtoHSB(this.r,this.g,this.b),o=s[2];o==0&&n>1&&(o=.05);let a=((s[0]+e)%360+360)%360,l=Dt(0,s[1]*t,1);o=Dt(0,o*n,1);let c=Dt(0,this.a*r,1),u=Yt.HSBtoRGB(a,l,o);return u.push(c),Yt.fromArray(u)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(e,t){let n=Yt.tryParseFromString(e),r=Yt.tryParseFromString(t);return s=>{let o=(l,c)=>l*(1-s)+c*s;return new Yt(o(n.r,r.r),o(n.g,r.g),o(n.b,r.b),o(n.a,r.a)).toString()}}};DS.didDebug=!1;DS.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});var jo=DS;function Zp(i,e){return t=>Number(i)*(1-t)+Number(e)*t}function wG(i,e){if(typeof i=="string")try{i=jo.fromString(i)}catch{i=jo.fromArray([0,0,0])}if(typeof e=="string")try{e=jo.fromString(e)}catch{e=jo.fromArray([0,0,0])}let t=Zp(i.r,e.r),n=Zp(i.g,e.g),r=Zp(i.b,e.b),s=Zp(i.a,e.a);return o=>jo.fromArray([t(o),n(o),r(o),s(o)]).toRgbaString()}var kS={};na(kS,{easeIn:()=>EG,easeInOut:()=>TG,easeInOutQuad:()=>PG,easeInQuad:()=>MG,easeOut:()=>mm,easeOutQuad:()=>AG,inverseEaseOut:()=>ED,linear:()=>wD});var wD=i=>i,EG=i=>1-Math.cos(i*Math.PI/2),mm=i=>Math.sin(i*Math.PI/2),TG=i=>-(Math.cos(i*Math.PI)-1)/2,MG=i=>i*i,AG=i=>1-mt(1-i,2),PG=i=>i<.5?2*i*i:1-mt(-2*i+2,2)/2,ED=i=>2*Math.asin(i)/Math.PI,ev=.2,eh=["initial","remove","update","add","trailing","end","none"],gm={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:ev,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1+ev,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},TD=(i=>(i.Loop="loop",i.Reverse="reverse",i))(TD||{});function DG(i){return i.every(e=>e instanceof Mh)}function _v(i){return DG(i)?{nodes:i,selections:[]}:{nodes:[],selections:i}}var MD=class{constructor(i){this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1;var e,t,n,r,s,o,a;this.id=i.id,this.groupId=i.groupId,this.autoplay=(e=i.autoplay)!=null?e:!0,this.ease=(t=i.ease)!=null?t:wD,this.phase=i.phase;let l=(n=i.duration)!=null?n:gm[this.phase].animationDuration;this.duration=l*i.defaultDuration,this.delay=((r=i.delay)!=null?r:0)*i.defaultDuration,this.onComplete=i.onComplete,this.onPlay=i.onPlay,this.onStop=i.onStop,this.onUpdate=i.onUpdate,this.interpolate=this.createInterpolator(i.from,i.to),this.from=i.from,i.skip===!0&&((s=this.onUpdate)==null||s.call(this,i.to,!1,this),(o=this.onStop)==null||o.call(this,this),(a=this.onComplete)==null||a.call(this,this),this.isComplete=!0),i.collapsable!==!1&&(this.duration=this.checkCollapse(i,this.duration))}checkCollapse(i,e){return i.from===i.to?0:(typeof i.from=="object"?Ms(i.from,i.to):null)?e:0}play(i=!1){var e,t;this.isPlaying||this.isComplete||(this.isPlaying=!0,(e=this.onPlay)==null||e.call(this,this),this.autoplay&&(this.autoplay=!1,i&&((t=this.onUpdate)==null||t.call(this,this.from,!0,this))))}pause(){this.isPlaying=!1}stop(){var i;this.isPlaying=!1,this.isComplete||(this.isComplete=!0,(i=this.onStop)==null||i.call(this,this))}update(i){var e,t;if(this.isComplete)return i;!this.isPlaying&&this.autoplay&&this.play(!0);let n=this.elapsed;if(this.elapsed+=i,this.delay>this.elapsed)return 0;let r=this.interpolate(this.isReverse?1-this.delta:this.delta);(e=this.onUpdate)==null||e.call(this,r,!1,this);let s=this.delay+this.duration;return this.elapsed>=s?(this.stop(),this.isComplete=!0,(t=this.onComplete)==null||t.call(this,this),i-(s-n)):0}get delta(){return this.ease(Dt(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(i,e){if(typeof e!="object"||j6(e))return this.interpolateValue(i,e);let t=[];for(let n in e){let r=this.interpolateValue(i[n],e[n]);r!=null&&t.push([n,r])}return n=>{let r={};for(let[s,o]of t)r[s]=o(n);return r}}interpolateValue(i,e){if(!(i===void 0||e===void 0)){if(j6(i))return t=>i[Cv](e,t);try{switch(typeof i){case"number":return Zp(i,e);case"string":return wG(i,e);case"boolean":if(i===e)return()=>i;break}}catch{}throw new Error(`Unable to interpolate values: ${i}, ${e}`)}}},dr={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function Ei(i,e,t,n,r,s,o){let{fromFn:a,toFn:l,intermediateFn:c}=r,{nodes:u,selections:d}=_v(n),h=(m,g)=>{var f;let y,b=0,v=0;for(let S of g){let w=m[b]===S,T={last:v>=g.length-1,lastLive:b>=m.length-1,prev:g[v-1],prevFromProps:y,prevLive:m[b-1],next:g[v+1],nextLive:m[b+(w?1:0)]},D=`${i}_${e}_${S.id}`;t.stopByAnimationId(D);let O="unknown";w?s&&o&&(O=kG(S,S.datum,s,o)):O="removed";let R=a(S,S.datum,O,T),{phase:L,start:B,finish:$,delay:U,duration:K}=R,ie=Xi(R,["phase","start","finish","delay","duration"]),te=l(S,S.datum,O,T),{phase:j,start:Y,finish:se,delay:me,duration:re}=te,ve=Xi(te,["phase","start","finish","delay","duration"]),_e=$==null&&se==null;t.animate({id:D,groupId:i,phase:(f=L??j)!=null?f:"update",duration:K??re,delay:U??me,from:ie,to:ve,ease:mm,collapsable:_e,onPlay:()=>{S.setProperties(ue(ue({},B),Y))},onUpdate(Ge){S.setProperties(Ge),c&&S.setProperties(c(S,S.datum,O,T))},onStop:()=>{S.setProperties(ue(ue(ue(ue(ue(ue({},B),Y),ie),ve),$),se))}}),w&&b++,v++,y=ie}},p=0;for(let m of d){let g=m.nodes(),f=g.filter(y=>!m.isGarbage(y));h(f,g),t.animate({id:`${i}_${e}_selection_${p}`,groupId:i,phase:"end",from:0,to:1,ease:mm,onStop(){m.cleanup()}}),p++}h(u,u)}function oa(i,e,t,n,r,s,o){let{nodes:a,selections:l}=_v(n),{start:c,finish:u,phase:d}=o,h=u==null;t.animate({id:`${i}_${e}`,groupId:i,phase:d??"update",from:r,to:s,ease:mm,collapsable:h,onPlay:()=>{if(c){for(let p of a)p.setProperties(c);for(let p of l)for(let m of p.nodes())m.setProperties(c)}},onUpdate(p){for(let m of a)m.setProperties(p);for(let m of l)for(let g of m.nodes())g.setProperties(p)},onStop:()=>{for(let p of a)p.setProperties(ue(ue({},s),u));for(let p of l)for(let m of p.nodes())m.setProperties(ue(ue({},s),u))}})}function kG(i,e,t,n){let r=t(i,e);return n.added.has(r)?"added":n.removed.has(r)?"removed":"updated"}var Xo=Math.PI*2;function $i(i){return i%=Xo,i+=Xo,i%=Xo,i}function AD(i){return i%=Xo,i+=Xo,i!==Xo&&(i%=Xo),i}function fm(i){return i%=Xo,i<-Math.PI?i+=Xo:i>=Math.PI&&(i-=Xo),i}function Om(i,e,t){let n=$i(i),r=$i(e),s=AD(t);return r<=s?r<=n&&n<=s:r<=n||n<=s}function ir(i){return i/180*Math.PI}function IG(i){return i/Math.PI*180}function wv(i,e){return i=$i(i),e=$i(e),e-i+(i>e?2*Math.PI:0)}function PD(i,e,t,n){let r=i+t*Math.cos(n),s=e+t*Math.sin(n);return{x:r,y:s}}var Rn=(i,e)=>{let t=Symbol(String(e));i[t]=void 0,Object.defineProperty(i,e,{get(){return this[t]},set(n){this[t]!==n&&(this[t]=n,this.invalid=!0)},enumerable:!0,configurable:!1})},Ev=class DD{constructor(){this.type="band",this.invalid=!0,this.interval=void 0,this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._step=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}static is(e){return e instanceof DD}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&Ie.warnOnce("Expected update to not invalidate scale"))}set domain(e){this.invalid=!0;let t=[];this.index=new Map;let n=this.index;e.forEach(r=>{this.getIndex(r)===void 0&&n.set(r,t.push(r)-1)}),this._domain=t}get domain(){return this._domain}ticks(){this.refresh();let{interval:e=1}=this;typeof e!="number"&&(e=Number(e));let t=Math.abs(Math.round(e));return this._domain.filter((n,r)=>r%t===0)}convert(e){this.refresh();let t=this.getIndex(e);if(t===void 0)return NaN;let n=this.ordinalRange[t];return n===void 0?NaN:n}invert(e){this.refresh();let t=this.ordinalRange.findIndex(n=>n===e);return this.domain[t]}invertNearest(e){var t;this.refresh();let n=-1,r=1/0,s=this.ordinalRange.findIndex((o,a)=>{if(o===e)return!0;let l=Math.abs(e-o);return l<r&&(r=l,n=a),!1});return(t=this.domain[s])!=null?t:this.domain[n]}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(e){e=Dt(0,e,1),this._paddingInner=e,this._paddingOuter=e}get padding(){return this._paddingInner}set paddingInner(e){this._paddingInner=Dt(0,e,1)}get paddingInner(){return this._paddingInner}set paddingOuter(e){this._paddingOuter=Dt(0,e,1)}get paddingOuter(){return this._paddingOuter}update(){let e=this._domain.length;if(e===0)return;let t=this.round,n=this._paddingInner,r=this._paddingOuter,[s,o]=this.range,a=o-s,l=a/Math.max(1,e+2*r-n),c=t?Math.floor(l):l,u=c*(e-n),d=s+(a-u)/2,h=t?Math.round(d):d,p=c*(1-n),m=t?Math.round(p):p,g=l*(1-n),f=[];for(let y=0;y<e;y++)f.push(h+c*y);this._bandwidth=m,this._rawBandwidth=g,this._step=c,this.ordinalRange=f}getIndex(e){if(!(e instanceof Date))return this.index.get(e);let t=e.valueOf(),n=0;for(let r of this.index.keys()){if(r instanceof Date&&r.valueOf()===t)return n;n++}}};E([Rn],Ev.prototype,"interval",2);E([Rn],Ev.prototype,"range",2);E([Rn],Ev.prototype,"round",2);var jl=Ev;function uo(i,e=[void 0]){return $a((t,n,r)=>e.includes(r)?bu(i)?i(r):i:r)}function I(i,e={}){let{optional:t=!1,property:n}=e;return $a((r,s,o)=>{var a;let l=Ue(ue({},e),{target:r,property:s});if(t&&typeof o>"u"||i(o,l))return Qo(r[s])&&!Qo(o)?(r[s].set(o),r[s]):o;let c=n??String(s).replace(/^_*/,""),u=(a=r.constructor.className)!=null?a:r.constructor.name.replace(/Properties$/,""),d=rm(o),h=50;if(d!=null&&d.length>h){let p=d.length-h;d=d.slice(0,h)+`... (+${p} characters)`}return Ie.warn(`Property [${c}] of [${u}] cannot be set to [${d}]${i.message?`; expecting ${Lm(i,l)}`:""}, ignoring.`),q0},void 0,{optional:t})}var Ps=(...i)=>{let e=[];return ui((t,n)=>(e.length=0,i.every(r=>{let s=r(t,n);return s||e.push(Lm(r,n)),s})),()=>e.filter(Boolean).join(" AND "))},_u=(...i)=>ui((e,t)=>i.some(n=>n(e,t)),e=>i.map(GG(e)).filter(Boolean).join(" OR ")),Qe=ND(ui((i,e)=>Qo(i)||Js(i)&&Qo(e.target[e.property]),"a properties object")),FG=ND(ui(i=>Js(i),"an object")),ht=ui(YP,"a boolean"),Qr=ui(bu,"a function"),Ne=ui(qr,"a string"),fi=HG(ui(qt,"a number")),Tv=ui(i=>Yr(i)&&isNaN(i),"NaN"),ke=fi.restrict({min:0}),Qt=fi.restrict({min:0,max:1}),ql=fi.restrict({min:-360,max:360}),Ah=_u(fi,Tv),Ph=UG(ui(sn,"an array")),Ya=(i,e)=>ui((t,n)=>sn(t)&&t.every(r=>i(r,n)),t=>{var n;let r=(n=Lm(Ph,t))!=null?n:"";return e?`${r} of ${e}`:r}),tv=i=>qt(i)||Pm(i),Dh=i=>ui((e,t)=>!tv(e)||!tv(t.target[i])||e<t.target[i],`to be less than ${i}`),kh=i=>ui((e,t)=>!tv(e)||!tv(t.target[i])||e>t.target[i],`to be greater than ${i}`),IS=ui(Pm,"Date object"),FS=_u(IS,ke),kD="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",Xt=ui(i=>qr(i)&&jo.validColorString(i),`color String. ${kD}`),Ds=ui(Ya(Xt),`color strings. ${kD}`),OG=Ya(ht,"boolean values"),Mv=Ya(fi,"numbers"),ID=Ya(Ne,"strings"),LG=ui(Ya(IS),"Date objects"),OS=ui(Ya(Qe),"objects"),FD=Li(["butt","round","square"],"a line cap"),RG=Li(["round","bevel","miter"],"a line join"),qa=ui(Ya(ke),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),LS=Li(["top","right","bottom","left"],"a position"),Xl=Li(["normal","italic","oblique"],"a font style"),Zl=_u(Li(["normal","bold","bolder","lighter"],"a font weight"),fi.restrict({min:1,max:1e3})),Av=Li(["never","always","hyphenate","on-space"],"a text wrap strategy"),OD=Li(["left","center","right"],"a text align"),NG=Li(["top","middle","bottom"],"a vertical align"),VG=Li(["ellipsis","hide"],"an overflow strategy"),LD=Li(["horizontal","vertical"],"a direction"),RD=Li(["inside","outside"],"a placement"),RS=_u(Li(["exact","nearest"],"interaction range"),fi),NS=Li(["top","bottom","left","right"]);function Li(i,e="a"){return ui(t=>i.includes(t),`${e} keyword such as ${BG(i)}`)}var Pv=_u(Ps(fi.restrict({min:1}),Dh("maxSpacing")),Tv),VS=_u(Ps(fi.restrict({min:1}),kh("minSpacing")),Tv);function ui(i,e){return i.message=e,i}function BG(i){let e=i.map(n=>`'${n}'`);if(e.length===1)return e[0];let t=e.pop();return`${e.join(", ")} or ${t}`}function Lm(i,e){return bu(i.message)?i.message(e):i.message}function GG(i){return e=>Lm(e,i)}function UG(i){return Object.assign(i,{restrict({length:e,minLength:t}={}){let n="an array";return Yr(t)&&t>0?n="a non-empty array":Yr(e)&&(n=`an array of length ${e}`),ui(r=>sn(r)&&(Yr(e)?r.length===e:!0)&&(Yr(t)?r.length>=t:!0),n)}})}function HG(i){return Object.assign(i,{restrict({min:e,max:t}={}){let n=["a number"],r=Yr(e),s=Yr(t);return r&&s?n.push(`between ${e} and ${t} inclusive`):r?n.push(`greater than or equal to ${e}`):s&&n.push(`less than or equal to ${t}`),ui(o=>qt(o)&&(r?o>=e:!0)&&(s?o<=t:!0),n.join(" "))}})}function ND(i){return Object.assign(i,{restrict(e){return ui(t=>t instanceof e,t=>{var n;return(n=Lm(i,t))!=null?n:`an instance of ${e.name}`})}})}function rm(i){if(typeof i=="number"){if(isNaN(i))return"NaN";if(i===1/0)return"Infinity";if(i===-1/0)return"-Infinity"}return JSON.stringify(i)}var zG=ui(i=>qt(i)&&i>0||i instanceof um,"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),aa=class extends Ot{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6,this.color=void 0,this.interval=void 0,this.values=void 0}};E([I(ht)],aa.prototype,"enabled",2);E([I(ke)],aa.prototype,"width",2);E([I(ke)],aa.prototype,"size",2);E([I(Xt,{optional:!0})],aa.prototype,"color",2);E([I(zG,{optional:!0})],aa.prototype,"interval",2);E([I(Ph,{optional:!0})],aa.prototype,"values",2);var BS=(i=>(i.X="x",i.Y="y",i))(BS||{}),$b={constructedArrays:new WeakMap};function VD(i,e){var t;(t=$b.constructedArrays)==null||t.set(i,e)}var Ql=(()=>{let i=class Kb{constructor(t,n){this.invalid=!0,this.nice=!1,this.interval=void 0,this.tickCount=Kb.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.domain=t,this.range=n}static is(t){return t instanceof Kb}transform(t){return t}transformInvert(t){return t}calcBandwidth(t=1){let{range:n}=this,r=this.getDomain(),s=Math.abs(n[1]-n[0]),o=Math.abs(r[1]-r[0])/t+1,a=Math.floor(s),l=Math.min(o,a);return s/Math.max(1,l)}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(t,n){var r;let s=(r=n?.clampMode)!=null?r:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();let o=this.getDomain().map(h=>this.transform(h)),[a,l]=o,{range:c}=this,[u,d]=c;if(t=this.transform(t),s==="clamped"){let[h,p]=eo(o.map(Number));if(Number(t)<h)return u;if(Number(t)>p)return d}return a===l?(u+d)/2:t===a?u:t===l?d:u+(Number(t)-Number(a))/(Number(l)-Number(a))*(d-u)}invert(t){this.refresh();let n=this.getDomain().map(p=>this.transform(p)),[r,s]=n,{range:o}=this,[a,l]=o,c=a>l,u=c?l:a,d=c?a:l,h;return t<u?c?s:r:t>d?c?r:s:(a===l?h=this.toDomain((Number(r)+Number(s))/2):h=this.toDomain(Number(r)+(t-a)/(l-a)*(Number(s)-Number(r))),this.transformInvert(h))}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&Ie.warnOnce("Expected update to not invalidate scale"))}getPixelRange(){let[t,n]=this.range;return Math.abs(n-t)}};return i.defaultTickCount=5,i.defaultMaxTickCount=6,i})();E([Rn],Ql.prototype,"domain",2);E([Rn],Ql.prototype,"range",2);E([Rn],Ql.prototype,"nice",2);E([Rn],Ql.prototype,"interval",2);E([Rn],Ql.prototype,"tickCount",2);E([Rn],Ql.prototype,"minTickCount",2);E([Rn],Ql.prototype,"maxTickCount",2);var ei=Ql,M0={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function GS(i,e=new Date(i.getFullYear(),0,1)){let t=i.getTimezoneOffset()-e.getTimezoneOffset(),n=i.getTime()-e.getTime()+t*6e4,r=36e5*24;return Math.floor(n/r)}function Y6(i,e){let n=new Date(i.getFullYear(),0,1).getDay(),r=(e-n+7)%7,s=new Date(i.getFullYear(),0,r+1);return s<=i?Math.floor(GS(i,s)/7)+1:0}var WG=0,BD=1,q6=4;function GD(i,e=i.getFullYear()){let n=new Date(e,0,1).getDay(),r=(q6-n+7)%7,s=new Date(e,0,r-(q6-BD)+1);return s<=i?Math.floor(GS(i,s)/7)+1:GD(i,e-1)}function $G(i){let e=i.getTimezoneOffset(),t=Math.abs(e);return`${e>0?"-":"+"}${Gn(Math.floor(t/60),2,"0")}${Gn(Math.floor(t%60),2,"0")}`}var KG={a:i=>M0.shortDays[i.getDay()],A:i=>M0.days[i.getDay()],b:i=>M0.shortMonths[i.getMonth()],B:i=>M0.months[i.getMonth()],c:"%x, %X",d:(i,e)=>Gn(i.getDate(),2,e??"0"),e:"%_d",f:(i,e)=>Gn(i.getMilliseconds()*1e3,6,e??"0"),H:(i,e)=>Gn(i.getHours(),2,e??"0"),I:(i,e)=>{let t=i.getHours()%12;return t===0?"12":Gn(t,2,e??"0")},j:(i,e)=>Gn(GS(i)+1,3,e??"0"),m:(i,e)=>Gn(i.getMonth()+1,2,e??"0"),M:(i,e)=>Gn(i.getMinutes(),2,e??"0"),L:(i,e)=>Gn(i.getMilliseconds(),3,e??"0"),p:i=>i.getHours()<12?"AM":"PM",Q:i=>String(i.getTime()),s:i=>String(Math.floor(i.getTime()/1e3)),S:(i,e)=>Gn(i.getSeconds(),2,e??"0"),u:i=>{let e=i.getDay();return e<1&&(e+=7),String(e%7)},U:(i,e)=>Gn(Y6(i,WG),2,e??"0"),V:(i,e)=>Gn(GD(i),2,e??"0"),w:(i,e)=>Gn(i.getDay(),2,e??"0"),W:(i,e)=>Gn(Y6(i,BD),2,e??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(i,e)=>Gn(i.getFullYear()%100,2,e??"0"),Y:(i,e)=>Gn(i.getFullYear(),4,e??"0"),Z:i=>$G(i),"%":()=>"%"},jG={_:" ",0:"0","-":""};function Gn(i,e,t){let n=String(Math.floor(i));return n.length>=e?n:`${t.repeat(e-n.length)}${n}`}function Rm(i){let e=[];for(;i.length>0;){let t=i.indexOf("%");if(t!==0){let a=t>0?i.substring(0,t):i;e.push(a)}if(t<0)break;let n=i[t+1],r=jG[n];r!=null&&t++;let s=i[t+1],o=KG[s];if(typeof o=="function")e.push([o,r]);else if(typeof o=="string"){let a=Rm(o);e.push([a,r])}else e.push(`${r??""}${s}`);i=i.substring(t+2)}return t=>{let n=typeof t=="number"?new Date(t):t;return e.map(r=>typeof r=="string"?r:r[0](n,r[1])).join("")}}function rn(i){return i instanceof Date?i.getTime():i}function US(i,e){let t=UD(i,e);return n=>Rm(t)(n)}function UD(i=[],e=i){let t=8,n=c=>{c<t&&(t=c)};for(let c of i){let u=YG(c);n(u)}let r=rn(e[0]),s=rn(e.at(-1)),o=new Date(r).getFullYear(),l=new Date(s).getFullYear()-o>0;return qG(t,l,i)}function YG(i){return $p.floor(i)<i?0:Kp.floor(i)<i?1:jp.floor(i)<i?2:Lb.floor(i)<i?3:Bd.floor(i)<i?R0.floor(i)<i?4:5:Rb.floor(i)<i?6:8}function qG(i,e,t){let n=rn(t[0]),r=rn(t.at(-1)),s=Math.abs(r-n),o=e||i===8,a=s===0,c=[["hour",6*Pr,14*Wa,3,"%I %p"],["hour",tr,6*Pr,3,"%I:%M"],["second",1e3,6*Pr,1,":%S"],["ms",0,6*Pr,0,".%L"],["am/pm",tr,6*Pr,3,"%p"]," ",["day",Wa,1*Ul,4,"%a"],["month",a?0:Ul,52*Ul,5,"%b %d"],["month",5*Ul,10*em,6,"%B"]," ",["year",o?0:em,1/0,8,"%Y"]].filter(h=>{if(typeof h=="string")return!0;let[p,m,g,f]=h;return f>=i&&m<=s&&s<g}).reduce((h,p)=>(typeof p=="string"?h.result.push(p):h.used.has(p[0])||(h.result.push(p),h.used.add(p[0])),h),{result:[],used:new Set}).result,u=c.findIndex(h=>typeof h!="string"),d=c.length-[...c].reverse().findIndex(h=>typeof h!="string");return c.slice(u,d).map(h=>typeof h=="string"?h:h[4]).join("").replaceAll(/\s+/g," ").trim()}var vm=(i,e=[])=>Object.assign(e,{fractionDigits:i});function Dv(i,e,t,n,r){if(t<2)return ym(i,e,e-i);let s=mh(i,e,t,n,r);return isNaN(s)?vm(0):(i=Math.ceil(i/s)*s,e=Math.floor(e/s)*s,ym(i,e,s))}var HD=[1,2,5,10];function mh(i,e,t,n=0,r=1/0){let s=Math.abs(e-i),o=s/t,a=Math.floor(Math.log10(o)),l=Math.pow(10,a),c=HD.map(u=>{let d=u*l,h=Math.ceil(s/d),p=h>=n&&h<=r,m=Math.abs(h-t);return{multiplier:u,isWithinBounds:p,diffCount:m}}).sort((u,d)=>u.isWithinBounds!==d.isWithinBounds?u.isWithinBounds?-1:1:u.diffCount-d.diffCount)[0].multiplier;return!c||isNaN(c)?NaN:c*l}function XG(i,e){let t=Math.abs(e-i),n=Math.floor(Math.log10(t)),r=Math.pow(10,n),s=i>e?Math.ceil:Math.floor,o=e<i?Math.floor:Math.ceil;return HD.map(a=>{let l=a*r,c=s(i/l)*l,u=o(e/l)*l;return{error:1-t/Math.abs(u-c),domain:[c,u]}}).sort((a,l)=>a.error-l.error)[0].domain}function ym(i,e,t){let n=Math.min(i,e),r=Math.max(i,e),s=PS(t),o=Math.pow(10,s),a=Math.ceil((r-n)/t),l=vm(s);for(let c=0;c<=a;c++){let u=n+t*c;l.push(Math.round(u*o)/o)}return l}function Cm({start:i,stop:e,interval:t,count:n,availableRange:r}){let s=e-i;return n??(n=s/(typeof t=="number"?t:1)),n>=r?(Ie.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0):!1}var ZG=(()=>{let i=class Ar extends ei{constructor(){super([],[0,1]),this.type="time"}toDomain(t){return new Date(t)}static getTickInterval({start:t,stop:n,count:r,minCount:s,maxCount:o,target:a}){let l,c,u=r??ei.defaultTickCount,d=a??Math.abs(n-t)/Math.max(u,1),h=Ar.getIntervalIndex(d);if(h===0)c=Math.max(mh(t,n,u,s,o),1),l=LB;else if(h===Ar.tickIntervals.length){let p=t/em,m=n/em;c=a===void 0?mh(p,m,u,s,o):1,l=Rb}else{let p=d-Ar.tickIntervals[h-1][2],m=Ar.tickIntervals[h][2]-d,g=p<m?h-1:h;[l,c]=Ar.tickIntervals[g]}return l.every(c)}static getIntervalIndex(t){let n=0;for(;n<Ar.tickIntervals.length&&t>Ar.tickIntervals[n][2];)n++;return n}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();let[t,n]=this.getDomain().map(rn),r=Math.min(t,n),s=Math.max(t,n),{interval:o,nice:a,tickCount:l,minTickCount:c,maxTickCount:u}=this;if(o!==void 0){let d=this.getPixelRange(),h=Ar.getTicksForInterval({start:r,stop:s,interval:o,availableRange:d});return h??Ar.getDefaultTicks({start:r,stop:s,tickCount:l,minTickCount:c,maxTickCount:u})}if(a){if(l===2)return this.niceDomain;if(l===1)return this.niceDomain.slice(0,1)}return Ar.getDefaultTicks({start:r,stop:s,tickCount:l,minTickCount:c,maxTickCount:u})}static getDefaultTicks({start:t,stop:n,tickCount:r,minTickCount:s,maxTickCount:o}){let a=Ar.getTickInterval({start:t,stop:n,count:r,minCount:s,maxCount:o});return a?a.range(new Date(t),new Date(n)):[]}static getTicksForInterval({start:t,stop:n,interval:r,availableRange:s}){if(!r)return[];if(r instanceof um){let h=r.range(new Date(t),new Date(n));return Cm({start:t,stop:n,interval:r,count:h.length,availableRange:s})?void 0:h}let o=Math.abs(r);if(Cm({start:t,stop:n,interval:o,availableRange:s}))return;let a=[...Ar.tickIntervals];a.reverse();let l=a.find(h=>o%h[2]===0);if(l)return l[0].every(o/(l[2]/l[1])).range(new Date(t),new Date(n));let c=new Date(t),u=new Date(n),d=[];for(;c<=u;)d.push(c),c=new Date(c),c.setMilliseconds(c.getMilliseconds()+o);return d}tickFormat({ticks:t,domain:n,specifier:r}){return r==null?US(t,n):Rm(r)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[n,r]=this.domain;for(let s=0;s<4;s++){this.updateNiceDomainIteration(n,r);let[o,a]=this.niceDomain;if(rn(n)===rn(o)&&rn(r)===rn(a))break;n=o,r=a}}updateNiceDomainIteration(t,n){let r=Math.min(rn(t),rn(n)),s=Math.max(rn(t),rn(n)),o=t>n,{interval:a}=this,l;if(a instanceof um)l=a;else{let c=typeof a=="number"?(s-r)/Math.max(a,1):this.tickCount;l=Ar.getTickInterval({start:r,stop:s,count:c,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(l){let c=l.range(new Date(r),new Date(s),!0),u=o?[...c].reverse():c,d=u[0],h=u.at(-1);this.niceDomain=[d,h]}}};return i.tickIntervals=[[$p,1,cu],[$p,5,5*cu],[$p,15,15*cu],[$p,30,30*cu],[Kp,1,tr],[Kp,5,5*tr],[Kp,15,15*tr],[Kp,30,30*tr],[jp,1,Pr],[jp,3,3*Pr],[jp,6,6*Pr],[jp,12,12*Pr],[Lb,1,Wa],[Lb,2,2*Wa],[R0,1,Ul],[R0,2,2*Ul],[R0,3,3*Ul],[Bd,1,Gp],[Bd,2,2*Gp],[Bd,3,3*Gp],[Bd,4,4*Gp],[Bd,6,6*Gp],[Rb,1,em]],i})(),hu=ZG,Nm=class zD extends jl{constructor(){super(...arguments),this.type="ordinal-time",this.tickCount=ei.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.interval=void 0,this.index=new Map,this._domain=[]}static is(e){return e instanceof zD}toDomain(e){return new Date(e)}set domain(e){if(this.invalid=!0,e.length===0){this._domain=[];return}let t=this.updateIndex(e);this._domain=t}get domain(){return this._domain}updateIndex(e){this.index=new Map;let{index:t}=this,n=[],r=[],s=e[0]>e.at(-1),o=s?0:1;e.forEach((y,b)=>{let v=e[b+1],S=s?y:this.toDomain(rn(y)+1),w=s?this.toDomain(rn(v)+1):v,T=s?[w,S]:[S,w];n.push(y),v!==void 0&&t.get(T)===void 0&&(r.push(Math.abs(rn(w)-rn(S))),t.set(T,b+o))}),r.sort((y,b)=>y-b);let a=r.length,l=Math.floor(a/2);this.medianInterval=a>2&&a%2===0?(r[l-1]+r[l+1])/2:r[l];let c=Math.max(0,hu.getIntervalIndex(this.medianInterval)-1),[u,d]=hu.tickIntervals[c],h=u.every(d),p=s?e.length-1:0,m=e[p],f=[h.floor(e[p]),m];return t.set(f,p),n}ticks(){if(!this.domain)return[];this.refresh();let[e,t]=[rn(this.domain[0]),rn(this.domain.at(-1))],n=Math.min(e,t),r=Math.max(e,t),s=e>t,o;this.interval!==void 0&&(o=this.getTicksForInterval({start:n,stop:r,interval:this.interval}));let a=this.domain.length,{maxTickCount:l,tickCount:c}=this,{minTickCount:u}=this,d;isFinite(l)&&a<=l&&(u=Math.max(1,a),d=this.medianInterval),o??(o=this.getDefaultTicks({start:n,stop:r,tickCount:c,minTickCount:u,maxTickCount:l,isReversed:s,interval:d}));let h=new Set;return o.filter(p=>{let m=this.convert(p);return isNaN(m)||h.has(m)?!1:(h.add(m),!0)})}getDefaultTicks({start:e,stop:t,tickCount:n,minTickCount:r,maxTickCount:s,isReversed:o,interval:a}){let l=hu.getTickInterval({start:e,stop:t,count:n,minCount:r,maxCount:s,target:a});if(!l)return[];let c=Math.ceil(this.domain.length/s),u=[];for(let[d,h]of this.index.entries()){if(h%c>0)continue;let p=o?l.ceil(d[0]):l.floor(d[1]);u.splice(h,0,p)}return u}getTicksForInterval({start:e,stop:t,interval:n}){var r;let[s,o]=this.range,a=Math.abs(o-s);return(r=hu.getTicksForInterval({start:e,stop:t,interval:n,availableRange:a}))!=null?r:[]}convert(e){if(typeof e=="number"&&(e=new Date(e)),!(e instanceof Date))return NaN;this.refresh();let t;for(let[r,s]of this.index.entries())if(e>=r[0]&&e<=r[1]){t=s;break}if(t===void 0)return NaN;let n=this.ordinalRange[t];return n===void 0?NaN:n}tickFormat({ticks:e,domain:t,specifier:n}){return n==null?US(e,t):Rm(n)}invert(e){return new Date(super.invert(e))}invertNearest(e){return new Date(super.invertNearest(e))}};E([Rn],Nm.prototype,"tickCount",2);E([Rn],Nm.prototype,"minTickCount",2);E([Rn],Nm.prototype,"maxTickCount",2);E([Rn],Nm.prototype,"interval",2);var Ua=Nm;function WD(i,e){return typeof i=="number"&&typeof e=="number"?i-e:typeof i=="string"&&typeof e=="string"?i.localeCompare(e):i==null&&e==null?0:i==null?-1:e==null?1:String(i).localeCompare(String(e))}function X6(i){return typeof i=="function"?i():i}function $D(i,e,t){for(let n in i){let r=t(X6(i[n]),X6(e[n]));if(r!==0)return r}return 0}var KD=(()=>{let i=class U0 extends Mh{constructor(t){var n;super({isVirtual:t?.isVirtual}),this.opts=t,this.opacity=1,this.lastBBox=void 0;let{zIndex:r,zIndexSubOrder:s}=t??{};this.isContainerNode=!0,r!==void 0&&(this.zIndex=r),s!==void 0&&(this.zIndexSubOrder=s),this.name=(n=this.opts)==null?void 0:n.name}static is(t){return t instanceof U0}onZIndexChange(){var t;super.onZIndexChange(),this.layer&&((t=this._layerManager)==null||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return this.layer!=null}_setLayerManager(t){if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");super._setLayerManager(t)}initialiseLayer(){var t;this.layer||!this._layerManager||((t=this.opts)==null?void 0:t.layer)!==!0||(this.layer=this._layerManager.addLayer({name:this.name,zIndex:this.zIndex,zIndexSubOrder:this.zIndexSubOrder,getComputedOpacity:()=>this.getComputedOpacity(),getVisibility:()=>this.getVisibility()}))}getComputedOpacity(){let t=1;for(let n of this.traverseUp())n instanceof U0&&(t*=n.opacity);return t}getVisibility(){for(let t of this.traverseUp())if(!t.visible)return!1;return!0}onVisibleChange(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t,n=1){if(this.isVirtual){super.markDirty(t,n);return}let r=n;(n<2||this.layer!=null)&&(r=1),super.markDirty(t,n,r)}containsPoint(t,n){return!0}computeBBox(){return this.computeTransformMatrix(),U0.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}preRender(){var t,n;let r=super.preRender();return r.groups+=1,r.nonGroups-=1,((t=this.opts)==null?void 0:t.layer)!==!0||this.layer!=null||(r.nonGroups>0&&this.initialiseLayer(),(n=this.opts)!=null&&n.nonEmptyChildDerivedZIndex&&r.nonGroups>0&&this.deriveZIndexFromChildren()),r}deriveZIndexFromChildren(){var t;let n=this.children.filter(s=>s._childNodeCounts.nonGroups>0);this.sortChildren(n);let r=n.at(-1);this.zIndex=(t=r?.zIndex)!=null?t:-1/0,this.zIndexSubOrder=r?.zIndexSubOrder}render(t){var n,r;let{opts:{name:s=void 0}={},_debug:o}=this,{dirty:a,dirtyZIndex:l,layer:c,children:u,clipRect:d,dirtyTransform:h}=this,{ctx:p,forceRender:m,clipBBox:g}=t,{resized:f,stats:y}=t,b=p.getTransform(),v=a>=2||l||f,S=v,w=!1;for(let B of u)if(S||(S=B.layerManager==null&&B.dirty>=1),w||(w=B.layerManager!=null&&B.dirty>=1),S)break;if(s&&o?.({name:s,group:this,isDirty:v,isChildDirty:S,dirtyTransform:h,renderCtx:t,forceRender:m}),h)m="dirtyTransform";else if(c){let B=this.computeBBox();(this.lastBBox===void 0||!this.lastBBox.equals(B))&&(m="dirtyTransform",this.lastBBox=B)}if(!v&&!S&&!w&&!m){s&&y&&o?.({name:s,result:"skipping",renderCtx:t,counts:this.nodeCount,group:this}),c&&y&&(y.layersSkipped++,y.nodesSkipped+=this.nodeCount.count),this.markClean({recursive:!1});return}let T=this.visible;if(c){if(p=c.context,p.save(),p.setTransform(c.pixelRatio,0,0,c.pixelRatio,0,0),m!=="dirtyTransform"&&(m=S||l),m&&c.clear(),g){let{width:B,height:$,x:U,y:K}=g;o?.(()=>({name:s,clipBBox:g,ctxTransform:p.getTransform(),renderCtx:t,group:this})),p.beginPath(),p.rect(U,K,B,$),p.clip()}p.setTransform(b)}else p.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(p),d){let{x:B,y:$,width:U,height:K}=d;p.save(),o?.(()=>({name:s,clipRect:d,ctxTransform:p.getTransform(),renderCtx:t,group:this})),p.beginPath(),p.rect(B,$,U,K),p.clip(),g=this.matrix.transformBBox(d)}let D=this.hasVirtualChildren();l?(this.sortChildren(u),m!=="dirtyTransform"&&(m=!0)):D&&this.sortChildren(u);let R=m!==t.forceRender||g!==t.clipBBox||p!==t.ctx?Ue(ue({},t),{ctx:p,forceRender:m,clipBBox:g}):t,L=0;for(let B of u){if(!B.visible||!T){B.markClean(),y&&(L+=B.nodeCount.count);continue}if(!m&&B.dirty===0){y&&(L+=B.nodeCount.count);continue}p.save(),B.render(R),p.restore()}if(y&&(y.nodesSkipped+=L),super.render(t),d&&p.restore(),D)for(let B of this.virtualChildren)B.markClean({recursive:"virtual"});c&&(y&&y.layersRendered++,p.restore(),m&&c.snapshot(),(r=(n=c.context).verifyDepthZero)==null||r.call(n)),s&&y&&o?.({name:s,result:"rendered",skipped:L,renderCtx:t,counts:this.nodeCount,group:this})}sortChildren(t){this.dirtyZIndex=!1,t.sort((n,r)=>{var s,o;return $D([n.zIndex,...(s=n.zIndexSubOrder)!=null?s:[void 0,void 0],n.serialNumber],[r.zIndex,...(o=r.zIndexSubOrder)!=null?o:[void 0,void 0],r.serialNumber],WD)})}static computeBBox(t){let n=1/0,r=-1/0,s=1/0,o=-1/0;for(let a of t){if(!a.visible)continue;let l=a.computeTransformedBBox();if(!l)continue;let{x:c,y:u,width:d,height:h}=l;c<n&&(n=c),u<s&&(s=u),c+d>r&&(r=c+d),u+h>o&&(o=u+h)}return new nt(n,s,r-n,o-s)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}};return i.className="Group",i})();E([Ze({redraw:3,convertor:i=>Dt(0,i,1)})],KD.prototype,"opacity",2);var ot=KD,QG=class{constructor(i=[]){this.stops=i}},JG=class extends QG{constructor(i,e=0){super(i),this.angle=e}createGradient(i,e){let{stops:n,angle:r}=this,s=$i(ir(r+90)),o=Math.cos(s),a=Math.sin(s),l=e.width,c=e.height,u=e.x+l*.5,d=e.y+c*.5;if(l>0&&c>0){let h=Math.sqrt(c*c+l*l)/2,p=Math.atan2(c,l),m;s<Math.PI/2?m=s:s<Math.PI?m=Math.PI-s:s<1.5*Math.PI?m=s-Math.PI:m=2*Math.PI-s;let g=h*Math.abs(Math.cos(m-p)),f=i.createLinearGradient(u+o*g,d+a*g,u-o*g,d-a*g);for(let y of n)f.addColorStop(y.offset,y.color);return f}return"black"}},e7=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i,ks=(()=>{let i=class $o extends Mh{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=$o.defaultStyles.fill,this.stroke=$o.defaultStyles.stroke,this.strokeWidth=$o.defaultStyles.strokeWidth,this.lineDash=$o.defaultStyles.lineDash,this.lineDashOffset=$o.defaultStyles.lineDashOffset,this.lineCap=$o.defaultStyles.lineCap,this.lineJoin=$o.defaultStyles.lineJoin,this.opacity=$o.defaultStyles.opacity,this.fillShadow=$o.defaultStyles.fillShadow}restoreOwnStyles(){let{defaultStyles:t}=this.constructor;Object.assign(this,t)}onFillChange(){let{fill:t}=this,n;if(t?.startsWith("linear-gradient")&&(n=e7.exec(t))){let r=parseFloat(n[1]),s=[],o=n[2],a=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi,l;for(;l=a.exec(o);)s.push(l[0]);this.gradient=new JG(s.map((c,u)=>({color:c,offset:u/(s.length-1)})),r)}else this.gradient=void 0}align(t,n){var r,s,o;let a=(o=(s=(r=this.layerManager)==null?void 0:r.canvas)==null?void 0:s.pixelRatio)!=null?o:1,l=Math.round(t*a)/a;return n==null?l:n===0?0:n<1?Math.ceil(n*a)/a:Math.round((n+t)*a)/a-l}fillStroke(t,n){this.renderFill(t,n),this.renderStroke(t,n)}renderFill(t,n){if(this.fill){let{globalAlpha:r}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),this.executeFill(t,n),t.globalAlpha=r}t.shadowColor="rgba(0, 0, 0, 0)"}executeFill(t,n){n?t.fill(n):t.fill()}applyFill(t){var n,r;t.fillStyle=(r=(n=this.gradient)==null?void 0:n.createGradient(t,this.computeBBox()))!=null?r:this.fill}applyFillAlpha(t){t.globalAlpha*=this.opacity*this.fillOpacity}applyShadow(t){var n,r;let s=(r=(n=this.layerManager)==null?void 0:n.canvas.pixelRatio)!=null?r:1,o=this.fillShadow;o?.enabled&&(t.shadowColor=o.color,t.shadowOffsetX=o.xOffset*s,t.shadowOffsetY=o.yOffset*s,t.shadowBlur=o.blur*s)}renderStroke(t,n){if(this.stroke&&this.strokeWidth){let{globalAlpha:r}=t;t.strokeStyle=this.stroke,t.globalAlpha*=this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),this.executeStroke(t,n),t.globalAlpha=r}}executeStroke(t,n){n?t.stroke(n):t.stroke()}containsPoint(t,n){return this.isPointInPath(t,n)}};return i.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0},i})();E([Ze({redraw:2})],ks.prototype,"fillOpacity",2);E([Ze({redraw:2})],ks.prototype,"strokeOpacity",2);E([Ze({redraw:2,changeCb:i=>i.onFillChange()})],ks.prototype,"fill",2);E([Ze({redraw:2})],ks.prototype,"stroke",2);E([Ze({redraw:2})],ks.prototype,"strokeWidth",2);E([Ze({redraw:2})],ks.prototype,"lineDash",2);E([Ze({redraw:2})],ks.prototype,"lineDashOffset",2);E([Ze({redraw:2})],ks.prototype,"lineCap",2);E([Ze({redraw:2})],ks.prototype,"lineJoin",2);E([Ze({redraw:2,convertor:i=>Dt(0,i,1)})],ks.prototype,"opacity",2);E([Ze({redraw:2,checkDirtyOnAssignment:!0})],ks.prototype,"fillShadow",2);var As=ks,la=class extends As{constructor(i={}){super(i),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new nt(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(i,e){return!1}render(i){var e;let{ctx:t,forceRender:n,stats:r}=i;if(this.dirty===0&&!n){r&&(r.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(t);let{x1:s,y1:o,x2:a,y2:l}=this;s=this.align(s),o=this.align(o),a=this.align(a),l=this.align(l);let{fill:c,opacity:u,isRange:d}=this;if(!!(d&&c)){let{fillOpacity:b}=this;t.fillStyle=c,t.globalAlpha=u*b,t.beginPath(),t.moveTo(s,o),t.lineTo(a,o),t.lineTo(a,l),t.lineTo(s,l),t.closePath(),t.fill()}let{stroke:p,strokeWidth:m,startLine:g,endLine:f}=this;if(!!((g||f)&&p&&m)){let{strokeOpacity:b,lineDash:v,lineDashOffset:S,lineCap:w,lineJoin:T}=this;t.strokeStyle=p,t.globalAlpha=u*b,t.lineWidth=m,v&&t.setLineDash(v),S&&(t.lineDashOffset=S),w&&(t.lineCap=w),T&&(t.lineJoin=T),t.beginPath(),g&&(t.moveTo(s,o),t.lineTo(a,o)),f&&(t.moveTo(a,l),t.lineTo(s,l)),t.stroke()}(e=this.fillShadow)==null||e.markClean(),super.render(i)}};la.className="Range";la.defaultStyles=Ue(ue({},As.defaultStyles),{strokeWidth:1});E([Ze({redraw:2})],la.prototype,"x1",2);E([Ze({redraw:2})],la.prototype,"y1",2);E([Ze({redraw:2})],la.prototype,"x2",2);E([Ze({redraw:2})],la.prototype,"y2",2);E([Ze({redraw:2})],la.prototype,"startLine",2);E([Ze({redraw:2})],la.prototype,"endLine",2);E([Ze({redraw:2})],la.prototype,"isRange",2);var Up=new WeakMap,Hp=new WeakMap;function iv(i,e){var t,n,r;let s=JSON.stringify(i,null,0);return Up.has(e)||Up.set(e,new Map),(t=Up.get(e))!=null&&t.has(s)||(n=Up.get(e))==null||n.set(s,e(i)),(r=Up.get(e))==null?void 0:r.get(s)}function jD(i){return(e,...t)=>{var n,r,s;let o=JSON.stringify(e,null,0);return Hp.has(i)||Hp.set(i,new Map),(n=Hp.get(i))!=null&&n.has(o)||(r=Hp.get(i))==null||r.set(o,i(e,...t)),(s=Hp.get(i))==null?void 0:s.get(o)}}var jb="\u2026";function kv(i){let{redraw:e=3,changeCb:t}=i??{};return Ze({redraw:e,type:"font",changeCb:t})}var on=class bn extends As{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=bn.defaultStyles.textAlign,this.textBaseline=bn.defaultStyles.textBaseline}onTextChange(){var e,t;this.lines=(t=(e=this.text)==null?void 0:e.split(`
`).map(n=>n.trim()))!=null?t:[]}get font(){return(this._font==null||this._dirtyFont)&&(this._dirtyFont=!1,this._font=gh(this)),this._font}computeBBox(){let{x:e,y:t,lines:n,lineHeight:r,textBaseline:s,textAlign:o}=this,{top:a,left:l,width:c,height:u}=bn.getTextSizeMultiline(n,gh(this),s,o,r);return new nt(e-l,t-a,c,u)}getLineHeight(e){var t,n;if(this.lineHeight)return this.lineHeight;let r=bn.measureText(e,this.font,this.textBaseline,this.textAlign);return((t=r.fontBoundingBoxAscent)!=null?t:r.emHeightAscent)+((n=r.fontBoundingBoxDescent)!=null?n:r.emHeightDescent)}isPointInPath(e,t){let n=this.transformPoint(e,t),r=this.computeBBox();return r?r.containsPoint(n.x,n.y):!1}render(e){let{ctx:t,forceRender:n,stats:r}=e;if(this.dirty===0&&!n){r&&(r.nodesSkipped+=this.nodeCount.count);return}if(!this.lines.length||!this.layerManager){r&&(r.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(t);let{fill:s,stroke:o,strokeWidth:a}=this;t.font=this.font,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline;let l=this.layerManager.canvas.pixelRatio||1,{globalAlpha:c}=t;if(s){t.fillStyle=s,t.globalAlpha=c*this.opacity*this.fillOpacity;let{fillShadow:u}=this;u?.enabled&&(t.shadowColor=u.color,t.shadowOffsetX=u.xOffset*l,t.shadowOffsetY=u.yOffset*l,t.shadowBlur=u.blur*l),this.renderLines((d,h,p)=>t.fillText(d,h,p))}if(o&&a){t.strokeStyle=o,t.lineWidth=a,t.globalAlpha=c*this.opacity*this.strokeOpacity;let{lineDash:u,lineDashOffset:d,lineCap:h,lineJoin:p}=this;u&&t.setLineDash(u),d&&(t.lineDashOffset=d),h&&(t.lineCap=h),p&&(t.lineJoin=p),this.renderLines((m,g,f)=>t.strokeText(m,g,f))}super.render(e)}renderLines(e){let{lines:t,x:n,y:r}=this,s=t.map(l=>this.getLineHeight(l)),o=s.reduce((l,c)=>l+c,0),a=(s[0]-o)*bn.getVerticalModifier(this.textBaseline);for(let l=0;l<t.length;l++)e(t[l],n,r+a),a+=s[l]}static wrapLines(e,t,n,r,s,o){let a=o!=="hide",l=new YD(r),c=e.split(/\r?\n/g);if(c.length===0)return{lines:void 0,truncated:!1};if(s==="never"){let{text:p,truncated:m}=bn.truncateLine(c[0],t,l,a?"auto":"never");return{lines:p!=null?[p]:void 0,truncated:m}}let u=[],d=0,h=!1;for(let p of c){let m=bn.wrapLine(p,t,n,l,r,s,d,a);if(m==null)return{lines:void 0,truncated:!1};if(u.push(...m.result),d=m.cumulativeHeight,m.truncated){h=!0;break}}return{lines:u,truncated:h}}static wrap(e,t,n,r,s,o="ellipsis"){var a;let{lines:l,truncated:c}=bn.wrapLines(e,t,n,r,s,o);return{text:(a=l?.join(`
`).trim())!=null?a:"",truncated:c}}static wrapLine(e,t,n,r,s,o,a,l){if(e=e.trim(),!e)return{result:[],truncated:!1,cumulativeHeight:a};let c=r.size(e);if(c.width<=t)return{result:[e],truncated:!1,cumulativeHeight:a+c.height};if(c.height>n||r.width("W")>t)return l?{result:[],truncated:!0,cumulativeHeight:a}:void 0;let u=e.split(/\s+/g),d=bn.wrapLineSequentially(u,t,n,r,s,o,a,l);if(d==null)return;a=d.cumulativeHeight;let{lines:h}=d;if(!(d.wordsBrokenOrTruncated||d.linesTruncated)){let m=d.lines.length,g=bn.wrapLineBalanced(u,t,r,m);g.length===h.length&&(h=g)}return{result:h.map(m=>m.join(" ")),truncated:d.linesTruncated,cumulativeHeight:a}}static breakWord(e,t,n,r,s){let o=p=>bn.punctuationMarks.includes(e[p]),a=r?s.width("-"):0,l=[],c=0,u=0;for(let p=0;p<e.length;p++){let m=e[p],g=s.width(m),f=u===0?t:n;c+g+a>f&&(l.push(p),c=0,u++),c+=g}let d=[],h=0;for(let p of l){let m=e.substring(h,p);r&&m.length>0&&!o(p-1)&&!o(p)&&(m+="-"),d.push(m),h=p}return d.push(e.substring(h)),d}static truncateLine(e,t,n,r){e=e.trimEnd();let s=n.width(e);if(s>t&&r==="never")return{text:void 0,truncated:!1};if(s<=t&&r!=="force")return{text:e,truncated:!1};let o=n.width(jb),a=e,l=s;for(;a.length>0&&l+o>t;)a=a.slice(0,-1).trimEnd(),l=n.width(a);return l+o<=t?{text:`${a}${jb}`,truncated:!0}:{text:void 0,truncated:!1}}static wrapLineSequentially(e,t,n,r,s,o,a,l){let{fontSize:c=0,lineHeight:u=c*bn.defaultLineHeightRatio}=s,d=o==="always"||o==="hyphenate",h=o==="hyphenate",p=r.width(" "),m=!1,g=!1,f=[],y=[],b=0,v=()=>({lines:f,linesTruncated:g,wordsBrokenOrTruncated:m,cumulativeHeight:a}),S=()=>{if(!l)return;let T=y.join(" "),{text:D}=bn.truncateLine(T,t,r,"force");if(D!=null)return y.splice(0,y.length,D),g=!0,v()},w=()=>{let T=a+u;return T>=n?!1:(y=[],b=0,a=T,f.push(y),!0)};if(!w())return S();for(let T=0;T<e.length;T++){let D=e[T],O=r.width(D),R=y.length===0?0:p,L=b+R+O;if(L<=t){y.push(D),b=L;continue}if(O<=t){if(!w())return S();y.push(D),b=O;continue}if(m=!0,d){let B=t-b-R,$=bn.breakWord(D,B,t,h,r);for(let U=0;U<$.length;U++){let K=$[U];if(K&&y.push(K),U===$.length-1)b=r.width(K);else if(!w())return S()}}else if(l){if(!w())return S();let{text:B}=bn.truncateLine(D,t,r,"force");if(B==null)return;y.push(B),T<e.length-1&&(g=!0);break}else return}return v()}static wrapLineBalanced(e,t,n,r){let s=e.reduce((p,m)=>p+n.width(m),0),o=n.width(" "),a=o*(e.length-r-2),l=(s+a)/r,c=[],u=[],d=n.width(e[0]),h=!0;for(let p of e){let m=n.width(p);if(h){u=[],u.push(p),d=m,h=!1,c.push(u);continue}let g=d+o+m;g<=l?(u.push(p),d=g):g<=t?(u.push(p),h=!0):(u=[p],d=m,c.push(u))}return c}setFont(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight}setAlign(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline}static getVerticalModifier(e){switch(e){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return .5}}static get textContext(){if(!this._textContext){let e=Ui("canvas");e.width=0,e.height=0,this._textContext=e.getContext("2d")}return this._textContext}static measureText(e,t,n,r){return this._measureText({text:e,font:t,textBaseline:n,textAlign:r})}static getTextSize(e,t){return this._getTextSize({text:e,font:t})}static getTextSizeMultiline(e,t,n=bn.defaultStyles.textBaseline,r=bn.defaultStyles.textAlign,s){var o,a;let l=0,c=0,u=0,d=0,h=0;for(let[p,m]of e.entries()){let g=this._measureText({text:m,font:t,textBaseline:n,textAlign:r});c=Math.max(c,g.actualBoundingBoxLeft),u=Math.max(u,g.width),p==0?(l+=g.actualBoundingBoxAscent,d+=g.actualBoundingBoxAscent):h+=(o=g.fontBoundingBoxAscent)!=null?o:g.emHeightAscent,p==e.length-1?d+=g.actualBoundingBoxDescent:h+=(a=g.fontBoundingBoxDescent)!=null?a:g.emHeightDescent}return s!=null&&(h=(e.length-1)*s),d+=h,l+=h*bn.getVerticalModifier(n),{top:l,left:c,width:u,height:d}}};on.className="Text";on.defaultLineHeightRatio=1.15;on.defaultStyles=Object.assign({},As.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"});on.ellipsis=jb;on.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"];on._measureText=jD(({text:i,font:e,textBaseline:t,textAlign:n})=>{let r=on.textContext;return r.font!==e&&(r.font=e),r.textBaseline!==t&&(r.textBaseline=t),r.textAlign!==n&&(r.textAlign=n),r.measureText(i)});on._getTextSize=jD(({text:i,font:e})=>{let t=on.textContext;t.font!==e&&(t.font=e);let n=t.measureText(i);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}});E([Ze({redraw:3})],on.prototype,"x",2);E([Ze({redraw:3})],on.prototype,"y",2);E([Ze({redraw:3,changeCb:i=>i.onTextChange()})],on.prototype,"text",2);E([kv()],on.prototype,"fontStyle",2);E([kv()],on.prototype,"fontWeight",2);E([kv()],on.prototype,"fontSize",2);E([kv()],on.prototype,"fontFamily",2);E([Ze({redraw:3})],on.prototype,"textAlign",2);E([Ze({redraw:3})],on.prototype,"textBaseline",2);E([Ze({redraw:3})],on.prototype,"lineHeight",2);var Vt=on,YD=class{constructor(i){this.font=qr(i)?i:gh(i)}size(i){return i.includes(`
`)?Vt.getTextSizeMultiline(i.split(`
`).map(e=>e.trim()),this.font):Vt.getTextSize(i,this.font)}width(i){let{width:e}=this.size(i);return e}};function gh(i){let{fontFamily:e,fontSize:t,fontStyle:n,fontWeight:r}=i;return[n??"",r??"",t+"px",e].join(" ").trim()}var an=class extends Ot{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return gh(this)}};E([I(ht)],an.prototype,"enabled",2);E([I(Xt,{optional:!0})],an.prototype,"color",2);E([I(Xl,{optional:!0})],an.prototype,"fontStyle",2);E([I(Zl,{optional:!0})],an.prototype,"fontWeight",2);E([I(ke)],an.prototype,"fontSize",2);E([I(Ne)],an.prototype,"fontFamily",2);E([I(Qr,{optional:!0})],an.prototype,"formatter",2);function nv(i){let{parallelFlipRotation:e=0,regularFlipRotation:t=0}=i,n=i.rotation?$i(ir(i.rotation)):0,r=!n&&e>=0&&e<=Math.PI?-1:1,s=!n&&t>=0&&t<=Math.PI?-1:1,o=0;return i.parallel?o=r*Math.PI/2:s===-1&&(o=Math.PI),{configuredRotation:n,defaultRotation:o,parallelFlipFlag:r,regularFlipFlag:s}}function t7(i,e){return isNaN(i)?e?0:10:i}function i7(i,e,t,n){return i&&!e?t*n===-1?"hanging":"bottom":"middle"}function xb(i,e,t,n,r){let s=e>0&&e<=Math.PI,o=t>0&&t<=Math.PI,a=s||o?-1:1;if(i)if(e||t){if(n*a===-1)return"end"}else return"center";else if(n*r===-1)return"end";return"start"}function n7(i,e,t,n,r){let{width:s,height:o}=e,a=new nt(t,n,0,0);r.transformBBox(a,e);let{x:l,y:c}=e;return e.width=s,e.height=o,{point:{x:l,y:c},label:{text:i,width:s,height:o}}}var qD=(i=>(i[i.SERIES_BACKGROUND_ZINDEX=0]="SERIES_BACKGROUND_ZINDEX",i[i.AXIS_GRID_ZINDEX=1]="AXIS_GRID_ZINDEX",i[i.AXIS_ZINDEX=2]="AXIS_ZINDEX",i[i.SERIES_CROSSLINE_RANGE_ZINDEX=3]="SERIES_CROSSLINE_RANGE_ZINDEX",i[i.SERIES_LAYER_ZINDEX=4]="SERIES_LAYER_ZINDEX",i[i.SERIES_HIGHLIGHT_ZINDEX=5]="SERIES_HIGHLIGHT_ZINDEX",i[i.AXIS_FOREGROUND_ZINDEX=6]="AXIS_FOREGROUND_ZINDEX",i[i.SERIES_CROSSHAIR_ZINDEX=7]="SERIES_CROSSHAIR_ZINDEX",i[i.SERIES_LABEL_ZINDEX=8]="SERIES_LABEL_ZINDEX",i[i.SERIES_CROSSLINE_LINE_ZINDEX=9]="SERIES_CROSSLINE_LINE_ZINDEX",i[i.SERIES_ANNOTATION_ZINDEX=10]="SERIES_ANNOTATION_ZINDEX",i[i.LEGEND_ZINDEX=11]="LEGEND_ZINDEX",i[i.NAVIGATOR_ZINDEX=12]="NAVIGATOR_ZINDEX",i))(qD||{});function XD(i){return i!=null&&Object.hasOwn(i,"toString")&&qr(i.toString())}function ZD(i){return i!=null&&Object.hasOwn(i,"valueOf")&&qt(i.valueOf())}function Iv(i){return qt(i)||Pm(i)||ZD(i)}function Yb(i,e){return i!=null&&(!e||Iv(i))}function ch(i){return XD(i)&&Object.hasOwn(i,"id")?i.id:i}var HS=i=>i==="value"?ui((e,t)=>t.target.type==="line",e=>e.target.type==="range"?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'"):ui((e,t)=>t.target.type==="range",e=>e.target.type==="line"?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'"),QD=(i,e,t,n)=>{let r=i==="line"&&e!==void 0,s=i==="range"&&t!==void 0;if(!r&&!s)return!0;let[o,a]=t??[e,void 0],l=ei.is(n)||Ua.is(n),c=Yb(o,l)&&!isNaN(n.convert(o)),u=Yb(a,l)&&!isNaN(n.convert(a));if(r&&c||s&&c&&u)return!0;let d=["Expecting crossLine"];return s?(c||d.push(`range start ${rm(o)}`),u||d.push(`${c?"":"and "}range end ${rm(a)}`)):d.push(`value ${rm(o)}`),d.push("to match the axis scale domain."),Ie.warnOnce(d.join(" ")),!1},r7={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},s7={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function Z6({yDirection:i,padding:e=0,position:t="top",bbox:n}){let r=i?r7:s7,{xTranslationDirection:s,yTranslationDirection:o}=r[t],a=i?n.width:n.height,l=i?n.height:n.width,c=s*(e+a/2),u=o*(e+l/2);return{xTranslation:c,yTranslation:u}}function o7({yDirection:i,bbox:e,padding:t=0,position:n="top"}){let r={};return n.startsWith("inside")||(n==="top"&&!i?r.top=t+e.height:n==="bottom"&&!i?r.bottom=t+e.height:n==="left"&&i?r.left=t+e.width:n==="right"&&i&&(r.right=t+e.width)),r}var qb=({yDirection:i,xEnd:e,yStart:t,yEnd:n})=>i?{x:e/2,y:t}:{x:e,y:isNaN(n)?t:(t+n)/2},Q6=({yDirection:i,xStart:e,xEnd:t,yStart:n,yEnd:r})=>i?{x:e,y:isNaN(r)?n:(n+r)/2}:{x:t/2,y:n},J6=({yDirection:i,xEnd:e,yStart:t,yEnd:n})=>i?{x:e,y:isNaN(n)?t:(t+n)/2}:{x:e/2,y:isNaN(n)?t:n},eP=({yDirection:i,xStart:e,xEnd:t,yStart:n,yEnd:r})=>i?{x:t/2,y:isNaN(r)?n:r}:{x:e,y:isNaN(r)?n:(n+r)/2},a7=({xEnd:i,yStart:e,yEnd:t})=>({x:i/2,y:isNaN(t)?e:(e+t)/2}),tP=({yDirection:i,xStart:e,xEnd:t,yStart:n})=>i?{x:e/2,y:n}:{x:t,y:n},iP=({yDirection:i,xStart:e,yStart:t,yEnd:n})=>i?{x:e,y:isNaN(n)?t:n}:{x:e,y:t},nP=({yDirection:i,xEnd:e,yStart:t,yEnd:n})=>i?{x:e,y:t}:{x:e,y:isNaN(n)?t:n},rP=({yDirection:i,xStart:e,xEnd:t,yStart:n,yEnd:r})=>i?{x:t,y:isNaN(r)?n:r}:{x:e,y:isNaN(r)?n:r},l7={top:{c:qb},bottom:{c:eP},left:{c:Q6},right:{c:J6},topLeft:{c:tP},topRight:{c:nP},bottomLeft:{c:iP},bottomRight:{c:rP},inside:{c:a7},insideLeft:{c:Q6},insideRight:{c:J6},insideTop:{c:qb},insideBottom:{c:eP},insideTopLeft:{c:tP},insideBottomLeft:{c:iP},insideTopRight:{c:nP},insideBottomRight:{c:rP}},c7=Li(["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],"crossLine label position"),Is=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}};E([I(ht,{optional:!0})],Is.prototype,"enabled",2);E([I(Ne,{optional:!0})],Is.prototype,"text",2);E([I(Xl,{optional:!0})],Is.prototype,"fontStyle",2);E([I(Zl,{optional:!0})],Is.prototype,"fontWeight",2);E([I(ke)],Is.prototype,"fontSize",2);E([I(Ne)],Is.prototype,"fontFamily",2);E([I(fi)],Is.prototype,"padding",2);E([I(Xt,{optional:!0})],Is.prototype,"color",2);E([I(c7,{optional:!0})],Is.prototype,"position",2);E([I(ql,{optional:!0})],Is.prototype,"rotation",2);E([I(ht,{optional:!0})],Is.prototype,"parallel",2);var ho=(()=>{let i=class Qp{constructor(){this.id=sa(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new Is,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.group=new ot({name:`${this.id}`,layer:!0,zIndex:Qp.LINE_LAYER_ZINDEX}),this.labelGroup=new ot({name:`${this.id}`,layer:!0,zIndex:Qp.LABEL_LAYER_ZINDEX}),this.crossLineRange=new la,this.crossLineLabel=new Vt,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;let{group:t,labelGroup:n,crossLineRange:r,crossLineLabel:s}=this;t.append(r),n.append(s),r.pointerEvents=1}update(t){let{enabled:n,data:r,type:s,value:o,range:a,scale:l}=this;if(!s||!l||!n||!t||!QD(s,o,a,l)||r.length===0){this.group.visible=!1,this.labelGroup.visible=!1;return}this.group.visible=t,this.labelGroup.visible=t,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()}calculateLayout(t,n){if(!t||!this.createNodeData(n))return;let{sideFlag:s,gridLength:o,data:a}=this,l=[],c=0,u=s*o,d=a[0],h=a[1],p=new nt(Math.min(c,u),Math.min(d,h),Math.abs(c-u),Math.abs(d-h));l.push(p);let m=this.computeLabelBBox();return m&&l.push(m),nt.merge(l)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(t){var n,r,s;let{scale:o,gridLength:a,sideFlag:l,direction:c,label:{position:u="top"},clippedRange:d,strokeWidth:h=0}=this;if(this.data=[],!o)return!1;let p=(n=o.bandwidth)!=null?n:0,m=(r=o.step)!=null?r:0,g=(t?-1:1)*(o instanceof jl?(m-p)/2:0),[f,y]=[0,l*a],[b,v]=this.getRange(),S=v===void 0&&Ua.is(o)?p/2+g:0,[w,T]=[Number(o.convert(b,{clampMode:"clamped"}))-g+S,o.convert(v,{clampMode:"clamped"})+p+g];w=J0(w,d),T=J0(T,d),[b,v]=[Number(o.convert(b))+S,o.convert(v)+p];let D=(b===w||v===T||w!==T)&&Math.abs(T-w)>0;if(D&&w>T&&([w,T]=[T,w],[b,v]=[v,b]),b-g>=w&&(b-=g),v+g<=T&&(v+=g),this.isRange=D,this.startLine=h>0&&b>=w&&b<=w+g,this.endLine=h>0&&v>=T-p-g&&v<=T,!D&&!this.startLine&&!this.endLine)return!1;if(this.data=[w,T],this.label.enabled){let O=c==="y",{c:R=qb}=(s=l7[u])!=null?s:{},{x:L,y:B}=R({yDirection:O,xStart:f,xEnd:y,yStart:w,yEnd:T});this.labelPoint={x:L,y:B}}return!0}updateRangeNode(){var t;let{crossLineRange:n,sideFlag:r,gridLength:s,data:o,startLine:a,endLine:l,isRange:c,fill:u,fillOpacity:d,stroke:h,strokeWidth:p,lineDash:m}=this;n.x1=0,n.x2=r*s,n.y1=o[0],n.y2=o[1],n.startLine=a,n.endLine=l,n.isRange=c,n.fill=u,n.fillOpacity=d??1,n.stroke=h,n.strokeWidth=p??1,n.strokeOpacity=(t=this.strokeOpacity)!=null?t:1,n.lineDash=m}updateLabel(){let{crossLineLabel:t,label:n}=this;n.text&&(t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.fontSize=n.fontSize,t.fontFamily=n.fontFamily,t.fill=n.color,t.text=n.text)}positionLabel(){let{crossLineLabel:t,labelPoint:{x:n=void 0,y:r=void 0}={},label:{parallel:s,rotation:o,position:a="top",padding:l=0},direction:c,parallelFlipRotation:u,regularFlipRotation:d}=this;if(n===void 0||r===void 0)return;let{defaultRotation:h,configuredRotation:p}=nv({rotation:o,parallel:s,regularFlipRotation:d,parallelFlipRotation:u});t.rotation=h+p,t.textBaseline="middle",t.textAlign="center";let m=t.computeTransformedBBox();if(!m)return;let g=c==="y",{xTranslation:f,yTranslation:y}=Z6({yDirection:g,padding:l,position:a,bbox:m});t.translationX=n+f,t.translationY=r+y}getZIndex(t=!1){return t?Qp.RANGE_LAYER_ZINDEX:Qp.LINE_LAYER_ZINDEX}getRange(){var t;let{value:n,range:r,scale:s}=this,o=ei.is(s)||Ua.is(s),a=(t=r?.[0])!=null?t:n,l=r?.[1];return!o&&l===void 0&&(l=a),o&&a===l&&(l=void 0),[a,l]}computeLabelBBox(){let{label:t}=this;if(!t.enabled)return;let n=new Vt;n.fontFamily=t.fontFamily,n.fontSize=t.fontSize,n.fontStyle=t.fontStyle,n.fontWeight=t.fontWeight,n.text=t.text;let{labelPoint:{x:r=void 0,y:s=void 0}={},label:{parallel:o,rotation:a,position:l="top",padding:c=0},direction:u,parallelFlipRotation:d,regularFlipRotation:h}=this;if(r===void 0||s===void 0)return;let{configuredRotation:p}=nv({rotation:a,parallel:o,regularFlipRotation:h,parallelFlipRotation:d});n.rotation=p,n.textBaseline="middle",n.textAlign="center";let m=n.computeTransformedBBox();if(!m)return;let g=u==="y",{xTranslation:f,yTranslation:y}=Z6({yDirection:g,padding:c,position:l,bbox:m});return n.translationX=r+f,n.translationY=s+y,n.computeTransformedBBox()}calculatePadding(t){var n,r,s,o,a,l,c,u;let{isRange:d,startLine:h,endLine:p,direction:m,label:{padding:g=0,position:f="top"}}=this;if(!d&&!h&&!p)return;let y=this.computeLabelBBox();if(y?.x==null||y?.y==null)return;let b=o7({yDirection:m==="y",padding:g,position:f,bbox:y});t.left=Math.max((n=t.left)!=null?n:0,(r=b.left)!=null?r:0),t.right=Math.max((s=t.right)!=null?s:0,(o=b.right)!=null?o:0),t.top=Math.max((a=t.top)!=null?a:0,(l=b.top)!=null?l:0),t.bottom=Math.max((c=t.bottom)!=null?c:0,(u=b.bottom)!=null?u:0)}};return i.LINE_LAYER_ZINDEX=9,i.RANGE_LAYER_ZINDEX=3,i.LABEL_LAYER_ZINDEX=8,i.className="CrossLine",i})();E([I(ht,{optional:!0})],ho.prototype,"enabled",2);E([I(Li(["range","line"],"a crossLine type"),{optional:!0})],ho.prototype,"type",2);E([I(Ps(HS("range"),Ph.restrict({length:2})),{optional:!0})],ho.prototype,"range",2);E([I(HS("value"),{optional:!0})],ho.prototype,"value",2);E([I(Xt,{optional:!0})],ho.prototype,"fill",2);E([I(Qt,{optional:!0})],ho.prototype,"fillOpacity",2);E([I(Xt,{optional:!0})],ho.prototype,"stroke",2);E([I(fi,{optional:!0})],ho.prototype,"strokeWidth",2);E([I(Qt,{optional:!0})],ho.prototype,"strokeOpacity",2);E([I(qa,{optional:!0})],ho.prototype,"lineDash",2);var Xb=ho,zS=class{constructor(){this.moduleMap=new Map}*modules(){for(let i of this.moduleMap.values())yield i.moduleInstance}addModule(i,e){if(this.moduleMap.has(i.optionsKey))throw new Error(`AG Charts - module already initialised: ${i.optionsKey}`);this.moduleMap.set(i.optionsKey,{module:i,moduleInstance:e(i)})}removeModule(i){var e;let t=qr(i)?i:i.optionsKey;(e=this.moduleMap.get(t))==null||e.moduleInstance.destroy(),this.moduleMap.delete(t)}getModule(i){var e;return(e=this.moduleMap.get(qr(i)?i:i.optionsKey))==null?void 0:e.moduleInstance}isEnabled(i){return this.moduleMap.has(qr(i)?i:i.optionsKey)}mapModules(i){return Array.from(this.moduleMap.values(),(e,t)=>i(e.moduleInstance,t))}destroy(){var i;for(let e of this.moduleMap.keys())(i=this.moduleMap.get(e))==null||i.moduleInstance.destroy();this.moduleMap.clear()}},JD={};na(JD,{resetMotion:()=>xn});function xn(i,e){let{nodes:t,selections:n}=_v(i);for(let r of n){for(let s of r.nodes()){let o=e(s,s.datum);s.setProperties(o)}r.cleanup()}for(let r of t){let s=e(r,r.datum);r.setProperties(s)}}var Vm=class{constructor(i,e,t){this.states=e,this.preTransitionCb=t,this.debug=Mi.create(!0,"animation"),this.state=i,this.debug(`%c${this.constructor.name} | init -> ${i}`,"color: green")}transition(i,e){var t,n;let r=this.states[this.state],s=r?.[i];if(!s){this.debug(`%c${this.constructor.name} | ${this.state} -> ${i} -> ${this.state}`,"color: grey");return}let o=this.state;return typeof s=="string"?o=s:typeof s=="object"&&(o=s.target),this.debug(`%c${this.constructor.name} | ${this.state} -> ${i} -> ${o}`,"color: green"),(t=this.preTransitionCb)==null||t.call(this,this.state,o),this.state=o,typeof s=="function"?s(e):typeof s=="object"&&((n=s.action)==null||n.call(s,e)),this.state}},uh=i=>`(${i})`,Ra=i=>`${uh(i)}?`,sP=i=>Ra(`?:${i}`),u7=(()=>{let i=".",e="[<>=^]",t="[+\\-( ]",n="[$\u20AC\xA3\xA5\u20A3\u20B9#]",r="0",s="\\d+",o=",",a="\\d+",l="~",c="[%a-z]";return new RegExp(["^",sP(`${Ra(i)}${uh(e)}`),Ra(t),Ra(n),Ra(r),Ra(s),Ra(o),sP(`\\.${uh(a)}`),Ra(l),Ra(c),"$"].join(""),"i")})(),d7=(()=>{let i=".*?",e=".+?",t=".*?";return new RegExp(["^",uh(i),`#\\{${uh(e)}\\}`,uh(t),"$"].join(""))})();function ek(i){let e,t,n=d7.exec(i);n&&([,e,i,t]=n);let r=u7.exec(i);if(!r)throw new Error(`The number formatter is invalid: ${i}`);let[,s,o,a,l,c,u,d,h,p,m]=r;return{fill:s,align:o,sign:a,symbol:l,zero:c,width:parseInt(u),comma:d,precision:parseInt(h),trim:!!p,type:m,prefix:e,suffix:t}}function tk(i){let e=typeof i=="string"?ek(i):i,{fill:t,align:n,sign:r="-",symbol:s,zero:o,width:a,comma:l,type:c,prefix:u="",suffix:d="",precision:h}=e,{trim:p}=e,m=h===void 0||isNaN(h),g;if(!c)g=jr.g,p=!0;else if(c in jr&&c in ih)g=m?ih[c]:jr[c];else if(c in jr)g=jr[c];else if(c in ih)g=ih[c];else throw new Error(`The number formatter type is invalid: ${c}`);let f;return h==null||m?f=c?6:12:f=h,y=>{let b=g(y,f);return p&&(b=h7(b)),l&&(b=p7(b,l)),b=v7(y,b,r),s&&s!=="#"&&(b=`${s}${b}`),s==="#"&&c==="x"&&(b=`0x${b}`),c==="s"&&(b=`${b}${m7(y)}`),(c==="%"||c==="p")&&(b=`${b}%`),a!=null&&!isNaN(a)&&(b=y7(b,a,t??o,n)),b=`${u}${b}${d}`,b}}var A0=i=>Math.floor(Math.abs(i)),ih={b:i=>A0(i).toString(2),c:i=>String.fromCharCode(i),d:i=>Math.round(Math.abs(i)).toFixed(0),o:i=>A0(i).toString(8),x:i=>A0(i).toString(16),X:i=>ih.x(i).toUpperCase(),n:i=>ih.d(i),"%":i=>`${A0(i*100).toFixed(0)}`},jr={e:(i,e)=>Math.abs(i).toExponential(e),E:(i,e)=>jr.e(i,e).toUpperCase(),f:(i,e)=>Math.abs(i).toFixed(e),F:(i,e)=>jr.f(i,e).toUpperCase(),g:(i,e)=>{if(i===0)return"0";let t=Math.abs(i),n=Math.floor(Math.log10(t));return n>=-4&&n<e?t.toFixed(e-1-n):t.toExponential(e-1)},G:(i,e)=>jr.g(i,e).toUpperCase(),n:(i,e)=>jr.g(i,e),p:(i,e)=>jr.r(i*100,e),r:(i,e)=>{if(i===0)return"0";let t=Math.abs(i),r=Math.floor(Math.log10(t))-(e-1);if(r<=0)return t.toFixed(-r);let s=Math.pow(10,r);return(Math.round(t/s)*s).toFixed()},s:(i,e)=>{let t=ik(i);return jr.r(i/Math.pow(10,t),e)},"%":(i,e)=>jr.f(i*100,e)};function h7(i){return i.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}function p7(i,e){let t=i.indexOf(".");t<0&&(t=i.length);let n=i.substring(0,t).split(""),r=i.substring(t);for(let s=n.length-3;s>0;s-=3)n.splice(s,0,e);return`${n.join("")}${r}`}function m7(i){return g7[ik(i)]}function ik(i){return Dt(nk,i?Math.floor(Math.log10(Math.abs(i))/3)*3:0,rk)}var nk=-24,rk=24,g7={[nk]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xB5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[rk]:"Y"},f7="\u2212";function v7(i,e,t=""){if(t==="(")return i>=0?e:`(${e})`;let n=t==="+"?"+":"";return`${i>=0?n:f7}${e}`}function y7(i,e,t=" ",n=">"){let r=i;if(n===">"||!n)r=r.padStart(e,t);else if(n==="<")r=r.padEnd(e,t);else if(n==="^"){let s=Math.max(0,e-r.length),o=Math.ceil(s/2),a=Math.floor(s/2);r=r.padStart(o+r.length,t),r=r.padEnd(a+r.length,t)}return r}function sk(i,e){let t=ek(e??",f"),{precision:n}=t;(n==null||isNaN(n))&&(t.type==="f"||t.type==="%"?t.precision=Math.max(...i.map(s=>{if(typeof s!="number"||s===0)return 0;let o=Math.floor(Math.log10(Math.abs(s))),a=t.type?6:12,l=s.toExponential(a-1).replace(/\.?0+e/,"e"),c=l.indexOf(".");if(c<0)return o>=0?0:-o;let u=l.indexOf("e")-c;return Math.max(0,u-o-1)})):(!t.type||t.type in jr)&&(t.precision=Math.max(...i.map(s=>{if(typeof s!="number")return 0;let o=s.toExponential((t.type?6:12)-1).replace(/\.?0+e/,"e");return o.substring(0,o.indexOf("e")).replace(".","").length}))));let r=tk(t);return s=>r(Number(s))}var ok=class Zb extends ei{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.baseLog=z6,this.basePow=z6,this.log=e=>Math.min(...this.domain)>=0?this.baseLog(e):-this.baseLog(-e),this.pow=e=>Math.min(...this.domain)>=0?this.basePow(e):-this.basePow(-e),this.defaultClampMode="clamped"}toDomain(e){return e}transform(e){return Math.min(...this.domain)>=0?Math.log(e):-Math.log(-e)}transformInvert(e){return Math.min(...this.domain)>=0?Math.exp(e):-Math.exp(-e)}refresh(){this.base<=0&&(this.base=0,Ie.warnOnce("expecting a finite Number greater than to 0")),super.refresh()}update(){!this.domain||this.domain.length<2||(this.baseLog=Zb.getBaseLogMethod(this.base),this.basePow=Zb.getBasePowerMethod(this.base),this.nice&&this.updateNiceDomain())}updateNiceDomain(){let[e,t]=this.domain,n=e>t?Math.ceil:Math.floor,r=e>t?Math.floor:Math.ceil,s=this.pow(n(this.log(e))),o=this.pow(r(this.log(t)));this.niceDomain=[s,o]}ticks(){var e;let t=(e=this.tickCount)!=null?e:10;if(!this.domain||this.domain.length<2||t<1)return[];this.refresh();let n=this.base,[r,s]=this.getDomain(),o=Math.min(r,s),a=Math.max(r,s),l=this.log(o),c=this.log(a);if(this.interval){let f=Math.abs(this.interval),y=Math.abs(c-l),b=ym(l,c,Math.min(y,f));b=vm(b.fractionDigits,b.map(S=>this.pow(S)).filter(S=>S>=o&&S<=a));let v=this.getPixelRange();if(!Cm({start:o,stop:a,interval:f,count:b.length,availableRange:v}))return b}let u=n%1===0,d=c-l>=t;if(!u||d){let f=Dv(l,c,Math.min(c-l,t));return f=vm(f.fractionDigits,f.map(y=>this.pow(y))),f}let h=[],p=o>0;l=Math.floor(l)-1,c=Math.round(c)+1;let m=hm(this.range)/t,g=1/0;for(let f=l;f<=c;f++){let y=this.convert(this.pow(f+1));for(let b=1;b<n;b++){let v=p?b:n-b+1,S=this.pow(f)*v,w=this.convert(S),T=Math.abs(g-w),D=Math.abs(w-y),O=T>=m&&D>=m;S>=o&&S<=a&&(b===1||O||h.length===0)&&(h.push(S),g=w)}}return h}tickFormat({count:e,ticks:t,specifier:n}){return e!==1/0&&t==null&&this.ticks(),n??(n=this.base===10?".0e":","),qr(n)?tk(n):n}static getBaseLogMethod(e){switch(e){case 10:return Math.log10;case Math.E:return Math.log;case 2:return Math.log2;default:let t=Math.log(e);return n=>Math.log(n)/t}}static getBasePowerMethod(e){switch(e){case 10:return t=>t>=0?mt(10,t):1/mt(10,-t);case Math.E:return Math.exp;default:return t=>mt(e,t)}}};E([Rn],ok.prototype,"base",2);var WS=ok,Ti=class ou{constructor(e,t,n=!0){this.parentNode=e,this.autoCleanup=n,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=Mi.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(Mh,t)?()=>new t:t}static select(e,t,n=!0){return new ou(e,t,n)}static selectAll(e,t){let n=[],r=s=>{t(s)&&n.push(s),s.children.forEach(r)};return r(e),n}static selectByClass(e,t,...n){return ou.selectAll(e,r=>r instanceof t||n.some(s=>r instanceof s))}static selectByTag(e,t){return ou.selectAll(e,n=>n.tag===t)}createNode(e,t,n){let r=this.nodeFactory(e);return r.datum=e,t?.(r),n==null?this._nodes.push(r):this._nodes.splice(n,0,r),this.parentNode.appendChild(r),r}update(e,t,n){if(this.garbageBin.size>0&&this.debug(`Selection - update() called with pending garbage: ${e}`),n){let r=new Map(e.map((s,o)=>[n(s),[s,o]]));for(let[s,o]of this._nodesMap.entries())if(r.has(o)){let[a]=r.get(o);s.datum=a,this.garbageBin.delete(s),r.delete(o)}else this.garbageBin.add(s);for(let[s,[o,a]]of r.entries())this._nodesMap.set(this.createNode(o,t,a),s)}else{let r=Math.max(e.length,this.data.length);for(let s=0;s<r;s++)s>=e.length?this.garbageBin.add(this._nodes[s]):s>=this._nodes.length?this.createNode(e[s],t):(this._nodes[s].datum=e[s],this.garbageBin.delete(this._nodes[s]))}return this.data=e.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return this.garbageBin.size===0?this:(this._nodes=this._nodes.filter(e=>this.garbageBin.has(e)?(this._nodesMap.delete(e),this.garbageBin.delete(e),this.parentNode.removeChild(e),!1):!0),this)}clear(){return this.update([]),this}isGarbage(e){return this.garbageBin.has(e)}hasGarbage(){return this.garbageBin.size>0}each(e){for(let t of this._nodes.entries())e(t[1],t[1].datum,t[0]);return this}*[Symbol.iterator](){for(let e=0;e<this._nodes.length;e++){let t=this._nodes[e],n=this._nodes[e].datum;yield{node:t,datum:n,index:e}}}select(e){return ou.selectAll(this.parentNode,e)}selectByClass(e){return ou.selectByClass(this.parentNode,e)}selectByTag(e){return ou.selectByTag(this.parentNode,e)}nodes(){return this._nodes}};function sm(i,e,t,n){let r=i-t,s=e-n;return r*r+s*s}function H0(i,e,t,n,r,s,o){if(t===r&&n===s)return Math.min(o,sm(i,e,t,n));let a=r-t,l=s-n,c=Math.max(0,Math.min(1,((i-t)*a+(e-n)*l)/(a*a+l*l))),u=t+c*a,d=n+c*l;return Math.min(o,sm(i,e,u,d))}function C7(i,e,t,n,r,s,o,a,l){a&&([o,s]=[s,o]);let c=Math.atan2(e-n,i-t);if(!Om(c,s,o)){let d=t+Math.cos(s)*r,h=n+Math.sin(s)*r,p=t+Math.cos(s)*r,m=n+Math.sin(s)*r;return Math.min(l,sm(i,e,d,h),sm(i,e,p,m))}let u=r-Math.sqrt(sm(i,e,t,n));return Math.min(l,u*u)}var Ln=class extends As{constructor(i={}){super(i),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(i){this.x1=i,this.x2=i}set y(i){this.y1=i,this.y2=i}computeBBox(){return new nt(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(i,e){if(this.x1===this.x2||this.y1===this.y2){let{x:t,y:n}=this.transformPoint(i,e);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(t,n)}return!1}distanceSquared(i,e){let{x1:t,y1:n,x2:r,y2:s}=this;return H0(i,e,t,n,r,s,1/0)}render(i){var e;let{ctx:t,forceRender:n,stats:r,devicePixelRatio:s}=i;if(this.dirty===0&&!n){r&&(r.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(t);let{x1:o,y1:a,x2:l,y2:c}=this;if(o===l){let{strokeWidth:u}=this,d=Math.round(o*s)/s+Math.trunc(u*s)%2/(s*2);o=d,l=d}else if(a===c){let{strokeWidth:u}=this,d=Math.round(a*s)/s+Math.trunc(u*s)%2/(s*2);a=d,c=d}t.beginPath(),t.moveTo(o,a),t.lineTo(l,c),this.fillStroke(t),(e=this.fillShadow)==null||e.markClean(),super.render(i)}};Ln.className="Line";Ln.defaultStyles=Object.assign({},As.defaultStyles,{fill:void 0,strokeWidth:1});E([Ze({redraw:3})],Ln.prototype,"x1",2);E([Ze({redraw:3})],Ln.prototype,"y1",2);E([Ze({redraw:3})],Ln.prototype,"x2",2);E([Ze({redraw:3})],Ln.prototype,"y2",2);function b7(i,e,t,n,r,s){if(i.size===0)return!1;let o=i.x,a=i.y;e!=null&&(o-=(e.x-.5)*i.size,a-=(e.y-.5)*i.size);let l=o;o<t?l=t:o>t+r&&(l=t+r);let c=a;a<n?c=n:a>n+s&&(c=n+s);let u=o-l,d=a-c;return Math.sqrt(u*u+d*d)<=i.size*.5}function ak(i,e,t,n,r){let s=i.x+i.width>e&&i.x<e+n,o=i.y+i.height>t&&i.y<t+r;return s&&o}function S7(i,e,t,n,r){return e+n<i.x+i.width&&e>i.x&&t>i.y&&t+r<i.y+i.height}function x7(i){return i!=null&&typeof i.point=="object"&&typeof i.label=="object"}var _7={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}};function w7(i,e,t=5){var n,r;let s=[];i=i.map(o=>o.slice().sort((a,l)=>l.point.size-a.point.size));for(let o=0;o<i.length;o++){let a=s[o]=[],l=i[o];if(l?.length&&l[0].label)for(let c=0,u=l.length;c<u;c++){let d=l[c],{point:h,label:p,marker:m}=d,{text:g,width:f,height:y}=p,b=h.size*.5,v=0,S=0;if(b>0&&d.placement!=null){let L=_7[d.placement];v=(f*.5+b+t)*L.x,S=(y*.5+b+t)*L.y}let w=h.x-f*.5+v-(((n=m?.center.x)!=null?n:.5)-.5)*h.size,T=h.y-y*.5+S-(((r=m?.center.y)!=null?r:.5)-.5)*h.size;!(!e||S7(e,w,T,f,y))||i.some(L=>L.some(B=>{var $;return b7(B.point,($=B.marker)==null?void 0:$.center,w,T,f,y)}))||s.some(L=>L.some(B=>ak(B,w,T,f,y)))||a.push({index:c,text:g,x:w,y:T,width:f,height:y,datum:d})}}return s}function E7(i,e){let t=[];for(let n=0;n<i.length;n++){let r=i[n],{point:{x:s,y:o},label:{text:a}}=r,{label:{width:l,height:c}}=r;if(l+=e??0,c+=e??0,t.some(d=>ak(d,s,o,l,c)))return!0;t.push({index:n,text:a,x:s,y:o,width:l,height:c,datum:r})}return!1}function lk(i,e){return i.length===e.length&&i.every((t,n)=>{let r=e[n];return Array.isArray(t)&&Array.isArray(r)?lk(t,r):t===r})}function ck(i,e){return i.length===e.length&&i.every((t,n)=>Number(t)===Number(e[n]))}function T7(i){let e=sn(i)?i:i.split(".");if(e.length===1){let[t]=e;return $a((n,r,s)=>n[t]=s,n=>n[t])}return $a((t,n,r)=>vS(t,e,r),t=>gS(t,e))}function M7(i){return $a((e,t,n)=>e[i]=n)}function vi(i,e){return $a((t,n,r)=>t[i][e??n]=r)}function Ir(i){let{newValue:e,oldValue:t,changeValue:n}=i;return $a((r,s,o,a)=>(o!==a&&(a!==void 0&&t?.call(r,a),o!==void 0&&e?.call(r,o),n?.call(r,o,a)),o))}function Jr(i){return v5(i)}function fh(i,e,t){t===void 0||t===""?i?.removeAttribute(e):i?.setAttribute(e,t.toString())}function uk(i,e,t,n,r){let{top:s,right:o,bottom:a,left:l,width:c,height:u}=r;return l!=null?c!=null?o=t-l+c:o!=null&&(c=t-l-o):o!=null&&c!=null&&(l=t-o-c),s!=null?u!=null?a=n-s-u:a!=null&&(u=n-a-s):a!=null&&u!=null&&(s=n-a-u),c==null?u==null?(c=i,u=e):c=Math.ceil(i*u/e):u==null&&(u=Math.ceil(e*c/i)),l==null&&(o==null?l=Math.floor((t-c)/2):l=t-o-c),s==null&&(a==null?s=Math.floor((n-u)/2):s=n-u-a),{x:l,y:s,width:c,height:u}}var qi="ag-chart-tooltip",dk="ag-chart-dark-tooltip",Xa={html:"",ariaLabel:""};function A7(i){let e=(t,n,r)=>n===0||r[n-1]!=="."?". ":" ";return i.replace(/<br\s*\/?>/g,e).replace(/<\/p\s+>/g,e).replace(/<\/li\s*\/>/g,e).replace(/<[^>]+>/g,"")}function vh(i,e){var t,n,r;if(typeof i=="string")return{html:i,ariaLabel:i};let{content:s=(t=e?.content)!=null?t:"",title:o=e?.title,color:a=(n=e?.color)!=null?n:"white",backgroundColor:l=(r=e?.backgroundColor)!=null?r:"#888"}=i,c=o?`<div class="${qi}-title"
        style="color: ${a}; background-color: ${l}">${o}</div>`:"",u=o?`${o}: `:"",d=s?`<div class="${qi}-content">${s}</div>`:"";return{html:`${c}${d}`,ariaLabel:A7(`${u}${s}`)}}var Ih=class extends Ot{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}};E([I(Li(["pointer","node","top","right","bottom","left","top-left","top-right","bottom-right","bottom-left"],"a position type"))],Ih.prototype,"type",2);E([I(fi)],Ih.prototype,"xOffset",2);E([I(fi)],Ih.prototype,"yOffset",2);var po=class extends Ot{constructor(){super(),this.enabled=!0,this.delay=0,this.range="nearest",this.wrapping="hyphenate",this.position=new Ih,this.darkTheme=!1,this.enableInteraction=!1,this.lastVisibilityChange=Date.now(),this.wrapTypes=["always","hyphenate","on-space","never"],this.showTimeout=0,this._showArrow=!0,this.element=Ui("div",qi),fh(this.element,"aria-hidden",!0),this.root=ea("body"),this.root.appendChild(this.element)}destroy(){this.element.remove()}isVisible(){return!this.element.classList.contains(qi+"-hidden")}show(i,e,t,n=!1){var r,s,o,a,l,c,u,d,h;let{element:p}=this;if(t!=null)p.innerHTML=t.html;else if(!p.innerHTML){this.toggle(!1);return}let m=(s=(r=e.position)==null?void 0:r.type)!=null?s:this.position.type,g=(a=(o=e.position)==null?void 0:o.xOffset)!=null?a:0,f=(c=(l=e.position)==null?void 0:l.yOffset)!=null?c:0,y=this.getTooltipBounds({positionType:m,meta:e,yOffset:f,xOffset:g,canvasRect:i}),b=this.getWindowSize(),v=uk(p.clientWidth,p.clientHeight,i.width,i.height,y);v.x+=i.x,v.y+=i.y;let S=Dt(0,v.x,b.width-p.clientWidth-1),w=Dt(0,v.y,b.height-p.clientHeight),T=S!==v.x||w!==v.y,D=(m==="node"||m==="pointer")&&!T&&!g&&!f,O=(d=(u=e.showArrow)!=null?u:this.showArrow)!=null?d:D;this.updateShowArrow(O),p.style.transform=`translate(${Math.round(S)}px, ${Math.round(w)}px)`,this.enableInteraction=(h=e.enableInteraction)!=null?h:!1,this.delay>0&&!n?(this.toggle(!1),this.showTimeout=setTimeout(()=>{this.toggle(!0)},this.delay)):this.toggle(!0)}getWindowSize(){let{innerWidth:i,innerHeight:e}=ta();return{width:i,height:e}}toggle(i){let{classList:e}=this.element,t=(l,c)=>e.toggle(`${qi}-${l}`,c),n=this.isVisible(),r=1/0;if(i||clearTimeout(this.showTimeout),n!==i){let l=Date.now();r=l-this.lastVisibilityChange,this.lastVisibilityChange=l}let s=100,o=5,a=!n&&i&&r>s;r>o&&t("no-animation",a),t("no-interaction",!this.enableInteraction),t("hidden",!i),t("arrow",this._showArrow),e.toggle(dk,this.darkTheme);for(let l of this.wrapTypes)e.toggle(`${qi}-wrap-${l}`,l===this.wrapping)}pointerLeftOntoTooltip(i){var e;if(!this.enableInteraction)return!1;let t=(e=i.sourceEvent.relatedTarget)==null?void 0:e.classList,r=!!["","-title","-content"].filter(s=>t?.contains(`${qi}${s}`));return t!==void 0&&r}updateShowArrow(i){this._showArrow=i}getTooltipBounds({positionType:i,meta:e,yOffset:t,xOffset:n,canvasRect:r}){let{clientWidth:s,clientHeight:o}=this.element,a={width:s,height:o};switch(i){case"node":case"pointer":return a.top=e.offsetY+t-o-8,a.left=e.offsetX+n-s/2,a;case"top":return a.top=t,a.left=r.width/2-s/2+n,a;case"right":return a.top=r.height/2-o/2+t,a.left=r.width-s/2+n,a;case"left":return a.top=r.height/2-o/2+t,a.left=n,a;case"bottom":return a.top=r.height-o+t,a.left=r.width/2-s/2+n,a;case"top-left":return a.top=t,a.left=n,a;case"top-right":return a.top=t,a.left=r.width-s+n,a;case"bottom-right":return a.top=r.height-o+t,a.left=r.width-s+n,a;case"bottom-left":return a.top=r.height-o+t,a.left=n,a}}};E([I(ht)],po.prototype,"enabled",2);E([I(ht,{optional:!0})],po.prototype,"showArrow",2);E([Jr((i,e,t)=>{e&&i.element.classList.add(e),t&&i.element.classList.remove(t)}),I(Ne,{optional:!0})],po.prototype,"class",2);E([I(ke)],po.prototype,"delay",2);E([I(RS)],po.prototype,"range",2);E([I(Av)],po.prototype,"wrapping",2);E([I(Qe)],po.prototype,"position",2);E([I(ht)],po.prototype,"darkTheme",2);var Oi=(()=>{let i=class extends Ot{constructor(){super(...arguments),this.id=sa(this),this.node=new Vt({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.truncated=!1}getOrAddRegion(e,t){return t==="root"?e.regionManager.getRegion("root"):e.regionManager.addRegionFromProperties({name:t,bboxproviders:[this.node],canInteraction:()=>this.enabled&&this.node.visible})}registerInteraction(e,t){let n=this.getOrAddRegion(e,t),r=[n.addListener("hover",s=>this.handleMouseMove(e,s)),n.addListener("leave",s=>this.handleMouseLeave(e,s))];return IB(...r)}computeTextWrap(e,t){var n,r;let{text:s,wrapping:o}=this,a=Math.min((n=this.maxWidth)!=null?n:1/0,e),l=(r=this.maxHeight)!=null?r:t;if(!isFinite(a)&&!isFinite(l)){this.node.text=s;return}let{text:c,truncated:u}=Vt.wrap(s??"",a,l,this,o);this.node.text=c,this.truncated=u}updateTooltip(e,t){if(t!==void 0&&this.enabled&&this.node.visible&&this.truncated){let{offsetX:n,offsetY:r}=t;return e.tooltipManager.updateTooltip(this.id,{offsetX:n,offsetY:r,lastPointerEvent:t,showArrow:!1},vh({content:this.text})),!0}return!1}handleMouseMove(e,t){this.updateTooltip(e,t)&&t.consume()}handleMouseLeave(e,t){e.tooltipManager.removeTooltip(this.id)}};return i.SMALL_PADDING=10,i.LARGE_PADDING=20,i})();E([I(ht)],Oi.prototype,"enabled",2);E([I(Ne,{optional:!0}),vi("node")],Oi.prototype,"text",2);E([I(OD,{optional:!0}),vi("node")],Oi.prototype,"textAlign",2);E([I(Xl,{optional:!0}),vi("node")],Oi.prototype,"fontStyle",2);E([I(Zl,{optional:!0}),vi("node")],Oi.prototype,"fontWeight",2);E([I(ke),vi("node")],Oi.prototype,"fontSize",2);E([I(Ne),vi("node")],Oi.prototype,"fontFamily",2);E([I(Xt,{optional:!0}),vi("node","fill")],Oi.prototype,"color",2);E([I(ke,{optional:!0})],Oi.prototype,"spacing",2);E([I(ke,{optional:!0})],Oi.prototype,"lineHeight",2);E([I(ke,{optional:!0})],Oi.prototype,"maxWidth",2);E([I(ke,{optional:!0})],Oi.prototype,"maxHeight",2);E([I(Av)],Oi.prototype,"wrapping",2);var P7=["stroke","lineDash"],D7=Ya(i=>Js(i)&&Object.keys(i).every(e=>P7.includes(e)),"objects with gridline style properties such as 'stroke' or 'lineDash'"),Fv=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};E([I(ht)],Fv.prototype,"enabled",2);E([I(ke)],Fv.prototype,"width",2);E([I(D7)],Fv.prototype,"style",2);var Zi=class extends Ot{constructor(){super(...arguments),this.enabled=!0,this.autoWrap=!1,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}};E([I(ht)],Zi.prototype,"enabled",2);E([I(ht,{optional:!0})],Zi.prototype,"autoWrap",2);E([I(ke,{optional:!0})],Zi.prototype,"maxWidth",2);E([I(ke,{optional:!0})],Zi.prototype,"maxHeight",2);E([I(Xl,{optional:!0})],Zi.prototype,"fontStyle",2);E([I(Zl,{optional:!0})],Zi.prototype,"fontWeight",2);E([I(fi.restrict({min:1}))],Zi.prototype,"fontSize",2);E([I(Ne)],Zi.prototype,"fontFamily",2);E([I(ke)],Zi.prototype,"padding",2);E([I(Ah),uo(NaN)],Zi.prototype,"minSpacing",2);E([I(Xt,{optional:!0})],Zi.prototype,"color",2);E([I(ql,{optional:!0})],Zi.prototype,"rotation",2);E([I(ht)],Zi.prototype,"avoidCollisions",2);E([I(ht)],Zi.prototype,"mirrored",2);E([I(ht)],Zi.prototype,"parallel",2);E([I(Qr,{optional:!0})],Zi.prototype,"formatter",2);E([I(Ne,{optional:!0})],Zi.prototype,"format",2);var Bm=class{constructor(){this.enabled=!0,this.width=1,this.color=void 0}};E([I(ht)],Bm.prototype,"enabled",2);E([I(ke)],Bm.prototype,"width",2);E([I(Xt,{optional:!0})],Bm.prototype,"color",2);var mo=class extends Ot{constructor(){super(...arguments),this.enabled=!1,this.spacing=Oi.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};E([I(ht)],mo.prototype,"enabled",2);E([I(Ne,{optional:!0})],mo.prototype,"text",2);E([I(ke,{optional:!0})],mo.prototype,"spacing",2);E([I(Xl,{optional:!0})],mo.prototype,"fontStyle",2);E([I(Zl,{optional:!0})],mo.prototype,"fontWeight",2);E([I(ke)],mo.prototype,"fontSize",2);E([I(Ne)],mo.prototype,"fontFamily",2);E([I(Xt,{optional:!0})],mo.prototype,"color",2);E([I(Av)],mo.prototype,"wrapping",2);E([I(Qr,{optional:!0})],mo.prototype,"formatter",2);function Qb(i){let[e,t]=eo(i.range),n=Math.floor(e),r=Math.ceil(t);return{min:n,max:r,visible:n!==r}}var Jb=Math.PI*2,k7=Jb/2;function I7(i,e){return Math.abs(e-i)<k7?e:i>e?e+Jb:e-Jb}function hk(i){let e=(o,a)=>{let[l=i.min,c=i.max]=eo(a??[]);return o<l||o>c};return{tick:{fromFn(o,a,l){let c=o.y1+o.translationY,u=o.opacity;return(l==="added"||e(o.datum.translationY,o.datum.range))&&(c=a.translationY,u=0),{y:0,translationY:c,opacity:u,phase:dr[l]}},toFn(o,a,l){let c=a.translationY,u=1;return l==="removed"&&(u=0),{y:0,translationY:c,opacity:u,finish:{y:c,translationY:0}}},intermediateFn(o,a,l){return{visible:!e(o.y)}}},line:{fromFn(o,a){var l;return Ue(ue({},(l=o.previousDatum)!=null?l:a),{phase:dr.updated})},toFn(o,a){return ue({},a)}},label:{fromFn(o,a,l){var c;let u=(c=o.previousDatum)!=null?c:a,d=u.x,h=u.y,p=u.rotationCenterX,m=Math.round(o.translationY),g=u.rotation,f=o.opacity;return l==="removed"||e(u.y,u.range)?g=a.rotation:(l==="added"||e(o.datum.y,o.datum.range))&&(m=Math.round(u.translationY),f=0,g=a.rotation),{x:d,y:h,rotationCenterX:p,translationY:m,rotation:g,opacity:f,phase:dr[l]}},toFn(o,a,l){var c,u;let d=a.x,h=a.y,p=a.rotationCenterX,m=Math.round(a.translationY),g=0,f=1;return l==="added"?(f=1,g=a.rotation):l==="removed"?(f=0,g=a.rotation):g=I7((u=(c=o.previousDatum)==null?void 0:c.rotation)!=null?u:a.rotation,a.rotation),{x:d,y:h,rotationCenterX:p,translationY:m,rotation:g,opacity:f,finish:{rotation:a.rotation}}}},group:{fromFn(o,a){let{rotation:l,translationX:c,translationY:u}=o;return{rotation:l,translationX:c,translationY:u,phase:dr.updated}},toFn(o,a){let{rotation:l,translationX:c,translationY:u}=a;return{rotation:l,translationX:c,translationY:u}}}}}function pk(){return(i,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})}function mk(i){let{visible:e,min:t,max:n}=i;return(r,s)=>{let o=s.translationY,a=e&&o>=t&&o<=n;return{y:o,translationY:0,opacity:1,visible:a}}}function gk(){return(i,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})}function fk(){return(i,e)=>ue({},e)}var Fh=(()=>{let i=class vk{constructor(t,n,r){this.moduleCtx=t,this.scale=n,this.id=sa(this),this.nice=!0,this.reverse=!1,this.keys=[],this.dataDomain={domain:[],clipped:!1},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new ot({name:`${this.id}-axis`,zIndex:2}),this.lineNode=this.axisGroup.appendChild(new Ln),this.tickLineGroup=this.axisGroup.appendChild(new ot({name:`${this.id}-Axis-tick-lines`,zIndex:2})),this.tickLabelGroup=this.axisGroup.appendChild(new ot({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.crossLineGroup=new ot({name:`${this.id}-CrossLines`}),this.gridGroup=new ot({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new ot({name:`${this.id}-gridLines`,zIndex:1})),this.tickLineGroupSelection=Ti.select(this.tickLineGroup,Ln,!1),this.tickLabelGroupSelection=Ti.select(this.tickLabelGroup,Vt,!1),this.gridLineGroupSelection=Ti.select(this.gridLineGroup,Ln,!1),this.line=new Bm,this.tick=this.createTick(),this.gridLine=new Fv,this.label=this.createLabel(),this.defaultTickMinSpacing=vk.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=new mo,this._titleCaption=new Oi,this.gridLength=0,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new zS,this.refreshScale(),this.destroyFns.push(this._titleCaption.registerInteraction(this.moduleCtx,"root")),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(t.regionManager.getRegion("series").addListener("hover",o=>this.checkAxisHover(o))),this.animationManager=t.animationManager,this.animationState=new Vm("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:o=>this.animateReadyUpdate(o),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines);let s;this.destroyFns.push(t.layoutService.addListener("layout-complete",o=>{s!=null&&Ms(o.chart,s)!=null&&this.animationState.transition("resize"),s=ue({},o.chart)})),r?.respondsToZoom!==!1&&this.destroyFns.push(t.updateService.addListener("update-complete",o=>{this.minRect=o.minRect}))}get type(){var t;return(t=this.constructor.type)!=null?t:""}set crossLines(t){var n,r;(n=this._crossLines)==null||n.forEach(s=>this.detachCrossLine(s)),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,(r=this._crossLines)==null||r.forEach(s=>{this.attachCrossLine(s),this.initCrossLine(s)})}get crossLines(){return this._crossLines}resetAnimation(t){t==="initial"&&this.animationState.transition("reset")}attachCrossLine(t){this.crossLineGroup.appendChild(t.group),this.crossLineGroup.appendChild(t.labelGroup)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group),this.crossLineGroup.removeChild(t.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(t=>t())}refreshScale(){var t;this.range=this.scale.range.slice(),(t=this.crossLines)==null||t.forEach(this.initCrossLine,this)}updateRange(){var t;let{range:n,visibleRange:r,scale:s}=this,o=(n[1]-n[0])/(r[1]-r[0]),a=o*r[0],l=n[0]-a;s.range=[l,l+o],(t=this.crossLines)==null||t.forEach(c=>{c.clippedRange=[n[0],n[1]]})}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,n){n.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)}detachAxis(t,n){n.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t,n=0,r=0){let[s,o]=eo(this.range);return t+n>=s-r&&t<=o+r}onLabelFormatChange(t,n,r){let{scale:s,fractionDigits:o}=this,l=!(s instanceof WS)&&o>0?c=>typeof c=="number"?c.toFixed(o):String(c):c=>String(c);if(r&&s&&s.tickFormat)try{this.labelFormatter=s.tickFormat({ticks:t,specifier:r})}catch{this.labelFormatter=l,Ie.warnOnce(`the axis label format string ${r} is invalid. No formatting will be applied`)}else this.labelFormatter=l}setTickInterval(t){var n;this.scale.interval=(n=this.tick.interval)!=null?n:t}setTickCount(t,n,r){let{scale:s}=this,o=ei.is(s)||Ua.is(s);if(t&&o){if(typeof t=="number"){s.tickCount=t,s.minTickCount=n??0,s.maxTickCount=r??1/0;return}s instanceof hu&&this.setTickInterval(t)}}onGridLengthChange(t,n){var r;(n&&!t||!n&&t)&&this.onGridVisibilityChange(),(r=this.crossLines)==null||r.forEach(this.initCrossLine,this)}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createLabel(){return new Zi}checkAxisHover(t){!this.interactionEnabled||!this.computeBBox().containsPoint(t.offsetX,t.offsetY)||this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(t=0,n=!0){if(!this.tickGenerationResult)return;let{rotation:r,parallelFlipRotation:s,regularFlipRotation:o}=this.calculateRotations(),a=this.label.getSideFlag();this.updatePosition();let l=this.getAxisLineCoordinates(),{tickData:c,combinedRotation:u,textBaseline:d,textAlign:h,primaryTickCount:p}=this.tickGenerationResult,m=this.tickLabelGroupSelection.nodes().map(g=>g.datum.tickId);if(this.updateSelections(l,c.ticks,{combinedRotation:u,textAlign:h,textBaseline:d,range:this.scale.range}),!n||this.animationManager.isSkipped())this.resetSelectionNodes();else{let g=this.calculateUpdateDiff(m,c);this.animationState.transition("update",g)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(a),this.updateTickLines(),this.updateTitle({anyTickVisible:c.ticks.length>0}),this.updateCrossLines({rotation:r,parallelFlipRotation:s,regularFlipRotation:o}),this.updateLayoutState(),p}getAxisLineCoordinates(){let[t,n]=eo(this.range);return{x:0,y1:t,y2:n}}getTickLineCoordinates(t){let r=this.label.getSideFlag()*this.getTickSize(),s=Math.min(0,r),o=s+Math.abs(r),a=t.translationY;return{x1:s,x2:o,y:a}}getTickLabelProps(t,n){let{label:r}=this,{combinedRotation:s,textBaseline:o,textAlign:a,range:l}=n,c=t.tickLabel,d=r.getSideFlag()*(this.getTickSize()+r.padding+this.seriesAreaPadding),h=c!==""&&c!=null;return{tickId:t.tickId,translationY:t.translationY,fill:r.color,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,fontWeight:r.fontWeight,rotation:s,rotationCenterX:d,text:c,textAlign:a,textBaseline:o,visible:h,x:d,y:0,range:l}}getTickSize(){return this.tick.enabled?this.tick.size:this.createTick().size}setTitleProps(t,n){var r;let{title:s}=this;if(!s.enabled){t.enabled=!1;return}if(t.color=s.color,t.fontFamily=s.fontFamily,t.fontSize=s.fontSize,t.fontStyle=s.fontStyle,t.fontWeight=s.fontWeight,t.enabled=s.enabled,t.wrapping=s.wrapping,s.enabled){let o=t.node,a=((r=s.spacing)!=null?r:0)+n.spacing,l=this.label.getSideFlag(),c=$i(this.rotation),u=l===-1&&c>Math.PI&&c<Math.PI*2?-1:1,d=u*l*Math.PI/2,h=u===1?"bottom":"top",{range:p}=this,m=Math.floor(u*l*(p[0]+p[1])/2),g=Math.floor(l===-1?u*-a:-a),{callbackCache:f}=this.moduleCtx,{formatter:y=v=>v.defaultValue}=s,b=f.call(y,this.getTitleFormatterParams());o.setProperties({rotation:d,text:b,textBaseline:h,visible:!0,x:m,y:g})}}calculateLayout(t){var n,r;let{rotation:s,parallelFlipRotation:o,regularFlipRotation:a}=this.calculateRotations(),l=this.label.getSideFlag(),c=l*(this.getTickSize()+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:t,parallelFlipRotation:o,regularFlipRotation:a,labelX:c,sideFlag:l}),this.updateLayoutState();let u=this.tickGenerationResult,{tickData:d,combinedRotation:h,textBaseline:p,textAlign:m}=u,g=Xi(u,["tickData","combinedRotation","textBaseline","textAlign"]),f=[],{x:y,y1:b,y2:v}=this.getAxisLineCoordinates(),S=new nt(y+Math.min(l*this.seriesAreaPadding,0),b,this.seriesAreaPadding,v-b);if(f.push(S),this.tick.enabled&&d.ticks.forEach(R=>{let{x1:L,x2:B,y:$}=this.getTickLineCoordinates(R),U=new nt(L,$,B-L,0);f.push(U)}),this.label.enabled){let R=new Vt;d.ticks.forEach(L=>{let B=this.getTickLabelProps(L,{combinedRotation:h,textAlign:m,textBaseline:p,range:this.scale.range});if(!B.visible)return;R.setProperties(Ue(ue({},B),{translationY:Math.round(L.translationY)}));let $=R.computeTransformedBBox();$&&f.push($)})}let w=R=>{let L=new qo,{rotation:B,translationX:$,translationY:U,rotationCenterX:K,rotationCenterY:ie}=this.getAxisTransform();return qo.updateTransformMatrix(L,1,1,B,$,U,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:K,rotationCenterY:ie}),L.transformBBox(R)};if((n=this.title)!=null&&n.enabled){let R=new Oi,L=nt.merge(f).width;this.setTitleProps(R,{spacing:L});let $=R.node.computeTransformedBBox();$&&f.push($)}let T=nt.merge(f),D=w(T),O=this.isAnySeriesActive();return(r=this.crossLines)==null||r.forEach(R=>{var L;R.sideFlag=-l,R.direction=s===-Math.PI/2?"x":"y",R instanceof Xb&&(R.label.parallel=(L=R.label.parallel)!=null?L:this.label.parallel),R.parallelFlipRotation=o,R.regularFlipRotation=a,R.calculateLayout(O,this.reverse)}),t=g.primaryTickCount,{primaryTickCount:t,bbox:D}}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}setDomain(t){this.dataDomain=this.normaliseDataDomain(t),this.reverse&&this.dataDomain.domain.reverse(),this.scale.domain=this.dataDomain.domain}updateScale(){this.updateRange(),this.calculateDomain(),this.setTickInterval(this.tick.interval);let{scale:t,nice:n}=this;ei.is(t)&&(t.nice=n,t.update())}calculateRotations(){let t=ir(this.rotation),n=$i(t),r=$i(t-Math.PI/2);return{rotation:t,parallelFlipRotation:n,regularFlipRotation:r}}generateTicks({primaryTickCount:t,parallelFlipRotation:n,regularFlipRotation:r,labelX:s,sideFlag:o}){var a;let{scale:l,tick:c,label:{parallel:u,rotation:d,fontFamily:h,fontSize:p,fontStyle:m,fontWeight:g}}=this,f=t!==void 0,{defaultRotation:y,configuredRotation:b,parallelFlipFlag:v,regularFlipFlag:S}=nv({rotation:d,parallel:u,regularFlipRotation:r,parallelFlipRotation:n}),w=b+y,T=new qo,{maxTickCount:D}=this.estimateTickCount({minSpacing:c.minSpacing,maxSpacing:(a=c.maxSpacing)!=null?a:NaN}),R=!(ei.is(l)||Ua.is(l))||isNaN(D)?10:D,L=xb(u,b,0,o,S),B=i7(u,b,o,v),$={fontFamily:h,fontSize:p,fontStyle:m,fontWeight:g,textBaseline:B,textAlign:L},U={rawTicks:[],ticks:[],labelCount:0},K=0,ie=0,te=!0,j=!1;for(;te&&K<=R&&!j;){ie=0,L=xb(u,b,0,o,S);let se=this.getTickStrategies({secondaryAxis:f,index:K});for(let me of se){({tickData:U,index:K,autoRotation:ie,terminate:j}=me({index:K,tickData:U,textProps:$,labelOverlap:te,terminate:j,primaryTickCount:t}));let re=b!==0||ie!==0,ve=w+ie;L=xb(u,b,ie,o,S),te=this.label.avoidCollisions?this.checkLabelOverlap(ve,re,T,U.ticks,s,Ue(ue({},$),{textAlign:L})):!1}}let Y=y+b+ie;return!f&&U.rawTicks.length>0&&(t=U.rawTicks.length),{tickData:U,primaryTickCount:t,combinedRotation:Y,textBaseline:B,textAlign:L}}getTickStrategies({index:t,secondaryAxis:n}){let{scale:r,label:s,tick:o}=this,a=ei.is(r)||Ua.is(r),l=s.enabled&&s.avoidCollisions,c=!a&&t!==0&&l,u=s.autoRotate===!0&&s.rotation===void 0,d=[],h;this.tick.values?h=3:n?h=1:c?h=2:h=0;let p=({index:m,tickData:g,primaryTickCount:f,terminate:y})=>this.createTickData(h,m,g,y,f);if(d.push(p),!a&&!isNaN(o.minSpacing)){let m=({index:g,tickData:f,primaryTickCount:y,terminate:b})=>this.createTickData(2,g,f,b,y);d.push(m)}if(!l)return d;if(s.autoWrap){let m=({index:g,tickData:f,textProps:y})=>this.wrapLabels(f,g,y);d.push(m)}else if(u){let m=({index:g,tickData:f,labelOverlap:y,terminate:b})=>({index:g,tickData:f,autoRotation:this.getAutoRotation(y),terminate:b});d.push(m)}return d}createTickData(t,n,r,s,o){var a;let{scale:l,tick:c}=this,{maxTickCount:u,minTickCount:d,defaultTickCount:h}=this.estimateTickCount({minSpacing:c.minSpacing,maxSpacing:(a=c.maxSpacing)!=null?a:NaN}),p=ei.is(l)||Ua.is(l),m=!p||isNaN(u)?10:u,g=p?Math.max(h-n,d):u,f=c.interval===void 0&&c.values===void 0&&g>d&&(p||t===2),y=!0;for(;y&&n<=m;){let v=r.rawTicks;g=p?Math.max(h-n,d):u;let{rawTicks:S,ticks:w,labelCount:T}=this.getTicks({tickGenerationType:t,previousTicks:v,tickCount:g,minTickCount:d,maxTickCount:u,primaryTickCount:o});r.rawTicks=S,r.ticks=w,r.labelCount=T,y=f?ck(S,v):!1,n++}let b=c.interval!==void 0||c.values!==void 0;return s||(s=b),{tickData:r,index:n,autoRotation:0,terminate:s}}checkLabelOverlap(t,n,r,s,o,a){qo.updateTransformMatrix(r,1,1,t,0,0);let l=this.createLabelData(s,o,a,r),c=t7(this.label.minSpacing,n);return E7(l,c)}createLabelData(t,n,r,s){let o=[],a=new YD(r);for(let{tickLabel:l,translationY:c}of t){if(l===""||l==null)continue;let{width:u,height:d}=a.size(l),h=new nt(n,c,u,d),p=n7(l,h,n,c,s);o.push(p)}return o}getAutoRotation(t){var n;return t?$i(ir((n=this.label.autoRotateAngle)!=null?n:0)):0}getTicks({tickGenerationType:t,previousTicks:n,tickCount:r,minTickCount:s,maxTickCount:o,primaryTickCount:a}){var l;let{range:c,scale:u,visibleRange:d}=this,h;switch(t){case 3:if(ei.is(u)){let[S,w]=eo(u.getDomain().map(Number));h=this.tick.values.filter(T=>T>=S&&T<=w).sort((T,D)=>T-D)}else h=this.tick.values;break;case 1:ei.is(u)?h=this.updateSecondaryAxisTicks(a):h=this.createTicks(r,s,o);break;case 2:h=this.filterTicks(n,r);break;default:h=this.createTicks(r,s,o);break}this.fractionDigits=h.fractionDigits>=0?h.fractionDigits:0;let p=((l=u.bandwidth)!=null?l:0)/2,m=[],g=0,f=new Map,y=Math.max(0,Math.floor(d[0]*h.length)),b=Math.min(h.length,Math.ceil(d[1]*h.length)),v=h.slice(y,b);this.onLabelFormatChange(v,h,this.label.format);for(let S=0;S<v.length;S++){let w=v[S],T=u.convert(w)+p;if(c.length>0&&!this.inRange(T,0,.001))continue;let D=this.formatTick(w,y+S),O=D;if(f.has(O)){let R=f.get(O);f.set(O,R+1),O=`${O}_${R}`}else f.set(O,1);m.push({tick:w,tickId:O,tickLabel:D,translationY:Math.floor(T)}),!(D===""||D==null)&&g++}return{rawTicks:h,ticks:m,labelCount:g}}filterTicks(t,n){var r;let o=!isNaN(this.tick.minSpacing)||!isNaN((r=this.tick.maxSpacing)!=null?r:NaN)?Math.ceil(t.length/n):2;return t.filter((a,l)=>l%o===0)}createTicks(t,n,r){var s,o,a;return this.setTickCount(t,n,r),(a=(o=(s=this.scale).ticks)==null?void 0:o.call(s))!=null?a:[]}estimateTickCount({minSpacing:t,maxSpacing:n}){let{minRect:r,label:{avoidCollisions:s}}=this;if(!s)return{minTickCount:ei.defaultMaxTickCount,maxTickCount:ei.defaultMaxTickCount,defaultTickCount:ei.defaultMaxTickCount};let o=this.calculateRangeWithBleed(),a=Math.max(this.defaultTickMinSpacing,o/ei.defaultMaxTickCount),l=!isNaN(n);isNaN(t)&&(t=a),isNaN(n)&&(n=o),t>n&&(t===a?t=n:n=t);let c=1;r&&(c=this.direction==="x"?r.width:r.height),l&&(l=c<a);let u=Dt(1,Math.floor(o/t),l?Math.min(Math.floor(o/c),100):100),d=Math.min(u,Math.ceil(o/n)),h=Dt(d,ei.defaultTickCount,u);return{minTickCount:d,maxTickCount:u,defaultTickCount:h}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:t,parallelFlipRotation:n,regularFlipRotation:r}){var s;let o=this.label.getSideFlag(),a=this.isAnySeriesActive();(s=this.crossLines)==null||s.forEach(l=>{var c;l.sideFlag=-o,l.direction=t===-Math.PI/2?"x":"y",l instanceof Xb&&(l.label.parallel=(c=l.label.parallel)!=null?c:this.label.parallel),l.parallelFlipRotation=n,l.regularFlipRotation=r,l.update(a)})}updateTickLines(){let{tick:t,label:n}=this,r=n.getSideFlag();this.tickLineGroupSelection.each(s=>{s.strokeWidth=t.width,s.stroke=t.color,s.x1=r*this.getTickSize(),s.x2=0})}calculateAvailableRange(){return hm(this.range)}calculateRangeWithBleed(){let t=1/hm(this.visibleRange);return AS(this.calculateAvailableRange()*t,2)}calculateDomain(){let n=this.boundSeries.filter(r=>this.includeInvisibleDomains||r.isEnabled()).flatMap(r=>r.getDomain(this.direction));this.setDomain(n)}getAxisTransform(){return{rotation:ir(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){let{crossLineGroup:t,axisGroup:n,gridGroup:r,translation:s,gridLineGroupSelection:o,gridPadding:a,gridLength:l}=this,{rotation:c}=this.calculateRotations(),u=this.label.getSideFlag(),d=Math.floor(s.x),h=Math.floor(s.y);t.setProperties({rotation:c,translationX:d,translationY:h}),r.setProperties({rotation:c,translationX:d,translationY:h}),n.datum=this.getAxisTransform(),o.each(p=>{p.x1=a,p.x2=-u*l+a})}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t,n,r){this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?n:[],s=>s.append(new Ln),s=>s.tickId),this.tickLineGroupSelection.update(n,s=>s.appendChild(new Ln),s=>s.tickId),this.tickLabelGroupSelection.update(n.map(s=>this.getTickLabelProps(s,r)),s=>s.appendChild(new Vt),s=>s.tickId)}updateAxisLine(){let{line:t}=this,n=t.enabled?t.width:0;this.lineNode.setProperties({stroke:t.color,strokeWidth:n})}updateGridLines(t){let{gridLine:{style:n,width:r},gridPadding:s,gridLength:o}=this;o===0||n.length===0||this.gridLineGroupSelection.each((a,l,c)=>{let{stroke:u,lineDash:d}=n[c%n.length];a.setProperties({x1:s,x2:-t*o+s,fill:void 0,stroke:u,strokeWidth:r,lineDash:d})})}updateLabels(){let{label:t}=this;t.enabled&&this.tickLabelGroupSelection.each((n,r)=>{n.setProperties(r,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}wrapLabels(t,n,r){let{parallel:s,maxWidth:o,maxHeight:a}=this.label,l=this.maxThickness,c=Math.round(this.calculateAvailableRange()/t.labelCount);return s&&([l,c]=[c,l]),t.ticks.forEach(u=>{let{text:d}=Vt.wrap(u.tickLabel,o??l,a??c,r,"hyphenate");u.tickLabel=d}),{tickData:t,index:n,autoRotation:0,terminate:!0}}updateTitle(t){let{rotation:n,title:r,_titleCaption:s,lineNode:o,tickLineGroup:a,tickLabelGroup:l}=this;if(!r){s.enabled=!1;return}let c=0;if(r.enabled&&t.anyTickVisible){let u=ot.computeBBox([a,l,o]),d=n===0?u.width:u.height;c+=d+(this.tickLabelGroup.visible?0:this.seriesAreaPadding)}this.setTitleProps(s,{spacing:c})}formatTick(t,n){return this.datumFormatter(n)(t)}formatDatum(t){return String(t)}datumFormatter(t=0){let{label:n,labelFormatter:r,fractionDigits:s,moduleCtx:{callbackCache:o}}=this;return n.formatter?a=>{var l;return(l=o.call(n.formatter,{value:s>0?a:String(a),index:t,fractionDigits:s,formatter:r}))!=null?l:a}:r?a=>{var l;return(l=o.call(r,a))!=null?l:String(a)}:a=>String(a)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(t=>this.includeInvisibleDomains||t.isEnabled())}clipTickLines(t,n,r,s){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new nt(t,n,r,s))}clipGrid(t,n,r,s){this.gridGroup.setClipRectInGroupCoordinateSpace(new nt(t,n,r,s))}calculatePadding(t,n){let r=Math.abs(this.reverse?n:t)*.01;return[r,r]}getTitleFormatterParams(){var t;let n=this.boundSeries.reduce((r,s)=>{let o=s.getKeys(this.direction),a=s.getNames(this.direction);for(let l=0;l<o.length;l++)r.push({key:o[l],name:a[l]});return r},[]);return{direction:this.direction,boundSeries:n,defaultValue:(t=this.title)==null?void 0:t.text}}normaliseDataDomain(t){return{domain:[...t],clipped:!1}}getLayoutState(){return ue({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){var t;return(t=this.axisContext)!=null||(this.axisContext=this.createAxisContext()),Ue(ue({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:ei.is(this.scale),keys:()=>this.boundSeries.flatMap(t=>t.getKeys(this.direction)),seriesKeyProperties:()=>this.boundSeries.reduce((t,n)=>(n.getKeyProperties(this.direction).forEach(s=>{t.indexOf(s)<0&&t.push(s)}),t),[]),scaleValueFormatter:t=>{var n,r;return t?(r=(n=this.scale).tickFormat)==null?void 0:r.call(n,{specifier:t}):this.formatDatum},scaleBandwidth:()=>{var t;return(t=this.scale.bandwidth)!=null?t:0},scaleConvert:t=>this.scale.convert(t),scaleInvert:t=>{var n,r;return(r=(n=this.scale).invert)==null?void 0:r.call(n,t)}}}animateReadyUpdate(t){let{animationManager:n}=this.moduleCtx,r=Qb(this),s=hk(r);Ei(this.id,"axis-group",n,[this.axisGroup],s.group),Ei(this.id,"line",n,[this.lineNode],s.line),Ei(this.id,"line-paths",n,[this.gridLineGroupSelection,this.tickLineGroupSelection],s.tick,(o,a)=>a.tickId,t),Ei(this.id,"tick-labels",n,[this.tickLabelGroupSelection],s.label,(o,a)=>a.tickId,t)}resetSelectionNodes(){let{gridLineGroupSelection:t,tickLineGroupSelection:n,tickLabelGroupSelection:r,lineNode:s}=this,o=Qb(this);xn([this.axisGroup],pk()),xn([t,n],mk(o)),xn([r],gk()),xn([s],fk())}calculateUpdateDiff(t,n){let r=new Set,s=new Set,o={},a=Math.max(t.length,n.ticks.length);for(let l=0;l<a;l++){let c=n.ticks[l],u=t[l],d=c?.tickId;o[d??u]=c,u!==d&&(s.has(d)?s.delete(d):d&&r.add(d),r.has(u)?r.delete(u):u&&s.add(u))}return{changed:r.size>0||s.size>0,added:r,removed:s}}isReversed(){return this.reverse}};return i.defaultTickMinSpacing=50,i})();E([I(ht)],Fh.prototype,"nice",2);E([I(ht)],Fh.prototype,"reverse",2);E([I(ID)],Fh.prototype,"keys",2);E([I(Qe,{optional:!0})],Fh.prototype,"title",2);E([Jr((i,e,t)=>i.onGridLengthChange(e,t))],Fh.prototype,"gridLength",2);var $S=Fh,KS=class extends Zi{constructor(){super(...arguments),this.autoRotateAngle=335}};E([I(ht,{optional:!0})],KS.prototype,"autoRotate",2);E([I(ql)],KS.prototype,"autoRotateAngle",2);var jS=class yk extends $S{constructor(){super(...arguments),this.thickness=0,this.position="left"}static is(e){return e instanceof yk}get direction(){return["top","bottom"].includes(this.position)?"x":"y"}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(e,t){return this.updateDirection(),super.update(e,t)}calculateLayout(e){return this.updateDirection(),super.calculateLayout(e)}createAxisContext(){return Ue(ue({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(e){VD(e,Xb)}createLabel(){return new KS}};E([I(ke)],jS.prototype,"thickness",2);E([I(LS)],jS.prototype,"position",2);var Gm=jS,Ov=class extends aa{constructor(){super(...arguments),this.minSpacing=NaN}};E([I(Pv),uo(NaN)],Ov.prototype,"minSpacing",2);var Oh=(()=>{let i=class extends Gm{constructor(e,t=new jl){super(e,t),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(e){this._paddingOverrideEnabled=!0,this.scale.paddingInner=e}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(e){this.scale.paddingOuter=e}get paddingOuter(){return this.scale.paddingOuter}createTick(){return new Ov}normaliseDataDomain(e){let t=[],n=new Set;for(let r of e){let s=r instanceof Date?r.getTime():r;n.has(s)||(n.add(s),t.push(r))}return{domain:t,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){let e=this.boundSeries.map(t=>{var n;return(n=t.getBandScalePadding)==null?void 0:n.call(t)}).filter(t=>t!=null);e.length>0&&(this.scale.paddingInner=Math.min(...e.map(t=>t.inner)),this.scale.paddingOuter=Math.max(...e.map(t=>t.outer)))}return super.calculateDomain()}};return i.className="CategoryAxis",i.type="category",i})();E([I(Qt)],Oh.prototype,"groupPaddingInner",2);var Ck=class{constructor(i="",e,t=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=i,this.parent=e,this.depth=e?e.depth+1:0,this.number=t}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((i,e)=>e!==this.number):[]}};function F7(i,e=!0){let t=new Ck,n=0;return e&&i.forEach(r=>n=Math.max(n,r.labels.length)),i.forEach(r=>{if(e)for(;r.labels.length<n;)r.labels.unshift("");O7(t,r)}),t}function O7(i,e){let t=e.labels.slice().reverse(),n=t.length-1;t.forEach((r,s)=>{let o=i.children,a=o.find(c=>c.label===r),l=s!==n;if(a&&l)i=a;else{let c=new Ck(r,i);c.number=o.length,o.push(c),l&&(i=c)}})}function L7(i,e,t){let n=e.number-i.number,r=t/n;e.change-=r,e.shift+=t,i.change+=r,e.prelim+=t,e.mod+=t}function R7(i,e,t){return e.getSiblings().indexOf(i.ancestor)>=0?i.ancestor:t}function N7(i){let e=i.children;if(e){let t=0,n=0;for(let r=e.length-1;r>=0;r--){let s=e[r];s.prelim+=t,s.mod+=t,n+=s.change,t+=s.shift+n}}}function V7(i,e,t){let n=i.getLeftSibling();if(n){let r=i,s=i,o=n,a=s.getLeftmostSibling(),l=s.mod,c=r.mod,u=o.mod,d=a.mod;for(;o.nextRight()&&s.nextLeft();){o=o.nextRight(),s=s.nextLeft(),a=a.nextLeft(),r=r.nextRight(),r.ancestor=i;let h=o.prelim+u-(s.prelim+l)+t;h>0&&(L7(R7(o,i,e),i,h),l+=h,c+=h),u+=o.mod,l+=s.mod,d+=a.mod,c+=r.mod}o.nextRight()&&!r.nextRight()?(r.thread=o.nextRight(),r.mod+=u-c):(s.nextLeft()&&!a.nextLeft()&&(a.thread=s.nextLeft(),a.mod+=l-d),e=i)}return e}function bk(i,e){let t=i.children;if(t.length){let n=t[0];t.forEach(o=>{bk(o,e),n=V7(o,n,e)}),N7(i);let r=(t[0].prelim+t.at(-1).prelim)/2,s=i.getLeftSibling();s?(i.prelim=s.prelim+e,i.mod=i.prelim-r):i.prelim=r}else{let n=i.getLeftSibling();i.prelim=n?n.prelim+e:0}}var oP=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(i,e){let{x:t,y:n}=e(i);t>this.right&&(this.right=t),t<this.left&&(this.left=t),n>this.bottom&&(this.bottom=n),n<this.top&&(this.top=n)}};function Sk(i,e,t){i.x=i.prelim+e,i.y=i.depth,t.update(i),i.children.forEach(n=>Sk(n,e+i.mod,t))}function xk(i){let e=i.children,t=0;e.forEach(n=>{xk(n),n.children.length?t+=n.leafCount:t++}),i.leafCount=t,e.length?(i.subtreeLeft=e[0].subtreeLeft,i.subtreeRight=e[i.children.length-1].subtreeRight,i.x=(i.subtreeLeft+i.subtreeRight)/2):(i.subtreeLeft=i.x,i.subtreeRight=i.x)}function B7(i){let e=new G7;return bk(i,1),Sk(i,-i.prelim,e),xk(i),e}var G7=class{constructor(){this.dimensions=new oP,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(i){this.dimensions.update(i,e=>({x:e.x,y:e.y})),i.children.length?this.nonLeafNodes.push(i):(this.leafCount++,this.leafNodes.push(i)),i.depth>this.depth&&(this.depth=i.depth),this.nodes.push(i)}resize(i,e,t=0,n=0,r=!1){let s=this.leafCount-1,o=this.depth,a=this.dimensions,l=1,c=1;if(i>0&&s){let p=(a.right-a.left)/s;l=i/s/p,r&&(l=-l)}if(e>0&&o){let p=(a.bottom-a.top)/o;c=e/o/p}let u=new oP;this.nodes.forEach(p=>{p.screenX=p.x*l,p.screenY=p.y*c,u.update(p,m=>({x:m.screenX,y:m.screenY}))});let d=-u.left,h=-u.top;this.nodes.forEach(p=>{p.screenX+=d+t,p.screenY+=h+n})}},_k=class extends Zi{constructor(){super(...arguments),this.grid=!1}};E([I(ht)],_k.prototype,"grid",2);var yh=(()=>{let i=class extends Gm{constructor(e){super(e,new jl),this.tickScale=new jl,this.line=new Bm,this.label=new _k,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;let{tickLineGroup:t,tickLabelGroup:n,gridLineGroup:r,tickScale:s,scale:o}=this;o.paddingOuter=.1,o.paddingInner=o.paddingOuter*2,this.refreshScale(),s.paddingInner=1,s.paddingOuter=0,this.gridLineSelection=Ti.select(r,Ln),this.axisLineSelection=Ti.select(t,Ln),this.separatorSelection=Ti.select(t,Ln),this.labelSelection=Ti.select(n,Vt)}updateRange(){let{range:e,visibleRange:t,scale:n}=this,r=(e[1]-e[0])/(t[1]-t[0]),s=r*t[0],o=e[0]-s;this.tickScale.range=n.range=[o,o+r],this.resizeTickTree()}resizeTickTree(){var e;let t=this.scale,n=t.domain.length?[t.convert(t.domain[0]),t.convert(t.domain[t.domain.length-1])]:t.range,r=this.tickTreeLayout,s=this.lineHeight;r&&r.resize(Math.abs(n[1]-n[0]),r.depth*s,(Math.min(n[0],n[1])||0)+((e=t.bandwidth)!=null?e:0)/2,-r.depth*s,n[1]-n[0]<0)}get lineHeight(){return this.label.fontSize*1.5}onGridVisibilityChange(){this.gridLineSelection.clear(),this.labelSelection.clear()}createTick(){return new Ov}calculateDomain(){var e;let{direction:t}=this,n=null,r=this.boundSeries.filter(o=>o.visible).flatMap(o=>{if(t==="y"||n)return o.getDomain(t);if(n===null){let a=o.getDomain(t);return n=Yr(a[0]),a}return[]});this.setDomain((e=ra(r))!=null?e:TS(r));let{domain:s}=this.dataDomain;this.tickTreeLayout=B7(F7(s)),this.tickScale.domain=s.concat(""),this.resizeTickTree()}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){let{_titleCaption:e}=this;e.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;let{tickLabelLayout:e}=this.computedLayout;this.labelSelection.update(e).each((n,r)=>{n.setProperties(r)})}updateSeparators(){if(!this.computedLayout)return;let{separatorLayout:e}=this.computedLayout,{range:t}=this,n=1e-7;this.separatorSelection.update(e).each((s,o)=>{s.x1=o.x1,s.x2=o.x2,s.y1=o.y,s.y2=o.y,s.visible=o.y>=t[0]-n&&o.y<=t[1]+n,s.stroke=this.tick.color,s.fill=void 0,s.strokeWidth=1})}updateAxisLines(){if(!this.computedLayout)return;let{axisLineLayout:e}=this.computedLayout;this.axisLineSelection.update(e).each((n,r)=>{n.setProperties(Ue(ue({},r),{stroke:this.line.color,strokeWidth:this.line.width})),n.x1=r.x,n.x2=r.x,n.y1=r.y1,n.y2=r.y2,n.strokeWidth=this.line.width,n.stroke=this.line.color})}updateCategoryGridLines(){let{gridLength:e,gridLine:t,label:n,range:r,tickScale:s}=this,o=s.ticks(),a=n.getSideFlag(),l=this.gridLineSelection.update(e?o:[]);if(e){let{width:c,style:u}=t,d=u.length;l.each((h,p,m)=>{let g=Math.round(s.convert(p));h.x1=0,h.x2=-a*e,h.y1=g,h.y2=g,h.visible=g>=r[0]&&g<=r[1];let{stroke:f,lineDash:y}=u[m%d];h.stroke=f,h.strokeWidth=c,h.lineDash=y,h.fill=void 0})}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();let{scale:e,label:t,label:{parallel:n},moduleCtx:{callbackCache:r},range:s,title:o,title:{formatter:a=xe=>xe.defaultValue}={}}=this,l=e.range[0],c=e.range[1],d=Math.abs(c-l)/e.domain.length||0,h=Math.ceil(t.fontSize/d),p=ir(this.rotation),m=Math.abs(Math.cos(p))<1e-8,g=t.getSideFlag(),f=this.lineHeight,y=this.tickTreeLayout,b=e.ticks(),v=y?y.nodes:[],S=y?y.depth>1:!1,{defaultRotation:w,configuredRotation:T,parallelFlipFlag:D}=nv({rotation:t.rotation,parallel:n,regularFlipRotation:$i(p-Math.PI/2),parallelFlipRotation:$i(p)}),O=[],R=xe=>({fill:xe.fill,fontFamily:xe.fontFamily,fontSize:xe.fontSize,fontStyle:xe.fontStyle,fontWeight:xe.fontWeight,rotation:xe.rotation,rotationCenterX:xe.rotationCenterX,rotationCenterY:xe.rotationCenterY,text:xe.text,textAlign:xe.textAlign,textBaseline:xe.textBaseline,translationX:xe.translationX,translationY:xe.translationY,visible:xe.visible,x:xe.x,y:xe.y}),L=new Map,B=0,$=new Vt,U=(xe,$e)=>{var He;if($.setProperties({fill:t.color,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textAlign:"center",textBaseline:D===-1?"bottom":"hanging",translationX:xe.screenY-t.fontSize*.25,translationY:xe.screenX}),$e===0){if(!(o?.enabled&&b.length>0))return!1;let Ct=r.call(a,this.getTitleFormatterParams());$.setProperties({fill:o.color,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight,text:Ct,textBaseline:"hanging",translationX:xe.screenY-t.fontSize*.25,translationY:xe.screenX})}else if($e%h===0){if(!(xe.screenX>=s[0]&&xe.screenX<=s[1]))return!1;t.formatter?$.text=(He=r.call(t.formatter,{value:String(xe.label),index:$e}))!=null?He:String(xe.label):$.text=String(xe.label)}else return!1;return!0};v.forEach((xe,$e)=>{if(!U(xe,$e))return;let at=$.computeTransformedBBox();if(!at)return;L.set($e,at),!xe.children.length&&at.width>B&&(B=at.width)});let K=g*t.padding,ie=this.label.grid,te=[];v.forEach((xe,$e)=>{let He=U(xe,$e),at=$e;$.x=K,$.rotationCenterX=K;let Ct=!xe.children.length;if(Ct)$.rotation=T,$.textAlign="end",$.textBaseline="middle";else{$.translationX-=B-f+this.label.padding;let Wt=xe.leafCount*d,tt=L.get(at);tt&&tt.width>Wt?(He=!1,L.delete(at)):m?$.rotation=w:$.rotation=-Math.PI/2}if(xe.parent&&S){let Wt=Ct?xe.screenX-d/2:xe.screenX-xe.leafCount*d/2;if(Ct)(xe.number!==xe.children.length-1||ie)&&te.push({y:Wt,x1:0,x2:-B-this.label.padding*2});else{let tt=-B-this.label.padding*2+xe.screenY;te.push({y:Wt,x1:tt+f,x2:tt})}}let ri;if(He){let Wt=$.computeTransformedBBox();Wt&&L.set($e,Wt),ri=Ue(ue({},R($)),{visible:He})}else L.delete($e),ri={visible:He};O.push(ri)});let j=0;te.forEach(xe=>j=Math.min(j,xe.x2)),te.push({y:Math.max(l,c),x1:0,x2:j});let Y=[],se=[],me=1e-7;te.forEach(xe=>{if(xe.y>=s[0]-me&&xe.y<=s[1]+me){let{x1:$e,x2:He,y:at}=xe,Ct=new nt(Math.min($e,He),at,Math.abs($e-He),0);se.push(Ct),Y.push({x1:$e,x2:He,y:at})}});let re=[],ve=[],_e=y?y.depth+1:1;for(let xe=0;xe<_e;xe++){let $e=b.length>0&&(xe===0||ie&&S),He=xe>0?-B-this.label.padding*2-(xe-1)*f:0,at=new nt(He,Math.min(...s),0,Math.abs(s[1]-s[0]));ve.push(at),re.push({x:He,y1:s[0],y2:s[1],visible:$e})}let Ge=xe=>{let $e=new qo,{rotation:He,translationX:at,translationY:Ct,rotationCenterX:ri,rotationCenterY:Wt}=this.getAxisTransform();return qo.updateTransformMatrix($e,1,1,He,at,Ct,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:ri,rotationCenterY:Wt}),$e.transformBBox(xe)},Le=nt.merge([...L.values(),...se,...ve]);return{bbox:Ge(Le),tickLabelLayout:O,separatorLayout:Y,axisLineLayout:re}}calculateLayout(){let{axisLineLayout:e,separatorLayout:t,tickLabelLayout:n,bbox:r}=this.computeLayout();return this.computedLayout={axisLineLayout:e,separatorLayout:t,tickLabelLayout:n},{bbox:r,primaryTickCount:void 0}}};return i.className="GroupedCategoryAxis",i.type="grouped-category",i})();E([I(Xt,{optional:!0})],yh.prototype,"labelColor",2);function U7(){if(typeof navigator>"u")return!1;let i=navigator.userAgent.match(/\(iPhone; CPU iPhone OS (\d+_\d+_\d+) like Mac OS X\)/);if(i==null)return!1;let[e,t]=i[1].split("_").map(Number);return e<16||e===16&&t<6}var YS=class eS{constructor(e){this.enabled=!0,this.width=600,this.height=300;let{width:t,height:n,pixelRatio:r,position:s,insertAsFirstChild:o}=e;this.insertAsFirstChild=o??!1,this.pixelRatio=U7()?1:r??ta("devicePixelRatio"),this.element=Ui("canvas"),this.element.width=Math.round((t??this.width)*this.pixelRatio),this.element.height=Math.round((n??this.height)*this.pixelRatio),s&&(this.element.style.position=s),this.context=this.element.getContext("2d"),this.onEnabledChange(),this.resize(t??0,n??0),eS.debugContext(this.context)}static is(e){return e instanceof eS}drawImage(e,t=0,n=0){return e.drawImage(this.context.canvas,t,n)}toDataURL(e){return this.element.toDataURL(e)}resize(e,t){if(!(e>0&&t>0))return;let{element:n,context:r,pixelRatio:s}=this;n.width=Math.round(e*s),n.height=Math.round(t*s),r.setTransform(s,0,0,s,0,0),n.style.width=e+"px",n.style.height=t+"px",this.width=e,this.height=t}snapshot(){}clear(){this.context.save(),this.context.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}onContainerChange(e,t){var n,r,s,o;e!==t&&((n=this.element.parentNode)==null||n.removeChild(this.element),this.insertAsFirstChild&&((r=this.container)!=null&&r.firstChild)?(s=this.container)==null||s.insertBefore(this.element,this.container.firstChild):(o=this.container)==null||o.appendChild(this.element))}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"block":"none")}static debugContext(e){if(Mi.check("canvas")){let t=e.save.bind(e),n=e.restore.bind(e),r=0;Object.assign(e,{save(){t(),r++},restore(){if(r===0)throw new Error("AG Charts - Unable to restore() past depth 0");n(),r--},verifyDepthZero(){if(r!==0)throw new Error(`AG Charts - Save/restore depth is non-zero: ${r}`)}})}}};E([Jr(i=>i.onEnabledChange())],YS.prototype,"enabled",2);E([Jr((i,e,t)=>i.onContainerChange(e,t))],YS.prototype,"container",2);var qS=YS,H7=class wk{constructor(e,t){this.canvas=e,this.markDirty=t,this.debug=Mi.create(!0,"scene"),this.layersMap=new Map,this.nextZIndex=0,this.nextLayerId=0}static sortLayers(e,t){var n,r;return $D([e.zIndex,...(n=e.zIndexSubOrder)!=null?n:[void 0,void 0],e.id],[t.zIndex,...(r=t.zIndexSubOrder)!=null?r:[void 0,void 0],t.id],WD)}get size(){return this.layersMap.size}forEach(e){Array.from(this.layersMap.values()).sort(wk.sortLayers).forEach(e)}resize(e,t){this.canvas.resize(e,t),this.layersMap.forEach(({canvas:n})=>n.resize(e,t))}addLayer(e){let{width:t,height:n,pixelRatio:r}=this.canvas,{zIndex:s=this.nextZIndex++,name:o,zIndexSubOrder:a,getComputedOpacity:l,getVisibility:c}=e,u=new qS({width:t,height:n,pixelRatio:r,position:"absolute"}),d={id:this.nextLayerId++,name:o,canvas:u,zIndex:s,zIndexSubOrder:a,getComputedOpacity:l,getVisibility:c};return s>=this.nextZIndex&&(this.nextZIndex=s+1),this.layersMap.set(u,d),this.debug("Scene.addLayer() - layers",this.layersMap),d.canvas}removeLayer(e){this.layersMap.has(e)&&(this.layersMap.delete(e),e.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}moveLayer(e,t,n){let r=this.layersMap.get(e);r&&(r.zIndex=t,r.zIndexSubOrder=n,this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layersMap))}clear(){this.layersMap.clear()}};function aP(i,e,t,n,r={}){if(!Mi.check("scene:stats","scene:stats:verbose"))return;let{layersRendered:s=0,layersSkipped:o=0,nodesRendered:a=0,nodesSkipped:l=0}=n??{},c=performance.now(),u=e,{start:d}=u,h=Xi(u,["start"]),p=Object.entries(h).map(([w,T])=>cP(w,T)).filter(w=>w!=null).join(" + "),m=Object.entries(r).map(([w,T])=>`${w}: ${T}`).join(" ; "),g=Mi.check("scene:stats:verbose"),f=[`${cP("\u23F1\uFE0F",d,c)} (${p})`,`${m}`,`Layers: ${g?lP(s,o):i.size}`,g?`Nodes: ${lP(a,l)}`:null].filter(qr),y=new Map(f.map(w=>[w,Vt.getTextSize(w,t.font)])),b=Math.max(...Array.from(y.values(),w=>w.width)),v=W7(y.values(),w=>w.height);t.save(),t.fillStyle="white",t.fillRect(0,0,b,v),t.fillStyle="black";let S=0;for(let[w,T]of y.entries())S+=T.height,t.fillText(w,2,S);t.restore()}function z7(i,e){i.save();for(let[t,n]of Object.entries(e)){let r=n.computeTransformedBBox();if(!r){Ie.log(`Scene.render() - no bbox for debugged node [${t}].`);continue}i.globalAlpha=.8,i.strokeStyle="red",i.lineWidth=1,i.strokeRect(r.x,r.y,r.width,r.height),i.fillStyle="red",i.strokeStyle="white",i.font="16px sans-serif",i.textBaseline="top",i.textAlign="left",i.lineWidth=2,i.strokeText(t,r.x,r.y,r.width),i.fillText(t,r.x,r.y,r.width)}i.restore()}function z0(i){var e,t;return Mi.check(!0,"scene")?ue(ue({node:i,name:(e=i instanceof ot?i.name:null)!=null?e:i.id,dirty:Wl[i.dirty]},(t=i.parent)!=null&&t.isVirtual?{virtualParentDirty:Wl[i.parent.dirty],virtualParent:i.parent}:{}),i.children.map(n=>z0(n)).reduce((n,r)=>{let{name:s}=r,{node:{visible:o,opacity:a,zIndex:l,zIndexSubOrder:c},node:u,virtualParent:d}=r;(!o||a<=0)&&(s=`(${s})`),u instanceof ot&&u.isLayer()&&(s=`*${s}*`);let h=[`${s??"<unknown>"}`,`z: ${l}`,c&&`zo: ${c.map(g=>typeof g=="function"?`${g()} (fn)`:g).join(" / ")}`,d&&"(virtual parent)"].filter(g=>!!g).join(" "),p=h,m=1;for(;n[p]!=null&&m<100;)p=`${h} (${m++})`;return n[p]=r,n},{})):{}}function Ek(i){var e;if(i.dirty===0)return{dirtyTree:{},paths:[]};let t=i.children.map(s=>Ek(s)).filter(s=>s.paths.length>0),n=ot.is(i)&&(e=i.name)!=null?e:i.id,r=t.length?t.flatMap(s=>s.paths).map(s=>`${n}.${s}`):[n];return{dirtyTree:ue({name:n,node:i,dirty:Wl[i.dirty]},t.map(s=>s.dirtyTree).filter(s=>s.dirty!=null).reduce((s,o)=>{var a;return s[(a=o.name)!=null?a:"<unknown>"]=o,s},{})),paths:r}}function lP(i,e){let t=i+e;return`${i} / ${t} (${Math.round(100*i/t)}%)`}function cP(i,e,t){let n=t!=null?t-e:e;return`${i}: ${Math.round(n*100)/100}ms`}function W7(i,e){let t=0;for(let n of i)t+=e(n);return t}var Tk=(()=>{let i=class{constructor({width:e,height:t,pixelRatio:n,canvasPosition:r}){this.debug=Mi.create(!0,"scene"),this.id=sa(this),this.root=null,this.isDirty=!1,this.canvas=new qS({width:e,height:t,pixelRatio:n,position:r,insertAsFirstChild:r==="absolute"}),this.layersManager=new H7(this.canvas,()=>{this.isDirty=!0})}get width(){var e,t;return(t=(e=this.pendingSize)==null?void 0:e[0])!=null?t:this.canvas.width}get height(){var e,t;return(t=(e=this.pendingSize)==null?void 0:e[1])!=null?t:this.canvas.height}setContainer(e){return this.canvas.container=e,this}setRoot(e){var t;return this.root===e?this:(this.isDirty=!0,(t=this.root)==null||t._setLayerManager(),this.root=e,e&&(e.visible=!0,e._setLayerManager(this.layersManager)),this)}attachNode(e){var t;return(t=this.root)==null||t.appendChild(e),()=>this.removeChild(e)}appendChild(e){var t;return(t=this.root)==null||t.appendChild(e),this}removeChild(e){var t;return(t=this.root)==null||t.removeChild(e),this}download(e,t){var n;fD(this.canvas.toDataURL(t),(n=e?.trim())!=null?n:"image")}getDataURL(e){return this.canvas.toDataURL(e)}resize(e,t){return e=Math.round(e),t=Math.round(t),e>0&&t>0&&(e!==this.width||t!==this.height)?(this.pendingSize=[e,t],this.isDirty=!0,!0):!1}render(e){return we(this,null,function*(){var t,n;let{debugSplitTimes:r={start:performance.now()},extraDebugStats:s}=e??{},{canvas:o,canvas:{context:a}={},root:l,pendingSize:c}=this;if(!a)return;let u=performance.now();if(c&&(this.layersManager.resize(...c),this.pendingSize=void 0),l&&!l.visible){this.isDirty=!1;return}if(l&&!this.isDirty){this.debug.check()&&this.debug("Scene.render() - no-op",{redrawType:Wl[l.dirty],tree:z0(l)}),aP(this.layersManager,r,a,void 0,s);return}let d={ctx:a,devicePixelRatio:(t=this.canvas.pixelRatio)!=null?t:1,forceRender:!0,resized:!!c,debugNodes:{}};Mi.check("scene:stats:verbose")&&(d.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let h=!1;if((!l||l.dirty>=1)&&(h=!0,o.clear()),l&&Mi.check("scene:dirtyTree")){let{dirtyTree:p,paths:m}=Ek(l);Mi.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:p,paths:m})}if(l&&h&&(this.debug("Scene.render() - before",{redrawType:Wl[l.dirty],canvasCleared:h,tree:z0(l)}),l.visible&&(l.preRender(),a.save(),l.render(d),a.restore())),r["\u270D\uFE0F"]=performance.now()-u,this.layersManager.size&&h){let p=performance.now();a.save(),a.resetTransform(),this.layersManager.forEach(m=>{m.canvas.enabled&&m.getVisibility()&&(a.globalAlpha=m.getComputedOpacity(),m.canvas.drawImage(a))}),a.restore(),r["\u26D9"]=performance.now()-p}(n=a.verifyDepthZero)==null||n.call(a),this.isDirty=!1,aP(this.layersManager,r,a,d.stats,s),z7(a,d.debugNodes),l&&this.debug.check()&&this.debug("Scene.render() - after",{redrawType:Wl[l.dirty],tree:z0(l),canvasCleared:h})})}strip(){let{context:e,pixelRatio:t}=this.canvas;e.setTransform(t,0,0,t,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1}destroy(){this.canvas.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0})}};return i.className="Scene",i})(),$7=`
[class^='ag-charts-icon'] {
    display: block;
    /* speak: none; */
    mask-size: contain;
    mask-repeat: no-repeat;
    background-color: currentColor;
}

.ag-charts-icon-zoom-in {
    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+);
}

.ag-charts-icon-zoom-out {
    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=);
}

.ag-charts-icon-reset {
    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXJvdGF0ZS1jY3ciPjxwYXRoIGQ9Ik0zIDEyYTkgOSAwIDEgMCA5LTkgOS43NSA5Ljc1IDAgMCAwLTYuNzQgMi43NEwzIDgiLz48cGF0aCBkPSJNMyAzdjVoNSIvPjwvc3ZnPg==);
}

.ag-charts-icon-pan-left {
    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tbGVmdCI+PHBhdGggZD0ibTE1IDE4LTYtNiA2LTYiLz48L3N2Zz4=);
}

.ag-charts-icon-pan-right {
    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tcmlnaHQiPjxwYXRoIGQ9Im05IDE4IDYtNi02LTYiLz48L3N2Zz4=);
}

.ag-charts-icon-pan-start {
    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tZmlyc3QiPjxwYXRoIGQ9Im0xNyAxOC02LTYgNi02Ii8+PHBhdGggZD0iTTcgNnYxMiIvPjwvc3ZnPg==);
}

.ag-charts-icon-pan-end {
    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tbGFzdCI+PHBhdGggZD0ibTcgMTggNi02LTYtNiIvPjxwYXRoIGQ9Ik0xNyA2djEyIi8+PC9zdmc+);
}

`,K7=`
[class^='ag-charts'],
[class^='ag-charts']:focus,
[class^='ag-charts']:after,
[class^='ag-charts']:before {
    box-sizing: border-box;
    outline: none;
}

button[class^='ag-charts'] {
    background: none;
    border: 0;
}

`,j7=`
.ag-charts-theme-default,
.ag-charts-theme-default-dark {
    /* Colors */
    --ag-charts-active-color: var(--ag-active-color, #2196f3);
    --ag-charts-background-color: var(--ag-background-color, #fff);
    --ag-charts-foreground-color: var(--ag-foreground-color, #181d1f);
    --ag-charts-border-color: var(--ag-border-color, #dddddd);

    /* Sizing */
    --ag-charts-font-size: var(--ag-font-size, 14px);
    --ag-charts-size: var(--ag-grid-size, 8px);

    /* Borders */
    --ag-charts-border: var(--ag-borders, solid 1px);
    --ag-charts-border-critical: var(--ag-borders-critical, solid 1px);

    /* Toolbar */
    --ag-charts-toolbar-foreground-color: var(--ag-header-foreground-color, var(--ag-charts-foreground-color));
    --ag-charts-toolbar-background-color: var(
        --ag-header-background-color,
        color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 2%)
    );
    --ag-charts-toolbar-size: var(--ag-header-height, 48px);
    --ag-charts-toolbar-padding: calc(var(--ag-charts-size) * 2);
    --ag-charts-toolbar-border: var(--ag-charts-border, solid 1px) var(--ag-charts-border-color);
    --ag-charts-toolbar-border-critical: var(--ag-charts-border-critical, solid 1px) var(--ag-charts-border-color);
    --ag-charts-toolbar-hover-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 12%);
    --ag-charts-toolbar-disabled-foreground-color: var(
        --ag-disabled-foreground-color,
        color-mix(in srgb, transparent, var(--ag-charts-toolbar-foreground-color) 50%)
    );
    --ag-charts-toolbar-disabled-background-color: var(
        --ag-input-disabled-background-color,
        color-mix(in srgb, var(--ag-charts-toolbar-background-color), var(--ag-charts-toolbar-foreground-color) 6%)
    );
    --ag-charts-toolbar-gap: var(--ag-charts-size);

    /* Buttons */
    --ag-charts-button-padding: var(--ag-charts-size);
    --ag-charts-button-radius: var(--ag-border-radius, 4px);

    /* Focus Indicator */
    --ag-charts-focus-border: solid 2px var(--ag-input-focus-border-color, var(--ag-charts-active-color));
    --ag-charts-focus-border-shadow: var(--ag-input-focus-box-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-focus-border) 47%));

    /* Icons */
    --ag-charts-icon-font-family: 'agChartsDefault';
    --ag-charts-icon-font-weight: normal;
    --ag-charts-icon-font-color: color-mix(in srgb, transparent, var(--ag-charts-foreground-color), 90%);
}

`,Y7=`
.ag-charts-theme-default-dark {
    /* Colors */
    --ag-charts-background-color: var(--ag-background-color, color-mix(in srgb, #fff, #182230 97%));
    --ag-charts-foreground-color: var(--ag-foreground-color, #fff);
    --ag-charts-border-color: var(--ag-border-color, rgba(255, 255, 255, 0.16));
    --ag-charts-hover-color: var(
        --ag-row-hover-color,
        color-mix(in srgb, transparent, var(--ag-charts-active-color) 20%)
    );

    /* Toolbar */
    --ag-charts-toolbar-background-color: var(--ag-header-background-color, color-mix(in srgb, #fff, #182230 93%));
}

`,q7=`
/* Reset */
${K7}

/* Icons */
${$7}

/* AG Charts Theme Default */
${j7}

/* AG Charts Theme Default Dark */
${Y7}
`;function X7(i){return new Promise(e=>{setTimeout(()=>e(void 0),i)})}var Z7=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(i){return new Promise(e=>{this.acquireQueue.push([i,e]),this.available&&this.dispatchNext().catch(t=>Ie.errorOnce(t))})}acquireImmediately(i){return we(this,null,function*(){return this.available?(yield this.acquire(i),!0):!1})}waitForClearAcquireQueue(){return we(this,null,function*(){return this.acquire(()=>we(this,null,function*(){}))})}dispatchNext(){return we(this,null,function*(){var i,e;this.available=!1;let[t,n]=(i=this.acquireQueue.shift())!=null?i:[];for(;t;){try{yield t(),n?.()}catch(r){Ie.error("mutex callback error",r),n?.()}[t,n]=(e=this.acquireQueue.shift())!=null?e:[]}this.available=!0})}},Mk=class{constructor(){this.eventListeners=new Map}addEventListener(i,e){if(typeof e!="function")throw new Error("AG Charts - listener must be a Function");let t=this.eventListeners.get(i);t?t.add(e):this.eventListeners.set(i,new Set([e]))}removeEventListener(i,e){var t;(t=this.eventListeners.get(i))==null||t.delete(e),this.eventListeners.size===0&&this.eventListeners.delete(i)}hasEventListener(i){return this.eventListeners.has(i)}clearEventListeners(){this.eventListeners.clear()}fireEvent(i){var e;(e=this.eventListeners.get(i.type))==null||e.forEach(t=>t(i))}},Jl=class extends Ot{constructor(i=0,e=i,t=i,n=e){super(),this.top=i,this.right=e,this.bottom=t,this.left=n}clear(){this.top=this.right=this.bottom=this.left=0}};E([I(ke)],Jl.prototype,"top",2);E([I(ke)],Jl.prototype,"right",2);E([I(ke)],Jl.prototype,"bottom",2);E([I(ke)],Jl.prototype,"left",2);function Q7(i){return Ak((e,t)=>requestAnimationFrame(e),i)}function J7(i){return Ak((e,t=0)=>setTimeout(e,t),i)}function Ak(i,e){let t=0,n=!1,r,s,o=()=>n,a=()=>{n=!1,s?.(),s=void 0,r=void 0,t>0&&i(l)},l=()=>{let c=t;t=0,n=!0;let u=e({count:c});if(!u){a();return}u.then(a,a)};return{schedule(c){t===0&&!o()&&i(l,c),t++},await(){return we(this,null,function*(){if(o())for(r==null&&(r=new Promise(c=>{s=c}));o();)yield r})}}}var e8=class{constructor(){this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach(([e,t])=>this.observe(e,t)),this.queuedObserveRequests=[]};var i;typeof ResizeObserver>"u"||(this.resizeObserver=new ResizeObserver(e=>{for(let{target:t,contentRect:n}of e){let{width:r,height:s}=n;this.checkSize(this.elements.get(t),t,r,s)}}),this.documentReady=ea("readyState")==="complete",this.documentReady||(i=ta())==null||i.addEventListener("load",this.onLoad))}destroy(){var i,e;(i=ta())==null||i.removeEventListener("load",this.onLoad),(e=this.resizeObserver)==null||e.disconnect(),this.resizeObserver=null}checkSize(i,e,t,n){var r,s;i&&(t!==((r=i.size)==null?void 0:r.width)||n!==((s=i.size)==null?void 0:s.height))&&(i.size={width:t,height:n},i.cb(i.size,e))}observe(i,e){var t;if(!this.documentReady){this.queuedObserveRequests.push([i,e]);return}this.elements.has(i)?this.removeFromQueue(i):(t=this.resizeObserver)==null||t.observe(i),this.elements.set(i,{cb:e})}unobserve(i){var e;(e=this.resizeObserver)==null||e.unobserve(i),this.elements.delete(i),this.removeFromQueue(i),this.elements.size||this.destroy()}removeFromQueue(i){this.queuedObserveRequests=this.queuedObserveRequests.filter(([e])=>e!==i)}},t8=class{constructor(){this.cache=new WeakMap}call(i,...e){let t,n=this.cache.get(i),r=()=>{try{let s=i(...e);return n&&t!=null&&n.set(t,s),s}catch(s){Ie.warnOnce("User callback errored, ignoring",s);return}};try{t=JSON.stringify(e)}catch{return r()}return n==null&&(n=new Map,this.cache.set(i,n)),n.has(t)?n.get(t):r()}invalidateCache(){this.cache=new WeakMap}},i8=class{constructor(i){this.annotationRoot=i}attachNode(i){return this.annotationRoot.append(i),()=>{var e;return(e=this.annotationRoot)==null||e.removeChild(i),this}}setAnnotationStyles(i){this.styles=i}getAnnotationTypeStyles(i){var e;return(e=this.styles)==null?void 0:e[i]}},Lh=class{constructor(){this.registeredListeners=new Map}addListener(i,e){let t={symbol:Symbol(i),handler:e};return this.registeredListeners.has(i)?this.registeredListeners.get(i).push(t):this.registeredListeners.set(i,[t]),()=>this.removeListener(t.symbol)}removeListener(i){for(let[e,t]of this.registeredListeners.entries()){let n=t.findIndex(r=>r.symbol===i);if(n>=0){t.splice(n,1),t.length===0&&this.registeredListeners.delete(e);break}}}dispatch(i,...e){for(let t of this.getListenersByType(i))try{t.handler(...e)}catch(n){Ie.errorOnce(n)}}dispatchWrapHandlers(i,e,...t){for(let n of this.getListenersByType(i))try{e(n.handler,...t)}catch(r){Ie.errorOnce(r)}}getListenersByType(i){var e;return(e=this.registeredListeners.get(i))!=null?e:[]}destroy(){this.registeredListeners.clear()}},Lv=class extends Lh{constructor(i){super(),this.animationManager=i,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=Mi.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(i){typeof i=="function"&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=i,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(i){this.isLoadingData=!0,this.throttledFetch(i)}isLazy(){return this.dataSourceCallback!=null}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(i){return W6(e=>this.fetch(e),i,{leading:!1,trailing:!0})}createThrottledDispatch(i){return W6((e,t)=>{this.debug(`DataService - dispatching 'data-load' | ${e}`),this.dispatch("data-load",{type:"data-load",data:t})},i,{leading:!0,trailing:!0})}fetch(i){return we(this,null,function*(){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");let e=performance.now(),t=this.requestCounter++;this.debug(`DataService - requesting | ${t}`),this.freshRequests.push(t);let n;try{n=yield this.dataSourceCallback(i),this.debug(`DataService - response | ${performance.now()-e}ms | ${t}`)}catch(s){this.debug(`DataService - request failed | ${t}`),Ie.errorOnce(`DataService - request failed | [${s}]`)}this.isLoadingInitialData=!1;let r=this.freshRequests.findIndex(s=>s===t);if(r===-1||this.dispatchOnlyLatest&&r!==this.freshRequests.length-1){this.debug(`DataService - discarding stale request | ${t}`);return}this.freshRequests=this.freshRequests.slice(r+1),this.freshRequests.length===0&&(this.isLoadingData=!1),Array.isArray(n)?this.throttledDispatch(t,n):this.dispatch("data-error")})}};E([Ir({newValue(i){this.throttledDispatch=this.createThrottledDispatch(i)}})],Lv.prototype,"dispatchThrottle",2);E([Ir({newValue(i){this.throttledFetch=this.createThrottledFetch(i)}})],Lv.prototype,"requestThrottle",2);var uP=class{constructor(i){this.maxAnimationTime=i,this.debug=Mi.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(eh.map(e=>[e,[]])),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){var i;return(i=this.phases.get(eh[this.currentPhase]))!=null?i:[]}checkOverlappingId(i){i!=null&&this.controllers.has(i)&&(this.controllers.get(i).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${i}`),this.skip())}addAnimation(i){var e;if(i.isComplete)return;if(eh.indexOf(i.phase)<this.currentPhase){this.debug("Skipping animation due to being for an earlier phase",i.id),i.stop();return}this.controllers.set(i.id,i),(e=this.phases.get(i.phase))==null||e.push(i)}removeAnimation(i){this.controllers.delete(i.id);let e=this.phases.get(i.phase),t=e?.indexOf(i);t!=null&&t>=0&&e?.splice(t,1)}progress(i){if(!this.isReady)return;let e=i===0?.01:i,t=()=>{let c=eh[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:c,phaseMeta:gm[c]}},{phase:n,phaseControllers:r,phaseMeta:s}=t(),o=()=>eh[this.currentPhase]==null,a=()=>{for({phase:n,phaseControllers:r,phaseMeta:s}=t();!o()&&r.length===0;)this.currentPhase++,{phase:n,phaseControllers:r,phaseMeta:s}=t(),this.debug(`AnimationBatch - phase changing to ${n}`,{unusedTime:e},r)},l=this.controllers.size;this.debug(`AnimationBatch - ${i}ms; phase ${n} with ${r?.length} of ${l}`);do{let c=e,u=s.skipIfNoEarlierAnimations&&this.animationTimeConsumed===0,d=0;for(let h of r)u?h.stop():e=Math.min(h.update(c),e),h.isComplete&&(d++,this.removeAnimation(h));this.animationTimeConsumed+=c-e,this.debug(`AnimationBatch - updated ${r.length} controllers; ${d} completed`),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),a()}while(e>0&&!o());this.animationTimeConsumed>this.maxAnimationTime&&(Ie.warnOnce("Animation batch exceeded max animation time, skipping.",new Map(this.controllers.entries())),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let i=!0;for(let[,e]of this.controllers)if(e.duration>0&&gm[e.phase].skipIfNoEarlierAnimations!==!0){i=!1;break}if(!i)for(let[,e]of this.controllers)e.autoplay&&e.play(!0)}skip(i=!0){if(this.skipAnimations===!1&&i===!0){for(let e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=i}play(){for(let i of this.controllers.values())i.play()}pause(){for(let i of this.controllers.values())i.pause()}stop(){for(let i of this.controllers.values())try{i.stop(),this.removeAnimation(i)}catch(e){Ie.error("Error during animation stop",e)}this.dispatchStopped()}stopByAnimationId(i){if(i!=null&&this.controllers.has(i)){let e=this.controllers.get(i);e&&(e.stop(),this.removeAnimation(e))}}stopByAnimationGroupId(i){for(let e of this.controllers.values())e.groupId===i&&this.stopByAnimationId(e.id)}dispatchStopped(){this.stoppedCbs.forEach(i=>i()),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){this.stop(),this.controllers.clear()}},Za=class{constructor(){this.listeners=new Lh,this.destroyFns=[]}addListener(i,e){return this.listeners.addListener(i,e)}removeListener(i){this.listeners.removeListener(i)}destroy(){this.listeners.destroy(),this.destroyFns.forEach(i=>i())}};function mu(i){let e=Ue(ue({},i),{consumed:!1,consume(){var t,n;e.consumed=!0,i.sourceEvent instanceof Event?(t=i.sourceEvent)==null||t.preventDefault():(n=i.sourceEvent)==null||n.consume()}});return e}function n8(){return(i,e)=>{e.consumed||i(e)}}function W0(i,e,t){i.dispatchWrapHandlers(e,n8(),t)}var XS=["click","dblclick","contextmenu","hover","drag-start","drag","drag-end","leave","enter","page-left","wheel"],r8=["blur","focus"],s8=["keydown","keyup"],dP=["pagehide","mousemove","mouseup"],hP=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel","blur","focus","keydown","keyup"],o8=`
.ag-chart-wrapper {
    touch-action: none;
}
`,rv=(i=>(i[i.Default=16]="Default",i[i.ZoomDrag=8]="ZoomDrag",i[i.Annotations=4]="Annotations",i[i.ContextMenu=2]="ContextMenu",i[i.Animation=1]="Animation",i[i.All=31]="All",i))(rv||{}),Pk=class tS extends Za{constructor(e,t){super(),this.keyboardOptions=e,this.debug=Mi.create(!0,"interaction"),this.eventHandler=n=>this.processEvent(n),this.mouseDown=!1,this.touchDown=!1,this.clickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.dblclickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"},{offsetX:NaN,offsetY:NaN,type:"mouseup"},{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.stateQueue=17,this.rootElement=ea("body"),this.element=t;for(let n of hP)n.startsWith("touch")?t.addEventListener(n,this.eventHandler,{passive:!0}):n==="wheel"?t.addEventListener(n,this.eventHandler,{passive:!1}):t.addEventListener(n,this.eventHandler);for(let n of dP)ta().addEventListener(n,this.eventHandler);Su(o8,"interactionManager")}destroy(){super.destroy();for(let e of dP)ta().removeEventListener(e,this.eventHandler);for(let e of hP)this.element.removeEventListener(e,this.eventHandler)}addListener(e,t,n=16){return super.addListener(e,r=>{this.getState()&n&&t(r)})}pushState(e){this.stateQueue|=e}popState(e){this.stateQueue&=~e}getState(){return this.stateQueue&-this.stateQueue}processEvent(e){let t=this.decideInteractionEventTypes(e);t.length>0&&this.dispatchEvent(e,t).catch(n=>Ie.errorOnce(n))}dispatchEvent(e,t){return we(this,null,function*(){if(B0(XS,t))this.dispatchPointerEvent(e,t);else if(B0(r8,t))for(let n of t)W0(this.listeners,n,mu({type:n,sourceEvent:e}));else if(B0(s8,t))for(let n of t)W0(this.listeners,n,mu({type:n,sourceEvent:e}))})}dispatchPointerEvent(e,t){let n=this.calculateCoordinates(e);if(n!=null)for(let r of t)W0(this.listeners,r,this.buildPointerEvent(ue({type:r,event:e},n)))}recordDown(e){e instanceof MouseEvent&&(uu(["offsetX","offsetY"],this.clickHistory[0],e),uu(["offsetX","offsetY"],this.dblclickHistory[2],this.dblclickHistory[0]),uu(["offsetX","offsetY"],this.dblclickHistory[0],e)),this.dragStartElement=e.target}recordUp(e){e instanceof MouseEvent&&uu(["offsetX","offsetY"],this.dblclickHistory[1],e),this.dragStartElement=void 0}decideInteractionEventTypes(e){let t="drag-start";switch(e.type){case"blur":case"focus":case"keydown":case"keyup":return this.keyboardOptions.enabled?[e.type]:[];case"click":case"dblclick":case"contextmenu":case"wheel":return[e.type];case"mousedown":return this.isEventOverElement(e)?(this.mouseDown=!0,this.recordDown(e),[t]):[];case"touchstart":return this.isEventOverElement(e)?(this.touchDown=!0,this.recordDown(e),[t]):[];case"touchmove":case"mousemove":return!this.mouseDown&&!this.touchDown&&!this.isEventOverElement(e)?[]:this.mouseDown||this.touchDown?["drag"]:["hover"];case"mouseup":return!this.mouseDown&&!this.isEventOverElement(e)?[]:(this.mouseDown=!1,this.recordUp(e),["drag-end"]);case"touchend":return!this.touchDown&&!this.isEventOverElement(e)?[]:(this.touchDown=!1,this.recordUp(e),["drag-end"]);case"mouseout":case"touchcancel":return["leave"];case"mouseenter":let n=e instanceof MouseEvent&&(e.buttons&1)===1;return this.mouseDown!==n?(this.mouseDown=n,[n?t:"drag-end"]):["enter"];case"pagehide":return["page-left"]}return[]}isEventOverElement(e){var t,n,r;return e.target===this.element||((t=e.target)==null?void 0:t.parentElement)===this.element||((r=(n=e.target)==null?void 0:n.parentElement)==null?void 0:r.parentElement)===this.element}calculateCoordinates(e){var t;if(e instanceof MouseEvent)return this.getMouseEventCoords(e);if(typeof TouchEvent<"u"&&e instanceof TouchEvent){let n=(t=e.touches[0])!=null?t:e.changedTouches[0],{clientX:r,clientY:s,pageX:o,pageY:a}=n;return Ue(ue({},tS.NULL_COORDS),{clientX:r,clientY:s,pageX:o,pageY:a})}else if(e instanceof PageTransitionEvent)return e.persisted?void 0:tS.NULL_COORDS}getMouseEventCoords(e){let{clientX:t,clientY:n,pageX:r,pageY:s}=e,{offsetX:o,offsetY:a}=e,l=c=>{let u=0,d=0;for(;c;)u+=c.offsetLeft,d+=c.offsetTop,c=c.offsetParent;return{x:u,y:d}};if(this.dragStartElement!=null&&e.target!==this.dragStartElement){let c=l(this.dragStartElement),u=l(e.target);o-=c.x-u.x,a-=c.y-u.y}return{clientX:t,clientY:n,pageX:r,pageY:s,offsetX:o,offsetY:a}}isWheelEvent(e){return e.type==="wheel"}buildPointerEvent(e){let{type:t,event:n,clientX:r,clientY:s}=e,{offsetX:o,offsetY:a,pageX:l,pageY:c}=e;if(!qt(o)||!qt(a)){let m=this.element.getBoundingClientRect();o=r-m.left,a=s-m.top}if(!qt(l)||!qt(c)){let m=this.rootElement.getBoundingClientRect();l=r-m.left,c=s-m.top}let[u,d]=[NaN,NaN];if(this.isWheelEvent(n)){let m=n.deltaMode===0?.01:1;u=n.deltaX*m,d=n.deltaY*m}let h=[];n.type==="click"?h=this.clickHistory:n.type==="dblclick"&&(h=this.dblclickHistory);let p=mu({type:t,offsetX:o,offsetY:a,pageX:l,pageY:c,deltaX:u,deltaY:d,pointerHistory:h,sourceEvent:n});return this.debug("InteractionManager - builtEvent: ",p),p}};Pk.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};var Dk=Pk;function pP(i){return i==null?!0:!isNaN(i)&&i>=0&&i<=2}var kk=class extends Za{constructor(i,e){super(),this.interactionManager=i,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new uP(this.defaultDuration*1.5),this.debug=Mi.create(!0,"animation"),this.rafAvailable=typeof requestAnimationFrame<"u",this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1}animate(i){var e=Xi(i,[]),t;let n=this.batch;try{n.checkOverlappingId(e.id)}catch(c){this.failsafeOnError(c);return}let r=(t=e.id)!=null?t:Math.random().toString(),s=this.isSkipped()||e.phase==="none";s&&this.debug("AnimationManager - skipping animation");let{delay:o,duration:a}=e;if(!pP(o))throw new Error(`Animation delay of ${o} is unsupported (${r})`);if(!pP(a))throw new Error(`Animation duration of ${a} is unsupported (${r})`);let l=new MD(Ue(ue({},e),{id:r,skip:s,autoplay:this.isPlaying?e.autoplay:!1,phase:e.phase,defaultDuration:this.defaultDuration}));if(!this.forceTimeJump(l,this.defaultDuration))return this.batch.addAnimation(l),l}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(i){this.failsafeOnError(i)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");try{this.batch.pause()}catch(i){this.failsafeOnError(i)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(i){try{this.batch.stopByAnimationId(i)}catch(e){this.failsafeOnError(e)}}stopByAnimationGroupId(i){try{this.batch.stopByAnimationGroupId(i)}catch(e){this.failsafeOnError(e)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(i=!0){this.skipAnimations=i}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:new Error().stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(i){this.requestId=requestAnimationFrame(i)}forceTimeJump(i,e){return!1}requestAnimation(){if(!this.rafAvailable||!this.batch.isActive()||this.requestId!==null)return;let i,e=t=>we(this,null,function*(){let n=()=>we(this,null,function*(){let r=t-(i??t);i=t,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:r}),this.interactionManager.pushState(1);try{this.batch.progress(r)}catch(s){this.failsafeOnError(s)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:r})});this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(n):yield this.chartUpdateMutex.acquire(n),this.batch.isActive()?this.scheduleAnimationFrame(e):(this.batch.stop(),this.listeners.dispatch("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))});this.listeners.dispatch("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(e)}cancelAnimation(){this.requestId!==null&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(i,e=!0){Ie.error("Error during animation, skipping animations",i),e&&this.cancelAnimation()}startBatch(i){this.debug(`AnimationManager - startBatch() with skipAnimations=${i}.`),this.reset(),this.batch.stop(),this.batch.destroy(),this.batch=new uP(this.defaultDuration*1.5),i===!0&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(1),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(i){this.batch.stoppedCbs.add(i)}},a8=class Ik{constructor(e){this.canvas=e,this.debug=Mi.create(!0,"aria"),this.canvas.appendChild(this.liveElem=Ik.createAnnouncer())}static createAnnouncer(){let e=ea().createElement("div");return e.classList.add("ag-charts-aria-announcer"),fh(e,"role","status"),fh(e,"aria-live","assertive"),e}destroy(){this.canvas.removeChild(this.liveElem)}announceValue(e){this.debug(`AriaAnnouncementService - announceValue: ${e}`),this.liveElem.textContent=e}},Fk=class extends Za{legendItemClick(i,e,t,n){let r={type:"legend-item-click",series:i,itemId:e,enabled:t,legendItemName:n};this.listeners.dispatch("legend-item-click",r)}legendItemDoubleClick(i,e,t,n,r){let s={type:"legend-item-double-click",series:i,itemId:e,enabled:t,legendItemName:r,numVisibleItems:n};this.listeners.dispatch("legend-item-double-click",s)}axisHover(i,e){let t={type:"axis-hover",axisId:i,direction:e};this.listeners.dispatch("axis-hover",t)}},Ok=class{constructor(){this.defaultActions=[],this.disabledActions=new Set}copyDefaultActions(){return[...this.defaultActions]}registerDefaultAction(i){i.id&&this.defaultActions.find(({id:e})=>e===i.id)||this.defaultActions.push(i)}enableAction(i){this.disabledActions.delete(i)}disableAction(i){this.disabledActions.add(i)}isDisabled(i){return this.disabledActions.has(i)}},Ch=class extends Map{constructor(i,e){super(),this.defaultValue=i,this.defaultState=e}set(i,e){return this.delete(i),typeof e<"u"&&super.set(i,e),this}stateId(){var i;return(i=Array.from(this.keys()).pop())!=null?i:this.defaultState}stateValue(){var i;return(i=Array.from(this.values()).pop())!=null?i:this.defaultValue}},Lk=class{constructor(i){this.element=i,this.stateTracker=new Ch("default")}updateCursor(i,e){this.stateTracker.set(i,e),this.element.style.cursor=this.stateTracker.stateValue()}getCursor(){return this.element.style.cursor}};function l8(i,e){let t=i.screenX-e.screenX,n=i.screenY-e.screenY;return t*t+n*n}function mP(i,e){return Math.sqrt(l8(i,e))}var c8=1,Rk=class extends Za{constructor(i){super(),this.touchstart=e=>this.onTouchStart(e),this.touchmove=e=>this.onTouchMove(e),this.touchend=e=>this.onTouchEnd(e),this.touchcancel=e=>this.onTouchCancel(e),this.pinch={finger1:{identifier:NaN,screenX:NaN,screenY:NaN},finger2:{identifier:NaN,screenX:NaN,screenY:NaN},origin:{x:NaN,y:NaN},distance:NaN,status:0},this.element=i,i.addEventListener("touchstart",this.touchstart,{passive:!0}),i.addEventListener("touchmove",this.touchmove,{passive:!0}),i.addEventListener("touchend",this.touchend),i.addEventListener("touchcancel",this.touchcancel)}destroy(){let{element:i}=this;i.removeEventListener("touchstart",this.touchstart),i.removeEventListener("touchmove",this.touchmove),i.removeEventListener("touchend",this.touchend),i.removeEventListener("touchcancel",this.touchcancel)}findPinchTouches(i){let{touches:e}=i,{finger1:t,finger2:n}=this.pinch;if(this.pinch.status!==0&&e.length===2){if(e[0].identifier===t.identifier&&e[1].identifier===n.identifier)return[e[0],e[1]];if(e[0].identifier===n.identifier&&e[1].identifier===t.identifier)return[e[1],e[0]]}}copyTouchData(i){let e=["identifier","screenX","screenY"];uu(e,this.pinch.finger1,i.touches[0]),uu(e,this.pinch.finger2,i.touches[1]),this.pinch.distance=mP(this.pinch.finger1,this.pinch.finger2)}dispatchPinchEvent(i,e){let{finger1:t,finger2:n,origin:r}=this.pinch,s={type:i,finger1:t,finger2:n,deltaDistance:e,origin:r};this.listeners.dispatch(i,s)}onTouchStart(i){this.stopPinchTracking();let{pinch:e}=this;i.touches.length===2&&(e.status=1,this.copyTouchData(i),e.origin.x=(i.touches[0].clientX+i.touches[1].clientX)/2,e.origin.y=(i.touches[0].clientY+i.touches[1].clientY)/2)}onTouchMove(i){let e=this.findPinchTouches(i);if(e!==void 0){let[t,n]=e,{pinch:r}=this,s=mP(t,n),o=s-r.distance;r.status===1?Math.abs(o)>c8&&(r.status=2,this.copyTouchData(i),this.dispatchPinchEvent("pinch-start",0)):r.status===2?(r.distance=s,this.copyTouchData(i),this.dispatchPinchEvent("pinch-move",o)):Ie.error(`unexpected pinch.status: ${r.status}`)}}onTouchEnd(i){this.stopPinchTracking()}onTouchCancel(i){this.stopPinchTracking()}stopPinchTracking(){let{pinch:i}=this;i.status===2&&this.dispatchPinchEvent("pinch-end",0),this.pinch.status=0}},Nk=class extends Za{constructor(){super(...arguments),this.highlightStates=new Ch,this.pickedStates=new Ch}updateHighlight(i,e){let{activeHighlight:t}=this;this.highlightStates.set(i,e),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,t)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:t})}getActiveHighlight(){return this.activeHighlight}updatePicked(i,e){this.pickedStates.set(i,e),this.activePicked=this.pickedStates.stateValue()}getActivePicked(){return this.activePicked}isEqual(i,e){return i===e||i?.series===e?.series&&i?.itemId===e?.itemId&&i?.datum===e?.datum}},u8=class extends Za{constructor(i){super(),this.hasBrowserFocus=!1,this.isMouseBlurred=!1,this.isClicking=!1,this.destroyFns.push(i.addListener("drag-start",e=>this.onClickStart(e),31),i.addListener("click",e=>this.onClickStop(e),31),i.addListener("drag-end",e=>this.onClickStop(e),31),i.addListener("wheel",e=>this.mouseBlur(e)),i.addListener("hover",e=>this.mouseBlur(e)),i.addListener("drag",e=>this.mouseBlur(e)),i.addListener("blur",e=>this.onBlur(e),31),i.addListener("focus",e=>this.onFocus(e),31),i.addListener("keydown",e=>this.onKeyDown(e),31))}destroy(){super.destroy()}onClickStart(i){this.isClicking=!0,this.mouseBlur(i)}onClickStop(i){this.isClicking=!1,this.mouseBlur(i)}mouseBlur(i){this.hasBrowserFocus&&(this.isMouseBlurred||(this.dispatch("blur",0,i),this.isMouseBlurred=!0))}onBlur(i){this.hasBrowserFocus=!1,this.isMouseBlurred=!1,this.dispatch("blur",0,i)}onFocus(i){this.hasBrowserFocus=!0,this.isClicking?this.isMouseBlurred=!0:(this.dispatch("browserfocus",1,i),this.dispatch("tab",0,i))}onKeyDown(i){if(!(!this.hasBrowserFocus||this.isClicking))switch(this.isMouseBlurred=!1,i.sourceEvent.code){case"Tab":return i.sourceEvent.shiftKey?this.dispatch("tab",-1,i):this.dispatch("tab",1,i);case"ArrowDown":return this.dispatch("nav-vert",1,i);case"ArrowUp":return this.dispatch("nav-vert",-1,i);case"ArrowLeft":return this.dispatch("nav-hori",-1,i);case"ArrowRight":return this.dispatch("nav-hori",1,i);case"Space":case"Enter":return this.dispatch("submit",0,i)}}dispatch(i,e,t){let n=mu({type:i,delta:e,sourceEvent:t});W0(this.listeners,i,n)}},Vk={};na(Vk,{block:()=>yu,css:()=>Bk,elements:()=>iS,modifiers:()=>sv});var yu="ag-charts-focus",iS={wrapper:`${yu}__wrapper`,indicator:`${yu}__indicator`},sv={hidden:`${yu}--hidden`},Bk=`
.${yu}.${iS.wrapper} {
    position: relative;
    display: block;
    pointer-events: none;
    user-select: none;
    overflow: hidden;
    top: 0;
    left: 0;
}

.${yu}.${iS.indicator} {
    position: absolute;
    display: block;
    pointer-events: none;
    user-select: none;
    border: var(--ag-charts-focus-border);
    box-shadow: var(--ag-charts-focus-border-shadow);
}

.${sv.hidden} {
    visibility: hidden;
}
`,_b=["series","legend"],d8=class extends Lh{},h8=class{constructor(i,e,t,n){this.interactionManager=i,this.keyNavManager=e,this.canvasElement=t,this.currentTabIndex=0,this.isDragging=!1,this.leftCanvas=!1,this.regions=new Map,this.destroyFns=[],this.destroyFns.push(...XS.map(a=>i.addListener(a,this.processPointerEvent.bind(this),31)),this.keyNavManager.addListener("blur",this.onNav.bind(this)),this.keyNavManager.addListener("browserfocus",this.onFocus.bind(this)),this.keyNavManager.addListener("tab",this.onTab.bind(this)),this.keyNavManager.addListener("nav-vert",this.onNav.bind(this)),this.keyNavManager.addListener("nav-hori",this.onNav.bind(this)),this.keyNavManager.addListener("submit",this.onNav.bind(this))),Su(Bk,yu),this.focusWrapper=ea().createElement("div"),this.focusIndicator=ea().createElement("div"),this.focusWrapper.appendChild(this.focusIndicator),n.appendChild(this.focusWrapper);let{block:r,elements:s,modifiers:o}=Vk;this.focusWrapper.classList.add(r,s.wrapper),this.focusIndicator.classList.add(r,s.indicator,o.hidden)}destroy(){this.destroyFns.forEach(i=>i()),this.currentRegion=void 0;for(let i of this.regions.values())i.listeners.destroy();this.focusWrapper.remove(),this.regions.clear()}addRegionFromProperties(i){let e={properties:i,listeners:new d8};return this.regions.set(i.name,e),this.makeObserver(e)}addRegion(i,e,...t){return this.addRegionFromProperties({name:i,bboxproviders:[e,...t],canInteraction:()=>!0})}getRegion(i){return this.makeObserver(this.regions.get(i))}find(i,e){let t=[];for(let[n,r]of this.regions.entries())for(let s of r.properties.bboxproviders){let o=s.getCachedBBox();o.containsPoint(i,e)&&t.push([r,o.width*o.height])}return t.sort((n,r)=>n[1]-r[1]).map(n=>n[0])}makeObserver(i){let{interactionManager:e}=this;class t{addListener(r,s,o=16){var a;return(a=i?.listeners.addListener(r,l=>{l.consumed||e.getState()&o&&s(l)}))!=null?a:()=>{}}}return new t}checkPointerHistory(i,e){for(let t of e.pointerHistory){let n=this.pickRegion(t.offsetX,t.offsetY);if(i.properties.name!==n?.properties.name)return!1}return!0}dispatch(i,e){i?.listeners.dispatch(e.type,e)}handleDragging(i){let{currentRegion:e}=this;switch(i.type){case"drag-start":this.isDragging=!0,this.leftCanvas=!1;break;case"leave":return this.leftCanvas=!0,this.isDragging;case"enter":return this.leftCanvas=!1,this.isDragging;case"drag":if(this.isDragging)return this.dispatch(e,i),!0;break;case"drag-end":if(this.isDragging)return this.isDragging=!1,this.dispatch(e,i),this.leftCanvas&&this.dispatch(e,Ue(ue({},i),{type:"leave"})),!0;break}return!1}processPointerEvent(i){if(this.handleDragging(i))return;let{currentRegion:e}=this,t=this.pickRegion(i.offsetX,i.offsetY);e!==void 0&&t?.properties.name!==e.properties.name&&this.dispatch(e,Ue(ue({},i),{type:"leave"})),t!==void 0&&t.properties.name!==e?.properties.name&&this.dispatch(t,Ue(ue({},i),{type:"enter"})),t!==void 0&&this.checkPointerHistory(t,i)&&this.dispatch(t,i),this.currentRegion=t}pickRegion(i,e){let t=this.find(i,e);return t.length>0?t[0]:void 0}getTabRegion(i){if(i!==void 0&&i>=0&&i<_b.length)return this.regions.get(_b[i])}dispatchTabStart(i){let{delta:e,sourceEvent:t}=i,n=mu({type:"tab-start",delta:e,sourceEvent:t}),r=this.getTabRegion(this.currentTabIndex);return this.dispatch(r,n),!!n.consumed}getNextInteractableTabIndex(i,e){let t=e<0?-1:1,n=i;for(;e!==0;){let r=this.getTabRegion(n+t);if(r===void 0)return;r.properties.canInteraction()&&(e=e-t),n=n+t}return n}validateCurrentTabIndex(){var i;let e=this.getTabRegion(this.currentTabIndex);e!==void 0&&!e.properties.canInteraction()&&(this.currentTabIndex=(i=this.getNextInteractableTabIndex(-1,1))!=null?i:0)}onFocus(i){let{delta:e,sourceEvent:t}=i,n=e>0?this.getNextInteractableTabIndex(-1,1):this.getNextInteractableTabIndex(_b.length,-1);this.currentTabIndex=n??0;let r=this.getTabRegion(this.currentTabIndex);r&&this.dispatch(r,mu({type:"tab",delta:e,sourceEvent:t}))}onTab(i){if(this.dispatchTabStart(i))return;this.validateCurrentTabIndex();let t=this.getNextInteractableTabIndex(this.currentTabIndex,i.delta),n=this.getTabRegion(t),r=this.getTabRegion(this.currentTabIndex);if(t!==void 0&&(this.currentTabIndex=t),r!==void 0&&n?.properties.name!==r.properties.name){let{delta:s,sourceEvent:o}=i,a=mu({type:"blur",delta:s,sourceEvent:o});this.dispatch(r,a)}n===void 0||!n.properties.canInteraction()?this.updateFocusIndicatorRect(void 0):this.dispatch(n,i)}onNav(i){let e=this.getTabRegion(this.currentTabIndex);this.dispatch(e,i)}updateFocusWrapperRect(){this.focusWrapper.style.width=this.canvasElement.style.width,this.focusWrapper.style.height=this.canvasElement.style.height}updateFocusIndicatorRect(i){if(i==null){this.focusIndicator.classList.add(sv.hidden);return}this.updateFocusWrapperRect(),this.focusIndicator.classList.remove(sv.hidden),this.focusIndicator.style.width=`${i.width}px`,this.focusIndicator.style.height=`${i.height}px`,this.focusIndicator.style.left=`${i.x}px`,this.focusIndicator.style.top=`${i.y}px`}},Gk=class extends Za{constructor(i){super(),this.element=i}static isGroup(i,e){return e.group===i}pressButton(i,e){this.listeners.dispatch("button-pressed",{type:"button-pressed",group:i,value:e})}toggleGroup(i,e){this.listeners.dispatch("group-toggled",{type:"group-toggled",group:i,visible:e})}toggleButton(i,e,t){this.listeners.dispatch("button-toggled",{type:"button-toggled",group:i,value:e,enabled:t})}proxyGroupOptions(i,e){this.listeners.dispatch("proxy-group-options",{type:"proxy-group-options",group:i,options:e})}},p8=`
.${qi} {
    transition: transform 0.1s ease;
    max-width: 100%;
    position: fixed;
    left: 0px;
    top: 0px;
    z-index: 99999;
    font: 12px Verdana, sans-serif;
    color: rgb(70, 70, 70);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
}

.${qi}-wrap-always {
    overflow-wrap: break-word;
    word-break: break-word;
    hyphens: none;
}

.${qi}-wrap-hyphenate {
    overflow-wrap: break-word;
    word-break: break-word;
    hyphens: auto;
}

.${qi}-wrap-on-space {
    overflow-wrap: normal;
    word-break: normal;
}

.${qi}-wrap-never {
    white-space: pre;
    text-overflow: ellipsis;
}

.${qi}-no-interaction {
    pointer-events: none;
    user-select: none;
}

.${qi}-no-animation {
    transition: none !important;
}

.${qi}-hidden {
    visibility: hidden;
}

.${qi}-title {
    overflow: hidden;
    position: relative;
    padding: 8px 14px;
    border-top-left-radius: 2px;
    border-top-right-radius: 2px;
    color: white;
    background-color: #888888;
    z-index: 1;
    text-overflow: inherit;
}

.${qi}-title:only-child {
    border-bottom-left-radius: 2px;
    border-bottom-right-radius: 2px;
}

.${qi}-content {
    overflow: hidden;
    padding: 6px 14px;
    line-height: 1.7em;
    background: white;
    border-bottom-left-radius: 2px;
    border-bottom-right-radius: 2px;
    border: 1px solid rgba(0, 0, 0, 0.15);
    overflow: hidden;
    text-overflow: inherit;
}

.${qi}-arrow::before {
    content: "";

    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);

    border: 5px solid #d9d9d9;

    border-left-color: transparent;
    border-right-color: transparent;
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.${qi}-arrow::after {
    content: "";

    position: absolute;
    top: calc(100% - 1px);
    left: 50%;
    transform: translateX(-50%);

    border: 5px solid white;

    border-left-color: transparent;
    border-right-color: transparent;
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.ag-chart-wrapper {
    box-sizing: border-box;
    overflow: hidden;
}
`,ov=class{constructor(i,e){if(this.canvasElement=i,this.tooltip=e,this.stateTracker=new Ch,this.appliedState=null,typeof IntersectionObserver<"u"){let t=new IntersectionObserver(n=>{for(let r of n)r.target===this.canvasElement&&r.intersectionRatio===0&&this.tooltip.toggle(!1)},{root:this.tooltip.root});t.observe(this.canvasElement),this.observer=t}Su(p8,"tooltip")}updateTooltip(i,e,t){var n;this.tooltip.enabled&&(t??(t=(n=this.stateTracker.get(i))==null?void 0:n.content),this.stateTracker.set(i,{content:t,meta:e}),this.applyStates())}removeTooltip(i){this.tooltip.enabled&&(this.stateTracker.delete(i),this.applyStates())}getTooltipMeta(i){var e;return(e=this.stateTracker.get(i))==null?void 0:e.meta}destroy(){var i;(i=this.observer)==null||i.unobserve(this.canvasElement)}applyStates(){var i;let e=this.stateTracker.stateId(),t=e?this.stateTracker.get(e):null;if(t?.meta==null||t?.content==null){this.appliedState=null,this.tooltip.toggle(!1);return}let n=this.canvasElement.getBoundingClientRect();if(((i=this.appliedState)==null?void 0:i.content)===t?.content){let r=this.tooltip.isVisible();this.tooltip.show(n,t?.meta,null,r)}else this.tooltip.show(n,t?.meta,t?.content);this.appliedState=t}static makeTooltipMeta(i,e){var t,n,r,s,o,a,l;let{offsetX:c,offsetY:u}=i,{tooltip:d}=e.series.properties,h={offsetX:c,offsetY:u,enableInteraction:(n=(t=d.interaction)==null?void 0:t.enabled)!=null?n:!1,lastPointerEvent:{type:i.type,offsetX:c,offsetY:u},showArrow:d.showArrow,position:{type:d.position.type,xOffset:d.position.xOffset,yOffset:d.position.yOffset}},p=(l=(s=(r=e.yBar)==null?void 0:r.upperPoint)!=null?s:e.midPoint)!=null?l:(a=(o=e.series).datumMidPoint)==null?void 0:a.call(o,e);if(d.position.type==="node"&&p){let{x:m,y:g}=p,f=e.series.contentGroup.inverseTransformPoint(m,g);return Ue(ue({},h),{offsetX:Math.round(f.x),offsetY:Math.round(f.y)})}return h}},Uk=class extends Lh{constructor(){super(...arguments),this.layoutComplete="layout-complete"}addListener(i,e){if(this.isLayoutStage(i)||this.isLayoutComplete(i))return super.addListener(i,e);throw new Error(`AG Charts - unsupported listener type: ${i}`)}dispatchPerformLayout(i,e){return this.isLayoutStage(i)?this.getListenersByType(i).reduce((t,n)=>{try{return n.handler(t)}catch(r){return Ie.errorOnce(r),t}},e):e}dispatchLayoutComplete(i){this.dispatch(this.layoutComplete,i)}isLayoutStage(i){return i!==this.layoutComplete}isLayoutComplete(i){return i===this.layoutComplete}},m8=class{constructor(){this.groups={}}registerSeries({id:i,seriesGrouping:e,visible:t,type:n}){var r,s;e&&((s=(r=this.groups)[n])!=null||(r[n]={}),this.groups[n][i]={grouping:e,visible:t})}deregisterSeries({id:i,type:e}){this.groups[e]&&delete this.groups[e][i],this.groups[e]&&Object.keys(this.groups[e]).length===0&&delete this.groups[e]}getVisiblePeerGroupIndex({type:i,seriesGrouping:e,visible:t}){var n;if(!e)return{visibleGroupCount:t?1:0,visibleSameStackCount:t?1:0,index:0};let r=new Set,s=new Set;for(let a of Object.values((n=this.groups[i])!=null?n:{}))a.visible&&(r.add(a.grouping.groupIndex),a.grouping.groupIndex===e.groupIndex&&s.add(a.grouping.stackIndex));let o=Array.from(r);return o.sort((a,l)=>a-l),{visibleGroupCount:o.length,visibleSameStackCount:s.size,index:o.indexOf(e.groupIndex)}}},om=(i=>(i[i.FULL=0]="FULL",i[i.UPDATE_DATA=1]="UPDATE_DATA",i[i.PROCESS_DATA=2]="PROCESS_DATA",i[i.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",i[i.SERIES_UPDATE=4]="SERIES_UPDATE",i[i.TOOLTIP_RECALCULATION=5]="TOOLTIP_RECALCULATION",i[i.SCENE_RENDER=6]="SCENE_RENDER",i[i.NONE=7]="NONE",i))(om||{}),Hk=class extends Lh{constructor(i){super(),this.updateCallback=i}update(i=0,e){this.updateCallback(i,e)}dispatchUpdateComplete(i){this.dispatch("update-complete",{type:"update-complete",minRect:i?.minRect,minVisibleRect:i?.minVisibleRect})}},g8=class{constructor(i,e){let{scene:t,syncManager:n,element:r,updateCallback:s,updateMutex:o}=e;this.chartService=i,this.scene=t,this.syncManager=n,this.zoomManager=i.zoomManager,this.annotationManager=new i8(i.annotationRoot),this.ariaAnnouncementService=new a8(t.canvas.element),this.chartEventManager=new Fk,this.contextMenuRegistry=new Ok,this.cursorManager=new Lk(r),this.highlightManager=new Nk,this.interactionManager=new Dk(i.keyboard,r),this.keyNavManager=new u8(this.interactionManager),this.regionManager=new h8(this.interactionManager,this.keyNavManager,this.scene.canvas.element,r),this.toolbarManager=new Gk(r),this.gestureDetector=new Rk(r),this.layoutService=new Uk,this.updateService=new Hk(s),this.seriesStateManager=new m8,this.callbackCache=new t8,this.animationManager=new kk(this.interactionManager,o),this.animationManager.skip(),this.animationManager.play(),this.dataService=new Lv(this.animationManager),this.tooltipManager=new ov(this.scene.canvas.element,i.tooltip)}destroy(){this.tooltipManager.destroy(),this.regionManager.destroy(),this.keyNavManager.destroy(),this.interactionManager.destroy(),this.animationManager.stop(),this.animationManager.destroy(),this.ariaAnnouncementService.destroy(),this.chartEventManager.destroy(),this.highlightManager.destroy(),this.callbackCache.invalidateCache(),this.animationManager.reset(),this.syncManager.destroy()}},zk=class extends Ot{constructor(){super(...arguments),this.range="tooltip"}};E([I(Li(["tooltip","node"],"a range"))],zk.prototype,"range",2);var gP=class Wk{constructor(){this.domain=new Set}static is(e){return e instanceof Wk}extend(e){this.domain.add(e)}getDomain(){return Array.from(this.domain)}},th=class $k{constructor(){this.domain=[1/0,-1/0]}static is(e){return e instanceof $k}static extendDomain(e,t=[1/0,-1/0]){for(let n of e)typeof n=="number"&&(t[0]>n&&(t[0]=n),t[1]<n&&(t[1]=n));return t}extend(e){this.domain[0]>e&&(this.domain[0]=e),this.domain[1]<e&&(this.domain[1]=e)}getDomain(){return[...this.domain]}};function f8(i){return i.map(e=>Js(e)?JSON.stringify(e):e).join("-")}function v8(i){return Number.isInteger(i)?i:Math.abs(i)>1e4?Math.trunc(i):Math.round(i*1e4)/1e4}function y8(i){if(i==null)return[];let[e,t]=i.map(Number);return e===0&&t===0?[0,1]:e===1/0&&t===-1/0?[]:(e===1/0?e=0:t===-1/0&&(t=0),qt(e)&&qt(t)?[e,t]:[])}function kr(i,e){var t;let n=y8(i);if(n.length===0)return n;let[r,s]=n;if(r===s){let[o,a]=(t=e?.calculatePadding(r,s))!=null?t:[1,1];r-=o,s+=a}return[r,s]}function ZS(i,e){var t;return(t=e?.get(i.id))!=null?t:0}var eu=Symbol("invalid"),Kk=class{constructor(i,e="standalone"){this.opts=i,this.mode=e,this.debug=Mi.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[];let t=!0;for(let r of i.props){if(r.type==="key"&&!t)throw new Error("AG Charts - internal config error: keys must come before values.");r.type==="value"&&t&&(t=!1)}let n=({matchGroupIds:r=[]})=>{for(let s of r)if(this.values.every(o=>o.groupId!==s))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${s}).`)};for(let r of i.props)switch(r.type){case"key":this.keys.push(Ue(ue({},r),{index:this.keys.length,missing:new Map}));break;case"value":if(r.property==null)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(r)}`);this.values.push(Ue(ue({},r),{index:this.values.length,missing:new Map}));break;case"aggregate":n(r),this.aggregates.push(Ue(ue({},r),{index:this.aggregates.length}));break;case"group-value-processor":n(r),this.groupProcessors.push(Ue(ue({},r),{index:this.groupProcessors.length}));break;case"property-value-processor":this.propertyProcessors.push(Ue(ue({},r),{index:this.propertyProcessors.length}));break;case"reducer":this.reducers.push(Ue(ue({},r),{index:this.reducers.length}));break;case"processor":this.processors.push(Ue(ue({},r),{index:this.processors.length}));break}}resolveProcessedDataDefById(i,e){var t;let n=(t=this.scopeCache.get(i.id))==null?void 0:t.get(e);if(!n)throw new Error(`AG Charts - didn't find property definition for [${e}, ${i.id}]`);return{index:n.index,def:n}}resolveProcessedDataIndexById(i,e){return this.resolveProcessedDataDefById(i,e).index}resolveProcessedDataDefsByIds(i,e){return e.map(t=>[t,this.resolveProcessedDataDefById(i,t)])}resolveProcessedDataDefsValues(i,{keys:e,values:t}){let n={};for(let[r,{index:s,def:o}]of i){let a=o.type==="key"?e:t;n[r]=a[s]}return n}getDomain(i,e,t="value",n){var r;let s=this.getDomainsByType(t,n);return(r=s?.[this.resolveProcessedDataIndexById(i,e)])!=null?r:[]}getDomainsByType(i,e){switch(i){case"key":return e.domain.keys;case"value":return e.domain.values;case"aggregate":return e.domain.aggValues;case"group-value-processor":return e.domain.groups;default:return null}}processData(i,e){var t;let{opts:{groupByKeys:n,groupByFn:r},aggregates:s,groupProcessors:o,reducers:a,processors:l,propertyProcessors:c}=this,u=performance.now();if(n&&this.keys.length===0)return;let d=this.extractData(i,e);if(n?d=this.groupData(d):r&&(d=this.groupData(d,r(d))),o.length>0&&this.postProcessGroups(d),s.length>0&&this.aggregateData(d),c.length>0&&this.postProcessProperties(d),a.length>0&&this.reduceData(d),l.length>0&&this.postProcessData(d),i.length>0){for(let p of Wp(this.keys,this.values))for(let[m,g]of p.missing)if(g>=i.length){let f=m==null?"":` for ${m}`;Ie.warnOnce(`the key '${p.property}' was not found in any data element${f}.`)}}let h=performance.now();d.time=h-u,this.debug.check()&&C8(d),this.scopeCache.clear();for(let p of Wp(this.keys,this.values,this.aggregates))if(p.idsMap)for(let[m,g]of p.idsMap)for(let f of g)if(!this.scopeCache.has(m))this.scopeCache.set(m,new Map([[f,p]]));else{if((t=this.scopeCache.get(m))!=null&&t.has(f))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(m).set(f,p)}return d}valueGroupIdxLookup({matchGroupIds:i}){let e=[];for(let[t,n]of this.values.entries())(!i||n.groupId&&i.includes(n.groupId))&&e.push(t);return e}valueIdxLookup(i,e){let t=i==null||i.length===0,n=typeof e=="string"?e:e.id,r=o=>{if(o.idsMap){for(let[a,l]of o.idsMap)if(i?.includes(a)&&l.has(n))return!0}return!1},s=this.values.findIndex(o=>(o.scopes==null||t&&!o.scopes.length||o.scopes.some(l=>i?.includes(l)))&&(o.property===n||o.id===n||r(o)));if(s===-1)throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(i)}`);return s}extractData(i,e){var t,n,r,s;let{dataDomain:o,processValue:a,scopes:l,allScopesHaveSameDefs:c}=this.initDataDomainProcessor(),u=new Map(e?.map(y=>[y.id,y])),{keys:d,values:h}=this,p=new Array(i.length),m=0,g=0;for(let[y,b]of i.entries()){let v={},S=l.size>0?new Set(l):void 0,w=new Array(d.length),T=0,D;for(let B of d){if(D=a(B,b,D),D===eu)break;w&&(w[T++]=D)}if(D===eu)continue;let O=h.length>0?new Array(h.length):void 0,R;for(let[B,$]of h.entries()){for(let U of(t=$.scopes)!=null?t:l){let K=u.get(U),ie=(n=K?.data[y])!=null?n:b;if(R=a($,ie,R,U),!(R===eu||!O)){if(K!=null&&$.includeProperty!==!1){let te=$.includeProperty&&$.id!=null?$.id:$.property;(r=v[U])!=null||(v[U]={}),v[U][te]=R}O[B]=R}}if(R===eu){if(c)break;for(let U of(s=$.scopes)!=null?s:l)S?.delete(U);if(S?.size===0)break}}if(R===eu&&c||S?.size===0)continue;let L={datum:ue(ue({},b),v),keys:w,values:O};!c&&S&&S.size<l.size&&(g++,L.validScopes=new Set(S)),p[m++]=L}p.length=m;let f=y=>{let b=o.get(y),v=b.getDomain();return th.is(b)&&v[0]>v[1]?[]:v};return{type:"ungrouped",input:{count:i.length},data:p,domain:{keys:d.map(f),values:h.map(f)},defs:{allScopesHaveSameDefs:c,keys:d,values:h},partialValidDataCount:g,time:0}}groupData(i,e){var t;let n=new Map;for(let a of i.data){let{keys:l,values:c,datum:u,validScopes:d}=a,h=(t=e?.(a))!=null?t:l,p=f8(h);if(n.has(p)){let m=n.get(p);if(m.values.push(c),m.datum.push(u),d!=null&&m.validScopes!=null)for(let g of m.validScopes)d.has(g)||m.validScopes.delete(g)}else n.set(p,{keys:h,values:[c],datum:[u],validScopes:d})}let r=new Array(n.size),s=new Array(n.size),o=0;for(let{keys:a,values:l,datum:c,validScopes:u}of n.values())u?.size!==0&&(s[o]=a,r[o++]={keys:a,values:l,datum:c,validScopes:u});return Ue(ue({},i),{type:"grouped",data:r,domain:Ue(ue({},i.domain),{groups:s})})}aggregateData(i){var e,t,n,r,s,o,a;let l=i.type==="ungrouped";i.domain.aggValues=[];for(let[c,u]of this.aggregates.entries()){let d=this.valueGroupIdxLookup(u),h=[1/0,-1/0];for(let p of i.data){if((e=p.aggValues)!=null||(p.aggValues=new Array(this.aggregates.length)),p.validScopes)continue;let m=l?[p.values]:p.values,g=(n=(t=u.groupAggregateFunction)==null?void 0:t.call(u))!=null?n:[1/0,-1/0];for(let y of m){let b=d.map(S=>y[S]),v=u.aggregateFunction(b,p.keys);v&&(g=(s=(r=u.groupAggregateFunction)==null?void 0:r.call(u,v,g))!=null?s:th.extendDomain(v,g))}let f=((a=(o=u.finalFunction)==null?void 0:o.call(u,g))!=null?a:g).map(y=>v8(y));p.aggValues[c]=f,th.extendDomain(f,h)}i.domain.aggValues.push(h)}}postProcessGroups(i){var e,t;let{groupProcessors:n}=this,r=new Set,s=new Map,o=new Map,a=new Map;for(let c of n){let u=this.valueGroupIdxLookup(c);o.set(c,u),a.set(c,c.adjust());for(let d of u){let p=this.values[d].valueType==="category";r.add(d),s.set(d,p?new gP:new th)}}let l=c=>{var u;for(let d of r)(u=s.get(d))==null||u.extend(c[d])};for(let c of i.data){for(let u of n){if(c.validScopes)continue;let d=(e=o.get(u))!=null?e:[],h=(t=a.get(u))==null?void 0:t();if(h)if(i.type==="grouped")for(let p of c.values)p&&h(p,d);else c.values&&h(c.values,d)}if(i.type==="grouped")for(let u of c.values)l(u);else l(c.values)}for(let[c,u]of s)i.domain.values[c]=u.getDomain()}postProcessProperties(i){for(let{adjust:e,property:t,scopes:n}of this.propertyProcessors)e()(i,this.valueIdxLookup(n,t))}reduceData(i){var e,t;(e=i.reduced)!=null||(i.reduced={});for(let n of this.reducers){let r=n.reducer(),s=n.initialValue;for(let o of i.data)(!o.validScopes||(t=n.scopes)!=null&&t.some(a=>{var l;return(l=o.validScopes)==null?void 0:l.has(a)}))&&(s=r(s,o));i.reduced[n.property]=s}}postProcessData(i){var e;(e=i.reduced)!=null||(i.reduced={});for(let t of this.processors)i.reduced[t.property]=t.calculate(i)}initDataDomainProcessor(){let{keys:i,values:e}=this,t=new Set;for(let c of e)if(c.scopes)for(let u of c.scopes)t.add(u);let n=new Map,r=new Map,s=!0,o=()=>{var c;for(let u of Wp(i,e))u.valueType==="category"?n.set(u,new gP):(n.set(u,new th),s&&(s=((c=u.scopes)!=null?c:[]).length===t.size))};o();let a=this.buildAccessors(Wp(i,e));return{dataDomain:n,processValue:(c,u,d,h)=>{var p,m,g,f,y;let b,v;if(a.has(c.property)){try{v=a.get(c.property)(u)}catch{}b=v!=null}else b=c.property in u,v=b?u[c.property]:c.missingValue;c.forceValue!=null&&(v=b&&Fm(v)?-1*c.forceValue:c.forceValue,b=!0);let S="missingValue"in c;if(!b&&!S){let w=(p=c.missing.get(h))!=null?p:0;c.missing.set(h,w+1)}if(n.has(c)||o(),b&&!((g=(m=c.validation)==null?void 0:m.call(c,v,u))==null||g))if("invalidValue"in c)v=c.invalidValue;else return this.mode!=="integrated"&&Ie.warnOnce(`invalid value of type [${typeof v}] ignored:`,`[${v}]`),eu;return c.processor&&(r.has(c)||r.set(c,c.processor()),v=(f=r.get(c))==null?void 0:f(v,d===eu?void 0:d)),(y=n.get(c))==null||y.extend(v),v},initDataDomain:o,scopes:t,allScopesHaveSameDefs:s}}buildAccessors(i){let e=new Map;if(this.mode==="integrated")return e;for(let t of i){if(!(t.property.includes(".")||t.property.includes("[")))continue;let r;t.property.startsWith("[")?r=`return datum${t.property};`:r=`return datum.${t.property};`,e.set(t.property,new Function("datum",r))}return e}};function C8(i){var e,t;let n=(r,s)=>{s.length>0&&(Ie.log(`DataModel.processData() - ${r}`),Ie.table(s))};if(Ie.log("DataModel.processData() - processedData",i),n("Key Domains",i.domain.keys),n("Group Domains",(e=i.domain.groups)!=null?e:[]),n("Value Domains",i.domain.values),n("Aggregate Domains",(t=i.domain.aggValues)!=null?t:[]),i.type==="grouped"){let r=i.data.reduce((s,o)=>{var a,l;let c=(a=o.keys)!=null?a:[],u=(l=o.aggValues)!=null?l:[],d=o.keys.map(()=>{}),h=u?.map(()=>{});return s.push(...o.values.map((p,m)=>[...m===0?c:d,...p??[],...m==0?u:h])),s},[]);n("Values",r)}else{let r=i.data.reduce((s,o)=>{var a;let l=(a=o.aggValues)!=null?a:[];return s.push([...o.keys,...o.values,...l]),s},[]);n("Values",r)}}var b8=(()=>{let i=class Na{constructor(t){this.mode=t,this.debug=Mi.create(!0,"data-model"),this.requested=[],this.status="setup"}request(t,n,r){return we(this,null,function*(){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");return new Promise((s,o)=>{this.requested.push({id:t,opts:r,data:n,resolve:s,reject:o})})})}execute(){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);let t=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",t);let n=this.mergeRequested(t);this.debug("DataController.execute() - merged",n),this.debug.check()&&(ta().processedData=[]);let r=this.requested.map(({id:o})=>o),s=this.hasMultipleDataSources(t);for(let{opts:o,data:a,resolves:l,rejects:c,ids:u}of n)try{let d=new Kk(o,this.mode),h=d.processData(a,t);this.debug.check()&&ta("processedData").push(h),h?.partialValidDataCount===0?l.forEach((p,m)=>p({dataModel:d,processedData:this.processScopedData(u[m],h,r,s)})):h?this.splitResult(d,h,u,l):c.forEach(p=>p(new Error("AG Charts - no processed data generated")))}catch(d){c.forEach(h=>h(d))}}hasMultipleDataSources(t){if(t.length){let[{data:n},...r]=t;return r.some(s=>n!==s.data)}return!1}processScopedData(t,n,r,s){let o=l=>{if(Array.isArray(l))return l.map(o);let c=s?ue(ue({},l),l[t]):l;for(let u of r)delete c[u];return c},a=l=>{var c;return Array.isArray(l)?l.map(a):(c=l?.[t])!=null?c:l};return Ue(ue({},n),{data:n.data.map(l=>{var c;return Ue(ue({},l),{datum:o(l.datum),values:s?(c=l.values)==null?void 0:c.map(a):l.values})})})}validateRequests(t){let n=[];for(let[r,s]of t.entries())r>0&&s.data.length!==t[0].data.length&&s.opts.groupByData===!1?s.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):n.push(s);return n}mergeRequested(t){let n=[];for(let r of t){let s=n.find(Na.groupMatch(r));s?s.push(r):n.push([r])}return n.map(Na.mergeRequests)}splitResult(t,n,r,s){for(let o=0;o<r.length;o++){let a=r[o],l=s[o];l({dataModel:t,processedData:Ue(ue({},n),{data:n.data.filter(({validScopes:c})=>{var u;return(u=c?.has(a))!=null?u:!0})})})}}static groupMatch({data:t,opts:n}){function r(s){return s.filter(o=>o.type==="key").map(o=>o.property).join(";")}return([s])=>(n.groupByData===!1||s.data===t)&&s.opts.groupByKeys===n.groupByKeys&&s.opts.groupByFn===n.groupByFn&&r(s.opts.props)===r(n.props)}static mergeRequests(t){return t.reduce((n,r)=>{var{id:s,data:o,resolve:a,reject:l,opts:c}=r,u=c,{props:d}=u,h=Xi(u,["props"]),p,m,g,f,y;n.ids.push(s),n.rejects.push(l),n.resolves.push(a),(p=n.data)!=null||(n.data=o),(m=n.opts)!=null||(n.opts=Ue(ue({},h),{props:[]}));for(let b of d){let v=Ue(ue({},b),{scopes:[s]});Na.createIdsMap(s,v);let S=n.opts.props.find(w=>w.type===v.type&&Na.deepEqual(w,v));if(!S){n.opts.props.push(v);continue}(g=S.scopes)!=null||(S.scopes=[]),S.scopes.push(...(f=v.scopes)!=null?f:[]),(S.type==="key"||S.type==="value")&&((y=v.idsMap)!=null&&y.size)&&Na.mergeIdsMap(v.idsMap,S.idsMap)}return n},{ids:[],rejects:[],resolves:[],data:null,opts:null})}static mergeIdsMap(t,n){for(let[r,s]of t)if(n.has(r))for(let o of s)n.get(r).add(o);else n.set(r,new Set(s))}static createIdsMap(t,n){var r;n.id!=null&&((r=n.idsMap)!=null||(n.idsMap=new Map),n.idsMap.has(t)?n.idsMap.get(t).add(n.id):n.idsMap.set(t,new Set([n.id])))}static deepEqual(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;let r,s;if(Array.isArray(t)){if(s=t.length,s!==n.length)return!1;for(r=s-1;r>=0;r--)if(!Na.deepEqual(t[r],n[r]))return!1;return!0}let o=Object.keys(t);if(s=o.length,s!==Object.keys(n).length)return!1;for(r=s-1;r>=0;r--){let a=o[r];if(!Na.skipKeys.has(a)&&(!Object.hasOwn(n,a)||!Na.deepEqual(t[a],n[a])))return!1}return!0}return!1}};return i.skipKeys=new Set(["id","idsMap","type","scopes"]),i})(),jk=b8,QS=class au extends Za{constructor(e){super(),this.chart=e}subscribe(e=au.DEFAULT_GROUP){let t=this.get(e);return t||(t=new Set,au.chartsGroups.set(e,t)),t.add(this.chart),this}unsubscribe(e=au.DEFAULT_GROUP){var t;return(t=this.get(e))==null||t.delete(this.chart),this}getChart(){return this.chart}getGroup(e=au.DEFAULT_GROUP){let t=this.get(e);return t?Array.from(t):[]}getGroupSiblings(e=au.DEFAULT_GROUP){return this.getGroup(e).filter(t=>t!==this.chart)}get(e){return au.chartsGroups.get(e)}};QS.chartsGroups=new Map;QS.DEFAULT_GROUP=Symbol("sync-group-default");var S8=QS,Yk=class extends Za{constructor(){super(...arguments),this.axisZoomManagers=new Map,this.state=new Ch(void 0,"initial"),this.rejectCallbacks=new Map}updateAxes(i){var e;let t=new Map(i.map(n=>[n.id,this.axisZoomManagers.get(n.id)]));this.axisZoomManagers.clear();for(let n of i)this.axisZoomManagers.set(n.id,(e=t.get(n.id))!=null?e:new x8(n));this.state.size>0&&i.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}updateZoom(i,e,t=!0,n){var r;if(n&&this.rejectCallbacks.set(i,n),this.axisZoomManagers.size===0){let s=this.state.stateId();s==="initial"||s===i||t?(this.state.set(i,e),s!==i&&((r=this.rejectCallbacks.get(s))==null||r(i))):n?.(s);return}this.state.set(i,e),this.axisZoomManagers.forEach(s=>{s.updateZoom(i,e?.[s.getDirection()])}),this.applyChanges(i)}updateAxisZoom(i,e,t){var n;(n=this.axisZoomManagers.get(e))==null||n.updateZoom(i,t),this.applyChanges(i)}fireZoomPanStartEvent(i){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start",callerId:i})}getZoom(){let i,e;if(this.axisZoomManagers.forEach(t=>{t.getDirection()==="x"?i??(i=t.getZoom()):t.getDirection()==="y"&&(e??(e=t.getZoom()))}),i||e)return{x:i,y:e}}getAxisZoom(i){var e,t;return(t=(e=this.axisZoomManagers.get(i))==null?void 0:e.getZoom())!=null?t:{min:0,max:1}}getAxisZooms(){let i={};for(let[e,t]of this.axisZoomManagers.entries())i[e]={direction:t.getDirection(),zoom:t.getZoom()};return i}applyChanges(i){if(!Array.from(this.axisZoomManagers.values(),n=>n.applyChanges()).some(Boolean))return;let t={};for(let[n,r]of this.axisZoomManagers.entries())t[n]=r.getZoom();this.listeners.dispatch("zoom-change",Ue(ue({type:"zoom-change"},this.getZoom()),{axes:t,callerId:i}))}},x8=class{constructor(i){this.axis=i;let[e=0,t=1]=i.visibleRange;this.state=new Ch({min:e,max:t}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(i,e){this.state.set(i,e)}getZoom(){return er(this.state.stateValue())}applyChanges(){let i=this.currentZoom;return this.currentZoom=this.state.stateValue(),i.min!==this.currentZoom.min||i.max!==this.currentZoom.max}},JS=class extends Ot{constructor(){super(...arguments),this.enabled=!1}};E([I(ht)],JS.prototype,"enabled",2);E([I(fi)],JS.prototype,"tabIndex",2);function qk(i,e){let{bbox:t,showFocusBox:n}=e;if(n&&i.updateFocusIndicatorRect(e.bbox),t!==void 0){let{x:r,y:s}=t.computeCenter();return{type:"keyboard",offsetX:r,offsetY:s}}}var _8=["top","right","bottom","left"],Xk=["category","grouped-category","ordinal-time","number","log","time"];function w8(i){return Xk.includes(i.type)}function E8(i){return Xk.includes(i.type)}function T8(i){return typeof i=="string"&&_8.includes(i)}var M8=class{constructor(){this.result=[],this.valid=[],this.invalid=[]}push(i,e){let{result:t,valid:n,invalid:r}=this;E8(e)&&(T8(e.position)?n.push(i):r.push(i)),t.push(i)}guessInvalidPositions(){let i=this.valid.filter(t=>w8(t)).map(t=>t.position).filter(t=>t!==void 0),e=["top","right","bottom","left"];for(let t of this.invalid){let n=e.pop();for(;i.includes(n)&&n!==void 0;)n=e.pop();if(n===void 0)break;t.position=n}return this.result}},A8=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo","stacked","grouped","stackGroup"];function P8(i,e,t){var n,r,s,o;let a=(m,g)=>{let f=[m];for(let y of A8)y in g&&g[y]!=null&&f.push(`${y}=${g[y]}`);return f.join(";")},l=new Map,c=0;for(let m of i){let g=a(m.type,m.properties);l.has(g)||l.set(g,[]),(n=l.get(g))==null||n.push([m,c++])}let u=new Map;for(let m of e){let g=a(m.type,m);u.has(g)||u.set(g,[]),(r=u.get(g))==null||r.push(m)}if(![...l.keys()].some(m=>u.has(m)))return{status:"no-overlap",oldKeys:l.keys(),newKeys:u.keys()};let h=[],p=-1;for(let[m,g]of u.entries())for(let f of g){p++;let y=l.get(m);if(y==null||y.length<1){h.push({opts:f,idx:p,status:"add"}),l.delete(m);continue}let[b,v]=y.shift(),S=(s=t?.[v])!=null?s:{},w=Ms(S,f??{}),{groupIndex:T,stackIndex:D}=(o=w?.seriesGrouping)!=null?o:{};T!=null||D!=null?h.push({opts:f,series:b,diff:w,idx:v,status:"series-grouping"}):w?h.push({opts:f,series:b,diff:w,idx:v,status:"update"}):h.push({opts:f,series:b,idx:v,status:"no-op"}),y.length===0&&l.delete(m)}for(let m of l.values())for(let[g,f]of m)h.push({series:g,idx:f,status:"remove"});return{status:"overlap",changes:h}}var D8=class extends zS{applyOptions(i){for(let e of this.moduleMap.values())e.module.optionsKey in i&&Qo(e.moduleInstance)&&e.moduleInstance.set(i[e.module.optionsKey])}*legends(){for(let{module:i,moduleInstance:e}of this.moduleMap.values())i.type==="legend"&&(yield{legendType:i.identifier,legend:e})}},Va="ag-chart-overlay",nS="ag-chart-dark-overlay",dh=class extends Ot{constructor(i,e){super(),this.className=i,this.defaultText=e,this.darkTheme=!1}getText(){var i;return(i=this.text)!=null?i:this.defaultText}getElement(i,e){var t;(t=this.element)!=null||(this.element=Ui("div",Va,{position:"absolute"})),this.element.classList.toggle(nS,this.darkTheme),this.focusBox=e;let n=this.element;if(n.style.left=`${e.x}px`,n.style.top=`${e.y}px`,n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,this.renderer){let r=this.renderer();r instanceof HTMLElement?n.replaceChildren(r):n.innerHTML=r}else{let r=Ui("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",font:"12px Verdana, sans-serif"});r.innerText=this.getText(),n.replaceChildren(r),i?.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(s){n.style.opacity=String(s)},onStop(){n.style.opacity="1"}})}return this.element}removeElement(i){if(this.element){if(i){let{element:e}=this;i.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(t){e.style.opacity=String(t)},onStop(){e.remove()}})}else this.element.remove();this.element=void 0,this.focusBox=void 0}}};E([I(Ne,{optional:!0})],dh.prototype,"text",2);E([I(Qr,{optional:!0})],dh.prototype,"renderer",2);E([I(ht)],dh.prototype,"darkTheme",2);var Rv=class extends Ot{constructor(){super(...arguments),this.loading=new dh("ag-chart-loading-overlay","Loading data..."),this.noData=new dh("ag-chart-no-data-overlay","No data to display"),this.noVisibleSeries=new dh("ag-chart-no-visible-series","No visible series")}getFocusInfo(){for(let i of[this.loading,this.noData,this.noVisibleSeries])if(i.focusBox!==void 0)return{text:i.getText(),rect:i.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement()}};E([I(Qe)],Rv.prototype,"loading",2);E([I(Qe)],Rv.prototype,"noData",2);E([I(Qe)],Rv.prototype,"noVisibleSeries",2);var k8=`
.${Va} {
    color: #181d1f;
}

.${Va}.${nS} {
    color: #ffffff;
}

.${Va}--loading {
    color: rgb(140, 140, 140); /* DEFAULT_MUTED_LABEL_COLOUR */
}

.${Va}__loading-background {
    background: white; /* DEFAULT_BACKGROUND_FILL */
}

.${Va}.${nS} .${Va}__loading-background {
    background: #192232; /* DEFAULT_DARK_BACKGROUND_FILL */
}
`;function I8(i,e){let{animationDuration:t}=gm.add,n=t*e,r=Ui("div",`${Va}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${n}ms linear 50ms both`}),s=Ui("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),o=Ui("p",{marginTop:"1em"});o.innerText=i;let a=Ui("div",`${Va}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),l=Ui("style");return l.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),r.replaceChildren(l,s,o,a),Su(k8,"chartOverlays"),r}function Nv(i,e=[0,0]){for(let t of i)typeof t=="number"&&(t<0&&(e[0]+=t),t>0&&(e[1]+=t));return e}function F8(i,e){return{id:i,matchGroupIds:[e],type:"aggregate",aggregateFunction:n=>Nv(n)}}function Zk(i,e){return{id:i,type:"aggregate",matchGroupIds:e?[e]:void 0,aggregateFunction:t=>Nv(t),groupAggregateFunction:(t,n=[0,0])=>{var r,s;return n[0]+=(r=t?.[0])!=null?r:0,n[1]+=(s=t?.[1])!=null?s:0,n}}}function Qk(i,e){return{id:i,matchGroupIds:[e],type:"aggregate",aggregateFunction:n=>th.extendDomain(n)}}function rS(i){return{id:i,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(e,t=[0,0])=>{var n,r;return t[0]+=(n=e?.[0])!=null?n:0,t[1]+=(r=e?.[1])!=null?r:0,t}}}function Jk(i,e){return{id:i,matchGroupIds:e?[e]:void 0,type:"aggregate",aggregateFunction:n=>Nv(n),groupAggregateFunction:(n,r=[0,0,-1])=>{var s,o;return r[0]+=(s=n?.[0])!=null?s:0,r[1]+=(o=n?.[1])!=null?o:0,r[2]++,r},finalFunction:(n=[0,0,0])=>{let r=n[0]+n[1];return r>=0?[0,r/n[2]]:[r/n[2],0]}}}function sS(i,e,t){let n={id:i,matchGroupIds:t?[t]:void 0,type:"aggregate",aggregateFunction:(r,s=[])=>{let o=s[1]-s[0];return e.aggregateFunction(r).map(a=>a/o)}};return e.groupAggregateFunction&&(n.groupAggregateFunction=e.groupAggregateFunction),n}function eI(i){return()=>{let e=0;return t=>qt(t)?(e+=i?Math.max(0,t):t,e):t}}function tI(){return()=>{let i=0;return e=>{if(!qt(e))return e;let t=i;return i+=e,t}}}var iI={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let i=NaN;return(e=1/0,t)=>{let n=t.keys[0],r=Math.abs(n-i);return i=n,!isNaN(r)&&r>0&&r<e?r:e}}},nI={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:i}})=>i?.slice().sort((e,t)=>{for(let n=0;n<e.length;n++){let r=e[n]-t[n];if(r!==0)return r}return 0})};function O8({normaliseTo:i,mode:e}){let t=(n,r)=>{let s=n*i/r;return s>=0?Math.min(i,s):Math.max(-i,s)};return()=>()=>(n,r)=>{let s=[0,0];for(let a of r){let l=n[a],c=l<0?0:1;e==="sum"?s[c]+=l:c===0?s[c]=Math.min(s[c],l):s[c]=Math.max(s[c],l)}let o=Math.max(Math.abs(s[0]),s[1]);for(let a of r)n[a]=t(n[a],o)}}function av(i,e,t="sum"){return{type:"group-value-processor",matchGroupIds:i,adjust:iv({normaliseTo:e,mode:t},O8)}}function L8({normaliseTo:i,zeroDomain:e,rangeMin:t,rangeMax:n}){let r=i[1]-i[0],s=(o,a,l)=>{let c=i[0]+(o-a)/l*r;return l===0?e:c>=i[1]?i[1]:c<i[0]?i[0]:c};return()=>(o,a)=>{let[l,c]=o.domain.values[a];t!=null&&(l=t),n!=null&&(c=n);let u=c-l;o.domain.values[a]=[i[0],i[1]];for(let d of o.data){let h=d.values;o.type==="ungrouped"&&(h=[h]);for(let p of h)p[a]=s(p[a],l,u)}}}function bm(i,e,t,n,r){return{type:"property-value-processor",property:i,adjust:iv({normaliseTo:e,rangeMin:n,rangeMax:r,zeroDomain:t},L8)}}function Rh(i){return{type:"processor",property:"animationValidation",calculate(e){let{keys:t,values:n}=e.defs,{input:r,data:s}=e,o=!0,a=!0,l=[];for(let u=0;u<n.length;u++)i?.includes(n[u].id)&&l.push([u,n[u]]);let c=(u,d,h)=>{var p;if(d.valueType==="category"){let g=e.domain[h][u];o&&(o=g.length===r.count);return}let m=(p=s[0])==null?void 0:p[h][u];for(let g=1;(o||a)&&g<s.length;g++){let f=s[g][h][u];a&&(a=m<=f),o&&(o=m!==f),m=f}};for(let u=0;(o||a)&&u<t.length;u++)c(u,t[u],"keys");for(let u=0;(o||a)&&u<l.length;u++){let[d,h]=l[u];c(d,h,"values")}return{uniqueKeys:o,orderedKeys:a}}}}function R8({mode:i,separateNegative:e}){return()=>()=>(t,n)=>{let r=[0,0];for(let s of n){let o=t[s],a=Fm(o)&&e?0:1;qt(o)&&(i==="normal"&&(r[a]+=o),t[s]=r[a],i==="trailing"&&(r[a]+=o))}}}function N8({mode:i,sum:e}){return()=>{let t=[],n=!0;return()=>(r,s)=>{let o=0;for(let a of s){let l=r[a],c=n&&e==="current"?0:t[a];t[a]=l;let u=e==="current"?l:c;if(!qt(l)||!qt(c)){r[a]=o;continue}i==="normal"&&(o+=u),r[a]=o,i==="trailing"&&(o+=u)}n=!1}}}function rI(i,e,t,n=!1){let r;if(e.startsWith("window")){let s=e.endsWith("-trailing")?"trailing":"normal";r=iv({mode:s,sum:t},N8)}else r=iv({mode:e,separateNegative:n},R8);return{type:"group-value-processor",matchGroupIds:[i],adjust:r}}function wu(i,e=!0){return{type:"processor",property:"diff",calculate:t=>{let n=new Map,r=new Map,s=new Map,o=new Map,a=Math.max(i.data.length,t.data.length);for(let c=0;c<a;c++){let u=i.data[c],d=t.data[c],h=u?Yl(u.keys):"",p=d?Yl(d.keys):"";if(d&&u&&h===p){nm(u.values,d.values)||s.set(p,d);continue}o.has(p)?((e||!nm(o.get(p).values,d.values))&&(s.set(p,d),n.set(p,d)),o.delete(p)):d&&r.set(p,d),r.has(h)?((e||!nm(r.get(h).values,u.values))&&(s.set(h,u),n.set(h,u)),r.delete(h)):u&&(s.delete(h),o.set(h,u))}return{changed:r.size>0||s.size>0||o.size>0,added:r,updated:s,removed:o,moved:n}}}}function Yl(i,...e){let t;return sn(i)?t=i.map(r=>ch(r)).join("___"):t=ch(i),(typeof t=="string"||typeof t=="number"||t instanceof Date)&&e.length>0&&(t+=`___${e.join("___")}`),t}var sI=(i=>(i[i.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",i[i.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",i[i.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",i[i.NEAREST_NODE=3]="NEAREST_NODE",i))(sI||{});function ex(i){return i!=null&&Iv(i)}function V8(i){return i!=null}function oI(i){switch(i){case"number":case"log":case"ordinal-time":case"time":case"color":return ex;default:return V8}}function aI(i){switch(i){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function Un(i,e,t={}){return ue({property:i,type:"key",valueType:aI(e),validation:oI(e)},t)}function mi(i,e,t={}){return ue({property:i,type:"value",valueType:aI(e),validation:oI(e)},t)}function tx(i,e={}){let t=e,{min:n=-1/0,max:r=1/0}=t,s=Xi(t,["min","max"]);return ue({type:"value",property:i,valueType:"range",validation:ex,processor:()=>o=>qt(o)?Dt(n,o,r):o},s)}function ix(i,e,t={}){let n=t,{onlyPositive:r}=n,s=Xi(n,["onlyPositive"]);return Ue(ue({},mi(i,e,s)),{processor:eI(r)})}function B8(i,e,t={}){return Ue(ue({},mi(i,e,t)),{processor:tI()})}function Gl(i,e,t="current",n,r){return[mi(i,r,n),rI(n.groupId,e,t,n.separateNegative),...n.rangeId!=null?[Qk(n.rangeId,n.groupId)]:[]]}var Um=class{constructor(i,e,{datum:t},n){this.type=i,this.event=e,this.datum=t,this.seriesId=n.id}},nx=class{constructor(i,e,t){this.series=i,this.seriesGrouping=e,this.oldGrouping=t,this.type="groupingChanged"}},Hm=(()=>{let i=class extends Mk{constructor(e){super(),this.destroyFns=[],this.seriesGrouping=void 0,this.NodeEvent=Um,this.internalId=sa(this),this.rootGroup=new ot({name:"seriesRoot",isVirtual:!0}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new zS,this._declarationOrder=-1,this.seriesListeners=new Lh;let{moduleCtx:t,pickModes:n=[1],directionKeys:r={},directionNames:s={},contentGroupVirtual:o=!0,canHaveAxes:a=!1}=e;this.ctx=t,this.directionKeys=r,this.directionNames=s,this.canHaveAxes=a,this.contentGroup=this.rootGroup.appendChild(new ot({name:`${this.internalId}-content`,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new ot({name:`${this.internalId}-highlight`,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new ot({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new ot({name:"highlightLabel",zIndex:10})),this.pickModes=n,this.labelGroup=this.rootGroup.appendChild(new ot({name:`${this.internalId}-series-labels`,zIndex:8})),this.annotationGroup=new ot({name:`${this.id}-annotation`,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}get id(){var e,t;return(t=(e=this.properties)==null?void 0:e.id)!=null?t:this.internalId}get type(){var e;return(e=this.constructor.type)!=null?e:""}get data(){var e;return(e=this._data)!=null?e:this._chartData}set visible(e){this.properties.visible=e,this.visibleChanged()}get visible(){return this.properties.visible}get hasData(){return this.data!=null&&this.data.length>0}get tooltipEnabled(){var e,t;return(t=(e=this.properties.tooltip)==null?void 0:e.enabled)!=null?t:!1}onDataChange(){this.nodeDataRefresh=!0}setOptionsData(e){this._data=e,this.onDataChange()}setChartData(e){this._chartData=e,this.data===e&&this.onDataChange()}onSeriesGroupingChange(e,t){let{internalId:n,type:r,visible:s}=this;e&&this.ctx.seriesStateManager.deregisterSeries({id:n,type:r}),t&&this.ctx.seriesStateManager.registerSeries({id:n,type:r,visible:s,seriesGrouping:t}),this.fireEvent(new nx(this,t,e))}getBandScalePadding(){return{inner:1,outer:0}}getGroupZIndexSubOrder(e,t=0){let n=0;switch(e){case"data":case"paths":break;case"labels":n+=2e4;break;case"marker":n+=1e4;break;case"highlight":t+=15e3;break;case"annotation":n+=15e3;break}return[()=>this._declarationOrder+n,t]}addListener(e,t){return this.seriesListeners.addListener(e,t)}dispatch(e,t){this.seriesListeners.dispatch(e,t)}addChartEventListeners(){}destroy(){this.destroyFns.forEach(e=>e()),this.destroyFns=[],this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(e,t){let n=this.resolveKeyDirection(e),r=t?.[n],s=[];if(!r)return s;let o=(...a)=>{for(let l of a)Array.isArray(l)?o(...l):typeof l=="object"?o(...Object.values(l)):s.push(l)};return o(...r.map(a=>this.properties[a])),s}getKeys(e){return this.getDirectionValues(e,this.directionKeys)}getKeyProperties(e){var t;return(t=this.directionKeys[this.resolveKeyDirection(e)])!=null?t:[]}getNames(e){return this.getDirectionValues(e,this.directionNames)}resolveKeyDirection(e){return e}getDomain(e){let t=this.getSeriesDomain(e),n=this.moduleMap.mapModules(r=>r.getDomain(e));return t.concat(n.flat())}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){let{dimOpacity:t=1,enabled:n=!0}=this.properties.highlightStyle.series;if(!n||t===1)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;case 2:default:return t}}getStrokeWidth(e){let{strokeWidth:t,enabled:n=!0}=this.properties.highlightStyle.series;if(!n||t===void 0)return e;switch(this.isItemIdHighlighted()){case 1:return t;case 0:case 2:return e}}isItemIdHighlighted(){var e,t;let n=(t=(e=this.ctx.highlightManager)==null?void 0:e.getActiveHighlight())==null?void 0:t.series;return n==null?0:n!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules(e=>e.getTooltipParams()).reduce((e,t)=>Object.assign(e,t),{})}pickNode(e,t){let{pickModes:n,visible:r,rootGroup:s}=this;if(!(!r||!s.visible))for(let o of n){if(t&&!t.includes(o))continue;let a;switch(o){case 0:a=this.pickNodeExactShape(e);break;case 1:case 2:a=this.pickNodeMainAxisFirst(e,o===2);break;case 3:a=this.pickNodeClosestDatum(e);break}if(a)return{pickMode:o,match:a.datum,distance:a.distance}}}pickNodeExactShape(e){let t=this.contentGroup.pickNode(e.x,e.y);if(t&&t.datum.missing!==!0)return{datum:t.datum,distance:0}}pickNodeClosestDatum(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(e,t){let n=xv(e.x,e.y,t);if(n.nearest!==void 0&&n.nearest.datum.missing!==!0)return{datum:n.nearest.datum,distance:Math.sqrt(n.distanceSquared)}}pickNodeMainAxisFirst(e,t){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(e,t){this.fireEvent(new this.NodeEvent("nodeClick",e,t,this))}fireNodeDoubleClickEvent(e,t){this.fireEvent(new this.NodeEvent("nodeDoubleClick",e,t,this))}createNodeContextMenuActionEvent(e,t){return new this.NodeEvent("nodeContextMenuAction",e,t,this)}toggleSeriesItem(e,t){this.visible=t,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:e,enabled:t})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return Ue(ue({},this.ctx),{series:this})}getLabelText(e,t,n=String){var r;return e.formatter&&(r=this.ctx.callbackCache.call(e.formatter,ue({seriesId:this.id},t)))!=null?r:n(t.value)}getMarkerStyle(e,t,n=e.getStyle()){var r,s;let o={size:(s=(r=t.datum.point)==null?void 0:r.size)!=null?s:0},a=kt(o,n);if(e.formatter){let l=this.ctx.callbackCache.call(e.formatter,Ue(ue(ue({seriesId:this.id},a),t),{datum:t.datum.datum}));return kt(l,a)}return a}updateMarkerStyle(e,t,n,r=t.getStyle(),{applyTranslation:s=!0}={}){let{point:o}=n.datum,a=this.getMarkerStyle(t,n,r),l=this.visible&&a.size>0&&o&&!isNaN(o.x)&&!isNaN(o.y);s?e.setProperties(Ue(ue({visible:l},a),{translationX:o?.x,translationY:o?.y})):e.setProperties(ue({visible:l},a)),typeof t.shape=="function"&&!e.dirtyPath&&(e.path.clear(!0),e.updatePath(),e.checkPathDirty())}getMinRects(e,t){}get nodeDataDependencies(){var e;return(e=this._nodeDataDependencies)!=null?e:{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(e){let{width:t,height:n}=e??{width:NaN,height:NaN},r=e?{seriesRectWidth:t,seriesRectHeight:n}:void 0,s=Ms(this.nodeDataDependencies,r)!=null;return s&&(this._nodeDataDependencies=r,this.markNodeDataDirty()),s}pickFocus(e){}};return i.highlightedZIndex=1e12,i})();E([Ir({changeValue:function(i,e){this.onSeriesGroupingChange(e,i)}})],Hm.prototype,"seriesGrouping",2);var fP=30,G8=class{constructor(i,e,t){this.seriesRoot=i,this.highlightRoot=e,this.annotationRoot=t,this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(i){this.expectedSeriesCount=i}requestGroup(i){var e,t,n,r;let{internalId:s,type:o,rootGroup:a,highlightGroup:l,annotationGroup:c,seriesGrouping:u}=i,{groupIndex:d=s}=u??{};if(this.series[s]!=null)throw new Error(`AG Charts - series already has an allocated layer: ${this.series[s]}`);Object.keys(this.series).length===0&&(this.mode=this.expectedSeriesCount>=fP?"aggressive-grouping":"normal"),(t=(e=this.groups)[o])!=null||(e[o]={});let h=this.lookupIdx(d),p=this.groups[o][h];return p||(p=(r=(n=this.groups[o])[h])!=null?r:n[h]={seriesIds:[],group:this.seriesRoot.appendChild(new ot({name:`${o}-content`,layer:!0,zIndex:4,zIndexSubOrder:i.getGroupZIndexSubOrder("data")})),highlight:this.highlightRoot.appendChild(new ot({name:`${o}-highlight`,zIndex:4,zIndexSubOrder:i.getGroupZIndexSubOrder("highlight")})),annotation:this.annotationRoot.appendChild(new ot({name:`${o}-annotation`,zIndex:4,zIndexSubOrder:i.getGroupZIndexSubOrder("annotation")}))}),this.series[s]={layerState:p,seriesConfig:i},p.seriesIds.push(s),p.group.appendChild(a),p.highlight.appendChild(l),p.annotation.appendChild(c),p.group}changeGroup(i){var e,t;let{internalId:n,seriesGrouping:r,type:s,rootGroup:o,highlightGroup:a,annotationGroup:l,oldGrouping:c}=i,{groupIndex:u=n}=r??{};(t=(e=this.groups[s])==null?void 0:e[u])!=null&&t.seriesIds.includes(n)||(this.series[n]!=null&&this.releaseGroup({internalId:n,seriesGrouping:c,type:s,rootGroup:o,highlightGroup:a,annotationGroup:l}),this.requestGroup(i))}releaseGroup(i){var e,t,n,r,s;let{internalId:o,seriesGrouping:a,rootGroup:l,highlightGroup:c,annotationGroup:u,type:d}=i,{groupIndex:h=o}=a??{};if(this.series[o]==null)throw new Error(`AG Charts - series doesn't have an allocated layer: ${o}`);let p=this.lookupIdx(h),m=(n=(e=this.groups[d])==null?void 0:e[p])!=null?n:(t=this.series[o])==null?void 0:t.layerState;if(m&&(m.seriesIds=m.seriesIds.filter(g=>g!==o),m.group.removeChild(l),m.highlight.removeChild(c),m.annotation.removeChild(u)),m?.seriesIds.length===0)this.seriesRoot.removeChild(m.group),this.highlightRoot.removeChild(m.highlight),this.annotationRoot.removeChild(m.annotation),delete this.groups[d][p],delete this.groups[d][o];else if(m?.seriesIds.length>0){let g=(s=this.series[(r=m?.seriesIds)==null?void 0:r[0]])==null?void 0:s.seriesConfig;m.group.zIndexSubOrder=g?.getGroupZIndexSubOrder("data"),m.highlight.zIndexSubOrder=g?.getGroupZIndexSubOrder("highlight"),m.annotation.zIndexSubOrder=g?.getGroupZIndexSubOrder("annotation")}delete this.series[o]}lookupIdx(i){return this.mode==="normal"?i:typeof i=="string"&&(i=Number(i.split("-").slice(-1)[0]),!i)?0:Math.floor(Dt(0,i/this.expectedSeriesCount,1)*fP)}destroy(){for(let i of Object.values(this.groups))for(let e of Object.values(i))this.seriesRoot.removeChild(e.group),this.highlightRoot.removeChild(e.highlight),this.annotationRoot.removeChild(e.annotation);this.groups={},this.series={}}},U8=class{constructor(i,e){this.chartLike=i,this.layoutService=e,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("start-layout",t=>this.positionPadding(t.shrinkRect)),this.layoutService.addListener("start-layout",t=>this.positionCaptions(t.shrinkRect)))}destroy(){this.destroyFns.forEach(i=>i())}positionPadding(i){let{padding:e}=this.chartLike;return i.shrink(e.left,"left"),i.shrink(e.top,"top"),i.shrink(e.right,"right"),i.shrink(e.bottom,"bottom"),{shrinkRect:i}}positionCaptions(i){var e,t;let{title:n,subtitle:r,footnote:s}=this.chartLike,o=i.clone(),a=d=>{var h;let p=i.height/10,m=(h=d.lineHeight)!=null?h:d.fontSize*Vt.defaultLineHeightRatio,g=i.width,f=Math.max(m,p);d.computeTextWrap(g,f)},l=d=>d==="left"?o.x:d==="right"?o.x+o.width:(d!=="center"&&Ie.error(`invalid textAlign value: ${d}`),o.x+o.width/2),c=(d,h)=>{let p=o.y;d.node.x=l(d.textAlign),d.node.y=p,d.node.textBaseline="top",a(d);let m=d.node.computeBBox(),g=Math.ceil(m.y-p+m.height+h);o.shrink(g,"top")},u=(d,h)=>{let p=o.y+o.height;d.node.x=l(d.textAlign),d.node.y=p,d.node.textBaseline="bottom",a(d);let m=d.node.computeBBox(),g=Math.ceil(p-m.y+h);o.shrink(g,"bottom")};if(n.node.visible=n.enabled,r.node.visible=r.enabled,s.node.visible=s.enabled,n.enabled){let{spacing:d=r.enabled?Oi.SMALL_PADDING:Oi.LARGE_PADDING}=n;c(n,d)}return r.enabled&&c(r,(e=r.spacing)!=null?e:0),s.enabled&&u(s,(t=s.spacing)!=null?t:0),{shrinkRect:o}}},H8=class{constructor(i,e,t,n){this.chart=i,this.dataService=e,this.updateService=t,this.zoomManager=n,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",()=>this.onDataSourceChange()),this.dataService.addListener("data-load",()=>this.onDataLoad()),this.dataService.addListener("data-error",()=>this.onDataError()),this.updateService.addListener("update-complete",()=>this.onUpdateComplete()),this.zoomManager.addListener("zoom-change",()=>this.onZoomChange()))}destroy(){this.destroyFns.forEach(i=>i())}onDataLoad(){this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){!this.dirtyZoom&&!this.dirtyDataSource||this.updateWindow().catch(i=>Ie.errorOnce(i))}onZoomChange(){this.dirtyZoom=!0}updateWindow(){return we(this,null,function*(){if(!this.dataService.isLazy())return;let i=this.getValidAxis(),e,t=!0;if(i){let n=this.zoomManager.getAxisZoom(i.id);e=this.getAxisWindow(i,n),t=this.shouldRefresh(i,n)}this.dirtyZoom=!1,this.dirtyDataSource=!1,t&&this.dataService.load({windowStart:e?.min,windowEnd:e?.max})})}getValidAxis(){return this.chart.axes.find(i=>i.type==="time")}shouldRefresh(i,e){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;let t=this.lastAxisZooms.get(i.id);return t&&e.min===t.min&&e.max===t.max?!1:(this.lastAxisZooms.set(i.id,e),!0)}getAxisWindow(i,e){var t,n;let r=(n=(t=i.scale).getDomain)==null?void 0:n.call(t);if(!e||!r||r.length===0||isNaN(Number(r[0])))return;let s=Number(r[1])-Number(r[0]),o=new Date(Number(r[0])+s*e.min),a=new Date(Number(r[0])+s*e.max);return{min:o,max:a}}},z8=class{constructor(i,e,t,n,r){this.chartLike=i,this.overlays=e,this.dataService=t,this.layoutService=n,this.animationManager=r,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",s=>this.onLayoutComplete(s)))}destroy(){this.destroyFns.forEach(i=>i())}onLayoutComplete({series:{rect:i}}){let e=this.dataService.isLoading(),t=this.chartLike.series.some(r=>r.hasData),n=this.chartLike.series.some(r=>r.visible);this.toggleOverlay(this.overlays.loading,i,e),this.toggleOverlay(this.overlays.noData,i,!e&&!t),this.toggleOverlay(this.overlays.noVisibleSeries,i,t&&!n)}toggleOverlay(i,e,t){if(t){let n=i.getElement(this.animationManager,e);this.chartLike.element.append(n)}else i.removeElement(this.animationManager)}},Qs=Mi.create(!0,"opts"),rx=class extends Ot{constructor(){super(...arguments),this.padding=new Jl(0)}};E([I(ht,{optional:!0})],rx.prototype,"clip",2);E([I(Qe)],rx.prototype,"padding",2);var nr=(()=>{let i=class oS extends Mk{constructor(t,n){var r,s,o;super(),this.id=sa(this),this.seriesRoot=new ot({name:`${this.id}-series-root`}),this.highlightRoot=new ot({name:`${this.id}-highlight-root`,layer:!0,zIndex:5,nonEmptyChildDerivedZIndex:!0}),this.annotationRoot=new ot({name:`${this.id}-annotation-root`,layer:!0,zIndex:10}),this.debug=Mi.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this.padding=new Jl(20),this.seriesArea=new rx,this.title=new Oi,this.subtitle=new Oi,this.footnote=new Oi,this.keyboard=new JS,this.mode="standalone",this.destroyed=!1,this._skipSync=!1,this._destroyFns=[],this.chartAnimationPhase="initial",this.modulesManager=new D8,this.zoomManager=new Yk,this.processors=[],this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateSkipAnimations=!1,this.performUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new Z7,this.updateRequestors={},this.performUpdateTrigger=J7(f=>we(this,[f],function*({count:y}){this.destroyed||this.updateMutex.acquire(()=>we(this,null,function*(){try{yield this.performUpdate(y)}catch(b){Ie.error("update error",b)}})).catch(b=>Ie.errorOnce(b))})),this._performUpdateSplits={},this.axes=[],this.series=[],this.focus={hasFocus:!1,series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.pointerScheduler=Q7(()=>{if(this.lastInteractionEvent){if(this.performUpdateType<=4){this.pointerScheduler.schedule();return}this.handlePointer(this.lastInteractionEvent,!1),this.lastInteractionEvent=void 0}}),this.onSeriesNodeClick=f=>{let y=Ue(ue({},f),{type:"seriesNodeClick"});Object.defineProperty(y,"series",{enumerable:!1,get:()=>f.series}),this.fireEvent(y)},this.onSeriesNodeDoubleClick=f=>{let y=Ue(ue({},f),{type:"seriesNodeDoubleClick"});this.fireEvent(y)},this.seriesGroupingChanged=f=>{if(!(f instanceof nx))return;let{series:y,seriesGrouping:b,oldGrouping:v}=f;y.rootGroup.parent!=null&&this.seriesLayerManager.changeGroup({internalId:y.internalId,type:y.type,rootGroup:y.rootGroup,highlightGroup:y.highlightGroup,annotationGroup:y.annotationGroup,getGroupZIndexSubOrder:S=>y.getGroupZIndexSubOrder(S),seriesGrouping:b,oldGrouping:v})},this.dataProcessListeners=new Set,this.chartOptions=t;let a=n?.scene,l=(r=n?.element)!=null?r:Ui("div","ag-chart-wrapper",{position:"relative",userSelect:"none"}),c=n?.container;this.element=l;let u=new ot({name:"root"});u.visible=!1,u.append(this.seriesRoot),u.append(this.highlightRoot),u.append(this.annotationRoot),this.axisGridGroup=new ot({name:"Axes-Grids",layer:!0,zIndex:1}),u.appendChild(this.axisGridGroup),this.axisGroup=new ot({name:"Axes",layer:!0,zIndex:2}),u.appendChild(this.axisGroup),this.sizeMonitor=new e8,this.sizeMonitor.observe(this.element,f=>this.rawResize(f));let{overrideDevicePixelRatio:d}=t.specialOverrides;a??(a=new Tk({pixelRatio:d,canvasPosition:"absolute"})),a.setRoot(u).setContainer(l),this.autoSize=!0,this.tooltip=new po,this.seriesLayerManager=new G8(this.seriesRoot,this.highlightRoot,this.annotationRoot);let h=this.ctx=new g8(this,{scene:a,syncManager:new S8(this),element:l,updateCallback:(f=0,y)=>this.update(f,y),updateMutex:this.updateMutex});this.overlays=new Rv,(o=(s=this.overlays.loading).renderer)!=null||(s.renderer=()=>I8(this.overlays.loading.getText(),h.animationManager.defaultDuration)),this.processors=[new U8(this,h.layoutService),new H8(this,h.dataService,h.updateService,h.zoomManager),new z8(this,this.overlays,h.dataService,h.layoutService,h.animationManager)],this.highlight=new zk,this.container=c;let{All:p}=rv,m=this.getModuleContext(),g=h.regionManager.addRegion("series",this.seriesRoot,this.axisGroup);h.regionManager.addRegion("root",u),this._destroyFns.push(h.dataService.addListener("data-load",f=>{this.data=f.data}),h.scene.attachNode(this.title.node),h.scene.attachNode(this.subtitle.node),h.scene.attachNode(this.footnote.node),this.title.registerInteraction(m,"title"),this.subtitle.registerInteraction(m,"subtitle"),this.footnote.registerInteraction(m,"footnote"),h.interactionManager.addListener("click",f=>this.onClick(f)),h.interactionManager.addListener("dblclick",f=>this.onDoubleClick(f)),g.addListener("hover",f=>this.onMouseMove(f)),g.addListener("leave",f=>this.onLeave(f)),g.addListener("blur",()=>this.onBlur()),g.addListener("tab",f=>this.onTab(f)),g.addListener("nav-vert",f=>this.onNavVert(f)),g.addListener("nav-hori",f=>this.onNavHori(f)),g.addListener("submit",f=>this.onSubmit(f)),h.keyNavManager.addListener("browserfocus",f=>this.onBrowserFocus(f)),h.interactionManager.addListener("page-left",()=>this.destroy()),h.interactionManager.addListener("contextmenu",f=>this.onContextMenu(f),p),h.animationManager.addListener("animation-start",()=>this.onAnimationStart()),h.animationManager.addListener("animation-frame",()=>{this.update(6)}),h.highlightManager.addListener("highlight-change",f=>this.changeHighlightDatum(f)),h.zoomManager.addListener("zoom-pan-start",()=>this.resetPointer()),h.zoomManager.addListener("zoom-change",()=>{this.resetPointer(),this.series.map(y=>{var b;return(b=y.animationState)==null?void 0:b.transition("updateData")});let f=this.chartAnimationPhase!=="initial";this.update(3,{forceNodeDataRefresh:!0,skipAnimations:f})}))}static getInstance(t){return oS.chartsInstances.get(t)}get canvasElement(){return this.ctx.scene.canvas.element}getCanvasDataURL(t){return this.ctx.scene.getDataURL(t)}onAutoSizeChange(t){let{style:n}=this.element;if(t){if(n.display="block",n.width="100%",n.height="100%",!this._lastAutoSize)return;this.resize(void 0,void 0,"autoSize option")}else n.display="inline-block",n.width="auto",n.height="auto"}download(t,n){this.ctx.scene.download(t,n)}getOptions(){var t;return(t=this.queuedUserOptions.at(-1))!=null?t:this.userOptions}getModuleContext(){return this.ctx}getAriaLabel(){var t;let n=[this.title,this.subtitle,this.footnote].filter(s=>s.enabled&&s.text).map(s=>s.text).join(". ");return`chart, ${(t=this.series.length)!=null?t:0} series, ${n}`}resetAnimations(){this.chartAnimationPhase="initial";for(let t of this.series)t.resetAnimation(this.chartAnimationPhase);for(let t of this.axes)t.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}destroy(t){if(this.destroyed)return;let n=t?.keepTransferableResources,r;return this.performUpdateType=7,this._destroyFns.forEach(s=>s()),this.processors.forEach(s=>s.destroy()),this.tooltip.destroy(),this.overlays.destroy(),this.sizeMonitor.unobserve(this.element),this.modulesManager.destroy(),n?(this.ctx.scene.strip(),r={container:this.container,scene:this.ctx.scene,element:this.element}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach(s=>s.destroy()),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.zoomManager.destroy(),this.destroyed=!0,Object.freeze(this),r}resetPointer(t=!1){t||this.ctx.tooltipManager.removeTooltip(this.id),this.ctx.highlightManager.updateHighlight(this.id),this.lastInteractionEvent=void 0}requestFactoryUpdate(t){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(()=>we(this,null,function*(){this.destroyed||(yield t(this),!this.destroyed&&this._pendingFactoryUpdatesCount--)})).catch(n=>Ie.errorOnce(n)))}update(t=0,n){var r,s;let{forceNodeDataRefresh:o=!1,skipAnimations:a,seriesToUpdate:l=this.series,newAnimationBatch:c}=n??{};o&&this.series.forEach(u=>u.markNodeDataDirty());for(let u of l)this.seriesToUpdate.add(u);if(a&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),c&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this._skipSync=(r=n?.skipSync)!=null?r:!1,this.debug.check()){let u=(s=new Error().stack)!=null?s:"<unknown>";u=u.replace(/\([^)]*/g,""),this.updateRequestors[u]=t}t<this.performUpdateType&&(this.performUpdateType=t,this.performUpdateTrigger.schedule(n?.backOffMs))}performUpdate(t){return we(this,null,function*(){var n;let{performUpdateType:r,extraDebugStats:s,_performUpdateSplits:o,ctx:a}=this,l=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),this.updateShortcutCount===0&&r<6&&(a.animationManager.startBatch(this._performUpdateSkipAnimations),a.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.debug("Chart.performUpdate() - start",om[r]);let c=performance.now();(n=o.start)!=null||(o.start=c);let u=p=>{var m;(m=o[p])!=null||(o[p]=0),o[p]+=performance.now()-c,c=performance.now()},d=!1;switch(r){case 0:this.updateDOM();case 1:yield this.updateData(),u("\u2B07\uFE0F");case 2:yield this.processData(),this.resetPointer(!0),u("\u{1F3ED}");case 3:if(this.checkUpdateShortcut(3))break;if(!this.checkFirstAutoSize(l)){d=!0;break}yield this.processLayout(),u("\u2316");case 4:if(this.checkUpdateShortcut(4))break;let{seriesRect:p}=this;yield Promise.all(l.map(g=>g.update({seriesRect:p}))),u("\u{1F914}");case 5:if(this.checkUpdateShortcut(5))break;let m=a.tooltipManager.getTooltipMeta(this.id);r<=4&&m?.lastPointerEvent!=null&&this.handlePointer(m.lastPointerEvent,!0),u("\u2196");case 6:if(this.checkUpdateShortcut(6))break;a.animationManager.endBatch(),s.updateShortcutCount=this.updateShortcutCount,yield a.scene.render({debugSplitTimes:o,extraDebugStats:s}),this.ctx.regionManager.updateFocusWrapperRect(),this.extraDebugStats={};for(let g in o)delete o[g];case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,a.animationManager.endBatch()}d||a.updateService.dispatchUpdateComplete(this.getMinRects());let h=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((h-o.start)*100)/100,count:t,performUpdateType:om[r]})})}updateThemeClassName(){let{element:t,processedOptions:{theme:n}}=this,r="ag-charts-theme-",s=[`${r}default`,`${r}default-dark`],o=s[0],a=!1;typeof n=="string"?(o=n.replace("ag-",r),a=n.includes("-dark")):typeof n?.baseTheme=="string"&&(o=n.baseTheme.replace("ag-",r),a=n.baseTheme.includes("-dark")),s.includes(o)||(o=a?s[1]:s[0]),t.classList.forEach(l=>{l.startsWith(r)&&l!==o&&t.classList.remove(l)}),t.classList.add(o)}updateDOM(){this.updateThemeClassName();let{enabled:t,tabIndex:n}=this.keyboard;this.element.tabIndex=t?n??0:-1,fh(this.ctx.scene.canvas.element,"role","figure"),fh(this.ctx.scene.canvas.element,"aria-label",this.getAriaLabel())}checkUpdateShortcut(t){return this.updateShortcutCount>3?(Ie.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t?(this.updateShortcutCount++,!0):!1}checkFirstAutoSize(t){if(this.autoSize&&!this._lastAutoSize){let n=this._performUpdateNoRenderCount++,r=mt(n+1,2)*40;if(n<8)return this.update(3,{seriesToUpdate:t,backOffMs:r}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",r),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}onAxisChange(t,n=[]){for(let r of n)t.includes(r)||(r.detachAxis(this.axisGroup,this.axisGridGroup),r.destroy());for(let r of t)n?.includes(r)||r.attachAxis(this.axisGroup,this.axisGridGroup)}onSeriesChange(t,n){var r,s;let o=(r=n?.filter(a=>!t.includes(a)))!=null?r:[];this.destroySeries(o),(s=this.seriesLayerManager)==null||s.setSeriesCount(t.length);for(let a of t){if(n?.includes(a))continue;a.rootGroup.parent==null&&this.seriesLayerManager.requestGroup(a);let l=this;a.chart={get mode(){return l.mode},get isMiniChart(){return!1},get seriesRect(){return l.seriesRect},placeLabels(){return l.placeLabels()}},a.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(a),a.addChartEventListeners()}}destroySeries(t){t?.forEach(n=>{n.removeEventListener("nodeClick",this.onSeriesNodeClick),n.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),n.removeEventListener("groupingChanged",this.seriesGroupingChanged),n.destroy(),this.seriesLayerManager.releaseGroup(n),n.chart=void 0})}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.addEventListener("groupingChanged",this.seriesGroupingChanged)}updateAllSeriesListeners(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(n=>n.axes[t.direction]===t)})}assignAxesToSeries(){let t=MS(this.axes,n=>n.direction);this.series.forEach(n=>{n.directions.forEach(r=>{let s=t[r];if(!s){Ie.warnOnce(`no available axis for direction [${r}]; check series and axes configuration.`);return}let o=n.getKeys(r),a=s.find(l=>!l.keys.length||o.some(c=>l.keys.includes(c)));if(!a){Ie.warnOnce(`no matching axis for direction [${r}] and keys [${o}]; check series and axes configuration.`);return}n.axes[r]=a})})}rawResize({width:t,height:n}){var r;if(!this.autoSize||(t=Math.floor(t),n=Math.floor(n),t===0&&n===0))return;let[s=0,o=0]=(r=this._lastAutoSize)!=null?r:[];s===t&&o===n||(this._lastAutoSize=[t,n],this.resize(void 0,void 0,"SizeMonitor"))}resize(t,n,r){var s,o,a,l;let{scene:c,animationManager:u}=this.ctx;if(t??(t=(o=this.width)!=null?o:this.autoSize?(s=this._lastAutoSize)==null?void 0:s[0]:c.canvas.width),n??(n=(l=this.height)!=null?l:this.autoSize?(a=this._lastAutoSize)==null?void 0:a[1]:c.canvas.height),this.debug(`Chart.resize() from ${r}`,{width:t,height:n,stack:new Error().stack}),!(!t||!n||!qt(t)||!qt(n))&&c.resize(t,n)){this.resetPointer(),u.reset();let d=!0;this.autoSize&&this._firstAutoSize&&(d=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:d})}}updateData(){return we(this,null,function*(){this.series.forEach(n=>n.setChartData(this.data));let t=this.modulesManager.mapModules(n=>{var r;return(r=n.updateData)==null?void 0:r.call(n,{data:this.data})});yield Promise.all(t)})}processData(){return we(this,null,function*(){if(this.series.some(s=>s.canHaveAxes)){this.assignAxesToSeries();let s=this.modulesManager.getModule("sync");s?.enabled?s.syncAxes(this._skipSync):this.assignSeriesToAxes()}let t=new jk(this.mode),n=this.series.map(s=>s.processData(t)),r=this.modulesManager.mapModules(s=>{var o;return(o=s.processData)==null?void 0:o.call(s,{dataController:t})});t.execute(),yield Promise.all([...n,...r]);for(let{legendType:s,legend:o}of this.modulesManager.legends())o.data=this.getLegendData(s,this.mode!=="integrated");this.dataProcessListeners.forEach(s=>s()),this.dataProcessListeners.clear()})}placeLabels(){let t=[],n=[];for(let u of this.series){if(!u.visible)continue;let d=u.getLabelData();x7(d?.[0])&&(n.push(d),t.push(u))}let{seriesRect:r}=this,{top:s,right:o,bottom:a,left:l}=this.seriesArea.padding,c=r&&n.length>0?w7(n,{x:-l,y:-s,width:r.width+l+o,height:r.height+s+a}):[];return new Map(c.map((u,d)=>[t[d],u]))}getLegendData(t,n){var r,s,o;let a=this.series.filter(c=>c.properties.showInLegend).flatMap(c=>c.getLegendData(t));if(n&&(c=>c.every(u=>u.legendType==="category"))(a)){let c={},u=new Map(this.series.map(d=>[d.id,d.type]));for(let{seriesId:d,marker:h,label:p}of a){if(h.fill==null)continue;let m=u.get(d),g=(r=c[m])!=null?r:c[m]={};(o=g[s=p.text])!=null||(g[s]=h.fill),g[p.text]!==h.fill&&Ie.warnOnce(`legend item '${p.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}return a}processLayout(){return we(this,null,function*(){var t;let n=this.animationRect;yield this.performLayout(),n&&!((t=this.animationRect)!=null&&t.equals(n))&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)})}performLayout(){return we(this,null,function*(){let{width:t,height:n}=this.ctx.scene,r={shrinkRect:new nt(0,0,t,n)};r=this.ctx.layoutService.dispatchPerformLayout("start-layout",r),r=this.ctx.layoutService.dispatchPerformLayout("before-series",r);let s=this.modulesManager.mapModules(o=>we(this,null,function*(){o.performLayout!=null&&(r=yield o.performLayout(r))}));return yield Promise.all(s),r.shrinkRect})}pickSeriesNode(t,n,r){var s,o;let a=performance.now(),l=n?[0]:void 0,c=[...this.series].reverse(),u;for(let d of c){if(!d.visible||!d.rootGroup.visible)continue;let{match:h,distance:p}=(s=d.pickNode(t,l))!=null?s:{};if(!(!h||p==null)&&((!u||u.distance>p)&&p<=(r??1/0)&&(u={series:d,distance:p,datum:h}),p===0))break}return this.extraDebugStats.pickSeriesNode=Math.round(((o=this.extraDebugStats.pickSeriesNode)!=null?o:0)+(performance.now()-a)),u}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(6)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||(this.resetPointer(),this.update(6),this.ctx.cursorManager.updateCursor("chart"))}onBrowserFocus(t){t.delta>0?(this.focus.datum=void 0,this.focus.series=void 0,this.focus.datumIndex=0,this.focus.seriesIndex=0):(this.focus.datum=void 0,this.focus.series=void 0,this.focus.datumIndex=1/0,this.focus.seriesIndex=1/0)}onAnimationStart(){this.focus.hasFocus&&this.onBlur()}onBlur(){this.ctx.regionManager.updateFocusIndicatorRect(void 0),this.resetPointer(),this.focus.hasFocus=!1}onTab(t){this.handleFocus(),t.consume(),this.focus.hasFocus=!0}onNavVert(t){this.focus.seriesIndex+=t.delta,this.handleFocus(),t.consume()}onNavHori(t){this.focus.datumIndex+=t.delta,this.handleFocus(t.delta),t.consume()}onSubmit(t){let{series:n,datum:r}=this.focus,s=t.sourceEvent.sourceEvent;n!==void 0&&r!==void 0?n.fireNodeClickEvent(s,r):this.fireEvent({type:"click",event:s})}onContextMenu(t){this.ctx.tooltipManager.removeTooltip(this.id);let{Default:n,ContextMenu:r}=rv;this.ctx.interactionManager.getState()&(n|r)&&this.checkSeriesNodeRange(t,()=>{this.ctx.highlightManager.updateHighlight(this.id)})}handleFocus(t){this.focus.hasFocus=!0;let n=this.overlays.getFocusInfo();n==null?this.handleSeriesFocus(t??0):(this.ctx.regionManager.updateFocusIndicatorRect(n.rect),this.ctx.ariaAnnouncementService.announceValue(n.text))}handleSeriesFocus(t){let{series:n,seriesRect:r,focus:s}=this,o=n.filter(d=>d.visible);if(o.length===0)return;s.seriesIndex=Dt(0,s.seriesIndex,o.length-1),s.series=o[s.seriesIndex];let a=s.series.pickFocus({datumIndex:s.datumIndex,datumIndexDelta:t,seriesRect:r});if(a===void 0)return;let{datum:l,datumIndex:c}=a;s.datumIndex=c,s.datum=l;let u=qk(this.ctx.regionManager,a);if(u!==void 0){this.lastInteractionEvent=u;let d=s.series.getTooltipHtml(l),h=ov.makeTooltipMeta(this.lastInteractionEvent,l);this.ctx.highlightManager.updateHighlight(this.id,l),this.ctx.tooltipManager.updateTooltip(this.id,h,d),this.ctx.ariaAnnouncementService.announceValue(d.ariaLabel)}}static isHoverEvent(t){return t!==void 0&&t.type==="hover"}handlePointer(t,n){if(this.ctx.interactionManager.getState()!==16||!oS.isHoverEvent(t))return;let{lastPick:r,hoverRect:s}=this,{offsetX:o,offsetY:a}=t,l=(c=!1)=>{r&&this.resetPointer(c)};if(n?this.ctx.animationManager.isActive():!s?.containsPoint(o,a)){l();return}this.handlePointerTooltip(t,l),this.handlePointerNode(t)}handlePointerTooltip(t,n){let{lastPick:r,tooltip:s}=this,{range:o}=s,{offsetX:a,offsetY:l}=t,c;qt(o)&&(c=o);let u=this.pickSeriesNode({x:a,y:l},o==="exact",c);if(!u){this.ctx.tooltipManager.removeTooltip(this.id),this.highlight.range==="tooltip"&&n(!0);return}let d=this.highlight.range==="node"||!r||r!==u.datum,h;d&&(h=u.series.getTooltipHtml(u.datum),this.highlight.range==="tooltip"&&this.ctx.highlightManager.updateHighlight(this.id,u.datum));let p=c!=null,m=this.tooltip.enabled&&u.series.tooltipEnabled,g=o==="exact"&&u.distance===0,y=m&&(o==="nearest"||p||g)&&(!d||h!==void 0),b=ov.makeTooltipMeta(t,u.datum);y&&this.ctx.tooltipManager.updateTooltip(this.id,b,h)}handlePointerNode(t){this.checkSeriesNodeRange(t,(r,s)=>{(r.hasEventListener("nodeClick")||r.hasEventListener("nodeDoubleClick"))&&this.ctx.cursorManager.updateCursor("chart","pointer"),this.highlight.range==="node"&&this.ctx.highlightManager.updateHighlight(this.id,s)})||(this.ctx.cursorManager.updateCursor("chart"),this.highlight.range==="node"&&this.ctx.highlightManager.updateHighlight(this.id))}onClick(t){if(this.checkSeriesNodeClick(t)){this.update(4);return}this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){if(this.checkSeriesNodeDoubleClick(t)){this.update(4);return}this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,(n,r)=>n.fireNodeClickEvent(t.sourceEvent,r))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,(n,r)=>n.fireNodeDoubleClickEvent(t.sourceEvent,r))}checkSeriesNodeRange(t,n){var r;let s=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),o=s?.datum,a=o?.series.properties.nodeClickRange,l;qt(a)&&(l=a);let c=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!0);if(c?this.ctx.highlightManager.updatePicked(this.id,c.datum):this.ctx.highlightManager.updatePicked(this.id),o&&a==="nearest")return n(o.series,o),!0;if(a!=="exact"&&(c=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1,l)),!c)return!1;let u=l!=null,d=a==="exact"&&c.distance===0;return(u||d)&&(t.pointerHistory===void 0||((r=t.pointerHistory)==null?void 0:r.every(p=>{let m={x:p.offsetX,y:p.offsetY},g=this.pickSeriesNode(m,!1,l);return g?.datum===c?.datum})))?(n(c.series,c.datum),!0):!1}changeHighlightDatum(t){var n,r;let s=new Set,{series:o=void 0,datum:a}=(n=t.currentHighlight)!=null?n:{},{series:l=void 0,datum:c}=(r=t.previousHighlight)!=null?r:{};l&&s.add(l),o&&s.add(o),l?.properties.cursor&&c&&this.ctx.cursorManager.updateCursor(l.id),o?.properties.cursor&&a&&this.ctx.cursorManager.updateCursor(o.id,o.properties.cursor),this.lastPick=t.currentHighlight,o==null||l==null?this.update(4):this.update(4,{seriesToUpdate:s})}waitForUpdate(t=1e4,n=!1){return we(this,null,function*(){let r=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());this.performUpdateType!==7;){if(performance.now()-r>t){let s=`Chart.waitForUpdate() timeout of ${t} reached - first chart update taking too long.`;if(n)throw new Error(s);Ie.warnOnce(s)}yield X7(50)}yield this.updateMutex.waitForClearAcquireQueue()})}waitForDataProcess(t){return new Promise(n=>{this.dataProcessListeners.add(n),Yr(t)&&setTimeout(()=>{this.dataProcessListeners.has(n)&&(this.dataProcessListeners.delete(n),n())},t)})}getMinRects(){let{width:t,height:n}=this.ctx.scene,r=this.series.map(d=>d.getMinRects(t,n)).filter(X0);if(r.length===0)return;let s=0,o=0,a=0,l=0;for(let{minRect:d,minVisibleRect:h}of r)s=Math.max(s,d.width),o=Math.max(o,d.height),a=Math.max(a,h.width),l=Math.max(l,h.height);let c=new nt(0,0,s,o),u=c.clone();return a>0&&l>0&&(u=new nt(0,0,a,l)),{minRect:c,minVisibleRect:u}}filterMiniChartSeries(t){return t?.filter(n=>n.showInMiniChart!==!1)}applyOptions(t){var n,r,s,o,a;let l=this.processedOptions,c=t.diffOptions(l),u=t.userOptions;if(c==null)return;Qs("AgChartV2.updateDelta() - applying delta",c);let d=kt(c,l),h=this.applyModules(d),p=["type","data","series","listeners","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","axes","topology"];c.listeners&&this.registerListeners(this,c.listeners),Ga(this,c,{skip:p});let m=!1,g="no-op";(n=c.series)!=null&&n.length&&(g=this.applySeries(this,c.series,l?.series),m=!0),g==="replaced"&&this.resetAnimations(),this.applyAxes(this,d,l,g)&&(m=!0),c.data&&(this.data=c.data),(r=c.legend)!=null&&r.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,c.legend.listeners),c.listeners&&this.updateAllSeriesListeners(),this.chartOptions=t,this.processedOptions=d,this.userOptions=kt(u,this.userOptions);let f=this.modulesManager.getModule("navigator"),y=this.modulesManager.getModule("zoom");!f?.enabled&&!y?.enabled&&this.ctx.zoomManager.updateZoom("chart");let b=f?.miniChart,v=(a=(o=(s=d.navigator)==null?void 0:s.miniChart)==null?void 0:o.series)!=null?a:d.series;b?.enabled===!0&&v!=null?this.applyMiniChartOptions(b,v,d,l):b?.enabled===!1&&(b.series=[],b.axes=[]),Su(q7,"chart"),this.ctx.annotationManager.setAnnotationStyles(t.annotationThemes),m||(m=this.shouldForceNodeDataRefresh(c,g));let w=m||h?0:3;this.maybeResetAnimations(g),Qs("AgChartV2.applyChartOptions() - update type",om[w],{seriesStatus:g,forceNodeDataRefresh:m}),this.update(w,{forceNodeDataRefresh:m,newAnimationBatch:!0})}maybeResetAnimations(t){if(this.mode==="standalone")switch(t){case"series-grouping-change":case"replaced":this.resetAnimations();break;default:}}shouldForceNodeDataRefresh(t,n){let r=!!t.data||n==="data-change"||n==="replaced",s=bS.getKeys(),o=Object.values(s).some(l=>t[l]!=null),a=t.title!=null&&t.subtitle!=null;return r||o||a}applyMiniChartOptions(t,n,r,s){var o,a,l,c,u;let d=(l=(a=(o=s?.navigator)==null?void 0:o.miniChart)==null?void 0:a.series)!=null?l:s?.series,h=this.applySeries(t,this.filterMiniChartSeries(n),this.filterMiniChartSeries(d));this.applyAxes(t,r,s,h,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);let p=t.axes,m=p.find(g=>g.direction==="x");for(let g of p)g.gridLine.enabled=!1,g.label.enabled=g===m,g.tick.enabled=!1,g.interactionEnabled=!1;if(m!=null){let g=(c=r.navigator)==null?void 0:c.miniChart,f=g?.label,y=(u=g?.label)==null?void 0:u.interval;m.line.enabled=!1,m.label.set(Vb(f,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),m.tick.set(Vb(y,["enabled","width","size","color","interval","step"]));let b=y?.step;b!=null&&(m.tick.interval=b)}}applyModules(t){var n;let{type:r}=this.constructor,s=!1;for(let o of zl.byType("root","legend")){let l=t[o.optionsKey]!=null&&o.chartTypes.includes(r);l!==this.modulesManager.isEnabled(o)&&(l?(this.modulesManager.addModule(o,c=>new c.instanceConstructor(this.getModuleContext())),o.type==="legend"&&((n=this.modulesManager.getModule(o))==null||n.attachLegend(this.ctx.scene)),this[o.optionsKey]=this.modulesManager.getModule(o)):(this.modulesManager.removeModule(o),delete this[o.optionsKey]),s=!0)}return s}applySeries(t,n,r){var s;if(!n)return"no-change";let o=P8(t.series,n,r);if(o.status==="no-overlap")return Qs(`AgChartV2.applySeries() - creating new series instances, status: ${o.status}`,o),t.series=n.map(d=>this.createSeries(d)),"replaced";Qs("AgChartV2.applySeries() - matchResult",o);let a=[],l=!1,c=!1,u=!1;for(let d of o.changes)switch(c||(c=d.status==="series-grouping"),l||(l=((s=d.diff)==null?void 0:s.data)!=null),u||(u=d.status!=="no-op"),d.status){case"add":let h=this.createSeries(d.opts);a.push(h),Qs("AgChartV2.applySeries() - created new series",h);break;case"remove":Qs(`AgChartV2.applySeries() - removing series at previous idx ${d.idx}`,d.series);break;case"no-op":a.push(d.series),Qs(`AgChartV2.applySeries() - no change to series at previous idx ${d.idx}`,d.series);break;case"series-grouping":case"update":default:let{series:p,diff:m,idx:g}=d;Qs(`AgChartV2.applySeries() - applying series diff previous idx ${g}`,m,p),this.applySeriesValues(p,m),p.markNodeDataDirty(),a.push(p)}for(let d=0;d<a.length;d++)a[d]._declarationOrder=d;return Qs("AgChartV2.applySeries() - final series instances",a),t.series=a,c?"series-grouping-change":l?"data-change":u?"updated":"no-op"}applyAxes(t,n,r,s,o=[]){if(!("axes"in n)||!n.axes)return!1;o=["axes[].type",...o];let{axes:a}=n;return!(s==="replaced")&&t.axes.length===a.length&&t.axes.every((u,d)=>u.type===a[d].type)&&du(r)?(t.axes.forEach((u,d)=>{var h,p;let m=(p=(h=r.axes)==null?void 0:h[d])!=null?p:{},g=Ms(m,a[d]);Qs(`AgChartV2.applyAxes() - applying axis diff idx ${d}`,g);let f=`axes[${d}]`;Ga(u,g,Ue(ue({},$b),{path:f,skip:o}))}),!0):(Qs(`AgChartV2.applyAxes() - creating new axes instances; seriesStatus: ${s}`),t.axes=this.createAxis(a,o),!0)}createSeries(t){let n=Kr.create(t.type,this.getModuleContext());return this.applySeriesOptionModules(n,t),this.applySeriesValues(n,t),n}applySeriesOptionModules(t,n){let r=t.createModuleContext(),s=t.getModuleMap();for(let o of zl.byType("series-option"))o.optionsKey in n&&o.seriesTypes.includes(t.type)&&s.addModule(o,a=>new a.instanceConstructor(r))}applySeriesValues(t,n){let r=t.getModuleMap(),s=n,{type:o,data:a,listeners:l,seriesGrouping:c,showInMiniChart:u}=s,d=Xi(s,["type","data","listeners","seriesGrouping","showInMiniChart"]);for(let h of xh)if(h.type==="series-option"&&h.optionsKey in d){let p=r.getModule(h.optionsKey),m=d[h.optionsKey];delete d[h.optionsKey],p.properties.set(m)}t.properties.set(d),"data"in n&&t.setOptionsData(a),l&&this.registerListeners(t,l),"seriesGrouping"in n&&(c==null?t.seriesGrouping=void 0:t.seriesGrouping=ue(ue({},t.seriesGrouping),c))}createAxis(t,n){let r=new M8,s=this.getModuleContext();for(let o=0;o<t.length;o++){let a=t[o],l=Kl.create(a.type,s);this.applyAxisModules(l,a),Ga(l,a,Ue(ue({},$b),{path:`axes[${o}]`,skip:n})),r.push(l,a)}return r.guessInvalidPositions()}applyAxisModules(t,n){let r=t.createModuleContext(),s=t.getModuleMap();for(let o of zl.byType("axis-option")){let a=n[o.optionsKey]!=null;a!==s.isEnabled(o)&&(a?(s.addModule(o,l=>new l.instanceConstructor(r)),t[o.optionsKey]=s.getModule(o)):(s.removeModule(o),delete t[o.optionsKey]))}}registerListeners(t,n){t.clearEventListeners();for(let[r,s]of Object.entries(n))bu(s)&&t.addEventListener(r,s)}};return i.chartsInstances=new WeakMap,i})();E([Ir({newValue(i){this.destroyed||(i.setAttribute("data-ag-charts",""),i.appendChild(this.element),nr.chartsInstances.set(i,this))},oldValue(i){i.removeAttribute("data-ag-charts"),i.removeChild(this.element),nr.chartsInstances.delete(i)}})],nr.prototype,"container",2);E([Ir({newValue(i){this.resize(i,void 0,"width option")}})],nr.prototype,"width",2);E([Ir({newValue(i){this.resize(void 0,i,"height option")}})],nr.prototype,"height",2);E([Ir({newValue(i){this.onAutoSizeChange(i)}}),I(ht)],nr.prototype,"autoSize",2);E([I(Qe)],nr.prototype,"padding",2);E([I(Qe)],nr.prototype,"seriesArea",2);E([I(Qe)],nr.prototype,"title",2);E([I(Qe)],nr.prototype,"subtitle",2);E([I(Qe)],nr.prototype,"footnote",2);E([I(Qe)],nr.prototype,"keyboard",2);E([I(Li(["standalone","integrated"],"a chart mode"))],nr.prototype,"mode",2);E([Ir({changeValue(i,e){this.onAxisChange(i,e)}})],nr.prototype,"axes",2);E([Ir({changeValue(i,e){this.onSeriesChange(i,e)}})],nr.prototype,"series",2);var zm=nr;function W8(i,e){let t=-e/i;return i!==0&&t>=0&&t<=1?[t]:[]}function $8(i,e,t){if(i===0)return W8(e,t);let n=e*e-4*i*t,r=[];if(n===0){let s=-e/(2*i);s>=0&&s<=1&&r.push(s)}else if(n>0){let s=Math.sqrt(n),o=(-e-s)/(2*i),a=(-e+s)/(2*i);o>=0&&o<=1&&r.push(o),a>=0&&a<=1&&r.push(a)}return r}function K8(i,e,t,n){if(i===0)return $8(e,t,n);let r=e/i,s=t/i,o=n/i,a=(3*s-r*r)/9,l=(9*r*s-27*o-2*r*r*r)/54,c=a*a*a+l*l,u=1/3,d=[];if(c>=0){let h=Math.sqrt(c),p=Math.sign(l+h)*Math.pow(Math.abs(l+h),u),m=Math.sign(l-h)*Math.pow(Math.abs(l-h),u),g=Math.abs(Math.sqrt(3)*(p-m)/2),f=-u*r+(p+m);if(f>=0&&f<=1&&d.push(f),g===0){let y=-u*r-(p+m)/2;y>=0&&y<=1&&d.push(y)}}else{let h=Math.acos(l/Math.sqrt(-a*a*a)),p=u*r,m=2*Math.sqrt(-a),g=m*Math.cos(u*h)-p,f=m*Math.cos(u*(h+2*Math.PI))-p,y=m*Math.cos(u*(h+4*Math.PI))-p;g>=0&&g<=1&&d.push(g),f>=0&&f<=1&&d.push(f),y>=0&&y<=1&&d.push(y)}return d}function nh(i,e,t,n,r,s,o,a){let l=(t-i)*(a-s)-(n-e)*(o-r);if(l===0)return 0;let c=((o-r)*(e-s)-(i-r)*(a-s))/l,u=((t-i)*(e-s)-(n-e)*(i-r))/l;return c>=0&&c<=1&&u>=0&&u<=1?1:0}function j8(i,e,t,n,r,s,o,a,l,c,u,d){let h=0,p=c-d,m=u-l,g=l*(d-c)-c*(u-l),f=vP(i,t,r,o),y=vP(e,n,s,a),b=p*f[0]+m*y[0],v=p*f[1]+m*y[1],S=p*f[2]+m*y[2],w=p*f[3]+m*y[3]+g,T=K8(b,v,S,w);for(let D of T){let O=D*D,R=D*O,L=f[0]*R+f[1]*O+f[2]*D+f[3],B=y[0]*R+y[1]*O+y[2]*D+y[3],$;l===u?$=(B-c)/(d-c):$=(L-l)/(u-l),$>=0&&$<=1&&h++}return h}function vP(i,e,t,n){return[-i+3*e-3*t+n,3*i-6*e+3*t,-3*i+3*e,i]}function lI(i,e,t,n,r,s,o,a,l,c){if(isNaN(i)||isNaN(e))return 0;s&&([r,n]=[n,r]);let u=(c-a)/(l-o),d=a-u*o,h=Math.pow(u,2)+1,p=2*(u*(d-e)-i),m=Math.pow(i,2)+Math.pow(d-e,2)-Math.pow(t,2),g=Math.pow(p,2)-4*h*m;if(g<0)return 0;let f=(-p+Math.sqrt(g))/2/h,y=(-p-Math.sqrt(g))/2/h,b=0;return[f,y].forEach(v=>{if(!(v>=Math.min(o,l)&&v<=Math.max(o,l)))return;let w=u*v+d,T=v-i,D=w-e,O=Math.atan2(D,T);Om(O,n,r)&&b++}),b}var bh=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.openedPath=!1,this.closedPath=!1}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(i,e){this.openedPath=!0,this.path2d.moveTo(i,e),this.commands.push(0),this.params.push(i,e)}lineTo(i,e){this.openedPath?(this.path2d.lineTo(i,e),this.commands.push(1),this.params.push(i,e)):this.moveTo(i,e)}rect(i,e,t,n){this.moveTo(i,e),this.lineTo(i+t,e),this.lineTo(i+t,e+n),this.lineTo(i,e+n),this.closePath()}roundRect(i,e,t,n,r){r=Math.min(r,t/2,n/2),this.moveTo(i,e+r),this.arc(i+r,e+r,r,Math.PI,1.5*Math.PI),this.lineTo(i+r,e),this.lineTo(i+t-r,e),this.arc(i+t-r,e+r,r,1.5*Math.PI,2*Math.PI),this.lineTo(i+t,e+r),this.lineTo(i+t,e+n-r),this.arc(i+t-r,e+n-r,r,0,Math.PI/2),this.lineTo(i+t-r,e+n),this.lineTo(i+r,e+n),this.arc(i+ +r,e+n-r,r,Math.PI/2,Math.PI),this.lineTo(i,e+n-r),this.closePath()}arc(i,e,t,n,r,s){this.openedPath=!0,this.path2d.arc(i,e,t,n,r,s),this.commands.push(2),this.params.push(i,e,t,n,r,s?1:0)}cubicCurveTo(i,e,t,n,r,s){this.openedPath||this.moveTo(i,e),this.path2d.bezierCurveTo(i,e,t,n,r,s),this.commands.push(3),this.params.push(i,e,t,n,r,s)}closePath(){this.openedPath&&(this.path2d.closePath(),this.commands.push(4),this.openedPath=!1,this.closedPath=!0)}clear(i){i&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(i,e){let t=this.commands,n=this.params,r=t.length,s=-1e4,o=-1e4,a=NaN,l=NaN,c=0,u=0,d=0;for(let h=0,p=0;h<r;h++)switch(t[h]){case 0:d+=nh(a,l,c,u,s,o,i,e),c=n[p++],a=c,u=n[p++],l=u;break;case 1:d+=nh(c,u,n[p++],n[p++],s,o,i,e),c=n[p-2],u=n[p-1];break;case 3:d+=j8(c,u,n[p++],n[p++],n[p++],n[p++],n[p++],n[p++],s,o,i,e),c=n[p-2],u=n[p-1];break;case 2:let m=n[p++],g=n[p++],f=n[p++],y=n[p++],b=n[p++],v=!!n[p++];if(d+=lI(m,g,f,y,b,v,s,o,i,e),!isNaN(a)){let S=m+Math.cos(y)*f,w=g+Math.sin(y)*f;d+=nh(c,u,S,w,s,o,i,e)}c=m+Math.cos(b)*f,u=g+Math.sin(b)*f;break;case 4:d+=nh(a,l,c,u,s,o,i,e);break}return d%2===1}distanceSquared(i,e){let t=1/0,n=this.commands,r=this.params,s=n.length,o=NaN,a=NaN,l=0,c=0;for(let u=0,d=0;u<s;u++)switch(n[u]){case 0:l=o=r[d++],c=a=r[d++];break;case 1:{let h=r[d++],p=r[d++];t=H0(i,e,l,c,h,p,t);break}case 3:Ie.error("Command.Curve distanceSquare not implemented");break;case 2:{let h=r[d++],p=r[d++],m=r[d++],g=r[d++],f=r[d++],y=h+Math.cos(g)*m,b=p+Math.sin(g)*m,v=!!r[d++];t=H0(i,e,l,c,y,b,t),t=C7(i,e,h,p,m,g,f,v,t),l=h+Math.cos(f)*m,c=p+Math.sin(f)*m;break}case 4:t=H0(i,e,l,c,o,a,t);break}return t}getPoints(){let{commands:i,params:e}=this,t=[],n=0;for(let r=0;r<i.length;r++)switch(i[r]){case 0:case 1:t.push({x:e[n++],y:e[n++]});break;case 3:n+=4,t.push({x:e[n++],y:e[n++]});break;case 2:t.push({x:e[n++],y:e[n++]}),n+=4;break;case 4:break}return t}};function yt(i){let{redraw:e=3,changeCb:t,convertor:n}=i??{};return Ze({redraw:e,type:"path",convertor:n,changeCb:t})}var Fs=(()=>{let i=class extends As{constructor(){super(...arguments),this.path=new bh,this._clipX=NaN,this._clipY=NaN,this._dirtyPath=!0}set clipX(e){this._clipX=e,this.dirtyPath=!0}set clipY(e){this._clipY=e,this.dirtyPath=!0}set dirtyPath(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty(this,3))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var e,t,n,r;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||((t=(e=this.fillShadow)==null?void 0:e.isDirty())!=null?t:!1)||((r=(n=this._clipPath)==null?void 0:n.isDirty())!=null?r:!1))}isPointInPath(e,t){let n=this.transformPoint(e,t);return this.path.closedPath&&this.path.isPointInPath(n.x,n.y)}distanceSquared(e,t){let n=this.transformPoint(e,t);return this.path.distanceSquared(n.x,n.y)}isDirtyPath(){return!1}updatePath(){}render(e){var t,n,r,s,o;let{ctx:a,forceRender:l,stats:c}=e;if(this.dirty===0&&!l){c&&(c.nodesSkipped+=this.nodeCount.count);return}if(this.computeTransformMatrix(),this.matrix.toContext(a),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),!isNaN(this._clipX)&&!isNaN(this._clipY)&&this.clipMode!=null){a.save();let u=this.strokeWidth/2;if((t=this._clipPath)!=null||(this._clipPath=new bh),this._clipPath.clear(),this._clipPath.rect(-u,-u,this._clipX+u,this._clipY+u+u),this.clipMode==="normal"&&a.clip((n=this._clipPath)==null?void 0:n.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(a),this.clipMode==="punch-out"){a.clip((r=this._clipPath)==null?void 0:r.getPath2D());let{x:d=-1e4,y:h=-1e4,width:p=2e4,height:m=2e4}=(s=this.computeBBox())!=null?s:{};a.clearRect(d,h,p,m)}a.restore()}else this.drawPath(a);(o=this.fillShadow)==null||o.markClean(),super.render(e)}drawPath(e){this.fillStroke(e,this.path.getPath2D())}};return i.className="Path",i})();E([yt()],Fs.prototype,"clipMode",2);E([yt()],Fs.prototype,"clipX",1);E([yt()],Fs.prototype,"clipY",1);var Y8=class{constructor(i,e,t){this.root=new Z8(i,e,t)}clear(i){this.root.clear(i)}addValue(i,e){let t={hitTester:i,value:e,distanceSquared:(n,r)=>i.distanceSquared(n,r)};this.root.addElem(t)}find(i,e){let t={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(i,e,t),t.best}},q8=class{constructor(i,e,t,n){this.nw=i,this.ne=e,this.sw=t,this.se=n}addElem(i){this.nw.addElem(i),this.ne.addElem(i),this.sw.addElem(i),this.se.addElem(i)}find(i,e,t){this.nw.find(i,e,t),this.ne.find(i,e,t),this.sw.find(i,e,t),this.se.find(i,e,t)}},X8=class{constructor(i,e,t){this.capacity=i,this.maxdepth=e,this.boundary=t??nt.NaN,this.elems=[],this.subdivisions=void 0}clear(i){this.elems.length=0,this.boundary=i,this.subdivisions=void 0}addElem(i){this.addCondition(i)&&(this.subdivisions===void 0?this.maxdepth===0||this.elems.length<this.capacity?this.elems.push(i):this.subdivide(i):this.subdivisions.addElem(i))}find(i,e,t){this.findCondition(i,e,t)&&(this.subdivisions===void 0?this.findAction(i,e,t):this.subdivisions.find(i,e,t))}subdivide(i){this.subdivisions=this.makeSubdivisions();for(let e of this.elems)this.subdivisions.addElem(e);this.subdivisions.addElem(i),this.elems.length=0}makeSubdivisions(){let{x:i,y:e,width:t,height:n}=this.boundary,{capacity:r}=this,s=this.maxdepth-1,o=t/2,a=n/2,l=new nt(i,e,o,a),c=new nt(i+o,e,o,a),u=new nt(i,e+a,o,a),d=new nt(i+o,e+a,o,a);return new q8(this.child(r,s,l),this.child(r,s,c),this.child(r,s,u),this.child(r,s,d))}},Z8=class cI extends X8{addCondition(e){let{x:t,y:n}=e.hitTester.midPoint;return this.boundary.containsPoint(t,n)}findCondition(e,t,n){let{best:r}=n;return r.distanceSquared!==0&&this.boundary.distanceSquared(e,t)<r.distanceSquared}findAction(e,t,n){let r=xv(e,t,this.elems,n.best.distanceSquared);r.nearest!==void 0&&r.distanceSquared<n.best.distanceSquared&&(n.best=r)}child(e,t,n){return new cI(e,t,n)}},Hn=(()=>{let i=class extends Fs{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){let{x:e,y:t,size:n}=this,{center:r}=this.constructor;return new nt(e-n*r.x,t-n*r.y,n,n)}applyPath(e,t){let{path:n}=this,{x:r,y:s}=this;this.repeat!=null&&(r=0,s=0),n.clear();for(let{x:o,y:a,t:l}of t)r+=o*e,s+=a*e,l==="move"?n.moveTo(r,s):n.lineTo(r,s);n.closePath()}executeFill(e,t){if(!t)return;if(this.repeat==null)return super.executeFill(e,t);e.save();let n=this.translationX,r=this.translationY;for(let s of this.repeat)e.translate(s.x-n,s.y-r),e.fill(t),n=s.x,r=s.y;e.restore()}executeStroke(e,t){if(!t)return;if(this.repeat==null)return super.executeStroke(e,t);e.save();let n=this.translationX,r=this.translationY;for(let s of this.repeat)e.translate(s.x-n,s.y-r),e.stroke(t),n=s.x,r=s.y;e.restore()}};return i.center={x:.5,y:.5},i})();E([yt()],Hn.prototype,"x",2);E([yt()],Hn.prototype,"y",2);E([yt({convertor:Math.abs})],Hn.prototype,"size",2);E([yt()],Hn.prototype,"repeat",2);var Ha=(()=>{let i=class extends Hn{updatePath(){let{x:e,y:t,path:n,size:r}=this,s=r/2;n.clear(),n.arc(e,t,s,0,Math.PI*2),n.closePath()}};return i.className="Circle",i})(),Q8=(()=>{let i=class uI extends Hn{updatePath(){let t=this.size/4.2;super.applyPath(t,uI.moves)}};return i.className="Cross",i.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}],i})(),J8=Q8,e9=(()=>{let i=class dI extends Hn{updatePath(){let t=this.size/2;super.applyPath(t,dI.moves)}};return i.className="Diamond",i.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],i})(),hI=e9,t9=(()=>{let i=class extends Hn{rad(e){return e/180*Math.PI}updatePath(){let{x:e,path:t,size:n,rad:r}=this,s=n/4,o=this.y+s/2;t.clear(),t.arc(e-s,o-s,s,r(130),r(330)),t.arc(e+s,o-s,s,r(220),r(50)),t.lineTo(e,o+s),t.closePath()}};return i.className="Heart",i})(),i9=(()=>{let i=class extends Hn{updatePath(){let{path:e,x:t,y:n}=this,r=this.size,s=.5,o=1;e.clear(),e.moveTo(t+(.15625-s)*r,n+(.34375-o)*r),e.cubicCurveTo(t+(.15625-s)*r,n+(.151491-o)*r,t+(.307741-s)*r,n+(0-o)*r,t+(.5-s)*r,n+(0-o)*r),e.cubicCurveTo(t+(.692259-s)*r,n+(0-o)*r,t+(.84375-s)*r,n+(.151491-o)*r,t+(.84375-s)*r,n+(.34375-o)*r),e.cubicCurveTo(t+(.84375-s)*r,n+(.493824-o)*r,t+(.784625-s)*r,n+(.600181-o)*r,t+(.716461-s)*r,n+(.695393-o)*r),e.cubicCurveTo(t+(.699009-s)*r,n+(.719769-o)*r,t+(.681271-s)*r,n+(.743104-o)*r,t+(.663785-s)*r,n+(.766105-o)*r),e.cubicCurveTo(t+(.611893-s)*r,n+(.834367-o)*r,t+(.562228-s)*r,n+(.899699-o)*r,t+(.528896-s)*r,n+(.980648-o)*r),e.cubicCurveTo(t+(.524075-s)*r,n+(.992358-o)*r,t+(.512663-s)*r,n+(1-o)*r,t+(.5-s)*r,n+(1-o)*r),e.cubicCurveTo(t+(.487337-s)*r,n+(1-o)*r,t+(.475925-s)*r,n+(.992358-o)*r,t+(.471104-s)*r,n+(.980648-o)*r),e.cubicCurveTo(t+(.487337-s)*r,n+(1-o)*r,t+(.475925-s)*r,n+(.992358-o)*r,t+(.471104-s)*r,n+(.980648-o)*r),e.cubicCurveTo(t+(.437772-s)*r,n+(.899699-o)*r,t+(.388107-s)*r,n+(.834367-o)*r,t+(.336215-s)*r,n+(.766105-o)*r),e.cubicCurveTo(t+(.318729-s)*r,n+(.743104-o)*r,t+(.300991-s)*r,n+(.719769-o)*r,t+(.283539-s)*r,n+(.695393-o)*r),e.cubicCurveTo(t+(.215375-s)*r,n+(.600181-o)*r,t+(.15625-s)*r,n+(.493824-o)*r,t+(.15625-s)*r,n+(.34375-o)*r),e.closePath()}};return i.className="MapPin",i.center={x:.5,y:1},i})(),n9=(()=>{let i=class pI extends Hn{updatePath(){let t=this.size/3;super.applyPath(t,pI.moves)}};return i.className="Plus",i.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}],i})(),r9=n9,Sm=(()=>{let i=class extends Hn{updatePath(){let{path:e,x:t,y:n}=this,r=this.size/2;e.clear(),e.moveTo(this.align(t-r),this.align(n-r)),e.lineTo(this.align(t+r),this.align(n-r)),e.lineTo(this.align(t+r),this.align(n+r)),e.lineTo(this.align(t-r),this.align(n+r)),e.closePath()}};return i.className="Square",i})(),s9=(()=>{let i=class extends Hn{updatePath(){let{x:e,y:t,path:n,size:r}=this,s=5,o=r/2,a=Math.PI/2;n.clear();for(let l=0;l<s*2;l++){let c=l%2===0?r:o,u=l*Math.PI/s-a,d=e+Math.cos(u)*c,h=t+Math.sin(u)*c;n.lineTo(d,h)}n.closePath()}};return i.className="Star",i})(),o9=(()=>{let i=class mI extends Hn{updatePath(){let t=this.size*1.1;super.applyPath(t,mI.moves)}};return i.className="Triangle",i.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}],i})(),hh=o9,gI={circle:Ha,cross:J8,diamond:hI,heart:t9,pin:i9,plus:r9,square:Sm,star:s9,triangle:hh},a9=Object.keys(gI);function fI(i){return typeof i=="string"&&a9.includes(i)}function ia(i=Sm){return fI(i)?gI[i]:typeof i=="function"?i:Sm}var sx=class extends Hm{constructor(){super(...arguments),this.showFocusBox=!0}getScaleInformation({xScale:i,yScale:e}){let t=ei.is(i),n=ei.is(e);return{isContinuousX:t,isContinuousY:n,xScaleType:i?.type,yScaleType:e?.type}}getModulePropertyDefinitions(){var i,e;let t=(i=this.axes.x)==null?void 0:i.scale,n=(e=this.axes.y)==null?void 0:e.scale;return this.moduleMap.mapModules(r=>r.getPropertyDefinitions(this.getScaleInformation({xScale:t,yScale:n}))).flat()}requestDataModel(i,e,t){return we(this,null,function*(){t.props.push(...this.getModulePropertyDefinitions());let{dataModel:n,processedData:r}=yield i.request(this.id,e??[],t);return this.dataModel=n,this.processedData=r,this.dispatch("data-processed",{dataModel:n,processedData:r}),{dataModel:n,processedData:r}})}isProcessedDataAnimatable(){var i,e;let t=(e=(i=this.processedData)==null?void 0:i.reduced)==null?void 0:e.animationValidation;if(!t)return!0;let{orderedKeys:n,uniqueKeys:r}=t;return n&&r}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(i){return this.doPickFocus(i,this)}doPickFocus(i,e){let t=this.getNodeData();if(t===void 0||t.length===0)return;let{datumIndexDelta:n,seriesRect:r}=i,s=this.computeFocusDatumIndex(i,t,e.seriesItemEnabled);if(s===void 0)return;let{showFocusBox:o}=this,a=t[s],l=this.computeFocusBounds({datumIndex:s,datumIndexDelta:n,seriesRect:r});if(l!==void 0)return{bbox:l,showFocusBox:o,datum:a,datumIndex:s}}computeFocusDatumIndex(i,e,t){t&&e.length!==t.length&&Ie.error(`invalid state: nodeData.length (${e.length} !== seriesItemEnabled.length (${t?.length})`);let n=l=>{let c=e[l];return(c.missing===void 0||c.missing===!1)&&(t===void 0||t[l])},r=l=>{for(;l>=0&&!n(l);)l--;return l===-1?void 0:l},s=l=>{for(;l<e.length&&!n(l);)l++;return l===e.length?void 0:l},o,a=Dt(0,i.datumIndex,e.length-1);return i.datumIndexDelta<0?o=r(a):i.datumIndexDelta>0?o=s(a):(o??(o=s(a)),o??(o=r(a))),o===void 0?i.datumIndexDelta===0?void 0:i.datumIndex-i.datumIndexDelta:o}},Qa=class extends Ot{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};E([I(Xt,{optional:!0})],Qa.prototype,"fill",2);E([I(Qt,{optional:!0})],Qa.prototype,"fillOpacity",2);E([I(Xt,{optional:!0})],Qa.prototype,"stroke",2);E([I(ke,{optional:!0})],Qa.prototype,"strokeWidth",2);E([I(Qt,{optional:!0})],Qa.prototype,"strokeOpacity",2);E([I(qa,{optional:!0})],Qa.prototype,"lineDash",2);E([I(ke,{optional:!0})],Qa.prototype,"lineDashOffset",2);var Vv=class extends Ot{};E([I(ke,{optional:!0})],Vv.prototype,"strokeWidth",2);E([I(Qt,{optional:!0})],Vv.prototype,"dimOpacity",2);E([I(ht,{optional:!0})],Vv.prototype,"enabled",2);var vI=class extends Ot{constructor(){super(...arguments),this.color="black"}};E([I(Xt,{optional:!0})],vI.prototype,"color",2);var Wm=class extends Ot{constructor(){super(...arguments),this.item=new Qa,this.series=new Vv,this.text=new vI}};E([I(Qe)],Wm.prototype,"item",2);E([I(Qe)],Wm.prototype,"series",2);E([I(Qe)],Wm.prototype,"text",2);var go=class extends Ot{constructor(){super(...arguments),this.visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlightStyle=new Wm}};E([I(Ne,{optional:!0})],go.prototype,"id",2);E([I(ht)],go.prototype,"visible",2);E([I(ht)],go.prototype,"showInLegend",2);E([I(Ne)],go.prototype,"cursor",2);E([I(RS)],go.prototype,"nodeClickRange",2);E([I(Qe)],go.prototype,"highlightStyle",2);var Eu={x:["xKey"],y:["yKey"]},Tu={x:["xName"],y:["yName"]},ox=class extends Um{constructor(i,e,t,n){super(i,e,t,n),this.xKey=n.properties.xKey,this.yKey=n.properties.yKey}},ec=class extends go{};E([I(Ne,{optional:!0})],ec.prototype,"legendItemName",2);var tc=class extends sx{constructor(i){var e=i,{pathsPerSeries:t=1,hasMarkers:n=!1,hasHighlightedLabels:r=!1,pathsZIndexSubOrderOffset:s=[],datumSelectionGarbageCollection:o=!0,markerSelectionGarbageCollection:a=!0,animationAlwaysUpdateSelections:l=!1,animationResetFns:c,directionKeys:u,directionNames:d}=e,h=Xi(e,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationAlwaysUpdateSelections","animationResetFns","directionKeys","directionNames"]);if(super(ue({directionKeys:u,directionNames:d,canHaveAxes:!0},h)),this.NodeEvent=ox,this.dataNodeGroup=this.contentGroup.appendChild(new ot({name:`${this.id}-series-dataNodes`,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.markerGroup=this.contentGroup.appendChild(new ot({name:`${this.id}-series-markers`,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("marker")})),this.labelGroup=this.contentGroup.appendChild(new ot({name:`${this.id}-series-labels`,zIndex:8,zIndexSubOrder:this.getGroupZIndexSubOrder("labels")})),this.labelSelection=Ti.select(this.labelGroup,Vt),this.highlightSelection=Ti.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=Ti.select(this.highlightLabel,Vt),this.annotationSelections=new Set,this.minRectsCache={dirtyNodeData:!0},this.debug=Mi.create(),!u||!d)throw new Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:t,hasMarkers:n,hasHighlightedLabels:r,pathsZIndexSubOrderOffset:s,directionKeys:u,directionNames:d,animationResetFns:c,animationAlwaysUpdateSelections:l,datumSelectionGarbageCollection:o,markerSelectionGarbageCollection:a},this.paths=[];for(let p=0;p<t;p++)this.paths[p]=new Fs,this.paths[p].zIndex=4,this.paths[p].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",p),this.contentGroup.appendChild(this.paths[p]);this.datumSelection=Ti.select(this.dataNodeGroup,()=>this.nodeFactory(),o),this.markerSelection=Ti.select(this.markerGroup,()=>this.markerFactory(),a),this.animationState=new Vm("empty",{empty:{update:{target:"ready",action:p=>this.animateEmptyUpdateReady(p)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:p=>this.animateReadyHighlight(p),highlightMarkers:p=>this.animateReadyHighlightMarkers(p),resize:p=>this.animateReadyResize(p),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:p=>this.animateWaitingUpdateReady(p)},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:p=>this.resetAllAnimation(p),reset:"empty"},clearing:{update:{target:"empty",action:p=>this.animateClearingUpdateEmpty(p)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData}getNodeData(){var i;return(i=this.contextNodeData)==null?void 0:i.nodeData}resetAnimation(i){i==="initial"?this.animationState.transition("reset"):i==="ready"?this.animationState.transition("skip"):i==="disabled"&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",i=>this.onLegendItemClick(i)),this.ctx.chartEventManager.addListener("legend-item-double-click",i=>this.onLegendItemDoubleClick(i)))}destroy(){super.destroy(),this._contextNodeData=void 0}update(i){return we(this,arguments,function*({seriesRect:e}){var t,n;let{visible:r,_contextNodeData:s}=this,a=((n=(t=this.ctx.highlightManager)==null?void 0:t.getActiveHighlight())==null?void 0:n.series)===this,l=this.checkResize(e),c=yield this.updateHighlightSelection(a);yield this.updateSelections(r),yield this.updateNodes(c,a,r);let u=this.getAnimationData(e,s);u&&(l&&this.animationState.transition("resize",u),this.animationState.transition("update",u))})}updateSelections(i){return we(this,null,function*(){var e,t;let n=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if(!(!i&&n)&&!(!this.nodeDataRefresh&&!this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=yield this.createNodeData();let r=this.isProcessedDataAnimatable();this._contextNodeData&&((t=(e=this._contextNodeData).animationValid)!=null||(e.animationValid=r)),this.minRectsCache.dirtyNodeData=!0;let{dataModel:s,processedData:o}=this;s!==void 0&&o!==void 0&&this.dispatch("data-update",{dataModel:s,processedData:o})}yield this.updateSeriesSelections()}})}updateSeriesSelections(i){return we(this,null,function*(){let{datumSelection:e,labelSelection:t,markerSelection:n,paths:r}=this,s=this._contextNodeData;if(!s)return;let{nodeData:o,labelData:a,itemId:l}=s;yield this.updatePaths({seriesHighlighted:i,itemId:l,contextData:s,paths:r}),this.datumSelection=yield this.updateDatumSelection({nodeData:o,datumSelection:e}),this.labelSelection=yield this.updateLabelSelection({labelData:a,labelSelection:t}),this.opts.hasMarkers&&(this.markerSelection=yield this.updateMarkerSelection({nodeData:o,markerSelection:n}))})}markerFactory(){let i=ia();return new i}getGroupZIndexSubOrder(i,e=0){var t;let n=super.getGroupZIndexSubOrder(i,e);if(i==="paths"){let[r]=n,s=(t=this.opts.pathsZIndexSubOrderOffset[e])!=null?t:0;n[0]=bu(r)?()=>Number(r())+s:Number(r)+s}return n}updateNodes(i,e,t){return we(this,null,function*(){var n;let{highlightSelection:r,highlightLabelSelection:s,opts:{hasMarkers:o,hasHighlightedLabels:a}}=this,l=!this.ctx.animationManager.isSkipped(),c=this.visible&&this._contextNodeData!=null&&t;this.rootGroup.visible=l||c,this.contentGroup.visible=l||c,this.highlightGroup.visible=(l||c)&&e;let u=this.getOpacity();o?(yield this.updateMarkerNodes({markerSelection:r,isHighlight:!0}),this.animationState.transition("highlightMarkers",r)):(yield this.updateDatumNodes({datumSelection:r,isHighlight:!0}),this.animationState.transition("highlight",r)),a&&(yield this.updateLabelNodes({labelSelection:s}));let{dataNodeGroup:d,markerGroup:h,datumSelection:p,labelSelection:m,markerSelection:g,paths:f,labelGroup:y}=this,{itemId:b}=(n=this.contextNodeData)!=null?n:{};d.opacity=u,d.visible=l||c,y.visible=c,o&&(h.opacity=u,h.zIndex=d.zIndex>=4?d.zIndex:d.zIndex+1,h.visible=c),y&&(y.opacity=u),yield this.updatePathNodes({seriesHighlighted:e,itemId:b,paths:f,opacity:u,visible:c,animationEnabled:l}),d.visible&&(yield this.updateDatumNodes({datumSelection:p,highlightedItems:i,isHighlight:!1}),yield this.updateLabelNodes({labelSelection:m}),o&&(yield this.updateMarkerNodes({markerSelection:g,isHighlight:!1})))})}getHighlightLabelData(i,e){let t=i.filter(n=>n.datum===e.datum&&n.itemId===e.itemId);return t.length===0?void 0:t}getHighlightData(i,e){return e?[e]:void 0}updateHighlightSelection(i){return we(this,null,function*(){var e;let{highlightSelection:t,highlightLabelSelection:n,_contextNodeData:r}=this;if(!r)return;let s=(e=this.ctx.highlightManager)==null?void 0:e.getActiveHighlight(),o=i&&s?.datum?s:void 0,a,l;if(o!=null){let c=this.isLabelEnabled(),{labelData:u,nodeData:d}=r;l=this.getHighlightData(d,o),a=c?this.getHighlightLabelData(u,o):void 0}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:l,highlightSelection:t}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:a,highlightLabelSelection:n}),l})}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(let{node:i}of this.datumSelection)i.datum.missing!==!0&&(yield i)}getQuadTree(){if(this.quadtree===void 0){let{width:i,height:e}=this.ctx.scene.canvas,t=new nt(0,0,i,e);this.quadtree=new Y8(100,10,t),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(i){}pickNodeExactShape(i){var e;let t=super.pickNodeExactShape(i);if(t)return t;let{x:n,y:r}=i,{opts:{hasMarkers:s}}=this,o,{dataNodeGroup:a,markerGroup:l}=this;if(o=a.pickNode(n,r),!o&&s&&(o=l?.pickNode(n,r)),o&&o.datum.missing!==!0)return{datum:o.datum,distance:0};for(let c of this.moduleMap.modules()){let{datum:u}=(e=c.pickNodeExact(i))!=null?e:{};if(u!=null&&u?.missing!==!0)return{datum:u,distance:0}}}pickNodeClosestDatum(i){var e,t;let{x:n,y:r}=i,{axes:s,rootGroup:o,_contextNodeData:a}=this;if(!a)return;let l=s.x,c=s.y,u=o.transformPoint(n,r),d=1/0,h;for(let p of a.nodeData){let{point:{x:m=NaN,y:g=NaN}={}}=p;if(isNaN(m)||isNaN(g)||!(l?.inRange(m)&&c?.inRange(g)))continue;let y=Math.max(mt(u.x-m,2)+mt(u.y-g,2),0);y<d&&(d=y,h=p)}for(let p of this.moduleMap.modules()){let m=p.pickNodeNearest(i);if(m!==void 0&&m.distanceSquared<d){d=m.distanceSquared,h=m.datum;break}}if(h){let p=Math.max(Math.sqrt(d)-((t=(e=h.point)==null?void 0:e.size)!=null?t:0),0);return{datum:h,distance:p}}}pickNodeMainAxisFirst(i,e){var t,n,r,s;let{x:o,y:a}=i,{axes:l,rootGroup:c,_contextNodeData:u}=this;if(!u)return;let d=l.x,h=l.y,p=[d,h].filter(v=>v instanceof Oh).map(v=>v.direction);if(e&&p.length===0)return;let[m="x"]=p,g=c.transformPoint(o,a),f=m==="x"?[g.x,g.y]:[g.y,g.x],y=[1/0,1/0],b;for(let v of u.nodeData){let{x:S=NaN,y:w=NaN}=(n=(t=v.point)!=null?t:v.midPoint)!=null?n:{};if(isNaN(S)||isNaN(w)||v.missing===!0||!(d?.inRange(S)&&h?.inRange(w)))continue;let D=m==="x"?[S,w]:[w,S],O=!0;for(let R=0;R<D.length;R++){let L=Math.abs(D[R]-f[R]);if(L>y[R]){O=!1;break}L<y[R]&&(y[R]=L,y.fill(1/0,R+1,y.length))}O&&(b=v)}if(b){let v=Math.max(mt(y[0],2)+mt(y[1],2)-((s=(r=b.point)==null?void 0:r.size)!=null?s:0),0);for(let S of this.moduleMap.modules()){let w=S.pickNodeMainAxisFirst(i);if(w!==void 0&&w.distanceSquared<v){b=w.datum,v=w.distanceSquared;break}}return{datum:b,distance:Math.sqrt(v)}}}onLegendItemClick(i){let{legendItemName:e}=this.properties,{enabled:t,itemId:n,series:r}=i,s=e!=null&&e===i.legendItemName;(r.id===this.id||s)&&this.toggleSeriesItem(n,t)}onLegendItemDoubleClick(i){let{enabled:e,itemId:t,series:n,numVisibleItems:r}=i,{legendItemName:s}=this.properties,o=s!=null&&s===i.legendItemName;n.id===this.id||o?this.toggleSeriesItem(t,!0):e&&r===1?this.toggleSeriesItem(t,!0):this.toggleSeriesItem(t,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRects(i,e){let{dirtyNodeData:t,sizeCache:n,minRect:r,minVisibleRect:s}=this.minRectsCache,o=JSON.stringify({width:i,height:e});if(!(o!==n)&&!t&&r&&s)return{minRect:r,minVisibleRect:s};let l=this.computeMinRects(i,e);return this.minRectsCache={dirtyNodeData:!1,sizeCache:o,minRect:l?.minRect,minVisibleRect:l?.minVisibleRect},l}computeMinRects(i,e){var t,n;let r=this._contextNodeData;if(!r?.nodeData.length)return;let{nodeData:s}=r,o=Array(s.length),a=Array(s.length);for(let[S,{midPoint:w}]of s.entries())o[S]=(t=w?.x)!=null?t:0,a[S]=(n=w?.y)!=null?n:0;o.sort((S,w)=>S-w),a.sort((S,w)=>S-w);let l,c,u,d,h=0,p=0;for(let S=1;S<s.length;S++)o[S]>=0&&(l??(l=S)),o[S]>i&&(c??(c=S)),a[S]>=0&&(u??(u=S)),a[S]>e&&(d??(d=S)),h=Math.max(h,o[S]-o[S-1]),p=Math.max(p,a[S]-a[S-1]);c??(c=s.length),d??(d=s.length);let m=l!=null&&c!=null?o.slice(l,c):[],g=u!=null&&d!=null?a.slice(u,d):[],f=0,y=0;for(let S=1;S<Math.max(m.length,g.length);S++){let w=m[S],T=m[S-1],D=g[S],O=g[S-1];w!=null&&T!=null&&(f=Math.max(f,w-T)),D!=null&&O!=null&&(y=Math.max(y,D-O))}let b=new nt(0,0,h,p),v=new nt(0,0,f,y);return{minRect:b,minVisibleRect:v}}updateHighlightSelectionItem(i){let{opts:{hasMarkers:e}}=this,{items:t,highlightSelection:n}=i,r=t??[];if(e){let s=n;return this.updateMarkerSelection({nodeData:r,markerSelection:s})}else return this.updateDatumSelection({nodeData:r,datumSelection:n})}updateHighlightSelectionLabel(i){var e;return this.updateLabelSelection({labelData:(e=i.items)!=null?e:[],labelSelection:i.highlightLabelSelection})}updateDatumSelection(i){return we(this,null,function*(){return i.datumSelection})}updateDatumNodes(i){return we(this,null,function*(){})}updateMarkerSelection(i){return we(this,null,function*(){return i.markerSelection})}updateMarkerNodes(i){return we(this,null,function*(){})}updatePaths(i){return we(this,null,function*(){i.paths.forEach(e=>e.visible=!1)})}updatePathNodes(i){return we(this,null,function*(){let{paths:e,opacity:t,visible:n}=i;for(let r of e)r.opacity=t,r.visible=n})}resetAllAnimation(i){var e,t,n;let{path:r,datum:s,label:o,marker:a}=(t=(e=this.opts)==null?void 0:e.animationResetFns)!=null?t:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),r&&i.paths.forEach(l=>{xn([l],r)}),s&&xn([i.datumSelection],s),o&&xn([i.labelSelection],o),a&&this.opts.hasMarkers&&xn([i.markerSelection],a),((n=i.contextData)==null?void 0:n.animationValid)===!1&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(i){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(i)}animateWaitingUpdateReady(i){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(i)}animateReadyHighlight(i){var e,t;let{datum:n}=(t=(e=this.opts)==null?void 0:e.animationResetFns)!=null?t:{};n&&xn([i],n)}animateReadyHighlightMarkers(i){var e,t;let{marker:n}=(t=(e=this.opts)==null?void 0:e.animationResetFns)!=null?t:{};n&&xn([i],n)}animateReadyResize(i){this.resetAllAnimation(i)}animateClearingUpdateEmpty(i){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(i)}animationTransitionClear(){let i=this.getAnimationData();i&&this.animationState.transition("clear",i)}getAnimationData(i,e){let{_contextNodeData:t}=this;return t?{datumSelection:this.datumSelection,markerSelection:this.markerSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:t,previousContextData:e,paths:this.paths,seriesRect:i}:void 0}calculateScaling(){let i={};for(let e of Object.values(BS)){let t=this.axes[e];if(t){if(t.scale instanceof WS){let{range:n,domain:r}=t.scale;i[e]={type:"log",convert:s=>t.scale.convert(s),domain:[r[0],r[1]],range:[n[0],n[1]]}}else if(t.scale instanceof ei){let{range:n}=t.scale,r=t.scale.getDomain();i[e]={type:"continuous",domain:[r[0],r[1]],range:[n[0],n[1]]}}else if(t.scale){let{domain:n}=t.scale;i[e]={type:"category",domain:n,range:n.map(r=>t.scale.convert(r))}}}}return i}},l9=["top","right","bottom","left"],c9=(()=>{let i=class yI extends zm{constructor(t,n){super(t,n),this.paired=!0,this.firstSeriesTranslation=!0,this._lastCrossLineIds=void 0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastClipSeries=!1,this._lastVisibility={crossLines:!0,series:!0}}onAxisChange(t,n){super.onAxisChange(t,n),this.zoomManager.updateAxes(t)}destroySeries(t){super.destroySeries(t),this.firstSeriesTranslation=!0}performLayout(){return we(this,null,function*(){let t=yield cm(yI.prototype,this,"performLayout").call(this),{firstSeriesTranslation:n,seriesRoot:r,annotationRoot:s,highlightRoot:o}=this,{animationRect:a,seriesRect:l,visibility:c,clipSeries:u}=this.updateAxes(t);this.seriesRoot.visible=c.series,this.seriesRect=l,this.animationRect=a;let{x:d,y:h}=l;if(n){for(let f of[r,s,o])f.translationX=Math.floor(d),f.translationY=Math.floor(h);this.firstSeriesTranslation=!1}else{let{translationX:f,translationY:y}=r;oa(this.id,"seriesRect",this.ctx.animationManager,[r,o,s],{translationX:f,translationY:y},{translationX:Math.floor(d),translationY:Math.floor(h)},{phase:"update"})}let p=l.clone().grow(this.seriesArea.padding);this.hoverRect=p;let m=this.seriesArea.clip||u?p:void 0;r.setClipRectInGroupCoordinateSpace(m),o.setClipRectInGroupCoordinateSpace(m),s.setClipRectInGroupCoordinateSpace(m),this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:u,series:{rect:l,paddedRect:p,visible:c.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map(f=>ue({id:f.id},f.getLayoutState()))});let g=this.modulesManager.mapModules(f=>{var y;return(y=f.performCartesianLayout)==null?void 0:y.call(f,{seriesRect:l})});return yield Promise.all(g),t})}updateAxes(t){var n;let r=this.axes.flatMap(v=>{var S;return(S=v.crossLines)!=null?S:[]}).map(v=>v.id),s=this._lastCrossLineIds!=null&&this._lastCrossLineIds.length===r.length&&this._lastCrossLineIds.every((v,S)=>r[S]===v),o,a,l;s?(o=ue({},this._lastAxisWidths),a=this._lastClipSeries,l=ue({},this._lastVisibility)):(o={top:0,bottom:0,left:0,right:0},a=!1,l={crossLines:!0,series:!0},this._lastCrossLineIds=r);let c=new Set(this.axes.map(v=>v.position));for(let v of Object.keys(o))c.has(v)||delete o[v];let u=(v,S,w)=>Object.keys(v).some(T=>o[T]==null)?!1:l.crossLines===w.crossLines&&l.series===w.series&&Object.entries(o).every(([T,D])=>{let O=v[T];return D!=null||O!=null?D===O:!0})&&a===S,d=v=>gv(v,S=>S&&Math.abs(S)===1/0?0:S!=null?Math.ceil(S):S),h={},p={},m=!1,g=(n=this.seriesRect)==null?void 0:n.clone(),f=0,y={};do{Object.assign(o,h),a=m,Object.assign(l,p);let v=this.updateAxesPass(o,t.clone(),g);if(h=d(v.axisWidths),p=v.visibility,m=v.clipSeries,g=v.seriesRect,y=v.primaryTickCounts,f++>10){Ie.warn("unable to find stable axis layout.");break}}while(!u(h,m,p));this.axes.forEach(v=>{v.update(y[v.direction])});let b=5;return this.axes.forEach(v=>{if(v.setCrossLinesVisible(l.crossLines),!!g)switch(v.clipGrid(g.x,g.y,g.width+b,g.height+b),v.position){case"left":case"right":v.clipTickLines(t.x,g.y,t.width+b,g.height+b);break;case"top":case"bottom":v.clipTickLines(g.x,t.y,g.width+b,t.height+b);break}}),this._lastAxisWidths=o,this._lastVisibility=l,{seriesRect:g,animationRect:t,visibility:l,clipSeries:a}}updateAxesPass(t,n,r){let s={},o={},a={series:!0,crossLines:!0},l=!1,c={},u=this.applySeriesPadding(n),d=r?this.buildCrossLinePadding(t):{},h=this.buildAxisBound(u,t,d,a),p=this.buildSeriesRect(h,t);return this.axes.forEach(m=>{var g,f;let{position:y="left"}=m,{clipSeries:b,axisThickness:v,axisOffset:S}=this.calculateAxisDimensions({axis:m,seriesRect:p,paddedBounds:u,axisWidths:t,newAxisWidths:o,primaryTickCounts:c,clipSeries:l,addInterAxisPadding:((g=s[y])!=null?g:0)>0});s[y]=((f=s[y])!=null?f:0)+1,l=l||b,this.positionAxis({axis:m,axisBound:h,axisOffset:S,axisThickness:v,axisWidths:t,primaryTickCounts:c,seriesRect:p})}),{clipSeries:l,seriesRect:p,axisWidths:o,visibility:a,primaryTickCounts:c}}buildCrossLinePadding(t){var n;let r={};this.axes.forEach(s=>{s.crossLines&&s.crossLines.forEach(o=>{var a;(a=o.calculatePadding)==null||a.call(o,r)})});for(let[s,o=0]of Object.entries(r))r[s]=Math.max(o-((n=t[s])!=null?n:0),0);return r}applySeriesPadding(t){let n=t.clone(),r=this.axes.slice().reverse();return l9.forEach(s=>{let o=this.seriesArea.padding[s],a=r.find(l=>l.position===s);a?a.seriesAreaPadding=o:n.shrink(o,s)}),n}buildAxisBound(t,n,r,s){var o,a,l,c;let u=t.clone(),{top:d=0,right:h=0,bottom:p=0,left:m=0}=r,g=m+h,f=d+p,y=((o=n.left)!=null?o:0)+((a=n.right)!=null?a:0)+g,b=((l=n.top)!=null?l:0)+((c=n.bottom)!=null?c:0)+f;return u.width<=y||u.height<=b?(s.crossLines=!1,s.series=!1,u):(u.x+=m,u.y+=d,u.width-=g,u.height-=f,u)}buildSeriesRect(t,n){let r=t.clone(),{top:s,bottom:o,left:a,right:l}=n;return r.x+=a??0,r.y+=s??0,r.width-=(a??0)+(l??0),r.height-=(s??0)+(o??0),r.width=Math.max(0,r.width),r.height=Math.max(0,r.height),r}clampToOutsideSeriesRect(t,n,r,s){let{x:o,y:a,width:l,height:c}=t,d=[o,a,o+l,a+c][(r==="x"?0:1)+(s===1?0:2)];return(s===1?Math.min:Math.max)(n,d)}calculateAxisDimensions(t){var n,r,s,o;let{axis:a,seriesRect:l,paddedBounds:c,axisWidths:u,newAxisWidths:d,primaryTickCounts:h,addInterAxisPadding:p}=t,{clipSeries:m}=t,{position:g="left",direction:f}=a,y=a instanceof Oh||a instanceof yh,b=g==="left"||g==="right",v=(n=d[g])!=null?n:0,{min:S,max:w}=this.ctx.zoomManager.getAxisZoom(a.id);b?(y?(a.range=[0,l.height],a.visibleRange=[1-w,1-S]):(a.range=[l.height,0],a.visibleRange=[S,w]),a.gridLength=l.width):(a.range=[0,l.width],a.visibleRange=[S,w],a.gridLength=l.height);let T=a.nice?h[f]:void 0,D=f==="y",O=.3;a.thickness?a.maxThickness=a.thickness:a.maxThickness=(D?c.width:c.height)*O;let R=a.calculateLayout(T);T=R.primaryTickCount,(r=h[f])!=null||(h[f]=T),m||(m=a.dataDomain.clipped||a.visibleRange[0]>0||a.visibleRange[1]<1);let L;if(a.thickness!=null&&a.thickness>0)L=a.thickness;else{let{bbox:$}=R;L=D?$.width:$.height}return p&&(L+=15),L=Math.ceil(L),d[g]=((s=d[g])!=null?s:0)+L,a.gridPadding=((o=u[g])!=null?o:0)-d[g],{clipSeries:m,axisThickness:L,axisOffset:v,primaryTickCount:T}}positionAxis(t){var n,r,s,o;let{axis:a,axisBound:l,axisWidths:c,seriesRect:u,axisOffset:d,axisThickness:h}=t,{position:p}=a;switch(p){case"top":a.translation.x=l.x+((n=c.left)!=null?n:0),a.translation.y=this.clampToOutsideSeriesRect(u,l.y+1+d+h,"y",1);break;case"bottom":a.translation.x=l.x+((r=c.left)!=null?r:0),a.translation.y=this.clampToOutsideSeriesRect(u,l.y+l.height+1-h-d,"y",-1);break;case"left":a.translation.y=l.y+((s=c.top)!=null?s:0),a.translation.x=this.clampToOutsideSeriesRect(u,l.x+d+h,"x",1);break;case"right":a.translation.y=l.y+((o=c.top)!=null?o:0),a.translation.x=this.clampToOutsideSeriesRect(u,l.x+l.width-h-d,"x",-1);break}a.updatePosition({rotation:ir(a.rotation),sideFlag:a.label.getSideFlag()})}shouldFlipXY(){return!this.series.some(t=>!(t instanceof tc&&t.shouldFlipXY()))}};return i.className="CartesianChart",i.type="cartesian",i})(),u9=c9,$0=(()=>{let i=class CI{static isInstance(t){var n;return t instanceof CI||((n=t.constructor)==null?void 0:n.name)==="AgChartInstanceProxy"&&t.chart!=null?!0:t.chart!=null&&this.validateImplementation(t)}static validateImplementation(t){var n;let r=["getOptions","destroy"],s=Object.keys((n=Object.getPrototypeOf(t))!=null?n:{});return r.every(o=>s.includes(o))}constructor(t){this.chart=t}getOptions(){return er(this.chart.getOptions())}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.chart.destroy()}};return i.chartInstances=new WeakMap,i})();E([Ir({oldValue(i){$0.chartInstances.delete(i)},newValue(i){$0.chartInstances.set(i,this)}})],$0.prototype,"chart",2);var rh=$0,Zo=class extends ei{constructor(){super([0,1],[0,1]),this.type="number"}toDomain(i){return i}ticks(){var i;let e=(i=this.tickCount)!=null?i:ei.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some(s=>!isFinite(s)))return[];this.refresh();let[t,n]=this.getDomain(),{interval:r}=this;if(r){let s=Math.abs(r),o=this.getPixelRange();if(!Cm({start:t,stop:n,interval:s,availableRange:o}))return ym(t,n,s)}return Dv(t,n,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(i,e){var t,n;let r=(t=this.tickCount)!=null?t:ei.defaultTickCount;return(n=this.interval)!=null?n:mh(i,e,r,this.minTickCount,this.maxTickCount)}updateNiceDomain(){var i;let e=(i=this.tickCount)!=null?i:ei.defaultTickCount;if(e<1){this.niceDomain=[...this.domain];return}let[t,n]=this.domain;if(e===1)[t,n]=XG(t,n);else{let r=t>n?Math.ceil:Math.floor,s=n<t?Math.floor:Math.ceil,o=4;for(let a=0;a<o;a++){let l=t,c=n,u=this.getTickStep(t,n),[d,h]=this.domain;if(u>=1)t=r(d/u)*u,n=s(h/u)*u;else{let p=1/u;t=r(d*p)/p,n=s(h*p)/p}if(t===l&&n===c)break}}this.niceDomain=[t,n]}tickFormat({ticks:i,specifier:e}){return sk(i??this.ticks(),e)}};function d9(i,e,t){let[n,r]=eo(i);n=h9(Math.floor(n),r,e);let s=m9(n,r,e),o=e-1;r=n+o*s;let a=t?[r,n]:[n,r],l=p9(n,s,e);return[a,l]}function h9(i,e,t){let n=Math.abs(e-i)/(t-1),r=Math.floor(Math.log10(n)),s=Math.pow(10,r);return Math.floor(i/s)*s}function p9(i,e,t){let n=Math.floor(Math.log10(e)),r=e>0&&e<1?Math.abs(n):0,s=Math.pow(10,r),o=vm(r);for(let a=0;a<t;a++){let l=i+e*a;o[a]=Math.round(l*s)/s}return o}function m9(i,e,t){let n=t-1,r=(e-i)/n;return g9(r)}function g9(i){let e=Math.floor(Math.log10(i)),t=Math.pow(10,e),n=i/t*10;return n>0&&n<=1?t/10:n>1&&n<=2?2*t/10:n>1&&n<=5?5*t/10:n>5&&n<=10?10*t/10:n>10&&n<=20?20*t/10:n>20&&n<=40?40*t/10:n>40&&n<=50?50*t/10:n>50&&n<=100?100*t/10:n}var ax=class extends aa{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};E([I(Pv),uo(NaN)],ax.prototype,"minSpacing",2);E([I(VS),uo(NaN)],ax.prototype,"maxSpacing",2);var Sh=(()=>{let i=class extends Gm{constructor(e,t=new Zo){super(e,t),this.min=NaN,this.max=NaN}normaliseDataDomain(e){let{min:t,max:n}=this,{extent:r,clipped:s}=Im(e,t,n);return{domain:r,clipped:s}}createTick(){return new ax}updateSecondaryAxisTicks(e){if(this.dataDomain==null)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(this.dataDomain.domain.length===0)return[];let[t,n]=d9(this.dataDomain.domain,e??0,this.reverse);return this.scale.nice=!1,this.scale.domain=t,this.scale.update(),n}formatDatum(e){return typeof e=="number"?e.toFixed(2):String(e)}};return i.className="NumberAxis",i.type="number",i})();E([I(Ps(Ah,Dh("max"))),uo(NaN)],Sh.prototype,"min",2);E([I(Ps(Ah,kh("min"))),uo(NaN)],Sh.prototype,"max",2);var bI=ui(i=>Yr(i)&&i!==0,"a non-zero number"),$m=(()=>{let i=class extends Sh{constructor(e){super(e,new WS),this.min=NaN,this.max=NaN}normaliseDataDomain(e){let{min:t,max:n}=this,{extent:r,clipped:s}=Im(e,t,n),o=r[0]>r[1],a=r[0]<0&&r[1]>0,l=r[0]===0&&r[1]===0;return(o||a||l)&&(a?Ie.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):l&&Ie.warn("the data domain has 0 extent, no data is rendered.")),r[0]===0&&(r[0]=1),r[1]===0&&(r[1]=-1),{domain:r,clipped:s}}set base(e){this.scale.base=e}get base(){return this.scale.base}};return i.className="LogAxis",i.type="log",i})();E([I(Ps(Ah,bI,Dh("max"))),uo(NaN)],$m.prototype,"min",2);E([I(Ps(Ah,bI,kh("min"))),uo(NaN)],$m.prototype,"max",2);var lx=class extends aa{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};E([I(Pv),uo(NaN)],lx.prototype,"minSpacing",2);E([I(VS),uo(NaN)],lx.prototype,"maxSpacing",2);var Bv=(()=>{let i=class extends Gm{constructor(e){super(e,new hu),this.min=void 0,this.max=void 0,this.refreshScale()}normaliseDataDomain(e){var t;let{min:n,max:r}=this,s=!1;return typeof n=="number"&&(n=new Date(n)),typeof r=="number"&&(r=new Date(r)),e.length>2&&(e=((t=ra(e))!=null?t:[0,1e3]).map(o=>new Date(o))),n instanceof Date&&(s||(s=n>e[0]),e=[n,e[1]]),r instanceof Date&&(s||(s=r<e[1]),e=[e[0],r]),e[0]>e[1]&&(e=[]),{domain:e,clipped:s}}createTick(){return new lx}onLabelFormatChange(e,t,n){n?super.onLabelFormatChange(e,t,n):this.labelFormatter=this.scale.tickFormat({ticks:e,domain:t})}calculatePadding(){return[0,0]}formatDatum(e){var t;let n=this.scale.tickFormat({specifier:"%m/%d/%y, %H:%M:%S"});return(t=this.moduleCtx.callbackCache.call(n,e))!=null?t:String(e)}};return i.className="TimeAxis",i.type="time",i})();E([I(Ps(FS,Dh("max")),{optional:!0})],Bv.prototype,"min",2);E([I(Ps(FS,kh("min")),{optional:!0})],Bv.prototype,"max",2);var yP=1e-6,P0=(i,e,t,n,r)=>{let s=!1,o=!1,a=n-Math.sqrt(Math.max(mt(r,2)-mt(t,2),0)),l=0,c=0,u=t-Math.sqrt(Math.max(mt(r,2)-mt(n,2),0));return a>i?(s=!0,a=i,l=t-Math.sqrt(Math.max(mt(r,2)-mt(n-i,2)))):a<yP&&(a=0),u>e?(o=!0,c=n-Math.sqrt(Math.max(mt(r,2)-mt(t-e,2))),u=e):u<yP&&(u=0),{leading0:a,leading1:l,trailing0:c,trailing1:u,leadingClipped:s,trailingClipped:o}},D0=(i,{x0:e,y0:t,x1:n,y1:r,cx:s,cy:o},a,l)=>{if(l&&i.moveTo(e,t),e!==n||t!==r){let c=Math.atan2(t-o,e-s),u=Math.atan2(r-o,n-s);i.arc(s,o,a,c,u)}else i.lineTo(e,t)},wb=(i,e,t,n,r,s,o)=>{let{topLeft:a,topRight:l,bottomRight:c,bottomLeft:u}=s,d=Math.max(a+u,l+c),h=Math.max(a+l,u+c);if(d<=0&&h<=0){o==null?i.rect(e,t,n,r):i.rect(o.x,o.y,o.width,o.height);return}else if(o==null&&a===l&&a===c&&a===u){i.roundRect(e,t,n,r,a);return}if(n<0&&(e+=n,n=Math.abs(n)),r<0&&(t+=r,r=Math.abs(r)),n<=0||r<=0)return;if(o==null)o=new nt(e,t,n,r);else{let D=Math.max(e,o.x),O=Math.min(e+n,o.x+o.width),R=Math.max(t,o.y),L=Math.min(t+r,o.y+o.height);o=new nt(D,R,O-D,L-R)}let p=Math.max(d/r,h/n,1);p>1&&(a/=p,l/=p,c/=p,u/=p);let m=!0,g=!0,f=!0,y=!0,b,v,S,w;if(m){let D=P0(o.height,o.width,Math.max(e+a-o.x,0),Math.max(t+a-o.y,0),a);D.leadingClipped&&(y=!1),D.trailingClipped&&(g=!1);let O=Math.max(o.x+D.leading1,o.x),R=Math.max(o.y+D.leading0,o.y),L=Math.max(o.x+D.trailing1,o.x),B=Math.max(o.y+D.trailing0,o.y),$=e+a,U=t+a;b={x0:O,y0:R,x1:L,y1:B,cx:$,cy:U}}if(g){let D=P0(o.width,o.height,Math.max(t+l-o.y,0),Math.max(o.x+o.width-(e+n-l),0),l);D.leadingClipped&&(m=!1),D.trailingClipped&&(f=!1);let O=Math.min(o.x+o.width-D.leading0,o.x+o.width),R=Math.max(o.y+D.leading1,o.y),L=Math.min(o.x+o.width-D.trailing0,o.x+o.width),B=Math.max(o.y+D.trailing1,o.y),$=e+n-l,U=t+l;v={x0:O,y0:R,x1:L,y1:B,cx:$,cy:U}}if(f){let D=P0(o.height,o.width,Math.max(o.x+o.width-(e+n-c),0),Math.max(o.y+o.height-(t+r-c),0),c);D.leadingClipped&&(g=!1),D.trailingClipped&&(y=!1);let O=Math.min(o.x+o.width-D.leading1,o.x+o.width),R=Math.min(o.y+o.height-D.leading0,o.y+o.height),L=Math.min(o.x+o.width-D.trailing1,o.x+o.width),B=Math.min(o.y+o.height-D.trailing0,o.y+o.height),$=e+n-c,U=t+r-c;S={x0:O,y0:R,x1:L,y1:B,cx:$,cy:U}}if(y){let D=P0(o.width,o.height,Math.max(o.y+o.height-(t+r-u),0),Math.max(e+u-o.x,0),u);D.leadingClipped&&(f=!1),D.trailingClipped&&(m=!1);let O=Math.max(o.x+D.leading0,o.x),R=Math.min(o.y+o.height-D.leading1,o.y+o.height),L=Math.max(o.x+D.trailing0,o.x),B=Math.min(o.y+o.height-D.trailing1,o.y+o.height),$=e+u,U=t+r-u;w={x0:O,y0:R,x1:L,y1:B,cx:$,cy:U}}let T=!1;m&&b!=null&&(D0(i,b,a,!T),T||(T=!0)),g&&v!=null&&(D0(i,v,l,!T),T||(T=!0)),f&&S!=null&&(D0(i,S,c,!T),T||(T=!0)),y&&w!=null&&(D0(i,w,u,!T),T||(T=!0)),i.closePath()},Fr=(()=>{let i=class extends Fs{constructor(){super(...arguments),this.borderPath=new bh,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=As.defaultStyles.strokeWidth,this.effectiveStrokeWidth=As.defaultStyles.strokeWidth,this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquared,this.microPixelEffectOpacity=1}set cornerRadius(e){this.topLeftCornerRadius=e,this.topRightCornerRadius=e,this.bottomRightCornerRadius=e,this.bottomLeftCornerRadius=e}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){var e,t,n;let{path:r,borderPath:s,crisp:o,topLeftCornerRadius:a,topRightCornerRadius:l,bottomRightCornerRadius:c,bottomLeftCornerRadius:u}=this,{x:d,y:h,width:p,height:m,strokeWidth:g,clipBBox:f}=this,b=1/((t=(e=this.layerManager)==null?void 0:e.canvas.pixelRatio)!=null?t:1),v=1;if(r.clear(!0),s.clear(!0),o&&(p<=b&&(v*=p/b),m<=b&&(v*=m/b),p=this.align(d,p),m=this.align(h,m),d=this.align(d),h=this.align(h),f=f!=null?new nt(this.align(f.x),this.align(f.y),this.align(f.x,f.width),this.align(f.y,f.height)):void 0),g)if(p<b){let S=d+b/2;s.moveTo(S,h),s.lineTo(S,h+m),g=b,this.borderClipPath=void 0}else if(m<b){let S=h+b/2;s.moveTo(d,S),s.lineTo(d+p,S),g=b,this.borderClipPath=void 0}else if(g<p&&g<m){let S=g/2;d+=S,h+=S,p-=g,m-=g;let w=f?.clone().shrink(S),T={topLeft:a>0?a-g:0,topRight:l>0?l-g:0,bottomRight:c>0?c-g:0,bottomLeft:u>0?u-g:0};this.borderClipPath=void 0,p>0&&m>0&&(w==null||w?.width>0&&w?.height>0)&&(wb(r,d,h,p,m,T,w),wb(s,d,h,p,m,T,w))}else this.borderClipPath=(n=this.borderClipPath)!=null?n:new bh,this.borderClipPath.clear(!0),this.borderClipPath.rect(d,h,p,m),s.rect(d,h,p,m);else{let S={topLeft:a,topRight:l,bottomRight:c,bottomLeft:u};this.borderClipPath=void 0,wb(r,d,h,p,m,S,f)}[a,l,c,u].every(S=>S===0)?(this.hittester=(S,w)=>{let T=this.transformPoint(S,w);return this.getCachedBBox().containsPoint(T.x,T.y)},this.distanceSquared=(S,w)=>this.getCachedBBox().distanceSquared(S,w)):(this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquared),this.effectiveStrokeWidth=g,this.lastUpdatePathStrokeWidth=g,this.microPixelEffectOpacity=v}computeBBox(){var e;let{x:t,y:n,width:r,height:s,clipBBox:o}=this;return(e=o?.clone())!=null?e:new nt(t,n,r,s)}isPointInPath(e,t){return this.hittester(e,t)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(e,t){return this.distanceCalculator(e,t)}applyFillAlpha(e){let{fillOpacity:t,microPixelEffectOpacity:n,opacity:r}=this;e.globalAlpha*=r*t*n}renderStroke(e){let{stroke:t,effectiveStrokeWidth:n}=this;if(t&&n){let{globalAlpha:r}=e,{strokeOpacity:s,lineDash:o,lineDashOffset:a,lineCap:l,lineJoin:c,borderPath:u,borderClipPath:d,opacity:h,microPixelEffectOpacity:p}=this;d&&e.clip(d.getPath2D()),e.strokeStyle=t,e.globalAlpha*=h*s*p,e.lineWidth=n,o&&e.setLineDash(o),a&&(e.lineDashOffset=a),l&&(e.lineCap=l),c&&(e.lineJoin=c),e.stroke(u.getPath2D()),e.globalAlpha=r}}};return i.className="Rect",i})();E([yt()],Fr.prototype,"x",2);E([yt()],Fr.prototype,"y",2);E([yt()],Fr.prototype,"width",2);E([yt()],Fr.prototype,"height",2);E([yt()],Fr.prototype,"topLeftCornerRadius",2);E([yt()],Fr.prototype,"topRightCornerRadius",2);E([yt()],Fr.prototype,"bottomRightCornerRadius",2);E([yt()],Fr.prototype,"bottomLeftCornerRadius",2);E([yt()],Fr.prototype,"clipBBox",2);E([yt()],Fr.prototype,"crisp",2);var Km=class extends hv{constructor(i){super(),this.node=new ot({name:"background",zIndex:0}),this.rectNode=new Fr,this.visible=!0,this.fill="white",this.node.appendChild(this.rectNode),this.destroyFns.push(i.scene.attachNode(this.node),i.layoutService.addListener("layout-complete",e=>this.onLayoutComplete(e)))}onLayoutComplete(i){let{width:e,height:t}=i.chart;this.rectNode.width=e,this.rectNode.height=t}};E([I(ht),vi("node","visible")],Km.prototype,"visible",2);E([I(Xt,{optional:!0}),vi("rectNode","fill")],Km.prototype,"fill",2);E([I(Qe,{optional:!0})],Km.prototype,"image",2);var SI={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology"],instanceConstructor:Km};function f9({orientation:i,bboxes:e,maxHeight:t,maxWidth:n,itemPaddingY:r=0,itemPaddingX:s=0,forceResult:o=!1}){let a=i==="horizontal",l={max:a?n:t,fn:a?h=>h.width:h=>h.height,padding:a?s:r},c={max:a?t:n,fn:a?h=>h.height:h=>h.width,padding:a?r:s},u=0,d=[];for(;u<e.length;){let h=e.slice(u),p=v9(h,u,l,c,o);if(!p)return;u+=p.processedBBoxCount,d.push(p.pageIndices)}return C9(d,i,e,r,s)}function v9(i,e,t,n,r){let o=S9(i,t);if(o<1){if(!r)return;o=1}let a=o;for(;a>=1;){let l=y9(i,e,a,t,n,r);if(l==null&&a<=1)return;if(l==null){a--;continue}if(typeof l=="number"){if(l<=1)return;a=l<a&&l>1?l:a,a--;continue}return{processedBBoxCount:l.length*l[0].length,pageIndices:l}}}function y9(i,e,t,n,r,s){var o;let a=[],l=0,c=0,u=[],d=[];for(let h=0;h<i.length;h++){let p=(h+t)%t;p===0&&(l+=c,c=0,u.length>0&&a.push(u),u=[]);let m=n.fn(i[h])+n.padding;d[p]=Math.max((o=d[p])!=null?o:0,m),c=Math.max(c,r.fn(i[h])+r.padding);let g=l+c,f=!s||a.length>0;if(g>r.max&&f){u=[];break}if(d.reduce((b,v)=>b+v,0)>n.max&&!s)return d.length<t?d.length:void 0;u.push(h+e)}return u.length>0&&a.push(u),a.length>0?a:void 0}function C9(i,e,t,n,r){let s=0,o=0;return{pages:i.map(l=>{e==="horizontal"&&(l=b9(l));let c=0,u=l.map(p=>{let m=p.map(y=>(c=Math.max(y,c),t[y])),g=0,f=0;return m.forEach(y=>{g+=y.height+n,f=Math.max(f,y.width+r)}),{indices:p,bboxes:m,columnHeight:Math.ceil(g),columnWidth:Math.ceil(f)}}),d=0,h=0;return u.forEach(p=>{d+=p.columnWidth,h=Math.max(h,p.columnHeight)}),s=Math.max(d,s),o=Math.max(h,o),{columns:u,startIndex:l[0][0],endIndex:c,pageWidth:d,pageHeight:h}}),maxPageWidth:s,maxPageHeight:o}}function b9(i){let e=[];for(let t of i[0])e.push([]);return i.forEach((t,n)=>{t.forEach((r,s)=>{e[s][n]=r})}),e}function S9(i,e){let t=i.length,n=0;for(let r=0;r<t;r++)if(n+=e.fn(i[r])+e.padding,n>e.max)return t/r<2?Math.ceil(t/2):r;return t}var _n=(()=>{let i=class extends ot{constructor(){super({name:"markerLabelGroup"}),this.label=new Vt,this.line=new Ln,this._marker=new Sm,this._markerSize=15,this._spacing=8;let{marker:e,label:t,line:n}=this;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=1,this.append([n,e,t]),this.update()}set marker(e){this._marker!==e&&(this.removeChild(this._marker),this._marker=e,this.appendChild(e),this.update())}get marker(){return this._marker}set markerSize(e){this._markerSize!==e&&(this._markerSize=e,this.update())}get markerSize(){return this._markerSize}set spacing(e){this._spacing!==e&&(this._spacing=e,this.update())}get spacing(){return this._spacing}setSeriesStrokeOffset(e){let t=this.marker.size/2+e;this.line.x1=-t,this.line.x2=t,this.line.y1=0,this.line.y2=0,this.line.markDirtyTransform(),this.update()}update(){let{markerSize:e}=this,t=this.marker.constructor.center;this.marker.size=e,this.marker.x=(t.x-.5)*e,this.marker.y=(t.y-.5)*e;let n=this.line.visible?this.line.x2:-1/0,r=e/2;this.label.x=Math.max(n,r)+this.spacing}render(e){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,this.line.opacity=this.opacity,super.render(e)}};return i.className="MarkerLabel",i})();E([vi("label")],_n.prototype,"text",2);E([vi("label")],_n.prototype,"fontStyle",2);E([vi("label")],_n.prototype,"fontWeight",2);E([vi("label")],_n.prototype,"fontSize",2);E([vi("label")],_n.prototype,"fontFamily",2);E([vi("label","fill")],_n.prototype,"color",2);E([vi("marker","fill")],_n.prototype,"markerFill",2);E([vi("marker","stroke")],_n.prototype,"markerStroke",2);E([vi("marker","strokeWidth")],_n.prototype,"markerStrokeWidth",2);E([vi("marker","fillOpacity")],_n.prototype,"markerFillOpacity",2);E([vi("marker","strokeOpacity")],_n.prototype,"markerStrokeOpacity",2);E([vi("marker","visible")],_n.prototype,"markerVisible",2);E([vi("line","stroke")],_n.prototype,"lineStroke",2);E([vi("line","strokeWidth")],_n.prototype,"lineStrokeWidth",2);E([vi("line","strokeOpacity")],_n.prototype,"lineStrokeOpacity",2);E([vi("line","lineDash")],_n.prototype,"lineLineDash",2);E([vi("line","visible")],_n.prototype,"lineVisible",2);var Nh=class extends Ot{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};E([I(Xt)],Nh.prototype,"color",2);E([I(Xl,{optional:!0})],Nh.prototype,"fontStyle",2);E([I(Zl,{optional:!0})],Nh.prototype,"fontWeight",2);E([I(ke)],Nh.prototype,"fontSize",2);E([I(Ne)],Nh.prototype,"fontFamily",2);var za=class extends Ot{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};E([I(ke)],za.prototype,"size",2);E([I(Xt,{optional:!0})],za.prototype,"fill",2);E([I(Qt,{optional:!0})],za.prototype,"fillOpacity",2);E([I(Xt,{optional:!0})],za.prototype,"stroke",2);E([I(ke)],za.prototype,"strokeWidth",2);E([I(Qt)],za.prototype,"strokeOpacity",2);var Gv=class extends Ot{constructor(i){super(),this.parent=i,this.shape=hh,this.size=15,this.padding=8}};E([Ir({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],Gv.prototype,"shape",2);E([I(ke)],Gv.prototype,"size",2);E([I(ke)],Gv.prototype,"padding",2);var Vh=(()=>{let i=class extends Ot{constructor(e,t,n,r){super(),this.chartUpdateCallback=e,this.pageUpdateCallback=t,this.regionManager=n,this.cursorManager=r,this.id=sa(this),this.marker=new Gv(this),this.activeStyle=new za,this.inactiveStyle=new za,this.highlightStyle=new za,this.label=new Nh,this.group=new ot({name:"pagination"}),this.labelNode=new Vt,this.destroyFns=[],this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new hh,this._previousButton=new hh,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]);let s=this.regionManager.addRegion("pagination",this.group);this.destroyFns.push(s.addListener("click",o=>this.onPaginationClick(o)),s.addListener("hover",o=>this.onPaginationMouseMove(o))),this.update(),this.updateMarkers()}destroy(){this.destroyFns.forEach(e=>e())}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){switch(this._orientation=e,e){case"horizontal":{this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break}case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(e){this._nextButton!==e&&(this.group.removeChild(this._nextButton),this._nextButton=e,this.group.appendChild(e))}get nextButton(){return this._nextButton}set previousButton(e){this._previousButton!==e&&(this.group.removeChild(this._previousButton),this._previousButton=e,this.group.appendChild(e))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){let{size:e,padding:t}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+t}updateNextButtonPosition(){let e=this.labelNode.computeBBox();this.nextButton.translationX=e.x+e.width+this.marker.size/2+this.marker.padding}updateLabel(){let{currentPage:e,totalPages:t,labelNode:n,label:{color:r,fontStyle:s,fontWeight:o,fontSize:a,fontFamily:l}}=this;n.text=`${e+1} / ${t}`,n.fill=r,n.fontStyle=s,n.fontWeight=o,n.fontSize=a,n.fontFamily=l}updateMarkers(){let{nextButton:e,previousButton:t,nextButtonDisabled:n,previousButtonDisabled:r,activeStyle:s,inactiveStyle:o,highlightStyle:a,highlightActive:l}=this,c=(u,d)=>d?o:u===l?a:s;this.updateMarker(e,c("next",n)),this.updateMarker(t,c("previous",r))}updateMarker(e,t){var n;let{size:r}=this.marker;e.size=r,e.fill=t.fill,e.fillOpacity=(n=t.fillOpacity)!=null?n:1,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.strokeOpacity=t.strokeOpacity}enableOrDisableButtons(){let{currentPage:e,totalPages:t}=this,n=t===0,r=e===t-1,s=e===0;this.nextButtonDisabled=r||n,this.previousButtonDisabled=s||n}nextButtonContainsPoint(e,t){return!this.nextButtonDisabled&&this.nextButton.containsPoint(e,t)}previousButtonContainsPoint(e,t){return!this.previousButtonDisabled&&this.previousButton.containsPoint(e,t)}clickNext(){this.incrementPage(),this.onPaginationChanged()}clickPrevious(){this.decrementPage(),this.onPaginationChanged()}setPage(e){e=Dt(0,e,this.totalPages-1),this.currentPage!==e&&(this.currentPage=e,this.onPaginationChanged())}onPaginationClick(e){let{offsetX:t,offsetY:n}=e;this.nextButtonContainsPoint(t,n)?(this.clickNext(),e.consume()):this.previousButtonContainsPoint(t,n)&&(this.clickPrevious(),e.consume())}onPaginationMouseMove(e){let{offsetX:t,offsetY:n}=e;this.nextButtonContainsPoint(t,n)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(t,n)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){let e=ia(this.marker.shape||hh);this.previousButton=new e,this.nextButton=new e,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(e){e.append(this.group)}computeBBox(){return this.group.computeBBox()}};return i.className="Pagination",i})();E([I(Qe)],Vh.prototype,"marker",2);E([I(Qe)],Vh.prototype,"activeStyle",2);E([I(Qe)],Vh.prototype,"inactiveStyle",2);E([I(Qe)],Vh.prototype,"highlightStyle",2);E([I(Qe)],Vh.prototype,"label",2);var ic=class extends Ot{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}};E([I(ke,{optional:!0})],ic.prototype,"maxLength",2);E([I(Xt)],ic.prototype,"color",2);E([I(Xl,{optional:!0})],ic.prototype,"fontStyle",2);E([I(Zl,{optional:!0})],ic.prototype,"fontWeight",2);E([I(ke)],ic.prototype,"fontSize",2);E([I(Ne)],ic.prototype,"fontFamily",2);E([I(Qr,{optional:!0})],ic.prototype,"formatter",2);var Bh=class extends Ot{constructor(){super(...arguments),this.size=15,this.padding=8,this.enabled=!0}};E([Jr(i=>{var e;return(e=i.parent)==null?void 0:e.onMarkerShapeChange()})],Bh.prototype,"shape",2);E([I(ke)],Bh.prototype,"size",2);E([I(ke)],Bh.prototype,"padding",2);E([I(ke,{optional:!0})],Bh.prototype,"strokeWidth",2);E([I(ht)],Bh.prototype,"enabled",2);var cx=class extends Ot{};E([I(ke,{optional:!0})],cx.prototype,"strokeWidth",2);E([I(ke,{optional:!0})],cx.prototype,"length",2);var Ja=class extends Ot{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0,this.showSeriesStroke=!1,this.marker=new Bh,this.label=new ic,this.line=new cx}};E([I(ke,{optional:!0})],Ja.prototype,"maxWidth",2);E([I(ke)],Ja.prototype,"paddingX",2);E([I(ke)],Ja.prototype,"paddingY",2);E([I(ht)],Ja.prototype,"toggleSeriesVisible",2);E([I(ht)],Ja.prototype,"showSeriesStroke",2);E([I(Qe)],Ja.prototype,"marker",2);E([I(Qe)],Ja.prototype,"label",2);E([I(Qe)],Ja.prototype,"line",2);var ux=class extends Ot{};E([I(Qr,{optional:!0})],ux.prototype,"legendItemClick",2);E([I(Qr,{optional:!0})],ux.prototype,"legendItemDoubleClick",2);var Os=(()=>{let i=class extends Ot{constructor(e){super(),this.ctx=e,this.id=sa(this),this.group=new ot({name:"legend",layer:!0,zIndex:11}),this.itemSelection=Ti.select(this.group,_n),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.item=new Ja,this.listeners=new ux,this.enabled=!0,this.position="bottom",this.spacing=20,this.characterWidths=new Map,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.focus={mode:"item",index:0},this.item.marker.parent=this,this.pagination=new Vh(r=>e.updateService.update(r),r=>this.updatePageNumber(r),e.regionManager,e.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;let t=17,n=e.regionManager.addRegionFromProperties({name:"legend",bboxproviders:[this.group],canInteraction:()=>this.enabled&&this.group.visible});this.destroyFns.push(n.addListener("click",r=>this.checkLegendClick(r),t),n.addListener("dblclick",r=>this.checkLegendDoubleClick(r),t),n.addListener("hover",r=>this.handleLegendMouseMove(r)),n.addListener("leave",r=>this.handleLegendMouseExit(r),t),n.addListener("enter",r=>this.handleLegendMouseEnter(r),t),n.addListener("blur",r=>this.onBlur(r)),n.addListener("tab",r=>this.onTab(r)),n.addListener("tab-start",r=>this.onTabStart(r)),n.addListener("nav-vert",r=>this.onNav(r)),n.addListener("nav-hori",r=>this.onNav(r)),n.addListener("submit",r=>this.onSubmit(r)),e.layoutService.addListener("start-layout",r=>this.positionLegend(r.shrinkRect)),()=>this.detachLegend())}set data(e){this._data=e,this.updateGroupVisibility()}get data(){return this._data}destroy(){this.destroyFns.forEach(e=>e()),this.pagination.destroy()}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,2)}getOrientation(){if(this.orientation!==void 0)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}getCharacterWidths(e){let{characterWidths:t}=this;if(t.has(e))return t.get(e);let n={"...":Vt.getTextSize("...",e).width};return t.set(e,n),n}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(e){e.appendChild(this.group)}detachLegend(){var e;(e=this.group.parent)==null||e.removeChild(this.group)}getItemLabel(e){let{ctx:{callbackCache:t}}=this,{formatter:n}=this.item.label;return n?t.call(n,{itemId:e.itemId,value:e.label.text,seriesId:e.seriesId}):e.label.text}calcLayout(e,t){let{paddingX:n,paddingY:r,label:s,maxWidth:o,marker:{size:a,padding:l,shape:c},label:{maxLength:u=1/0,fontStyle:d,fontWeight:h,fontSize:p,fontFamily:m},line:g,showSeriesStroke:f}=this.item,y=[...this.data];this.reverseOrder&&y.reverse(),this.itemSelection.update(y);let b=[],v=gh(s),w=o??e*.8,T=a+l+n;if(this.itemSelection.each((K,ie)=>{var te,j,Y;let se=ia(c??ie.marker.shape),me=(te=ie.marker.enabled)!=null?te:this.item.marker.enabled;K.marker&&K.marker instanceof se||(K.marker=new se),K.markerSize=a,K.spacing=l,K.fontStyle=d,K.fontWeight=h,K.fontSize=p,K.fontFamily=m;let re=(j=ie.itemId)!=null?j:ie.id,ve=this.getItemLabel(ie),_e=(ve??"<unknown>").replace(/\r?\n/g," ");K.text=this.truncate(_e,u,w,T,v,re),f&&ie.line!==void 0?(K.lineVisible=!0,K.markerVisible=me,K.setSeriesStrokeOffset((Y=g.length)!=null?Y:5)):(K.lineVisible=!1,K.markerVisible=!0),b.push(K.computeBBox())}),e=Math.max(1,e),t=Math.max(1,t),!isFinite(e))return!1;let D=this.size,O=this.oldSize;D[0]=e,D[1]=t,(D[0]!==O[0]||D[1]!==O[1])&&(O[0]=D[0],O[1]=D[1]);let{pages:R,maxPageHeight:L,maxPageWidth:B}=this.updatePagination(b,e,t);this.pages=R,this.maxPageSize=[B-n,L-r];let $=this.pagination.currentPage,U=this.pages[$];if(this.pages.length<1||!U){this.visible=!1;return}this.visible=!0,this.updatePositions($),this.update()}truncate(e,t,n,r,s,o){let a="...",l=e.split(""),c=!1;if(e.length>t&&(e=`${e.substring(0,t)}`,c=!0),Math.floor(r+Vt.getTextSize(e,s).width)>n){let d="",h=this.getCharacterWidths(s),p=r+h[a];for(let m of l){if(h[m]||(h[m]=Vt.getTextSize(m,s).width),p+=h[m],p>n)break;d+=m}e=d,c=!0}return c?(e+=a,this.truncatedItems.add(o)):this.truncatedItems.delete(o),e}updatePagination(e,t,n){let r=this.getOrientation(),s=Math.min(this.paginationTrackingIndex,e.length);this.pagination.orientation=r,this.pagination.translationX=0,this.pagination.translationY=0;let{pages:o,maxPageHeight:a,maxPageWidth:l,paginationBBox:c,paginationVertical:u}=this.calculatePagination(e,t,n),d=o.findIndex(v=>v.endIndex>=s);this.pagination.currentPage=Dt(0,d,o.length-1);let{paddingX:h,paddingY:p}=this.item,m=8,g=l-h,f=a-p,y=0,b=-c.y-this.item.marker.size/2;return u?b+=f+m:(y+=-c.x+g+m,b+=(f-c.height)/2),this.pagination.translationX=y,this.pagination.translationY=b,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:a,maxPageWidth:l,pages:o}}calculatePagination(e,t,n){var r,s,o;let{paddingX:a,paddingY:l}=this.item,c=this.getOrientation(),u=["left","right"].includes(this.position),d=this.pagination.computeBBox(),h=new nt(0,0,0,0),p=[],m=0,g=0,f=0,y=v=>v.width===d.width&&v.height===d.height,b=this.maxWidth!==void 0&&this.maxHeight!==void 0;do{if(f++>10){Ie.warn("unable to find stable legend layout.");break}d=h;let v=t-(u?0:d.width),S=n-(u?d.height:0),w=f9({orientation:c,bboxes:e,maxHeight:S,maxWidth:v,itemPaddingY:l,itemPaddingX:a,forceResult:b});p=(r=w?.pages)!=null?r:[],m=(s=w?.maxPageWidth)!=null?s:0,g=(o=w?.maxPageHeight)!=null?o:0;let T=p.length;if(this.pagination.visible=T>1,this.pagination.totalPages=T,this.pagination.update(),h=this.pagination.computeBBox(),!this.pagination.visible)break}while(!y(h));return{maxPageWidth:m,maxPageHeight:g,pages:p,paginationBBox:d,paginationVertical:u}}getPageItemCount(e){let t=0;for(let n of this.pages[e].columns)t+=n.indices.length;return t}getNodeIndexFromFocusIndex(){let{index:e}=this.focus,t=this.pages[this.pagination.currentPage],n=0;for(let r of t.columns){if(e<n+r.indices.length)return r.indices[e-n];n+=r.indices.length}return-1}updatePositions(e=0){let{item:{paddingY:t},itemSelection:n,pages:r}=this;if(r.length<1||!r[e])return;let{columns:s,startIndex:o,endIndex:a}=r[e],l=0,c=0,u=s.length,d=s[0].indices.length,h=this.getOrientation()==="horizontal",p=s[0].bboxes[0].height+t,m=[];n.each((g,f,y)=>{var b,v;if(y<o||y>a){g.visible=!1;return}let S=y-o,w=0,T=0;h?(w=S%u,T=Math.floor(S/u)):(w=Math.floor(S/d),T=S%d),g.visible=!0;let D=s[w];D&&(c=p*T,l=(b=m[T])!=null?b:0,m[T]=((v=m[T])!=null?v:0)+D.columnWidth,g.translationX=Math.floor(l),g.translationY=Math.floor(c))})}updatePageNumber(e){let{pages:t}=this,{startIndex:n,endIndex:r}=t[e];n===0?this.paginationTrackingIndex=0:e===t.length-1?this.paginationTrackingIndex=r:this.paginationTrackingIndex=Math.floor((n+r)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(e),this.ctx.updateService.update(6)}update(){let{label:{color:e},marker:t,line:n,showSeriesStroke:r}=this.item;this.itemSelection.each((s,o)=>{var a,l;let c=o.marker;s.markerFill=c.fill,s.markerStroke=c.stroke,s.markerStrokeWidth=(a=t.strokeWidth)!=null?a:Math.min(2,c.strokeWidth),s.markerFillOpacity=c.fillOpacity,s.markerStrokeOpacity=c.strokeOpacity,s.opacity=o.enabled?1:.5,s.color=e;let{line:u}=o;r&&u!==void 0&&(s.lineStroke=u.stroke,s.lineStrokeOpacity=u.strokeOpacity,s.lineStrokeWidth=(l=n.strokeWidth)!=null?l:Math.min(2,u.strokeWidth),s.lineLineDash=u.lineDash)})}getDatumForPoint(e,t){let n=[],r={dist:1/0,datum:void 0};for(let o of this.group.children){if(!o.visible||!(o instanceof _n))continue;let a=o.computeBBox();if(a.grow(this.item.paddingX/2,"horizontal"),a.grow(this.item.paddingY/2,"vertical"),a.containsPoint(e,t))return o.datum;let l=e-a.x-this.item.paddingX/2,c=t-a.y-this.item.paddingY/2,u=mt(l,2)+mt(c,2);l>=0&&c>=0&&u<r.dist&&(r.dist=u,r.datum=o.datum),n.push(a)}if(nt.merge(n).containsPoint(e,t))return r.datum}computePagedBBox(){let e=this.group.computeBBox();if(this.pages.length<=1)return e;let[t,n]=this.maxPageSize;return e.height=Math.max(n,e.height),e.width=Math.max(t,e.width),e}checkLegendClick(e){let t=this.getDatumForPoint(e.offsetX,e.offsetY);this.doClick(t)&&e.consume()}doClick(e){let{listeners:{legendItemClick:t},ctx:{chartService:n,highlightManager:r},item:{toggleSeriesVisible:s},preventHidingAll:o}=this;if(!e)return!1;let{id:a,itemId:l,enabled:c}=e,u=n.series.find(h=>h.id===a);if(!u)return!1;let d=c;if(s){d=!c,o&&!d&&n.series.flatMap(m=>m.getLegendData("category")).filter(m=>m.enabled).length<2&&(d=!0);let h=d?"visible":"hidden";this.ctx.ariaAnnouncementService.announceValue(`${h}`),this.ctx.chartEventManager.legendItemClick(u,l,d,e.legendItemName)}return d?r.updateHighlight(this.id,{series:u,itemId:l,datum:void 0}):r.updateHighlight(this.id),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),t?.({type:"click",enabled:d,itemId:l,seriesId:u.id}),!0}checkLegendDoubleClick(e){var t;let{listeners:{legendItemDoubleClick:n},ctx:{chartService:r},item:{toggleSeriesVisible:s}}=this;if(r.mode==="integrated")return;let o=this.getDatumForPoint(e.offsetX,e.offsetY);if(!o)return;let{id:a,itemId:l,seriesId:c}=o,u=r.series.find(d=>d.id===a);if(u){if(e.consume(),s){let d=r.series.flatMap(m=>m.getLegendData("category")),h=d.filter(m=>m.enabled).length,p=d.find(m=>m.itemId===l&&m.seriesId===c);this.ctx.chartEventManager.legendItemDoubleClick(u,l,(t=p?.enabled)!=null?t:!1,h,p?.legendItemName)}this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),n?.({type:"dblclick",enabled:!0,itemId:l,seriesId:u.id})}}handleLegendMouseMove(e){if(!this.enabled)return;let{offsetX:t,offsetY:n}=e;e.consume();let r=this.getDatumForPoint(t,n);this.doHover(e,r)}doHover(e,t){var n;let{item:{toggleSeriesVisible:r},listeners:s}=this;if(e===void 0||t===void 0){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id);return}let o=t?this.ctx.chartService.series.find(a=>a.id===t?.id):void 0;if(t&&this.truncatedItems.has((n=t.itemId)!=null?n:t.id)){let{offsetX:a,offsetY:l}=e;this.ctx.tooltipManager.updateTooltip(this.id,{offsetX:a,offsetY:l,lastPointerEvent:e,showArrow:!1},vh({content:this.getItemLabel(t)}))}else this.ctx.tooltipManager.removeTooltip(this.id);(r||s.legendItemClick!=null||s.legendItemDoubleClick!=null)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),t?.enabled&&o?this.ctx.highlightManager.updateHighlight(this.id,{series:o,itemId:t?.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}handleLegendMouseExit(e){this.doMouseExit()}doMouseExit(){this.ctx.cursorManager.updateCursor(this.id),this.ctx.tooltipManager.removeTooltip(this.id),this.ctx.interactionManager.getState()===16&&this.ctx.highlightManager.updateHighlight(this.id)}handleLegendMouseEnter(e){let{enabled:t,item:{toggleSeriesVisible:n},listeners:{legendItemClick:r,legendItemDoubleClick:s}}=this,o=this.getDatumForPoint(e.offsetX,e.offsetY);t&&o!==void 0&&(n||r!=null||s!=null)&&this.ctx.cursorManager.updateCursor(this.id,"pointer")}onBlur(e){this.doMouseExit(),this.focus.mode="item",this.ctx.regionManager.updateFocusIndicatorRect(void 0)}onTab(e){this.updateFocus(),e.consume()}onTabStart(e){if(!this.pagination.visible||!this.pagination.enabled)return;let t=n=>{this.focus.mode=n,this.updateFocus(),e.consume()};this.focus.mode==="item"&&e.delta===1?(this.focus.index=this.pagination.currentPage===0?1:0,t("page")):this.focus.mode==="page"&&e.delta===-1&&(this.focus.index=0,t("item"))}onNav(e){if(this.focus.mode==="item"){let t=this.focus.index+e.delta,n=this.getPageItemCount(this.pagination.currentPage);this.focus.index=Dt(-1,t,n),this.updateFocus(),e.consume()}else this.focus.mode==="page"&&(e.delta<0&&(this.focus.index=0),e.delta>0&&(this.focus.index=1),this.updateFocus(),e.consume())}onSubmit(e){this.focus.mode==="item"?this.doClick(this.getFocusedItem().datum):this.focus.mode==="page"&&(this.focus.index===0&&this.pagination.clickPrevious(),this.focus.index===1&&this.pagination.clickNext(),this.ctx.ariaAnnouncementService.announceValue(`Legend page ${this.pagination.currentPage+1} of ${this.pages.length}`))}maybeChangeFocusPage(){let e=this.pagination.currentPage,t=this.getPageItemCount(e);if(this.focus.index===-1)this.pagination.setPage(e-1);else if(this.focus.index===t)this.pagination.setPage(e+1);else return;let{currentPage:n}=this.pagination;e===n?this.focus.index=Dt(0,this.focus.index,t-1):this.focus.index===-1?this.focus.index=this.getPageItemCount(n)-1:this.focus.index=0}getFocusedItem(){if(this.focus.mode!=="item")return Ie.error("getFocusedItem() should be called only when focus.mode is 'item'"),{nodeIndex:-1,node:void 0,datum:void 0};this.maybeChangeFocusPage();let e=this.getNodeIndexFromFocusIndex();if(e<0)return Ie.error(`Cannot access negative nodeIndex ${e}`),{nodeIndex:-1,node:void 0,datum:void 0};let t=this.itemSelection.nodes()[e],n=this.data,r;return e<n.length?r=this.data[e]:Ie.error(`Cannot access datum[${e}]`),{nodeIndex:e,node:t,datum:r}}updateFocus(){let{focus:e,pagination:t}=this;if(e.mode==="item"){let{nodeIndex:n,node:r,datum:s}=this.getFocusedItem();if(s===void 0)return;let o=r?.computeTransformedBBox();this.doHover(qk(this.ctx.regionManager,{bbox:o,showFocusBox:!0}),s);let a=s&&this.getItemLabel(s);if(a){let l=s.enabled?"visible":"hidden";this.ctx.ariaAnnouncementService.announceValue(`Legend item ${n+1} of ${this.data.length}, ${a}, ${l}`)}}else if(e.mode==="page"){let n=e.index===0?t.previousButton:t.nextButton;this.ctx.regionManager.updateFocusIndicatorRect(n.computeTransformedBBox());let r=["Previous legend page","Next legend page"][e.index];this.ctx.ariaAnnouncementService.announceValue(`${r}, button`)}}positionLegend(e){let t=e.clone();if(!this.enabled||!this.data.length)return{shrinkRect:t};let[n,r]=this.calculateLegendDimensions(e);this.group.translationX=0,this.group.translationY=0,this.calcLayout(n,r);let s=this.computePagedBBox(),o=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return e.height-s.height;case"right":default:return e.width-s.width}};if(this.visible){let a,l;switch(this.position){case"top":case"bottom":a=(e.width-s.width)/2,l=o(),t.shrink(s.height,this.position);break;case"left":case"right":default:a=o(),l=(e.height-s.height)/2,t.shrink(s.width,this.position)}this.group.translationX=Math.floor(-s.x+e.x+a),this.group.translationY=Math.floor(-s.y+e.y+l)}if(this.visible&&this.enabled&&this.data.length){let a=this.spacing;t.shrink(a,this.position);let l=s.clone();l.x+=this.group.translationX,l.y+=this.group.translationY}return{shrinkRect:t}}calculateLegendDimensions(e){let{width:t,height:n}=e,r=t/n,s=.5,o=.2,a=.25,l,c;switch(this.position){case"top":case"bottom":let u=r<1?Math.min(s,o*(1/r)):o;l=this.maxWidth?Math.min(this.maxWidth,t):t,c=this.maxHeight?Math.min(this.maxHeight,n):Math.round(n*u);break;case"left":case"right":default:let d=r>1?Math.min(s,a*r):a;l=this.maxWidth?Math.min(this.maxWidth,t):Math.round(t*d),c=this.maxHeight?Math.min(this.maxHeight,n):n}return[l,c]}};return i.className="Legend",i})();E([I(Qe)],Os.prototype,"pagination",2);E([I(Qe)],Os.prototype,"item",2);E([I(Qe)],Os.prototype,"listeners",2);E([Jr(i=>i.updateGroupVisibility()),I(ht)],Os.prototype,"enabled",2);E([I(LS)],Os.prototype,"position",2);E([I(ke,{optional:!0})],Os.prototype,"maxWidth",2);E([I(ke,{optional:!0})],Os.prototype,"maxHeight",2);E([I(ht,{optional:!0})],Os.prototype,"reverseOrder",2);E([I(Li(["horizontal","vertical"],"an orientation"),{optional:!0})],Os.prototype,"orientation",2);E([I(ht,{optional:!0})],Os.prototype,"preventHidingAll",2);E([I(ke)],Os.prototype,"spacing",2);var x9={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology"],instanceConstructor:Os,packageType:"community"},to=(()=>{let i=class extends Fs{constructor(){super(...arguments),this.zIndex=3,this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(e){this._centerX!==e&&(this._centerX=e,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(e){this._centerY!==e&&(this._centerY=e,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(e){this._gripLineGap!==e&&(this._gripLineGap=e,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(e){this._gripLineLength!==e&&(this._gripLineLength=e,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)}get height(){return this._height}layout(e,t){this.centerX=e,this.centerY=t}static align(e,t,n,r,s,o,a,l){let c=e.strokeWidth/2,u=e.align(n+s*a)+c,d=u+e.align(n+s*a,s*(l-a))-2*c,h=e.align(r+o/2)+c;e.layout(u,h),t.layout(d,h)}computeBBox(){let{centerX:e,centerY:t,width:n,height:r}=this,s=e-n/2,o=t-r/2;return new nt(s,o,n,r)}isPointInPath(e,t){let n=this.transformPoint(e,t);return this.computeBBox().containsPoint(n.x,n.y)}updatePath(){var e,t,n;let{centerX:r,centerY:s,path:o,strokeWidth:a,gripLineGap:l,gripLineLength:c}=this,u=(n=(t=(e=this.layerManager)==null?void 0:e.canvas)==null?void 0:t.pixelRatio)!=null?n:1;o.clear();let d=Math.floor(this.width/2*u)/u,h=Math.floor(this.height/2*u)/u;o.moveTo(r-d,s-h),o.lineTo(r+d,s-h),o.lineTo(r+d,s+h),o.lineTo(r-d,s+h),o.closePath();let p=Math.floor((l+a)/2*u)/u,m=Math.floor(c/2*u)/u;o.moveTo(r-p,s-m),o.lineTo(r-p,s+m),o.moveTo(r+p,s-m),o.lineTo(r+p,s+m)}};return i.className="RangeHandle",i})();E([I(Xt)],to.prototype,"_fill",2);E([I(Xt)],to.prototype,"_stroke",2);E([I(ke)],to.prototype,"_strokeWidth",2);E([I(FD)],to.prototype,"_lineCap",2);E([I(ke)],to.prototype,"_width",2);E([I(ke)],to.prototype,"_gripLineGap",2);E([I(ke)],to.prototype,"_gripLineLength",2);E([I(ke)],to.prototype,"_height",2);var _9=(()=>{let i=class extends Fs{constructor(){super(...arguments),this.zIndex=2,this.x=0,this.y=0,this.width=200,this.height=30,this.min=0,this.max=1}layout(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r,this.dirtyPath=!0}update(e,t){this.min=isNaN(e)?this.min:e,this.max=isNaN(t)?this.max:t,this.dirtyPath=!0}computeBBox(){let{x:e,y:t,width:n,height:r}=this;return new nt(e,t,n,r)}computeVisibleRangeBBox(){let{x:e,y:t,width:n,height:r,min:s,max:o}=this,a=e+n*s,l=e+n*o;return new nt(a,t,l-a,r)}updatePath(){let{path:e,x:t,y:n,width:r,height:s,min:o,max:a,strokeWidth:l}=this,c=l/2;e.clear();let u=this.align(t)+c,d=this.align(n)+c,h=u+this.align(t,r)-2*c,p=d+this.align(n,s)-2*c;e.moveTo(u,d),e.lineTo(h,d),e.lineTo(h,p),e.lineTo(u,p),e.closePath();let m=this.align(t+r*o)+c,g=m+this.align(t+r*o,r*(a-o))-2*c;e.moveTo(m,d),e.lineTo(m,p),e.lineTo(g,p),e.lineTo(g,d),e.closePath()}};return i.className="RangeMask",i})(),w9=class extends ot{constructor(i){super({name:"rangeSelectorGroup",layer:!0,zIndex:12}),this.x=0,this.y=0,this.width=200,this.height=30,this.lOffset=0,this.rOffset=0,this.isContainerNode=!0,this.background=new ot({name:"navigator-background"}),this.background.zIndex=1,this.appendChild(this.background),this.append(i)}layout(i,e,t,n,r,s){this.x=i,this.y=e,this.width=t,this.height=n,this.lOffset=r,this.rOffset=s,this.background.translationX=i,this.background.translationY=e}updateBackground(i,e){i!=null&&this.background.removeChild(i),e!=null&&this.background.appendChild(e)}computeBBox(){let{x:i,y:e,width:t,height:n,lOffset:r,rOffset:s}=this;return new nt(i-r,e,t+(r+s),n)}},nc=class extends hv{constructor(i){super(),this.ctx=i,this.miniChart=void 0,this.enabled=!1,this.mask=new _9,this.minHandle=new to,this.maxHandle=new to,this.height=30,this.margin=10,this.x=0,this.y=0,this.width=0,this.rangeSelector=new w9([this.mask,this.minHandle,this.maxHandle]),this._min=0,this._max=1,this.minRange=.001;let e=i.regionManager.addRegion("navigator",this.rangeSelector),t=25;this.destroyFns.push(i.scene.attachNode(this.rangeSelector),e.addListener("hover",n=>this.onHover(n),t),e.addListener("drag-start",n=>this.onDragStart(n),t),e.addListener("drag",n=>this.onDrag(n),t),e.addListener("drag-end",()=>this.onDragEnd(),t),e.addListener("leave",n=>this.onLeave(n),t),i.zoomManager.addListener("zoom-change",n=>this.onZoomChange(n))),this.updateGroupVisibility()}updateBackground(i,e){var t;(t=this.rangeSelector)==null||t.updateBackground(i,e)}updateGroupVisibility(){let{enabled:i}=this;this.rangeSelector==null||i===this.rangeSelector.visible||(this.rangeSelector.visible=i,i?this.updateZoom():this.ctx.zoomManager.updateZoom("navigator"))}performLayout(i){return we(this,arguments,function*({shrinkRect:e}){if(this.enabled){let t=this.height+this.margin;e.shrink(t,"bottom"),this.y=e.y+e.height+this.margin}else this.y=0;return{shrinkRect:e}})}performCartesianLayout(i){return we(this,null,function*(){let{x:e,width:t}=i.seriesRect;if(this.enabled){let{y:n,height:r}=this;this.layoutNodes(e,n,t,r)}this.x=e,this.width=t})}onHover(i){if(!this.enabled)return;let{mask:e,minHandle:t,maxHandle:n}=this,{offsetX:r,offsetY:s}=i;t.containsPoint(r,s)||n.containsPoint(r,s)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):e.computeVisibleRangeBBox().containsPoint(r,s)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator")}onDragStart(i){if(!this.enabled)return;let{mask:e,minHandle:t,maxHandle:n,x:r,width:s,_min:o}=this,{offsetX:a,offsetY:l}=i;t.zIndex<n.zIndex?n.containsPoint(a,l)?this.dragging="max":t.containsPoint(a,l)&&(this.dragging="min"):t.containsPoint(a,l)?this.dragging="min":n.containsPoint(a,l)&&(this.dragging="max"),this.dragging==null&&e.computeVisibleRangeBBox().containsPoint(a,l)&&(this.dragging="pan",this.panStart=(a-r)/s-o),this.dragging!=null&&this.ctx.zoomManager.fireZoomPanStartEvent("navigator")}onDrag(i){if(!this.enabled||this.dragging==null)return;let{dragging:e,minRange:t,panStart:n,x:r,width:s}=this,{_min:o,_max:a}=this,{offsetX:l}=i,c=(l-r)/s;if(e==="min")o=Dt(0,c,a-t);else if(e==="max")a=Dt(o+t,c,1);else if(e==="pan"&&n!=null){let u=a-o;o=Dt(0,c-n,1-u),a=o+u}this._min=o,this._max=a,this.updateZoom()}onDragEnd(){this.dragging=void 0}onLeave(i){this.ctx.cursorManager.updateCursor("navigator")}onZoomChange(i){let{x:e}=i;e&&(this._min=e.min,this._max=e.max,this.updateNodes(e.min,e.max))}layoutNodes(i,e,t,n){let{rangeSelector:r,mask:s,minHandle:o,maxHandle:a,_min:l,_max:c}=this;r.layout(i,e,t,n,o.width/2,a.width/2),s.layout(i,e,t,n),to.align(o,a,i,e,t,n,l,c),l+(c-l)/2<.5?(o.zIndex=3,a.zIndex=4):(o.zIndex=4,a.zIndex=3)}updateNodes(i,e){this.mask.update(i,e)}updateZoom(){if(!this.enabled)return;let{_min:i,_max:e}=this,t=this.ctx.zoomManager.getZoom();if(i==null||e==null)return;let n=r=>{this.min==null&&this.max==null||Ie.warnOnce(`Could not apply [navigator.min] or [navigator.max] as [${r}] has modified the initial zoom state.`)};return this.ctx.zoomManager.updateZoom("navigator",{x:{min:i,max:e},y:t?.y},!1,n)}};E([I(Qe,{optional:!0})],nc.prototype,"miniChart",2);E([I(ht),Jr(i=>i.updateGroupVisibility())],nc.prototype,"enabled",2);E([I(ke)],nc.prototype,"height",2);E([I(ke)],nc.prototype,"margin",2);E([Ir({newValue(i){this._min=i,this.updateZoom()}}),I(Ps(Qt,Dh("max")),{optional:!0})],nc.prototype,"min",2);E([Ir({newValue(i){this._max=i,this.updateZoom()}}),I(Ps(Qt,kh("min")),{optional:!0})],nc.prototype,"max",2);var xI={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:nc,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8}}}},Uv=({takeColors:i})=>{let{fills:[e],strokes:[t]}=i(1);return{fill:e,stroke:t}},Gh=i=>{let{fill:e,stroke:t}=Uv(i);return{marker:{fill:e,stroke:t}}};function _I(i,e,t,n,r){let{addPhaseFn:s,updatePhaseFn:o,removePhaseFn:a}=r,l=(c,u,d)=>{t.animate({id:`${i}_${e}_${u.id}_${c}`,groupId:i,from:0,to:1,ease:mm,collapsable:!1,onUpdate(h,p){p&&c!=="removed"||(u.path.clear(!0),d(h,u),u.checkPathDirty())},onStop(){c==="added"&&(u.path.clear(!0),d(1,u),u.checkPathDirty())},phase:dr[c]})};for(let c of n)t.isSkipped()||(l("removed",c,a),l("updated",c,o)),l("added",c,s)}var zp=null;function wi(i){if(i!=null)return i===""?"":(zp??(zp=Ui("div")),zp.textContent=String(i),zp.innerHTML)}function ni({id:i},e,t,...n){oa(i,e,t,n,{opacity:0},{opacity:1},{phase:"trailing"})}function gu({id:i},e,t,...n){oa(i,e,t,n,{opacity:1},{opacity:0},{phase:"remove"})}function el(i){return{opacity:1}}var dx=class extends Ot{constructor(){super(...arguments),this._dirty=3}markDirty(i,e=1){this._dirty<e&&(this._dirty=e)}markClean(i){this._dirty=0}isDirty(){return this._dirty>0}},fo=class extends dx{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};E([I(ht),Ze({redraw:3})],fo.prototype,"enabled",2);E([I(Xt),Ze({redraw:3})],fo.prototype,"color",2);E([I(fi),Ze({redraw:3})],fo.prototype,"xOffset",2);E([I(fi),Ze({redraw:3})],fo.prototype,"yOffset",2);E([I(ke),Ze({redraw:3})],fo.prototype,"blur",2);var wI=ui(i=>fI(i)||typeof Hn=="function"&&Object.create(i.prototype)instanceof Hn,"a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),Or=class extends dx{constructor(){super(...arguments),this.enabled=!0,this.shape=Ha,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){let{size:i,fill:e,fillOpacity:t,stroke:n,strokeWidth:r,strokeOpacity:s}=this;return{size:i,fill:e,fillOpacity:t,stroke:n,strokeWidth:r,strokeOpacity:s}}getDiameter(){return this.size+this.strokeWidth}};E([I(ht),Ze({redraw:3})],Or.prototype,"enabled",2);E([I(wI),Ze({redraw:3})],Or.prototype,"shape",2);E([I(ke),Ze({redraw:3})],Or.prototype,"size",2);E([I(Xt,{optional:!0}),Ze({redraw:3})],Or.prototype,"fill",2);E([I(Qt),Ze({redraw:3})],Or.prototype,"fillOpacity",2);E([I(Xt,{optional:!0}),Ze({redraw:3})],Or.prototype,"stroke",2);E([I(ke),Ze({redraw:3})],Or.prototype,"strokeWidth",2);E([I(Qt),Ze({redraw:3})],Or.prototype,"strokeOpacity",2);E([I(Qr,{optional:!0}),Ze({redraw:3})],Or.prototype,"formatter",2);var EI=class extends Ot{constructor(){super(...arguments),this.enabled=!1}};E([I(ht)],EI.prototype,"enabled",2);var Lr=class extends Ot{constructor(){super(...arguments),this.enabled=!0,this.interaction=new EI,this.position=new Ih}toTooltipHtml(i,e){return this.renderer?vh(this.renderer(e),i):vh(i)}};E([I(ht)],Lr.prototype,"enabled",2);E([I(ht,{optional:!0})],Lr.prototype,"showArrow",2);E([I(Qr,{optional:!0})],Lr.prototype,"renderer",2);E([I(Qe)],Lr.prototype,"interaction",2);E([I(Qe)],Lr.prototype,"position",2);var Nn=class extends ec{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.shadow=new fo,this.marker=new Or,this.label=new an,this.tooltip=new Lr,this.connectMissingData=!1}};E([I(Ne)],Nn.prototype,"xKey",2);E([I(Ne,{optional:!0})],Nn.prototype,"xName",2);E([I(Ne)],Nn.prototype,"yKey",2);E([I(Ne,{optional:!0})],Nn.prototype,"yName",2);E([I(ke,{optional:!0})],Nn.prototype,"normalizedTo",2);E([I(Xt)],Nn.prototype,"fill",2);E([I(Qt)],Nn.prototype,"fillOpacity",2);E([I(Xt)],Nn.prototype,"stroke",2);E([I(ke)],Nn.prototype,"strokeWidth",2);E([I(Qt)],Nn.prototype,"strokeOpacity",2);E([I(qa)],Nn.prototype,"lineDash",2);E([I(ke)],Nn.prototype,"lineDashOffset",2);E([I(Qe)],Nn.prototype,"shadow",2);E([I(Qe)],Nn.prototype,"marker",2);E([I(Qe)],Nn.prototype,"label",2);E([I(Qe)],Nn.prototype,"tooltip",2);E([I(ht)],Nn.prototype,"connectMissingData",2);function xm({id:i},e,t,...n){let r={phase:t?dr[t]:"trailing"};oa(i,"markers",e,n,{opacity:0},{opacity:1},r),n.forEach(s=>s.cleanup())}function hx({id:i},e,...t){oa(i,"markers",e,t,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),t.forEach(n=>n.cleanup())}function px({id:i,nodeDataDependencies:e},t,...n){let r=e.seriesRectWidth;Ei(i,"markers",t,n,{fromFn:(a,l)=>{var c,u;let d=(u=(c=l.midPoint)==null?void 0:c.x)!=null?u:r,h=Dt(0,ED(d/r),1);return isNaN(h)&&(h=0),{scalingX:0,scalingY:0,delay:h,duration:ev,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function jm(i){return{opacity:1,scalingX:1,scalingY:1}}function _m(i,e){var t,n,r,s;return{translationX:(n=(t=e.point)==null?void 0:t.x)!=null?n:NaN,translationY:(s=(r=e.point)==null?void 0:r.y)!=null?s:NaN}}function mx(i,e){let t=(o,a)=>{let l=i[a][o];return Array.isArray(l)?l[0]:l},n=o=>{let{xValue:a}=o;return i.moved[a]?{point:t(a,"moved"),status:"updated"}:i.removed[a]?{point:t(a,"removed"),status:"removed"}:i.added[a]?{point:t(a,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(o,a)=>{var l,c,u,d,h,p;let{status:m,point:g}=n(a);if(m==="unknown")return{opacity:0};let f={translationX:(c=(l=g?.from)==null?void 0:l.x)!=null?c:o.translationX,translationY:(d=(u=g?.from)==null?void 0:u.y)!=null?d:o.translationY,opacity:o.opacity,phase:dr[m]};return e==="added"?Ue(ue({},f),{opacity:0,translationX:(h=g?.to)==null?void 0:h.x,translationY:(p=g?.to)==null?void 0:p.y,phase:dr.added}):(m==="added"&&(f.opacity=0),f)},toFn:(o,a)=>{var l,c;let{status:u,point:d}=n(a);if(u==="unknown")return{opacity:0};let h={translationX:a.point.x,translationY:a.point.y,opacity:1,phase:dr[u]};return u==="removed"||e==="removed"?Ue(ue({},h),{translationX:(l=d?.to)==null?void 0:l.x,translationY:(c=d?.to)==null?void 0:c.y,opacity:0,phase:dr.removed}):h}}}function Ym(i,{datumIndex:e}){let t=i.getNodeData();if(t===void 0)return;let n=t[e];if(n===void 0||n.point===void 0)return;let r=i.getFormattedMarkerStyle(n).size,s=r/2,{x:o,y:a}=i.contentGroup.inverseTransformPoint(n.point.x-s,n.point.y-s);return new nt(o,a,r,r)}function aS(i){return i.reduce(({min:e,max:t},n)=>((e==null||e.point.x>n.point.x)&&(e=n),(t==null||t.point.x<n.point.x)&&(t=n),{min:e,max:t}),{})}function CP(i,e,t){let n=(e.y-i.y)/(e.x-i.x),r=(t-i.x)*n+i.y;return{x:t,y:r}}function bP(i,e,t,n){let r=-1,s=0,o=[];for(;s<i.length;){if(i[s].change===e){o.push(i[s]),s++;continue}if(i[s].change===t){s++;continue}o.length>0&&(n(o,r,s),o.length=0),r=s,s++}o.length>0&&n(o,r,s)}function gx(i,e){bP(i,"out","in",(t,n,r)=>{var s,o;n===-1&&i[r]?t.forEach(a=>a.to=i[r].from):r===i.length&&i[n]?t.forEach(a=>a.to=i[n].from):e==="intersect"&&((s=i[n])!=null&&s.from)&&((o=i[r])!=null&&o.from)?t.forEach(a=>a.to=CP(i[n].from,i[r].from,a.from.x)):t.forEach(a=>a.to=a.from)}),bP(i,"in","out",(t,n,r)=>{var s,o;n===-1&&i[r]?t.forEach(a=>a.from=i[r].to):r===i.length&&i[n]?t.forEach(a=>a.from=i[n].to):e==="intersect"&&((s=i[n])!=null&&s.to)&&((o=i[r])!=null&&o.to)?t.forEach(a=>a.from=CP(i[n].to,i[r].to,a.to.x)):t.forEach(a=>a.from=a.to)})}function SP(i,e,t){let n=isNaN(i.x)?e.x:i.x,r=isNaN(i.y)?e.y:i.y,s=e.x-i.x,o=e.y-i.y,a=isNaN(s)?0:s*t,l=isNaN(o)?0:o*t;return{x:n+a,y:r+l}}function fx(i,e,t){let{path:n}=t,r;for(let s of i){let{from:o,to:a}=s,l=e[s.change];if(l==null||o==null||a==null)continue;let{x:c,y:u}=SP(o,a,l);if(s.moveTo===!1)n.lineTo(c,u);else if(s.moveTo===!0||!r)n.moveTo(c,u);else if(r){let d=s.moveTo==="in"?l:1-l,{x:h,y:p}=SP(r,{x:c,y:u},d);n.lineTo(h,p),n.moveTo(c,u)}r={x:c,y:u}}}function vx({id:i,visible:e,nodeDataDependencies:t},n,...r){let{seriesRectWidth:s,seriesRectHeight:o}=t;oa(i,"path_properties",n,r,{clipX:0},{clipX:s},{phase:"initial",start:{clipMode:"normal",clipY:o,visible:e},finish:{clipMode:void 0,visible:e}})}function am({id:i},e,t,n="add",...r){oa(i,e,t,r,{opacity:0},{opacity:1},{phase:n})}function E9({id:i},e,t,...n){oa(i,e,t,n,{opacity:1},{opacity:0},{phase:"remove"})}function yx(i){return e=>({opacity:i.getOpacity(),clipScalingX:1,clipMode:void 0})}function lv({nodeDataDependencies:i},e){let t=n=>isFinite(n)?n:0;e.clipX=t(i.seriesRectWidth),e.clipY=t(i.seriesRectHeight)}function xP(i){return i.type==="continuous"||i.type==="log"}function _P(i){return i.type==="category"}function wP(i,e){return i.domain.length===e.domain.length&&i.range.length===e.range.length&&i.domain.every((t,n)=>t===e.domain[n])&&i.range.every((t,n)=>t===e.range[n])}function EP(i,e){return i===void 0||e===void 0?i!==void 0||e!==void 0:xP(i)&&xP(e)?i.type===e.type&&wP(i,e):_P(i)&&_P(e)?wP(i,e):!1}function k0(i,e){if(!e)return NaN;if(i instanceof Date&&(i=i.getTime()),e.type==="continuous"&&typeof i=="number")return(i-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0];if(e.type==="log"&&typeof i=="number")return e.convert(i);let t=e.domain.findIndex(n=>n===i);return t>=0?e.range[t]:NaN}function T9(i,e){return!EP(i.scales.x,e.scales.x)||!EP(i.scales.y,e.scales.y)}function M9(i,e){let t=Number(i),n=Number(e);return!isNaN(t)&&!isNaN(n)?Math.abs(n-t)<.25:i===e}function TI(i=!1,e=!1){return i===e?!!i:i?"in":"out"}function wm(i,e,t={}){var n,r,s,o;let{backfillSplitMode:a="intersect"}=t,l=v=>{var S,w;return{x:k0((S=v.xValue)!=null?S:NaN,i.scales.x),y:k0((w=v.yValue)!=null?w:NaN,i.scales.y)}},c=v=>{var S,w;return{x:k0((S=v.xValue)!=null?S:NaN,e.scales.x),y:k0((w=v.yValue)!=null?w:NaN,e.scales.y)}},u=[],d={added:{},moved:{},removed:{}},h=(v,S,w,T="move")=>{v&&(isNaN(v.point.x)||isNaN(v.point.y))&&(v=S);let D={from:v?.point,to:S?.point,moveTo:TI(v?.point.moveTo,S?.point.moveTo),change:T};T==="move"?(d.moved[w]=D,y++,b++):T==="in"?(d.added[w]=D,b++):T==="out"&&(d.removed[w]=D,y++),u.push(D)},{min:p,max:m}=aS(e.nodeData),{min:g,max:f}=aS(i.nodeData),y=0,b=0;for(;y<e.nodeData.length||b<i.nodeData.length;){let v=e.nodeData[y],S=i.nodeData[b],w=v?l(v):void 0,T=S?c(S):void 0,D=void 0;if(w&&M9(w.x,S?.point.x))h(v,S,S.xValue,"move");else if(w&&w.x<((n=g?.point.x)!=null?n:-1/0))h(v,D,v.xValue,"out");else if(w&&w.x>((r=f?.point.x)!=null?r:1/0))h(v,D,v.xValue,"out");else if(T&&T.x<((s=p?.point.x)!=null?s:-1/0))h(D,S,S.xValue,"in");else if(T&&T.x>((o=m?.point.x)!=null?o:1/0))h(D,S,S.xValue,"in");else if(w&&w.x<S?.point.x)h(v,D,v.xValue,"out");else if(T&&T.x<v?.point.x)h(D,S,S.xValue,"in");else if(v)h(v,D,v.xValue,"out");else if(S)h(D,S,S.xValue,"in");else throw new Error("Unable to process points")}return gx(u,a),{result:u,resultMap:d}}function Em(i,e,t,n={}){var r,s,o;let{backfillSplitMode:a="intersect",multiDatum:l=!1}=n,c=[],u={added:{},moved:{},removed:{}},d={added:{},moved:{},removed:{}},h={in:"added",move:"moved",out:"removed"},p,m,g=(S,w)=>{var T,D;let O=h[w.change];l?((D=(T=d[O])[S])!=null||(T[S]=[]),d[O][S].push(w)):u[O][S]=w,p=w,m=ch(S)},f=0,y=0,b=!1;for(;f<e.nodeData.length||y<i.nodeData.length;){let S=e.nodeData[f],w=i.nodeData[y],T=ch(S?.xValue),D=ch(w?.xValue),O;if(T===D)O={change:"move",moveTo:TI((r=S.point.moveTo)!=null?r:!1,w.point.moveTo),from:S.point,to:w.point},g(S?.xValue,O),f++,y++;else if(t?.removed.has(String(T)))O={change:"out",moveTo:(s=S.point.moveTo)!=null?s:!1,from:S.point},g(S?.xValue,O),f++;else if(t?.added.has(String(D)))O={change:"in",moveTo:(o=w.point.moveTo)!=null?o:!1,to:w.point},g(w?.xValue,O),y++;else if(l&&p&&m===T)O=ue({},p),g(S?.xValue,O),f++;else if(l&&p&&m===D)O=ue({},p),g(w?.xValue,O),y++;else{b=!0;break}c.push(O)}let v=-1/0;return b||(b=c.some(S=>{let{change:w,to:{x:T=-1/0}={}}=S;if(w==="out")return;let D=T<v;return v=T,D})),b?{result:void 0,resultMap:void 0}:(gx(c,a),{result:c,resultMap:l?d:u})}function MI(i,e,t){var n,r,s,o;let a="updated",l=c=>c.visible;if(!l(e)&&l(i))a="added";else if(l(e)&&!l(i))a="removed";else for(let c=0;c<t.length&&!(t[c].change!=="move"||((n=t[c].from)==null?void 0:n.x)!==((r=t[c].to)==null?void 0:r.x)||((s=t[c].from)==null?void 0:s.y)!==((o=t[c].to)==null?void 0:o.y));c++)if(c===t.length-1)return"no-op";return a}function A9(i,e){let t=e==="none"?"updated":i,n={fromFn:r=>{let s;return i==="removed"?s={finish:{visible:!1}}:i==="added"?s={start:{visible:!0}}:s={},ue({phase:dr[t]},s)},toFn:r=>({phase:dr[t]})};return e==="fade"?{fromFn:r=>{let s=i==="added"?0:r.opacity;return ue({opacity:s},n.fromFn(r))},toFn:r=>ue({opacity:i==="removed"?0:1},n.toFn(r))}:n}function Cx(i,e,t,n,r){let s=MI(i,e,t),o=(u,d)=>{r(t,{move:0,out:u},d)},a=(u,d)=>{r(t,{move:u},d)},l=(u,d)=>{r(t,{move:1,in:u},d)},c=A9(s,n);return{status:s,path:{addPhaseFn:l,updatePhaseFn:a,removePhaseFn:o},pathProperties:c}}function AI(i,e,t){var n,r,s;let o=((n=i.scales.x)==null?void 0:n.type)==="category",a=((r=e.scales.x)==null?void 0:r.type)==="category";if(o!==a)return;let{result:l,resultMap:c}=o?Em(i,e,t):wm(i,e),u="updated";if(e.visible&&!i.visible?u="removed":!e.visible&&i.visible&&(u="added"),l===void 0||c===void 0)return;let d=((s=t?.changed)!=null?s:!0)||T9(i,e)||u!=="updated",h=Cx(i,e,l,"fade",fx),p=mx(c,u);return Ue(ue({},h),{marker:p,hasMotion:d})}var PI=(i=>(i[i.Fill=0]="Fill",i[i.Stroke=1]="Stroke",i[i.Marker=2]="Marker",i[i.Label=3]="Label",i))(PI||{});function cv(i){let{points:e,phantomPoints:t}=i.fillData;return{top:e,bottom:t}}function Hl(i,e,t){return{scales:e.scales,nodeData:t[i],visible:e.visible}}function P9(i,e,t){let n=cv(e),r=cv(i),s={multiDatum:!0};return{top:Em(Hl("top",i,r),Hl("top",e,n),t,s),bottom:Em(Hl("bottom",i,r),Hl("bottom",e,n),t,s)}}function D9(i,e){let t=cv(e),n=cv(i);return{top:wm(Hl("top",i,n),Hl("top",e,t)),bottom:wm(Hl("bottom",i,n),Hl("bottom",e,t))}}function DI(i,e,t){var n,r;let s=((n=i.scales.x)==null?void 0:n.type)==="category",o=((r=e.scales.x)==null?void 0:r.type)==="category";if(s!==o)return;let a="updated";e.visible&&!i.visible?a="removed":!e.visible&&i.visible&&(a="added");let l=()=>s?Em(i,e,t,{backfillSplitMode:"static",multiDatum:!0}):wm(i,e,{backfillSplitMode:"static"}),c=()=>s?P9(i,e,t):D9(i,e),{resultMap:u}=l(),{top:d,bottom:h}=c();if(u===void 0||d.result===void 0||h.result===void 0)return;let p=[...d.result,...h.result.reverse()],g=(e.stackVisible?i.stackVisible:!1)?"none":"fade",f=Cx(i,e,p,g,fx),y=mx(u,a);return{status:f.status,fill:f,marker:y}}var k9=(()=>{let i=class extends tc{constructor(e){super({moduleCtx:e,directionKeys:Eu,directionNames:Tu,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[1,0],animationResetFns:{path:yx({getOpacity:()=>this.getOpacity()}),label:el,marker:(t,n)=>ue(ue({},jm(t)),_m(t,n))}}),this.properties=new Nn}processData(e){return we(this,null,function*(){var t,n;if(this.data==null||!this.properties.isValid())return;let{data:r,visible:s,seriesGrouping:{groupIndex:o=this.id,stackCount:a=1}={}}=this,{xKey:l,yKey:c,connectMissingData:u,normalizedTo:d}=this.properties,h=!this.ctx.animationManager.isSkipped(),p=(t=this.axes.x)==null?void 0:t.scale,m=(n=this.axes.y)==null?void 0:n.scale,{isContinuousX:g,xScaleType:f,yScaleType:y}=this.getScaleInformation({xScale:p,yScale:m}),b=[`area-stack-${o}-yValues`,`area-stack-${o}-yValues-trailing`,`area-stack-${o}-yValues-prev`,`area-stack-${o}-yValues-trailing-prev`,`area-stack-${o}-yValues-marker`],v=[];X0(d)&&(v.push(av([b[0],b[1],b[4]],d,"range")),v.push(av([b[2],b[3]],d,"range"))),!g&&h&&this.processedData&&v.push(wu(this.processedData)),h&&v.push(Rh());let S={invalidValue:null};u&&a>1&&(S.invalidValue=0),s||(S.forceValue=0),yield this.requestDataModel(e,r,{props:[Un(l,f,{id:"xValue"}),mi(c,y,ue({id:"yValueRaw"},S)),...Gl(c,"window","current",Ue(ue({id:"yValueEnd"},S),{groupId:b[0]}),y),...Gl(c,"window-trailing","current",Ue(ue({id:"yValueStart"},S),{groupId:b[1]}),y),...Gl(c,"window","last",Ue(ue({id:"yValuePreviousEnd"},S),{groupId:b[2]}),y),...Gl(c,"window-trailing","last",Ue(ue({id:"yValuePreviousStart"},S),{groupId:b[3]}),y),...Gl(c,"normal","current",Ue(ue({id:"yValueCumulative"},S),{groupId:b[4]}),y),...v],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")})}getSeriesDomain(e){let{processedData:t,dataModel:n,axes:r}=this;if(!t||!n||t.data.length===0)return[];let s=r.x,o=r.y,a=n.resolveProcessedDataDefById(this,"xValue"),l=n.getDomain(this,"xValue","key",t),c=n.getDomain(this,"yValueEnd","value",t);if(e==="x")return a?.def.type==="key"&&a.def.valueType==="category"?l:kr(ra(l),s);if(o instanceof $m||o instanceof Bv)return kr(c,o);{let u=[c[0]>0?0:c[0],c[1]<0?0:c[1]];return kr(u,o)}}createNodeData(){return we(this,null,function*(){var e;let{axes:t,data:n,processedData:{data:r}={},dataModel:s}=this,o=t.x,a=t.y;if(!o||!a||!n||!s||!this.properties.isValid())return;let{yKey:l,xKey:c,marker:u,label:d,fill:h,stroke:p,connectMissingData:m}=this.properties,{scale:g}=o,{scale:f}=a,{isContinuousY:y}=this.getScaleInformation({xScale:g,yScale:f}),b=((e=g.bandwidth)!=null?e:0)/2,v=s.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative"]),S=Y=>Ue(ue({},Y),{point:Ue(ue({},Y.point),{moveTo:!0})}),w=(Y,se,me)=>{let re=g.convert(Y)+b,ve=f.convert(se),_e=f.convert(me);return[{point:{x:re,y:_e},yValue:me,xValue:Y},{point:{x:re,y:ve},yValue:se,xValue:Y}]},T=(Y,se,me)=>{let re;return(X0(this.properties.normalizedTo)?y&&Iv(me):!isNaN(me))&&(re=se),{x:g.convert(Y)+b,y:f.convert(re),size:u.size}},D=l,O=[],R=[],{visibleSameStackCount:L}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this),B={itemId:D,fillData:{itemId:D,points:[],phantomPoints:[]},strokeData:{itemId:D,points:[]},labelData:O,nodeData:R,scales:this.calculateScaling(),visible:this.visible,stackVisible:L>0},$=B.fillData.points,U=B.fillData.phantomPoints,K=B.strokeData.points,ie=-1,te,j=-1/0;return r?.forEach(Y=>{let{keys:se,keys:[me],datum:re,values:ve}=Y;ve.forEach((_e,Ge)=>{var Le,We,xe;ie++;let $e=re[Ge],He=s.resolveProcessedDataDefsValues(v,{keys:se,values:_e}),{yValueRaw:at,yValueCumulative:Ct}=He,{yValueStart:ri,yValueEnd:Wt,yValuePreviousStart:tt,yValuePreviousEnd:wt}=He,It=at!=null,Bi=T(me,+Ct,at);if(It&&u&&R.push({index:ie,series:this,itemId:D,datum:$e,midPoint:{x:Bi.x,y:Bi.y},cumulativeValue:Wt,yValue:at,xValue:me,yKey:l,xKey:c,point:Bi,fill:(Le=u.fill)!=null?Le:h,stroke:(We=u.stroke)!=null?We:p,strokeWidth:(xe=u.strokeWidth)!=null?xe:this.getStrokeWidth(this.properties.strokeWidth)}),It&&d){let us=this.getLabelText(d,{value:at,datum:$e,xKey:c,yKey:l,xName:this.properties.xName,yName:this.properties.yName},fl=>qt(fl)?fl.toFixed(2):String(fl));O.push({index:ie,series:this,itemId:l,datum:$e,x:Bi.x,y:Bi.y,label:us?{text:us,fontStyle:d.fontStyle,fontWeight:d.fontWeight,fontSize:d.fontSize,fontFamily:d.fontFamily,textAlign:"center",textBaseline:"bottom",fill:d.color}:void 0})}let An=te!=null&&me!=null,Sr=j!=null&&It;Sr||(ri=ri??0,Wt=ri??0,tt=tt??0,wt=tt??0);let[Ki,ba]=w(te,tt,wt),[cs,Sa]=w(me,ri,Wt);An&&(!m||Sr)&&($.push(Ki,cs),U.push(ba,Sa)),Sr&&ie>0&&K.push(S(Ki),cs),te=me,j=at})}),K.length>0&&(K[0]=S(K[0])),B})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){let{shape:e}=this.properties.marker,t=ia(e);return new t}updatePathNodes(e){return we(this,null,function*(){let{opacity:t,visible:n,animationEnabled:r}=e,[s,o]=e.paths,a=this.getStrokeWidth(this.properties.strokeWidth);o.setProperties({tag:1,fill:void 0,lineJoin:o.lineCap="round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:a,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:t,visible:n}),s.setProperties({tag:0,stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,opacity:t,visible:n||r,strokeWidth:a}),lv(this,o),lv(this,s)})}updatePaths(e){return we(this,null,function*(){this.updateAreaPaths(e.paths,e.contextData)})}updateAreaPaths(e,t){this.updateFillPath(e,t),this.updateStrokePath(e,t)}updateFillPath(e,t){let{fillData:n}=t,[r]=e,{path:s}=r;s.clear(!0);let o;for(let{point:a}of Wp(n.points,kB(n.phantomPoints)))a.moveTo?s.moveTo(a.x,a.y):o?.y!==a.y&&(o&&s.lineTo(o.x,o.y),s.lineTo(a.x,a.y)),o=a;o&&s.lineTo(o.x,o.y),s.closePath(),r.checkPathDirty()}updateStrokePath(e,t){let{strokeData:n}=t,[,r]=e,{path:s}=r;s.clear(!0);for(let{point:o}of n.points)o.moveTo?s.moveTo(o.x,o.y):s.lineTo(o.x,o.y);r.checkPathDirty()}updateMarkerSelection(e){return we(this,null,function*(){let{nodeData:t,markerSelection:n}=e;return this.properties.marker.isDirty()&&(n.clear(),n.cleanup()),n.update(this.properties.marker.enabled?t:[])})}updateMarkerNodes(e){return we(this,null,function*(){let{markerSelection:t,isHighlight:n}=e,{xKey:r,yKey:s,marker:o,fill:a,stroke:l,strokeWidth:c,fillOpacity:u,strokeOpacity:d,highlightStyle:h}=this.properties,p=kt(n&&h.item,o.getStyle(),{fill:a,stroke:l,strokeWidth:c,fillOpacity:u,strokeOpacity:d});t.each((m,g)=>{this.updateMarkerStyle(m,o,{datum:g,highlighted:n,xKey:r,yKey:s},p)}),n||this.properties.marker.markClean()})}updateLabelSelection(e){return we(this,null,function*(){let{labelData:t,labelSelection:n}=e;return n.update(t,r=>{r.tag=3})})}updateLabelNodes(e){return we(this,null,function*(){let{labelSelection:t}=e,{enabled:n,fontStyle:r,fontWeight:s,fontSize:o,fontFamily:a,color:l}=this.properties.label;t.each((c,u)=>{let{x:d,y:h,label:p}=u;p&&n&&this.visible?(c.fontStyle=r,c.fontWeight=s,c.fontSize=o,c.fontFamily=a,c.textAlign=p.textAlign,c.textBaseline=p.textBaseline,c.text=p.text,c.x=d,c.y=h-10,c.fill=l,c.visible=!0):c.visible=!1})})}getTooltipHtml(e){let{id:t,axes:n,dataModel:r}=this,{xKey:s,xName:o,yName:a,tooltip:l,marker:c}=this.properties,{yKey:u,xValue:d,yValue:h,datum:p,itemId:m}=e,g=n.x,f=n.y;if(!this.properties.isValid()||!(g&&f&&qt(h))||!r)return Xa;let y=g.formatDatum(d),b=f.formatDatum(h),v=wi(a),S=wi(y+": "+b),w=kt({fill:this.properties.fill},c.getStyle(),{stroke:this.properties.stroke,strokeWidth:this.properties.strokeWidth}),{fill:T}=this.getMarkerStyle(c,{datum:e,xKey:s,yKey:u,highlighted:!1},w);return l.toTooltipHtml({title:v,content:S,backgroundColor:T},{datum:p,itemId:m,xKey:s,xName:o,yKey:u,yName:a,color:T,title:v,seriesId:t})}getLegendData(e){var t,n,r,s;if(!((t=this.data)!=null&&t.length)||!this.properties.isValid()||e!=="category")return[];let{yKey:o,yName:a,fill:l,stroke:c,fillOpacity:u,strokeOpacity:d,strokeWidth:h,lineDash:p,marker:m,visible:g}=this.properties,f=!m.enabled||m.fill===void 0;return[{legendType:e,id:this.id,itemId:o,seriesId:this.id,enabled:g,label:{text:a??o},marker:{shape:m.shape,fill:f?l:m.fill,fillOpacity:f?u:m.fillOpacity,stroke:(n=m.stroke)!=null?n:c,strokeOpacity:(r=m.strokeOpacity)!=null?r:d,strokeWidth:(s=m.strokeWidth)!=null?s:0,enabled:m.enabled||h<=0},line:{stroke:c,strokeOpacity:d,strokeWidth:h,lineDash:p}}]}animateEmptyUpdateReady(e){let{markerSelection:t,labelSelection:n,contextData:r,paths:s}=e,{animationManager:o}=this.ctx;this.updateAreaPaths(s,r),vx(this,o,...s),xn([t],_m),px(this,o,t),ni(this,"labels",o,n)}animateReadyResize(e){let{contextData:t,paths:n}=e;this.updateAreaPaths(n,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){var t,n;let{animationManager:r}=this.ctx,{markerSelection:s,labelSelection:o,contextData:a,paths:l,previousContextData:c}=e,[u,d]=l;if(u==null&&d==null)return;super.resetAllAnimation(e);let h=()=>{this.updateAreaPaths(l,a),this.updateStrokePath(l,a)},p=()=>{r.skipCurrentBatch(),h()};if(a==null||c==null){h(),xm(this,r,"added",s),am(this,"fill_path_properties",r,"add",u),am(this,"stroke",r,"trailing",d),ni(this,"labels",r,o);return}let m=DI(a,c,(n=(t=this.processedData)==null?void 0:t.reduced)==null?void 0:n.diff);if(m===void 0){p();return}else if(m.status==="no-op")return;xm(this,r,void 0,s),Ei(this.id,"fill_path_properties",r,[u],m.fill.pathProperties),_I(this.id,"fill_path_update",r,[u],m.fill.path),this.updateStrokePath(l,a),am(this,"stroke",r,"trailing",d),ni(this,"labels",r,o)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ot}getFormattedMarkerStyle(e){let{xKey:t,yKey:n}=e;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:t,yKey:n,highlighted:!0})}computeFocusBounds(e){return Ym(this,e)}};return i.className="AreaSeries",i.type="area",i})(),I9={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",instanceConstructor:k9,stackable:!0,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{__extends__:Ka,nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:Th,xOffset:3,yOffset:3,blur:5},marker:{__extends__:wh,enabled:!1,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:Sn,color:ti}}},paletteFactory:i=>{let{marker:e}=Gh(i);return{fill:e.fill,stroke:e.stroke,marker:e}}};function*kI(i){for(let e of i.children)yield e}function bx(i,e){for(let t of e){let n=t.datum;n===void 0?Ie.error("undefined datum"):i.addValue(t,n)}}function Sx(i,e){let{x:t,y:n}=i.contentGroup.transformPoint(e.x,e.y),{nearest:r,distanceSquared:s}=i.getQuadTree().find(t,n);if(r!==void 0)return{datum:r.value,distance:Math.sqrt(s)}}var xx=class extends ec{constructor(){super(...arguments),this.direction="vertical"}};E([I(LD)],xx.prototype,"direction",2);var II=class extends tc{constructor(){super(...arguments),this.groupScale=new jl,this.smallestDataInterval=void 0}getBandScalePadding(){return{inner:.2,outer:.1}}shouldFlipXY(){return!this.isVertical()}isVertical(){return this.properties.direction==="vertical"}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){let i=this.getBarDirection();return this.axes[i]}getCategoryAxis(){let i=this.getCategoryDirection();return this.axes[i]}updateGroupScale(i){let{groupScale:e,smallestDataInterval:t,ctx:{seriesStateManager:n}}=this,r=i.scale,s=ei.is(r)?r.calcBandwidth(t):r.bandwidth,o=[],{index:a,visibleGroupCount:l}=n.getVisiblePeerGroupIndex(this);for(let u=0;u<l;u++)o.push(String(u));return e.domain=o,e.range=[0,s??0],i instanceof Oh?e.paddingInner=i.groupPaddingInner:i instanceof yh?e.padding=.1:e.padding=0,e.round=e.padding!==0,{barWidth:e.bandwidth>=1?e.bandwidth:e.rawBandwidth,groupIndex:a}}resolveKeyDirection(i){return this.getBarDirection()==="x"?i==="x"?"y":"x":i}initQuadTree(i){bx(i,this.datumNodesIter())}pickNodeClosestDatum(i){return Sx(this,i)}},FI=class extends an{constructor(){super(...arguments),this.placement="inside"}};E([I(RD)],FI.prototype,"placement",2);var wn=class extends xx{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new fo,this.label=new FI,this.tooltip=new Lr}};E([I(Ne)],wn.prototype,"xKey",2);E([I(Ne,{optional:!0})],wn.prototype,"xName",2);E([I(Ne)],wn.prototype,"yKey",2);E([I(Ne,{optional:!0})],wn.prototype,"yName",2);E([I(Ne,{optional:!0})],wn.prototype,"stackGroup",2);E([I(fi,{optional:!0})],wn.prototype,"normalizedTo",2);E([I(Xt)],wn.prototype,"fill",2);E([I(Qt)],wn.prototype,"fillOpacity",2);E([I(Xt)],wn.prototype,"stroke",2);E([I(ke)],wn.prototype,"strokeWidth",2);E([I(Qt)],wn.prototype,"strokeOpacity",2);E([I(qa)],wn.prototype,"lineDash",2);E([I(ke)],wn.prototype,"lineDashOffset",2);E([I(ke)],wn.prototype,"cornerRadius",2);E([I(Qr,{optional:!0})],wn.prototype,"formatter",2);E([I(Qe,{optional:!0})],wn.prototype,"shadow",2);E([I(Qe)],wn.prototype,"label",2);E([I(Qe)],wn.prototype,"tooltip",2);function OI({rect:i,config:e}){let{crisp:t=!0,fill:n,stroke:r,strokeWidth:s,fillOpacity:o,strokeOpacity:a,lineDash:l,lineDashOffset:c,fillShadow:u,cornerRadius:d=0,topLeftCornerRadius:h=!0,topRightCornerRadius:p=!0,bottomRightCornerRadius:m=!0,bottomLeftCornerRadius:g=!0,visible:f=!0}=e;i.crisp=t,i.fill=n,i.stroke=r,i.strokeWidth=s,i.fillOpacity=o,i.strokeOpacity=a,i.lineDash=l,i.lineDashOffset=c,i.fillShadow=u,i.topLeftCornerRadius=h?d:0,i.topRightCornerRadius=p?d:0,i.bottomRightCornerRadius=m?d:0,i.bottomLeftCornerRadius=g?d:0,i.visible=f}function LI(i){var e=i,{datum:t,isHighlighted:n,style:r,highlightStyle:s,formatter:o,seriesId:a,ctx:{callbackCache:l}}=e,c=Xi(e,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","ctx"]),u,d,h,p,m,g;let{fill:f,fillOpacity:y,stroke:b,strokeWidth:v}=kt(n&&s,r),{strokeOpacity:S,fillShadow:w,lineDash:T,lineDashOffset:D,cornerRadius:O=0,topLeftCornerRadius:R=!0,topRightCornerRadius:L=!0,bottomRightCornerRadius:B=!0,bottomLeftCornerRadius:$=!0}=r,U;return o&&(U=l.call(o,ue({datum:t.datum,xKey:t.xKey,fill:f,stroke:b,strokeWidth:v,cornerRadius:O,highlighted:n,seriesId:a},c))),{fill:(u=U?.fill)!=null?u:f,stroke:(d=U?.stroke)!=null?d:b,strokeWidth:(h=U?.strokeWidth)!=null?h:v,fillOpacity:(p=U?.fillOpacity)!=null?p:y,strokeOpacity:(m=U?.strokeOpacity)!=null?m:S,lineDash:T,lineDashOffset:D,fillShadow:w,cornerRadius:(g=U?.cornerRadius)!=null?g:O,topLeftCornerRadius:R,topRightCornerRadius:L,bottomRightCornerRadius:B,bottomLeftCornerRadius:$}}function RI(i=[]){let[e,t]=i;return!(e!==0||t!==1)}var Eb=i=>{var e;return Fm((e=i.yValue)!=null?e:0)};function Tm(i,e,t){let{startingX:n,startingY:r}=O9(i,e);return{isVertical:i,calculate:(o,a)=>{let l=i?o.x:n,c=i?r:o.y,u=i?o.width:0,d=i?0:o.height,{opacity:h}=o;a&&(isNaN(l)||isNaN(c))&&({x:l,y:c}=a,u=i?a.width:0,d=i?0:a.height,i&&!Eb(a)?c+=a.height:!i&&Eb(a)&&(l+=a.width));let p;return o.clipBBox==null?p=void 0:Eb(o)?p=i?new nt(l,c-d,u,d):new nt(l-u,c,u,d):p=new nt(l,c,u,d),{x:l,y:c,width:u,height:d,clipBBox:p,opacity:h}},mode:t}}function F9(i,e){return{isVertical:i,calculate:t=>({x:i?t.x:t.x+t.width/2,y:i?t.y+t.height/2:t.y,width:i?t.width:0,height:i?0:t.height,clipBBox:t.clipBBox,opacity:t.opacity}),mode:e}}function Mm(i){let e=r=>r==null||isNaN(r.x)||isNaN(r.y);return{toFn:(r,s,o)=>{let a;return o==="removed"&&r.datum==null&&i.mode==="fade"?a=Ue(ue({},Am(r,s)),{opacity:0}):o==="removed"||e(s)?a=i.calculate(s,r.previousDatum):a={x:s.x,y:s.y,width:s.width,height:s.height,clipBBox:s.clipBBox,opacity:s.opacity},a},fromFn:(r,s,o)=>{o==="updated"&&e(s)?o="removed":o==="updated"&&e(r.previousDatum)&&(o="added");let a;o==="added"&&r.previousDatum==null&&i.mode==="fade"?a=Ue(ue({},Am(r,s)),{opacity:0}):o==="unknown"||o==="added"?a=i.calculate(s,r.previousDatum):a={x:r.x,y:r.y,width:r.width,height:r.height,clipBBox:r.clipBBox,opacity:r.opacity};let l=dr[o];return Ue(ue({},a),{phase:l})}}}function O9(i,e){let t=e[i?"y":"x"],n=1/0,r=0;return t?(i?r=t.scale.convert(ei.is(t.scale)?0:Math.max(...t.range)):n=t.scale.convert(ei.is(t.scale)?0:Math.min(...t.range)),{startingX:n,startingY:r}):{startingX:n,startingY:r}}function Am(i,{x:e,y:t,width:n,height:r,clipBBox:s,opacity:o}){return{x:e,y:t,width:n,height:r,clipBBox:s,opacity:o}}function _x(i,e,t){if(i===void 0)return;let{x:n,y:r,width:s,height:o}=i;return e.inverseTransformBBox(new nt(n,r,s,o)).clip(t)}function NI(i,e,t){if(e.enabled&&t){let{x:n,y:r,text:s,textAlign:o,textBaseline:a}=t,{color:l,fontStyle:c,fontWeight:u,fontSize:d,fontFamily:h}=e;i.setProperties({visible:!0,x:n,y:r,text:s,fill:l,fontStyle:c,fontWeight:u,fontSize:d,fontFamily:h,textAlign:o,textBaseline:a})}else i.visible=!1}function VI({isPositive:i,isVertical:e,placement:t,padding:n=0,rect:r}){let s=r.x+r.width/2,o=r.y+r.height/2,a="center",l="middle";switch(t){case"start":{e?(o=i?r.y+r.height+n:r.y-n,l=i?"top":"bottom"):(s=i?r.x-n:r.x+r.width+n,a=i?"start":"end");break}case"outside":case"end":{e?(o=i?r.y-n:r.y+r.height+n,l=i?"bottom":"top"):(s=i?r.x+r.width+n:r.x-n,a=i?"start":"end");break}}return{x:s,y:o,textAlign:a,textBaseline:l}}var L9=(()=>{let i=class extends II{constructor(e){super({moduleCtx:e,directionKeys:Eu,directionNames:Tu,pickModes:[0],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:Am,label:el}}),this.properties=new wn}processData(e){return we(this,null,function*(){var t,n,r;if(!this.properties.isValid()||!this.data)return;let{seriesGrouping:{groupIndex:s=this.id}={},data:o=[]}=this,{xKey:a,yKey:l,normalizedTo:c}=this.properties,u=!this.ctx.animationManager.isSkipped(),d=(t=this.getCategoryAxis())==null?void 0:t.scale,h=(n=this.getValueAxis())==null?void 0:n.scale,{isContinuousX:p,xScaleType:m,yScaleType:g}=this.getScaleInformation({xScale:d,yScale:h}),f=`bar-stack-${s}-yValues`,y=`${f}-trailing`,b=[];qt(c)&&b.push(av([f,y],Math.abs(c),"range")),u&&this.processedData&&b.push(wu(this.processedData)),u&&b.push(Rh());let v=this.visible?{}:{forceValue:0},{processedData:S}=yield this.requestDataModel(e,o,{props:[Un(a,m,{id:"xValue"}),mi(l,g,ue({id:"yValue-raw",invalidValue:null},v)),...Gl(l,"normal","current",ue({id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:f,separateNegative:!0},v),g),...Gl(l,"trailing","current",ue({id:"yValue-start",invalidValue:null,missingValue:0,groupId:y,separateNegative:!0},v),g),...p?[iI]:[],...b],groupByKeys:!0,groupByData:!1});this.smallestDataInterval=(r=S.reduced)==null?void 0:r.smallestKeyInterval,this.animationState.transition("updateData")})}getSeriesDomain(e){var t;let{processedData:n,dataModel:r,smallestDataInterval:s}=this;if(!n||!r||n.data.length===0)return[];let o=this.getCategoryAxis(),a=this.getValueAxis(),l=r.resolveProcessedDataDefById(this,"xValue"),c=r.getDomain(this,"xValue","key",n),u=r.getDomain(this,"yValue-end","value",n);if(e===this.getCategoryDirection()){if(l?.def.type==="key"&&l.def.valueType==="category")return c;let d=qt(s)?s*.5:0,h=(t=ra(c))!=null?t:[NaN,NaN],p=h[0]+-d,m=h[1]+d;return kr([p,m],o)}else{if(this.getValueAxis()instanceof $m)return kr(u,a);{let d=[Math.min(0,u[0]),Math.max(0,u[1])];return kr(d,a)}}}createNodeData(){return we(this,null,function*(){let{dataModel:e}=this,t=this.getCategoryAxis(),n=this.getValueAxis();if(!e||!t||!n||!this.properties.isValid())return;let r=t.scale,s=n.scale,{xKey:o,yKey:a,xName:l,yName:c,fill:u,stroke:d,strokeWidth:h,cornerRadius:p,legendItemName:m,label:g}=this.properties,f=n.isReversed(),{barWidth:y,groupIndex:b}=this.updateGroupScale(t),v=ei.is(r)?y*-.5:0,S=e.resolveProcessedDataIndexById(this,"xValue"),w=e.resolveProcessedDataIndexById(this,"yValue-raw"),T=e.resolveProcessedDataIndexById(this,"yValue-start"),D=e.resolveProcessedDataIndexById(this,"yValue-end"),O=e.resolveProcessedDataIndexById(this,"yValue-range"),R=!this.ctx.animationManager.isSkipped(),L={itemId:a,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible||R},{groupScale:B,processedData:$}=this;return $?.data.forEach(({keys:U,datum:K,values:ie,aggValues:te})=>{ie.forEach((j,Y)=>{var se;let me=U[S],re=r.convert(me),ve=+j[D],_e=+j[T],Ge=j[w],Le=Ge>=0&&!Object.is(Ge,-0),We=Le!==f,xe=(se=te?.[O][Le?1:0])!=null?se:0,$e=re+B.convert(String(b))+v;if(isNaN(ve))return;let He=s.convert(ve),at=s.convert(_e),Ct=this.getBarDirection()==="x",ri=s.convert(xe),Wt=s.convert(0),tt={x:Ct?Math.min(He,at):$e,y:Ct?$e:Math.min(He,at),width:Ct?Math.abs(at-He):y,height:Ct?y:Math.abs(at-He)},wt=new nt(tt.x,tt.y,tt.width,tt.height),It={x:Ct?Math.min(Wt,ri):$e,y:Ct?$e:Math.min(Wt,ri),width:Ct?Math.abs(Wt-ri):y,height:Ct?y:Math.abs(Wt-ri),clipBBox:wt},{fontStyle:Bi,fontWeight:An,fontSize:Sr,fontFamily:Ki,color:ba,placement:cs}=g,Sa=this.getLabelText(this.properties.label,{datum:K[Y],value:Ge,xKey:o,yKey:a,xName:l,yName:c,legendItemName:m},od=>qt(od)?od.toFixed(2):String(od)),us=Sa?ue({text:Sa,fill:ba,fontStyle:Bi,fontWeight:An,fontSize:Sr,fontFamily:Ki},VI({isPositive:Le,isVertical:!Ct,placement:cs,rect:tt})):void 0,fl=this.shouldFlipXY()?tt.height:tt.width,Ep={series:this,itemId:a,datum:K[Y],valueIndex:Y,cumulativeValue:ve,xValue:me,yValue:Ge,yKey:a,xKey:o,capDefaults:{lengthRatioMultiplier:fl,lengthMax:fl},x:It.x,y:It.y,width:It.width,height:It.height,midPoint:{x:tt.x+tt.width/2,y:tt.y+tt.height/2},fill:u,stroke:d,opacity:1,strokeWidth:h,cornerRadius:p,topLeftCornerRadius:Ct!==We,topRightCornerRadius:We,bottomRightCornerRadius:Ct===We,bottomLeftCornerRadius:!We,clipBBox:wt,label:us,missing:Ge==null};L.nodeData.push(Ep),L.labelData.push(Ep)})}),L})}nodeFactory(){return new Fr}updateDatumSelection(e){return we(this,null,function*(){return e.datumSelection.update(e.nodeData,t=>{t.tag=0},t=>Yl(t.xValue,t.valueIndex))})}updateDatumNodes(e){return we(this,null,function*(){if(!this.properties.isValid())return;let{yKey:t,stackGroup:n,fill:r,fillOpacity:s,stroke:o,strokeWidth:a,strokeOpacity:l,lineDash:c,lineDashOffset:u,formatter:d,shadow:h,highlightStyle:{item:p}}=this.properties,m=this.axes.x,g=RI(m?.visibleRange),f=this.getCategoryDirection()==="x";e.datumSelection.each((y,b)=>{var v,S,w,T;let D={fill:r,stroke:o,fillOpacity:s,strokeOpacity:l,lineDash:c,lineDashOffset:u,fillShadow:h,strokeWidth:this.getStrokeWidth(a),cornerRadius:b.cornerRadius,topLeftCornerRadius:b.topLeftCornerRadius,topRightCornerRadius:b.topRightCornerRadius,bottomRightCornerRadius:b.bottomRightCornerRadius,bottomLeftCornerRadius:b.bottomLeftCornerRadius},O=f?((S=(v=b.clipBBox)==null?void 0:v.width)!=null?S:b.width)>0:((T=(w=b.clipBBox)==null?void 0:w.height)!=null?T:b.height)>0,R=LI({datum:b,ctx:this.ctx,seriesId:this.id,isHighlighted:e.isHighlight,highlightStyle:p,yKey:t,style:D,formatter:d,stackGroup:n});R.crisp=g,R.visible=O,OI({rect:y,config:R})})})}updateLabelSelection(e){return we(this,null,function*(){let t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t,n=>{n.tag=1,n.pointerEvents=1})})}updateLabelNodes(e){return we(this,null,function*(){e.labelSelection.each((t,n)=>{NI(t,this.properties.label,n.label)})})}getTooltipHtml(e){var t;let{id:n,processedData:r,ctx:{callbackCache:s}}=this,o=this.getCategoryAxis(),a=this.getValueAxis();if(!r||!this.properties.isValid()||!o||!a)return Xa;let{xKey:l,yKey:c,xName:u,yName:d,fill:h,stroke:p,strokeWidth:m,tooltip:g,formatter:f,stackGroup:y,legendItemName:b}=this.properties,{xValue:v,yValue:S,datum:w,itemId:T}=e,D=o.formatDatum(v),O=a.formatDatum(S),R=wi(d),L=wi(D+": "+O),B;f&&(B=s.call(f,{seriesId:n,datum:w,xKey:l,yKey:c,stackGroup:y,fill:h,stroke:p,strokeWidth:this.getStrokeWidth(m),highlighted:!1}));let $=(t=B?.fill)!=null?t:h;return g.toTooltipHtml({title:R,content:L,backgroundColor:$},ue({seriesId:n,itemId:T,datum:w,xKey:l,yKey:c,xName:u,yName:d,stackGroup:y,title:R,color:$,legendItemName:b},this.getModuleTooltipParams()))}getLegendData(e){var t,n;let{showInLegend:r}=this.properties;if(e!=="category"||!((t=this.data)!=null&&t.length)||!this.properties.isValid()||!r)return[];let{yKey:s,yName:o,fill:a,stroke:l,strokeWidth:c,fillOpacity:u,strokeOpacity:d,legendItemName:h,visible:p}=this.properties;return[{legendType:"category",id:this.id,itemId:s,seriesId:this.id,enabled:p,label:{text:(n=h??o)!=null?n:s},marker:{fill:a,fillOpacity:u,stroke:l,strokeWidth:c,strokeOpacity:d},legendItemName:h}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t,annotationSelections:n}){let r=Mm(Tm(this.isVertical(),this.axes,"normal"));Ei(this.id,"nodes",this.ctx.animationManager,[e],r),ni(this,"labels",this.ctx.animationManager,t),ni(this,"annotations",this.ctx.animationManager,...n)}animateWaitingUpdateReady(e){var t,n,r;let{datumSelection:s,labelSelection:o,annotationSelections:a,previousContextData:l}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);let c=(n=(t=this.processedData)==null?void 0:t.reduced)==null?void 0:n.diff,u=l==null?"fade":"normal",d=Mm(Tm(this.isVertical(),this.axes,u));Ei(this.id,"nodes",this.ctx.animationManager,[s],d,(p,m)=>Yl(m.xValue,m.valueIndex),c),((r=c?.changed)!=null?r:!0)&&(ni(this,"labels",this.ctx.animationManager,o),ni(this,"annotations",this.ctx.animationManager,...a))}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e,seriesRect:t}){var n;let r=(n=this.contextNodeData)==null?void 0:n.nodeData[e].clipBBox;return _x(r,this.contentGroup,t)}};return i.className="BarSeries",i.type="bar",i})(),R9={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",instanceConstructor:L9,stackable:!0,groupable:!0,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],swapDefaultAxesCondition:i=>i?.direction==="horizontal",themeTemplate:{series:{__extends__:Ka,direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontWeight:"normal",fontSize:12,fontFamily:Sn,color:Eh,placement:"inside"},shadow:{enabled:!1,color:Th,xOffset:3,yOffset:3,blur:5}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:Uv},TP=i=>{let e=jo.fromString(i),[t,n,r]=jo.RGBtoOKLCH(e.r,e.g,e.b);return{l:t,c:n,h:r,a:e.a}},N9=(i,e,t)=>{t=Dt(0,t,1);let n,r;if(Number.isNaN(i.h)&&Number.isNaN(e.h))n=0,r=0;else if(Number.isNaN(i.h))n=e.h,r=e.c;else if(Number.isNaN(e.h))n=i.h,r=i.c;else{let a=i.h,l=e.h,c=e.h-i.h;c>180?l-=360:c<-180&&(l+=360),n=a*(1-t)+l*t,r=i.c*(1-t)+e.c*t}let s=i.l*(1-t)+e.l*t,o=i.a*(1-t)+e.a*t;return jo.fromOKLCH(s,r,n,o)},Mu=class{constructor(){this.type="color",this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(TP)}update(){let{domain:i,range:e}=this;i.length<2&&(Ie.warnOnce("`colorDomain` should have at least 2 values."),i.length===0?i.push(0,1):i.length===1&&i.push(i[0]+1));for(let t=1;t<i.length;t++){let n=i[t-1],r=i[t];if(n>=r){Ie.warnOnce("`colorDomain` values should be supplied in ascending order."),i.sort((s,o)=>s-o);break}}if(e.length<i.length)for(let t=e.length;t<i.length;t++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(TP)}convert(i){this.refresh();let{domain:e,range:t,parsedRange:n}=this,r=e[0],s=e.at(-1),o=t[0],a=t[t.length-1];if(i<=r)return o;if(i>=s)return a;let l,c;if(e.length===2){let h=(i-r)/(s-r),p=1/(t.length-1);l=t.length<=2?0:Math.min(Math.floor(h*(t.length-1)),t.length-2),c=(h-l*p)/p}else{for(l=0;l<e.length-2&&!(i<e[l+1]);l++);let h=e[l],p=e[l+1];c=(i-h)/(p-h)}let u=n[l],d=n[l+1];return N9(u,d,c).toRgbaString()}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&Ie.warnOnce("Expected update to not invalidate scale"))}};E([Rn],Mu.prototype,"domain",2);E([Rn],Mu.prototype,"range",2);var wx=class extends Or{constructor(){super(...arguments),this.maxSize=30}};E([I(ke),Ze({redraw:3})],wx.prototype,"maxSize",2);E([I(Mv,{optional:!0}),Ze({redraw:3})],wx.prototype,"domain",2);var BI=class extends an{constructor(){super(...arguments),this.placement="top"}};E([I(NS)],BI.prototype,"placement",2);var zn=class extends ec{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new wx,this.label=new BI,this.tooltip=new Lr}};E([I(Ne)],zn.prototype,"xKey",2);E([I(Ne)],zn.prototype,"yKey",2);E([I(Ne)],zn.prototype,"sizeKey",2);E([I(Ne,{optional:!0})],zn.prototype,"labelKey",2);E([I(Ne,{optional:!0})],zn.prototype,"colorKey",2);E([I(Ne,{optional:!0})],zn.prototype,"xName",2);E([I(Ne,{optional:!0})],zn.prototype,"yName",2);E([I(Ne,{optional:!0})],zn.prototype,"sizeName",2);E([I(Ne,{optional:!0})],zn.prototype,"labelName",2);E([I(Ne,{optional:!0})],zn.prototype,"colorName",2);E([I(Mv,{optional:!0})],zn.prototype,"colorDomain",2);E([I(Ds)],zn.prototype,"colorRange",2);E([I(Ne,{optional:!0})],zn.prototype,"title",2);E([I(Qe)],zn.prototype,"marker",2);E([I(Qe)],zn.prototype,"label",2);E([I(Qe)],zn.prototype,"tooltip",2);var V9=class extends ox{constructor(i,e,t,n){super(i,e,t,n),this.sizeKey=n.properties.sizeKey}},B9=(()=>{let i=class extends tc{constructor(e){super({moduleCtx:e,directionKeys:Eu,directionNames:Tu,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:el,marker:jm}}),this.NodeEvent=V9,this.properties=new zn,this.sizeScale=new Zo,this.colorScale=new Mu}processData(e){return we(this,null,function*(){var t,n,r,s;if(!this.properties.isValid()||this.data==null||!this.visible)return;let o=(t=this.axes.x)==null?void 0:t.scale,a=(n=this.axes.y)==null?void 0:n.scale,{xScaleType:l,yScaleType:c}=this.getScaleInformation({xScale:o,yScale:a}),u=this.colorScale.type,d=this.sizeScale.type,{xKey:h,yKey:p,sizeKey:m,labelKey:g,colorDomain:f,colorRange:y,colorKey:b,marker:v}=this.properties,{dataModel:S,processedData:w}=yield this.requestDataModel(e,this.data,{props:[Un(h,l,{id:"xKey-raw"}),Un(p,c,{id:"yKey-raw"}),...g?[Un(g,"band",{id:"labelKey-raw"})]:[],mi(h,l,{id:"xValue"}),mi(p,c,{id:"yValue"}),mi(m,d,{id:"sizeValue"}),...b?[mi(b,u,{id:"colorValue"})]:[],...g?[mi(g,"band",{id:"labelValue"})]:[]]}),T=S.resolveProcessedDataIndexById(this,"sizeValue"),D=(r=w.domain.values[T])!=null?r:[];if(this.sizeScale.domain=v.domain?v.domain:D,b){let O=S.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=(s=f??w.domain.values[O])!=null?s:[],this.colorScale.range=y,this.colorScale.update()}this.animationState.transition("updateData")})}getSeriesDomain(e){let{dataModel:t,processedData:n}=this;if(!n||!t)return[];let r=e==="x"?"xValue":"yValue",s=t.resolveProcessedDataDefById(this,r),o=t.getDomain(this,r,"value",n);if(s?.def.type==="value"&&s?.def.valueType==="category")return o;let a=this.axes[e];return kr(ra(o),a)}createNodeData(){return we(this,null,function*(){var e,t,n;let{axes:r,dataModel:s,processedData:o,colorScale:a,sizeScale:l}=this,{xKey:c,yKey:u,sizeKey:d,labelKey:h,xName:p,yName:m,sizeName:g,labelName:f,label:y,colorKey:b,marker:v,visible:S}=this.properties,w=ia(v.shape),{placement:T}=y,D=r.x,O=r.y;if(!(s&&o&&S&&D&&O))return;let R=s.resolveProcessedDataIndexById(this,"xValue"),L=s.resolveProcessedDataIndexById(this,"yValue"),B=d?s.resolveProcessedDataIndexById(this,"sizeValue"):-1,$=b?s.resolveProcessedDataIndexById(this,"colorValue"):-1,U=h?s.resolveProcessedDataIndexById(this,"labelValue"):-1,K=D.scale,ie=O.scale,te=((e=K.bandwidth)!=null?e:0)/2,j=((t=ie.bandwidth)!=null?t:0)/2,Y=[];l.range=[v.size,v.maxSize];let se=y.getFont();for(let{values:me,datum:re}of(n=o.data)!=null?n:[]){let ve=me[R],_e=me[L],Ge=K.convert(ve)+te,Le=ie.convert(_e)+j,We=this.getLabelText(y,{value:h?me[U]:_e,datum:re,xKey:c,yKey:u,sizeKey:d,labelKey:h,xName:p,yName:m,sizeName:g,labelName:f}),xe=Vt.getTextSize(String(We),se),$e=d?l.convert(me[B]):v.size,He=b?a.convert(me[$]):void 0;Y.push({series:this,itemId:u,yKey:u,xKey:c,datum:re,xValue:ve,yValue:_e,sizeValue:me[B],point:{x:Ge,y:Le,size:$e},midPoint:{x:Ge,y:Le},fill:He,label:ue({text:We},xe),marker:w,placement:T})}return{itemId:u,nodeData:Y,labelData:Y,scales:this.calculateScaling(),visible:this.visible}})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var e,t;return(t=(e=this.contextNodeData)==null?void 0:e.labelData)!=null?t:[]}markerFactory(){let{shape:e}=this.properties.marker,t=ia(e);return new t}updateMarkerSelection(e){return we(this,null,function*(){let{nodeData:t,markerSelection:n}=e;this.properties.marker.isDirty()&&(n.clear(),n.cleanup());let r=this.properties.marker.enabled?t:[];return n.update(r,void 0,s=>Yl([s.xValue,s.yValue,s.label.text]))})}updateMarkerNodes(e){return we(this,null,function*(){let{markerSelection:t,isHighlight:n}=e,{xKey:r,yKey:s,sizeKey:o,labelKey:a,marker:l}=this.properties,c=kt(n&&this.properties.highlightStyle.item,l.getStyle());this.sizeScale.range=[l.size,l.maxSize],t.each((u,d)=>{this.updateMarkerStyle(u,l,{datum:d,highlighted:n,xKey:r,yKey:s,sizeKey:o,labelKey:a},c)}),n||this.properties.marker.markClean()})}updateLabelSelection(e){return we(this,null,function*(){var t,n;let r=this.properties.label.enabled?(n=(t=this.chart)==null?void 0:t.placeLabels().get(this))!=null?n:[]:[];return e.labelSelection.update(r.map(s=>Ue(ue({},s.datum),{point:{x:s.x,y:s.y,size:s.datum.point.size}})))})}updateLabelNodes(e){return we(this,null,function*(){let{label:t}=this.properties;e.labelSelection.each((n,r)=>{var s,o,a,l;n.text=r.label.text,n.fill=t.color,n.x=(o=(s=r.point)==null?void 0:s.x)!=null?o:0,n.y=(l=(a=r.point)==null?void 0:a.y)!=null?l:0,n.fontStyle=t.fontStyle,n.fontWeight=t.fontWeight,n.fontSize=t.fontSize,n.fontFamily=t.fontFamily,n.textAlign="left",n.textBaseline="top"})})}getTooltipHtml(e){var t;let n=this.axes.x,r=this.axes.y;if(!this.properties.isValid()||!n||!r)return Xa;let{xKey:s,yKey:o,sizeKey:a,labelKey:l,xName:c,yName:u,sizeName:d,labelName:h,marker:p,tooltip:m}=this.properties,g=(t=this.properties.title)!=null?t:u,f=kt({fill:e.fill,strokeWidth:this.getStrokeWidth(p.strokeWidth)},p.getStyle()),{fill:y="gray"}=this.getMarkerStyle(p,{datum:e,highlighted:!1,xKey:s,yKey:o,sizeKey:a,labelKey:l},f),{datum:b,xValue:v,yValue:S,sizeValue:w,label:{text:T},itemId:D}=e,O=wi(n.formatDatum(v)),R=wi(r.formatDatum(S)),L=`<b>${wi(c??s)}</b>: ${O}<br><b>${wi(u??o)}</b>: ${R}`;return a&&(L+=`<br><b>${wi(d??a)}</b>: ${wi(String(w))}`),l&&(L=`<b>${wi(h??l)}</b>: ${wi(T)}<br>`+L),m.toTooltipHtml({title:g,content:L,backgroundColor:y},{datum:b,itemId:D,xKey:s,xName:c,yKey:o,yName:u,sizeKey:a,sizeName:d,labelKey:l,labelName:h,title:g,color:y,seriesId:this.id})}getLegendData(){var e,t;if(!((e=this.data)!=null&&e.length)||!this.properties.isValid())return[];let{yKey:n,yName:r,title:s,marker:o,visible:a}=this.properties,{shape:l,fill:c,stroke:u,fillOpacity:d,strokeOpacity:h,strokeWidth:p}=o;return[{legendType:"category",id:this.id,itemId:n,seriesId:this.id,enabled:a,label:{text:(t=s??r)!=null?t:n},marker:{shape:l,fill:c??"rgba(0, 0, 0, 0)",stroke:u??"rgba(0, 0, 0, 0)",fillOpacity:d??1,strokeOpacity:h??1,strokeWidth:p??0}}]}animateEmptyUpdateReady({markerSelection:e,labelSelection:t}){hx(this,this.ctx.animationManager,e),ni(this,"labels",this.ctx.animationManager,t)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ot}getFormattedMarkerStyle(e){let{xKey:t,yKey:n,sizeKey:r,labelKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:t,yKey:n,sizeKey:r,labelKey:s,highlighted:!1})}computeFocusBounds(e){return Ym(this,e)}};return i.className="BubbleSeries",i.type="bubble",i})(),G9={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",instanceConstructor:B9,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{__extends__:Ka,tooltip:{position:{type:"node"}},marker:{__extends__:wh,maxSize:30,fillOpacity:.8},label:{enabled:!1,fontSize:12,fontFamily:Sn,color:ti}}},paletteFactory:Gh},ln=class extends ec{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new fo,this.label=new an,this.tooltip=new Lr}};E([I(Ne)],ln.prototype,"xKey",2);E([I(Ne,{optional:!0})],ln.prototype,"yKey",2);E([I(Ne,{optional:!0})],ln.prototype,"xName",2);E([I(Ne,{optional:!0})],ln.prototype,"yName",2);E([I(Xt,{optional:!0})],ln.prototype,"fill",2);E([I(Qt)],ln.prototype,"fillOpacity",2);E([I(Xt,{optional:!0})],ln.prototype,"stroke",2);E([I(ke)],ln.prototype,"strokeWidth",2);E([I(Qt)],ln.prototype,"strokeOpacity",2);E([I(qa)],ln.prototype,"lineDash",2);E([I(ke)],ln.prototype,"lineDashOffset",2);E([I(ke)],ln.prototype,"cornerRadius",2);E([I(ht)],ln.prototype,"areaPlot",2);E([I(Ph,{optional:!0})],ln.prototype,"bins",2);E([I(Li(["count","sum","mean"],"a histogram aggregation"))],ln.prototype,"aggregation",2);E([I(ke,{optional:!0})],ln.prototype,"binCount",2);E([I(Qe)],ln.prototype,"shadow",2);E([I(Qe)],ln.prototype,"label",2);E([I(Qe)],ln.prototype,"tooltip",2);var MP=10,U9=(()=>{let i=class extends tc{constructor(e){super({moduleCtx:e,directionKeys:Eu,directionNames:Tu,pickModes:[0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:Am,label:el}}),this.properties=new ln,this.calculatedBins=[]}deriveBins(e){let t=Dv(e[0],e[1],MP),n=mh(e[0],e[1],MP),[r]=t,s=o=>[o,o+n];return[[r-n,r],...t.map(s)]}calculateNiceBins(e,t){let n=Math.floor(e[0]),r=e[1],s=t||1,{start:o,binSize:a}=this.calculateNiceStart(n,r,s);return this.getBins(o,r,a,s)}getBins(e,t,n,r){let s=[],o=this.calculatePrecision(n);for(let a=0;a<r;a++){let l=Math.round((e+a*n)*o)/o,c=Math.round((e+(a+1)*n)*o)/o;a===r-1&&(c=Math.max(c,t)),s[a]=[l,c]}return s}calculatePrecision(e){let t=10;if(isFinite(e)&&e>0)for(;e<1;)t*=10,e*=10;return t}calculateNiceStart(e,t,n){let r=Math.abs(t-e)/n,s=Math.floor(Math.log10(r)),o=Math.pow(10,s);return{start:Math.floor(e/o)*o,binSize:r}}processData(e){return we(this,null,function*(){var t,n;this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));let{xKey:r,yKey:s,areaPlot:o,aggregation:a}=this.properties,l=(t=this.axes.x)==null?void 0:t.scale,c=(n=this.axes.y)==null?void 0:n.scale,{xScaleType:u,yScaleType:d}=this.getScaleInformation({yScale:c,xScale:l}),h=[Un(r,u),nI];if(s){let m=rS("groupAgg");a==="count"||(a==="sum"?m=Zk("groupAgg"):a==="mean"&&(m=Jk("groupAgg"))),o&&(m=sS("groupAgg",m)),h.push(mi(s,d,{invalidValue:void 0}),m)}else{let m=rS("groupAgg");o&&(m=sS("groupAgg",m)),h.push(m)}let p=m=>{var g;let f=kr(m.domain.keys[0]);if(f.length===0)return m.domain.groups=[],()=>[];let y=Yr(this.properties.binCount)?this.calculateNiceBins(f,this.properties.binCount):(g=this.properties.bins)!=null?g:this.deriveBins(f),b=y.length;return this.calculatedBins=[...y],v=>{let S=v.keys[0];for(let w=0;w<b;w++){let T=y[w];if(S>=T[0]&&S<T[1]||w===b-1&&S<=T[1])return T}return[]}};!this.ctx.animationManager.isSkipped()&&this.processedData&&h.push(wu(this.processedData,!1)),yield this.requestDataModel(e,this.data,{props:h,groupByFn:p}),this.animationState.transition("updateData")})}getSeriesDomain(e){var t,n,r,s;let{processedData:o,dataModel:a}=this;if(!o||!a||!this.calculatedBins.length)return[];let l=a.getDomain(this,"groupAgg","aggregate",o),c=(t=this.calculatedBins)==null?void 0:t[0][0],u=(s=this.calculatedBins)==null?void 0:s[((r=(n=this.calculatedBins)==null?void 0:n.length)!=null?r:0)-1][1];return kr(e==="x"?[c,u]:l)}createNodeData(){return we(this,null,function*(){var e;let{id:t,axes:n,processedData:r,ctx:{callbackCache:s}}=this,o=n.x,a=n.y;if(!o||!a)return;let{scale:l}=o,{scale:c}=a,{xKey:u,yKey:d,xName:h,yName:p,fill:m,stroke:g,strokeWidth:f,cornerRadius:y}=this.properties,{formatter:b=L=>String(L.value),fontStyle:v,fontWeight:S,fontSize:w,fontFamily:T,color:D}=this.properties.label,O=[],R={itemId:(e=this.properties.yKey)!=null?e:this.id,nodeData:O,labelData:O,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};return!this.visible||!r||r.type!=="grouped"||(r.data.forEach(L=>{var B;let{aggValues:[[$,U]]=[[0,0]],datum:K,datum:{length:ie},keys:te,keys:[j,Y]}=L,se=l.convert(j),me=l.convert(Y),re=$+U,ve=c.convert(0),_e=c.convert(re),Ge=Math.abs(me-se),Le=Math.abs(_e-ve),We=Math.min(se,me),xe=Math.min(ve,_e),$e;re!==0&&($e={text:(B=s.call(b,{value:re,datum:K,seriesId:t,xKey:u,yKey:d,xName:h,yName:p}))!=null?B:String(re),fontStyle:v,fontWeight:S,fontSize:w,fontFamily:T,fill:D,x:We+Ge/2,y:xe+Le/2});let He={x:We+Ge/2,y:xe+Le/2},at=a.isReversed();O.push({series:this,datum:K,aggregatedValue:re,frequency:ie,domain:te,yKey:d,xKey:u,x:We,y:xe,xValue:se,yValue:_e,width:Ge,height:Le,midPoint:He,fill:m,stroke:g,cornerRadius:y,topLeftCornerRadius:!at,topRightCornerRadius:!at,bottomRightCornerRadius:at,bottomLeftCornerRadius:at,opacity:1,strokeWidth:f,label:$e})}),O.sort((L,B)=>L.x-B.x)),R})}nodeFactory(){return new Fr}updateDatumSelection(e){return we(this,null,function*(){let{nodeData:t,datumSelection:n}=e;return n.update(t,r=>{r.tag=0,r.crisp=!0},r=>r.domain.join("_"))})}updateDatumNodes(e){return we(this,null,function*(){let{isHighlight:t}=e,{fillOpacity:n,strokeOpacity:r,lineDash:s,lineDashOffset:o,shadow:a,highlightStyle:{item:{fill:l,fillOpacity:c=n,stroke:u,strokeWidth:d}}}=this.properties;e.datumSelection.each((h,p,m)=>{var g,f;let{cornerRadius:y,topLeftCornerRadius:b,topRightCornerRadius:v,bottomRightCornerRadius:S,bottomLeftCornerRadius:w}=p,T=t&&d!==void 0?d:p.strokeWidth,D=t?c:n;h.fill=(g=t?l:void 0)!=null?g:p.fill,h.stroke=(f=t?u:void 0)!=null?f:p.stroke,h.fillOpacity=D,h.strokeOpacity=r,h.strokeWidth=T,h.lineDash=s,h.lineDashOffset=o,h.topLeftCornerRadius=b?y:0,h.topRightCornerRadius=v?y:0,h.bottomRightCornerRadius=S?y:0,h.bottomLeftCornerRadius=w?y:0,h.fillShadow=a,h.zIndex=t?Hm.highlightedZIndex:m,h.visible=p.height>0})})}updateLabelSelection(e){return we(this,null,function*(){let{labelData:t,labelSelection:n}=e;return n.update(t,r=>{r.tag=1,r.pointerEvents=1,r.textAlign="center",r.textBaseline="middle"})})}updateLabelNodes(e){return we(this,null,function*(){let t=this.isLabelEnabled();e.labelSelection.each((n,r)=>{let s=r.label;s&&t?(n.text=s.text,n.x=s.x,n.y=s.y,n.fontStyle=s.fontStyle,n.fontWeight=s.fontWeight,n.fontSize=s.fontSize,n.fontFamily=s.fontFamily,n.fill=s.fill,n.visible=!0):n.visible=!1})})}initQuadTree(e){bx(e,kI(this.contentGroup.children[0]))}pickNodeClosestDatum(e){return Sx(this,e)}getTooltipHtml(e){let t=this.axes.x,n=this.axes.y;if(!this.properties.isValid()||!t||!n)return Xa;let{xKey:r,yKey:s,xName:o,yName:a,fill:l,aggregation:c,tooltip:u}=this.properties,{aggregatedValue:d,frequency:h,domain:[p,m],itemId:g}=e,f=`${wi(o??r)}: ${t.formatDatum(p)} - ${t.formatDatum(m)}`,y=s?`<b>${wi(a??s)} (${c})</b>: ${n.formatDatum(d)}<br>`:"";y+=`<b>Frequency</b>: ${h}`;let b={title:f,backgroundColor:l,content:y};return u.toTooltipHtml(b,{datum:{data:e.datum,aggregatedValue:e.aggregatedValue,domain:e.domain,frequency:e.frequency},itemId:g,xKey:r,xName:o,yKey:s,yName:a,color:l,title:f,seriesId:this.id})}getLegendData(e){var t,n;if(!((t=this.data)!=null&&t.length)||e!=="category")return[];let{xKey:r,yName:s,fill:o,fillOpacity:a,stroke:l,strokeWidth:c,strokeOpacity:u,visible:d}=this.properties;return[{legendType:"category",id:this.id,itemId:r,seriesId:this.id,enabled:d,label:{text:(n=s??r)!=null?n:"Frequency"},marker:{fill:o??"rgba(0, 0, 0, 0)",stroke:l??"rgba(0, 0, 0, 0)",fillOpacity:a,strokeOpacity:u,strokeWidth:c}}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t}){let n=Mm(Tm(!0,this.axes,"normal"));Ei(this.id,"datums",this.ctx.animationManager,[e],n),ni(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){var t,n;let r=(n=(t=this.processedData)==null?void 0:t.reduced)==null?void 0:n.diff,s=Mm(Tm(!0,this.axes,"normal"));Ei(this.id,"datums",this.ctx.animationManager,[e.datumSelection],s,(o,a)=>Yl(a.domain),r),ni(this,"labels",this.ctx.animationManager,e.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e,seriesRect:t}){var n;return _x((n=this.contextNodeData)==null?void 0:n.nodeData[e],this.contentGroup,t)}};return i.className="HistogramSeries",i.type="histogram",i})(),H9={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",instanceConstructor:U9,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{__extends__:Ka,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontSize:12,fontFamily:Sn,color:Eh},shadow:{enabled:!1,color:Th,xOffset:3,yOffset:3,blur:5}}},paletteFactory:({takeColors:i})=>{let{fills:[e],strokes:[t]}=i(1);return{fill:e,stroke:t}}},hr=class extends ec{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.marker=new Or,this.label=new an,this.tooltip=new Lr,this.connectMissingData=!1}};E([I(Ne)],hr.prototype,"xKey",2);E([I(Ne)],hr.prototype,"yKey",2);E([I(Ne,{optional:!0})],hr.prototype,"xName",2);E([I(Ne,{optional:!0})],hr.prototype,"yName",2);E([I(Ne,{optional:!0})],hr.prototype,"title",2);E([I(Xt)],hr.prototype,"stroke",2);E([I(ke)],hr.prototype,"strokeWidth",2);E([I(Qt)],hr.prototype,"strokeOpacity",2);E([I(qa)],hr.prototype,"lineDash",2);E([I(ke)],hr.prototype,"lineDashOffset",2);E([I(Qe)],hr.prototype,"marker",2);E([I(Qe)],hr.prototype,"label",2);E([I(Qe)],hr.prototype,"tooltip",2);E([I(ht)],hr.prototype,"connectMissingData",2);var z9=(()=>{let i=class extends tc{constructor(e){super({moduleCtx:e,directionKeys:Eu,directionNames:Tu,hasMarkers:!0,pickModes:[2,3,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:yx({getOpacity:()=>this.getOpacity()}),label:el,marker:(t,n)=>ue(ue({},jm(t)),_m(t,n))}}),this.properties=new hr}processData(e){return we(this,null,function*(){var t,n;if(!this.properties.isValid()||this.data==null)return;let{xKey:r,yKey:s}=this.properties,o=!this.ctx.animationManager.isSkipped(),a=(t=this.axes.x)==null?void 0:t.scale,l=(n=this.axes.y)==null?void 0:n.scale,{isContinuousX:c,xScaleType:u,yScaleType:d}=this.getScaleInformation({xScale:a,yScale:l}),h=[];c||h.push(Un(r,u,{id:"xKey"})),o&&(h.push(Rh(c?["xValue"]:void 0)),this.processedData&&h.push(wu(this.processedData))),h.push(mi(r,u,{id:"xValue"}),mi(s,d,{id:"yValue",invalidValue:void 0})),yield this.requestDataModel(e,this.data,{props:h}),this.animationState.transition("updateData")})}getSeriesDomain(e){let{axes:t,dataModel:n,processedData:r}=this;if(!r||!n)return[];let s=t.x,o=t.y,a=n.resolveProcessedDataDefById(this,"xValue");if(e==="x"){let l=n.getDomain(this,"xValue","value",r);return a?.def.type==="value"&&a.def.valueType==="category"?l:kr(ra(l),s)}else{let l=n.getDomain(this,"yValue","value",r);return kr(l,o)}}createNodeData(){return we(this,null,function*(){var e,t,n;let{processedData:r,dataModel:s,axes:o}=this,a=o.x,l=o.y;if(!r||!s||!a||!l)return;let{xKey:c,yKey:u,xName:d,yName:h,marker:p,label:m,connectMissingData:g,legendItemName:f}=this.properties,y=a.scale,b=l.scale,v=((e=y.bandwidth)!=null?e:0)/2,S=((t=b.bandwidth)!=null?t:0)/2,w=[],T=p.enabled?p.size:0,D=s.resolveProcessedDataIndexById(this,"xValue"),O=s.resolveProcessedDataIndexById(this,"yValue"),R=!0,L;for(let B=0;B<r.data.length;B++){let{datum:$,values:U}=L??r.data[B],K=U[D],ie=U[O];if(ie===void 0)R=!g;else{let te=y.convert(K)+v;if(isNaN(te)){R=!g,L=void 0;continue}L=((n=r.data[B+1])==null?void 0:n.values[O])===void 0?void 0:r.data[B+1];let j=b.convert(ie)+S,Y=this.getLabelText(m,{value:ie,datum:$,xKey:c,yKey:u,xName:d,yName:h,legendItemName:f},se=>qt(se)?se.toFixed(2):String(se));w.push({series:this,datum:$,yKey:u,xKey:c,point:{x:te,y:j,moveTo:R,size:T},midPoint:{x:te,y:j},yValue:ie,xValue:K,capDefaults:{lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},label:Y?{text:Y,fontStyle:m.fontStyle,fontWeight:m.fontWeight,fontSize:m.fontSize,fontFamily:m.fontFamily,textAlign:"center",textBaseline:"bottom",fill:m.color}:void 0}),R=!1}}return{itemId:u,nodeData:w,labelData:w,scales:this.calculateScaling(),visible:this.visible}})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){let{shape:e}=this.properties.marker,t=ia(e);return new t}updatePathNodes(e){return we(this,null,function*(){let{paths:[t],opacity:n,visible:r,animationEnabled:s}=e;t.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:n,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),s||(t.visible=r),lv(this,t)})}updateMarkerSelection(e){return we(this,null,function*(){let{nodeData:t}=e,{markerSelection:n}=e,{shape:r,enabled:s}=this.properties.marker;return t=r&&s?t:[],this.properties.marker.isDirty()&&(n.clear(),n.cleanup()),n.update(t,void 0,o=>Yl(o.xValue))})}updateMarkerNodes(e){return we(this,null,function*(){let{markerSelection:t,isHighlight:n}=e,{xKey:r,yKey:s,stroke:o,strokeWidth:a,strokeOpacity:l,marker:c,highlightStyle:u}=this.properties,d=kt(n&&u.item,c.getStyle(),{stroke:o,strokeWidth:a,strokeOpacity:l}),h=this.ctx.animationManager.isSkipped();t.each((p,m)=>{this.updateMarkerStyle(p,c,{datum:m,highlighted:n,xKey:r,yKey:s},d,{applyTranslation:h})}),n||c.markClean()})}updateLabelSelection(e){return we(this,null,function*(){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])})}updateLabelNodes(e){return we(this,null,function*(){let{enabled:t,fontStyle:n,fontWeight:r,fontSize:s,fontFamily:o,color:a}=this.properties.label;e.labelSelection.each((l,c)=>{let{point:u,label:d}=c;c&&d&&t?(l.fontStyle=n,l.fontWeight=r,l.fontSize=s,l.fontFamily=o,l.textAlign=d.textAlign,l.textBaseline=d.textBaseline,l.text=d.text,l.x=u.x,l.y=u.y-10,l.fill=a,l.visible=!0):l.visible=!1})})}getTooltipHtml(e){var t;let n=this.axes.x,r=this.axes.y;if(!this.properties.isValid()||!n||!r)return Xa;let{xKey:s,yKey:o,xName:a,yName:l,strokeWidth:c,marker:u,tooltip:d}=this.properties,{datum:h,xValue:p,yValue:m,itemId:g}=e,f=n.formatDatum(p),y=r.formatDatum(m),b=wi((t=this.properties.title)!=null?t:l),v=wi(f+": "+y),S=kt({fill:u.stroke},u.getStyle(),{strokeWidth:c}),{fill:w}=this.getMarkerStyle(u,{datum:e,xKey:s,yKey:o,highlighted:!1},S);return d.toTooltipHtml({title:b,content:v,backgroundColor:w},ue({datum:h,itemId:g,xKey:s,xName:a,yKey:o,yName:l,title:b,color:w,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(e){var t,n,r,s,o,a,l,c,u,d;if(!((t=this.data)!=null&&t.length&&this.properties.isValid()&&e==="category"))return[];let{yKey:h,yName:p,stroke:m,strokeOpacity:g,strokeWidth:f,lineDash:y,title:b,marker:v,visible:S,legendItemName:w}=this.properties,T="rgba(0, 0, 0, 0)";return[{legendType:"category",id:this.id,itemId:h,legendItemName:w,seriesId:this.id,enabled:S,label:{text:(r=(n=w??b)!=null?n:p)!=null?r:h},marker:{shape:v.shape,fill:(s=v.fill)!=null?s:T,stroke:(a=(o=v.stroke)!=null?o:m)!=null?a:T,fillOpacity:(l=v.fillOpacity)!=null?l:1,strokeOpacity:(u=(c=v.strokeOpacity)!=null?c:g)!=null?u:1,strokeWidth:(d=v.strokeWidth)!=null?d:0,enabled:v.enabled},line:{stroke:m??T,strokeOpacity:g,strokeWidth:f,lineDash:y}}]}updatePaths(e){return we(this,null,function*(){this.updateLinePaths(e.paths,e.contextData)})}updateLinePaths(e,t){let{nodeData:n}=t,[r]=e,{path:s}=r;s.clear(!0);for(let o of n)o.point.moveTo?s.moveTo(o.point.x,o.point.y):s.lineTo(o.point.x,o.point.y);r.checkPathDirty()}animateEmptyUpdateReady(e){let{markerSelection:t,labelSelection:n,annotationSelections:r,contextData:s,paths:o}=e,{animationManager:a}=this.ctx;this.updateLinePaths(o,s),vx(this,a,...o),xn([t],_m),px(this,a,t),ni(this,"labels",a,n),ni(this,"annotations",a,...r)}animateReadyResize(e){let{contextData:t,paths:n}=e;this.updateLinePaths(n,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){var t,n;let{animationManager:r}=this.ctx,{markerSelection:s,labelSelection:o,annotationSelections:a,contextData:l,paths:c,previousContextData:u}=e,[d]=c;super.resetAllAnimation(e);let h=()=>{this.updateLinePaths(c,l)},p=()=>{r.skipCurrentBatch(),h()};if(l==null||u==null){h(),xm(this,r,"added",s),am(this,"path_properties",r,"add",d),ni(this,"labels",r,o),ni(this,"annotations",r,...a);return}let m=AI(l,u,(n=(t=this.processedData)==null?void 0:t.reduced)==null?void 0:n.diff);if(m===void 0){p();return}else if(m.status==="no-op")return;xm(this,r,void 0,s),Ei(this.id,"path_properties",r,[d],m.pathProperties),_I(this.id,"path_update",r,[d],m.path),m.hasMotion&&(ni(this,"labels",r,o),ni(this,"annotations",r,...a))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new ot}getFormattedMarkerStyle(e){let{xKey:t,yKey:n}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:t,yKey:n,highlighted:!0})}computeFocusBounds(e){return Ym(this,e)}};return i.className="LineSeries",i.type="line",i})(),W9={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",instanceConstructor:z9,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{__extends__:Ka,tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:{__extends__:wh,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:Sn,color:ti}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:i=>{let{marker:e}=Gh(i);return{stroke:e.fill,marker:e}}},GI=class extends an{constructor(){super(...arguments),this.placement="top"}};E([I(NS)],GI.prototype,"placement",2);var pr=class extends ec{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new Or,this.label=new GI,this.tooltip=new Lr}};E([I(Ne)],pr.prototype,"xKey",2);E([I(Ne)],pr.prototype,"yKey",2);E([I(Ne,{optional:!0})],pr.prototype,"labelKey",2);E([I(Ne,{optional:!0})],pr.prototype,"colorKey",2);E([I(Ne,{optional:!0})],pr.prototype,"xName",2);E([I(Ne,{optional:!0})],pr.prototype,"yName",2);E([I(Ne,{optional:!0})],pr.prototype,"labelName",2);E([I(Ne,{optional:!0})],pr.prototype,"colorName",2);E([I(Mv,{optional:!0})],pr.prototype,"colorDomain",2);E([I(Ds)],pr.prototype,"colorRange",2);E([I(Ne,{optional:!0})],pr.prototype,"title",2);E([I(Qe)],pr.prototype,"marker",2);E([I(Qe)],pr.prototype,"label",2);E([I(Qe)],pr.prototype,"tooltip",2);var $9=(()=>{let i=class extends tc{constructor(e){super({moduleCtx:e,directionKeys:Eu,directionNames:Tu,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:jm,label:el}}),this.properties=new pr,this.colorScale=new Mu}processData(e){return we(this,null,function*(){var t,n,r;if(!this.properties.isValid()||this.data==null||!this.visible)return;let s=(t=this.axes.x)==null?void 0:t.scale,o=(n=this.axes.y)==null?void 0:n.scale,{xScaleType:a,yScaleType:l}=this.getScaleInformation({xScale:s,yScale:o}),c=this.colorScale.type,{xKey:u,yKey:d,labelKey:h,colorKey:p,colorDomain:m,colorRange:g}=this.properties,{dataModel:f,processedData:y}=yield this.requestDataModel(e,this.data,{props:[Un(u,a,{id:"xKey-raw"}),Un(d,l,{id:"yKey-raw"}),...h?[Un(h,"band",{id:"labelKey-raw"})]:[],mi(u,a,{id:"xValue"}),mi(d,l,{id:"yValue"}),...p?[mi(p,c,{id:"colorValue"})]:[],...h?[mi(h,"band",{id:"labelValue"})]:[]]});if(p){let b=f.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=(r=m??y.domain.values[b])!=null?r:[],this.colorScale.range=g,this.colorScale.update()}this.animationState.transition("updateData")})}getSeriesDomain(e){let{dataModel:t,processedData:n}=this;if(!n||!t)return[];let r=e==="x"?"xValue":"yValue",s=t.resolveProcessedDataDefById(this,r),o=t.getDomain(this,r,"value",n);if(s?.def.type==="value"&&s?.def.valueType==="category")return o;let a=this.axes[e];return kr(ra(o),a)}createNodeData(){return we(this,null,function*(){var e,t,n;let{axes:r,dataModel:s,processedData:o,colorScale:a}=this,{xKey:l,yKey:c,labelKey:u,colorKey:d,xName:h,yName:p,labelName:m,marker:g,label:f,visible:y}=this.properties,{placement:b}=f,v=ia(g.shape),S=r.x,w=r.y;if(!(s&&o&&y&&S&&w))return;let T=s.resolveProcessedDataIndexById(this,"xValue"),D=s.resolveProcessedDataIndexById(this,"yValue"),O=d?s.resolveProcessedDataIndexById(this,"colorValue"):-1,R=u?s.resolveProcessedDataIndexById(this,"labelValue"):-1,L=S.scale,B=w.scale,$=((e=L.bandwidth)!=null?e:0)/2,U=((t=B.bandwidth)!=null?t:0)/2,K=[],ie=f.getFont();for(let{values:te,datum:j}of(n=o.data)!=null?n:[]){let Y=te[T],se=te[D],me=L.convert(Y)+$,re=B.convert(se)+U,ve=this.getLabelText(f,{value:u?te[R]:se,datum:j,xKey:l,yKey:c,labelKey:u,xName:h,yName:p,labelName:m}),_e=Vt.getTextSize(ve,ie),Ge=d?a.convert(te[O]):void 0;K.push({series:this,itemId:c,yKey:c,xKey:l,datum:j,xValue:Y,yValue:se,capDefaults:{lengthRatioMultiplier:g.getDiameter(),lengthMax:1/0},point:{x:me,y:re,size:g.size},midPoint:{x:me,y:re},fill:Ge,label:ue({text:ve},_e),marker:v,placement:b})}return{itemId:c,nodeData:K,labelData:K,scales:this.calculateScaling(),visible:this.visible}})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var e,t;return(t=(e=this.contextNodeData)==null?void 0:e.labelData)!=null?t:[]}markerFactory(){let{shape:e}=this.properties.marker,t=ia(e);return new t}updateMarkerSelection(e){return we(this,null,function*(){let{nodeData:t,markerSelection:n}=e;return this.properties.marker.isDirty()&&(n.clear(),n.cleanup()),n.update(this.properties.marker.enabled?t:[])})}updateMarkerNodes(e){return we(this,null,function*(){let{markerSelection:t,isHighlight:n}=e,{xKey:r,yKey:s,labelKey:o,marker:a,highlightStyle:l}=this.properties,c=kt(n&&l.item,a.getStyle());t.each((u,d)=>{this.updateMarkerStyle(u,a,{datum:d,highlighted:n,xKey:r,yKey:s,labelKey:o},c)}),n||a.markClean()})}updateLabelSelection(e){return we(this,null,function*(){var t,n;let r=this.isLabelEnabled()?(n=(t=this.chart)==null?void 0:t.placeLabels().get(this))!=null?n:[]:[];return e.labelSelection.update(r.map(({datum:s,x:o,y:a})=>Ue(ue({},s),{point:{x:o,y:a,size:s.point.size},placement:"top"})),s=>{s.pointerEvents=1})})}updateLabelNodes(e){return we(this,null,function*(){let{label:t}=this.properties;e.labelSelection.each((n,r)=>{var s,o,a,l;n.text=r.label.text,n.fill=t.color,n.x=(o=(s=r.point)==null?void 0:s.x)!=null?o:0,n.y=(l=(a=r.point)==null?void 0:a.y)!=null?l:0,n.fontStyle=t.fontStyle,n.fontWeight=t.fontWeight,n.fontSize=t.fontSize,n.fontFamily=t.fontFamily,n.textAlign="left",n.textBaseline="top"})})}getTooltipHtml(e){let t=this.axes.x,n=this.axes.y;if(!this.properties.isValid()||!t||!n)return Xa;let{xKey:r,yKey:s,labelKey:o,xName:a,yName:l,labelName:c,title:u=l,marker:d,tooltip:h}=this.properties,{datum:p,xValue:m,yValue:g,label:f,itemId:y}=e,b=kt({fill:e.fill,strokeWidth:this.getStrokeWidth(d.strokeWidth)},d.getStyle()),{fill:v="gray"}=this.getMarkerStyle(d,{datum:e,highlighted:!1,xKey:r,yKey:s,labelKey:o},b),S=wi(t.formatDatum(m)),w=wi(n.formatDatum(g)),T=`<b>${wi(a??r)}</b>: ${S}<br><b>${wi(l??s)}</b>: ${w}`;return o&&(T=`<b>${wi(c??o)}</b>: ${wi(f.text)}<br>`+T),h.toTooltipHtml({title:u,content:T,backgroundColor:v},ue({datum:p,itemId:y,xKey:r,xName:a,yKey:s,yName:l,labelKey:o,labelName:c,title:u,color:v,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(e){var t,n,r,s,o,a;let{yKey:l,yName:c,title:u,marker:d,visible:h}=this.properties,{fill:p,stroke:m,fillOpacity:g,strokeOpacity:f,strokeWidth:y}=d;return!((t=this.data)!=null&&t.length)||!this.properties.isValid()||e!=="category"?[]:[{legendType:"category",id:this.id,itemId:l,seriesId:this.id,enabled:h,label:{text:(n=u??c)!=null?n:l},marker:{shape:d.shape,fill:(s=(r=d.fill)!=null?r:p)!=null?s:"rgba(0, 0, 0, 0)",stroke:(a=(o=d.stroke)!=null?o:m)!=null?a:"rgba(0, 0, 0, 0)",fillOpacity:g??1,strokeOpacity:f??1,strokeWidth:y??0}}]}animateEmptyUpdateReady(e){let{markerSelection:t,labelSelection:n,annotationSelections:r}=e;hx(this,this.ctx.animationManager,t),ni(this,"labels",this.ctx.animationManager,n),ni(this,"annotations",this.ctx.animationManager,...r)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ot}getFormattedMarkerStyle(e){let{xKey:t,yKey:n,labelKey:r}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:t,yKey:n,labelKey:r,highlighted:!0})}computeFocusBounds(e){return Ym(this,e)}};return i.className="ScatterSeries",i.type="scatter",i})(),K9={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",instanceConstructor:$9,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{__extends__:Ka,tooltip:{position:{type:"node"}},marker:{__extends__:wh,fillOpacity:.8},label:{enabled:!1,fontSize:12,fontFamily:Sn,color:ti}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:Gh},UI=class lS{constructor(e,t,n,r){this.startAngle=e,this.endAngle=t,this.innerRadius=n,this.outerRadius=r}clone(){let{startAngle:e,endAngle:t,innerRadius:n,outerRadius:r}=this;return new lS(e,t,n,r)}[Cv](e,t){return new lS(this.startAngle*(1-t)+e.startAngle*t,this.endAngle*(1-t)+e.endAngle*t,this.innerRadius*(1-t)+e.innerRadius*t,this.outerRadius*(1-t)+e.outerRadius*t)}};function uv(i,e,t){let n=Math.sqrt(Math.pow(i,2)+Math.pow(e,2)),{innerRadius:r,outerRadius:s}=t;if(t.startAngle===t.endAngle||n<Math.min(r,s)||n>Math.max(r,s))return!1;let o=fm(t.startAngle),a=fm(t.endAngle),l=Math.atan2(e,i);return o<a?l<=a&&l>=o:l<=a&&l>=-Math.PI||l>=o&&l<=Math.PI}function AP(i,e){let{startAngle:t,endAngle:n,innerRadius:r,outerRadius:s}=e,o={x:s*Math.cos(t),y:s*Math.sin(t)},a={x:s*Math.cos(n),y:s*Math.sin(n)},l=r===0?{x:0,y:0}:{x:r*Math.cos(t),y:r*Math.sin(t)},c=r===0?{x:0,y:0}:{x:r*Math.cos(n),y:r*Math.sin(n)};return nh(i.start.x,i.start.y,i.end.x,i.end.y,o.x,o.y,l.x,l.y)||nh(i.start.x,i.start.y,i.end.x,i.end.y,a.x,a.y,c.x,c.y)||lI(0,0,s,t,n,!0,i.start.x,i.start.y,i.end.x,i.end.y)}function HI(i,e){let t={x:i.x,y:i.y},n={x:i.x+i.width,y:i.y},r={x:i.x,y:i.y+i.height},s={x:i.x+i.width,y:i.y+i.height};return AP({start:t,end:n},e)||AP({start:r,end:s},e)}function PP(i,e,t,n){if(t===0&&n===0)return 0;if(Math.asin(Math.abs(1*t)/(i+1*t))+Math.asin(Math.abs(1*n)/(i+1*n))-e<0)return 1;let s=0,o=1;for(let a=0;a<8;a+=1){let l=(s+o)/2;Math.asin(Math.abs(l*t)/(i+l*t))+Math.asin(Math.abs(l*n)/(i+l*n))-e<0?s=l:o=l}return s}var j9=1e-6;function $l(i,e){return wv(i,e)<j9?e:$i(i-e)+e}function I0(i,e,t=0){let r=Math.abs(e-i)>=2*Math.PI?2*Math.PI:$i(e-i);return i=$l(i,t),e=i+r,{startAngle:i,endAngle:e}}function F0(i,e,t,n,r,s){let o=Math.sin(s),a=Math.cos(s),l=mt(i,2)+mt(e,2)-mt(t,2),c=NaN,u=NaN,d=NaN,h=NaN;if(a>.5){let v=o/a,S=1+mt(v,2),w=-2*(i+e*v),T=mt(w,2)-4*S*l;if(T<0)return;let D=(-w+Math.sqrt(T))/(2*S),O=(-w-Math.sqrt(T))/(2*S);c=D,u=D*v,d=O,h=O*v}else{let v=a/o,S=1+mt(v,2),w=-2*(e+i*v),T=mt(w,2)-4*S*l;if(T<0)return;let D=(-w+Math.sqrt(T))/(2*S),O=(-w-Math.sqrt(T))/(2*S);c=D*v,u=D,d=O*v,h=O}let p=a,m=o,g=c*p+u*m,f=d*p+h*m,y=g>0?$l(Math.atan2(u-e,c-i),n):NaN,b=f>0?$l(Math.atan2(h-e,d-i),n):NaN;if(y>=n&&y<=r)return y;if(b>=n&&b<=r)return b}function O0(i,e,t,n,r,s){let o=Math.hypot(i,e),a=(mt(o,2)-mt(t,2)+mt(s,2))/(2*o),l=o-a,c=Math.atan2(e,i),u=Math.acos(-l/t),d=$l(c+u,n),h=$l(c-u,n);if(d>=n&&d<=r)return d;if(h>=n&&h<=r)return h}var Tb=class{constructor(i,e,t,n,r){this.cx=i,this.cy=e,this.r=t,this.a0=n,this.a1=r,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(i){return{x:this.cx+this.r*Math.cos(i),y:this.cy+this.r*Math.sin(i)}}clipStart(i){i==null||!this.isValid()||i<this.a0||(this.a0=i,(Number.isNaN(i)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(i){i==null||!this.isValid()||i>this.a1||(this.a1=i,(Number.isNaN(i)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},rr=(()=>{let i=class extends Fs{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=Math.PI*2,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(e){this.concentricEdgeInset=e,this.radialEdgeInset=e}set cornerRadius(e){this.startOuterCornerRadius=e,this.endOuterCornerRadius=e,this.startInnerCornerRadius=e,this.endInnerCornerRadius=e}computeBBox(){let e=this.outerRadius;return new nt(this.centerX-e,this.centerY-e,e*2,e*2)}normalizedRadii(){let{concentricEdgeInset:e}=this;return{innerRadius:Math.max(Math.min(this.innerRadius,this.outerRadius)+e,0),outerRadius:Math.max(Math.max(this.innerRadius,this.outerRadius)-e,0)}}normalizedClipSector(){let{clipSector:e}=this;if(e==null)return;let{startAngle:t,endAngle:n}=I0(this.startAngle,this.endAngle),{innerRadius:r,outerRadius:s}=this.normalizedRadii(),o=I0(e.startAngle,e.endAngle,t);return new UI(Math.max(t,o.startAngle),Math.min(n,o.endAngle),Math.max(r,e.innerRadius),Math.min(s,e.outerRadius))}getAngleOffset(e){return e>0?this.radialEdgeInset/e:0}arc(e,t,n,r,s,o,a,l){if(e<=0)return;let{startAngle:c,endAngle:u}=I0(this.startAngle,this.endAngle),{innerRadius:d,outerRadius:h}=this.normalizedRadii(),p=this.normalizedClipSector();if(l&&d<=0)return;let m=this.getAngleOffset(d),g=this.getAngleOffset(h),f=l?this.getAngleOffset(d+e):this.getAngleOffset(h-e),y=a?c+f+t:u-f-t,b=l?d+e:h-e,v=b*Math.cos(y),S=b*Math.sin(y);if(p!=null&&(!a&&!(y>=c-1e-6&&y<=p.endAngle-1e-6)||a&&!(y>=p.startAngle+1e-6&&y<=u-1e-6)||l&&!(b>=p.innerRadius-1e-6)||!l&&!(b<=p.outerRadius+1e-6)))return;let w=new Tb(v,S,e,n,r);if(p!=null){l?(w.clipStart(F0(v,S,e,n,r,p.endAngle-m)),w.clipEnd(F0(v,S,e,n,r,p.startAngle+m))):(w.clipStart(F0(v,S,e,n,r,p.startAngle+g)),w.clipEnd(F0(v,S,e,n,r,p.endAngle-g)));let L,B;if(a?(L=O0(v,S,e,n,r,p.innerRadius),B=O0(v,S,e,n,r,p.outerRadius)):(L=O0(v,S,e,n,r,p.outerRadius),B=O0(v,S,e,n,r,p.innerRadius)),w.clipStart(L),w.clipEnd(B),L!=null){let{x:$,y:U}=w.pointAt(L),K=$l(Math.atan2(U,$),c);a?o?.clipStart(K):s.clipEnd(K)}if(B!=null){let{x:$,y:U}=w.pointAt(B),K=$l(Math.atan2(U,$),c);a?s.clipStart(K):o?.clipEnd(K)}}if(p!=null){let{x:L,y:B}=w.pointAt((w.a0+w.a1)/2);if(!uv(L,B,p))return}let{x:T,y:D}=w.pointAt(a===l?w.a0:w.a1),O=$l(Math.atan2(D,T),c),R=l?o:s;return a?R?.clipStart(O):R?.clipEnd(O),w}updatePath(){var e,t,n,r,s;let{path:a,centerX:l,centerY:c,concentricEdgeInset:u,radialEdgeInset:d}=this,{startOuterCornerRadius:h,endOuterCornerRadius:p,startInnerCornerRadius:m,endInnerCornerRadius:g}=this,{startAngle:f,endAngle:y}=I0(this.startAngle,this.endAngle),{innerRadius:b,outerRadius:v}=this.normalizedRadii(),S=this.normalizedClipSector(),w=y-f,T=w>=2*Math.PI-1e-6;if(a.clear(),((e=S?.startAngle)!=null?e:f)===((t=S?.endAngle)!=null?t:y))return;if(T&&this.clipSector==null&&h===0&&p===0&&m===0&&g===0){a.moveTo(l+v*Math.cos(f),c+v*Math.sin(f)),a.arc(l,c,v,f,y),b>u&&(a.moveTo(l+b*Math.cos(y),c+b*Math.sin(y)),a.arc(l,c,b,y,f,!0)),a.closePath();return}let D=this.getAngleOffset(b),O=this.getAngleOffset(v);if(w<2*O)return;let L=((n=S?.innerRadius)!=null?n:b)>u,B=b<u||w<2*D,$=v-b,U=Math.max(h,m,p,g),K=U>0?Math.min($/U,1):1;h*=K,p*=K,m*=K,g*=K;let ie=PP(v,w-2*O,-h,-p);if(h*=ie,p*=ie,!B&&L){let tt=PP(b,w-2*D,m,g);m*=tt,g*=tt}else m=0,g=0;let te=Math.max(h+m,p+g),j=te>0?Math.min($/te,1):1;h*=j,p*=j,m*=j,g*=j;let Y=0,se=0,me=h/(v-h),re=p/(v-p);if(me>=0&&me<.999999)Y=Math.asin(me);else{Y=w/2;let tt=v/(1/Math.sin(Y)+1);h=Math.min(tt,h)}if(re>=0&&re<.999999)se=Math.asin(re);else{se=w/2;let tt=v/(1/Math.sin(se)+1);p=Math.min(tt,p)}let ve=Math.asin(m/(b+m)),_e=Math.asin(g/(b+g)),Ge=(r=S?.outerRadius)!=null?r:v,Le=this.getAngleOffset(Ge),We=new Tb(0,0,Ge,f+Le,y-Le),xe=(s=S?.innerRadius)!=null?s:b,$e=this.getAngleOffset(xe),He=L?new Tb(0,0,xe,f+$e,y-$e):void 0;S!=null&&(We.clipStart(S.startAngle),We.clipEnd(S.endAngle),He?.clipStart(S.startAngle),He?.clipEnd(S.endAngle));let at=this.arc(h,Y,f-Math.PI*.5,f+Y,We,He,!0,!1),Ct=this.arc(p,se,y-se,y+Math.PI*.5,We,He,!1,!1),ri=this.arc(g,_e,y+Math.PI*.5,y+Math.PI-_e,We,He,!1,!0),Wt=this.arc(m,ve,f+Math.PI+ve,f+Math.PI*1.5,We,He,!0,!0);if(B){let tt=w<Math.PI*.5?d*(1+Math.cos(w))/Math.sin(w):NaN,wt;tt>0&&tt<v?wt=Math.max(Math.hypot(d,tt),b):wt=b;let It=f+w*.5;a.moveTo(l+wt*Math.cos(It),c+wt*Math.sin(It))}else if(Wt?.isValid()===!0){let{x:tt,y:wt}=Wt.pointAt(Wt.a1);a.moveTo(l+tt,c+wt)}else if(He?.isValid()===!0){let{x:tt,y:wt}=He.pointAt(He.a0);a.moveTo(l+tt,c+wt)}else{let tt=f+w/2,wt=b*Math.cos(tt),It=b*Math.sin(tt);a.moveTo(l+wt,c+It)}if(at?.isValid()===!0){let{cx:tt,cy:wt,r:It,a0:Bi,a1:An}=at;a.arc(l+tt,c+wt,It,Bi,An)}if(We.isValid()){let{r:tt,a0:wt,a1:It}=We;a.arc(l,c,tt,wt,It)}if(Ct?.isValid()===!0){let{cx:tt,cy:wt,r:It,a0:Bi,a1:An}=Ct;a.arc(l+tt,c+wt,It,Bi,An)}if(!B){if(ri?.isValid()===!0){let{cx:tt,cy:wt,r:It,a0:Bi,a1:An}=ri;a.arc(l+tt,c+wt,It,Bi,An)}if(He?.isValid()===!0){let{r:tt,a0:wt,a1:It}=He;a.arc(l,c,tt,It,wt,!0)}if(Wt?.isValid()===!0){let{cx:tt,cy:wt,r:It,a0:Bi,a1:An}=Wt;a.arc(l+tt,c+wt,It,Bi,An)}}a.closePath()}isPointInPath(e,t){var n;let r=this.transformPoint(e,t),{startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=(n=this.clipSector)!=null?n:this;return uv(r.x,r.y,{startAngle:s,endAngle:o,innerRadius:Math.min(a,l),outerRadius:Math.max(a,l)})}};return i.className="Sector",i})();E([yt()],rr.prototype,"centerX",2);E([yt()],rr.prototype,"centerY",2);E([yt()],rr.prototype,"innerRadius",2);E([yt()],rr.prototype,"outerRadius",2);E([yt()],rr.prototype,"startAngle",2);E([yt()],rr.prototype,"endAngle",2);E([yt()],rr.prototype,"clipSector",2);E([yt()],rr.prototype,"concentricEdgeInset",2);E([yt()],rr.prototype,"radialEdgeInset",2);E([yt()],rr.prototype,"startOuterCornerRadius",2);E([yt()],rr.prototype,"endOuterCornerRadius",2);E([yt()],rr.prototype,"startInnerCornerRadius",2);E([yt()],rr.prototype,"endInnerCornerRadius",2);var zI=class extends Oi{constructor(){super(...arguments),this.showInLegend=!1}};E([I(ht)],zI.prototype,"showInLegend",2);var Ex=class extends an{constructor(){super(...arguments),this.margin=2}set(i,e){return super.set(i)}};E([I(Ne)],Ex.prototype,"text",2);E([I(fi)],Ex.prototype,"margin",2);var Tx=class extends Ot{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};E([I(Xt)],Tx.prototype,"fill",2);E([I(Qt)],Tx.prototype,"fillOpacity",2);var Uh=class extends an{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};E([I(ke)],Uh.prototype,"offset",2);E([I(ql)],Uh.prototype,"minAngle",2);E([I(ke)],Uh.prototype,"minSpacing",2);E([I(ke)],Uh.prototype,"maxCollisionOffset",2);E([I(ht)],Uh.prototype,"avoidCollisions",2);var Mx=class extends an{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};E([I(fi)],Mx.prototype,"positionOffset",2);E([I(Qt)],Mx.prototype,"positionRatio",2);var Hv=class extends Ot{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};E([I(Ds,{optional:!0})],Hv.prototype,"colors",2);E([I(ke)],Hv.prototype,"length",2);E([I(ke)],Hv.prototype,"strokeWidth",2);var Gt=class extends go{constructor(){super(...arguments),this.fills=Object.values(Es),this.strokes=Object.values(Ba),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=void 0,this.innerLabels=new Dm(Ex),this.title=new zI,this.innerCircle=new Tx,this.shadow=new fo,this.calloutLabel=new Uh,this.sectorLabel=new Mx,this.calloutLine=new Hv,this.tooltip=new Lr,this.__BACKGROUND_COLOR_DO_NOT_USE=void 0}isValid(){let i=super.isValid();return this.innerRadiusRatio==null&&this.innerRadiusOffset==null?(Ie.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):i}};E([I(Ne)],Gt.prototype,"angleKey",2);E([I(Ne,{optional:!0})],Gt.prototype,"angleName",2);E([I(Ne,{optional:!0})],Gt.prototype,"radiusKey",2);E([I(Ne,{optional:!0})],Gt.prototype,"radiusName",2);E([I(ke,{optional:!0})],Gt.prototype,"radiusMin",2);E([I(ke,{optional:!0})],Gt.prototype,"radiusMax",2);E([I(Ne,{optional:!0})],Gt.prototype,"calloutLabelKey",2);E([I(Ne,{optional:!0})],Gt.prototype,"calloutLabelName",2);E([I(Ne,{optional:!0})],Gt.prototype,"sectorLabelKey",2);E([I(Ne,{optional:!0})],Gt.prototype,"sectorLabelName",2);E([I(Ne,{optional:!0})],Gt.prototype,"legendItemKey",2);E([I(Ds)],Gt.prototype,"fills",2);E([I(Ds)],Gt.prototype,"strokes",2);E([I(Qt)],Gt.prototype,"fillOpacity",2);E([I(Qt)],Gt.prototype,"strokeOpacity",2);E([I(qa)],Gt.prototype,"lineDash",2);E([I(ke)],Gt.prototype,"lineDashOffset",2);E([I(ke)],Gt.prototype,"cornerRadius",2);E([I(Qr,{optional:!0})],Gt.prototype,"formatter",2);E([I(ql)],Gt.prototype,"rotation",2);E([I(fi)],Gt.prototype,"outerRadiusOffset",2);E([I(Qt)],Gt.prototype,"outerRadiusRatio",2);E([I(fi,{optional:!0})],Gt.prototype,"innerRadiusOffset",2);E([I(Qt,{optional:!0})],Gt.prototype,"innerRadiusRatio",2);E([I(ke)],Gt.prototype,"strokeWidth",2);E([I(ke,{optional:!0})],Gt.prototype,"sectorSpacing",2);E([I(OS)],Gt.prototype,"innerLabels",2);E([I(Qe)],Gt.prototype,"title",2);E([I(Qe)],Gt.prototype,"innerCircle",2);E([I(Qe)],Gt.prototype,"shadow",2);E([I(Qe)],Gt.prototype,"calloutLabel",2);E([I(Qe)],Gt.prototype,"sectorLabel",2);E([I(Qe)],Gt.prototype,"calloutLine",2);E([I(Qe)],Gt.prototype,"tooltip",2);E([I(Ne,{optional:!0})],Gt.prototype,"__BACKGROUND_COLOR_DO_NOT_USE",2);function fu(i,e,t,n){let r=[t.convert(0),t.convert(1)],s=[n.convert(0),n.convert(1)],o=Math.PI/-2+ir(e),a=i?"initial":"update",l=({radius:m})=>({innerRadius:r[0],outerRadius:r[0]+(r[1]-r[0])*m}),c=({radius:m})=>({innerRadius:s[0],outerRadius:s[0]+(s[1]-s[0])*m});return{nodes:{toFn:(m,g,f,{prevLive:y})=>{var b,v;let{startAngle:S,endAngle:w,innerRadius:T,outerRadius:D}=g,{stroke:O,fill:R}=g.sectorFormat;if(f==="removed"&&y?(S=(b=y.datum)==null?void 0:b.endAngle,w=(v=y.datum)==null?void 0:v.endAngle):f==="removed"&&!y&&(S=o,w=o),f==="removed"){let L=l(g);T=L.innerRadius,D=L.outerRadius}return{startAngle:S,endAngle:w,outerRadius:D,innerRadius:T,stroke:O,fill:R}},fromFn:(m,g,f,{prevFromProps:y})=>{var b,v,S,w,T,D;let{startAngle:O,endAngle:R,innerRadius:L,outerRadius:B}=m,{fill:$,stroke:U}=g.sectorFormat;if(f==="unknown"||f==="added"&&!y?(O=o,R=o,L=g.innerRadius,B=g.outerRadius):f==="added"&&y&&(O=(b=y.endAngle)!=null?b:o,R=(v=y.endAngle)!=null?v:o,L=(S=y.innerRadius)!=null?S:g.innerRadius,B=(w=y.outerRadius)!=null?w:g.outerRadius),f==="added"&&!i){let K=c(g);L=K.innerRadius,B=K.outerRadius}return f==="updated"&&($=(T=m.fill)!=null?T:$,U=(D=m.stroke)!=null?D:U),{startAngle:O,endAngle:R,innerRadius:L,outerRadius:B,fill:$,stroke:U,phase:a}}},innerCircle:{fromFn:(m,g)=>{var f,y,b;return{size:(b=(y=(f=m.previousDatum)==null?void 0:f.radius)!=null?y:m.size)!=null?b:0,phase:a}},toFn:(m,g)=>{var f;return{size:(f=g.radius)!=null?f:0}}}}}function Ax(i,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}function Px(i,e){let t=e.y-i.centerY,n=e.x-i.centerX,r=Math.atan2(t,n),s=i.getItemNodes();for(let o of s)if(o.datum.missing!==!0&&Om(r,o.startAngle,o.endAngle)){let a=Math.sqrt(n*n+t*t),l=0;return a<o.innerRadius?l=o.innerRadius-a:a>o.outerRadius&&(l=a-o.outerRadius),{datum:o.datum,distance:l}}}function Dx(i,e){let t=i.getNodeData();if(t===void 0)return;let{centerX:n,centerY:r}=i,s=t[e.datumIndex],o=[{radius:s.innerRadius,angle:s.startAngle},{radius:s.innerRadius,angle:s.endAngle},{radius:s.outerRadius,angle:s.startAngle},{radius:s.outerRadius,angle:s.endAngle}],a=[0,Math.PI/2,Math.PI,3*Math.PI/2];for(let g of a)Om(g,s.startAngle,s.endAngle)&&o.push({radius:s.outerRadius,angle:g});let l=o.map(({radius:g,angle:f})=>PD(n,r,g,f)),c=l.map(g=>g.x),u=l.map(g=>g.y),d=Math.min(...c),h=Math.min(...u),p=Math.max(...c)-d,m=Math.max(...u)-h;return new nt(d,h,p,m)}var zv=class extends sx{constructor(i){var e=i,{useLabelLayer:t=!1,pickModes:n=[0],canHaveAxes:r=!1,animationResetFns:s}=e,o=Xi(e,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(Ue(ue({},o),{useLabelLayer:t,pickModes:n,contentGroupVirtual:!1,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:r})),this.itemGroup=this.contentGroup.appendChild(new ot),this.nodeData=[],this.itemSelection=Ti.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=Ti.select(this.labelGroup,Vt,!1),this.highlightSelection=Ti.select(this.highlightGroup,()=>this.nodeFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.showFocusBox=!1,this.itemGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=s,this.animationState=new Vm("empty",{empty:{update:{target:"ready",action:a=>this.animateEmptyUpdateReady(a)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:a=>this.animateReadyHighlight(a),highlightMarkers:a=>this.animateReadyHighlightMarkers(a),resize:a=>this.animateReadyResize(a),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:a=>this.animateWaitingUpdateReady(a)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:a=>this.animateClearingUpdateEmpty(a)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getItemNodes(){return this.itemGroup.children}getNodeData(){return this.nodeData}resetAnimation(i){i==="initial"?this.animationState.transition("reset"):i==="ready"&&this.animationState.transition("skip")}getLabelData(){return[]}computeLabelsBBox(i,e){return null}resetAllAnimation(){var i;let{item:e,label:t}=(i=this.animationResetFns)!=null?i:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&xn([this.itemSelection,this.highlightSelection],e),t&&xn([this.labelSelection],t),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(i){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(i){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(i){var e;let{item:t}=(e=this.animationResetFns)!=null?e:{};t&&xn([this.highlightSelection],t)}animateReadyHighlightMarkers(i){}animateReadyResize(i){this.resetAllAnimation()}animateClearingUpdateEmpty(i){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(i){return{seriesRect:i}}},Y9=class extends Um{constructor(i,e,t,n){super(i,e,t,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey,this.calloutLabelKey=n.properties.calloutLabelKey,this.sectorLabelKey=n.properties.sectorLabelKey}},WI=(()=>{let i=class extends zv{constructor(e){super({moduleCtx:e,pickModes:[0],useLabelLayer:!0,animationResetFns:{item:Ax,label:el}}),this.properties=new Gt,this.previousRadiusScale=new Zo,this.radiusScale=new Zo,this.backgroundGroup=this.rootGroup.appendChild(new ot({name:`${this.id}-background`,layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new ot({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Ha),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Ha),this.innerCircleGroup=this.backgroundGroup.appendChild(new ot({name:`${this.id}-innerCircle`})),this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=Y9,this.angleScale=new Zo,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(s=>s+Math.PI/2);let t=new ot({name:"pieCalloutLabels"}),n=new ot({name:"pieSectorLabels"}),r=new ot({name:"innerLabels"});this.labelGroup.append(t),this.labelGroup.append(n),this.labelGroup.append(r),this.calloutLabelSelection=Ti.select(t,ot),this.sectorLabelSelection=Ti.select(n,Vt),this.innerLabelsSelection=Ti.select(r,Vt),this.innerCircleSelection=Ti.select(this.innerCircleGroup,Ha)}addChartEventListeners(){var e;this.destroyFns.push((e=this.ctx.chartEventManager)==null?void 0:e.addListener("legend-item-click",t=>this.onLegendItemClick(t)))}get visible(){return super.visible&&(this.seriesItemEnabled.length===0||this.seriesItemEnabled.some(e=>e))}nodeFactory(){return new rr}getSeriesDomain(e){return e==="x"?this.angleScale.domain:this.radiusScale.domain}processData(e){return we(this,null,function*(){var t,n,r,s,o;if(this.data==null||!this.properties.isValid())return;let{data:a}=this,{visible:l,seriesItemEnabled:c}=this,{angleKey:u,radiusKey:d,calloutLabelKey:h,sectorLabelKey:p,legendItemKey:m}=this.properties,g=!this.ctx.animationManager.isSkipped(),f=[],y=[];m?f.push(Un(m,"band",{id:"legendItemKey"})):h?f.push(Un(h,"band",{id:"calloutLabelKey"})):p&&f.push(Un(p,"band",{id:"sectorLabelKey"}));let b=this.radiusScale.type,v=this.radiusScale.type;d&&y.push(tx(d,{id:"radiusValue",min:(t=this.properties.radiusMin)!=null?t:0,max:this.properties.radiusMax}),mi(d,b,{id:"radiusRaw"}),bm({id:"radiusValue"},[0,1],1,(n=this.properties.radiusMin)!=null?n:0,this.properties.radiusMax)),h&&y.push(mi(h,"band",{id:"calloutLabelValue"})),p&&y.push(mi(p,"band",{id:"sectorLabelValue"})),m&&y.push(mi(m,"band",{id:"legendItemValue"})),g&&this.processedData&&f.length>0&&y.push(wu(this.processedData)),y.push(Rh()),a=a.map((S,w)=>l&&c[w]?S:Ue(ue({},S),{[u]:0})),yield this.requestDataModel(e,a,{props:[...f,ix(u,v,{id:"angleValue",onlyPositive:!0}),mi(u,v,{id:"angleRaw"}),bm({id:"angleValue"},[0,1],0,0),...y]});for(let S of(o=(s=(r=this.processedData)==null?void 0:r.defs)==null?void 0:s.values)!=null?o:[]){let{id:w,missing:T,property:D}=S,O=ZS(this,T);w!=="angleRaw"&&O>0&&Ie.warnOnce(`no value was found for the key '${String(D)}' on ${O} data element${O>1?"s":""}`)}this.animationState.transition("updateData")})}maybeRefreshNodeData(){return we(this,null,function*(){var e;if(!this.nodeDataRefresh)return;let{nodeData:t=[]}=(e=yield this.createNodeData())!=null?e:{};this.nodeData=t,this.nodeDataRefresh=!1})}getProcessedDataIndexes(e){let t=e.resolveProcessedDataIndexById(this,"angleValue"),n=this.properties.radiusKey?e.resolveProcessedDataIndexById(this,"radiusValue"):-1,r=this.properties.calloutLabelKey?e.resolveProcessedDataIndexById(this,"calloutLabelValue"):-1,s=this.properties.sectorLabelKey?e.resolveProcessedDataIndexById(this,"sectorLabelValue"):-1,o=this.properties.legendItemKey?e.resolveProcessedDataIndexById(this,"legendItemValue"):-1;return{angleIdx:t,radiusIdx:n,calloutLabelIdx:r,sectorLabelIdx:s,legendItemIdx:o}}createNodeData(){return we(this,null,function*(){let{id:e,processedData:t,dataModel:n,angleScale:r}=this,{rotation:s,innerRadiusRatio:o}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,{itemId:e,nodeData:[],labelData:[]};if(!t||!n||t.type!=="ungrouped")return;let{angleIdx:a,radiusIdx:l,calloutLabelIdx:c,sectorLabelIdx:u,legendItemIdx:d}=this.getProcessedDataIndexes(n),h=0,p=0,m=t.data.map((g,f)=>{var y;let{datum:b,values:v}=g,S=v[a],w=r.convert(h)+ir(s);h=S,p+=S;let T=r.convert(h)+ir(s),D=Math.abs(T-w),O=w+D/2,R=v[a+1],L=l>=0&&(y=v[l])!=null?y:1,B=l>=0?v[l+1]:void 0,$=d>=0?v[d]:void 0,U=this.getLabels(b,O,D,!0,v[c],v[u],$),K=this.getSectorFormat(b,f,!1);return ue({itemId:f,series:this,datum:b,index:f,angleValue:R,midAngle:O,midCos:Math.cos(O),midSin:Math.sin(O),startAngle:w,endAngle:T,sectorFormat:K,radiusValue:B,radius:L,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(L),0),legendItemValue:$},U)});return this.zerosumOuterRing.visible=p===0,this.zerosumInnerRing.visible=p===0&&o!=null&&o!==1&&o>0,{itemId:e,nodeData:m,labelData:m}})}getLabels(e,t,n,r,s,o,a){let{calloutLabel:l,sectorLabel:c,legendItemKey:u}=this.properties,d=!r||l.enabled?this.properties.calloutLabelKey:void 0,h=!r||c.enabled?this.properties.sectorLabelKey:void 0;if(!d&&!h&&!u)return{};let p={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},m={};return d&&n>ir(l.minAngle)&&(m.calloutLabel=Ue(ue({},this.getTextAlignment(t)),{text:this.getLabelText(l,Ue(ue({},p),{value:s})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),h&&(m.sectorLabel={text:this.getLabelText(c,Ue(ue({},p),{value:o}))}),u!=null&&a!=null&&(m.legendItem={key:u,text:a}),m}getTextAlignment(e){let t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],n=fm(e),r=-.75*Math.PI,s=n-r,o=Math.floor(s/(Math.PI/2)),a=Sv(o,t.length);return t[a]}getSectorFormat(e,t,n){var r,s,o,a,l;let{callbackCache:c,highlightManager:u}=this.ctx,{angleKey:d,radiusKey:h,fills:p,strokes:m,formatter:g,sectorSpacing:f,__BACKGROUND_COLOR_DO_NOT_USE:y}=this.properties,b=u.getActiveHighlight(),v=n&&b?.series===this&&t===b.itemId,S=m[t%m.length];f==null&&S==null&&(S=y);let{fill:w,fillOpacity:T,stroke:D,strokeWidth:O,strokeOpacity:R}=kt(v&&this.properties.highlightStyle.item,{fill:p.length>0?p[t%p.length]:void 0,fillOpacity:this.properties.fillOpacity,stroke:S,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()}),L;return g&&(L=c.call(g,{datum:e,angleKey:d,radiusKey:h,fill:w,stroke:D,fills:p,strokes:m,strokeWidth:O,highlighted:v,seriesId:this.id})),{fill:(r=L?.fill)!=null?r:w,fillOpacity:(s=L?.fillOpacity)!=null?s:T,stroke:(o=L?.stroke)!=null?o:D,strokeWidth:(a=L?.strokeWidth)!=null?a:O,strokeOpacity:(l=L?.strokeOpacity)!=null?l:R}}getInnerRadius(){let{radius:e}=this,{innerRadiusRatio:t=1,innerRadiusOffset:n=0}=this.properties,r=e*t+n;return r===e||r<0?0:r}getOuterRadius(){let{outerRadiusRatio:e,outerRadiusOffset:t}=this.properties;return Math.max(this.radius*e+t,0)}updateRadiusScale(e){let t=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t),this.nodeData=this.nodeData.map(n=>{var r=n,{radius:s}=r,o=Xi(r,["radius"]);return Ue(ue({},o),{radius:s,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(s),0)})})}getTitleTranslationY(){var e,t;let n=Math.max(0,this.radiusScale.range[1]);if(n===0)return NaN;let s=2+((t=(e=this.properties.title)==null?void 0:e.spacing)!=null?t:0),o=Math.max(0,-n);return-n-s-o}update(e){return we(this,arguments,function*({seriesRect:t}){let{title:n}=this.properties,r={seriesRectWidth:t?.width,seriesRectHeight:t?.height},s=Ms(this.nodeDataDependencies,r)!=null;if(s&&(this._nodeDataDependencies=r),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),n){let o=this.getTitleTranslationY(),a=n.node.computeBBox();n.node.visible=n.enabled&&isFinite(o)&&!this.bboxIntersectsSurroundingSeries(a,0,o),n.node.translationY=isFinite(o)?o:0}for(let o of[this.zerosumInnerRing,this.zerosumOuterRing])o.fillOpacity=0,o.stroke=this.properties.calloutLabel.color,o.strokeWidth=1,o.strokeOpacity=1;this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(t)})}updateTitleNodes(){var e,t;let{oldTitle:n}=this,{title:r}=this.properties;n!==r&&(n&&((e=this.labelGroup)==null||e.removeChild(n.node)),r&&(r.node.textBaseline="bottom",(t=this.labelGroup)==null||t.appendChild(r.node)),this.oldTitle=r)}updateNodeMidPoint(){this.nodeData.forEach(e=>{let t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,t),y:e.midSin*Math.max(0,t)}})}updateSelections(){return we(this,null,function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()})}updateGroupSelection(){return we(this,null,function*(){let{itemSelection:e,highlightSelection:t,calloutLabelSelection:n,sectorLabelSelection:r,innerLabelsSelection:s}=this,o=(a,l)=>{let c=this.nodeData;l&&(c=c.map(u=>Ue(ue({},u),{sectorFormat:ue({},u.sectorFormat)}))),a.update(c,void 0,u=>this.getDatumId(u)),this.ctx.animationManager.isSkipped()&&a.cleanup()};o(e,!1),o(t,!0),n.update(this.nodeData,a=>{let l=new Ln;l.tag=0,l.pointerEvents=1,a.appendChild(l);let c=new Vt;c.tag=1,c.pointerEvents=1,a.appendChild(c)}),r.update(this.nodeData,a=>{a.pointerEvents=1}),s.update(this.properties.innerLabels,a=>{a.pointerEvents=1})})}updateInnerCircleSelection(){let{innerCircle:e}=this.properties,t=0,n=this.getInnerRadius();if(n>0){let s=Math.min(n,this.getOuterRadius());t=Math.ceil(s*2+1)}let r=e?[{radius:t}]:[];this.innerCircleSelection.update(r)}updateNodes(e){return we(this,null,function*(){let t=this.ctx.highlightManager.getActiveHighlight(),n=this.visible&&this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=n,this.backgroundGroup.visible=n,this.contentGroup.visible=n,this.highlightGroup.visible=n&&t?.series===this,this.labelGroup&&(this.labelGroup.visible=n),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((s,{radius:o})=>{var a,l;s.setProperties({fill:(a=this.properties.innerCircle)==null?void 0:a.fill,opacity:(l=this.properties.innerCircle)==null?void 0:l.fillOpacity,size:o})});let r=(s,o,a,l)=>{let c=this.getSectorFormat(o.datum,o.itemId,l);o.sectorFormat.fill=c.fill,o.sectorFormat.stroke=c.stroke;let u=this.ctx.animationManager.isSkipped();u&&(s.startAngle=o.startAngle,s.endAngle=o.endAngle,s.innerRadius=o.innerRadius,s.outerRadius=o.outerRadius),(l||u)&&(s.fill=c.fill,s.stroke=c.stroke),s.strokeWidth=c.strokeWidth,s.fillOpacity=c.fillOpacity,s.strokeOpacity=this.properties.strokeOpacity,s.lineDash=this.properties.lineDash,s.lineDashOffset=this.properties.lineDashOffset,s.fillShadow=this.properties.shadow,s.cornerRadius=this.properties.cornerRadius,s.inset=this.properties.sectorSpacing!=null?(this.properties.sectorSpacing+(c.stroke!=null?c.strokeWidth:0))/2:0,s.lineJoin=this.properties.sectorSpacing!=null?"miter":"round"};this.itemSelection.each((s,o,a)=>r(s,o,a,!1)),this.highlightSelection.each((s,o,a)=>{let l=t?.series===this&&s.datum.itemId===t.itemId;r(s,o,a,!0),s.visible=l}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")})}updateCalloutLineNodes(){var e;let{calloutLine:t}=this.properties,n=t.length,r=t.strokeWidth,s=(e=t.colors)!=null?e:this.properties.strokes,{offset:o}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((a,l)=>{var c;let u=a.datum,{calloutLabel:d,outerRadius:h}=u;if(d?.text&&!d.hidden&&h!==0){a.visible=!0,a.strokeWidth=r,a.stroke=s[l%s.length],a.fill=void 0;let p=u.midCos*h,m=u.midSin*h,g=u.midCos*(h+n),f=u.midSin*(h+n);if(((c=d.collisionTextAlign)!=null?c:d.collisionOffsetY!==0)&&d.box!=null){let b=d.box,v=g,S=f;g<b.x?v=b.x:g>b.x+b.width&&(v=b.x+b.width),f<b.y?S=b.y:f>b.y+b.height&&(S=b.y+b.height);let w=v-g,T=S-f,D=Math.sqrt(Math.pow(w,2)+Math.pow(T,2)),O=D-o;O>0&&(g=g+w*O/D,f=f+T*O/D)}a.x1=p,a.y1=m,a.x2=g,a.y2=f}else a.visible=!1})}getLabelOverflow(e,t,n){let r=n.x-this.centerX,s=n.x+n.width-this.centerX,o=n.y-this.centerY,a=n.y+n.height-this.centerY,l=1,c=1;t.x+l<r?c=(t.x+t.width-r)/t.width:t.x+t.width-l>s&&(c=(s-t.x)/t.width);let u=t.y+l<o||t.y+t.height-l>a,d=c===1?e.length:Math.floor(e.length*c)-1,h=this.bboxIntersectsSurroundingSeries(t);return{textLength:d,hasVerticalOverflow:u,hasSurroundingSeriesOverflow:h}}bboxIntersectsSurroundingSeries(e,t=0,n=0){let{surroundingRadius:r}=this;if(r==null)return!1;let s=[{x:e.x+t,y:e.y+n},{x:e.x+e.width+t,y:e.y+n},{x:e.x+e.width+t,y:e.y+e.height+n},{x:e.x+t,y:e.y+e.height+n}],o=mt(r,2);return s.some(a=>mt(a.x,2)+mt(a.y,2)>o)}computeCalloutLabelCollisionOffsets(){let{radiusScale:e}=this,{calloutLabel:t,calloutLine:n}=this.properties,{offset:r,minSpacing:s}=t,o=e.convert(0),a=v=>!v.calloutLabel||v.outerRadius===0,l=this.nodeData,c=this.nodeData.filter(v=>!a(v));if(c.forEach(v=>{let S=v.calloutLabel;S!=null&&(S.hidden=!1,S.collisionTextAlign=void 0,S.collisionOffsetY=0)}),c.length<=1)return;let u=c.filter(v=>v.midCos<0).sort((v,S)=>v.midSin-S.midSin),d=c.filter(v=>v.midCos>=0).sort((v,S)=>v.midSin-S.midSin),h=c.filter(v=>{var S;return v.midSin<0&&((S=v.calloutLabel)==null?void 0:S.textAlign)==="center"}).sort((v,S)=>v.midCos-S.midCos),p=c.filter(v=>{var S;return v.midSin>=0&&((S=v.calloutLabel)==null?void 0:S.textAlign)==="center"}).sort((v,S)=>v.midCos-S.midCos),m=new Vt,g=v=>{var S;let w=v.calloutLabel;if(w==null)return new nt(0,0,0,0);let T=v.outerRadius+n.length+r,D=v.midCos*T,O=v.midSin*T+w.collisionOffsetY;return m.text=w.text,m.x=D,m.y=O,m.setFont(this.properties.calloutLabel),m.setAlign({textAlign:(S=w.collisionTextAlign)!=null?S:w.textAlign,textBaseline:w.textBaseline}),m.computeBBox()},f=(v,S,w)=>{let T=g(v).grow(s/2),D=g(S).grow(s/2);if(T.x<D.x+D.width&&T.x+T.width>D.x&&(w==="to-top"?T.y<D.y+D.height:T.y+T.height>D.y)){let R=w==="to-top"?T.y-D.y-D.height:T.y+T.height-D.y;S.calloutLabel.collisionOffsetY=R}},y=v=>{let S=v.slice().sort((T,D)=>Math.abs(T.midSin)-Math.abs(D.midSin))[0],w=v.indexOf(S);for(let T=w-1;T>=0;T--){let D=v[T+1],O=v[T];f(D,O,"to-top")}for(let T=w+1;T<v.length;T++){let D=v[T-1],O=v[T];f(D,O,"to-bottom")}},b=v=>{let S=c.some(L=>L.calloutLabel.collisionOffsetY!==0),w=v.map(L=>g(L)),T=w.map(L=>L.clone().grow(s/2)),D=!1;for(let L=0;L<T.length&&!D;L++){let B=T[L];for(let $=L+1;$<v.length;$++){let U=T[$];if(B.collidesBBox(U)){D=!0;break}}}let O=l.map(L=>{let{startAngle:B,endAngle:$,outerRadius:U}=L;return{startAngle:B,endAngle:$,innerRadius:o,outerRadius:U}}),R=w.some(L=>O.some(B=>HI(L,B)));!D&&!S&&!R||v.filter(L=>L.calloutLabel.textAlign==="center").forEach(L=>{let B=L.calloutLabel;L.midCos<0?B.collisionTextAlign="right":L.midCos>0?B.collisionTextAlign="left":B.collisionTextAlign="center"})};y(u),y(d),b(h),b(p)}updateCalloutLabelNodes(e){let{radiusScale:t}=this,{calloutLabel:n,calloutLine:r}=this.properties,s=r.length,{offset:o,color:a}=n,l=new Vt;this.calloutLabelSelection.selectByTag(1).forEach(c=>{var u;let{datum:d}=c,h=d.calloutLabel,p=t.convert(d.radius),m=Math.max(0,p);if(!h?.text||m===0||h.hidden){c.visible=!1;return}let g=m+s+o,f=d.midCos*g,y=d.midSin*g+h.collisionOffsetY,b={textAlign:(u=h.collisionTextAlign)!=null?u:h.textAlign,textBaseline:h.textBaseline};l.text=h.text,l.x=f,l.y=y,l.setFont(this.properties.calloutLabel),l.setAlign(b);let v=l.computeBBox(),S=h.text,w=!0;if(n.avoidCollisions){let{textLength:T,hasVerticalOverflow:D}=this.getLabelOverflow(h.text,v,e);S=h.text.length===T?h.text:`${h.text.substring(0,T)}\u2026`,w=!D}c.text=S,c.x=f,c.y=y,c.setFont(this.properties.calloutLabel),c.setAlign(b),c.fill=a,c.visible=w})}computeLabelsBBox(e,t){return we(this,null,function*(){let{calloutLabel:n,calloutLine:r}=this.properties,s=r.length,{offset:o,maxCollisionOffset:a,minSpacing:l}=n;if(!n.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();let c=[],u=new Vt,d,{title:h}=this.properties;if(h?.text&&h.enabled){let p=this.getTitleTranslationY();isFinite(p)&&(u.text=h.text,u.x=0,u.y=p,u.setFont(h),u.setAlign({textBaseline:"bottom",textAlign:"center"}),d=u.computeBBox(),c.push(d))}return this.nodeData.forEach(p=>{var m;let g=p.calloutLabel;if(!g||p.outerRadius===0)return null;let f=p.outerRadius+s+o,y=p.midCos*f,b=p.midSin*f+g.collisionOffsetY;u.text=g.text,u.x=y,u.y=b,u.setFont(this.properties.calloutLabel),u.setAlign({textAlign:(m=g.collisionTextAlign)!=null?m:g.textAlign,textBaseline:g.textBaseline});let v=u.computeBBox();if(g.box=v,Math.abs(g.collisionOffsetY)>a){g.hidden=!0;return}if(d){let S=t.y-this.centerY,w=new nt(d.x-l,S,d.width+2*l,d.y+d.height+l-S);if(v.collidesBBox(w)){g.hidden=!0;return}}if(e.hideWhenNecessary){let{textLength:S,hasVerticalOverflow:w,hasSurroundingSeriesOverflow:T}=this.getLabelOverflow(g.text,v,t),D=g.text.length>2&&S<2;if(w||D||T){g.hidden=!0;return}}g.hidden=!1,c.push(v)}),c.length===0?null:nt.merge(c)})}updateSectorLabelNodes(){let{radiusScale:e}=this,t=e.convert(0),{fontSize:n,fontStyle:r,fontWeight:s,fontFamily:o,positionOffset:a,positionRatio:l,color:c}=this.properties.sectorLabel;this.sectorLabelSelection.each((u,d)=>{let{sectorLabel:h,outerRadius:p}=d,m=!1;if(h&&p!==0){let g=t*(1-l)+p*l+a;u.fill=c,u.fontStyle=r,u.fontWeight=s,u.fontSize=n,u.fontFamily=o,u.text=h.text,u.x=d.midCos*g,u.y=d.midSin*g,u.textAlign="center",u.textBaseline="middle";let f=u.computeBBox(),y=[[f.x,f.y],[f.x+f.width,f.y],[f.x+f.width,f.y+f.height],[f.x,f.y+f.height]],{startAngle:b,endAngle:v}=d,S={startAngle:b,endAngle:v,innerRadius:t,outerRadius:p};y.every(([w,T])=>uv(w,T,S))&&(m=!0)}u.visible=m})}updateInnerLabelNodes(){let e=[],t=[];this.innerLabelsSelection.each((d,h)=>{let{fontStyle:p,fontWeight:m,fontSize:g,fontFamily:f,color:y}=h;d.fontStyle=p,d.fontWeight=m,d.fontSize=g,d.fontFamily=f,d.text=h.text,d.x=0,d.y=0,d.fill=y,d.textAlign="center",d.textBaseline="alphabetic",e.push(d.computeBBox()),t.push(h.margin)});let n=d=>d===0?0:t[d],r=d=>d===t.length-1?0:t[d],s=e.reduce((d,h,p)=>d+h.height+n(p)+r(p),0),o=Math.max(...e.map(d=>d.width)),a=this.getInnerRadius(),c=Math.sqrt(Math.pow(o/2,2)+Math.pow(s/2,2))<=(a>0?a:this.getOuterRadius()),u=[];for(let d=0,h=-s/2;d<e.length;d++){let m=e[d].height+h+n(d);u.push(m),h=m+r(d)}this.innerLabelsSelection.each((d,h,p)=>{d.y=u[p],d.visible=c})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}getDatumLegendName(e){let{angleKey:t,calloutLabelKey:n,sectorLabelKey:r,legendItemKey:s}=this.properties,{sectorLabel:o,calloutLabel:a,legendItem:l}=e;if(s&&l!==void 0)return l.text;if(n&&n!==t&&a?.text!==void 0)return a.text;if(r&&r!==t&&o?.text!==void 0)return o.text}pickNodeClosestDatum(e){return Px(this,e)}getTooltipHtml(e){var t;if(!this.properties.isValid())return Xa;let{datum:n,angleValue:r,sectorFormat:{fill:s},itemId:o}=e,a=wi((t=this.properties.title)==null?void 0:t.text),l=qt(r)?bv(r):String(r),c=this.getDatumLegendName(e);return this.properties.tooltip.toTooltipHtml({title:a??c,content:a&&c?`${c}: ${l}`:l,backgroundColor:s},{datum:n,itemId:o,title:a,color:s,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey})}getLegendData(e){var t,n,r,s,o;let{visible:a,processedData:l,dataModel:c}=this;if(!c||!l?.data.length||!this.properties.isValid()||e!=="category")return[];let{angleKey:u,calloutLabelKey:d,sectorLabelKey:h,legendItemKey:p}=this.properties;if(!p&&(!d||d===u)&&(!h||h===u))return[];let{calloutLabelIdx:m,sectorLabelIdx:g,legendItemIdx:f}=this.getProcessedDataIndexes(c),y=((t=this.properties.title)==null?void 0:t.showInLegend)&&this.properties.title.text,b=[];for(let v=0;v<l.data.length;v++){let{datum:S,values:w}=l.data[v],T=[];y&&T.push(y);let D=this.getLabels(S,2*Math.PI,2*Math.PI,!1,w[m],w[g],w[f]);if(p&&D.legendItem!==void 0?T.push(D.legendItem.text):d&&d!==u&&((n=D.calloutLabel)==null?void 0:n.text)!==void 0?T.push((r=D.calloutLabel)==null?void 0:r.text):h&&h!==u&&((s=D.sectorLabel)==null?void 0:s.text)!==void 0&&T.push((o=D.sectorLabel)==null?void 0:o.text),T.length===0)continue;let O=this.getSectorFormat(S,v,!1);b.push({legendType:"category",id:this.id,itemId:v,seriesId:this.id,enabled:a&&this.seriesItemEnabled[v],label:{text:T.join(" - ")},marker:{fill:O.fill,stroke:O.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},legendItemName:p!=null?S[p]:void 0})}return b}onLegendItemClick(e){let{enabled:t,itemId:n,series:r,legendItemName:s}=e;r.id===this.id?this.toggleSeriesItem(n,t):s!=null&&this.toggleOtherSeriesItems(s,t)}toggleSeriesItem(e,t){this.seriesItemEnabled[e]=t,this.nodeDataRefresh=!0}toggleOtherSeriesItems(e,t){var n;if(!this.properties.legendItemKey||!this.dataModel)return;let r=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue");(n=this.processedData)==null||n.data.forEach(({values:s},o)=>{s[r]===e&&this.toggleSeriesItem(o,t)})}animateEmptyUpdateReady(e){let{animationManager:t}=this.ctx,n=fu(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Ei(this.id,"nodes",t,[this.itemSelection,this.highlightSelection],n.nodes),Ei(this.id,"innerCircle",t,[this.innerCircleSelection],n.innerCircle),ni(this,"callout",t,this.calloutLabelSelection),ni(this,"sector",t,this.sectorLabelSelection),ni(this,"inner",t,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var e,t,n,r,s,o;let{itemSelection:a,highlightSelection:l,processedData:c,radiusScale:u,previousRadiusScale:d}=this,{animationManager:h}=this.ctx,p=(e=c?.reduced)==null?void 0:e.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);let m=((t=p?.moved.size)!=null?t:0)===0,g=((n=c?.defs.keys.length)!=null?n:0)>0,f=(o=(s=(r=c?.reduced)==null?void 0:r.animationValidation)==null?void 0:s.uniqueKeys)!=null?o:!0;(!m||!g||!f)&&this.ctx.animationManager.skipCurrentBatch();let y=fu(!1,this.properties.rotation,u,d);Ei(this.id,"nodes",h,[a,l],y.nodes,(b,v)=>this.getDatumId(v),p),Ei(this.id,"innerCircle",h,[this.innerCircleSelection],y.innerCircle),ni(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),ni(this,"sector",this.ctx.animationManager,this.sectorLabelSelection),ni(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){let{itemSelection:e,highlightSelection:t,radiusScale:n,previousRadiusScale:r}=this,{animationManager:s}=this.ctx,o=fu(!1,this.properties.rotation,n,r);Ei(this.id,"nodes",s,[e,t],o.nodes),Ei(this.id,"innerCircle",s,[this.innerCircleSelection],o.innerCircle),gu(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),gu(this,"sector",this.ctx.animationManager,this.sectorLabelSelection),gu(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(e){var t,n,r;let{calloutLabelKey:s,sectorLabelKey:o,legendItemKey:a}=this.properties;if((r=(n=(t=this.processedData)==null?void 0:t.reduced)==null?void 0:n.animationValidation)!=null&&r.uniqueKeys){if(a)return e[a];if(s)return e[s];if(o)return e[o]}}getDatumId(e){let{index:t}=e,n=this.getDatumIdFromData(e.datum);return n!=null?String(n):`${t}`}onDataChange(){var e;let{data:t,seriesItemEnabled:n}=this;this.seriesItemEnabled=(e=t?.map((r,s)=>{var o;return(o=n[s])!=null?o:!0}))!=null?e:[]}computeFocusBounds(e){return Dx(this,e)}};return i.className="DonutSeries",i.type="donut",i})(),$I={series:{__extends__:Ka,title:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:14,fontFamily:Sn,color:lh,spacing:5},calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Sn,color:ti,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:Sn,color:Eh,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,shadow:{enabled:!1,color:Th,xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Sn,color:ti,margin:2},__BACKGROUND_COLOR_DO_NOT_USE:dm}},KI=({takeColors:i,colorsCount:e,userPalette:t})=>{let{fills:n,strokes:r}=i(e);return{fills:n,strokes:t?r:[],calloutLine:{colors:r}}},q9={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",instanceConstructor:WI,themeTemplate:$I,paletteFactory:KI},jI=class extends Oi{constructor(){super(...arguments),this.showInLegend=!1}};E([I(ht)],jI.prototype,"showInLegend",2);var kx=class extends an{set(i,e){return super.set(i)}};E([xu("Use a Donut Series instead"),I(Ne,{optional:!0})],kx.prototype,"text",2);E([xu("Use a Donut Series instead"),I(fi,{optional:!0})],kx.prototype,"margin",2);var Ix=class extends Ot{};E([xu("Use a Donut Series instead"),I(Xt,{optional:!0})],Ix.prototype,"fill",2);E([xu("Use a Donut Series instead"),I(Qt,{optional:!0})],Ix.prototype,"fillOpacity",2);var Hh=class extends an{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};E([I(ke)],Hh.prototype,"offset",2);E([I(ql)],Hh.prototype,"minAngle",2);E([I(ke)],Hh.prototype,"minSpacing",2);E([I(ke)],Hh.prototype,"maxCollisionOffset",2);E([I(ht)],Hh.prototype,"avoidCollisions",2);var Fx=class extends an{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};E([I(fi)],Fx.prototype,"positionOffset",2);E([I(Qt)],Fx.prototype,"positionRatio",2);var Wv=class extends Ot{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};E([I(Ds,{optional:!0})],Wv.prototype,"colors",2);E([I(ke)],Wv.prototype,"length",2);E([I(ke)],Wv.prototype,"strokeWidth",2);var Ut=class extends go{constructor(){super(...arguments),this.fills=Object.values(Es),this.strokes=Object.values(Ba),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=void 0,this.innerLabels=new Dm(kx),this.title=new jI,this.innerCircle=new Ix,this.shadow=new fo,this.calloutLabel=new Hh,this.sectorLabel=new Fx,this.calloutLine=new Wv,this.tooltip=new Lr,this.__BACKGROUND_COLOR_DO_NOT_USE=void 0}};E([I(Ne)],Ut.prototype,"angleKey",2);E([I(Ne,{optional:!0})],Ut.prototype,"angleName",2);E([I(Ne,{optional:!0})],Ut.prototype,"radiusKey",2);E([I(Ne,{optional:!0})],Ut.prototype,"radiusName",2);E([I(ke,{optional:!0})],Ut.prototype,"radiusMin",2);E([I(ke,{optional:!0})],Ut.prototype,"radiusMax",2);E([I(Ne,{optional:!0})],Ut.prototype,"calloutLabelKey",2);E([I(Ne,{optional:!0})],Ut.prototype,"calloutLabelName",2);E([I(Ne,{optional:!0})],Ut.prototype,"sectorLabelKey",2);E([I(Ne,{optional:!0})],Ut.prototype,"sectorLabelName",2);E([I(Ne,{optional:!0})],Ut.prototype,"legendItemKey",2);E([I(Ds)],Ut.prototype,"fills",2);E([I(Ds)],Ut.prototype,"strokes",2);E([I(Qt)],Ut.prototype,"fillOpacity",2);E([I(Qt)],Ut.prototype,"strokeOpacity",2);E([I(qa)],Ut.prototype,"lineDash",2);E([I(ke)],Ut.prototype,"lineDashOffset",2);E([I(ke)],Ut.prototype,"cornerRadius",2);E([I(Qr,{optional:!0})],Ut.prototype,"formatter",2);E([I(ql)],Ut.prototype,"rotation",2);E([I(fi)],Ut.prototype,"outerRadiusOffset",2);E([I(Qt)],Ut.prototype,"outerRadiusRatio",2);E([xu("Use a Donut Series instead"),I(fi,{optional:!0})],Ut.prototype,"innerRadiusOffset",2);E([xu("Use a Donut Series instead"),I(Qt,{optional:!0})],Ut.prototype,"innerRadiusRatio",2);E([I(ke)],Ut.prototype,"strokeWidth",2);E([I(ke,{optional:!0})],Ut.prototype,"sectorSpacing",2);E([I(OS)],Ut.prototype,"innerLabels",2);E([I(Qe)],Ut.prototype,"title",2);E([I(Qe)],Ut.prototype,"innerCircle",2);E([I(Qe)],Ut.prototype,"shadow",2);E([I(Qe)],Ut.prototype,"calloutLabel",2);E([I(Qe)],Ut.prototype,"sectorLabel",2);E([I(Qe)],Ut.prototype,"calloutLine",2);E([I(Qe)],Ut.prototype,"tooltip",2);E([I(Ne,{optional:!0})],Ut.prototype,"__BACKGROUND_COLOR_DO_NOT_USE",2);var X9=class extends Um{constructor(i,e,t,n){super(i,e,t,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey,this.calloutLabelKey=n.properties.calloutLabelKey,this.sectorLabelKey=n.properties.sectorLabelKey}},YI=(()=>{let i=class extends zv{constructor(e){super({moduleCtx:e,pickModes:[0],useLabelLayer:!0,animationResetFns:{item:Ax,label:el}}),this.properties=new Ut,this.previousRadiusScale=new Zo,this.radiusScale=new Zo,this.backgroundGroup=this.rootGroup.appendChild(new ot({name:`${this.id}-background`,layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new ot({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Ha),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Ha),this.innerCircleGroup=this.backgroundGroup.appendChild(new ot({name:`${this.id}-innerCircle`})),this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=X9,this.angleScale=new Zo,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(s=>s+Math.PI/2);let t=new ot({name:"pieCalloutLabels"}),n=new ot({name:"pieSectorLabels"}),r=new ot({name:"innerLabels"});this.labelGroup.append(t),this.labelGroup.append(n),this.labelGroup.append(r),this.calloutLabelSelection=Ti.select(t,ot),this.sectorLabelSelection=Ti.select(n,Vt),this.innerLabelsSelection=Ti.select(r,Vt),this.innerCircleSelection=Ti.select(this.innerCircleGroup,Ha)}addChartEventListeners(){var e;this.destroyFns.push((e=this.ctx.chartEventManager)==null?void 0:e.addListener("legend-item-click",t=>this.onLegendItemClick(t)))}get visible(){return super.visible&&(this.seriesItemEnabled.length===0||this.seriesItemEnabled.some(e=>e))}nodeFactory(){return new rr}getSeriesDomain(e){return e==="x"?this.angleScale.domain:this.radiusScale.domain}processData(e){return we(this,null,function*(){var t,n,r,s,o;if(this.data==null||!this.properties.isValid())return;let{data:a}=this,{visible:l,seriesItemEnabled:c}=this,{angleKey:u,radiusKey:d,calloutLabelKey:h,sectorLabelKey:p,legendItemKey:m}=this.properties,g=!this.ctx.animationManager.isSkipped(),f=[],y=[];m?f.push(Un(m,"band",{id:"legendItemKey"})):h?f.push(Un(h,"band",{id:"calloutLabelKey"})):p&&f.push(Un(p,"band",{id:"sectorLabelKey"}));let b=this.radiusScale.type,v=this.radiusScale.type;d&&y.push(tx(d,{id:"radiusValue",min:(t=this.properties.radiusMin)!=null?t:0,max:this.properties.radiusMax}),mi(d,b,{id:"radiusRaw"}),bm({id:"radiusValue"},[0,1],1,(n=this.properties.radiusMin)!=null?n:0,this.properties.radiusMax)),h&&y.push(mi(h,"band",{id:"calloutLabelValue"})),p&&y.push(mi(p,"band",{id:"sectorLabelValue"})),m&&y.push(mi(m,"band",{id:"legendItemValue"})),g&&this.processedData&&f.length>0&&y.push(wu(this.processedData)),y.push(Rh()),a=a.map((S,w)=>l&&c[w]?S:Ue(ue({},S),{[u]:0})),yield this.requestDataModel(e,a,{props:[...f,ix(u,v,{id:"angleValue",onlyPositive:!0}),mi(u,v,{id:"angleRaw"}),bm({id:"angleValue"},[0,1],0,0),...y]});for(let S of(o=(s=(r=this.processedData)==null?void 0:r.defs)==null?void 0:s.values)!=null?o:[]){let{id:w,missing:T,property:D}=S,O=ZS(this,T);w!=="angleRaw"&&O>0&&Ie.warnOnce(`no value was found for the key '${String(D)}' on ${O} data element${O>1?"s":""}`)}this.animationState.transition("updateData")})}maybeRefreshNodeData(){return we(this,null,function*(){var e;if(!this.nodeDataRefresh)return;let{nodeData:t=[]}=(e=yield this.createNodeData())!=null?e:{};this.nodeData=t,this.nodeDataRefresh=!1})}getProcessedDataIndexes(e){let t=e.resolveProcessedDataIndexById(this,"angleValue"),n=this.properties.radiusKey?e.resolveProcessedDataIndexById(this,"radiusValue"):-1,r=this.properties.calloutLabelKey?e.resolveProcessedDataIndexById(this,"calloutLabelValue"):-1,s=this.properties.sectorLabelKey?e.resolveProcessedDataIndexById(this,"sectorLabelValue"):-1,o=this.properties.legendItemKey?e.resolveProcessedDataIndexById(this,"legendItemValue"):-1;return{angleIdx:t,radiusIdx:n,calloutLabelIdx:r,sectorLabelIdx:s,legendItemIdx:o}}createNodeData(){return we(this,null,function*(){let{id:e,processedData:t,dataModel:n,angleScale:r}=this,{rotation:s}=this.properties;if(!t||!n||t.type!=="ungrouped")return;let{angleIdx:o,radiusIdx:a,calloutLabelIdx:l,sectorLabelIdx:c,legendItemIdx:u}=this.getProcessedDataIndexes(n),d=0,h=0,p=t.data.map((g,f)=>{var y;let{datum:b,values:v}=g,S=v[o],w=r.convert(d)+ir(s);d=S,h+=S;let T=r.convert(d)+ir(s),D=Math.abs(T-w),O=w+D/2,R=v[o+1],L=a>=0&&(y=v[a])!=null?y:1,B=a>=0?v[a+1]:void 0,$=u>=0?v[u]:void 0,U=this.getLabels(b,O,D,!0,v[l],v[c],$),K=this.getSectorFormat(b,f,!1);return ue({itemId:f,series:this,datum:b,index:f,angleValue:R,midAngle:O,midCos:Math.cos(O),midSin:Math.sin(O),startAngle:w,endAngle:T,sectorFormat:K,radiusValue:B,radius:L,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(L),0),legendItemValue:$},U)});this.zerosumOuterRing.visible=h===0;let{innerRadiusRatio:m=1}=this.properties;return this.zerosumInnerRing.visible=h===0&&m!==1&&m>0,{itemId:e,nodeData:p,labelData:p}})}getLabels(e,t,n,r,s,o,a){let{calloutLabel:l,sectorLabel:c,legendItemKey:u}=this.properties,d=!r||l.enabled?this.properties.calloutLabelKey:void 0,h=!r||c.enabled?this.properties.sectorLabelKey:void 0;if(!d&&!h&&!u)return{};let p={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},m={};return d&&n>ir(l.minAngle)&&(m.calloutLabel=Ue(ue({},this.getTextAlignment(t)),{text:this.getLabelText(l,Ue(ue({},p),{value:s})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),h&&(m.sectorLabel={text:this.getLabelText(c,Ue(ue({},p),{value:o}))}),u!=null&&a!=null&&(m.legendItem={key:u,text:a}),m}getTextAlignment(e){let t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],n=fm(e),r=-.75*Math.PI,s=n-r,o=Math.floor(s/(Math.PI/2)),a=Sv(o,t.length);return t[a]}getSectorFormat(e,t,n){var r,s,o,a,l;let{callbackCache:c,highlightManager:u}=this.ctx,{angleKey:d,radiusKey:h,fills:p,strokes:m,formatter:g,sectorSpacing:f,__BACKGROUND_COLOR_DO_NOT_USE:y}=this.properties,b=u.getActiveHighlight(),v=n&&b?.series===this&&t===b.itemId,S=m[t%m.length];f!=null&&(S??(S=y));let{fill:w,fillOpacity:T,stroke:D,strokeWidth:O,strokeOpacity:R}=kt(v&&this.properties.highlightStyle.item,{fill:p.length>0?p[t%p.length]:void 0,fillOpacity:this.properties.fillOpacity,stroke:S,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()}),L;return g&&(L=c.call(g,{datum:e,angleKey:d,radiusKey:h,fill:w,stroke:D,fills:p,strokes:m,strokeWidth:O,highlighted:v,seriesId:this.id})),{fill:(r=L?.fill)!=null?r:w,fillOpacity:(s=L?.fillOpacity)!=null?s:T,stroke:(o=L?.stroke)!=null?o:D,strokeWidth:(a=L?.strokeWidth)!=null?a:O,strokeOpacity:(l=L?.strokeOpacity)!=null?l:R}}getInnerRadius(){let{radius:e}=this,{innerRadiusRatio:t=1,innerRadiusOffset:n=0}=this.properties,r=e*t+n;return r===e||r<0?0:r}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(e){let t=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t),this.nodeData=this.nodeData.map(n=>{var r=n,{radius:s}=r,o=Xi(r,["radius"]);return Ue(ue({},o),{radius:s,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(s),0)})})}getTitleTranslationY(){var e,t;let n=Math.max(0,this.radiusScale.range[1]);if(n===0)return NaN;let s=2+((t=(e=this.properties.title)==null?void 0:e.spacing)!=null?t:0),o=Math.max(0,-n);return-n-s-o}update(e){return we(this,arguments,function*({seriesRect:t}){let{title:n}=this.properties,r={seriesRectWidth:t?.width,seriesRectHeight:t?.height},s=Ms(this.nodeDataDependencies,r)!=null;if(s&&(this._nodeDataDependencies=r),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),n){let o=this.getTitleTranslationY(),a=n.node.computeBBox();n.node.visible=n.enabled&&isFinite(o)&&!this.bboxIntersectsSurroundingSeries(a,0,o),n.node.translationY=isFinite(o)?o:0}for(let o of[this.zerosumInnerRing,this.zerosumOuterRing])o.fillOpacity=0,o.stroke=this.properties.calloutLabel.color,o.strokeWidth=1,o.strokeOpacity=1;this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(t)})}updateTitleNodes(){var e,t;let{oldTitle:n}=this,{title:r}=this.properties;n!==r&&(n&&((e=this.labelGroup)==null||e.removeChild(n.node)),r&&(r.node.textBaseline="bottom",(t=this.labelGroup)==null||t.appendChild(r.node)),this.oldTitle=r)}updateNodeMidPoint(){this.nodeData.forEach(e=>{let t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,t),y:e.midSin*Math.max(0,t)}})}updateSelections(){return we(this,null,function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()})}updateGroupSelection(){return we(this,null,function*(){let{itemSelection:e,highlightSelection:t,calloutLabelSelection:n,sectorLabelSelection:r,innerLabelsSelection:s}=this,o=(a,l)=>{let c=this.nodeData;l&&(c=c.map(u=>Ue(ue({},u),{sectorFormat:ue({},u.sectorFormat)}))),a.update(c,void 0,u=>this.getDatumId(u)),this.ctx.animationManager.isSkipped()&&a.cleanup()};o(e,!1),o(t,!0),n.update(this.nodeData,a=>{let l=new Ln;l.tag=0,l.pointerEvents=1,a.appendChild(l);let c=new Vt;c.tag=1,c.pointerEvents=1,a.appendChild(c)}),r.update(this.nodeData,a=>{a.pointerEvents=1}),s.update(this.properties.innerLabels,a=>{a.pointerEvents=1})})}updateInnerCircleSelection(){let{innerCircle:e}=this.properties,t=0,n=this.getInnerRadius();if(n>0){let s=Math.min(n,this.getOuterRadius());t=Math.ceil(s*2+1)}let r=e?[{radius:t}]:[];this.innerCircleSelection.update(r)}updateNodes(e){return we(this,null,function*(){let t=this.ctx.highlightManager.getActiveHighlight(),n=this.visible&&this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=n,this.backgroundGroup.visible=n,this.contentGroup.visible=n,this.highlightGroup.visible=n&&t?.series===this,this.labelGroup&&(this.labelGroup.visible=n),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((s,{radius:o})=>{var a,l;s.setProperties({fill:(a=this.properties.innerCircle)==null?void 0:a.fill,opacity:(l=this.properties.innerCircle)==null?void 0:l.fillOpacity,size:o})});let r=(s,o,a,l)=>{let c=this.getSectorFormat(o.datum,o.itemId,l);o.sectorFormat.fill=c.fill,o.sectorFormat.stroke=c.stroke;let u=this.ctx.animationManager.isSkipped();u&&(s.startAngle=o.startAngle,s.endAngle=o.endAngle,s.innerRadius=o.innerRadius,s.outerRadius=o.outerRadius),(l||u)&&(s.fill=c.fill,s.stroke=c.stroke),s.strokeWidth=c.strokeWidth,s.fillOpacity=c.fillOpacity,s.strokeOpacity=this.properties.strokeOpacity,s.lineDash=this.properties.lineDash,s.lineDashOffset=this.properties.lineDashOffset,s.fillShadow=this.properties.shadow,s.cornerRadius=this.properties.cornerRadius,s.inset=this.properties.sectorSpacing!=null?(this.properties.sectorSpacing+(c.stroke!=null?c.strokeWidth:0))/2:0,s.lineJoin=this.properties.sectorSpacing!=null?"miter":"round"};this.itemSelection.each((s,o,a)=>r(s,o,a,!1)),this.highlightSelection.each((s,o,a)=>{let l=t?.series===this&&s.datum.itemId===t.itemId;r(s,o,a,!0),s.visible=l}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")})}updateCalloutLineNodes(){var e;let{calloutLine:t}=this.properties,n=t.length,r=t.strokeWidth,s=(e=t.colors)!=null?e:this.properties.strokes,{offset:o}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((a,l)=>{var c;let u=a.datum,{calloutLabel:d,outerRadius:h}=u;if(d?.text&&!d.hidden&&h!==0){a.visible=!0,a.strokeWidth=r,a.stroke=s[l%s.length],a.fill=void 0;let p=u.midCos*h,m=u.midSin*h,g=u.midCos*(h+n),f=u.midSin*(h+n);if(((c=d.collisionTextAlign)!=null?c:d.collisionOffsetY!==0)&&d.box!=null){let b=d.box,v=g,S=f;g<b.x?v=b.x:g>b.x+b.width&&(v=b.x+b.width),f<b.y?S=b.y:f>b.y+b.height&&(S=b.y+b.height);let w=v-g,T=S-f,D=Math.sqrt(Math.pow(w,2)+Math.pow(T,2)),O=D-o;O>0&&(g=g+w*O/D,f=f+T*O/D)}a.x1=p,a.y1=m,a.x2=g,a.y2=f}else a.visible=!1})}getLabelOverflow(e,t,n){let r=n.x-this.centerX,s=n.x+n.width-this.centerX,o=n.y-this.centerY,a=n.y+n.height-this.centerY,l=1,c=1;t.x+l<r?c=(t.x+t.width-r)/t.width:t.x+t.width-l>s&&(c=(s-t.x)/t.width);let u=t.y+l<o||t.y+t.height-l>a,d=c===1?e.length:Math.floor(e.length*c)-1,h=this.bboxIntersectsSurroundingSeries(t);return{textLength:d,hasVerticalOverflow:u,hasSurroundingSeriesOverflow:h}}bboxIntersectsSurroundingSeries(e,t=0,n=0){let{surroundingRadius:r}=this;if(r==null)return!1;let s=[{x:e.x+t,y:e.y+n},{x:e.x+e.width+t,y:e.y+n},{x:e.x+e.width+t,y:e.y+e.height+n},{x:e.x+t,y:e.y+e.height+n}],o=mt(r,2);return s.some(a=>mt(a.x,2)+mt(a.y,2)>o)}computeCalloutLabelCollisionOffsets(){let{radiusScale:e}=this,{calloutLabel:t,calloutLine:n}=this.properties,{offset:r,minSpacing:s}=t,o=e.convert(0),a=v=>!v.calloutLabel||v.outerRadius===0,l=this.nodeData,c=this.nodeData.filter(v=>!a(v));if(c.forEach(v=>{let S=v.calloutLabel;S!=null&&(S.hidden=!1,S.collisionTextAlign=void 0,S.collisionOffsetY=0)}),c.length<=1)return;let u=c.filter(v=>v.midCos<0).sort((v,S)=>v.midSin-S.midSin),d=c.filter(v=>v.midCos>=0).sort((v,S)=>v.midSin-S.midSin),h=c.filter(v=>{var S;return v.midSin<0&&((S=v.calloutLabel)==null?void 0:S.textAlign)==="center"}).sort((v,S)=>v.midCos-S.midCos),p=c.filter(v=>{var S;return v.midSin>=0&&((S=v.calloutLabel)==null?void 0:S.textAlign)==="center"}).sort((v,S)=>v.midCos-S.midCos),m=new Vt,g=v=>{var S;let w=v.calloutLabel;if(w==null)return new nt(0,0,0,0);let T=v.outerRadius+n.length+r,D=v.midCos*T,O=v.midSin*T+w.collisionOffsetY;return m.text=w.text,m.x=D,m.y=O,m.setFont(this.properties.calloutLabel),m.setAlign({textAlign:(S=w.collisionTextAlign)!=null?S:w.textAlign,textBaseline:w.textBaseline}),m.computeBBox()},f=(v,S,w)=>{let T=g(v).grow(s/2),D=g(S).grow(s/2);if(T.x<D.x+D.width&&T.x+T.width>D.x&&(w==="to-top"?T.y<D.y+D.height:T.y+T.height>D.y)){let R=w==="to-top"?T.y-D.y-D.height:T.y+T.height-D.y;S.calloutLabel.collisionOffsetY=R}},y=v=>{let S=v.slice().sort((T,D)=>Math.abs(T.midSin)-Math.abs(D.midSin))[0],w=v.indexOf(S);for(let T=w-1;T>=0;T--){let D=v[T+1],O=v[T];f(D,O,"to-top")}for(let T=w+1;T<v.length;T++){let D=v[T-1],O=v[T];f(D,O,"to-bottom")}},b=v=>{let S=c.some(L=>L.calloutLabel.collisionOffsetY!==0),w=v.map(L=>g(L)),T=w.map(L=>L.clone().grow(s/2)),D=!1;for(let L=0;L<T.length&&!D;L++){let B=T[L];for(let $=L+1;$<v.length;$++){let U=T[$];if(B.collidesBBox(U)){D=!0;break}}}let O=l.map(L=>{let{startAngle:B,endAngle:$,outerRadius:U}=L;return{startAngle:B,endAngle:$,innerRadius:o,outerRadius:U}}),R=w.some(L=>O.some(B=>HI(L,B)));!D&&!S&&!R||v.filter(L=>L.calloutLabel.textAlign==="center").forEach(L=>{let B=L.calloutLabel;L.midCos<0?B.collisionTextAlign="right":L.midCos>0?B.collisionTextAlign="left":B.collisionTextAlign="center"})};y(u),y(d),b(h),b(p)}updateCalloutLabelNodes(e){let{radiusScale:t}=this,{calloutLabel:n,calloutLine:r}=this.properties,s=r.length,{offset:o,color:a}=n,l=new Vt;this.calloutLabelSelection.selectByTag(1).forEach(c=>{var u;let{datum:d}=c,h=d.calloutLabel,p=t.convert(d.radius),m=Math.max(0,p);if(!h?.text||m===0||h.hidden){c.visible=!1;return}let g=m+s+o,f=d.midCos*g,y=d.midSin*g+h.collisionOffsetY,b={textAlign:(u=h.collisionTextAlign)!=null?u:h.textAlign,textBaseline:h.textBaseline};l.text=h.text,l.x=f,l.y=y,l.setFont(this.properties.calloutLabel),l.setAlign(b);let v=l.computeBBox(),S=h.text,w=!0;if(n.avoidCollisions){let{textLength:T,hasVerticalOverflow:D}=this.getLabelOverflow(h.text,v,e);S=h.text.length===T?h.text:`${h.text.substring(0,T)}\u2026`,w=!D}c.text=S,c.x=f,c.y=y,c.setFont(this.properties.calloutLabel),c.setAlign(b),c.fill=a,c.visible=w})}computeLabelsBBox(e,t){return we(this,null,function*(){let{calloutLabel:n,calloutLine:r}=this.properties,s=r.length,{offset:o,maxCollisionOffset:a,minSpacing:l}=n;if(!n.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();let c=[],u=new Vt,d,{title:h}=this.properties;if(h?.text&&h.enabled){let p=this.getTitleTranslationY();isFinite(p)&&(u.text=h.text,u.x=0,u.y=p,u.setFont(h),u.setAlign({textBaseline:"bottom",textAlign:"center"}),d=u.computeBBox(),c.push(d))}return this.nodeData.forEach(p=>{var m;let g=p.calloutLabel;if(!g||p.outerRadius===0)return null;let f=p.outerRadius+s+o,y=p.midCos*f,b=p.midSin*f+g.collisionOffsetY;u.text=g.text,u.x=y,u.y=b,u.setFont(this.properties.calloutLabel),u.setAlign({textAlign:(m=g.collisionTextAlign)!=null?m:g.textAlign,textBaseline:g.textBaseline});let v=u.computeBBox();if(g.box=v,Math.abs(g.collisionOffsetY)>a){g.hidden=!0;return}if(d){let S=t.y-this.centerY,w=new nt(d.x-l,S,d.width+2*l,d.y+d.height+l-S);if(v.collidesBBox(w)){g.hidden=!0;return}}if(e.hideWhenNecessary){let{textLength:S,hasVerticalOverflow:w,hasSurroundingSeriesOverflow:T}=this.getLabelOverflow(g.text,v,t),D=g.text.length>2&&S<2;if(w||D||T){g.hidden=!0;return}}g.hidden=!1,c.push(v)}),c.length===0?null:nt.merge(c)})}updateSectorLabelNodes(){let{radiusScale:e}=this,t=e.convert(0),{fontSize:n,fontStyle:r,fontWeight:s,fontFamily:o,positionOffset:a,positionRatio:l,color:c}=this.properties.sectorLabel,u=t>0,d=this.seriesItemEnabled.filter(Boolean).length===1;this.sectorLabelSelection.each((h,p)=>{let{sectorLabel:m,outerRadius:g}=p,f=!1;if(m&&g!==0){let y=t*(1-l)+g*l+a;h.fill=c,h.fontStyle=r,h.fontWeight=s,h.fontSize=n,h.fontFamily=o,h.text=m.text,!u&&d?(h.x=0,h.y=0):(h.x=p.midCos*y,h.y=p.midSin*y),h.textAlign="center",h.textBaseline="middle";let v=h.computeBBox(),S=[[v.x,v.y],[v.x+v.width,v.y],[v.x+v.width,v.y+v.height],[v.x,v.y+v.height]],{startAngle:w,endAngle:T}=p,D={startAngle:w,endAngle:T,innerRadius:t,outerRadius:g};S.every(([O,R])=>uv(O,R,D))&&(f=!0)}h.visible=f})}updateInnerLabelNodes(){let e=[],t=[];this.innerLabelsSelection.each((d,h)=>{let{fontStyle:p,fontWeight:m,fontSize:g,fontFamily:f,color:y,margin:b=2}=h;d.fontStyle=p,d.fontWeight=m,d.fontSize=g,d.fontFamily=f,d.text=h.text,d.x=0,d.y=0,d.fill=y,d.textAlign="center",d.textBaseline="alphabetic",e.push(d.computeBBox()),t.push(b)});let n=d=>d===0?0:t[d],r=d=>d===t.length-1?0:t[d],s=e.reduce((d,h,p)=>d+h.height+n(p)+r(p),0),o=Math.max(...e.map(d=>d.width)),a=this.getInnerRadius(),c=Math.sqrt(Math.pow(o/2,2)+Math.pow(s/2,2))<=(a>0?a:this.getOuterRadius()),u=[];for(let d=0,h=-s/2;d<e.length;d++){let m=e[d].height+h+n(d);u.push(m),h=m+r(d)}this.innerLabelsSelection.each((d,h,p)=>{d.y=u[p],d.visible=c})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}getDatumLegendName(e){let{angleKey:t,calloutLabelKey:n,sectorLabelKey:r,legendItemKey:s}=this.properties,{sectorLabel:o,calloutLabel:a,legendItem:l}=e;if(s&&l!==void 0)return l.text;if(n&&n!==t&&a?.text!==void 0)return a.text;if(r&&r!==t&&o?.text!==void 0)return o.text}pickNodeClosestDatum(e){return Px(this,e)}getTooltipHtml(e){var t;if(!this.properties.isValid())return Xa;let{datum:n,angleValue:r,sectorFormat:{fill:s},itemId:o}=e,a=wi((t=this.properties.title)==null?void 0:t.text),l=qt(r)?bv(r):String(r),c=this.getDatumLegendName(e);return this.properties.tooltip.toTooltipHtml({title:a??c,content:a&&c?`${c}: ${l}`:l,backgroundColor:s},{datum:n,itemId:o,title:a,color:s,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey})}getLegendData(e){var t,n,r,s,o;let{visible:a,processedData:l,dataModel:c}=this;if(!c||!l?.data.length||e!=="category")return[];let{angleKey:u,calloutLabelKey:d,sectorLabelKey:h,legendItemKey:p}=this.properties;if(!p&&(!d||d===u)&&(!h||h===u))return[];let{calloutLabelIdx:m,sectorLabelIdx:g,legendItemIdx:f}=this.getProcessedDataIndexes(c),y=((t=this.properties.title)==null?void 0:t.showInLegend)&&this.properties.title.text,b=[];for(let v=0;v<l.data.length;v++){let{datum:S,values:w}=l.data[v],T=[];y&&T.push(y);let D=this.getLabels(S,2*Math.PI,2*Math.PI,!1,w[m],w[g],w[f]);if(p&&D.legendItem!==void 0?T.push(D.legendItem.text):d&&d!==u&&((n=D.calloutLabel)==null?void 0:n.text)!==void 0?T.push((r=D.calloutLabel)==null?void 0:r.text):h&&h!==u&&((s=D.sectorLabel)==null?void 0:s.text)!==void 0&&T.push((o=D.sectorLabel)==null?void 0:o.text),T.length===0)continue;let O=this.getSectorFormat(S,v,!1);b.push({legendType:"category",id:this.id,itemId:v,seriesId:this.id,enabled:a&&this.seriesItemEnabled[v],label:{text:T.join(" - ")},marker:{fill:O.fill,stroke:O.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},legendItemName:p!=null?S[p]:void 0})}return b}onLegendItemClick(e){let{enabled:t,itemId:n,series:r,legendItemName:s}=e;r.id===this.id?this.toggleSeriesItem(n,t):s!=null&&this.toggleOtherSeriesItems(s,t)}toggleSeriesItem(e,t){this.seriesItemEnabled[e]=t,this.nodeDataRefresh=!0}toggleOtherSeriesItems(e,t){var n;if(!this.properties.legendItemKey||!this.dataModel)return;let r=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue");(n=this.processedData)==null||n.data.forEach(({values:s},o)=>{s[r]===e&&this.toggleSeriesItem(o,t)})}animateEmptyUpdateReady(e){let{animationManager:t}=this.ctx,n=fu(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Ei(this.id,"nodes",t,[this.itemSelection,this.highlightSelection],n.nodes),Ei(this.id,"innerCircle",t,[this.innerCircleSelection],n.innerCircle),ni(this,"callout",t,this.calloutLabelSelection),ni(this,"sector",t,this.sectorLabelSelection),ni(this,"inner",t,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var e,t,n,r,s,o;let{itemSelection:a,highlightSelection:l,processedData:c,radiusScale:u,previousRadiusScale:d}=this,{animationManager:h}=this.ctx,p=(e=c?.reduced)==null?void 0:e.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);let m=((t=p?.moved.size)!=null?t:0)===0,g=((n=c?.defs.keys.length)!=null?n:0)>0,f=(o=(s=(r=c?.reduced)==null?void 0:r.animationValidation)==null?void 0:s.uniqueKeys)!=null?o:!0;(!m||!g||!f)&&this.ctx.animationManager.skipCurrentBatch();let y=fu(!1,this.properties.rotation,u,d);Ei(this.id,"nodes",h,[a,l],y.nodes,(b,v)=>this.getDatumId(v),p),Ei(this.id,"innerCircle",h,[this.innerCircleSelection],y.innerCircle),ni(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),ni(this,"sector",this.ctx.animationManager,this.sectorLabelSelection),ni(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){let{itemSelection:e,highlightSelection:t,radiusScale:n,previousRadiusScale:r}=this,{animationManager:s}=this.ctx,o=fu(!1,this.properties.rotation,n,r);Ei(this.id,"nodes",s,[e,t],o.nodes),Ei(this.id,"innerCircle",s,[this.innerCircleSelection],o.innerCircle),gu(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),gu(this,"sector",this.ctx.animationManager,this.sectorLabelSelection),gu(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(e){var t,n,r;let{calloutLabelKey:s,sectorLabelKey:o,legendItemKey:a}=this.properties;if((r=(n=(t=this.processedData)==null?void 0:t.reduced)==null?void 0:n.animationValidation)!=null&&r.uniqueKeys){if(a)return e[a];if(s)return e[s];if(o)return e[o]}}getDatumId(e){let{index:t}=e,n=this.getDatumIdFromData(e.datum);return n!=null?String(n):`${t}`}onDataChange(){var e;let{data:t,seriesItemEnabled:n}=this;this.seriesItemEnabled=(e=t?.map((r,s)=>{var o;return(o=n[s])!=null?o:!0}))!=null?e:[]}computeFocusBounds(e){return Dx(this,e)}};return i.className="PieSeries",i.type="pie",i})(),Z9={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",instanceConstructor:YI,themeTemplate:$I,paletteFactory:KI},Q9=["start","center","end"],DP=["annotations","ranges","zoom"],lm=(i=>(i.Top="top",i.Right="right",i.Bottom="bottom",i.Left="left",i.FloatingTop="floating-top",i.FloatingBottom="floating-bottom",i))(lm||{}),Mb=Object.values(lm),vu=class extends Ot{constructor(i,e){super(),this.onChange=i,this.onButtonsChange=e,this.align="start",this.position="top"}};E([Jr(i=>{i.onChange(i.enabled)}),I(ht)],vu.prototype,"enabled",2);E([Jr(i=>{i.onChange(i.enabled)}),I(Li(["start","center","end"]),{optional:!0})],vu.prototype,"align",2);E([Jr(i=>{i.onChange(i.enabled)}),I(Li(["top","right","bottom","left","floating-top","floating-bottom"]),{optional:!0})],vu.prototype,"position",2);E([Jr(i=>{i.onButtonsChange(i.buttons)}),I(Ph,{optional:!0})],vu.prototype,"buttons",2);var Qn="ag-charts-toolbar",Fi={align:`${Qn}__align`,button:`${Qn}__button`,icon:`${Qn}__icon`,label:`${Qn}__label`},Tt={top:`${Qn}--top`,right:`${Qn}--right`,bottom:`${Qn}--bottom`,left:`${Qn}--left`,"floating-top":`${Qn}--floating-top`,"floating-bottom":`${Qn}--floating-bottom`,hidden:`${Qn}--hidden`,preventFlash:`${Qn}--prevent-flash`,floatingHidden:`${Qn}--floating-hidden`,align:{start:`${Fi.align}--start`,center:`${Fi.align}--center`,end:`${Fi.align}--end`},button:{hidden:`${Fi.button}--hidden`}},J9=`
.${Qn} {
    align-items: center;
    background: var(--ag-charts-toolbar-background-color);
    border-bottom: var(--ag-charts-toolbar-border-critical);
    border-top: var(--ag-charts-toolbar-border-critical);
    border-left: var(--ag-charts-toolbar-border);
    border-right: var(--ag-charts-toolbar-border);
    display: flex;
    flex-wrap: nowrap;
    opacity: 1;
    position: absolute;
    transform: translateY(0);
    transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
}

.${Tt.hidden},
.${Tt.preventFlash} {
    visibility: hidden;
}

.${Tt.floatingHidden} {
    opacity: 0;
    transition: opacity 0.4s ease-in-out;
}

.${Tt.top},
.${Tt.bottom} {
    flex-direction: row;
    height: var(--ag-charts-toolbar-size);
    padding: 0 var(--ag-charts-toolbar-padding);
    width: 100%;
}

.${Tt.left},
.${Tt.right} {
    flex-direction: column;
    padding: var(--ag-charts-toolbar-padding) 0;
    width: var(--ag-charts-toolbar-size);
}

.${Tt["floating-top"]},
.${Tt["floating-bottom"]} {
    background: none;
    border: none;
    flex-direction: row;
    height: var(--ag-charts-toolbar-size);
    overflow: hidden;
    padding: 0 var(--ag-charts-toolbar-padding);
    pointer-events: none;
    width: 100%;
}

.${Fi.align} {
    display: flex;
    flex-direction: inherit;
    flex-wrap: inherit;
    max-width: 100%;
}

.${Tt.align.center},
.${Tt.align.end} {
    margin-left: auto;
}

.${Tt.left} .${Tt.align.center},
.${Tt.left} .${Tt.align.end},
.${Tt.right} .${Tt.align.center},
.${Tt.right} .${Tt.align.end} {
    margin-left: 0;
    margin-top: auto;
}

.${Tt["floating-top"]} .${Fi.align},
.${Tt["floating-bottom"]} .${Fi.align} {
    gap: var(--ag-charts-toolbar-gap);
    transition: transform 0.4s ease-in-out;
}

.${Fi.button} {
    align-items: center;
    border-radius: var(--ag-charts-button-radius);
    color: var(--ag-charts-toolbar-foreground-color);
    display: flex;
    font-size: 14px;
    font-weight: 500;
    justify-content: center;
    margin: 0;
    padding: var(--ag-charts-button-padding);
    pointer-events: all;
    transition: background-color .25s ease-in-out;
}

.${Tt.left} .${Fi.button},
.${Tt.right} .${Fi.button} {
    height: var(--ag-charts-toolbar-size);
    max-width: 100%;
    overflow: hidden;
}

.${Tt["floating-top"]} .${Fi.button},
.${Tt["floating-bottom"]} .${Fi.button} {
    background: var(--ag-charts-toolbar-background-color);
    border: var(--ag-charts-toolbar-border-critical);
}

.${Tt.button.hidden} {
    display: none;
}

.${Fi.button}:hover {
    background: var(--ag-charts-toolbar-hover-color);
}

.${Fi.button}:disabled {
    background: var(--ag-charts-toolbar-disabled-background-color);
    color: var(--ag-charts-toolbar-disabled-foreground-color);
}

.${Fi.button}:not([disabled]) {
    cursor: pointer;
}

.${Fi.icon} {
    height: 1.2em;
    width: 1.2em;
}

.${Fi.icon} + .${Fi.label} {
    margin-left: var(--ag-charts-size);
}

.${Fi.icon},
.${Fi.label} {
    pointer-events: none;
}

`,qI=class extends hv{constructor(i){super(),this.ctx=i,this.enabled=!0,this.annotations=new vu(this.onGroupChanged.bind(this,"annotations"),this.onGroupButtonsChanged.bind(this,"annotations")),this.ranges=new vu(this.onGroupChanged.bind(this,"ranges"),this.onGroupButtonsChanged.bind(this,"ranges")),this.zoom=new vu(this.onGroupChanged.bind(this,"zoom"),this.onGroupButtonsChanged.bind(this,"zoom")),this.margin=10,this.floatingDetectionRange=28,this.positions={top:new Set,right:new Set,bottom:new Set,left:new Set,"floating-top":new Set,"floating-bottom":new Set},this.positionAlignments={top:{},right:{},bottom:{},left:{},"floating-top":{},"floating-bottom":{}},this.groupCallers={annotations:0,ranges:0,zoom:0},this.groupButtons={annotations:[],ranges:[],zoom:[]},this.pendingButtonToggledEvents=[],this.groupProxied=new Set,this.container=i.toolbarManager.element,this.elements={top:this.container.appendChild(Ui("div")),right:this.container.appendChild(Ui("div")),bottom:this.container.appendChild(Ui("div")),left:this.container.appendChild(Ui("div")),"floating-top":this.container.appendChild(Ui("div")),"floating-bottom":this.container.appendChild(Ui("div"))},Su(J9,Qn),this.renderToolbar("top"),this.renderToolbar("right"),this.renderToolbar("bottom"),this.renderToolbar("left"),this.renderToolbar("floating-top"),this.renderToolbar("floating-bottom"),this.toggleVisibilities(),this.destroyFns.push(i.interactionManager.addListener("hover",this.onHover.bind(this),31),i.interactionManager.addListener("leave",this.onLeave.bind(this),31),i.toolbarManager.addListener("button-toggled",this.onButtonToggled.bind(this)),i.toolbarManager.addListener("group-toggled",this.onGroupToggled.bind(this)),i.toolbarManager.addListener("proxy-group-options",this.onProxyGroupOptions.bind(this)),i.layoutService.addListener("layout-complete",this.onLayoutComplete.bind(this)),()=>this.destroyElements())}destroyElements(){for(let i of Object.values(this.elements))i.remove()}onHover(i){let{enabled:e,elements:t,floatingDetectionRange:n,ctx:{scene:r}}=this,{offsetY:s,sourceEvent:{target:o}}=i,{FloatingBottom:a,FloatingTop:l}=lm;if(!e)return;let c=t[a],u=t[l],d=c.offsetTop-n,h=s>d&&s<r.canvas.element.offsetHeight||o===c,p=u.offsetTop+u.offsetHeight+n,m=s>0&&s<p||o===u;c.classList.toggle(Tt.floatingHidden,!h),u.classList.toggle(Tt.floatingHidden,!m),this.translateFloatingElements(a,h),this.translateFloatingElements(l,m)}onLeave(i){let{enabled:e,elements:t,ctx:{scene:n}}=this,{relatedTarget:r,target:s}=i.sourceEvent,{FloatingBottom:o,FloatingTop:a}=lm;!e||s!==n.canvas.element||DP.some(c=>this.groupButtons[c].some(u=>u===r))||(t[o].classList.add(Tt.floatingHidden),t[a].classList.add(Tt.floatingHidden),this.translateFloatingElements(o,!1),this.translateFloatingElements(a,!1))}onGroupChanged(i){this[i]==null||this.groupProxied.has(i)||(this.createGroup(i),this.toggleVisibilities())}onGroupButtonsChanged(i,e){!this.enabled||this.groupProxied.has(i)||(this.createGroupButtons(i,e),this.toggleVisibilities())}onLayoutComplete(){for(let i of Mb)this.elements[i].classList.remove(Tt.preventFlash)}onButtonToggled(i){let{group:e,value:t,enabled:n}=i;if(this.groupButtons[e].length===0){this.pendingButtonToggledEvents.push(i);return}for(let r of this.groupButtons[e])r.dataset.toolbarValue===`${t}`&&(r.disabled=!n)}onGroupToggled(i){let{group:e,visible:t}=i;this.toggleGroup(e,t),this.toggleVisibilities()}onProxyGroupOptions(i){let{group:e,options:t}=i;this.groupProxied.add(e),this.createGroup(e,t.enabled,t.position),this.createGroupButtons(e,t.buttons),this.toggleGroup(e,t.enabled),this[e].set(t)}createGroup(i,e,t){e??(e=this[i].enabled),t??(t=this[i].position);for(let n of Mb)e&&t===n?this.positions[n].add(i):this.positions[n].delete(i)}createGroupButtons(i,e){var t,n;for(let a of this.groupButtons[i])a.remove();this.groupButtons[i]=[];let r=(t=this[i].align)!=null?t:"start",s=(n=this[i].position)!=null?n:"top",o=this.positionAlignments[s][r];for(let a of e??[]){let l=this.createButtonElement(i,a);o?.appendChild(l),this.groupButtons[i].push(l)}}toggleGroup(i,e){e?this.groupCallers[i]+=1:this.groupCallers[i]=Math.max(0,this.groupCallers[i]-1)}processPendingEvents(){var i;let e=((i=this.pendingButtonToggledEvents)!=null?i:[]).slice();for(let t of e)this.onButtonToggled(t);this.pendingButtonToggledEvents=[]}performLayout(i){return we(this,arguments,function*({shrinkRect:e}){let{elements:t,margin:n}=this;return t.top.classList.contains(Tt.hidden)||e.shrink(t.top.offsetHeight+n*2,"top"),t.right.classList.contains(Tt.hidden)||e.shrink(t.right.offsetWidth+n,"right"),t.bottom.classList.contains(Tt.hidden)||e.shrink(t.bottom.offsetHeight+n*2,"bottom"),t.left.classList.contains(Tt.hidden)||e.shrink(t.left.offsetWidth+n,"left"),{shrinkRect:e}})}performCartesianLayout(i){return we(this,null,function*(){let{elements:e,margin:t}=this,{seriesRect:n}=i,{FloatingBottom:r,FloatingTop:s}=lm;e.top.style.top=`${n.y-e.top.offsetHeight-t*2}px`,e.top.style.left=`${t}px`,e.top.style.width=`calc(100% - ${t*2}px)`,e.right.style.top=`${n.y+t}px`,e.right.style.right=`${t}px`,e.right.style.height=`calc(100% - ${n.y+t*2}px)`,e.bottom.style.bottom=`${t}px`,e.bottom.style.left=`${t}px`,e.bottom.style.width=`calc(100% - ${t*2}px)`,e.left.style.top=`${n.y}px`,e.left.style.left=`${t}px`,e.left.style.height=`calc(100% - ${n.y+t*2}px)`,e[s].style.top=`${n.y}px`,e[s].style.paddingTop=`${t}px`,e[r].style.top=`${n.y+n.height-e[r].offsetHeight}px`,e[r].style.paddingBottom=`${t}px`})}toggleVisibilities(){var i;if(this.elements==null)return;let e=n=>this[n].enabled&&this.groupCallers[n]>0,t=n=>r=>typeof r.value!="string"&&typeof r.value!="number"||`${r.value}`===n.dataset.toolbarValue;for(let n of Mb){let r=this.enabled&&Array.from(this.positions[n].values()).some(e);this.elements[n].classList.toggle(Tt.hidden,!r)}for(let n of DP){if(this[n]==null)continue;let r=e(n);for(let s of this.groupButtons[n]){let o=r&&((i=this[n].buttons)==null?void 0:i.some(t(s)));s.classList.toggle(Tt.button.hidden,!o)}}}translateFloatingElements(i,e){let{elements:t,margin:n,positionAlignments:r}=this,s=t[i],o=Object.values(r[i]);for(let a of o)a.style.transform=e&&a.style.transform!==""?"translateY(0)":`translateY(${s.offsetHeight+n}px)`}renderToolbar(i="top"){let e=this.elements[i];e.classList.add(Qn,Tt[i],Tt.preventFlash),(i==="floating-top"||i==="floating-bottom")&&e.classList.add(Tt.floatingHidden);for(let t of Q9){let n=Ui("div");n.classList.add(Fi.align,Tt.align[t]),e.appendChild(n),this.positionAlignments[i][t]=n}}createButtonElement(i,e){let t=Ui("button");t.classList.add(Fi.button),t.dataset.toolbarGroup=i,t.tabIndex=-1,(typeof e.value=="string"||typeof e.value=="number")&&(t.dataset.toolbarValue=`${e.value}`),e.tooltip&&(t.title=e.tooltip);let n="";return e.icon!=null&&(n=`<span class="ag-charts-icon-${e.icon} ${Fi.icon}"></span>`),e.label!=null&&(n=`${n}<span class="${Fi.label}">${e.label}</span>`),t.innerHTML=n,t.onclick=this.onButtonPress.bind(this,i,e.value),this.destroyFns.push(()=>t.remove()),t}onButtonPress(i,e){this.ctx.toolbarManager.pressButton(i,e)}};E([Jr(i=>{i.processPendingEvents(),i.toggleVisibilities()}),I(ht)],qI.prototype,"enabled",2);var XI=1e3*60*60*24,Ab=XI*30,eU=XI*365,tU={enabled:!1,position:"left",align:"start",buttons:[{label:"Li",value:"line"},{label:"PCh",value:"parallel-channel"}]},iU={enabled:!1,position:"top",align:"start",buttons:[{label:"1m",value:Ab},{label:"3m",value:3*Ab},{label:"6m",value:6*Ab},{label:"YTD",value:(i,e)=>[new Date(`${new Date(e).getFullYear()}-01-01`).getTime(),e]},{label:"1y",value:eU},{label:"All",value:(i,e)=>[i,e]}]},nU={enabled:!1,position:"top",align:"end",buttons:[{icon:"zoom-out",tooltip:"Zoom out",value:"zoom-out"},{icon:"zoom-in",tooltip:"Zoom in",value:"zoom-in"},{icon:"pan-left",tooltip:"Pan left",value:"pan-left"},{icon:"pan-right",tooltip:"Pan right",value:"pan-right"},{icon:"pan-start",tooltip:"Pan to the start",value:"pan-start"},{icon:"pan-end",tooltip:"Pan to the end",value:"pan-end"},{icon:"reset",tooltip:"Reset the zoom",value:"reset"}]},rU={type:"root",optionsKey:"toolbar",packageType:"community",chartTypes:["cartesian"],instanceConstructor:qI,themeTemplate:{toolbar:{enabled:!0,annotations:tU,ranges:iU,zoom:nU}}};function sU(){zl.register(SI,x9,xI,rU,I9,R9,G9,W9,K9,q9,Z9,H9);for(let i of[Sh,Oh,Bv,yh,$m])Kl.register(i.type,{instanceConstructor:i,hidden:i===yh})}function oU(){for(let i of zl.modules){if(i.packageType==="enterprise"&&!D5(i)&&Ie.errorOnce("Unexpected enterprise module registered: "+i.identifier),i.type==="root"&&i.themeTemplate)for(let e of i.chartTypes)Bb.set(e,i.themeTemplate);if(i.type==="series"){if(i.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${i.identifier}`);Kr.register(i.identifier,i)}if(i.type==="series-option"&&i.themeTemplate)for(let e of i.seriesTypes)Kr.setThemeTemplate(e,i.themeTemplate);if(i.type==="axis-option"&&i.themeTemplate)for(let e of i.axisTypes){let t=i.themeTemplate[e],n=ue(ue({},i.themeTemplate),t);for(let r of i.axisTypes)delete n[r];Kl.setThemeTemplate(e,n)}i.type==="axis"&&Kl.register(i.identifier,i),i.type==="legend"&&bS.register(i.identifier,i)}if(zl.hasEnterpriseModules()){let i=k5();i.length>0&&Ie.errorOnce("Enterprise modules expected but not registered: ",i)}}var aU=(()=>{let i=class ZI extends zm{constructor(t,n){super(t,n)}performLayout(){return we(this,null,function*(){let t=yield cm(ZI.prototype,this,"performLayout").call(this),{seriesArea:{padding:n},seriesRoot:r,annotationRoot:s,highlightRoot:o}=this,a=t.clone();t.shrink(n.left,"left"),t.shrink(n.top,"top"),t.shrink(n.right,"right"),t.shrink(n.bottom,"bottom"),this.seriesRect=t,this.animationRect=t,this.hoverRect=t;for(let l of[r,s,o])l.translationX=Math.floor(t.x),l.translationY=Math.floor(t.y);return yield Promise.all(this.series.map(l=>we(this,null,function*(){yield l.update({seriesRect:t})}))),r.visible=this.series[0].visible,r.setClipRectInGroupCoordinateSpace(new nt(t.x,t.y,t.width,t.height)),this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:a,paddedRect:t,visible:!0},axes:[]}),t})}};return i.className="HierarchyChart",i.type="hierarchy",i})(),lU=aU,ph=class extends $S{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(i,e){return null}};E([I(Li(["polygon","circle"],"a polar axis shape"))],ph.prototype,"shape",2);E([I(Qt)],ph.prototype,"innerRadiusRatio",2);var cU=(()=>{let i=class QI extends zm{constructor(t,n){super(t,n),this.padding=new Jl(40),this.axisGroup.zIndex=6}performLayout(){return we(this,null,function*(){let t=yield cm(QI.prototype,this,"performLayout").call(this),n=t.clone();return this.computeSeriesRect(t),yield this.computeCircle(t),this.axes.forEach(r=>r.update()),this.hoverRect=t,this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:n,paddedRect:t,visible:!0},axes:[]}),t})}updateAxes(t,n,r){var s,o;let a=this.axes.find(h=>h.direction==="x"),l=this.axes.find(h=>h.direction==="y");if(!(a instanceof ph)||!(l instanceof ph))return;let c=a.scale,u=(s=c.ticks)==null?void 0:s.call(c).map(h=>c.convert(h)),d=l.innerRadiusRatio;a.innerRadiusRatio=d,(o=a.computeRange)==null||o.call(a),a.gridLength=r,l.gridAngles=u,l.gridRange=a.range,l.range=[r,r*d],[a,l].forEach(h=>{h.translation.x=t,h.translation.y=n,h.calculateLayout()})}computeSeriesRect(t){let{seriesArea:{padding:n}}=this;t.shrink(n.left,"left"),t.shrink(n.top,"top"),t.shrink(n.right,"right"),t.shrink(n.bottom,"bottom"),this.seriesRect=t,this.animationRect=t}computeCircle(t){return we(this,null,function*(){let n=this.series.filter(d=>d instanceof zv),r=this.axes.filter(d=>d instanceof ph),s=(d,h,p)=>{this.updateAxes(d,h,p),n.forEach(g=>{g.centerX=d,g.centerY=h,g.radius=p});let m=n.filter(g=>g instanceof YI||g instanceof WI);if(m.length>1){let g=m.map(f=>{let y=f.getInnerRadius();return{series:f,innerRadius:y}}).sort((f,y)=>f.innerRadius-y.innerRadius);g.at(-1).series.surroundingRadius=void 0;for(let f=0;f<g.length-1;f++)g[f].series.surroundingRadius=g[f+1].innerRadius}},o=t.x+t.width/2,a=t.y+t.height/2,l=Math.max(0,Math.min(t.width,t.height)/2),c=l;s(o,a,c);let u=(...d)=>we(this,[...d],function*({hideWhenNecessary:h=!1}={}){let p=[];for(let f of[...r,...n]){let y=yield f.computeLabelsBBox({hideWhenNecessary:h},t);y&&p.push(y)}if(p.length===0){s(o,a,l);return}let m=nt.merge(p),g=this.refineCircle(m,c,t);s(g.centerX,g.centerY,g.radius),g.radius!==c&&(c=g.radius)});return yield u(),yield u(),yield u(),yield u({hideWhenNecessary:!0}),yield u({hideWhenNecessary:!0}),{radius:c,centerX:o,centerY:a}})}refineCircle(t,n,r){let o=-n,a=-n,l=n,c=n,u=Math.max(0,o-t.x),d=Math.max(0,a-t.y),h=Math.max(0,t.x+t.width-l),p=Math.max(0,t.y+t.height-c);u=h=Math.max(u,h),d=p=Math.max(d,p);let m=r.width-u-h,g=r.height-d-p,f=Math.min(m,g)/2,y=.5*r.width/2,b=.5*r.height/2,v=Math.min(y,b);if(f<v){f=v;let T=u+h,D=d+p;if(2*f+D>r.height){let O=r.height-2*f;Math.min(d,p)*2>O?(d=O/2,p=O/2):d>p?d=O-p:p=O-d}if(2*f+T>r.width){let O=r.width-2*f;Math.min(u,h)*2>O?(u=O/2,h=O/2):u>h?u=O-h:h=O-u}}let S=u+2*f+h,w=d+2*f+p;return{centerX:r.x+(r.width-S)/2+u+f,centerY:r.y+(r.height-w)/2+d+f,radius:f}}};return i.className="PolarChart",i.type="polar",i})(),uU=cU,$v=Math.PI/180,Pb=i=>i*$v,Db=i=>-Math.log(Math.tan(Math.PI*.25+i*$v*.5)),kb=i=>i/$v,Ib=i=>(Math.atan(Math.exp(-i))-Math.PI*.25)/($v*.5),cS=class uS{constructor(e,t){this.domain=e,this.range=t,this.type="mercator",this.bounds=uS.bounds(e)}static bounds(e){let[[t,n],[r,s]]=e,o=Pb(t),a=Db(n),l=Pb(r),c=Db(s);return new nt(Math.min(o,l),Math.min(a,c),Math.abs(l-o),Math.abs(c-a))}static fixedScale(){return new uS([[kb(0),Ib(0)],[kb(1),Ib(1)]],[[0,0],[1,1]])}convert([e,t]){let[[n,r],[s,o]]=this.range,a=(s-n)/this.bounds.width,l=(o-r)/this.bounds.height;return[(Pb(e)-this.bounds.x)*a+n,(Db(t)-this.bounds.y)*l+r]}invert([e,t]){let[[n,r],[s,o]]=this.range,a=(s-n)/this.bounds.width,l=(o-r)/this.bounds.height;return[kb((e-n)/a+this.bounds.x),Ib((t-r)/l+this.bounds.y)]}};function kP(i){return i.type==="map-shape"||i.type==="map-line"||i.type==="map-marker"||i.type==="map-shape-background"||i.type==="map-line-background"}var dU=(()=>{let i=class dS extends zm{constructor(t,n){super(t,n),this.xAxis=new Sh(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new Sh(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}updateData(){return we(this,null,function*(){yield cm(dS.prototype,this,"updateData").call(this);let{topology:t}=this.getOptions();this.series.forEach(n=>{kP(n)&&n.setChartTopology(t)})})}performLayout(){return we(this,null,function*(){let t=yield cm(dS.prototype,this,"performLayout").call(this),{seriesArea:{padding:n},seriesRoot:r,annotationRoot:s,highlightRoot:o}=this,a=t.clone();t.shrink(n.left,"left"),t.shrink(n.top,"top"),t.shrink(n.right,"right"),t.shrink(n.bottom,"bottom"),this.seriesRect=t,this.animationRect=t,this.hoverRect=t;let l=this.series.filter(kP),c=l.reduce((h,p)=>{if(!p.visible)return h;let m=p.topologyBounds;return m==null?h:h==null?m:(h.merge(m),h)},void 0),u;if(c!=null){let{lon0:h,lat0:p,lon1:m,lat1:g}=c,f=[[h,p],[m,g]],y=cS.bounds(f),{width:b,height:v}=t,S=Math.min(b/y.width,v/y.height),w=y.width*S,T=y.height*S,D=(b-w)/2,O=(v-T)/2,R=D,L=O,B=D+w,$=O+T,U=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),K=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),ie=(B-R)/(U.max-U.min),te=R-ie*U.min,j=($-L)/(1-K.min-(1-K.max)),Y=L-j*(1-K.max);u=new cS(f,[[te,Y],[te+ie,Y+j]])}l.forEach(h=>{h.scale=u});let d=this.series.some(h=>h.visible);r.visible=d;for(let h of[r,s,o])h.translationX=Math.floor(t.x),h.translationY=Math.floor(t.y),h.setClipRectInGroupCoordinateSpace(new nt(t.x,t.y,t.width,t.height));return this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:a,paddedRect:t,visible:d},axes:[]}),t})}};return i.className="TopologyChart",i.type="topology",i})(),hU=dU,L0=Mi.create(!0,"opts");function IP(i){if(du(i))return"cartesian";if(vv(i))return"polar";if(yS(i))return"hierarchy";if(CS(i))return"topology";throw new Error(`AG Chart - unknown type of chart for options with type: ${i.type}`)}var pU=(()=>{let i=class Jp{static licenseCheck(t){var n,r,s,o;this.licenseChecked||(this.licenseManager=(r=(n=sh).licenseManager)==null?void 0:r.call(n,t),(s=this.licenseManager)==null||s.setLicenseKey(this.licenseKey,this.gridContext),(o=this.licenseManager)==null||o.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(t){this.licenseKey=t}static setGridContext(t){this.gridContext=t}static getLicenseDetails(t){var n,r;return(r=(n=sh).licenseManager)==null?void 0:r.call(n,{}).getLicenseDetails(t)}static getInstance(t){return Vd.getInstance(t)}static create(t){var n,r,s;this.licenseCheck(t);let o=Vd.createOrUpdate(t);return(n=this.licenseManager)!=null&&n.isDisplayWatermark()&&((s=(r=sh).injectWatermark)==null||s.call(r,o.chart.element,this.licenseManager.getWatermarkMessage())),o}static update(t,n){if(!rh.isInstance(t))throw new Error(Jp.INVALID_CHART_REF_MESSAGE);Vd.createOrUpdate(n,t)}static updateDelta(t,n){if(!rh.isInstance(t))throw new Error(Jp.INVALID_CHART_REF_MESSAGE);Vd.updateUserDelta(t,n)}static download(t,n){if(!(t instanceof rh))throw new Error(Jp.INVALID_CHART_REF_MESSAGE);Vd.download(t,n).catch(r=>Ie.errorOnce(r))}static getImageDataURL(t,n){if(!(t instanceof rh))throw new Error(Jp.INVALID_CHART_REF_MESSAGE);return Vd.getImageDataURL(t,n)}};return i.INVALID_CHART_REF_MESSAGE="AG Charts - invalid chart reference passed",i.licenseChecked=!1,i.gridContext=!1,i})(),Dr=pU,Ox=class{static warnDeprecated(i){yv()(`AgChart.${i}`,`Use AgCharts.${i} instead`)}static create(i){return this.warnDeprecated("create"),Dr.create(i)}static update(i,e){return this.warnDeprecated("update"),Dr.update(i,e)}static updateDelta(i,e){return this.warnDeprecated("updateDelta"),Dr.updateDelta(i,e)}static download(i,e){return this.warnDeprecated("download"),Dr.download(i,e)}static getImageDataURL(i,e){return this.warnDeprecated("getImageDataURL"),Dr.getImageDataURL(i,e)}},mU=(()=>{let i=class Ko{static getInstance(t){let n=zm.getInstance(t);return n?rh.chartInstances.get(n):void 0}static initialiseModules(){Ko.initialised||(sU(),oU(),Ko.initialised=!0)}static createOrUpdate(t,n){var r;Ko.initialiseModules(),L0(">>> AgChartV2.createOrUpdate() user options",t);let s=t,{overrideDevicePixelRatio:o,document:a,window:l}=s,c=Xi(s,["overrideDevicePixelRatio","document","window"]),u=new CD(c,{overrideDevicePixelRatio:o,document:a,window:l}),d=n?.chart;return(d==null||IP(c)!==IP(d.processedOptions))&&(d=Ko.createChartInstance(u,d)),n==null?n=new rh(d):n.chart=d,L0.check()&&typeof window<"u"&&((r=window.agChartInstances)!=null||(window.agChartInstances={}),window.agChartInstances[d.id]=d),d.queuedUserOptions.push(c),d.requestFactoryUpdate(h=>{h.applyOptions(u),h.queuedUserOptions.splice(0,h.queuedUserOptions.indexOf(c))}),n}static updateUserDelta(t,n){n=er(n,{shallow:["data"]}),Yo(n,a=>{if(typeof a=="object")for(let[l,c]of Object.entries(a))typeof c>"u"&&Object.assign(a,{[l]:Symbol("UNSET")})},{skip:["data"]});let{chart:r}=t,s=r.getOptions(),o=kt(n,s);L0(">>> AgChartV2.updateUserDelta() user delta",n),L0("AgChartV2.updateUserDelta() - base options",s),Ko.createOrUpdate(o,t)}static download(t,n){return we(this,null,function*(){try{let r=yield Ko.prepareResizedChart(t,n);r.chart.ctx.scene.download(n?.fileName,n?.fileFormat),r.destroy()}catch(r){Ie.errorOnce(r)}})}static getImageDataURL(t,n){return we(this,null,function*(){let r=yield Ko.prepareResizedChart(t,n),s=r.chart.ctx.scene.getDataURL(n?.fileFormat);return r.destroy(),s})}static prepareResizedChart(t){return we(this,arguments,function*({chart:n},r={}){var s,o,a,l;let c=(o=(s=r.width)!=null?s:n.width)!=null?o:n.ctx.scene.canvas.width,u=(l=(a=r.height)!=null?a:n.height)!=null?l:n.ctx.scene.canvas.height,d=kt({container:document.createElement("div"),overrideDevicePixelRatio:1,autoSize:!1,width:c,height:u},zl.hasEnterpriseModules()&&{animation:{enabled:!1}},n.userOptions),h=Ko.createOrUpdate(d);return h.chart.ctx.zoomManager.updateZoom("agChartV2",n.ctx.zoomManager.getZoom()),n.series.forEach((p,m)=>{p.visible||(h.chart.series[m].visible=!1)}),n.update(0,{forceNodeDataRefresh:!0}),yield h.chart.waitForUpdate(),h})}static createChartInstance(t,n){let r=n?.destroy({keepTransferableResources:!0}),s=Ko.getChartByOptions(t.processedOptions);return new s(t,r)}static getChartByOptions(t){if(du(t))return u9;if(yS(t))return lU;if(vv(t))return uU;if(CS(t))return hU;throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}};return i.initialised=!1,i})(),Vd=mU,Lx="9.3.2",le={};na(le,{Arc:()=>ca,BBox:()=>nt,BandScale:()=>jl,Caption:()=>Oi,ChangeDetectableProperties:()=>dx,Circle:()=>Ha,ContinuousScale:()=>ei,Diamond:()=>hI,DropShadow:()=>fo,ExtendedPath2D:()=>bh,Group:()=>ot,HdpiCanvas:()=>qS,Image:()=>zh,Label:()=>an,Line:()=>Ln,LinearGradientFill:()=>Kv,LinearScale:()=>Zo,Marker:()=>Hn,Node:()=>Mh,OrdinalTimeScale:()=>Ua,Path:()=>Fs,PointerEvents:()=>xD,RadialColumnShape:()=>ua,Rect:()=>Fr,RedrawType:()=>Wl,Scene:()=>Tk,SceneChangeDetection:()=>Ze,ScenePathChangeDetection:()=>yt,Sector:()=>rr,SectorBox:()=>UI,Selection:()=>Ti,Shape:()=>As,Square:()=>Sm,Text:()=>Vt,Tooltip:()=>po,Triangle:()=>hh,easing:()=>kS,getFont:()=>gh,getMarker:()=>ia,getRadialColumnWidth:()=>gU,motion:()=>fU,nearestSquared:()=>xv,nearestSquaredInContainer:()=>yG,toRadians:()=>ir,toTooltipHtml:()=>vh});var ca=class extends Fs{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=Math.PI*2,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return pu($i(this.startAngle),$i(this.endAngle))}updatePath(){let i=this.path;i.clear(),i.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===1?i.closePath():this.type===2&&!this.fullPie&&(i.lineTo(this.centerX,this.centerY),i.closePath())}computeBBox(){return new nt(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)}isPointInPath(i,e){let t=this.transformPoint(i,e),n=this.computeBBox();return this.type!==0&&n.containsPoint(t.x,t.y)&&this.path.isPointInPath(t.x,t.y)}};ca.className="Arc";ca.defaultStyles=Object.assign({},As.defaultStyles,{lineWidth:1,fillStyle:null});E([yt()],ca.prototype,"centerX",2);E([yt()],ca.prototype,"centerY",2);E([yt()],ca.prototype,"radius",2);E([yt()],ca.prototype,"startAngle",2);E([yt()],ca.prototype,"endAngle",2);E([yt()],ca.prototype,"counterClockwise",2);E([yt()],ca.prototype,"type",2);var Kv=class extends As{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(i){this._mask!=null&&this.removeChild(this._mask),i!=null&&this.appendChild(i),this._mask=i}isPointInPath(i,e){var t,n;return(n=(t=this.mask)==null?void 0:t.isPointInPath(i,e))!=null?n:!1}computeBBox(){var i;return(i=this.mask)==null?void 0:i.computeBBox()}render(i){let{mask:e,stops:t}=this,{ctx:n,devicePixelRatio:r}=i,s=1/r,o=e?.computeTransformedBBox();if(e==null||t==null||o==null)return;e.dirtyPath&&(e.updatePath(),e.dirtyPath=!1),n.save(),n.clip(e.path.getPath2D()),n.setTransform(r,0,0,r,0,0);let a=Math.floor(o.x),l=Math.ceil(o.x+o.width),c=Math.floor(o.y),u=Math.ceil(o.y+o.height),d=new Mu,[h,p]=this.direction==="to-right"?[a,l]:[c,u];if(d.domain=t.map((m,g)=>h+(p-h)*g/(t.length-1)),d.range=t,d.update(),this.direction==="to-right"){let m=u-c;for(let g=a;g<=l;g+=s)n.fillStyle=d.convert(g),n.fillRect(g,c,s,m)}else{let m=l-a;for(let g=c;g<=u;g+=s)n.fillStyle=d.convert(g),n.fillRect(a,g,m,s)}n.restore()}};E([Ze({redraw:3})],Kv.prototype,"direction",2);E([Ze({redraw:3})],Kv.prototype,"stops",2);E([Ze({redraw:3})],Kv.prototype,"_mask",2);function FP(i,e,t){let n=Math.sqrt(mt(i,2)+mt(e,2)),s=Math.atan2(e,i)+t;return{x:Math.cos(s)*n,y:Math.sin(s)*n}}var ua=(()=>{let i=class extends Fs{constructor(){super(...arguments),this.borderPath=new bh,this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}getRotation(){let{startAngle:e,endAngle:t}=this,n=wv(e,t);return $i(e+n/2+Math.PI/2)}updatePath(){let{isBeveled:e}=this;e?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){let{columnWidth:e,innerRadius:t,outerRadius:n,path:r}=this,s=-e/2,o=e/2,a=-n,l=-t,c=this.getRotation(),u=[[s,l],[s,a],[o,a],[o,l],[s,l]].map(([d,h])=>FP(d,h,c));r.clear(!0),r.moveTo(u[0].x,u[0].y),r.lineTo(u[1].x,u[1].y),r.lineTo(u[2].x,u[2].y),r.lineTo(u[3].x,u[3].y),r.lineTo(u[0].x,u[0].y),r.closePath()}updateBeveledPath(){let{columnWidth:e,path:t,outerRadius:n,innerRadius:r,axisInnerRadius:s,axisOuterRadius:o,isRadiusAxisReversed:a}=this,l=pu(r,s),c=Math.asin(e/2/r),u=this.getRotation(),d=(R,L)=>FP(R,L,u),h=(R,L)=>Math.sqrt(mt(R,2)+mt(L,2)),p=(R,L)=>L>R?0:Math.sqrt(mt(R,2)-mt(L,2)),m=(R,L,B)=>B?R<L:R>L,g=l&&!isNaN(c)&&c<Math.PI/6,f=-e/2,y=e/2,b=-n,v=-r*(g?Math.cos(c):1),S=m(o,h(r,e/2),!a);if(S){let R=p(o,r);f=-R,y=R}t.clear(!0);let w=d(f,v);t.moveTo(w.x,w.y);let T=pu(r,n),D=m(o,h(n,e/2),!a);if(T&&g)t.arc(0,0,r,$i(-c-Math.PI/2)+u,$i(c-Math.PI/2)+u,!1);else if(D){let R=-p(o,e/2),L=p(o,n);if(!S){let B=d(f,R);t.lineTo(B.x,B.y)}if(t.arc(0,0,o,Math.atan2(R,f)+u,Math.atan2(b,-L)+u,!1),!pu(L,0)){let B=d(L,b);t.lineTo(B.x,B.y)}t.arc(0,0,o,Math.atan2(b,L)+u,Math.atan2(R,y)+u,!1)}else{let R=d(f,b),L=d(y,b);t.lineTo(R.x,R.y),t.lineTo(L.x,L.y)}let O=d(y,v);if(t.lineTo(O.x,O.y),g)t.arc(0,0,r,$i(c-Math.PI/2)+u,$i(-c-Math.PI/2)+u,!0);else{let R=d(f,v);t.lineTo(R.x,R.y)}t.closePath()}};return i.className="RadialColumnShape",i})();E([yt()],ua.prototype,"isBeveled",2);E([yt()],ua.prototype,"columnWidth",2);E([yt()],ua.prototype,"startAngle",2);E([yt()],ua.prototype,"endAngle",2);E([yt()],ua.prototype,"outerRadius",2);E([yt()],ua.prototype,"innerRadius",2);E([yt()],ua.prototype,"axisInnerRadius",2);E([yt()],ua.prototype,"axisOuterRadius",2);E([yt()],ua.prototype,"isRadiusAxisReversed",2);function gU(i,e,t,n,r){let s=wv(i,e),o=s*(1-n)/2;if(i+=o,e-=o,s<.001)return 2*t*r;if(s>=2*Math.PI){let p=i+s/2;i=p-Math.PI,e=p+Math.PI}let a=t*Math.cos(i),l=t*Math.sin(i),c=t*Math.cos(e),u=t*Math.sin(e),d=Math.floor(Math.sqrt(mt(a-c,2)+mt(l-u,2))),h=2*t*r;return Math.max(1,Math.min(h,d))}var zh=class extends Mh{constructor(i){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=i}render(i){let{ctx:e,forceRender:t,stats:n}=i;if(this.dirty===0&&!t){n&&n.nodesSkipped++;return}this.computeTransformMatrix(),this.matrix.toContext(e);let r=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(r,0,0,r.width,r.height,this.x,this.y,this.width,this.height),super.render(i)}};E([Ze({redraw:3})],zh.prototype,"x",2);E([Ze({redraw:3})],zh.prototype,"y",2);E([Ze({redraw:3})],zh.prototype,"width",2);E([Ze({redraw:3})],zh.prototype,"height",2);E([Ze({redraw:3})],zh.prototype,"opacity",2);var fU=ue(ue({},bD),JD),En={};na(En,{CARTESIAN_AXIS_TYPE:()=>sD,ChartTheme:()=>ja,DEFAULT_ANNOTATION_BACKGROUND_FILL:()=>co,DEFAULT_ANNOTATION_HANDLE_FILL:()=>wS,DEFAULT_ANNOTATION_STROKE:()=>lo,DEFAULT_AXIS_GRID_COLOUR:()=>Q0,DEFAULT_AXIS_LINE_COLOUR:()=>V0,DEFAULT_BACKGROUND_COLOUR:()=>dm,DEFAULT_COLOURS:()=>io,DEFAULT_CROSS_LINES_COLOUR:()=>tm,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:()=>ao,DEFAULT_FONT_FAMILY:()=>Sn,DEFAULT_HIERARCHY_FILLS:()=>xS,DEFAULT_HIERARCHY_STROKES:()=>_S,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>Eh,DEFAULT_INVERTED_LABEL_COLOUR:()=>hD,DEFAULT_LABEL_COLOUR:()=>ti,DEFAULT_MUTED_LABEL_COLOUR:()=>lh,DEFAULT_POLAR_SERIES_STROKE:()=>SS,DEFAULT_SHADOW_COLOUR:()=>Th,DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE:()=>oo,DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS:()=>ro,DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS:()=>no,DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS:()=>so,EXTENDS_AXES_DEFAULTS:()=>lD,EXTENDS_AXES_GRID_LINE_DEFAULTS:()=>dD,EXTENDS_AXES_LINE_DEFAULTS:()=>cD,EXTENDS_AXES_TICK_DEFAULTS:()=>uD,EXTENDS_CARTESIAN_MARKER_DEFAULTS:()=>wh,EXTENDS_SERIES_DEFAULTS:()=>Ka,FONT_SIZE:()=>iD,FONT_WEIGHT:()=>nD,IS_DARK_THEME:()=>lu,POLAR_AXIS_SHAPE:()=>aD,POLAR_AXIS_TYPE:()=>oD,POSITION:()=>rD,getChartTheme:()=>ES,markerPaletteFactory:()=>Gh,singleSeriesPaletteFactory:()=>Uv,themes:()=>vU});var vU=gv(pD,i=>i?.()),Ls={};na(Ls,{BandScale:()=>jl,ColorScale:()=>Mu,ContinuousScale:()=>ei,Invalidating:()=>Rn,LinearScale:()=>Zo,OrdinalTimeScale:()=>Ua,TimeScale:()=>hu});var ai={};na(ai,{Color:()=>jo,Logger:()=>Ie,Padding:()=>Jl,angleBetween:()=>wv,areArrayItemsStrictlyEqual:()=>lk,areArrayNumbersEqual:()=>ck,bifurcate:()=>gD,checkDatum:()=>Yb,clamp:()=>Dt,clampArray:()=>J0,countFractionDigits:()=>PS,createId:()=>sa,deepClone:()=>er,displacePointFromVector:()=>PD,extent:()=>ra,findMinMax:()=>eo,findRangeExtent:()=>hm,isBetweenAngles:()=>Om,isContinuous:()=>Iv,isDate:()=>Pm,isDenseInterval:()=>Cm,isEqual:()=>pu,isNegative:()=>Fm,isNumber:()=>qt,isNumberEqual:()=>pu,isNumberObject:()=>ZD,isString:()=>qr,isStringObject:()=>XD,jsonApply:()=>Ga,jsonDiff:()=>Ms,jsonWalk:()=>Yo,mod:()=>Sv,normalisedExtent:()=>mD,normalisedExtentWithMetadata:()=>Im,normalizeAngle180:()=>fm,normalizeAngle360:()=>$i,normalizeAngle360Inclusive:()=>AD,range:()=>ym,resetIds:()=>SD,round:()=>AS,sanitizeHtml:()=>wi,setAttribute:()=>fh,shallowClone:()=>Z0,tickFormat:()=>sk,tickStep:()=>mh,ticks:()=>Dv,toDegrees:()=>IG,toFixed:()=>bv,toRadians:()=>ir,transformIntegratedCategoryValue:()=>ch,zipObject:()=>yU});function yU(i,e){let t={};if(Array.isArray(e))for(let n=0;n<i.length;n++)t[`${i[n]}`]=e[n];else for(let n=0;n<i.length;n++)t[`${i[n]}`]=e;return t}var da={};na(da,{AND:()=>Ps,ARRAY:()=>Ph,ARRAY_OF:()=>Ya,AbstractBarSeries:()=>II,AbstractBarSeriesProperties:()=>xx,ActionOnSet:()=>Ir,Animation:()=>MD,AnimationManager:()=>kk,AreaSeriesTag:()=>PI,Axis:()=>$S,AxisLabel:()=>Zi,AxisTick:()=>aa,BOOLEAN:()=>ht,BOOLEAN_ARRAY:()=>OG,Background:()=>Km,BackgroundModule:()=>SI,BaseModuleInstance:()=>hv,BaseProperties:()=>Ot,COLOR_STRING:()=>Xt,COLOR_STRING_ARRAY:()=>Ds,CartesianAxis:()=>Gm,CartesianSeries:()=>tc,CartesianSeriesNodeEvent:()=>ox,CartesianSeriesProperties:()=>ec,CategoryAxis:()=>Oh,CategoryAxisTick:()=>Ov,ChartAxisDirection:()=>BS,ChartEventManager:()=>Fk,ChartOptions:()=>CD,ChartUpdateType:()=>om,ContextMenuRegistry:()=>Ok,CursorManager:()=>Lk,DATE:()=>IS,DATE_ARRAY:()=>LG,DATE_OR_DATETIME_MS:()=>FS,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>Eu,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>Tu,DEFAULT_TOOLTIP_CLASS:()=>qi,DEFAULT_TOOLTIP_DARK_CLASS:()=>dk,DEGREE:()=>ql,DIRECTION:()=>LD,DataController:()=>jk,DataModel:()=>Kk,DataModelSeries:()=>sx,DataService:()=>Lv,Default:()=>uo,Deprecated:()=>xu,DeprecatedAndRenamedTo:()=>vG,EMPTY_TOOLTIP_CONTENT:()=>Xa,FONT_STYLE:()=>Xl,FONT_WEIGHT:()=>Zl,FUNCTION:()=>Qr,GREATER_THAN:()=>kh,GestureDetector:()=>Rk,GroupedCategoryAxis:()=>yh,HierarchyNode:()=>j0,HierarchySeries:()=>SU,HierarchySeriesProperties:()=>rc,HighlightManager:()=>Nk,HighlightStyle:()=>Wm,INTERACTION_RANGE:()=>RS,InteractionManager:()=>Dk,InteractionState:()=>rv,LABEL_PLACEMENT:()=>NS,LESS_THAN:()=>Dh,LINE_CAP:()=>FD,LINE_DASH:()=>qa,LINE_JOIN:()=>RG,Layers:()=>qD,LayoutService:()=>Uk,LonLatBBox:()=>xU,MARKER_SHAPE:()=>wI,MATCHING_CROSSLINE_TYPE:()=>HS,MAX_SPACING:()=>VS,MIN_SPACING:()=>Pv,MercatorScale:()=>cS,Motion:()=>kS,NAN:()=>Tv,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>dr,NUMBER:()=>fi,NUMBER_ARRAY:()=>Mv,NUMBER_OR_NAN:()=>Ah,Navigator:()=>nc,NavigatorModule:()=>xI,OBJECT:()=>Qe,OBJECT_ARRAY:()=>OS,OR:()=>_u,OVERFLOW_STRATEGY:()=>VG,ObserveChanges:()=>Jr,PHASE_METADATA:()=>gm,PHASE_ORDER:()=>eh,PLACEMENT:()=>RD,PLAIN_OBJECT:()=>FG,POINTER_INTERACTION_TYPES:()=>XS,POSITION:()=>LS,POSITIVE_NUMBER:()=>ke,PolarAxis:()=>ph,PolarSeries:()=>zv,PropertiesArray:()=>Dm,ProxyOnWrite:()=>M7,ProxyProperty:()=>T7,ProxyPropertyOnWrite:()=>vi,QUICK_TRANSITION:()=>ev,RATIO:()=>Qt,RepeatType:()=>TD,SKIP_JS_BUILTINS:()=>fS,SMALLEST_KEY_INTERVAL:()=>iI,SORT_DOMAIN_GROUPS:()=>nI,STRING:()=>Ne,STRING_ARRAY:()=>ID,Series:()=>Hm,SeriesGroupingChangedEvent:()=>nx,SeriesItemHighlightStyle:()=>Qa,SeriesMarker:()=>Or,SeriesNodeEvent:()=>Um,SeriesNodePickMode:()=>sI,SeriesProperties:()=>go,SeriesTooltip:()=>Lr,StateMachine:()=>Vm,TEXT_ALIGN:()=>OD,TEXT_WRAP:()=>Av,ToolbarManager:()=>Gk,Tooltip:()=>po,TooltipManager:()=>ov,TooltipPosition:()=>Ih,UNION:()=>Li,UpdateService:()=>Hk,VERTICAL_ALIGN:()=>NG,Validate:()=>I,ZoomManager:()=>Yk,__FORCE_MODULE_DETECTION:()=>_U,accumulateGroup:()=>rI,accumulatedValue:()=>eI,accumulativeValueProperty:()=>ix,addHitTestersToQuadtree:()=>bx,adjustLabelPlacement:()=>VI,allInStringUnion:()=>B0,animationValidation:()=>Rh,area:()=>sS,arraysEqual:()=>nm,assignJsonApplyConstructedArray:()=>VD,backfillPathPointData:()=>gx,basicContinuousCheckDatumValidation:()=>ex,bifurcate:()=>gD,buildFormatter:()=>Rm,buildResetPathFn:()=>yx,calculateDefaultTimeTickFormat:()=>UD,calculatePlacement:()=>uk,checkCrisp:()=>RI,childrenIter:()=>kI,circularSliceArray:()=>Hb,clamp:()=>Dt,clampArray:()=>J0,collapsedStartingBarPosition:()=>Tm,computeBarFocusBounds:()=>_x,computeMarkerFocusBounds:()=>Ym,computeSectorFocusBounds:()=>Dx,convertValuesToScaleByDefs:()=>CU,countFractionDigits:()=>PS,createDatumId:()=>Yl,createDeprecationWarning:()=>yv,createElement:()=>Ui,dateToNumber:()=>rn,deconstructSelectionsOrNodes:()=>_v,deepClone:()=>er,deepMerge:()=>x5,defaultTimeTickFormat:()=>US,determinePathStatus:()=>MI,diff:()=>wu,downloadUrl:()=>fD,enterpriseModule:()=>sh,extent:()=>ra,extractDecoratedProperties:()=>y5,findMinMax:()=>eo,findQuadtreeMatch:()=>Sx,findRangeExtent:()=>hm,fixNumericExtent:()=>kr,fromToMotion:()=>Ei,getDocument:()=>ea,getMissCount:()=>ZS,getPath:()=>gS,getRectConfig:()=>LI,getWindow:()=>ta,groupAccumulativeValueProperty:()=>Gl,groupAverage:()=>Jk,groupBy:()=>MS,groupCount:()=>rS,groupSum:()=>Zk,injectStyle:()=>Su,isArray:()=>sn,isBoolean:()=>YP,isDate:()=>mv,isDecoratedObject:()=>pv,isDefined:()=>X0,isEnumKey:()=>S5,isEnumValue:()=>ZP,isEqual:()=>pu,isFiniteNumber:()=>qt,isFunction:()=>bu,isHtmlElement:()=>XP,isNegative:()=>Fm,isNumber:()=>Yr,isObject:()=>Js,isObjectLike:()=>b5,isPlainObject:()=>Ts,isProperties:()=>Qo,isRegExp:()=>qP,isString:()=>qr,isSymbol:()=>QP,isValidDate:()=>Pm,jsonApply:()=>Ga,jsonDiff:()=>Ms,jsonWalk:()=>Yo,keyProperty:()=>Un,listDecoratedProperties:()=>ah,mapIterable:()=>dG,mapValues:()=>gv,markerFadeInAnimation:()=>xm,markerPaletteFactory:()=>Gh,markerScaleInAnimation:()=>hx,markerSwipeScaleInAnimation:()=>px,mergeArrayDefaults:()=>Nb,mergeDefaults:()=>kt,midpointStartingBarPosition:()=>F9,minMax:()=>aS,mod:()=>Sv,moduleRegistry:()=>zl,normaliseGroupTo:()=>av,normalisePropertyTo:()=>bm,normalisedExtent:()=>mD,normalisedExtentWithMetadata:()=>Im,pairCategoryData:()=>Em,pairContinuousData:()=>wm,partialAssign:()=>uu,pathFadeInAnimation:()=>am,pathFadeOutAnimation:()=>E9,pathSwipeInAnimation:()=>vx,pickByMatchingAngle:()=>Px,predicateWithMessage:()=>ui,prepareAreaPathAnimation:()=>DI,prepareAxisAnimationContext:()=>Qb,prepareAxisAnimationFunctions:()=>hk,prepareBarAnimationFunctions:()=>Mm,prepareLinePathAnimation:()=>AI,prepareLinePathAnimationFns:()=>Cx,prepareMarkerAnimation:()=>mx,preparePieSeriesAnimationFunctions:()=>fu,range:()=>Qk,rangedValueProperty:()=>tx,renderPartialPath:()=>fx,resetAxisGroupFn:()=>pk,resetAxisLabelSelectionFn:()=>gk,resetAxisLineSelectionFn:()=>fk,resetAxisSelectionFn:()=>mk,resetBarSelectionsFn:()=>Am,resetIds:()=>SD,resetLabelFn:()=>el,resetMarkerFn:()=>jm,resetMarkerPositionFn:()=>_m,resetMotion:()=>xn,resetPieSelectionsFn:()=>Ax,round:()=>AS,seriesLabelFadeInAnimation:()=>ni,seriesLabelFadeOutAnimation:()=>gu,setDocument:()=>vD,setPath:()=>vS,setWindow:()=>yD,shallowClone:()=>Z0,singleSeriesPaletteFactory:()=>Uv,staticFromToMotion:()=>oa,stringify:()=>rm,sum:()=>F8,sumValues:()=>Nv,toArray:()=>Ub,toFixed:()=>bv,toTooltipHtml:()=>vh,trailingAccumulatedValue:()=>tI,trailingAccumulatedValueProperty:()=>B8,unique:()=>TS,updateClipPath:()=>lv,updateLabelNode:()=>NI,updateRect:()=>OI,validateCrossLineValues:()=>QD,valueProperty:()=>mi,without:()=>Vb});function CU({defs:i,values:e,xAxis:t,yAxis:n}){if(!(t&&n))throw new Error("Axes must be defined");let r={};for(let[s,{def:o}]of i)if(Object.hasOwn(e,s)){let{scale:a}=o.type==="key"?t:n;r[s]=Math.round(a.convert(e[s]))}return r}var bU=(()=>{let i=class K0{constructor(t,n,r,s,o,a,l,c,u,d,h){this.series=t,this.index=n,this.datum=r,this.size=s,this.colorValue=o,this.fill=a,this.stroke=l,this.sumSize=c,this.depth=u,this.parent=d,this.children=h,this.midPoint={x:0,y:0}}contains(t){let n=t;for(;n!=null&&n.index>=this.index;){if(n===this)return!0;n=n.parent}return!1}walk(t,n=K0.Walk.PreOrder){n===K0.Walk.PreOrder&&t(this),this.children.forEach(r=>{r.walk(t,n)}),n===K0.Walk.PostOrder&&t(this)}*[Symbol.iterator](){yield this;for(let t of this.children)yield*hf(pS(t))}};return i.Walk={PreOrder:0,PostOrder:1},i})(),j0=bU,SU=class extends Hm{constructor(i){super({moduleCtx:i,pickModes:[0],contentGroupVirtual:!1}),this.rootNode=new j0(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.animationState=new Vm("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(i){i==="initial"?this.animationState.transition("reset"):i==="ready"&&this.animationState.transition("skip")}processData(){return we(this,null,function*(){var i,e;let{childrenKey:t,sizeKey:n,colorKey:r,fills:s,strokes:o,colorRange:a}=this.properties,l=0,c=()=>(l+=1,l),u=0,d=1/0,h=-1/0,p=new Array(((e=(i=this.data)==null?void 0:i.length)!=null?e:0)+1).fill(void 0),m=(v,S)=>{let w=c(),T=S.depth!=null?S.depth+1:0,D=t!=null?v[t]:void 0,O=D==null||D.length===0,R=n!=null?v[n]:void 0;Number.isFinite(R)?R=Math.max(R,0):R=O?1:0;let L=R;u=Math.max(u,T);let B=r!=null?v[r]:void 0;return typeof B=="number"&&(p[w]=B,d=Math.min(d,B),h=Math.max(h,B)),g(new j0(this,w,v,R,B,void 0,void 0,L,T,S,[]),D)},g=(v,S)=>(S?.forEach(w=>{let T=m(w,v);v.children.push(T),v.sumSize+=T.sumSize}),v),f=g(new j0(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),y=[d,h],b;a!=null&&Number.isFinite(d)&&Number.isFinite(h)&&(b=new Mu,b.domain=y,b.range=a,b.update()),f.children.forEach((v,S)=>{v.walk(w=>{let T,D=p[w.index];D!=null&&(T=b?.convert(D)),T??(T=s?.[S%s.length]),w.fill=T,w.stroke=b==null?o?.[S%o.length]:"rgba(0, 0, 0, 0.2)"})}),this.rootNode=f,this.maxDepth=u,this.colorDomain=y})}update(i){return we(this,arguments,function*({seriesRect:e}){yield this.updateSelections(),yield this.updateNodes();let t=this.getAnimationData();this.checkResize(e)&&this.animationState.transition("resize",t),this.animationState.transition("update",t)})}resetAllAnimation(i){var e;let t=(e=this.animationResetFns)==null?void 0:e.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),t!=null&&xn(i.datumSelections,t)}animateEmptyUpdateReady(i){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(i)}animateWaitingUpdateReady(i){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(i)}animateReadyHighlight(i){var e;let t=(e=this.animationResetFns)==null?void 0:e.datum;t!=null&&xn([i],t)}animateReadyResize(i){this.resetAllAnimation(i)}animateClearingUpdateEmpty(i){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(i)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(i){let{colorKey:e,colorName:t,colorRange:n,visible:r}=this.properties;return i==="gradient"&&e!=null&&n!=null?[{legendType:"gradient",enabled:r,seriesId:this.id,colorName:t,colorRange:n,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(i){return`${i.index}`}getDatumId(i){return this.getDatumIdFromData(i)}},rc=class extends go{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(Es),this.strokes=Object.values(Ba)}};E([I(Ne)],rc.prototype,"childrenKey",2);E([I(Ne,{optional:!0})],rc.prototype,"sizeKey",2);E([I(Ne,{optional:!0})],rc.prototype,"colorKey",2);E([I(Ne,{optional:!0})],rc.prototype,"colorName",2);E([I(Ds)],rc.prototype,"fills",2);E([I(Ds)],rc.prototype,"strokes",2);E([I(Ds,{optional:!0})],rc.prototype,"colorRange",2);var xU=class{constructor(i,e,t,n){this.lon0=i,this.lat0=e,this.lon1=t,this.lat1=n}merge(i){this.lon0=Math.min(this.lon0,i.lon0),this.lat0=Math.min(this.lat0,i.lat0),this.lon1=Math.max(this.lon1,i.lon1),this.lat1=Math.max(this.lat1,i.lat1)}},_U=0;var b_=Object.defineProperty,aO=Object.getOwnPropertyDescriptor,wU=Object.getOwnPropertyNames,EU=Object.prototype.hasOwnProperty,lO=(i,e)=>{for(var t in e)b_(i,t,{get:e[t],enumerable:!0})},JI=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of wU(e))!EU.call(i,r)&&r!==t&&b_(i,r,{get:()=>e[r],enumerable:!(n=aO(e,r))||n.enumerable});return i},cO=(i,e,t)=>(JI(i,e,"default"),t&&JI(t,e,"default")),Ht=(i,e,t,n)=>{for(var r=n>1?void 0:n?aO(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&b_(e,t,r),r},uO={};lO(uO,{ALWAYS_SYNC_GLOBAL_EVENTS:()=>eE,AbstractHeaderCellCtrl:()=>cT,AdvancedFilterModule:()=>CO,AgAbstractField:()=>hE,AgAbstractLabel:()=>If,AgAutocomplete:()=>Wc,AgCheckbox:()=>Do,AgDialog:()=>wr,AgGroupComponent:()=>vn,AgInputDateField:()=>Hf,AgInputNumberField:()=>Lf,AgInputRange:()=>LT,AgInputTextArea:()=>OT,AgInputTextField:()=>md,AgMenuItemComponent:()=>ur,AgMenuItemRenderer:()=>Nf,AgMenuList:()=>Lo,AgMenuPanel:()=>RT,AgPanel:()=>zf,AgPickerField:()=>Ff,AgPromise:()=>vt,AgPromiseStatus:()=>aE,AgRadioButton:()=>Of,AgRichSelect:()=>wl,AgSelect:()=>tn,AgSlider:()=>In,AgStackComponentsRegistry:()=>oE,AgToggleButton:()=>Fo,AlignedGridsService:()=>GT,AnimateShowChangeCellRenderer:()=>xE,AnimateSlideCellRenderer:()=>_E,AnimationFrameService:()=>TT,AutoScrollService:()=>gd,AutoWidthCalculator:()=>PT,Autowired:()=>k,BarColumnLabelPlacement:()=>uM,BaseComponentWrapper:()=>cM,Bean:()=>De,BeanStub:()=>be,Beans:()=>$E,BodyDropPivotTarget:()=>rT,BodyDropTarget:()=>oT,CellComp:()=>iT,CellCtrl:()=>Vf,CellNavigationService:()=>BT,CellPositionUtils:()=>JT,CellRangeType:()=>Xs,ChangedPath:()=>Gf,ChartMappings:()=>$c,CheckboxCellEditor:()=>FE,CheckboxCellRenderer:()=>IE,CheckboxSelectionComponent:()=>wE,ClientSideRowModelSteps:()=>MT,ClipboardModule:()=>nR,Column:()=>Ii,ColumnApi:()=>Wf,ColumnFactory:()=>Q2,ColumnGroup:()=>J2,ColumnKeyCreator:()=>q2,ColumnModel:()=>iE,ColumnsToolPanelModule:()=>yR,Component:()=>ae,ComponentUtil:()=>sE,Context:()=>X2,CssClassApplier:()=>_l,CssClassManager:()=>cE,CtrlsService:()=>iM,DataTypeService:()=>sM,DateCellEditor:()=>DE,DateFilter:()=>gE,DateStringCellEditor:()=>kE,DisplayedGroupCreator:()=>nE,DragAndDropService:()=>hi,DragService:()=>VE,DragSourceType:()=>Gi,EnterpriseCoreModule:()=>Tn,Environment:()=>XT,EventService:()=>hd,Events:()=>X,ExcelExportModule:()=>DR,ExcelFactoryMode:()=>Op,ExpansionService:()=>Bf,ExpressionService:()=>HT,FilterManager:()=>GE,FilterWrapperComp:()=>xl,FiltersToolPanelModule:()=>RR,FloatingFilterMapper:()=>LE,FocusService:()=>YT,GROUP_AUTO_COLUMN_ID:()=>pd,Grid:()=>aM,GridApi:()=>BE,GridBodyComp:()=>ZE,GridBodyCtrl:()=>WE,GridChartsModule:()=>n1,GridComp:()=>KT,GridCoreCreator:()=>lM,GridCtrl:()=>$T,GridHeaderComp:()=>bT,GridHeaderCtrl:()=>CT,GridOptionsService:()=>nM,GroupCellRenderer:()=>AE,GroupCellRendererCtrl:()=>ME,GroupInstanceIdCreator:()=>tE,HeaderCellCtrl:()=>hT,HeaderFilterCellComp:()=>UE,HeaderFilterCellCtrl:()=>dT,HeaderGroupCellCtrl:()=>pT,HeaderNavigationDirection:()=>vT,HeaderNavigationService:()=>yT,HeaderPositionUtils:()=>eM,HeaderRowComp:()=>lT,HeaderRowContainerComp:()=>fT,HeaderRowContainerCtrl:()=>gT,HeaderRowCtrl:()=>mT,HeaderRowType:()=>aT,HorizontalDirection:()=>TE,HorizontalResizeService:()=>ST,KeyCode:()=>Xe,LargeTextCellEditor:()=>CE,LayoutCssClasses:()=>HE,LicenseManager:()=>Fu,LocaleService:()=>rM,Logger:()=>WT,LoggerFactory:()=>zT,ManagedFocusFeature:()=>Df,MasterDetailModule:()=>GR,MenuModule:()=>HR,MenuService:()=>AT,ModuleNames:()=>qe,ModuleRegistry:()=>jt,MouseEventService:()=>JE,MoveColumnFeature:()=>sT,MultiFilter:()=>py,MultiFilterModule:()=>$R,NavigationService:()=>eT,NumberCellEditor:()=>PE,NumberFilter:()=>fE,NumberSequence:()=>cr,Optional:()=>ji,PaginationProxy:()=>IT,PillDragComp:()=>yd,PillDropZonePanel:()=>Cd,PinnedRowModel:()=>kT,PivotDropZonePanel:()=>gg,PopupComponent:()=>Rf,PopupEditorWrapper:()=>tT,PopupService:()=>NT,PositionableFeature:()=>kf,PostConstruct:()=>J,PreConstruct:()=>Po,PreDestroy:()=>_i,PrimaryColsPanel:()=>Wy,PropertyKeys:()=>rE,ProvidedColumnGroup:()=>gn,ProvidedFilter:()=>zc,Qualifier:()=>Z2,QuerySelector:()=>dE,RangeSelectionModule:()=>A_,RefSelector:()=>ce,ResizeObserverService:()=>ET,RichSelectModule:()=>KR,RowAnimationCssClasses:()=>zE,RowContainerComp:()=>nT,RowContainerCtrl:()=>XE,RowContainerName:()=>jE,RowContainerType:()=>YE,RowCtrl:()=>KE,RowGroupDropZonePanel:()=>mg,RowGroupingModule:()=>s1,RowHighlightPosition:()=>NE,RowNode:()=>Wr,RowNodeBlock:()=>Ea,RowNodeBlockLoader:()=>Uf,RowNodeSorter:()=>tM,RowPositionUtils:()=>QT,RowRenderer:()=>DT,ScalarFilter:()=>mE,ScrollVisibleService:()=>QE,SelectCellEditor:()=>bE,SelectableService:()=>ZT,SelectionHandleType:()=>ko,ServerSideRowModelModule:()=>ZR,ServerSideTransactionResultStatus:()=>fn,SetFilter:()=>dl,SetFilterModule:()=>i3,SetLeftFeature:()=>uT,SideBarModule:()=>zy,SimpleFilter:()=>pE,SortController:()=>jT,SortIndicatorComp:()=>yE,SparklinesModule:()=>u3,StandardMenuFactory:()=>xT,StatusBarModule:()=>m3,StylingService:()=>FT,TabGuardClassNames:()=>_T,TabGuardComp:()=>Io,TabGuardCtrl:()=>wT,TabbedLayout:()=>vd,TextCellEditor:()=>SE,TextFilter:()=>Ip,TextFloatingFilter:()=>vE,Timer:()=>lE,ToolPanelColDefService:()=>vg,TooltipFeature:()=>ps,TooltipStateManager:()=>uE,TouchListener:()=>Fp,UserComponentFactory:()=>RE,UserComponentRegistry:()=>OE,ValueCache:()=>qT,ValueService:()=>UT,ValuesDropZonePanel:()=>ly,VanillaFrameworkOverrides:()=>VT,VerticalDirection:()=>EE,ViewportRowModelModule:()=>g3,VirtualList:()=>Oo,VirtualListDragFeature:()=>fd,_:()=>M,__FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT:()=>tR,agCharts:()=>iR,createGrid:()=>$f,exportMultipleSheetsAsExcel:()=>PR,getMultipleSheetsAsExcel:()=>h_,getRowContainerTypeForName:()=>qE,provideGlobalGridOptions:()=>oM});var TU=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(i,e){let t=i[0],n=i[1],r=i[2],s=i[3];t=this.ff(t,n,r,s,e[0],7,-680876936),s=this.ff(s,t,n,r,e[1],12,-389564586),r=this.ff(r,s,t,n,e[2],17,606105819),n=this.ff(n,r,s,t,e[3],22,-1044525330),t=this.ff(t,n,r,s,e[4],7,-176418897),s=this.ff(s,t,n,r,e[5],12,1200080426),r=this.ff(r,s,t,n,e[6],17,-1473231341),n=this.ff(n,r,s,t,e[7],22,-45705983),t=this.ff(t,n,r,s,e[8],7,1770035416),s=this.ff(s,t,n,r,e[9],12,-1958414417),r=this.ff(r,s,t,n,e[10],17,-42063),n=this.ff(n,r,s,t,e[11],22,-1990404162),t=this.ff(t,n,r,s,e[12],7,1804603682),s=this.ff(s,t,n,r,e[13],12,-40341101),r=this.ff(r,s,t,n,e[14],17,-1502002290),n=this.ff(n,r,s,t,e[15],22,1236535329),t=this.gg(t,n,r,s,e[1],5,-165796510),s=this.gg(s,t,n,r,e[6],9,-1069501632),r=this.gg(r,s,t,n,e[11],14,643717713),n=this.gg(n,r,s,t,e[0],20,-373897302),t=this.gg(t,n,r,s,e[5],5,-701558691),s=this.gg(s,t,n,r,e[10],9,38016083),r=this.gg(r,s,t,n,e[15],14,-660478335),n=this.gg(n,r,s,t,e[4],20,-405537848),t=this.gg(t,n,r,s,e[9],5,568446438),s=this.gg(s,t,n,r,e[14],9,-1019803690),r=this.gg(r,s,t,n,e[3],14,-187363961),n=this.gg(n,r,s,t,e[8],20,1163531501),t=this.gg(t,n,r,s,e[13],5,-1444681467),s=this.gg(s,t,n,r,e[2],9,-51403784),r=this.gg(r,s,t,n,e[7],14,1735328473),n=this.gg(n,r,s,t,e[12],20,-1926607734),t=this.hh(t,n,r,s,e[5],4,-378558),s=this.hh(s,t,n,r,e[8],11,-2022574463),r=this.hh(r,s,t,n,e[11],16,1839030562),n=this.hh(n,r,s,t,e[14],23,-35309556),t=this.hh(t,n,r,s,e[1],4,-1530992060),s=this.hh(s,t,n,r,e[4],11,1272893353),r=this.hh(r,s,t,n,e[7],16,-155497632),n=this.hh(n,r,s,t,e[10],23,-1094730640),t=this.hh(t,n,r,s,e[13],4,681279174),s=this.hh(s,t,n,r,e[0],11,-358537222),r=this.hh(r,s,t,n,e[3],16,-722521979),n=this.hh(n,r,s,t,e[6],23,76029189),t=this.hh(t,n,r,s,e[9],4,-640364487),s=this.hh(s,t,n,r,e[12],11,-421815835),r=this.hh(r,s,t,n,e[15],16,530742520),n=this.hh(n,r,s,t,e[2],23,-995338651),t=this.ii(t,n,r,s,e[0],6,-198630844),s=this.ii(s,t,n,r,e[7],10,1126891415),r=this.ii(r,s,t,n,e[14],15,-1416354905),n=this.ii(n,r,s,t,e[5],21,-57434055),t=this.ii(t,n,r,s,e[12],6,1700485571),s=this.ii(s,t,n,r,e[3],10,-1894986606),r=this.ii(r,s,t,n,e[10],15,-1051523),n=this.ii(n,r,s,t,e[1],21,-2054922799),t=this.ii(t,n,r,s,e[8],6,1873313359),s=this.ii(s,t,n,r,e[15],10,-30611744),r=this.ii(r,s,t,n,e[6],15,-1560198380),n=this.ii(n,r,s,t,e[13],21,1309151649),t=this.ii(t,n,r,s,e[4],6,-145523070),s=this.ii(s,t,n,r,e[11],10,-1120210379),r=this.ii(r,s,t,n,e[2],15,718787259),n=this.ii(n,r,s,t,e[9],21,-343485551),i[0]=this.add32(t,i[0]),i[1]=this.add32(n,i[1]),i[2]=this.add32(r,i[2]),i[3]=this.add32(s,i[3])}cmn(i,e,t,n,r,s){return e=this.add32(this.add32(e,i),this.add32(n,s)),this.add32(e<<r|e>>>32-r,t)}ff(i,e,t,n,r,s,o){return this.cmn(e&t|~e&n,i,e,r,s,o)}gg(i,e,t,n,r,s,o){return this.cmn(e&n|t&~n,i,e,r,s,o)}hh(i,e,t,n,r,s,o){return this.cmn(e^t^n,i,e,r,s,o)}ii(i,e,t,n,r,s,o){return this.cmn(t^(e|~n),i,e,r,s,o)}md51(i){let e=i.length,t=[1732584193,-271733879,-1732584194,271733878],n;for(n=64;n<=i.length;n+=64)this.md5cycle(t,this.md5blk(i.substring(n-64,n)));i=i.substring(n-64);let r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<i.length;n++)r[n>>2]|=i.charCodeAt(n)<<(n%4<<3);if(r[n>>2]|=128<<(n%4<<3),n>55)for(this.md5cycle(t,r),n=0;n<16;n++)r[n]=0;return r[14]=e*8,this.md5cycle(t,r),t}md5blk(i){let e=[];for(let t=0;t<64;t+=4)e[t>>2]=i.charCodeAt(t)+(i.charCodeAt(t+1)<<8)+(i.charCodeAt(t+2)<<16)+(i.charCodeAt(t+3)<<24);return e}rhex(i){let e="0123456789abcdef".split(""),t="",n=0;for(;n<4;n++)t+=e[i>>n*8+4&15]+e[i>>n*8&15];return t}hex(i){for(let e=0;e<i.length;e++)i[e]=this.rhex(i[e]);return i.join("")}md5(i){return this.hex(this.md51(i))}add32(i,e){return this.ieCompatibility?this.add32Compat(i,e):this.add32Std(i,e)}add32Std(i,e){return i+e&4294967295}add32Compat(i,e){let t=(i&65535)+(e&65535);return(i>>16)+(e>>16)+(t>>16)<<16|t&65535}};function Nx(i){return i==null||i.length===0}var jv={"01":"GRID","02":"CHARTS","0102":"BOTH"},MU=(()=>{let i=class Nr{constructor(t){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=t,this.md5=new TU,this.md5.init()}validateLicense(){let t=this.getLicenseDetails(Nr.licenseKey),n=`AG Grid ${t.currentLicenseType==="BOTH"?"and AG Charts ":""}Enterprise`,r=t.suppliedLicenseType===void 0?"":`AG ${t.suppliedLicenseType==="BOTH"?"Grid and AG Charts":t.suppliedLicenseType==="GRID"?"Grid":"Charts"} Enterprise`;if(t.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(n);else if(t.expired){let s=Nr.getGridReleaseDate(),o=Nr.formatDate(s);this.outputExpiredKey(t.expiry,o,n,r)}else t.valid?t.isTrial&&t.trialExpired&&this.outputExpiredTrialKey(t.expiry,n,r):this.outputInvalidLicenseKey(!!t.incorrectLicenseType,n,r)}static extractExpiry(t){let n=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(Nr.decode(n),10))}static extractLicenseComponents(t){let n=t.replace(/[\u200B-\u200D\uFEFF]/g,"");if(n=n.replace(/\r?\n|\r/g,""),t.length<=32)return{md5:null,license:t,version:null,isTrial:null};let r=n.length-32,s=n.substring(r),o=n.substring(0,r),[a,l,c]=Nr.extractBracketedInformation(n);return{md5:s,license:o,version:a,isTrial:l,type:c}}getLicenseDetails(t){let n=Nr.chartsLicenseManager?"BOTH":"GRID";if(Nx(t))return{licenseKey:t,valid:!1,missing:!0,currentLicenseType:n};let r=Nr.getGridReleaseDate(),{md5:s,license:o,version:a,isTrial:l,type:c}=Nr.extractLicenseComponents(t),u=s===this.md5.md5(o)&&t.indexOf("For_Trialing_ag-Grid_Only")===-1,d,h,p=null,m=!1,g;function f(){d=p<new Date,h=void 0}if(u&&(p=Nr.extractExpiry(o),u=!isNaN(p.getTime()),u))switch(h=r>p,a){case"legacy":case"2":{l&&f();break}case"3":Nx(c)?u=!1:(g=c,c!==jv["01"]&&c!==jv["0102"]||n==="BOTH"&&g!=="BOTH"?(u=!1,m=!0):l&&f())}return u?{licenseKey:t,valid:u,expiry:Nr.formatDate(p),expired:h,version:a,isTrial:l,trialExpired:d,incorrectLicenseType:m,currentLicenseType:n,suppliedLicenseType:g}:{licenseKey:t,valid:u,incorrectLicenseType:m,currentLicenseType:n,suppliedLicenseType:g}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!Nx(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){let n=(this.document.defaultView||window).location,{hostname:r=""}=n;return r}isForceWatermark(){let n=(this.document.defaultView||window).location,{pathname:r}=n;return r?r.indexOf("forceWatermark")!==-1:!1}isWebsiteUrl(){return this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)!==null}isLocalhost(){return this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)!==null}static formatDate(t){let n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=t.getDate(),s=t.getMonth(),o=t.getFullYear();return r+" "+n[s]+" "+o}static getGridReleaseDate(){return new Date(parseInt(Nr.decode(Nr.RELEASE_INFORMATION),10))}static decode(t){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",s,o,a,l,c,u,d,h=0,p=t.replace(/[^A-Za-z0-9+/=]/g,"");for(;h<p.length;)l=n.indexOf(p.charAt(h++)),c=n.indexOf(p.charAt(h++)),u=n.indexOf(p.charAt(h++)),d=n.indexOf(p.charAt(h++)),s=l<<2|c>>4,o=(c&15)<<4|u>>2,a=(u&3)<<6|d,r=r+String.fromCharCode(s),u!=64&&(r=r+String.fromCharCode(o)),d!=64&&(r=r+String.fromCharCode(a));return r=Nr.utf8_decode(r),r}static utf8_decode(t){t=t.replace(/rn/g,"n");let n="";for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?n+=String.fromCharCode(s):s>127&&s<2048?(n+=String.fromCharCode(s>>6|192),n+=String.fromCharCode(s&63|128)):(n+=String.fromCharCode(s>>12|224),n+=String.fromCharCode(s>>6&63|128),n+=String.fromCharCode(s&63|128))}return n}static setChartsLicenseManager(t){this.chartsLicenseManager=t}static setLicenseKey(t){this.licenseKey=t,this.chartsLicenseManager&&this.chartsLicenseManager.setLicenseKey(t,!0)}static extractBracketedInformation(t){if(!t.includes("["))return["legacy",!1,void 0];let n=t.match(/\[(.*?)\]/g).map(l=>l.replace("[","").replace("]",""));if(!n||n.length===0)return["legacy",!1,void 0];let r=n.filter(l=>l==="TRIAL").length===1,s=n.filter(l=>l.indexOf("v")===0)[0],o=s?s.replace("v",""):"legacy",a=jv[n.filter(l=>jv[l])[0]];return[o,r,a]}centerPadAndOutput(t){let n=this.totalMessageLength-t.length;console.error(t.padStart(n/2+t.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(t,n="*",r=""){console.error(t.padEnd(this.totalMessageLength-r.length,n)+r)}outputInvalidLicenseKey(t,n,r){t?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${n} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${r} only and does not cover you for ${n}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to obtain a combined license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${n} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid - please contact info@ag-grid.com to obtain a valid license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(t,n,r){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${n} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${r} expired on ${t}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(t){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${t} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${t} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(t,n,r,s){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${r} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${s} released before ${t}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${n}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="License Expired"}};return i.RELEASE_INFORMATION="MTcxNTc3NTcyODYxNg==",i})(),Yv=MU,Fu=class extends be{validateLicense(){this.licenseManager=new Yv(this.gos.getDocument()),this.licenseManager.validateLicense()}static getLicenseDetails(i){return new Yv(null).getLicenseDetails(i)}isDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}getWatermarkMessage(){return this.licenseManager.getWatermarkMessage()}static setLicenseKey(i){Yv.setLicenseKey(i)}static setChartsLicenseManager(i){Yv.setChartsLicenseManager(i)}};Ht([Po],Fu.prototype,"validateLicense",1);Fu=Ht([De("licenseManager")],Fu);var by=class extends ae{constructor(){super(`<div class="ag-watermark">
                <div ref="eLicenseTextRef" class="ag-watermark-text"></div>
            </div>`)}postConstruct(){let i=this.shouldDisplayWatermark();this.setDisplayed(i),i&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout(()=>this.addCssClass("ag-opacity-zero"),0),window.setTimeout(()=>this.setDisplayed(!1),5e3))}shouldDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}};Ht([k("licenseManager")],by.prototype,"licenseManager",2);Ht([ce("eLicenseTextRef")],by.prototype,"eLicenseTextRef",2);Ht([J],by.prototype,"postConstruct",1);var AU="31.3.4",Tn={version:AU,moduleName:qe.EnterpriseCoreModule,beans:[Fu],agStackComponents:[{componentName:"AgWatermark",componentClass:by}]},dO=Object.defineProperty,PU=Object.defineProperties,DU=Object.getOwnPropertyDescriptor,kU=Object.getOwnPropertyDescriptors,eF=Object.getOwnPropertySymbols,IU=Object.prototype.hasOwnProperty,FU=Object.prototype.propertyIsEnumerable,tF=(i,e,t)=>e in i?dO(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,S_=(i,e)=>{for(var t in e||(e={}))IU.call(e,t)&&tF(i,t,e[t]);if(eF)for(var t of eF(e))FU.call(e,t)&&tF(i,t,e[t]);return i},x_=(i,e)=>PU(i,kU(e)),et=(i,e,t,n)=>{for(var r=n>1?void 0:n?DU(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&dO(e,t,r),r},_g=class extends ae{constructor(i){super(`
            <div class="ag-advanced-filter-header" role="row">
            </div>`),this.enabled=i}postConstruct(){this.setupAdvancedFilter(this.enabled),this.addDestroyFunc(()=>this.destroyBean(this.eAdvancedFilter)),this.addManagedListener(this.eventService,X.EVENT_GRID_COLUMNS_CHANGED,()=>this.onGridColumnsChanged()),this.addGuiEventListener("keydown",i=>this.onKeyDown(i)),this.addGuiEventListener("focusout",i=>{this.getFocusableElement().contains(i.relatedTarget)||this.focusService.clearAdvancedFilterColumn()})}getFocusableElement(){var i,e;return(e=(i=this.eAdvancedFilter)==null?void 0:i.getGui())!=null?e:this.getGui()}setEnabled(i){i!==this.enabled&&this.setupAdvancedFilter(i)}refresh(){var i;(i=this.eAdvancedFilter)==null||i.refresh()}getHeight(){return this.height}setInputDisabled(i){var e;(e=this.eAdvancedFilter)==null||e.setInputDisabled(i)}setupAdvancedFilter(i){let e=this.getGui();if(i){this.eAdvancedFilter=this.createBean(new Bs);let t=this.eAdvancedFilter.getGui();this.eAdvancedFilter.addCssClass("ag-advanced-filter-header-cell"),this.height=this.columnModel.getFloatingFiltersHeight();let n=`${this.height}px`;e.style.height=n,e.style.minHeight=n,this.setAriaRowIndex(),M.setAriaRole(t,"gridcell"),M.setAriaColIndex(t,1),this.setAriaColumnCount(t),e.appendChild(t)}else M.clearElement(e),this.destroyBean(this.eAdvancedFilter),this.height=0;M.setDisplayed(e,i),this.enabled=i}setAriaColumnCount(i){M.setAriaColSpan(i,this.columnModel.getAllGridColumns().length)}setAriaRowIndex(){M.setAriaRowIndex(this.getGui(),this.headerNavigationService.getHeaderRowCount())}onGridColumnsChanged(){this.eAdvancedFilter&&(this.setAriaColumnCount(this.eAdvancedFilter.getGui()),this.setAriaRowIndex())}onKeyDown(i){switch(i.key){case Xe.ENTER:{this.hasFocus()&&this.focusService.focusInto(this.getFocusableElement())&&i.preventDefault();break}case Xe.ESCAPE:this.hasFocus()||this.getFocusableElement().focus();break;case Xe.UP:this.navigateUpDown(!0,i);break;case Xe.DOWN:this.navigateUpDown(!1,i);break;case Xe.TAB:if(this.hasFocus())this.navigateLeftRight(i);else{let e=this.focusService.findNextFocusableElement(this.getFocusableElement(),null,i.shiftKey);e?(i.preventDefault(),e.focus()):this.navigateLeftRight(i)}break}}navigateUpDown(i,e){this.hasFocus()&&this.focusService.focusNextFromAdvancedFilter(i)&&e.preventDefault()}navigateLeftRight(i){(i.shiftKey?this.focusService.focusLastHeader():this.focusService.focusNextFromAdvancedFilter(!1,!0))&&i.preventDefault()}hasFocus(){return this.gos.getActiveDomElement()===this.getFocusableElement()}};et([k("columnModel")],_g.prototype,"columnModel",2);et([k("focusService")],_g.prototype,"focusService",2);et([k("headerNavigationService")],_g.prototype,"headerNavigationService",2);et([J],_g.prototype,"postConstruct",1);var hO=class extends wl{constructor(i){super(x_(S_({},i),{template:`
                <div class="ag-picker-field" role="presentation">
                    <div ref="eLabel"></div>
                    <div ref="eWrapper" class="ag-wrapper ag-picker-collapsed">
                        <div ref="eDisplayField" class="ag-picker-field-display"></div>
                        <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
                        <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                    </div>
                </div>`})),this.params=i}showPicker(){setTimeout(()=>super.showPicker())}hidePicker(){setTimeout(()=>super.hidePicker())}postConstruct(){super.postConstruct();let{wrapperClassName:i,ariaLabel:e}=this.params;M.setDisplayed(this.eDisplayField,!1),i&&this.eWrapper.classList.add(i),M.setAriaLabelledBy(this.eWrapper,""),M.setAriaLabel(this.eWrapper,e)}onEnterKeyDown(i){M.stopPropagationForAgGrid(i),this.isPickerDisplayed?super.onEnterKeyDown(i):(i.preventDefault(),this.showPicker())}},pO=(()=>{let i=class Yx extends be{constructor(t,n){super(),this.comp=t,this.virtualList=n}postConstruct(){this.createManagedBean(new fd(this.comp,this.virtualList,{dragSourceType:Gi.AdvancedFilterBuilder,listItemDragStartEvent:Yx.EVENT_DRAG_STARTED,listItemDragEndEvent:Yx.EVENT_DRAG_ENDED,eventSource:this,getCurrentDragValue:t=>this.getCurrentDragValue(t),isMoveBlocked:()=>!1,getNumRows:t=>t.getNumItems(),moveItem:(t,n)=>this.moveItem(t,n)}))}getCurrentDragValue(t){return t.item}moveItem(t,n){this.comp.moveItem(t,n)}};return i.EVENT_DRAG_STARTED="advancedFilterBuilderDragStarted",i.EVENT_DRAG_ENDED="advancedFilterBuilderDragEnded",i})();et([J],pO.prototype,"postConstruct",1);var qx=pO,__=class extends be{constructor(i,e,t){super(),this.eGui=i,this.focusWrapper=e,this.eFocusableComp=t}postConstruct(){this.addManagedListener(this.eGui,"keydown",i=>{switch(i.key){case Xe.TAB:i.defaultPrevented||M.stopPropagationForAgGrid(i);break;case Xe.UP:case Xe.DOWN:M.stopPropagationForAgGrid(i);break;case Xe.ESCAPE:if(M.isStopPropagationForAgGrid(i))return;this.eGui.contains(this.gos.getActiveDomElement())&&(i.preventDefault(),M.stopPropagationForAgGrid(i),this.focusWrapper.focus());break}}),this.addManagedListener(this.focusWrapper,"keydown",i=>{switch(i.key){case Xe.ENTER:if(M.isStopPropagationForAgGrid(i))return;this.gos.getActiveDomElement()===this.focusWrapper&&(i.preventDefault(),M.stopPropagationForAgGrid(i),this.eFocusableComp.getFocusableElement().focus());break}}),this.addManagedListener(this.focusWrapper,"focusin",()=>{this.focusWrapper.classList.add("ag-advanced-filter-builder-virtual-list-item-highlight")}),this.addManagedListener(this.focusWrapper,"focusout",i=>{this.focusWrapper.contains(i.relatedTarget)||this.focusWrapper.classList.remove("ag-advanced-filter-builder-virtual-list-item-highlight")})}};et([J],__.prototype,"postConstruct",1);function mO(i,e){return{pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderAddField",pickerAriaLabelValue:"Advanced Filter Builder Add Field",pickerType:"ag-list",valueList:[{key:"condition",displayValue:i("advancedFilterBuilderAddCondition")},{key:"join",displayValue:i("advancedFilterBuilderAddJoin")}],valueFormatter:t=>{var n;return t==null?null:(n=t.displayValue)!=null?n:t.key},pickerIcon:"advancedFilterBuilderAdd",maxPickerWidth:`${e??120}px`,wrapperClassName:"ag-advanced-filter-builder-item-button",ariaLabel:i("advancedFilterBuilderAddButtonTooltip")}}var es=(()=>{let i=class{};return i.EVENT_ADDED="advancedFilterBuilderAdded",i.EVENT_MOVED="advancedFilterBuilderMoved",i.EVENT_REMOVED="advancedFilterBuilderRemoved",i.EVENT_VALUE_CHANGED="advancedFilterBuilderValueChanged",i.EVENT_VALID_CHANGED="advancedFilterBuilderValidChanged",i})(),w_=class extends ae{constructor(){super(`
            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>
        `),this.validationMessage=null}init(i){let{item:e,createPill:t}=i;this.item=e,this.createPill=t,this.filterModel=e.filterModel,this.setupColumnCondition(this.filterModel),this.validate(),this.addDestroyFunc(()=>this.destroyBeans([this.eColumnPill,this.eOperatorPill,this.eOperandPill]))}getDragName(){return this.filterModel.colId?this.advancedFilterExpressionService.parseColumnFilterModel(this.filterModel):this.getDefaultColumnDisplayValue()}getAriaLabel(){return`${this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderFilterItem")} ${this.getDragName()}`}getValidationMessage(){return this.validationMessage}getFocusableElement(){return this.eColumnPill.getFocusableElement()}setupColumnCondition(i){var e;let t=this.advancedFilterExpressionService.getColumnDetails(i.colId);this.baseCellDataType=t.baseCellDataType,this.column=t.column,this.numOperands=this.getNumOperands(this.getOperatorKey()),this.eColumnPill=this.createPill({key:this.getColumnKey(),displayValue:(e=this.getColumnDisplayValue())!=null?e:this.getDefaultColumnDisplayValue(),cssClass:"ag-advanced-filter-builder-column-pill",isSelect:!0,getEditorParams:()=>({values:this.advancedFilterExpressionService.getColumnAutocompleteEntries()}),update:n=>this.setColumnKey(n),pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderColumnSelectField",pickerAriaLabelValue:"Advanced Filter Builder Column Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderColumn")}),this.getGui().appendChild(this.eColumnPill.getGui()),M.exists(this.getColumnKey())&&(this.createOperatorPill(),this.hasOperand()&&this.createOperandPill())}createOperatorPill(){var i;this.eOperatorPill=this.createPill({key:this.getOperatorKey(),displayValue:(i=this.getOperatorDisplayValue())!=null?i:this.getDefaultOptionSelectValue(),cssClass:"ag-advanced-filter-builder-option-pill",isSelect:!0,getEditorParams:()=>({values:this.getOperatorAutocompleteEntries()}),update:e=>this.setOperatorKey(e),pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderOptionSelectField",pickerAriaLabelValue:"Advanced Filter Builder Option Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderOption")}),this.eColumnPill.getGui().insertAdjacentElement("afterend",this.eOperatorPill.getGui())}createOperandPill(){var i;let e=(i=this.getOperandDisplayValue())!=null?i:"";this.eOperandPill=this.createPill({key:e,displayValue:e,baseCellDataType:this.baseCellDataType,cssClass:"ag-advanced-filter-builder-value-pill",isSelect:!1,update:t=>this.setOperand(t),ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderValue")}),this.getGui().appendChild(this.eOperandPill.getGui())}getColumnKey(){return this.filterModel.colId}getColumnDisplayValue(){return this.advancedFilterExpressionService.getColumnDisplayValue(this.filterModel)}getOperatorKey(){return this.filterModel.type}getOperatorDisplayValue(){return this.advancedFilterExpressionService.getOperatorDisplayValue(this.filterModel)}getOperandDisplayValue(){return this.advancedFilterExpressionService.getOperandDisplayValue(this.filterModel,!0)}hasOperand(){return this.numOperands>0}getOperatorAutocompleteEntries(){return this.column?this.advancedFilterExpressionService.getOperatorAutocompleteEntries(this.column,this.baseCellDataType):[]}setColumnKey(i){this.eOperatorPill||this.createOperatorPill();let e=this.advancedFilterExpressionService.getColumnDetails(i);this.column=e.column;let t=e.baseCellDataType;this.baseCellDataType!==t&&(this.baseCellDataType=t,this.setOperatorKey(void 0),this.eOperatorPill&&(M.removeFromParent(this.eOperatorPill.getGui()),this.destroyBean(this.eOperatorPill),this.createOperatorPill()),this.validate()),this.filterModel.colId=i,this.filterModel.filterType=this.baseCellDataType}setOperatorKey(i){let e=this.getNumOperands(i);e!==this.numOperands&&(this.numOperands=e,e===0?this.destroyOperandPill():(this.createOperandPill(),this.baseCellDataType!=="number"&&this.setOperand(""))),this.filterModel.type=i,this.validate()}setOperand(i){var e;let t=i;this.column&&(t=(e=this.advancedFilterExpressionService.getOperandModelValue(i,this.baseCellDataType,this.column))!=null?e:""),this.filterModel.filter=t,this.validate()}getNumOperands(i){var e,t;return(t=(e=this.advancedFilterExpressionService.getExpressionOperator(this.baseCellDataType,i))==null?void 0:e.numOperands)!=null?t:0}destroyOperandPill(){delete this.filterModel.filter,this.getGui().removeChild(this.eOperandPill.getGui()),this.destroyBean(this.eOperandPill),this.eOperandPill=void 0}validate(){let i=null;M.exists(this.getColumnKey())?M.exists(this.getOperatorKey())?this.numOperands>0&&!M.exists(this.getOperandDisplayValue())&&(i=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationEnterValue")):i=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationSelectOption"):i=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationSelectColumn"),this.item.valid=!i,i!==this.validationMessage&&(this.validationMessage=i,this.dispatchEvent({type:es.EVENT_VALID_CHANGED}))}getDefaultColumnDisplayValue(){return this.advancedFilterExpressionService.translate("advancedFilterBuilderSelectColumn")}getDefaultOptionSelectValue(){return this.advancedFilterExpressionService.translate("advancedFilterBuilderSelectOption")}};et([k("advancedFilterExpressionService")],w_.prototype,"advancedFilterExpressionService",2);et([k("valueService")],w_.prototype,"valueService",2);var wg=class extends ae{constructor(i){super(`
            <div class="ag-advanced-filter-builder-pill-wrapper" role="presentation">
                <div ref="ePill" class="ag-advanced-filter-builder-pill" role="button">
                    <span ref="eLabel" class="ag-advanced-filter-builder-pill-display"></span>
                </div>
            </div>
        `),this.params=i,this.value=i.value}postConstruct(){let{cssClass:i,ariaLabel:e}=this.params;this.ePill.classList.add(i),this.activateTabIndex([this.ePill]),this.eLabel.id=`${this.getCompId()}`,M.setAriaDescribedBy(this.ePill,this.eLabel.id),M.setAriaLabel(this.ePill,e),this.renderValue(),this.addManagedListener(this.ePill,"click",t=>{t.preventDefault(),this.showEditor()}),this.addManagedListener(this.ePill,"keydown",t=>{switch(t.key){case Xe.ENTER:t.preventDefault(),M.stopPropagationForAgGrid(t),this.showEditor();break}}),this.addDestroyFunc(()=>this.destroyBean(this.eEditor))}getFocusableElement(){return this.ePill}showEditor(){if(this.eEditor)return;M.setDisplayed(this.ePill,!1),this.eEditor=this.createEditorComp(this.params.type),this.eEditor.setValue(this.value);let i=this.eEditor.getGui();this.eEditor.addManagedListener(i,"keydown",e=>{switch(e.key){case Xe.ENTER:e.preventDefault(),M.stopPropagationForAgGrid(e),this.updateValue(!0);break;case Xe.ESCAPE:e.preventDefault(),M.stopPropagationForAgGrid(e),this.hideEditor(!0);break}}),this.eEditor.addManagedListener(i,"focusout",()=>{this.updateValue(!1)}),this.getGui().appendChild(i),this.eEditor.getFocusableElement().focus()}createEditorComp(i){let e;switch(i){case"text":e=new md;break;case"number":e=new Lf;break;case"date":e=new Hf;break}return this.createBean(e)}hideEditor(i){let{eEditor:e}=this;e&&(this.eEditor=void 0,this.getGui().removeChild(e.getGui()),this.destroyBean(e),M.setDisplayed(this.ePill,!0),i&&this.ePill.focus())}renderValue(){let i;this.eLabel.classList.remove("ag-advanced-filter-builder-value-empty","ag-advanced-filter-builder-value-number","ag-advanced-filter-builder-value-text"),M.exists(this.value)?this.params.type==="number"?(i=this.value,this.eLabel.classList.add("ag-advanced-filter-builder-value-number")):(i=`"${this.value}"`,this.eLabel.classList.add("ag-advanced-filter-builder-value-text")):(i=this.advancedFilterExpressionService.translate("advancedFilterBuilderEnterValue"),this.eLabel.classList.add("ag-advanced-filter-builder-value-empty")),this.eLabel.innerText=i}updateValue(i){var e;if(!this.eEditor)return;let t=(e=this.eEditor.getValue())!=null?e:"";this.dispatchEvent({type:X.EVENT_FIELD_VALUE_CHANGED,value:t}),this.value=t,this.renderValue(),this.hideEditor(i)}};et([ce("ePill")],wg.prototype,"ePill",2);et([ce("eLabel")],wg.prototype,"eLabel",2);et([k("advancedFilterExpressionService")],wg.prototype,"advancedFilterExpressionService",2);et([J],wg.prototype,"postConstruct",1);var gO=class extends ae{constructor(){super(`
            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>
        `)}init(i){let{item:e,createPill:t}=i,n=e.filterModel;this.filterModel=n,this.ePill=t({key:n.type,displayValue:this.advancedFilterExpressionService.parseJoinOperator(n),cssClass:"ag-advanced-filter-builder-join-pill",isSelect:!0,getEditorParams:()=>({values:this.advancedFilterExpressionService.getJoinOperatorAutocompleteEntries()}),update:r=>n.type=r,pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderJoinSelectField",pickerAriaLabelValue:"Advanced Filter Builder Join Operator Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderJoinOperator")}),this.getGui().appendChild(this.ePill.getGui()),this.addDestroyFunc(()=>this.destroyBean(this.ePill))}getDragName(){return this.advancedFilterExpressionService.parseJoinOperator(this.filterModel)}getAriaLabel(){return`${this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderGroupItem")} ${this.getDragName()}`}getValidationMessage(){return null}getFocusableElement(){return this.ePill.getFocusableElement()}};et([k("advancedFilterExpressionService")],gO.prototype,"advancedFilterExpressionService",2);var OU=class extends wl{constructor(i){super(x_(S_({},i),{template:`
                <div class="ag-picker-field ag-advanced-filter-builder-pill-wrapper" role="presentation">
                    <div ref="eLabel"></div>
                    <div ref="eWrapper" class="ag-wrapper ag-advanced-filter-builder-pill ag-picker-collapsed">
                        <div ref="eDisplayField" class="ag-picker-field-display ag-advanced-filter-builder-pill-display"></div>
                        <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
                        <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                    </div>
                </div>`})),this.params=i}getFocusableElement(){return this.eWrapper}showPicker(){setTimeout(()=>super.showPicker())}hidePicker(){setTimeout(()=>super.hidePicker())}postConstruct(){super.postConstruct();let{wrapperClassName:i,ariaLabel:e}=this.params;this.eWrapper.classList.add(i),M.setAriaLabelledBy(this.eWrapper,""),M.setAriaLabel(this.eWrapper,e)}createPickerComponent(){var i;if(!this.values){let{values:e}=this.params.getEditorParams();this.values=e;let t=this.value.key,n=(i=e.find(r=>r.key===t))!=null?i:{key:t,displayValue:this.value.displayValue};this.value=n}return super.createPickerComponent()}onEnterKeyDown(i){M.stopPropagationForAgGrid(i),this.isPickerDisplayed?super.onEnterKeyDown(i):(i.preventDefault(),this.showPicker())}},or=class extends Io{constructor(i,e,t){super(`
            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">
                <div ref="eItem" class="ag-advanced-filter-builder-item" role="presentation">
                    <div ref="eTreeLines" class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true"></div>
                    <span ref="eDragHandle" class="ag-drag-handle" aria-hidden="true"></span>
                    <span ref="eValidation" class="ag-advanced-filter-builder-item-button ag-advanced-filter-builder-invalid" aria-hidden="true"></span>
                </div>
                <div ref="eButtons" class="ag-advanced-filter-builder-item-buttons">
                    <span ref="eMoveUpButton" class="ag-advanced-filter-builder-item-button" role="button"></span>
                    <span ref="eMoveDownButton" class="ag-advanced-filter-builder-item-button" role="button"></span>
                    <div ref="eAddButton" role="presentation"></div>
                    <span ref="eRemoveButton" class="ag-advanced-filter-builder-item-button" role="button"></span>
                </div>
            </div>
        `),this.item=i,this.dragFeature=e,this.focusWrapper=t,this.moveUpDisabled=!1,this.moveDownDisabled=!1}postConstruct(){let{filterModel:i,level:e,showMove:t}=this.item,n=i.filterType==="join";if(this.ePillWrapper=this.createManagedBean(n?new gO:new w_),this.ePillWrapper.init({item:this.item,createPill:r=>this.createPill(r)}),this.eDragHandle.insertAdjacentElement("afterend",this.ePillWrapper.getGui()),e===0){let r=document.createElement("div");r.classList.add("ag-advanced-filter-builder-item-tree-line-vertical-bottom"),r.classList.add("ag-advanced-filter-builder-item-tree-line-root"),this.eTreeLines.appendChild(r),M.setDisplayed(this.eDragHandle,!1),M.setDisplayed(this.eButtons,!1),M.setAriaExpanded(this.focusWrapper,!0)}else this.setupTreeLines(e),this.eDragHandle.appendChild(M.createIconNoSpan("advancedFilterBuilderDrag",this.gos)),this.setupValidation(),this.setupMoveButtons(t),this.setupAddButton(),this.setupRemoveButton(),this.setupDragging(),this.updateAriaExpanded();M.setAriaLevel(this.focusWrapper,e+1),this.initialiseTabGuard({}),this.createManagedBean(new __(this.getGui(),this.focusWrapper,this.ePillWrapper)),this.updateAriaLabel(),this.addManagedListener(this.ePillWrapper,es.EVENT_VALUE_CHANGED,()=>this.dispatchEvent({type:es.EVENT_VALUE_CHANGED})),this.addManagedListener(this.ePillWrapper,es.EVENT_VALID_CHANGED,()=>this.updateValidity())}setState(i){let{level:e}=this.item;if(e===0)return;let{showMove:t}=this.item,{disableMoveUp:n,disableMoveDown:r,treeLines:s,showStartTreeLine:o}=i;this.updateTreeLines(s,o),this.updateAriaExpanded(),t&&(this.moveUpDisabled=!!n,this.moveDownDisabled=!!r,this.eMoveUpButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",n),this.eMoveDownButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",r),M.setAriaDisabled(this.eMoveUpButton,!!n),M.setAriaDisabled(this.eMoveDownButton,!!r),this.moveUpTooltipFeature.refreshToolTip(),this.moveDownTooltipFeature.refreshToolTip())}focusMoveButton(i){(i?this.eMoveUpButton:this.eMoveDownButton).focus()}afterAdd(){this.ePillWrapper.getFocusableElement().focus()}setupTreeLines(i){for(let e=0;e<i;e++){let t=document.createElement("div");this.eTreeLines.appendChild(t)}}updateTreeLines(i,e){let t=i.length-1,{children:n}=this.eTreeLines;for(let s=0;s<t;s++){let o=n.item(s);o&&o.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!i[s])}let r=n.item(t);if(r){r.classList.add("ag-advanced-filter-builder-item-tree-line-horizontal");let s=i[t];r.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-top",s),r.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!s)}this.eDragHandle.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-bottom",e)}setupValidation(){this.eValidation.appendChild(M.createIconNoSpan("advancedFilterBuilderInvalid",this.gos)),this.validationTooltipFeature=this.createManagedBean(new ps({getGui:()=>this.eValidation,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.ePillWrapper.getValidationMessage(),getTooltipShowDelayOverride:()=>1e3})),this.updateValidity()}setupAddButton(){var i;let e=mO(n=>this.advancedFilterExpressionService.translate(n),(i=this.gos.get("advancedFilterBuilderParams"))==null?void 0:i.addSelectWidth),t=this.createManagedBean(new hO(e));this.addManagedListener(t,X.EVENT_FIELD_PICKER_VALUE_SELECTED,({value:n})=>this.dispatchEvent({type:es.EVENT_ADDED,item:this.item,isJoin:n.key==="join"})),this.eAddButton.appendChild(t.getGui()),this.createManagedBean(new ps({getGui:()=>this.eAddButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip")}))}setupRemoveButton(){this.eRemoveButton.appendChild(M.createIconNoSpan("advancedFilterBuilderRemove",this.gos)),this.addManagedListener(this.eRemoveButton,"click",()=>this.removeItem()),this.addManagedListener(this.eRemoveButton,"keydown",i=>{switch(i.key){case Xe.ENTER:i.preventDefault(),M.stopPropagationForAgGrid(i),this.removeItem();break}}),this.createManagedBean(new ps({getGui:()=>this.eRemoveButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advancedFilterExpressionService.translate("advancedFilterBuilderRemoveButtonTooltip")})),M.setAriaLabel(this.eRemoveButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderRemoveButtonTooltip")),this.activateTabIndex([this.eRemoveButton])}setupMoveButtons(i){i?(this.eMoveUpButton.appendChild(M.createIconNoSpan("advancedFilterBuilderMoveUp",this.gos)),this.addManagedListener(this.eMoveUpButton,"click",()=>this.moveItem(!0)),this.addManagedListener(this.eMoveUpButton,"keydown",e=>{switch(e.key){case Xe.ENTER:e.preventDefault(),M.stopPropagationForAgGrid(e),this.moveItem(!0);break}}),this.moveUpTooltipFeature=this.createManagedBean(new ps({getGui:()=>this.eMoveUpButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.moveUpDisabled?null:this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveUpButtonTooltip")})),M.setAriaLabel(this.eMoveUpButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveUpButtonTooltip")),this.eMoveDownButton.appendChild(M.createIconNoSpan("advancedFilterBuilderMoveDown",this.gos)),this.addManagedListener(this.eMoveDownButton,"click",()=>this.moveItem(!1)),this.addManagedListener(this.eMoveDownButton,"keydown",e=>{switch(e.key){case Xe.ENTER:e.preventDefault(),M.stopPropagationForAgGrid(e),this.moveItem(!1);break}}),this.moveDownTooltipFeature=this.createManagedBean(new ps({getGui:()=>this.eMoveDownButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.moveDownDisabled?null:this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveDownButtonTooltip")})),M.setAriaLabel(this.eMoveDownButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveDownButtonTooltip")),this.activateTabIndex([this.eMoveUpButton,this.eMoveDownButton])):(M.setDisplayed(this.eMoveUpButton,!1),M.setDisplayed(this.eMoveDownButton,!1))}updateValidity(){M.setVisible(this.eValidation,!this.item.valid),this.validationTooltipFeature.refreshToolTip(),this.updateAriaLabel()}createPill(i){var e,t;let{key:n,displayValue:r,cssClass:s,update:o,ariaLabel:a}=i,l=c=>{c!=null&&(o(c),this.dispatchEvent({type:es.EVENT_VALUE_CHANGED}))};if(i.isSelect){let{getEditorParams:c,pickerAriaLabelKey:u,pickerAriaLabelValue:d}=i,h=this.gos.get("advancedFilterBuilderParams"),p=`${(e=h?.pillSelectMinWidth)!=null?e:140}px`,m=`${(t=h?.pillSelectMaxWidth)!=null?t:200}px`,g=this.createBean(new OU({pickerAriaLabelKey:u,pickerAriaLabelValue:d,pickerType:"ag-list",value:{key:n,displayValue:r},valueFormatter:f=>{var y;return f==null?null:(y=f.displayValue)!=null?y:f.key},variableWidth:!0,minPickerWidth:p,maxPickerWidth:m,getEditorParams:c,wrapperClassName:s,ariaLabel:a}));return this.addManagedListener(g,X.EVENT_FIELD_PICKER_VALUE_SELECTED,({value:f})=>l(f?.key)),g}else{let c=this.createBean(new wg({value:r,cssClass:s,type:this.getInputType(i.baseCellDataType),ariaLabel:a}));return this.addManagedListener(c,X.EVENT_FIELD_VALUE_CHANGED,({value:u})=>l(u)),c}}getInputType(i){switch(i){case"text":case"object":case"boolean":return"text";case"number":return"number";case"date":case"dateString":return"date"}}setupDragging(){let i={type:Gi.AdvancedFilterBuilder,eElement:this.eDragHandle,dragItemName:()=>this.ePillWrapper.getDragName(),getDefaultIconName:()=>hi.ICON_NOT_ALLOWED,getDragItem:()=>({}),onDragStarted:()=>this.dragFeature.dispatchEvent({type:qx.EVENT_DRAG_STARTED,item:this.item}),onDragStopped:()=>this.dragFeature.dispatchEvent({type:qx.EVENT_DRAG_ENDED})};this.dragAndDropService.addDragSource(i,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(i))}updateAriaLabel(){let i=this.ePillWrapper.getAriaLabel(),e=`${this.item.level+1}`,t=this.ePillWrapper.getValidationMessage(),n;t?n=this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItemValidation",[i,e,t]):n=this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItem",[i,e]),M.setAriaLabel(this.focusWrapper,n)}updateAriaExpanded(){M.removeAriaExpanded(this.focusWrapper);let{filterModel:i}=this.item;i?.filterType==="join"&&i.conditions.length&&M.setAriaExpanded(this.focusWrapper,!0)}removeItem(){this.dispatchEvent({type:es.EVENT_REMOVED,item:this.item})}moveItem(i){this.dispatchEvent({type:es.EVENT_MOVED,item:this.item,backwards:i})}};et([ce("eTreeLines")],or.prototype,"eTreeLines",2);et([ce("eDragHandle")],or.prototype,"eDragHandle",2);et([ce("eItem")],or.prototype,"eItem",2);et([ce("eButtons")],or.prototype,"eButtons",2);et([ce("eValidation")],or.prototype,"eValidation",2);et([ce("eMoveUpButton")],or.prototype,"eMoveUpButton",2);et([ce("eMoveDownButton")],or.prototype,"eMoveDownButton",2);et([ce("eAddButton")],or.prototype,"eAddButton",2);et([ce("eRemoveButton")],or.prototype,"eRemoveButton",2);et([k("beans")],or.prototype,"beans",2);et([k("dragAndDropService")],or.prototype,"dragAndDropService",2);et([k("advancedFilterExpressionService")],or.prototype,"advancedFilterExpressionService",2);et([J],or.prototype,"postConstruct",1);var Eg=class extends ae{constructor(i,e){super(`
            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">
                <div ref="eItem" class="ag-advanced-filter-builder-item" role="presentation">
                    <div class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true">
                        <div class="ag-advanced-filter-builder-item-tree-line-vertical-top ag-advanced-filter-builder-item-tree-line-horizontal"></div>
                    </div>
                </div>
            </div>
        `),this.item=i,this.focusWrapper=e}postConstruct(){var i;M.setAriaLevel(this.focusWrapper,2);let e=mO(n=>this.advancedFilterExpressionService.translate(n),(i=this.gos.get("advancedFilterBuilderParams"))==null?void 0:i.addSelectWidth),t=this.createManagedBean(new hO(e));this.addManagedListener(t,X.EVENT_FIELD_PICKER_VALUE_SELECTED,({value:n})=>{this.dispatchEvent({type:es.EVENT_ADDED,item:this.item,isJoin:n.key==="join"})}),this.eItem.appendChild(t.getGui()),this.createManagedBean(new ps({getGui:()=>t.getGui(),getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip")})),this.createManagedBean(new __(this.getGui(),this.focusWrapper,t)),M.setAriaLabel(this.focusWrapper,this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItem",[this.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip"),`${this.item.level+1}`]))}afterAdd(){}};et([k("beans")],Eg.prototype,"beans",2);et([k("advancedFilterExpressionService")],Eg.prototype,"advancedFilterExpressionService",2);et([ce("eItem")],Eg.prototype,"eItem",2);et([J],Eg.prototype,"postConstruct",1);var cl=class extends ae{constructor(){super(`
            <div role="presentation" class="ag-advanced-filter-builder" tabindex="-1">
                <div role="presentation" class="ag-advanced-filter-builder-list" ref="eList"></div>
                <div role="presentation" class="ag-advanced-filter-builder-button-panel">
                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-apply-button" ref="eApplyFilterButton"></button>
                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-cancel-button" ref="eCancelFilterButton"></button>
                </div>
            </div>`),this.validationMessage=null}postConstruct(){var i;let{showMoveButtons:e}=(i=this.gos.get("advancedFilterBuilderParams"))!=null?i:{};this.showMove=!!e,this.addManagedPropertyListener("advancedFilterBuilderParams",({currentValue:t})=>{this.showMove=!!t?.showMoveButtons,this.refreshList(!1)}),this.filterModel=this.setupFilterModel(),this.setupVirtualList(),this.dragFeature=this.createManagedBean(new qx(this,this.virtualList)),this.setupButtons()}refresh(){let i=this.virtualList.getLastFocusedRow();this.setupFilterModel(),this.validateItems(),this.refreshList(!1),i!=null&&(this.virtualList.getComponentAt(i)||(i=0),this.virtualList.focusRow(i))}getNumItems(){return this.items.length}moveItem(i,e){!e||!i||this.moveItemToIndex(i,e.rowIndex,e.position)}afterGuiAttached(){this.virtualList.focusRow(0)}setupVirtualList(){this.virtualList=this.createManagedBean(new Oo({cssIdentifier:"advanced-filter-builder",ariaRole:"tree",listName:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderList")})),this.virtualList.setComponentCreator(this.createItemComponent.bind(this)),this.virtualList.setComponentUpdater(this.updateItemComponent.bind(this)),this.virtualList.setRowHeight(40),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.items.length,getRow:i=>this.items[i],areRowsEqual:(i,e)=>i===e}),this.buildList(),this.virtualList.refresh()}setupButtons(){this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",()=>{this.advancedFilterService.setModel(this.filterModel),this.filterManager.onFilterChanged({source:"advancedFilter"}),this.close()}),this.validationTooltipFeature=this.createManagedBean(new ps({getGui:()=>this.eApplyFilterButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.validationMessage,getTooltipShowDelayOverride:()=>1e3})),this.validate(),this.addManagedListener(this.eApplyFilterButton,"mouseenter",()=>this.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!0)),this.addManagedListener(this.eApplyFilterButton,"mouseleave",()=>this.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!1)),this.eCancelFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderCancel"),this.activateTabIndex([this.eCancelFilterButton]),this.addManagedListener(this.eCancelFilterButton,"click",()=>this.close())}removeItemFromParent(i){let e=i.parent.conditions.indexOf(i.filterModel);return i.parent.conditions.splice(e,1),e}moveItemToIndex(i,e,t){var n;let r=this.items[e],s=((n=r.filterModel)==null?void 0:n.filterType)==="join"&&t==="bottom",o=s?r.filterModel:r.parent;if(!o||this.isChildOrSelf(o,i.filterModel)||r===i)return;this.removeItemFromParent(i);let a;s?a=0:(a=o.conditions.indexOf(r.filterModel),a===-1?a=o.conditions.length:t==="bottom"&&(a+=1)),o.conditions.splice(a,0,i.filterModel),this.refreshList(!1)}isChildOrSelf(i,e){return i===e||e.filterType==="join"&&e.conditions.some(t=>this.isChildOrSelf(i,t))}setupFilterModel(){let i=this.formatFilterModel(this.advancedFilterService.getModel());return this.stringifiedModel=JSON.stringify(i),i}formatFilterModel(i){return i=i??{filterType:"join",type:"AND",conditions:[]},i.filterType!=="join"&&(i={filterType:"join",type:"AND",conditions:[i]}),i}buildList(){let i=(e,t,n,r)=>{t.push({filterModel:e,level:n,parent:r,valid:!0,showMove:this.showMove}),e.filterType==="join"&&(e.conditions.forEach(s=>i(s,t,n+1,e)),n===0&&t.push({filterModel:null,level:n+1,parent:e,valid:!0}))};this.items=[],i(this.filterModel,this.items,0)}refreshList(i){if(!i){let e=[];this.items.forEach(t=>{t.valid||e.push(t.filterModel)}),this.buildList(),e.length&&this.items.forEach(t=>{t.filterModel&&e.includes(t.filterModel)&&(t.valid=!1)})}this.virtualList.refresh(i),this.validate()}updateItemComponent(i,e){let t=this.items.indexOf(i),n=(a,l)=>{let c=this.items.find(d=>d.filterModel===a),u=c?.parent;if(u){let{conditions:d}=u;n(u,l),l.push(d[d.length-1]===a)}},r=[],{filterModel:s}=i;s&&(n(s,r),r[0]=!1);let o=s?.filterType==="join"&&!!s.conditions.length;e.setState({disableMoveUp:t===1,disableMoveDown:!this.canMoveDown(i,t),treeLines:r,showStartTreeLine:o})}createItemComponent(i,e){let t=this.createBean(i.filterModel?new or(i,this.dragFeature,e):new Eg(i,e));return t.addManagedListener(t,es.EVENT_REMOVED,({item:n})=>this.removeItem(n)),t.addManagedListener(t,es.EVENT_VALUE_CHANGED,()=>this.validate()),t.addManagedListener(t,es.EVENT_ADDED,({item:n,isJoin:r})=>this.addItem(n,r)),t.addManagedListener(t,es.EVENT_MOVED,({item:n,backwards:r})=>this.moveItemUpDown(n,r)),t instanceof or&&this.updateItemComponent(i,t),t}addItem(i,e){var t;let{parent:n,level:r,filterModel:s}=i,o=s?.filterType==="join",a=e?{filterType:"join",type:"AND",conditions:[]}:{},l=o?s:n,c=o?0:l.conditions.indexOf(s);c>=0?(o||(c+=1),l.conditions.splice(c,0,a)):l.conditions.push(a);let u=this.items.indexOf(i),d=u>=0;if(d){i.filterModel&&u++;let h=[{filterModel:a,level:o?r+1:r,parent:l,valid:e,showMove:this.showMove}];this.items.splice(u,0,...h)}this.refreshList(d),d&&((t=this.virtualList.getComponentAt(u))==null||t.afterAdd())}removeItem(i){var e;let t=i.parent,{filterModel:n}=i,r=t.conditions.indexOf(n);t.conditions.splice(r,1);let s=((e=i.filterModel)==null?void 0:e.filterType)==="join",o=this.items.indexOf(i),a=!s&&o>=0;a&&this.items.splice(o,1),this.refreshList(a),o>=0&&this.virtualList.focusRow(o)}moveItemUpDown(i,e){let t=this.items.indexOf(i),n=e?t-1:t+1;if(n===0||!e&&!this.canMoveDown(i,t))return;let r=this.items[n],s=this.removeItemFromParent(i),{level:o,filterModel:a,parent:l}=i,{level:c,filterModel:u,parent:d}=r;if(e)if(c===o&&u.filterType==="join")u.conditions.push(a);else if(c<=o){let p=d.conditions.indexOf(u);d.conditions.splice(p,0,a)}else l.conditions[s-1].conditions.push(a);else if(c===o)if(u.filterType==="join")u.conditions.splice(0,0,a);else{let p=d.conditions.indexOf(u);d.conditions.splice(p+1,0,a)}else if(s<l.conditions.length)l.conditions.splice(s+1,0,a);else{let p=this.items.find(g=>g.filterModel===l),m=p.parent.conditions.indexOf(p.filterModel)+1;p.parent.conditions.splice(m,0,a)}this.refreshList(!1);let h=this.items.findIndex(({filterModel:p})=>p===a);if(h>=0){let p=this.virtualList.getComponentAt(h);p instanceof or&&p.focusMoveButton(e)}}canMoveDown(i,e){return!(i.level===1&&e===this.items.length-2||i.level===1&&i.parent.conditions[i.parent.conditions.length-1]===i.filterModel)}close(){this.advancedFilterService.getCtrl().toggleFilterBuilder("ui")}validate(){let i=!this.items.every(({valid:e})=>e);i?this.validationMessage=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationIncomplete"):(i=JSON.stringify(this.filterModel)===this.stringifiedModel,i?this.validationMessage=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationAlreadyApplied"):this.validationMessage=null),M.setDisabled(this.eApplyFilterButton,i),this.validationTooltipFeature.refreshToolTip()}validateItems(){let i=t=>{t.type=void 0},e=t=>{delete t.filter};this.items.forEach(t=>{if(!t.valid||!t.filterModel||t.filterModel.filterType==="join")return;let{filterModel:n}=t,{colId:r}=n,s=this.advancedFilterExpressionService.getColumnAutocompleteEntries().find(({key:c})=>c===r),o=this.advancedFilterExpressionService.getColumnDetails(n.colId);if(!s||!o.column){t.valid=!1,n.colId=void 0,i(n),e(n);return}let l=this.advancedFilterExpressionService.getDataTypeExpressionOperator(o.baseCellDataType).operators[n.type];if(!l){t.valid=!1,i(n),e(n);return}if(l.numOperands>0&&!M.exists(n.filter)){t.valid=!1;return}})}};et([ce("eList")],cl.prototype,"eList",2);et([ce("eApplyFilterButton")],cl.prototype,"eApplyFilterButton",2);et([ce("eCancelFilterButton")],cl.prototype,"eCancelFilterButton",2);et([k("filterManager")],cl.prototype,"filterManager",2);et([k("advancedFilterService")],cl.prototype,"advancedFilterService",2);et([k("advancedFilterExpressionService")],cl.prototype,"advancedFilterExpressionService",2);et([k("beans")],cl.prototype,"beans",2);et([J],cl.prototype,"postConstruct",1);var np=(()=>{let i=class fO extends be{constructor(t){super(),this.enabled=t}postConstruct(){this.hasAdvancedFilterParent=!!this.gos.get("advancedFilterParent"),this.ctrlsService.whenReady(()=>this.setAdvancedFilterComp()),this.addManagedListener(this.eventService,X.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,({enabled:t})=>this.onEnabledChanged(t)),this.addManagedPropertyListener("advancedFilterParent",()=>this.updateComps()),this.addDestroyFunc(()=>{this.destroyAdvancedFilterComp(),this.destroyBean(this.eBuilderComp),this.eBuilderDialog&&this.eBuilderDialog.isAlive()&&this.destroyBean(this.eBuilderDialog)})}setupHeaderComp(t){this.eHeaderComp=this.createManagedBean(new _g(this.enabled&&!this.hasAdvancedFilterParent)),t.insertAdjacentElement("beforebegin",this.eHeaderComp.getGui())}focusHeaderComp(){return this.eHeaderComp?(this.eHeaderComp.getFocusableElement().focus(),!0):!1}refreshComp(){var t,n;(t=this.eFilterComp)==null||t.refresh(),(n=this.eHeaderComp)==null||n.refresh()}refreshBuilderComp(){var t;(t=this.eBuilderComp)==null||t.refresh()}getHeaderHeight(){var t,n;return(n=(t=this.eHeaderComp)==null?void 0:t.getHeight())!=null?n:0}setInputDisabled(t){var n,r;(n=this.eFilterComp)==null||n.setInputDisabled(t),(r=this.eHeaderComp)==null||r.setInputDisabled(t)}toggleFilterBuilder(t,n){if(n&&this.eBuilderDialog||n===!1&&!this.eBuilderDialog)return;if(this.eBuilderDialog){this.builderDestroySource=t,this.destroyBean(this.eBuilderDialog);return}this.setInputDisabled(!0);let{width:r,height:s,minWidth:o}=this.getBuilderDialogSize();this.eBuilderComp=this.createBean(new cl),this.eBuilderDialog=this.createBean(new wr({title:this.advancedFilterExpressionService.translate("advancedFilterBuilderTitle"),component:this.eBuilderComp,width:r,height:s,resizable:!0,movable:!0,maximizable:!0,centered:!0,closable:!0,minWidth:o,afterGuiAttached:()=>{var a;return(a=this.eBuilderComp)==null?void 0:a.afterGuiAttached()}})),this.dispatchFilterBuilderVisibleChangedEvent(t,!0),this.eBuilderDialog.addEventListener(wr.EVENT_DESTROYED,()=>{var a;this.destroyBean(this.eBuilderComp),this.eBuilderComp=void 0,this.eBuilderDialog=void 0,this.setInputDisabled(!1),this.dispatchEvent({type:fO.EVENT_BUILDER_CLOSED}),this.dispatchFilterBuilderVisibleChangedEvent((a=this.builderDestroySource)!=null?a:"ui",!1),this.builderDestroySource=void 0})}dispatchFilterBuilderVisibleChangedEvent(t,n){let r={type:X.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED,source:t,visible:n};this.eventService.dispatchEvent(r)}getBuilderDialogSize(){var t,n;let r=(n=(t=this.gos.get("advancedFilterBuilderParams"))==null?void 0:t.minWidth)!=null?n:500,s=this.popupService.getPopupParent(),o=Math.round(M.getAbsoluteWidth(s))-2,a=Math.round(M.getAbsoluteHeight(s)*.75)-2,l=Math.min(Math.max(600,r),o),c=Math.min(600,a);return{width:l,height:c,minWidth:r}}onEnabledChanged(t){this.enabled=t,this.updateComps()}updateComps(){this.setAdvancedFilterComp(),this.setHeaderCompEnabled(),this.eventService.dispatchEvent({type:X.EVENT_HEADER_HEIGHT_CHANGED})}setAdvancedFilterComp(){if(this.destroyAdvancedFilterComp(),!this.enabled)return;let t=this.gos.get("advancedFilterParent");if(this.hasAdvancedFilterParent=!!t,t){let n=this.createBean(new Bs),r=n.getGui(),{allThemes:s}=this.environment.getTheme();s.length&&r.classList.add(...s),r.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),t.appendChild(r),this.eFilterComp=n}}setHeaderCompEnabled(){var t;(t=this.eHeaderComp)==null||t.setEnabled(this.enabled&&!this.hasAdvancedFilterParent)}destroyAdvancedFilterComp(){this.eFilterComp&&(M.removeFromParent(this.eFilterComp.getGui()),this.destroyBean(this.eFilterComp))}};return i.EVENT_BUILDER_CLOSED="advancedFilterBuilderClosed",i})();et([k("focusService")],np.prototype,"focusService",2);et([k("ctrlsService")],np.prototype,"ctrlsService",2);et([k("popupService")],np.prototype,"popupService",2);et([k("advancedFilterExpressionService")],np.prototype,"advancedFilterExpressionService",2);et([J],np.prototype,"postConstruct",1);var vO=np,Bs=class extends ae{constructor(){super(`
            <div class="ag-advanced-filter" role="presentation" tabindex="-1">
                <ag-autocomplete ref="eAutocomplete"></ag-autocomplete>
                <button class="ag-button ag-standard-button ag-advanced-filter-apply-button" ref="eApplyFilterButton"></button>
                <button class="ag-advanced-filter-builder-button" ref="eBuilderFilterButton">
                    <span ref="eBuilderFilterButtonIcon" aria-hidden="true"></span>
                    <span class="ag-advanced-filter-builder-button-label" ref="eBuilderFilterButtonLabel"></span>
                </button>
            </div>`),this.expressionParser=null,this.isApplyDisabled=!0,this.builderOpen=!1}postConstruct(){this.eAutocomplete.setListGenerator((i,e)=>this.generateAutocompleteListParams(e)).setValidator(()=>this.validateValue()).setForceLastSelection((i,e)=>this.forceLastSelection(i,e)).setInputAriaLabel(this.advancedFilterExpressionService.translate("ariaAdvancedFilterInput")).setListAriaLabel(this.advancedFilterExpressionService.translate("ariaLabelAdvancedFilterAutocomplete")),this.refresh(),this.addManagedListener(this.eAutocomplete,Wc.EVENT_VALUE_CHANGED,({value:i})=>this.onValueChanged(i)),this.addManagedListener(this.eAutocomplete,Wc.EVENT_VALUE_CONFIRMED,({isValid:i})=>this.onValueConfirmed(i)),this.addManagedListener(this.eAutocomplete,Wc.EVENT_OPTION_SELECTED,({position:i,updateEntry:e,autocompleteType:t})=>this.onOptionSelected(i,e,t)),this.addManagedListener(this.eAutocomplete,Wc.EVENT_VALID_CHANGED,({isValid:i,validationMessage:e})=>this.onValidChanged(i,e)),this.setupApplyButton(),this.setupBuilderButton()}refresh(){let i=this.advancedFilterService.getExpressionDisplayValue();this.eAutocomplete.setValue({value:i??"",position:i?.length,updateListOnlyIfOpen:!0})}setInputDisabled(i){this.eAutocomplete.setInputDisabled(i),M.setDisabled(this.eApplyFilterButton,i||this.isApplyDisabled)}getTooltipParams(){let i=super.getTooltipParams();return i.location="advancedFilter",i}setupApplyButton(){this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",()=>this.onValueConfirmed(this.eAutocomplete.isValid())),M.setDisabled(this.eApplyFilterButton,this.isApplyDisabled)}setupBuilderButton(){this.eBuilderFilterButtonIcon.appendChild(M.createIconNoSpan("advancedFilterBuilder",this.gos)),this.eBuilderFilterButtonLabel.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilder"),this.activateTabIndex([this.eBuilderFilterButton]),this.addManagedListener(this.eBuilderFilterButton,"click",()=>this.openBuilder()),this.addManagedListener(this.advancedFilterService.getCtrl(),vO.EVENT_BUILDER_CLOSED,()=>this.closeBuilder())}onValueChanged(i){var e;i=M.makeNull(i),this.advancedFilterService.setExpressionDisplayValue(i),this.expressionParser=this.advancedFilterService.createExpressionParser(i);let t=(e=this.expressionParser)==null?void 0:e.parseExpression();t&&t!==i&&this.eAutocomplete.setValue({value:t,silent:!0,restoreFocus:!0})}onValueConfirmed(i){!i||this.isApplyDisabled||(M.setDisabled(this.eApplyFilterButton,!0),this.advancedFilterService.applyExpression(),this.filterManager.onFilterChanged({source:"advancedFilter"}))}onOptionSelected(i,e,t){let{updatedValue:n,updatedPosition:r,hideAutocomplete:s}=this.updateExpression(i,e,t);this.eAutocomplete.setValue({value:n,position:r,updateListOnlyIfOpen:s,restoreFocus:!0})}validateValue(){var i,e,t;return(i=this.expressionParser)!=null&&i.isValid()?null:(t=(e=this.expressionParser)==null?void 0:e.getValidationMessage())!=null?t:null}onValidChanged(i,e){this.isApplyDisabled=!i||this.advancedFilterService.isCurrentExpressionApplied(),M.setDisabled(this.eApplyFilterButton,this.isApplyDisabled),this.setTooltip({newTooltipText:e,showDelayOverride:1e3})}generateAutocompleteListParams(i){return this.expressionParser?this.expressionParser.getAutocompleteListParams(i):this.advancedFilterExpressionService.getDefaultAutocompleteListParams("")}updateExpression(i,e,t){var n,r;return this.advancedFilterExpressionService.updateAutocompleteCache(e,t),(r=(n=this.expressionParser)==null?void 0:n.updateExpression(i,e,t))!=null?r:this.advancedFilterService.getDefaultExpression(e)}forceLastSelection({key:i,displayValue:e},t){return!!t.toLocaleLowerCase().match(`^${(e??i).toLocaleLowerCase()}\\s*$`)}openBuilder(){this.builderOpen||(this.builderOpen=!0,M.setDisabled(this.eBuilderFilterButton,!0),this.advancedFilterService.getCtrl().toggleFilterBuilder("ui"))}closeBuilder(){this.builderOpen&&(this.builderOpen=!1,M.setDisabled(this.eBuilderFilterButton,!1),this.eBuilderFilterButton.focus())}};et([ce("eAutocomplete")],Bs.prototype,"eAutocomplete",2);et([ce("eApplyFilterButton")],Bs.prototype,"eApplyFilterButton",2);et([ce("eBuilderFilterButton")],Bs.prototype,"eBuilderFilterButton",2);et([ce("eBuilderFilterButtonIcon")],Bs.prototype,"eBuilderFilterButtonIcon",2);et([ce("eBuilderFilterButtonLabel")],Bs.prototype,"eBuilderFilterButtonLabel",2);et([k("advancedFilterService")],Bs.prototype,"advancedFilterService",2);et([k("advancedFilterExpressionService")],Bs.prototype,"advancedFilterExpressionService",2);et([k("filterManager")],Bs.prototype,"filterManager",2);et([J],Bs.prototype,"postConstruct",1);var LU={ariaAdvancedFilterBuilderItem:i=>`${i[0]}. Level ${i[1]}. Press ENTER to edit.`,ariaAdvancedFilterBuilderItemValidation:i=>`${i[0]}. Level ${i[1]}. ${i[2]} Press ENTER to edit.`,ariaAdvancedFilterBuilderList:"Advanced Filter Builder List",ariaAdvancedFilterBuilderFilterItem:"Filter Condition",ariaAdvancedFilterBuilderGroupItem:"Filter Group",ariaAdvancedFilterBuilderColumn:"Column",ariaAdvancedFilterBuilderOption:"Option",ariaAdvancedFilterBuilderValue:"Value",ariaAdvancedFilterBuilderJoinOperator:"Join Operator",ariaAdvancedFilterInput:"Advanced Filter Input",ariaLabelAdvancedFilterAutocomplete:"Advanced Filter Autocomplete",advancedFilterContains:"contains",advancedFilterNotContains:"does not contain",advancedFilterTextEquals:"equals",advancedFilterTextNotEqual:"does not equal",advancedFilterStartsWith:"begins with",advancedFilterEndsWith:"ends with",advancedFilterBlank:"is blank",advancedFilterNotBlank:"is not blank",advancedFilterEquals:"=",advancedFilterNotEqual:"!=",advancedFilterGreaterThan:">",advancedFilterGreaterThanOrEqual:">=",advancedFilterLessThan:"<",advancedFilterLessThanOrEqual:"<=",advancedFilterTrue:"is true",advancedFilterFalse:"is false",advancedFilterAnd:"AND",advancedFilterOr:"OR",advancedFilterApply:"Apply",advancedFilterBuilder:"Builder",advancedFilterValidationMissingColumn:"Column is missing",advancedFilterValidationMissingOption:"Option is missing",advancedFilterValidationMissingValue:"Value is missing",advancedFilterValidationInvalidColumn:"Column not found",advancedFilterValidationInvalidOption:"Option not found",advancedFilterValidationMissingQuote:"Value is missing an end quote",advancedFilterValidationNotANumber:"Value is not a number",advancedFilterValidationInvalidDate:"Value is not a valid date",advancedFilterValidationMissingCondition:"Condition is missing",advancedFilterValidationJoinOperatorMismatch:"Join operators within a condition must be the same",advancedFilterValidationInvalidJoinOperator:"Join operator not found",advancedFilterValidationMissingEndBracket:"Missing end bracket",advancedFilterValidationExtraEndBracket:"Too many end brackets",advancedFilterValidationMessage:i=>`Expression has an error. ${i[0]} - ${i[1]}.`,advancedFilterValidationMessageAtEnd:i=>`Expression has an error. ${i[0]} at end of expression.`,advancedFilterBuilderTitle:"Advanced Filter",advancedFilterBuilderApply:"Apply",advancedFilterBuilderCancel:"Cancel",advancedFilterBuilderAddButtonTooltip:"Add Filter or Group",advancedFilterBuilderRemoveButtonTooltip:"Remove",advancedFilterBuilderMoveUpButtonTooltip:"Move Up",advancedFilterBuilderMoveDownButtonTooltip:"Move Down",advancedFilterBuilderAddJoin:"Add Group",advancedFilterBuilderAddCondition:"Add Filter",advancedFilterBuilderSelectColumn:"Select a column",advancedFilterBuilderSelectOption:"Select an option",advancedFilterBuilderEnterValue:"Enter a value...",advancedFilterBuilderValidationAlreadyApplied:"Current filter already applied.",advancedFilterBuilderValidationIncomplete:"Not all conditions are complete.",advancedFilterBuilderValidationSelectColumn:"Must select a column.",advancedFilterBuilderValidationSelectOption:"Must select an option.",advancedFilterBuilderValidationEnterValue:"Must enter a value."};function Xx(i,e,t){if(!i)return"";let n=t-e;return n?i.slice(0,i.length-n):i}function lc(i,e,t,n,r,s,o){let a=t+(!i.length||o?0:1),l=0;return r&&(i[a]===" "?l=1:(n+=" ",s&&(n+='"'))),{updatedValue:i.slice(0,e)+n+i.slice(a),updatedPosition:e+n.length+l}}function RU(i,e,t){let n=e;for(;n<t&&i[n]===" ";)n++;return n}function Zx(i,e,t,n){let r=e,s=!1;for(;r<i.length;){let o=i[r];if(o==="("){n&&i[r-1]===" "?s=!0:r=r-1;break}else if(o===" "||t&&o===")"){r=r-1;break}r++}return{endPosition:r,isEmpty:s}}function E_(i,e,t,n){t!==e&&(i.expression=lc(i.expression,n-e.length+1,n,t).updatedValue)}function NU(i){return i.replace(/(['"])/,"\\$1")}var VU=class{constructor(i,e){this.params=i,this.startPosition=e,this.type="column",this.valid=!0,this.hasStartChar=!1,this.hasEndChar=!1,this.colName=""}parse(i,e){if(i===Du.COL_START_CHAR&&!this.colName)this.hasStartChar=!0;else if(i===Du.COL_END_CHAR&&this.hasStartChar){if(this.parseColumn(!1,e))return this.hasEndChar=!0,!1;this.colName+=i}else this.colName+=i}getDisplayValue(){return(this.hasStartChar?Du.COL_START_CHAR:"")+this.colName+(this.hasEndChar?Du.COL_END_CHAR:"")}getColId(){return this.colId}complete(i){this.parseColumn(!0,i)}getValidationError(){var i;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidColumn"),startPosition:this.startPosition,endPosition:(i=this.endPosition)!=null?i:this.params.expression.length-1}}parseColumn(i,e){var t;this.endPosition=e;let n=this.params.advancedFilterExpressionService.getColId(this.colName);return n&&this.hasStartChar&&(this.colId=n.colId,E_(this.params,this.colName,n.columnName,e-1),this.colName=n.columnName,this.column=this.params.columnModel.getPrimaryColumn(this.colId),this.column)?(this.baseCellDataType=(t=this.params.dataTypeService.getBaseDataType(this.column))!=null?t:"text",!0):(i&&(this.valid=!1),this.baseCellDataType="text",!1)}},BU=class{constructor(i,e,t){this.params=i,this.startPosition=e,this.baseCellDataType=t,this.type="operator",this.valid=!0,this.expectedNumOperands=0,this.operator=""}parse(i,e){if(i===" "||i===")"){if(this.parseOperator(!1,e-1))return!0;this.operator+=i}else this.operator+=i}complete(i){this.parseOperator(!0,i)}getValidationError(){var i;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidOption"),startPosition:this.startPosition,endPosition:(i=this.endPosition)!=null?i:this.params.expression.length-1}}getDisplayValue(){return this.operator}getOperatorKey(){return this.parsedOperator}parseOperator(i,e){let t=this.params.advancedFilterExpressionService.getDataTypeExpressionOperator(this.baseCellDataType),n=t.findOperator(this.operator);if(this.endPosition=e,n){this.parsedOperator=n;let s=t.operators[n];this.expectedNumOperands=s.numOperands;let o=s.displayValue;return E_(this.params,this.operator,o,e),this.operator=o,!0}return(i||!(n===null))&&(this.valid=!1),!1}},GU=class{constructor(i,e,t,n){this.params=i,this.startPosition=e,this.baseCellDataType=t,this.column=n,this.type="operand",this.valid=!0,this.operand="",this.validationMessage=null}parse(i,e){if(i===" ")if(this.quotes)this.operand+=i;else return this.parseOperand(!1,e),!0;else if(i===")"){if(this.baseCellDataType==="number"||!this.quotes)return this.parseOperand(!1,e-1),!0;this.operand+=i}else if(!this.operand&&!this.quotes&&(i==="'"||i==='"'))this.quotes=i;else{if(this.quotes&&i===this.quotes)return this.parseOperand(!1,e),!1;this.operand+=i}}complete(i){this.parseOperand(!0,i)}getValidationError(){var i;return this.validationMessage?{message:this.validationMessage,startPosition:this.startPosition,endPosition:(i=this.endPosition)!=null?i:this.params.expression.length-1}:null}getRawValue(){return this.operand}getModelValue(){return this.modelValue}parseOperand(i,e){let{advancedFilterExpressionService:t}=this.params;if(this.endPosition=e,this.modelValue=this.operand,i&&this.quotes)this.valid=!1,this.validationMessage=t.translate("advancedFilterValidationMissingQuote");else if(this.modelValue==="")this.valid=!1,this.validationMessage=t.translate("advancedFilterValidationMissingValue");else{let n=t.getOperandModelValue(this.operand,this.baseCellDataType,this.column);switch(n!=null&&(this.modelValue=n),this.baseCellDataType){case"number":(this.quotes||isNaN(this.modelValue))&&(this.valid=!1,this.validationMessage=t.translate("advancedFilterValidationNotANumber"));break;case"date":case"dateString":n==null&&(this.valid=!1,this.validationMessage=t.translate("advancedFilterValidationInvalidDate"));break}}}},Du=(()=>{let i=class{constructor(e,t){this.params=e,this.startPosition=t,this.isAwaiting=!0}parseExpression(){var e,t;let n=this.startPosition,{expression:r}=this.params;for(;n<r.length;){let s=r[n];if(!(s===" "&&this.isAwaiting)){if(this.isAwaiting=!1,!this.parser){let a;this.columnParser?this.operatorParser?(this.operandParser=new GU(this.params,n,this.columnParser.baseCellDataType,this.columnParser.column),a=this.operandParser):(this.operatorParser=new BU(this.params,n,this.columnParser.baseCellDataType),a=this.operatorParser):(this.columnParser=new VU(this.params,n),a=this.columnParser),this.parser=a}let o=this.parser.parse(s,n);if(o!=null){if(this.isComplete())return this.returnEndPosition(o?n-1:n,!0);this.parser=void 0,this.isAwaiting=!0}}n++}return(t=(e=this.parser)==null?void 0:e.complete)==null||t.call(e,n-1),this.returnEndPosition(n)}isValid(){return this.isComplete()&&this.columnParser.valid&&this.operatorParser.valid&&(!this.operandParser||this.operandParser.valid)}getValidationError(){var e,t,n,r,s;let o=(s=(n=(e=this.columnParser)==null?void 0:e.getValidationError())!=null?n:(t=this.operatorParser)==null?void 0:t.getValidationError())!=null?s:(r=this.operandParser)==null?void 0:r.getValidationError();if(o)return o;let a=this.params.expression.length,l;return this.columnParser?this.operatorParser?this.operatorParser.expectedNumOperands&&!this.operandParser&&(l="advancedFilterValidationMissingValue"):l="advancedFilterValidationMissingOption":l="advancedFilterValidationMissingColumn",l?{message:this.params.advancedFilterExpressionService.translate(l),startPosition:a,endPosition:a}:null}getFunctionString(e){return this.getFunctionCommon(e,(t,n,r,s)=>{let o=NU(r),a=t==null?"":`, params.operands[${t}]`;return`params.operators[${n}].evaluator(expressionProxy.getValue('${o}', node), node, params.evaluatorParams[${s}]${a})`})}getFunctionParsed(e){return this.getFunctionCommon(e,(t,n,r,s)=>(o,a,l)=>l.operators[n].evaluator(o.getValue(r,a),a,l.evaluatorParams[s],t==null?void 0:l.operands[t]))}getAutocompleteListParams(e){if(this.isColumnPosition(e))return this.getColumnAutocompleteListParams(e);if(this.isOperatorPosition(e))return this.getOperatorAutocompleteListParams(e);if(!this.isBeyondEndPosition(e))return{enabled:!1}}updateExpression(e,t,n){var r,s,o,a,l;let{expression:c}=this.params;if(this.isColumnPosition(e))return lc(this.params.expression,this.startPosition,(r=this.columnParser)!=null&&r.getColId()?this.columnParser.endPosition:Zx(c,e).endPosition,this.params.advancedFilterExpressionService.getColumnValue(t),!0);if(this.isOperatorPosition(e)){let u=this.getBaseCellDataTypeFromOperatorAutocompleteType(n),d=this.hasOperand(u,t.key),h=d&&this.doesOperandNeedQuotes(u),p;if(((s=this.operatorParser)==null?void 0:s.startPosition)!=null&&e<this.operatorParser.startPosition)p=lc(c,e,e,(o=t.displayValue)!=null?o:t.key,d,h);else{let m,g=!1;if((a=this.operatorParser)!=null&&a.getOperatorKey())m=this.operatorParser.endPosition;else{let{endPosition:f,isEmpty:y}=Zx(c,e,!0,!0);m=f,g=y}p=lc(c,RU(c,this.columnParser.endPosition+1,m),m,(l=t.displayValue)!=null?l:t.key,d,h,g)}return x_(S_({},p),{hideAutocomplete:!d})}return null}getModel(){let e=this.columnParser.getColId(),t={filterType:this.columnParser.baseCellDataType,colId:e,type:this.operatorParser.getOperatorKey()};return this.operatorParser.expectedNumOperands&&(t.filter=this.operandParser.getModelValue()),t}getFunctionCommon(e,t){var n,r;let s=this.columnParser.getColId(),o=(n=this.operatorParser)==null?void 0:n.getOperatorKey(),{operators:a,evaluatorParams:l,operands:c}=e,u=this.params.advancedFilterExpressionService.getExpressionOperator(this.columnParser.baseCellDataType,o),d=this.addToListAndGetIndex(a,u),h=this.params.advancedFilterExpressionService.getExpressionEvaluatorParams(s),p=this.addToListAndGetIndex(l,h),m=((r=this.operatorParser)==null?void 0:r.expectedNumOperands)===0?void 0:this.addToListAndGetIndex(c,this.getOperandValue());return t(m,d,s,p)}getOperandValue(){let e=this.operandParser.getRawValue(),{baseCellDataType:t,column:n}=this.columnParser;switch(t){case"number":e=Number(e);break;case"date":case"dateString":e=this.params.valueService.parseValue(n,null,e,void 0);break}return t==="dateString"?this.params.dataTypeService.getDateParserFunction(n)(e):e}isComplete(){return!!(this.operatorParser&&(!this.operatorParser.expectedNumOperands||this.operatorParser.expectedNumOperands&&this.operandParser))}isColumnPosition(e){return!this.columnParser||this.columnParser.endPosition==null||e<=this.columnParser.endPosition+1}isOperatorPosition(e){return!this.operatorParser||this.operatorParser.endPosition==null||e<=this.operatorParser.endPosition+1}isBeyondEndPosition(e){return this.isComplete()&&this.endPosition!=null&&e>this.endPosition+1&&this.endPosition+1<this.params.expression.length}returnEndPosition(e,t){return this.endPosition=t?e:e-1,e}getColumnAutocompleteListParams(e){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column",this.getColumnSearchString(e))}getColumnSearchString(e){var t,n,r,s,o;let a=(n=(t=this.columnParser)==null?void 0:t.getDisplayValue())!=null?n:"",l=Xx(a,e,((r=this.columnParser)==null?void 0:r.endPosition)==null?this.params.expression.length:this.columnParser.endPosition+1),c=((s=this.columnParser)==null?void 0:s.hasStartChar)&&l.length>0,u=((o=this.columnParser)==null?void 0:o.hasEndChar)&&l.length===a.length+2;return c?l.slice(1,u?-1:void 0):l}getOperatorAutocompleteListParams(e){var t,n,r,s,o;let a=(t=this.columnParser)==null?void 0:t.column;if(!a)return{enabled:!1};let l=this.columnParser.baseCellDataType,c=((n=this.operatorParser)==null?void 0:n.startPosition)!=null&&e<this.operatorParser.startPosition?"":Xx((s=(r=this.operatorParser)==null?void 0:r.getDisplayValue())!=null?s:"",e,((o=this.operatorParser)==null?void 0:o.endPosition)==null?this.params.expression.length:this.operatorParser.endPosition+1);return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getOperatorAutocompleteEntries(a,l),`operator-${l}`,c)}getBaseCellDataTypeFromOperatorAutocompleteType(e){return e?.replace("operator-","")}hasOperand(e,t){var n,r;return!e||!t||((r=(n=this.params.advancedFilterExpressionService.getExpressionOperator(e,t))==null?void 0:n.numOperands)!=null?r:0)>0}doesOperandNeedQuotes(e){return e!=="number"}addToListAndGetIndex(e,t){let n=e.length;return e.push(t),n}};return i.COL_START_CHAR="[",i.COL_END_CHAR="]",i})();function Sy(i,e,t){let n=!1,r=i.toLocaleLowerCase(),s=r+" ",o=Object.entries(e).find(([a,l])=>{let c=t(l).toLocaleLowerCase();return c.startsWith(s)&&(n=!0),c===r});return o?o[0]:n?null:void 0}function T_(i,e){return(e??Object.keys(i)).map(n=>({key:n,displayValue:i[n].displayValue}))}var iF=class{constructor(i){this.params=i,this.initOperators()}getEntries(i){return T_(this.operators,i)}findOperator(i){return Sy(i,this.operators,({displayValue:e})=>e)}initOperators(){let{translate:i}=this.params;this.operators={contains:{displayValue:i("advancedFilterContains"),evaluator:(e,t,n,r)=>this.evaluateExpression(e,t,n,r,!1,(s,o)=>s.includes(o)),numOperands:1},notContains:{displayValue:i("advancedFilterNotContains"),evaluator:(e,t,n,r)=>this.evaluateExpression(e,t,n,r,!0,(s,o)=>!s.includes(o)),numOperands:1},equals:{displayValue:i("advancedFilterTextEquals"),evaluator:(e,t,n,r)=>this.evaluateExpression(e,t,n,r,!1,(s,o)=>s===o),numOperands:1},notEqual:{displayValue:i("advancedFilterTextNotEqual"),evaluator:(e,t,n,r)=>this.evaluateExpression(e,t,n,r,!0,(s,o)=>s!=o),numOperands:1},startsWith:{displayValue:i("advancedFilterStartsWith"),evaluator:(e,t,n,r)=>this.evaluateExpression(e,t,n,r,!1,(s,o)=>s.startsWith(o)),numOperands:1},endsWith:{displayValue:i("advancedFilterEndsWith"),evaluator:(e,t,n,r)=>this.evaluateExpression(e,t,n,r,!1,(s,o)=>s.endsWith(o)),numOperands:1},blank:{displayValue:i("advancedFilterBlank"),evaluator:e=>e==null||typeof e=="string"&&e.trim().length===0,numOperands:0},notBlank:{displayValue:i("advancedFilterNotBlank"),evaluator:e=>e!=null&&(typeof e!="string"||e.trim().length>0),numOperands:0}}}evaluateExpression(i,e,t,n,r,s){return i==null?r:t.caseSensitive?s(t.valueConverter(i,e),n):s(t.valueConverter(i,e).toLocaleLowerCase(),n.toLocaleLowerCase())}},Vx=class{constructor(i){this.params=i,this.initOperators()}getEntries(i){return T_(this.operators,i)}findOperator(i){return Sy(i,this.operators,({displayValue:e})=>e)}initOperators(){let{translate:i,equals:e}=this.params;this.operators={equals:{displayValue:i("advancedFilterEquals"),evaluator:(t,n,r,s)=>this.evaluateSingleOperandExpression(t,n,r,s,!!r.includeBlanksInEquals,e),numOperands:1},notEqual:{displayValue:i("advancedFilterNotEqual"),evaluator:(t,n,r,s)=>this.evaluateSingleOperandExpression(t,n,r,s,!!r.includeBlanksInEquals,(o,a)=>!e(o,a)),numOperands:1},greaterThan:{displayValue:i("advancedFilterGreaterThan"),evaluator:(t,n,r,s)=>this.evaluateSingleOperandExpression(t,n,r,s,!!r.includeBlanksInGreaterThan,(o,a)=>o>a),numOperands:1},greaterThanOrEqual:{displayValue:i("advancedFilterGreaterThanOrEqual"),evaluator:(t,n,r,s)=>this.evaluateSingleOperandExpression(t,n,r,s,!!r.includeBlanksInGreaterThan,(o,a)=>o>=a),numOperands:1},lessThan:{displayValue:i("advancedFilterLessThan"),evaluator:(t,n,r,s)=>this.evaluateSingleOperandExpression(t,n,r,s,!!r.includeBlanksInLessThan,(o,a)=>o<a),numOperands:1},lessThanOrEqual:{displayValue:i("advancedFilterLessThanOrEqual"),evaluator:(t,n,r,s)=>this.evaluateSingleOperandExpression(t,n,r,s,!!r.includeBlanksInLessThan,(o,a)=>o<=a),numOperands:1},blank:{displayValue:i("advancedFilterBlank"),evaluator:t=>t==null,numOperands:0},notBlank:{displayValue:i("advancedFilterNotBlank"),evaluator:t=>t!=null,numOperands:0}}}evaluateSingleOperandExpression(i,e,t,n,r,s){return i==null?r:s(t.valueConverter(i,e),n)}},UU=class{constructor(i){this.params=i,this.initOperators()}getEntries(i){return T_(this.operators,i)}findOperator(i){return Sy(i,this.operators,({displayValue:e})=>e)}initOperators(){let{translate:i}=this.params;this.operators={true:{displayValue:i("advancedFilterTrue"),evaluator:e=>!!e,numOperands:0},false:{displayValue:i("advancedFilterFalse"),evaluator:e=>e===!1,numOperands:0},blank:{displayValue:i("advancedFilterBlank"),evaluator:e=>e==null,numOperands:0},notBlank:{displayValue:i("advancedFilterNotBlank"),evaluator:e=>e!=null,numOperands:0}}}},Ou=class extends be{constructor(){super(...arguments),this.columnNameToIdMap={},this.columnAutocompleteEntries=null,this.expressionEvaluatorParams={}}postConstruct(){this.expressionJoinOperators=this.generateExpressionJoinOperators(),this.expressionOperators=this.generateExpressionOperators()}parseJoinOperator(i){var e;let{type:t}=i;return(e=this.expressionJoinOperators[t])!=null?e:t}getColumnDisplayValue(i){let{colId:e}=i,n=this.getColumnAutocompleteEntries().find(({key:s})=>s===e),r;return n?(r=n.displayValue,this.columnNameToIdMap[r.toLocaleUpperCase()]={colId:e,columnName:r}):r=e,r}getOperatorDisplayValue(i){var e,t;return(t=(e=this.getExpressionOperator(i.filterType,i.type))==null?void 0:e.displayValue)!=null?t:i.type}getOperandModelValue(i,e,t){var n;switch(e){case"number":return M.exists(i)?Number(i):null;case"date":return M.serialiseDate(this.valueService.parseValue(t,null,i,void 0),!1);case"dateString":let r=this.valueService.parseValue(t,null,i,void 0);return M.serialiseDate((n=this.dataTypeService.getDateParserFunction(t)(r))!=null?n:null,!1)}return i}getOperandDisplayValue(i,e){var t,n;let{colId:r,filter:s}=i,o=this.columnModel.getPrimaryColumn(r),a="";if(s!=null){let l;switch(i.filterType){case"number":l=(t=M.toStringOrNull(s))!=null?t:"";break;case"date":let c=M.parseDateTimeFromString(s);l=o?this.valueService.formatValue(o,null,c):null;break;case"dateString":let u=M.parseDateTimeFromString(s),d=o?this.dataTypeService.getDateFormatterFunction(o)(u??void 0):null;l=o?this.valueService.formatValue(o,null,d):null;break}i.filterType!=="number"&&(l=(n=l??M.toStringOrNull(s))!=null?n:"",e||(l=`"${l}"`)),a=e?l:` ${l}`}return a}parseColumnFilterModel(i){var e,t;let n=(e=this.getColumnDisplayValue(i))!=null?e:"",r=(t=this.getOperatorDisplayValue(i))!=null?t:"",s=this.getOperandDisplayValue(i);return`[${n}] ${r}${s}`}updateAutocompleteCache(i,e){if(e==="column"){let{key:t,displayValue:n}=i;this.columnNameToIdMap[i.displayValue.toLocaleUpperCase()]={colId:t,columnName:n}}}translate(i,e){let t=LU[i];return typeof t=="function"&&(t=t(e)),this.localeService.getLocaleTextFunc()(i,t,e)}generateAutocompleteListParams(i,e,t){return{enabled:!0,type:e,searchString:t,entries:i}}getColumnAutocompleteEntries(){var i;if(this.columnAutocompleteEntries)return this.columnAutocompleteEntries;let e=(i=this.columnModel.getAllPrimaryColumns())!=null?i:[],t=[],n=this.gos.get("includeHiddenColumnsInAdvancedFilter");return e.forEach(r=>{r.getColDef().filter&&(n||r.isVisible()||r.isRowGroupActive())&&t.push({key:r.getColId(),displayValue:this.columnModel.getDisplayNameForColumn(r,"advancedFilter")})}),t.sort((r,s)=>{var o,a;let l=(o=r.displayValue)!=null?o:"",c=(a=s.displayValue)!=null?a:"";return l<c?-1:c>l?1:0}),t}getOperatorAutocompleteEntries(i,e){let t=this.getActiveOperators(i);return this.getDataTypeExpressionOperator(e).getEntries(t)}getJoinOperatorAutocompleteEntries(){return Object.entries(this.expressionJoinOperators).map(([i,e])=>({key:i,displayValue:e}))}getDefaultAutocompleteListParams(i){return this.generateAutocompleteListParams(this.getColumnAutocompleteEntries(),"column",i)}getDataTypeExpressionOperator(i){return this.expressionOperators[i]}getExpressionOperator(i,e){var t,n;return(n=(t=this.getDataTypeExpressionOperator(i))==null?void 0:t.operators)==null?void 0:n[e]}getExpressionJoinOperators(){return this.expressionJoinOperators}getColId(i){let e=i.toLocaleUpperCase(),t=this.columnNameToIdMap[e];if(t)return t;let r=this.getColumnAutocompleteEntries().find(({displayValue:s})=>s.toLocaleUpperCase()===e);if(r){let{key:s,displayValue:o}=r,a={colId:s,columnName:o};return this.columnNameToIdMap[e]=a,a}return null}getExpressionEvaluatorParams(i){let e=this.expressionEvaluatorParams[i];if(e)return e;let t=this.columnModel.getPrimaryColumn(i);if(!t)return{valueConverter:s=>s};switch(this.dataTypeService.getBaseDataType(t)){case"dateString":e={valueConverter:this.dataTypeService.getDateParserFunction(t)};break;case"object":t.getColDef().filterValueGetter?e={valueConverter:s=>s}:e={valueConverter:(s,o)=>{var a;return(a=this.valueService.formatValue(t,o,s))!=null?a:typeof s.toString=="function"?s.toString():""}};break;case"text":case void 0:e={valueConverter:s=>M.toStringOrNull(s)};break;default:e={valueConverter:s=>s};break}let{filterParams:r}=t.getColDef();return r&&["caseSensitive","includeBlanksInEquals","includeBlanksInLessThan","includeBlanksInGreaterThan"].forEach(s=>{let o=r[s];o&&(e[s]=o)}),this.expressionEvaluatorParams[i]=e,e}getColumnDetails(i){var e,t;let n=(e=this.columnModel.getPrimaryColumn(i))!=null?e:void 0,r=(t=n?this.dataTypeService.getBaseDataType(n):void 0)!=null?t:"text";return{column:n,baseCellDataType:r}}generateExpressionOperators(){let i=(e,t)=>this.translate(e,t);return{text:new iF({translate:i}),boolean:new UU({translate:i}),object:new iF({translate:i}),number:new Vx({translate:i,equals:(e,t)=>e===t}),date:new Vx({translate:i,equals:(e,t)=>e.getTime()===t.getTime()}),dateString:new Vx({translate:i,equals:(e,t)=>e.getTime()===t.getTime()})}}getColumnValue({displayValue:i}){return`${Du.COL_START_CHAR}${i}${Du.COL_END_CHAR}`}generateExpressionJoinOperators(){return{AND:this.translate("advancedFilterAnd"),OR:this.translate("advancedFilterOr")}}getActiveOperators(i){var e;let t=(e=i.getColDef().filterParams)==null?void 0:e.filterOptions;return t&&t.every(r=>typeof r=="string")?t:void 0}resetColumnCaches(){this.columnAutocompleteEntries=null,this.columnNameToIdMap={},this.expressionEvaluatorParams={}}};et([k("valueService")],Ou.prototype,"valueService",2);et([k("columnModel")],Ou.prototype,"columnModel",2);et([k("dataTypeService")],Ou.prototype,"dataTypeService",2);et([J],Ou.prototype,"postConstruct",1);Ou=et([De("advancedFilterExpressionService")],Ou);var HU=class{constructor(i){this.params=i,this.operators=[],this.operatorStartPositions=[],this.operatorEndPositions=[],this.activeOperator=0,this.validationError=null}parseExpression(i){this.operators.push(""),this.operatorStartPositions.push(i),this.operatorEndPositions.push(void 0);let{expression:e}=this.params;for(;i<e.length;){let t=e[i];if(t===" "){if(this.parseOperator(i-1))return this.activeOperator++,i-1;this.operators[this.activeOperator]+=t}else this.operators[this.activeOperator]+=t;i++}return this.parseOperator(i-1),i}isValid(){return!this.validationError&&(!this.operators.length||!!this.parsedOperator)}getValidationError(){return this.validationError}getFunction(){return this.parsedOperator==="OR"?"||":"&&"}getModel(){return this.parsedOperator==="OR"?"OR":"AND"}getAutocompleteListParams(i,e){let t;if(e==null)t="";else{let r=this.operators[e],s=this.operatorEndPositions[e];t=Xx(r,i,s==null?this.params.expression.length:s+1)}let n=this.params.advancedFilterExpressionService.getJoinOperatorAutocompleteEntries();return(e||e==null&&this.activeOperator)&&(n=n.filter(({key:r})=>r===this.parsedOperator)),this.params.advancedFilterExpressionService.generateAutocompleteListParams(n,"join",t)}updateExpression(i,e,t){var n,r;let{expression:s}=this.params,o=(n=e.displayValue)!=null?n:e.key;if(t===0)for(let c=this.operatorEndPositions.length-1;c>0;c--){let u=this.operatorEndPositions[c];u!=null&&(s=lc(s,this.operatorStartPositions[c],u,o).updatedValue)}let a=this.operatorStartPositions.length>t?this.operatorStartPositions[t]:i,l=(r=this.operatorEndPositions.length>t?this.operatorEndPositions[t]:void 0)!=null?r:Zx(s,i,!0).endPosition;return lc(s,a,l,o,!0)}getNumOperators(){return this.operators.length}getLastOperatorEndPosition(){return this.operatorEndPositions[this.operatorEndPositions.length-1]}parseOperator(i){let e=this.operators.length>this.activeOperator?this.operators[this.activeOperator]:"",t=this.params.advancedFilterExpressionService.getExpressionJoinOperators(),n=Sy(e,t,r=>r);if(n){this.operatorEndPositions[this.activeOperator]=i;let r=t[n];if(this.activeOperator){if(n!==this.parsedOperator)return this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationJoinOperatorMismatch"),startPosition:i-e.length+1,endPosition:i}),!1}else this.parsedOperator=n;return e!==r&&(E_(this.params,e,r,i),this.operators[this.activeOperator]=r),!0}else return n===null?!1:(this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidJoinOperator"),startPosition:i-e.length+1,endPosition:i}),!0)}},zU=class yO{constructor(e,t){this.params=e,this.startPosition=t,this.expectingExpression=!0,this.expectingOperator=!1,this.expressionParsers=[],this.operatorParser=new HU(this.params),this.missingEndBracket=!1,this.extraEndBracket=!1}parseExpression(){let e=this.startPosition,{expression:t}=this.params;for(;e<t.length;){let n=t[e];if(n==="("&&!this.expectingOperator){let r=new yO(this.params,e+1);e=r.parseExpression(),this.expressionParsers.push(r),this.expectingExpression=!1,this.expectingOperator=!0}else{if(n===")")return this.endPosition=e-1,this.startPosition===0&&(this.extraEndBracket=!0),e;if(n!==" ")if(this.expectingExpression){let r=new Du(this.params,e);e=r.parseExpression(),this.expressionParsers.push(r),this.expectingExpression=!1,this.expectingOperator=!0}else this.expectingOperator&&(e=this.operatorParser.parseExpression(e),this.expectingOperator=!1,this.expectingExpression=!0)}e++}return this.startPosition>0&&(this.missingEndBracket=!0),e}isValid(){return!this.missingEndBracket&&!this.extraEndBracket&&this.expressionParsers.length===this.operatorParser.getNumOperators()+1&&this.operatorParser.isValid()&&this.expressionParsers.every(e=>e.isValid())}getValidationError(){let e=this.operatorParser.getValidationError();for(let n=0;n<this.expressionParsers.length;n++){let r=this.expressionParsers[n].getValidationError();if(r)return e&&e.startPosition<r.startPosition?e:r}if(e)return e;if(this.extraEndBracket)return{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationExtraEndBracket"),startPosition:this.endPosition+1,endPosition:this.endPosition+1};let t;return this.expressionParsers.length===this.operatorParser.getNumOperators()?t="advancedFilterValidationMissingCondition":this.missingEndBracket&&(t="advancedFilterValidationMissingEndBracket"),t?{message:this.params.advancedFilterExpressionService.translate(t),startPosition:this.params.expression.length,endPosition:this.params.expression.length}:null}getFunctionString(e){let t=this.expressionParsers.length>1,n=this.expressionParsers.map(r=>r.getFunctionString(e)).join(` ${this.operatorParser.getFunction()} `);return t?`(${n})`:n}getFunctionParsed(e){let t=this.operatorParser.getFunction(),n=this.expressionParsers.map(s=>s.getFunctionParsed(e)),r=t==="&&"?"every":"some";return(s,o,a)=>n[r](l=>l(s,o,a))}getAutocompleteListParams(e){if(this.endPosition!=null&&e>this.endPosition+1)return;if(!this.expressionParsers.length)return this.getColumnAutocompleteListParams();let t=this.getExpressionParserIndex(e);if(t==null)return this.params.expression[e]==="("?{enabled:!1}:this.getColumnAutocompleteListParams();let r=this.expressionParsers[t].getAutocompleteListParams(e);if(!r){if(t<this.expressionParsers.length-1)return this.operatorParser.getAutocompleteListParams(e,t);if(this.expressionParsers.length===this.operatorParser.getNumOperators()){let s=this.operatorParser.getLastOperatorEndPosition();return s==null||e<=s+1?this.operatorParser.getAutocompleteListParams(e,this.operatorParser.getNumOperators()-1):this.getColumnAutocompleteListParams()}return this.params.expression[e-1]===")"?{enabled:!1}:this.operatorParser.getAutocompleteListParams(e)}return r}updateExpression(e,t,n){var r;let s=this.params.expression,o=this.getExpressionParserIndex(e);if(o==null){let c=n==="column"?this.params.advancedFilterExpressionService.getColumnValue(t):(r=t.displayValue)!=null?r:t.key;return lc(s,this.startPosition,this.startPosition,c,!0)}let l=this.expressionParsers[o].updateExpression(e,t,n);return l??(n==="column"?lc(s,e,s.length-1,this.params.advancedFilterExpressionService.getColumnValue(t),!0):this.endPosition!=null&&e>this.endPosition+1?null:this.operatorParser.updateExpression(e,t,o))}getModel(){return this.expressionParsers.length>1?{filterType:"join",type:this.operatorParser.getModel(),conditions:this.expressionParsers.map(e=>e.getModel())}:this.expressionParsers[0].getModel()}getColumnAutocompleteListParams(){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column","")}getExpressionParserIndex(e){let t;for(let n=0;n<this.expressionParsers.length&&!(this.expressionParsers[n].startPosition>e);n++)t=n;return t}},WU=class{constructor(i){this.params=i,this.valid=!1}parseExpression(){this.joinExpressionParser=new zU(this.params,0);let i=this.joinExpressionParser.parseExpression();return this.valid=i>=this.params.expression.length-1&&this.joinExpressionParser.isValid(),this.params.expression}isValid(){return this.valid}getValidationMessage(){let i=this.joinExpressionParser.getValidationError();if(!i)return null;let{message:e,startPosition:t,endPosition:n}=i;return t<this.params.expression.length?this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessage",[e,this.params.expression.slice(t,n+1).trim()]):this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessageAtEnd",[e])}getFunctionString(){let i=this.createFunctionParams();return{functionString:`return ${this.joinExpressionParser.getFunctionString(i)};`,params:i}}getFunctionParsed(){let i=this.createFunctionParams();return{expressionFunction:this.joinExpressionParser.getFunctionParsed(i),params:i}}getAutocompleteListParams(i){var e;return(e=this.joinExpressionParser.getAutocompleteListParams(i))!=null?e:{enabled:!1}}updateExpression(i,e,t){return this.joinExpressionParser.updateExpression(i,e,t)}getModel(){return this.isValid()?this.joinExpressionParser.getModel():null}createFunctionParams(){return{operands:[],operators:[],evaluatorParams:[]}}},sl=class extends be{constructor(){super(...arguments),this.appliedExpression=null,this.expression=null,this.isValid=!0}postConstruct(){this.setEnabled(this.gos.get("enableAdvancedFilter"),!0),this.ctrl=this.createManagedBean(new vO(this.enabled)),this.expressionProxy={getValue:(i,e)=>{let t=this.columnModel.getPrimaryColumn(i);return t?this.valueService.getValue(t,e,!0):void 0}},this.addManagedPropertyListener("enableAdvancedFilter",i=>this.setEnabled(!!i.currentValue)),this.addManagedListener(this.eventService,X.EVENT_NEW_COLUMNS_LOADED,i=>this.onNewColumnsLoaded(i)),this.addManagedPropertyListener("includeHiddenColumnsInAdvancedFilter",()=>this.updateValidity())}isEnabled(){return this.enabled}isFilterPresent(){return!!this.expressionFunction}doesFilterPass(i){return this.expressionFunction(this.expressionProxy,i,this.expressionParams)}getModel(){var i;let e=this.createExpressionParser(this.appliedExpression);return e?.parseExpression(),(i=e?.getModel())!=null?i:null}setModel(i){let e=(n,r)=>{if(n.filterType==="join"){let s=this.advancedFilterExpressionService.parseJoinOperator(n),o=n.conditions.map(a=>e(a)).filter(a=>M.exists(a)).join(` ${s} `);return r||n.conditions.length<=1?o:`(${o})`}else return this.advancedFilterExpressionService.parseColumnFilterModel(n)},t=i?e(i,!0):null;this.setExpressionDisplayValue(t),this.applyExpression(),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp()}getExpressionDisplayValue(){return this.expression}setExpressionDisplayValue(i){this.expression=i}isCurrentExpressionApplied(){return this.appliedExpression===this.expression}createExpressionParser(i){return i?new WU({expression:i,columnModel:this.columnModel,dataTypeService:this.dataTypeService,valueService:this.valueService,advancedFilterExpressionService:this.advancedFilterExpressionService}):null}getDefaultExpression(i){let e=this.advancedFilterExpressionService.getColumnValue(i)+" ";return{updatedValue:e,updatedPosition:e.length}}isHeaderActive(){return!this.gos.get("advancedFilterParent")}getCtrl(){return this.ctrl}setEnabled(i,e){let t=this.enabled,n=this.rowModel.getType(),r=n==="clientSide"||n==="serverSide";if(i&&!n&&M.warnOnce("Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model."),this.enabled=i&&r,!e&&this.enabled!==t){let s={type:X.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,enabled:this.enabled};this.eventService.dispatchEvent(s)}}applyExpression(){let i=this.createExpressionParser(this.expression);i?.parseExpression(),this.applyExpressionFromParser(i)}applyExpressionFromParser(i){if(this.isValid=!i||i.isValid(),!i||!this.isValid){this.expressionFunction=null,this.expressionParams=null,this.appliedExpression=null;return}let{expressionFunction:e,params:t}=this.getFunction(i);this.expressionFunction=e,this.expressionParams=t,this.appliedExpression=this.expression}getFunction(i){if(this.gos.get("suppressAdvancedFilterEval"))return i.getFunctionParsed();{let{functionString:e,params:t}=i.getFunctionString();return{expressionFunction:new Function("expressionProxy","node","params",e),params:t}}}updateValidity(){this.advancedFilterExpressionService.resetColumnCaches();let i=this.createExpressionParser(this.expression);i?.parseExpression();let t=(!i||i.isValid())!==this.isValid;return this.applyExpressionFromParser(i),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp(),t}onNewColumnsLoaded(i){if(i.source!=="gridInitializing"||!this.dataTypeService.isPendingInference())return;this.ctrl.setInputDisabled(!0);let e=this.addManagedListener(this.eventService,X.EVENT_DATA_TYPES_INFERRED,()=>{e?.(),this.ctrl.setInputDisabled(!1)})}};et([k("valueService")],sl.prototype,"valueService",2);et([k("columnModel")],sl.prototype,"columnModel",2);et([k("dataTypeService")],sl.prototype,"dataTypeService",2);et([k("rowModel")],sl.prototype,"rowModel",2);et([k("advancedFilterExpressionService")],sl.prototype,"advancedFilterExpressionService",2);et([J],sl.prototype,"postConstruct",1);sl=et([De("advancedFilterService")],sl);var $U="31.3.4",CO={version:$U,moduleName:qe.AdvancedFilterModule,beans:[sl,Ou],agStackComponents:[{componentName:"agAdvancedFilter",componentClass:Bs}],dependantModules:[Tn]},M_={};lO(M_,{GridChartsModule:()=>n1,__FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT:()=>tR,agCharts:()=>iR});var bO=Object.defineProperty,KU=Object.defineProperties,jU=Object.getOwnPropertyDescriptor,YU=Object.getOwnPropertyDescriptors,nF=Object.getOwnPropertySymbols,qU=Object.prototype.hasOwnProperty,XU=Object.prototype.propertyIsEnumerable,rF=(i,e,t)=>e in i?bO(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,il=(i,e)=>{for(var t in e||(e={}))qU.call(e,t)&&rF(i,t,e[t]);if(nF)for(var t of nF(e))XU.call(e,t)&&rF(i,t,e[t]);return i},Qx=(i,e)=>KU(i,YU(e)),Ni=(i,e,t,n)=>{for(var r=n>1?void 0:n?jU(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&bO(e,t,r),r},is=class extends be{constructor(){super(...arguments),this.cellRanges=[],this.bodyScrollListener=this.onBodyScroll.bind(this),this.dragging=!1,this.intersectionRange=!1}init(){this.addManagedListener(this.eventService,X.EVENT_NEW_COLUMNS_LOADED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,X.EVENT_COLUMN_VISIBLE,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,X.EVENT_COLUMN_VALUE_CHANGED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,X.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.removeAllCellRanges()),this.addManagedListener(this.eventService,X.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.removeAllCellRanges()),this.addManagedListener(this.eventService,X.EVENT_COLUMN_PIVOT_CHANGED,()=>this.removeAllCellRanges()),this.addManagedListener(this.eventService,X.EVENT_COLUMN_GROUP_OPENED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,X.EVENT_COLUMN_MOVED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,X.EVENT_COLUMN_PINNED,this.refreshLastRangeStart.bind(this)),this.ctrlsService.whenReady(i=>{let e=i.gridBodyCtrl;this.autoScrollService=new gd({scrollContainer:e.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:()=>e.getScrollFeature().getVScrollPosition().top,setVerticalPosition:t=>e.getScrollFeature().setVerticalScrollPosition(t),getHorizontalPosition:()=>e.getScrollFeature().getHScrollPosition().left,setHorizontalPosition:t=>e.getScrollFeature().setHorizontalScrollPosition(t),shouldSkipVerticalScroll:()=>!this.gos.isDomLayout("normal"),shouldSkipHorizontalScroll:()=>!e.getScrollFeature().isHorizontalScrollShowing()})})}onColumnsChanged(){this.refreshLastRangeStart();let i=this.columnModel.getAllDisplayedColumns();this.cellRanges.forEach(t=>{let n=t.columns;t.columns=t.columns.filter(s=>s.isVisible()&&i.indexOf(s)!==-1),!M.areEqual(n,t.columns)&&this.dispatchChangedEvent(!1,!0,t.id)});let e=this.cellRanges.length;this.cellRanges=this.cellRanges.filter(t=>t.columns.length>0),e>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)}refreshLastRangeStart(){let i=M.last(this.cellRanges);i&&this.refreshRangeStart(i)}isContiguousRange(i){let e=i.columns;if(!e.length)return!1;let t=this.columnModel.getAllDisplayedColumns(),n=e.map(r=>t.indexOf(r)).sort((r,s)=>r-s);return M.last(n)-n[0]+1===e.length}getRangeStartRow(i){return i.startRow&&i.endRow?this.rowPositionUtils.before(i.startRow,i.endRow)?i.startRow:i.endRow:{rowIndex:0,rowPinned:this.pinnedRowModel.getPinnedTopRowCount()>0?"top":null}}getRangeEndRow(i){if(i.startRow&&i.endRow)return this.rowPositionUtils.before(i.startRow,i.endRow)?i.endRow:i.startRow;let e=this.pinnedRowModel.getPinnedBottomRowCount();return e>0?{rowIndex:e-1,rowPinned:"bottom"}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}}setRangeToCell(i,e=!1){if(!this.gos.get("enableRangeSelection"))return;let t=this.calculateColumnsBetween(i.column,i.column);if(!t)return;(this.gos.get("suppressMultiRangeSelection")||!e||M.missing(this.cellRanges))&&this.removeAllCellRanges(!0);let r={rowIndex:i.rowIndex,rowPinned:i.rowPinned},s={startRow:r,endRow:r,columns:t,startColumn:i.column};this.cellRanges.push(s),this.setNewestRangeStartCell(i),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}extendLatestRangeToCell(i){if(this.isEmpty()||!this.newestRangeStartCell)return;let e=M.last(this.cellRanges);this.updateRangeEnd(e,i)}updateRangeEnd(i,e,t=!1){let n=e.column,r=this.calculateColumnsBetween(i.startColumn,n);!r||this.isLastCellOfRange(i,e)||(i.columns=r,i.endRow={rowIndex:e.rowIndex,rowPinned:e.rowPinned},t||this.dispatchChangedEvent(!0,!0,i.id))}refreshRangeStart(i){let{startColumn:e,columns:t}=i,n=(l,c)=>{let u=i.columns.filter(d=>d!==l);l?(i.startColumn=l,i.columns=c?[l,...u]:[...u,l]):i.columns=u},{left:r,right:s}=this.getRangeEdgeColumns(i);if(e===t[0]&&e!==r){n(r,!0);return}if(e===M.last(t)&&e===s){n(s,!1);return}}getRangeEdgeColumns(i){let e=this.columnModel.getAllDisplayedColumns(),t=i.columns.map(n=>e.indexOf(n)).filter(n=>n>-1).sort((n,r)=>n-r);return{left:e[t[0]],right:e[M.last(t)]}}extendLatestRangeInDirection(i){if(this.isEmpty()||!this.newestRangeStartCell)return;let e=i.key,t=i.ctrlKey||i.metaKey,n=M.last(this.cellRanges),r=this.newestRangeStartCell,s=n.columns[0],o=M.last(n.columns),a=n.endRow.rowIndex,l=n.endRow.rowPinned,u={column:r.column===s?o:s,rowIndex:a,rowPinned:l},d=this.cellNavigationService.getNextCellToFocus(e,u,t);if(d)return this.setCellRange({rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:d.rowIndex,rowEndPinned:d.rowPinned,columnStart:r.column,columnEnd:d.column}),d}setCellRange(i){this.gos.get("enableRangeSelection")&&(this.removeAllCellRanges(!0),this.addCellRange(i))}setCellRanges(i){M.shallowCompare(this.cellRanges,i)||(this.removeAllCellRanges(!0),i.forEach(e=>{e.columns&&e.startRow&&this.setNewestRangeStartCell({rowIndex:e.startRow.rowIndex,rowPinned:e.startRow.rowPinned,column:e.columns[0]}),this.cellRanges.push(e)}),this.dispatchChangedEvent(!1,!0))}setNewestRangeStartCell(i){this.newestRangeStartCell=i}clearCellRangeCellValues(i){let{cellRanges:e}=i,{cellEventSource:t="rangeService",dispatchWrapperEvents:n,wrapperEventSource:r="deleteKey"}=i;if(n){let s={type:X.EVENT_RANGE_DELETE_START,source:r};this.eventService.dispatchEvent(s)}if(e||(e=this.cellRanges),e.forEach(s=>{this.forEachRowInRange(s,o=>{var a;let l=this.rowPositionUtils.getRowNode(o);if(l)for(let c=0;c<s.columns.length;c++){let u=this.columnModel.getGridColumn(s.columns[c]);if(!u||!u.isCellEditable(l))continue;let d=(a=this.valueService.parseValue(u,l,"",l.getValueFromValueService(u)))!=null?a:null;l.setDataValue(u,d,t)}})}),n){let s={type:X.EVENT_RANGE_DELETE_END,source:r};this.eventService.dispatchEvent(s)}}createCellRangeFromCellRangeParams(i){return this.createPartialCellRangeFromRangeParams(i,!1)}createPartialCellRangeFromRangeParams(i,e){let t,n=!1;if(i.columns)t=i.columns.map(o=>this.columnModel.getColumnWithValidation(o)).filter(o=>o);else{let o=this.columnModel.getColumnWithValidation(i.columnStart),a=this.columnModel.getColumnWithValidation(i.columnEnd);if(!o||!a)return;t=this.calculateColumnsBetween(o,a),t&&t.length&&(n=t[0]!==o)}if(!t||!e&&t.length===0)return;let r=i.rowStartIndex!=null?{rowIndex:i.rowStartIndex,rowPinned:i.rowStartPinned||null}:void 0,s=i.rowEndIndex!=null?{rowIndex:i.rowEndIndex,rowPinned:i.rowEndPinned||null}:void 0;return{startRow:r,endRow:s,columns:t,startColumn:n?M.last(t):t[0]}}addCellRange(i){if(!this.gos.get("enableRangeSelection"))return;let e=this.createCellRangeFromCellRangeParams(i);e&&(e.startRow&&this.setNewestRangeStartCell({rowIndex:e.startRow.rowIndex,rowPinned:e.startRow.rowPinned,column:e.startColumn}),this.cellRanges.push(e),this.dispatchChangedEvent(!1,!0,e.id))}getCellRanges(){return this.cellRanges}isEmpty(){return this.cellRanges.length===0}isMoreThanOneCell(){let i=this.cellRanges.length;if(i===0)return!1;if(i>1)return!0;let e=this.cellRanges[0],t=this.getRangeStartRow(e),n=this.getRangeEndRow(e);return t.rowPinned!==n.rowPinned||t.rowIndex!==n.rowIndex||e.columns.length!==1}areAllRangesAbleToMerge(){let i=new Map;if(this.cellRanges.length<=1)return!0;this.cellRanges.forEach(n=>{this.forEachRowInRange(n,r=>{let s=`${r.rowPinned||"normal"}_${r.rowIndex}`,o=i.get(s),a=n.columns.map(l=>l.getId());if(o){let l=a.filter(c=>o.indexOf(c)===-1);o.push(...l)}else i.set(s,a)})});let t;for(let n of i.values()){let r=n.sort().join();if(t===void 0){t=r;continue}if(t!==r)return!1}return!0}forEachRowInRange(i,e){let t=this.getRangeStartRow(i),n=this.getRangeEndRow(i),r=t;for(;r&&(e(r),!this.rowPositionUtils.sameRow(r,n));)r=this.cellNavigationService.getRowBelow(r)}removeAllCellRanges(i){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,i||this.dispatchChangedEvent(!1,!0))}onBodyScroll(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)}isCellInAnyRange(i){return this.getCellRangeCount(i)>0}isCellInSpecificRange(i,e){let t=e.columns!==null&&M.includes(e.columns,i.column),n=this.isRowInRange(i.rowIndex,i.rowPinned,e);return t&&n}isLastCellOfRange(i,e){let{startRow:t,endRow:n}=i,r=this.rowPositionUtils.before(t,n)?n:t,s=e.rowIndex===r.rowIndex&&e.rowPinned===r.rowPinned,o=i.columns[0],a=M.last(i.columns),l=i.startColumn===o?a:o;return e.column===l&&s}isBottomRightCell(i,e){let t=this.columnModel.getAllDisplayedColumns(),n=i.columns.map(c=>t.indexOf(c)).sort((c,u)=>c-u),{startRow:r,endRow:s}=i,o=this.rowPositionUtils.before(r,s)?s:r,a=t.indexOf(e.column)===M.last(n),l=e.rowIndex===o.rowIndex&&M.makeNull(e.rowPinned)===M.makeNull(o.rowPinned);return a&&l}getCellRangeCount(i){return this.isEmpty()?0:this.cellRanges.filter(e=>this.isCellInSpecificRange(i,e)).length}isRowInRange(i,e,t){let n=this.getRangeStartRow(t),r=this.getRangeEndRow(t),s={rowIndex:i,rowPinned:e||null},o=s.rowIndex===n.rowIndex&&s.rowPinned==n.rowPinned,a=s.rowIndex===r.rowIndex&&s.rowPinned==r.rowPinned;if(o||a)return!0;let l=!this.rowPositionUtils.before(s,n),c=this.rowPositionUtils.before(s,r);return l&&c}getDraggingRange(){return this.draggingRange}onDragStart(i){if(!this.gos.get("enableRangeSelection"))return;let{ctrlKey:e,metaKey:t,shiftKey:n}=i,r=e||t,o=!this.gos.get("suppressMultiRangeSelection")?r:!1,a=n&&M.existsAndNotEmpty(this.cellRanges);!o&&(!a||M.exists(M.last(this.cellRanges).type))&&this.removeAllCellRanges(!0);let l=this.dragService.getStartTarget();if(l&&this.updateValuesOnMove(l),!!this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=i,this.intersectionRange=o&&this.getCellRangeCount(this.lastCellHovered)>1,a||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=M.last(this.cellRanges);else{let c={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:c,endRow:c,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}intersectLastRange(i){if(i&&this.dragging||this.gos.get("suppressMultiRangeSelection")||this.isEmpty())return;let e=this.rowPositionUtils,t=M.last(this.cellRanges),n=this.getRangeStartRow(t),r=this.getRangeEndRow(t),s=[];this.cellRanges.slice(0,-1).forEach(o=>{let a=this.getRangeStartRow(o),l=this.getRangeEndRow(o),c=o.columns,u=c.filter(h=>t.columns.indexOf(h)===-1);if(u.length===c.length){s.push(o);return}if(e.before(r,a)||e.before(l,n)){s.push(o);return}let d=s.length;if(e.before(a,n)){let h={columns:[...c],startColumn:t.startColumn,startRow:il({},a),endRow:this.cellNavigationService.getRowAbove(n)};s.push(h)}if(u.length>0){let h={columns:u,startColumn:M.includes(u,t.startColumn)?t.startColumn:u[0],startRow:this.rowMax([il({},n),il({},a)]),endRow:this.rowMin([il({},r),il({},l)])};s.push(h)}e.before(r,l)&&s.push({columns:[...c],startColumn:t.startColumn,startRow:this.cellNavigationService.getRowBelow(r),endRow:il({},l)}),s.length-d===1&&(s[s.length-1].id=o.id)}),this.cellRanges=s,i&&this.dispatchChangedEvent(!1,!0)}rowMax(i){let e;return i.forEach(t=>{(e===void 0||this.rowPositionUtils.before(e,t))&&(e=t)}),e}rowMin(i){let e;return i.forEach(t=>{(e===void 0||this.rowPositionUtils.before(t,e))&&(e=t)}),e}updateValuesOnMove(i){let e=M.getCtrlForEventTarget(this.gos,i,Vf.DOM_DATA_KEY_CELL_CTRL),t=e?.getCellPosition();this.cellHasChanged=!1,!(!t||this.lastCellHovered&&this.cellPositionUtils.equals(t,this.lastCellHovered))&&(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=t)}onDragging(i){if(!this.dragging||!i)return;this.updateValuesOnMove(i.target),this.lastMouseEvent=i;let e=this.lastCellHovered,t=s=>e&&e.rowPinned===s&&this.newestRangeStartCell.rowPinned===s,n=t("top")||t("bottom");if(this.autoScrollService.check(i,n),!this.cellHasChanged)return;let r=this.calculateColumnsBetween(this.newestRangeStartCell.column,e.column);r&&(this.draggingRange.endRow={rowIndex:e.rowIndex,rowPinned:e.rowPinned},this.draggingRange.columns=r,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}onDragStop(){if(!this.dragging)return;let{id:i}=this.draggingRange;this.autoScrollService.ensureCleared(),this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,i)}dispatchChangedEvent(i,e,t){let n={type:X.EVENT_RANGE_SELECTION_CHANGED,started:i,finished:e,id:t};this.eventService.dispatchEvent(n)}calculateColumnsBetween(i,e){let t=this.columnModel.getAllDisplayedColumns(),n=i===e,r=t.indexOf(i);if(r<0){console.warn(`AG Grid: column ${i.getId()} is not visible`);return}let s=n?r:t.indexOf(e);if(s<0){console.warn(`AG Grid: column ${e.getId()} is not visible`);return}if(n)return[i];let o=Math.min(r,s),a=o===r?s:r,l=[];for(let c=o;c<=a;c++)l.push(t[c]);return l}};Ni([k("rowModel")],is.prototype,"rowModel",2);Ni([k("dragService")],is.prototype,"dragService",2);Ni([k("columnModel")],is.prototype,"columnModel",2);Ni([k("cellNavigationService")],is.prototype,"cellNavigationService",2);Ni([k("pinnedRowModel")],is.prototype,"pinnedRowModel",2);Ni([k("rowPositionUtils")],is.prototype,"rowPositionUtils",2);Ni([k("cellPositionUtils")],is.prototype,"cellPositionUtils",2);Ni([k("ctrlsService")],is.prototype,"ctrlsService",2);Ni([k("valueService")],is.prototype,"valueService",2);Ni([J],is.prototype,"init",1);is=Ni([De("rangeService")],is);var rs=class extends ae{constructor(){super(...arguments),this.changedCalculatedValues=!1,this.dragging=!1,this.shouldDestroyOnEndDragging=!1}init(){this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:i=>{this.dragging=!0,this.rangeService.autoScrollService.check(i),this.changedCalculatedValues&&(this.onDrag(i),this.changedCalculatedValues=!1)},onDragStop:i=>{this.dragging=!1,this.onDragEnd(i),this.clearValues(),this.rangeService.autoScrollService.ensureCleared(),document.body.classList.remove(this.getDraggingCssClass()),this.shouldDestroyOnEndDragging&&this.destroy()}}),this.addManagedListener(this.getGui(),"mousedown",this.preventRangeExtension.bind(this))}isDragging(){return this.dragging}getCellCtrl(){return this.cellCtrl}setCellCtrl(i){this.cellCtrl=i}getCellRange(){return this.cellRange}setCellRange(i){this.cellRange=i}getRangeStartRow(){return this.rangeStartRow}setRangeStartRow(i){this.rangeStartRow=i}getRangeEndRow(){return this.rangeEndRow}setRangeEndRow(i){this.rangeEndRow=i}getLastCellHovered(){return this.lastCellHovered}preventRangeExtension(i){i.stopPropagation()}onDragStart(i){this.cellHoverListener=this.addManagedListener(this.ctrlsService.get("gridCtrl").getGui(),"mousemove",this.updateValuesOnMove.bind(this)),document.body.classList.add(this.getDraggingCssClass())}getDraggingCssClass(){return`ag-dragging-${this.type===ko.FILL?"fill":"range"}-handle`}updateValuesOnMove(i){let e=this.mouseEventService.getCellPositionForEvent(i);!e||this.lastCellHovered&&this.cellPositionUtils.equals(e,this.lastCellHovered)||(this.lastCellHovered=e,this.changedCalculatedValues=!0)}getType(){return this.type}refresh(i){let e=this.getCellCtrl(),t=this.getGui(),n=M.last(this.rangeService.getCellRanges()),r=n.startRow,s=n.endRow;if(r&&s&&(this.rowPositionUtils.before(s,r)?(this.setRangeStartRow(s),this.setRangeEndRow(r)):(this.setRangeStartRow(r),this.setRangeEndRow(s))),e!==i||!M.isVisible(t)){this.setCellCtrl(i);let o=i.getComp().getParentOfValue();o&&o.appendChild(t)}this.setCellRange(n)}clearValues(){this.lastCellHovered=void 0,this.removeListeners()}removeListeners(){this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0)}destroy(){if(!this.shouldDestroyOnEndDragging&&this.isDragging()){M.setDisplayed(this.getGui(),!1),this.shouldDestroyOnEndDragging=!0;return}this.shouldDestroyOnEndDragging=!1,super.destroy(),this.removeListeners();let i=this.getGui();i.parentElement&&i.parentElement.removeChild(i)}};Ni([k("rowRenderer")],rs.prototype,"rowRenderer",2);Ni([k("dragService")],rs.prototype,"dragService",2);Ni([k("rangeService")],rs.prototype,"rangeService",2);Ni([k("mouseEventService")],rs.prototype,"mouseEventService",2);Ni([k("columnModel")],rs.prototype,"columnModel",2);Ni([k("cellNavigationService")],rs.prototype,"cellNavigationService",2);Ni([k("navigationService")],rs.prototype,"navigationService",2);Ni([k("rowPositionUtils")],rs.prototype,"rowPositionUtils",2);Ni([k("cellPositionUtils")],rs.prototype,"cellPositionUtils",2);Ni([k("ctrlsService")],rs.prototype,"ctrlsService",2);Ni([J],rs.prototype,"init",1);function ZU(i){let e=i.length,t=0;if(e<=1)return i;for(let d=0;d<i.length;d++){let h=i[d],p=h.toString().split("e-");if(p.length>1){t=Math.max(t,parseInt(p[1],10));continue}Math.floor(h)!==h&&(t=Math.max(t,h.toString().split(".")[1].length))}let n=0,r=0,s=0,o=0,a=0;for(let d=0;d<e;d++)a=i[d],n+=d,r+=a,o+=d*d,s+=d*a;let l=(e*s-n*r)/(e*o-n*n),c=r/e-l*n/e,u=[];for(let d=0;d<=e;d++)u.push(parseFloat((d*l+c).toFixed(t)));return u}var SO=(()=>{let i=class xO extends rs{constructor(){super(xO.TEMPLATE),this.markedCells=[],this.cellValues=[],this.isUp=!1,this.isLeft=!1,this.isReduce=!1,this.type=ko.FILL}updateValuesOnMove(t){super.updateValuesOnMove(t),this.initialXY||(this.initialXY=this.mouseEventService.getNormalisedPosition(t));let{x:n,y:r}=this.initialXY,{x:s,y:o}=this.mouseEventService.getNormalisedPosition(t),a=Math.abs(n-s),l=Math.abs(r-o),c=this.getFillHandleDirection(),u;c==="xy"?u=a>l?"x":"y":u=c,u!==this.dragAxis&&(this.dragAxis=u,this.changedCalculatedValues=!0)}onDrag(t){if(!this.initialPosition){let r=this.getCellCtrl();if(!r)return;this.initialPosition=r.getCellPosition()}let n=this.getLastCellHovered();n&&this.markPathFrom(this.initialPosition,n)}onDragEnd(t){if(this.initialXY=null,!this.markedCells.length)return;let n=this.dragAxis==="x",r=this.getCellRange(),s=r.columns.length,o=this.getRangeStartRow(),a=this.getRangeEndRow(),l;if(!this.isUp&&!this.isLeft)l=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,columnStart:r.columns[0],rowEndIndex:n?a.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:n?a.rowPinned:this.lastCellMarked.rowPinned,columnEnd:n?this.lastCellMarked.column:r.columns[s-1]});else{let c=n?o:this.lastCellMarked;l=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:c.rowIndex,rowStartPinned:c.rowPinned,columnStart:n?this.lastCellMarked.column:r.columns[0],rowEndIndex:a.rowIndex,rowEndPinned:a.rowPinned,columnEnd:r.columns[s-1]})}l&&(this.raiseFillStartEvent(),this.handleValueChanged(r,l,t),this.rangeService.setCellRanges([l]),this.raiseFillEndEvent(r,l))}getFillHandleDirection(){let t=this.gos.get("fillHandleDirection");return t?t!=="x"&&t!=="y"&&t!=="xy"?(M.warnOnce("valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'."),"xy"):t:"xy"}raiseFillStartEvent(){let t={type:X.EVENT_FILL_START};this.eventService.dispatchEvent(t)}raiseFillEndEvent(t,n){let r={type:X.EVENT_FILL_END,initialRange:t,finalRange:n};this.eventService.dispatchEvent(r)}handleValueChanged(t,n,r){let s=this.rangeService.getRangeEndRow(t),o=this.rangeService.getRangeStartRow(t),a=this.rangeService.getRangeEndRow(n),l=this.rangeService.getRangeStartRow(n),c=this.dragAxis==="y";if(this.isReduce&&!this.gos.get("suppressClearOnFillReduction")){let v=c?t.columns:t.columns.filter(w=>n.columns.indexOf(w)<0),S=c?this.cellNavigationService.getRowBelow(a):l;S&&this.clearCellsInRange(S,s,v);return}let u=[],d=[],h=[],p=[],m=!0,g=0,f=()=>{u.length=0,d.length=0,h.length=0,p.length=0,g=0},y=(v,S)=>{let w=this.isUp?s:o,T=!1;for(c&&(m=!0,f());!T&&w;){let D=this.rowPositionUtils.getRowNode(w);if(!D)break;c&&v?b(u,v,D,()=>!this.rowPositionUtils.sameRow(w,this.isUp?o:s)):S&&(m=!0,f(),S.forEach(O=>b(u,O,D,()=>O!==(this.isLeft?t.columns[0]:M.last(t.columns))))),T=this.rowPositionUtils.sameRow(w,this.isUp?l:a),w=this.isUp?this.cellNavigationService.getRowAbove(w):this.cellNavigationService.getRowBelow(w)}},b=(v,S,w,T)=>{var D,O;let R,L=!1;if(m)R=this.valueService.getValue(S,w),d.push(R),h.push(this.valueService.getValue(S,w,void 0,!0)),p.push(this.valueService.formatValue(S,w,R)),m=T();else{let{value:B,fromUserFunction:$,sourceCol:U,sourceRowNode:K}=this.processValues({event:r,values:v,initialValues:d,initialNonAggregatedValues:h,initialFormattedValues:p,col:S,rowNode:w,idx:g++});if(R=B,S.isCellEditable(w)){let ie=this.valueService.getValue(S,w);$||(U&&((D=U.getColDef())==null?void 0:D.useValueFormatterForExport)!==!1&&(R=(O=this.valueService.formatValue(U,K,R))!=null?O:R),S.getColDef().useValueParserForImport!==!1&&(R=this.valueService.parseValue(S,w,U?R:M.toStringOrNull(R),ie))),!$||ie!==R?w.setDataValue(S,R,"rangeService"):L=!0}}L||v.push({value:R,column:S,rowNode:w})};if(c)t.columns.forEach(v=>{y(v)});else{let v=this.isLeft?[...n.columns].reverse():n.columns;y(void 0,v)}}clearCellsInRange(t,n,r){let s={startRow:t,endRow:n,columns:r,startColumn:r[0]};this.rangeService.clearCellRangeCellValues({cellRanges:[s]})}processValues(t){let{event:n,values:r,initialValues:s,initialNonAggregatedValues:o,initialFormattedValues:a,col:l,rowNode:c,idx:u}=t,d=this.gos.getCallback("fillOperation"),h=this.dragAxis==="y",p;if(h?p=this.isUp?"up":"down":p=this.isLeft?"left":"right",d){let g={event:n,values:r.map(({value:y})=>y),initialValues:s,initialNonAggregatedValues:o,initialFormattedValues:a,currentIndex:u,currentCellValue:this.valueService.getValue(l,c),direction:p,column:l,rowNode:c},f=d(g);if(f!==!1)return{value:f,fromUserFunction:!0}}let m=!r.some(({value:g})=>{let f=parseFloat(g);return isNaN(f)||f.toString()!==g.toString()});if(n.altKey||!m){if(m&&s.length===1){let b=this.isUp||this.isLeft?-1:1;return{value:parseFloat(M.last(r).value)+1*b,fromUserFunction:!1}}let{value:g,column:f,rowNode:y}=r[u%r.length];return{value:g,fromUserFunction:!1,sourceCol:f,sourceRowNode:y}}return{value:M.last(ZU(r.map(({value:g})=>Number(g)))),fromUserFunction:!1}}clearValues(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,super.clearValues()}clearMarkedPath(){this.markedCells.forEach(t=>{if(!t.isAlive())return;let n=t.getComp();n.addOrRemoveCssClass("ag-selection-fill-top",!1),n.addOrRemoveCssClass("ag-selection-fill-right",!1),n.addOrRemoveCssClass("ag-selection-fill-bottom",!1),n.addOrRemoveCssClass("ag-selection-fill-left",!1)}),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1}clearCellValues(){this.cellValues.length=0}markPathFrom(t,n){if(this.clearMarkedPath(),this.clearCellValues(),this.dragAxis==="y"){if(this.rowPositionUtils.sameRow(n,t))return;let r=this.rowPositionUtils.before(n,t),s=this.getRangeStartRow(),o=this.getRangeEndRow();r&&(n.rowPinned==s.rowPinned&&n.rowIndex>=s.rowIndex||s.rowPinned!=o.rowPinned&&n.rowPinned==o.rowPinned&&n.rowIndex<=o.rowIndex)?(this.reduceVertical(t,n),this.isReduce=!0):(this.extendVertical(t,n,r),this.isReduce=!1)}else{let r=t.column,s=n.column;if(r===s)return;let o=this.columnModel.getAllDisplayedColumns(),a=o.indexOf(r),l=o.indexOf(s);l<=a&&l>=o.indexOf(this.getCellRange().columns[0])?(this.reduceHorizontal(t,n),this.isReduce=!0):(this.extendHorizontal(t,n,l<a),this.isReduce=!1)}this.lastCellMarked=n}extendVertical(t,n,r){let{navigationService:s,rangeService:o}=this,a=t;do{let l=this.getCellRange(),c=l.columns.length;for(let u=0;u<c;u++){let d=l.columns[u],h={rowIndex:a.rowIndex,rowPinned:a.rowPinned},p=Qx(il({},h),{column:d}),m=o.isCellInSpecificRange(p,l),g=this.rowPositionUtils.sameRow(a,t);if(r&&(this.isUp=!0),!g){let f=s.getCellByPosition(p);if(f){this.markedCells.push(f);let y=f.getComp();m||(y.addOrRemoveCssClass("ag-selection-fill-left",u===0),y.addOrRemoveCssClass("ag-selection-fill-right",u===c-1)),y.addOrRemoveCssClass(r?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(a,n))}}}if(this.rowPositionUtils.sameRow(a,n))break}while(a=r?this.cellNavigationService.getRowAbove(a):this.cellNavigationService.getRowBelow(a))}reduceVertical(t,n){let r=t;do{let s=this.getCellRange(),o=s.columns.length,a=this.rowPositionUtils.sameRow(r,n);for(let l=0;l<o;l++){let c={rowIndex:r.rowIndex,rowPinned:r.rowPinned},u=Qx(il({},c),{column:s.columns[l]}),d=this.navigationService.getCellByPosition(u);d&&(this.markedCells.push(d),d.getComp().addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(r,n)))}if(a)break}while(r=this.cellNavigationService.getRowAbove(r))}extendHorizontal(t,n,r){let s=this.columnModel.getAllDisplayedColumns(),o=s.indexOf(r?n.column:t.column),a=s.indexOf(r?this.getCellRange().columns[0]:n.column),l=r?0:1,c=s.slice(o+l,a+l),u=this.getRangeStartRow(),d=this.getRangeEndRow();c.forEach(h=>{let p=u,m=!1;do{m=this.rowPositionUtils.sameRow(p,d);let g=this.navigationService.getCellByPosition({rowIndex:p.rowIndex,rowPinned:p.rowPinned,column:h});if(g){this.markedCells.push(g);let f=g.getComp();f.addOrRemoveCssClass("ag-selection-fill-top",this.rowPositionUtils.sameRow(p,u)),f.addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(p,d)),r?(this.isLeft=!0,f.addOrRemoveCssClass("ag-selection-fill-left",h===c[0])):f.addOrRemoveCssClass("ag-selection-fill-right",h===M.last(c))}p=this.cellNavigationService.getRowBelow(p)}while(!m)})}reduceHorizontal(t,n){let r=this.columnModel.getAllDisplayedColumns(),s=r.indexOf(n.column),o=r.indexOf(t.column),a=r.slice(s,o),l=this.getRangeStartRow(),c=this.getRangeEndRow();a.forEach(u=>{let d=l,h=!1;do{h=this.rowPositionUtils.sameRow(d,c);let p=this.navigationService.getCellByPosition({rowIndex:d.rowIndex,rowPinned:d.rowPinned,column:u});p&&(this.markedCells.push(p),p.getComp().addOrRemoveCssClass("ag-selection-fill-right",u===a[0])),d=this.cellNavigationService.getRowBelow(d)}while(!h)})}refresh(t){let n=this.rangeService.getCellRanges()[0];if(!n.startRow||!n.endRow){this.destroy();return}super.refresh(t)}};return i.TEMPLATE='<div class="ag-fill-handle"></div>',i})();Ni([k("valueService")],SO.prototype,"valueService",2);var _O=SO,QU=(()=>{let i=class wO extends rs{constructor(){super(wO.TEMPLATE),this.type=ko.RANGE,this.rangeFixed=!1}onDrag(t){let n=this.getLastCellHovered();if(!n)return;let r=this.rangeService.getCellRanges(),s=M.last(r);this.rangeFixed||(this.fixRangeStartEnd(s),this.rangeFixed=!0),this.endPosition={rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:n.column},r.length===2&&r[0].type===Xs.DIMENSION&&s.type===Xs.VALUE&&!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(s))&&this.rangeService.updateRangeEnd(r[0],Qx(il({},this.endPosition),{column:r[0].columns[0]}),!0),this.rangeService.extendLatestRangeToCell(this.endPosition)}onDragEnd(t){let n=M.last(this.rangeService.getCellRanges());this.fixRangeStartEnd(n),this.rangeFixed=!1}fixRangeStartEnd(t){let n=this.rangeService.getRangeStartRow(t),r=this.rangeService.getRangeEndRow(t),s=t.columns[0];t.startRow=n,t.endRow=r,t.startColumn=s}};return i.TEMPLATE='<div class="ag-range-handle"></div>',i})(),EO=QU,Jx=class extends be{createSelectionHandle(i){return this.createBean(i===ko.RANGE?new EO:new _O)}};Jx=Ni([De("selectionHandleFactory")],Jx);var JU="31.3.4",A_={version:JU,moduleName:qe.RangeSelectionModule,beans:[is,Jx],agStackComponents:[{componentName:"AgFillHandle",componentClass:_O},{componentName:"AgRangeHandle",componentClass:EO}],dependantModules:[Tn]};cO(M_,Rx);var TO=Object.defineProperty,eH=Object.defineProperties,tH=Object.getOwnPropertyDescriptor,iH=Object.getOwnPropertyDescriptors,sy=Object.getOwnPropertySymbols,MO=Object.prototype.hasOwnProperty,AO=Object.prototype.propertyIsEnumerable,sF=(i,e,t)=>e in i?TO(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ze=(i,e)=>{for(var t in e||(e={}))MO.call(e,t)&&sF(i,t,e[t]);if(sy)for(var t of sy(e))AO.call(e,t)&&sF(i,t,e[t]);return i},bt=(i,e)=>eH(i,iH(e)),cc=(i,e)=>{var t={};for(var n in i)MO.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&sy)for(var n of sy(i))e.indexOf(n)<0&&AO.call(i,n)&&(t[n]=i[n]);return t},oe=(i,e,t,n)=>{for(var r=n>1?void 0:n?tH(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&TO(e,t,r),r},Hu=class PO extends be{getData(e){if(e.crossFiltering){if(e.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gos.isRowModelType("clientSide"))return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}this.gos.isRowModelType("serverSide")&&e.pivoting&&this.updatePivotKeysForSSRM();let n=this.extractRowsFromGridRowModel(e);return n.chartData=this.aggregateRowsByDimension(e,n.chartData),n}extractRowsFromGridRowModel(e){let{crossFiltering:t,startRow:n,endRow:r,valueCols:s,dimensionCols:o,grouping:a}=e,l=[],c={},u={},d={},h={},p=[],m;if(t)h=this.getFilteredRowNodes(),p=this.getAllRowNodes(),m=p.length;else{let y=this.gridRowModel.getRowCount()-1;n===r&&n===0&&o.length===0&&s.length===0?m=0:m=(r>=0?Math.min(r,y):y)-n+1}m>0&&s.forEach(y=>{let b=[],v=y.getColDef().pivotKeys;v&&(b=v.slice());let S=y.getColDef().headerName;S&&b.push(S),b.length>0&&(c[y.getId()]=b)});let g=0;for(let y=0;y<m;y++){let b=t?p[y]:this.gridRowModel.getRow(y+n);if(b.footer){g++;continue}let v={};o.forEach(S=>{let w=S.colId,T=this.columnModel.getGridColumn(w);if(T){let D=this.valueService.getValue(T,b);if(a){let O=D&&D.toString?String(D.toString()):"",R=PO.getGroupLabels(b,O);v[w]={labels:R,toString:function(){return this.labels.filter(B=>!!B).reverse().join(" - ")}},b.group&&(u[R.toString()]=y-g);let L=R.slice(1,R.length).toString();L&&(d[L]=u[L])}else v[w]=D}else v[ol.DEFAULT_CATEGORY]=y+1}),s.forEach(S=>{let w=S.getColId();if(t){let T=w+"-filtered-out",D=this.valueService.getValue(S,b),O=D!=null&&typeof D.toNumber=="function"?D.toNumber():D;h[b.id]?(v[w]=O,v[T]=e.aggFunc||e.isScatter?void 0:0):(v[w]=e.aggFunc||e.isScatter?void 0:0,v[T]=O)}else{let T=this.valueService.getValue(S,b);T&&T.hasOwnProperty("toString")&&(T=parseFloat(T.toString())),v[w]=T!=null&&typeof T.toNumber=="function"?T.toNumber():T}}),l.push(v)}let f;if(a){let y=M.values(d),b=l;l=[],f=[];for(let v=0;v<b.length;v++)(M.includes(y,v)?f:l).push(b[v])}return{chartData:l,columnNames:c,groupChartData:f}}aggregateRowsByDimension(e,t){let n=e.dimensionCols;if(!e.aggFunc||n.length===0)return t;let r=M.last(n),s=r&&r.colId,o={},a=[];if(t.forEach(l=>{let c=o;n.forEach(u=>{let d=u.colId,h=l[d];if(d===s){let p=c[h];p||(p={__children:[]},n.forEach(m=>{let g=m.colId;p[g]=l[g]}),c[h]=p,a.push(p)),p.__children.push(l)}else c[h]||(c[h]={}),c=c[h]})}),jt.__assertRegistered(qe.RowGroupingModule,"Charting Aggregation",this.context.getGridId())){let l=this.aggregationStage;a.forEach(c=>e.valueCols.forEach(u=>{if(e.crossFiltering)e.valueCols.forEach(d=>{let h=d.getColId(),p=c.__children.filter(b=>typeof b[h]<"u").map(b=>b[h]),m=l.aggregateValues(p,e.aggFunc);c[d.getId()]=m&&typeof m.value<"u"?m.value:m;let g=`${h}-filtered-out`,f=c.__children.filter(b=>typeof b[g]<"u").map(b=>b[g]),y=l.aggregateValues(f,e.aggFunc);c[g]=y&&typeof y.value<"u"?y.value:y});else{let d=c.__children.map(p=>p[u.getId()]),h=l.aggregateValues(d,e.aggFunc);c[u.getId()]=h&&typeof h.value<"u"?h.value:h}}))}return a}updatePivotKeysForSSRM(){let e=this.columnModel.getSecondaryColumns();if(!e)return;let t=this.extractPivotKeySeparator(e);e.forEach(n=>{if(t==="")n.getColDef().pivotKeys=[];else{let r=n.getColId().split(t);n.getColDef().pivotKeys=r.slice(0,r.length-1)}})}extractPivotKeySeparator(e){if(e.length===0)return"";let t=(r,s)=>{let o=r.getGroupId();return r.getParent()?t(r.getParent(),o):s.split(o)[1][0]},n=e[0];return n.getParent()==null?"":t(n.getParent(),n.getColId())}static getGroupLabels(e,t){let n=[t];for(;e&&e.level!==0;)e=e.parent,e&&n.push(e.key);return n}getFilteredRowNodes(){let e={};return this.gridRowModel.forEachNodeAfterFilterAndSort(t=>{e[t.id]=t}),e}getAllRowNodes(){let e=[];return this.gridRowModel.forEachNode(t=>{e.push(t)}),this.sortRowNodes(e)}sortRowNodes(e){let t=this.sortController.getSortOptions();return!t||t.length==0?e:this.rowNodeSorter.doFullSort(e,t)}};oe([k("rowModel")],Hu.prototype,"gridRowModel",2);oe([k("valueService")],Hu.prototype,"valueService",2);oe([k("columnModel")],Hu.prototype,"columnModel",2);oe([k("rowNodeSorter")],Hu.prototype,"rowNodeSorter",2);oe([k("sortController")],Hu.prototype,"sortController",2);oe([ji("aggregationStage")],Hu.prototype,"aggregationStage",2);var nH=Hu,Lu=class extends be{constructor(){super(...arguments),this.valueColsWithoutSeriesType=new Set}postConstruct(){let i=()=>this.valueColsWithoutSeriesType.clear();this.addManagedListener(this.eventService,X.EVENT_NEW_COLUMNS_LOADED,i),this.addManagedListener(this.eventService,X.EVENT_ROW_DATA_UPDATED,i)}getColumn(i){return this.columnModel.getPrimaryColumn(i)}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getColDisplayName(i){return this.columnModel.getDisplayNameForColumn(i,"chart")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}getGroupDisplayColumns(){return this.columnModel.getGroupDisplayColumns()}isPivotMode(){return this.columnModel.isPivotMode()}isPivotActive(){return this.columnModel.isPivotActive()}getChartColumns(){let i=this.columnModel.getAllGridColumns(),e=new Set,t=new Set;return i.forEach(n=>{let r=n.getColDef(),s=r.chartDataType;if(s)switch(s){case"category":case"time":e.add(n);return;case"series":t.add(n);return;case"excluded":return;default:console.warn(`AG Grid: unexpected chartDataType value '${s}' supplied, instead use 'category', 'series' or 'excluded'`);break}if(r.colId==="ag-Grid-AutoColumn"){e.add(n);return}if(!n.isPrimary()){t.add(n);return}(this.isInferredValueCol(n)?t:e).add(n)}),{dimensionCols:e,valueCols:t}}isInferredValueCol(i){let e=i.getColId();if(e==="ag-Grid-AutoColumn")return!1;let t=this.rowPositionUtils.getRowNode({rowIndex:0,rowPinned:null});if(!t)return this.valueColsWithoutSeriesType.has(e);let n=this.valueService.getValue(i,t);n==null&&(n=this.extractLeafData(t,i)),n!=null&&typeof n.toNumber=="function"&&(n=n.toNumber());let r=typeof n=="number";return r&&this.valueColsWithoutSeriesType.add(e),r}extractLeafData(i,e){if(!i.allLeafChildren)return null;for(let t=0;t<i.allLeafChildren.length;t++){let n=i.allLeafChildren[t],r=this.valueService.getValue(e,n);if(r!=null)return r}return null}destroy(){this.valueColsWithoutSeriesType.clear(),super.destroy()}};oe([k("columnModel")],Lu.prototype,"columnModel",2);oe([k("valueService")],Lu.prototype,"valueService",2);oe([k("rowPositionUtils")],Lu.prototype,"rowPositionUtils",2);oe([J],Lu.prototype,"postConstruct",1);Lu=oe([De("chartColumnService")],Lu);var DO=(()=>{let i=class kO extends be{constructor(t){var n;super(),this.suppressComboChartWarnings=!1,this.chartDataModel=t,this.seriesChartTypes=(n=t.params.seriesChartTypes)!=null?n:[]}init(){this.initComboCharts()}update(t){this.seriesChartTypes=t??this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()}initComboCharts(){let t=this.seriesChartTypes&&this.seriesChartTypes.length>0;(this.chartDataModel.chartType==="customCombo"||t)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])}updateSeriesChartTypes(){if(this.chartDataModel.isComboChart()){if(this.seriesChartTypes=this.seriesChartTypes.map(t=>{let n=["groupedColumn","stackedColumn","stackedArea"].includes(t.chartType);return t.secondaryAxis=n?!1:t.secondaryAxis,t}),this.chartDataModel.chartType==="customCombo"){this.updateSeriesChartTypesForCustomCombo();return}this.updateChartSeriesTypesForBuiltInCombos()}}updateSeriesChartTypesForCustomCombo(){!(this.seriesChartTypes&&this.seriesChartTypes.length>0)&&!this.suppressComboChartWarnings&&console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map(s=>(kO.SUPPORTED_COMBO_CHART_TYPES.includes(s.chartType)||(console.warn(`AG Grid: invalid chartType '${s.chartType}' supplied in 'seriesChartTypes', converting to 'line' instead.`),s.chartType="line"),s));let n=s=>{(!this.savedCustomSeriesChartTypes||this.savedCustomSeriesChartTypes.length===0)&&(this.savedCustomSeriesChartTypes=this.seriesChartTypes);let o=this.savedCustomSeriesChartTypes.find(a=>a.colId===s.colId);return o||(s.selected&&!this.suppressComboChartWarnings&&console.warn(`AG Grid: no 'seriesChartType' found for colId = '${s.colId}', defaulting to 'line'.`),{colId:s.colId,chartType:"line",secondaryAxis:!1})},r=this.chartDataModel.valueColState.map(n);this.seriesChartTypes=r,this.savedCustomSeriesChartTypes=r,this.suppressComboChartWarnings=!0}updateChartSeriesTypesForBuiltInCombos(){let{chartType:t,valueColState:n}=this.chartDataModel,r=t==="columnLineCombo"?"groupedColumn":"stackedArea",s=t==="columnLineCombo"?"line":"groupedColumn",o=n.filter(l=>l.selected),a=Math.ceil(o.length/2);this.seriesChartTypes=o.map((l,c)=>{let u=c>=a?s:r;return{colId:l.colId,chartType:u,secondaryAxis:!1}})}};return i.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],i})();oe([J],DO.prototype,"init",1);var rH=DO,IO={area:{isCartesian:!0,canInvert:!0},bar:{isCartesian:!0,canInvert:!0},histogram:{isCartesian:!0},line:{isCartesian:!0,canInvert:!0},pie:{isPie:!0},donut:{isPie:!0,canInvert:!0},scatter:{isCartesian:!0},bubble:{isCartesian:!0},"radial-column":{isPolar:!0,isEnterprise:!0,isRadial:!0,canInvert:!0},"radial-bar":{isPolar:!0,isEnterprise:!0,isRadial:!0,canInvert:!0},"radar-line":{isPolar:!0,isEnterprise:!0,canInvert:!0},"radar-area":{isPolar:!0,isEnterprise:!0,canInvert:!0},nightingale:{isPolar:!0,isEnterprise:!0,canInvert:!0},"range-bar":{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0},"range-area":{isCartesian:!0,isEnterprise:!0},"box-plot":{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0},treemap:{isEnterprise:!0,isHierarchical:!0},sunburst:{isEnterprise:!0,isHierarchical:!0},heatmap:{isCartesian:!0,isEnterprise:!0},waterfall:{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0}};function sH(i){return!!IO[i]}function FO(i){return $c.COMBO_CHART_TYPES.includes(i)}function bc(i,e){var t;return!!((t=IO[i])!=null&&t[e])}function oH(i){return bc(Ai(i),"isEnterprise")}var aH=new Set(["stackedColumn","normalizedColumn","stackedBar","normalizedBar"]);function lH(i){return aH.has(i)}function ku(i){return bc(i,"isCartesian")}function oF(i){return bc(i,"isPolar")}function cH(i){return bc(i,"isRadial")}function Iu(i){return bc(i,"isHierarchical")}function ag(i){return i==="doughnut"?"donut":i}function OO(i){return $c.CHART_TYPE_TO_SERIES_TYPE[i]}function Ai(i){var e;return(e=OO(i))!=null?e:"line"}function LO(i){return bc(i,"isPie")}function uH(i){return i==="pie"||i==="waterfall"||i==="histogram"}function e_(i){return Iu(Ai(i))?void 0:1}function oy(i){return Iu(Ai(i))?2:uH(i)?1:void 0}function RO(i){return bc(Ai(i),"canInvert")}function dH(i){return bc(Ai(i),"canSwitchDirection")}var xy=(()=>{let i=class t_ extends be{constructor(t){super(),this.unlinked=!1,this.chartData=[],this.valueColState=[],this.dimensionColState=[],this.columnNames={},this.crossFiltering=!1,this.grouping=!1,this.params=t,this.chartId=t.chartId,this.setParams(t)}setParams(t){let{chartType:n,pivotChart:r,chartThemeName:s,switchCategorySeries:o,aggFunc:a,cellRange:l,suppressChartRanges:c,unlinkChart:u,crossFiltering:d,seriesGroupType:h}=t;this.chartType=n,this.pivotChart=r??!1,this.chartThemeName=s,this.switchCategorySeries=!!o,this.aggFunc=a,this.referenceCellRange=l,this.suppliedCellRange=l,this.suppressChartRanges=c??!1,this.unlinked=!!u,this.crossFiltering=!!d,this.seriesGroupType=h}init(){this.datasource=this.createManagedBean(new nH),this.chartColumnService=this.createManagedBean(new Lu),this.comboChartModel=this.createManagedBean(new rH(this)),this.updateCellRanges({setColsFromRange:!0}),this.updateData()}updateModel(t){let{cellRange:n,seriesChartTypes:r}=t;n!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.setParams(t),this.updateSelectedDimensions(n?.columns),this.updateCellRanges({setColsFromRange:!0}),(this.isComboChart()||r)&&this.comboChartModel.update(r),this.unlinked||this.updateData()}updateCellRanges(t){let{updatedColState:n,resetOrder:r,maintainColState:s,setColsFromRange:o}=t??{};this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);let{dimensionCols:a,valueCols:l}=this.chartColumnService.getChartColumns(),c=this.getAllColumnsFromRanges();n&&this.updateColumnState(n,r),this.setDimensionCellRange(a,c,n),this.setValueCellRange(l,c,o),!n&&!s&&(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()}updateData(){let{startRow:t,endRow:n}=this.getRowIndexes();this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();let r={aggFunc:this.aggFunc,dimensionCols:this.getSelectedDimensions(),grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:t,endRow:n,isScatter:M.includes(["scatter","bubble"],this.chartType)},{chartData:s,columnNames:o,groupChartData:a}=this.datasource.getData(r);this.chartData=s,this.groupChartData=a,this.columnNames=o,this.categoryAxisType=void 0}isGrouping(){let t=this.gos.get("treeData"),n=t?null:this.chartColumnService.getRowGroupColumns(),r=t||n&&n.length>0,s=this.getSelectedDimensions().map(({colId:l})=>l),a=this.chartColumnService.getGroupDisplayColumns().map(l=>l.getColId()).some(l=>s.includes(l));return!!r&&a}getSelectedValueCols(){return this.valueColState.filter(t=>t.selected).map(t=>t.column)}getSelectedDimensions(){return this.dimensionColState.filter(t=>t.selected)}getColDisplayName(t){return this.chartColumnService.getColDisplayName(t)}isPivotMode(){return this.chartColumnService.isPivotMode()}getChartDataType(t){let n=this.chartColumnService.getColumn(t);return n?n.getColDef().chartDataType:void 0}isPivotActive(){return this.chartColumnService.isPivotActive()}createCellRange(t,...n){return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:n,startColumn:t===Xs.DIMENSION||this.referenceCellRange.startColumn==null?n[0]:this.referenceCellRange.startColumn,type:t}}getAllColumnsFromRanges(){if(this.pivotChart)return M.convertToSet(this.chartColumnService.getAllDisplayedColumns());let t=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&t.push(...this.dimensionCellRange.columns),this.valueCellRange&&t.push(...this.valueCellRange.columns),M.convertToSet(t)}getRowIndexes(){let t=0,n=0,{rangeService:r,valueCellRange:s,dimensionCellRange:o}=this,a=s||o;if(r&&a){t=r.getRangeStartRow(a).rowIndex;let l=r.getRangeEndRow(a);n=l.rowPinned==="bottom"?-1:l.rowIndex}return{startRow:t,endRow:n}}resetColumnState(){let{dimensionCols:t,valueCols:n}=this.chartColumnService.getChartColumns(),r=this.getAllColumnsFromRanges(),s=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];let o=Iu(Ai(this.chartType)),a=!1,l=1,c=this.suppliedCellRange.columns[0];t.forEach(h=>{let p=h.getColId()==="ag-Grid-AutoColumn",m=!1;this.crossFiltering&&this.aggFunc?c.getColId()===h.getColId()&&(m=!0):m=p?!0:(!a||o)&&r.has(h),this.dimensionColState.push({column:h,colId:h.getColId(),displayName:this.getColDisplayName(h),selected:m,order:l++}),m&&(a=!0)});let u={colId:t_.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!a,order:0};this.dimensionColState.unshift(u);let d=this.referenceCellRange.columns.filter(h=>n.has(h));n.forEach(h=>{s&&M.includes(this.referenceCellRange.columns,h)&&(h=d.shift()),this.valueColState.push({column:h,colId:h.getColId(),displayName:this.getColDisplayName(h),selected:r.has(h),order:l++})})}updateColumnState(t,n){let r=d=>d.colId===t.colId,{dimensionColState:s,valueColState:o}=this,a=s.find(r),l=o.find(r);if(a)if(Iu(Ai(this.chartType)))a.selected=t.selected;else{let h=t.selected?a:s.filter(p=>p!==a).find(({selected:p})=>p);s.forEach(p=>p.selected=p===h)}else l&&(l.selected=t.selected);let c=[...s,...o],u=[];n||(c.forEach((d,h)=>{h===t.order&&u.push(t.colId),d.colId!==t.colId&&u.push(d.colId)}),c.forEach(d=>{let h=u.indexOf(d.colId);d.order=h>=0?u.indexOf(d.colId):c.length-1})),this.reorderColState()}reorderColState(){let t=(n,r)=>n.order-r.order;this.dimensionColState.sort(t),this.valueColState.sort(t)}setDimensionCellRange(t,n,r){this.dimensionCellRange=void 0;let s=Iu(Ai(this.chartType));if(!r&&!this.dimensionColState.length){let c=new Array;t.forEach(u=>{c.length>0&&!s||!n.has(u)||c.push(u)}),c.length>0&&(this.dimensionCellRange=this.createCellRange(Xs.DIMENSION,...c));return}let o=r?[r]:[];if(this.crossFiltering&&this.aggFunc){let c=this.suppliedCellRange.columns[0];o=this.dimensionColState.filter(u=>u.colId===c.getColId())}else(s||o.length===0||o.some(({column:c})=>!c||!t.has(c)))&&(o=this.dimensionColState.filter(c=>c.selected));let a=o.length===1?o[0].colId===t_.DEFAULT_CATEGORY:!1,l=o.map(({column:c})=>c).filter(c=>c!=null);l.length>0&&!a&&(this.dimensionCellRange=this.createCellRange(Xs.DIMENSION,...l))}setValueCellRange(t,n,r){this.valueCellRange=void 0;let s=[],o=oy(this.chartType),a=0;if(t.forEach(l=>{r?(o==null||a<o)&&n.has(l)&&(s.push(l),a++):this.valueColState.some(c=>c.selected&&c.colId===l.getColId())&&s.push(l)}),s.length>0){let l=[];this.valueColState.length>0?l=this.valueColState.map(c=>c.colId):n.forEach(c=>l.push(c.getColId())),s.sort((c,u)=>l.indexOf(c.getColId())-l.indexOf(u.getColId())),this.valueCellRange=this.createCellRange(Xs.VALUE,...s)}}resetCellRanges(t,n){if(!t&&!n)return;let{dimensionCols:r,valueCols:s}=this.chartColumnService.getChartColumns(),o=this.getAllColumnsFromRanges();t&&this.setDimensionCellRange(r,o),n&&this.setValueCellRange(s,o)}updateSelectedDimensions(t){let n=new Set(t.map(s=>s.getColId()));if(Iu(Ai(this.chartType))){let s=this.dimensionColState.filter(a=>n.has(a.colId)),o=new Set(s.map(a=>a.colId));this.dimensionColState=this.dimensionColState.map(a=>bt(ze({},a),{selected:o.has(a.colId)}))}else{let o=(this.dimensionColState.find(a=>n.has(a.colId))||this.dimensionColState[0]).colId;this.dimensionColState=this.dimensionColState.map(a=>bt(ze({},a),{selected:a.colId===o}))}}syncDimensionCellRange(){let t=this.getSelectedDimensions();if(t.length===0)return;let n=t.map(({column:r})=>r).filter(r=>r!=null);n.length>0&&(this.dimensionCellRange=this.createCellRange(Xs.DIMENSION,...n))}isComboChart(t){return FO(t??this.chartType)}};return i.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",i})();oe([k("rangeService")],xy.prototype,"rangeService",2);oe([k("chartTranslationService")],xy.prototype,"chartTranslationService",2);oe([J],xy.prototype,"init",1);var ol=xy,NO=["number","category","grouped-category","log","time"];function hH(i){switch(i){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","grouped-category"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["grouped-category","number"];case"scatter":case"bubble":return["number","number"];default:return}}function pH(i){return Array.isArray(i)?[]:{}}function lg(i,e){return e.clone!==!1&&e.isMergeableObject(i)?Yh(pH(i),i,e):i}function mH(i,e,t){return i.concat(e).map(function(n){return lg(n,t)})}function gH(i,e){if(!e.customMerge)return Yh;let t=e.customMerge(i);return typeof t=="function"?t:Yh}function fH(i){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(i).filter(function(e){return i.propertyIsEnumerable(e)}):[]}function aF(i){return Object.keys(i).concat(fH(i))}function VO(i,e){try{return e in i}catch{return!1}}function vH(i,e){return VO(i,e)&&!(Object.hasOwnProperty.call(i,e)&&Object.propertyIsEnumerable.call(i,e))}function yH(i={},e={},t){let n={};return t.isMergeableObject(i)&&aF(i).forEach(function(r){n[r]=lg(i[r],t)}),aF(e).forEach(function(r){vH(i,r)||(VO(i,r)&&t.isMergeableObject(e[r])?n[r]=gH(r,t)(i[r],e[r],t):n[r]=lg(e[r],t))}),n}function CH(i){return bH(i)&&!SH(i)}function bH(i){return!!i&&typeof i=="object"}function SH(i){let e=Object.prototype.toString.call(i);return e==="[object RegExp]"||e==="[object Date]"}function Yh(i,e,t){t=t||{},t.arrayMerge=t.arrayMerge||mH,t.isMergeableObject=t.isMergeableObject||CH,t.cloneUnlessOtherwiseSpecified=lg;let n=Array.isArray(e),r=Array.isArray(i);return n===r?n?t.arrayMerge(i,e,t):yH(i,e,t):lg(e,t)}function Pu(i,e,t){if(i==null)return t;let n=e.split("."),r=i;for(;n.length>1;)if(r=r[n.shift()],r==null)return t;let s=r[n[0]];return s??t}function xH(i,e,t){if(i==null)return;let n=e.split("."),r=i;n.forEach((s,o)=>{r[s]||(r[s]={}),o<n.length-1&&(r=r[s])}),r[n[n.length-1]]=t}function _H(i,e,t,n,r){var s;let{chartOptionsToRestore:o,chartPaletteToRestore:a,chartThemeToRestore:l}=i,c=AH(i),u=P_(c),d=u?{baseTheme:c}:(s=BO(i,c))!=null?s:{},h=i.getGridOptionsChartThemeOverrides(),p=i.apiChartThemeOverrides,m=Ai(i.chartType),g=i.crossFiltering?EH(e,i,m):void 0,b=[u?MH(i,t,(()=>{let v=S=>S?Object.keys(S).some(w=>Pu(S[w],"title.enabled",!1)):!1;return v(h)||v(p)})()):void 0,n,g,h,p,ze({},o??{}),r].filter(v=>!!v).reduce((v,S)=>({baseTheme:v,overrides:S}),d);if(a&&c===l){let v=En.getChartTheme(d).palette;wH(a,v)||(b.palette=a)}return b}function wH(i,e){let t=(n,r)=>n.length!==r.length?!1:n.every((s,o)=>s===r[o]);return t(i.fills,e.fills)&&t(i.strokes,e.strokes)}function P_(i){return M.includes(Object.keys(En.themes),i)}function EH(i,e,t){let n={listeners:{legendItemClick:r=>{i.getChart().series.forEach(o=>{o.toggleSeriesItem(r.itemId,r.enabled),o.toggleSeriesItem(`${r.itemId}-filtered-out`,r.enabled)})}}};return{[t]:{tooltip:{delay:500},legend:n,listeners:{click:r=>e.crossFilterCallback(r,!0)}}}}var TH=NO.reduce((i,e)=>bt(ze({},i),{[e]:{title:{_enabledFromTheme:!0}}}),{});function MH(i,e,t){let n=i.getExtraPaddingDirections();return{common:bt(ze({},e?{animation:{duration:500}}:void 0),{axes:TH,padding:{top:!t&&n.includes("top")?40:20,right:n.includes("right")?30:20,bottom:n.includes("bottom")?40:20,left:n.includes("left")?30:20}}),pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}},donut:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}}function AH(i){let e=i.getChartThemeName(),t=i.getChartThemes();return M.includes(t,e)||(e=t[0]),e}function BO(i,e){let{customChartThemes:t}=i,n=t&&t[e];return n||console.warn(`AG Grid: no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`),n}var rp=i=>e=>e==null?!0:i(e),lF=i=>typeof i=="string",GO=i=>typeof i=="boolean",PH=i=>typeof i=="object",nl=(i,e)=>t=>`AG Grid - unable to update chart as invalid params supplied:  \`${i}: ${t}\`, expected ${e}.`,UO=i=>`${i} is not supported in AG Charts Community (either 'ag-grid-charts-enterprise' or '@ag-grid-enterprise/charts-enterprise' hasn't been loaded). See https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/ for more details.`,un=class cn{static isEnterprise(){return da.enterpriseModule.isEnterprise}static isValidChartType(e){return!!OO(e)||FO(e)}static isLegacyChartType(e){return cn.legacyChartTypes.includes(e)}static validateUpdateParams(e){switch(e.type){case"rangeChartUpdate":return cn.validateUpdateRangeChartParams(e);case"pivotChartUpdate":return cn.validateUpdatePivotChartParams(e);case"crossFilterChartUpdate":return cn.validateUpdateCrossFilterChartParams(e);default:return console.warn(`AG Grid - Invalid value supplied for 'type': ${e.type}. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.`),!1}}static validateCreateParams(e){return cn.validateProperties(e,[cn.enterpriseChartTypeValidation,cn.switchCategorySeriesValidation])}static validateUpdateRangeChartParams(e){let t=[...cn.commonUpdateValidations,cn.enterpriseChartTypeValidation,...cn.cellRangeValidations,{property:"seriesChartTypes",validationFn:n=>n===void 0||Array.isArray(n)&&n.every(PH),warnMessage:nl("seriesChartTypes","Array of SeriesChartType")}];return cn.validateProperties(e,t,[...cn.baseUpdateChartParams,"cellRange","suppressChartRanges","switchCategorySeries","aggFunc","seriesChartTypes","seriesGroupType"],"UpdateRangeChartParams")}static validateUpdatePivotChartParams(e){let t=[...cn.commonUpdateValidations];return cn.validateProperties(e,t,[...cn.baseUpdateChartParams],"UpdatePivotChartParams")}static validateUpdateCrossFilterChartParams(e){let t=[...cn.commonUpdateValidations,...cn.cellRangeValidations];return cn.validateProperties(e,t,[...cn.baseUpdateChartParams,"cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")}static validateProperties(e,t,n,r){let s;for(let o of t){let{property:a,validationFn:l,warnMessage:c,warnIfFixed:u}=o;if(a in e){let d=e[a],h=l(d);if(h===!0)continue;if(h===!1)return console.warn(c(d)),!1;s=s||ze({},e),s[a]=h,u&&console.warn(c(d))}}if(n){for(let o in e)if(!n.includes(o))return console.warn(`AG Grid - Unexpected property supplied. ${r} does not contain: \`${o}\`.`),!1}return s||!0}};un.legacyChartTypes=["doughnut"];un.baseUpdateChartParams=["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"];un.validateChartType=rp(i=>{if(un.isValidChartType(i))return!0;if(un.isLegacyChartType(i)){let e=ag(i);return M.warnOnce(`The chart type '${i}' has been deprecated. Please use '${e}' instead.`),e}return!1});un.validateAgChartThemeOverrides=rp(i=>typeof i=="object");un.validateChartParamsCellRange=rp(i=>typeof i=="object");un.validateAggFunc=rp(i=>typeof i=="string"||typeof i=="function");un.enterpriseChartTypeValidation={property:"chartType",validationFn:rp(i=>un.isEnterprise()||!i||!oH(i)),warnMessage:i=>UO(`The '${i}' chart type`)};un.switchCategorySeriesValidation={property:"switchCategorySeries",validationFn:rp(i=>{if(!i||un.isEnterprise())return!0}),warnMessage:()=>UO("'switchCategorySeries' has been ignored as it"),warnIfFixed:!0};un.commonUpdateValidations=[{property:"chartId",validationFn:lF,warnMessage:nl("chartId","string")},{property:"chartType",validationFn:un.validateChartType,warnMessage:nl("chartType","ChartType")},{property:"chartThemeName",validationFn:lF,warnMessage:nl("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:un.validateAgChartThemeOverrides,warnMessage:nl("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:GO,warnMessage:nl("unlinkChart","boolean")}];un.cellRangeValidations=[{property:"cellRange",validationFn:un.validateChartParamsCellRange,warnMessage:nl("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:GO,warnMessage:nl("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:un.validateAggFunc,warnMessage:nl("aggFunc","string or IAggFunc")},un.switchCategorySeriesValidation];var HO=un,zO=["ag-default","ag-material","ag-sheets","ag-polychroma","ag-vivid"],D_=(()=>{let i=class Au extends be{constructor(t){super(),this.model=t,this.isEnterprise=()=>da.enterpriseModule.isEnterprise}init(){this.setChartRange(),this.addManagedListener(this.eventService,X.EVENT_RANGE_SELECTION_CHANGED,t=>{t.id&&t.id===this.model.chartId&&this.updateForRangeChange()}),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,X.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,X.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,X.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,X.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,X.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,X.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))}update(t){if(!this.validUpdateType(t))return!1;let n=HO.validateUpdateParams(t);if(!n)return!1;let r=n===!0?t:n;return this.applyValidatedChartParams(r),!0}applyValidatedChartParams(t){var n,r,s,o,a,l,c,u,d;let{chartId:h,chartType:p,chartThemeName:m,unlinkChart:g}=t,f={chartId:h,pivotChart:this.model.pivotChart,chartType:p??this.model.chartType,chartThemeName:m??this.model.chartThemeName,unlinkChart:g??this.model.unlinked,cellRange:this.model.suppliedCellRange,switchCategorySeries:this.model.switchCategorySeries,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1},y=ze({},f);switch(t.type){case"rangeChartUpdate":y.cellRange=(n=this.createCellRange(t))!=null?n:this.model.suppliedCellRange,y.switchCategorySeries=(r=t.switchCategorySeries)!=null?r:this.model.switchCategorySeries,y.aggFunc=(s=t.aggFunc)!=null?s:this.model.aggFunc,y.seriesChartTypes=t.seriesChartTypes,y.suppressChartRanges=(o=t.suppressChartRanges)!=null?o:this.model.suppressChartRanges,y.seriesGroupType=(a=t.seriesGroupType)!=null?a:this.model.seriesGroupType;break;case"crossFilterChartUpdate":y.cellRange=(l=this.createCellRange(t))!=null?l:this.model.suppliedCellRange,y.switchCategorySeries=!1,y.aggFunc=(c=t.aggFunc)!=null?c:this.model.aggFunc,y.crossFiltering=!0,y.suppressChartRanges=(u=t.suppressChartRanges)!=null?u:this.model.suppressChartRanges;break;case"pivotChartUpdate":y.switchCategorySeries=!1;break}this.model.updateModel(y),y.unlinkChart||y.suppressChartRanges?(d=this.rangeService)==null||d.setCellRanges([]):this.setChartRange()}updateForGridChange(t){if(this.model.unlinked)return;let{maintainColState:n,setColsFromRange:r}=t??{};this.model.updateCellRanges({maintainColState:n,setColsFromRange:r}),this.model.updateData(),this.setChartRange()}updateForDataChange(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())}updateForRangeChange(){this.updateForGridChange({setColsFromRange:!0}),this.raiseChartRangeSelectionChangedEvent()}updateForPanelChange(t){this.model.updateCellRanges(t),this.model.updateData(),t.skipAnimation&&this.getChartProxy().getChartRef().skipAnimations(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()}updateThemeOverrides(t){this.chartProxy.updateThemeOverrides(t)}getChartUpdateParams(t){let r=this.getSelectedValueColState().map(l=>({colId:l.colId,displayName:l.displayName})),s=this.getChartData(),o=this.getSelectedDimensions(),a={data:s,groupData:this.model.groupChartData,grouping:this.isGrouping(),categories:o.map(l=>{var c;return{id:l.colId,name:l.displayName,chartDataType:(c=this.model.categoryAxisType)!=null?c:this.model.getChartDataType(l.colId)}}),fields:r,chartId:this.getChartId(),getCrossFilteringContext:()=>({lastSelectedChartId:"xxx"}),seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:t,seriesGroupType:this.model.seriesGroupType};return this.isCategorySeriesSwitched()?this.invertCategorySeriesParams(a):a}invertCategorySeriesParams(t){let[n]=t.categories,r=[{id:ol.DEFAULT_CATEGORY,name:""}],s=t.data.map((a,l)=>{let c=`${n.id}:${l}`,u=a[n.id],d=u==null?"":String(u);return{colId:c,displayName:d}}),o=t.fields.map(a=>{let l={[ol.DEFAULT_CATEGORY]:a.displayName};for(let[c,u]of t.data.entries()){let d=`${n.id}:${c}`,h=u[a.colId];l[d]=h}return l});return bt(ze({},t),{categories:r,fields:s,data:o})}getChartModel(){let t=this.model.pivotChart?"pivot":"range",n=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:t,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),switchCategorySeries:this.model.switchCategorySeries,suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:n,seriesGroupType:this.model.seriesGroupType}}getChartId(){return this.model.chartId}getChartData(){return this.model.chartData}getChartType(){return this.model.chartType}setChartType(t){this.updateMultiSeriesAndCategory(this.model.chartType,t),this.model.chartType=t,this.model.comboChartModel.updateSeriesChartTypes(),this.model.switchCategorySeries=!1,this.model.categoryAxisType=void 0,this.model.seriesGroupType=void 0,this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()}isCategorySeriesSwitched(){return this.model.switchCategorySeries&&!this.model.isGrouping()}switchCategorySeries(t){RO(this.getChartType())&&(this.model.switchCategorySeries=t,this.raiseChartModelUpdateEvent())}getAggFunc(){return this.model.aggFunc}setAggFunc(t,n){this.model.aggFunc!==t&&(this.model.aggFunc=t,!n&&(this.model.updateData(),this.raiseChartModelUpdateEvent()))}updateMultiSeriesAndCategory(t,n){var r,s;let o=(d,h)=>{let p=0;for(let m of d)m.selected&&(p>=h?m.selected=!1:p++);p===0&&(d[0].selected=!0)},a=e_(n),l=oy(n),c=a!=null&&((r=e_(t))!=null?r:100)>(a??100),u=l!=null&&((s=oy(t))!=null?s:100)>(l??100);c&&o(this.model.dimensionColState,a),u&&o(this.model.valueColState,l),(c||u)&&(this.model.resetCellRanges(c,u),this.setChartRange(!0))}setChartThemeName(t,n){this.model.chartThemeName=t,n||(this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent())}getChartThemeName(){return this.model.chartThemeName}isPivotChart(){return this.model.pivotChart}isPivotMode(){return this.model.isPivotMode()}isGrouping(){return this.model.isGrouping()}isCrossFilterChart(){return this.model.crossFiltering}getThemeNames(){return this.gos.get("chartThemes")||zO}getThemes(){return this.getThemeNames().map(n=>{let s=P_(n)?n:this.chartProxy.lookupCustomChartTheme(n);return En.getChartTheme(s)})}getPalettes(){return this.getThemes().map(n=>n.palette)}getThemeTemplateParameters(){return this.getThemes().map(n=>n.getTemplateParameters())}getValueColState(){return this.model.valueColState.map(this.displayNameMapper.bind(this))}getSelectedValueColState(){return this.getValueColState().filter(t=>t.selected)}getSelectedDimensions(){return this.model.getSelectedDimensions()}displayNameMapper(t){let n=this.model.columnNames[t.colId];return t.displayName=n?n.join(" - "):this.model.getColDisplayName(t.column),t}getColStateForMenu(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}}setChartRange(t=!1){this.rangeService&&!this.model.suppressChartRanges&&!this.model.unlinked&&this.rangeService.setCellRanges(this.getCellRanges()),t||this.raiseChartModelUpdateEvent()}detachChartRange(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange(),this.dispatchEvent({type:Au.EVENT_CHART_LINKED_CHANGED})}setChartProxy(t){this.chartProxy=t}getChartProxy(){return this.chartProxy}isActiveXYChart(){return M.includes(["scatter","bubble"],this.getChartType())}isChartLinked(){return!this.model.unlinked}customComboExists(){let t=this.model.comboChartModel.savedCustomSeriesChartTypes;return t&&t.length>0}getSeriesChartTypes(){return this.model.comboChartModel.seriesChartTypes}isComboChart(t){return this.model.isComboChart(t)}updateSeriesChartType(t,n,r){let s=this.model.comboChartModel.seriesChartTypes.find(o=>o.colId===t);if(s){let o=this.model.chartType!=="customCombo";o&&(this.model.chartType="customCombo");let a=s.chartType;n!=null&&(s.chartType=n),r!=null&&(s.secondaryAxis=r),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),o&&this.dispatchEvent({type:Au.EVENT_CHART_TYPE_CHANGED}),a!==n&&this.dispatchEvent({type:Au.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}),this.raiseChartOptionsChangedEvent()}}getActiveSeriesChartTypes(){let t=this.getSelectedValueColState().map(n=>n.colId);return this.getSeriesChartTypes().filter(n=>t.includes(n.colId))}getChartSeriesTypes(t){let n=t??this.getChartType();return this.isComboChart(n)?["line","bar","area"]:[Ai(n)]}getChartSeriesType(){let t=this.getSeriesChartTypes();if(t.length===0)return"bar";let n=t[0].chartType;return n==="columnLineCombo"?"bar":n==="areaColumnCombo"?"area":Ai(n)}getCellRanges(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter(t=>t)}createCellRange(t){var n;return t.cellRange&&((n=this.rangeService)==null?void 0:n.createPartialCellRangeFromRangeParams(t.cellRange,!0))}validUpdateType(t){var n;if(!t.type)return console.warn("AG Grid - Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1;let r={"Range Chart":()=>!this.isPivotChart()&&!this.isCrossFilterChart(),"Pivot Chart":()=>this.isPivotChart(),"Cross Filter Chart":()=>this.isCrossFilterChart()},s=(n=Object.keys(r).find(a=>r[a]()))!=null?n:"Range Chart",o=t.type===`${s[0].toLowerCase()}${s.slice(1).replace(/ /g,"")}Update`;return o||console.warn(`AG Grid - Unable to update chart as a '${t.type}' update type is not permitted on a ${s}.`),o}getCellRangeParams(){let t=this.getCellRanges(),n=t[0],r=n&&n.startRow||null,s=n&&n.endRow||null;return{rowStartIndex:r&&r.rowIndex,rowStartPinned:r&&r.rowPinned,rowEndIndex:s&&s.rowIndex,rowEndPinned:s&&s.rowPinned,columns:t.reduce((o,a)=>o.concat(a.columns.map(l=>l.getId())),[])}}setCategoryAxisType(t){this.model.categoryAxisType=t,this.raiseChartModelUpdateEvent()}getSeriesGroupType(){var t;return(t=this.model.seriesGroupType)!=null?t:this.chartProxy.getSeriesGroupType()}setSeriesGroupType(t){this.model.seriesGroupType=t,this.raiseChartModelUpdateEvent()}raiseChartModelUpdateEvent(){let t={type:Au.EVENT_CHART_MODEL_UPDATE};this.dispatchEvent(t)}raiseChartUpdatedEvent(){let t={type:Au.EVENT_CHART_UPDATED};this.dispatchEvent(t)}raiseChartApiUpdateEvent(){let t={type:Au.EVENT_CHART_API_UPDATE};this.dispatchEvent(t)}raiseChartOptionsChangedEvent(){let{chartId:t,chartType:n}=this.getChartModel(),r={type:X.EVENT_CHART_OPTIONS_CHANGED,chartId:t,chartType:n,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(r)}raiseChartRangeSelectionChangedEvent(){let t={type:X.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(t)}destroy(){super.destroy(),this.rangeService&&this.rangeService.setCellRanges([])}};return i.EVENT_CHART_UPDATED="chartUpdated",i.EVENT_CHART_API_UPDATE="chartApiUpdate",i.EVENT_CHART_MODEL_UPDATE="chartModelUpdate",i.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",i.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",i.EVENT_CHART_LINKED_CHANGED="chartLinkedChanged",i})();oe([k("rangeService")],D_.prototype,"rangeService",2);oe([J],D_.prototype,"init",1);var ns=D_,WO=(()=>{let i=class $O extends ae{constructor(t){super($O.TEMPLATE),this.config=t??{};let{selectedValueList:n,valueFormatter:r,valueList:s}=this.config;this.selectedValues=n??[],this.valueList=s??[],this.valueFormatter=r??(o=>M.escapeString(o))}init(){let{ariaLabel:t,onValuesChange:n,dragSourceId:r}=this.config;this.dropZonePanel=this.createManagedBean(new jO({getValues:()=>this.selectedValues,setValues:o=>this.updateValues(o),isDraggable:()=>this.selectedValues.length>1},o=>this.valueFormatter(o),t,r)),this.getGui().appendChild(this.dropZonePanel.getGui()),this.initSelect(),n!=null&&(this.onValuesChange=n)}setValues(t,n){let{added:r,removed:s,updated:o}=this.getChanges(this.valueList,t),a=!1;return(r.length||s.length||o.length)&&(a=!0),this.valueList=t,this.updateValues(n,a,!0),this}setValueFormatter(t){return this.valueFormatter=t,this}initSelect(){let t=this.createSelectOptions();if(!t.length)return!1;let{selectPlaceholder:n}=this.config;return this.eSelect=this.createBean(new tn({options:t,placeholder:n,onValueChange:r=>this.addValue(r),pickerIcon:"chartsMenuAdd"})),this.getGui().appendChild(this.eSelect.getGui()),!0}createSelectOptions(){let t=[],{maxSelection:n}=this.config;return n&&this.selectedValues.length>=n||this.valueList.forEach(r=>{this.selectedValues.includes(r)||t.push({value:r,text:this.valueFormatter(r)})}),t}addValue(t){this.dropZonePanel.addItem(t)}updateValues(t,n,r){var s,o,a,l,c;let u=this.selectedValues;this.selectedValues=t;let d=this.getChanges(u,t),h=n||d.added.length||d.removed.length,p=this.gos.getActiveDomElement(),m=(s=this.eSelect)==null?void 0:s.getGui().contains(p),g=(o=this.dropZonePanel)==null?void 0:o.getGui().contains(p);r||(a=this.onValuesChange)==null||a.call(this,d);let f=h?!this.refreshSelect():!1;this.dropZonePanel.refreshGui(),h&&m&&(f?this.dropZonePanel.focusList(!0):(l=this.eSelect)==null||l.getFocusableElement().focus()),g&&!t.length&&((c=this.eSelect)==null||c.getFocusableElement().focus())}getChanges(t,n){let r=n.filter(a=>!t.includes(a)),s=t.filter(a=>!n.includes(a)),o=n.filter((a,l)=>t[l]!==a);return{added:r,removed:s,updated:o,selected:n}}refreshSelect(){if(!this.eSelect)return this.initSelect();let t=this.createSelectOptions();return t.length?(this.eSelect.clearOptions().addOptions(t).setValue(void 0,!0),!0):(M.removeFromParent(this.eSelect.getGui()),this.eSelect=this.destroyBean(this.eSelect),!1)}destroy(){this.destroyBean(this.eSelect),super.destroy()}};return i.TEMPLATE='<div class="ag-pill-select" role="presentation"></div>',i})();oe([J],WO.prototype,"init",1);var KO=WO,DH=class extends yd{constructor(i,e,t,n,r,s){super(e,t,!1),this.value=i,this.valueFormatter=n,this.draggable=r,this.sourceId=s}getItem(){return this.value}getDisplayName(){return this.valueFormatter(this.value)}getAriaDisplayName(){return this.getDisplayName()}getTooltip(){}createGetDragItem(){return()=>({value:this.value})}getDragSourceType(){return Gi.ChartPanel}getDragSourceId(){return this.sourceId}isDraggable(){return this.draggable}},jO=class extends Cd{constructor(i,e,t,n){super(!1),this.model=i,this.valueFormatter=e,this.ariaLabel=t,this.sourceId=n}postConstruct(){super.init()}isItemDroppable(i,e){return this.isSourceEventFromTarget(e)||this.sourceId!=null&&this.sourceId===e.dragSource.sourceId}updateItems(i){this.model.setValues(i)}getExistingItems(){return this.model.getValues()}getIconName(){return this.isPotentialDndItems()?hi.ICON_MOVE:hi.ICON_NOT_ALLOWED}getAriaLabel(){return this.ariaLabel}createPillComponent(i,e,t){return new DH(i,e,t,this.valueFormatter,this.model.isDraggable(),this.sourceId)}getItems(i){return[i.value]}isInterestedIn(i){return i===Gi.ChartPanel}};oe([J],jO.prototype,"postConstruct",1);var _y=class extends ae{constructor(i,e,t,n,r){super(r),this.chartController=i,this.autoScrollService=e,this.allowMultipleSelection=t,this.maxSelection=n,this.columnComps=new Map}refreshColumnComps(i){return M.areEqual(M.keys(this.columnComps),i.map(({colId:e})=>e))?(i.forEach(e=>{this.columnComps.get(e.colId).setValue(e.selected,!0)}),!0):!1}createGroup(i,e,t,n,r){if(this.allowMultipleSelection){let s=i.filter(o=>o.selected);this.valuePillSelect=this.groupComp.createManagedBean(new KO({valueList:i,selectedValueList:s,valueFormatter:e,selectPlaceholder:this.chartTranslationService.translate(t),dragSourceId:n,onValuesChange:o=>this.onValueChange(o),maxSelection:this.maxSelection})),this.groupComp.addItem(this.valuePillSelect)}else{let s=this.createValueSelectParams(i);s.onValueChange=o=>{i.forEach(a=>{a.selected=!1}),o.selected=!0,o.colId===ol.DEFAULT_CATEGORY&&this.chartController.setAggFunc(void 0,!0),this.chartController.updateForPanelChange({updatedColState:o,skipAnimation:r?.()})},this.valueSelect=this.groupComp.createManagedBean(new tn(s)),this.groupComp.addItem(this.valueSelect)}}refreshValueSelect(i){if(!this.valueSelect)return;let{options:e,value:t}=this.createValueSelectParams(i);this.valueSelect.clearOptions().addOptions(e).setValue(t,!0)}createValueSelectParams(i){let e;return{options:i.map(n=>{var r;let s=(r=n.displayName)!=null?r:"";return n.selected&&(e=n),{value:n,text:s}}),value:e}}onDragging(i){let e=this.checkHoveredItem(i);if(!e)return;this.lastDraggedColumn=i.dragItem.columns[0];let{comp:t,position:n}=e,{comp:r,position:s}=this.lastHoveredItem||{};if(t===r&&n===s)return;this.autoScrollService.check(i.event),this.clearHoveredItems(),this.lastHoveredItem={comp:t,position:n},t.getGui().classList.add("ag-list-item-hovered",`ag-item-highlight-${n}`)}checkHoveredItem(i){if(M.missing(i.vDirection))return null;let e=i.event;for(let t of this.columnComps.values()){let n=t.getGui();if(!n.querySelector(".ag-chart-data-column-drag-handle"))continue;let r=n.getBoundingClientRect();if(e.clientY>=r.top&&e.clientY<=r.bottom){let o=n.clientHeight,a=e.clientY>r.top+o/2?"bottom":"top";return{comp:t,position:a}}}return null}onDragLeave(){this.clearHoveredItems()}onDragStop(){if(this.lastHoveredItem){let{dimensionCols:i,valueCols:e}=this.chartController.getColStateForMenu(),t=[...i,...e].find(n=>n.column===this.lastDraggedColumn);if(t){let n=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);this.lastHoveredItem.position==="bottom"&&n++,t.order=n,this.chartController.updateForPanelChange({updatedColState:t})}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()}clearHoveredItems(){this.columnComps.forEach(i=>{i.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")}),this.lastHoveredItem=void 0}addDragHandle(i,e){let t=M.createIconNoSpan("columnDrag",this.gos);t.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),i.getGui().insertAdjacentElement("beforeend",t);let n={type:Gi.ChartPanel,eElement:t,dragItemName:e.displayName,getDragItem:()=>({columns:[e.column]}),onDragStopped:()=>this.onDragStop()};this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(n))}addChangeListener(i,e){this.addManagedListener(i,X.EVENT_FIELD_VALUE_CHANGED,()=>{e.selected=i.getValue(),this.chartController.updateForPanelChange({updatedColState:e})})}isInterestedIn(i){return i===Gi.ChartPanel}onValueChange({added:i,updated:e,removed:t,selected:n}){let r,s,o=()=>{n.forEach((a,l)=>{a.order=l}),s=!0};i.length?(r=i[0],r.selected=!0,o()):t.length?(r=t[0],r.selected=!1):e.length&&(o(),r=e[0]),r&&this.chartController.updateForPanelChange({updatedColState:r,resetOrder:s})}destroy(){this.valuePillSelect=void 0,this.valueSelect=void 0,super.destroy()}};oe([k("dragAndDropService")],_y.prototype,"dragAndDropService",2);oe([k("chartTranslationService")],_y.prototype,"chartTranslationService",2);var kH="sum",k_=(()=>{let i=class YO extends _y{constructor(t,n,r,s,o,a){super(t,n,s,void 0,YO.TEMPLATE),this.title=r,this.dimensionCols=o,this.isOpen=a}init(){this.groupComp=this.createBean(new vn({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.chartMenuService.isLegacyFormat()?(this.createLegacyCategoriesGroup(this.dimensionCols),this.clearAggFuncControls()):(this.createCategoriesGroup(this.dimensionCols),this.createAggFuncControls(this.dimensionCols)),this.getGui().appendChild(this.groupComp.getGui())}refresh(t){var n;this.chartMenuService.isLegacyFormat()?this.refreshColumnComps(t)||this.recreate(t):((n=this.valuePillSelect)==null||n.setValues(t,t.filter(r=>r.selected)),this.refreshValueSelect(t),this.refreshAggFuncControls(t,this.chartController.getAggFunc()))}recreate(t){this.isOpen=this.groupComp.isExpanded(),M.clearElement(this.getGui()),this.destroyBean(this.groupComp),this.dimensionCols=t,this.init()}createCategoriesGroup(t){this.createGroup(t,n=>{var r;return(r=n.displayName)!=null?r:""},"categoryAdd","categorySelect",()=>!this.chartController.getAggFunc())}createLegacyCategoriesGroup(t){let n=`chartDimension${this.groupComp.getCompId()}`,r=this.allowMultipleSelection;if(t.forEach(s=>{var o;let a={label:(o=s.displayName)!=null?o:"",value:s.selected,inputName:n},l=this.groupComp.createManagedBean(r?(()=>{let c=new Do(a);return c.addCssClass("ag-data-select-checkbox"),c})():new Of(a));this.addChangeListener(l,s),this.groupComp.addItem(l),this.columnComps.set(s.colId,l),r&&this.addDragHandle(l,s)}),r){let s=this.groupComp.getGui(),o={getIconName:()=>hi.ICON_MOVE,getContainer:()=>s,onDragging:a=>this.onDragging(a),onDragLeave:()=>this.onDragLeave(),isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(o),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(o))}}createAggFuncControls(t){let n=this.chartController.getAggFunc();this.groupComp.addItem(this.aggFuncToggle=this.createBean(new Fo({label:this.chartTranslationService.translate("aggregate"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:n!=null,onValueChange:r=>{var s,o;let a=r?kH:void 0;this.chartController.setAggFunc(a),(s=this.aggFuncSelect)==null||s.setValue(a,!0),(o=this.aggFuncSelect)==null||o.setDisplayed(a!=null)}}))),this.groupComp.addItem(this.aggFuncSelect=this.createBean(new tn({options:[{value:"sum",text:this.chartTranslationService.translate("sum")},{value:"first",text:this.chartTranslationService.translate("first")},{value:"last",text:this.chartTranslationService.translate("last")},{value:"min",text:this.chartTranslationService.translate("min")},{value:"max",text:this.chartTranslationService.translate("max")},{value:"count",text:this.chartTranslationService.translate("count")},{value:"avg",text:this.chartTranslationService.translate("avg")}],value:typeof n=="string"?n:void 0,onValueChange:r=>{this.chartController.setAggFunc(r)}}))),this.refreshAggFuncControls(t,n)}refreshAggFuncControls(t,n){var r,s,o,a;let c=t.filter(u=>u.selected).some(u=>u.colId!==ol.DEFAULT_CATEGORY);(r=this.aggFuncToggle)==null||r.setValue(n!=null),(s=this.aggFuncSelect)==null||s.setValue(typeof n=="string"?n:void 0,!0),(o=this.aggFuncToggle)==null||o.setDisplayed(c),(a=this.aggFuncSelect)==null||a.setDisplayed(c&&n!=null)}clearAggFuncControls(){this.aggFuncToggle=this.aggFuncToggle&&this.destroyBean(this.aggFuncToggle),this.aggFuncSelect=this.aggFuncSelect&&this.destroyBean(this.aggFuncSelect)}destroy(){this.clearAggFuncControls(),this.groupComp=this.destroyBean(this.groupComp),super.destroy()}};return i.TEMPLATE='<div id="categoriesGroup"></div>',i})();oe([k("chartMenuService")],k_.prototype,"chartMenuService",2);oe([J],k_.prototype,"init",1);var IH=k_,I_=(()=>{let i=class qO extends _y{constructor(t,n,r,s,o,a,l,c){super(t,n,o,a,qO.TEMPLATE),this.chartOptionsService=r,this.title=s,this.valueCols=l,this.isOpen=c}init(){if(this.groupComp=this.createBean(new vn({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.chartController.isActiveXYChart()){let t=this.groupComp.createManagedBean(new Fo({label:this.chartTranslationService.translate("paired"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.chartOptionsService.getPairedMode(),onValueChange:n=>{this.chartOptionsService.setPairedMode(!!n),this.chartController.updateForGridChange({maintainColState:!0})}}));this.groupComp.addItem(t)}this.chartMenuService.isLegacyFormat()?this.createLegacySeriesGroup(this.valueCols):this.createSeriesGroup(this.valueCols),this.getGui().appendChild(this.groupComp.getGui())}refresh(t){var n,r;if(this.chartMenuService.isLegacyFormat())if(this.refreshColumnComps(t)){if(this.chartController.isActiveXYChart()){let o=this.generateGetSeriesLabel(t);t.forEach(a=>{this.columnComps.get(a.colId).setLabel(o(a))})}}else this.recreate(t);else(n=this.valuePillSelect)==null||n.setValueFormatter(this.generateGetSeriesLabel(t)),(r=this.valuePillSelect)==null||r.setValues(t,t.filter(s=>s.selected)),this.refreshValueSelect(t)}recreate(t){this.isOpen=this.groupComp.isExpanded(),M.clearElement(this.getGui()),this.destroyBean(this.groupComp),this.valueCols=t,this.init()}createSeriesGroup(t){this.createGroup(t,this.generateGetSeriesLabel(t),"seriesAdd","seriesSelect")}createLegacySeriesGroup(t){let n=this.generateGetSeriesLabel(t);t.forEach(o=>{let a=n(o),l=this.groupComp.createManagedBean(new Do({label:a,value:o.selected}));l.addCssClass("ag-data-select-checkbox"),this.addChangeListener(l,o),this.groupComp.addItem(l),this.columnComps.set(o.colId,l),this.addDragHandle(l,o)});let r=this.groupComp.getGui(),s={getIconName:()=>hi.ICON_MOVE,getContainer:()=>r,onDragging:o=>this.onDragging(o),onDragLeave:()=>this.onDragLeave(),isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(s),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(s))}generateGetSeriesLabel(t){if(!this.chartController.isActiveXYChart())return a=>{var l;return(l=a.displayName)!=null?l:""};let n=t.filter(a=>a.selected),r=this.chartController.getChartType()==="bubble",s=this.chartOptionsService.getPairedMode(),o=new Map;return o.set(0,"X"),o.set(1,"Y"),o.set(2,"size"),a=>{var l;let c=(l=a.displayName)!=null?l:"";if(!a.selected)return c;let u=n.indexOf(a);if(u===-1)return c;let d;return s?d=o.get(u%(r?3:2)):u===0?d="X":d=r&&u%2===0?"size":"Y",`${c} (${d})`}}destroy(){this.groupComp=this.destroyBean(this.groupComp),super.destroy()}};return i.TEMPLATE='<div id="seriesGroup"></div>',i})();oe([k("chartMenuService")],I_.prototype,"chartMenuService",2);oe([J],I_.prototype,"init",1);var FH=I_,F_=(()=>{let i=class XO extends ae{constructor(t,n,r){super(XO.TEMPLATE),this.chartController=t,this.columns=n,this.isOpen=r,this.selectedColIds=[],this.chartTypeComps=new Map,this.secondaryAxisComps=new Map}init(){this.createSeriesChartTypeGroup(this.columns)}refresh(t){M.areEqual(this.getValidColIds(t),this.selectedColIds)?this.refreshComps():this.recreate(t)}recreate(t){this.isOpen=this.seriesChartTypeGroupComp.isExpanded(),M.clearElement(this.getGui()),this.destroyBean(this.seriesChartTypeGroupComp),this.columns=t,this.selectedColIds=[],this.clearComps(),this.init()}getValidColIds(t){let n=this.chartController.getSeriesChartTypes();return t.filter(r=>r.selected&&!!n.filter(s=>s.colId===r.colId)[0]).map(({colId:r})=>r)}createSeriesChartTypeGroup(t){this.seriesChartTypeGroupComp=this.createBean(new vn({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen}));let n=this.chartController.getSeriesChartTypes();t.forEach(r=>{if(!r.selected)return;let s=n.filter(h=>h.colId===r.colId)[0];if(!s)return;this.selectedColIds.push(r.colId);let o=this.seriesChartTypeGroupComp.createManagedBean(new vn({title:r.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),a=h=>["groupedColumn","stackedColumn","stackedArea"].includes(h),l=this.seriesChartTypeGroupComp.createManagedBean(new Do({label:this.chartTranslationService.translate("secondaryAxis"),labelWidth:"flex",disabled:a(s.chartType),value:!!s.secondaryAxis,onValueChange:h=>this.chartController.updateSeriesChartType(r.colId,void 0,h)}));o.addItem(l);let c=h=>this.chartTranslationService.translate(h),u=[{value:"line",text:c("line")},{value:"area",text:c("area")},{value:"stackedArea",text:c("stackedArea")},{value:"groupedColumn",text:c("groupedColumn")},{value:"stackedColumn",text:c("stackedColumn")}],d=o.createManagedBean(new tn({labelAlignment:"left",labelWidth:"flex",options:u,value:s.chartType,onValueChange:h=>this.chartController.updateSeriesChartType(r.colId,h)}));o.addItem(d),this.seriesChartTypeGroupComp.addItem(o),this.chartTypeComps.set(r.colId,d),this.secondaryAxisComps.set(r.colId,l)}),this.getGui().appendChild(this.seriesChartTypeGroupComp.getGui())}refreshComps(){let t=this.chartController.getSeriesChartTypes();this.selectedColIds.forEach(n=>{let r=t.find(a=>a.colId===n);if(!r)return;let s=this.chartTypeComps.get(n),o=this.secondaryAxisComps.get(n);s?.setValue(r.chartType),o?.setValue(!!r.secondaryAxis),o?.setDisabled(this.isSecondaryAxisDisabled(r.chartType))})}clearComps(){this.chartTypeComps.clear(),this.secondaryAxisComps.clear()}isSecondaryAxisDisabled(t){return["groupedColumn","stackedColumn","stackedArea"].includes(t)}destroy(){this.clearComps(),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),super.destroy()}};return i.TEMPLATE='<div id="seriesChartTypeGroup"></div>',i})();oe([k("chartTranslationService")],F_.prototype,"chartTranslationService",2);oe([J],F_.prototype,"init",1);var OH=F_,O_=(()=>{let i=class ZO extends ae{constructor(t,n){super(),this.getValue=t,this.setValue=n}init(){this.switchCategorySeriesToggleButton=this.createManagedBean(new Fo({label:this.chartTranslationService.translate("switchCategorySeries"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.getValue(),onValueChange:n=>{this.setValue(n)}}));let t={title:void 0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-data",expanded:!0,items:[this.switchCategorySeriesToggleButton]};this.setTemplate(ZO.TEMPLATE,{switchCategorySeriesGroup:t})}refresh(){var t;(t=this.switchCategorySeriesToggleButton)==null||t.setValue(this.getValue(),!0)}};return i.TEMPLATE=`<div>
        <ag-group-component ref="switchCategorySeriesGroup"></ag-group-component>
    </div>`,i})();oe([k("chartTranslationService")],O_.prototype,"chartTranslationService",2);oe([J],O_.prototype,"init",1);var LH=O_,RH={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0}]},wy=(()=>{let i=class QO extends ae{constructor(t,n){super(QO.TEMPLATE),this.chartController=t,this.chartOptionsService=n,this.isSwitchCategorySeriesToggled=!1}init(){this.switchCategorySeriesPanel=this.addComponent(this.createManagedBean(new LH(()=>this.chartController.isCategorySeriesSwitched(),t=>this.chartController.switchCategorySeries(t)))),this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched(),this.createAutoScrollService(),this.updatePanels(),this.addManagedListener(this.chartController,ns.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.addManagedListener(this.chartController,ns.EVENT_CHART_API_UPDATE,this.updatePanels.bind(this))}destroy(){this.clearPanelComponents(),super.destroy()}updatePanels(){var t,n,r,s,o;let a=this.chartType,l=this.isSwitchCategorySeriesToggled,{dimensionCols:c,valueCols:u}=this.chartController.getColStateForMenu();this.chartType=this.chartController.getChartType(),this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched();let d=this.isSwitchCategorySeriesToggled!==l;this.canRefresh(a,this.chartType)&&!d?((t=this.categoriesDataPanel)==null||t.refresh(c),(n=this.seriesDataPanel)==null||n.refresh(u),(r=this.seriesChartTypePanel)==null||r.refresh(u)):this.recreatePanels(c,u),(s=this.switchCategorySeriesPanel)==null||s.setDisplayed(RO(this.chartType)&&!this.chartMenuService.isLegacyFormat()&&!this.chartController.isGrouping()),d&&((o=this.switchCategorySeriesPanel)==null||o.refresh())}canRefresh(t,n){if(t===void 0)return!1;if(t===n)return!0;let r=s=>["columnLineCombo","areaColumnCombo","customCombo"].includes(s);return!!(r(t)&&r(n))}recreatePanels(t,n){var r;this.clearPanelComponents();let{chartType:s}=this;if(!s)return;let o=this.chartController.isCategorySeriesSwitched(),a=(r=this.getDataPanelDef().groups)==null?void 0:r.map(({type:l,isOpen:c})=>l===(o?"series":"categories")?this.categoriesDataPanel=this.createBean(new IH(this.chartController,this.autoScrollService,this.getCategoryGroupTitle(o),this.getCategoryGroupMultipleSelect(s,o),t,c)):l===(o?"categories":"series")?this.seriesDataPanel=this.createBean(new FH(this.chartController,this.autoScrollService,this.chartOptionsService,this.getSeriesGroupTitle(o),this.getSeriesGroupMultipleSelect(s,o),this.getSeriesGroupMaxSelection(s,o),n,c)):l==="seriesChartType"?this.chartController.isComboChart()?this.seriesChartTypePanel=this.createBean(new OH(this.chartController,n,c)):null:(M.warnOnce(`Invalid charts data panel group name supplied: '${l}'`),null)).filter(l=>l!=null);a&&this.addPanelComponents(a)}addPanelComponents(t){var n;let r=document.createDocumentFragment();for(let o of t)this.registerComponent(o),r.appendChild(o.getGui());let s=(n=this.switchCategorySeriesPanel)==null?void 0:n.getGui();return this.getGui().insertBefore(r,s??null),t}clearPanelComponents(){let t=this.getGui();this.categoriesDataPanel&&t.removeChild(this.categoriesDataPanel.getGui()),this.seriesDataPanel&&t.removeChild(this.seriesDataPanel.getGui()),this.seriesChartTypePanel&&t.removeChild(this.seriesChartTypePanel.getGui()),this.categoriesDataPanel=this.destroyBean(this.categoriesDataPanel),this.seriesDataPanel=this.destroyBean(this.seriesDataPanel),this.seriesChartTypePanel=this.destroyBean(this.seriesChartTypePanel)}createAutoScrollService(){let t=this.getGui();this.autoScrollService=new gd({scrollContainer:t,scrollAxis:"y",getVerticalPosition:()=>t.scrollTop,setVerticalPosition:n=>t.scrollTop=n})}addComponent(t){return this.registerComponent(t),this.getGui().appendChild(t.getGui()),t}registerComponent(t){t.addCssClass("ag-chart-data-section")}getDataPanelDef(){var t,n;return(n=(t=this.gos.get("chartToolPanelsDef"))==null?void 0:t.dataPanel)!=null?n:RH}getCategoryGroupTitle(t){return t?this.chartTranslationService.translate("seriesLabels"):this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")}getCategoryGroupMultipleSelect(t,n){return n?!1:e_(t)!==1}getSeriesGroupTitle(t){return t?this.chartTranslationService.translate("categoryValues"):this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")}getSeriesGroupMultipleSelect(t,n){return this.getSeriesGroupMaxSelection(t,n)!==1}getSeriesGroupMaxSelection(t,n){if(!n)return oy(t)}};return i.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',i})();oe([k("chartTranslationService")],wy.prototype,"chartTranslationService",2);oe([k("chartMenuService")],wy.prototype,"chartMenuService",2);oe([J],wy.prototype,"init",1);var NH=wy,Ey=(()=>{let i=class JO extends ae{constructor(t){super(),this.activeComps=[],this.params=t,this.chartOptions=t.chartMenuUtils.getChartOptions()}init(){let t={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.params.name||this.chartTranslationService.translate("font"),enabled:this.params.enabled,suppressEnabledCheckbox:!!this.params.suppressEnabledCheckbox,onEnableChange:n=>{this.params.onEnableChange&&this.params.onEnableChange(n)}};this.setTemplate(JO.TEMPLATE,{fontGroup:t,familySelect:this.getFamilySelectParams(),weightStyleSelect:this.getWeightStyleSelectParams(),sizeSelect:this.getSizeSelectParams(),colorPicker:this.params.chartMenuUtils.getDefaultColorPickerParams(this.params.keyMapper("color"))})}addCompToPanel(t){this.fontGroup.addItem(t),this.activeComps.push(t)}setEnabled(t){this.fontGroup.setEnabled(t)}getFamilySelectParams(){let t=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],n=this.getInitialFontValue("fontFamily"),r=t[0];if(n){let a=t.map(l=>l.toLowerCase()).indexOf(n.toLowerCase());if(a>=0)r=t[a];else{let l=M.capitalise(n);t.push(l),r=l}}return{options:t.sort().map(o=>({value:o,text:o})),inputWidth:"flex",value:`${r}`,onValueChange:o=>this.setFont({fontFamily:o})}}getSizeSelectParams(){let t=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],n=this.getInitialFontValue("fontSize");return M.includes(t,n)||t.push(n),{options:t.sort((s,o)=>s-o).map(s=>({value:`${s}`,text:`${s}`})),inputWidth:"flex",value:`${n}`,onValueChange:s=>this.setFont({fontSize:parseInt(s,10)}),label:this.chartTranslationService.translate("size")}}getWeightStyleSelectParams(){var t,n;let r=(t=this.getInitialFontValue("fontWeight"))!=null?t:"normal",s=(n=this.getInitialFontValue("fontStyle"))!=null?n:"normal",o=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}],a=o.find(c=>c.weight===r&&c.style===s);return a||(a={name:"predefined",weight:r,style:s},o.unshift(a)),{options:o.map(c=>({value:c.name,text:this.chartTranslationService.translate(c.name)})),inputWidth:"flex",value:a.name,onValueChange:c=>{let u=o.find(d=>d.name===c);this.setFont({fontWeight:u.weight,fontStyle:u.style})}}}addItemToPanel(t){this.fontGroup.addItem(t),this.activeComps.push(t)}destroyActiveComps(){this.activeComps.forEach(t=>{M.removeFromParent(t.getGui()),this.destroyBean(t)})}destroy(){this.destroyActiveComps(),super.destroy()}setFont(t){let{keyMapper:n}=this.params;Object.entries(t).forEach(([r,s])=>{s&&this.chartOptions.setValue(n(r),s)})}getInitialFontValue(t){let{keyMapper:n}=this.params;return this.chartOptions.getValue(n(t))}};return i.TEMPLATE=`<div class="ag-font-panel">
            <ag-group-component ref="fontGroup">
                <ag-select ref="familySelect"></ag-select>
                <ag-select ref="weightStyleSelect"></ag-select>
                <div class="ag-charts-font-size-color">
                    <ag-select ref="sizeSelect"></ag-select>
                    <ag-color-picker ref="colorPicker"></ag-color-picker>
                </div>
            </ag-group-component>
        </div>`,i})();oe([ce("fontGroup")],Ey.prototype,"fontGroup",2);oe([k("chartTranslationService")],Ey.prototype,"chartTranslationService",2);oe([J],Ey.prototype,"init",1);var uc=Ey,L_=(()=>{let i=class eL extends ae{constructor({chartMenuParamsFactory:t,isExpandedOnInit:n=!1}){super(),this.chartMenuUtils=t,this.isExpandedOnInit=n}init(){let t=this.chartMenuUtils.addEnableParams("legend.enabled",{cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslationService.translate("legend"),suppressEnabledCheckbox:!1,suppressToggleExpandOnEnableChange:!0,expanded:this.isExpandedOnInit,items:[this.createLabelPanel()]});this.setTemplate(eL.TEMPLATE,{legendGroup:t,legendPositionSelect:this.chartMenuUtils.getDefaultLegendParams("legend.position"),legendPaddingSlider:this.getSliderParams("spacing","spacing",200),markerSizeSlider:this.getSliderParams("item.marker.size","markerSize",40),markerStrokeSlider:this.getSliderParams("item.marker.strokeWidth","markerStroke",10),markerPaddingSlider:this.getSliderParams("item.marker.padding","itemSpacing",20),itemPaddingXSlider:this.getSliderParams("item.paddingX","layoutHorizontalSpacing",50),itemPaddingYSlider:this.getSliderParams("item.paddingY","layoutVerticalSpacing",50)})}getSliderParams(t,n,r){return this.chartMenuUtils.getDefaultSliderParams(`legend.${t}`,n,r)}createLabelPanel(){let t={enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:this.chartMenuUtils,keyMapper:n=>`legend.item.label.${n}`};return this.createManagedBean(new uc(t))}};return i.TEMPLATE=`<div>
            <ag-group-component ref="legendGroup">
                <ag-select ref="legendPositionSelect"></ag-select>
                <ag-slider ref="legendPaddingSlider"></ag-slider>
                <ag-slider ref="markerSizeSlider"></ag-slider>
                <ag-slider ref="markerStrokeSlider"></ag-slider>
                <ag-slider ref="markerPaddingSlider"></ag-slider>
                <ag-slider ref="itemPaddingXSlider"></ag-slider>
                <ag-slider ref="itemPaddingYSlider"></ag-slider>
            </ag-group-component>
        </div>`,i})();oe([k("chartTranslationService")],L_.prototype,"chartTranslationService",2);oe([J],L_.prototype,"init",1);var VH=L_,R_=(()=>{let i=class tL extends ae{constructor(t){super(),this.chartMenuUtils=t}init(){let t=this.chartMenuUtils.addEnableParams("tick.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("ticks"),suppressEnabledCheckbox:!1}),n=this.chartMenuUtils.getDefaultColorPickerParams("tick.color"),r=this.chartMenuUtils.getDefaultSliderParams("tick.width","width",10),s=this.chartMenuUtils.getDefaultSliderParams("tick.size","length",30);this.setTemplate(tL.TEMPLATE,{axisTicksGroup:t,axisTicksColorPicker:n,axisTicksWidthSlider:r,axisTicksSizeSlider:s})}};return i.TEMPLATE=`<div>
            <ag-group-component ref="axisTicksGroup">
                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>
                <ag-slider ref="axisTicksWidthSlider"></ag-slider>
                <ag-slider ref="axisTicksSizeSlider"></ag-slider>
            </ag-group-component>
        </div>`,i})();oe([k("chartTranslationService")],R_.prototype,"chartTranslationService",2);oe([J],R_.prototype,"init",1);var BH=R_,N_=(()=>{let i=class iL extends ae{constructor(t){super(),this.chartMenuUtils=t,this.chartOptions=t.getChartOptions()}init(){let t=this.chartMenuUtils.addEnableParams("gridLine.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("gridLines"),suppressEnabledCheckbox:!1}),n=this.getGridLineColorPickerParams("color"),r=this.getGridLineWidthSliderParams("thickness"),s=this.getGridLineDashSliderParams("lineDash");this.setTemplate(iL.TEMPLATE,{gridLineGroup:t,gridLineColorPicker:n,gridLineWidthSlider:r,gridLineLineDashSlider:s})}getGridLineColorPickerParams(t){return this.chartMenuUtils.getDefaultColorPickerParams("gridLine.style",t,{formatInputValue:n=>{var r;return(r=n?.[0])==null?void 0:r.stroke},parseInputValue:n=>{var r;let s=(r=this.chartOptions.getValue("gridLine.style"))!=null?r:[];return s.length===0?[{stroke:n,lineDash:[]}]:[bt(ze({},s[0]),{stroke:n})]}})}getGridLineWidthSliderParams(t){return this.chartMenuUtils.getDefaultSliderParams("gridLine.width",t,10)}getGridLineDashSliderParams(t){var n,r;let s=this.chartOptions.getValue("gridLine.style"),o=(r=(n=s?.[0])==null?void 0:n.lineDash)==null?void 0:r[0],a=this.chartMenuUtils.getDefaultSliderParamsWithoutValueParams(o??0,t,30);return a.onValueChange=l=>{let c=this.chartOptions.getValue("gridLine.style.0.stroke");this.chartOptions.setValue("gridLine.style",[{lineDash:[l],stroke:c}])},a}};return i.TEMPLATE=`<div>
            <ag-group-component ref="gridLineGroup">
                <ag-color-picker ref="gridLineColorPicker"></ag-color-picker>
                <ag-slider ref="gridLineWidthSlider"></ag-slider>
                <ag-slider ref="gridLineLineDashSlider"></ag-slider>
            </ag-group-component>
        </div>`,i})();oe([k("chartTranslationService")],N_.prototype,"chartTranslationService",2);oe([J],N_.prototype,"init",1);var GH=N_,sp=(()=>{let i=class nL extends If{constructor(t){super(t,nL.TEMPLATE),this.radius=0,this.offsetX=0,this.offsetY=0}postConstruct(){super.postConstruct();let{value:t,onValueChange:n}=this.config;t!=null&&this.setValue(t,void 0,!0),n!=null&&this.onValueChange(n),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:r=>{this.parentCircleRect=this.eParentCircle.getBoundingClientRect()},onDragging:r=>this.calculateAngleDrag(r),onDragStop:()=>{}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(`${this.degrees}`).onValueChange(r=>{(r==null||r==="")&&(r="0"),r=this.eAngleValue.normalizeValue(r);let s=parseFloat(r);s>180&&(s=s-360),this.setValue(s)}),this.updateNumberInput(),M.exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,X.EVENT_FIELD_VALUE_CHANGED,()=>{this.eAngleValue.getInputElement().contains(this.gos.getActiveDomElement())||this.updateNumberInput()})}updateNumberInput(){let t=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(t.toString())}positionChildCircle(t){let n=this.parentCircleRect||{width:24,height:24},r=this.eChildCircle,s=n.width/2,o=n.height/2;r.style.left=`${s+Math.cos(t)*8}px`,r.style.top=`${o+Math.sin(t)*8}px`}calculatePolar(){let t=this.offsetX,n=this.offsetY,r=Math.atan2(n,t);this.degrees=this.toDegrees(r),this.radius=Math.sqrt(t*t+n*n),this.positionChildCircle(r)}calculateCartesian(){let t=this.toRadians(this.getValue()),n=this.getRadius();this.setOffsetX(Math.cos(t)*n).setOffsetY(Math.sin(t)*n)}setOffsetX(t){return this.offsetX!==t&&(this.offsetX=t,this.calculatePolar()),this}setOffsetY(t){return this.offsetY!==t&&(this.offsetY=t,this.calculatePolar()),this}calculateAngleDrag(t){let n=this.parentCircleRect,r=n.width/2,s=n.height/2,o=t.clientX-n.left,a=t.clientY-n.top,l=o-r,c=a-s,u=Math.atan2(c,l);this.setValue(u,!0)}toDegrees(t){return t/Math.PI*180}toRadians(t){return t/180*Math.PI}normalizeNegativeValue(t){return t<0?360+t:t}normalizeAngle180(t){return t%=Math.PI*2,t<-Math.PI?t+=Math.PI*2:t>=Math.PI&&(t-=Math.PI*2),t}getRadius(){return this.radius}setRadius(t){return this.radius===t?this:(this.radius=t,this.calculateCartesian(),this)}onValueChange(t){return this.addManagedListener(this,X.EVENT_FIELD_VALUE_CHANGED,()=>{t(this.degrees)}),this}getValue(t){return t?this.toRadians(this.degrees):this.degrees}setValue(t,n,r){let s;return n?s=t:s=this.normalizeAngle180(this.toRadians(t)),t=this.toDegrees(s),this.degrees!==t&&(this.degrees=Math.floor(t),this.calculateCartesian(),this.positionChildCircle(s),r||this.dispatchEvent({type:X.EVENT_FIELD_VALUE_CHANGED})),this}setWidth(t){return M.setFixedWidth(this.getGui(),t),this}setDisabled(t){return super.setDisabled(t),this.eAngleValue.setDisabled(t),this}destroy(){this.dragService.removeDragSource(this.dragListener),super.destroy()}};return i.TEMPLATE=`<div class="ag-angle-select">
            <div ref="eLabel"></div>
            <div class="ag-wrapper ag-angle-select-wrapper">
                <div ref="eAngleSelectField" class="ag-angle-select-field">
                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">
                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>
                    </div>
                </div>
                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>
            </div>
        </div>`,i})();oe([ce("eLabel")],sp.prototype,"eLabel",2);oe([ce("eParentCircle")],sp.prototype,"eParentCircle",2);oe([ce("eChildCircle")],sp.prototype,"eChildCircle",2);oe([ce("eAngleValue")],sp.prototype,"eAngleValue",2);oe([k("dragService")],sp.prototype,"dragService",2);var rL=sp,Ru=class extends be{constructor(i){super(),this.chartOptionsProxy=i}getDefaultColorPickerParams(i,e,t){return this.addValueParams(i,{label:this.chartTranslationService.translate(e??"color"),labelWidth:"flex",inputWidth:"flex"},t)}getDefaultNumberInputParams(i,e,t){return this.addValueParams(i,{label:this.chartTranslationService.translate(e),labelWidth:"flex",inputWidth:"flex",precision:t?.precision,step:t?.step,min:t?.min,max:t?.max},{parseInputValue:n=>{let r=Number(n);return isNaN(r)?void 0:r},formatInputValue:n=>n==null?"":`${n}`})}getDefaultSliderParams(i,e,t,n){var r;let s=(r=this.chartOptionsProxy.getValue(i))!=null?r:0;n&&Array.isArray(s)&&(s=s[0]);let o=this.getDefaultSliderParamsWithoutValueParams(s,e,t);return o.onValueChange=a=>this.chartOptionsProxy.setValue(i,n?[a]:a),o}getDefaultSliderParamsWithoutValueParams(i,e,t){return{label:this.chartTranslationService.translate(e),minValue:0,maxValue:Math.max(i,t),textFieldWidth:45,value:`${i}`}}getDefaultCheckboxParams(i,e,t){let n=this.chartOptionsProxy.getValue(i),r={label:this.chartTranslationService.translate(e),value:n,readOnly:t?.readOnly,passive:t?.passive};return r.onValueChange=s=>{this.chartOptionsProxy.setValue(i,typeof s=="boolean"?s:void 0)},r}getDefaultSelectParams(i,e,t,n){let r=this.chartOptionsProxy.getValue(i),s={label:this.chartTranslationService.translate(e),value:r,options:t,pickerType:n?.pickerType,pickerAriaLabelKey:n?.pickerAriaLabelKey,pickerAriaLabelValue:n?.pickerAriaLabelValue};return s.onValueChange=o=>{this.chartOptionsProxy.setValue(i,o)},s}getDefaultLegendParams(i){return this.addValueParams(i,{label:this.chartTranslationService.translate("position"),labelWidth:"flex",inputWidth:"flex",options:["top","right","bottom","left"].map(e=>({value:e,text:this.chartTranslationService.translate(e)}))})}getDefaultFontPanelParams(i,e){let t=n=>`${i}.${n}`;return this.addEnableParams(t("enabled"),{name:this.chartTranslationService.translate(e),suppressEnabledCheckbox:!1,chartMenuUtils:this,keyMapper:t})}addValueParams(i,e,t){let n=this.chartOptionsProxy.getValue(i);return e.value=t?.formatInputValue?t.formatInputValue(n):n,e.onValueChange=r=>{let s=t?.parseInputValue?t.parseInputValue(r):r;this.chartOptionsProxy.setValue(i,s)},e}addEnableParams(i,e){var t;return e.enabled=(t=this.chartOptionsProxy.getValue(i))!=null?t:!1,e.onEnableChange=n=>this.chartOptionsProxy.setValue(i,n),e}getChartOptions(){return this.chartOptionsProxy}};oe([k("chartTranslationService")],Ru.prototype,"chartTranslationService",2);var UH="%d %B %Y",zu=(()=>{let i=class sL extends ae{constructor(t,{chartController:n,chartOptionsService:r,isExpandedOnInit:s=!1,seriesType:o}){super(),this.activePanels=[],this.axisLabelUpdateFuncs=[],this.axisType=t,this.chartController=n,this.chartAxisOptionsProxy=r.getCartesianAxisOptionsProxy(t),this.chartAxisThemeOverridesProxy=r.getCartesianAxisThemeOverridesProxy(t),this.chartAxisAppliedThemeOverridesProxy=r.getCartesianAxisAppliedThemeOverridesProxy(t),this.chartOptionsSeriesProxy=r.getSeriesOptionsProxy(()=>o??this.chartController.getChartSeriesType()),this.chartOptionsService=r,this.isExpandedOnInit=s}init(){var t;let n=this.axisType,r={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate(n),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0},s=this.createManagedBean(new Ru(this.chartAxisOptionsProxy)),o=this.createManagedBean(new Ru(this.chartAxisThemeOverridesProxy)),a=this.getAxisTypeSelectParams(s,this.chartAxisAppliedThemeOverridesProxy),l=this.getAxisPositionSelectParams(s),c=this.getAxisTimeFormatSelectParams(s),u=this.getAxisColorInputParams(o),d=this.getAxisLineWidthSliderParams(o);this.setTemplate(sL.TEMPLATE,{axisGroup:r,axisTypeSelect:a??void 0,axisPositionSelect:l??void 0,axisTimeFormatSelect:c??void 0,axisColorInput:u,axisLineWidthSlider:d}),this.axisTypeSelect.setDisplayed(!!((t=a.options)!=null&&t.length)),l||this.removeTemplateComponent(this.axisPositionSelect);let h=()=>{let m=this.chartAxisOptionsProxy.getValue("type")==="time";M.setDisplayed(this.axisTimeFormatSelect.getGui(),m)};c?(h(),this.addManagedListener(this.eventService,X.EVENT_CHART_OPTIONS_CHANGED,m=>{h()})):this.removeTemplateComponent(this.axisTimeFormatSelect),this.initGridLines(o),this.initAxisTicks(o),this.initAxisLabels(o);let p=()=>this.axisLabelUpdateFuncs.forEach(m=>m());this.addManagedListener(this.chartController,ns.EVENT_CHART_UPDATED,p),this.addManagedListener(this.chartController,ns.EVENT_CHART_MODEL_UPDATE,()=>setTimeout(()=>{this.refreshAxisTypeSelect(s),h()}))}getAxisTypeSelectParams(t,n){let r=t.getChartOptions(),s=this.getAxisTypeSelectOptions(),o=t.getDefaultSelectParams("type","axisType",s);return o.onValueChange=a=>{var l;let c=r.getValue("type");if(a===c)return;let u=n.getValue("*"),d=c==="time",h=a==="time",p=d!==h?h?UH:void 0:null;if(this.chartOptionsService.setCartesianCategoryAxisType(this.axisType,a),p!==null){let m=(l=r.getValue("label"))!=null?l:{};r.setValue("label",bt(ze({},m),{format:p}))}n.setValue("*",u)},o}refreshAxisTypeSelect(t){let n=this.getAxisTypeSelectOptions(),r=!!n.length;this.axisTypeSelect.setDisplayed(r),r&&this.axisTypeSelect.clearOptions().addOptions(n).setValue(t.getChartOptions().getValue("type"))}getAxisTypeSelectOptions(){let t=this.chartController.getChartType(),n=()=>{let r=this.chartController.getChartData()[0];return r?this.chartController.getSelectedDimensions().every(s=>!isNaN(parseFloat(r[s.colId]))):!1};return["heatmap","histogram","boxPlot","rangeBar","scatter","bubble"].includes(t)||this.chartController.isGrouping()||!this.isCategoryAxis()||this.chartController.isCategorySeriesSwitched()||!n()?[]:["category","number","time"].map(r=>({value:r,text:this.translate(r)}))}isCategoryAxis(){let t=this.chartOptionsSeriesProxy.getValue("direction")==="horizontal";return t&&this.axisType==="yAxis"||!t&&this.axisType==="xAxis"}getAxisPositionSelectParams(t){let n=((r,s)=>{switch(r){case"heatmap":return null;default:switch(s){case"xAxis":return[{value:"top",text:this.translate("top")},{value:"bottom",text:this.translate("bottom")}];case"yAxis":return[{value:"left",text:this.translate("left")},{value:"right",text:this.translate("right")}]}}})(this.chartController.getChartType(),this.axisType);return n?t.getDefaultSelectParams("position","position",n):null}getAxisTimeFormatSelectParams(t){if(!this.isCategoryAxis())return null;let n=[{value:"%d/%m/%Y",text:this.translate("timeFormatSlashesDDMMYYYY")},{value:"%m/%d/%Y",text:this.translate("timeFormatSlashesMMDDYYYY")},{value:"%d/%m/%y",text:this.translate("timeFormatSlashesDDMMYY")},{value:"%m/%d/%y",text:this.translate("timeFormatSlashesMMDDYY")},{value:"%d.%e.%y",text:this.translate("timeFormatDotsDDMYY")},{value:"%e.%d.%y",text:this.translate("timeFormatDotsMDDYY")},{value:"%Y-%m-%d",text:this.translate("timeFormatDashesYYYYMMDD")},{value:"%d %B %Y",text:this.translate("timeFormatSpacesDDMMMMYYYY")},{value:"%H:%M:%S",text:this.translate("timeFormatHHMMSS")},{value:"%I:%M:%S %p",text:this.translate("timeFormatHHMMSSAmPm")}];return t.getDefaultSelectParams("label.format","timeFormat",n)}getAxisColorInputParams(t){return t.getDefaultColorPickerParams("line.color")}getAxisLineWidthSliderParams(t){var n;let r=t.getChartOptions(),s=()=>r.getValue("line.enabled")?r.getValue("line.width"):null,o=l=>{r.setValues([{expression:"line.enabled",value:l!=null},{expression:"line.width",value:l??0}])},a=t.getDefaultSliderParamsWithoutValueParams((n=s())!=null?n:0,"thickness",10);return a.onValueChange=l=>{o(l===0?null:l)},a}initGridLines(t){switch(this.chartController.getChartType()){case"heatmap":return;default:let r=this.createBean(new GH(t));this.axisGroup.addItem(r),this.activePanels.push(r)}}initAxisTicks(t){if(!this.hasConfigurableAxisTicks())return;let n=this.createBean(new BH(t));this.axisGroup.addItem(n),this.activePanels.push(n)}hasConfigurableAxisTicks(){switch(this.chartController.getChartType()){case"radarLine":case"radarArea":case"rangeBar":case"boxPlot":case"waterfall":return!1;default:return!0}}initAxisLabels(t){let n={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:t,keyMapper:s=>`label.${s}`},r=this.createBean(new uc(n));this.axisGroup.addItem(r),this.activePanels.push(r),this.addAdditionalLabelComps(r,t)}addAdditionalLabelComps(t,n){this.addLabelPadding(t,n);let r=this.createRotationWidget("labelRotation",n),s=this.initLabelRotation(r,n);t.addCompToPanel(s),t.addCompToPanel(r)}initLabelRotation(t,n){let r=n.getChartOptions(),s=()=>r.getValue("label.rotation"),o=()=>r.getValue("label.autoRotate"),a=d=>{d&&(this.prevRotation=s()),r.setValues([{expression:"label.autoRotate",value:d},{expression:"label.rotation",value:d?void 0:this.prevRotation}]),t.setDisabled(d)},c=typeof s()=="number"?!1:o(),u=this.createBean(new Do({label:this.translate("autoRotate"),value:c,onValueChange:a}));return t.setDisabled(c),u}createRotationWidget(t,n){var r;let s=n.getChartOptions(),o=()=>s.getValue("label.rotation"),a=d=>s.setValue("label.rotation",d),c=`${this.chartTranslationService.translate(t)} \xB0`,u=new rL({label:c,labelWidth:"flex",value:(r=o())!=null?r:0,onValueChange:a});return this.axisLabelUpdateFuncs.push(()=>{var d;u.setValue((d=o())!=null?d:0)}),this.createBean(u)}addLabelPadding(t,n){let r=this.createBean(new In(n.getDefaultSliderParams("label.padding","padding",30)));t.addCompToPanel(r)}translate(t){return this.chartTranslationService.translate(t)}removeTemplateComponent(t){M.removeFromParent(t.getGui()),this.destroyBean(t)}destroyActivePanels(){this.activePanels.forEach(t=>{M.removeFromParent(t.getGui()),this.destroyBean(t)})}destroy(){this.destroyActivePanels(),super.destroy()}};return i.TEMPLATE=`<div>
            <ag-group-component ref="axisGroup">
                <ag-select ref="axisTypeSelect"></ag-select>
                <ag-select ref="axisTimeFormatSelect"></ag-select>
                <ag-select ref="axisPositionSelect"></ag-select>
                <ag-color-picker ref="axisColorInput"></ag-color-picker>
                <ag-slider ref="axisLineWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,i})();oe([ce("axisGroup")],zu.prototype,"axisGroup",2);oe([ce("axisTypeSelect")],zu.prototype,"axisTypeSelect",2);oe([ce("axisPositionSelect")],zu.prototype,"axisPositionSelect",2);oe([ce("axisTimeFormatSelect")],zu.prototype,"axisTimeFormatSelect",2);oe([k("chartTranslationService")],zu.prototype,"chartTranslationService",2);oe([J],zu.prototype,"init",1);var qv=zu,Ty=(()=>{let i=class oL extends ae{constructor({chartController:t,chartAxisMenuParamsFactory:n,isExpandedOnInit:r=!1}){super(),this.chartController=t,this.chartMenuUtils=n,this.isExpandedOnInit=r}init(){let t={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("polarAxis"),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0},n=this.chartMenuUtils.getDefaultColorPickerParams("line.color"),r=this.chartMenuUtils.getDefaultSliderParams("line.width","thickness",10);this.setTemplate(oL.TEMPLATE,{axisGroup:t,axisColorInput:n,axisLineWidthSlider:r}),this.initAxis(),this.initAxisLabels(),this.initRadiusAxis()}initAxis(){let t=this.chartController.getChartType();if(["radarLine","radarArea"].includes(t)){let r=[{value:"circle",text:this.translate("circle")},{value:"polygon",text:this.translate("polygon")}];this.axisGroup.addItem(this.createSelect({labelKey:"shape",options:r,property:"shape"}))}t!=="pie"&&this.axisGroup.addItem(this.createSlider({labelKey:"innerRadius",defaultMaxValue:1,property:"innerRadiusRatio"}))}initAxisLabels(){let t={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:this.chartMenuUtils,keyMapper:s=>`label.${s}`},n=this.createManagedBean(new uc(t)),r=this.createOrientationWidget();n.addItemToPanel(r),this.axisGroup.addItem(n)}createOrientationWidget(){let t=[{value:"fixed",text:this.translate("fixed")},{value:"parallel",text:this.translate("parallel")},{value:"perpendicular",text:this.translate("perpendicular")}];return this.createSelect({labelKey:"orientation",options:t,property:"label.orientation"})}initRadiusAxis(){let t=Ai(this.chartController.getChartType());if(!cH(t))return;let n=[this.createSlider({labelKey:"groupPadding",defaultMaxValue:1,property:"paddingInner"}),this.createSlider({labelKey:"seriesPadding",defaultMaxValue:1,property:"groupPaddingInner"})],r=this.createManagedBean(new vn({cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,enabled:!0,suppressEnabledCheckbox:!0,title:this.translate("padding"),items:n})).hideEnabledCheckbox(!0).hideOpenCloseIcons(!0);this.axisGroup.addItem(r)}createSlider(t){let{labelKey:n,defaultMaxValue:r,step:s=.05,property:o}=t,a=this.chartMenuUtils.getDefaultSliderParams(o,n,r);return a.step=s,this.createManagedBean(new In(a))}createSelect(t){let{labelKey:n,options:r,property:s}=t;return this.createManagedBean(new tn(this.chartMenuUtils.addValueParams(s,{label:this.chartTranslationService.translate(n),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:r})))}translate(t){return this.chartTranslationService.translate(t)}};return i.TEMPLATE=`<div>
            <ag-group-component ref="axisGroup">
                <ag-color-picker ref="axisColorInput"></ag-color-picker>
                <ag-slider ref="axisLineWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,i})();oe([ce("axisGroup")],Ty.prototype,"axisGroup",2);oe([k("chartTranslationService")],Ty.prototype,"chartTranslationService",2);oe([J],Ty.prototype,"init",1);var HH=Ty,My=(()=>{let i=class aL extends ae{constructor(t,n){super(),this.chartMenuUtils=t,this.chartController=n}init(){let t={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("padding"),suppressEnabledCheckbox:!0},n=r=>this.chartMenuUtils.getDefaultSliderParams("padding."+r,r,200);this.setTemplate(aL.TEMPLATE,{chartPaddingGroup:t,paddingTopSlider:n("top"),paddingRightSlider:n("right"),paddingBottomSlider:n("bottom"),paddingLeftSlider:n("left")}),this.addManagedListener(this.eventService,X.EVENT_CHART_OPTIONS_CHANGED,r=>{this.updateTopPadding(r.chartOptions)})}updateTopPadding(t){let n=[...this.chartController.getChartSeriesTypes(),"common"].map(r=>{var s,o;return(o=(s=t[r])==null?void 0:s.padding)==null?void 0:o.top}).find(r=>r!=null);n!=null&&this.paddingTopSlider.setValue(`${n}`)}};return i.TEMPLATE=`<div>
            <ag-group-component ref="chartPaddingGroup">
                <ag-slider ref="paddingTopSlider"></ag-slider>
                <ag-slider ref="paddingRightSlider"></ag-slider>
                <ag-slider ref="paddingBottomSlider"></ag-slider>
                <ag-slider ref="paddingLeftSlider"></ag-slider>
            </ag-group-component>
        <div>`,i})();oe([ce("paddingTopSlider")],My.prototype,"paddingTopSlider",2);oe([k("chartTranslationService")],My.prototype,"chartTranslationService",2);oe([J],My.prototype,"init",1);var zH=My,V_=(()=>{let i=class lL extends ae{constructor(t){super(),this.chartMenuUtils=t}init(){let t=this.chartMenuUtils.addEnableParams("background.visible",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("background"),suppressEnabledCheckbox:!1}),n=this.chartMenuUtils.getDefaultColorPickerParams("background.fill");this.setTemplate(lL.TEMPLATE,{chartBackgroundGroup:t,colorPicker:n})}};return i.TEMPLATE=`<div>
            <ag-group-component ref="chartBackgroundGroup">
                <ag-color-picker ref="colorPicker"></ag-color-picker>
            </ag-group-component>
        <div>`,i})();oe([k("chartTranslationService")],V_.prototype,"chartTranslationService",2);oe([J],V_.prototype,"init",1);var WH=V_,Ay=(()=>{let i=class cL extends ae{constructor(t,n){super(cL.TEMPLATE),this.chartMenuUtils=t,this.chartController=n,this.activePanels=[],this.chartOptions=t.getChartOptions()}init(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")}hasTitle(){let t=this.chartOptions.getValue("title");return t&&t.enabled&&t.text&&t.text.length>0}initFontPanel(){let t=this.hasTitle(),n={name:this.chartTranslationService.translate("title"),enabled:t,suppressEnabledCheckbox:!1,chartMenuUtils:this.chartMenuUtils,keyMapper:s=>`title.${s}`,onEnableChange:s=>{if(this.chartMenuService.doesChartToolbarExist(this.chartController)){let l=this.chartOptions.getValue("padding.top");this.chartOptions.setValue("padding.top",s?l-20:l+20)}this.chartOptions.setValue("title.enabled",s);let o=this.chartOptions.getValue("title.text"),a=o==="Title"||o?.trim().length===0;s&&a&&this.chartOptions.setValue("title.text",this.titlePlaceholder)}},r=this.createBean(new uc(n));r.addItemToPanel(this.createSpacingSlicer()),this.getGui().appendChild(r.getGui()),this.activePanels.push(r),this.addManagedListener(this.eventService,"chartTitleEdit",()=>{r.setEnabled(this.hasTitle())})}createSpacingSlicer(){let t=this.chartMenuUtils.getDefaultSliderParams("title.spacing","spacing",100);return t.value="10",this.createBean(new In(t))}destroyActivePanels(){this.activePanels.forEach(t=>{M.removeFromParent(t.getGui()),this.destroyBean(t)})}destroy(){this.destroyActivePanels(),super.destroy()}};return i.TEMPLATE="<div></div>",i})();oe([k("chartTranslationService")],Ay.prototype,"chartTranslationService",2);oe([k("chartMenuService")],Ay.prototype,"chartMenuService",2);oe([J],Ay.prototype,"init",1);var $H=Ay,Py=(()=>{let i=class uL extends ae{constructor({chartController:t,chartMenuParamsFactory:n,isExpandedOnInit:r=!1,chartOptionsService:s,seriesType:o}){super(),this.chartController=t,this.chartMenuParamsFactory=n,this.chartOptionsSeriesProxy=s.getSeriesOptionsProxy(()=>o??this.chartController.getChartSeriesType()),this.isExpandedOnInit=r}init(){this.chartSeriesMenuParamsFactory=this.createManagedBean(new Ru(this.chartOptionsSeriesProxy));let t={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslationService.translate("chart"),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0,items:[this.createManagedBean(new $H(this.chartMenuParamsFactory,this.chartController)),this.createManagedBean(new zH(this.chartMenuParamsFactory,this.chartController)),this.createManagedBean(new WH(this.chartMenuParamsFactory)),...this.createDirectionSelect()]};this.setTemplate(uL.TEMPLATE,{chartGroup:t}),this.addManagedListener(this.eventService,X.EVENT_CHART_OPTIONS_CHANGED,()=>this.refresh())}refresh(){this.updateDirectionSelect()}createDirectionSelect(){if(!!this.chartMenuService.isLegacyFormat())return[];let n=["horizontal","vertical"].map(o=>({value:o,text:this.chartTranslationService.translate(o)})),r=this.chartSeriesMenuParamsFactory.getDefaultSelectParams("direction","direction",n);r.labelWidth="flex",r.inputWidth="flex";let s=r.onValueChange;return r.onValueChange=o=>{s(o),this.chartController.raiseChartModelUpdateEvent()},this.directionSelect=this.createManagedBean(new tn(r)),this.updateDirectionSelect(),[this.directionSelect]}updateDirectionSelect(){var t;(t=this.directionSelect)==null||t.setDisplayed(dH(this.chartController.getChartType()))}};return i.TEMPLATE=`<div>
            <ag-group-component ref="chartGroup"></ag-group-component>
        </div>`,i})();oe([k("chartTranslationService")],Py.prototype,"chartTranslationService",2);oe([k("chartMenuService")],Py.prototype,"chartMenuService",2);oe([J],Py.prototype,"init",1);var KH=Py,B_=(()=>{let i=class dL extends ae{constructor(t,n="shadow"){super(),this.chartMenuUtils=t,this.propertyKey=n}init(){let t=this.propertyKey,n=this.chartMenuUtils.addEnableParams(`${t}.enabled`,{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("shadow"),suppressEnabledCheckbox:!1}),r=this.chartMenuUtils.getDefaultColorPickerParams(`${t}.color`);this.setTemplate(dL.TEMPLATE,{shadowGroup:n,shadowColorPicker:r,shadowBlurSlider:this.getSliderParams("blur",0,20),shadowXOffsetSlider:this.getSliderParams("xOffset",-10,10),shadowYOffsetSlider:this.getSliderParams("yOffset",-10,10)})}getSliderParams(t,n,r){let s=`${this.propertyKey}.${t}`,o=this.chartMenuUtils.getDefaultSliderParams(s,t,r);return o.minValue=n,o}};return i.TEMPLATE=`<div>
            <ag-group-component ref="shadowGroup">
                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>
                <ag-slider ref="shadowBlurSlider"></ag-slider>
                <ag-slider ref="shadowXOffsetSlider"></ag-slider>
                <ag-slider ref="shadowYOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,i})();oe([k("chartTranslationService")],B_.prototype,"chartTranslationService",2);oe([J],B_.prototype,"init",1);var jH=B_,Dy=(()=>{let i=class hL extends ae{constructor(t,n){super(),this.chartOptionsService=t,this.chartMenuUtils=n}init(){let t=this.chartOptionsService.getChartType(),n=M.includes(["scatter","bubble"],t),r=this.chartMenuUtils.addEnableParams("marker.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("markers"),suppressEnabledCheckbox:n,suppressOpenCloseIcons:!0}),s=t==="bubble",o,a;s?(o=this.getSliderParams("marker.maxSize","maxSize",60),a=this.getSliderParams("marker.size","minSize",60)):(o={},a=this.getSliderParams("marker.size","size",60)),this.setTemplate(hL.TEMPLATE,{seriesMarkersGroup:r,seriesMarkerShapeSelect:this.getMarkerShapeSelectParams(),seriesMarkerMinSizeSlider:o,seriesMarkerSizeSlider:a,seriesMarkerStrokeWidthSlider:this.getSliderParams("marker.strokeWidth","strokeWidth",10)}),s||this.seriesMarkerMinSizeSlider.setDisplayed(!1)}getMarkerShapeSelectParams(){let t=[{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}];return this.chartMenuUtils.addValueParams("marker.shape",{options:t,label:this.chartTranslationService.translate("shape")})}getSliderParams(t,n,r){return this.chartMenuUtils.getDefaultSliderParams(t,n,r)}};return i.TEMPLATE=`<div>
            <ag-group-component ref="seriesMarkersGroup">
                <ag-select ref="seriesMarkerShapeSelect"></ag-select>
                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,i})();oe([ce("seriesMarkerMinSizeSlider")],Dy.prototype,"seriesMarkerMinSizeSlider",2);oe([k("chartTranslationService")],Dy.prototype,"chartTranslationService",2);oe([J],Dy.prototype,"init",1);var YH=Dy,ma=(()=>{let i=class oc extends ae{constructor(t){super(oc.TEMPLATE),this.H=1,this.S=1,this.B=1,this.A=1,this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1,this.colorChanged=!1,this.picker=t.picker}postConstruct(){this.initTabIndex(),this.initRecentColors(),this.addGuiEventListener("focus",()=>this.spectrumColor.focus()),this.addGuiEventListener("keydown",t=>{t.key===Xe.ENTER&&!t.defaultPrevented&&this.destroy()}),this.addManagedListener(this.spectrumColor,"keydown",t=>this.moveDragger(t)),this.addManagedListener(this.spectrumAlphaSlider,"keydown",t=>this.moveAlphaSlider(t)),this.addManagedListener(this.spectrumHueSlider,"keydown",t=>this.moveHueSlider(t)),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addGuiEventListener("mousemove",t=>{this.onSpectrumDraggerMove(t),this.onSpectrumHueMove(t),this.onSpectrumAlphaMove(t)}),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this)),this.addManagedListener(this.recentColors,"keydown",t=>{(t.key===Xe.ENTER||t.key===Xe.SPACE)&&(t.preventDefault(),this.onRecentColorClick(t))})}initTabIndex(){let t=this.tabIndex=this.gos.get("tabIndex").toString();this.spectrumColor.setAttribute("tabindex",t),this.spectrumHueSlider.setAttribute("tabindex",t),this.spectrumAlphaSlider.setAttribute("tabindex",t)}refreshSpectrumRect(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()}refreshHueRect(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()}refreshAlphaRect(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()}onSpectrumDraggerDown(t){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(t)}onSpectrumDraggerMove(t){this.isSpectrumDragging&&this.moveDragger(t)}onSpectrumHueDown(t){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(t)}onSpectrumHueMove(t){this.isSpectrumHueDragging&&this.moveHueSlider(t)}onSpectrumAlphaDown(t){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(t)}onSpectrumAlphaMove(t){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(t)}onMouseUp(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1}moveDragger(t){let n=this.spectrumValRect;if(!n)return;let r,s;if(t instanceof MouseEvent)r=t.clientX-n.left,s=t.clientY-n.top;else{let o=t.key===Xe.LEFT,a=t.key===Xe.RIGHT,l=t.key===Xe.UP,c=t.key===Xe.DOWN,u=l||c,d=o||a;if(!u&&!d)return;t.preventDefault();let{x:h,y:p}=this.getSpectrumValue();r=h+(d?o?-5:5:0),s=p+(u?l?-5:5:0)}r=Math.max(r,0),r=Math.min(r,n.width),s=Math.max(s,0),s=Math.min(s,n.height),this.setSpectrumValue(r/n.width,1-s/n.height)}moveHueSlider(t){let n=this.spectrumHueRect;if(!n)return;let r=this.moveSlider(this.spectrumHueSlider,t);r!=null&&(this.H=1-r/n.width,this.update())}moveAlphaSlider(t){let n=this.spectrumAlphaRect;if(!n)return;let r=this.moveSlider(this.spectrumAlphaSlider,t);r!=null&&(this.A=r/n.width,this.update())}moveSlider(t,n){var r;let s=t.getBoundingClientRect(),o=(r=t.parentElement)==null?void 0:r.getBoundingClientRect();if(!t||!o)return null;let a;if(n instanceof MouseEvent)a=n.clientX-o.left;else{let l=n.key===Xe.LEFT,c=n.key===Xe.RIGHT;if(!l&&!c)return null;n.preventDefault();let u=l?-5:5;a=parseFloat(t.style.left)-s.width/2+u}return a=Math.max(a,0),a=Math.min(a,o.width),t.style.left=a+s.width/2+"px",a}update(){let t=ai.Color.fromHSB(this.H*360,this.S,this.B,this.A),n=ai.Color.fromHSB(this.H*360,1,1),r=t.toRgbaString(),s=this.picker;ai.Color.fromString(s.getValue()).toRgbaString()!==r&&(this.colorChanged=!0),s.setValue(r),this.spectrumColor.style.backgroundColor=n.toRgbaString(),this.spectrumDragger.style.backgroundColor=r}setSpectrumValue(t,n){let r=this.spectrumValRect||this.refreshSpectrumRect();if(r==null)return;let s=this.spectrumDragger,o=s.getBoundingClientRect();t=Math.max(0,t),t=Math.min(1,t),n=Math.max(0,n),n=Math.min(1,n),this.S=t,this.B=n,s.style.left=t*r.width-o.width/2+"px",s.style.top=(1-n)*r.height-o.height/2+"px",this.update()}getSpectrumValue(){let t=this.spectrumDragger,n=t.getBoundingClientRect(),r=parseFloat(t.style.left)+n.width/2,s=parseFloat(t.style.top)+n.height/2;return{x:r,y:s}}initRecentColors(){let n=oc.recentColors.map((r,s)=>`<div class="ag-recent-color" id=${s} style="background-color: ${r}; width: 15px; height: 15px;" recent-color="${r}" tabIndex="${this.tabIndex}"></div>`);this.recentColors.innerHTML=n.join("")}setValue(t){let n=ai.Color.fromString(t),[r,s,o]=n.toHSB();this.H=(isNaN(r)?0:r)/360,this.A=n.a;let a=this.spectrumHueRect||this.refreshHueRect(),l=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=`${(this.H-1)*-a.width}px`,this.spectrumAlphaSlider.style.left=`${this.A*l.width}px`,this.setSpectrumValue(s,o)}onRecentColorClick(t){let n=t.target;if(!M.exists(n.id))return;let r=parseInt(n.id,10);this.setValue(oc.recentColors[r]),this.destroy()}addRecentColor(){let n=ai.Color.fromHSB(this.H*360,this.S,this.B,this.A).toRgbaString(),r=oc.recentColors;!this.colorChanged||r[0]===n||(r=r.filter(s=>s!=n),r=[n].concat(r),r.length>oc.maxRecentColors&&(r=r.slice(0,oc.maxRecentColors)),oc.recentColors=r)}destroy(){this.addRecentColor(),super.destroy()}};return i.maxRecentColors=8,i.recentColors=[],i.TEMPLATE=`<div class="ag-color-panel" tabindex="-1">
            <div ref="spectrumColor" class="ag-spectrum-color">
                <div class="ag-spectrum-sat ag-spectrum-fill">
                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">
                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>
                    </div>
                </div>
            </div>
            <div class="ag-spectrum-tools">
                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">
                    <div class="ag-spectrum-hue-background"></div>
                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">
                    <div class="ag-spectrum-alpha-background"></div>
                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="recentColors" class="ag-recent-colors"></div>
            </div>
        </div>`,i})();oe([ce("spectrumColor")],ma.prototype,"spectrumColor",2);oe([ce("spectrumVal")],ma.prototype,"spectrumVal",2);oe([ce("spectrumDragger")],ma.prototype,"spectrumDragger",2);oe([ce("spectrumHue")],ma.prototype,"spectrumHue",2);oe([ce("spectrumHueSlider")],ma.prototype,"spectrumHueSlider",2);oe([ce("spectrumAlpha")],ma.prototype,"spectrumAlpha",2);oe([ce("spectrumAlphaSlider")],ma.prototype,"spectrumAlphaSlider",2);oe([ce("recentColors")],ma.prototype,"recentColors",2);oe([J],ma.prototype,"postConstruct",1);var qH=ma,pL=class extends Ff{constructor(i){super(ze({pickerAriaLabelKey:"ariaLabelColorPicker",pickerAriaLabelValue:"Color Picker",pickerType:"ag-list",className:"ag-color-picker",pickerIcon:"colorPicker"},i))}postConstruct(){super.postConstruct(),this.value&&this.setValue(this.value)}createPickerComponent(){let i=this.getGui().getBoundingClientRect();return this.createBean(new wr({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:i.right-190,y:i.top-250}))}renderAndPositionPicker(){let i=this.pickerComponent,e=this.createBean(new qH({picker:this}));return i.addCssClass("ag-color-dialog"),e.addDestroyFunc(()=>{i.isAlive()&&this.destroyBean(i)}),i.setParentComponent(this),i.setBodyComponent(e),e.setValue(this.getValue()),e.getGui().focus(),i.addDestroyFunc(()=>{this.isDestroyingPicker?this.isDestroyingPicker=!1:(this.beforeHidePicker(),this.isDestroyingPicker=!0,e.isAlive()&&this.destroyBean(e),this.isAlive()&&this.getFocusableElement().focus())}),()=>{var t;return(t=this.pickerComponent)==null?void 0:t.close()}}setValue(i){return this.value===i?this:(this.eDisplayField.style.backgroundColor=i,super.setValue(i))}getValue(){return this.value}},G_=(()=>{let i=class mL extends ae{constructor(t){super(),this.chartMenuUtils=t}init(){let t={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("callout"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(mL.TEMPLATE,{calloutGroup:t,calloutLengthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.length","length",40),calloutStrokeWidthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.strokeWidth","strokeWidth",10),labelOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLabel.offset","offset",30)})}};return i.TEMPLATE=`<div>
            <ag-group-component ref="calloutGroup">
                <ag-slider ref="calloutLengthSlider"></ag-slider>
                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>
                <ag-slider ref="labelOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,i})();oe([k("chartTranslationService")],G_.prototype,"chartTranslationService",2);oe([J],G_.prototype,"init",1);var XH=G_,U_=(()=>{let i=class gL extends ae{constructor(t){super(),this.chartMenuUtils=t}init(){let t={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("cap"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0},n=this.chartMenuUtils.getDefaultSliderParams("cap.lengthRatio","capLengthRatio",1);n.step=.05,this.setTemplate(gL.TEMPLATE,{capsGroup:t,capLengthRatioSlider:n})}};return i.TEMPLATE=`<div>
            <ag-group-component ref="capsGroup">
                <ag-slider ref="capLengthRatioSlider"></ag-slider>
            </ag-group-component>
        </div>`,i})();oe([k("chartTranslationService")],U_.prototype,"chartTranslationService",2);oe([J],U_.prototype,"init",1);var ZH=U_,H_=(()=>{let i=class fL extends ae{constructor(t){super(),this.chartMenuUtils=t}init(){let t={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("connectorLine"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(fL.TEMPLATE,{lineGroup:t,lineColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("line.stroke"),lineStrokeWidthSlider:this.getSliderParams("strokeWidth",10,"line.strokeWidth"),lineDashSlider:this.getSliderParams("lineDash",30,"line.lineDash",1,!0),lineOpacitySlider:this.getSliderParams("strokeOpacity",1,"line.strokeOpacity",.05)})}getSliderParams(t,n,r,s=1,o=!1){let a=this.chartMenuUtils.getDefaultSliderParams(r,t,n,o);return a.step=s,a}};return i.TEMPLATE=`<div>
            <ag-group-component ref="lineGroup">
                <ag-color-picker ref="lineColorPicker"></ag-color-picker>
                <ag-slider ref="lineStrokeWidthSlider"></ag-slider>
                <ag-slider ref="lineOpacitySlider"></ag-slider>
                <ag-slider ref="lineDashSlider"></ag-slider>                
            </ag-group-component>
        </div>`,i})();oe([k("chartTranslationService")],H_.prototype,"chartTranslationService",2);oe([J],H_.prototype,"init",1);var QH=H_,z_=(()=>{let i=class vL extends ae{constructor(t){super(),this.chartMenuUtils=t}init(){let t={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("whisker"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(vL.TEMPLATE,{whiskersGroup:t,whiskerColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("whisker.stroke"),whiskerThicknessSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeWidth","strokeWidth",10),whiskerOpacitySlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeOpacity","strokeOpacity",1),whiskerLineDashSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDash","lineDash",30,!0),whiskerLineDashOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDashOffset","lineDashOffset",30)})}};return i.TEMPLATE=`<div>
            <ag-group-component ref="whiskersGroup">
                <ag-color-picker ref="whiskerColorPicker"></ag-color-picker>
                <ag-slider ref="whiskerThicknessSlider"></ag-slider>
                <ag-slider ref="whiskerOpacitySlider"></ag-slider>
                <ag-slider ref="whiskerLineDashSlider"></ag-slider>
                <ag-slider ref="whiskerLineDashOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,i})();oe([k("chartTranslationService")],z_.prototype,"chartTranslationService",2);oe([J],z_.prototype,"init",1);var JH=z_,ky=(()=>{let i=class yL extends ae{constructor(t){super(),this.chartMenuUtils=t,this.activePanels=[]}init(){let t={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("seriesItems"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(yL.TEMPLATE,{seriesItemsGroup:t,seriesItemSelect:this.getSeriesItemsParams()}),this.initSeriesControls()}getSeriesItemsParams(){let t=[{value:"positive",text:this.chartTranslationService.translate("seriesItemPositive")},{value:"negative",text:this.chartTranslationService.translate("seriesItemNegative")}],n=r=>{this.destroyActivePanels(),this.initSeriesControls(r)};return{label:this.chartTranslationService.translate("seriesItemType"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:t,value:"positive",onValueChange:n}}initSeriesControls(t="positive"){this.initSlider("strokeWidth",10,`item.${t}.strokeWidth`),this.initSlider("lineDash",30,`item.${t}.lineDash`,1,!0),this.initSlider("strokeOpacity",1,`item.${t}.strokeOpacity`,.05,!1),this.initSlider("fillOpacity",1,`item.${t}.fillOpacity`,.05,!1),this.initItemLabels(t)}initSlider(t,n,r,s=1,o=!1){let a=this.chartMenuUtils.getDefaultSliderParams(r,t,n,o);a.step=s;let l=this.seriesItemsGroup.createManagedBean(new In(a));this.seriesItemsGroup.addItem(l),this.activePanels.push(l)}initItemLabels(t){let n=this.chartMenuUtils.getDefaultFontPanelParams(`item.${t}.label`,"seriesItemLabels"),r=this.createBean(new uc(n));this.seriesItemsGroup.addItem(r),this.activePanels.push(r)}destroyActivePanels(){this.activePanels.forEach(t=>{M.removeFromParent(t.getGui()),this.destroyBean(t)})}destroy(){this.destroyActivePanels(),super.destroy()}};return i.TEMPLATE=`<div>
            <ag-group-component ref="seriesItemsGroup">
                <ag-select ref="seriesItemSelect"></ag-select>
            </ag-group-component>
        </div>`,i})();oe([ce("seriesItemsGroup")],ky.prototype,"seriesItemsGroup",2);oe([k("chartTranslationService")],ky.prototype,"chartTranslationService",2);oe([J],ky.prototype,"init",1);var ez=ky,W_=(()=>{let i=class CL extends ae{constructor(t){super(),this.chartMenuUtils=t}init(){let t={cssIdentifier:"charts-format-sub-level",direction:"vertical",enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(CL.TEMPLATE,{groupSpacing:bt(ze({},t),{title:this.chartTranslationService.translate("group")}),tileSpacing:bt(ze({},t),{title:this.chartTranslationService.translate("tile")}),groupPaddingSlider:this.getSliderParams("padding","group.padding"),groupSpacingSlider:this.getSliderParams("spacing","group.gap"),tilePaddingSlider:this.getSliderParams("padding","tile.padding"),tileSpacingSlider:this.getSliderParams("spacing","tile.gap")})}getSliderParams(t,n){return this.chartMenuUtils.getDefaultSliderParams(n,t,10)}};return i.TEMPLATE=`<div>
            <ag-group-component ref="groupSpacing">
                <ag-slider ref="groupPaddingSlider"></ag-slider>
                <ag-slider ref="groupSpacingSlider"></ag-slider>
            </ag-group-component>
            <ag-group-component ref="tileSpacing">
                <ag-slider ref="tilePaddingSlider"></ag-slider>
                <ag-slider ref="tileSpacingSlider"></ag-slider>
            </ag-group-component>
        </div>`,i})();oe([k("chartTranslationService")],W_.prototype,"chartTranslationService",2);oe([J],W_.prototype,"init",1);var tz=W_,Iy=(()=>{let i=class bL extends ae{constructor({chartController:t,chartOptionsService:n,seriesType:r,isExpandedOnInit:s=!1}){super(),this.activePanels=[],this.widgetFuncs={lineWidth:()=>this.initStrokeWidth("lineWidth"),strokeWidth:()=>this.initStrokeWidth("strokeWidth"),lineColor:()=>this.initLineColor(),lineDash:()=>this.initLineDash(),lineOpacity:()=>this.initLineOpacity(),fillOpacity:()=>this.initFillOpacity(),markers:()=>this.initMarkers(),labels:()=>this.initLabels(),shadow:()=>this.initShadow(),tooltips:()=>this.initTooltips(),bins:()=>this.initBins(),whiskers:()=>this.initWhiskers(),caps:()=>this.initCaps(),connectorLine:()=>this.initConnectorLine(),seriesItems:()=>this.initSeriesItemsPanel(),tileSpacing:()=>this.initTileSpacingPanel(),groupType:()=>this.initGroupType()},this.seriesWidgetMappings={bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"],donut:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],scatter:["tooltips","markers","labels"],bubble:["tooltips","markers","labels"],area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],"radial-column":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","groupType"],"radial-bar":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","groupType"],"radar-line":["tooltips","strokeWidth","lineDash","lineOpacity","markers","labels"],"radar-area":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","markers","labels"],nightingale:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","groupType"],"box-plot":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","whiskers","caps"],"range-bar":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels"],"range-area":["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],treemap:["tooltips","tileSpacing"],sunburst:["tooltips"],heatmap:["tooltips","labels","lineColor","lineWidth","lineOpacity"],waterfall:["tooltips","connectorLine","seriesItems"]},this.chartController=t,this.chartOptionsService=n,this.seriesType=r||this.chartController.getChartSeriesType(),this.isExpandedOnInit=s}init(){let t={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("series"),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0};this.setTemplate(bL.TEMPLATE,{seriesGroup:t}),this.chartMenuUtils=this.createManagedBean(new Ru(this.chartOptionsService.getSeriesOptionsProxy(()=>this.seriesType))),this.chartOptions=this.chartMenuUtils.getChartOptions(),this.addManagedListener(this.chartController,ns.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()}refreshWidgets(){this.destroyActivePanels(),this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>{var n;this.isAlive()&&(this.chartController.isComboChart()&&(this.updateSeriesType(),this.initSeriesSelect()),((n=this.seriesWidgetMappings[this.seriesType])!=null?n:[]).forEach(s=>this.widgetFuncs[s]()))}).catch(n=>console.error("AG Grid - chart rendering failed",n))}initSeriesSelect(){let t=this.seriesGroup.createManagedBean(new tn({label:this.translate("seriesType"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:this.getSeriesSelectOptions(),value:`${this.seriesType}`,onValueChange:n=>{this.seriesType=n,this.refreshWidgets()}}));this.seriesGroup.addItem(t),this.activePanels.push(t)}initTooltips(){let t=this.createBean(new Fo(this.chartMenuUtils.addValueParams("tooltip.enabled",{label:this.translate("tooltips"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex"})));this.addWidget(t)}initLineColor(){let t=this.createBean(new pL(this.chartMenuUtils.getDefaultColorPickerParams("stroke","strokeColor")));this.addWidget(t)}initStrokeWidth(t){let n=this.createBean(new In(this.chartMenuUtils.getDefaultSliderParams("strokeWidth",t,10)));this.addWidget(n)}initLineDash(){let t=this.createBean(new In(this.chartMenuUtils.getDefaultSliderParams("lineDash","lineDash",30,!0)));this.addWidget(t)}initLineOpacity(){let t=this.chartMenuUtils.getDefaultSliderParams("strokeOpacity","strokeOpacity",1);t.step=.05;let n=this.createBean(new In(t));this.addWidget(n)}initFillOpacity(){let t=this.chartMenuUtils.getDefaultSliderParams("fillOpacity","fillOpacity",1);t.step=.05;let n=this.createBean(new In(t));this.addWidget(n)}initLabels(){let t=LO(this.seriesType),n=t?"calloutLabel":"label",r=t?"calloutLabels":"labels",s=this.chartMenuUtils.getDefaultFontPanelParams(n,r),o=this.createBean(new uc(s));if(t){let a=this.createBean(new XH(this.chartMenuUtils));o.addCompToPanel(a),this.activePanels.push(a)}if(this.addWidget(o),t){let a=this.chartMenuUtils.getDefaultFontPanelParams("sectorLabel","sectorLabels"),l=this.createBean(new uc(a)),c=this.getSectorLabelPositionRatio();l.addCompToPanel(c),this.addWidget(l)}if(this.seriesType==="range-bar"){let a=[{value:"inside",text:this.translate("inside")},{value:"outside",text:this.translate("outside")}],l=o.createManagedBean(new tn(this.chartMenuUtils.addValueParams("label.placement",{label:this.translate("labelPlacement"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:a})));o.addCompToPanel(l),this.activePanels.push(l);let c=o.createManagedBean(new In(this.chartMenuUtils.getDefaultSliderParams("label.padding","padding",200)));o.addCompToPanel(c),this.activePanels.push(c)}}getSectorLabelPositionRatio(){let t=this.chartMenuUtils.getDefaultSliderParams("sectorLabel.positionRatio","positionRatio",1);return t.step=.05,this.createBean(new In(t))}initShadow(){let t=this.createBean(new jH(this.chartMenuUtils));this.addWidget(t)}initMarkers(){let t=this.createBean(new YH(this.chartOptionsService,this.chartMenuUtils));this.addWidget(t)}initBins(){var t;let n=this.chartMenuUtils.getDefaultSliderParams("binCount","histogramBinCount",20),r=((t=this.chartOptions.getValue("bins"))!=null?t:this.chartOptions.getValue("calculatedBins",!0)).length;n.value=`${r}`,n.maxValue=Math.max(r,20);let s=this.createBean(new In(n));this.addWidget(s)}initWhiskers(){let t=this.createBean(new JH(this.chartMenuUtils));this.addWidget(t)}initCaps(){let t=this.createBean(new ZH(this.chartMenuUtils));this.addWidget(t)}initConnectorLine(){let t=this.createBean(new QH(this.chartMenuUtils));this.addWidget(t)}initSeriesItemsPanel(){let t=this.createBean(new ez(this.chartMenuUtils));this.addWidget(t)}initTileSpacingPanel(){let t=this.createBean(new tz(this.chartMenuUtils));this.addWidget(t)}initGroupType(){let t=this.createBean(new tn({label:this.chartTranslationService.translate("seriesGroupType"),options:$c.SERIES_GROUP_TYPES.map(n=>({value:n,text:this.chartTranslationService.translate(`${n}SeriesGroupType`)})),value:this.chartController.getSeriesGroupType(),onValueChange:n=>this.chartController.setSeriesGroupType(n)}));this.addWidget(t)}addWidget(t){this.seriesGroup.addItem(t),this.activePanels.push(t)}getSeriesSelectOptions(){let t=this.getActiveSeriesTypes();return["area","bar","line"].filter(n=>t.includes(n)).map(n=>({value:n,text:this.translate(n)}))}updateSeriesType(){let t=this.getActiveSeriesTypes();!t.includes(this.seriesType)&&t.length>0&&(this.seriesType=t[0])}getActiveSeriesTypes(){return this.chartController.getActiveSeriesChartTypes().map(t=>Ai(t.chartType))}translate(t){return this.chartTranslationService.translate(t)}destroyActivePanels(){this.activePanels.forEach(t=>{M.removeFromParent(t.getGui()),this.destroyBean(t)})}destroy(){this.destroyActivePanels(),super.destroy()}};return i.TEMPLATE=`<div>
            <ag-group-component ref="seriesGroup">
            </ag-group-component>
        </div>`,i})();oe([ce("seriesGroup")],Iy.prototype,"seriesGroup",2);oe([k("chartTranslationService")],Iy.prototype,"chartTranslationService",2);oe([J],Iy.prototype,"init",1);var iz=Iy,$_=(()=>{let i=class SL extends ae{constructor({chartMenuParamsFactory:t,isExpandedOnInit:n=!1}){super(),this.chartMenuUtils=t,this.isExpandedOnInit=n}init(){let t=this.chartMenuUtils.addEnableParams("gradientLegend.enabled",{cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslationService.translate("legend"),suppressEnabledCheckbox:!1,suppressToggleExpandOnEnableChange:!0,expanded:this.isExpandedOnInit,items:[this.createLabelPanel()]});this.setTemplate(SL.TEMPLATE,{legendGroup:t,legendPositionSelect:this.chartMenuUtils.getDefaultLegendParams("gradientLegend.position"),gradientReverseCheckbox:this.getGradientReverseCheckboxParams(),gradientThicknessSlider:this.chartMenuUtils.getDefaultSliderParams("gradientLegend.gradient.thickness","thickness",40),gradientPreferredLengthSlider:this.chartMenuUtils.getDefaultSliderParams("gradientLegend.gradient.preferredLength","preferredLength",300),legendSpacingSlider:this.chartMenuUtils.getDefaultSliderParams("gradientLegend.spacing","spacing",200)})}getGradientReverseCheckboxParams(){return this.chartMenuUtils.addValueParams("gradientLegend.reverseOrder",{label:this.chartTranslationService.translate("reverseDirection"),labelWidth:"flex"})}createLabelPanel(){let t={enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:this.chartMenuUtils,keyMapper:n=>`gradientLegend.scale.label.${n}`};return this.createManagedBean(new uc(t))}};return i.TEMPLATE=`<div>
            <ag-group-component ref="legendGroup">
                <ag-select ref="legendPositionSelect"></ag-select>
                <ag-checkbox ref="gradientReverseCheckbox"></ag-checkbox>
                <ag-slider ref="gradientThicknessSlider"></ag-slider>
                <ag-slider ref="gradientPreferredLengthSlider"></ag-slider>
                <ag-slider ref="legendSpacingSlider"></ag-slider>
            </ag-group-component>
        </div>`,i})();oe([k("chartTranslationService")],$_.prototype,"chartTranslationService",2);oe([J],$_.prototype,"init",1);var nz=$_,K_=class extends be{constructor(i,e,t,n){super(),this.chartController=i,this.eGui=e,this.cssClass=t,this.createPanels=n,this.panels=[]}postConstruct(){this.addManagedListener(this.chartController,ns.EVENT_CHART_UPDATED,()=>this.refreshPanels(!0)),this.addManagedListener(this.chartController,ns.EVENT_CHART_API_UPDATE,()=>this.refreshPanels(!1))}addComponent(i){this.createBean(i),this.panels.push(i),i.addCssClass(this.cssClass),this.eGui.appendChild(i.getGui())}refreshPanels(i){let e=this.chartController.getChartType(),t=this.chartController.isGrouping(),n=Ai(e);i&&e===this.chartType&&t===this.isGrouping||(this.destroyPanels(),this.createPanels(e,n),this.chartType=e,this.isGrouping=t)}destroyPanels(){this.panels.forEach(i=>{M.removeFromParent(i.getGui()),this.destroyBean(i)}),this.panels=[]}destroy(){this.destroyPanels(),super.destroy()}};oe([J],K_.prototype,"postConstruct",1);var rz={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"}]},xL=(()=>{let i=class _L extends ae{constructor(t){super(_L.TEMPLATE),this.chartMenuContext=t}init(){this.chartPanelFeature=this.createManagedBean(new K_(this.chartMenuContext.chartController,this.getGui(),"ag-chart-format-section",(t,n)=>this.createPanels(t,n))),this.chartPanelFeature.refreshPanels()}createPanels(t,n){var r;(r=this.getFormatPanelDef().groups)==null||r.forEach(s=>{let o=s.type;if(!this.isGroupPanelShownInSeries(o,n))return;let a=bt(ze({},this.chartMenuContext),{isExpandedOnInit:s.isOpen,seriesType:n});switch(o){case"chart":this.chartPanelFeature.addComponent(new KH(a));break;case"legend":let l=["treemap","sunburst","heatmap"].includes(t)?new nz(a):new VH(a);this.chartPanelFeature.addComponent(l);break;case"axis":oF(n)?this.chartPanelFeature.addComponent(new HH(a)):ku(n)&&(this.chartPanelFeature.addComponent(new qv("xAxis",a)),this.chartPanelFeature.addComponent(new qv("yAxis",a)));break;case"horizontalAxis":this.chartPanelFeature.addComponent(new qv("xAxis",a));break;case"verticalAxis":this.chartPanelFeature.addComponent(new qv("yAxis",a));break;case"series":this.chartPanelFeature.addComponent(new iz(a));break;case"navigator":M.warnOnce("'navigator' is now displayed in the charts advanced settings instead of the format panel, and this setting will be ignored.");default:M.warnOnce(`Invalid charts format panel group name supplied: '${s.type}'`)}})}getFormatPanelDef(){var t;let n=(t=this.gos.get("chartToolPanelsDef"))==null?void 0:t.formatPanel;return n||rz}isGroupPanelShownInSeries(t,n){return["chart","legend","series"].includes(t)||ku(n)&&["axis","horizontalAxis","verticalAxis"].includes(t)||oF(n)&&t==="axis"}};return i.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',i})();oe([J],xL.prototype,"init",1);var sz=xL,oz="ag-chart-mini-thumbnail-canvas",az="AG Grid - chart update failed",Sc=class extends ae{constructor(i,e){super(),this.tooltipName=e,this.size=58,this.padding=5,this.root=new le.Group;let t=new le.Scene({width:this.size,height:this.size});t.canvas.element.classList.add(oz),t.setRoot(this.root),t.setContainer(i),this.scene=t}init(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render().catch(i=>{console.error(`${az}`,i)})}};oe([k("chartTranslationService")],Sc.prototype,"chartTranslationService",2);oe([J],Sc.prototype,"init",1);var Wn=class extends Sc{constructor(i,e){super(i,e),this.stroke="gray",this.axisOvershoot=3}addAxes(){let i=this.size,e=this.padding,t=new le.Line;t.x1=e,t.y1=e,t.x2=e,t.y2=i-e+this.axisOvershoot,t.stroke=this.stroke;let n=new le.Line;n.x1=e-this.axisOvershoot+1,n.y1=i-e,n.x2=i-e+1,n.y2=i-e,n.stroke=this.stroke;let r=this.root;r.append(t),r.append(n)}};oe([J],Wn.prototype,"addAxes",1);function Tg(i){let{stacked:e,size:t,padding:n,xScalePadding:r,xScaleDomain:s,yScaleDomain:o}=i,a=new le.BandScale;a.domain=s,a.range=[n,t-n],a.paddingInner=r,a.paddingOuter=r;let l=new le.LinearScale;l.domain=o,l.range=[t-n,n];let c=(u,d,h)=>u.map((p,m)=>{let g=h.convert(p),f=new le.Rect;return f.x=d.convert(m),f.y=g,f.width=d.bandwidth,f.height=h.convert(0)-g,f.strokeWidth=0,f.crisp=!0,f});return e?i.data.map(u=>c(u,a,l)):c(i.data,a,l)}function j_(i,e,t,n){let r=new le.LinearScale;r.domain=[0,4],r.range=[n,t-n];let s=new le.LinearScale;s.domain=[0,10],s.range=[t-n,n];let o=e.map(l=>{let c=new le.Path;return c.strokeWidth=3,c.lineCap="round",c.fill=void 0,l.forEach((u,d)=>{c.path[d>0?"lineTo":"moveTo"](r.convert(d),s.convert(u))}),c}),a=new le.Group;return a.setClipRectInGroupCoordinateSpace(new le.BBox(n,n,t-n*2,t-n*2)),a.append(o),i.append(a),o}function wL(i,e,t,n,r,s=0){let o=new le.LinearScale;o.domain=[0,7],o.range=[-Math.PI,Math.PI].map(h=>h+Math.PI/2);let a=new le.LinearScale;a.domain=[0,10],a.range=[n,r];let l=[],c=e.map(h=>{let p=new le.Path;return p.strokeWidth=1,p.strokeOpacity=.5,p.lineCap="round",p.fill=void 0,p.fillOpacity=.8,h.forEach((m,g)=>{let f=o.convert(g),y=n+r-a.convert(m),b=y*Math.cos(f),v=y*Math.sin(f);if(p.path[g>0?"lineTo":"moveTo"](b,v),s>0){let S=new le.Circle;S.x=b,S.y=v,S.size=s,l.push(S)}}),p.path.closePath(),p}),u=new le.Group,d=t/2;return u.translationX=d,u.translationY=d,u.append([...c,...l]),i.append(u),{paths:c,markers:l}}function Fy(i){let[e,t]=[1/0,-1/0];return{processedData:i.reduce((r,s,o)=>{var a;let l=o>0?r[o-1]:void 0;(a=r[o])!=null||(r[o]=[]);let c=r[o];return s.forEach((u,d)=>{l&&(u+=l[d]),c[d]=u,c[d]<e&&(e=c[d]),c[d]>t&&(t=c[d])}),r},[]),min:e,max:t}}var lz=(()=>{let i=class extends Wn{constructor(e,t,n){super(e,"groupedColumnTooltip"),this.columnData=[2,3,4];let{root:r,columnData:s,size:o,padding:a}=this;this.columns=Tg({stacked:!1,root:r,data:s,size:o,padding:a,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),r.append(this.columns),this.updateColors(t,n)}updateColors(e,t){this.columns.forEach((n,r)=>{n.fill=e[r],n.stroke=t[r]})}};return i.chartType="groupedColumn",i})(),cz=(()=>{let i=class EL extends Wn{constructor(t,n,r,s,o,a=EL.data,l=[0,16],c="stackedColumnTooltip"){super(t,c);let{root:u,size:d,padding:h}=this;this.stackedColumns=Tg({stacked:!0,root:u,data:a,size:d,padding:h,xScaleDomain:[0,1,2],yScaleDomain:l,xScalePadding:.3}),u.append([].concat.apply([],this.stackedColumns)),this.updateColors(n,r)}updateColors(t,n){this.stackedColumns.forEach((r,s)=>r.forEach(o=>{o.fill=t[s],o.stroke=n[s]}))}};return i.chartType="stackedColumn",i.data=[[8,12,16],[6,9,12],[2,3,4]],i})(),TL=cz,uz=(()=>{let i=class ML extends TL{constructor(t,n,r,s,o){super(t,n,r,s,o,ML.data,[0,10],"normalizedColumnTooltip")}};return i.chartType="normalizedColumn",i.data=[[10,10,10],[6,7,8],[2,4,6]],i})(),dz=uz,hz=(()=>{let i=class extends Wn{constructor(e,t,n){super(e,"groupedBarTooltip");let r=this.padding,s=this.size,o=[2,3,4],a=new le.BandScale;a.domain=[0,1,2],a.range=[r,s-r],a.paddingInner=.3,a.paddingOuter=.3;let l=new le.LinearScale;l.domain=[0,4],l.range=[s-r,r];let c=l.convert(0),u=a.bandwidth;this.bars=o.map((d,h)=>{let p=new le.Rect;return p.x=r,p.y=a.convert(h),p.width=c-l.convert(d),p.height=u,p.strokeWidth=0,p.crisp=!0,p}),this.updateColors(t,n),this.root.append(this.bars)}updateColors(e,t){this.bars.forEach((n,r)=>{n.fill=e[r],n.stroke=t[r]})}};return i.chartType="groupedBar",i})(),pz=(()=>{let i=class AL extends Wn{constructor(t,n,r,s,o,a=AL.data,l=[0,16],c="stackedBarTooltip"){super(t,c);let u=this.size,d=this.padding,h=new le.BandScale;h.domain=[0,1,2],h.range=[d,u-d],h.paddingInner=.3,h.paddingOuter=.3;let p=new le.LinearScale;p.domain=l,p.range=[u-d,d];let m=p.convert(0),g=h.bandwidth;this.bars=a.map(f=>f.map((y,b)=>{let v=new le.Rect;return v.x=d,v.y=h.convert(b),v.width=m-p.convert(y),v.height=g,v.strokeWidth=0,v.crisp=!0,v})),this.updateColors(n,r),this.root.append([].concat.apply([],this.bars))}updateColors(t,n){this.bars.forEach((r,s)=>r.forEach(o=>{o.fill=t[s],o.stroke=n[s]}))}};return i.chartType="stackedBar",i.data=[[8,12,16],[6,9,12],[2,3,4]],i})(),PL=pz,mz=(()=>{let i=class DL extends PL{constructor(t,n,r,s,o){super(t,n,r,s,o,DL.data,[0,10],"normalizedBarTooltip")}};return i.chartType="normalizedBar",i.data=[[10,10,10],[6,7,8],[2,4,6]],i})(),gz=mz,Rs=le.toRadians,i_=(()=>{let i=class extends Sc{constructor(e,t,n,r,s,o=.6,a="donutTooltip"){super(e,a);let l=(this.size-this.padding*2)/2,c=l+this.padding,u=[[Rs(-90),Rs(30)],[Rs(30),Rs(120)],[Rs(120),Rs(180)],[Rs(180),Rs(210)],[Rs(210),Rs(240)],[Rs(240),Rs(270)]];this.sectors=u.map(([d,h])=>{let p=new le.Sector;return p.centerX=c,p.centerY=c,p.innerRadius=l*o,p.outerRadius=l,p.startAngle=d,p.endAngle=h,p.stroke=void 0,p.strokeWidth=0,p.inset=.75,p}),this.updateColors(t,n),this.root.append(this.sectors)}updateColors(e,t){this.sectors.forEach((n,r)=>{n.fill=e[r%e.length],n.stroke=t[r%t.length]})}};return i.chartType="donut",i})(),fz=(()=>{let i=class extends i_{constructor(e,t,n,r,s){super(e,t,n,r,s,0,"pieTooltip")}};return i.chartType="pie",i})(),vz=(()=>{let i=class extends Wn{constructor(e,t,n){super(e,"lineTooltip"),this.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],this.lines=j_(this.root,this.data,this.size,this.padding),this.updateColors(t,n)}updateColors(e,t){this.lines.forEach((n,r)=>{n.stroke=e[r]})}};return i.chartType="line",i})(),yz=(()=>{let i=class extends Wn{constructor(e,t,n){super(e,"scatterTooltip");let r=this.size,s=this.padding,o=[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]],a=new le.LinearScale;a.domain=[-.5,4],a.range=[s*2,r-s];let l=new le.LinearScale;l.domain=[-.5,3.5],l.range=[r-s,s];let c=[];o.forEach(d=>{d.forEach(([h,p])=>{let m=new le.Arc;m.strokeWidth=0,m.centerX=a.convert(h),m.centerY=l.convert(p),m.radius=2.5,c.push(m)})}),this.points=c,this.updateColors(t,n);let u=new le.Group;u.setClipRectInGroupCoordinateSpace(new le.BBox(s,s,r-s*2,r-s*2)),u.append(this.points),this.root.append(u)}updateColors(e,t){this.points.forEach((n,r)=>{n.stroke=t[r%t.length],n.fill=e[r%e.length]})}};return i.chartType="scatter",i})(),Cz=(()=>{let i=class extends Wn{constructor(e,t,n){super(e,"bubbleTooltip");let r=this.size,s=this.padding,o=[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]],a=new le.LinearScale;a.domain=[0,1],a.range=[s*2,r-s];let l=new le.LinearScale;l.domain=[0,1],l.range=[r-s,s];let c=[];o.forEach(d=>{d.forEach(([h,p,m])=>{let g=new le.Arc;g.strokeWidth=0,g.centerX=a.convert(h),g.centerY=l.convert(p),g.radius=m,g.fillOpacity=.7,c.push(g)})}),this.points=c,this.updateColors(t,n);let u=new le.Group;u.setClipRectInGroupCoordinateSpace(new le.BBox(s,s,r-s*2,r-s*2)),u.append(this.points),this.root.append(u)}updateColors(e,t){this.points.forEach((n,r)=>{n.stroke=t[r%t.length],n.fill=e[r%e.length]})}};return i.chartType="bubble",i})(),bz=(()=>{let i=class kL extends Wn{constructor(t,n,r,s,o,a=kL.data){super(t,"groupedAreaTooltip");let l=this.size,c=this.padding,u=new le.BandScale;u.domain=[0,1,2],u.paddingInner=1,u.paddingOuter=0,u.range=[c+.5,l-c-.5];let d=new le.LinearScale;d.domain=[0,6],d.range=[l-c+.5,c];let p=a.length*2-1,m=[],g=d.convert(0);a.forEach((f,y)=>{let b=u.convert(y);f.forEach((v,S)=>{let w=d.convert(v),T=m[S]||(m[S]=[]);T[y]={x:b,y:w},T[p-y]={x:b,y:g}})}),this.areas=m.reverse().map(f=>{let y=new le.Path;y.strokeWidth=1,y.strokeOpacity=.75,y.fillOpacity=.7;let b=y.path;return b.clear(),f.forEach((v,S)=>b[S>0?"lineTo":"moveTo"](v.x,v.y)),b.closePath(),y}),this.updateColors(n,r),this.root.append(this.areas)}updateColors(t,n){this.areas.forEach((r,s)=>{r.fill=t[s],r.stroke=n[s]})}};return i.chartType="area",i.data=[[1,3,5],[2,6,4],[5,3,1]],i})(),Sz=bz,xz=(()=>{let i=class IL extends Wn{constructor(t,n,r,s,o,a=IL.data,l="stackedAreaTooltip"){super(t,l);let c=this.size,u=this.padding,d=new le.BandScale;d.domain=[0,1,2],d.paddingInner=1,d.paddingOuter=0,d.range=[u+.5,c-u-.5];let h=new le.LinearScale;h.domain=[0,16],h.range=[c-u+.5,u+.5];let m=a.length*2-1,g=[];a.forEach((f,y)=>{let b=d.convert(y),v=0;f.forEach((S,w)=>{let T=h.convert(v+S),D=g[w]||(g[w]=[]);D[y]={x:b,y:T},D[m-y]={x:b,y:h.convert(v)},v+=S})}),this.areas=g.map(f=>{let y=new le.Path;y.strokeWidth=0;let b=y.path;return b.clear(),f.forEach((v,S)=>b[S>0?"lineTo":"moveTo"](v.x,v.y)),b.closePath(),y}),this.updateColors(n,r),this.root.append(this.areas)}updateColors(t,n){this.areas.forEach((r,s)=>{r.fill=t[s],r.stroke=n[s]})}};return i.chartType="stackedArea",i.data=[[2,3,2],[3,6,5],[6,2,2]],i})(),Y_=xz,q_=class FL extends Y_{constructor(e,t,n,r,s,o=FL.data){super(e,t,n,r,s,o,"normalizedAreaTooltip")}};q_.chartType="normalizedArea";q_.data=Y_.data.map(i=>{let e=i.reduce((t,n)=>t+n,0);return i.map(t=>t/e*16)});var _z=q_,wz=(()=>{let i=class extends Wn{constructor(e,t,n){super(e,"histogramTooltip");let r=this.padding,s=this.size,o=[2,5,11,13,10,6,1],a=new le.LinearScale;a.domain=[0,o.length],a.range=[r,s-r];let l=new le.LinearScale;l.domain=[0,o.reduce((u,d)=>Math.max(u,d),0)],l.range=[s-r,r];let c=l.convert(0);this.bars=o.map((u,d)=>{let h=l.convert(u),p=a.convert(d),m=a.convert(d+1),g=new le.Rect;return g.x=p,g.y=h,g.width=m-p,g.height=c-h,g.strokeWidth=1,g.strokeOpacity=.75,g.crisp=!0,g}),this.updateColors(t,n),this.root.append(this.bars)}updateColors([e],[t]){this.bars.forEach(n=>{n.fill=e,n.stroke=t})}};return i.chartType="histogram",i})(),Wu=class extends Sc{constructor(i,e){super(i,e),this.stroke="gray",this.showRadiusAxisLine=!0,this.showAngleAxisLines=!0}addAxes(){let i=this.size,e=this.padding,t=e*2,n=(i-t)/2,r=this.showAngleAxisLines?[n,n*.8,n*.6,n*.4]:[],s=new le.Line;s.x1=i/2,s.y1=e,s.x2=i/2,s.y2=i-e-n-r[r.length-1],s.stroke=this.stroke,s.strokeOpacity=.5,s.fill=void 0,s.visible=this.showRadiusAxisLine;let o=e+n;this.gridLines=r.map((l,c)=>{let u=new le.Path;return u.path.arc(o,o,l,0,2*Math.PI),u.strokeWidth=1,u.stroke=this.stroke,u.strokeOpacity=c===0?.5:.2,u.fill=void 0,u});let a=this.root;a.append(s),this.gridLines.length>0&&a.append(this.gridLines)}};oe([J],Wu.prototype,"addAxes",1);var Ez=(()=>{let i=class extends Wu{constructor(e,t,n){super(e,"radialColumnTooltip"),this.data=[[6,8,10,2,6,5],[4,4,3,6,4,4],[5,4,2,9,8,9]],this.showRadiusAxisLine=!1;let{padding:r,size:s,data:o}=this,a=(s-r*2)/2,c=a*.4,u=new le.BandScale;u.domain=o[0].map((f,y)=>y),u.range=[0,2*Math.PI],u.paddingInner=0,u.paddingOuter=0;let d=u.bandwidth*.7,{processedData:h,max:p}=Fy(o),m=new le.LinearScale;m.domain=[0,p],m.range=[c,a];let g=this.size/2;this.series=h.map((f,y)=>{let v=y===0?void 0:h[y-1],S=new le.Group({zIndex:1e6}),w=f.map((T,D)=>{let O=v?.[D],R=m.convert(T),L=m.convert(O??0),B=u.convert(D),$=B+d,U=le.getRadialColumnWidth(B,$,a,.5,.5),K=new le.RadialColumnShape;return K.scalingCenterX=g,K.scalingCenterY=g,K.columnWidth=U,K.innerRadius=L,K.outerRadius=R,K.startAngle=B,K.endAngle=$,K.isBeveled=!0,K.axisInnerRadius=c,K.axisOuterRadius=a,K.stroke=void 0,K.strokeWidth=0,K});return S.append(w),S.translationX=g,S.translationY=g,S}),this.root.append(this.series),this.updateColors(t,n)}updateColors(e,t){this.series.forEach((n,r)=>{var s;(s=n.children)==null||s.forEach(o=>{o.fill=e[r%e.length],o.stroke=t[r%t.length]})})}};return i.chartType="radialColumn",i})(),Tz=(()=>{let i=class extends Wu{constructor(e,t,n){super(e,"radialBarTooltip"),this.data=[[6,8,10],[4,4,3],[5,4,2]],this.showRadiusAxisLine=!1;let r=(this.size-this.padding)/2,o=r*.4,a=r+o,l=new le.BandScale;l.domain=this.data[0].map((f,y)=>y),l.range=[r,o],l.paddingInner=.5,l.paddingOuter=0;let c=l.bandwidth,{processedData:u,max:d}=Fy(this.data),h=new le.LinearScale;h.domain=[0,Math.ceil(d*1.5)];let p=3/2*Math.PI,m=p+2*Math.PI;h.range=[p,m];let g=this.size/2;this.series=u.map((f,y)=>{let b=y<0?void 0:u[y-1],v=new le.Group({zIndex:1e6}),S=f.map((w,T)=>{var D;let O=(D=b?.[T])!=null?D:0,R=a-l.convert(T),L=R+c,B=h.convert(O),$=h.convert(w),U=new le.Sector;return U.centerX=g,U.centerY=g,U.innerRadius=R,U.outerRadius=L,U.startAngle=B,U.endAngle=$,U.stroke=void 0,U.strokeWidth=0,U});return v.append(S),v}),this.root.append(this.series),this.updateColors(t,n)}updateColors(e,t){this.series.forEach((n,r)=>{var s;(s=n.children)==null||s.forEach(o=>{o.fill=e[r%e.length],o.stroke=t[r%t.length]})})}};return i.chartType="radialBar",i})(),Mz=(()=>{let i=class extends Wu{constructor(e,t,n){super(e,"radarLineTooltip"),this.markerSize=4,this.data=[[8,7,8,7,8,8,7,8],[6,8,5,10,6,7,4,6],[0,3,3,5,4,4,2,0]],this.showRadiusAxisLine=!1;let r=(this.size-this.padding*2)/2,s=0,{paths:o,markers:a}=wL(this.root,this.data,this.size,r,s,this.markerSize);this.lines=o,this.markers=a,this.updateColors(t,n)}updateColors(e,t){this.lines.forEach((n,r)=>{let s=this.data[r].length;n.stroke=e[r];let o=r*s,a=o+s;this.markers.slice(o,a).forEach(c=>{c.stroke=t[r],c.fill=e[r]})})}};return i.chartType="radarLine",i})(),Az=(()=>{let i=class extends Wu{constructor(e,t,n){super(e,"radarAreaTooltip"),this.data=[[8,10,5,7,4,1,5,8],[1,1,2,7,7,8,10,1],[4,5,9,9,4,2,3,4]],this.showRadiusAxisLine=!1;let r=(this.size-this.padding*2)/2,s=r-this.size*.3;this.areas=wL(this.root,this.data,this.size,r,s).paths,this.updateColors(t,n)}updateColors(e,t){this.areas.forEach((n,r)=>{n.fill=e[r],n.stroke=t[r]})}};return i.chartType="radarArea",i})(),Pz=(()=>{let i=class extends Wu{constructor(e,t,n){super(e,"nightingaleTooltip"),this.data=[[6,10,9,8,7,8],[4,6,5,4,5,5],[3,5,4,3,4,7]],this.showRadiusAxisLine=!1;let r=(this.size-this.padding*2)/2,s=new le.BandScale;s.domain=this.data[0].map((d,h)=>h),s.range=[-Math.PI,Math.PI],s.paddingInner=0,s.paddingOuter=0;let o=s.bandwidth*.7,{processedData:a,max:l}=Fy(this.data),c=new le.LinearScale;c.domain=[0,l],c.range=[0,r];let u=this.size/2;this.series=a.map((d,h)=>{let p=h<0?void 0:a[h-1],m=new le.Group({zIndex:1e6}),g=d.map((f,y)=>{let b=p?.[y],v=c.convert(f),S=c.convert(b??0),w=s.convert(y),T=w+o,D=new le.Sector;return D.centerX=u,D.centerY=u,D.innerRadius=S,D.outerRadius=v,D.startAngle=w,D.endAngle=T,D.stroke=void 0,D.strokeWidth=0,D});return m.append(g),m}),this.root.append(this.series),this.updateColors(t,n)}updateColors(e,t){this.series.forEach((n,r)=>{var s;(s=n.children)==null||s.forEach(o=>{o.fill=e[r%e.length],o.stroke=t[r%t.length]})})}};return i.chartType="nightingale",i})(),Dz=(()=>{let i=class extends Wn{constructor(e,t,n){super(e,"rangeBarTooltip");let r=[3,3.5,3];this.bars=this.createRangeBar(this.root,r,this.size,this.padding,"vertical"),this.updateColors(t,n)}updateColors(e,t){this.bars.forEach((n,r)=>{n.fill=e[r],n.stroke=t[r]})}createRangeBar(e,t,n,r,s){let o=s==="horizontal",a=2*r,l=new le.BandScale;l.domain=t.map((m,g)=>g),l.range=[r,n-r],l.paddingInner=.3,l.paddingOuter=.3;let c=.7,u=1.3,d=new le.LinearScale;d.domain=[t.reduce((m,g)=>Math.min(m,g),1/0)*c,t.reduce((m,g)=>Math.max(m,g),0)*u],d.range=[a,n-a];let h=l.bandwidth,p=t.map((m,g)=>{let[f,y]=[m*c,m*u],b=l.convert(g),v=d.convert(f),S=d.convert(y)-v,w=new le.Rect;return w.x=o?v:b,w.y=o?b:v,w.width=o?S:h,w.height=o?h:S,w.strokeWidth=0,w.crisp=!0,w});return e.append(p),p}};return i.chartType="rangeBar",i})(),kz=(()=>{let i=class extends Wn{constructor(e,t,n){super(e,"rangeAreaTooltip");let r=4,s=[Bx({offset:.375*r,length:r,pattern:{low:3,high:5,period:r}}),Bx({offset:.375*r,length:r,pattern:{low:2.25,high:4.25,period:r}}),Bx({offset:.75*r,length:r,pattern:{low:2.5,high:4.5,period:r}})],o=1.75,a=s.map(u=>u.map(([d,h])=>({x:d,low:h-.5*o,high:h+.5*o}))),{lines:l,areas:c}=this.createRangeArea(this.root,a,this.size,this.padding);this.lines=l,this.areas=c,this.updateColors(t,n)}updateColors(e,t){e=uF(e,1,2),t=uF(t,1,2),this.lines.forEach(([n,r],s)=>{n.fill=void 0,n.stroke=t[s],r.fill=void 0,r.stroke=t[s]}),this.areas.forEach((n,r)=>{n.fill=e[r]})}createRangeArea(e,t,n,r){let s=t.reduce((g,f)=>f.reduce((y,{x:b})=>Math.min(y,b),g),1/0),o=t.reduce((g,f)=>f.reduce((y,{x:b})=>Math.max(y,b),g),-1/0),a=t.reduce((g,f)=>f.reduce((y,{low:b})=>Math.min(y,b),g),1/0),l=t.reduce((g,f)=>f.reduce((y,{high:b})=>Math.max(y,b),g),-1/0),c=new le.LinearScale;c.domain=[s,o],c.range=[r,n-r];let u=2*r,d=new le.LinearScale;d.domain=[a,l],d.range=[n-u,u];let h=[],p=[];return t.map(g=>{let f=new le.Path,y=new le.Path,b=new le.Path;return h.push([f,y]),p.push(b),f.strokeWidth=0,y.strokeWidth=0,b.strokeWidth=0,b.fillOpacity=.8,f.path.clear(),y.path.clear(),b.path.clear(),g.map((v,S)=>{let{x:w,low:T,high:D}=v,O=c.convert(w),R=d.convert(T),L=d.convert(D),B=S>0?"lineTo":"moveTo";return f.path[B](O,L),y.path[B](O,R),b.path[B](O,L),[O,R]})}).forEach((g,f)=>{let y=g.length-1,b=p[f];for(let v=y;v>=0;v--){let[S,w]=g[v];b.path.lineTo(S,w)}}),e.append(p.concat(...h)),{lines:h,areas:p}}};return i.chartType="rangeArea",i})();function Bx(i){let{offset:e,length:t,pattern:n}=i,r=a(e,t,n),s=0,o=t;return(r.length===0||r[0][0]!==s)&&r.unshift(l(s,e,n)),r[r.length-1][0]!==o&&r.push(l(o,e,n)),r;function a(u,d,h){let{period:p}=h,m=u/p,f=[0,.5].map(b=>b-m).map(cF).sort((b,v)=>b-v);return Array.from({length:Math.floor(f.length*(p/d))},(b,v)=>f[v%f.length]+Math.floor(v/f.length)).map(b=>b*p).map(b=>l(b,u,h))}function l(u,d,h){return[u,c(d+u,h)]}function c(u,d){let{low:h,high:p,period:m}=d,g=cF(u/m),f=g>.5?1-2*(g-.5):2*g;return h+(p-h)*f}}function cF(i){let e=i%1;return e<0?e+1:e}function uF(i,e,t){let n=[...i],r=n[e];return n[e]=n[t],n[t]=r,n}var Iz=(()=>{let i=class extends Wn{constructor(e,t,n,r,s){super(e,"boxPlotTooltip");let o=this.padding,a=this.size,l=[11,11.5,10.5],c=1.2,u=1.1,d=.9,h=.8,p=new le.LinearScale;p.domain=[l.reduce((y,b)=>Math.min(y,b),1/0)*h,l.reduce((y,b)=>Math.max(y,b),0)*c],p.range=[a-1.5*o,o];let m=new le.BandScale;m.domain=l.map((y,b)=>b),m.range=[o,a-o],m.paddingInner=.4,m.paddingOuter=.2;let g=Math.round(m.bandwidth),f=Math.round(m.bandwidth/2);this.boxPlotGroups=l.map((y,b)=>{let[v,S,w,T]=[y*h,y*d,y*u,y*c],D=Math.round(p.convert(w)),O=Math.round(m.convert(b)),R=Math.round(O+g),L=Math.round(p.convert(S)),B=Math.round(p.convert(v)),$=Math.round(p.convert(y)),U=Math.round(p.convert(T)),K=O+f,ie=new le.Group,te=new le.Rect,j=new le.Line,Y=new le.Line,se=new le.Line,me=new le.Line,re=new le.Line;return te.x=O,te.y=D,te.width=g,te.height=L-D,te.strokeWidth=1,te.strokeOpacity=.75,te.crisp=!0,this.setLineProperties(j,O,R,$,$),this.setLineProperties(Y,K,K,U,D),this.setLineProperties(se,K,K,B,L),this.setLineProperties(me,O,R,U,U),this.setLineProperties(re,O,R,B,B),ie.append([te,j,Y,se,me,re]),ie}),this.updateColors(t,n,r,s),this.root.append(this.boxPlotGroups)}updateColors(e,t,n,r){var s;let o=n?.properties.get(En.DEFAULT_BACKGROUND_COLOUR),a=(s=Array.isArray(o)?o[0]:o)!=null?s:"white";this.boxPlotGroups.forEach((l,c)=>{var u;(u=l.children)==null||u.forEach(d=>{let h=e[c%e.length];d.fill=r?h:ai.Color.interpolate(h,a)(.7),d.stroke=t[c%t.length]})})}setLineProperties(e,t,n,r,s){e.x1=t,e.x2=n,e.y1=r,e.y2=s,e.strokeOpacity=.75}};return i.chartType="boxPlot",i})(),Fz=(()=>{let i=class extends Sc{constructor(e,t,n,r,s){super(e,"treemapTooltip");let{size:o,padding:a}=this,l=[[1,1],[3,2,1]],u=l.length%2===0?.3:.2,d=[a,o-a],h=l.length,p=h*(h+1)/2,m=u/(h-1),g=d[1]-d[0],f=g-u,y=d[0];this.rects=l.reduce((v,S,w)=>{v??(v=[]);let T=(h-w)/p,D=f*T,O=S.length,R=S.reduce((K,ie)=>K+=ie,0),L=u/(O-1||1),B=O>1?g-u:g,$=d[0],U=S.map(K=>{let ie=new le.Rect,te=B*K/R;return ie.x=y,ie.y=$,ie.width=D,ie.height=te,ie.strokeWidth=.75,ie.crisp=!0,$+=te+L,ie});return y+=D+m,v.push(...U),v},[]),this.updateColors(t,n,r,s);let b=new le.Group;b.setClipRectInGroupCoordinateSpace(new le.BBox(a,a,o-a,o-a)),b.append(this.rects),this.root.append(b)}updateColors(e,t,n,r){var s;let{properties:o}=n??{},a=o?.get(En.DEFAULT_BACKGROUND_COLOUR),l=(s=Array.isArray(a)?a[0]:a)!=null?s:"white";this.rects.forEach((c,u)=>{c.fill=e[u%t.length],c.stroke=r?t[u%t.length]:l})}};return i.chartType="treemap",i})(),Oz=(()=>{let i=class extends Wu{constructor(e,t,n){super(e,"sunburstTooltip"),this.data=[[[],[]],[[],[]],[[],[]]],this.angleOffset=-Math.PI/2,this.innerRadiusRatio=0,this.showRadiusAxisLine=!1,this.showAngleAxisLines=!1;let{data:r,size:s,padding:o,angleOffset:a,innerRadiusRatio:l}=this,c=(s-o*2)/2,u=[a+0,a+2*Math.PI],d=Math.abs(u[1]-u[0]),h=[c*l,c],p=Math.abs(h[1]-h[0]),m=0,g=(S,w)=>{S.forEach(T=>{let D=w+1;m=Math.max(m,D),g(T,D)})};g(r,0);let f=p/m,y=this.size/2,b=u[0];this.series=[];let v=(S,w,T,D,O)=>{if(!Array.isArray(S))return;let L=w+1,B=T;S.forEach(($,U,K)=>{let ie=O;ie||(ie=new le.Group,this.series.push(ie));let te=h[0]+w*f,j=h[0]+L*f,Y=1/K.length,se=B,me=se+D*Y,re=new le.Sector;re.centerX=y,re.centerY=y,re.innerRadius=te,re.outerRadius=j,re.startAngle=se,re.endAngle=me,re.stroke=void 0,re.strokeWidth=0,re.inset=.75,B=me,ie.append(re),v($,L,se,Math.abs(me-se),ie)})};v(r,0,b,d),this.root.append(this.series),this.updateColors(t,n)}updateColors(e,t){this.series.forEach((n,r)=>{var s;(s=n.children)==null||s.forEach(o=>{o.fill=e[r%e.length],o.stroke=t[r%t.length]})})}};return i.chartType="sunburst",i})(),Lz=(()=>{let i=class extends Sc{constructor(e,t,n,r,s){var o,a;super(e,"heatmapTooltip");let{size:l,padding:c}=this,u=3,d=Array.from({length:u},(b,v)=>Array.from({length:u},(S,w)=>w)),h=d.map((b,v)=>v),p=new le.BandScale;p.domain=h,p.range=[c,l-c],p.paddingInner=.01,p.paddingOuter=.1;let m=new le.BandScale;m.domain=h,m.range=[c,l-c],m.paddingInner=.01,m.paddingOuter=.1;let g=(o=p.bandwidth)!=null?o:0,f=(a=m.bandwidth)!=null?a:0;this.rects=d.reduce((b,v,S)=>{b??(b=[]);let w=v.map((T,D)=>{let O=new le.Rect;return O.x=p.convert(S),O.y=m.convert(D),O.width=g,O.height=f,O.strokeWidth=0,O.crisp=!0,O});return b.push(...w),b},[]),this.updateColors(t,n,r,s);let y=new le.Group;y.setClipRectInGroupCoordinateSpace(new le.BBox(c,c,l-c,l-c)),y.append(this.rects),this.root.append(y)}updateColors(e,t,n,r){var s;let{properties:o}=n??{},a=o?.get(En.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE),l=o?.get(En.DEFAULT_BACKGROUND_COLOUR),c=(s=Array.isArray(l)?l[0]:l)!=null?s:"white",u=r?[e[0],e[1]]:a,d=r?t[0]:c;this.rects.forEach((h,p)=>{h.fill=ai.Color.interpolate(u[0],u[1])(p*.2),h.stroke=d})}};return i.chartType="heatmap",i})(),Rz=(()=>{let i=class extends Wn{constructor(e,t,n,r,s){super(e,"waterfallTooltip"),this.data=[4,3,-3,6,-3],this.bars=this.createWaterfall(this.root,this.data,this.size,this.padding,"vertical").bars,this.updateColors(t,n,r,s)}updateColors(e,t,n,r){var s,o;let{data:a}=this,{properties:l}=n??{},c={fill:e[0],stroke:t[0]},u={fill:e[1],stroke:t[1]},d=r?c:(s=l?.get(En.DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS))!=null?s:c,h=r?u:(o=l?.get(En.DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS))!=null?o:u;this.bars.forEach((p,m)=>{let g=a[m]>=0;p.fill=g?d.fill:h.fill,p.stroke=g?d.stroke:h.stroke})}createWaterfall(e,t,n,r,s){let o=2*r,{processedData:a,min:l,max:c}=Fy(t.map(v=>[v])),u=a.reduce((v,S)=>v.concat(S),[]),d=new le.LinearScale;d.domain=[Math.min(l,0),c],d.range=[n-o,o];let h=new le.BandScale;h.domain=t.map((v,S)=>S),h.range=[r,n-r],h.paddingInner=.2,h.paddingOuter=.3;let p=h.bandwidth,m=new le.Path;m.stroke="#575757",m.strokeWidth=0;let g=Math.floor(m.strokeWidth)%2/2,f=m.path;f.clear();let y=s==="horizontal",b=u.map((v,S)=>{let w=S>0?u[S-1]:0,D=t[S]>0,O=Math.round(d.convert(v)),R=Math.round(d.convert(w)),L=(D?O:R)-g,B=(D?R:O)+g,$=Math.abs(B-L),U=h.convert(S),K=new le.Rect;K.x=y?L:U,K.y=y?U:L,K.width=y?$:p,K.height=y?p:$,K.strokeWidth=0,K.crisp=!0;let ie=O+g,te=R+g;if(S>0){let se=y?te:K.x,me=y?K.y:te;f.lineTo(se,me)}let j=y?ie:K.x,Y=y?K.y:ie;return f.moveTo(j,Y),K});return e.append([m,...b]),{bars:b}}};return i.chartType="waterfall",i})(),Nz=(()=>{let i=class extends Wn{constructor(e,t,n){super(e,"columnLineComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];let{root:r,columnData:s,lineData:o,size:a,padding:l}=this;this.columns=Tg({stacked:!1,root:r,data:s,size:a,padding:l,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),r.append(this.columns),this.lines=j_(r,o,a,l),this.updateColors(t,n)}updateColors(e,t){this.columns.forEach((n,r)=>{n.fill=e[r],n.stroke=t[r]}),this.lines.forEach((n,r)=>{n.stroke=e[r+2]})}};return i.chartType="columnLineCombo",i})(),Vz=(()=>{let i=class extends Wn{constructor(e,t,n){super(e,"areaColumnComboTooltip"),this.columnData=[3,4.5],this.areaData=[[5,4,6,5,4]];let{root:r,columnData:s,areaData:o,size:a,padding:l}=this;this.columns=Tg({stacked:!1,root:r,data:s,size:a,padding:l,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});let c=new le.BandScale;c.range=[l,a-l],c.domain=[0,1,2,3,4],c.paddingInner=1,c.paddingOuter=0;let u=new le.LinearScale;u.range=[a-l,l],u.domain=[0,6];let d=[],h=u.convert(0),p=c.convert(0);o.forEach((m,g)=>{let f=d[g]||(d[g]=[]);m.forEach((b,v)=>{let S=b,w=v,T=c.convert(w),D=u.convert(S);f[v]={x:T,y:D}});let y=c.convert(m.length-1);d[g].push({x:y,y:h},{x:p,y:h})}),this.areas=d.map(m=>{let g=new le.Path;g.strokeWidth=0,g.fillOpacity=.8;let f=g.path;return m.forEach((y,b)=>f[b>0?"lineTo":"moveTo"](y.x,y.y)),g}),r.append(this.areas),r.append([].concat.apply([],this.columns)),this.updateColors(t,n)}updateColors(e,t){this.areas.forEach((n,r)=>{n.fill=e[r],n.stroke=t[r]}),this.columns.forEach((n,r)=>{n.fill=e[r+1],n.stroke=t[r+1]})}};return i.chartType="areaColumnCombo",i})(),Bz=(()=>{let i=class extends Sc{constructor(e,t,n){super(e,"customComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];let{root:r,columnData:s,lineData:o,size:a,padding:l}=this;this.columns=Tg({stacked:!1,root:r,data:s,size:a,padding:l,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),r.append(this.columns),this.lines=j_(r,o,a,l);let c="grey",u=3,d=new le.Line;d.x1=l,d.y1=l,d.x2=l,d.y2=a-l+u,d.stroke=c;let h=new le.Line;h.x1=l-u+1,h.y1=a-l,h.x2=a-l+1,h.y2=a-l,h.stroke=c;let p=new le.Path;this.buildPenIconPath(p),p.fill="whitesmoke",p.stroke="darkslategrey",p.strokeWidth=1,r.append([h,d,p]),this.updateColors(t,n)}updateColors(e,t){this.columns.forEach((n,r)=>{n.fill=e[r],n.stroke=t[r]}),this.lines.forEach((n,r)=>{n.stroke=e[r+2]})}buildPenIconPath(e){let{path:t}=e;t.moveTo(25.76,43.46),t.lineTo(31.27,48.53),t.moveTo(49.86,22),t.lineTo(49.86,22),t.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),t.lineTo(46.86,21.41),t.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),t.lineTo(25.51,43.8),t.lineTo(25.43,43.89),t.lineTo(23.01,51.89),t.lineTo(22.83,52.46),t.lineTo(31.02,48.86),t.lineTo(49.02,28.52),t.lineTo(49.02,28.52),t.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),t.lineTo(50.75,24.93),t.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),t.closePath(),t.moveTo(41.76,25.5),t.lineTo(47.34,30.5),t.moveTo(40.74,26.65),t.lineTo(46.25,31.71)}};return i.chartType="customCombo",i})(),dF={columnGroup:{column:{range:!0,pivot:!0,enterprise:!1,icon:lz},stackedColumn:{range:!0,pivot:!0,enterprise:!1,icon:TL},normalizedColumn:{range:!0,pivot:!0,enterprise:!1,icon:dz}},barGroup:{bar:{range:!0,pivot:!0,enterprise:!1,icon:hz},stackedBar:{range:!0,pivot:!0,enterprise:!1,icon:PL},normalizedBar:{range:!0,pivot:!0,enterprise:!1,icon:gz}},pieGroup:{pie:{range:!0,pivot:!0,enterprise:!1,icon:fz},donut:{range:!0,pivot:!0,enterprise:!1,icon:i_},doughnut:{range:!0,pivot:!0,enterprise:!1,icon:i_}},lineGroup:{line:{range:!0,pivot:!0,enterprise:!1,icon:vz}},scatterGroup:{scatter:{range:!0,pivot:!0,enterprise:!1,icon:yz},bubble:{range:!0,pivot:!0,enterprise:!1,icon:Cz}},areaGroup:{area:{range:!0,pivot:!0,enterprise:!1,icon:Sz},stackedArea:{range:!0,pivot:!0,enterprise:!1,icon:Y_},normalizedArea:{range:!0,pivot:!0,enterprise:!1,icon:_z}},polarGroup:{radarLine:{range:!0,pivot:!1,enterprise:!0,icon:Mz},radarArea:{range:!0,pivot:!1,enterprise:!0,icon:Az},nightingale:{range:!0,pivot:!1,enterprise:!0,icon:Pz},radialColumn:{range:!0,pivot:!1,enterprise:!0,icon:Ez},radialBar:{range:!0,pivot:!1,enterprise:!0,icon:Tz}},statisticalGroup:{boxPlot:{range:!0,pivot:!1,enterprise:!0,icon:Iz},histogram:{range:!0,pivot:!1,enterprise:!1,icon:wz},rangeBar:{range:!0,pivot:!1,enterprise:!0,icon:Dz},rangeArea:{range:!0,pivot:!1,enterprise:!0,icon:kz}},hierarchicalGroup:{treemap:{range:!0,pivot:!0,enterprise:!0,icon:Fz},sunburst:{range:!0,pivot:!0,enterprise:!0,icon:Oz}},specializedGroup:{heatmap:{range:!0,pivot:!1,enterprise:!0,icon:Lz},waterfall:{range:!0,pivot:!1,enterprise:!0,icon:Rz}},combinationGroup:{columnLineCombo:{range:!0,pivot:!0,enterprise:!1,icon:Nz},areaColumnCombo:{range:!0,pivot:!0,enterprise:!1,icon:Vz},customCombo:{range:!0,pivot:!0,enterprise:!1,icon:Bz}}},Gz={columnGroup:["column","stackedColumn","normalizedColumn"],barGroup:["bar","stackedBar","normalizedBar"],pieGroup:["pie","donut"],lineGroup:["line"],scatterGroup:["scatter","bubble"],areaGroup:["area","stackedArea","normalizedArea"],polarGroup:["radarLine","radarArea","nightingale","radialColumn","radialBar"],statisticalGroup:["boxPlot","histogram","rangeBar","rangeArea"],hierarchicalGroup:["treemap","sunburst"],specializedGroup:["heatmap","waterfall"],combinationGroup:["columnLineCombo","areaColumnCombo","customCombo"]},X_=(()=>{let i=class OL extends ae{constructor(t,n,r,s,o,a=Gz){super(OL.TEMPLATE),this.wrappers={},this.chartController=t,this.fills=n,this.strokes=r,this.themeTemplateParameters=s,this.isCustomTheme=o,this.chartGroups=ze({},a)}init(){!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter(a=>a!=="customCombo"));let t=this.getGui(),n=this.chartController.isEnterprise(),r=this.chartController.isPivotChart(),s=!r,o=Object.keys(this.chartGroups).map(a=>{var l;let c=a in dF?dF[a]:void 0;if(!c)return M.warnOnce(`invalid chartGroupsDef config '${a}'`),null;let d=((l=this.chartGroups[a])!=null?l:[]).map(h=>{let p=h in c?c[h]:void 0;return p?!n&&p.enterprise?null:s&&p.range||r&&p.pivot?p:null:(M.warnOnce(`invalid chartGroupsDef config '${a}.${h}'`),null)}).filter(h=>h!=null);return d.length===0?null:{label:this.chartTranslationService.translate(a),items:d}}).filter(a=>a!=null);for(let{label:a,items:l}of o){let c=this.createBean(new vn({title:a,suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));for(let u of l){let d=u.icon,h=document.createElement("div");h.classList.add("ag-chart-mini-thumbnail");let p=d.chartType;this.addManagedListener(h,"click",()=>{this.chartController.setChartType(p),this.updateSelectedMiniChart()}),this.wrappers[p]=h,this.createBean(new d(h,this.fills,this.strokes,this.themeTemplateParameters,this.isCustomTheme)),c.addItem(h)}t.appendChild(c.getGui())}this.updateSelectedMiniChart()}updateSelectedMiniChart(){let t=this.chartController.getChartType();for(let n in this.wrappers){let r=this.wrappers[n],s=n===t;r.classList.toggle("ag-selected",s)}}};return i.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',i})();oe([k("chartTranslationService")],X_.prototype,"chartTranslationService",2);oe([J],X_.prototype,"init",1);var Uz=X_,$u=(()=>{let i=class LL extends ae{constructor(t){super(LL.TEMPLATE),this.chartController=t,this.miniChartsContainers=[],this.cardItems=[],this.activePaletteIndex=0,this.palettes=[],this.themes=[]}postConstruct(){this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",M.createIconNoSpan("previous",this.gos)),this.eNextBtn.insertAdjacentElement("afterbegin",M.createIconNoSpan("next",this.gos)),this.addManagedListener(this.ePrevBtn,"click",()=>this.setActivePalette(this.getPrev(),"left")),this.addManagedListener(this.eNextBtn,"click",()=>this.setActivePalette(this.getNext(),"right")),this.addManagedListener(this.chartController,ns.EVENT_CHART_TYPE_CHANGED,()=>this.resetPalettes(!0)),this.addManagedListener(this.chartController,ns.EVENT_CHART_API_UPDATE,()=>this.resetPalettes(!0)),this.scrollSelectedIntoView()}scrollSelectedIntoView(){setTimeout(()=>{let t=s=>!s.getGui().classList.contains("ag-hidden"),r=this.miniChartsContainers.find(t).getGui().querySelector(".ag-selected");if(r){let s=r.offsetParent;s&&this.eMiniChartsContainer.scrollTo(0,s.offsetTop)}},250)}resetPalettes(t){var n,r;let s=this.chartController.getPalettes(),o=this.chartController.getThemeTemplateParameters(),a=(r=(n=this.gos.get("chartToolPanelsDef"))==null?void 0:n.settingsPanel)==null?void 0:r.chartGroupsDef;if(M.shallowCompare(s,this.palettes)&&!t||this.isAnimating)return;this.palettes=s,this.themes=this.chartController.getThemeNames(),this.activePaletteIndex=this.themes.findIndex(c=>c===this.chartController.getChartThemeName()),this.cardItems=[],M.clearElement(this.eCardSelector),this.destroyMiniCharts();let{themes:l}=this;this.palettes.forEach((c,u)=>{let d=this.activePaletteIndex===u,{fills:h,strokes:p}=c,m=l[u],g=!P_(m),f=this.createBean(new Uz(this.chartController,h,p,o[u],g,a));this.miniChartsContainers.push(f),this.eMiniChartsContainer.appendChild(f.getGui()),this.addCardLink(u),d?f.updateSelectedMiniChart():f.setDisplayed(!1)}),M.setDisplayed(this.eNavBar,this.palettes.length>1),M.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected")}addCardLink(t){let n=document.createElement("div");n.classList.add("ag-chart-settings-card-item"),this.addManagedListener(n,"click",()=>{this.setActivePalette(t,t<this.activePaletteIndex?"left":"right")}),this.eCardSelector.appendChild(n),this.cardItems.push(n)}getPrev(){let t=this.activePaletteIndex-1;return t<0&&(t=this.palettes.length-1),t}getNext(){let t=this.activePaletteIndex+1;return t>=this.palettes.length&&(t=0),t}setActivePalette(t,n){if(this.isAnimating||this.activePaletteIndex===t)return;M.radioCssClass(this.cardItems[t],"ag-selected","ag-not-selected");let r=this.miniChartsContainers[this.activePaletteIndex],s=r.getGui(),o=this.miniChartsContainers[t],a=o.getGui();r.updateSelectedMiniChart(),o.updateSelectedMiniChart();let l=n==="left"?-1:1,c=a.style.left=`${M.getAbsoluteWidth(this.getGui())*l}px`;this.activePaletteIndex=t,this.isAnimating=!0;let u="ag-animating";o.setDisplayed(!0),r.addCssClass(u),o.addCssClass(u),this.chartController.setChartThemeName(this.themes[t]),window.setTimeout(()=>{s.style.left=`${-parseFloat(c)}px`,a.style.left="0px"},0),window.setTimeout(()=>{this.isAnimating=!1,r.removeCssClass(u),o.removeCssClass(u),r.setDisplayed(!1)},300)}destroyMiniCharts(){M.clearElement(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)}destroy(){this.destroyMiniCharts(),super.destroy()}};return i.TEMPLATE=`<div class="ag-chart-settings-wrapper">
            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>
            <div ref="eNavBar" class="ag-chart-settings-nav-bar">
                <div ref="ePrevBtn" class="ag-chart-settings-prev">
                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>
                </div>
                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>
                <div ref="eNextBtn" class="ag-chart-settings-next">
                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>
                </div>
            </div>
        </div>`,i})();oe([ce("eMiniChartsContainer")],$u.prototype,"eMiniChartsContainer",2);oe([ce("eNavBar")],$u.prototype,"eNavBar",2);oe([ce("eCardSelector")],$u.prototype,"eCardSelector",2);oe([ce("ePrevBtn")],$u.prototype,"ePrevBtn",2);oe([ce("eNextBtn")],$u.prototype,"eNextBtn",2);oe([J],$u.prototype,"postConstruct",1);var Hz=$u,Oy=(()=>{let i=class Jv extends ae{constructor(t,n){super(),this.panels=t,this.chartMenuContext=n,this.tabs=[]}init(){this.panels.forEach(t=>{let n=t.replace("chart","").toLowerCase(),r=this.createPanel(n),s=this.createTab(t,n,r);this.tabs.push(s),this.addDestroyFunc(()=>this.destroyBean(r))}),this.tabbedLayout=new vd({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0,suppressFocusBodyOnOpen:!0,suppressTrapFocus:!0,enableCloseButton:!this.chartMenuService.isLegacyFormat(),closeButtonAriaLabel:this.chartTranslationService.translate("ariaChartMenuClose"),onCloseClicked:()=>{var t;(t=this.eventSource)==null||t.focus({preventScroll:!0}),this.dispatchEvent({type:Jv.EVENT_CLOSED})}}),this.getContext().createBean(this.tabbedLayout)}createTab(t,n,r){let s=document.createElement("div");s.classList.add("ag-chart-tab",`ag-chart-${n}`),this.getContext().createBean(r),s.appendChild(r.getGui());let o=document.createElement("div"),a=this.chartTranslationService.translate(n);return o.innerText=a,{title:o,titleLabel:a,bodyPromise:vt.resolve(s),getScrollableContainer:()=>s.querySelector(".ag-scrollable-container")||s,name:t}}showTab(t){let n=this.tabs[t];this.tabbedLayout.showItem(n)}getGui(){return this.tabbedLayout&&this.tabbedLayout.getGui()}showMenu(t,n){var r;this.eventSource=t,n||(r=this.tabbedLayout)==null||r.focusHeader(!0)}destroy(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),super.destroy()}createPanel(t){let{chartController:n,chartOptionsService:r}=this.chartMenuContext;switch(t){case Jv.TAB_DATA:return new NH(n,r);case Jv.TAB_FORMAT:return new sz(this.chartMenuContext);default:return new Hz(n)}}};return i.EVENT_CLOSED="closed",i.TAB_DATA="data",i.TAB_FORMAT="format",i})();oe([k("chartTranslationService")],Oy.prototype,"chartTranslationService",2);oe([k("chartMenuService")],Oy.prototype,"chartMenuService",2);oe([J],Oy.prototype,"init",1);var hF=Oy,Ly=class extends ae{constructor(){super('<div class="ag-chart-menu" ref="eMenu"></div>'),this.buttonListenersDestroyFuncs=[]}updateParams(i){let{buttons:e}=i;this.createButtons(e)}createButtons(i){this.buttonListenersDestroyFuncs.forEach(t=>t?.()),this.buttonListenersDestroyFuncs=[];let e=this.eMenu;M.clearElement(e),i.forEach(t=>{let{buttonName:n,iconName:r,callback:s}=t,o=this.createButton(r),a=this.chartTranslationService.translate(n+"ToolbarTooltip");a&&o instanceof HTMLElement&&(o.title=a),this.buttonListenersDestroyFuncs.push(this.addManagedListener(o,"click",l=>s(l.target))),e.appendChild(o)})}createButton(i){let e=M.createIconNoSpan(i,this.gos,void 0,!0);return e.classList.add("ag-chart-menu-icon"),this.chartMenuService.isLegacyFormat()||(e=this.wrapButton(e)),e}wrapButton(i){let e=this.gos.getDocument().createElement("button");return e.appendChild(i),e.classList.add("ag-chart-menu-toolbar-button"),e}destroy(){this.buttonListenersDestroyFuncs=[],super.destroy()}};oe([k("chartTranslationService")],Ly.prototype,"chartTranslationService",2);oe([k("chartMenuService")],Ly.prototype,"chartMenuService",2);oe([ce("eMenu")],Ly.prototype,"eMenu",2);var Ry=(()=>{let i=class RL extends ae{constructor(t,n,r){super(RL.TEMPLATE),this.eChartContainer=t,this.eMenuPanelContainer=n,this.chartMenuContext=r,this.buttons={chartSettings:{iconName:"menu",callback:()=>this.showMenu({panel:this.defaultPanel})},chartData:{iconName:"menu",callback:()=>this.showMenu({panel:"chartData"})},chartFormat:{iconName:"menu",callback:()=>this.showMenu({panel:"chartFormat"})},chartLink:{iconName:"linked",callback:()=>this.chartMenuService.toggleLinked(this.chartMenuContext)},chartUnlink:{iconName:"unlinked",callback:()=>this.chartMenuService.toggleLinked(this.chartMenuContext)},chartDownload:{iconName:"save",callback:()=>this.chartMenuService.downloadChart(this.chartMenuContext)},chartMenu:{iconName:"menuAlt",callback:s=>this.showMenuList(s)}},this.panels=[],this.menuVisible=!1,this.chartController=r.chartController}postConstruct(){this.legacyFormat=this.chartMenuService.isLegacyFormat(),this.chartToolbar=this.createManagedBean(new Ly),this.getGui().appendChild(this.chartToolbar.getGui()),this.legacyFormat&&this.createLegacyToggleButton(),this.refreshToolbarAndPanels(),this.addManagedListener(this.eventService,X.EVENT_CHART_CREATED,t=>{var n;t.chartId===this.chartController.getChartId()&&((n=this.gos.get("chartToolPanelsDef"))!=null&&n.defaultToolPanel)&&this.showMenu({panel:this.defaultPanel,animate:!1,suppressFocus:!0})}),this.addManagedListener(this.chartController,ns.EVENT_CHART_LINKED_CHANGED,this.refreshToolbarAndPanels.bind(this)),this.refreshMenuClasses(),this.legacyFormat&&!this.gos.get("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.eHideButton&&this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.legacyFormat||this.getGui().classList.add("ag-chart-menu-wrapper"),this.addManagedListener(this.chartController,ns.EVENT_CHART_API_UPDATE,this.refreshToolbarAndPanels.bind(this))}isVisible(){return this.menuVisible}getExtraPaddingDirections(){let t=["chartMenu","chartLink","chartUnlink","chartDownload"],n=["chartSettings","chartData","chartFormat"],r=[];return t.some(s=>this.chartToolbarOptions.includes(s))&&r.push("top"),n.some(s=>this.chartToolbarOptions.includes(s))&&r.push(this.gos.get("enableRtl")?"left":"right"),r}createLegacyToggleButton(){let t=this.gos.getDocument();this.eHideButton=t.createElement("button"),this.eHideButton.classList.add("ag-button","ag-chart-menu-close"),this.eHideButtonIcon=t.createElement("span"),this.eHideButtonIcon.classList.add("ag-icon","ag-icon-contracted"),this.eHideButton.appendChild(this.eHideButtonIcon),this.getGui().appendChild(this.eHideButton)}refreshToolbarAndPanels(){this.initToolbarOptionsAndPanels(),this.updateToolbar()}initToolbarOptionsAndPanels(){let{panels:t,defaultPanel:n,chartToolbarOptions:r}=this.chartMenuService.getToolbarOptionsAndPanels(this.chartController);this.panels=t,this.defaultPanel=n,this.chartToolbarOptions=r}updateToolbar(){let t=this.chartToolbarOptions.map(n=>{let{iconName:r,callback:s}=this.buttons[n];return{buttonName:n,iconName:r,callback:s}});this.chartToolbar.updateParams({buttons:t})}createMenuPanel(t){let n=this.environment.chartMenuPanelWidth(),r=this.menuPanel=this.createBean(new zf({minWidth:n,width:n,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return r.setParentComponent(this),this.eMenuPanelContainer.appendChild(r.getGui()),this.tabbedMenu=this.createBean(new hF(this.panels,this.chartMenuContext)),this.addManagedListener(this.tabbedMenu,hF.EVENT_CLOSED,()=>{this.hideMenu(!1)}),this.addManagedListener(r,ae.EVENT_DESTROYED,()=>this.destroyBean(this.tabbedMenu)),new vt(s=>{window.setTimeout(()=>{r.setBodyComponent(this.tabbedMenu),this.tabbedMenu.showTab(t),s(r),this.legacyFormat&&this.addManagedListener(this.eChartContainer,"click",o=>{this.getGui().contains(o.target)||this.menuVisible&&this.hideMenu()})},100)})}showContainer(t,n){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses(),this.tabbedMenu.showMenu(t,n))}toggleMenu(){this.menuVisible?this.hideMenu(this.legacyFormat):this.showMenu({animate:this.legacyFormat})}showMenu(t){let{panel:n,animate:r=!0,eventSource:s,suppressFocus:o}=t;if(r||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!n)this.showContainer(s,o);else{let a=n||this.defaultPanel,l=this.panels.indexOf(a);l<0&&(console.warn(`AG Grid: '${n}' is not a valid Chart Tool Panel name`),l=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(l),this.showContainer(s,o)):this.createMenuPanel(l).then(()=>this.showContainer(s,o))}r||setTimeout(()=>{this.isAlive()&&this.eMenuPanelContainer.classList.remove("ag-no-transition")},500)}hideMenu(t=!0){t||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.hideParent(),window.setTimeout(()=>{this.menuVisible=!1,this.refreshMenuClasses(),t||this.eMenuPanelContainer.classList.remove("ag-no-transition")},500)}refreshMenuClasses(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.legacyFormat&&!this.gos.get("suppressChartToolPanelsButton")&&(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))}showParent(t){this.eMenuPanelContainer.style.minWidth=`${t}px`}hideParent(){this.eMenuPanelContainer.style.minWidth="0"}showMenuList(t){this.chartMenuListFactory.showMenuList({eventSource:t,showMenu:()=>this.showMenu({animate:!1,eventSource:t}),chartMenuContext:this.chartMenuContext})}destroy(){super.destroy(),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)}};return i.TEMPLATE="<div></div>",i})();oe([k("chartMenuService")],Ry.prototype,"chartMenuService",2);oe([k("chartMenuListFactory")],Ry.prototype,"chartMenuListFactory",2);oe([J],Ry.prototype,"postConstruct",1);var zz=Ry,Ny=(()=>{let i=class NL extends ae{constructor(t){super(NL.TEMPLATE),this.chartMenu=t,this.destroyableChartListeners=[],this.editing=!1}init(){this.addManagedListener(this.getGui(),"keydown",t=>{this.editing&&t.key==="Enter"&&!t.shiftKey&&(this.handleEndEditing(),t.preventDefault())}),this.addManagedListener(this.getGui(),"input",()=>{this.editing&&this.updateHeight()}),this.addManagedListener(this.getGui(),"blur",()=>this.endEditing())}refreshTitle(t){this.chartController=t.chartController,this.chartOptionsService=t.chartOptionsService,this.chartMenuUtils=t.chartMenuParamsFactory.getChartOptions();for(let c of this.destroyableChartListeners)c();this.destroyableChartListeners=[];let r=this.chartController.getChartProxy().getChart(),s=r.canvasElement,o=this.addManagedListener(s,"dblclick",c=>{let{title:u}=r;if(u&&u.node.containsPoint(c.offsetX,c.offsetY)){let d=u.node.computeBBox(),h=u.node.inverseTransformPoint(d.x,d.y);this.startEditing(ze(ze({},d),h),s.width)}}),a=!1,l=this.addManagedListener(s,"mousemove",c=>{let{title:u}=r,d=!!(u&&u.enabled&&u.node.containsPoint(c.offsetX,c.offsetY));a!==d&&(s.style.cursor=d?"pointer":""),a=d});this.destroyableChartListeners=[o,l]}startEditing(t,n){if(this.chartMenuService.isLegacyFormat()&&this.chartMenu&&this.chartMenu.isVisible()||this.editing)return;this.editing=!0;let s=Math.max(Math.min(t.width+20,n),300),o=this.getGui();o.classList.add("currently-editing");let a=o.style;a.fontFamily=this.chartMenuUtils.getValue("title.fontFamily"),a.fontWeight=this.chartMenuUtils.getValue("title.fontWeight"),a.fontStyle=this.chartMenuUtils.getValue("title.fontStyle"),a.fontSize=this.chartMenuUtils.getValue("title.fontSize")+"px",a.color=this.chartMenuUtils.getValue("title.color");let l=this.chartMenuUtils.getValue("title.text"),c=l===this.chartTranslationService.translate("titlePlaceholder");o.value=c?"":l;let u=l.split(/\r?\n/g).length;a.left=Math.round(t.x+t.width/2-s/2-1)+"px",a.top=Math.round(t.y+t.height/2-u*this.getLineHeight()/2-2)+"px",a.width=Math.round(s)+"px",a.lineHeight=this.getLineHeight()+"px",this.updateHeight(),o.focus()}updateHeight(){let t=this.getGui(),n=this.chartMenuUtils.getValue("title.text").split(/\r?\n/g).length,r=t.value.split(/\r?\n/g).length;t.style.height=Math.round(Math.max(n,r)*this.getLineHeight())+4+"px"}getLineHeight(){let t=this.chartMenuUtils.getValue("title.lineHeight");return t?parseInt(t):Math.round(parseInt(this.chartMenuUtils.getValue("title.fontSize"))*1.2)}handleEndEditing(){let t=this.chartMenuUtils.getValue("title.color");this.chartMenuUtils.setValue("title.color","rgba(0, 0, 0, 0)"),this.chartOptionsService.awaitChartOptionUpdate(()=>this.endEditing()),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.chartMenuUtils.setValue("title.color",t)})}endEditing(){if(!this.editing)return;this.editing=!1;let t=this.getGui().value;t&&t.trim()!==""?(this.chartMenuUtils.setValue("title.text",t),this.chartMenuUtils.setValue("title.enabled",!0)):(this.chartMenuUtils.setValue("title.text",""),this.chartMenuUtils.setValue("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.eventService.dispatchEvent({type:"chartTitleEdit"})})}};return i.TEMPLATE=`<textarea
             class="ag-chart-title-edit"
             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />
        `,i})();oe([k("chartTranslationService")],Ny.prototype,"chartTranslationService",2);oe([k("chartMenuService")],Ny.prototype,"chartMenuService",2);oe([J],Ny.prototype,"init",1);var Wz=Ny;function pF(i){return i.chart!=null?i.chart:i}var Mg=class{constructor(i){this.chartProxyParams=i,this.clearThemeOverrides=!1,this.isEnterpriseCharts=da.enterpriseModule.isEnterprise,this.chart=i.chartInstance,this.chartType=i.chartType,this.crossFiltering=i.crossFiltering,this.crossFilterCallback=i.crossFilterCallback,this.standaloneChartType=Ai(this.chartType),this.chart==null?this.chart=Dr.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}crossFilteringReset(){}update(i){Dr.update(this.getChartRef(),this.getUpdateOptions(i,this.getCommonChartOptions(i.updatedOverrides)))}updateThemeOverrides(i){Dr.updateDelta(this.getChartRef(),{theme:{overrides:i}})}getChart(){return pF(this.chart)}getChartRef(){return this.chart}downloadChart(i,e,t){let{chart:n}=this,r=pF(n),s=e||(r.title?r.title.text:"chart"),{width:o,height:a}=i||{};Dr.download(n,{width:o,height:a,fileName:s,fileFormat:t})}getChartImageDataURL(i){return this.getChart().getCanvasDataURL(i)}getChartOptions(){return this.chart.getOptions()}getChartThemeOverrides(){var i;return(i=this.getChartOptions().theme.overrides)!=null?i:{}}getChartPalette(){return En.getChartTheme(this.getChartOptions().theme).palette}setPaired(i){let e=Ai(this.chartProxyParams.chartType);Dr.updateDelta(this.chart,{theme:{overrides:{[e]:{paired:i}}}})}isPaired(){let i=Ai(this.chartProxyParams.chartType);return Pu(this.getChartThemeOverrides(),`${i}.paired`,!0)}lookupCustomChartTheme(i){return BO(this.chartProxyParams,i)}getSeriesGroupType(){}transformCategoryData(i,e){return i.map((t,n)=>{let r=t[e],s=r&&r.toString?r.toString():"",o=ze({},t);return o[e]={id:n,value:r,toString:()=>s},o})}getCommonChartOptions(i){var e,t;let n=this.clearThemeOverrides?{}:(t=(e=this.chart)==null?void 0:e.getOptions())!=null?t:{},r=this.chart!=null?this.getActiveFormattingPanelOverrides():void 0;this.clearThemeOverrides=!1;let s=_H(this.chartProxyParams,this,this.isEnterpriseCharts,this.getChartThemeDefaults(),i??r),o=bt(ze({},n),{mode:"integrated"});return o.theme=s,o.container=this.chartProxyParams.parentElement,o}getChartThemeDefaults(){let i=this.getSeriesChartThemeDefaults(),e=i?{[this.standaloneChartType]:i}:{},t={enabled:!0,snap:!0,label:{enabled:!1}};return ze({common:{navigator:{enabled:!1},zoom:{enabled:!0},animation:{enabled:!0,duration:500},axes:{number:{crosshair:t},category:{crosshair:t},log:{crosshair:t},time:{crosshair:t}}}},e)}getSeriesChartThemeDefaults(){}getActiveFormattingPanelOverrides(){var i,e;if(this.clearThemeOverrides)return{};let t=(i=this.chart)==null?void 0:i.getOptions().theme;return(e=t?.overrides)!=null?e:{}}destroy({keepChartInstance:i=!1}={}){if(i)return this.chart.resetAnimations(),this.chart;this.destroyChart()}destroyChart(){this.chart&&(this.chart.destroy(),this.chart=void 0)}},xc=class extends Mg{constructor(i){super(i),this.crossFilteringAllPoints=new Set,this.crossFilteringSelectedPoints=[]}getUpdateOptions(i,e){let t=this.getAxes(i,e);return bt(ze({},e),{data:this.getData(i,t),axes:t,series:this.getSeries(i)})}getData(i,e){let t=["area","line"].includes(this.standaloneChartType);return this.crossFiltering&&t?this.getCrossFilterData(i):this.getDataTransformedData(i,e)}getDataTransformedData(i,e){let t=e[0].type,{categories:n,data:r}=i,[s]=n;switch(t){case"category":return this.transformCategoryData(r,s.id);case"time":return this.transformTimeData(r,s.id);default:return r}}getXAxisType(i){return i.grouping?"grouped-category":this.isXAxisOfType(i,"time",e=>e instanceof Date)?"time":this.isXAxisOfType(i,"number")?"number":"category"}isXAxisOfType(i,e,t){let[n]=i.categories;if(n?.chartDataType)return n.chartDataType===e;if(!t)return!1;let r=i.data[0];return r?t(r[n.id]):!1}transformTimeData(i,e){var t;return((t=i[0])==null?void 0:t[e])instanceof Date?i:i.map(r=>{let s=r[e];return typeof s=="string"?bt(ze({},r),{[e]:new Date(s)}):r})}crossFilteringReset(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()}crossFilteringPointSelected(i){return this.crossFilteringSelectedPoints.length==0||this.crossFilteringSelectedPoints.includes(i)}crossFilteringDeselectedPoints(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length}extractLineAreaCrossFilterSeries(i,e){let[t]=e.categories,n=r=>this.standaloneChartType==="area"?e.getCrossFilteringContext().lastSelectedChartId===e.chartId?r+"-total":r:r+"-total";return i.map(r=>(r.yKey=n(r.yKey),r.listeners={nodeClick:s=>{let o=s.datum[r.xKey],a=s.event.metaKey||s.event.ctrlKey;this.crossFilteringAddSelectedPoint(a,o),this.crossFilterCallback(s)}},r.marker={formatter:s=>{let o=s.datum[t.id];return{fill:s.highlighted?"yellow":s.fill,size:s.highlighted?14:this.crossFilteringPointSelected(o)?8:0}}},this.standaloneChartType==="area"&&(r.fillOpacity=this.crossFilteringDeselectedPoints()?.3:1),this.standaloneChartType==="line"&&(r.strokeOpacity=this.crossFilteringDeselectedPoints()?.3:1),r))}getCrossFilterData(i){this.crossFilteringAllPoints.clear();let[e]=i.categories,t=i.fields[0].colId,n=`${t}-filtered-out`,r=i.getCrossFilteringContext().lastSelectedChartId;return i.data.map(s=>{let o=s[e.id];this.crossFilteringAllPoints.add(o);let a=this.crossFilteringPointSelected(o);return this.standaloneChartType==="area"&&r===i.chartId&&(s[`${t}-total`]=a?s[t]:s[t]+s[n]),this.standaloneChartType==="line"&&(s[`${t}-total`]=a?s[t]:s[t]+s[n]),s})}crossFilteringAddSelectedPoint(i,e){i?this.crossFilteringSelectedPoints.push(e):this.crossFilteringSelectedPoints=[e]}isHorizontal(i){let e=this.standaloneChartType;if(e!=="waterfall"&&e!=="box-plot"&&e!=="range-bar")return!1;let t=i.theme,n=r=>{var s,o,a;let l=(a=(o=(s=r?.overrides)==null?void 0:s[e])==null?void 0:o.series)==null?void 0:a.direction;return l!=null?l==="horizontal":typeof r?.baseTheme=="object"?n(r.baseTheme):!1};return n(t)}};function mF(i,e){let t=parseInt(i.slice(1,3),16),n=parseInt(i.slice(3,5),16),r=parseInt(i.slice(5,7),16);return e?`rgba(${t}, ${n}, ${r}, ${e})`:`rgba(${t}, ${n}, ${r})`}function gF(i,e){return i.map(t=>{let n=ai.Color.fromString(t);return new ai.Color(n.r,n.g,n.b,e).toHexString()})}var $z=new Set(["bar","groupedBar","stackedBar","normalizedBar"]),Kz=class extends xc{constructor(i){super(i)}getAxes(i){let e=[{type:this.getXAxisType(i),position:this.isHorizontal()?"left":"bottom"},{type:"number",position:this.isHorizontal()?"bottom":"left"}];if(this.isNormalised()){let t=e[1];t.label=bt(ze({},t.label),{formatter:n=>Math.round(n.value)+"%"})}return e}getSeries(i){let[e]=i.categories,t=i.fields.map(n=>({type:this.standaloneChartType,direction:this.isHorizontal()?"horizontal":"vertical",stacked:this.crossFiltering||lH(this.chartType),normalizedTo:this.isNormalised()?100:void 0,xKey:e.id,xName:e.name,yKey:n.colId,yName:n.displayName}));return this.crossFiltering?this.extractCrossFilterSeries(t):t}extractCrossFilterSeries(i){let e=this.getChartPalette(),t=(s,o)=>bt(ze({},s),{highlightStyle:{item:{fill:void 0}},fill:e?.fills[o],stroke:e?.strokes[o],listeners:{nodeClick:this.crossFilterCallback}}),n=s=>{let o=s.yKey+"-filtered-out";return bt(ze({},Yh({},s)),{yKey:o,fill:mF(s.fill,"0.3"),stroke:mF(s.stroke,"0.3"),showInLegend:!1})},r=[];for(let s=0;s<i.length;s++){let o=t(i[s],s);r.push(o),r.push(n(o))}return r}isNormalised(){let i=["normalizedColumn","normalizedBar"];return!this.crossFiltering&&M.includes(i,this.chartType)}isHorizontal(){return $z.has(this.chartType)}},jz=class extends xc{constructor(i){super(i)}getAxes(i){let e=[{type:this.getXAxisType(i),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){let t=e[1];t.label=bt(ze({},t.label),{formatter:n=>Math.round(n.value)+"%"})}return e}getSeries(i){let[e]=i.categories,t=i.fields.map(n=>({type:this.standaloneChartType,xKey:e.id,xName:e.name,yKey:n.colId,yName:n.displayName,normalizedTo:this.chartType==="normalizedArea"?100:void 0,stacked:["normalizedArea","stackedArea"].includes(this.chartType)}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(t,i):t}isNormalised(){return!this.crossFiltering&&this.chartType==="normalizedArea"}},Yz=class extends xc{constructor(i){super(i)}getAxes(i){return[{type:this.getXAxisType(i),position:"bottom"},{type:"number",position:"left"}]}getSeries(i){let[e]=i.categories,t=i.fields.map(n=>({type:this.standaloneChartType,xKey:e.id,xName:e.name,yKey:n.colId,yName:n.displayName}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(t,i):t}},qz=class extends Mg{constructor(i){super(i)}getAxes(i){let e=this.standaloneChartType==="radial-bar";return[{type:e?"angle-number":"angle-category"},{type:e?"radius-category":"radius-number"}]}getSeries(i){let{fields:e,categories:t,seriesGroupType:n}=i,[r]=t,s=this.standaloneChartType==="radial-bar",o=this.getSeriesGroupTypeOptions(n);return e.map(a=>{var l,c;return ze({type:this.standaloneChartType,angleKey:s?a.colId:r.id,angleName:s?(l=a.displayName)!=null?l:void 0:r.name,radiusKey:s?r.id:a.colId,radiusName:s?r.name:(c=a.displayName)!=null?c:void 0},o)})}getSeriesGroupType(){var i,e;let t=this.standaloneChartType;if(!["nightingale","radial-bar","radial-column"].includes(t))return;let n=(e=(i=this.getChart().series)==null?void 0:i[0])==null?void 0:e.properties.toJson(),r=()=>n.normalizedTo?"normalized":"stacked";return t==="nightingale"?n.grouped?"grouped":r():n.stacked?r():"grouped"}getUpdateOptions(i,e){let t=this.getAxes(i);return bt(ze({},e),{data:this.getData(i,t),axes:t,series:this.getSeries(i)})}getData(i,e){if(e.some(n=>n.type==="angle-category"||n.type==="radius-category")){let[n]=i.categories;return this.transformCategoryData(i.data,n.id)}else return i.data}getSeriesGroupTypeOptions(i){return i?{grouped:i==="grouped"||void 0,stacked:i!=="grouped"||void 0,normalizedTo:i==="normalized"?100:void 0}:{}}},Xz=class VL extends Mg{constructor(e){super(e)}getUpdateOptions(e,t){return bt(ze({},t),{data:this.crossFiltering?this.getCrossFilterData(e):e.data,series:this.getSeries(e)})}getSeries(e){let[t]=e.categories,n=e.fields.length,r={currentOffset:0,offsetAmount:n>1?20:40},s=this.getFields(e).map(o=>{var a;let l={type:this.standaloneChartType,angleKey:o.colId,angleName:o.displayName,sectorLabelKey:o.colId,calloutLabelName:t.name,calloutLabelKey:t.id};if(this.chartType==="donut"||this.chartType==="doughnut"){let{outerRadiusOffset:c,innerRadiusOffset:u}=VL.calculateOffsets(r),d=o.displayName?{title:{text:o.displayName,showInLegend:n>1}}:void 0;return bt(ze(bt(ze({},l),{type:"donut",outerRadiusOffset:c,innerRadiusOffset:u}),d),{calloutLine:{colors:(a=this.getChartPalette())==null?void 0:a.strokes}})}return l});return this.crossFiltering?this.extractCrossFilterSeries(s):s}getCrossFilterData(e){let t=e.fields[0].colId,n=`${t}-filtered-out`;return e.data.map(r=>{let s=r[t]+r[n];return r[`${t}-total`]=s,r[n]=1,r[t]=r[t]/s,r})}extractCrossFilterSeries(e){let t=this.getChartPalette(),n=l=>bt(ze({},l),{legendItemKey:l.calloutLabelKey,calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:l.angleKey,angleKey:l.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:this.crossFilterCallback}}),r=(l,c)=>{var u,d;return bt(ze({},Yh({},a)),{radiusKey:c+"-filtered-out",fills:gF((u=l.fills)!=null?u:t.fills,.3),strokes:gF((d=l.strokes)!=null?d:t.strokes,.3),showInLegend:!1})},s=e[0],o=s.angleKey,a=n(s);return[r(s,o),a]}static calculateOffsets(e){let t=e.currentOffset;e.currentOffset-=e.offsetAmount;let n=e.currentOffset;return e.currentOffset-=e.offsetAmount,{outerRadiusOffset:t,innerRadiusOffset:n}}getFields(e){return this.chartType==="pie"?e.fields.slice(0,1):e.fields}},Zz=class extends xc{constructor(i){super(i)}getAxes(i){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}getSeries(i){let[e]=i.categories,t=this.isPaired(),n=this.getSeriesDefinitions(i.fields,t),r=e.id===ol.DEFAULT_CATEGORY?void 0:e,s=n.map(o=>{var a,l,c,u,d;return o?.sizeField?{type:"bubble",xKey:o.xField.colId,xName:(a=o.xField.displayName)!=null?a:void 0,yKey:o.yField.colId,yName:(l=o.yField.displayName)!=null?l:void 0,title:`${o.yField.displayName} vs ${o.xField.displayName}`,sizeKey:o.sizeField.colId,sizeName:(c=o.sizeField.displayName)!=null?c:"",labelKey:r?r.id:o.yField.colId,labelName:r?r.name:void 0}:{type:"scatter",xKey:o.xField.colId,xName:(u=o.xField.displayName)!=null?u:void 0,yKey:o.yField.colId,yName:(d=o.yField.displayName)!=null?d:void 0,title:`${o.yField.displayName} vs ${o.xField.displayName}`,labelKey:r?r.id:o.yField.colId,labelName:r?r.name:void 0}});return this.crossFiltering?this.extractCrossFilterSeries(s,i):s}extractCrossFilterSeries(i,e){let{data:t}=e,n=this.getChartPalette(),r=c=>`${c}-filtered-out`,s=(c,u)=>{var d;let h=[1/0,-1/0];if(u!=null)for(let p of c){let m=(d=p[u])!=null?d:p[r(u)];m<h[0]&&(h[0]=m),m>h[1]&&(h[1]=m)}if(h[0]<=h[1])return h},o=(c,u)=>{let d=n?.fills[u],h=n?.strokes[u],p;if(c.type==="bubble"){let{sizeKey:g}=c;p=s(t,g)}let m=bt(ze({},c.marker),{fill:d,stroke:h,domain:p});return bt(ze({},c),{marker:m,highlightStyle:{item:{fill:"yellow"}},listeners:bt(ze({},c.listeners),{nodeClick:this.crossFilterCallback})})},a=c=>{let{yKey:u,xKey:d}=c,h={};return c.type==="bubble"&&(h={sizeKey:r(c.sizeKey)}),bt(ze(ze({},c),h),{yKey:r(u),xKey:r(d),marker:bt(ze({},c.marker),{fillOpacity:.3,strokeOpacity:.3}),showInLegend:!1,listeners:bt(ze({},c.listeners),{nodeClick:p=>{let m=p.datum[r(d)],g=bt(ze({},p),{xKey:d,datum:bt(ze({},p.datum),{[d]:m})});this.crossFilterCallback(g)}})})},l=i.map(o);return[...l,...l.map(a)]}getSeriesDefinitions(i,e){if(i.length<2)return[];let t=this.chartType==="bubble";if(e)return t?i.map((r,s)=>s%3===0?{xField:r,yField:i[s+1],sizeField:i[s+2]}:null).filter(r=>r&&r.yField&&r.sizeField):i.map((r,s)=>s%2===0?{xField:r,yField:i[s+1]}:null).filter(r=>r&&r.yField);let n=i[0];return t?i.map((r,s)=>s%2===1?{xField:n,yField:r,sizeField:i[s+1]}:null).filter(r=>r&&r.sizeField):i.filter((r,s)=>s>0).map(r=>({xField:n,yField:r}))}},BL=class extends xc{constructor(i){super(i)}getAxes(i,e){return[{type:this.getXAxisType(i),position:this.isHorizontal(e)?"left":"bottom"},{type:"number",position:this.isHorizontal(e)?"bottom":"left"}]}computeSeriesStatistics(i,e){let{data:t,fields:n}=i,[r]=i.categories,s=r.id||ol.DEFAULT_CATEGORY,o=this.groupDataByCategory(s,t);return Array.from(o).map(([a,l])=>{let c={[r.id]:a};return n.forEach((u,d)=>{let h=l.map(p=>p[u.colId]).filter(p=>typeof p=="number"&&!isNaN(p));Object.entries(e(h)).forEach(([p,m])=>{let g=`${p}:${d}`;c[g]=h.length>0?m:null})}),c})}groupDataByCategory(i,e){let t=n=>{if(i===ol.DEFAULT_CATEGORY)return 1;let r=n[i];return r==null?"":r instanceof Date?r.getTime():r};return e.reduce((n,r)=>{let s=t(r),o=n.get(s);return o?o.push(r):n.set(s,[r]),n},new Map)}},Qz=class extends BL{constructor(i){super(i)}getSeries(i){let[e]=i.categories;return i.fields.map((t,n)=>{var r;return{type:this.standaloneChartType,xKey:e.id,xName:e.name,yName:(r=t.displayName)!=null?r:void 0,yLowName:"Min",yHighName:"Max",yLowKey:`min:${n}`,yHighKey:`max:${n}`}})}getData(i){return this.computeSeriesStatistics(i,e=>({min:Math.min(...e),max:Math.max(...e)}))}},Jz=class extends xc{constructor(i){super(i)}getSeries(i){let e=i.fields[0];return[{type:this.standaloneChartType,xKey:e.colId,xName:e.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]}getAxes(i){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}},eW=class extends BL{constructor(i){super(i)}getSeries(i){let[e]=i.categories;return i.fields.map((t,n)=>{var r;return{type:this.standaloneChartType,xKey:e.id,xName:e.name,yName:(r=t.displayName)!=null?r:void 0,minName:"Min",q1Name:"Q1",medianName:"Median",q3Name:"Q3",maxName:"Max",minKey:`min:${n}`,q1Key:`q1:${n}`,medianKey:`median:${n}`,q3Key:`q3:${n}`,maxKey:`max:${n}`}})}getData(i){return this.computeSeriesStatistics(i,e=>{let t=e.sort((n,r)=>n-r);return{min:t[0],q1:this.quantile(t,.25),median:this.quantile(t,.5),q3:this.quantile(t,.75),max:t[t.length-1]}})}quantile(i,e){let t=(i.length-1)*e,n=Math.floor(t),r=t-n;return i[n+1]!==void 0?i[n]+r*(i[n+1]-i[n]):i[n]}};function tW(i,e){return i.reduce((t,n,r,s)=>t.concat(e(n,r,s)),new Array)}var iW="AG-GRID-DEFAULT-HEATMAP-CATEGORY-KEY",nW="AG-GRID-DEFAULT-HEATMAP-SERIES-KEY",rW="AG-GRID-DEFAULT-HEATMAP-VALUE-KEY",sW=class extends Mg{constructor(i){super(i)}getUpdateOptions(i,e){let t=nW,n=rW,r=iW;return bt(ze({},e),{series:this.getSeries(i,t,n,r),data:this.getData(i,t,n,r)})}getSeries(i,e,t,n){let[r]=i.categories;return[{type:this.standaloneChartType,yKey:n,xKey:e,colorKey:t,yName:r.name,xName:void 0,colorName:void 0}]}getData(i,e,t,n){let[r]=i.categories;return tW(i.data,(s,o)=>{let a=s[r.id],l=a==null?"":String(a),c={id:o,value:a,toString:()=>l};return i.fields.map(({colId:u,displayName:d})=>bt(ze({},s),{[e]:d,[t]:s[u],[n]:c}))})}getSeriesChartThemeDefaults(){return{gradientLegend:{gradient:{preferredLength:200}},series:{tooltip:{renderer:oW}}}}};function oW(i){let{xKey:e,yKey:t,colorKey:n,yName:r,datum:s}=i;return{title:"",content:[{label:r,value:s[t]},{label:s[e],value:n&&s[n]}].map(({label:l,value:c})=>`<b>${fF(String(l))}:</b> ${fF(String(c))}`).join("<br>")}}function fF(i){let e={"&":"&amp;","<":"&lt;",">":"&gt;"},t=`[${Object.keys(e).join("")}]`,n=new RegExp(t,"g");return i.replace(n,r=>e[r])}var aW=class extends xc{constructor(i){super(i)}getAxes(i,e){return[{type:this.getXAxisType(i),position:this.isHorizontal(e)?"left":"bottom"},{type:"number",position:this.isHorizontal(e)?"bottom":"left"}]}getSeries(i){var e;let[t]=i.categories,[n]=i.fields;return[{type:this.standaloneChartType,xKey:t.id,xName:t.name,yKey:n.colId,yName:(e=n.displayName)!=null?e:void 0}]}},GL=["number","category","time","grouped-category"],lW=["angle-category","angle-number","radius-category","radius-number"],cW=[...GL,...lW],uW=class UL extends be{constructor(e){super(),this.chartController=e}getChartThemeOverridesProxy(){return{getValue:e=>this.getChartOption(e),setValue:(e,t)=>this.setChartThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setChartThemeOverrides(e)}}getAxisThemeOverridesProxy(){return{getValue:e=>this.getAxisProperty(e),setValue:(e,t)=>this.setAxisThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setAxisThemeOverrides(e)}}getCartesianAxisOptionsProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,n)=>this.setCartesianAxisOptions(e,[{expression:t,value:n}]),setValues:t=>this.setCartesianAxisOptions(e,t)}}getCartesianAxisThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,n)=>this.setCartesianAxisThemeOverrides(e,[{expression:t,value:n}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getCartesianAxisAppliedThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisThemeOverride(e,t==="*"?null:t),setValue:(t,n)=>this.setCartesianAxisThemeOverrides(e,[{expression:t==="*"?null:t,value:n}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getSeriesOptionsProxy(e){return{getValue:(t,n)=>this.getSeriesOption(e(),t,n),setValue:(t,n)=>this.setSeriesOptions(e(),[{expression:t,value:n}]),setValues:t=>this.setSeriesOptions(e(),t)}}getPersistedChartThemeOverrides(e,t,n,r){let s=this.getRetainedChartThemeOverrideKeys(n,r),o=this.getRetainedChartAxisThemeOverrideKeys(null,n,r),a=this.createChartOptions();for(let l of s){let c=this.retrieveChartOptionsThemeOverride(e,n,l);c!==void 0&&this.assignChartOptionsThemeOverride(a,r,l,c)}return t&&this.assignPersistedAxisOverrides({existingAxes:t,retainedChartAxisThemeOverrideKeys:o,existingChartOptions:e,targetChartOptions:a,existingChartType:n,targetChartType:r}),a.theme.overrides}assignPersistedAxisOverrides(e){let{existingAxes:t,retainedChartAxisThemeOverrideKeys:n,existingChartOptions:r,targetChartOptions:s,existingChartType:o,targetChartType:a}=e;for(let{expression:l,targetAxisTypes:c}of n)for(let u of t.map(d=>d.type)){let d=this.retrieveChartOptionsThemeOverride(r,o,["axes",u,l].join("."));if(d!==void 0)for(let h of c)this.assignChartOptionsThemeOverride(s,a,["axes",h,l].join("."),d)}}getRetainedChartThemeOverrideKeys(e,t){let n=["animation"],r=["zoom","navigator"],s=((o,a)=>{let l=new Array;return ku(Ai(o))&&ku(Ai(a))&&l.push(...r),l})(e,t);return[...n,...s]}getRetainedChartAxisThemeOverrideKeys(e,t,n){return ku(Ai(t))&&ku(Ai(n))?this.getRetainedCartesianAxisThemeOverrideKeys(e).map(s=>({expression:s,targetAxisTypes:GL})):[]}getRetainedCartesianAxisThemeOverrideKeys(e){let t=e==="xAxis"?["",".top",".bottom"]:e==="yAxis"?["",".left",".right"]:["",".left",".right",".top",".bottom"],n=["crosshair"],r=new Array;for(let s of n)for(let o of t)r.push(`${s}${o}`);return r}getChartOption(e){return Pu(this.getChart(),e,void 0)}setChartThemeOverrides(e){let t=this.getChartType(),n=this.createChartOptions();for(let{expression:r,value:s}of e)this.assignChartOptionsThemeOverride(n,t,r,s);this.applyChartOptions(n)}applyChartOptions(e,t){if(Object.keys(e).length===0)return;this.updateChart(e),!t?.silent&&this.raiseChartOptionsChangedEvent()}awaitChartOptionUpdate(e){this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>e()).catch(n=>console.error("AG Grid - chart update failed",n))}getAxisProperty(e){var t;return Pu((t=this.getChart().axes)==null?void 0:t[0],e,void 0)}setAxisThemeOverrides(e){var t;let n=this.getChart(),r=this.getChartType(),s=this.createChartOptions();for(let{expression:o,value:a}of e){let l=(t=n.axes)==null?void 0:t.filter(c=>{let u=o.split("."),d=c;for(let h of u){if(!(h in d))return!1;d=d[h]}return!0});if(l)for(let c of l)this.isValidAxisType(c)&&this.assignChartAxisThemeOverride(s,r,c.type,null,o,a)}this.applyChartOptions(s)}getCartesianAxisProperty(e,t){let n=this.getChartAxes(),r=this.getCartesianAxis(n,e);return Pu(r,t,void 0)}getCartesianAxisThemeOverride(e,t){let n=this.getChartAxes(),r=this.getCartesianAxis(n,e);if(!r||!this.isValidAxisType(r))return;let s=this.getChartType(),o=this.getChart().getOptions();return this.retrieveChartAxisThemeOverride(o,s,r.type,e==="yAxis"?["left","right"]:["bottom","top"],t)}setCartesianAxisThemeOverrides(e,t){let n=this.getChartAxes(),r=this.getCartesianAxis(n,e);if(!r||!this.isValidAxisType(r))return;let s=this.getChartType(),o=this.createChartOptions();for(let{expression:a,value:l}of t)this.assignChartAxisThemeOverride(o,s,r.type,e==="yAxis"?["left","right"]:["bottom","top"],a,l);this.applyChartOptions(o)}setCartesianAxisOptions(e,t){this.updateCartesianAxisOptions(e,(n,r,s)=>{let o=r.indexOf(s);for(let{expression:a,value:l}of t)this.assignChartOption(n,`axes.${o}.${a}`,l)})}updateCartesianAxisOptions(e,t){let n=this.getChart().getOptions(),r="axes"in n?n.axes:void 0;if(!n||!r)return;let s=this.getChartAxes(),o=this.getCartesianAxis(s,e);if(!o)return;let a=this.createChartOptions();a.axes=r,t(a,s,o,n),this.applyChartOptions(a)}setCartesianCategoryAxisType(e,t){this.updateCartesianAxisOptions(e,(n,r,s,o)=>{let a=this.getChartType();this.assignPersistedAxisOverrides({existingAxes:[s],retainedChartAxisThemeOverrideKeys:this.getRetainedChartAxisThemeOverrideKeys(e,a,a),existingChartOptions:o,targetChartOptions:n,existingChartType:a,targetChartType:a}),this.assignChartOption(n,"axes.0.type",t),this.chartController.setCategoryAxisType(t)})}getCartesianAxis(e,t){if(!(e.length<2))switch(t){case"xAxis":return e[0].direction==="x"?e[0]:e[1];case"yAxis":return e[1].direction==="y"?e[1]:e[0]}}getSeriesOption(e,t,n){let r=this.getChart().series.find(s=>UL.isMatchingSeries(e,s));return Pu(n?r:r?.properties.toJson(),t,void 0)}setSeriesOptions(e,t){let n=this.createChartOptions();for(let{expression:r,value:s}of t)this.assignChartOptionsSeriesThemeOverride(n,e,`series.${r}`,s);this.applyChartOptions(n)}getPairedMode(){return this.chartController.getChartProxy().isPaired()}setPairedMode(e){this.chartController.getChartProxy().setPaired(e)}getChartAxes(){var e;return(e=this.getChart().axes)!=null?e:[]}retrieveChartAxisThemeOverride(e,t,n,r,s){if(r)for(let o of r){let a=this.retrieveChartOptionsThemeOverride(e,t,["axes",n,o,...s?[s]:[]].join("."));if(a!==void 0)return a}else return this.retrieveChartOptionsThemeOverride(e,t,["axes",n,...s?[s]:[]].join("."))}assignChartAxisThemeOverride(e,t,n,r,s,o){if(r)for(let a of r)this.assignChartOptionsThemeOverride(e,t,["axes",n,a,...s?[s]:[]].join("."),o);else this.assignChartOptionsThemeOverride(e,t,["axes",n,...s?[s]:[]].join("."),o)}isValidAxisType(e){return cW.includes(e.type)}getChartType(){return this.chartController.getChartType()}getChart(){return this.chartController.getChartProxy().getChart()}updateChart(e){let t=this.chartController.getChartProxy().getChartRef();t.skipAnimations(),Dr.updateDelta(t,e)}createChartOptions(){return{theme:{overrides:{}}}}retrieveChartOptionsThemeOverride(e,t,n){let r=this.getChartThemeOverridesSeriesTypeKeys(t);for(let s of r){let o=this.retrieveChartOptionsSeriesThemeOverride(e,s,n);if(o!==void 0)return o}}assignChartOptionsThemeOverride(e,t,n,r){let s=this.getChartThemeOverridesSeriesTypeKeys(t);for(let o of s)this.assignChartOptionsSeriesThemeOverride(e,o,n,r)}retrieveChartOptionsSeriesThemeOverride(e,t,n){return this.retrieveChartOption(e,["theme","overrides",t,...n?[n]:[]].join("."))}assignChartOptionsSeriesThemeOverride(e,t,n,r){this.assignChartOption(e,["theme","overrides",t,...n?[n]:[]].join("."),r)}getChartThemeOverridesSeriesTypeKeys(e){let t=this.chartController.getChartSeriesTypes(e);return this.chartController.isComboChart()&&t.push("common"),t}retrieveChartOption(e,t){return Pu(e,t,void 0)}assignChartOption(e,t,n){xH(e,t,n)}raiseChartOptionsChangedEvent(){let e=this.chartController.getChartModel(),t={type:X.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:e.chartOptions};this.eventService.dispatchEvent(t)}static isMatchingSeries(e,t){return sH(e)&&t.type===e}destroy(){super.destroy()}},dW=class extends xc{constructor(i){super(i)}getAxes(i){let e=i?i.fields:[],t=new Map(e.map(o=>[o.colId,o])),{primaryYKeys:n,secondaryYKeys:r}=this.getYKeys(e,i.seriesChartTypes),s=[{type:this.getXAxisType(i),position:"bottom"}];return n.length>0&&s.push({type:"number",keys:n,position:"left"}),r.length>0&&r.forEach(o=>{let a=t.get(o);if(!(a&&a.colId===o))return;let c={type:"number",keys:[o],position:"right"};s.push(c)}),s}getSeries(i){let{fields:e,seriesChartTypes:t}=i,[n]=i.categories;return e.map(r=>{let s=t.find(o=>o.colId===r.colId);if(s){let o=s.chartType,l=["groupedColumn","groupedBar"].includes(o)?{grouped:!0}:{};return ze({type:Ai(o),xKey:n.id,yKey:r.colId,yName:r.displayName,stacked:["stackedArea","stackedColumn"].includes(o)},l)}})}getYKeys(i,e){let t=[],n=[];return i.forEach(r=>{let s=r.colId,o=e.find(a=>a.colId===s);o&&(o.secondaryAxis?n.push(s):t.push(s))}),{primaryYKeys:t,secondaryYKeys:n}}},Xv=["chartSettings","chartData","chartFormat"],qm=["chartUnlink","chartLink","chartDownload"],ey={settings:"chartSettings",data:"chartData",format:"chartFormat"},cg=class extends be{isLegacyFormat(){return!this.chartService.isEnterprise()}downloadChart(i,e,t,n){i.chartController.getChartProxy().downloadChart(e,t,n)}toggleLinked(i){i.chartController.detachChartRange()}openAdvancedSettings(i,e){this.advancedSettingsMenuFactory.showMenu(i,e)}hideAdvancedSettings(){this.advancedSettingsMenuFactory.hideMenu()}getToolbarOptionsAndPanels(i){var e,t,n;let r=this.isLegacyFormat(),s=!!this.gos.get("chartToolPanelsDef")||!r,o,a,l;if(s){let c=r?[i.isChartLinked()?"chartLink":"chartUnlink","chartDownload"]:["chartMenu"],u=this.gos.getCallback("getChartToolbarItems");l=u?u({defaultItems:c}).filter(m=>{if(!(r?qm:[...qm,"chartMenu"]).includes(m)){let g;return Xv.includes(m)?g=`'${m}' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead`:m==="chartMenu"?g="'chartMenu' is only allowed as a Chart Toolbar Option when using AG Charts Enterprise":g=`'${m}' is not a valid Chart Toolbar Option`,M.warnOnce(g),!1}return!0}):c;let h=(t=(e=this.gos.get("chartToolPanelsDef"))==null?void 0:e.panels)==null?void 0:t.map(m=>{let g=ey[m];return g||M.warnOnce(`Invalid panel in chartToolPanelsDef.panels: '${m}'`),g}).filter(m=>!!m);o=h||Object.values(ey),i.isPivotChart()&&(o=o.filter(m=>m!=="chartData"));let p=(n=this.gos.get("chartToolPanelsDef"))==null?void 0:n.defaultToolPanel;a=p&&ey[p]||o[0],r&&(l=o.length>0?[o[0],...l]:l)}else{let c=["chartSettings","chartData","chartFormat",i.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],u=this.gos.getCallback("getChartToolbarItems");if(u){let h=this.gos.get("suppressChartToolPanelsButton");c=u({defaultItems:h?c:qm}).filter(m=>{if(!Xv.includes(m)&&!qm.includes(m))return M.warnOnce(`'${m}' is not a valid Chart Toolbar Option`),!1;if(!h&&Xv.includes(m)){let g=`'${m}' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead`;return M.warnOnce(g),!1}return!0}),h||(c=c.concat(Xv))}i.isPivotChart()&&(c=c.filter(h=>h!=="chartData"));let d=["chartUnlink","chartLink","chartDownload"];o=c.filter(h=>d.indexOf(h)===-1),a=o[0],l=c.filter(h=>d.indexOf(h)!==-1||o.length&&h===o[0])}return{panels:o,defaultPanel:a,chartToolbarOptions:l}}doesChartToolbarExist(i){let{chartToolbarOptions:e}=this.getToolbarOptionsAndPanels(i);return["chartMenu",...qm].some(t=>e.includes(t))}doChartToolPanelsExist(i){let{panels:e}=this.getToolbarOptionsAndPanels(i);return e.length>0}};oe([k("chartService")],cg.prototype,"chartService",2);oe([k("advancedSettingsMenuFactory")],cg.prototype,"advancedSettingsMenuFactory",2);cg=oe([De("chartMenuService")],cg);var ty="AG-GRID-DEFAULT-LABEL-KEY";function hW(i,e){let t=HL(i,n,r);return Z_(t);function n(o){return e.length}function r(o,a){let l=e[a],c=o[l];return s(c)}function s(o){return o==null?null:String(o)}}function pW(i,e){let t=HL(i,n,r);return Z_(t);function n(s){var o,a;return(a=(o=e(s))==null?void 0:o.length)!=null?a:0}function r(s,o){let a=e(s);if(!a)return null;let l=a.length-1-o;return a[l]}}function Z_(i,e=null,t){let{depth:n,rootValues:r,value:s,children:o}=i;if(r)return r.map(l=>ze({[ty]:e},l));if(n===0)return[ze({[ty]:e},s)];let a=[];for(let[l,c]of o.entries())a.push(...Z_(c,l,!0));return t?[ze({[ty]:e,children:a},s??{})]:a}function HL(i,e,t){let n={depth:0,children:new Map};return i.forEach(s=>{let o=e(s);r(s,o,t,0,n)}),n;function r(s,o,a,l,c){if(l===o)return l===0?(c.rootValues||(c.rootValues=[]),c.rootValues.push(s)):c.value=s,c;{let u=a(s,l),d=c.children.get(u),h=r(s,o,a,l+1,d||{depth:0,children:new Map});return c.children.set(u,h),c.depth=Math.max(1+h.depth,c.depth),c}}}var mW=class extends Mg{constructor(i){super(i)}getUpdateOptions(i,e){let{fields:t}=i,[n,r]=t;return bt(ze({},e),{series:this.getSeries(n,r),data:this.getData(i,n,r)})}getSeriesChartThemeDefaults(){return{gradientLegend:{gradient:{preferredLength:200}}}}getSeries(i,e){var t,n;return[{type:this.standaloneChartType,labelKey:ty,sizeKey:i?.colId,sizeName:(t=i?.displayName)!=null?t:void 0,colorKey:e?.colId,colorName:(n=e?.displayName)!=null?n:void 0}]}getData(i,e,t){var n;let{categories:r,data:s,groupData:o,grouping:a}=i;if(a){let l=t?s.concat((n=o?.map(c=>{let u=ze({},c);return delete u[e.colId],u}))!=null?n:[]):s;return pW(l,c=>{var u,d;return(d=(u=c[pd])==null?void 0:u.labels)!=null?d:null})}else{let l=r.map(({id:c})=>c);return hW(s,l)}}},Gs=(()=>{let i=class n_ extends ae{constructor(t){super(n_.TEMPLATE),this.params=t}init(){let t=bt(ze({},this.params),{chartType:ag(this.params.chartType),chartThemeName:this.getThemeName()}),n=this.gos.get("enableRtl");this.addCssClass(n?"ag-rtl":"ag-ltr");let r=this.createBean(new ol(t));this.chartController=this.createManagedBean(new ns(r)),this.chartOptionsService=this.createManagedBean(new uW(this.chartController)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,ns.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.addManagedPropertyListeners(["chartThemeOverrides","chartThemes"],this.reactivePropertyUpdate.bind(this)),this.update(),this.raiseChartCreatedEvent()}createChart(){var t;let n;this.chartProxy&&(n=this.chartProxy.destroy({keepChartInstance:!0}));let r=(l,c)=>{let u=this.params.crossFilteringContext;u.lastSelectedChartId=c?"":this.chartController.getChartId(),c&&this.params.crossFilteringResetCallback(),this.crossFilterService.filter(l,c)},s=this.chartController.getChartType(),o={chartType:s,chartInstance:n,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gos.get("customChartThemes"),getGridOptionsChartThemeOverrides:()=>this.getGridOptionsChartThemeOverrides(),getExtraPaddingDirections:()=>{var l,c;return(c=(l=this.chartMenu)==null?void 0:l.getExtraPaddingDirections())!=null?c:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:(t=this.params.crossFiltering)!=null?t:!1,crossFilterCallback:r,parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:l=>this.chartTranslationService.translate(l)};if(this.params.chartOptionsToRestore=void 0,this.chartType=s,this.chartProxy=n_.createChartProxy(o),!this.chartProxy){console.warn("AG Grid: invalid chart type supplied: ",o.chartType);return}let a=this.eChart.querySelector("canvas");a&&a.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.createMenuContext(),this.titleEdit&&this.titleEdit.refreshTitle(this.chartMenuContext)}createMenuContext(){if(this.chartMenuContext)return;let t=this.createManagedBean(new Ru(this.chartOptionsService.getChartThemeOverridesProxy())),n=this.createManagedBean(new Ru(this.chartOptionsService.getAxisThemeOverridesProxy()));this.chartMenuContext={chartController:this.chartController,chartOptionsService:this.chartOptionsService,chartMenuParamsFactory:t,chartAxisMenuParamsFactory:n}}getChartThemeName(){return this.chartController.getChartThemeName()}getChartThemes(){return this.chartController.getThemeNames()}getGridOptionsChartThemeOverrides(){return this.gos.get("chartThemeOverrides")}static createChartProxy(t){switch(t.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new Kz(t);case"pie":case"donut":case"doughnut":return new Xz(t);case"area":case"stackedArea":case"normalizedArea":return new jz(t);case"line":return new Yz(t);case"scatter":case"bubble":return new Zz(t);case"histogram":return new Jz(t);case"radarLine":case"radarArea":case"nightingale":case"radialColumn":case"radialBar":return new qz(t);case"rangeBar":case"rangeArea":return new Qz(t);case"boxPlot":return new eW(t);case"treemap":case"sunburst":return new mW(t);case"heatmap":return new sW(t);case"waterfall":return new aW(t);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new dW(t);default:throw`AG Grid: Unable to create chart as an invalid chartType = '${t.chartType}' was supplied.`}}addDialog(){let t=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),{width:n,height:r}=this.getBestDialogSize();this.chartDialog=new wr({resizable:!0,movable:!0,maximizable:!0,title:t,width:n,height:r,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(wr.EVENT_DESTROYED,()=>{this.destroy(),this.chartMenuService.hideAdvancedSettings()})}getBestDialogSize(){let t=this.popupService.getPopupParent(),n=M.getAbsoluteWidth(t)*.75,r=M.getAbsoluteHeight(t)*.75,s=.553,o=this.chartProxy.getChart(),a=this.params.insideDialog?850:o.width,l=this.params.insideDialog?470:o.height;return(a>n||l>r)&&(a=Math.min(a,n),l=Math.round(a*s),l>r&&(l=r,a=Math.min(a,Math.round(l/s)))),{width:a,height:l}}addMenu(){this.params.crossFiltering||(this.chartMenu=this.createBean(new zz(this.eChartContainer,this.eMenuContainer,this.chartMenuContext)),this.eChartContainer.appendChild(this.chartMenu.getGui()))}addTitleEditComp(){this.titleEdit=this.createBean(new Wz(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartMenuContext)}update(t){if(t?.chartId&&!this.chartController.update(t))return;let n=this.chartTypeChanged(t),r=n||this.chartEmpty?(o=>{let a=this.chartType,l=o,c=this.chartProxy.getChart(),u=c?.getOptions(),d=c?.axes;return this.chartOptionsService.getPersistedChartThemeOverrides(u,d,a,l??a)})(n):void 0;n&&this.createChart();let s=r&&t?.chartThemeOverrides?Yh(r,t.chartThemeOverrides):r||t?.chartThemeOverrides;this.updateChart(s),t?.chartId&&this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartApiUpdateEvent()})}updateChart(t){let{chartProxy:n}=this,r=this.chartController.getSelectedValueColState(),s=this.chartController.getChartData(),o=this.handleEmptyChart(s,r.length);if(this.chartEmpty=o,o){t&&this.chartController.updateThemeOverrides(t);return}let a=this.chartController.getChartUpdateParams(t);n.update(a),this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartUpdatedEvent()}),this.titleEdit.refreshTitle(this.chartMenuContext)}chartTypeChanged(t){let[n,r]=[this.chartController.getChartType(),t?.chartType],s=r?ag(r):void 0;return this.chartType!==n?s??n:s&&n!==s?s:null}getChartModel(){return this.chartController.getChartModel()}getChartImageDataURL(t){return this.chartProxy.getChartImageDataURL(t)}handleEmptyChart(t,n){let r=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),s=this.chartController.getChartType(),o=1;this.chartController.isActiveXYChart()?o=s==="bubble"?3:2:Iu(Ai(s))&&(o=0);let a=n<o||t.length===0;if(this.eChart){let l=r||a;M.setDisplayed(this.eChart,!l),M.setDisplayed(this.eEmpty,l)}return r?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):a?(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0):!1}downloadChart(t,n,r){this.chartProxy.downloadChart(t,n,r)}openChartToolPanel(t){let n=t&&ey[t];this.chartMenu.showMenu({panel:n})}closeChartToolPanel(){this.chartMenu.hideMenu()}getChartId(){return this.chartController.getChartId()}getUnderlyingChart(){return this.chartProxy.getChartRef()}crossFilteringReset(){this.chartProxy.crossFilteringReset()}setActiveChartCellRange(t){this.getGui().contains(t.relatedTarget)||(this.chartController.setChartRange(!0),this.focusService.clearFocusedCell())}getThemeName(){let t=this.gos.get("chartThemes")||zO;if(t.length===0)throw new Error("Cannot create chart: no chart themes available.");let{chartThemeName:n}=this.params;return M.includes(t,n)?n:t[0]}getAllKeysInObjects(t){let n={};return t.filter(r=>r!=null).forEach(r=>{Object.keys(r).forEach(s=>n[s]=null)}),Object.keys(n)}validateCustomThemes(){let t=this.getChartThemes(),n=this.gos.get("customChartThemes");n&&this.getAllKeysInObjects([n]).forEach(r=>{M.includes(t,r)||console.warn("AG Grid: a custom chart theme with the name '"+r+"' has been supplied but not added to the 'chartThemes' list")})}reactivePropertyUpdate(){this.chartController.setChartThemeName(this.getThemeName(),!0);let t=this.getChartId(),n=this.chartController.isCrossFilterChart()?"crossFilter":this.getChartModel().modelType,r=this.gos.get("chartThemeOverrides")||{};this.update({type:`${n}ChartUpdate`,chartId:t,chartThemeOverrides:r})}raiseChartCreatedEvent(){let t={type:X.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then(()=>{this.eventService.dispatchEvent(t)})}raiseChartDestroyedEvent(){let t={type:X.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(t)}destroy(){var t;super.destroy(),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog),(t=this.onDestroyColorSchemeChangeListener)==null||t.call(this);let n=this.getGui();M.clearElement(n),M.removeFromParent(n),this.raiseChartDestroyedEvent()}};return i.TEMPLATE=`<div class="ag-chart" tabindex="-1">
            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">
                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>
                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>
            </div>
            <div ref="eTitleEditContainer"></div>
            <div ref="eMenuContainer" class="ag-chart-docked-container" style="min-width: 0px;"></div>
        </div>`,i})();oe([ce("eChart")],Gs.prototype,"eChart",2);oe([ce("eChartContainer")],Gs.prototype,"eChartContainer",2);oe([ce("eMenuContainer")],Gs.prototype,"eMenuContainer",2);oe([ce("eEmpty")],Gs.prototype,"eEmpty",2);oe([ce("eTitleEditContainer")],Gs.prototype,"eTitleEditContainer",2);oe([k("chartCrossFilterService")],Gs.prototype,"crossFilterService",2);oe([k("chartTranslationService")],Gs.prototype,"chartTranslationService",2);oe([k("chartMenuService")],Gs.prototype,"chartMenuService",2);oe([k("focusService")],Gs.prototype,"focusService",2);oe([k("popupService")],Gs.prototype,"popupService",2);oe([J],Gs.prototype,"init",1);var vF=Gs,ug="31.3.4",dg=!1;function gW(i){let e=i.version;return i.version==null&&(i.version=AW(i)),i=Rr("23.0.0",i,fW),i=Rr("24.0.0",i,vW),i=Rr("25.1.0",i,yW),i=Rr("26.0.0",i,CW),i=Rr("26.1.0",i,bW),i=Rr("26.2.0",i,SW),i=Rr("28.0.0",i,xW),i=Rr("28.2.0",i,_W),i=Rr("29.0.0",i,wW),i=Rr("29.1.0",i,zL),i=Rr("29.2.0",i,WL),i=Rr("30.0.0",i,EW),i=Rr("31.0.0",i,TW),i=MW(i),i=Rr(ug,i,t=>t),dg&&e!==i.version&&console.log("AG Grid: ChartModel migration complete",{model:i}),i}function fW(i){return i=gr("chartOptions.legend.item.marker.type","shape",i),i=gr("chartOptions.seriesDefaults.marker.type","shape",i),i=gr("chartOptions.legend.padding","spacing",i),i}function vW(i){var e;i=sr("chartOptions.seriesDefaults.marker.minSize",i);let t=i,{chartType:n,chartPalette:r,chartOptions:s}=t,o=s,{xAxis:a,yAxis:l}=o,c=cc(o,["xAxis","yAxis"]),u=cc(t,["chartType","chartPalette","chartOptions"]),d=hH(n),h=d?.map((m,g)=>ze({type:m},g===0?a:l));return ze({chartType:n,chartThemeName:(e={borneo:"ag-default",material:"ag-material",bright:"ag-vivid"}[r])!=null?e:"ag-default",chartOptions:bt(ze({},c),{axes:h,xAxis:a,yAxis:l})},u)}function yW(i){return i=gr("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",i),i}function CW(i){return i=rl("chartOptions.seriesDefaults.highlightStyle",i,t=>{var n=t,{dimOpacity:r}=n,s=cc(n,["dimOpacity"]);return ze(ze({},s),r!=null?{series:{dimOpacity:r}}:{})}),i=sr("chart",i),i=sr("chartOptions.seriesDefaults.tooltipClass",i),i=sr("chartOptions.seriesDefaults.tooltipTracking",i),i=CF("chartOptions.axes[].label.rotation",0,i),i=CF("chartOptions.axes[].label.rotation",335,i),i}function bW(i){let e=t=>{var n=t,{item:r,series:s}=n,o=cc(n,["item","series"]);return ze({item:ze(ze({},o),r)},s?{series:s}:{})};return i=rl("chartOptions.seriesDefaults.highlightStyle",i,e),i=rl("chartOptions.series[].highlightStyle",i,e),i}function SW(i){i=iy("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",i),i=iy("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",i),i=iy("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",i),i=sr("chartOptions.seriesDefaults.fill",i),i=sr("chartOptions.seriesDefaults.stroke",i),i=sr("chartOptions.seriesDefaults.callout.colors",i),i=sr("chartOptions.xAxis",i),i=sr("chartOptions.yAxis",i);let e=i,{chartType:t,chartOptions:n}=e,r=n,{axes:s,series:o,seriesDefaults:a}=r,l=cc(r,["axes","series","seriesDefaults"]),c=cc(e,["chartType","chartOptions"]),u=ag(t),d=Ai(u),h=[d],p={};if(!LO(d)){let g={top:{},bottom:{},left:{},right:{}},f=s.map(y=>{var b=y,{type:v}=b,S=cc(b,["type"]);return{[v]:ze(ze({},g),S)}}).reduce(bF,{});NO.filter(y=>f[y]==null).forEach(y=>{f[y]=ze({},g)}),p.axes=f}let m=h.map(g=>({[g]:ze(bt(ze({},p),{series:a}),l)})).reduce(bF,{});return i=bt(ze({},c),{chartType:u,chartOptions:m}),i}function xW(i){return i=sr("chartOptions.*.title.padding",i),i=sr("chartOptions.*.subtitle.padding",i),i=sr("chartOptions.*.axes.*.title.padding",i),i=Q_("chartOptions.*.axes.*.title.enabled",!1,i),i}function _W(i){return i=gr("chartOptions.pie.series.callout","calloutLine",i),i=gr("chartOptions.pie.series.label","calloutLabel",i),i=gr("chartOptions.pie.series.labelKey","sectorLabelKey",i),i=gr("chartOptions.pie.series.labelName","sectorLabelName",i),i=gr("chartOptions.donut.series.callout","calloutLine",i),i=gr("chartOptions.donut.series.label","calloutLabel",i),i=gr("chartOptions.donut.series.labelKey","sectorLabelKey",i),i=gr("chartOptions.donut.series.labelName","sectorLabelName",i),i}function wW(i){return i=Xm("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",i),i=Xm("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",i),i=Xm("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",i),i=Xm("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",i),i=Xm("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",i),i=iy("chartOptions.scatter.series.paired","chartOptions.scatter.paired",i),i}function zL(i){return i=sr("chartOptions.axes[].tick.count",i),i}function WL(i){return i=rl("chartOptions.*.tooltip",i,t=>{var n=t,{tracking:r}=n,s=cc(n,["tracking"]),o,a,l,c;let u=ze({},s);return r===!1?((o=u.position)!=null||(u.position={type:"pointer"}),(a=u.range)!=null||(u.range="nearest")):r===!0&&((l=u.position)!=null||(u.position={type:"node"}),(c=u.range)!=null||(u.range="nearest")),u}),i}function EW(i){return i=gr("chartOptions.pie.series.labelKey","sectorLabelKey",i),i=gr("chartOptions.pie.series.labelName","sectorLabelName",i),i=zL(i),i=WL(i),i=sr("chartOptions.*.series.flipXY",i),i=$L("chartOptions.common.legend.enabled",!0,i),i=Q_("chartOptions.common.legend.position","right",i),i}function TW(i){let e={"ag-pastel":"ag-sheets","ag-solar":"ag-polychroma"},t=gr("chartOptions.column","bar",i),n=e[t.chartThemeName]||t.chartThemeName;return bt(ze({},t),{chartThemeName:n})}function MW(i){return i=sr("chartOptions.*.width",i),i=sr("chartOptions.*.height",i),i=Q_("chartOptions.*.axes.category.label.autoRotate",!0,i),i}function AW(i){var e,t;let n=i;if(i.version!=null)return i.version;let r=(d,...h)=>Object.keys(d||{}).some(p=>h.includes(p)),s=n.chartOptions,o=r(s,"seriesDefaults")?s?.seriesDefaults:s?.[Object.keys(s)[0]],a={"27.0.0":r(n,"seriesChartTypes"),"26.2.0":!r(s,"seriesDefaults"),"26.1.0":r(o?.highlightStyle,"item"),"26.0.0":r(o?.highlightStyle,"series"),"25.1.0":r(o?.label,"minAngle"),"25.0.0":r(n,"modelType","aggFunc","unlinkChart","suppressChartRanges")||r(o,"lineDash","lineDashOffset"),"24.0.0":r(n,"chartThemeName","chart")||r(s,"series"),"23.2.0":r(s,"navigator"),"23.0.0":r((t=(e=s?.legend)==null?void 0:e.item)==null?void 0:t.marker,"shape"),"22.1.0":r(n,"chartPalette","chartType")},l="27.1.0",c=Object.entries(a).filter(([d,h])=>h);dg&&console.log("AG Grid: ChartModel migration",{heuristicVersionCandidates:c});let[u=l]=c[0];return dg&&console.log("AG Grid: ChartModel migration",{heuristicVersion:u}),u}function Rr(i,e,t){if(yF(i)>yF(e.version)){dg&&console.log("AG Grid: ChartModel migration",{migratingTo:i});let n=t(e);return n.version=i,dg&&console.log("AG Grid: ChartModel migration",{migratedTo:i,result:n}),n}return e}function PW(i){let e=typeof i=="string"?i.split(".").map(t=>Number(t)):[];if(e.length!==3||e.some(t=>isNaN(t)))throw new Error("AG Grid - Illegal version string: "+i);return{major:e[0],minor:e[1],patch:e[2]}}function yF(i){let{major:e,minor:t,patch:n}=PW(i);return e*1e4+t*100+n}function CF(i,e,t){return dc(i,!0,t,(n,r)=>{n[r]===e&&delete n[r]})}function Q_(i,e,t){return dc(i,!1,t,(n,r)=>{n[r]==null&&(n[r]=e)})}function $L(i,e,t){var n;typeof i=="string"&&(i=i.split("."));let r=i[0];return i.length>1&&(t[r]=$L(i.slice(1),e,(n=t[r])!=null?n:{})),Object.keys(t).includes(r)||(t[r]=e),t}function iy(i,e,t){let n,r=!1;return t=dc(i,!0,t,(s,o)=>{r=!0,n=s[o],delete s[o]}),r?dc(e,!1,t,(s,o)=>{s[o]=n}):t}function Xm(i,e,t){let n,r=!1;return t=dc(i,!0,t,(s,o)=>{r=!0,n=s[o],delete s[o]}),r?dc(e,!1,t,(s,o)=>{s[o]===void 0&&(s[o]=n)}):t}function gr(i,e,t){return dc(i,!0,t,(n,r)=>{n[e]=n[r],delete n[r]})}function sr(i,e){return dc(i,!0,e,(t,n)=>delete t[n])}function dc(i,e,t,n){let r=i instanceof Array?i:i.split("."),s=r.slice(0,r.length-1),o=r[r.length-1];return rl(s,t,a=>{let l=Object.keys(a).includes(o);if(e&&!l)return a;let c=ze({},a);return n(c,o),c})}function rl(i,e,t){let n=i instanceof Array?i:i.split(".");if(e=ze({},e),n.length===0)return t(e);if(n[0].startsWith("{")){let r=n[0].substring(1,n[0].lastIndexOf("}")).split(",");for(let s of r)e[s]!=null&&(e[s]=rl(n.slice(1),e[s],t))}else if(n[0].endsWith("[]")){let r=n[0].substring(0,i[0].indexOf("["));e[r]instanceof Array&&(e[r]=e[r].map(s=>rl(n.slice(1),s,t)))}else if(n[0]==="*")for(let r in e)e[r]=rl(n.slice(1),e[r],t);else e[n[0]]!=null&&(e[n[0]]=rl(n.slice(1),e[n[0]],t));return e}var bF=(i,e)=>ze(ze({},i),e),Nu=(()=>{let i=class extends be{constructor(){super(...arguments),this.activeCharts=new Set,this.activeChartComps=new Set,this.crossFilteringContext={lastSelectedChartId:""},this.isEnterprise=()=>da.enterpriseModule.isEnterprise}updateChart(e){if(this.activeChartComps.size===0){console.warn("AG Grid - No active charts to update.");return}let t=[...this.activeChartComps].find(n=>n.getChartId()===e.chartId);if(!t){console.warn(`AG Grid - Unable to update chart. No active chart found with ID: ${e.chartId}.`);return}t.update(e)}getChartModels(){let e=[],t=n=>bt(ze({},n),{version:ug});return this.activeChartComps.forEach(n=>e.push(t(n.getChartModel()))),e}getChartRef(e){let t;return this.activeCharts.forEach(n=>{n.chartId===e&&(t=n)}),t}getChartComp(e){let t;return this.activeChartComps.forEach(n=>{n.getChartId()===e&&(t=n)}),t}getChartImageDataURL(e){let t;return this.activeChartComps.forEach(n=>{n.getChartId()===e.chartId&&(t=n.getChartImageDataURL(e.fileFormat))}),t}downloadChart(e){let t=Array.from(this.activeChartComps).find(n=>n.getChartId()===e.chartId);t?.downloadChart(e.dimensions,e.fileName,e.fileFormat)}openChartToolPanel(e){let t=Array.from(this.activeChartComps).find(n=>n.getChartId()===e.chartId);t?.openChartToolPanel(e.panel)}closeChartToolPanel(e){let t=Array.from(this.activeChartComps).find(n=>n.getChartId()===e);t?.closeChartToolPanel()}createChartFromCurrentRange(e="groupedColumn"){let t=this.getSelectedRange();return this.createChart({cellRange:t,chartType:e})}restoreChart(e,t){if(!e){console.warn("AG Grid - unable to restore chart as no chart model is provided");return}e.version!==ug&&(e=gW(e));let n,r,s,o;if(e.modelType==="pivot"?(this.gos.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"}),n=this.createCellRange(void 0,!0),r=!0,s=!0):(n=this.createCellRange(e.cellRange),o=e.chartPalette),!!n)return this.createChart(bt(ze({},e),{cellRange:n,pivotChart:r,suppressChartRanges:s,chartContainer:t,chartOptionsToRestore:e.chartOptions,chartPaletteToRestore:o}))}createRangeChart(e){let t=this.createCellRange(e.cellRange);if(t)return this.createChart(bt(ze({},e),{cellRange:t}))}createPivotChart(e){this.gos.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"});let t=this.createCellRange(void 0,!0);if(t)return this.createChart(bt(ze({},e),{cellRange:t,pivotChart:!0,suppressChartRanges:!0}))}createCrossFilterChart(e){let t=this.createCellRange(e.cellRange);if(!t)return;let r=typeof e.suppressChartRanges<"u"&&e.suppressChartRanges!==null?e.suppressChartRanges:!0;return this.createChart(bt(ze({},e),{cellRange:t,suppressChartRanges:r,crossFiltering:!0}))}createChart(e){let t=HO.validateCreateParams(e);if(!t)return;e=t===!0?e:t;let{chartType:n,chartContainer:r}=e,s=this.gos.getCallback("createChartContainer"),o=bt(ze({},e),{chartId:this.generateId(),chartType:ag(n),insideDialog:!(r||s),crossFilteringContext:this.crossFilteringContext,crossFilteringResetCallback:()=>this.activeChartComps.forEach(c=>c.crossFilteringReset())}),a=new vF(o);this.context.createBean(a);let l=this.createChartRef(a);if(r){r.appendChild(a.getGui());let c=this.environment.getTheme();c.el&&!c.el.contains(r)&&r.classList.add(c.theme)}else s?s(l):a.addEventListener(vF.EVENT_DESTROYED,()=>{this.activeChartComps.delete(a),this.activeCharts.delete(l)});return l}createChartRef(e){let t={destroyChart:()=>{this.activeCharts.has(t)&&(this.context.destroyBean(e),this.activeChartComps.delete(e),this.activeCharts.delete(t))},chartElement:e.getGui(),chart:e.getUnderlyingChart(),chartId:e.getChartModel().chartId};return this.activeCharts.add(t),this.activeChartComps.add(e),t}getSelectedRange(){var e,t;let n=(t=(e=this.rangeService)==null?void 0:e.getCellRanges())!=null?t:[];return n.length>0?n[0]:{columns:[]}}generateId(){return`id-${Math.random().toString(36).substring(2,18)}`}createCellRange(e,t){var n;let r=t?{rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(o=>o.getColId())}:e,s=r&&((n=this.rangeService)==null?void 0:n.createPartialCellRangeFromRangeParams(r,!0));return s||console.warn(`AG Grid - unable to create chart as ${t?"there are no columns in the grid":"no range is selected"}.`),s}destroyAllActiveCharts(){this.activeCharts.forEach(e=>e.destroyChart())}};return i.CHARTS_VERSION=Lx,i})();oe([k("columnModel")],Nu.prototype,"columnModel",2);oe([ji("rangeService")],Nu.prototype,"rangeService",2);oe([_i],Nu.prototype,"destroyAllActiveCharts",1);Nu=oe([De("chartService")],Nu);var r_=(()=>{let i=class extends be{translate(e){let t=this.localeService.getLocaleTextFunc(),n=i.DEFAULT_TRANSLATIONS[e];return t(e,n)}};return i.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Chart",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",switchCategorySeries:"Switch Category / Series",categoryValues:"Category Values",seriesLabels:"Series Labels",aggregate:"Aggregate",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",xAxis:"Horizontal Axis",yAxis:"Vertical Axis",polarAxis:"Polar Axis",radiusAxis:"Radius Axis",navigator:"Navigator",zoom:"Zoom",animation:"Animation",crosshair:"Crosshair",color:"Color",thickness:"Thickness",preferredLength:"Preferred Length",xType:"X Type",axisType:"Axis Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",timeFormat:"Time Format",autoRotate:"Auto Rotate",labelRotation:"Rotation",circle:"Circle",orientation:"Orientation",polygon:"Polygon",fixed:"Fixed",parallel:"Parallel",perpendicular:"Perpendicular",radiusAxisPosition:"Position",ticks:"Ticks",gridLines:"Grid Lines",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",lineDashOffset:"Dash Offset",scrollingZoom:"Scrolling",scrollingStep:"Scrolling Step",selectingZoom:"Selecting",durationMillis:"Duration (ms)",crosshairLabel:"Label",crosshairSnap:"Snap to Node",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeColor:"Line Color",strokeOpacity:"Line Opacity",miniChart:"Mini-Chart",histogramBinCount:"Bin count",connectorLine:"Connector Line",seriesItems:"Series Items",seriesItemType:"Item Type",seriesItemPositive:"Positive",seriesItemNegative:"Negative",seriesItemLabels:"Item Labels",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",polarGroup:"Polar",statisticalGroup:"Statistical",hierarchicalGroup:"Hierarchical",specializedGroup:"Specialized",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",donutTooltip:"Donut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",radialColumnTooltip:"Radial Column",radialBarTooltip:"Radial Bar",radarLineTooltip:"Radar Line",radarAreaTooltip:"Radar Area",nightingaleTooltip:"Nightingale",rangeBarTooltip:"Range Bar",rangeAreaTooltip:"Range Area",boxPlotTooltip:"Box Plot",treemapTooltip:"Treemap",sunburstTooltip:"Sunburst",heatmapTooltip:"Heatmap",waterfallTooltip:"Waterfall",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",innerRadius:"Inner Radius",startAngle:"Start Angle",endAngle:"End Angle",reverseDirection:"Reverse Direction",groupPadding:"Group Padding",seriesPadding:"Series Padding",group:"Group",tile:"Tile",whisker:"Whisker",cap:"Cap",capLengthRatio:"Length Ratio",labelPlacement:"Placement",inside:"Inside",outside:"Outside",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",chartMenuToolbarTooltip:"Menu",chartEdit:"Edit Chart",chartAdvancedSettings:"Advanced Settings",chartLink:"Link to Grid",chartUnlink:"Unlink from Grid",chartDownload:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis",seriesAdd:"Add a series",categoryAdd:"Add a category",area:"Area",bar:"Bar",column:"Column",line:"Line",scatter:"Scatter",histogram:"Histogram",radialColumn:"Radial Column",radialBar:"Radial Bar",radarLine:"Radar Line",radarArea:"Radar Area",nightingale:"Nightingale",rangeBar:"Range Bar",rangeArea:"Range Area",treemap:"Treemap",sunburst:"Sunburst",waterfall:"Waterfall",boxPlot:"Box Plot",pie:"Pie",donut:"Donut",stackedArea:"StackedArea",groupedColumn:"Grouped Column",stackedColumn:"Stacked Column",advancedSettings:"Advanced Settings",ariaChartMenuClose:"Close Chart Edit Menu",timeFormatSlashesDDMMYYYY:"DD/MM/YYYY",timeFormatSlashesMMDDYYYY:"MM/DD/YYYY",timeFormatSlashesDDMMYY:"DD/MM/YY",timeFormatSlashesMMDDYY:"MM/DD/YY",timeFormatDotsDDMYY:"DD.M.YY",timeFormatDotsMDDYY:"M.DD.YY",timeFormatDashesYYYYMMDD:"YYYY-MM-DD",timeFormatSpacesDDMMMMYYYY:"DD MMMM YYYY",timeFormatHHMMSS:"HH:MM:SS",timeFormatHHMMSSAmPm:"HH:MM:SS AM/PM",sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average",direction:"Direction",horizontal:"Horizontal",vertical:"Vertical",seriesGroupType:"Group Type",groupedSeriesGroupType:"Grouped",stackedSeriesGroupType:"Stacked",normalizedSeriesGroupType:"100% Stacked"},i})();r_=oe([De("chartTranslationService")],r_);var hc=class extends be{filter(i,e=!1){let t=this.gridApi.getFilterModel();if(e){this.resetFilters(t);return}let n=hc.extractFilterColId(i);this.isValidColumnFilter(n)?this.updateFilters(t,i,n):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+n+"'")}resetFilters(i){Object.keys(i).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())}updateFilters(i,e,t){let n=hc.extractFilterColId(e),r=e.datum[n];if(r===void 0)return;let s=r.toString();if(e.event.metaKey||e.event.ctrlKey){let o=this.getCurrentGridValuesForCategory(t),a=M.includes(o,s),l;a?l=o.filter(c=>c!==s):(l=o,l.push(s)),i[t]=this.getUpdatedFilterModel(t,l)}else{let o=[s];i={[t]:this.getUpdatedFilterModel(t,o)}}this.gridApi.setFilterModel(i)}getUpdatedFilterModel(i,e){return this.getColumnFilterType(i)==="agMultiColumnFilter"?{filterType:"multi",filterModels:[null,{filterType:"set",values:e}]}:{filterType:"set",values:e}}getCurrentGridValuesForCategory(i){let e=[],t=this.getColumnById(i);return this.gridApi.forEachNodeAfterFilter(n=>{if(t&&!n.group){let r=this.valueService.getValue(t,n)+"";e.includes(r)||e.push(r)}}),e}static extractFilterColId(i){return i.xKey||i.calloutLabelKey}isValidColumnFilter(i){i.indexOf("-filtered-out")&&(i=i.replace("-filtered-out",""));let e=this.getColumnFilterType(i);return typeof e=="boolean"?e:M.includes(["agSetColumnFilter","agMultiColumnFilter"],e)}getColumnFilterType(i){let e=this.getColumnById(i);if(e)return e.getColDef().filter}getColumnById(i){return this.columnModel.getGridColumn(i)}};oe([k("gridApi")],hc.prototype,"gridApi",2);oe([k("columnModel")],hc.prototype,"columnModel",2);oe([k("valueService")],hc.prototype,"valueService",2);hc=oe([De("chartCrossFilterService")],hc);var KL=28,jL=6;function s_(i){return i&&i.match(/\d+\.\d+\.\d+/)}function DW({gridMajorVersion:i,chartsMajorVersion:e}){let t=parseInt(i,10),n=parseInt(e,10),r=t-KL,s=n-jL,o=r>=0;return r===s&&o}function kW(i){if(!i||!s_(i))return;let[e,t]=i.split(".")||[],n=`${e}.${t}.x`,s=parseInt(e,10)-KL+jL;if(s<0)return;let a=`${s}.${t}.x`;return{gridMajorMinor:n,chartsMajorMinor:a}}function Zv({type:i,gridVersion:e,chartsVersion:t}){let n="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!e)return n;let r=kW(e);if(!r)return n;let{gridMajorMinor:s,chartsMajorMinor:o}=r;return i==="incompatible"?`AG Grid version ${e} and AG Charts version ${t} is not supported. AG Grid version ${s} should be used with AG Chart ${o}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:i==="invalidCharts"?`AG Grid version ${s} should be used with AG Chart ${o}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:n}function IW({gridVersion:i,chartsVersion:e}){if(!s_(e))return{isValid:!1,message:Zv({type:"invalidCharts",gridVersion:i,chartsVersion:e})};if(!s_(i))return{isValid:!1,message:Zv({type:"invalidGrid",gridVersion:i,chartsVersion:e})};let[t,n]=i.split(".")||[],[r,s,o]=e.split(".")||[],a=DW({gridMajorVersion:t,chartsMajorVersion:r});return a&&n===s||o.includes("beta")?{isValid:!0}:!a||n!==s?{isValid:!1,message:Zv({type:"incompatible",gridVersion:i,chartsVersion:e})}:{isValid:!1,message:Zv({type:"invalid",gridVersion:i,chartsVersion:e})}}var qh=class extends be{showMenuList(i){let{eventSource:e,showMenu:t,chartMenuContext:n}=i,r=this.chartMenuService.doChartToolPanelsExist(n.chartController),s=this.mapWithStockItems(this.getMenuItems(n.chartController,r),n,t,e,r);if(!s.length)return;let o=this.createBean(new Vy(s));this.activeChartMenuList=o;let a=-1,l="left";this.gos.get("enableRtl")&&(a=1,l="right");let c=o.getGui();this.popupService.addPopup({modal:!0,eChild:c,closeOnEsc:!0,closedCallback:()=>{this.destroyBean(o),this.activeChartMenuList=void 0;let u=this.gos.getDocument(),d=this.gos.getActiveDomElement();(!d||d===u.body)&&e.focus({preventScroll:!0})},afterGuiAttached:u=>o.afterGuiAttached(u),positionCallback:()=>{this.popupService.positionPopupByComponent({type:"chartMenu",eventSource:e,ePopup:c,alignSide:l,nudgeX:4*a,nudgeY:4,position:"under",keepWithinBounds:!0})},ariaLabel:"Chart Menu"})}getMenuItems(i,e){let t=[...e?["chartEdit"]:[],...i.isEnterprise()?["chartAdvancedSettings"]:[],i.isChartLinked()?"chartUnlink":"chartLink","chartDownload"],n=this.gos.get("chartMenuItems");return n?Array.isArray(n)?n:n(this.gos.addGridCommonParams({defaultItems:t})):t}mapWithStockItems(i,e,t,n,r){if(!i)return[];let s=[];return i.forEach(o=>{let a;if(typeof o=="string"?a=this.getStockMenuItem(o,e,t,n,r):a=ze({},o),!a)return;let{subMenu:l}=a;Array.isArray(l)&&(a.subMenu=this.mapWithStockItems(l,e,t,n,r)),s.push(a)}),s}getStockMenuItem(i,e,t,n,r){switch(i){case"chartEdit":return r?this.createMenuItem(this.chartTranslationService.translate("chartEdit"),"chartsMenuEdit",t):null;case"chartAdvancedSettings":return this.createMenuItem(this.chartTranslationService.translate("chartAdvancedSettings"),"chartsMenuAdvancedSettings",()=>this.chartMenuService.openAdvancedSettings(e,n));case"chartUnlink":return e.chartController.isChartLinked()?this.createMenuItem(this.chartTranslationService.translate("chartUnlink"),"unlinked",()=>this.chartMenuService.toggleLinked(e)):null;case"chartLink":return e.chartController.isChartLinked()?null:this.createMenuItem(this.chartTranslationService.translate("chartLink"),"linked",()=>this.chartMenuService.toggleLinked(e));case"chartDownload":return this.createMenuItem(this.chartTranslationService.translate("chartDownload"),"save",()=>this.chartMenuService.downloadChart(e))}return null}createMenuItem(i,e,t){return{name:i,icon:M.createIconNoSpan(e,this.gos,null),action:t}}destroy(){this.destroyBean(this.activeChartMenuList),super.destroy()}};oe([k("popupService")],qh.prototype,"popupService",2);oe([k("chartMenuService")],qh.prototype,"chartMenuService",2);oe([k("chartTranslationService")],qh.prototype,"chartTranslationService",2);qh=oe([De("chartMenuListFactory")],qh);var Vy=class extends ae{constructor(i){super(`
            <div ref="eChartsMenu" role="presentation" class="ag-menu ag-chart-menu-popup"></div>
        `),this.menuItems=i}init(){this.mainMenuList=this.createManagedBean(new Lo(0)),this.mainMenuList.addMenuItems(this.menuItems),this.mainMenuList.addEventListener(ur.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.eChartsMenu.appendChild(this.mainMenuList.getGui())}onHidePopup(){var i;(i=this.hidePopupFunc)==null||i.call(this)}afterGuiAttached({hidePopup:i}){i&&(this.hidePopupFunc=i,this.addDestroyFunc(i)),this.focusService.focusInto(this.mainMenuList.getGui())}};oe([k("focusService")],Vy.prototype,"focusService",2);oe([ce("eChartsMenu")],Vy.prototype,"eChartsMenu",2);oe([J],Vy.prototype,"init",1);var J_=(()=>{let i=class YL extends ae{constructor(t){super(),this.chartMenuParamsFactory=t}init(){let t=this.chartMenuParamsFactory.addEnableParams("animation.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("animation"),suppressEnabledCheckbox:!0,useToggle:!0}),n=this.chartMenuParamsFactory.getDefaultNumberInputParams("animation.duration","durationMillis",{min:0});this.setTemplate(YL.TEMPLATE,{animationGroup:t,animationHeightInput:n})}};return i.TEMPLATE=`<div>
            <ag-group-component ref="animationGroup">
                <ag-input-number-field ref="animationHeightInput"></ag-input>
            </ag-group-component>
        </div>`,i})();oe([k("chartTranslationService")],J_.prototype,"chartTranslationService",2);oe([J],J_.prototype,"init",1);var FW=J_,e1=(()=>{let i=class qL extends ae{constructor(t){super(),this.chartMenuParamsFactory=t}init(){let t=this.chartMenuParamsFactory.addEnableParams("crosshair.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("crosshair"),suppressEnabledCheckbox:!0,useToggle:!0}),n=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.label.enabled","crosshairLabel"),r=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.snap","crosshairSnap"),s=this.chartMenuParamsFactory.getDefaultColorPickerParams("crosshair.stroke","color");this.setTemplate(qL.TEMPLATE,{crosshairGroup:t,crosshairLabelCheckbox:n,crosshairSnapCheckbox:r,crosshairStrokeColorPicker:s})}};return i.TEMPLATE=`<div>
            <ag-group-component ref="crosshairGroup">
                <ag-checkbox ref="crosshairLabelCheckbox"></ag-checkbox>
                <ag-checkbox ref="crosshairSnapCheckbox"></ag-checkbox>
                <ag-color-picker ref="crosshairStrokeColorPicker"></ag-color-picker>
            </ag-group-component>
        </div>`,i})();oe([k("chartTranslationService")],e1.prototype,"chartTranslationService",2);oe([J],e1.prototype,"init",1);var OW=e1,t1=(()=>{let i=class XL extends ae{constructor(t){super(),this.chartMenuParamsFactory=t}init(){let t=this.chartMenuParamsFactory.addEnableParams("navigator.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("navigator"),suppressEnabledCheckbox:!0,useToggle:!0}),n=this.chartMenuParamsFactory.getDefaultSliderParams("navigator.height","height",60);n.minValue=10;let r=this.chartMenuParamsFactory.getDefaultCheckboxParams("navigator.miniChart.enabled","miniChart");this.setTemplate(XL.TEMPLATE,{navigatorGroup:t,navigatorHeightSlider:n,navigatorMiniChartCheckbox:r})}};return i.TEMPLATE=`<div>
            <ag-group-component ref="navigatorGroup">
                <ag-slider ref="navigatorHeightSlider"></ag-slider>
                <ag-checkbox ref="navigatorMiniChartCheckbox"></ag-checkbox>
            </ag-group-component>
        </div>`,i})();oe([k("chartTranslationService")],t1.prototype,"chartTranslationService",2);oe([J],t1.prototype,"init",1);var LW=t1,By=(()=>{let i=class ZL extends ae{constructor(t){super(),this.chartMenuParamsFactory=t}init(){let t=this.chartMenuParamsFactory.addEnableParams("zoom.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("zoom"),suppressEnabledCheckbox:!0,useToggle:!0}),n=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableScrolling","scrollingZoom"),r=this.chartMenuParamsFactory.getDefaultSliderParams("zoom.scrollingStep","scrollingStep",1);r.step=.01,r.minValue=r.step;let s=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableSelecting","selectingZoom");n.onValueChange=(o=>a=>{o&&(o(a),this.zoomScrollingStepInput.setDisabled(!a))})(n.onValueChange),this.setTemplate(ZL.TEMPLATE,{zoomGroup:t,zoomScrollingCheckbox:n,zoomScrollingStepInput:r,zoomSelectingCheckbox:s}),this.zoomScrollingStepInput.setDisabled(!n.value)}};return i.TEMPLATE=`<div>
            <ag-group-component ref="zoomGroup">
                <ag-checkbox ref="zoomSelectingCheckbox"></ag-checkbox>
                <ag-checkbox ref="zoomScrollingCheckbox"></ag-checkbox>
                <ag-slider ref="zoomScrollingStepInput"></ag-slider>
            </ag-group-component>
        </div>`,i})();oe([k("chartTranslationService")],By.prototype,"chartTranslationService",2);oe([ce("zoomScrollingStepInput")],By.prototype,"zoomScrollingStepInput",2);oe([J],By.prototype,"init",1);var RW=By,NW=["navigator","zoom","animation","crosshair"],QL=(()=>{let i=class JL extends ae{constructor(t){super(JL.TEMPLATE),this.chartMenuContext=t}postConstruct(){this.chartPanelFeature=this.createManagedBean(new K_(this.chartMenuContext.chartController,this.getGui(),"ag-chart-advanced-settings-section",(t,n)=>this.createPanels(t,n))),this.chartPanelFeature.refreshPanels()}createPanels(t,n){NW.forEach(r=>{if(!this.isGroupPanelShownForSeries(r,n))return;let s=this.createPanel(r);this.chartPanelFeature.addComponent(s)})}isGroupPanelShownForSeries(t,n){return t==="animation"||ku(n)}createPanel(t){let{chartMenuParamsFactory:n,chartAxisMenuParamsFactory:r}=this.chartMenuContext;switch(t){case"navigator":return new LW(n);case"zoom":return new RW(n);case"animation":return new FW(n);case"crosshair":return new OW(r)}}};return i.TEMPLATE='<div class="ag-chart-advanced-settings-wrapper"></div>',i})();oe([J],QL.prototype,"postConstruct",1);var VW=QL,hg=class extends be{showMenu(i,e){this.hideMenu();let t=this.createBean(new BW(i));this.activeDialog=this.createBean(new wr({title:this.chartTranslationService.translate("advancedSettings"),component:t,width:300,height:400,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{var n;(n=this.focusService.findFocusableElements(t.getGui())[0])==null||n.focus()},closedCallback:()=>{this.activeMenu=this.destroyBean(this.activeMenu),this.activeDialog=void 0,e?.focus({preventScroll:!0})}})),this.activeMenu=t}hideMenu(){this.activeDialog&&this.destroyBean(this.activeDialog)}destroy(){this.activeMenu=this.destroyBean(this.activeMenu),this.activeDialog=this.destroyBean(this.activeDialog),super.destroy()}};oe([k("focusService")],hg.prototype,"focusService",2);oe([k("chartTranslationService")],hg.prototype,"chartTranslationService",2);hg=oe([De("advancedSettingsMenuFactory")],hg);var i1=(()=>{let i=class eR extends Io{constructor(t){super(eR.TEMPLATE),this.chartMenuContext=t}postConstruct(){this.advancedSettingsPanel=this.createManagedBean(new VW(this.chartMenuContext)),this.getGui().appendChild(this.advancedSettingsPanel.getGui()),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),focusTrapActive:!0})}onTabKeyDown(t){if(t.defaultPrevented)return;t.preventDefault();let n=t.shiftKey,r=this.advancedSettingsPanel.getGui(),s=this.focusService.findNextFocusableElement(r,!1,n);if(s)s.focus();else{let o=this.focusService.findFocusableElements(r);o.length&&o[n?o.length-1:0].focus()}}};return i.TEMPLATE='<div class="ag-chart-advanced-settings"></div>',i})();oe([k("focusService")],i1.prototype,"focusService",2);oe([J],i1.prototype,"postConstruct",1);var BW=i1,n1={version:ug,validate:()=>IW({gridVersion:ug,chartsVersion:Nu.CHARTS_VERSION}),moduleName:qe.GridChartsModule,beans:[Nu,r_,hc,qh,cg,hg],agStackComponents:[{componentName:"AgColorPicker",componentClass:pL},{componentName:"AgAngleSelect",componentClass:rL},{componentName:"AgPillSelect",componentClass:KO}],dependantModules:[A_,Tn]},tR=0,iR={time:dv,AgChart:Ox},GW=Object.defineProperty,UW=Object.getOwnPropertyDescriptor,fr=(i,e,t,n)=>{for(var r=n>1?void 0:n?UW(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&GW(e,t,r),r},Gx="paste",Ux="dragCopy",SF="clipboard",xF=i=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${i}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,Vn=class extends be{constructor(){super(...arguments),this.lastPasteOperationTime=0,this.navigatorApiFailed=!1}init(){this.logger=this.loggerFactory.create("ClipboardService"),this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(i=>{this.gridCtrl=i.gridCtrl})}pasteFromClipboard(){this.logger.log("pasteFromClipboard"),!this.gos.get("suppressClipboardApi")&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch(e=>{M.doOnce(()=>{console.warn(e),console.warn(xF("readText"))},"clipboardApiError"),this.navigatorApiFailed=!0,this.pasteFromClipboardLegacy()}):this.pasteFromClipboardLegacy()}pasteFromClipboardLegacy(){let i=!1,e=t=>{let n=new Date().getTime();n-this.lastPasteOperationTime<50&&(i=!0,t.preventDefault()),this.lastPasteOperationTime=n};this.executeOnTempElement(t=>{t.addEventListener("paste",e),t.focus({preventScroll:!0})},t=>{let n=t.value;i?this.refocusLastFocusedCell():this.processClipboardData(n),t.removeEventListener("paste",e)})}refocusLastFocusedCell(){let i=this.focusService.getFocusedCell();i&&this.focusService.setFocusedCell({rowIndex:i.rowIndex,column:i.column,rowPinned:i.rowPinned,forceBrowserFocus:!0})}getClipboardDelimiter(){let i=this.gos.get("clipboardDelimiter");return M.exists(i)?i:"	"}processClipboardData(i){if(i==null)return;let e=Vn.stringToArray(i,this.getClipboardDelimiter()),t=this.gos.getCallback("processDataFromClipboard");if(t&&(e=t({data:e})),e==null)return;this.gos.get("suppressLastEmptyLineOnPaste")&&this.removeLastLineIfBlank(e);let n=(r,s,o,a)=>{var l;((l=this.rangeService)==null?void 0:l.isMoreThanOneCell())&&!this.hasOnlyOneValueToPaste(e)?this.pasteIntoActiveRange(this.rangeService,e,r,s,a):this.pasteStartingFromFocusedCell(e,r,s,o,a)};this.doPasteOperation(n)}static stringToArray(i,e=","){let t=[],n=s=>s==="\r"||s===`
`,r=!1;if(i==="")return[[""]];for(let s=0,o=0,a=0;a<i.length;a++){let l=i[a-1],c=i[a],u=i[a+1],d=()=>{t[s]||(t[s]=[]),t[s][o]||(t[s][o]="")};if(d(),c==='"'&&(r?u==='"'?(t[s][o]+='"',a++):r=!1:(l===void 0||l===e||n(l))&&(r=!0)),!r&&c!=='"'){if(c===e){o++,d();continue}else if(n(c)){o=0,s++,d(),c==="\r"&&u===`
`&&a++;continue}}t[s][o]+=c}return t}doPasteOperation(i){let e="clipboard";this.eventService.dispatchEvent({type:X.EVENT_PASTE_START,source:e});let t;if(this.clientSideRowModel){let l=this.gos.get("aggregateOnlyChangedColumns");t=new Gf(l,this.clientSideRowModel.getRootNode())}let n={},r=[],s=this.focusService.getFocusedCell();i(n,r,s,t);let o=[...r];t&&(this.clientSideRowModel.doAggregate(t),t.forEachChangedNodeDepthFirst(l=>{o.push(l)})),this.rowRenderer.refreshCells({rowNodes:o}),this.dispatchFlashCells(n),this.fireRowChanged(r),this.refocusLastFocusedCell();let a={type:X.EVENT_PASTE_END,source:e};this.eventService.dispatchEvent(a)}pasteIntoActiveRange(i,e,t,n,r){let s=this.getRangeSize(i)%e.length!=0,o=0,a=0,l=(c,u,d,h)=>{if(h-o>=e.length){if(s)return;o+=a,a=0}let m=e[h-o];n.push(u);let g=this.gos.getCallback("processCellFromClipboard");d.forEach((f,y)=>{if(!f.isCellEditable(u)||f.isSuppressPaste(u))return;y>=m.length&&(y=y%m.length);let b=this.processCell(u,f,m[y],Ux,g,!0);u.setDataValue(f,b,Gx),r&&r.addParentNode(u.parent,[f]);let{rowIndex:v,rowPinned:S}=c,w=this.cellPositionUtils.createIdFromValues({rowIndex:v,column:f,rowPinned:S});t[w]=!0}),a++};this.iterateActiveRanges(!1,l)}getDisplayedColumnsStartingAt(i){let e=i,t=[];for(;e!=null;)t.push(e),e=this.columnModel.getDisplayedColAfter(e);return t}pasteStartingFromFocusedCell(i,e,t,n,r){if(!n)return;let s={rowIndex:n.rowIndex,rowPinned:n.rowPinned},o=this.getDisplayedColumnsStartingAt(n.column);this.isPasteSingleValueIntoRange(i)?this.pasteSingleValueIntoRange(i,t,e,r):this.pasteMultipleValues(i,s,t,o,e,SF,r)}isPasteSingleValueIntoRange(i){return this.hasOnlyOneValueToPaste(i)&&this.rangeService!=null&&!this.rangeService.isEmpty()}pasteSingleValueIntoRange(i,e,t,n){let r=i[0][0],s=(o,a,l)=>{e.push(a),l.forEach(c=>this.updateCellValue(a,c,r,t,SF,n))};this.iterateActiveRanges(!1,s)}hasOnlyOneValueToPaste(i){return i.length===1&&i[0].length===1}copyRangeDown(){if(!this.rangeService||this.rangeService.isEmpty())return;let i=[],e=(t,n,r,s)=>{let o=this.gos.getCallback("processCellForClipboard"),a=this.gos.getCallback("processCellFromClipboard"),l=(c,u,d)=>{i.length?(n.push(u),d.forEach((h,p)=>{if(!h.isCellEditable(u)||h.isSuppressPaste(u))return;let m=this.processCell(u,h,i[p],Ux,a,!0);u.setDataValue(h,m,Gx),s&&s.addParentNode(u.parent,[h]);let{rowIndex:g,rowPinned:f}=c,y=this.cellPositionUtils.createIdFromValues({rowIndex:g,column:h,rowPinned:f});t[y]=!0})):d.forEach(h=>{let p=this.processCell(u,h,this.valueService.getValue(h,u),Ux,o,!1,!0);i.push(p)})};this.iterateActiveRanges(!0,l)};this.doPasteOperation(e)}removeLastLineIfBlank(i){let e=M.last(i);if(e&&e.length===1&&e[0]===""){if(i.length===1)return;M.removeFromArray(i,e)}}fireRowChanged(i){this.gos.get("editType")==="fullRow"&&i.forEach(e=>{let t={type:X.EVENT_ROW_VALUE_CHANGED,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned};this.eventService.dispatchEvent(t)})}pasteMultipleValues(i,e,t,n,r,s,o){let a=e,l=this.clientSideRowModel!=null&&!this.gos.get("enableGroupEdit")&&!this.gos.get("treeData"),c=()=>{for(;;){if(!a)return null;let u=this.rowPositionUtils.getRowNode(a);if(a=this.cellNavigationService.getRowBelow({rowPinned:a.rowPinned,rowIndex:a.rowIndex}),u==null)return null;if(!(u.detail||u.footer||l&&u.group))return u}};i.forEach(u=>{let d=c();d&&(u.forEach((h,p)=>this.updateCellValue(d,n[p],h,r,s,o)),t.push(d))})}updateCellValue(i,e,t,n,r,s){if(!i||!e||!e.isCellEditable(i)||e.isSuppressPaste(i)||i.group&&e.isValueActive())return;let o=this.processCell(i,e,t,r,this.gos.getCallback("processCellFromClipboard"),!0);i.setDataValue(e,o,Gx);let{rowIndex:a,rowPinned:l}=i,c=this.cellPositionUtils.createIdFromValues({rowIndex:a,column:e,rowPinned:l});n[c]=!0,s&&s.addParentNode(i.parent,[e])}copyToClipboard(i={}){this.copyOrCutToClipboard(i)}cutToClipboard(i={},e="api"){if(this.gos.get("suppressCutToClipboard"))return;let t={type:X.EVENT_CUT_START,source:e};this.eventService.dispatchEvent(t),this.copyOrCutToClipboard(i,!0);let n={type:X.EVENT_CUT_END,source:e};this.eventService.dispatchEvent(n)}copyOrCutToClipboard(i,e){let{includeHeaders:t,includeGroupHeaders:n}=i;this.logger.log(`copyToClipboard: includeHeaders = ${t}`),t==null&&(t=this.gos.get("copyHeadersToClipboard")),n==null&&(n=this.gos.get("copyGroupHeadersToClipboard"));let r={includeHeaders:t,includeGroupHeaders:n},s=!this.gos.get("suppressCopyRowsToClipboard"),o=null;this.rangeService&&!this.rangeService.isEmpty()&&!this.shouldSkipSingleCellRange(this.rangeService)?(this.copySelectedRangeToClipboard(r),o=0):s&&!this.selectionService.isEmpty()?(this.copySelectedRowsToClipboard(r),o=1):this.focusService.isAnyCellFocused()&&(this.copyFocusedCellToClipboard(r),o=2),e&&o!==null&&this.clearCellsAfterCopy(o)}clearCellsAfterCopy(i){if(this.eventService.dispatchEvent({type:X.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),i===0)this.rangeService.clearCellRangeCellValues({cellEventSource:"clipboardService"});else if(i===1)this.clearSelectedRows();else{let e=this.focusService.getFocusedCell();if(e==null)return;let t=this.rowPositionUtils.getRowNode(e);t&&this.clearCellValue(t,e.column)}this.eventService.dispatchEvent({type:X.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})}clearSelectedRows(){let i=this.selectionService.getSelectedNodes(),e=this.columnModel.getAllDisplayedColumns();for(let t of i)for(let n of e)this.clearCellValue(t,n)}clearCellValue(i,e){var t;if(!e.isCellEditable(i))return;let n=(t=this.valueService.parseValue(e,i,"",i.getValueFromValueService(e)))!=null?t:null;i.setDataValue(e,n,"clipboardService")}shouldSkipSingleCellRange(i){return this.gos.get("suppressCopySingleCellRanges")&&!i.isMoreThanOneCell()}iterateActiveRanges(i,e,t){if(!this.rangeService||this.rangeService.isEmpty())return;let n=this.rangeService.getCellRanges();i?this.iterateActiveRange(n[0],e,t,!0):n.forEach((r,s)=>this.iterateActiveRange(r,e,t,s===n.length-1))}iterateActiveRange(i,e,t,n){if(!this.rangeService)return;let r=this.rangeService.getRangeStartRow(i),s=this.rangeService.getRangeEndRow(i);t&&i.columns&&t(i.columns);let o=0,a=!1;for(;!a&&r!=null;){let l=this.rowPositionUtils.getRowNode(r);a=this.rowPositionUtils.sameRow(r,s),e(r,l,i.columns,o++,a&&n),r=this.cellNavigationService.getRowBelow(r)}}copySelectedRangeToClipboard(i={}){if(!this.rangeService||this.rangeService.isEmpty())return;let e=this.rangeService.areAllRangesAbleToMerge(),{data:t,cellsToFlash:n}=e?this.buildDataFromMergedRanges(this.rangeService,i):this.buildDataFromRanges(this.rangeService,i);this.copyDataToClipboard(t),this.dispatchFlashCells(n)}buildDataFromMergedRanges(i,e){let t=new Set,n=i.getCellRanges(),r=new Map,s=[],o={};n.forEach(u=>{u.columns.forEach(p=>t.add(p));let{rowPositions:d,cellsToFlash:h}=this.getRangeRowPositionsAndCellsToFlash(i,u);d.forEach(p=>{let m=`${p.rowIndex}-${p.rowPinned||"null"}`;r.get(m)||(r.set(m,!0),s.push(p))}),Object.assign(o,h)});let a=this.columnModel.getAllDisplayedColumns(),l=Array.from(t);return l.sort((u,d)=>{let h=a.indexOf(u),p=a.indexOf(d);return h-p}),{data:this.buildExportParams({columns:l,rowPositions:s,includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders}),cellsToFlash:o}}buildDataFromRanges(i,e){let t=i.getCellRanges(),n=[],r={};return t.forEach(s=>{let{rowPositions:o,cellsToFlash:a}=this.getRangeRowPositionsAndCellsToFlash(i,s);Object.assign(r,a),n.push(this.buildExportParams({columns:s.columns,rowPositions:o,includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders}))}),{data:n.join(`
`),cellsToFlash:r}}getRangeRowPositionsAndCellsToFlash(i,e){let t=[],n={},r=i.getRangeStartRow(e),s=i.getRangeEndRow(e),o=r;for(;o&&(t.push(o),e.columns.forEach(a=>{let{rowIndex:l,rowPinned:c}=o,u=this.cellPositionUtils.createIdFromValues({rowIndex:l,column:a,rowPinned:c});n[u]=!0}),!this.rowPositionUtils.sameRow(o,s));)o=this.cellNavigationService.getRowBelow(o);return{rowPositions:t,cellsToFlash:n}}getCellsToFlashFromRowNodes(i){let e=this.columnModel.getAllDisplayedColumns(),t={};for(let n=0;n<i.length;n++){let{rowIndex:r,rowPinned:s}=i[n];if(r!=null)for(let o=0;o<e.length;o++){let a=e[o],l=this.cellPositionUtils.createIdFromValues({rowIndex:r,column:a,rowPinned:s});t[l]=!0}}return t}copyFocusedCellToClipboard(i={}){let e=this.focusService.getFocusedCell();if(e==null)return;let t=this.cellPositionUtils.createId(e),n={rowPinned:e.rowPinned,rowIndex:e.rowIndex},r=e.column,s=this.buildExportParams({columns:[r],rowPositions:[n],includeHeaders:i.includeHeaders,includeGroupHeaders:i.includeGroupHeaders});this.copyDataToClipboard(s),this.dispatchFlashCells({[t]:!0})}copySelectedRowsToClipboard(i={}){let{columnKeys:e,includeHeaders:t,includeGroupHeaders:n}=i,r=this.buildExportParams({columns:e,includeHeaders:t,includeGroupHeaders:n});this.copyDataToClipboard(r);let s=this.selectionService.getSelectedNodes()||[];this.dispatchFlashCells(this.getCellsToFlashFromRowNodes(s))}buildExportParams(i){let{columns:e,rowPositions:t,includeHeaders:n=!1,includeGroupHeaders:r=!1}=i,s={columnKeys:e,rowPositions:t,skipColumnHeaders:!n,skipColumnGroupHeaders:!r,suppressQuotes:!0,columnSeparator:this.getClipboardDelimiter(),onlySelected:!t,processCellCallback:this.gos.getCallback("processCellForClipboard"),processRowGroupCallback:o=>this.processRowGroupCallback(o),processHeaderCallback:this.gos.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:this.gos.getCallback("processGroupHeaderForClipboard")};return this.csvCreator.getDataAsCsv(s,!0)}processRowGroupCallback(i){let{node:e,column:t}=i,n=this.gos.get("treeData"),r=this.gos.get("suppressGroupMaintainValueType"),o=(()=>{var l,c;if(n||r||!t)return e.key;let u=(l=e.groupData)==null?void 0:l[t.getId()];return!u||!e.rowGroupColumn||e.rowGroupColumn.getColDef().useValueFormatterForExport===!1?u:(c=this.valueService.formatValue(e.rowGroupColumn,e,u))!=null?c:u})();if(i.node.footer){let l="";o&&o.length&&(l=` ${o}`),o=`Total${l}`}let a=this.gos.getCallback("processCellForClipboard");if(a){let l=e.rowGroupColumn;return!l&&e.footer&&e.level===-1&&(l=this.columnModel.getRowGroupColumns()[0]),a({value:o,node:e,column:l,type:"clipboard",formatValue:c=>{var u;return(u=this.valueService.formatValue(l,e,c))!=null?u:c},parseValue:c=>this.valueService.parseValue(l,e,c,this.valueService.getValue(l,e))})}return o}dispatchFlashCells(i){window.setTimeout(()=>{let e={type:X.EVENT_FLASH_CELLS,cells:i};this.eventService.dispatchEvent(e)},0)}processCell(i,e,t,n,r,s,o){var a;return r?r({column:e,node:i,value:t,type:n,formatValue:c=>{var u;return(u=this.valueService.formatValue(e,i??null,c))!=null?u:c},parseValue:c=>this.valueService.parseValue(e,i??null,c,this.valueService.getValue(e,i))}):s&&e.getColDef().useValueParserForImport!==!1?this.valueService.parseValue(e,i??null,t,this.valueService.getValue(e,i)):o&&e.getColDef().useValueFormatterForExport!==!1&&(a=this.valueService.formatValue(e,i??null,t))!=null?a:t}copyDataToClipboard(i){let e=this.gos.getCallback("sendToClipboard");if(e){e({data:i});return}if(!this.gos.get("suppressClipboardApi")&&navigator.clipboard){navigator.clipboard.writeText(i).catch(n=>{M.doOnce(()=>{console.warn(n),console.warn(xF("writeText"))},"clipboardApiError"),this.copyDataToClipboardLegacy(i)});return}this.copyDataToClipboardLegacy(i)}copyDataToClipboardLegacy(i){this.executeOnTempElement(e=>{let t=this.gos.getDocument(),n=this.gos.getActiveDomElement();e.value=i||" ",e.select(),e.focus({preventScroll:!0}),t.execCommand("copy")||console.warn("AG Grid: Browser did not allow document.execCommand('copy'). Ensure api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons."),n!=null&&n.focus!=null&&n.focus({preventScroll:!0})})}executeOnTempElement(i,e){let t=this.gos.getDocument(),n=t.createElement("textarea");n.style.width="1px",n.style.height="1px",n.style.top=t.documentElement.scrollTop+"px",n.style.left=t.documentElement.scrollLeft+"px",n.style.position="absolute",n.style.opacity="0";let r=this.gridCtrl.getGui();r.appendChild(n);try{i(n)}catch{console.warn("AG Grid: Browser does not support document.execCommand('copy') for clipboard operations")}e?window.setTimeout(()=>{e(n),r.removeChild(n)},100):r.removeChild(n)}getRangeSize(i){let e=i.getCellRanges(),t=0,n=0;return e.length>0&&(t=i.getRangeStartRow(e[0]).rowIndex,n=i.getRangeEndRow(e[0]).rowIndex),t-n+1}};fr([k("csvCreator")],Vn.prototype,"csvCreator",2);fr([k("loggerFactory")],Vn.prototype,"loggerFactory",2);fr([k("selectionService")],Vn.prototype,"selectionService",2);fr([k("rowModel")],Vn.prototype,"rowModel",2);fr([k("ctrlsService")],Vn.prototype,"ctrlsService",2);fr([k("valueService")],Vn.prototype,"valueService",2);fr([k("focusService")],Vn.prototype,"focusService",2);fr([k("rowRenderer")],Vn.prototype,"rowRenderer",2);fr([k("columnModel")],Vn.prototype,"columnModel",2);fr([k("cellNavigationService")],Vn.prototype,"cellNavigationService",2);fr([k("cellPositionUtils")],Vn.prototype,"cellPositionUtils",2);fr([k("rowPositionUtils")],Vn.prototype,"rowPositionUtils",2);fr([ji("rangeService")],Vn.prototype,"rangeService",2);fr([J],Vn.prototype,"init",1);Vn=fr([De("clipboardService")],Vn);var HW="31.3.4",nR={version:HW,moduleName:qe.ClipboardModule,beans:[Vn],dependantModules:[Tn,bd]},rR=Object.defineProperty,zW=Object.defineProperties,WW=Object.getOwnPropertyDescriptor,$W=Object.getOwnPropertyDescriptors,_F=Object.getOwnPropertySymbols,KW=Object.prototype.hasOwnProperty,jW=Object.prototype.propertyIsEnumerable,wF=(i,e,t)=>e in i?rR(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,YW=(i,e)=>{for(var t in e||(e={}))KW.call(e,t)&&wF(i,t,e[t]);if(_F)for(var t of _F(e))jW.call(e,t)&&wF(i,t,e[t]);return i},qW=(i,e)=>zW(i,$W(e)),Mt=(i,e,t,n)=>{for(var r=n>1?void 0:n?WW(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&rR(e,t,r),r},Xh=class extends be{execute(i){let e=M.missingOrEmpty(this.columnModel.getValueColumns()),t=!this.gos.getCallback("getGroupRowAgg"),n=i.changedPath&&i.changedPath.isActive();if(e&&t&&n)return;let r=this.createAggDetails(i);this.recursivelyCreateAggData(r)}createAggDetails(i){let e=this.columnModel.isPivotActive(),t=this.columnModel.getValueColumns(),n=e?this.columnModel.getPivotColumns():[];return{alwaysAggregateAtRootLevel:this.gos.get("alwaysAggregateAtRootLevel"),groupIncludeTotalFooter:!!this.gos.getGrandTotalRow(),changedPath:i.changedPath,valueColumns:t,pivotColumns:n,filteredOnly:!this.isSuppressAggFilteredOnly(),userAggFunc:this.gos.getCallback("getGroupRowAgg")}}isSuppressAggFilteredOnly(){return this.gos.getGroupAggFiltering()!==void 0||this.gos.get("suppressAggFilteredOnly")}recursivelyCreateAggData(i){let e=t=>{if(!t.hasChildren()){t.aggData&&t.setAggData(null);return}if(t.level===-1&&!i.groupIncludeTotalFooter){let s=!this.columnModel.isPivotMode();if(!i.alwaysAggregateAtRootLevel&&s){t.setAggData(null);return}}this.aggregateRowNode(t,i)};i.changedPath.forEachChangedNodeDepthFirst(e,!0)}aggregateRowNode(i,e){let t=e.valueColumns.length===0,n=e.pivotColumns.length===0,r;e.userAggFunc?r=e.userAggFunc({nodes:i.childrenAfterFilter}):t?r=null:n?r=this.aggregateRowNodeUsingValuesOnly(i,e):r=this.aggregateRowNodeUsingValuesAndPivot(i),i.setAggData(r),i.sibling&&i.sibling.setAggData(r)}aggregateRowNodeUsingValuesAndPivot(i){var e,t;let n={},r=(e=this.columnModel.getSecondaryColumns())!=null?e:[],s=!0;for(let o=0;o<r.length;o++){let a=r[o],l=a.getColDef();if(l.pivotTotalColumnIds!=null){s=!1;continue}let c=(t=l.pivotKeys)!=null?t:[],u;i.leafGroup?u=this.getValuesFromMappedSet(i.childrenMapped,c,l.pivotValueColumn):u=this.getValuesPivotNonLeaf(i,l.colId),n[l.colId]=this.aggregateValues(u,l.pivotValueColumn.getAggFunc(),l.pivotValueColumn,i,a)}if(!s)for(let o=0;o<r.length;o++){let a=r[o],l=a.getColDef();if(l.pivotTotalColumnIds==null||!l.pivotTotalColumnIds.length)continue;let c=l.pivotTotalColumnIds.map(u=>n[u]);n[l.colId]=this.aggregateValues(c,l.pivotValueColumn.getAggFunc(),l.pivotValueColumn,i,a)}return n}aggregateRowNodeUsingValuesOnly(i,e){let t={},n=e.changedPath.isActive()?e.changedPath.getValueColumnsForNode(i,e.valueColumns):e.valueColumns,r=e.changedPath.isActive()?e.changedPath.getNotValueColumnsForNode(i,e.valueColumns):null,s=this.getValuesNormal(i,n,e.filteredOnly),o=i.aggData;return n.forEach((a,l)=>{t[a.getId()]=this.aggregateValues(s[l],a.getAggFunc(),a,i)}),r&&o&&r.forEach(a=>{t[a.getId()]=o[a.getId()]}),t}getValuesPivotNonLeaf(i,e){return i.childrenAfterFilter.map(t=>t.aggData[e])}getValuesFromMappedSet(i,e,t){let n=i;for(let r=0;r<e.length;r++){let s=e[r];n=n?n[s]:null}return n?n.map(r=>this.valueService.getValue(t,r)):[]}getValuesNormal(i,e,t){let n=[];e.forEach(()=>n.push([]));let r=e.length,s=t?i.childrenAfterFilter:i.childrenAfterGroup,o=s.length;for(let a=0;a<o;a++){let l=s[a];for(let c=0;c<r;c++){let u=e[c],d=this.valueService.getValue(u,l);n[c].push(d)}}return n}aggregateValues(i,e,t,n,r){let s=typeof e=="string"?this.aggFuncService.getAggFunc(e):e;if(typeof s!="function")return console.error(`AG Grid: unrecognised aggregation function ${e}`),null;let o=s,a=this.gos.addGridCommonParams({values:i,column:t,colDef:t?t.getColDef():void 0,pivotResultColumn:r,rowNode:n,data:n?n.data:void 0});return o(a)}};Mt([k("columnModel")],Xh.prototype,"columnModel",2);Mt([k("valueService")],Xh.prototype,"valueService",2);Mt([k("aggFuncService")],Xh.prototype,"aggFuncService",2);Xh=Mt([De("aggregationStage")],Xh);var Hx=class{constructor(){this.allSets={},this.allParents=[]}removeFromChildrenAfterGroup(i,e){let t=this.getSet(i);t.removeFromChildrenAfterGroup[e.id]=!0}isRemoveFromAllLeafChildren(i,e){return!!this.getSet(i).removeFromAllLeafChildren[e.id]}preventRemoveFromAllLeafChildren(i,e){let t=this.getSet(i);delete t.removeFromAllLeafChildren[e.id]}removeFromAllLeafChildren(i,e){let t=this.getSet(i);t.removeFromAllLeafChildren[e.id]=!0}getSet(i){return this.allSets[i.id]||(this.allSets[i.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(i)),this.allSets[i.id]}getAllParents(){return this.allParents}flush(){this.allParents.forEach(i=>{let e=this.allSets[i.id];i.childrenAfterGroup=i.childrenAfterGroup.filter(t=>!e.removeFromChildrenAfterGroup[t.id]),i.allLeafChildren=i.allLeafChildren.filter(t=>!e.removeFromAllLeafChildren[t.id]),i.updateHasChildren(),i.sibling&&(i.sibling.childrenAfterGroup=i.childrenAfterGroup,i.sibling.allLeafChildren=i.allLeafChildren)}),this.allSets={},this.allParents.length=0}},pc=class extends be{execute(i){let e=this.createGroupingDetails(i);if(e.transactions)this.handleTransaction(e);else{let t=i.afterColumnsChanged===!0;this.shotgunResetEverything(e,t)}e.usingTreeData||(this.positionLeafsAndGroups(i.changedPath),this.orderGroups(e)),this.selectableService.updateSelectableAfterGrouping()}positionLeafsAndGroups(i){i.forEachChangedNodeDepthFirst(e=>{if(e.childrenAfterGroup){let t=[],n=[],r;e.childrenAfterGroup.forEach(s=>{var o;(o=s.childrenAfterGroup)!=null&&o.length?s.key===""&&!r?r=s:n.push(s):t.push(s)}),r&&n.push(r),e.childrenAfterGroup=[...t,...n]}},!1)}createGroupingDetails(i){var e;let{rowNode:t,changedPath:n,rowNodeTransactions:r,rowNodeOrder:s}=i,o=this.gos.get("treeData"),a=o?null:this.columnModel.getRowGroupColumns();return{includeParents:!this.gos.get("suppressParentsInRowNodes"),expandByDefault:this.gos.get("groupDefaultExpanded"),groupedCols:a,rootNode:t,pivotMode:this.columnModel.isPivotMode(),groupedColCount:o||!a?0:a.length,rowNodeOrder:s,transactions:r,changedPath:n,groupAllowUnbalanced:this.gos.get("groupAllowUnbalanced"),isGroupOpenByDefault:this.gos.getCallback("isGroupOpenByDefault"),initialGroupOrderComparator:this.gos.getCallback("initialGroupOrderComparator"),usingTreeData:o,suppressGroupMaintainValueType:this.gos.get("suppressGroupMaintainValueType"),getDataPath:o?this.gos.get("getDataPath"):void 0,keyCreators:(e=a?.map(c=>c.getColDef().keyCreator))!=null?e:[]}}handleTransaction(i){i.transactions.forEach(e=>{let t=i.usingTreeData?void 0:new Hx;if(M.existsAndNotEmpty(e.remove)&&this.removeNodes(e.remove,i,t),M.existsAndNotEmpty(e.update)&&this.moveNodesInWrongPath(e.update,i,t),M.existsAndNotEmpty(e.add)&&this.insertNodes(e.add,i,!1),t){let n=t.getAllParents().slice();t.flush(),this.removeEmptyGroups(n,i)}}),i.rowNodeOrder&&this.sortChildren(i)}sortChildren(i){i.changedPath.forEachChangedNodeDepthFirst(e=>{if(!e.childrenAfterGroup)return;M.sortRowNodesByOrder(e.childrenAfterGroup,i.rowNodeOrder)&&i.changedPath.addParentNode(e)},!1,!0)}orderGroups(i){let e=i.initialGroupOrderComparator;M.exists(e)&&t(i.rootNode);function t(n){M.exists(n.childrenAfterGroup)&&!n.leafGroup&&(n.childrenAfterGroup.sort((s,o)=>e({nodeA:s,nodeB:o})),n.childrenAfterGroup.forEach(s=>t(s)))}}getExistingPathForNode(i,e){let t=[],n=e.usingTreeData?i:i.parent;for(;n&&n!==e.rootNode;)t.push({key:n.key,rowGroupColumn:n.rowGroupColumn,field:n.field}),n=n.parent;return t.reverse(),t}moveNodesInWrongPath(i,e,t){i.forEach(n=>{e.changedPath.isActive()&&e.changedPath.addParentNode(n.parent);let r=l=>l.key,s=this.getExistingPathForNode(n,e).map(r),o=this.getGroupInfo(n,e).map(r);M.areEqual(s,o)||this.moveNode(n,e,t)})}moveNode(i,e,t){if(this.removeNodesInStages([i],e,t),this.insertOneNode(i,e,!0,t),i.setData(i.data),e.changedPath.isActive()){let n=i.parent;e.changedPath.addParentNode(n)}}removeNodes(i,e,t){this.removeNodesInStages(i,e,t),e.changedPath.isActive()&&i.forEach(n=>e.changedPath.addParentNode(n.parent))}removeNodesInStages(i,e,t){if(this.removeNodesFromParents(i,e,t),e.usingTreeData){this.postRemoveCreateFillerNodes(i,e);let n=i.map(r=>r.parent);this.removeEmptyGroups(n,e)}}forEachParentGroup(i,e,t){let n=e;for(;n&&n!==i.rootNode;)t(n),n=n.parent}removeNodesFromParents(i,e,t){let n=t==null,r=t||new Hx;i.forEach(s=>{this.removeFromParent(s,r),this.forEachParentGroup(e,s.parent,o=>{r.removeFromAllLeafChildren(o,s)})}),n&&r.flush()}postRemoveCreateFillerNodes(i,e){i.forEach(t=>{if(t.hasChildren()){let r=this.getExistingPathForNode(t,e),s=this.findParentForNode(t,r,e);s.expanded=t.expanded,s.allLeafChildren=t.allLeafChildren,s.childrenAfterGroup=t.childrenAfterGroup,s.childrenMapped=t.childrenMapped,s.updateHasChildren(),s.childrenAfterGroup.forEach(o=>o.parent=s)}})}removeEmptyGroups(i,e){let t=!0,n=r=>{let s=this.getChildrenMappedKey(r.key,r.rowGroupColumn),o=r.parent;return(o&&o.childrenMapped?!o.childrenMapped[s]:!0)?!1:!!r.isEmptyRowGroupNode()};for(;t;){t=!1;let r=new Hx;i.forEach(s=>{this.forEachParentGroup(e,s,o=>{n(o)&&(t=!0,this.removeFromParent(o,r),o.setSelectedParams({newValue:!1,source:"rowGroupChanged"}))})}),r.flush()}}removeFromParent(i,e){i.parent&&(e?e.removeFromChildrenAfterGroup(i.parent,i):(M.removeFromArray(i.parent.childrenAfterGroup,i),i.parent.updateHasChildren()));let t=this.getChildrenMappedKey(i.key,i.rowGroupColumn);i.parent&&i.parent.childrenMapped&&(i.parent.childrenMapped[t]=void 0),i.setRowTop(null),i.setRowIndex(null)}addToParent(i,e){let t=this.getChildrenMappedKey(i.key,i.rowGroupColumn);e&&(e.childrenMapped!=null&&(e.childrenMapped[t]=i),e.childrenAfterGroup.push(i),e.updateHasChildren())}areGroupColsEqual(i,e){return i==null||e==null||i.pivotMode!==e.pivotMode?!1:M.areEqual(i.groupedCols,e.groupedCols)&&M.areEqual(i.keyCreators,e.keyCreators)}checkAllGroupDataAfterColsChanged(i){let e=t=>{t&&t.forEach(n=>{if(!i.usingTreeData&&!n.group)return;let s={field:n.field,key:n.key,rowGroupColumn:n.rowGroupColumn,leafNode:n.allLeafChildren[0]};this.setGroupData(n,s,i),e(n.childrenAfterGroup)})};e(i.rootNode.childrenAfterGroup)}shotgunResetEverything(i,e){if(this.noChangeInGroupingColumns(i,e))return;this.selectionService.filterFromSelection(s=>s&&!s.group);let{rootNode:t,groupedCols:n}=i;t.leafGroup=i.usingTreeData?!1:n.length===0,t.childrenAfterGroup=[],t.childrenMapped={},t.updateHasChildren();let r=t.sibling;r&&(r.childrenAfterGroup=t.childrenAfterGroup,r.childrenMapped=t.childrenMapped),this.insertNodes(t.allLeafChildren,i,!1)}noChangeInGroupingColumns(i,e){let t=!1,n=this.columnModel.getGroupDisplayColumns(),r=n?n.map(s=>s.getId()).join("-"):"";return e&&(t=i.usingTreeData||this.areGroupColsEqual(i,this.oldGroupingDetails),this.oldGroupDisplayColIds!==r&&this.checkAllGroupDataAfterColsChanged(i)),this.oldGroupingDetails=i,this.oldGroupDisplayColIds=r,t}insertNodes(i,e,t){i.forEach(n=>{this.insertOneNode(n,e,t),e.changedPath.isActive()&&e.changedPath.addParentNode(n.parent)})}insertOneNode(i,e,t,n){let r=this.getGroupInfo(i,e),s=this.findParentForNode(i,r,e,n);s.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[s.data,i.data]),e.usingTreeData?this.swapGroupWithUserNode(s,i,t):(i.parent=s,i.level=r.length,s.childrenAfterGroup.push(i),s.updateHasChildren())}findParentForNode(i,e,t,n){let r=t.rootNode;return e.forEach((s,o)=>{r=this.getOrCreateNextNode(r,s,o,t),n?.isRemoveFromAllLeafChildren(r,i)?n?.preventRemoveFromAllLeafChildren(r,i):r.allLeafChildren.push(i)}),r}swapGroupWithUserNode(i,e,t){e.parent=i.parent,e.key=i.key,e.field=i.field,e.groupData=i.groupData,e.level=i.level,t||(e.expanded=i.expanded),e.leafGroup=i.leafGroup,e.rowGroupIndex=i.rowGroupIndex,e.allLeafChildren=i.allLeafChildren,e.childrenAfterGroup=i.childrenAfterGroup,e.childrenMapped=i.childrenMapped,e.sibling=i.sibling,e.updateHasChildren(),this.removeFromParent(i),e.childrenAfterGroup.forEach(n=>n.parent=e),this.addToParent(e,i.parent)}getOrCreateNextNode(i,e,t,n){let r=this.getChildrenMappedKey(e.key,e.rowGroupColumn),s=i.childrenMapped?i.childrenMapped[r]:void 0;return s||(s=this.createGroup(e,i,t,n),this.addToParent(s,i)),s}createGroup(i,e,t,n){let r=new Wr(this.beans);return r.group=!0,r.field=i.field,r.rowGroupColumn=i.rowGroupColumn,this.setGroupData(r,i,n),r.key=i.key,r.id=this.createGroupId(r,e,n.usingTreeData,t),r.level=t,r.leafGroup=n.usingTreeData?!1:t===n.groupedColCount-1,r.allLeafChildren=[],r.setAllChildrenCount(0),r.rowGroupIndex=n.usingTreeData?null:t,r.childrenAfterGroup=[],r.childrenMapped={},r.updateHasChildren(),r.parent=n.includeParents?e:null,this.setExpandedInitialValue(n,r),r}createGroupId(i,e,t,n){let r;return t?r=(s,o,a)=>{if(a<0)return null;let l=o?r(o,o.parent,a-1):null;return`${l==null?"":l+"-"}${a}-${s.key}`}:r=(s,o)=>{if(!s.rowGroupColumn)return null;let a=o?r(o,o.parent,0):null;return`${a==null?"":a+"-"}${s.rowGroupColumn.getColId()}-${s.key}`},Wr.ID_PREFIX_ROW_GROUP+r(i,e,n)}setGroupData(i,e,t){i.groupData={},this.columnModel.getGroupDisplayColumns().forEach(r=>{if(t.usingTreeData){i.groupData[r.getColId()]=e.key;return}let o=i.rowGroupColumn;o!==null&&r.isRowGroupDisplayed(o.getId())&&(t.suppressGroupMaintainValueType?i.groupData[r.getColId()]=e.key:i.groupData[r.getColId()]=this.valueService.getValue(o,e.leafNode))})}getChildrenMappedKey(i,e){return e?e.getId()+"-"+i:i}setExpandedInitialValue(i,e){if(i.pivotMode&&e.leafGroup){e.expanded=!1;return}let t=i.isGroupOpenByDefault;if(t){let r={rowNode:e,field:e.field,key:e.key,level:e.level,rowGroupColumn:e.rowGroupColumn};e.expanded=t(r)==!0;return}let{expandByDefault:n}=i;if(i.expandByDefault===-1){e.expanded=!0;return}e.expanded=e.level<n}getGroupInfo(i,e){return e.usingTreeData?this.getGroupInfoFromCallback(i,e):this.getGroupInfoFromGroupColumns(i,e)}getGroupInfoFromCallback(i,e){let t=e.getDataPath?e.getDataPath(i.data):null;(t==null||t.length===0)&&M.warnOnce(`getDataPath() should not return an empty path for data ${i.data}`);let n=r=>({key:r,field:null,rowGroupColumn:null});return t?t.map(n):[]}getGroupInfoFromGroupColumns(i,e){let t=[];return e.groupedCols.forEach(n=>{let r=this.valueService.getKeyForNode(n,i),s=r!=null&&r!=="";if((e.pivotMode||!e.groupAllowUnbalanced)&&!s&&(r="",s=!0),s){let a={key:r,field:n.getColDef().field,rowGroupColumn:n,leafNode:i};t.push(a)}}),t}};Mt([k("columnModel")],pc.prototype,"columnModel",2);Mt([k("selectableService")],pc.prototype,"selectableService",2);Mt([k("valueService")],pc.prototype,"valueService",2);Mt([k("beans")],pc.prototype,"beans",2);Mt([k("selectionService")],pc.prototype,"selectionService",2);pc=Mt([De("groupStage")],pc);var pg=(()=>{let i=class extends be{init(){let e=()=>{var n;return(n=this.gos.get("serverSidePivotResultFieldSeparator"))!=null?n:"_"};this.fieldSeparator=e(),this.addManagedPropertyListener("serverSidePivotResultFieldSeparator",()=>{this.fieldSeparator=e()});let t=()=>this.gos.get("pivotDefaultExpanded");this.pivotDefaultExpanded=t(),this.addManagedPropertyListener("pivotDefaultExpanded",()=>{this.pivotDefaultExpanded=t()})}createPivotColumnDefs(e){let t=this.createPivotColumnsFromUniqueValues(e);function n(o,a=[]){return o.forEach(l=>{l.children!==void 0?n(l.children,a):a.push(l)}),a}let r=n(t);this.addRowGroupTotals(t,r),this.addExpandablePivotGroups(t,r),this.addPivotTotalsToGroups(t,r);let s=r.map(o=>M.cloneObject(o));return{pivotColumnGroupDefs:t,pivotColumnDefs:s}}createPivotColumnsFromUniqueValues(e){let t=this.columnModel.getPivotColumns(),n=t.length;return this.recursivelyBuildGroup(0,e,[],n,t)}recursivelyBuildGroup(e,t,n,r,s){let o=this.columnModel.getValueColumns();if(e>=r)return this.buildMeasureCols(n);let a=s[e].getColDef(),l=this.headerNameComparator.bind(this,a.pivotComparator);if(o.length===1&&this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&e===r-1){let u=[];return M.iterateObject(t,d=>{let h=[...n,d],p=this.createColDef(o[0],d,h);p.columnGroupShow="open",u.push(p)}),u.sort(l),u}let c=[];return M.iterateObject(t,(u,d)=>{let h=this.pivotDefaultExpanded===-1||e<this.pivotDefaultExpanded,p=[...n,u];c.push({children:this.recursivelyBuildGroup(e+1,d,p,r,s),headerName:u,pivotKeys:p,columnGroupShow:"open",openByDefault:h,groupId:this.generateColumnGroupId(p)})}),c.sort(l),c}buildMeasureCols(e){let t=this.columnModel.getValueColumns();return t.length===0?[this.createColDef(null,"-",e)]:t.map(n=>{let r=this.columnModel.getDisplayNameForColumn(n,"header");return qW(YW({},this.createColDef(n,r,e)),{columnGroupShow:"open"})})}addExpandablePivotGroups(e,t){if(this.gos.get("suppressExpandablePivotGroups")||this.gos.get("pivotColumnGroupTotals"))return;let n=(r,s,o)=>{let a=r;if(a.children){let l=new Map;a.children.forEach(u=>{n(u,s,l)});let c=!a.children.some(u=>u.children);this.columnModel.getValueColumns().forEach(u=>{let d=this.columnModel.getDisplayNameForColumn(u,"header"),h=this.createColDef(u,d,r.pivotKeys);h.pivotTotalColumnIds=l.get(u.getColId()),h.columnGroupShow="closed",h.aggFunc=u.getAggFunc(),c||(r.children.push(h),s.push(h))}),this.merge(o,l)}else{let l=r;if(!l.pivotValueColumn)return;let c=l.pivotValueColumn.getColId(),u=o.has(c)?o.get(c):[];u.push(l.colId),o.set(c,u)}};e.forEach(r=>{n(r,t,new Map)})}addPivotTotalsToGroups(e,t){if(!this.gos.get("pivotColumnGroupTotals"))return;let n=this.gos.get("pivotColumnGroupTotals")==="after",r=this.columnModel.getValueColumns(),s=r.map(a=>a.getAggFunc());if(!s||s.length<1||!this.sameAggFuncs(s))return;let o=r[0];e.forEach(a=>{this.recursivelyAddPivotTotal(a,t,o,n)})}recursivelyAddPivotTotal(e,t,n,r){let s=e;if(!s.children){let a=e;return a.colId?[a.colId]:null}let o=[];if(s.children.forEach(a=>{let l=this.recursivelyAddPivotTotal(a,t,n,r);l&&(o=o.concat(l))}),s.children.length>1){let l=this.localeService.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),c=this.createColDef(n,l,e.pivotKeys,!0);c.pivotTotalColumnIds=o,c.aggFunc=n.getAggFunc();let u=e.children;r?u.push(c):u.unshift(c),t.push(c)}return o}addRowGroupTotals(e,t){if(!this.gos.get("pivotRowTotals"))return;let n=this.gos.get("pivotRowTotals")==="after",r=this.columnModel.getValueColumns(),s=n?r.slice():r.slice().reverse();for(let o=0;o<s.length;o++){let a=s[o],l=[];e.forEach(u=>{l=l.concat(this.extractColIdsForValueColumn(u,a))});let c=s.length>1||!this.gos.get("removePivotHeaderRowWhenSingleValueColumn");this.createRowGroupTotal(e,t,a,l,n,c)}}extractColIdsForValueColumn(e,t){let n=e;if(!n.children){let s=n;return s.pivotValueColumn===t&&s.colId?[s.colId]:[]}let r=[];return n.children.forEach(s=>{this.extractColIdsForValueColumn(s,t);let o=this.extractColIdsForValueColumn(s,t);r=r.concat(o)}),r}createRowGroupTotal(e,t,n,r,s,o){let a=this.columnModel.getValueColumns(),l;if(a.length===0)l=this.createColDef(null,"-",[]);else{let u=this.columnModel.getDisplayNameForColumn(n,"header");l=this.createColDef(n,u,[]),l.pivotTotalColumnIds=r}l.colId=i.PIVOT_ROW_TOTAL_PREFIX+l.colId,t.push(l);let c=o?{children:[l],pivotKeys:[],groupId:`${i.PIVOT_ROW_TOTAL_PREFIX}_pivotGroup_${n.getColId()}`}:l;s?e.push(c):e.unshift(c)}createColDef(e,t,n,r=!1){let s={};if(e){let o=e.getColDef();Object.assign(s,o),s.hide=!1}return s.headerName=t,s.colId=this.generateColumnId(n||[],e&&!r?e.getColId():""),s.field=s.colId,s.valueGetter=o=>{var a;return(a=o.data)==null?void 0:a[o.colDef.field]},s.pivotKeys=n,s.pivotValueColumn=e,s.filter===!0&&(s.filter="agNumberColumnFilter"),s}sameAggFuncs(e){if(e.length==1)return!0;for(let t=1;t<e.length;t++)if(e[t]!==e[0])return!1;return!0}headerNameComparator(e,t,n){return e?e(t.headerName,n.headerName):t.headerName&&!n.headerName?1:!t.headerName&&n.headerName?-1:!t.headerName||!n.headerName?0:t.headerName<n.headerName?-1:t.headerName>n.headerName?1:0}merge(e,t){t.forEach((n,r,s)=>{let a=[...e.has(r)?e.get(r):[],...n];e.set(r,a)})}generateColumnGroupId(e){return`pivotGroup_${this.columnModel.getPivotColumns().map(n=>n.getColId()).join("-")}_${e.join("-")}`}generateColumnId(e,t){return`pivot_${this.columnModel.getPivotColumns().map(r=>r.getColId()).join("-")}_${e.join("-")}_${t}`}createColDefsFromFields(e){let t={};for(let s=0;s<e.length;s++){let a=e[s].split(this.fieldSeparator),l=t;for(let c=0;c<a.length;c++){let u=a[c];l[u]==null&&(l[u]={}),l=l[u]}}let n=(s,o,a,l)=>{var c;let u=[];for(let p in a){let m=a[p],g=n(`${s}${this.fieldSeparator}${p}`,p,m,l+1);u.push(g)}if(u.length===0){let p=this.columnModel.getPrimaryColumn(o);if(p){let g=(c=this.columnModel.getDisplayNameForColumn(p,"header"))!=null?c:o,f=this.createColDef(p,g,void 0,!1);return f.colId=s,f.aggFunc=p.getAggFunc(),f.valueGetter=y=>{var b;return(b=y.data)==null?void 0:b[s]},f}return{colId:s,headerName:o,valueGetter:g=>{var f;return(f=g.data)==null?void 0:f[s]}}}return this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&u.length===1&&"colId"in u[0]?(u[0].headerName=o,u[0]):{openByDefault:this.pivotDefaultExpanded===-1||l<this.pivotDefaultExpanded,groupId:s,headerName:o,children:u}},r=[];for(let s in t){let o=t[s],a=n(s,s,o,0);r.push(a)}return r}};return i.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_",i})();Mt([k("columnModel")],pg.prototype,"columnModel",2);Mt([J],pg.prototype,"init",1);pg=Mt([De("pivotColDefService")],pg);var Zh=(()=>{let i=class extends be{constructor(){super(...arguments),this.uniqueValues={},this.lastTimeFailed=!1,this.maxUniqueValues=-1,this.currentUniqueCount=0}execute(e){let t=e.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(t):this.executePivotOff(t)}executePivotOff(e){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),e&&e.setInactive())}executePivotOn(e){var t;let n=(t=this.columnModel.getValueColumns().length)!=null?t:1,r=this.gos.get("pivotMaxGeneratedColumns");this.maxUniqueValues=r===-1?-1:r/n;let s;try{s=this.bucketUpRowNodes(e)}catch(v){if(v.message===i.EXCEEDED_MAX_UNIQUE_VALUES){this.columnModel.setSecondaryColumns([],"rowModelUpdated");let S={type:X.EVENT_PIVOT_MAX_COLUMNS_EXCEEDED,message:v.message};this.eventService.dispatchEvent(S),this.lastTimeFailed=!0;return}throw v}let o=this.setUniqueValues(s),a=this.columnModel.getValueColumns(),l=a.map(v=>`${v.getId()}-${v.getColDef().headerName}`).join("#"),c=a.map(v=>v.getAggFunc().toString()).join("#"),u=this.aggregationColumnsHashLastTime!==l,d=this.aggregationFuncsHashLastTime!==c;this.aggregationColumnsHashLastTime=l,this.aggregationFuncsHashLastTime=c;let h=this.columnModel.getRowGroupColumns().map(v=>v.getId()).join("#"),p=h!==this.groupColumnsHashLastTime;this.groupColumnsHashLastTime=h;let m=this.gos.get("pivotRowTotals"),g=this.gos.get("pivotColumnGroupTotals"),f=this.gos.get("suppressExpandablePivotGroups"),y=this.gos.get("removePivotHeaderRowWhenSingleValueColumn"),b=m!==this.pivotRowTotalsLastTime||g!==this.pivotColumnGroupTotalsLastTime||f!==this.suppressExpandablePivotGroupsLastTime||y!==this.removePivotHeaderRowWhenSingleValueColumnLastTime;if(this.pivotRowTotalsLastTime=m,this.pivotColumnGroupTotalsLastTime=g,this.suppressExpandablePivotGroupsLastTime=f,this.removePivotHeaderRowWhenSingleValueColumnLastTime=y,this.lastTimeFailed||o||u||p||d||b){let{pivotColumnGroupDefs:v,pivotColumnDefs:S}=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues);this.pivotColumnDefs=S,this.columnModel.setSecondaryColumns(v,"rowModelUpdated"),e&&e.setInactive()}this.lastTimeFailed=!1}setUniqueValues(e){let t=JSON.stringify(e),n=JSON.stringify(this.uniqueValues);return t!==n?(this.uniqueValues=e,!0):!1}bucketUpRowNodes(e){this.currentUniqueCount=0;let t={};e.forEachChangedNodeDepthFirst(r=>{r.leafGroup&&(r.childrenMapped=null)});let n=r=>{var s;r.leafGroup?this.bucketRowNode(r,t):(s=r.childrenAfterFilter)==null||s.forEach(n)};return e.executeFromRootNode(n),t}bucketRowNode(e,t){let n=this.columnModel.getPivotColumns();n.length===0?e.childrenMapped=null:e.childrenMapped=this.bucketChildren(e.childrenAfterFilter,n,0,t),e.sibling&&(e.sibling.childrenMapped=e.childrenMapped)}bucketChildren(e,t,n,r){let s={},o=t[n];if(e.forEach(a=>{let l=this.valueService.getKeyForNode(o,a);if(M.missing(l)&&(l=""),!r[l]){this.currentUniqueCount+=1,r[l]={};let c=this.maxUniqueValues!==-1,u=this.currentUniqueCount>this.maxUniqueValues;if(c&&u)throw Error(i.EXCEEDED_MAX_UNIQUE_VALUES)}s[l]||(s[l]=[]),s[l].push(a)}),n===t.length-1)return s;{let a={};return M.iterateObject(s,(l,c)=>{a[l]=this.bucketChildren(c,t,n+1,r[l])}),a}}getPivotColumnDefs(){return this.pivotColumnDefs}};return i.EXCEEDED_MAX_UNIQUE_VALUES="Exceeded maximum allowed pivot column count.",i})();Mt([k("valueService")],Zh.prototype,"valueService",2);Mt([k("columnModel")],Zh.prototype,"columnModel",2);Mt([k("pivotColDefService")],Zh.prototype,"pivotColDefService",2);Zh=Mt([De("pivotStage")],Zh);var XW={sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"},ay=(()=>{let i=class extends be{constructor(){super(...arguments),this.aggFuncsMap={},this.initialised=!1}init(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gos.get("aggFuncs")))}initialiseWithDefaultAggregations(){this.aggFuncsMap[i.AGG_SUM]=ZW,this.aggFuncsMap[i.AGG_FIRST]=QW,this.aggFuncsMap[i.AGG_LAST]=JW,this.aggFuncsMap[i.AGG_MIN]=e$,this.aggFuncsMap[i.AGG_MAX]=t$,this.aggFuncsMap[i.AGG_COUNT]=i$,this.aggFuncsMap[i.AGG_AVG]=n$,this.initialised=!0}isAggFuncPossible(e,t){let n=this.getFuncNames(e),r=M.includes(n,t),s=M.exists(this.aggFuncsMap[t]);return r&&s}getDefaultFuncLabel(e){var t;return(t=XW[e])!=null?t:e}getDefaultAggFunc(e){let t=e.getColDef().defaultAggFunc;if(M.exists(t)&&this.isAggFuncPossible(e,t))return t;if(this.isAggFuncPossible(e,i.AGG_SUM))return i.AGG_SUM;let n=this.getFuncNames(e);return M.existsAndNotEmpty(n)?n[0]:null}addAggFuncs(e){this.init(),M.iterateObject(e,(t,n)=>{this.aggFuncsMap[t]=n})}getAggFunc(e){return this.init(),this.aggFuncsMap[e]}getFuncNames(e){let t=e.getColDef().allowedAggFuncs;return t??Object.keys(this.aggFuncsMap).sort()}clear(){this.aggFuncsMap={}}};return i.AGG_SUM="sum",i.AGG_FIRST="first",i.AGG_LAST="last",i.AGG_MIN="min",i.AGG_MAX="max",i.AGG_COUNT="count",i.AGG_AVG="avg",i})();Mt([J],ay.prototype,"init",1);ay=Mt([De("aggFuncService")],ay);function ZW(i){let{values:e}=i,t=null;for(let n=0;n<e.length;n++){let r=e[n];typeof r=="number"?t===null?t=r:t+=typeof t=="number"?r:BigInt(r):typeof r=="bigint"&&(t===null?t=r:t=(typeof t=="bigint"?t:BigInt(t))+r)}return t}function QW(i){return i.values.length>0?i.values[0]:null}function JW(i){return i.values.length>0?M.last(i.values):null}function e$(i){let{values:e}=i,t=null;for(let n=0;n<e.length;n++){let r=e[n];(typeof r=="number"||typeof r=="bigint")&&(t===null||t>r)&&(t=r)}return t}function t$(i){let{values:e}=i,t=null;for(let n=0;n<e.length;n++){let r=e[n];(typeof r=="number"||typeof r=="bigint")&&(t===null||t<r)&&(t=r)}return t}function i$(i){var e,t;let{values:n}=i,r=0;for(let o=0;o<n.length;o++){let a=n[o];r+=a!=null&&typeof a.value=="number"?a.value:1}let s=(t=(e=i.rowNode)==null?void 0:e.aggData)==null?void 0:t[i.column.getColId()];return s&&s.value===r?s:{value:r,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function n$(i){var e,t,n;let{values:r}=i,s=0,o=0;for(let c=0;c<r.length;c++){let u=r[c],d=null;typeof u=="number"||typeof u=="bigint"?(d=u,o++):u!=null&&(typeof u.value=="number"||typeof u.value=="bigint")&&typeof u.count=="number"&&(d=u.value*(typeof u.value=="number"?u.count:BigInt(u.count)),o+=u.count),typeof d=="number"?s+=typeof s=="number"?d:BigInt(d):typeof d=="bigint"&&(s=(typeof s=="bigint"?s:BigInt(s))+d)}let a=null;o>0&&(a=s/(typeof s=="number"?o:BigInt(o)));let l=(n=(e=i.rowNode)==null?void 0:e.aggData)==null?void 0:n[(t=i.column)==null?void 0:t.getColId()];return l&&l.count===o&&l.value===a?l:{count:o,value:a,toString:function(){return typeof this.value=="number"||typeof this.value=="bigint"?this.value.toString():""},toNumber:function(){return this.value}}}var op=class extends yd{constructor(i,e,t,n,r){super(e,t,r,`
                <span role="option">
                    <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>
                    <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>
                    <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
                    <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>
                </span>
            `),this.column=i,this.dropZonePurpose=n,this.popupShowing=!1}init(){this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),super.init(),this.setupSort(),this.addManagedListener(this.eventService,Ii.EVENT_SORT_CHANGED,()=>{this.setupAria()}),this.isGroupingZone()&&this.addManagedPropertyListener("groupLockGroupColumns",()=>{this.refreshRemove(),this.refreshDraggable(),this.setupAria()})}getItem(){return this.column}getDisplayName(){return this.displayName}getTooltip(){return this.column.getColDef().headerTooltip}addAdditionalAriaInstructions(i,e){let t=this.gos.get("rowGroupPanelSuppressSort"),n=this.gos.get("functionsReadOnly");if(this.isAggregationZone()&&!n){let r=e("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");i.push(r)}if(this.isGroupingZone()&&this.column.isSortable()&&!t){let r=e("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");i.push(r)}super.addAdditionalAriaInstructions(i,e)}isDraggable(){return this.isReadOnly()}isRemovable(){return this.isReadOnly()}isReadOnly(){return!this.isGroupingAndLocked()&&!this.gos.get("functionsReadOnly")}getAriaDisplayName(){let i=this.localeService.getLocaleTextFunc(),{name:e,aggFuncName:t}=this.getColumnAndAggFuncName(),n=i("ariaDropZoneColumnComponentAggFuncSeparator"," of "),r={asc:i("ariaDropZoneColumnComponentSortAscending","ascending"),desc:i("ariaDropZoneColumnComponentSortDescending","descending")},s=this.column.getSort(),o=this.gos.get("rowGroupPanelSuppressSort");return[t&&`${t}${n}`,e,this.isGroupingZone()&&!o&&s&&`, ${r[s]}`].filter(a=>!!a).join("")}getColumnAndAggFuncName(){let i=this.displayName,e="";if(this.isAggregationZone()){let t=this.column.getAggFunc(),n=typeof t=="string"?t:"agg";e=this.localeService.getLocaleTextFunc()(n,n)}return{name:i,aggFuncName:e}}setupSort(){let i=this.column.isSortable(),e=this.isGroupingZone();if(!(!i||!e)&&!this.gos.get("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);let t=n=>{n.preventDefault();let s=this.gos.get("multiSortKey")==="ctrl"?n.ctrlKey||n.metaKey:n.shiftKey;this.sortController.progressSort(this.column,s,"uiColumnSorted")};this.addGuiEventListener("click",t),this.addGuiEventListener("keydown",n=>{n.key===Xe.ENTER&&this.isGroupingZone()&&t(n)})}}getDefaultIconName(){return hi.ICON_HIDE}createGetDragItem(){let{column:i}=this;return()=>{let e={};return e[i.getId()]=i.isVisible(),{columns:[i],visibleState:e}}}setupComponents(){super.setupComponents(),this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))}onKeyDown(i){super.onKeyDown(i),i.key===Xe.ENTER&&this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&(i.preventDefault(),this.onShowAggFuncSelection())}getDisplayValue(){let{name:i,aggFuncName:e}=this.getColumnAndAggFuncName();return this.isAggregationZone()?`${e}(${i})`:i}onShowAggFuncSelection(){if(this.popupShowing)return;this.popupShowing=!0;let i=new Oo({cssIdentifier:"select-agg-func"}),e=this.aggFuncService.getFuncNames(this.column),t=this.getGui(),n=i.getGui();i.setModel({getRow:function(u){return e[u]},getRowCount:function(){return e.length}}),this.getContext().createBean(i);let r=M.loadTemplate('<div class="ag-select-agg-func-popup"></div>');r.style.top="0px",r.style.left="0px",r.appendChild(n),r.style.width=`${t.clientWidth}px`;let s=this.addManagedListener(r,"focusout",u=>{!r.contains(u.relatedTarget)&&l&&l.hideFunc()}),o=u=>{this.destroyBean(i),this.popupShowing=!1,u?.key==="Escape"&&t.focus(),s&&s()},a=this.localeService.getLocaleTextFunc(),l=this.popupService.addPopup({modal:!0,eChild:r,closeOnEsc:!0,closedCallback:o,ariaLabel:a("ariaLabelAggregationFunction","Aggregation Function")});l&&i.setComponentCreator(this.createAggSelect.bind(this,l.hideFunc)),i.addGuiEventListener("keydown",u=>{if(u.key===Xe.ENTER||u.key===Xe.SPACE){let d=i.getLastFocusedRow();if(d==null)return;let h=i.getComponentAt(d);h&&h.selectItem()}}),this.popupService.positionPopupByComponent({type:"aggFuncSelect",eventSource:t,ePopup:r,keepWithinBounds:!0,column:this.column,position:"under"}),i.refresh();let c=e.findIndex(u=>u===this.column.getAggFunc());c===-1&&(c=0),i.focusRow(c)}createAggSelect(i,e){let t=()=>{if(i(),this.gos.get("functionsPassive")){let a={type:X.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[this.column],aggFunc:e};this.eventService.dispatchEvent(a)}else this.columnModel.setColumnAggFunc(this.column,e,"toolPanelDragAndDrop")},n=this.localeService.getLocaleTextFunc(),r=e.toString(),s=n(r,r);return new r$(t,s)}isGroupingAndLocked(){return this.isGroupingZone()&&this.columnModel.isColumnGroupingLocked(this.column)}isAggregationZone(){return this.dropZonePurpose==="aggregation"}isGroupingZone(){return this.dropZonePurpose==="rowGroup"}getDragSourceType(){return Gi.ToolPanel}destroy(){super.destroy(),this.column=null}};Mt([k("popupService")],op.prototype,"popupService",2);Mt([k("sortController")],op.prototype,"sortController",2);Mt([k("columnModel")],op.prototype,"columnModel",2);Mt([ji("aggFuncService")],op.prototype,"aggFuncService",2);Mt([ce("eSortIndicator")],op.prototype,"eSortIndicator",2);var r$=class extends ae{constructor(i,e){super('<div class="ag-select-agg-func-item"/>'),this.selectItem=i,this.getGui().innerText=e,this.addGuiEventListener("click",this.selectItem)}},Gy=class extends Cd{constructor(i,e){super(i),this.dropZonePurpose=e}init(i){super.init(i),this.addManagedListener(this.eventService,X.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedPropertyListeners(["functionsReadOnly","rowGroupPanelSuppressSort","groupLockGroupColumns"],this.refreshGui.bind(this))}getItems(i){var e;return(e=i.columns)!=null?e:[]}isInterestedIn(i){return i===Gi.HeaderCell||i===Gi.ToolPanel}minimumAllowedNewInsertIndex(){let i=this.gos.get("groupLockGroupColumns"),e=this.columnModel.getRowGroupColumns().length;return i===-1?e:Math.min(i,e)}showOrHideColumnOnExit(i){return this.isRowGroupPanel()&&!this.gos.get("suppressRowGroupHidesColumns")&&!i.fromNudge}handleDragEnterEnd(i){if(this.showOrHideColumnOnExit(i)){let n=i.dragSource.getDragItem().columns;this.setColumnsVisible(n,!1,"uiColumnDragged")}}handleDragLeaveEnd(i){if(this.showOrHideColumnOnExit(i)){let t=i.dragSource.getDragItem();this.setColumnsVisible(t.columns,!0,"uiColumnDragged")}}setColumnsVisible(i,e,t){if(i){let n=i.filter(r=>!r.getColDef().lockVisible);this.columnModel.setColumnsVisible(n,e,t)}}isRowGroupPanel(){return this.dropZonePurpose==="rowGroup"}refreshOnDragStop(){return!this.gos.get("functionsPassive")}createPillComponent(i,e,t,n){return new op(i,e,t,this.dropZonePurpose,n)}};Mt([k("columnModel")],Gy.prototype,"columnModel",2);var mg=class extends Gy{constructor(i){super(i,"rowGroup")}passBeansUp(){let i=this.localeService.getLocaleTextFunc(),e=i("rowGroupColumnsEmptyMessage","Drag here to set row groups"),t=i("groups","Row Groups");super.init({icon:M.createIconNoSpan("rowGroupPanel",this.gos,null),emptyMessage:e,title:t}),this.addManagedListener(this.eventService,X.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")}getTooltipParams(){let i=super.getTooltipParams();return i.location="rowGroupColumnsList",i}isItemDroppable(i,e){return this.gos.get("functionsReadOnly")||!i.isPrimary()?!1:i.isAllowRowGroup()&&(!i.isRowGroupActive()||this.isSourceEventFromTarget(e))}updateItems(i){if(this.gos.get("functionsPassive")){let e={type:X.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:i};this.eventService.dispatchEvent(e)}else this.columnModel.setRowGroupColumns(i,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?hi.ICON_GROUP:hi.ICON_NOT_ALLOWED}getExistingItems(){return this.columnModel.getRowGroupColumns()}};Mt([J],mg.prototype,"passBeansUp",1);var gg=class extends Gy{constructor(i){super(i,"pivot")}passBeansUp(){let i=this.localeService.getLocaleTextFunc(),e=i("pivotColumnsEmptyMessage","Drag here to set column labels"),t=i("pivots","Column Labels");super.init({icon:M.createIconNoSpan("pivotPanel",this.gos,null),emptyMessage:e,title:t}),this.addManagedListener(this.eventService,X.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,X.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,X.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")}getTooltipParams(){let i=super.getTooltipParams();return i.location="pivotColumnsList",i}refresh(){this.checkVisibility(),this.refreshGui()}checkVisibility(){let i=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gos.get("pivotPanelShow")){case"always":this.setDisplayed(i);break;case"onlyWhenPivoting":let e=this.columnModel.isPivotActive();this.setDisplayed(i&&e);break;default:this.setDisplayed(!1);break}else this.setDisplayed(i)}isItemDroppable(i,e){return this.gos.get("functionsReadOnly")||!i.isPrimary()?!1:i.isAllowPivot()&&(!i.isPivotActive()||this.isSourceEventFromTarget(e))}updateItems(i){if(this.gos.get("functionsPassive")){let e={type:X.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:i};this.eventService.dispatchEvent(e)}else this.columnModel.setPivotColumns(i,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?hi.ICON_PIVOT:hi.ICON_NOT_ALLOWED}getExistingItems(){return this.columnModel.getPivotColumns()}};Mt([J],gg.prototype,"passBeansUp",1);var r1=class extends ae{constructor(){super()}postConstruct(){this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,X.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onRowGroupChanged()),this.addManagedListener(this.eventService,X.EVENT_NEW_COLUMNS_LOADED,()=>this.onRowGroupChanged()),this.addManagedPropertyListener("rowGroupPanelShow",()=>this.onRowGroupChanged()),this.addManagedPropertyListener("pivotPanelShow",()=>this.onPivotPanelShow()),this.onRowGroupChanged()}createNorthPanel(){let i=document.createElement("div");return i.classList.add("ag-column-drop-wrapper"),M.setAriaRole(i,"presentation"),this.rowGroupComp=new mg(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new gg(!0),this.createManagedBean(this.pivotComp),i.appendChild(this.rowGroupComp.getGui()),i.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,ae.EVENT_DISPLAYED_CHANGED,()=>this.onDropPanelVisible()),this.addManagedListener(this.pivotComp,ae.EVENT_DISPLAYED_CHANGED,()=>this.onDropPanelVisible()),this.onDropPanelVisible(),i}onDropPanelVisible(){let i=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",i),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",i)}onRowGroupChanged(){if(!this.rowGroupComp)return;let i=this.gos.get("rowGroupPanelShow");if(i==="always")this.rowGroupComp.setDisplayed(!0);else if(i==="onlyWhenGrouping"){let e=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(e)}else this.rowGroupComp.setDisplayed(!1)}onPivotPanelShow(){if(!this.pivotComp)return;let i=this.gos.get("pivotPanelShow");if(i==="always")this.pivotComp.setDisplayed(!0);else if(i==="onlyWhenPivoting"){let e=this.columnModel.isPivotActive();this.pivotComp.setDisplayed(e)}else this.pivotComp.setDisplayed(!1)}};Mt([k("columnModel")],r1.prototype,"columnModel",2);Mt([J],r1.prototype,"postConstruct",1);var fg=class extends be{execute(i){let e=this.columnModel.isPivotMode(),t=this.filterManager.isAggregateFilterPresent()||this.filterManager.isAggregateQuickFilterPresent(),n=c=>!c.node.group,r=c=>c.node.leafGroup,s=this.gos.getGroupAggFiltering()||(e?r:n),{changedPath:o}=i,a=(c,u=!1)=>{c.childrenAfterFilter&&(c.childrenAfterAggFilter=c.childrenAfterFilter,u&&c.childrenAfterAggFilter.forEach(d=>a(d,u)),this.setAllChildrenCount(c)),c.sibling&&(c.sibling.childrenAfterAggFilter=c.childrenAfterAggFilter)},l=c=>{var u;c.childrenAfterAggFilter=((u=c.childrenAfterFilter)==null?void 0:u.filter(d=>{var h;return s({node:d})&&this.filterManager.doesRowPassAggregateFilters({rowNode:d})?(a(d,!0),!0):(h=d.childrenAfterAggFilter)==null?void 0:h.length}))||null,this.setAllChildrenCount(c),c.sibling&&(c.sibling.childrenAfterAggFilter=c.childrenAfterAggFilter)};o.forEachChangedNodeDepthFirst(t?l:a,!0)}setAllChildrenCountTreeData(i){let e=0;i.childrenAfterAggFilter.forEach(t=>{e++,e+=t.allChildrenCount}),i.setAllChildrenCount(e)}setAllChildrenCountGridGrouping(i){let e=0;i.childrenAfterAggFilter.forEach(t=>{t.group?e+=t.allChildrenCount:e++}),i.setAllChildrenCount(e)}setAllChildrenCount(i){if(!i.hasChildren()){i.setAllChildrenCount(null);return}this.gos.get("treeData")?this.setAllChildrenCountTreeData(i):this.setAllChildrenCountGridGrouping(i)}};Mt([k("filterManager")],fg.prototype,"filterManager",2);Mt([k("columnModel")],fg.prototype,"columnModel",2);fg=Mt([De("filterAggregatesStage")],fg);var s$="31.3.4",ap=(()=>{let i=class o_ extends Io{constructor(){super(`
            <div class="ag-group-filter">
                <div ref="eGroupField"></div>
                <div ref="eUnderlyingFilter"></div>
            </div>
        `)}postConstruct(){this.initialiseTabGuard({})}init(t){return this.params=t,this.validateParams(),this.updateGroups().then(()=>{this.addManagedListener(this.eventService,X.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onColumnRowGroupChanged())})}validateParams(){let{colDef:t}=this.params;t.field&&M.warnOnce('Group Column Filter does not work with the colDef property "field". This property will be ignored.'),t.filterValueGetter&&M.warnOnce('Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.'),t.filterParams&&M.warnOnce('Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.')}updateGroups(){let t=this.updateGroupField();return this.getUnderlyingFilters(t)}getSourceColumns(){if(this.groupColumn=this.params.column,this.gos.get("treeData"))return M.warnOnce("Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter."),[];let t=this.columnModel.getSourceColumnsForGroupColumn(this.groupColumn);return t||(M.warnOnce("Group Column Filter only works on group columns. Please use a different filter."),[])}updateGroupField(){M.clearElement(this.eGroupField),this.eGroupFieldSelect&&this.destroyBean(this.eGroupFieldSelect);let t=this.getSourceColumns(),n=t.filter(r=>r.isFilterAllowed());return n.length?(t.length===1?(this.selectedColumn=n[0],M.setDisplayed(this.eGroupField,!1)):((!this.selectedColumn||!n.some(r=>r.getId()===this.selectedColumn.getId()))&&(this.selectedColumn=n[0]),this.createGroupFieldSelectElement(n),this.eGroupField.appendChild(this.eGroupFieldSelect.getGui()),this.eGroupField.appendChild(M.loadTemplate('<div class="ag-filter-separator"></div>')),M.setDisplayed(this.eGroupField,!0)),n):(this.selectedColumn=void 0,M.setDisplayed(this.eGroupField,!1),null)}createGroupFieldSelectElement(t){this.eGroupFieldSelect=this.createManagedBean(new tn);let n=this.localeService.getLocaleTextFunc();this.eGroupFieldSelect.setLabel(n("groupFilterSelect","Select field:")),this.eGroupFieldSelect.setLabelAlignment("top"),this.eGroupFieldSelect.addOptions(t.map(r=>{var s;return{value:r.getId(),text:(s=this.columnModel.getDisplayNameForColumn(r,"groupFilter",!1))!=null?s:void 0}})),this.eGroupFieldSelect.setValue(this.selectedColumn.getId()),this.eGroupFieldSelect.onValueChange(r=>this.updateSelectedColumn(r)),this.eGroupFieldSelect.addCssClass("ag-group-filter-field-select-wrapper"),t.length===1&&this.eGroupFieldSelect.setDisabled(!0)}getUnderlyingFilters(t){if(!t)return this.filterColumnPairs=void 0,this.selectedFilter=void 0,this.groupColumn.setFilterActive(!1,"columnRowGroupChanged"),vt.resolve();let n=[],r=[];return t.forEach(s=>{let o=this.filterManager.getOrCreateFilterWrapper(s,"COLUMN_MENU");o?.filterPromise&&n.push(o.filterPromise.then(a=>(a&&r.push({filter:a,column:s}),s.getId()===this.selectedColumn.getId()&&(this.selectedFilter=a??void 0),a)))}),vt.all(n).then(()=>{this.filterColumnPairs=r,this.groupColumn.setFilterActive(this.isFilterActive(),"columnRowGroupChanged")})}addUnderlyingFilterElement(){var t,n;if(M.clearElement(this.eUnderlyingFilter),!this.selectedColumn)return vt.resolve();let r=this.createManagedBean(new xl(this.selectedColumn,"COLUMN_MENU"));return this.filterWrapperComp=r,r.hasFilter()?(this.eUnderlyingFilter.appendChild(r.getGui()),(n=(t=r.getFilter())==null?void 0:t.then(()=>{var s,o;(s=r.afterGuiAttached)==null||s.call(r,this.afterGuiAttachedParams),!((o=this.afterGuiAttachedParams)!=null&&o.suppressFocus)&&this.eGroupFieldSelect&&!this.eGroupFieldSelect.isDisabled()&&this.eGroupFieldSelect.getFocusableElement().focus()}))!=null?n:vt.resolve()):vt.resolve()}updateSelectedColumn(t){var n;if(!t)return;(n=this.filterWrapperComp)==null||n.afterGuiDetached(),this.destroyBean(this.filterWrapperComp);let r=this.getFilterColumnPair(t);this.selectedColumn=r?.column,this.selectedFilter=r?.filter,this.dispatchEvent({type:o_.EVENT_SELECTED_COLUMN_CHANGED}),this.addUnderlyingFilterElement()}isFilterActive(){var t;return!!((t=this.filterColumnPairs)!=null&&t.some(({filter:n})=>n.isFilterActive()))}doesFilterPass(){return!0}getModel(){return null}setModel(){return vt.resolve()}afterGuiAttached(t){this.afterGuiAttachedParams=t,this.addUnderlyingFilterElement()}afterGuiDetached(){var t,n;M.clearElement(this.eUnderlyingFilter),(n=(t=this.selectedFilter)==null?void 0:t.afterGuiDetached)==null||n.call(t)}onColumnRowGroupChanged(){this.updateGroups().then(()=>{this.dispatchEvent({type:o_.EVENT_COLUMN_ROW_GROUP_CHANGED}),this.eventService.dispatchEvent({type:"filterAllowedUpdated"})})}getFilterColumnPair(t){var n;if(t)return(n=this.filterColumnPairs)==null?void 0:n.find(({column:r})=>r.getId()===t)}getSelectedFilter(){return this.selectedFilter}getSelectedColumn(){return this.selectedColumn}isFilterAllowed(){return!!this.selectedColumn}destroy(){super.destroy()}};return i.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",i.EVENT_SELECTED_COLUMN_CHANGED="selectedColumnChanged",i})();Mt([k("filterManager")],ap.prototype,"filterManager",2);Mt([k("columnModel")],ap.prototype,"columnModel",2);Mt([ce("eGroupField")],ap.prototype,"eGroupField",2);Mt([ce("eUnderlyingFilter")],ap.prototype,"eUnderlyingFilter",2);Mt([J],ap.prototype,"postConstruct",1);var a_=ap,Uy=class extends ae{constructor(){super(`
            <div ref="eFloatingFilter" class="ag-group-floating-filter ag-floating-filter-input" role="presentation"></div>
        `),this.haveAddedColumnListeners=!1}init(i){this.params=i;let e=this.gos.get("groupDisplayType")==="multipleColumns";return new vt(t=>{this.params.parentFilterInstance(n=>{this.parentFilterInstance=n,e?this.setupUnderlyingFloatingFilterElement().then(()=>t()):(this.setupReadOnlyFloatingFilterElement(),t())})}).then(()=>{this.addManagedListener(this.parentFilterInstance,a_.EVENT_SELECTED_COLUMN_CHANGED,()=>this.onSelectedColumnChanged()),this.addManagedListener(this.parentFilterInstance,a_.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onColumnRowGroupChanged())})}onParamsUpdated(i){this.refresh(i)}refresh(i){this.params=i,this.setParams()}setParams(){var i;let e=this.columnModel.getDisplayNameForColumn(this.params.column,"header",!0),t=this.localeService.getLocaleTextFunc();(i=this.eFloatingFilterText)==null||i.setInputAriaLabel(`${e} ${t("ariaFilterInput","Filter Input")}`)}setupReadOnlyFloatingFilterElement(){this.eFloatingFilterText||(this.eFloatingFilterText=this.createManagedBean(new md),this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",()=>this.params.showParentFilter()),this.setParams()),this.updateDisplayedValue(),this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())}setupUnderlyingFloatingFilterElement(){this.showingUnderlyingFloatingFilter=!1,this.underlyingFloatingFilter=void 0,M.clearElement(this.eFloatingFilter);let i=this.parentFilterInstance.getSelectedColumn();if(i&&!i.isVisible()){let e=this.filterManager.getFloatingFilterCompDetails(i,this.params.showParentFilter);if(e)return this.compDetails=e,this.haveAddedColumnListeners||(this.haveAddedColumnListeners=!0,this.addManagedListener(i,Ii.EVENT_VISIBLE_CHANGED,this.onColumnVisibleChanged.bind(this)),this.addManagedListener(i,Ii.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))),e.newAgStackInstance().then(t=>{var n,r;this.underlyingFloatingFilter=t,(r=this.underlyingFloatingFilter)==null||r.onParentModelChanged((n=this.parentFilterInstance.getSelectedFilter())==null?void 0:n.getModel()),this.appendChild(t.getGui()),this.showingUnderlyingFloatingFilter=!0})}return this.setupReadOnlyFloatingFilterElement(),vt.resolve()}onColumnVisibleChanged(){this.setupUnderlyingFloatingFilterElement()}onColDefChanged(i){var e,t,n;if(!i.column)return;let r=this.filterManager.getFloatingFilterCompDetails(i.column,this.params.showParentFilter);r&&((e=this.underlyingFloatingFilter)!=null&&e.refresh?this.underlyingFloatingFilter.refresh(r.params):(n=(t=this.underlyingFloatingFilter)==null?void 0:t.onParamsUpdated)==null||n.call(t,r.params))}onParentModelChanged(i,e){var t,n;this.showingUnderlyingFloatingFilter?(n=this.underlyingFloatingFilter)==null||n.onParentModelChanged((t=this.parentFilterInstance.getSelectedFilter())==null?void 0:t.getModel(),e):this.updateDisplayedValue()}updateDisplayedValue(){if(!this.parentFilterInstance||!this.eFloatingFilterText)return;let i=this.parentFilterInstance.getSelectedFilter();if(!i){this.eFloatingFilterText.setValue(""),this.eFloatingFilterText.setDisplayed(!1);return}if(this.eFloatingFilterText.setDisplayed(!0),i.getModelAsString){let e=i.getModel();this.eFloatingFilterText.setValue(e==null?"":i.getModelAsString(e))}else this.eFloatingFilterText.setValue("")}onSelectedColumnChanged(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()}onColumnRowGroupChanged(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()}destroy(){super.destroy()}};Mt([k("columnModel")],Uy.prototype,"columnModel",2);Mt([k("filterManager")],Uy.prototype,"filterManager",2);Mt([ce("eFloatingFilter")],Uy.prototype,"eFloatingFilter",2);var s1={version:s$,moduleName:qe.RowGroupingModule,beans:[Xh,fg,pc,pg,Zh,ay],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:r1}],userComponents:[{componentName:"agGroupColumnFilter",componentClass:a_},{componentName:"agGroupColumnFloatingFilter",componentClass:Uy}],dependantModules:[Tn]},ly=class extends Gy{constructor(i){super(i,"aggregation")}passBeansUp(){let i=this.localeService.getLocaleTextFunc(),e=i("valueColumnsEmptyMessage","Drag here to aggregate"),t=i("values","Values");super.init({icon:M.createIconNoSpan("valuePanel",this.gos,null),emptyMessage:e,title:t}),this.addManagedListener(this.eventService,X.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")}getTooltipParams(){let i=super.getTooltipParams();return i.location="valueColumnsList",i}getIconName(){return this.isPotentialDndItems()?hi.ICON_AGGREGATE:hi.ICON_NOT_ALLOWED}isItemDroppable(i,e){return this.gos.get("functionsReadOnly")||!i.isPrimary()?!1:i.isAllowValue()&&(!i.isValueActive()||this.isSourceEventFromTarget(e))}updateItems(i){if(this.gos.get("functionsPassive")){let e={type:X.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:i};this.eventService.dispatchEvent(e)}else this.columnModel.setValueColumns(i,"toolPanelUi")}getExistingItems(){return this.columnModel.getValueColumns()}};Mt([J],ly.prototype,"passBeansUp",1);var sR=Object.defineProperty,o$=Object.defineProperties,a$=Object.getOwnPropertyDescriptor,l$=Object.getOwnPropertyDescriptors,EF=Object.getOwnPropertySymbols,c$=Object.prototype.hasOwnProperty,u$=Object.prototype.propertyIsEnumerable,TF=(i,e,t)=>e in i?sR(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,d$=(i,e)=>{for(var t in e||(e={}))c$.call(e,t)&&TF(i,t,e[t]);if(EF)for(var t of EF(e))u$.call(e,t)&&TF(i,t,e[t]);return i},h$=(i,e)=>o$(i,l$(e)),dn=(i,e,t,n)=>{for(var r=n>1?void 0:n?a$(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&sR(e,t,r),r},Hy=class extends ae{constructor(){super('<div class="ag-tool-panel-horizontal-resize"></div>'),this.minWidth=100,this.maxWidth=null}setElementToResize(i){this.elementToResize=i}postConstruct(){let i=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(i),this.setInverted(this.gos.get("enableRtl"))}dispatchResizeEvent(i,e,t){let n={type:X.EVENT_TOOL_PANEL_SIZE_CHANGED,width:t,started:i,ended:e};this.eventService.dispatchEvent(n)}onResizeStart(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)}onResizeEnd(i){return this.onResizing(i,!0)}onResizing(i,e=!1){let t=this.inverted?-1:1,n=Math.max(this.minWidth,Math.floor(this.startingWidth-i*t));this.maxWidth!=null&&(n=Math.min(this.maxWidth,n)),this.elementToResize.style.width=`${n}px`,this.dispatchResizeEvent(!1,e,n)}setInverted(i){this.inverted=i}setMaxWidth(i){this.maxWidth=i}setMinWidth(i){i!=null?this.minWidth=i:this.minWidth=100}};dn([k("horizontalResizeService")],Hy.prototype,"horizontalResizeService",2);dn([J],Hy.prototype,"postConstruct",1);var Ag=(()=>{let i=class oR extends ae{constructor(t){super(),this.toolPanelDef=t}getToolPanelId(){return this.toolPanelDef.id}postConstruct(){let t=this.createTemplate();this.setTemplate(t),this.setLabel(),this.setIcon(),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this)),this.eToggleButton.setAttribute("id",`ag-${this.getCompId()}-button`)}createTemplate(){return`<div class="ag-side-button" role="presentation">
                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" aria-expanded="false" class="ag-button ag-side-button-button">
                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>
                    <span ref ="eLabel" class="ag-side-button-label"></span>
                </button>
            </div>`}setLabel(){let t=this.localeService.getLocaleTextFunc(),n=this.toolPanelDef,r=t(n.labelKey,n.labelDefault);this.eLabel.innerText=r}setIcon(){this.eIconWrapper.insertAdjacentElement("afterbegin",M.createIconNoSpan(this.toolPanelDef.iconKey,this.gos))}onButtonPressed(){this.dispatchEvent({type:oR.EVENT_TOGGLE_BUTTON_CLICKED})}setSelected(t){this.addOrRemoveCssClass("ag-selected",t),M.setAriaExpanded(this.eToggleButton,t)}getButtonElement(){return this.eToggleButton}};return i.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked",i})();dn([ce("eToggleButton")],Ag.prototype,"eToggleButton",2);dn([ce("eIconWrapper")],Ag.prototype,"eIconWrapper",2);dn([ce("eLabel")],Ag.prototype,"eLabel",2);dn([J],Ag.prototype,"postConstruct",1);var MF=Ag,Pg=(()=>{let i=class l_ extends ae{constructor(){super(l_.TEMPLATE),this.buttonComps=[]}postConstruct(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))}handleKeyDown(t){if(t.key!==Xe.TAB||!t.shiftKey)return;let n=M.last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(n,!0)&&t.preventDefault()}setActiveButton(t){this.buttonComps.forEach(n=>{n.setSelected(t===n.getToolPanelId())})}addButtonComp(t){let n=this.createBean(new MF(t));return this.buttonComps.push(n),this.appendChild(n),n.addEventListener(MF.EVENT_TOGGLE_BUTTON_CLICKED,()=>{this.dispatchEvent({type:l_.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:t.id})}),n}clearButtons(){this.buttonComps=this.destroyBeans(this.buttonComps),M.clearElement(this.getGui())}};return i.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked",i.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>',i})();dn([k("focusService")],Pg.prototype,"focusService",2);dn([k("columnModel")],Pg.prototype,"columnModel",2);dn([J],Pg.prototype,"postConstruct",1);dn([_i],Pg.prototype,"clearButtons",1);var aR=Pg,jh=class tl{static parse(e){if(!e)return;if(e===!0)return{toolPanels:[tl.DEFAULT_COLUMN_COMP,tl.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if(typeof e=="string")return tl.parse([e]);if(Array.isArray(e)){let n=[];return e.forEach(r=>{let s=tl.DEFAULT_BY_KEY[r];if(!s){console.warn(`AG Grid: the key ${r} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(tl.DEFAULT_BY_KEY).join(",")}`);return}n.push(s)}),n.length===0?void 0:{toolPanels:n,defaultToolPanel:n[0].id}}return{toolPanels:tl.parseComponents(e.toolPanels),defaultToolPanel:e.defaultToolPanel,hiddenByDefault:e.hiddenByDefault,position:e.position}}static parseComponents(e){let t=[];return e&&e.forEach(n=>{let r=null;if(typeof n=="string"){let s=tl.DEFAULT_BY_KEY[n];if(!s){console.warn(`AG Grid: the key ${n} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(tl.DEFAULT_BY_KEY).join(",")}`);return}r=s}else r=n;t.push(r)}),t}};jh.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"};jh.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"};jh.DEFAULT_BY_KEY={columns:jh.DEFAULT_COLUMN_COMP,filters:jh.DEFAULT_FILTER_COMP};var AF=jh,o1=(()=>{let i=class lR extends ae{constructor(){super(lR.TEMPLATE)}setupResize(){let t=this.getGui(),n=this.resizeBar=this.createManagedBean(new Hy);t.setAttribute("id",`ag-${this.getCompId()}`),n.setElementToResize(t),this.appendChild(n)}getToolPanelId(){return this.toolPanelId}setToolPanelDef(t,n){let{id:r,minWidth:s,maxWidth:o,width:a}=t;this.toolPanelId=r,this.width=a;let l=this.userComponentFactory.getToolPanelCompDetails(t,n),c=l.newAgStackInstance();if(this.params=l.params,c==null){console.warn(`AG Grid: error processing tool panel component ${r}. You need to specify 'toolPanel'`);return}c.then(this.setToolPanelComponent.bind(this)),s!=null&&this.resizeBar.setMinWidth(s),o!=null&&this.resizeBar.setMaxWidth(o)}setToolPanelComponent(t){this.toolPanelCompInstance=t,this.appendChild(t.getGui()),this.addDestroyFunc(()=>{this.destroyBean(t)}),this.width&&(this.getGui().style.width=`${this.width}px`)}getToolPanelInstance(){return this.toolPanelCompInstance}setResizerSizerSide(t){let n=this.gos.get("enableRtl"),r=t==="left",s=n?r:!r;this.resizeBar.setInverted(s)}refresh(){this.toolPanelCompInstance.refresh(this.params)}};return i.TEMPLATE='<div class="ag-tool-panel-wrapper" role="tabpanel"/>',i})();dn([k("userComponentFactory")],o1.prototype,"userComponentFactory",2);dn([J],o1.prototype,"setupResize",1);var p$=o1,lp=(()=>{let i=class cR extends ae{constructor(){super(cR.TEMPLATE),this.toolPanelWrappers=[]}postConstruct(){var t;this.sideBarButtonsComp.addEventListener(aR.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this));let{sideBar:n}=(t=this.gos.get("initialState"))!=null?t:{};this.setSideBarDef({sideBarDef:AF.parse(this.gos.get("sideBar")),sideBarState:n}),this.addManagedPropertyListener("sideBar",this.onSideBarUpdated.bind(this)),this.sideBarService.registerSideBarComp(this),this.createManagedBean(new Df(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))}onTabKeyDown(t){if(t.defaultPrevented)return;let{focusService:n,sideBarButtonsComp:r}=this,s=this.getGui(),o=r.getGui(),a=this.gos.getActiveDomElement(),l=s.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),c=t.target;if(!l)return;if(o.contains(a)){n.focusInto(l,t.shiftKey)&&t.preventDefault();return}if(!t.shiftKey)return;let u=null;l.contains(a)?u=this.focusService.findNextFocusableElement(l,void 0,!0):n.isTargetUnderManagedComponent(l,c)&&t.shiftKey&&(u=this.focusService.findFocusableElementBeforeTabGuard(l,c)),u||(u=o.querySelector(".ag-selected button")),u&&u!==t.target&&(t.preventDefault(),u.focus())}handleKeyDown(t){let n=this.gos.getActiveDomElement();if(!this.sideBarButtonsComp.getGui().contains(n))return;let r=this.sideBarButtonsComp.getGui(),s=Array.prototype.slice.call(r.querySelectorAll(".ag-side-button")),o=s.findIndex(c=>c.contains(n)),a=null;switch(t.key){case Xe.LEFT:case Xe.UP:a=Math.max(0,o-1);break;case Xe.RIGHT:case Xe.DOWN:a=Math.min(o+1,s.length-1);break}if(a===null)return;let l=s[a].querySelector("button");l&&(l.focus(),t.preventDefault())}onToolPanelButtonClicked(t){let n=t.toolPanelId;this.openedItem()===n?this.openToolPanel(void 0,"sideBarButtonClicked"):this.openToolPanel(n,"sideBarButtonClicked")}clearDownUi(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()}setSideBarDef({sideBarDef:t,sideBarState:n,existingToolPanelWrappers:r}){if(this.setDisplayed(!1),this.sideBar=t,this.sideBar&&this.sideBar.toolPanels){let s=this.sideBar.toolPanels;if(this.createToolPanelsAndSideButtons(s,n,r),!this.toolPanelWrappers.length)return;let o=n?n.visible:!this.sideBar.hiddenByDefault;if(this.setDisplayed(o),this.setSideBarPosition(n?n.position:this.sideBar.position),o)if(n){let{openToolPanel:a}=n;a&&this.openToolPanel(a,"sideBarInitializing")}else this.openToolPanel(this.sideBar.defaultToolPanel,"sideBarInitializing")}}getDef(){return this.sideBar}setSideBarPosition(t){t||(t="right"),this.position=t;let n=t==="left",r=n?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",n),this.addOrRemoveCssClass("ag-side-bar-right",!n),this.toolPanelWrappers.forEach(s=>{s.setResizerSizerSide(r)}),this.eventService.dispatchEvent({type:X.EVENT_SIDE_BAR_UPDATED}),this}setDisplayed(t,n){super.setDisplayed(t,n),this.eventService.dispatchEvent({type:X.EVENT_SIDE_BAR_UPDATED})}getState(){let t={};return this.toolPanelWrappers.forEach(n=>{var r,s;t[n.getToolPanelId()]=(s=(r=n.getToolPanelInstance())==null?void 0:r.getState)==null?void 0:s.call(r)}),{visible:this.isDisplayed(),position:this.position,openToolPanel:this.openedItem(),toolPanels:t}}createToolPanelsAndSideButtons(t,n,r){var s;for(let o of t)this.createToolPanelAndSideButton(o,(s=n?.toolPanels)==null?void 0:s[o.id],r?.[o.id])}validateDef(t){if(t.id==null)return console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id"),!1;if(t.toolPanel==="agColumnsToolPanel"&&!jt.__assertRegistered(qe.ColumnsToolPanelModule,"Column Tool Panel",this.context.getGridId()))return!1;if(t.toolPanel==="agFiltersToolPanel"){if(!jt.__assertRegistered(qe.FiltersToolPanelModule,"Filters Tool Panel",this.context.getGridId()))return!1;if(this.filterManager.isAdvancedFilterEnabled())return M.warnOnce("Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled."),!1}return!0}createToolPanelAndSideButton(t,n,r){if(!this.validateDef(t))return;let s=this.sideBarButtonsComp.addButtonComp(t),o;r?o=r:(o=this.getContext().createBean(new p$),o.setToolPanelDef(t,{initialState:n,onStateUpdated:()=>this.eventService.dispatchEvent({type:X.EVENT_SIDE_BAR_UPDATED})})),o.setDisplayed(!1);let a=o.getGui();this.appendChild(a),this.toolPanelWrappers.push(o),M.setAriaControls(s.getButtonElement(),a)}refresh(){this.toolPanelWrappers.forEach(t=>t.refresh())}openToolPanel(t,n="api"){let r=this.openedItem();if(r===t)return;this.toolPanelWrappers.forEach(a=>{let l=t===a.getToolPanelId();a.setDisplayed(l)});let s=this.openedItem();r!==s&&(this.sideBarButtonsComp.setActiveButton(t),this.raiseToolPanelVisibleEvent(t,r??void 0,n))}getToolPanelInstance(t){let n=this.toolPanelWrappers.filter(r=>r.getToolPanelId()===t)[0];if(!n){console.warn(`AG Grid: unable to lookup Tool Panel as invalid key supplied: ${t}`);return}return n.getToolPanelInstance()}raiseToolPanelVisibleEvent(t,n,r){let s=!!t&&!!n;if(n){let o={type:X.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:r,key:n,visible:!1,switchingToolPanel:s};this.eventService.dispatchEvent(o)}if(t){let o={type:X.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:r,key:t,visible:!0,switchingToolPanel:s};this.eventService.dispatchEvent(o)}}close(t="api"){this.openToolPanel(void 0,t)}isToolPanelShowing(){return!!this.openedItem()}openedItem(){let t=null;return this.toolPanelWrappers.forEach(n=>{n.isDisplayed()&&(t=n.getToolPanelId())}),t}onSideBarUpdated(){var t;let n=AF.parse(this.gos.get("sideBar")),r={};n&&this.sideBar&&((t=n.toolPanels)==null||t.forEach(s=>{var o,a;let{id:l}=s;if(!l)return;let c=(o=this.sideBar.toolPanels)==null?void 0:o.find(p=>p.id===l);if(!c||s.toolPanel!==c.toolPanel)return;let u=this.toolPanelWrappers.find(p=>p.getToolPanelId()===l);if(!u)return;let d=this.gos.addGridCommonParams(h$(d$({},(a=s.toolPanelParams)!=null?a:{}),{onStateUpdated:()=>this.eventService.dispatchEvent({type:X.EVENT_SIDE_BAR_UPDATED})}));u.getToolPanelInstance().refresh(d)===!0&&(this.toolPanelWrappers=this.toolPanelWrappers.filter(p=>p!==u),M.removeFromParent(u.getGui()),r[l]=u)})),this.clearDownUi(),this.setSideBarDef({sideBarDef:n,existingToolPanelWrappers:r})}destroyToolPanelWrappers(){this.toolPanelWrappers.forEach(t=>{M.removeFromParent(t.getGui()),this.destroyBean(t)}),this.toolPanelWrappers.length=0}destroy(){this.destroyToolPanelWrappers(),super.destroy()}};return i.TEMPLATE=`<div class="ag-side-bar ag-unselectable">
            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>
        </div>`,i})();dn([k("focusService")],lp.prototype,"focusService",2);dn([k("filterManager")],lp.prototype,"filterManager",2);dn([k("sideBarService")],lp.prototype,"sideBarService",2);dn([ce("sideBarButtons")],lp.prototype,"sideBarButtonsComp",2);dn([J],lp.prototype,"postConstruct",1);var m$=lp,vg=class extends be{constructor(){super(...arguments),this.isColGroupDef=i=>i&&typeof i.children<"u",this.getId=i=>this.isColGroupDef(i)?i.groupId:i.colId}createColumnTree(i){let e=[],t=(r,s)=>{if(this.isColGroupDef(r)){let o=r,a=typeof o.groupId<"u"?o.groupId:o.headerName,l=new gn(o,a,!1,s),c=[];return o.children.forEach(u=>{let d=t(u,s+1);d&&c.push(d)}),l.setChildren(c),l}else{let o=r,a=o.colId?o.colId:o.field,l=this.columnModel.getPrimaryColumn(a);return l||e.push(o),l}},n=[];return i.forEach(r=>{let s=t(r,0);s&&n.push(s)}),e.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",e),n}syncLayoutWithGrid(i){let e=this.getLeafPathTrees(),t=this.mergeLeafPathTrees(e);i(t)}getLeafPathTrees(){let i=(n,r)=>{let s;if(n instanceof gn)if(n.isPadding())s=r;else{let a=Object.assign({},n.getColGroupDef());a.groupId=n.getGroupId(),a.children=[r],s=a}else{let a=Object.assign({},n.getColDef());a.colId=n.getColId(),s=a}let o=n.getOriginalParent();return o?i(o,s):s};return this.columnModel.getAllGridColumns().filter(n=>{let r=n.getColDef();return n.isPrimary()&&!r.showRowGroup}).map(n=>i(n,n.getColDef()))}mergeLeafPathTrees(i){let e=(r,s)=>this.isColGroupDef(r)&&this.isColGroupDef(s)&&this.getId(r)===this.getId(s),t=(r,s)=>{if(!this.isColGroupDef(s))return r;let o=r,a=s;return a.children&&a.groupId&&this.addChildrenToGroup(o,a.groupId,a.children[0])||a.children.forEach(l=>t(o,l)),o},n=[];for(let r=1;r<=i.length;r++){let s=i[r-1],o=i[r];e(s,o)?i[r]=t(s,o):n.push(s)}return n}addChildrenToGroup(i,e,t){let n=(o,a)=>{let l=o.children.map(this.getId),c=M.includes(l,this.getId(a)),u=M.last(o.children),d=u&&this.getId(u)!==this.getId(a);return c&&d};if(!this.isColGroupDef(i))return!0;let r=i,s=t;if(n(r,s))return r.children.push(s),!0;if(r.groupId===e){let o=r.children.map(this.getId);if(!M.includes(o,this.getId(s)))return r.children.push(s),!0}return r.children.forEach(o=>this.addChildrenToGroup(o,e,t)),!1}};dn([k("columnModel")],vg.prototype,"columnModel",2);vg=dn([De("toolPanelColDefService")],vg);var g$="31.3.4",c_=class extends be{registerSideBarComp(i){this.sideBarComp=i}getSideBarComp(){return this.sideBarComp}};c_=dn([De("sideBarService")],c_);var zy={version:g$,moduleName:qe.SideBarModule,beans:[vg,c_],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:Hy},{componentName:"AgSideBar",componentClass:m$},{componentName:"AgSideBarButtons",componentClass:aR}],dependantModules:[Tn]},uR=Object.defineProperty,f$=Object.getOwnPropertyDescriptor,PF=Object.getOwnPropertySymbols,v$=Object.prototype.hasOwnProperty,y$=Object.prototype.propertyIsEnumerable,DF=(i,e,t)=>e in i?uR(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,kF=(i,e)=>{for(var t in e||(e={}))v$.call(e,t)&&DF(i,t,e[t]);if(PF)for(var t of PF(e))y$.call(e,t)&&DF(i,t,e[t]);return i},At=(i,e,t,n)=>{for(var r=n>1?void 0:n?f$(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&uR(e,t,r),r},cp=(()=>{let i=class ny extends ae{constructor(){super(ny.TEMPLATE)}postConstruct(){this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",n=>{n.key===Xe.SPACE&&(n.preventDefault(),this.onExpandClicked())}),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.addManagedPropertyListener("functionsReadOnly",()=>this.onFunctionsReadOnlyPropChanged()),this.eFilterTextField.setAutoComplete(!1).onValueChange(()=>this.onFilterTextChanged()),this.addManagedListener(this.eFilterTextField.getInputElement(),"keydown",this.onMiniFilterKeyDown.bind(this)),this.addManagedListener(this.eventService,X.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));let t=this.localeService.getLocaleTextFunc();this.eSelect.setInputAriaLabel(t("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(t("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])}onFunctionsReadOnlyPropChanged(){let t=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(t),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",t)}init(t){this.params=t;let n=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(n),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",n),this.columnModel.isReady()&&this.showOrHideOptions()}createExpandIcons(){this.eExpand.appendChild(this.eExpandChecked=M.createIconNoSpan("columnSelectOpen",this.gos)),this.eExpand.appendChild(this.eExpandUnchecked=M.createIconNoSpan("columnSelectClosed",this.gos)),this.eExpand.appendChild(this.eExpandIndeterminate=M.createIconNoSpan("columnSelectIndeterminate",this.gos)),this.setExpandState(0)}showOrHideOptions(){let t=!this.params.suppressColumnFilter,n=!this.params.suppressColumnSelectAll,r=!this.params.suppressColumnExpandAll,s=this.columnModel.isPrimaryColumnGroupsPresent(),o=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(o("searchOoo","Search...")),M.setDisplayed(this.eFilterTextField.getGui(),t),M.setDisplayed(this.eSelect.getGui(),n),M.setDisplayed(this.eExpand,r&&s)}onFilterTextChanged(){this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=M.debounce(()=>{let t=this.eFilterTextField.getValue();this.dispatchEvent({type:"filterChanged",filterText:t})},ny.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()}onMiniFilterKeyDown(t){t.key===Xe.ENTER&&setTimeout(()=>this.onSelectClicked(),ny.DEBOUNCE_DELAY)}onSelectClicked(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})}onExpandClicked(){this.dispatchEvent({type:this.expandState===0?"collapseAll":"expandAll"})}setExpandState(t){this.expandState=t,M.setDisplayed(this.eExpandChecked,this.expandState===0),M.setDisplayed(this.eExpandUnchecked,this.expandState===1),M.setDisplayed(this.eExpandIndeterminate,this.expandState===2)}setSelectionState(t){this.selectState=t,this.eSelect.setValue(this.selectState)}};return i.DEBOUNCE_DELAY=300,i.TEMPLATE=`<div class="ag-column-select-header" role="presentation">
            <div ref="eExpand" class="ag-column-select-header-icon"></div>
            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>
            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>
        </div>`,i})();At([k("columnModel")],cp.prototype,"columnModel",2);At([ce("eExpand")],cp.prototype,"eExpand",2);At([ce("eSelect")],cp.prototype,"eSelect",2);At([ce("eFilterTextField")],cp.prototype,"eFilterTextField",2);At([J],cp.prototype,"postConstruct",1);var C$=cp,b$=(()=>{let i=class dR{constructor(t,n,r,s=!1,o){this.eventService=new hd,this.displayName=t,this.dept=r,this.group=s,s?(this.columnGroup=n,this.expanded=o,this.children=[]):this.column=n}isGroup(){return this.group}getDisplayName(){return this.displayName}getColumnGroup(){return this.columnGroup}getColumn(){return this.column}getDept(){return this.dept}isExpanded(){return!!this.expanded}getChildren(){return this.children}isPassesFilter(){return this.passesFilter}setExpanded(t){t!==this.expanded&&(this.expanded=t,this.eventService.dispatchEvent({type:dR.EVENT_EXPANDED_CHANGED}))}setPassesFilter(t){this.passesFilter=t}addEventListener(t,n){this.eventService.addEventListener(t,n)}removeEventListener(t,n){this.eventService.removeEventListener(t,n)}};return i.EVENT_EXPANDED_CHANGED="expandedChanged",i})(),tg=b$,up=class extends ae{constructor(i,e,t){super('<div class="ag-menu"></div>'),this.column=i,this.mouseEvent=e,this.parentEl=t,this.displayName=null}postConstruct(){if(this.initializeProperties(this.column),this.buildMenuItemMap(),this.column instanceof Ii?this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel"):this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()){this.mouseEvent.preventDefault();let i=this.getMappedMenuItems();if(i.length===0)return;this.displayContextMenu(i)}}initializeProperties(i){i instanceof gn?this.columns=i.getLeafColumns():this.columns=[i],this.allowGrouping=this.columns.some(e=>e.isPrimary()&&e.isAllowRowGroup()),this.allowValues=this.columns.some(e=>e.isPrimary()&&e.isAllowValue()),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some(e=>e.isPrimary()&&e.isAllowPivot())}buildMenuItemMap(){let i=this.localeService.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:e=>e.isPrimary()&&e.isAllowRowGroup()&&!this.columnModel.isColumnGroupingLocked(e),activeFunction:e=>e.isRowGroupActive(),activateLabel:()=>`${i("groupBy","Group by")} ${this.displayName}`,deactivateLabel:()=>`${i("ungroupBy","Un-Group by")} ${this.displayName}`,activateFunction:()=>{let e=this.columnModel.getRowGroupColumns();this.columnModel.setRowGroupColumns(this.addColumnsToList(e),"toolPanelUi")},deActivateFunction:()=>{let e=this.columnModel.getRowGroupColumns();this.columnModel.setRowGroupColumns(this.removeColumnsFromList(e),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:e=>e.isPrimary()&&e.isAllowValue(),activeFunction:e=>e.isValueActive(),activateLabel:()=>i("addToValues",`Add ${this.displayName} to values`,[this.displayName]),deactivateLabel:()=>i("removeFromValues",`Remove ${this.displayName} from values`,[this.displayName]),activateFunction:()=>{let e=this.columnModel.getValueColumns();this.columnModel.setValueColumns(this.addColumnsToList(e),"toolPanelUi")},deActivateFunction:()=>{let e=this.columnModel.getValueColumns();this.columnModel.setValueColumns(this.removeColumnsFromList(e),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:e=>this.columnModel.isPivotMode()&&e.isPrimary()&&e.isAllowPivot(),activeFunction:e=>e.isPivotActive(),activateLabel:()=>i("addToLabels",`Add ${this.displayName} to labels`,[this.displayName]),deactivateLabel:()=>i("removeFromLabels",`Remove ${this.displayName} from labels`,[this.displayName]),activateFunction:()=>{let e=this.columnModel.getPivotColumns();this.columnModel.setPivotColumns(this.addColumnsToList(e),"toolPanelUi")},deActivateFunction:()=>{let e=this.columnModel.getPivotColumns();this.columnModel.setPivotColumns(this.removeColumnsFromList(e),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})}addColumnsToList(i){return[...i].concat(this.columns.filter(e=>i.indexOf(e)===-1))}removeColumnsFromList(i){return i.filter(e=>this.columns.indexOf(e)===-1)}displayContextMenu(i){let e=this.getGui(),t=this.createBean(new Lo),n=this.localeService.getLocaleTextFunc(),r=()=>{};e.appendChild(t.getGui()),t.addMenuItems(i),t.addManagedListener(t,ur.EVENT_CLOSE_MENU,()=>{this.parentEl.focus(),r()});let s=this.popupService.addPopup({modal:!0,eChild:e,closeOnEsc:!0,afterGuiAttached:()=>this.focusService.focusInto(t.getGui()),ariaLabel:n("ariaLabelContextMenu","Context Menu"),closedCallback:o=>{o instanceof KeyboardEvent&&this.parentEl.focus(),this.destroyBean(t)}});s&&(r=s.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:e})}isActive(){return this.allowGrouping||this.allowValues||this.allowPivoting}getMappedMenuItems(){let i=[];for(let e of this.menuItemMap.values()){let t=this.columns.some(r=>e.allowedFunction(r)&&!e.activeFunction(r)),n=this.columns.some(r=>e.allowedFunction(r)&&e.activeFunction(r));t&&i.push({name:e.activateLabel(this.displayName),icon:M.createIconNoSpan(e.addIcon,this.gos,null),action:()=>e.activateFunction()}),n&&i.push({name:e.deactivateLabel(this.displayName),icon:M.createIconNoSpan(e.removeIcon,this.gos,null),action:()=>e.deActivateFunction()})}return i}};At([k("columnModel")],up.prototype,"columnModel",2);At([k("popupService")],up.prototype,"popupService",2);At([k("focusService")],up.prototype,"focusService",2);At([J],up.prototype,"postConstruct",1);var ga=(()=>{let i=class hR extends ae{constructor(t,n,r,s){super(),this.modelItem=t,this.allowDragging=n,this.eventType=r,this.focusWrapper=s,this.processingColumnStateChange=!1,this.modelItem=t,this.columnGroup=t.getColumnGroup(),this.columnDept=t.getDept(),this.displayName=t.getDisplayName(),this.allowDragging=n}init(){this.setTemplate(hR.TEMPLATE),this.eDragHandle=M.createIconNoSpan("columnDrag",this.gos),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");let t=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();t.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,X.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,X.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,tg.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),_l.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gos,null,this.columnGroup).forEach(s=>this.addOrRemoveCssClass(s,!0))}getColumns(){return this.columnGroup.getLeafColumns()}setupTooltip(){let t=this.columnGroup.getColGroupDef();if(!t)return;let n=this.gos.get("tooltipShowMode")==="whenTruncated",r;n&&(r=()=>this.eLabel.scrollWidth>this.eLabel.clientWidth);let s=()=>{let o=t.headerTooltip;this.setTooltip({newTooltipText:o,location:"columnToolPanelColumnGroup",shouldDisplayTooltip:r})};s(),this.addManagedListener(this.eventService,X.EVENT_NEW_COLUMNS_LOADED,s)}getTooltipParams(){let t=super.getTooltipParams();return t.location="columnToolPanelColumnGroup",t}handleKeyDown(t){switch(t.key){case Xe.LEFT:t.preventDefault(),this.modelItem.setExpanded(!1);break;case Xe.RIGHT:t.preventDefault(),this.modelItem.setExpanded(!0);break;case Xe.SPACE:t.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected());break}}onContextMenu(t){let{columnGroup:n,gos:r}=this;if(r.get("functionsReadOnly"))return;let s=this.createBean(new up(n,t,this.focusWrapper));this.addDestroyFunc(()=>{s.isAlive()&&this.destroyBean(s)})}addVisibilityListenersToAllChildren(){this.columnGroup.getLeafColumns().forEach(t=>{this.addManagedListener(t,Ii.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(t,Ii.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(t,Ii.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(t,Ii.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this))})}setupDragging(){if(!this.allowDragging){M.setDisplayed(this.eDragHandle,!1);return}let t=!this.gos.get("suppressDragLeaveHidesColumns"),n={type:Gi.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>t?hi.ICON_HIDE:hi.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(),onDragStarted:()=>{t=!this.gos.get("suppressDragLeaveHidesColumns");let r={type:X.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:this.columnGroup};this.eventService.dispatchEvent(r)},onDragStopped:()=>{let r={type:X.EVENT_COLUMN_PANEL_ITEM_DRAG_END};this.eventService.dispatchEvent(r)},onGridEnter:r=>{t&&this.modelItemUtils.updateColumns({columns:this.columnGroup.getLeafColumns(),visibleState:r?.visibleState,pivotState:r?.pivotState,eventType:this.eventType})},onGridExit:()=>{t&&this.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(n))}createDragItem(){let t=this.columnGroup.getLeafColumns(),n={},r={};return t.forEach(s=>{let o=s.getId();n[o]=s.isVisible(),r[o]=this.modelItemUtils.createPivotState(s)}),{columns:t,visibleState:n,pivotState:r}}setupExpandContract(){this.eGroupClosedIcon.appendChild(M.createIcon("columnSelectClosed",this.gos,null)),this.eGroupOpenedIcon.appendChild(M.createIcon("columnSelectOpen",this.gos,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));let t=new Fp(this.eColumnGroupIcons,!0);this.addManagedListener(t,Fp.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(t.destroy.bind(t))}onLabelClicked(){let t=!this.cbSelect.getValue();this.onChangeCommon(t)}onCheckboxChanged(t){this.onChangeCommon(t.selected)}getVisibleLeafColumns(){let t=[],n=r=>{r.forEach(s=>{s.isPassesFilter()&&(s.isGroup()?n(s.getChildren()):t.push(s.getColumn()))})};return n(this.modelItem.getChildren()),t}onChangeCommon(t){this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),t,this.eventType)}refreshAriaLabel(){let t=this.localeService.getLocaleTextFunc(),n=t("ariaColumnGroup","Column Group"),r=this.cbSelect.getValue(),s=r===void 0?t("ariaIndeterminate","indeterminate"):r?t("ariaVisible","visible"):t("ariaHidden","hidden"),o=t("ariaToggleVisibility","Press SPACE to toggle visibility");M.setAriaLabel(this.focusWrapper,`${this.displayName} ${n}`),this.cbSelect.setInputAriaLabel(`${o} (${s})`),M.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)}onColumnStateChanged(){let t=this.workOutSelectedValue(),n=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(t),this.cbSelect.setReadOnly(n),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",n),this.processingColumnStateChange=!1}workOutSelectedValue(){let t=this.columnModel.isPivotMode(),n=this.getVisibleLeafColumns(),r=0,s=0;if(n.forEach(o=>{!t&&o.getColDef().lockVisible||(this.isColumnChecked(o,t)?r++:s++)}),!(r>0&&s>0))return r>0}workOutReadOnlyValue(){let t=this.columnModel.isPivotMode(),n=0;return this.columnGroup.getLeafColumns().forEach(r=>{t?r.isAnyFunctionAllowed()&&n++:r.getColDef().lockVisible||n++}),n===0}isColumnChecked(t,n){if(n){let r=t.isPivotActive(),s=t.isRowGroupActive(),o=t.isValueActive();return r||s||o}return t.isVisible()}onExpandOrContractClicked(){let t=this.modelItem.isExpanded();this.modelItem.setExpanded(!t)}onExpandChanged(){this.setOpenClosedIcons(),this.refreshAriaExpanded()}setOpenClosedIcons(){let t=this.modelItem.isExpanded();M.setDisplayed(this.eGroupClosedIcon,!t),M.setDisplayed(this.eGroupOpenedIcon,t)}refreshAriaExpanded(){M.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())}getDisplayName(){return this.displayName}onSelectAllChanged(t){let n=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(t&&!n||!t&&n)&&this.cbSelect.toggle()}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}setSelected(t){this.cbSelect.setValue(t,!0)}};return i.TEMPLATE=`<div class="ag-column-select-column-group" aria-hidden="true">
            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >
                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>
                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>
            </span>
            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>
            <span class="ag-column-select-column-label" ref="eLabel"></span>
        </div>`,i})();At([k("columnModel")],ga.prototype,"columnModel",2);At([k("dragAndDropService")],ga.prototype,"dragAndDropService",2);At([k("modelItemUtils")],ga.prototype,"modelItemUtils",2);At([ce("cbSelect")],ga.prototype,"cbSelect",2);At([ce("eLabel")],ga.prototype,"eLabel",2);At([ce("eGroupOpenedIcon")],ga.prototype,"eGroupOpenedIcon",2);At([ce("eGroupClosedIcon")],ga.prototype,"eGroupClosedIcon",2);At([ce("eColumnGroupIcons")],ga.prototype,"eColumnGroupIcons",2);At([J],ga.prototype,"init",1);var pR=ga,a1=class extends be{constructor(i,e){super(),this.comp=i,this.virtualList=e}postConstruct(){this.createManagedBean(new fd(this.comp,this.virtualList,{dragSourceType:Gi.ToolPanel,listItemDragStartEvent:X.EVENT_COLUMN_PANEL_ITEM_DRAG_START,listItemDragEndEvent:X.EVENT_COLUMN_PANEL_ITEM_DRAG_END,eventSource:this.eventService,getCurrentDragValue:i=>this.getCurrentDragValue(i),isMoveBlocked:i=>this.isMoveBlocked(i),getNumRows:i=>i.getDisplayedColsList().length,moveItem:(i,e)=>this.moveItem(i,e)}))}getCurrentDragValue(i){return i.column}isMoveBlocked(i){return this.gos.get("suppressMovableColumns")?!0:!!this.getCurrentColumns(i).find(r=>{let s=r.getColDef();return!!s.suppressMovable||!!s.lockPosition})}moveItem(i,e){let t=this.getTargetIndex(i,e),n=this.getCurrentColumns(i);t!=null&&this.columnModel.moveColumns(n,t,"toolPanelUi")}getMoveDiff(i,e){let t=this.columnModel.getAllGridColumns(),n=this.getCurrentColumns(i),r=n[0],s=n.length;return t.indexOf(r)<e?s:0}getCurrentColumns(i){return i instanceof gn?i.getLeafColumns():[i]}getTargetIndex(i,e){if(!e)return null;let t=e.component,n=e.position==="top",r;if(t instanceof pR?(r=t.getColumns()[0],n=!0):r=t.getColumn(),this.getCurrentColumns(i).indexOf(r)!==-1)return null;let o=this.columnModel.getAllGridColumns().indexOf(r),a=n?o:o+1,l=this.getMoveDiff(i,a);return a-l}};At([k("columnModel")],a1.prototype,"columnModel",2);At([J],a1.prototype,"postConstruct",1);var Ku=(()=>{let i=class mR extends ae{constructor(t,n,r,s){super(),this.allowDragging=n,this.groupsExist=r,this.focusWrapper=s,this.processingColumnStateChange=!1,this.column=t.getColumn(),this.columnDept=t.getDept(),this.displayName=t.getDisplayName()}init(){this.setTemplate(mR.TEMPLATE),this.eDragHandle=M.createIconNoSpan("columnDrag",this.gos),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");let t=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();t.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1");let r=M.escapeString(this.displayName);this.eLabel.innerHTML=r;let s=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass(`ag-column-select-indent-${s}`),this.setupDragging(),this.addManagedListener(this.eventService,X.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Ii.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Ii.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Ii.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Ii.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,X.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),_l.getToolPanelClassesFromColDef(this.column.getColDef(),this.gos,this.column,null).forEach(a=>this.addOrRemoveCssClass(a,!0))}getColumn(){return this.column}setupTooltip(){let t=this.gos.get("tooltipShowMode")==="whenTruncated",n;t&&(n=()=>this.eLabel.scrollWidth>this.eLabel.clientWidth);let r=()=>{let s=this.column.getColDef().headerTooltip;this.setTooltip({newTooltipText:s,location:"columnToolPanelColumn",shouldDisplayTooltip:n})};r(),this.addManagedListener(this.eventService,X.EVENT_NEW_COLUMNS_LOADED,r)}getTooltipParams(){let t=super.getTooltipParams();return t.location="columnToolPanelColumn",t.colDef=this.column.getColDef(),t}onContextMenu(t){let{column:n,gos:r}=this;if(r.get("functionsReadOnly"))return;let s=this.createBean(new up(n,t,this.focusWrapper));this.addDestroyFunc(()=>{s.isAlive()&&this.destroyBean(s)})}handleKeyDown(t){t.key===Xe.SPACE&&(t.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))}onLabelClicked(){if(this.gos.get("functionsReadOnly"))return;let t=!this.cbSelect.getValue();this.onChangeCommon(t)}onCheckboxChanged(t){this.onChangeCommon(t.selected)}onChangeCommon(t){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.setColumn(this.column,t,"toolPanelUi"))}refreshAriaLabel(){let t=this.localeService.getLocaleTextFunc(),n=t("ariaColumn","Column"),r=this.cbSelect.getValue()?t("ariaVisible","visible"):t("ariaHidden","hidden"),s=t("ariaToggleVisibility","Press SPACE to toggle visibility");M.setAriaLabel(this.focusWrapper,`${this.displayName} ${n}`),this.cbSelect.setInputAriaLabel(`${s} (${r})`),M.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)}setupDragging(){if(!this.allowDragging){M.setDisplayed(this.eDragHandle,!1);return}let t=!this.gos.get("suppressDragLeaveHidesColumns"),n={type:Gi.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>t?hi.ICON_HIDE:hi.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(),onDragStarted:()=>{t=!this.gos.get("suppressDragLeaveHidesColumns");let r={type:X.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:this.column};this.eventService.dispatchEvent(r)},onDragStopped:()=>{let r={type:X.EVENT_COLUMN_PANEL_ITEM_DRAG_END};this.eventService.dispatchEvent(r)},onGridEnter:r=>{t&&this.modelItemUtils.updateColumns({columns:[this.column],visibleState:r?.visibleState,pivotState:r?.pivotState,eventType:"toolPanelUi"})},onGridExit:()=>{t&&this.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(n))}createDragItem(){let t=this.column.getColId(),n={[t]:this.column.isVisible()},r={[t]:this.modelItemUtils.createPivotState(this.column)};return{columns:[this.column],visibleState:n,pivotState:r}}onColumnStateChanged(){this.processingColumnStateChange=!0;let t=this.columnModel.isPivotMode();if(t){let o=this.column.isAnyFunctionActive();this.cbSelect.setValue(o)}else this.cbSelect.setValue(this.column.isVisible());let n=!0,r=!0;if(t){let o=this.gos.get("functionsReadOnly"),a=!this.column.isAnyFunctionAllowed();n=!o&&!a,r=n}else{let{enableRowGroup:o,enableValue:a,lockPosition:l,suppressMovable:c,lockVisible:u}=this.column.getColDef(),d=!!o||!!a,h=!!l||!!c;n=!u,r=d||!h}this.cbSelect.setReadOnly(!n),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!r),this.addOrRemoveCssClass("ag-column-select-column-readonly",!r&&!n);let s=t&&this.gos.get("functionsPassive");this.cbSelect.setPassive(s),this.processingColumnStateChange=!1}getDisplayName(){return this.displayName}onSelectAllChanged(t){t!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}isExpandable(){return!1}setExpanded(t){console.warn("AG Grid: can not expand a column item that does not represent a column group header")}};return i.TEMPLATE=`<div class="ag-column-select-column" aria-hidden="true">
            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>
            <span class="ag-column-select-column-label" ref="eLabel"></span>
        </div>`,i})();At([k("columnModel")],Ku.prototype,"columnModel",2);At([k("dragAndDropService")],Ku.prototype,"dragAndDropService",2);At([k("modelItemUtils")],Ku.prototype,"modelItemUtils",2);At([ce("eLabel")],Ku.prototype,"eLabel",2);At([ce("cbSelect")],Ku.prototype,"cbSelect",2);At([J],Ku.prototype,"init",1);var S$=Ku,x$=class{constructor(i){this.items=i}getRowCount(){return this.items.length}getRow(i){return this.items[i]}},_$="ag-column-select-list",Dg=(()=>{let i=class gR extends ae{constructor(){super(gR.TEMPLATE),this.destroyColumnItemFuncs=[],this.hasLoadedInitialState=!1,this.isInitialState=!1}destroyColumnTree(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach(t=>t()),this.destroyColumnItemFuncs=[]}init(t,n,r){this.params=t,this.allowDragging=n,this.eventType=r,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,X.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,X.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this)),[X.EVENT_COLUMN_PIVOT_CHANGED,X.EVENT_COLUMN_PIVOT_MODE_CHANGED,X.EVENT_COLUMN_ROW_GROUP_CHANGED,X.EVENT_COLUMN_VALUE_CHANGED,X.EVENT_COLUMN_VISIBLE,X.EVENT_NEW_COLUMNS_LOADED].forEach(o=>{this.addManagedListener(this.eventService,o,this.fireSelectionChangedEvent.bind(this))}),this.expandGroupsByDefault=!this.params.contractColumnSelection,this.virtualList=this.createManagedBean(new Oo({cssIdentifier:"column-select",ariaRole:"tree"})),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator((o,a)=>(M.setAriaLevel(a,o.getDept()+1),this.createComponentFromItem(o,a))),this.columnModel.isReady()&&this.onColumnsChanged(),!this.params.suppressColumnMove&&this.createManagedBean(new a1(this,this.virtualList))}createComponentFromItem(t,n){if(t.isGroup()){let s=new pR(t,this.allowDragging,this.eventType,n);return this.getContext().createBean(s),s}let r=new S$(t,this.allowDragging,this.groupsExist,n);return this.getContext().createBean(r),r}onColumnsChanged(){this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);let t=this.getExpandedStates(),n=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!n?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(t),this.markFilteredColumns(),this.flattenAndFilterModel(),this.isInitialState=!1}getDisplayedColsList(){return this.displayedColsList}getExpandedStates(){let t={};if(this.isInitialState){let{expandedGroupIds:n}=this.params.initialState;return n.forEach(r=>{t[r]=!0}),t}return this.allColsTree?(this.forEachItem(n=>{if(!n.isGroup())return;let r=n.getColumnGroup();r&&(t[r.getId()]=n.isExpanded())}),t):{}}setExpandedStates(t){if(!this.allColsTree)return;let{isInitialState:n}=this;this.forEachItem(r=>{if(!r.isGroup())return;let s=r.getColumnGroup();if(s){let o=t[s.getId()];(o!=null||n)&&r.setExpanded(!!o)}})}buildTreeFromWhatGridIsDisplaying(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))}setColumnLayout(t){let n=this.colDefService.createColumnTree(t);this.buildListModel(n),this.groupsExist=t.some(r=>r&&typeof r.children<"u"),this.markFilteredColumns(),this.flattenAndFilterModel()}buildTreeFromProvidedColumnDefs(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()}buildListModel(t){let n=this.onColumnExpanded.bind(this),r=l=>{l.addEventListener(tg.EVENT_EXPANDED_CHANGED,n);let c=l.removeEventListener.bind(l,tg.EVENT_EXPANDED_CHANGED,n);this.destroyColumnItemFuncs.push(c)},s=(l,c,u)=>{l.forEach(d=>{d instanceof gn?o(d,c,u):a(d,c,u)})},o=(l,c,u)=>{let d=l.getColGroupDef();if(d&&d.suppressColumnsToolPanel)return;if(l.isPadding()){s(l.getChildren(),c,u);return}let p=this.columnModel.getDisplayNameForProvidedColumnGroup(null,l,"columnToolPanel"),m=new tg(p,l,c,!0,this.expandGroupsByDefault);u.push(m),r(m),s(l.getChildren(),c+1,m.getChildren())},a=(l,c,u)=>{if(l.getColDef()&&l.getColDef().suppressColumnsToolPanel)return;let h=this.columnModel.getDisplayNameForColumn(l,"columnToolPanel");u.push(new tg(h,l,c))};this.destroyColumnTree(),s(t,0,this.allColsTree)}onColumnExpanded(){this.flattenAndFilterModel()}flattenAndFilterModel(){this.displayedColsList=[];let t=r=>{r.isPassesFilter()&&(this.displayedColsList.push(r),r.isGroup()&&r.isExpanded()&&r.getChildren().forEach(t))};this.allColsTree.forEach(t),this.virtualList.setModel(new x$(this.displayedColsList));let n=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),n!=null&&this.focusRowIfAlive(n),this.notifyListeners(),this.refreshAriaLabel()}refreshAriaLabel(){let t=this.localeService.getLocaleTextFunc(),n=t("ariaColumnPanelList","Column List"),r=t("columns","Columns"),s=this.displayedColsList.length;M.setAriaLabel(this.virtualList.getAriaElement(),`${n} ${s} ${r}`)}focusRowIfAlive(t){window.setTimeout(()=>{this.isAlive()&&this.virtualList.focusRow(t)},0)}forEachItem(t){let n=r=>{r.forEach(s=>{t(s),s.isGroup()&&n(s.getChildren())})};this.allColsTree&&n(this.allColsTree)}doSetExpandedAll(t){this.forEachItem(n=>{n.isGroup()&&n.setExpanded(t)})}setGroupsExpanded(t,n){if(!n){this.doSetExpandedAll(t);return}let r=[];this.forEachItem(o=>{if(!o.isGroup())return;let a=o.getColumnGroup().getId();n.indexOf(a)>=0&&(o.setExpanded(t),r.push(a))});let s=n.filter(o=>!M.includes(r,o));s.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",s)}getExpandState(){let t=0,n=0;return this.forEachItem(r=>{r.isGroup()&&(r.isExpanded()?t++:n++)}),t>0&&n>0?2:n>0?1:0}doSetSelectedAll(t){this.modelItemUtils.selectAllChildren(this.allColsTree,t,this.eventType)}getSelectionState(){let t=0,n=0,r=this.columnModel.isPivotMode();if(this.forEachItem(s=>{if(s.isGroup()||!s.isPassesFilter())return;let o=s.getColumn(),a=o.getColDef(),l;if(r){if(!o.isAllowPivot()&&!o.isAllowRowGroup()&&!o.isAllowValue())return;l=o.isValueActive()||o.isPivotActive()||o.isRowGroupActive()}else{if(a.lockVisible)return;l=o.isVisible()}l?t++:n++}),!(t>0&&n>0))return!(t===0||n>0)}setFilterText(t){this.filterText=M.exists(t)?t.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()}markFilteredColumns(){let t=r=>{if(!M.exists(this.filterText))return!0;let s=r.getDisplayName();return s==null||s.toLowerCase().indexOf(this.filterText)!==-1},n=(r,s)=>{let o=!1;if(r.isGroup()){let l=t(r);r.getChildren().forEach(c=>{let u=n(c,l||s);u&&(o=u)})}let a=s||o?!0:t(r);return r.setPassesFilter(a),a};this.allColsTree.forEach(r=>n(r,!1))}notifyListeners(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()}fireGroupExpandedEvent(){let t=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:t})}fireSelectionChangedEvent(){if(!this.allColsTree)return;let t=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:t})}getExpandedGroups(){let t=[];return this.allColsTree&&this.forEachItem(n=>{n.isGroup()&&n.isExpanded()&&t.push(n.getColumnGroup().getId())}),t}};return i.TEMPLATE=`<div class="${_$}" role="presentation"></div>`,i})();At([k("columnModel")],Dg.prototype,"columnModel",2);At([k("toolPanelColDefService")],Dg.prototype,"colDefService",2);At([k("modelItemUtils")],Dg.prototype,"modelItemUtils",2);At([_i],Dg.prototype,"destroyColumnTree",1);var w$=Dg,Qh=class extends ae{createTemplate(){return`<div class="ag-pivot-mode-panel">
                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>
            </div>`}init(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());let i=this.localeService.getLocaleTextFunc();this.cbPivotMode.setLabel(i("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,X.EVENT_FIELD_VALUE_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,X.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,X.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))}onBtPivotMode(){let i=!!this.cbPivotMode.getValue();if(i!==this.columnModel.isPivotMode()){this.gos.updateGridOptions({options:{pivotMode:i},source:"toolPanelUi"});let{api:e}=this;e&&e.refreshHeader()}}onPivotModeChanged(){let i=this.columnModel.isPivotMode();this.cbPivotMode.setValue(i)}};At([k("columnModel")],Qh.prototype,"columnModel",2);At([k("gridApi")],Qh.prototype,"api",2);At([ce("cbPivotMode")],Qh.prototype,"cbPivotMode",2);At([Po],Qh.prototype,"init",1);var l1=(()=>{let i=class fR extends ae{constructor(){super(fR.TEMPLATE)}init(t,n,r){this.allowDragging=t,this.params=n,this.eventType=r,this.primaryColsHeaderPanel.init(this.params);let s=this.params.suppressColumnFilter,o=this.params.suppressColumnSelectAll;this.params.suppressColumnExpandAll&&s&&o&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new kf(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)}toggleResizable(t){this.positionableFeature.setResizable(t?{bottom:!0}:!1)}onExpandAll(){this.primaryColsListPanel.doSetExpandedAll(!0)}onCollapseAll(){this.primaryColsListPanel.doSetExpandedAll(!1)}expandGroups(t){this.primaryColsListPanel.setGroupsExpanded(!0,t)}collapseGroups(t){this.primaryColsListPanel.setGroupsExpanded(!1,t)}setColumnLayout(t){this.primaryColsListPanel.setColumnLayout(t)}onFilterChanged(t){this.primaryColsListPanel.setFilterText(t.filterText)}syncLayoutWithGrid(){this.primaryColsListPanel.onColumnsChanged()}onSelectAll(){this.primaryColsListPanel.doSetSelectedAll(!0)}onUnselectAll(){this.primaryColsListPanel.doSetSelectedAll(!1)}onGroupExpanded(t){this.primaryColsHeaderPanel.setExpandState(t.state),this.params.onStateUpdated()}onSelectionChange(t){this.primaryColsHeaderPanel.setSelectionState(t.state)}getExpandedGroups(){return this.primaryColsListPanel.getExpandedGroups()}};return i.TEMPLATE=`<div class="ag-column-select">
            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>
            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>
        </div>`,i})();At([ce("primaryColsHeaderPanel")],l1.prototype,"primaryColsHeaderPanel",2);At([ce("primaryColsListPanel")],l1.prototype,"primaryColsListPanel",2);var Wy=l1,E$=(()=>{let i=class vR extends ae{constructor(){super(vR.TEMPLATE),this.initialised=!1,this.childDestroyFuncs=[]}setVisible(t){super.setDisplayed(t),t&&!this.initialised&&this.init(this.params)}init(t){let n=this.gos.addGridCommonParams({suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1});if(this.params=kF(kF({},n),t),this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new Qh),this.childDestroyFuncs.push(()=>this.destroyBean(this.pivotModePanel)),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new Wy),this.childDestroyFuncs.push(()=>this.destroyBean(this.primaryColsPanel)),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new mg(!1)),this.childDestroyFuncs.push(()=>this.destroyBean(this.rowGroupDropZonePanel)),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new ly(!1)),this.childDestroyFuncs.push(()=>this.destroyBean(this.valuesDropZonePanel)),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new gg(!1)),this.childDestroyFuncs.push(()=>this.destroyBean(this.pivotDropZonePanel)),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();let r=this.addManagedListener(this.eventService,X.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>{this.resetChildrenHeight(),this.setLastVisible()});this.childDestroyFuncs.push(()=>r())}this.initialised=!0}setPivotModeSectionVisible(t){this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(t):t&&(this.pivotModePanel=this.createBean(new Qh),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push(()=>this.destroyBean(this.pivotModePanel))),this.setLastVisible())}setRowGroupsSectionVisible(t){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(t):t&&(this.rowGroupDropZonePanel=this.createManagedBean(new mg(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())}setValuesSectionVisible(t){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(t):t&&(this.valuesDropZonePanel=this.createManagedBean(new ly(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())}setPivotSectionVisible(t){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(t):t&&(this.pivotDropZonePanel=this.createManagedBean(new gg(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(t)),this.setLastVisible())}setResizers(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach(t=>{if(!t)return;let n=t.getGui();t.toggleResizable(!n.classList.contains("ag-last-column-drop")&&!n.classList.contains("ag-hidden"))})}setLastVisible(){let t=this.getGui();Array.prototype.slice.call(t.querySelectorAll(".ag-column-drop")).forEach(o=>o.classList.remove("ag-last-column-drop"));let r=t.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),s=M.last(r);s&&s.classList.add("ag-last-column-drop"),this.setResizers()}resetChildrenHeight(){let n=this.getGui().children;for(let r=0;r<n.length;r++){let s=n[r];s.style.removeProperty("height"),s.style.removeProperty("flex")}}isRowGroupingModuleLoaded(){return jt.__assertRegistered(qe.RowGroupingModule,"Row Grouping",this.context.getGridId())}expandColumnGroups(t){this.primaryColsPanel.expandGroups(t)}collapseColumnGroups(t){this.primaryColsPanel.collapseGroups(t)}setColumnLayout(t){this.primaryColsPanel.setColumnLayout(t)}syncLayoutWithGrid(){this.primaryColsPanel.syncLayoutWithGrid()}destroyChildren(){this.childDestroyFuncs.forEach(t=>t()),this.childDestroyFuncs.length=0,M.clearElement(this.getGui())}refresh(t){return this.destroyChildren(),this.init(t),!0}getState(){return{expandedGroupIds:this.primaryColsPanel.getExpandedGroups()}}destroy(){this.destroyChildren(),super.destroy()}};return i.TEMPLATE='<div class="ag-column-panel"></div>',i})(),T$=E$,Vu=class{selectAllChildren(i,e,t){let n=this.extractAllLeafColumns(i);this.setAllColumns(n,e,t)}setColumn(i,e,t){this.setAllColumns([i],e,t)}setAllColumns(i,e,t){this.columnModel.isPivotMode()?this.setAllPivot(i,e,t):this.setAllVisible(i,e,t)}extractAllLeafColumns(i){let e=[],t=n=>{n.forEach(r=>{r.isPassesFilter()&&(r.isGroup()?t(r.getChildren()):e.push(r.getColumn()))})};return t(i),e}setAllVisible(i,e,t){let n=[];i.forEach(r=>{r.getColDef().lockVisible||r.isVisible()!=e&&n.push({colId:r.getId(),hide:!e})}),n.length>0&&this.columnModel.applyColumnState({state:n},t)}setAllPivot(i,e,t){this.gos.get("functionsPassive")?this.setAllPivotPassive(i,e):this.setAllPivotActive(i,e,t)}setAllPivotPassive(i,e){let t=this.columnModel.getPivotColumns().slice(),n=this.columnModel.getValueColumns().slice(),r=this.columnModel.getRowGroupColumns().slice(),s=!1,o=!1,a=!1,u=e?d=>{d.isAnyFunctionActive()||(d.isAllowValue()?(n.push(d),o=!0):d.isAllowRowGroup()?(r.push(d),s=!0):d.isAllowPivot()&&(t.push(d),a=!0))}:d=>{d.isAnyFunctionActive()&&(t.indexOf(d)>=0&&(M.removeFromArray(t,d),s=!0),n.indexOf(d)>=0&&(M.removeFromArray(n,d),o=!0),r.indexOf(d)>=0&&(M.removeFromArray(r,d),a=!0))};if(i.forEach(u),s){let d={type:X.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(d)}if(a){let d={type:X.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:r};this.eventService.dispatchEvent(d)}if(o){let d={type:X.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:r};this.eventService.dispatchEvent(d)}}setAllPivotActive(i,e,t){let n=[],o=e?a=>{if(!a.isAnyFunctionActive())if(a.isAllowValue()){let l=typeof a.getAggFunc()=="string"?a.getAggFunc():this.aggFuncService.getDefaultAggFunc(a);n.push({colId:a.getId(),aggFunc:l})}else a.isAllowRowGroup()?n.push({colId:a.getId(),rowGroup:!0}):a.isAllowPivot()&&n.push({colId:a.getId(),pivot:!0})}:a=>{(a.isPivotActive()||a.isRowGroupActive()||a.isValueActive())&&n.push({colId:a.getId(),pivot:!1,rowGroup:!1,aggFunc:null})};i.forEach(o),n.length>0&&this.columnModel.applyColumnState({state:n},t)}updateColumns(i){let{columns:e,visibleState:t,pivotState:n,eventType:r}=i,s=e.map(o=>{let a=o.getColId();if(this.columnModel.isPivotMode()){let l=n?.[a];return{colId:a,pivot:l?.pivot,rowGroup:l?.rowGroup,aggFunc:l?.aggFunc}}else return{colId:a,hide:!t?.[a]}});this.columnModel.applyColumnState({state:s},r)}createPivotState(i){return{pivot:i.isPivotActive(),rowGroup:i.isRowGroupActive(),aggFunc:i.isValueActive()?i.getAggFunc():void 0}}};At([k("aggFuncService")],Vu.prototype,"aggFuncService",2);At([k("columnModel")],Vu.prototype,"columnModel",2);At([k("gridOptionsService")],Vu.prototype,"gos",2);At([k("eventService")],Vu.prototype,"eventService",2);Vu=At([De("modelItemUtils")],Vu);var M$="31.3.4",yR={version:M$,moduleName:qe.ColumnsToolPanelModule,beans:[Vu],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:C$},{componentName:"AgPrimaryColsList",componentClass:w$},{componentName:"AgPrimaryCols",componentClass:Wy}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:T$}],dependantModules:[Tn,s1,zy]},CR=Object.defineProperty,A$=Object.defineProperties,P$=Object.getOwnPropertyDescriptor,D$=Object.getOwnPropertyDescriptors,IF=Object.getOwnPropertySymbols,k$=Object.prototype.hasOwnProperty,I$=Object.prototype.propertyIsEnumerable,FF=(i,e,t)=>e in i?CR(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,c1=(i,e)=>{for(var t in e||(e={}))k$.call(e,t)&&FF(i,t,e[t]);if(IF)for(var t of IF(e))I$.call(e,t)&&FF(i,t,e[t]);return i},u1=(i,e)=>A$(i,D$(e)),ju=(i,e,t,n)=>{for(var r=n>1?void 0:n?P$(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&CR(e,t,r),r},F$={getTemplate(i){let t=new Date().toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:i},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:t},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:t}]}}},O$=F$,L$={getTemplate(i){let{name:e,ContentType:t,Extension:n,PartName:r}=i;return{name:e,properties:{rawMap:{Extension:n,PartName:r,ContentType:t}}}}},R$=L$,N$={getTemplate(i){let e=new Array(i).fill(void 0).map((u,d)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:`/xl/worksheets/sheet${d+1}.xml`})),t=Bt.worksheetImages.size,n=Bt.worksheetHeaderFooterImages.size,r=Bt.worksheetDataTables.size,s={};Bt.workbookImageIds.forEach(u=>{let d=u.type==="jpg"?"jpeg":u.type;s[d]=!0});let o=new Array(t).fill(void 0).map((u,d)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:`/xl/drawings/drawing${d+1}.xml`})),a=new Array(r).fill(void 0).map((u,d)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml",PartName:`/xl/tables/${Bt.getTableNameFromIndex(d)}.xml`})),l=Object.keys(s).map(u=>({name:"Default",ContentType:`image/${u}`,Extension:u}));n&&l.push({name:"Default",Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"});let c=[...l,{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"},...e,{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"},...o,...a,{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}].map(u=>R$.getTemplate(u));return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:c}}},V$=N$,B$=9525,OF={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},G$=i=>Math.round(i*72/96),U$=i=>Math.round(i*96/72),Wh=i=>Math.ceil(i*B$),H$=i=>{if(i===void 0)return;let t=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(i||"Automatic");return Math.max(t,0)},ry=(i,e)=>{if(!e)return;let t;return typeof e=="number"?t=e:t=e({rowIndex:i}),G$(t)},z$=(i,e)=>{let{colSpan:t,column:n}=i.position;if(i.width)if(t){let r=e.slice(n-1,n+t-1),s=0;for(let o=0;o<r.length;o++){let a=r[o].getActualWidth();if(i.width<s+a){i.position.colSpan=o+1,i.totalWidth=i.width,i.width=i.totalWidth-s;break}s+=a}}else i.totalWidth=i.width},W$=(i,e)=>{let{rowSpan:t,row:n}=i.position;if(i.height)if(t){let r=0,s=0;for(let o=n;o<n+t;o++){let a=U$(ry(o,e)||20);if(i.height<r+a){i.position.rowSpan=s+1,i.totalHeight=i.height,i.height=i.totalHeight-r;break}r+=a,s++}}else i.totalHeight=i.height},mr=(i,e)=>{let t=nb.createHeader({encoding:"UTF-8",standalone:"yes"}),n=nb.createXml(i);return e?n:`${t}${n}`},yg=i=>{let n=String.fromCharCode,r=Math.floor(i/26),s=i%26;return!r||i===26?n(65+i-1):s?r<26?n(65+r-1)+n(65+s-1):yg(r)+n(65+s-1):yg(r-1)+"Z"},LF=(i,e)=>({name:`xdr:${i}`,children:[{name:"xdr:col",textNode:e.col.toString()},{name:"xdr:colOff",textNode:e.offsetX.toString()},{name:"xdr:row",textNode:e.row.toString()},{name:"xdr:rowOff",textNode:e.offsetY.toString()}]}),$$=i=>{let e=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(i.recolor&&i.recolor.toLowerCase()){case"grayscale":case"sepia":case"washout":e.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:e}},K$=(i,e)=>({name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:e,name:i.id,descr:i.altText!=null?i.altText:void 0}},children:[$$(i)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}),RF=i=>{if(!i.saturation&&!i.tint)return;let e=[];return i.saturation&&e.push({name:"a:satMod",properties:{rawMap:{val:i.saturation*1e3}}}),i.tint&&e.push({name:"a:tint",properties:{rawMap:{val:i.tint*1e3}}}),e},j$=(i,e)=>({name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:i.color}},children:RF(i)},{name:"a:srgbClr",properties:{rawMap:{val:e.color}},children:RF(e)}]}),Y$=(i,e)=>{let t;if(i.transparency){let n=Math.min(Math.max(i.transparency,0),100);t=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(n*1e3)}}}]}if(i.recolor)switch(t||(t=[]),i.recolor.toLocaleLowerCase()){case"grayscale":t.push({name:"a:grayscl"});break;case"sepia":t.push(j$({color:"black"},{color:"D9C3A5",tint:50,saturation:180}));break;case"washout":t.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}});break;default:}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":`rId${e}`,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:t},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},q$=(i,e)=>{let t={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:e.width,cy:e.height}}}]};if(i.rotation){let s=i.rotation;t.properties={rawMap:{rot:Math.min(Math.max(s,0),360)*6e4}}}return{name:"xdr:spPr",children:[t,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},X$=i=>{i.fitCell=!!i.fitCell||!i.width||!i.height;let{position:e={},fitCell:t,width:n=0,height:r=0,totalHeight:s,totalWidth:o}=i,{offsetX:a=0,offsetY:l=0,row:c=1,rowSpan:u=1,column:d=1,colSpan:h=1}=e;return{from:{row:c-1,col:d-1,offsetX:Wh(a),offsetY:Wh(l)},to:{row:c-1+(t?1:u-1),col:d-1+(t?1:h-1),offsetX:Wh(n+a),offsetY:Wh(r+l)},height:Wh(s||r),width:Wh(o||n)}},Z$=(i,e,t,n)=>({name:"xdr:pic",children:[K$(i,e+1),Y$(i,t+1),q$(i,n)]}),Q$={getTemplate(i){let{sheetIndex:e}=i,t=Bt.worksheetImages.get(e),n=Bt.worksheetImageIds.get(e),r=t.map((s,o)=>{let a=X$(s);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[LF("from",a.from),LF("to",a.to),Z$(s,o,n.get(s.id).index,a),{name:"xdr:clientData"}]}});return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:r}}},J$=Q$,eK={getTemplate(i,e){let{name:t,columns:n,rowCount:r,displayName:s,headerRowIndex:o,showRowStripes:a,showColumnStripes:l,showFilterButtons:c,highlightFirstColumn:u,highlightLastColumn:d}=i||{};if(!i||!t||!Array.isArray(n)||!n.length||!r)return{name:"table"};let h=n.map((v,S)=>({name:"filterColumn",properties:{rawMap:{colId:S.toString(),hiddenButton:c[S]?0:1}}})),p=o+1,m=(e+1).toString(),g=`A${p}`,f=`${String.fromCharCode(64+n.length)}${p+r}`,y=`${g}:${f}`,b=e?`${s}_${e+1}`:s;return{name:"table",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3",name:t,displayName:b,ref:y,totalsRowShown:0,id:m}},children:[{name:"autoFilter",properties:{rawMap:{ref:y}},children:h},{name:"tableColumns",properties:{rawMap:{count:n.length}},children:n.map((v,S)=>({name:"tableColumn",properties:{rawMap:{id:(S+1).toString(),name:v,dataCellStyle:"Normal"}}}))},{name:"tableStyleInfo",properties:{rawMap:{name:"TableStyleLight1",showFirstColumn:u?1:0,showLastColumn:d?1:0,showRowStripes:a?1:0,showColumnStripes:l?1:0}}}]}}},tK=eK,Ns=i=>{let[e,t,n,r]=i;return{name:`a:${e}`,children:[{name:`a:${t}`,properties:{rawMap:{val:n,lastClr:r}}}]}},iK={getTemplate(){return{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[Ns(["dk1","sysClr","windowText","000000"]),Ns(["lt1","sysClr","window","FFFFFF"]),Ns(["dk2","srgbClr","44546A"]),Ns(["lt2","srgbClr","E7E6E6"]),Ns(["accent1","srgbClr","4472C4"]),Ns(["accent2","srgbClr","ED7D31"]),Ns(["accent3","srgbClr","A5A5A5"]),Ns(["accent4","srgbClr","FFC000"]),Ns(["accent5","srgbClr","5B9BD5"]),Ns(["accent6","srgbClr","70AD47"]),Ns(["hlink","srgbClr","0563C1"]),Ns(["folHlink","srgbClr","954F72"])]}}},nK=iK,Me=i=>{let[e,t,n,r]=i;return{name:`a:${e}`,properties:{rawMap:{script:n,typeface:t,panose:r}}}},rK={getTemplate(){return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[Me(["latin","Calibri Light",void 0,"020F0302020204030204"]),Me(["ea",""]),Me(["cs",""]),Me(["font","\u6E38\u30B4\u30B7\u30C3\u30AF Light","Jpan"]),Me(["font","\uB9D1\uC740 \uACE0\uB515","Hang"]),Me(["font","\u7B49\u7EBF Light","Hans"]),Me(["font","\u65B0\u7D30\u660E\u9AD4","Hant"]),Me(["font","Times New Roman","Arab"]),Me(["font","Times New Roman","Hebr"]),Me(["font","Tahoma","Thai"]),Me(["font","Nyala","Ethi"]),Me(["font","Vrinda","Beng"]),Me(["font","Shruti","Gujr"]),Me(["font","MoolBoran","Khmr"]),Me(["font","Tunga","Knda"]),Me(["font","Raavi","Guru"]),Me(["font","Euphemia","Cans"]),Me(["font","Plantagenet Cherokee","Cher"]),Me(["font","Microsoft Yi Baiti","Yiii"]),Me(["font","Microsoft Himalaya","Tibt"]),Me(["font","MV Boli","Thaa"]),Me(["font","Mangal","Deva"]),Me(["font","Gautami","Telu"]),Me(["font","Latha","Taml"]),Me(["font","Estrangelo Edessa","Syrc"]),Me(["font","Kalinga","Orya"]),Me(["font","Kartika","Mlym"]),Me(["font","DokChampa","Laoo"]),Me(["font","Iskoola Pota","Sinh"]),Me(["font","Mongolian Baiti","Mong"]),Me(["font","Times New Roman","Viet"]),Me(["font","Microsoft Uighur","Uigh"]),Me(["font","Sylfaen","Geor"]),Me(["font","Arial","Armn"]),Me(["font","Leelawadee UI","Bugi"]),Me(["font","Microsoft JhengHei","Bopo"]),Me(["font","Javanese Text","Java"]),Me(["font","Segoe UI","Lisu"]),Me(["font","Myanmar Text","Mymr"]),Me(["font","Ebrima","Nkoo"]),Me(["font","Nirmala UI","Olck"]),Me(["font","Ebrima","Osma"]),Me(["font","Phagspa","Phag"]),Me(["font","Estrangelo Edessa","Syrn"]),Me(["font","Estrangelo Edessa","Syrj"]),Me(["font","Estrangelo Edessa","Syre"]),Me(["font","Nirmala UI","Sora"]),Me(["font","Microsoft Tai Le","Tale"]),Me(["font","Microsoft New Tai Lue","Talu"]),Me(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[Me(["latin","Calibri",void 0,"020F0502020204030204"]),Me(["ea",""]),Me(["cs",""]),Me(["font","\u6E38\u30B4\u30B7\u30C3\u30AF","Jpan"]),Me(["font","\uB9D1\uC740 \uACE0\uB515","Hang"]),Me(["font","\u7B49\u7EBF","Hans"]),Me(["font","\u65B0\u7D30\u660E\u9AD4","Hant"]),Me(["font","Arial","Arab"]),Me(["font","Arial","Hebr"]),Me(["font","Tahoma","Thai"]),Me(["font","Nyala","Ethi"]),Me(["font","Vrinda","Beng"]),Me(["font","Shruti","Gujr"]),Me(["font","DaunPenh","Khmr"]),Me(["font","Tunga","Knda"]),Me(["font","Raavi","Guru"]),Me(["font","Euphemia","Cans"]),Me(["font","Plantagenet Cherokee","Cher"]),Me(["font","Microsoft Yi Baiti","Yiii"]),Me(["font","Microsoft Himalaya","Tibt"]),Me(["font","MV Boli","Thaa"]),Me(["font","Mangal","Deva"]),Me(["font","Gautami","Telu"]),Me(["font","Latha","Taml"]),Me(["font","Estrangelo Edessa","Syrc"]),Me(["font","Kalinga","Orya"]),Me(["font","Kartika","Mlym"]),Me(["font","DokChampa","Laoo"]),Me(["font","Iskoola Pota","Sinh"]),Me(["font","Mongolian Baiti","Mong"]),Me(["font","Arial","Viet"]),Me(["font","Microsoft Uighur","Uigh"]),Me(["font","Sylfaen","Geor"]),Me(["font","Arial","Armn"]),Me(["font","Leelawadee UI","Bugi"]),Me(["font","Microsoft JhengHei","Bopo"]),Me(["font","Javanese Text","Java"]),Me(["font","Segoe UI","Lisu"]),Me(["font","Myanmar Text","Mymr"]),Me(["font","Ebrima","Nkoo"]),Me(["font","Nirmala UI","Olck"]),Me(["font","Ebrima","Osma"]),Me(["font","Phagspa","Phag"]),Me(["font","Estrangelo Edessa","Syrn"]),Me(["font","Estrangelo Edessa","Syrj"]),Me(["font","Estrangelo Edessa","Syre"]),Me(["font","Nirmala UI","Sora"]),Me(["font","Microsoft Tai Le","Tale"]),Me(["font","Microsoft New Tai Lue","Talu"]),Me(["font","Ebrima","Tfng"])]}]}}},sK=rK,ha=(i,e,t)=>({name:`a:${i}`,properties:{rawMap:{val:e}},children:t}),zx=i=>{let[e,t,n,r,s,o]=i,a=[];return a.push(ha("satMod",n)),r&&a.push(ha("lumMod",r)),s&&a.push(ha("tint",s)),o&&a.push(ha("shade",o)),{name:"a:gs",properties:{rawMap:{pos:e}},children:[{name:"a:schemeClr",properties:{rawMap:{val:t}},children:a}]}},cy=(i,e)=>({name:"a:solidFill",children:[ha("schemeClr",i,e)]}),u_=i=>{let[e,t,n,r,s]=i,[o,a]=s;return{name:"a:gradFill",properties:{rawMap:{rotWithShape:e}},children:[{name:"a:gsLst",children:[zx(t),zx(n),zx(r)]},{name:"a:lin",properties:{rawMap:{ang:o,scaled:a}}}]}},Wx=i=>{let[e,t,n,r]=i;return{name:"a:ln",properties:{rawMap:{w:e,cap:t,cmpd:n,algn:r}},children:[cy("phClr"),ha("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},$x=i=>{let e=[];if(i){let[t,n,r,s,o]=i;e.push({name:"a:outerShdw",properties:{rawMap:{blurRad:t,dist:n,dir:r,algn:s,rotWithShape:o}},children:[ha("srgbClr","000000",[ha("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},e.length?{children:e}:{})]}},oK=()=>({name:"a:fillStyleLst",children:[cy("phClr"),u_(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),u_(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]}),aK=()=>({name:"a:lnStyleLst",children:[Wx(["6350","flat","sng","ctr"]),Wx(["12700","flat","sng","ctr"]),Wx(["19050","flat","sng","ctr"])]}),lK=()=>({name:"a:effectStyleLst",children:[$x(),$x(),$x(["57150","19050","5400000","ctr","0"])]}),cK=()=>({name:"a:bgFillStyleLst",children:[cy("phClr"),cy("phClr",[ha("tint","95000"),ha("satMod","170000")]),u_(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}),uK={getTemplate(){return{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[oK(),aK(),lK(),cK()]}}},dK=uK,hK={getTemplate(){return{name:"a:themeElements",children:[nK.getTemplate(),sK.getTemplate(),dK.getTemplate()]}}},pK=hK,mK={getTemplate(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[pK.getTemplate(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]}}},gK=mK,fK=i=>{let e=[];for(let t of i.keys()){let n=t.toString(),r={name:"t",textNode:M.escapeString(n)};n.trim().length!==n.length&&(r.properties={rawMap:{"xml:space":"preserve"}}),e.push({name:"si",children:[r]})}return e},vK={getTemplate(i){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:i.size,uniqueCount:i.size}},children:fK(i)}}},yK=vK;function CK(i){let e=i.split(/(\[[^\]]*\])/);for(let t=0;t<e.length;t++){let n=e[t];n.length&&(n.startsWith("[")||(n=n.replace(/\$/g,'"$"')),e[t]=M.escapeString(n))}return e.join("")}var bK={getTemplate(i){let{formatCode:e,numFmtId:t}=i;return e.length&&(e=CK(e)),{name:"numFmt",properties:{rawMap:{formatCode:e,numFmtId:t}}}}},SK=bK,xK={getTemplate(i){return{name:"numFmts",properties:{rawMap:{count:i.length}},children:i.map(e=>SK.getTemplate(e))}}},_K=xK,wK={getTemplate(i){let{size:e,colorTheme:t,color:n="FF000000",fontName:r="Calibri",family:s,scheme:o,italic:a,bold:l,strikeThrough:c,outline:u,shadow:d,underline:h,verticalAlign:p}=i,m=[{name:"sz",properties:{rawMap:{val:e}}},{name:"color",properties:{rawMap:{theme:t,rgb:n}}},{name:"name",properties:{rawMap:{val:r}}}];return s&&m.push({name:"family",properties:{rawMap:{val:s}}}),o&&m.push({name:"scheme",properties:{rawMap:{val:o}}}),a&&m.push({name:"i"}),l&&m.push({name:"b"}),c&&m.push({name:"strike"}),u&&m.push({name:"outline"}),d&&m.push({name:"shadow"}),h&&m.push({name:"u",properties:{rawMap:{val:h}}}),p&&m.push({name:"vertAlign",properties:{rawMap:{val:p}}}),{name:"font",children:m}}},EK=wK,TK={getTemplate(i){return{name:"fonts",properties:{rawMap:{count:i.length}},children:i.map(e=>EK.getTemplate(e))}}},MK=TK,AK={getTemplate(i){let{patternType:e,fgTheme:t,fgTint:n,fgRgb:r,bgRgb:s,bgIndexed:o}=i,a={name:"patternFill",properties:{rawMap:{patternType:e}}};return(t||n||r)&&(a.children=[{name:"fgColor",properties:{rawMap:{theme:t,tint:n,rgb:r}}}]),(o||s)&&(a.children||(a.children=[]),a.children.push({name:"bgColor",properties:{rawMap:{indexed:o,rgb:s}}})),{name:"fill",children:[a]}}},PK=AK,DK={getTemplate(i){return{name:"fills",properties:{rawMap:{count:i.length}},children:i.map(e=>PK.getTemplate(e))}}},kK=DK,IK=i=>{switch(i){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}},FK={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot"},OK=["Dashed","DashDot","DashDotDot"],LK={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},RK={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},NK={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},VK=i=>i?LK[i]||i:"none",ac=i=>i==null?i:(i.charAt(0)==="#"&&(i=i.substring(1)),i.length===6?"FF"+i:i),Qv=(i,e)=>{if(!i)return"thin";let t=IK(e),n=FK[i];return i==="Continuous"?t:t==="medium"&&OK.indexOf(n)!==-1?`medium${n}`:n.charAt(0).toLowerCase()+n.substring(1)},BK=i=>RK[i]||"general",GK=i=>NK[i]||void 0,Zm=i=>({name:"color",properties:{rawMap:{rgb:ac(i||"#000000")}}}),UK={getTemplate(i){let{left:e,right:t,top:n,bottom:r,diagonal:s}=i,o=e?[Zm(e.color)]:void 0,a=t?[Zm(t.color)]:void 0,l=n?[Zm(n.color)]:void 0,c=r?[Zm(r.color)]:void 0,u=s?[Zm(s.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:e&&e.style}},children:o},{name:"right",properties:{rawMap:{style:t&&t.style}},children:a},{name:"top",properties:{rawMap:{style:n&&n.style}},children:l},{name:"bottom",properties:{rawMap:{style:r&&r.style}},children:c},{name:"diagonal",properties:{rawMap:{style:s&&s.style}},children:u}]}}},HK=UK,zK={getTemplate(i){return{name:"borders",properties:{rawMap:{count:i.length}},children:i.map(e=>HK.getTemplate(e))}}},WK=zK,$K=i=>{let t=["Context","LeftToRight","RightToLeft"].indexOf(i);return Math.max(t,0)},KK={getTemplate(i){let{horizontal:e,indent:t,readingOrder:n,rotate:r,shrinkToFit:s,vertical:o,wrapText:a}=i;return{name:"alignment",properties:{rawMap:{horizontal:e&&BK(e),indent:t,readingOrder:n&&$K(n),textRotation:r,shrinkToFit:s,vertical:o&&GK(o),wrapText:a}}}}},jK=KK,YK={getTemplate(i){let e=i.protected===!1?0:1;return{name:"protection",properties:{rawMap:{hidden:i.hideFormula===!0?1:0,locked:e}}}}},qK=YK,XK={getTemplate(i){let{alignment:e,borderId:t,fillId:n,fontId:r,numFmtId:s,protection:o,quotePrefix:a,xfId:l}=i,c=[];return e&&c.push(jK.getTemplate(e)),o&&c.push(qK.getTemplate(o)),{name:"xf",properties:{rawMap:{applyAlignment:e?1:void 0,applyProtection:o?1:void 0,applyBorder:t?1:void 0,applyFill:n?1:void 0,borderId:t,fillId:n,applyFont:r?1:void 0,fontId:r,applyNumberFormat:s?1:void 0,numFmtId:s,quotePrefix:a?1:void 0,xfId:l}},children:c.length?c:void 0}}},bR=XK,ZK={getTemplate(i){return{name:"cellStyleXfs",properties:{rawMap:{count:i.length}},children:i.map(e=>bR.getTemplate(e))}}},QK=ZK,JK={getTemplate(i){return{name:"cellXfs",properties:{rawMap:{count:i.length}},children:i.map(e=>bR.getTemplate(e))}}},ej=JK,tj={getTemplate(i){let{builtinId:e,name:t,xfId:n}=i;return{name:"cellStyle",properties:{rawMap:{builtinId:e,name:t,xfId:n}}}}},ij=tj,nj={getTemplate(i){return{name:"cellStyles",properties:{rawMap:{count:i.length}},children:i.map(e=>ij.getTemplate(e))}}},rj=nj,uy,Kh,rg,sg,og,SR,dy,xR,d_,_R=(i,e)=>(i.indexOf("mixedStyle")!==-1&&e>1&&(i+=`_${e}`),i),wR=()=>{uy={base:0},Kh=[],rg=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],sg=[{patternType:"none"},{patternType:"gray125"}],og=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],SR=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],dy=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],xR=[{builtinId:0,name:"Normal",xfId:0}]},sj=i=>{let e=VK(i.pattern),t=ac(i.color),n=ac(i.patternColor),r=sg.findIndex(s=>{let{patternType:o,fgRgb:a,bgRgb:l}=s;return!(o!=e||a!=t||l!=n)});return r===-1&&(r=sg.length,sg.push({patternType:e,fgRgb:t,bgRgb:n})),r},oj=i=>{if(OF[i])return OF[i];let e=Kh.findIndex(t=>t.formatCode===i);return e===-1?(e=Kh.length+164,Kh.push({formatCode:i,numFmtId:e})):e=Kh[e].numFmtId,e},aj=i=>{let{borderBottom:e,borderTop:t,borderLeft:n,borderRight:r}=i,s,o,a,l,c,u,d,h;n&&(a=Qv(n.lineStyle,n.weight),d=ac(n.color)),r&&(l=Qv(r.lineStyle,r.weight),h=ac(r.color)),e&&(s=Qv(e.lineStyle,e.weight),c=ac(e.color)),t&&(o=Qv(t.lineStyle,t.weight),u=ac(t.color));let p=og.findIndex(m=>{let{left:g,right:f,top:y,bottom:b}=m;if(!g&&(a||d)||!f&&(l||h)||!y&&(o||u)||!b&&(s||c))return!1;let{style:v,color:S}=g||{},{style:w,color:T}=f||{},{style:D,color:O}=y||{},{style:R,color:L}=b||{};return!(v!=a||S!=d||w!=l||T!=h||D!=o||O!=u||R!=s||L!=c)});return p===-1&&(p=og.length,og.push({left:{style:a,color:d},right:{style:l,color:h},top:{style:o,color:u},bottom:{style:s,color:c},diagonal:{style:void 0,color:void 0}})),p},lj=i=>{let{fontName:e="Calibri",color:t,size:n,bold:r,italic:s,outline:o,shadow:a,strikeThrough:l,underline:c,family:u,verticalAlign:d}=i,h=ac(t),p=H$(u),m=c?c.toLocaleLowerCase():void 0,g=d?d.toLocaleLowerCase():void 0,f=rg.findIndex(y=>!(y.fontName!=e||y.color!=h||y.size!=n||y.bold!=r||y.italic!=s||y.outline!=o||y.shadow!=a||y.strikeThrough!=l||y.underline!=m||y.verticalAlign!=g||y.family!=p));return f===-1&&(f=rg.length,rg.push({fontName:e,color:h,size:n,bold:r,italic:s,outline:o,shadow:a,strikeThrough:l,underline:m,verticalAlign:g,family:p?.toString()})),f},cj=i=>{let{alignment:e,borders:t,font:n,interior:r,numberFormat:s,protection:o,quotePrefix:a}=i,{id:l}=i,c=0,u=0,d=0,h=0;l&&(l=_R(l,d_),uy[l]==null&&(r&&(c=sj(r)),t&&(u=aj(t)),n&&(d=lj(n)),s&&(h=oj(s.format)),uy[l]=dy.length,dy.push({alignment:e,borderId:u||0,fillId:c||0,fontId:d||0,numFmtId:h||0,protection:o,quotePrefix:a,xfId:0})))},uj={getTemplate(i){let e=_K.getTemplate(Kh),t=MK.getTemplate(rg.map(l=>u1(c1({},l),{size:l.size!=null?l.size:i}))),n=kK.getTemplate(sg),r=WK.getTemplate(og),s=QK.getTemplate(SR),o=ej.getTemplate(dy),a=rj.getTemplate(xR);return wR(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[e,t,n,r,s,o,a,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}}},dj=(i,e)=>uy[_R(i,e)]||0,hj=(i,e)=>{d_=e,d_===1&&wR(),i.forEach(cj)},pj=uj,mj={getTemplate(i,e){let t=(e+1).toString();return{name:"sheet",properties:{rawMap:{name:i,sheetId:t,"r:id":`rId${t}`}}}}},gj=mj,fj={getTemplate(i){return{name:"sheets",children:i.map((e,t)=>gj.getTemplate(e,t))}}},vj=fj,yj={getTemplate(i){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[vj.getTemplate(i)]}}},Cj=yj,bj=i=>Math.ceil((i-12)/7+1),Sj={getTemplate(i){let{min:e,max:t,outlineLevel:n,s:r,width:s,hidden:o,bestFit:a}=i,l=1,c="0";return s>1&&(l=bj(s),c="1"),{name:"col",properties:{rawMap:{min:e,max:t,outlineLevel:n??void 0,width:l,style:r,hidden:o?"1":"0",bestFit:a?"1":"0",customWidth:c}}}}},xj=Sj,_j=i=>{let e=i.charAt(0).toLowerCase();return e==="s"?"inlineStr":e},wj={getTemplate(i,e,t){let{ref:n,data:r,styleId:s}=i,{type:o,value:a}=r||{type:"empty",value:null},l=o;o==="f"?l="str":o.charAt(0)===o.charAt(0).toUpperCase()&&(l=_j(o));let c={name:"c",properties:{rawMap:{r:n,t:l==="empty"?void 0:l,s:s?dj(s,t):void 0}}};if(l==="empty")return c;let u;return l==="str"&&o==="f"?u=[{name:"f",textNode:M.escapeString(a)}]:l==="inlineStr"?u=[{name:"is",children:[{name:"t",textNode:M.escapeString(a)}]}]:u=[{name:"v",textNode:a}],Object.assign({},c,{children:u})}},Ej=wj,Tj=(i,e)=>{let t=[],n=0;for(let r=0;r<i.length;r++){let s=i[r];s.mergeAcross&&(t.push({pos:r,excelPos:n}),n+=s.mergeAcross),n++}if(t.length)for(let r=t.length-1;r>=0;r--){let s=[],o=i[t[r].pos];for(let a=1;a<=o.mergeAcross;a++)s.push({ref:`${yg(t[r].excelPos+1+a)}${e+1}`,styleId:o.styleId,data:{type:"empty",value:null}});s.length&&i.splice(t[r].pos+1,0,...s)}},Mj=i=>{var e;return((e=i.data)==null?void 0:e.value)!==""||i.styleId!==void 0},Aj={getTemplate(i,e,t){let{collapsed:n,hidden:r,height:s,outlineLevel:o,cells:a=[]}=i;Tj(a,e);let l=a.filter(Mj).map((c,u)=>Ej.getTemplate(c,u,t));return{name:"row",properties:{rawMap:{r:e+1,collapsed:n?"1":"0",hidden:r?"1":"0",ht:s,customHeight:s!=null?"1":"0",spans:"1:1",outlineLevel:o||void 0}},children:l}}},Pj=Aj,Dj={getTemplate(i){return{name:"mergeCell",properties:{rawMap:{ref:i}}}}},kj=Dj,Ij=(i,e,t)=>{let n=[],r=[];i.forEach((a,l)=>{let c=a.cells,u=0,d;c.forEach((h,p)=>{let m=p+u+1,g=yg(m),f=l+1;if(h.mergeAcross){u+=h.mergeAcross;let b=yg(p+u+1);n.push(`${g}${f}:${b}${f}`)}e[m-1]||(e[m-1]={});let{collapsibleRanges:y}=h;y&&y.forEach(b=>{r.push([m+b[0],m+b[1]])}),d=e[m-1],d.min=m,d.max=m,h.ref=`${g}${f}`})}),r.sort((a,l)=>a[0]!==l[0]?a[0]-l[0]:l[1]-a[1]);let s=new Map,o=new Map;return r.filter(a=>{let l=a.toString();return s.get(l)?!1:(s.set(l,!0),!0)}).forEach(a=>{let l=e.find(u=>u.min==a[0]&&u.max==a[1]),c=o.get(a[0]);e.push({min:a[0],max:a[1],outlineLevel:t?void 0:c||1,width:(l||{width:100}).width}),o.set(a[0],(c||0)+1)}),n},Fj=i=>!i||i!=="Portrait"&&i!=="Landscape"?"portrait":i.toLocaleLowerCase(),Oj=i=>{if(i==null)return 1;let t=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(i);return t===-1?1:t+1},Lj=i=>e=>(i.length&&e.children.push({name:"cols",children:i.map(t=>xj.getTemplate(t))}),e),Rj=(i,e)=>t=>(i.length&&t.children.push({name:"sheetData",children:i.map((n,r)=>Pj.getTemplate(n,r,e))}),t),Nj=i=>e=>(i.length&&e.children.push({name:"mergeCells",properties:{rawMap:{count:i.length}},children:i.map(t=>kj.getTemplate(t))}),e),Vj=i=>e=>{let{top:t=.75,right:n=.7,bottom:r=.75,left:s=.7,header:o=.3,footer:a=.3}=i;return e.children.push({name:"pageMargins",properties:{rawMap:{bottom:r,footer:a,header:o,left:s,right:n,top:t}}}),e},Bj=i=>e=>(i&&e.children.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:Fj(i.orientation),paperSize:Oj(i.pageSize)}}}),e),Gj=i=>{let e={"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F","&[Picture]":"&G"};return M.iterateObject(e,(t,n)=>{i=i.replace(t,n)}),i},Uj=i=>i==="Center"?"C":i==="Right"?"R":"L",Hj=(i,e)=>(e&&(i+="&amp;&quot;",i+=e.fontName||"Calibri",e.bold!==e.italic?i+=e.bold?",Bold":",Italic":e.bold?i+=",Bold Italic":i+=",Regular",i+="&quot;",e.size&&(i+=`&amp;${e.size}`),e.strikeThrough&&(i+="&amp;S"),e.underline&&(i+=`&amp;${e.underline==="Double"?"E":"U"}`),e.color&&(i+=`&amp;K${e.color.replace("#","").toUpperCase()}`)),i),zj=(i,e,t)=>i.reduce((n,r,s)=>{let o=Uj(r.position),a=Hj(`${n}&amp;${o}`,r.font),l=["Left","Center","Right"];r.position||(r.position=l[s]);let{image:c}=r;if(r.value==="&[Picture]"&&c){let u=`${o}${e}${t}`;Bt.addHeaderFooterImageToMap(c,u)}return`${a}${M.escapeString(Gj(r.value))}`},""),Wj=i=>{let e=["all","first","even"],t=[];return e.forEach(n=>{let r=i[n],s=n==="all"?"odd":n;if(r)for(let[o,a]of Object.entries(r)){let l=`${o.charAt(0).toUpperCase()}${o.slice(1)}`,c=o[0].toUpperCase();if(a){let u=n==="all"?"":n.toUpperCase();t.push({name:`${s}${l}`,properties:{rawMap:{"xml:space":"preserve"}},textNode:zj(a,c,u)})}}}),t},$j=i=>e=>{if(!i)return e;let t=i.first!=null?1:0,n=i.even!=null?1:0;return e.children.push({name:"headerFooter",properties:{rawMap:{differentFirst:t,differentOddEven:n}},children:Wj(i)}),e},Kj=i=>e=>(i&&e.children.push({name:"tableParts",properties:{rawMap:{count:"1"}},children:[{name:"tablePart",properties:{rawMap:{"r:id":`rId${++e.rIdCounter}`}}}]}),e),jj=i=>e=>{let t=Bt.worksheetImages.get(i);return t?.length&&e.children.push({name:"drawing",properties:{rawMap:{"r:id":`rId${++e.rIdCounter}`}}}),e},Yj=i=>e=>(Bt.worksheetHeaderFooterImages.get(i)&&e.children.push({name:"legacyDrawingHF",properties:{rawMap:{"r:id":`rId${++e.rIdCounter}`}}}),e),qj=()=>i=>(i.children.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),i),Xj=i=>e=>{let t=i.reduce((n,r)=>r.outlineLevel&&r.outlineLevel>n?r.outlineLevel:n,0);return e.children.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:t||void 0}}}),e},Zj={getTemplate(i){let{worksheet:e,currentSheet:t,config:n}=i,{margins:r={},pageSetup:s,headerFooterConfig:o,suppressColumnOutline:a}=n,{table:l}=e,{rows:c,columns:u}=l,d=u&&u.length?Ij(c,u,!!a):[],{worksheetDataTables:h}=Bt,p=h.get(t),m=M.compose(qj(),Xj(c),Lj(u),Rj(c,t+1),Nj(d),Vj(r),Bj(s),$j(o),jj(t),Yj(t),Kj(p)),{children:g}=m({children:[],rIdCounter:0});return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:g}}},Qj=Zj,Jj={getTemplate(i){let{Id:e,Type:t,Target:n}=i;return{name:"Relationship",properties:{rawMap:{Id:e,Type:t,Target:n}}}}},eY=Jj,tY={getTemplate(i){let e=i.map(t=>eY.getTemplate(t));return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:e}}},Qm=tY,iY=()=>({name:"o:shapelayout",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}]},children:[{name:"o:idmap",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:{data:"1"}}}]}),nY=()=>({name:"v:stroke",properties:{rawMap:{joinstyle:"miter"}}}),rY=i=>({name:"v:formulas",children:i.map(e=>({name:"v:f",properties:{rawMap:{eqn:e}}}))}),sY=()=>({name:"v:path",properties:{prefixedAttributes:[{prefix:"o:",map:{connecttype:"rect",extrusionok:"f"}}],rawMap:{gradientshapeok:"t"}}}),ER=i=>{let{aspectratio:e,rotation:t}=i||{},n={};return e&&(n.aspectratio="t"),t&&(n.rotation="t"),{name:"o:lock",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:n}}};function oY(i,e,t,n,r){return(i-e)/(t-e)*(r-n)+n}var aY={0:"0",5:"6554f",10:"13107f",15:"19661f",20:"26214f",25:".5",30:"39322f",35:"45875f",40:"52429f",45:"58982f",50:"1",55:"72818f",60:"1.25",65:"93623f",70:"109227f",75:"2",80:"2.5",85:"3.4",90:"5",95:"10",96:"12.5",97:"1092267f",98:"25",99:"50",100:"2147483647f"},lY=(i,e)=>{var t;let n,{recolor:r,brightness:s,contrast:o,id:a}=i;return r&&(n={},(r==="Washout"||r==="Grayscale")&&(n.gain="19661f",n.blacklevel="22938f"),(r==="Black & White"||r==="Grayscale")&&(n.grayscale="t",r==="Black & White"&&(n.bilevel="t"))),(!r||r==="Grayscale")&&(n||(n={}),o!=null&&o!==50&&(n.gain=(t=aY[o])!=null?t:"1"),s!=null&&s!==50&&(n.blacklevel=oY(s,0,100,-.5,.5).toString())),{name:"v:imagedata",properties:{prefixedAttributes:[{prefix:"o:",map:{relid:`rId${e}`,title:a}}],rawMap:n}}},cY=()=>{let i=["if lineDrawn pixelLineWidth 0","sum @0 1 0","sum 0 0 @1","prod @2 1 2","prod @3 21600 pixelWidth","prod @3 21600 pixelHeight","sum @0 0 1","prod @6 1 2","prod @7 21600 pixelWidth","sum @8 21600 0","prod @7 21600 pixelHeight","sum @10 21600 0"];return{name:"v:shapetype",properties:{prefixedAttributes:[{prefix:"o:",map:{spt:"75",preferrelative:"t"}}],rawMap:{coordsize:"21600,21600",filled:"f",id:"_x0000_t75",path:"m@4@5l@4@11@9@11@9@5xe",stroked:"f"}},children:[nY(),rY(i),sY(),ER({aspectratio:!0})]}},NF=i=>Math.floor((i??0)*.74999943307122),uY=(i,e)=>{let{width:t=0,height:n=0,altText:r}=i,s=NF(t),o=NF(n);return{name:"v:shape",properties:{rawMap:{id:i.headerFooterPosition,"o:spid":"_x0000_s1025",style:`position: absolute; margin-left: 0; margin-top: 10in; margin-bottom: 0; margin-right: 0; width: ${s}pt; height: ${o}pt; z-index: ${e+1}`,type:"#_x0000_t75",alt:r}},children:[lY(i,e+1),ER({rotation:!0})]}},dY={getTemplate(i){let e=Bt.worksheetHeaderFooterImages.get(i.sheetIndex)||[],t=[iY(),cY(),...e.map((n,r)=>uY(n,r))];return{name:"xml",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{v:"urn:schemas-microsoft-com:vml",o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel"}}]},children:t}}},hY=dY,yo=class TR{static createExcel(e,t,n){this.addSheetName(t),hj(e,this.sheetNames.length);let r=Object.assign({},n);return n.exportAsExcelTable&&(n.columnModel.isPivotActive()&&(this.showExcelTableNonCompatibleFeaturesWarning("pivot mode"),r.exportAsExcelTable=!1),n.gos.get("masterDetail")&&(this.showExcelTableNonCompatibleFeaturesWarning("master/detail"),r.exportAsExcelTable=!1)),this.processTableConfig(t,r),this.createWorksheet(t,r)}static showExcelTableNonCompatibleFeaturesWarning(e){console.warn(`AG Grid: Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
Please turn off ${e} to enable Excel table exports.`)}static getTableNameFromIndex(e){return`table${e+1}`}static getSanitizedTableName(e){return e.replace(/^[^a-zA-Z_]+/,"_").replace(/\s/g,"_").replace(/[^a-zA-Z0-9_]/g,"_")}static addTableToSheet(e,t){if(this.worksheetDataTables.has(e)){console.warn("Unable to add data table to Excel sheet: A table already exists.");return}this.worksheetDataTables.set(e,t)}static processTableConfig(e,t){var n;if(!t.exportAsExcelTable)return;let r=typeof t.exportAsExcelTable=="boolean"?{}:t.exportAsExcelTable,{name:s,showColumnStripes:o,showRowStripes:a,showFilterButton:l,highlightFirstColumn:c,highlightLastColumn:u}=r,d=this.getSanitizedTableName(s||TR.defaultTableDisplayName),h=this.sheetNames.length-1,{table:p}=e,{rows:m,columns:g}=p,f=t.columnModel.getHeaderRowCount(),y=f-1,b=m.length,v=g.length,S=[],w=[];for(let T=0;T<v;T++){let D=g[T];S.push(D.displayName||""),w.push(l==="match"||l===void 0?(n=D.filterAllowed)!=null?n:!1:l)}if(!S||!S.length||!b||!d){console.warn("Unable to add data table to Excel sheet: Missing required parameters.");return}this.addTableToSheet(h,{name:this.getTableNameFromIndex(h),displayName:d,columns:S,showFilterButtons:w,headerRowIndex:y,rowCount:b-f,showRowStripes:a??!0,showColumnStripes:o??!1,highlightFirstColumn:c??!1,highlightLastColumn:u??!1})}static addHeaderFooterImageToMap(e,t){let n=this.sheetNames.length-1,r=e;r.headerFooterPosition=t,this.buildImageMap({imageToAdd:r,idx:n});let s=this.worksheetHeaderFooterImages.get(n);s||(s=[],this.worksheetHeaderFooterImages.set(n,s)),s.find(o=>o.id===e.id)||s.push(e)}static addBodyImageToMap(e,t,n,r,s){let o=this.sheetNames.length,{row:a,column:l}=e.position||{},c=e;r&&(t!=null&&n!=null&&(!a||!l)&&(e.position||(e.position={}),e.position=Object.assign({},e.position,{row:t,column:r.indexOf(n)+1})),z$(c,r),W$(c,s)),this.buildImageMap({imageToAdd:c,idx:o});let u=this.worksheetImageIds.get(o);u||(u=new Map,this.worksheetImageIds.set(o,u));let d=this.worksheetImages.get(o);d?d.push(c):this.worksheetImages.set(o,[c]),u.get(e.id)||u.set(e.id,{index:u.size,type:e.imageType})}static buildImageMap(e){let{imageToAdd:t,idx:n}=e,r=this.images.get(t.id);if(r){let s=r.find(o=>o.sheetId===n);s?s.image.push(t):r.push({sheetId:n,image:[t]})}else this.images.set(t.id,[{sheetId:n,image:[t]}]),this.workbookImageIds.set(t.id,{type:t.imageType,index:this.workbookImageIds.size})}static addSheetName(e){let t=M.escapeString(e.name)||"",n="";for(;this.sheetNames.indexOf(`${t}${n}`)!==-1;)n===""?n="_1":n=`_${parseInt(n.slice(1),10)+1}`;e.name=`${t}${n}`,this.sheetNames.push(e.name)}static getStringPosition(e){return this.sharedStrings.has(e)?this.sharedStrings.get(e):(this.sharedStrings.set(e,this.sharedStrings.size),this.sharedStrings.size-1)}static resetFactory(){this.sharedStrings=new Map,this.images=new Map,this.worksheetImages=new Map,this.worksheetHeaderFooterImages=new Map,this.workbookImageIds=new Map,this.worksheetImageIds=new Map,this.worksheetDataTables=new Map,this.sheetNames=[],this.factoryMode=Op.SINGLE_SHEET}static createWorkbook(){return mr(Cj.getTemplate(this.sheetNames))}static createStylesheet(e){return mr(pj.getTemplate(e))}static createSharedStrings(){return mr(yK.getTemplate(this.sharedStrings))}static createCore(e){return mr(O$.getTemplate(e))}static createContentTypes(e){return mr(V$.getTemplate(e))}static createRels(){let e=Qm.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return mr(e)}static createTheme(){return mr(gK.getTemplate())}static createTable(e,t){return mr(tK.getTemplate(e,t))}static createWorkbookRels(e){let t=new Array(e).fill(void 0).map((r,s)=>({Id:`rId${s+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:`worksheets/sheet${s+1}.xml`})),n=Qm.getTemplate([...t,{Id:`rId${e+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:`rId${e+2}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:`rId${e+3}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]);return mr(n)}static createDrawing(e){return mr(J$.getTemplate({sheetIndex:e}))}static createDrawingRel(e){let t=this.worksheetImageIds.get(e)||[],n=[];for(let[r,s]of t)n.push({Id:`rId${s.index+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/image${this.workbookImageIds.get(r).index+1}.${s.type}`});return mr(Qm.getTemplate(n))}static createVmlDrawing(e){return mr(hY.getTemplate({sheetIndex:e}),!0)}static createVmlDrawingRel(e){let t=this.worksheetHeaderFooterImages.get(e)||[],n=[];for(let r=0;r<t.length;r++){let s=t[r],o=this.workbookImageIds.get(s.id);if(!o)continue;let{index:a,type:l}=o,c=l==="jpg"?"jpeg":l;n.push({Id:`rId${r+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/image${a+1}.${c}`})}return mr(Qm.getTemplate(n))}static createRelationships({drawingIndex:e,vmlDrawingIndex:t,tableIndex:n}={}){if(e===void 0&&t===void 0&&n===void 0)return"";let r=[];e!=null&&r.push({Id:`rId${r.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/drawing${e+1}.xml`}),t!=null&&r.push({Id:`rId${r.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Target:`../drawings/vmlDrawing${t+1}.vml`}),n!=null&&r.push({Id:`rId${r.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table",Target:`../tables/${this.getTableNameFromIndex(n)}.xml`});let s=Qm.getTemplate(r);return mr(s)}static createWorksheet(e,t){return mr(Qj.getTemplate({worksheet:e,currentSheet:this.sheetNames.length-1,config:t}))}};yo.sharedStrings=new Map;yo.sheetNames=[];yo.images=new Map;yo.worksheetImages=new Map;yo.worksheetHeaderFooterImages=new Map;yo.workbookImageIds=new Map;yo.worksheetImageIds=new Map;yo.worksheetDataTables=new Map;yo.defaultTableDisplayName="AG-GRID-TABLE";yo.factoryMode=Op.SINGLE_SHEET;var Bt=yo,pY=class extends mM{constructor(i){super(i),this.mixedStyles={},this.mixedStyleCounter=0,this.rows=[],this.config=Object.assign({},i),this.stylesByIds={},this.config.baseExcelStyles.forEach(e=>{this.stylesByIds[e.id]=e}),this.excelStyles=[...this.config.baseExcelStyles,{id:"_quotePrefix",quotePrefix:1}]}addCustomContent(i){i.forEach(e=>{let t=this.rows.length+1,n;!this.config.suppressRowOutline&&e.outlineLevel!=null&&(n=e.outlineLevel);let r={height:ry(t,e.height||this.config.rowHeight),cells:(e.cells||[]).map((s,o)=>{var a,l,c;let u=this.addImage(t,this.columnsToExport[o],(a=s.data)==null?void 0:a.value),d=null;s.styleId&&(d=typeof s.styleId=="string"?[s.styleId]:s.styleId);let h=this.getStyleId(d);if(u)return this.createCell(h,this.getDataTypeForValue(u.value),u.value==null?"":u.value);let p=(c=(l=s.data)==null?void 0:l.value)!=null?c:"",m=this.getDataTypeForValue(p);return s.mergeAcross?this.createMergedCell(h,m,p,s.mergeAcross):this.createCell(h,m,p)}),outlineLevel:n};e.collapsed!=null&&(r.collapsed=e.collapsed),e.hidden!=null&&(r.hidden=e.hidden),this.rows.push(r)})}onNewHeaderGroupingRow(){let i=[];return this.rows.push({cells:i,height:ry(this.rows.length+1,this.config.headerRowHeight)}),{onColumn:(e,t,n,r,s)=>{let o=this.config.styleLinker({rowType:Kc.HEADER_GROUPING,rowIndex:1,value:`grouping-${t}`,columnGroup:e});i.push(u1(c1({},this.createMergedCell(this.getStyleId(o),this.getDataTypeForValue("string"),t,r)),{collapsibleRanges:s}))}}}onNewHeaderRow(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)}onNewBodyRow(i){let e=this.onNewRow(this.onNewBodyColumn,this.config.rowHeight);return i&&this.addRowOutlineIfNecessary(i),e}prepare(i){super.prepare(i),this.columnsToExport=[...i],this.cols=i.map((e,t)=>this.convertColumnToExcel(e,t))}parse(){let i=this.rows.reduce((t,n)=>Math.max(t,n.cells.length),0);for(;this.cols.length<i;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));let e={name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}};return this.createExcel(e)}addRowOutlineIfNecessary(i){let{gos:e,suppressRowOutline:t,rowGroupExpandState:n="expanded"}=this.config;if(e.get("groupHideOpenParents")||t||i.level==null)return;let s=i.footer?1:0,o=M.last(this.rows);if(o.outlineLevel=i.level+s,n==="expanded")return;let a=n==="collapsed";if(i.isExpandable()){let l=!a&&i.expanded;o.collapsed=!l}o.hidden=!!i.parent&&i.parent.level!==-1&&(a||this.isAnyParentCollapsed(i.parent))}isAnyParentCollapsed(i){for(;i&&i.level!==-1;){if(!i.expanded)return!0;i=i.parent}return!1}convertColumnToExcel(i,e){let t=this.config.columnWidth,n=i?this.extractHeaderValue(i):void 0,r=n??"",s=i?i.isFilterAllowed():!1;return t?typeof t=="number"?{width:t,displayName:r,filterAllowed:s}:{width:t({column:i,index:e}),displayName:r,filterAllowed:s}:i?{width:Math.max(i.getActualWidth(),75),displayName:r,filterAllowed:s}:{displayName:r,filterAllowed:s}}onNewHeaderColumn(i,e){return t=>{let n=this.extractHeaderValue(t),r=this.config.styleLinker({rowType:Kc.HEADER,rowIndex:i,value:n,column:t});e.push(this.createCell(this.getStyleId(r),this.getDataTypeForValue("string"),n))}}onNewBodyColumn(i,e){let t=0;return(n,r,s)=>{if(t>0){t-=1;return}let{value:o,valueFormatted:a}=this.extractRowCellValue(n,r,i,"excel",s),l=this.config.styleLinker({rowType:Kc.BODY,rowIndex:i,value:o,column:n,node:s}),c=this.getStyleId(l),u=n.getColSpan(s),d=this.addImage(i,n,o);d?e.push(this.createCell(c,this.getDataTypeForValue(d.value),d.value==null?"":d.value)):u>1?(t=u-1,e.push(this.createMergedCell(c,this.getDataTypeForValue(o),o,u-1))):e.push(this.createCell(c,this.getDataTypeForValue(o),o,a))}}onNewRow(i,e){let t=[];return this.rows.push({cells:t,height:ry(this.rows.length+1,e)}),{onColumn:i.bind(this,this.rows.length,t)()}}createExcel(i){let{excelStyles:e,config:t}=this;return Bt.createExcel(e,i,t)}getDataTypeForValue(i){return i===void 0?"empty":this.isNumerical(i)?"n":"s"}getTypeFromStyle(i,e){if(this.isFormula(e))return"f";if(i&&i.dataType)switch(i.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:console.warn(`AG Grid: Unrecognized data type for excel export [${i.id}.dataType=${i.dataType}]`)}return null}addImage(i,e,t){if(!this.config.addImageToCell)return;let n=this.config.addImageToCell(i,e,t);if(n)return Bt.addBodyImageToMap(n.image,i,e,this.columnsToExport,this.config.rowHeight),n}createCell(i,e,t,n){let r=this.getStyleById(i);!r?.dataType&&e==="s"&&n&&(t=n);let s=this.getTypeFromStyle(r,t)||e,{value:o,escaped:a}=this.getCellValue(s,t),l=[];return r&&l.push(i),a&&l.push("_quotePrefix"),i=this.getStyleId(l)||void 0,{styleId:i,data:{type:s,value:o}}}createMergedCell(i,e,t,n){let r=t??"";return{styleId:this.getStyleById(i)?i:void 0,data:{type:e,value:e==="s"?Bt.getStringPosition(r).toString():t},mergeAcross:n}}getCellValue(i,e){let t=!1;if(e==null&&(i="s",e=""),i==="s")e&&e[0]==="'"&&(t=!0,e=e.slice(1)),e=Bt.getStringPosition(e).toString();else if(i==="f")e=e.slice(1);else if(i==="n"){let n=Number(e);isNaN(n)?e="":e!==""&&(e=n.toString())}return{value:e,escaped:t}}getStyleId(i){if(!i||!i.length)return null;if(i.length===1)return i[0];let e=i.join("-");return this.mixedStyles[e]||this.addNewMixedStyle(i),this.mixedStyles[e].excelID}deepCloneObject(i){return JSON.parse(JSON.stringify(i))}addNewMixedStyle(i){this.mixedStyleCounter+=1;let e=`mixedStyle${this.mixedStyleCounter}`,t={};for(let r of i)for(let s of this.excelStyles)s.id===r&&M.mergeDeep(t,this.deepCloneObject(s));t.id=e,t.name=e;let n=i.join("-");this.mixedStyles[n]={excelID:e,key:n,result:t},this.excelStyles.push(t),this.stylesByIds[e]=t}isFormula(i){return i==null?!1:this.config.autoConvertFormulas&&i.toString().startsWith("=")}isNumerical(i){return typeof i=="bigint"?!0:isFinite(i)&&i!==""&&!isNaN(parseFloat(i))}getStyleById(i){return i==null?null:this.stylesByIds[i]||null}},mY=()=>{Yi.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]);let{images:i}=Bt;if(!i.size)return;Yi.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);let e=0;i.forEach(t=>{let n=t[0].image[0],{base64:r,imageType:s}=n,o=s==="jpg"?"jpeg":s;Yi.addFile(`xl/media/image${++e}.${o}`,r,!0)})},gY=i=>{let e=0,t=0,n=0,{images:r,worksheetDataTables:s,worksheetImages:o,worksheetHeaderFooterImages:a}=Bt;for(let l=0;l<i.length;l++){let c=i[l];Yi.addFile(`xl/worksheets/sheet${l+1}.xml`,c,!1);let u=r.size>0&&o.has(l),d=s.size>0&&s.has(l),h=r.size&&a.has(l);if(!u&&!d&&!h)continue;let p,m,g;u&&(fY(l,e),m=e,e++),h&&(vY(l,t),g=t,t++),d&&(p=n++);let f=`xl/worksheets/_rels/sheet${l+1}.xml.rels`;Yi.addFile(f,Bt.createRelationships({tableIndex:p,drawingIndex:m,vmlDrawingIndex:g}))}},fY=(i,e)=>{let t="xl/drawings",n=`${t}/drawing${e+1}.xml`,r=`${t}/_rels/drawing${e+1}.xml.rels`;Yi.addFile(r,Bt.createDrawingRel(i)),Yi.addFile(n,Bt.createDrawing(i))},vY=(i,e)=>{let t="xl/drawings",n=`${t}/vmlDrawing${e+1}.vml`,r=`${t}/_rels/vmlDrawing${e+1}.vml.rels`;Yi.addFile(n,Bt.createVmlDrawing(i)),Yi.addFile(r,Bt.createVmlDrawingRel(i))},yY=()=>{let{worksheetDataTables:i}=Bt,e=i,t=Array.from(e.keys());for(let n=0;n<t.length;n++){let r=t[n],s=e.get(r);s&&Yi.addFile(`xl/tables/${s.name}.xml`,Bt.createTable(s,n))}},CY=(i,e,t)=>{Yi.addFile("xl/workbook.xml",Bt.createWorkbook()),Yi.addFile("xl/styles.xml",Bt.createStylesheet(i)),Yi.addFile("xl/sharedStrings.xml",Bt.createSharedStrings()),Yi.addFile("xl/theme/theme1.xml",Bt.createTheme()),Yi.addFile("xl/_rels/workbook.xml.rels",Bt.createWorkbookRels(t)),Yi.addFile("docProps/core.xml",Bt.createCore(e)),Yi.addFile("[Content_Types].xml",Bt.createContentTypes(t)),Yi.addFile("_rels/.rels",Bt.createRels())},MR=(i,e={})=>{if(!i||i.length===0)return console.warn("AG Grid: Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty."),Bt.resetFactory(),!1;let{fontSize:t=11,author:n="AG Grid"}=e;return mY(),yY(),gY(i),CY(t,n,i.length),Bt.resetFactory(),!0},AR=i=>{let{data:e,fontSize:t,author:n}=i,r=i.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";return MR(e,{author:n,fontSize:t})?Yi.getZipFile(r):Promise.resolve(void 0)},h_=i=>{let{data:e,fontSize:t,author:n}=i,r=i.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";if(MR(e,{author:n,fontSize:t}))return Yi.getUncompressedZipFile(r)},PR=i=>{let{fileName:e="export.xlsx"}=i;AR(i).then(t=>{if(t){let n=typeof e=="function"?e():e;ib.download(n,t)}})},al=class extends pM{postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(i){let e=this.gos.get("defaultExcelExportParams");return Object.assign({},e,i)}export(i){if(this.isExportSuppressed()){console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");return}let e=this.getMergedParams(i),n={data:[this.getData(e)],fontSize:e.fontSize,author:e.author,mimeType:e.mimeType};this.packageCompressedFile(n).then(r=>{if(r){let{fileName:s}=e,o=typeof s=="function"?s(this.gos.getGridCommonParams()):s;ib.download(this.getFileName(o),r)}})}exportDataAsExcel(i){this.export(i)}getDataAsExcel(i){let e=this.getMergedParams(i),n={data:[this.getData(e)],fontSize:e.fontSize,author:e.author,mimeType:e.mimeType};return this.packageFile(n)}setFactoryMode(i){Bt.factoryMode=i}getFactoryMode(){return Bt.factoryMode}getSheetDataForExcel(i){let e=this.getMergedParams(i);return this.getData(e)}getMultipleSheetsAsExcel(i){return h_(i)}exportMultipleSheetsAsExcel(i){PR(i)}getDefaultFileExtension(){return"xlsx"}createSerializingSession(i){let{columnModel:e,valueService:t,gos:n}=this,r;if(i.sheetName!=null){let{sheetName:o}=i,a=typeof o=="function"?o(this.gos.getGridCommonParams()):o;r=String(a).substring(0,31)}else r="ag-grid";let s=u1(c1({},i),{sheetName:r,columnModel:e,valueService:t,gos:n,suppressRowOutline:i.suppressRowOutline||i.skipRowGroups,headerRowHeight:i.headerRowHeight||i.rowHeight,baseExcelStyles:this.gos.get("excelStyles")||[],styleLinker:this.styleLinker.bind(this)});return new pY(s)}styleLinker(i){let{rowType:e,rowIndex:t,value:n,column:r,columnGroup:s,node:o}=i,a=e===Kc.HEADER,l=e===Kc.HEADER_GROUPING,c=a?r:s,u=[];if(a||l)return u.push("header"),l&&u.push("headerGroup"),c&&(u=u.concat(_l.getHeaderClassesFromColDef(c.getDefinition(),this.gos,r||null,s||null))),u;let d=this.gos.get("excelStyles"),h=["cell"];if(!d||!d.length)return h;let p=d.map(m=>m.id);return this.stylingService.processAllCellClasses(r.getDefinition(),this.gos.addGridCommonParams({value:n,data:o.data,node:o,colDef:r.getDefinition(),column:r,rowIndex:t}),m=>{p.indexOf(m)>-1&&h.push(m)}),h.sort((m,g)=>p.indexOf(m)<p.indexOf(g)?-1:1)}isExportSuppressed(){return this.gos.get("suppressExcelExport")}packageCompressedFile(i){return AR(i)}packageFile(i){return h_(i)}};ju([k("columnModel")],al.prototype,"columnModel",2);ju([k("valueService")],al.prototype,"valueService",2);ju([k("stylingService")],al.prototype,"stylingService",2);ju([k("gridSerializer")],al.prototype,"gridSerializer",2);ju([k("gridOptionsService")],al.prototype,"gos",2);ju([J],al.prototype,"postConstruct",1);al=ju([De("excelCreator")],al);var bY="31.3.4",DR={version:bY,moduleName:qe.ExcelExportModule,beans:[al,fM,gM],dependantModules:[bd,Tn]},kR=Object.defineProperty,SY=Object.getOwnPropertyDescriptor,VF=Object.getOwnPropertySymbols,xY=Object.prototype.hasOwnProperty,_Y=Object.prototype.propertyIsEnumerable,BF=(i,e,t)=>e in i?kR(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,GF=(i,e)=>{for(var t in e||(e={}))xY.call(e,t)&&BF(i,t,e[t]);if(VF)for(var t of VF(e))_Y.call(e,t)&&BF(i,t,e[t]);return i},Qi=(i,e,t,n)=>{for(var r=n>1?void 0:n?SY(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&kR(e,t,r),r},dp=class extends ae{preConstruct(){this.setTemplate(`<div class="ag-filter-toolpanel-search" role="presentation">
                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>
                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>
            </div>`)}postConstruct(){let i=this.localeService.getLocaleTextFunc();this.eFilterTextField.setAutoComplete(!1).setInputAriaLabel(i("ariaFilterColumnsInput","Filter Columns Input")).onValueChange(this.onSearchTextChanged.bind(this)),this.createExpandIcons(),this.setExpandState(0),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,X.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))}init(i){this.params=i,this.columnModel.isReady()&&this.showOrHideOptions()}createExpandIcons(){this.eExpand.appendChild(this.eExpandChecked=M.createIconNoSpan("columnSelectOpen",this.gos)),this.eExpand.appendChild(this.eExpandUnchecked=M.createIconNoSpan("columnSelectClosed",this.gos)),this.eExpand.appendChild(this.eExpandIndeterminate=M.createIconNoSpan("columnSelectIndeterminate",this.gos))}showOrHideOptions(){let i=!this.params.suppressFilterSearch,e=!this.params.suppressExpandAll,t=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(t("searchOoo","Search..."));let n=s=>s.getOriginalParent()&&s.isFilterAllowed(),r=this.columnModel.getAllGridColumns().some(n);M.setDisplayed(this.eFilterTextField.getGui(),i),M.setDisplayed(this.eExpand,e&&r)}onSearchTextChanged(){this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=M.debounce(()=>{this.dispatchEvent({type:"searchChanged",searchText:this.eFilterTextField.getValue()})},300)),this.onSearchTextChangedDebounced()}onExpandClicked(){let i=this.currentExpandState===0?{type:"collapseAll"}:{type:"expandAll"};this.dispatchEvent(i)}setExpandState(i){this.currentExpandState=i,M.setDisplayed(this.eExpandChecked,this.currentExpandState===0),M.setDisplayed(this.eExpandUnchecked,this.currentExpandState===1),M.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===2)}};Qi([k("columnModel")],dp.prototype,"columnModel",2);Qi([ce("eExpand")],dp.prototype,"eExpand",2);Qi([ce("eFilterTextField")],dp.prototype,"eFilterTextField",2);Qi([Po],dp.prototype,"preConstruct",1);Qi([J],dp.prototype,"postConstruct",1);var ul=(()=>{let i=class IR extends ae{constructor(t,n){super(IR.TEMPLATE),this.expandedCallback=n,this.expanded=!1,this.hideHeader=t}postConstruct(){this.eExpandChecked=M.createIconNoSpan("columnSelectOpen",this.gos),this.eExpandUnchecked=M.createIconNoSpan("columnSelectClosed",this.gos),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)}setColumn(t){this.column=t,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eventService,X.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),M.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),M.setDisplayed(this.eExpandChecked,!1),this.hideHeader?(M.setDisplayed(this.eFilterToolPanelHeader,!1),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,Ii.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))}onKeyDown(t){let{key:n}=t,{ENTER:r,SPACE:s,LEFT:o,RIGHT:a}=Xe;n!==r&&n!==s&&n!==o&&n!==a||(t.preventDefault(),n===r||n===s?this.toggleExpanded():n===Xe.LEFT?this.collapse():this.expand())}getColumn(){return this.column}getColumnFilterName(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)}addCssClassToTitleBar(t){this.eFilterToolPanelHeader.classList.add(t)}addInIcon(t,n,r){if(n==null)return;let s=M.createIconNoSpan(t,this.gos,r);n.appendChild(s)}isFilterActive(){return this.filterManager.isFilterActive(this.column)}onFilterChanged(){M.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),this.dispatchEvent({type:Ii.EVENT_FILTER_CHANGED})}toggleExpanded(){this.expanded?this.collapse():this.expand()}expand(){this.expanded||(this.expanded=!0,M.setAriaExpanded(this.eFilterToolPanelHeader,!0),M.setDisplayed(this.eExpandChecked,!0),M.setDisplayed(this.eExpandUnchecked,!1),this.addFilterElement(),this.expandedCallback())}addFilterElement(t){var n;let r=M.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),s=this.createManagedBean(new xl(this.column,"TOOLBAR"));this.filterWrapperComp=s,s.hasFilter()&&((n=s.getFilter())==null||n.then(o=>{this.underlyingFilter=o,o&&(r.appendChild(s.getGui()),this.agFilterToolPanelBody.appendChild(r),s.afterGuiAttached({container:"toolPanel",suppressFocus:t}))}))}collapse(){var t;this.expanded&&(this.expanded=!1,M.setAriaExpanded(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),M.setDisplayed(this.eExpandChecked,!1),M.setDisplayed(this.eExpandUnchecked,!0),(t=this.filterWrapperComp)==null||t.afterGuiDetached(),this.destroyBean(this.filterWrapperComp),this.expandedCallback())}removeFilterElement(){M.clearElement(this.agFilterToolPanelBody)}isExpanded(){return this.expanded}refreshFilter(t){var n;if(!this.expanded)return;let r=this.underlyingFilter;r&&(t?typeof r.refreshVirtualList=="function"&&r.refreshVirtualList():(n=r.afterGuiDetached)==null||n.call(r))}onFilterOpened(t){t.source==="COLUMN_MENU"&&t.column===this.column&&this.expanded&&this.collapse()}};return i.TEMPLATE=`
        <div class="ag-filter-toolpanel-instance">
            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">
                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>
                <span ref="eFilterName" class="ag-header-cell-text"></span>
                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>
            </div>
            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>
        </div>`,i})();Qi([ce("eFilterToolPanelHeader")],ul.prototype,"eFilterToolPanelHeader",2);Qi([ce("eFilterName")],ul.prototype,"eFilterName",2);Qi([ce("agFilterToolPanelBody")],ul.prototype,"agFilterToolPanelBody",2);Qi([ce("eFilterIcon")],ul.prototype,"eFilterIcon",2);Qi([ce("eExpand")],ul.prototype,"eExpand",2);Qi([k("filterManager")],ul.prototype,"filterManager",2);Qi([k("columnModel")],ul.prototype,"columnModel",2);Qi([J],ul.prototype,"postConstruct",1);var FR=ul,kg=(()=>{let i=class p_ extends ae{constructor(t,n,r,s,o){super(),this.columnGroup=t,this.childFilterComps=n,this.depth=s,this.expandedCallback=r,this.showingColumn=o}preConstruct(){let t={cssIdentifier:"filter-toolpanel",direction:"vertical"};this.setTemplate(p_.TEMPLATE,{filterGroupComp:t})}init(){this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass(`ag-filter-toolpanel-group-level-${this.depth}`),this.filterGroupComp.addCssClassToTitleBar(`ag-filter-toolpanel-group-level-${this.depth}-header`),this.childFilterComps.forEach(t=>{this.filterGroupComp.addItem(t),t.addCssClassToTitleBar(`ag-filter-toolpanel-group-level-${this.depth+1}-header`)}),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip(),this.addInIcon("filter")}setupTooltip(){if(!this.showingColumn)return;let t=this.gos.get("tooltipShowMode")==="whenTruncated",n;t&&(n=()=>{let o=this.filterGroupComp.getGui().querySelector(".ag-group-title");return o?o.scrollWidth>o.clientWidth:!0});let r=()=>{let s=this.columnGroup.getColDef().headerTooltip;this.setTooltip({newTooltipText:s,location:"filterToolPanelColumnGroup",shouldDisplayTooltip:n})};r(),this.addManagedListener(this.eventService,X.EVENT_NEW_COLUMNS_LOADED,r)}getTooltipParams(){let t=super.getTooltipParams();return t.location="filterToolPanelColumnGroup",t}addCssClassToTitleBar(t){this.filterGroupComp.addCssClassToTitleBar(t)}refreshFilters(t){this.childFilterComps.forEach(n=>{n instanceof p_?n.refreshFilters(t):n.refreshFilter(t)})}isColumnGroup(){return this.columnGroup instanceof gn}isExpanded(){return this.filterGroupComp.isExpanded()}getChildren(){return this.childFilterComps}getFilterGroupName(){return this.filterGroupName?this.filterGroupName:""}getFilterGroupId(){return this.columnGroup.getId()}hideGroupItem(t,n){this.filterGroupComp.hideItem(t,n)}hideGroup(t){this.setDisplayed(!t)}addInIcon(t){let n=M.createIconNoSpan(t,this.gos);n&&n.classList.add("ag-filter-toolpanel-group-instance-header-icon"),this.filterGroupComp.addTitleBarWidget(n)}forEachToolPanelFilterChild(t){this.childFilterComps.forEach(n=>{n instanceof FR&&t(n)})}addExpandCollapseListeners(){let t=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(r=>r.expand()),n=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(r=>r.collapse());this.addManagedListener(this.filterGroupComp,vn.EVENT_EXPANDED,t),this.addManagedListener(this.filterGroupComp,vn.EVENT_COLLAPSED,n)}getColumns(){return this.columnGroup instanceof gn?this.columnGroup.getLeafColumns():[this.columnGroup]}addFilterChangedListeners(){this.getColumns().forEach(t=>{this.addManagedListener(t,Ii.EVENT_FILTER_CHANGED,()=>this.refreshFilterClass())}),this.columnGroup instanceof gn||this.addManagedListener(this.eventService,X.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))}refreshFilterClass(){let t=this.getColumns(),n=()=>t.some(r=>r.isFilterActive());this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",n())}onFilterOpened(t){t.source==="COLUMN_MENU"&&t.column===this.columnGroup&&this.isExpanded()&&this.collapse()}expand(){this.filterGroupComp.toggleGroupExpand(!0)}collapse(){this.filterGroupComp.toggleGroupExpand(!1)}setGroupTitle(){this.filterGroupName=this.columnGroup instanceof gn?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")}getColumnGroupName(t){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,t,"filterToolPanel")}getColumnName(t){return this.columnModel.getDisplayNameForColumn(t,"filterToolPanel",!1)}destroyFilters(){this.childFilterComps=this.destroyBeans(this.childFilterComps),M.clearElement(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}};return i.TEMPLATE=`<div class="ag-filter-toolpanel-group-wrapper">
            <ag-group-component ref="filterGroupComp"></ag-group-component>
        </div>`,i})();Qi([ce("filterGroupComp")],kg.prototype,"filterGroupComp",2);Qi([k("columnModel")],kg.prototype,"columnModel",2);Qi([Po],kg.prototype,"preConstruct",1);Qi([J],kg.prototype,"init",1);var sc=kg,d1=(()=>{let i=class OR extends ae{constructor(){super(OR.TEMPLATE),this.initialised=!1,this.hasLoadedInitialState=!1,this.isInitialState=!1,this.filterGroupComps=[],this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending=!1}init(t){this.initialised=!0;let n=this.gos.addGridCommonParams({suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1});M.mergeDeep(n,t),this.params=n,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,X.EVENT_COLUMN_MOVED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,X.EVENT_NEW_COLUMNS_LOADED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,X.EVENT_TOOL_PANEL_VISIBLE_CHANGED,r=>{r.key==="filters"&&this.refreshFilters(r.visible)}),this.addManagedListener(this.eventService,X.EVENT_DRAG_STARTED,()=>{this.suppressOnColumnsChanged=!0}),this.addManagedListener(this.eventService,X.EVENT_DRAG_STOPPED,()=>{this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending&&(this.onColumnsChangedPending=!1,this.onColumnsChanged())}),this.columnModel.isReady()&&this.onColumnsChanged()}onColumnsChanged(){if(this.suppressOnColumnsChanged){this.onColumnsChangedPending=!0;return}let t=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!t?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs(),this.refreshAriaLabel()}syncFilterLayout(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this)),this.refreshAriaLabel()}buildTreeFromProvidedColumnDefs(){let t=this.columnModel.getPrimaryColumnTree();this.recreateFilters(t)}setFiltersLayout(t){let n=this.toolPanelColDefService.createColumnTree(t);this.recreateFilters(n)}recreateFilters(t){let n=this.gos.getActiveDomElement();this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);let r=this.getExpansionState();this.destroyFilters(),this.filterGroupComps=this.recursivelyAddComps(t,0,r);let s=this.filterGroupComps.length;s&&(this.filterGroupComps.forEach(o=>this.appendChild(o)),this.setFirstAndLastVisible(0,s-1)),M.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent(),this.getGui().contains(n)&&n.focus(),this.isInitialState=!1,this.refreshAriaLabel()}recursivelyAddComps(t,n,r){return M.flatten(t.map(s=>{if(s instanceof gn)return M.flatten(this.recursivelyAddFilterGroupComps(s,n,r));let o=s;if(!this.shouldDisplayFilter(o))return[];let a=n===0,l=new FR(a,()=>this.onFilterExpanded());if(this.createBean(l),l.setColumn(o),r.get(o.getId())&&l.expand(),n>0)return l;let c=this.createBean(new sc(o,[l],this.onGroupExpanded.bind(this),n,!0));return c.addCssClassToTitleBar("ag-filter-toolpanel-header"),r.get(c.getFilterGroupId())||c.collapse(),c}))}refreshAriaLabel(){let t=this.localeService.getLocaleTextFunc(),n=t("ariaFilterPanelList","Filter List"),r=t("filters","Filters"),u=this.getGui().querySelectorAll(".ag-filter-toolpanel-group-item:not(.ag-filter-toolpanel-group-wrapper, .ag-hidden)").length;M.setAriaLabel(this.getAriaElement(),`${n} ${u} ${r}`)}recursivelyAddFilterGroupComps(t,n,r){if(!this.filtersExistInChildren(t.getChildren()))return;let s=t.getColGroupDef();if(s&&s.suppressFiltersToolPanel)return[];let o=t.isPadding()?n:n+1,a=M.flatten(this.recursivelyAddComps(t.getChildren(),o,r));if(t.isPadding())return a;let l=new sc(t,a,this.onGroupExpanded.bind(this),n,!1);this.createBean(l),l.addCssClassToTitleBar("ag-filter-toolpanel-header");let c=r.get(l.getFilterGroupId());return(this.isInitialState&&!c||c===!1)&&l.collapse(),[l]}filtersExistInChildren(t){return t.some(n=>n instanceof gn?this.filtersExistInChildren(n.getChildren()):this.shouldDisplayFilter(n))}shouldDisplayFilter(t){let n=t.getColDef()&&t.getColDef().suppressFiltersToolPanel;return t.isFilterAllowed()&&!n}getExpansionState(){let t=new Map;if(this.isInitialState){let{expandedColIds:r,expandedGroupIds:s}=this.params.initialState;return r.forEach(o=>t.set(o,!0)),s.forEach(o=>t.set(o,!0)),t}let n=r=>{t.set(r.getFilterGroupId(),r.isExpanded()),r.getChildren().forEach(s=>{s instanceof sc?n(s):t.set(s.getColumn().getId(),s.isExpanded())})};return this.filterGroupComps.forEach(n),t}refresh(){}setVisible(t){super.setDisplayed(t),t&&!this.initialised&&this.init(this.params)}expandFilterGroups(t,n){let r=[],s=o=>{let a=o.getFilterGroupId();(!n||M.includes(n,a))&&(t&&o.isColumnGroup()?o.expand():o.collapse(),r.push(a)),o.getChildren().forEach(c=>{c instanceof sc&&s(c)})};if(this.filterGroupComps.forEach(s),this.onGroupExpanded(),n){let o=n.filter(a=>r.indexOf(a)<0);o.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",o)}}expandFilters(t,n){let r=[],s=o=>{if(o instanceof sc){let c=!1;return o.getChildren().forEach(u=>{s(u)&&(t?(o.expand(),c=!0):o.isColumnGroup()||o.collapse())}),c}let a=o.getColumn().getColId(),l=!n||M.includes(n,a);return l&&(t?o.expand():o.collapse(),r.push(a)),l};if(this.filterGroupComps.forEach(s),this.onGroupExpanded(),n){let o=n.filter(a=>r.indexOf(a)<0);o.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",o)}}onGroupExpanded(){this.fireExpandedEvent()}onFilterExpanded(){this.dispatchEvent({type:"filterExpanded"})}fireExpandedEvent(){let t=0,n=0,r=o=>{o.isColumnGroup()&&(o.isExpanded()?t++:n++,o.getChildren().forEach(a=>{a instanceof sc&&r(a)}))};this.filterGroupComps.forEach(r);let s;t>0&&n>0?s=2:n>0?s=1:s=0,this.dispatchEvent({type:"groupExpanded",state:s})}performFilterSearch(t){this.searchFilterText=M.exists(t)?t.toLowerCase():null,this.searchFilters(this.searchFilterText)}searchFilters(t){let n=a=>!M.exists(t)||a.toLowerCase().indexOf(t)!==-1,r=(a,l)=>{if(!(a instanceof sc))return n(a.getColumnFilterName()||"");let c=a.getChildren(),u=n(a.getFilterGroupName()),d=l||u;if(d){a.hideGroup(!1);for(let p=0;p<c.length;p++)r(c[p],d),a.hideGroupItem(!1,p);return!0}let h=!1;return c.forEach((p,m)=>{let g=r(p,l);a.hideGroupItem(!g,m),g&&(h=!0)}),a.hideGroup(!h),h},s,o;this.filterGroupComps.forEach((a,l)=>{r(a,!1),s===void 0?a.containsCssClass("ag-hidden")||(s=l,o=l):!a.containsCssClass("ag-hidden")&&o!==l&&(o=l)}),this.setFirstAndLastVisible(s,o),this.refreshAriaLabel()}setFirstAndLastVisible(t,n){this.filterGroupComps.forEach((r,s)=>{r.removeCssClass("ag-first-group-visible"),r.removeCssClass("ag-last-group-visible"),s===t&&r.addCssClass("ag-first-group-visible"),s===n&&r.addCssClass("ag-last-group-visible")})}refreshFilters(t){this.filterGroupComps.forEach(n=>n.refreshFilters(t))}getExpandedFiltersAndGroups(){let t=[],n=new Set,r=s=>{if(s instanceof sc){s.getChildren().forEach(a=>r(a));let o=s.getFilterGroupId();s.isExpanded()&&!n.has(o)&&t.push(o)}else s.isExpanded()&&n.add(s.getColumn().getColId())};return this.filterGroupComps.forEach(r),{expandedGroupIds:t,expandedColIds:Array.from(n)}}destroyFilters(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),M.clearElement(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}};return i.TEMPLATE='<div class="ag-filter-list-panel"></div>',i})();Qi([k("toolPanelColDefService")],d1.prototype,"toolPanelColDefService",2);Qi([k("columnModel")],d1.prototype,"columnModel",2);var wY=d1,h1=(()=>{let i=class LR extends ae{constructor(){super(LR.TEMPLATE),this.initialised=!1,this.listenerDestroyFuncs=[]}init(t){this.initialised&&(this.listenerDestroyFuncs.forEach(o=>o()),this.listenerDestroyFuncs=[]),this.initialised=!0;let n=this.gos.addGridCommonParams({suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1});this.params=GF(GF({},n),t),this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params);let r=this.params.suppressExpandAll,s=this.params.suppressFilterSearch;r&&s&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"filterExpanded",this.onFilterExpanded.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))}setVisible(t){super.setDisplayed(t),t&&!this.initialised&&this.init(this.params)}onExpandAll(){this.filtersToolPanelListPanel.expandFilterGroups(!0)}onCollapseAll(){this.filtersToolPanelListPanel.expandFilterGroups(!1)}onSearchChanged(t){this.filtersToolPanelListPanel.performFilterSearch(t.searchText)}setFilterLayout(t){this.filtersToolPanelListPanel.setFiltersLayout(t)}onFilterExpanded(){this.params.onStateUpdated()}onGroupExpanded(t){this.filtersToolPanelHeaderPanel.setExpandState(t.state),this.params.onStateUpdated()}expandFilterGroups(t){this.filtersToolPanelListPanel.expandFilterGroups(!0,t)}collapseFilterGroups(t){this.filtersToolPanelListPanel.expandFilterGroups(!1,t)}expandFilters(t){this.filtersToolPanelListPanel.expandFilters(!0,t)}collapseFilters(t){this.filtersToolPanelListPanel.expandFilters(!1,t)}syncLayoutWithGrid(){this.filtersToolPanelListPanel.syncFilterLayout()}refresh(t){return this.init(t),!0}getState(){return this.filtersToolPanelListPanel.getExpandedFiltersAndGroups()}destroy(){super.destroy()}};return i.TEMPLATE=`<div class="ag-filter-toolpanel">
            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>
            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>
         </div>`,i})();Qi([ce("filtersToolPanelHeaderPanel")],h1.prototype,"filtersToolPanelHeaderPanel",2);Qi([ce("filtersToolPanelListPanel")],h1.prototype,"filtersToolPanelListPanel",2);var EY=h1,TY="31.3.4",RR={version:TY,moduleName:qe.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:dp},{componentName:"AgFiltersToolPanelList",componentClass:wY}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:EY}],dependantModules:[zy,Tn]},NR=Object.defineProperty,MY=Object.getOwnPropertyDescriptor,UF=Object.getOwnPropertySymbols,AY=Object.prototype.hasOwnProperty,PY=Object.prototype.propertyIsEnumerable,HF=(i,e,t)=>e in i?NR(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,DY=(i,e)=>{for(var t in e||(e={}))AY.call(e,t)&&HF(i,t,e[t]);if(UF)for(var t of UF(e))PY.call(e,t)&&HF(i,t,e[t]);return i},p1=(i,e,t,n)=>{for(var r=n>1?void 0:n?MY(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&NR(e,t,r),r},$y=class extends be{constructor(){super(...arguments),this.loadRowDataVersion=0}init(i,e){this.params=e,this.comp=i,e.pinned==null&&(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(this.eventService,X.EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this)))}onFullWidthRowFocused(i){let e=this.params,t={rowIndex:e.node.rowIndex,rowPinned:e.node.rowPinned},n={rowIndex:i.rowIndex,rowPinned:i.rowPinned};this.rowPositionUtils.sameRow(t,n)&&this.focusService.focusInto(this.comp.getGui(),i.fromBelow)}setAutoHeightClasses(){let i=this.gos.get("detailRowAutoHeight"),e=i?"ag-details-row-auto-height":"ag-details-row-fixed-height",t=i?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(e,!0),this.comp.addOrRemoveDetailGridCssClass(t,!0)}setupRefreshStrategy(){let i=this.params.refreshStrategy;if(i=="everything"||i=="nothing"||i=="rows"){this.refreshStrategy=i;return}i!=null&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+i+"' supplied, defaulting to refreshStrategy = 'rows'."),this.refreshStrategy="rows"}addThemeToDetailGrid(){let{theme:i}=this.environment.getTheme();i&&this.comp.addOrRemoveDetailGridCssClass(i,!0)}createDetailGrid(){if(M.missing(this.params.detailGridOptions)){console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");return}let i=this.gos.get("detailRowAutoHeight"),e=DY({},this.params.detailGridOptions);i&&(e.domLayout="autoHeight"),this.comp.setDetailGrid(e)}registerDetailWithMaster(i,e){let t=this.params.node.id,n=this.params.api,r={id:t,api:i,columnApi:e},s=this.params.node;n.isDestroyed()||(n.addDetailGridInfo(t,r),s.detailGridInfo=r,this.addDestroyFunc(()=>{s.detailGridInfo===r&&(n.isDestroyed()||n.removeDetailGridInfo(t),s.detailGridInfo=null)}))}loadRowData(){var i,e,t;this.loadRowDataVersion++;let n=this.loadRowDataVersion;if(((i=this.params.detailGridOptions)==null?void 0:i.rowModelType)==="serverSide"){(t=(e=this.params.node.detailGridInfo)==null?void 0:e.api)==null||t.refreshServerSide({purge:!0});return}let r=this.params.getDetailRowData;if(!r){console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData");return}let s=a=>{this.loadRowDataVersion===n&&this.comp.setRowData(a)},o={node:this.params.node,data:this.params.node.data,successCallback:s,context:this.gos.getGridCommonParams().context};r(o)}refresh(){switch(this.refreshStrategy){case"nothing":return!0;case"everything":return!1}return this.loadRowData(),!0}};p1([k("rowPositionUtils")],$y.prototype,"rowPositionUtils",2);p1([k("focusService")],$y.prototype,"focusService",2);var VR=(()=>{let i=class BR extends ae{init(t){this.params=t,this.selectAndSetTemplate();let n={addOrRemoveCssClass:(r,s)=>this.addOrRemoveCssClass(r,s),addOrRemoveDetailGridCssClass:(r,s)=>this.eDetailGrid.classList.toggle(r,s),setDetailGrid:r=>this.setDetailGrid(r),setRowData:r=>this.setRowData(r),getGui:()=>this.eDetailGrid};this.ctrl=this.createManagedBean(new $y),this.ctrl.init(n,t)}refresh(){return this.ctrl&&this.ctrl.refresh()}destroy(){super.destroy()}selectAndSetTemplate(){if(this.params.pinned){this.setTemplate('<div class="ag-details-row"></div>');return}let t=()=>{this.setTemplate(BR.TEMPLATE)};if(M.missing(this.params.template))t();else if(typeof this.params.template=="string")this.setTemplate(this.params.template);else if(typeof this.params.template=="function"){let n=this.params.template,r=n(this.params);this.setTemplate(r)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),t();this.eDetailGrid==null&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')}setDetailGrid(t){if(!this.eDetailGrid)return;let n=this.context.getBean("agGridReact"),r=n?M.cloneObject(n):void 0,s=this.context.getBean("frameworkComponentWrapper"),o=this.getFrameworkOverrides(),a=$f(this.eDetailGrid,t,{frameworkOverrides:o,providedBeanInstances:{agGridReact:r,frameworkComponentWrapper:s},modules:jt.__getGridRegisteredModules(this.params.api.getGridId())});this.detailApi=a,this.ctrl.registerDetailWithMaster(a,new Wf(a)),this.addDestroyFunc(()=>{a?.destroy()})}setRowData(t){this.detailApi&&this.detailApi.setGridOption("rowData",t)}};return i.TEMPLATE=`<div class="ag-details-row" role="gridcell">
            <div ref="eDetailGrid" class="ag-details-grid" role="presentation"></div>
        </div>`,i})();p1([ce("eDetailGrid")],VR.prototype,"eDetailGrid",2);var kY=VR,IY="31.3.4",GR={version:IY,moduleName:qe.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:kY}],controllers:[{controllerName:"detailCellRenderer",controllerClass:$y}],dependantModules:[Tn]},UR=Object.defineProperty,FY=Object.defineProperties,OY=Object.getOwnPropertyDescriptor,LY=Object.getOwnPropertyDescriptors,zF=Object.getOwnPropertySymbols,RY=Object.prototype.hasOwnProperty,NY=Object.prototype.propertyIsEnumerable,WF=(i,e,t)=>e in i?UR(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,hy=(i,e)=>{for(var t in e||(e={}))RY.call(e,t)&&WF(i,t,e[t]);if(zF)for(var t of zF(e))NY.call(e,t)&&WF(i,t,e[t]);return i},m_=(i,e)=>FY(i,LY(e)),ct=(i,e,t,n)=>{for(var r=n>1?void 0:n?OY(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&UR(e,t,r),r},pa=class extends be{hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenuAfterMouseEvent(i,e,t,n){let r=n?"filterMenuTab":void 0;this.showMenu(i,s=>{var o;let a=s.getGui();this.popupService.positionPopupUnderMouseEvent({type:t,column:i,mouseEvent:e,ePopup:a}),r&&((o=s.showTab)==null||o.call(s,r)),this.dispatchVisibleChangedEvent(!0,!1,i,r)},t,r,void 0,e.target)}showMenuAfterButtonClick(i,e,t,n){let r=-1,s="left";this.gos.get("enableRtl")&&(r=1,s="right");let o=n?"filterMenuTab":void 0,a=o?[o]:void 0,l=this.menuService.isLegacyMenuEnabled(),c=(l?9:4)*r,u=l?-23:4;this.showMenu(i,d=>{var h;let p=d.getGui();this.popupService.positionPopupByComponent({type:t,column:i,eventSource:e,ePopup:p,alignSide:s,nudgeX:c,nudgeY:u,position:"under",keepWithinBounds:!0}),o&&((h=d.showTab)==null||h.call(d,o)),this.dispatchVisibleChangedEvent(!0,!1,i,o)},t,o,a,e)}showMenu(i,e,t,n,r,s){var o;let{menu:a,eMenuGui:l,anchorToElement:c,restoreFocusParams:u}=this.getMenuParams(i,r,s),d=[];d.push(p=>{let m=a.getGui();this.destroyBean(a),i&&(i.setMenuVisible(!1,"contextMenu"),this.menuUtils.restoreFocusOnClose(u,m,p))});let h=this.localeService.getLocaleTextFunc();if(this.popupService.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:p=>{d.forEach(m=>m(p)),this.dispatchVisibleChangedEvent(!1,!1,i,n)},afterGuiAttached:p=>a.afterGuiAttached(Object.assign({},{container:t},p)),positionCallback:n?()=>e(a):void 0,ariaLabel:h("ariaLabelColumnMenu","Column Menu")}),n||((o=a.showTabBasedOnPreviousSelection)==null||o.call(a),e(a)),this.menuService.isColumnMenuAnchoringEnabled()){let p=this.popupService.setPopupPositionRelatedToElement(l,c);p&&i&&this.addStopAnchoring(p,i,d)}a.addEventListener(Jm.EVENT_TAB_SELECTED,p=>{this.dispatchVisibleChangedEvent(!1,!0,i),this.lastSelectedTab=p.key,this.dispatchVisibleChangedEvent(!0,!0,i)}),i?.setMenuVisible(!0,"contextMenu"),this.activeMenu=a,a.addEventListener(be.EVENT_DESTROYED,()=>{this.activeMenu===a&&(this.activeMenu=null)})}addStopAnchoring(i,e,t){i.then(n=>{e.addEventListener("leftChanged",n),e.addEventListener("visibleChanged",n),t.push(()=>{e.removeEventListener("leftChanged",n),e.removeEventListener("visibleChanged",n)})})}getMenuParams(i,e,t){let n={column:i,headerPosition:this.focusService.getFocusedHeader(),columnIndex:this.columnModel.getAllDisplayedColumns().indexOf(i),eventSource:t},r=this.createMenu(i,n,e,t);return{menu:r,eMenuGui:r.getGui(),anchorToElement:t||this.ctrlsService.getGridBodyCtrl().getGui(),restoreFocusParams:n}}createMenu(i,e,t,n){return this.menuService.isLegacyMenuEnabled()?this.createBean(new Jm(i,e,this.lastSelectedTab,t,n)):this.createBean(new hp(i,e,n))}dispatchVisibleChangedEvent(i,e,t,n){var r,s;let o={type:X.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:i,switchingTab:e,key:(s=(r=this.lastSelectedTab)!=null?r:n)!=null?s:this.menuService.isLegacyMenuEnabled()?Jm.TAB_GENERAL:"columnMenu",column:t??null};this.eventService.dispatchEvent(o)}isMenuEnabled(i){var e;if(!this.menuService.isLegacyMenuEnabled())return!0;let t=!this.filterManager.isFilterAllowed(i),n=(e=i.getColDef().menuTabs)!=null?e:Jm.TABS_DEFAULT;return(t&&n.includes(Jm.TAB_FILTER)?n.length-1:n.length)>0}showMenuAfterContextMenuEvent(i,e,t){this.menuUtils.onContextMenu(e,t,n=>(this.showMenuAfterMouseEvent(i,n,"columnMenu"),!0))}};ct([k("popupService")],pa.prototype,"popupService",2);ct([k("focusService")],pa.prototype,"focusService",2);ct([k("ctrlsService")],pa.prototype,"ctrlsService",2);ct([k("columnModel")],pa.prototype,"columnModel",2);ct([k("filterManager")],pa.prototype,"filterManager",2);ct([k("menuUtils")],pa.prototype,"menuUtils",2);ct([k("menuService")],pa.prototype,"menuService",2);pa=ct([De("enterpriseMenuFactory")],pa);var Br=class Ri extends be{constructor(e,t,n,r,s){super(),this.column=e,this.restoreFocusParams=t,this.initialSelection=n,this.restrictTo=r,this.sourceElement=s,this.tabFactories={},this.includeChecks={},this.tabFactories[Ri.TAB_GENERAL]=this.createMainPanel.bind(this),this.tabFactories[Ri.TAB_FILTER]=this.createFilterPanel.bind(this),this.tabFactories[Ri.TAB_COLUMNS]=this.createColumnsPanel.bind(this),this.includeChecks[Ri.TAB_GENERAL]=()=>!0,this.includeChecks[Ri.TAB_FILTER]=()=>e?this.filterManager.isFilterAllowed(e):!1,this.includeChecks[Ri.TAB_COLUMNS]=()=>!0}init(){let e=this.getTabsToCreate().map(t=>this.createTab(t));this.tabbedLayout=new vd({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout),this.addDestroyFunc(()=>this.destroyBean(this.tabbedLayout))}getTabsToCreate(){var e,t;return this.restrictTo?this.restrictTo:((t=(e=this.column)==null?void 0:e.getColDef().menuTabs)!=null?t:Ri.TABS_DEFAULT).filter(n=>this.isValidMenuTabItem(n)).filter(n=>this.isNotSuppressed(n)).filter(n=>this.isModuleLoaded(n))}isModuleLoaded(e){return e===Ri.TAB_COLUMNS?jt.__isRegistered(qe.ColumnsToolPanelModule,this.context.getGridId()):!0}isValidMenuTabItem(e){let t=!0,n=Ri.TABS_DEFAULT;return this.restrictTo!=null&&(t=this.restrictTo.indexOf(e)>-1,n=this.restrictTo),t=t&&Ri.TABS_DEFAULT.indexOf(e)>-1,t||console.warn(`AG Grid: Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of [${n}]`),t}isNotSuppressed(e){return this.includeChecks[e]()}createTab(e){return this.tabFactories[e]()}showTabBasedOnPreviousSelection(){this.showTab(this.initialSelection)}showTab(e){this.tabItemColumns&&e===Ri.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&e===Ri.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&e===Ri.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()}onTabItemClicked(e){let t=null;switch(e.item){case this.tabItemColumns:t=Ri.TAB_COLUMNS;break;case this.tabItemFilter:t=Ri.TAB_FILTER;break;case this.tabItemGeneral:t=Ri.TAB_GENERAL;break}t&&this.activateTab(t)}activateTab(e){let t={type:Ri.EVENT_TAB_SELECTED,key:e};this.dispatchEvent(t)}createMainPanel(){return this.mainMenuList=this.columnMenuFactory.createMenu(this,this.column,()=>{var e;return(e=this.sourceElement)!=null?e:this.getGui()}),this.mainMenuList.addEventListener(ur.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.tabItemGeneral={title:M.createIconNoSpan("menu",this.gos,this.column),titleLabel:Ri.TAB_GENERAL.replace("MenuTab",""),bodyPromise:vt.resolve(this.mainMenuList.getGui()),name:Ri.TAB_GENERAL},this.tabItemGeneral}onHidePopup(e){this.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}createFilterPanel(){let e=this.column?this.createManagedBean(new xl(this.column,"COLUMN_MENU")):null;if(!e?.hasFilter())throw new Error("AG Grid - Unable to instantiate filter");let t=r=>e.afterGuiAttached(r),n=()=>e.afterGuiDetached();return this.tabItemFilter={title:M.createIconNoSpan("filter",this.gos,this.column),titleLabel:Ri.TAB_FILTER.replace("MenuTab",""),bodyPromise:vt.resolve(e?.getGui()),afterAttachedCallback:t,afterDetachedCallback:n,name:Ri.TAB_FILTER},this.tabItemFilter}createColumnsPanel(){let e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper");let n=this.columnChooserFactory.createColumnSelectPanel(this,this.column).getGui();return n.classList.add("ag-menu-column-select"),e.appendChild(n),this.tabItemColumns={title:M.createIconNoSpan("columns",this.gos,this.column),titleLabel:Ri.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:vt.resolve(e),name:Ri.TAB_COLUMNS},this.tabItemColumns}afterGuiAttached(e){let{container:t,hidePopup:n}=e;this.tabbedLayout.setAfterAttachedParams({container:t,hidePopup:n}),n&&(this.hidePopupFunc=n,this.addDestroyFunc(n))}getGui(){return this.tabbedLayout.getGui()}};Br.EVENT_TAB_SELECTED="tabSelected";Br.TAB_FILTER="filterMenuTab";Br.TAB_GENERAL="generalMenuTab";Br.TAB_COLUMNS="columnsMenuTab";Br.TABS_DEFAULT=[Br.TAB_GENERAL,Br.TAB_FILTER,Br.TAB_COLUMNS];ct([k("filterManager")],Br.prototype,"filterManager",2);ct([k("columnChooserFactory")],Br.prototype,"columnChooserFactory",2);ct([k("columnMenuFactory")],Br.prototype,"columnMenuFactory",2);ct([k("menuUtils")],Br.prototype,"menuUtils",2);ct([J],Br.prototype,"init",1);var Jm=Br,hp=class extends ae{constructor(i,e,t){super(`
            <div ref="eColumnMenu" role="presentation" class="ag-menu ag-column-menu"></div>
        `),this.column=i,this.restoreFocusParams=e,this.sourceElement=t}init(){this.mainMenuList=this.columnMenuFactory.createMenu(this,this.column,()=>{var i;return(i=this.sourceElement)!=null?i:this.getGui()}),this.mainMenuList.addEventListener(ur.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.eColumnMenu.appendChild(this.mainMenuList.getGui())}onHidePopup(i){this.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,i)}afterGuiAttached({hidePopup:i}){i&&(this.hidePopupFunc=i,this.addDestroyFunc(i)),this.focusService.focusInto(this.mainMenuList.getGui())}};ct([k("columnMenuFactory")],hp.prototype,"columnMenuFactory",2);ct([k("menuUtils")],hp.prototype,"menuUtils",2);ct([k("focusService")],hp.prototype,"focusService",2);ct([ce("eColumnMenu")],hp.prototype,"eColumnMenu",2);ct([J],hp.prototype,"init",1);var VY="ag-menu",$F="ag-context-menu-open",mc=class extends be{hideActiveMenu(){this.destroyBean(this.activeMenu)}getMenuItems(i,e,t){let n=[];if(M.exists(i)&&jt.__isRegistered(qe.ClipboardModule,this.context.getGridId())&&e&&(this.gos.get("suppressCutToClipboard")||n.push("cut"),n.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),this.gos.get("enableCharts")&&jt.__isRegistered(qe.GridChartsModule,this.context.getGridId())&&(this.columnModel.isPivotMode()&&n.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&n.push("chartRange")),M.exists(i)){let a=!jt.__isRegistered(qe.CsvExportModule,this.context.getGridId()),l=!jt.__isRegistered(qe.ExcelExportModule,this.context.getGridId()),c=this.gos.get("suppressExcelExport")||l,u=this.gos.get("suppressCsvExport")||a;!M.isIOSUserAgent()&&(!c||!u)&&n.push("export")}let r=n.length?n:void 0,s=e?.getColDef().contextMenuItems;if(Array.isArray(s))return s;if(typeof s=="function")return s(this.gos.addGridCommonParams({column:e,node:i,value:t,defaultItems:r}));let o=this.gos.getCallback("getContextMenuItems");return o?o({column:e,node:i,value:t,defaultItems:r}):n}onContextMenu(i,e,t,n,r,s){this.menuUtils.onContextMenu(i,e,o=>this.showMenu(t,n,r,o,s))}showMenu(i,e,t,n,r){let s=this.getMenuItems(i,e,t),o=this.ctrlsService.getGridBodyCtrl().getGui();if(s===void 0||M.missingOrEmpty(s))return!1;let a=new Ig(s,e,i,t);this.createBean(a);let l=a.getGui(),c={column:e,rowNode:i,type:"contextMenu",mouseEvent:n,ePopup:l,nudgeY:1},u=this.localeService.getLocaleTextFunc(),d=this.popupService.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:p=>{o.classList.remove($F),this.destroyBean(a),this.dispatchVisibleChangedEvent(!1,p===void 0?"api":"ui")},click:n,positionCallback:()=>{let p=this.gos.get("enableRtl");this.popupService.positionPopupUnderMouseEvent(m_(hy({},c),{nudgeX:p?(l.offsetWidth+1)*-1:1}))},anchorToElement:r,ariaLabel:u("ariaLabelContextMenu","Context Menu")});d&&(o.classList.add($F),a.afterGuiAttached({container:"contextMenu",hidePopup:d.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=a,a.addEventListener(be.EVENT_DESTROYED,()=>{this.activeMenu===a&&(this.activeMenu=null)}),d&&a.addEventListener(ur.EVENT_CLOSE_MENU,p=>{var m,g;return d.hideFunc({mouseEvent:(m=p.mouseEvent)!=null?m:void 0,keyboardEvent:(g=p.keyboardEvent)!=null?g:void 0,forceHide:!0})});let h=n&&n instanceof MouseEvent&&n.type==="mousedown";return this.dispatchVisibleChangedEvent(!0,h?"api":"ui"),!0}dispatchVisibleChangedEvent(i,e="ui"){let t={type:X.EVENT_CONTEXT_MENU_VISIBLE_CHANGED,visible:i,source:e};this.eventService.dispatchEvent(t)}};ct([k("popupService")],mc.prototype,"popupService",2);ct([k("ctrlsService")],mc.prototype,"ctrlsService",2);ct([k("columnModel")],mc.prototype,"columnModel",2);ct([k("menuUtils")],mc.prototype,"menuUtils",2);ct([ji("rangeService")],mc.prototype,"rangeService",2);mc=ct([De("contextMenuFactory")],mc);var Ig=class extends ae{constructor(i,e,t,n){super(`<div class="${VY}" role="presentation"></div>`),this.menuItems=i,this.column=e,this.node=t,this.value=n,this.menuList=null,this.focusedCell=null}addMenuItems(){let i=this.createManagedBean(new Lo(0,{column:this.column,node:this.node,value:this.value})),e=this.menuItemMapper.mapWithStockItems(this.menuItems,null,()=>this.getGui());i.addMenuItems(e),this.appendChild(i),this.menuList=i,i.addEventListener(ur.EVENT_CLOSE_MENU,t=>this.dispatchEvent(t))}afterGuiAttached(i){i.hidePopup&&this.addDestroyFunc(i.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())}restoreFocusedCell(){let i=this.focusService.getFocusedCell();if(i&&this.focusedCell&&this.cellPositionUtils.equals(i,this.focusedCell)){let{rowIndex:e,rowPinned:t,column:n}=this.focusedCell,r=this.gos.getDocument(),s=this.gos.getActiveDomElement();(!s||s===r.body)&&this.focusService.setFocusedCell({rowIndex:e,column:n,rowPinned:t,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!this.focusService.isKeyboardMode()})}}destroy(){this.restoreFocusedCell(),super.destroy()}};ct([k("menuItemMapper")],Ig.prototype,"menuItemMapper",2);ct([k("focusService")],Ig.prototype,"focusService",2);ct([k("cellPositionUtils")],Ig.prototype,"cellPositionUtils",2);ct([J],Ig.prototype,"addMenuItems",1);var Vs=class extends be{mapWithStockItems(i,e,t){if(!i)return[];let n=[];return i.forEach(r=>{let s;if(typeof r=="string"?s=this.getStockMenuItem(r,e,t):s=hy({},r),!s)return;let o=s,{subMenu:a}=o;a&&a instanceof Array&&(o.subMenu=this.mapWithStockItems(a,e,t)),s!=null&&n.push(s)}),n}getStockMenuItem(i,e,t){var n;let r=this.localeService.getLocaleTextFunc(),s=this.gos.get("skipHeaderOnAutoSize");switch(i){case"pinSubMenu":return{name:r("pinColumn","Pin Column"),icon:M.createIconNoSpan("menuPin",this.gos,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:r("pinLeft","Pin Left"),action:()=>this.columnModel.setColumnsPinned([e],"left","contextMenu"),checked:!!e&&e.isPinnedLeft()};case"pinRight":return{name:r("pinRight","Pin Right"),action:()=>this.columnModel.setColumnsPinned([e],"right","contextMenu"),checked:!!e&&e.isPinnedRight()};case"clearPinned":return{name:r("noPin","No Pin"),action:()=>this.columnModel.setColumnsPinned([e],null,"contextMenu"),checked:!!e&&!e.isPinned()};case"valueAggSubMenu":return jt.__assertRegistered(qe.RowGroupingModule,"Aggregation from Menu",this.context.getGridId())?!e?.isPrimary()&&!e?.getColDef().pivotValueColumn?null:{name:r("valueAggregation","Value Aggregation"),icon:M.createIconNoSpan("menuValue",this.gos,null),subMenu:this.createAggregationSubMenu(e,this.aggFuncService)}:null;case"autoSizeThis":return{name:r("autosizeThiscolumn","Autosize This Column"),action:()=>this.columnModel.autoSizeColumn(e,"contextMenu",s)};case"autoSizeAll":return{name:r("autosizeAllColumns","Autosize All Columns"),action:()=>this.columnModel.autoSizeAllColumns("contextMenu",s)};case"rowGroup":return{name:r("groupBy","Group by")+" "+M.escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:e?.isRowGroupActive()||!e?.getColDef().enableRowGroup,action:()=>this.columnModel.addRowGroupColumns([e],"contextMenu"),icon:M.createIconNoSpan("menuAddRowGroup",this.gos,null)};case"rowUnGroup":let o=M.createIconNoSpan("menuRemoveRowGroup",this.gos,null),a=e?.getColDef().showRowGroup,l=this.gos.get("groupLockGroupColumns");if(a===!0)return{name:r("ungroupAll","Un-Group All"),disabled:l===-1||l>=this.columnModel.getRowGroupColumns().length,action:()=>this.columnModel.setRowGroupColumns(this.columnModel.getRowGroupColumns().slice(0,l),"contextMenu"),icon:o};if(typeof a=="string"){let h=this.columnModel.getPrimaryColumn(a),p=h!=null?M.escapeString(this.columnModel.getDisplayNameForColumn(h,"header")):a;return{name:r("ungroupBy","Un-Group by")+" "+p,disabled:h!=null&&this.columnModel.isColumnGroupingLocked(h),action:()=>this.columnModel.removeRowGroupColumns([a],"contextMenu"),icon:o}}return{name:r("ungroupBy","Un-Group by")+" "+M.escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:!e?.isRowGroupActive()||!e?.getColDef().enableRowGroup||this.columnModel.isColumnGroupingLocked(e),action:()=>this.columnModel.removeRowGroupColumns([e],"contextMenu"),icon:o};case"resetColumns":return{name:r("resetColumns","Reset Columns"),action:()=>this.columnModel.resetColumnState("contextMenu")};case"expandAll":return{name:r("expandAll","Expand All Row Groups"),action:()=>this.gridApi.expandAll()};case"contractAll":return{name:r("collapseAll","Collapse All Row Groups"),action:()=>this.gridApi.collapseAll()};case"copy":return jt.__assertRegistered(qe.ClipboardModule,"Copy from Menu",this.context.getGridId())?{name:r("copy","Copy"),shortcut:r("ctrlC","Ctrl+C"),icon:M.createIconNoSpan("clipboardCopy",this.gos,null),action:()=>this.clipboardService.copyToClipboard()}:null;case"copyWithHeaders":return jt.__assertRegistered(qe.ClipboardModule,"Copy with Headers from Menu",this.context.getGridId())?{name:r("copyWithHeaders","Copy with Headers"),icon:M.createIconNoSpan("clipboardCopy",this.gos,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0})}:null;case"copyWithGroupHeaders":return jt.__assertRegistered(qe.ClipboardModule,"Copy with Group Headers from Menu",this.context.getGridId())?{name:r("copyWithGroupHeaders","Copy with Group Headers"),icon:M.createIconNoSpan("clipboardCopy",this.gos,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}:null;case"cut":if(jt.__assertRegistered(qe.ClipboardModule,"Cut from Menu",this.context.getGridId())){let h=this.focusService.getFocusedCell(),p=h?this.rowPositionUtils.getRowNode(h):null,m=p?h?.column.isCellEditable(p):!1;return{name:r("cut","Cut"),shortcut:r("ctrlX","Ctrl+X"),icon:M.createIconNoSpan("clipboardCut",this.gos,null),disabled:!m||this.gos.get("suppressCutToClipboard"),action:()=>this.clipboardService.cutToClipboard(void 0,"contextMenu")}}else return null;case"paste":return jt.__assertRegistered(qe.ClipboardModule,"Paste from Clipboard",this.context.getGridId())?{name:r("paste","Paste"),shortcut:r("ctrlV","Ctrl+V"),disabled:!0,icon:M.createIconNoSpan("clipboardPaste",this.gos,null),action:()=>this.clipboardService.pasteFromClipboard()}:null;case"export":let c=[],u=jt.__isRegistered(qe.CsvExportModule,this.context.getGridId()),d=jt.__isRegistered(qe.ExcelExportModule,this.context.getGridId());return!this.gos.get("suppressCsvExport")&&u&&c.push("csvExport"),!this.gos.get("suppressExcelExport")&&d&&c.push("excelExport"),{name:r("export","Export"),subMenu:c,icon:M.createIconNoSpan("save",this.gos,null)};case"csvExport":return{name:r("csvExport","CSV Export"),icon:M.createIconNoSpan("csvExport",this.gos,null),action:()=>this.gridApi.exportDataAsCsv({})};case"excelExport":return{name:r("excelExport","Excel Export"),icon:M.createIconNoSpan("excelExport",this.gos,null),action:()=>this.gridApi.exportDataAsExcel()};case"separator":return"separator";case"pivotChart":case"chartRange":return(n=this.chartMenuItemMapper.getChartItems(i))!=null?n:null;case"columnFilter":return e?{name:r("columnFilter","Column Filter"),icon:M.createIconNoSpan("filter",this.gos,null),action:()=>this.menuService.showFilterMenu({column:e,buttonElement:t(),containerType:"columnFilter",positionBy:"button"})}:null;case"columnChooser":return jt.__isRegistered(qe.ColumnsToolPanelModule,this.context.getGridId())?{name:r("columnChooser","Choose Columns"),icon:M.createIconNoSpan("columns",this.gos,null),action:()=>this.menuService.showColumnChooser({column:e,eventSource:t()})}:null;case"sortAscending":return{name:r("sortAscending","Sort Ascending"),icon:M.createIconNoSpan("sortAscending",this.gos,null),action:()=>this.sortController.setSortForColumn(e,"asc",!1,"columnMenu")};case"sortDescending":return{name:r("sortDescending","Sort Descending"),icon:M.createIconNoSpan("sortDescending",this.gos,null),action:()=>this.sortController.setSortForColumn(e,"desc",!1,"columnMenu")};case"sortUnSort":return{name:r("sortUnSort","Clear Sort"),icon:M.createIconNoSpan("sortUnSort",this.gos,null),action:()=>this.sortController.setSortForColumn(e,null,!1,"columnMenu")};default:return console.warn(`AG Grid: unknown menu item type ${i}`),null}}createAggregationSubMenu(i,e){let t=this.localeService.getLocaleTextFunc(),n;if(i.isPrimary())n=i;else{let s=i.getColDef().pivotValueColumn;n=M.exists(s)?s:void 0}let r=[];if(n){let s=n.isValueActive(),o=e.getFuncNames(n);r.push({name:t("noAggregation","None"),action:()=>{this.columnModel.removeValueColumns([n],"contextMenu"),this.columnModel.setColumnAggFunc(n,void 0,"contextMenu")},checked:!s}),o.forEach(a=>{r.push({name:t(a,e.getDefaultFuncLabel(a)),action:()=>{this.columnModel.setColumnAggFunc(n,a,"contextMenu"),this.columnModel.addValueColumns([n],"contextMenu")},checked:s&&n.getAggFunc()===a})})}return r}};ct([k("columnModel")],Vs.prototype,"columnModel",2);ct([k("gridApi")],Vs.prototype,"gridApi",2);ct([k("focusService")],Vs.prototype,"focusService",2);ct([k("rowPositionUtils")],Vs.prototype,"rowPositionUtils",2);ct([k("chartMenuItemMapper")],Vs.prototype,"chartMenuItemMapper",2);ct([k("menuService")],Vs.prototype,"menuService",2);ct([k("sortController")],Vs.prototype,"sortController",2);ct([ji("clipboardService")],Vs.prototype,"clipboardService",2);ct([ji("aggFuncService")],Vs.prototype,"aggFuncService",2);Vs=ct([De("menuItemMapper")],Vs);var BY="31.3.4",Cg=class extends be{getChartItems(i){var e,t;if(!this.chartService){jt.__assertRegistered(qe.GridChartsModule,`the Context Menu key "${i}"`,this.context.getGridId());return}let n=i==="pivotChart"?new GY(this.gos,this.chartService,this.localeService):new UY(this.gos,this.chartService,this.localeService),r=this.chartService.isEnterprise(),s=n.getMenuItem();if(s&&s.subMenu&&!r){let a=l=>{var c;return m_(hy({},l),{subMenu:(c=l.subMenu)==null?void 0:c.filter(u=>!u._enterprise).map(u=>a(u))})};s=a(s)}let o=(t=(e=this.gos.get("chartToolPanelsDef"))==null?void 0:e.settingsPanel)==null?void 0:t.chartGroupsDef;return o&&(s=Cg.filterAndOrderChartMenu(s,o,n.getConfigLookup())),this.cleanInternals(s)}cleanInternals(i){if(!i)return i;let e=t=>{var n;return t==null||delete t._key,t==null||delete t._enterprise,(n=t?.subMenu)==null||n.forEach(r=>e(r)),t};return e(i)}static buildLookup(i){let e={},t=n=>{e[n._key]=n,n.subMenu&&n.subMenu.forEach(r=>t(r))};return t(i),e}static filterAndOrderChartMenu(i,e,t){var n;let r=this.buildLookup(i),s=m_(hy({},i),{subMenu:[]});if(Object.entries(e).forEach(([o,a])=>{var l,c;let u=t[o];if(u===null)return;if(u==null){M.warnOnce(`invalid chartGroupsDef config '${o}'`);return}let d=r[u._key];if(d)if(d.subMenu){let h=a.map(p=>{let m=u[p];if(m==null){M.warnOnce(`invalid chartGroupsDef config '${o}.${p}'`);return}return r[m]}).filter(p=>p!==void 0);h.length>0&&(d.subMenu=h,(l=s.subMenu)==null||l.push(d))}else(c=s.subMenu)==null||c.push(d)}),((n=s.subMenu)==null?void 0:n.length)!=0)return s}};ct([ji("chartService")],Cg.prototype,"chartService",2);Cg=ct([De("chartMenuItemMapper")],Cg);var GY=class{constructor(i,e,t){this.gos=i,this.chartService=e,this.localeService=t}getMenuItem(){let i=this.localeService.getLocaleTextFunc(),e=(t,n,r,s,o=!1)=>({name:i(t,n),action:()=>this.chartService.createPivotChart({chartType:r}),_key:s,_enterprise:o});return{name:i("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:i("columnChart","Column"),subMenu:[e("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),e("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),e("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:i("barChart","Bar"),subMenu:[e("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),e("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),e("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:i("pieChart","Pie"),subMenu:[e("pie","Pie&lrm;","pie","pivotPie"),e("donut","Donut&lrm;","donut","pivotDonut")]},e("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:i("xyChart","X Y (Scatter)"),subMenu:[e("scatter","Scatter&lrm;","scatter","pivotScatter"),e("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:i("areaChart","Area"),subMenu:[e("area","Area&lrm;","area","pivotArea"),e("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),e("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},{_key:"pivotStatisticalChart",_enterprise:!1,name:i("statisticalChart","Statistical"),subMenu:[e("histogramChart","Histogram&lrm;","histogram","pivotHistogram",!1)]},{_key:"pivotHierarchicalChart",_enterprise:!0,name:i("hierarchicalChart","Hierarchical"),subMenu:[e("treemapChart","Treemap&lrm;","treemap","pivotTreemap",!0),e("sunburstChart","Sunburst&lrm;","sunburst","pivotSunburst",!0)]},{_key:"pivotCombinationChart",name:i("combinationChart","Combination"),subMenu:[e("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),e("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:M.createIconNoSpan("chart",this.gos,void 0)}}getConfigLookup(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",donut:"pivotDonut",doughnut:"pivotDonut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:null},hierarchicalGroup:{_key:"pivotHierarchicalChart",treemap:"pivotTreemap",sunburst:"pivotSunburst"},statisticalGroup:{_key:"pivotStatisticalChart",histogram:"pivotHistogram",rangeBar:null,rangeArea:null,boxPlot:null},polarGroup:null,specializedGroup:null}}},UY=class{constructor(i,e,t){this.gos=i,this.chartService=e,this.localeService=t}getMenuItem(){let i=this.localeService.getLocaleTextFunc(),e=(t,n,r,s,o=!1)=>({name:i(t,n),action:()=>this.chartService.createChartFromCurrentRange(r),_key:s,_enterprise:o});return{name:i("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:i("columnChart","Column"),subMenu:[e("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),e("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),e("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:i("barChart","Bar"),subMenu:[e("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),e("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),e("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:i("pieChart","Pie"),subMenu:[e("pie","Pie&lrm;","pie","rangePie"),e("donut","Donut&lrm;","donut","rangeDonut")],_key:"rangePieChart"},e("line","Line&lrm;","line","rangeLineChart"),{name:i("xyChart","X Y (Scatter)"),subMenu:[e("scatter","Scatter&lrm;","scatter","rangeScatter"),e("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:i("areaChart","Area"),subMenu:[e("area","Area&lrm;","area","rangeArea"),e("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),e("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},{name:i("polarChart","Polar"),subMenu:[e("radarLine","Radar Line&lrm;","radarLine","rangeRadarLine"),e("radarArea","Radar Area&lrm;","radarArea","rangeRadarArea"),e("nightingale","Nightingale&lrm;","nightingale","rangeNightingale"),e("radialColumn","Radial Column&lrm;","radialColumn","rangeRadialColumn"),e("radialBar","Radial Bar&lrm;","radialBar","rangeRadialBar")],_key:"rangePolarChart",_enterprise:!0},{name:i("statisticalChart","Statistical"),subMenu:[e("boxPlot","Box Plot&lrm;","boxPlot","rangeBoxPlot",!0),e("histogramChart","Histogram&lrm;","histogram","rangeHistogram",!1),e("rangeBar","Range Bar&lrm;","rangeBar","rangeRangeBar",!0),e("rangeArea","Range Area&lrm;","rangeArea","rangeRangeArea",!0)],_key:"rangeStatisticalChart",_enterprise:!1},{name:i("hierarchicalChart","Hierarchical"),subMenu:[e("treemap","Treemap&lrm;","treemap","rangeTreemap"),e("sunburst","Sunburst&lrm;","sunburst","rangeSunburst")],_key:"rangeHierarchicalChart",_enterprise:!0},{name:i("specializedChart","Specialized"),subMenu:[e("heatmap","Heatmap&lrm;","heatmap","rangeHeatmap"),e("waterfall","Waterfall&lrm;","waterfall","rangeWaterfall")],_key:"rangeSpecializedChart",_enterprise:!0},{name:i("combinationChart","Combination"),subMenu:[e("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),e("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:M.createIconNoSpan("chart",this.gos,void 0)}}getConfigLookup(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",donut:"rangeDonut",doughnut:"rangeDonut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},polarGroup:{_key:"rangePolarChart",radarLine:"rangeRadarLine",radarArea:"rangeRadarArea",nightingale:"rangeNightingale",radialColumn:"rangeRadialColumn",radialBar:"rangeRadialBar"},statisticalGroup:{_key:"rangeStatisticalChart",boxPlot:"rangeBoxPlot",histogram:"rangeHistogram",rangeBar:"rangeRangeBar",rangeArea:"rangeRangeArea"},hierarchicalGroup:{_key:"rangeHierarchicalChart",treemap:"rangeTreemap",sunburst:"rangeSunburst"},specializedGroup:{_key:"rangeSpecializedChart",heatmap:"rangeHeatmap",waterfall:"rangeWaterfall"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:null}}}},Jh=class extends be{createColumnSelectPanel(i,e,t,n){var r,s;let o=i.createManagedBean(new Wy),a=(s=(r=n??e?.getColDef().columnChooserParams)!=null?r:e?.getColDef().columnsMenuParams)!=null?s:{},{contractColumnSelection:l,suppressColumnExpandAll:c,suppressColumnFilter:u,suppressColumnSelectAll:d,suppressSyncLayoutWithGrid:h,columnLayout:p}=a;return o.init(!!t,this.gos.addGridCommonParams({suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!l,suppressColumnExpandAll:!!c,suppressColumnFilter:!!u,suppressColumnSelectAll:!!d,suppressSyncLayoutWithGrid:!!p||!!h,onStateUpdated:()=>{}}),"columnMenu"),p&&o.setColumnLayout(p),o}showColumnChooser({column:i,chooserParams:e,eventSource:t}){this.hideActiveColumnChooser();let n=this.createColumnSelectPanel(this,i,!0,e),r=this.localeService.getLocaleTextFunc(),s=this.columnModel.getAllDisplayedColumns().indexOf(i),o=i?this.focusService.getFocusedHeader():null;this.activeColumnChooserDialog=this.createBean(new wr({title:r("chooseColumns","Choose Columns"),component:n,width:300,height:300,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{var a;(a=this.focusService.findNextFocusableElement(n.getGui()))==null||a.focus(),this.dispatchVisibleChangedEvent(!0,i)},closedCallback:a=>{let l=this.activeColumnChooser.getGui();this.destroyBean(this.activeColumnChooser),this.activeColumnChooser=void 0,this.activeColumnChooserDialog=void 0,this.dispatchVisibleChangedEvent(!1,i),i&&this.menuUtils.restoreFocusOnClose({column:i,headerPosition:o,columnIndex:s,eventSource:t},l,a,!0)}})),this.activeColumnChooser=n}hideActiveColumnChooser(){this.activeColumnChooserDialog&&this.destroyBean(this.activeColumnChooserDialog)}dispatchVisibleChangedEvent(i,e){let t={type:X.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:i,switchingTab:!1,key:"columnChooser",column:e??null};this.eventService.dispatchEvent(t)}};ct([k("focusService")],Jh.prototype,"focusService",2);ct([k("menuUtils")],Jh.prototype,"menuUtils",2);ct([k("columnModel")],Jh.prototype,"columnModel",2);Jh=ct([De("columnChooserFactory")],Jh);var gc=(()=>{let i=class extends be{createMenu(e,t,n){let r=e.createManagedBean(new Lo(0,{column:t??null,node:null,value:null})),s=this.getMenuItems(t),o=this.menuItemMapper.mapWithStockItems(s,t??null,n);return r.addMenuItems(o),r}getMenuItems(e){let t=this.getDefaultMenuOptions(e),n,r=e?.getColDef().mainMenuItems;if(Array.isArray(r))n=r;else if(typeof r=="function")n=r(this.gos.addGridCommonParams({column:e,defaultItems:t}));else{let s=this.gos.getCallback("getMainMenuItems");s&&e?n=s({column:e,defaultItems:t}):n=t}return M.removeRepeatsFromArray(n,i.MENU_ITEM_SEPARATOR),n}getDefaultMenuOptions(e){let t=[],n=this.menuService.isLegacyMenuEnabled();if(!e)return n||t.push("columnChooser"),t.push("resetColumns"),t;let r=!e.getColDef().lockPinned,s=this.columnModel.getRowGroupColumns().length,o=s>0,a=e.isAllowValue(),l=e.isAllowRowGroup(),c=e.isPrimary(),u=this.columnModel.isPivotMode(),d=this.rowModel.getType()==="clientSide",h=this.gos.get("treeData"),p=c&&o&&a||!c;if(!n&&e.isSortable()){let f=e.getSort();f!=="asc"&&t.push("sortAscending"),f!=="desc"&&t.push("sortDescending"),f&&t.push("sortUnSort"),t.push(i.MENU_ITEM_SEPARATOR)}return this.menuService.isFilterMenuItemEnabled(e)&&(t.push("columnFilter"),t.push(i.MENU_ITEM_SEPARATOR)),r&&t.push("pinSubMenu"),p&&t.push("valueAggSubMenu"),(r||p)&&t.push(i.MENU_ITEM_SEPARATOR),t.push("autoSizeThis"),t.push("autoSizeAll"),t.push(i.MENU_ITEM_SEPARATOR),e.getColDef().showRowGroup?t.push("rowUnGroup"):l&&e.isPrimary()&&(e.isRowGroupActive()?this.columnModel.isColumnGroupingLocked(e)||t.push("rowUnGroup"):t.push("rowGroup")),t.push(i.MENU_ITEM_SEPARATOR),n||t.push("columnChooser"),t.push("resetColumns"),d&&(h||s>(u?1:0))&&(t.push("expandAll"),t.push("contractAll")),t}};return i.MENU_ITEM_SEPARATOR="separator",i})();ct([k("menuItemMapper")],gc.prototype,"menuItemMapper",2);ct([k("columnModel")],gc.prototype,"columnModel",2);ct([k("rowModel")],gc.prototype,"rowModel",2);ct([k("filterManager")],gc.prototype,"filterManager",2);ct([k("menuService")],gc.prototype,"menuService",2);gc=ct([De("columnMenuFactory")],gc);var ep=class extends be{restoreFocusOnClose(i,e,t,n){let{eventSource:r}=i,s=t instanceof KeyboardEvent;if(!n&&!s||!r)return;let o=this.gos.getDocument(),a=this.gos.getActiveDomElement();!e.contains(a)&&a!==o.body||this.focusHeaderCell(i)}closePopupAndRestoreFocusOnSelect(i,e,t){let n;t&&t.keyboardEvent&&(n=t.keyboardEvent),i(n&&{keyboardEvent:n});let r=this.focusService.getFocusedCell(),s=this.gos.getDocument(),o=this.gos.getActiveDomElement();if(!o||o===s.body)if(r){let{rowIndex:a,rowPinned:l,column:c}=r;this.focusService.setFocusedCell({rowIndex:a,column:c,rowPinned:l,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}else this.focusHeaderCell(e)}onContextMenu(i,e,t){if(!this.gos.get("allowContextMenuWithControlKey")&&i&&(i.ctrlKey||i.metaKey)||(i&&this.blockMiddleClickScrollsIfNeeded(i),this.gos.get("suppressContextMenu")))return;let n=i??e.touches[0];if(t(n)){let r=i??e;r&&r.cancelable&&r.preventDefault()}}focusHeaderCell(i){let{column:e,columnIndex:t,headerPosition:n,eventSource:r}=i;if(this.columnModel.getAllDisplayedColumns().some(o=>o===e)&&r&&M.isVisible(r)){let o=this.focusService.findTabbableParent(r);o&&(e&&this.headerNavigationService.scrollToColumn(e),o.focus())}else if(n&&t!==-1){let o=this.columnModel.getAllDisplayedColumns(),a=o[t]||M.last(o);a&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:n.headerRowIndex,column:a}})}}blockMiddleClickScrollsIfNeeded(i){this.gos.get("suppressMiddleClickScrolls")&&i.which===2&&i.preventDefault()}};ct([k("focusService")],ep.prototype,"focusService",2);ct([k("headerNavigationService")],ep.prototype,"headerNavigationService",2);ct([k("columnModel")],ep.prototype,"columnModel",2);ep=ct([De("menuUtils")],ep);var HR={version:BY,moduleName:qe.MenuModule,beans:[pa,mc,Vs,Cg,Jh,gc,ep],dependantModules:[Tn]},zR=Object.defineProperty,HY=Object.defineProperties,zY=Object.getOwnPropertyDescriptor,WY=Object.getOwnPropertyDescriptors,KF=Object.getOwnPropertySymbols,$Y=Object.prototype.hasOwnProperty,KY=Object.prototype.propertyIsEnumerable,jF=(i,e,t)=>e in i?zR(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,g_=(i,e)=>{for(var t in e||(e={}))$Y.call(e,t)&&jF(i,t,e[t]);if(KF)for(var t of KF(e))KY.call(e,t)&&jF(i,t,e[t]);return i},f_=(i,e)=>HY(i,WY(e)),Fg=(i,e,t,n)=>{for(var r=n>1?void 0:n?zY(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&zR(e,t,r),r},Ky=class WR extends Io{constructor(){super('<div class="ag-multi-filter ag-menu-list-compact"></div>'),this.filterDefs=[],this.filters=[],this.guiDestroyFuncs=[],this.filterGuis=[],this.activeFilterIndices=[],this.lastActivatedMenuItem=null,this.afterFiltersReadyFuncs=[]}postConstruct(){this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e)})}static getFilterDefs(e){let{filters:t}=e;return t&&t.length>0?t:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]}init(e){this.params=e,this.filterDefs=WR.getFilterDefs(e);let{column:t,filterChangedCallback:n}=e;this.column=t,this.filterChangedCallback=n;let r=[];return this.filterDefs.forEach((s,o)=>{let a=this.createFilter(s,o);a!=null&&r.push(a)}),new vt(s=>{vt.all(r).then(o=>{this.filters=o,this.refreshGui("columnMenu").then(()=>{s()})})}).then(()=>{this.afterFiltersReadyFuncs.forEach(s=>s()),this.afterFiltersReadyFuncs.length=0})}refreshGui(e){return e===this.lastOpenedInContainer?vt.resolve():(this.removeAllChildrenExceptTabGuards(),this.destroyChildren(),vt.all(this.filters.map((t,n)=>{let r=this.filterDefs[n],s=this.getFilterTitle(t,r),o;if(r.display==="subMenu"&&e!=="toolPanel")o=this.insertFilterMenu(t,s).then(a=>a.getGui());else if(r.display==="subMenu"||r.display==="accordion"){let a=this.insertFilterGroup(t,s);o=vt.resolve(a.getGui())}else o=vt.resolve(t.getGui());return o})).then(t=>{t.forEach((n,r)=>{r>0&&this.appendChild(M.loadTemplate('<div class="ag-filter-separator"></div>')),this.appendChild(n)}),this.filterGuis=t,this.lastOpenedInContainer=e}))}getFilterTitle(e,t){return t.title!=null?t.title:e instanceof zc?e.getFilterTitle():"Filter"}destroyChildren(){this.guiDestroyFuncs.forEach(e=>e()),this.guiDestroyFuncs.length=0,this.filterGuis.length=0}insertFilterMenu(e,t){let n=this.createBean(new ur);return n.init({menuItemDef:{name:t,subMenu:[],cssClasses:["ag-multi-filter-menu-item"],menuItem:Nf,menuItemParams:{cssClassPrefix:"ag-compact-menu-option",isCompact:!0}},level:0,isAnotherSubMenuOpen:()=>!1,childComponent:e,contextParams:{column:null,node:null,value:null}}).then(()=>{n.setParentComponent(this),this.guiDestroyFuncs.push(()=>this.destroyBean(n)),this.addManagedListener(n,ur.EVENT_MENU_ITEM_ACTIVATED,s=>{this.lastActivatedMenuItem&&this.lastActivatedMenuItem!==s.menuItem&&this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=s.menuItem});let r=n.getGui();return n.addManagedListener(r,"keydown",s=>{let{key:o}=s;switch(o){case Xe.UP:case Xe.RIGHT:case Xe.DOWN:case Xe.LEFT:s.preventDefault(),o===Xe.RIGHT&&n.openSubMenu(!0);break}}),n.addManagedListener(r,"focusin",()=>n.activate()),n.addManagedListener(r,"focusout",()=>{!n.isSubMenuOpen()&&!n.isSubMenuOpening()&&n.deactivate()}),n})}insertFilterGroup(e,t){let n=this.createBean(new vn({title:t,cssIdentifier:"multi-filter"}));return this.guiDestroyFuncs.push(()=>this.destroyBean(n)),n.addItem(e.getGui()),n.toggleGroupExpand(!1),e.afterGuiAttached&&n.addManagedListener(n,vn.EVENT_EXPANDED,()=>e.afterGuiAttached({container:this.lastOpenedInContainer,suppressFocus:!0,hidePopup:this.hidePopup})),n}isFilterActive(){return this.filters.some(e=>e.isFilterActive())}getLastActiveFilterIndex(){return this.activeFilterIndices.length>0?this.activeFilterIndices[this.activeFilterIndices.length-1]:null}doesFilterPass(e,t){let n=!0;return this.filters.forEach(r=>{!n||r===t||!r.isFilterActive()||(n=r.doesFilterPass(e))}),n}getFilterType(){return"multi"}getModelFromUi(){return{filterType:this.getFilterType(),filterModels:this.filters.map(t=>{let n=t;return typeof n.getModelFromUi=="function"?n.getModelFromUi():null})}}getModel(){return this.isFilterActive()?{filterType:this.getFilterType(),filterModels:this.filters.map(t=>t.isFilterActive()?t.getModel():null)}:null}setModel(e){let t=(r,s)=>new vt(o=>{let a=r.setModel(s);a?a.then(()=>o()):o()}),n=[];return e==null?n=this.filters.map((r,s)=>t(r,null).then(()=>{this.updateActiveList(s)})):this.filters.forEach((r,s)=>{let o=e.filterModels.length>s?e.filterModels[s]:null,a=t(r,o).then(()=>{this.updateActiveList(s)});n.push(a)}),vt.all(n).then(()=>{})}applyModel(e="api"){let t=!1;return this.filters.forEach(n=>{n instanceof zc&&(t=n.applyModel(e)||t)}),t}getChildFilterInstance(e){return this.filters[e]}afterGuiAttached(e){let t;e?(this.hidePopup=e.hidePopup,t=this.refreshGui(e.container)):(this.hidePopup=void 0,t=vt.resolve()),t.then(()=>{let{filterDefs:n}=this,r=!1;n&&M.forEachReverse(n,(a,l)=>{var c;let u=l===0,d=!u||a.display!=="inline",h=f_(g_({},e??{}),{suppressFocus:d}),p=(c=this.filters)==null?void 0:c[l];if(p&&(this.executeFunctionIfExistsOnFilter(p,"afterGuiAttached",h),u&&(r=!0)),u&&d){let m=this.filterGuis[l];m&&(m.focus(),r=!0)}});let s=this.gos.getDocument(),o=this.gos.getActiveDomElement();!r&&(!o||o===s.body||this.getGui().contains(o))&&this.forceFocusOutOfContainer(!0)})}afterGuiDetached(){this.executeFunctionIfExists("afterGuiDetached")}onAnyFilterChanged(){this.executeFunctionIfExists("onAnyFilterChanged")}onNewRowsLoaded(){this.executeFunctionIfExists("onNewRowsLoaded")}destroy(){this.filters.forEach(e=>this.destroyBean(e)),this.filters.length=0,this.destroyChildren(),this.hidePopup=void 0,super.destroy()}executeFunctionIfExists(e,...t){M.forEachReverse(this.filters,n=>{this.executeFunctionIfExistsOnFilter(n,e,t)})}executeFunctionIfExistsOnFilter(e,t,...n){let r=e[t];typeof r=="function"&&r.apply(e,n)}createFilter(e,t){let{filterModifiedCallback:n,doesRowPassOtherFilter:r}=this.params,s,o=f_(g_({},this.filterManager.createFilterParams(this.column,this.column.getColDef())),{filterModifiedCallback:n,filterChangedCallback:c=>{this.executeWhenAllFiltersReady(()=>this.filterChanged(t,c))},doesRowPassOtherFilter:c=>r(c)&&this.doesFilterPass({node:c,data:c.data},s)}),a=this.userComponentFactory.getFilterDetails(e,o,"agTextColumnFilter");if(!a)return null;let l=a.newAgStackInstance();return l&&l.then(c=>s=c),l}executeWhenAllFiltersReady(e){this.filters&&this.filters.length>0?e():this.afterFiltersReadyFuncs.push(e)}updateActiveList(e){let t=this.filters[e];M.removeFromArray(this.activeFilterIndices,e),t.isFilterActive()&&this.activeFilterIndices.push(e)}filterChanged(e,t){this.updateActiveList(e),this.filterChangedCallback(t);let n=this.filters[e];this.filters.forEach(r=>{r!==n&&typeof r.onAnyFilterChanged=="function"&&r.onAnyFilterChanged()})}onFocusIn(e){this.lastActivatedMenuItem!=null&&!this.lastActivatedMenuItem.getGui().contains(e.target)&&(this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=null)}getModelAsString(e){var t,n,r,s;if(!this.filters||!((t=e?.filterModels)!=null&&t.length))return"";let o=(n=this.getLastActiveFilterIndex())!=null?n:0,a=this.filters[o];return(s=(r=a.getModelAsString)==null?void 0:r.call(a,e.filterModels[o]))!=null?s:""}};Fg([k("filterManager")],Ky.prototype,"filterManager",2);Fg([k("userComponentFactory")],Ky.prototype,"userComponentFactory",2);Fg([J],Ky.prototype,"postConstruct",1);var py=Ky,m1=class extends ae{constructor(){super('<div class="ag-multi-floating-filter ag-floating-filter-input"></div>'),this.floatingFilters=[],this.compDetailsList=[]}init(i){this.params=i;let{compDetailsList:e}=this.getCompDetailsList(i);return this.setParams(e)}setParams(i){let e=[];return i.forEach(t=>{let n=t?.newAgStackInstance();n!=null&&(this.compDetailsList.push(t),e.push(n))}),vt.all(e).then(t=>{t.forEach((n,r)=>{this.floatingFilters.push(n);let s=n.getGui();this.appendChild(s),r>0&&M.setDisplayed(s,!1)})})}onParamsUpdated(i){this.refresh(i)}refresh(i){this.params=i;let{compDetailsList:e,floatingFilterParamsList:t}=this.getCompDetailsList(i);e.length===this.compDetailsList.length&&e.every((r,s)=>!this.filterManager.areFilterCompsDifferent(this.compDetailsList[s],r))?t.forEach((r,s)=>{var o;let a=this.floatingFilters[s],l=!1;a.refresh&&a.refresh(r)!==null&&(l=!0),l||(o=a.onParamsUpdated)==null||o.call(a,r)}):(M.clearElement(this.getGui()),this.destroyBeans(this.floatingFilters),this.floatingFilters=[],this.compDetailsList=[],this.setParams(e))}getCompDetailsList(i){let e=[],t=[],n=i.filterParams;return py.getFilterDefs(n).forEach((r,s)=>{let o=f_(g_({},i),{parentFilterInstance:l=>{this.parentMultiFilterInstance(c=>{let u=c.getChildFilterInstance(s);u!=null&&l(u)})}});M.mergeDeep(o.filterParams,r.filterParams);let a=this.getCompDetails(r,o);a&&(e.push(a),t.push(o))}),{compDetailsList:e,floatingFilterParamsList:t}}onParentModelChanged(i,e){e&&e.afterFloatingFilter||this.parentMultiFilterInstance(t=>{if(i==null)this.floatingFilters.forEach((n,r)=>{n.onParentModelChanged(null,e),M.setDisplayed(n.getGui(),r===0)});else{let n=t.getLastActiveFilterIndex();this.floatingFilters.forEach((r,s)=>{let o=i.filterModels.length>s?i.filterModels[s]:null;r.onParentModelChanged(o,e);let a=n==null?s===0:s===n;M.setDisplayed(r.getGui(),a)})}})}destroy(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,super.destroy()}getCompDetails(i,e){var t;let n=(t=this.userComponentFactory.getDefaultFloatingFilterType(i,()=>this.filterManager.getDefaultFloatingFilter(this.params.column)))!=null?t:"agReadOnlyFloatingFilter";return this.userComponentFactory.getFloatingFilterCompDetails(i,e,n)}parentMultiFilterInstance(i){this.params.parentFilterInstance(e=>{if(!(e instanceof py))throw new Error("AG Grid - MultiFloatingFilterComp expects MultiFilter as its parent");i(e)})}};Fg([k("userComponentFactory")],m1.prototype,"userComponentFactory",2);Fg([k("filterManager")],m1.prototype,"filterManager",2);var jY="31.3.4",$R={version:jY,moduleName:qe.MultiFilterModule,beans:[],userComponents:[{componentName:"agMultiColumnFilter",componentClass:py},{componentName:"agMultiColumnFloatingFilter",componentClass:m1}],dependantModules:[Tn]},YF=class extends Rf{constructor(){super('<div class="ag-cell-edit-wrapper"></div>')}init(i){this.params=i;let{cellStartedEdit:e,cellHeight:t,values:n}=i;M.missing(n)&&console.warn("AG Grid: agRichSelectCellEditor requires cellEditorParams.values to be set");let{params:r,valuesPromise:s}=this.buildRichSelectParams();this.richSelect=this.createManagedBean(new wl(r)),this.richSelect.addCssClass("ag-cell-editor"),this.appendChild(this.richSelect),s&&s.then(o=>{this.richSelect.setValueList({valueList:o,refresh:!0});let a=this.getSearchStringCallback(o);a&&this.richSelect.setSearchStringCreator(a)}),this.addManagedListener(this.richSelect,X.EVENT_FIELD_PICKER_VALUE_SELECTED,this.onEditorPickerValueSelected.bind(this)),this.addManagedListener(this.richSelect.getGui(),"focusout",this.onEditorFocusOut.bind(this)),this.focusAfterAttached=e,M.exists(t)&&this.richSelect.setRowHeight(t)}onEditorPickerValueSelected(i){this.params.stopEditing(!i.fromEnterKey)}onEditorFocusOut(i){this.richSelect.getGui().contains(i.relatedTarget)||this.params.stopEditing(!0)}buildRichSelectParams(){let{cellRenderer:i,value:e,values:t,formatValue:n,searchDebounceDelay:r,valueListGap:s,valueListMaxHeight:o,valueListMaxWidth:a,allowTyping:l,filterList:c,searchType:u,highlightMatch:d,valuePlaceholder:h,eventKey:p}=this.params,m={value:e,cellRenderer:i,searchDebounceDelay:r,valueFormatter:n,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list",pickerGap:s,allowTyping:l,filterList:c,searchType:u,highlightMatch:d,maxPickerHeight:o,maxPickerWidth:a,placeholder:h,initialInputValue:p?.length===1?p:void 0},g,f;return typeof t=="function"?g=t(this.params):g=t??[],Array.isArray(g)?(m.valueList=g,m.searchStringCreator=this.getSearchStringCallback(g)):f=g,{params:m,valuesPromise:f}}getSearchStringCallback(i){let{colDef:e}=this.params;if(!(typeof i[0]!="object"||!e.keyCreator))return t=>t.map(n=>{let r=this.gos.addGridCommonParams({value:n,colDef:this.params.colDef,column:this.params.column,node:this.params.node,data:this.params.data});return e.keyCreator(r)})}afterGuiAttached(){let{focusAfterAttached:i,params:e}=this;setTimeout(()=>{if(!this.isAlive())return;if(i){let n=this.richSelect.getFocusableElement();n.focus();let{allowTyping:r,eventKey:s}=this.params;r&&(!s||s.length!==1)&&n.select()}this.richSelect.showPicker();let{eventKey:t}=e;t&&t?.length===1&&this.richSelect.searchTextFromString(t)})}getValue(){return this.richSelect.getValue()}isPopup(){return!1}},YY="31.3.4",KR={version:YY,moduleName:qe.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:YF},{componentName:"agRichSelectCellEditor",componentClass:YF}],dependantModules:[Tn]},jR=Object.defineProperty,qY=Object.defineProperties,XY=Object.getOwnPropertyDescriptor,ZY=Object.getOwnPropertyDescriptors,my=Object.getOwnPropertySymbols,YR=Object.prototype.hasOwnProperty,qR=Object.prototype.propertyIsEnumerable,qF=(i,e,t)=>e in i?jR(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,v_=(i,e)=>{for(var t in e||(e={}))YR.call(e,t)&&qF(i,t,e[t]);if(my)for(var t of my(e))qR.call(e,t)&&qF(i,t,e[t]);return i},QY=(i,e)=>qY(i,ZY(e)),XR=(i,e)=>{var t={};for(var n in i)YR.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&my)for(var n of my(i))e.indexOf(n)<0&&qR.call(i,n)&&(t[n]=i[n]);return t},Pe=(i,e,t,n)=>{for(var r=n>1?void 0:n?XY(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&jR(e,t,r),r},ar=class extends Ea{constructor(i,e,t){super(0),this.nodeIdSequence=new cr,this.info={},this.ssrmParams=i,this.parentRowNode=t,this.level=t.level+1,this.groupLevel=i.rowGroupCols?this.level<i.rowGroupCols.length:void 0,this.leafGroup=i.rowGroupCols?this.level===i.rowGroupCols.length-1:!1}postConstruct(){if(this.usingTreeData=this.gos.get("treeData"),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),!this.usingTreeData&&this.groupLevel){let n=this.ssrmParams.rowGroupCols[this.level];this.groupField=n.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}let i=1,e=this.parentRowNode.level===-1,t=this.storeUtils.getServerSideInitialRowCount();e&&t!=null&&(i=t),this.initialiseRowNodes(i),this.rowNodeBlockLoader.addBlock(this),this.addDestroyFunc(()=>this.rowNodeBlockLoader.removeBlock(this)),this.postSortFunc=this.gos.getCallback("postSortRows"),t!=null&&this.eventService.dispatchEventOnce({type:X.EVENT_ROW_COUNT_READY})}destroyRowNodes(){this.blockUtils.destroyRowNodes(this.allRowNodes),this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={}}initialiseRowNodes(i,e=!1){this.destroyRowNodes();for(let t=0;t<i;t++){let n=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});e&&(n.failedLoad=!0),this.allRowNodes.push(n),this.nodesAfterFilter.push(n),this.nodesAfterSort.push(n)}}getBlockStateJson(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}}loadFromDatasource(){this.storeUtils.loadFromDatasource({startRow:void 0,endRow:void 0,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,success:this.success.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})}getStartRow(){return 0}getEndRow(){return this.nodesAfterSort.length}createDataNode(i,e){let t=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});e!=null?M.insertIntoArray(this.allRowNodes,t,e):this.allRowNodes.push(t);let n=this.prefixId(this.nodeIdSequence.next());return this.blockUtils.setDataIntoRowNode(t,i,n,void 0),this.nodeManager.addRowNode(t),this.blockUtils.checkOpenByDefault(t),this.allNodesMap[t.id]=t,t}prefixId(i){return this.nodeIdPrefix?this.nodeIdPrefix+"-"+i:i.toString()}processServerFail(){this.initialiseRowNodes(1,!0),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}processServerResult(i){if(!this.isAlive())return;let e=i.groupLevelInfo;e&&Object.assign(this.info,e),i.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(i.pivotResultFields);let t=this.allRowNodes.length>0?this.allNodesMap:void 0;this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={},i.rowData||M.warnOnce('"params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.'),this.createOrRecycleNodes(t,i.rowData),t&&this.blockUtils.destroyRowNodes(M.getAllValuesInObject(t)),this.level===0&&this.eventService.dispatchEventOnce({type:X.EVENT_ROW_COUNT_READY}),this.filterAndSortNodes(),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}createOrRecycleNodes(i,e){if(!e)return;let t=r=>{if(!i)return;let s=this.gos.getCallback("getRowId");if(!s)return;let o=this.parentRowNode.getGroupKeys(),a=this.level,l=s({data:r,parentKeys:o.length>0?o:void 0,level:a}),c=i[l];if(c)return delete i[l],c},n=(r,s)=>{this.allNodesMap[r.id]=r,this.blockUtils.updateDataIntoRowNode(r,s),this.allRowNodes.push(r)};e.forEach(r=>{let s=t(r);s?n(s,r):this.createDataNode(r)})}flushAsyncTransactions(){window.setTimeout(()=>this.transactionManager.flushAsyncTransactions(),0)}filterAndSortNodes(){this.filterRowNodes(),this.sortRowNodes()}sortRowNodes(){let i=this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerSideSortOnServer(),e=this.sortController.getSortOptions(),t=!e||e.length==0;if(i||t){this.nodesAfterSort=this.nodesAfterFilter;return}if(this.nodesAfterSort=this.rowNodeSorter.doFullSort(this.nodesAfterFilter,e),this.postSortFunc){let n={nodes:this.nodesAfterSort};this.postSortFunc(n)}}filterRowNodes(){let i=!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerSideFilterOnServer(),e=this.groupLevel;if(i||e){this.nodesAfterFilter=this.allRowNodes;return}this.nodesAfterFilter=this.allRowNodes.filter(t=>this.filterManager.doesRowPassFilter({rowNode:t}))}clearDisplayIndexes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.allRowNodes.forEach(i=>this.blockUtils.clearDisplayIndex(i))}getDisplayIndexEnd(){return this.displayIndexEnd}isDisplayIndexInStore(i){return this.getRowCount()===0?!1:i>=this.displayIndexStart&&i<this.displayIndexEnd}setDisplayIndexes(i,e){this.displayIndexStart=i.peek(),this.topPx=e.value;let t={};this.nodesAfterSort.forEach(n=>{this.blockUtils.setDisplayIndex(n,i,e),t[n.id]=!0}),this.allRowNodes.forEach(n=>{t[n.id]||this.blockUtils.clearDisplayIndex(n)}),this.displayIndexEnd=i.peek(),this.heightPx=e.value-this.topPx}forEachStoreDeep(i,e=new cr){i(this,e.next()),this.allRowNodes.forEach(t=>{let n=t.childStore;n&&n.forEachStoreDeep(i,e)})}forEachNodeDeep(i,e=new cr){this.allRowNodes.forEach(t=>{i(t,e.next());let n=t.childStore;n&&n.forEachNodeDeep(i,e)})}forEachNodeDeepAfterFilterAndSort(i,e=new cr,t=!1){this.nodesAfterSort.forEach(n=>{i(n,e.next());let r=n.childStore;r&&r.forEachNodeDeepAfterFilterAndSort(i,e,t)}),t&&this.parentRowNode.sibling&&i(this.parentRowNode.sibling,e.next())}getRowUsingDisplayIndex(i){return this.isDisplayIndexInStore(i)?this.blockUtils.binarySearchForDisplayIndex(i,this.nodesAfterSort):void 0}getRowBounds(i){for(let e=0;e<this.nodesAfterSort.length;e++){let t=this.nodesAfterSort[e],n=this.blockUtils.extractRowBounds(t,i);if(n)return n}return null}isPixelInRange(i){return i>=this.topPx&&i<this.topPx+this.heightPx}getRowIndexAtPixel(i){if(i<=this.topPx)return this.nodesAfterSort[0].rowIndex;if(i>=this.topPx+this.heightPx){let s=this.nodesAfterSort[this.nodesAfterSort.length-1],o=s.rowTop+s.rowHeight;if(i>=o&&s.expanded){if(s.childStore&&s.childStore.getRowCount()>0)return s.childStore.getRowIndexAtPixel(i);if(s.detailNode)return s.detailNode.rowIndex}return s.rowIndex}let n=null;return this.nodesAfterSort.forEach(s=>{let o=this.blockUtils.getIndexAtPixel(s,i);o!=null&&(n=o)}),n??this.displayIndexEnd-1}getChildStore(i){return this.storeUtils.getChildStore(i,this,e=>this.allRowNodes.find(n=>n.key==e))}forEachChildStoreShallow(i){this.allRowNodes.forEach(e=>{let t=e.childStore;t&&i(t)})}refreshAfterFilter(i){let e=this.storeUtils.isServerSideFilterOnServer(),t=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,i);if(!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||e&&t){this.refreshStore(!0),this.sortRowNodes();return}this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(r=>r.refreshAfterFilter(i))}refreshAfterSort(i){let e=this.storeUtils.isServerSideSortOnServer(),t=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,i);if(this.storeUtils.isServerSideSortAllLevels()||e&&t){this.refreshStore(!0),this.filterRowNodes();return}this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(r=>r.refreshAfterSort(i))}applyTransaction(i){switch(this.getState()){case Ea.STATE_FAILED:return{status:fn.StoreLoadingFailed};case Ea.STATE_LOADING:return{status:fn.StoreLoading};case Ea.STATE_WAITING_TO_LOAD:return{status:fn.StoreWaitingToLoad}}let e=this.gos.getCallback("isApplyServerSideTransaction");if(e){let r={transaction:i,parentNode:this.parentRowNode,groupLevelInfo:this.info};if(!e(r))return{status:fn.Cancelled}}let t={status:fn.Applied,remove:[],update:[],add:[]},n=[];return this.executeAdd(i,t),this.executeRemove(i,t,n),this.executeUpdate(i,t,n),this.filterAndSortNodes(),this.updateSelection(n),t}updateSelection(i){if(i.length>0){this.selectionService.setNodesSelected({newValue:!1,nodes:i,suppressFinishActions:!0,clearSelection:!1,source:"rowDataChanged"});let t={type:X.EVENT_SELECTION_CHANGED,source:"rowDataChanged"};this.eventService.dispatchEvent(t)}}executeAdd(i,e){let{add:t,addIndex:n}=i;if(M.missingOrEmpty(t))return;typeof n=="number"&&n>=0?t.reverse().forEach(s=>{let o=this.createDataNode(s,n);e.add.push(o)}):t.forEach(s=>{let o=this.createDataNode(s);e.add.push(o)})}executeRemove(i,e,t){let{remove:n}=i;if(n==null)return;let r={};n.forEach(s=>{let o=this.lookupRowNode(s);o&&(o.isSelected()&&t.push(o),o.clearRowTopAndRowIndex(),r[o.id]=!0,delete this.allNodesMap[o.id],e.remove.push(o),this.nodeManager.removeNode(o))}),this.allRowNodes=this.allRowNodes.filter(s=>!r[s.id])}executeUpdate(i,e,t){let{update:n}=i;n?.forEach(r=>{let s=this.lookupRowNode(r);s&&(this.blockUtils.updateDataIntoRowNode(s,r),!s.selectable&&s.isSelected()&&t.push(s),e.update.push(s))})}lookupRowNode(i){let e=this.gos.getCallback("getRowId"),t;if(e!=null){let n=this.level,r=this.parentRowNode.getGroupKeys(),s=e({data:i,parentKeys:r.length>0?r:void 0,level:n});if(t=this.allNodesMap[s],!t)return console.error(`AG Grid: could not find row id=${s}, data item was not found for this id`),null}else if(t=this.allRowNodes.find(n=>n.data===i),!t)return console.error("AG Grid: could not find data item as object was not found",i),null;return t}addStoreStates(i){i.push({suppressInfiniteScroll:!0,route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info}),this.forEachChildStoreShallow(e=>e.addStoreStates(i))}refreshStore(i){if(i){let e=this.nodesAfterSort?this.nodesAfterSort.length:1;this.initialiseRowNodes(e)}this.scheduleLoad(),this.fireStoreUpdatedEvent()}retryLoads(){this.getState()===Ea.STATE_FAILED&&(this.initialiseRowNodes(1),this.scheduleLoad()),this.forEachChildStoreShallow(i=>i.retryLoads())}scheduleLoad(){this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad()}fireStoreUpdatedEvent(){let i={type:X.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(i)}getRowCount(){return this.nodesAfterSort.length}getTopLevelRowDisplayedIndex(i){return this.nodesAfterSort[i].rowIndex}isLastRowIndexKnown(){return this.getState()==Ea.STATE_LOADED}getRowNodesInRange(i,e){let t=[],n=!1;return M.missing(i)&&(n=!0),this.nodesAfterSort.forEach(s=>{let o=s===i||s===e;(n||o)&&t.push(s),o&&(n=!n)}),n?[]:t}getStoreBounds(){return{topPx:this.topPx,heightPx:this.heightPx}}};Pe([k("ssrmStoreUtils")],ar.prototype,"storeUtils",2);Pe([k("ssrmBlockUtils")],ar.prototype,"blockUtils",2);Pe([k("columnModel")],ar.prototype,"columnModel",2);Pe([k("rowNodeBlockLoader")],ar.prototype,"rowNodeBlockLoader",2);Pe([k("rowNodeSorter")],ar.prototype,"rowNodeSorter",2);Pe([k("sortController")],ar.prototype,"sortController",2);Pe([k("selectionService")],ar.prototype,"selectionService",2);Pe([k("ssrmNodeManager")],ar.prototype,"nodeManager",2);Pe([k("filterManager")],ar.prototype,"filterManager",2);Pe([k("ssrmTransactionManager")],ar.prototype,"transactionManager",2);Pe([k("rowModel")],ar.prototype,"serverSideRowModel",2);Pe([J],ar.prototype,"postConstruct",1);Pe([_i],ar.prototype,"destroyRowNodes",1);var JY=class{constructor(...i){if(i.length<1)throw new Error("AG Grid: At least one index must be provided.");this.indexes=i,this.maps=new Map(this.indexes.map(e=>[e,new Map]))}getSize(){return this.maps.get(this.indexes[0]).size}getBy(i,e){let t=this.maps.get(i);if(!t)throw new Error(`AG Grid: ${String(i)} not found`);return t.get(e)}set(i){this.indexes.forEach(e=>{let t=this.maps.get(e);if(!t)throw new Error(`AG Grid: ${String(e)} not found`);t.set(i[e],i)})}delete(i){this.indexes.forEach(e=>{let t=this.maps.get(e);if(!t)throw new Error(`AG Grid: ${String(e)} not found`);t.delete(i[e])})}clear(){this.maps.forEach(i=>i.clear())}getIterator(i){let e=this.maps.get(i);if(!e)throw new Error(`AG Grid: ${String(i)} not found`);return e.values()}forEach(i){let e=this.getIterator(this.indexes[0]),t;for(;(t=e.next())&&!t.done;)i(t.value)}find(i){let e=this.getIterator(this.indexes[0]),t;for(;(t=e.next())&&!t.done;)if(i(t.value))return t.value}filter(i){let e=this.getIterator(this.indexes[0]),t,n=[];for(;(t=e.next())&&!t.done;)i(t.value)&&n.push(t.value);return n}},fc=(()=>{let i=class extends be{constructor(){super(...arguments),this.cacheLoadingNodesMap=new Map,this.isCheckQueued=!1,this.nextBlockToLoad=void 0}init(){this.addManagedListener(this.rowNodeBlockLoader,Uf.BLOCK_LOADED_EVENT,()=>this.queueLoadCheck())}subscribe(e){this.cacheLoadingNodesMap.set(e,new Set)}unsubscribe(e){this.cacheLoadingNodesMap.delete(e)}queueLoadCheck(){this.isCheckQueued||(this.isCheckQueued=!0,window.queueMicrotask(()=>{this.queueLoadAction(),this.isCheckQueued=!1}))}queueLoadAction(){let e=this.getBlockToLoad();if(!e)return;let t=this.nextBlockToLoad&&this.nextBlockToLoad.cache===e.cache&&this.nextBlockToLoad.index===e.index;if(!t&&(!this.nextBlockToLoad||!t)){this.nextBlockToLoad=e,window.clearTimeout(this.loaderTimeout);let n=Number(this.nextBlockToLoad.index),r=this.nextBlockToLoad.cache,s=e.index+e.cache.getBlockSize();this.loaderTimeout=window.setTimeout(()=>{r.isAlive()&&(this.loaderTimeout=void 0,this.attemptLoad(r,n,s),this.nextBlockToLoad=void 0)},this.gos.get("blockLoadDebounceMillis"))}}attemptLoad(e,t,n){let r=this.rowNodeBlockLoader.getAvailableLoadingCount();r!=null&&r===0||(this.rowNodeBlockLoader.registerLoads(1),this.executeLoad(e,t,n),this.queueLoadCheck())}executeLoad(e,t,n){var r;let s=e.getSsrmParams(),o={startRow:t,endRow:n,rowGroupCols:s.rowGroupCols,valueCols:s.valueCols,pivotCols:s.pivotCols,pivotMode:s.pivotMode,groupKeys:e.store.getParentNode().getGroupKeys(),filterModel:s.filterModel,sortModel:s.sortModel},a=this.cacheLoadingNodesMap.get(e),l=()=>{for(let p=0;p<n-t;p++)a.delete(t+p)},c=()=>{for(let p=0;p<n-t;p++)a.add(t+p)},u=p=>{this.rowNodeBlockLoader.loadComplete(),e.onLoadSuccess(t,n-t,p),l()},d=()=>{this.rowNodeBlockLoader.loadComplete(),e.onLoadFailed(t,n-t),l()},h=this.gos.addGridCommonParams({request:o,success:u,fail:d,parentNode:e.store.getParentNode()});c(),(r=e.getSsrmParams().datasource)==null||r.getRows(h)}getBlockToLoad(){var e;let t=this.rowRenderer.getFirstVirtualRenderedRow(),n=this.rowRenderer.getLastVirtualRenderedRow();for(let c=t;c<=n;c++){let u=this.rowModel.getRow(c);if(!u)continue;let d=u.parent&&u.parent.childStore;if(!d||!(d instanceof vo))continue;let h=d.getCache(),p=h.getNodes().getBy("node",u);if(!p)continue;let m=this.cacheLoadingNodesMap.get(h);if(!m?.has(p.index)&&(u.__needsRefreshWhenVisible||u.stub&&!u.failedLoad))return{cache:h,index:h.getBlockStartIndex(p.index)}}let r=null,s=null,o=Number.MAX_SAFE_INTEGER;for(let c of this.cacheLoadingNodesMap.keys())c.getNodesToRefresh().forEach(d=>{if(d.rowIndex==null){s=d,r=c;return}let h=c.getNodes().getBy("node",d);if(!h)return;let p=this.cacheLoadingNodesMap.get(c);if(p?.has(h.index))return;let m=Math.abs(t-d.rowIndex),g=Math.abs(d.rowIndex-n);m<o&&(s=d,o=m,r=c),g<o&&(s=d,o=g,r=c)});if(!r)return;let a=r,l=(e=a.getNodes().getBy("node",s))==null?void 0:e.index;return l==null?void 0:{cache:a,index:a.getBlockStartIndex(l)}}isRowLoading(e,t){var n,r;return(r=(n=this.cacheLoadingNodesMap.get(e))==null?void 0:n.has(t))!=null?r:!1}};return i.DEFAULT_BLOCK_SIZE=100,i})();Pe([k("rowNodeBlockLoader")],fc.prototype,"rowNodeBlockLoader",2);Pe([k("rowRenderer")],fc.prototype,"rowRenderer",2);Pe([k("rowModel")],fc.prototype,"rowModel",2);Pe([J],fc.prototype,"init",1);fc=Pe([De("lazyBlockLoadingService")],fc);var ts=class extends be{constructor(i,e,t){super(),this.live=!0,this.removedNodeCache=new Map,this.store=i,this.numberOfRows=e,this.isLastRowKnown=!1,this.storeParams=t}init(){this.lazyBlockLoadingService.subscribe(this),this.nodeMap=new JY("index","id","node"),this.nodeDisplayIndexMap=new Map,this.nodesToRefresh=new Set,this.defaultNodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),this.getRowIdFunc=this.gos.getCallback("getRowId"),this.isMasterDetail=this.gos.get("masterDetail")}destroyRowNodes(){this.lazyBlockLoadingService.unsubscribe(this),this.numberOfRows=0,this.nodeMap.forEach(i=>this.blockUtils.destroyRowNode(i.node)),this.nodeMap.clear(),this.nodeDisplayIndexMap.clear(),this.nodesToRefresh.clear(),this.live=!1}getRowByDisplayIndex(i){var e,t,n,r;if(!this.store.isDisplayIndexInStore(i))return;let s=this.nodeDisplayIndexMap.get(i);if(s)return(s.stub||s.__needsRefreshWhenVisible)&&this.lazyBlockLoadingService.queueLoadCheck(),s;if(i===this.store.getDisplayIndexStart())return this.createStubNode(0,i);let o=this.nodeDisplayIndexMap.get(i-1);if(o){if(this.isMasterDetail&&o.master&&o.expanded)return o.detailNode;if(o.expanded&&((e=o.childStore)!=null&&e.isDisplayIndexInStore(i)))return(t=o.childStore)==null?void 0:t.getRowUsingDisplayIndex(i);let d=this.nodeMap.getBy("node",o);return this.createStubNode(d.index+1,i)}let a=this.getSurroundingNodesByDisplayIndex(i);if(a==null){let d=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-i);return this.createStubNode(d,i)}let{previousNode:l,nextNode:c}=a;if(l&&l.node.expanded&&((n=l.node.childStore)!=null&&n.isDisplayIndexInStore(i)))return(r=l.node.childStore)==null?void 0:r.getRowUsingDisplayIndex(i);if(c){let d=c.node.rowIndex-i,h=c.index-d;return this.createStubNode(h,i)}let u=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-i);return this.createStubNode(u,i)}createStubNode(i,e){let t=this.store.getRowBounds(e),n=this.createRowAtIndex(i,null,r=>{r.setRowIndex(e),r.setRowTop(t.rowTop),this.nodeDisplayIndexMap.set(e,r)});return this.lazyBlockLoadingService.queueLoadCheck(),n}getRowByStoreIndex(i){var e;return(e=this.nodeMap.getBy("index",i))==null?void 0:e.node}skipDisplayIndexes(i,e,t){if(i===0)return;let n=this.gos.getRowHeightAsNumber();e.skip(i),t.value+=i*n}setDisplayIndexes(i,e){this.nodeDisplayIndexMap.clear();let t={};this.nodeMap.forEach(s=>{t[s.index]=s.node});let n=-1;for(let s in t){let o=t[s],a=Number(s),l=a-1-n;this.skipDisplayIndexes(l,i,e),this.blockUtils.setDisplayIndex(o,i,e),this.nodeDisplayIndexMap.set(o.rowIndex,o),n=a}let r=this.numberOfRows-1-n;this.skipDisplayIndexes(r,i,e),this.purgeExcessRows()}getRowCount(){return this.numberOfRows}setRowCount(i,e){if(i<0)throw new Error("AG Grid: setRowCount can only accept a positive row count.");this.numberOfRows=i,e!=null&&(this.isLastRowKnown=e,e===!1&&(this.numberOfRows+=1)),this.fireStoreUpdatedEvent()}getNodes(){return this.nodeMap}getNodeCachedByDisplayIndex(i){var e;return(e=this.nodeDisplayIndexMap.get(i))!=null?e:null}getNodesToRefresh(){return this.nodesToRefresh}getSurroundingNodesByDisplayIndex(i){let e,t;return this.nodeMap.forEach(n=>{if(i>n.node.rowIndex){(t==null||t.node.rowIndex<n.node.rowIndex)&&(t=n);return}if(e==null||e.node.rowIndex>n.node.rowIndex){e=n;return}}),!t&&!e?null:{previousNode:t,nextNode:e}}getDisplayIndexFromStoreIndex(i){var e,t;let n=this.nodeMap.getBy("index",i);if(n)return n.node.rowIndex;let r,s;if(this.nodeMap.forEach(l=>{if(i>l.index){(s==null||s.index<l.index)&&(s=l);return}if(r==null||r.index>l.index){r=l;return}}),!r)return this.store.getDisplayIndexEnd()-(this.numberOfRows-i);if(!s)return this.store.getDisplayIndexStart()+i;let o=i-s.index;return((t=(e=s.node.childStore)==null?void 0:e.getDisplayIndexEnd())!=null?t:s.node.rowIndex)+o}createRowAtIndex(i,e,t){var n,r;let s=this.nodeMap.getBy("index",i);if(s){let{node:a}=s;if(a.__needsRefreshWhenVisible=!1,this.doesNodeMatch(e,a))return this.blockUtils.updateDataIntoRowNode(a,e),this.nodesToRefresh.delete(a),a;if(this.getRowIdFunc==null&&a.hasChildren()&&a.expanded)return this.nodesToRefresh.delete(a),a;this.destroyRowAtIndex(i)}if(e&&this.getRowIdFunc!=null){let a=this.getRowId(e),l=a&&((n=this.removedNodeCache)==null?void 0:n.get(a));if(l)return(r=this.removedNodeCache)==null||r.delete(a),this.blockUtils.updateDataIntoRowNode(l,e),this.nodeMap.set({id:l.id,node:l,index:i}),l;let c=this.nodeMap.getBy("id",a);if(c){this.nodeMap.delete(c);let{node:u,index:d}=c;return this.blockUtils.updateDataIntoRowNode(u,e),this.nodeMap.set({id:u.id,node:u,index:i}),this.nodesToRefresh.delete(u),this.getBlockStartIndex(d)===this.getBlockStartIndex(i)||this.markBlockForVerify(d),u}}let o=this.blockUtils.createRowNode(this.store.getRowDetails());if(e!=null){let a=this.getPrefixedId(this.store.getIdSequence().next());this.blockUtils.setDataIntoRowNode(o,e,a,void 0),this.serverSideRowModel.setPaused(!0),this.blockUtils.checkOpenByDefault(o),this.serverSideRowModel.setPaused(!1),this.nodeManager.addRowNode(o)}return this.nodeMap.set({id:o.id,node:o,index:i}),t&&t(o),o}getBlockStates(){let i={},e={};this.nodeMap.forEach(({node:s,index:o})=>{var a;let l=this.getBlockStartIndex(o);!s.stub&&!s.failedLoad&&(i[l]=((a=i[l])!=null?a:0)+1);let c="loaded";s.failedLoad?c="failed":this.lazyBlockLoadingService.isRowLoading(this,l)?c="loading":(this.nodesToRefresh.has(s)||s.stub)&&(c="needsLoading"),e[l]||(e[l]=new Set),e[l].add(c)});let t={loading:4,failed:3,needsLoading:2,loaded:1},n=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),r={};return Object.entries(e).forEach(([s,o])=>{var a;let c=[...o].sort((h,p)=>{var m,g;return((m=t[h])!=null?m:0)-((g=t[p])!=null?g:0)})[0],u=Number(s)/this.getBlockSize(),d=n?`${n}-${u}`:String(u);r[d]={blockNumber:u,startRow:Number(s),endRow:Number(s)+this.getBlockSize(),pageStatus:c,loadedRowCount:(a=i[s])!=null?a:0}}),r}destroyRowAtIndex(i){let e=this.nodeMap.getBy("index",i);e&&(this.nodeMap.delete(e),this.nodeDisplayIndexMap.delete(e.node.rowIndex),this.nodesToRefresh.size>0?this.removedNodeCache.set(e.node.id,e.node):this.blockUtils.destroyRowNode(e.node),this.nodesToRefresh.delete(e.node))}getSsrmParams(){return this.store.getSsrmParams()}getPrefixedId(i){return this.defaultNodeIdPrefix?this.defaultNodeIdPrefix+"-"+i:i.toString()}markBlockForVerify(i){let[e,t]=this.getBlockBounds(i);this.nodeMap.filter(r=>r.index>=e&&r.index<t).forEach(({node:r})=>{r.__needsRefreshWhenVisible=!0})}doesNodeMatch(i,e){if(e.stub)return!1;if(this.getRowIdFunc!=null){let t=this.getRowId(i);return e.id===t}return e.data===i}purgeStubsOutsideOfViewport(){let i=this.api.getFirstDisplayedRowIndex(),e=this.api.getLastDisplayedRowIndex(),t=this.getBlockStartIndex(i),[n,r]=this.getBlockBounds(e);this.nodeMap.forEach(s=>{this.lazyBlockLoadingService.isRowLoading(this,s.index)||s.node.failedLoad||s.node.stub&&(s.index<t||s.index>r)&&this.destroyRowAtIndex(s.index)})}getBlocksDistanceFromRow(i,e){let t={};return i.forEach(({node:n,index:r})=>{let[s,o]=this.getBlockBounds(r);if(s in t)return;let a=Math.abs(n.rowIndex-e),l,c=this.nodeMap.getBy("index",[o-1]);c&&(l=Math.abs(c.node.rowIndex-e));let u=l==null||a<l?a:l;t[s]=u}),Object.entries(t)}purgeExcessRows(){var i;if(this.purgeStubsOutsideOfViewport(),this.store.getDisplayIndexEnd()==null||this.storeParams.maxBlocksInCache==null)return;let e=this.api.getFirstDisplayedRowIndex(),t=this.api.getLastDisplayedRowIndex(),n=new Set,r=new Set;this.nodeMap.forEach(({index:m,node:g})=>{let f=this.getBlockStartIndex(m);n.add(f),g.rowIndex>=e&&g.rowIndex<=t&&r.add(f)});let s=Math.max(r.size,(i=this.storeParams.maxBlocksInCache)!=null?i:0),a=n.size-s;if(a<=0)return;let l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;r.forEach(m=>{l>m&&(l=m),c<m&&(c=m)});let u=this.nodeMap.filter(({node:m,index:g})=>{let f=this.getBlockStartIndex(g);return!(f>=l&&f<=c)&&!this.isNodeCached(m)});if(u.length===0)return;let d=e+(t-e)/2,h=this.getBlocksDistanceFromRow(u,d),p=this.getBlockSize();h.sort((m,g)=>Math.sign(g[1]-m[1]));for(let m=0;m<Math.min(a,h.length);m++){let g=Number(h[m][0]);for(let f=g;f<g+p;f++){let y=this.nodeMap.getBy("index",f);!y||this.isNodeCached(y.node)||this.destroyRowAtIndex(f)}}}isNodeFocused(i){let e=this.focusService.getFocusCellToUseAfterRefresh();return!e||e.rowPinned!=null?!1:e.rowIndex===i.rowIndex}isNodeCached(i){return i.isExpandable()&&i.expanded||this.isNodeFocused(i)}extractDuplicateIds(i){if(this.getRowIdFunc==null)return[];let e=new Set,t=new Set;return i.forEach(n=>{let r=this.getRowId(n);if(e.has(r)){t.add(r);return}e.add(r)}),[...t]}onLoadSuccess(i,e,t){if(!this.live)return;let n=t.groupLevelInfo;if(this.store.setStoreInfo(n),this.getRowIdFunc!=null){let o=this.extractDuplicateIds(t.rowData);if(o.length>0){let a=o.join(", ");console.warn(`AG Grid: Unable to display rows as duplicate row ids (${a}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`),this.onLoadFailed(i,e);return}}t.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(t.pivotResultFields);let r=this.nodesToRefresh.size>0;if(t.rowData.forEach((o,a)=>{var l;let c=i+a,u=this.nodeMap.getBy("index",c);if((l=u?.node)!=null&&l.stub){this.createRowAtIndex(c,o);return}if(u&&this.doesNodeMatch(o,u.node)){this.blockUtils.updateDataIntoRowNode(u.node,o),this.nodesToRefresh.delete(u.node),u.node.__needsRefreshWhenVisible=!1;return}this.createRowAtIndex(c,o)}),t.rowCount!=null&&t.rowCount!==-1)this.numberOfRows=t.rowCount,this.isLastRowKnown=!0;else if(e>t.rowData.length)this.numberOfRows=i+t.rowData.length,this.isLastRowKnown=!0;else if(!this.isLastRowKnown){let o=i+t.rowData.length+1;o>this.numberOfRows&&(this.numberOfRows=o)}this.isLastRowKnown&&this.nodeMap.filter(a=>a.index>=this.numberOfRows).forEach(a=>this.destroyRowAtIndex(a.index)),this.fireStoreUpdatedEvent();let s=this.nodesToRefresh.size===0;r&&s&&this.fireRefreshFinishedEvent()}fireRefreshFinishedEvent(){this.nodesToRefresh.size===0&&(this.removedNodeCache.forEach(e=>{this.blockUtils.destroyRowNode(e)}),this.removedNodeCache=new Map,this.store.fireRefreshFinishedEvent())}isStoreFullyLoaded(){let i=this.isLastRowKnown,e=this.nodeMap.getSize()===this.numberOfRows;if(!i||!e||this.nodesToRefresh.size>0)return;let t=-1;return this.nodeMap.find(r=>(t+=1,!!(r.index!==t||r.node.__needsRefreshWhenVisible||r.node.stub)))==null}isLastRowIndexKnown(){return this.isLastRowKnown}onLoadFailed(i,e){var t;if(!this.live)return;let n=this.nodesToRefresh.size>0;for(let s=i;s<i+e&&s<this.getRowCount();s++){let{node:o}=(t=this.nodeMap.getBy("index",s))!=null?t:{};o&&this.nodesToRefresh.delete(o),(!o||!o.stub)&&(o&&!o.stub&&this.destroyRowAtIndex(s),o=this.createRowAtIndex(s)),o.__needsRefreshWhenVisible=!1,o.failedLoad=!0}let r=this.nodesToRefresh.size===0;n&&r&&this.fireRefreshFinishedEvent(),this.fireStoreUpdatedEvent()}markNodesForRefresh(){this.nodeMap.forEach(i=>{i.node.stub&&!i.node.failedLoad||this.nodesToRefresh.add(i.node)}),this.lazyBlockLoadingService.queueLoadCheck(),this.isLastRowKnown&&this.numberOfRows===0&&(this.numberOfRows=1,this.isLastRowKnown=!1,this.fireStoreUpdatedEvent())}isNodeInCache(i){return!!this.nodeMap.getBy("id",i)}fireStoreUpdatedEvent(){this.live&&this.store.fireStoreUpdatedEvent()}getRowId(i){if(this.getRowIdFunc==null)return null;let{level:e}=this.store.getRowDetails(),t=this.store.getParentNode().getGroupKeys(),n=this.getRowIdFunc({data:i,parentKeys:t.length>0?t:void 0,level:e});return String(n)}getOrderedNodeMap(){let i={};return this.nodeMap.forEach(e=>i[e.index]=e),i}clearDisplayIndexes(){this.nodeDisplayIndexMap.clear()}clientSideSortRows(){let i=this.sortController.getSortOptions();if(!i.some(r=>r.sort!=null))return;let t=new Array(this.nodeMap.getSize());this.nodeMap.forEach(r=>t[r.index]=r.node),this.nodeMap.clear(),this.rowNodeSorter.doFullSort(t,i).forEach((r,s)=>{this.nodeMap.set({id:r.id,node:r,index:s})})}updateRowNodes(i){if(this.getRowIdFunc==null)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");let e=[];return i.forEach(t=>{let n=this.getRowId(t),r=this.nodeMap.getBy("id",n);r&&(this.blockUtils.updateDataIntoRowNode(r.node,t),e.push(r.node))}),e}insertRowNodes(i,e){let t=this.store.getRowCount()-(this.store.getParentNode().sibling?1:0),n=e==null&&this.isLastRowKnown?t:e;if(n==null||t<n)return[];if(this.getRowIdFunc==null)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");let r={};i.forEach(l=>{let c=this.getRowId(l);c&&this.isNodeInCache(c)||(r[c]=l)});let s=Object.values(r),o=s.length;if(o===0)return[];let a=this.nodeMap.filter(l=>l.index>=n);return a.forEach(l=>this.nodeMap.delete(l)),a.forEach(l=>{this.nodeMap.set({node:l.node,index:l.index+o,id:l.id})}),this.numberOfRows+=o,s.map((l,c)=>this.createRowAtIndex(n+c,l))}removeRowNodes(i){if(this.getRowIdFunc==null)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");let e=[],t=[],n=0,r=[...i],s=this.getOrderedNodeMap(),o=-1;for(let a in s){o+=1;let l=s[a],c=r.findIndex(d=>d===l.id);if(c!==-1){r.splice(c,1),this.destroyRowAtIndex(Number(a)),e.push(l.node),n+=1;continue}if(n===0)continue;let u=Number(a);o!==u&&t.push(l.node),this.nodeMap.delete(s[a]),this.nodeMap.set({id:l.id,node:l.node,index:u-n})}return this.numberOfRows-=this.isLastRowIndexKnown()?i.length:n,r.length>0&&t.length>0&&(t.forEach(a=>a.__needsRefreshWhenVisible=!0),this.lazyBlockLoadingService.queueLoadCheck()),e}getBlockSize(){return this.storeParams.cacheBlockSize||fc.DEFAULT_BLOCK_SIZE}getBlockStartIndex(i){let e=this.getBlockSize();return i-i%e}getBlockBounds(i){let e=this.getBlockStartIndex(i),t=this.getBlockSize();return[e,e+t]}};Pe([k("gridApi")],ts.prototype,"api",2);Pe([k("ssrmBlockUtils")],ts.prototype,"blockUtils",2);Pe([k("focusService")],ts.prototype,"focusService",2);Pe([k("ssrmNodeManager")],ts.prototype,"nodeManager",2);Pe([k("rowModel")],ts.prototype,"serverSideRowModel",2);Pe([k("rowNodeSorter")],ts.prototype,"rowNodeSorter",2);Pe([k("sortController")],ts.prototype,"sortController",2);Pe([k("lazyBlockLoadingService")],ts.prototype,"lazyBlockLoadingService",2);Pe([J],ts.prototype,"init",1);Pe([_i],ts.prototype,"destroyRowNodes",1);var vo=class extends be{constructor(i,e,t){super(),this.idSequence=new cr,this.ssrmParams=i,this.parentRowNode=t,this.storeParams=e,this.level=t.level+1,this.group=i.rowGroupCols?this.level<i.rowGroupCols.length:!1,this.leafGroup=i.rowGroupCols?this.level===i.rowGroupCols.length-1:!1,this.info={}}init(){var i;let e=1;if(this.level===0&&(e=(i=this.storeUtils.getServerSideInitialRowCount())!=null?i:1,this.eventService.dispatchEventOnce({type:X.EVENT_ROW_COUNT_READY})),this.cache=this.createManagedBean(new ts(this,e,this.storeParams)),!this.gos.get("treeData")&&this.group){let n=this.ssrmParams.rowGroupCols[this.level];this.groupField=n.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}}destroyRowNodes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.destroyBean(this.cache)}applyRowData(i,e,t){this.cache.onLoadSuccess(e,t,i)}applyTransaction(i){var e,t,n;let r=this.gos.getCallback("getRowId");if(!r)return console.warn("AG Grid: getRowId callback must be implemented for transactions to work. Transaction was ignored."),{status:fn.Cancelled};let s=this.gos.getCallback("isApplyServerSideTransaction");if(s){let p={transaction:i,parentNode:this.parentRowNode,groupLevelInfo:this.info};if(!s(p))return{status:fn.Cancelled}}let o=this.cache.isStoreFullyLoaded(),a;(e=i.update)!=null&&e.length&&(a=this.cache.updateRowNodes(i.update));let l;if((t=i.add)!=null&&t.length){let p=i.addIndex;p!=null&&p<0&&(p=void 0),l=this.cache.insertRowNodes(i.add,p)}let c;if((n=i.remove)!=null&&n.length){let p=i.remove.map(g=>r({level:this.level,parentKeys:this.parentRowNode.getGroupKeys(),data:g})),m=[...new Set(p)];c=this.cache.removeRowNodes(m)}let u=this.gos.get("serverSideEnableClientSideSort"),d=a?.length||l?.length;return o&&u&&d&&this.cache.clientSideSortRows(),this.updateSelectionAfterTransaction(a,c),{status:fn.Applied,update:a,add:l,remove:c}}updateSelectionAfterTransaction(i,e){let t=[];i?.forEach(n=>{n.isSelected()&&!n.selectable&&t.push(n)}),e?.forEach(n=>{n.isSelected()&&t.push(n)}),t.length&&this.selectionService.setNodesSelected({newValue:!1,clearSelection:!1,nodes:t,source:"rowDataChanged"})}clearDisplayIndexes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.cache.getNodes().forEach(i=>this.blockUtils.clearDisplayIndex(i.node)),this.parentRowNode.sibling&&this.blockUtils.clearDisplayIndex(this.parentRowNode.sibling),this.cache.clearDisplayIndexes()}getDisplayIndexStart(){return this.displayIndexStart}getDisplayIndexEnd(){return this.displayIndexEnd}getRowCount(){return this.parentRowNode.sibling?this.cache.getRowCount()+1:this.cache.getRowCount()}setRowCount(i,e){this.cache.setRowCount(i,e)}isDisplayIndexInStore(i){return this.cache.getRowCount()===0?!1:this.displayIndexStart<=i&&i<this.getDisplayIndexEnd()}setDisplayIndexes(i,e){this.displayIndexStart=i.peek(),this.topPx=e.value;let t=this.parentRowNode.level>-1&&this.gos.getGroupTotalRowCallback()({node:this.parentRowNode});t||this.parentRowNode.destroyFooter(),t==="top"&&(this.parentRowNode.createFooter(),this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,i,e)),this.cache.setDisplayIndexes(i,e),t==="bottom"&&(this.parentRowNode.createFooter(),this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,i,e)),this.displayIndexEnd=i.peek(),this.heightPx=e.value-this.topPx}forEachStoreDeep(i,e=new cr){i(this,e.next()),this.cache.getNodes().forEach(t=>{let n=t.node.childStore;n&&n.forEachStoreDeep(i,e)})}forEachNodeDeep(i,e=new cr){this.cache.getNodes().forEach(t=>{i(t.node,e.next());let n=t.node.childStore;n&&n.forEachNodeDeep(i,e)})}forEachNodeDeepAfterFilterAndSort(i,e=new cr,t=!1){let n=this.parentRowNode.level>-1&&this.gos.getGroupTotalRowCallback()({node:this.parentRowNode});n==="top"&&i(this.parentRowNode.sibling,e.next());let r=this.cache.getOrderedNodeMap();for(let s in r){let o=r[s];i(o.node,e.next());let a=o.node.childStore;a&&a.forEachNodeDeepAfterFilterAndSort(i,e,t)}n==="bottom"&&i(this.parentRowNode.sibling,e.next())}retryLoads(){this.cache.getNodes().forEach(({node:i})=>{i.failedLoad&&(i.failedLoad=!1,i.__needsRefreshWhenVisible=!0,i.stub=!0)}),this.forEachChildStoreShallow(i=>i.retryLoads()),this.fireStoreUpdatedEvent()}getRowUsingDisplayIndex(i){return this.parentRowNode.sibling&&i===this.parentRowNode.sibling.rowIndex?this.parentRowNode.sibling:this.cache.getRowByDisplayIndex(i)}getRowBounds(i){var e;if(!this.isDisplayIndexInStore(i))return null;let t=this.cache.getNodeCachedByDisplayIndex(i);if(t){let l=this.blockUtils.extractRowBounds(t,i);if(l)return l}let{previousNode:n,nextNode:r}=(e=this.cache.getSurroundingNodesByDisplayIndex(i))!=null?e:{};if(n){let l=this.blockUtils.extractRowBounds(n.node,i);if(l!=null)return l}let s=this.gos.getRowHeightAsNumber();if(r){let l=(r.node.rowIndex-i)*s;return{rowTop:r.node.rowTop-l,rowHeight:s}}let o=this.topPx+this.heightPx,a=(this.getDisplayIndexEnd()-i)*s;return{rowTop:o-a,rowHeight:s}}isPixelInRange(i){return i>=this.topPx&&i<this.topPx+this.heightPx}getRowIndexAtPixel(i){if(i<this.topPx)return this.getDisplayIndexStart();if(i>=this.topPx+this.heightPx)return this.getDisplayIndexEnd()-1;if(this.parentRowNode.sibling&&i>this.parentRowNode.sibling.rowTop&&i<this.parentRowNode.sibling.rowTop+this.parentRowNode.sibling.rowHeight)return this.parentRowNode.sibling.rowIndex;let e=Number.MAX_SAFE_INTEGER,t=null,n=Number.MAX_SAFE_INTEGER,r=null;if(this.cache.getNodes().forEach(({node:l})=>{let c=Math.abs(i-l.rowTop);if(l.rowTop<i){c<e&&(e=c,t=l);return}c<n&&(n=c,r=l)}),t=t,r=r,t){let l=this.blockUtils.getIndexAtPixel(t,i);if(l!=null)return l}let s=this.gos.getRowHeightAsNumber();if(r){let l=r.rowTop,c=Math.ceil((l-i)/s);return r.rowIndex-c}let o=this.topPx+this.heightPx,a=Math.floor((o-i)/s);return this.getDisplayIndexEnd()-a}getChildStore(i){return this.storeUtils.getChildStore(i,this,e=>{let t=this.cache.getNodes().find(n=>n.node.key==e);return t?t.node:null})}forEachChildStoreShallow(i){this.cache.getNodes().forEach(({node:e})=>{e.childStore&&i(e.childStore)})}refreshAfterSort(i){if(this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,i)){let t=this.cache.isStoreFullyLoaded(),n=this.gos.get("serverSideEnableClientSideSort");if(!(t&&n)){let s=this.cache.getRowCount();this.destroyBean(this.cache),this.cache=this.createManagedBean(new ts(this,s,this.storeParams));return}this.cache.clientSideSortRows()}this.forEachChildStoreShallow(t=>t.refreshAfterSort(i))}refreshAfterFilter(i){if(!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,i)){this.refreshStore(!0);return}this.forEachChildStoreShallow(t=>t.refreshAfterFilter(i))}refreshStore(i){if(i){this.destroyBean(this.cache),this.cache=this.createManagedBean(new ts(this,1,this.storeParams)),this.fireStoreUpdatedEvent();return}this.cache.markNodesForRefresh()}getTopLevelRowDisplayedIndex(i){let e=this.cache.getDisplayIndexFromStoreIndex(i);return e??i}isLastRowIndexKnown(){return this.cache.isLastRowIndexKnown()}getRowNodesInRange(i,e){let t=[],n=!1;return M.missing(i)&&(n=!0),this.cache.getNodes().filter(({node:r})=>r.rowIndex>=i.rowIndex&&r.rowIndex<=e.rowIndex).map(({node:r})=>r)}addStoreStates(i){i.push({suppressInfiniteScroll:!1,route:this.parentRowNode.getGroupKeys(),rowCount:this.getRowCount(),lastRowIndexKnown:this.isLastRowIndexKnown(),info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow(e=>e.addStoreStates(i))}getIdSequence(){return this.idSequence}getParentNode(){return this.parentRowNode}getRowDetails(){return{field:this.groupField,group:this.group,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn}}getSsrmParams(){return this.ssrmParams}setStoreInfo(i){i&&Object.assign(this.info,i)}fireStoreUpdatedEvent(){let i={type:X.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(i)}fireRefreshFinishedEvent(){let i={type:X.EVENT_STORE_REFRESHED,route:this.parentRowNode.getRoute()};this.eventService.dispatchEvent(i)}getBlockStates(){return this.cache.getBlockStates()}getStoreBounds(){return{topPx:this.topPx,heightPx:this.heightPx}}getCache(){return this.cache}};Pe([k("ssrmBlockUtils")],vo.prototype,"blockUtils",2);Pe([k("ssrmStoreUtils")],vo.prototype,"storeUtils",2);Pe([k("columnModel")],vo.prototype,"columnModel",2);Pe([k("selectionService")],vo.prototype,"selectionService",2);Pe([J],vo.prototype,"init",1);Pe([_i],vo.prototype,"destroyRowNodes",1);var Gr=class extends be{constructor(){super(...arguments),this.onRowHeightChanged_debounced=M.debounce(this.onRowHeightChanged.bind(this),100),this.pauseStoreUpdateListening=!1,this.started=!1,this.managingPivotResultColumns=!1}ensureRowHeightsValid(){return!1}start(){this.started=!0,this.updateDatasource()}destroyDatasource(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)}addEventListeners(){this.addManagedListener(this.eventService,X.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,X.EVENT_STORE_UPDATED,this.onStoreUpdated.bind(this));let i=this.resetRootStore.bind(this);this.addManagedListener(this.eventService,X.EVENT_COLUMN_VALUE_CHANGED,i),this.addManagedListener(this.eventService,X.EVENT_COLUMN_PIVOT_CHANGED,i),this.addManagedListener(this.eventService,X.EVENT_COLUMN_ROW_GROUP_CHANGED,i),this.addManagedListener(this.eventService,X.EVENT_COLUMN_PIVOT_MODE_CHANGED,i),this.addManagedPropertyListeners(["masterDetail","treeData","removePivotHeaderRowWhenSingleValueColumn","suppressServerSideInfiniteScroll","cacheBlockSize"],i),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights()),this.verifyProps(),this.addManagedPropertyListener("serverSideDatasource",()=>this.updateDatasource())}updateDatasource(){let i=this.gos.get("serverSideDatasource");i&&this.setDatasource(i)}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&M.warnOnce("initialGroupOrderComparator cannot be used with Server Side Row Model."),this.gos.isRowSelection()&&!this.gos.exists("getRowId")&&M.warnOnce("getRowId callback must be provided for Server Side Row Model selection to work correctly.")}setDatasource(i){this.started&&(this.destroyDatasource(),this.datasource=i,this.resetRootStore())}applyRowData(i,e,t){let n=this.getRootStore();if(!n)return;let r=n.getChildStore(t);r&&(r instanceof vo?r.applyRowData(i,e,i.rowData.length):r instanceof ar&&r.processServerResult(i))}isLastRowIndexKnown(){let i=this.getRootStore();return i?i.isLastRowIndexKnown():!1}onColumnEverything(){if(!this.storeParams){this.resetRootStore();return}let i=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),e=this.columnsToValueObjects(this.columnModel.getValueColumns()),t=this.columnsToValueObjects(this.columnModel.getPivotColumns()),n=c=>{let u={};c.oldCols.forEach(p=>u[p.id]=p);let d=c.newCols.every(p=>{let m=u[p.id];return m&&delete u[p.id],m&&m.field===p.field&&m.aggFunc===p.aggFunc}),h=!c.allowRemovedColumns&&!!Object.values(u).length;return d&&!h},r=!M.jsonEquals(this.storeParams.sortModel,this.sortController.getSortModel()),s=!n({oldCols:this.storeParams.rowGroupCols,newCols:i}),o=!n({oldCols:this.storeParams.pivotCols,newCols:t}),a=!!i?.length&&!n({oldCols:this.storeParams.valueCols,newCols:e,allowRemovedColumns:!0});if(r||s||o||a)this.resetRootStore();else{let c=this.createStoreParams();this.storeParams.rowGroupCols=c.rowGroupCols,this.storeParams.pivotCols=c.pivotCols,this.storeParams.valueCols=c.valueCols}}destroyRootStore(){!this.rootNode||!this.rootNode.childStore||(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())}refreshAfterSort(i,e){this.storeParams&&(this.storeParams.sortModel=i);let t=this.getRootStore();t&&(t.refreshAfterSort(e),this.onStoreUpdated())}generateSecondaryColumns(i){if(!this.pivotColDefService){jt.__assertRegistered(qe.RowGroupingModule,"pivotResultFields",this.context.getGridId());return}let e=this.pivotColDefService.createColDefsFromFields(i);this.managingPivotResultColumns=!0,this.columnModel.setSecondaryColumns(e,"rowModelUpdated")}resetRowHeights(){let i=this.resetRowHeightsForAllRowNodes(),e=this.gos.getRowHeightForNode(this.rootNode);if(this.rootNode.setRowHeight(e.height,e.estimated),this.rootNode.sibling){let t=this.gos.getRowHeightForNode(this.rootNode.sibling);this.rootNode.sibling.setRowHeight(t.height,t.estimated)}i&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let i=!1;return this.forEachNode(e=>{let t=this.gos.getRowHeightForNode(e);e.setRowHeight(t.height,t.estimated);let n=e.detailNode;if(n){let r=this.gos.getRowHeightForNode(n);n.setRowHeight(r.height,r.estimated)}if(e.sibling){let r=this.gos.getRowHeightForNode(e.sibling);n.setRowHeight(r.height,r.estimated)}i=!0}),i}resetRootStore(){this.destroyRootStore(),this.rootNode=new Wr(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds()),this.managingPivotResultColumns&&(this.columnModel.setSecondaryColumns(null,"api"),this.managingPivotResultColumns=!1),this.dispatchModelUpdated(!0)}columnsToValueObjects(i){return i.map(e=>({id:e.getId(),aggFunc:e.getAggFunc(),displayName:this.columnModel.getDisplayNameForColumn(e,"model"),field:e.getColDef().field}))}createStoreParams(){let i=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),e=this.columnsToValueObjects(this.columnModel.getValueColumns()),t=this.columnsToValueObjects(this.columnModel.getPivotColumns()),n=this.gos.isGetRowHeightFunction();return{valueCols:e,rowGroupCols:i,pivotCols:t,pivotMode:this.columnModel.isPivotMode(),filterModel:this.filterManager.isAdvancedFilterEnabled()?this.filterManager.getAdvancedFilterModel():this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),datasource:this.datasource,lastAccessedSequence:new cr,dynamicRowHeight:n}}getParams(){return this.storeParams}dispatchModelUpdated(i=!1){let e={type:X.EVENT_MODEL_UPDATED,animate:!i,keepRenderedRows:!i,newPage:!1,newData:!1};this.eventService.dispatchEvent(e)}onStoreUpdated(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}onRowHeightChanged(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()}updateRowIndexesAndBounds(){let i=this.getRootStore();i&&i.setDisplayIndexes(new cr,{value:0})}retryLoads(){let i=this.getRootStore();i&&(i.retryLoads(),this.onStoreUpdated())}getRow(i){let e=this.getRootStore();if(e)return e.getRowUsingDisplayIndex(i)}setPaused(i){this.pauseStoreUpdateListening=i}expandAll(i){this.pauseStoreUpdateListening=!0,this.forEachNode(e=>{e.stub||e.hasChildren()&&e.setExpanded(i)}),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()}refreshAfterFilter(i,e){this.storeParams&&(this.storeParams.filterModel=i);let t=this.getRootStore();t&&(t.refreshAfterFilter(e),this.onStoreUpdated())}getRootStore(){if(this.rootNode&&this.rootNode.childStore)return this.rootNode.childStore}getRowCount(){let i=this.getRootStore();return i?i.getDisplayIndexEnd():0}getTopLevelRowCount(){let i=this.getRootStore();return i?i.getRowCount():1}getTopLevelRowDisplayedIndex(i){let e=this.getRootStore();return e?e.getTopLevelRowDisplayedIndex(i):i}getRowBounds(i){let e=this.getRootStore();return e?e.getRowBounds(i):{rowTop:0,rowHeight:this.gos.getRowHeightAsNumber()}}getBlockStates(){let i=this.getRootStore();if(!i)return;let e={};return i.forEachStoreDeep(t=>{if(t instanceof ar){let{id:n,state:r}=t.getBlockStateJson();e[n]=r}else if(t instanceof vo)Object.entries(t.getBlockStates()).forEach(([n,r])=>{e[n]=r});else throw new Error("AG Grid: Unsupported store type")}),e}getRowIndexAtPixel(i){let e=this.getRootStore();return i<=0||!e?0:e.getRowIndexAtPixel(i)}isEmpty(){return!1}isRowsToRender(){return this.getRootStore()!=null&&this.getRowCount()>0}getType(){return"serverSide"}forEachNode(i){let e=this.getRootStore();e&&e.forEachNodeDeep(i)}forEachNodeAfterFilterAndSort(i,e=!1){let t=this.getRootStore();t&&t.forEachNodeDeepAfterFilterAndSort(i,void 0,e)}executeOnStore(i,e){if(!this.started)return!1;let t=this.getRootStore();if(!t)return!0;let n=t.getChildStore(i);return n&&e(n),!0}refreshStore(i={}){let e=i.route?i.route:[];this.executeOnStore(e,t=>t.refreshStore(i.purge==!0))}getStoreState(){let i=[],e=this.getRootStore();return e&&e.addStoreStates(i),i}getNodesInRangeForSelection(i,e){if(!M.exists(i))return[];if(!e)return[i];let t=i.rowIndex,n=e.rowIndex;if(t===null||n===null)return[i];let r=[],[s,o]=[t,n].sort((a,l)=>a-l);return this.forEachNode(a=>{let l=a.rowIndex;l==null||a.stub||l>=s&&l<=o&&r.push(a)}),r.length!==o-s+1?[i]:r}getRowNode(i){let e;return this.forEachNode(t=>{t.id===i&&(e=t),t.detailNode&&t.detailNode.id===i&&(e=t.detailNode)}),e}isRowPresent(i){return!!this.getRowNode(i.id)}setRowCount(i,e){let t=this.getRootStore();if(t){if(t instanceof vo){t.setRowCount(i,e);return}console.error("AG Grid: Infinite scrolling must be enabled in order to set the row count.")}}};Pe([k("columnModel")],Gr.prototype,"columnModel",2);Pe([k("filterManager")],Gr.prototype,"filterManager",2);Pe([k("sortController")],Gr.prototype,"sortController",2);Pe([k("rowRenderer")],Gr.prototype,"rowRenderer",2);Pe([k("ssrmNodeManager")],Gr.prototype,"nodeManager",2);Pe([k("ssrmStoreFactory")],Gr.prototype,"storeFactory",2);Pe([k("beans")],Gr.prototype,"beans",2);Pe([ji("pivotColDefService")],Gr.prototype,"pivotColDefService",2);Pe([_i],Gr.prototype,"destroyDatasource",1);Pe([J],Gr.prototype,"addEventListeners",1);Pe([_i],Gr.prototype,"destroyRootStore",1);Gr=Pe([De("rowModel")],Gr);var tp=class extends be{loadFromDatasource(i){let{storeParams:e,parentBlock:t,parentNode:n}=i,r=n.getGroupKeys();if(!e.datasource)return;let s={startRow:i.startRow,endRow:i.endRow,rowGroupCols:e.rowGroupCols,valueCols:e.valueCols,pivotCols:e.pivotCols,pivotMode:e.pivotMode,groupKeys:r,filterModel:e.filterModel,sortModel:e.sortModel},o=this.gos.addGridCommonParams({success:i.success,fail:i.fail,request:s,parentNode:i.parentNode});window.setTimeout(()=>{if(!e.datasource||!t.isAlive()){i.fail();return}e.datasource.getRows(o)},0)}getChildStore(i,e,t){if(M.missingOrEmpty(i))return e;let n=i[0],r=t(n);if(r){if(i.length===1&&!r.childStore){let a=this.serverSideRowModel.getParams();r.childStore=this.createBean(this.storeFactory.createStore(a,r))}let s=i.slice(1,i.length),o=r.childStore;return o?o.getChildStore(s):null}return null}isServerRefreshNeeded(i,e,t){if(t.valueColChanged||t.secondaryColChanged)return!0;let n=i.level+1;if(!(n<e.length))return!0;let o=e[n].id;return t.changedColumns.indexOf(o)>-1?!0:this.columnModel.getAllGridColumns().filter(u=>u.getColDef().showRowGroup&&t.changedColumns.includes(u.getId())).map(u=>u.getColDef().showRowGroup).some(u=>u===!0||u===o)}getServerSideInitialRowCount(){return this.gos.get("serverSideInitialRowCount")}assertRowModelIsServerSide(i){return this.gos.isRowModelType("serverSide")?!0:(M.warnOnce(`The '${i}' property can only be used with the Server Side Row Model.`),!1)}assertNotTreeData(i){return this.gos.get("treeData")?(M.warnOnce(`The '${i}' property cannot be used while using tree data.`),!1):!0}isServerSideSortAllLevels(){return this.gos.get("serverSideSortAllLevels")&&this.assertRowModelIsServerSide("serverSideSortAllLevels")}isServerSideOnlyRefreshFilteredGroups(){return this.gos.get("serverSideOnlyRefreshFilteredGroups")&&this.assertRowModelIsServerSide("serverSideOnlyRefreshFilteredGroups")}isServerSideSortOnServer(){return this.gos.get("serverSideSortOnServer")&&this.assertRowModelIsServerSide("serverSideSortOnServer")&&this.assertNotTreeData("serverSideSortOnServer")}isServerSideFilterOnServer(){return this.gos.get("serverSideFilterOnServer")&&this.assertRowModelIsServerSide("serverSideFilterOnServer")&&this.assertNotTreeData("serverSideFilterOnServer")}};Pe([k("columnModel")],tp.prototype,"columnModel",2);Pe([k("rowModel")],tp.prototype,"serverSideRowModel",2);Pe([k("ssrmStoreFactory")],tp.prototype,"storeFactory",2);tp=Pe([De("ssrmStoreUtils")],tp);var eq="ag-Grid-MissingKey",vc=class extends be{createRowNode(i){let e=new Wr(this.beans),t=i.rowHeight!=null?i.rowHeight:this.gos.getRowHeightAsNumber();return e.setRowHeight(t),e.group=i.group,e.leafGroup=i.leafGroup,e.level=i.level,e.uiLevel=i.level,e.parent=i.parent,e.stub=!0,e.__needsRefreshWhenVisible=!1,e.group&&(e.expanded=!1,e.field=i.field,e.rowGroupColumn=i.rowGroupColumn),e}destroyRowNodes(i){i&&i.forEach(e=>this.destroyRowNode(e))}destroyRowNode(i,e=!1){i.childStore&&!e&&(this.destroyBean(i.childStore),i.childStore=null),i.sibling&&!i.footer&&this.destroyRowNode(i.sibling,!1),i.clearRowTopAndRowIndex(),i.id!=null&&this.nodeManager.removeNode(i)}setTreeGroupInfo(i){i.updateHasChildren();let e=this.gos.get("getServerSideGroupKey");i.hasChildren()&&e!=null&&(i.key=e(i.data)),!i.hasChildren()&&i.childStore!=null&&(this.destroyBean(i.childStore),i.childStore=null,i.expanded=!1)}setRowGroupInfo(i){i.key=this.valueService.getValue(i.rowGroupColumn,i),(i.key===null||i.key===void 0)&&M.doOnce(()=>{console.warn("AG Grid: null and undefined values are not allowed for server side row model keys"),i.rowGroupColumn&&console.warn(`column = ${i.rowGroupColumn.getId()}`),console.warn("data is ",i.data)},"ServerSideBlock-CannotHaveNullOrUndefinedForKey"),this.beans.gos.getGroupTotalRowCallback()({node:i})&&(i.createFooter(),i.sibling&&(i.sibling.uiLevel=i.uiLevel+1))}setMasterDetailInfo(i){let e=this.gos.get("isRowMaster");e!=null?i.master=e(i.data):i.master=!0}updateDataIntoRowNode(i,e){i.updateData(e),this.gos.get("treeData")?(this.setTreeGroupInfo(i),this.setChildCountIntoRowNode(i)):i.group?(this.setChildCountIntoRowNode(i),i.footer||(this.beans.gos.getGroupTotalRowCallback()({node:i})?i.sibling?i.sibling.updateData(e):i.createFooter():i.sibling&&i.destroyFooter())):this.gos.get("masterDetail")}setDataIntoRowNode(i,e,t,n){var r;i.stub=!1;let s=this.gos.get("treeData");M.exists(e)?(i.setDataAndId(e,t),s?this.setTreeGroupInfo(i):i.group?this.setRowGroupInfo(i):this.gos.get("masterDetail")&&this.setMasterDetailInfo(i)):(i.setDataAndId(void 0,void 0),i.key=null),(s||i.group)&&(this.setGroupDataIntoRowNode(i),this.setChildCountIntoRowNode(i)),M.exists(e)&&(i.setRowHeight(this.gos.getRowHeightForNode(i,!1,n).height),(r=i.sibling)==null||r.setRowHeight(this.gos.getRowHeightForNode(i.sibling,!1,n).height))}setChildCountIntoRowNode(i){let e=this.gos.get("getChildCount");e&&i.setAllChildrenCount(e(i.data))}setGroupDataIntoRowNode(i){let e=this.columnModel.getGroupDisplayColumns(),t=this.gos.get("treeData");e.forEach(n=>{if(i.groupData==null&&(i.groupData={}),t)i.groupData[n.getColId()]=i.key;else if(n.isRowGroupDisplayed(i.rowGroupColumn.getId())){let r=this.valueService.getValue(i.rowGroupColumn,i);i.groupData[n.getColId()]=r}})}clearDisplayIndex(i){i.clearRowTopAndRowIndex(),i.hasChildren()&&M.exists(i.childStore)&&i.childStore.clearDisplayIndexes(),i.master&&i.detailNode&&i.detailNode.clearRowTopAndRowIndex()}setDisplayIndex(i,e,t){if(i.setRowIndex(e.next()),i.setRowTop(t.value),t.value+=i.rowHeight,i.footer)return;if(i.master&&(i.expanded&&i.detailNode?(i.detailNode.setRowIndex(e.next()),i.detailNode.setRowTop(t.value),t.value+=i.detailNode.rowHeight):i.detailNode&&i.detailNode.clearRowTopAndRowIndex()),i.hasChildren()&&M.exists(i.childStore)){let s=i.childStore;i.expanded?s.setDisplayIndexes(e,t):s.clearDisplayIndexes()}}binarySearchForDisplayIndex(i,e){let t=0,n=e.length-1;if(M.missing(n)||M.missing(t)){console.warn(`AG Grid: error: topPointer = ${n}, bottomPointer = ${t}`);return}for(;;){let r=Math.floor((t+n)/2),s=e[r];if(s.rowIndex===i)return s;let o=s.master&&s.expanded,a=s.detailNode;if(o&&a&&a.rowIndex===i)return s.detailNode;let l=s.childStore;if(s.expanded&&l&&l.isDisplayIndexInStore(i))return l.getRowUsingDisplayIndex(i);if(s.rowIndex<i)t=r+1;else if(s.rowIndex>i)n=r-1;else{console.warn(`AG Grid: error: unable to locate rowIndex = ${i} in cache`);return}}}extractRowBounds(i,e){let t=n=>({rowHeight:n.rowHeight,rowTop:n.rowTop});if(i.rowIndex===e)return t(i);if(i.hasChildren()&&i.expanded&&M.exists(i.childStore)){let n=i.childStore;if(n.isDisplayIndexInStore(e))return n.getRowBounds(e)}else if(i.master&&i.expanded&&M.exists(i.detailNode)&&i.detailNode.rowIndex===e)return t(i.detailNode)}getIndexAtPixel(i,e){if(i.isPixelInRange(e))return i.rowIndex;let t=i.master&&i.expanded,n=i.detailNode;if(t&&n&&n.isPixelInRange(e))return i.detailNode.rowIndex;if(i.hasChildren()&&i.expanded&&M.exists(i.childStore)){let r=i.childStore;if(r.isPixelInRange(e))return r.getRowIndexAtPixel(e)}return null}createNodeIdPrefix(i){let e=[],t=i;for(;t&&t.level>=0;)t.key===""?e.push(eq):e.push(t.key),t=t.parent;if(e.length>0)return e.reverse().join("-")}checkOpenByDefault(i){return this.expansionService.checkOpenByDefault(i)}};Pe([k("valueService")],vc.prototype,"valueService",2);Pe([k("columnModel")],vc.prototype,"columnModel",2);Pe([k("ssrmNodeManager")],vc.prototype,"nodeManager",2);Pe([k("beans")],vc.prototype,"beans",2);Pe([k("expansionService")],vc.prototype,"expansionService",2);vc=Pe([De("ssrmBlockUtils")],vc);var gy=class{constructor(){this.rowNodes={}}addRowNode(i){let e=i.id;this.rowNodes[e]&&(console.warn(`AG Grid: Duplicate node id ${i.id}. Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`),console.warn("first instance",this.rowNodes[e].data),console.warn("second instance",i.data)),this.rowNodes[e]=i}removeNode(i){let e=i.id;this.rowNodes[e]&&(this.rowNodes[e]=void 0)}clear(){this.rowNodes={}}};Pe([_i],gy.prototype,"clear",1);gy=Pe([De("ssrmNodeManager")],gy);var ll=class extends be{constructor(){super(...arguments),this.asyncTransactions=[]}postConstruct(){this.gos.isRowModelType("serverSide")}applyTransactionAsync(i,e){this.asyncTransactionsTimeout==null&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:i,callback:e})}scheduleExecuteAsync(){let i=this.gos.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout(()=>{this.executeAsyncTransactions()},i)}executeAsyncTransactions(){if(!this.asyncTransactions)return;let i=[],e=[],t=[],n=!1;if(this.asyncTransactions.forEach(r=>{let s;if(this.serverSideRowModel.executeOnStore(r.transaction.route,l=>{s=l.applyTransaction(r.transaction)})?s==null&&(s={status:fn.StoreNotFound}):s={status:fn.StoreNotStarted},e.push(s),s.status==fn.StoreLoading){t.push(r);return}r.callback&&i.push(()=>r.callback(s)),s.status===fn.Applied&&(n=!0)}),i.length>0&&window.setTimeout(()=>{i.forEach(r=>r())},0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=t,n&&(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:X.EVENT_STORE_UPDATED})),e.length>0){let r={type:X.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:e};this.eventService.dispatchEvent(r)}}flushAsyncTransactions(){this.asyncTransactionsTimeout!=null&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()}applyTransaction(i){let e;if(this.serverSideRowModel.executeOnStore(i.route,n=>{e=n.applyTransaction(i)}))if(e){if(this.valueCache.onDataChanged(),e.remove){let n=e.remove.map(r=>r.id);this.selectionService.deleteSelectionStateFromParent(i.route||[],n)}return this.eventService.dispatchEvent({type:X.EVENT_STORE_UPDATED}),e}else return{status:fn.StoreNotFound};else return{status:fn.StoreNotStarted}}};Pe([k("rowNodeBlockLoader")],ll.prototype,"rowNodeBlockLoader",2);Pe([k("valueCache")],ll.prototype,"valueCache",2);Pe([k("rowModel")],ll.prototype,"serverSideRowModel",2);Pe([k("rowRenderer")],ll.prototype,"rowRenderer",2);Pe([k("selectionService")],ll.prototype,"selectionService",2);Pe([J],ll.prototype,"postConstruct",1);ll=Pe([De("ssrmTransactionManager")],ll);var Bu=class extends be{postConstruct(){this.gos.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,X.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this))}onRowGroupOpened(i){let e=i.node;if(e.expanded){if(e.master)this.createDetailNode(e);else if(M.missing(e.childStore)){let n=this.serverSideRowModel.getParams();e.childStore=this.createBean(this.storeFactory.createStore(n,e))}}else this.gos.get("purgeClosedRowNodes")&&M.exists(e.childStore)&&(e.childStore=this.destroyBean(e.childStore));let t={type:X.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)}createDetailNode(i){if(M.exists(i.detailNode))return i.detailNode;let e=new Wr(this.beans);e.detail=!0,e.selectable=!1,e.parent=i,M.exists(i.id)&&(e.id="detail_"+i.id),e.data=i.data,e.level=i.level+1;let t=200,n=this.gos.getRowHeightForNode(e).height;return e.rowHeight=n||t,i.detailNode=e,e}};Pe([k("rowModel")],Bu.prototype,"serverSideRowModel",2);Pe([k("ssrmStoreFactory")],Bu.prototype,"storeFactory",2);Pe([k("beans")],Bu.prototype,"beans",2);Pe([J],Bu.prototype,"postConstruct",1);Bu=Pe([De("ssrmExpandListener")],Bu);var Gu=class extends be{postConstruct(){this.gos.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,X.EVENT_SORT_CHANGED,this.onSortChanged.bind(this))}onSortChanged(){let i=this.serverSideRowModel.getParams();if(!i)return;let e=this.sortController.getSortModel(),t=i.sortModel,n=this.findChangedColumnsInSort(e,t),r=this.listenerUtils.isSortingWithValueColumn(n),s=this.listenerUtils.isSortingWithSecondaryColumn(n),o={valueColChanged:r,secondaryColChanged:s,changedColumns:n};this.serverSideRowModel.refreshAfterSort(e,o)}findChangedColumnsInSort(i,e){let t=[];[i,e].forEach(s=>{if(s){let o=s.map(a=>a.colId);t=t.concat(o)}});let n=(s,o)=>{let a=s?s.sort:null,l=o?o.sort:null;return a!==l},r=(s,o)=>{let a=s?e.indexOf(s):-1,l=o?i.indexOf(o):-1;return a!==l};return t.filter(s=>{let o=e.find(l=>l.colId===s),a=i.find(l=>l.colId===s);return n(o,a)||r(o,a)})}};Pe([k("sortController")],Gu.prototype,"sortController",2);Pe([k("rowModel")],Gu.prototype,"serverSideRowModel",2);Pe([k("ssrmListenerUtils")],Gu.prototype,"listenerUtils",2);Pe([J],Gu.prototype,"postConstruct",1);Gu=Pe([De("ssrmSortService")],Gu);var Uu=class extends be{postConstruct(){this.gos.isRowModelType("serverSide")&&(this.addManagedListener(this.eventService,X.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,()=>this.onFilterChanged(!0)),this.addManagedListener(this.eventService,X.EVENT_FILTER_CHANGED,()=>this.onFilterChanged()))}onFilterChanged(i){let e=this.serverSideRowModel.getParams();if(!e)return;let t=e.filterModel,n,r;if(this.filterManager.isAdvancedFilterEnabled()){n=this.filterManager.getAdvancedFilterModel();let l=i?Object.keys(t??{}):this.getAdvancedFilterColumns(t),c=this.getAdvancedFilterColumns(n);l.forEach(u=>c.add(u)),r=Array.from(c)}else if(n=this.filterManager.getFilterModel(),i){let l=this.getAdvancedFilterColumns(t);Object.keys(n).forEach(c=>l.add(c)),r=Array.from(l)}else r=this.findChangedColumns(t,n);let s=this.listenerUtils.isSortingWithValueColumn(r),o=this.listenerUtils.isSortingWithSecondaryColumn(r),a={valueColChanged:s,secondaryColChanged:o,changedColumns:r};this.serverSideRowModel.refreshAfterFilter(n,a)}findChangedColumns(i,e){let t={};Object.keys(i).forEach(r=>t[r]=!0),Object.keys(e).forEach(r=>t[r]=!0);let n=[];return Object.keys(t).forEach(r=>{let s=JSON.stringify(i[r]),o=JSON.stringify(e[r]);s!=o&&n.push(r)}),n}getAdvancedFilterColumns(i){let e=new Set;if(!i)return e;let t=n=>{n.filterType==="join"?n.conditions.forEach(r=>t(r)):e.add(n.colId)};return t(i),e}};Pe([k("rowModel")],Uu.prototype,"serverSideRowModel",2);Pe([k("filterManager")],Uu.prototype,"filterManager",2);Pe([k("ssrmListenerUtils")],Uu.prototype,"listenerUtils",2);Pe([J],Uu.prototype,"postConstruct",1);Uu=Pe([De("ssrmFilterListener")],Uu);var bg=class{createStore(i,e){let t=this.getStoreParams(i,e),n=t.suppressInfiniteScroll?ar:vo;return new n(i,t,e)}getStoreParams(i,e){let t=this.getLevelSpecificParams(e),n=this.isInfiniteScroll(t),r=this.getBlockSize(n,t),s=this.getMaxBlocksInCache(n,i,t);return{suppressInfiniteScroll:!n,cacheBlockSize:r,maxBlocksInCache:s}}getMaxBlocksInCache(i,e,t){if(!i)return;let n=t&&t.maxBlocksInCache!=null?t.maxBlocksInCache:this.gos.get("maxBlocksInCache");if(n!=null&&n>=0){if(e.dynamicRowHeight){M.warnOnce("Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.");return}if(this.columnModel.isAutoRowHeightActive()){M.warnOnce("Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.");return}return n}}getBlockSize(i,e){if(!i)return;let t=e&&e.cacheBlockSize!=null?e.cacheBlockSize:this.gos.get("cacheBlockSize");return t!=null&&t>0?t:100}getLevelSpecificParams(i){let e=this.gos.getCallback("getServerSideGroupLevelParams");if(!e)return;let t={level:i.level+1,parentRowNode:i.level>=0?i:void 0,rowGroupColumns:this.columnModel.getRowGroupColumns(),pivotColumns:this.columnModel.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()};return e(t)}isInfiniteScroll(i){return!(i&&i.suppressInfiniteScroll!=null?i.suppressInfiniteScroll:this.isSuppressServerSideInfiniteScroll())}isSuppressServerSideInfiniteScroll(){return this.gos.get("suppressServerSideInfiniteScroll")}};Pe([k("gridOptionsService")],bg.prototype,"gos",2);Pe([k("columnModel")],bg.prototype,"columnModel",2);bg=Pe([De("ssrmStoreFactory")],bg);var fy=class{isSortingWithValueColumn(i){let e=this.columnModel.getValueColumns().map(t=>t.getColId());for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return!0;return!1}isSortingWithSecondaryColumn(i){if(!this.columnModel.getSecondaryColumns())return!1;let e=this.columnModel.getSecondaryColumns().map(t=>t.getColId());for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return!0;return!1}};Pe([k("columnModel")],fy.prototype,"columnModel",2);fy=Pe([De("ssrmListenerUtils")],fy);var vy=class extends be{constructor(){super(...arguments),this.selectedState={selectAll:!1,toggledNodes:new Set},this.lastSelected=null,this.selectAllUsed=!1,this.selectedNodes={}}init(){this.rowSelection=this.gos.get("rowSelection"),this.addManagedPropertyListener("rowSelection",i=>{this.rowSelection=i.currentValue})}getSelectedState(){return{selectAll:this.selectedState.selectAll,toggledNodes:[...this.selectedState.toggledNodes]}}setSelectedState(i){let e={selectAll:!1,toggledNodes:new Set};if(typeof i!="object"){console.error("AG Grid: The provided selection state should be an object.");return}if("selectAll"in i&&typeof i.selectAll=="boolean")e.selectAll=i.selectAll;else{console.error("AG Grid: Select all status should be of boolean type.");return}if("toggledNodes"in i&&Array.isArray(i.toggledNodes))i.toggledNodes.forEach(t=>{typeof t=="string"?e.toggledNodes.add(t):console.warn(`AG Grid: Provided ids must be of string type. Invalid id provided: ${t}`)});else{console.error("AG Grid: `toggledNodes` must be an array of string ids.");return}this.selectedState=e}deleteSelectionStateFromParent(i,e){if(this.selectedState.toggledNodes.size===0)return!1;let t=!1;return e.forEach(n=>{this.selectedState.toggledNodes.delete(n)&&(t=!0)}),t}setNodesSelected(i){if(i.nodes.length===0)return 0;let e=i.clearSelection&&i.newValue&&!i.rangeSelect;if(this.rowSelection!=="multiple"||e){if(i.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when rowSelection is set to 'single'");let n=i.nodes[0];return i.newValue?(this.selectedNodes={[n.id]:n},this.selectedState={selectAll:!1,toggledNodes:new Set([n.id])}):(this.selectedNodes={},this.selectedState={selectAll:!1,toggledNodes:new Set}),this.lastSelected=n.id,1}let t=n=>{i.newValue?this.selectedNodes[n.id]=n:delete this.selectedNodes[n.id];let r=n.selectable;if(i.newValue===this.selectedState.selectAll||!r){this.selectedState.toggledNodes.delete(n.id);return}this.selectedState.toggledNodes.add(n.id)};if(i.rangeSelect&&this.lastSelected){if(i.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");let n=i.nodes[0],r=this.rowModel.getRowNode(this.lastSelected);return this.rowModel.getNodesInRangeForSelection(n,r??null).forEach(t),this.lastSelected=n.id,1}return i.nodes.forEach(t),this.lastSelected=i.nodes[i.nodes.length-1].id,1}processNewRow(i){this.selectedNodes[i.id]&&(this.selectedNodes[i.id]=i)}isNodeSelected(i){let e=this.selectedState.toggledNodes.has(i.id);return this.selectedState.selectAll?!e:e}getSelectedNodes(){return this.selectAllUsed&&console.warn("AG Grid: getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model.\n                Use `api.getServerSideSelectionState()` instead."),Object.values(this.selectedNodes)}getSelectedRows(){return this.getSelectedNodes().map(i=>i.data)}getSelectionCount(){return this.selectedState.selectAll?-1:this.selectedState.toggledNodes.size}clearOtherNodes(i,e){let t=this.selectedState.selectAll?1:this.selectedState.toggledNodes.size-1;this.selectedState={selectAll:!1,toggledNodes:new Set([i.id])},this.rowModel.forEachNode(r=>{r!==i&&r.selectThisNode(!1,void 0,e)});let n={type:X.EVENT_SELECTION_CHANGED,source:e};return this.eventService.dispatchEvent(n),t}isEmpty(){var i;return!this.selectedState.selectAll&&!((i=this.selectedState.toggledNodes)!=null&&i.size)}selectAllRowNodes(i){this.selectedState={selectAll:!0,toggledNodes:new Set},this.selectedNodes={},this.selectAllUsed=!0}deselectAllRowNodes(i){this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectedNodes={}}getSelectAllState(i,e){return this.selectedState.selectAll?this.selectedState.toggledNodes.size>0?null:!0:this.selectedState.toggledNodes.size>0?null:!1}};Pe([k("rowModel")],vy.prototype,"rowModel",2);Pe([J],vy.prototype,"init",1);var yc=class extends be{constructor(){super(...arguments),this.selectedState={selectAllChildren:!1,toggledNodes:new Map},this.lastSelected=null}init(){this.addManagedListener(this.eventService,X.EVENT_MODEL_UPDATED,()=>this.removeRedundantState()),this.addManagedListener(this.eventService,X.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.selectionService.reset("rowGroupChanged"))}getSelectedState(){let i=this.gos.get("treeData"),e=(t,n,r)=>{let s={nodeId:r};if((i||n<=this.columnModel.getRowGroupColumns().length)&&(s.selectAllChildren=t.selectAllChildren),t.toggledNodes.size){let o=[];t.toggledNodes.forEach((a,l)=>{let c=e(a,n+1,l);o.push(c)}),s.toggledNodes=o}return s};return e(this.selectedState,0)}setSelectedState(i){let e=(t,n)=>{var r,s;if(typeof t!="object")throw new Error("AG Grid: Each provided state object must be an object.");if("selectAllChildren"in t&&typeof t.selectAllChildren!="boolean")throw new Error("AG Grid: `selectAllChildren` must be a boolean value or undefined.");if("toggledNodes"in t){if(!Array.isArray(t.toggledNodes))throw new Error("AG Grid: `toggledNodes` must be an array.");if(!t.toggledNodes.every(u=>typeof u=="object"&&"nodeId"in u&&typeof u.nodeId=="string"))throw new Error("AG Grid: Every `toggledNode` requires an associated string id.")}let o=(r=t.selectAllChildren)!=null?r:!n,a=(s=t.toggledNodes)==null?void 0:s.map(c=>[c.nodeId,e(c,o)]);if(a?.some(([c,u])=>o===u.selectAllChildren&&u.toggledNodes.size===0))throw new Error(`
                    AG Grid: AG Grid: Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule.
                    Please rebuild the selection state and reapply it.
                `);return{selectAllChildren:o,toggledNodes:new Map(a)}};try{this.selectedState=e(i,!!i.selectAllChildren)}catch(t){console.error(t.message)}}deleteSelectionStateFromParent(i,e){let t=this.selectedState,n=[...i];for(;t&&n.length;)t=t.toggledNodes.get(n.pop());if(!t)return!1;let r=!1;return e.forEach(s=>{t?.toggledNodes.delete(s)&&(r=!0)}),r&&this.removeRedundantState(),r}setNodesSelected(i){let e=i,{nodes:t}=e,n=XR(e,["nodes"]);if(t.length===0)return 0;if(i.rangeSelect){if(t.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");let r=t[0],o=this.rowModel.getNodesInRangeForSelection(r,this.lastSelected).map(this.getRouteToNode).sort((l,c)=>c.length-l.length),a=new Set;return o.forEach(l=>{a.has(l[l.length-1])||(l.forEach(c=>a.add(c)),this.recursivelySelectNode(l,this.selectedState,v_({node:r},n)))}),this.removeRedundantState(),this.lastSelected=r,1}return i.nodes.forEach(r=>{let s=this.getRouteToNode(r);this.recursivelySelectNode(s,this.selectedState,QY(v_({},n),{node:r}))}),this.removeRedundantState(),this.lastSelected=i.nodes[i.nodes.length-1],1}isNodeSelected(i){let e=this.getRouteToNode(i);return this.isNodePathSelected(e,this.selectedState)}isNodePathSelected([i,...e],t){if(e.length===0){let n=t.toggledNodes.has(i.id);if(i.hasChildren()){let r=t.toggledNodes.get(i.id);if(r&&r.toggledNodes.size)return}return t.selectAllChildren?!n:n}if(t.toggledNodes.has(i.id)){let n=t.toggledNodes.get(i.id);if(n)return this.isNodePathSelected(e,n)}return!!t.selectAllChildren}getRouteToNode(i){let e=[],t=i;for(;t.parent;)e.push(t),t=t.parent;return e.reverse()}removeRedundantState(){if(this.filterManager.isAnyFilterPresent())return;let i=(e=this.selectedState,t,n)=>{if(e.toggledNodes.forEach((o,a)=>{i(o,a,e)}),t){let o=this.rowModel.getRowNode(t),a=o?.childStore;if(a?.isLastRowIndexKnown()&&e.toggledNodes.size>=a.getRowCount()){for(let u of e.toggledNodes.entries()){let[d,h]=u;if(h.toggledNodes.size>0||!this.rowModel.getRowNode(d))return}e.selectAllChildren=!e.selectAllChildren,e.toggledNodes.clear()}}let r=e.toggledNodes.size===0,s=n?.selectAllChildren===e.selectAllChildren;r&&s&&n?.toggledNodes.delete(t)};i()}recursivelySelectNode([i,...e],t,n){if(!i)return;if(!e.length){let a=i.selectable;if(t.selectAllChildren===n.newValue||!a){t.toggledNodes.delete(i.id);return}let c={selectAllChildren:n.newValue,toggledNodes:new Map};t.toggledNodes.set(i.id,c);return}let s=t.toggledNodes.has(i.id),o=s?t.toggledNodes.get(i.id):{selectAllChildren:t.selectAllChildren,toggledNodes:new Map};s||t.toggledNodes.set(i.id,o),this.recursivelySelectNode(e,o,n),t.selectAllChildren===o.selectAllChildren&&o.toggledNodes.size===0&&t.toggledNodes.delete(i.id)}getSelectedNodes(){console.warn("AG Grid: `getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model.\n            Use `api.getServerSideSelectionState()` instead.");let i=[];return this.rowModel.forEachNode(e=>{e.isSelected()&&i.push(e)}),i}processNewRow(i){}getSelectedRows(){return this.getSelectedNodes().map(i=>i.data)}getSelectionCount(){return-1}isEmpty(){var i;return!this.selectedState.selectAllChildren&&!((i=this.selectedState.toggledNodes)!=null&&i.size)}selectAllRowNodes(i){this.selectedState={selectAllChildren:!0,toggledNodes:new Map}}deselectAllRowNodes(i){this.selectedState={selectAllChildren:!1,toggledNodes:new Map}}getSelectAllState(i,e){return this.selectedState.selectAllChildren?this.selectedState.toggledNodes.size>0?null:!0:this.selectedState.toggledNodes.size>0?null:!1}};Pe([k("rowModel")],yc.prototype,"rowModel",2);Pe([k("columnModel")],yc.prototype,"columnModel",2);Pe([k("filterManager")],yc.prototype,"filterManager",2);Pe([k("rowModel")],yc.prototype,"serverSideRowModel",2);Pe([k("selectionService")],yc.prototype,"selectionService",2);Pe([J],yc.prototype,"init",1);var Sg=class extends be{init(){let i=this.gos.get("groupSelectsChildren");this.addManagedPropertyListener("groupSelectsChildren",t=>{this.destroyBean(this.selectionStrategy);let n=t.currentValue?yc:vy;this.selectionStrategy=this.createManagedBean(new n),this.shotgunResetNodeSelectionState();let r={type:X.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(r)}),this.addManagedPropertyListener("rowSelection",()=>this.deselectAllRowNodes({source:"api"}));let e=i?yc:vy;this.selectionStrategy=this.createManagedBean(new e)}getSelectionState(){return this.selectionStrategy.getSelectedState()}setSelectionState(i,e){if(Array.isArray(i))return;this.selectionStrategy.setSelectedState(i),this.shotgunResetNodeSelectionState();let t={type:X.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(t)}setNodesSelected(i){let e=i,{nodes:t}=e,n=XR(e,["nodes"]),r=this.gos.get("rowSelection");if(t.length>1&&r!=="multiple")return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;if(t.length>1&&i.rangeSelect)return console.warn("AG Grid: cannot use range selection when multi selecting rows"),0;let s=v_({nodes:t.filter(l=>l.selectable)},n);if(!s.nodes.length)return 0;let o=this.selectionStrategy.setNodesSelected(s);this.shotgunResetNodeSelectionState(s.source);let a={type:X.EVENT_SELECTION_CHANGED,source:s.source};return this.eventService.dispatchEvent(a),o}deleteSelectionStateFromParent(i,e){if(!this.selectionStrategy.deleteSelectionStateFromParent(i,e))return;this.shotgunResetNodeSelectionState();let n={type:X.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(n)}shotgunResetNodeSelectionState(i){this.rowModel.forEachNode(e=>{if(e.stub)return;let t=this.selectionStrategy.isNodeSelected(e);t!==e.isSelected()&&e.selectThisNode(t,void 0,i)})}getSelectedNodes(){return this.selectionStrategy.getSelectedNodes()}getSelectedRows(){return this.selectionStrategy.getSelectedRows()}getSelectionCount(){return this.selectionStrategy.getSelectionCount()}syncInRowNode(i,e){this.selectionStrategy.processNewRow(i);let t=this.selectionStrategy.isNodeSelected(i);if(t!=!1&&!i.selectable){this.selectionStrategy.setNodesSelected({nodes:[i],newValue:!1,source:"api"}),this.shotgunResetNodeSelectionState();let n={type:X.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(n);return}i.setSelectedInitialValue(t)}reset(){this.selectionStrategy.deselectAllRowNodes({source:"api"})}isEmpty(){return this.selectionStrategy.isEmpty()}hasNodesToSelect(i=!1,e=!1){return!0}selectAllRowNodes(i){(i.justCurrentPage||i.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.selectAllRowNodes(i),this.rowModel.forEachNode(t=>{t.stub||t.selectThisNode(!0,void 0,i.source)});let e={type:X.EVENT_SELECTION_CHANGED,source:i.source};this.eventService.dispatchEvent(e)}deselectAllRowNodes(i){(i.justCurrentPage||i.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.deselectAllRowNodes(i),this.rowModel.forEachNode(t=>{t.stub||t.selectThisNode(!1,void 0,i.source)});let e={type:X.EVENT_SELECTION_CHANGED,source:i.source};this.eventService.dispatchEvent(e)}getSelectAllState(i,e){return this.selectionStrategy.getSelectAllState(i,e)}updateGroupsFromChildrenSelections(i,e){return!1}getBestCostNodeSelection(){console.warn("AG Grid: calling gridApi.getBestCostNodeSelection() is only possible when using rowModelType=`clientSide`.")}filterFromSelection(){}};Pe([k("rowModel")],Sg.prototype,"rowModel",2);Pe([J],Sg.prototype,"init",1);Sg=Pe([De("selectionService")],Sg);var tq="31.3.4",yy=class extends Bf{constructor(){super(...arguments),this.queuedRowIds=new Set}postConstruct(){super.postConstruct(),this.addManagedListener(this.eventService,X.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>{this.queuedRowIds.clear()})}checkOpenByDefault(i){if(!i.isExpandable())return;if(this.queuedRowIds.has(i.id)){this.queuedRowIds.delete(i.id),i.setExpanded(!0);return}let e=this.gos.getCallback("isServerSideGroupOpenByDefault");if(!e)return;let t={data:i.data,rowNode:i};e(t)&&i.setExpanded(!0)}expandRows(i){i.forEach(e=>{let t=this.serverSideRowModel.getRowNode(e);t?t.setExpanded(!0):this.queuedRowIds.add(e)})}expandAll(i){this.serverSideRowModel.expandAll(i)}onGroupExpandedOrCollapsed(){}};Pe([k("rowModel")],yy.prototype,"serverSideRowModel",2);yy=Pe([De("expansionService")],yy);var ZR={version:tq,moduleName:qe.ServerSideRowModelModule,rowModel:"serverSide",beans:[Gr,Bu,Gu,tp,vc,gy,ll,Uu,bg,fy,Sg,yy,fc],dependantModules:[Tn]},iq=Object.defineProperty,nq=Object.getOwnPropertyDescriptor,vr=(i,e,t,n)=>{for(var r=n>1?void 0:n?nq(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&iq(e,t,r),r},rq=class{constructor(i,e,t,n,r,s,o,a,l,c,u){this.rowModel=i,this.filterParams=e,this.createKey=t,this.caseFormat=n,this.columnModel=r,this.valueService=s,this.treeDataOrGrouping=o,this.treeData=a,this.getDataPath=l,this.groupAllowUnbalanced=c,this.addManagedListener=u}extractUniqueValuesAsync(i,e){return new vt(t=>{if(this.rowModel.isRowDataLoaded())t(this.extractUniqueValues(i,e));else{let n=this.addManagedListener(X.EVENT_ROW_COUNT_READY,()=>{n?.(),t(this.extractUniqueValues(i,e))})}})}extractUniqueValues(i,e){let t=new Map,n=this.extractExistingFormattedKeys(e),r=new Set,s=this.treeData&&!!this.getDataPath,o=this.columnModel.getRowGroupColumns(),a=(l,c)=>{let u=this.caseFormat(l);if(!r.has(u)){r.add(u);let d=l,h=M.makeNull(c),p=n?.get(u);p!=null&&(d=p,h=e.get(p)),t.set(d,h)}};return this.rowModel.forEachLeafNode(l=>{if(!l.data||!i(l))return;if(this.treeDataOrGrouping){this.addValueForTreeDataOrGrouping(l,s,o,a);return}let c=this.getValue(l);if(this.filterParams.convertValuesToStrings){this.addValueForConvertValuesToString(l,c,a);return}c!=null&&Array.isArray(c)?(c.forEach(u=>{a(this.createKey(u,l),u)}),c.length===0&&a(null,null)):a(this.createKey(c,l),c)}),t}addValueForConvertValuesToString(i,e,t){let n=this.createKey(e,i);n!=null&&Array.isArray(n)?(n.forEach(r=>{let s=M.toStringOrNull(M.makeNull(r));t(s,s)}),n.length===0&&t(null,null)):t(n,n)}addValueForTreeDataOrGrouping(i,e,t,n){var r;let s;if(e){if((r=i.childrenAfterGroup)!=null&&r.length)return;s=this.getDataPath(i.data)}else s=t.map(o=>this.valueService.getKeyForNode(o,i)),s.push(this.getValue(i));s&&(s=s.map(o=>M.toStringOrNull(M.makeNull(o)))),!e&&this.groupAllowUnbalanced&&s?.some(o=>o==null)&&(s=s.filter(o=>o!=null)),n(this.createKey(s),s)}getValue(i){return this.filterParams.getValue(i)}extractExistingFormattedKeys(i){if(!i)return null;let e=new Map;return i.forEach((t,n)=>{e.set(this.caseFormat(n),n)}),e}},Vr=(()=>{let i=class{};return i.SELECT_ALL="__AG_SELECT_ALL__",i.ADD_SELECTION_TO_FILTER="__AG_ADD_SELECTION_TO_FILTER__",i})(),sq=class{constructor(i,e,t,n){this.valueService=i,this.valueFormatter=e,this.formatter=t,this.column=n,this.displayedKeys=[]}updateDisplayedValuesToAllAvailable(i,e,t){this.displayedKeys=Array.from(t)}updateDisplayedValuesToMatchMiniFilter(i,e,t,n,r){this.displayedKeys=[];for(let s of t)if(s==null)r&&this.displayedKeys.push(s);else{let o=i(s),a=this.valueService.formatValue(this.column,null,o,this.valueFormatter,!1),l=this.formatter(a);n(l)&&this.displayedKeys.push(s)}}getDisplayedValueCount(){return this.displayedKeys.length}getDisplayedItem(i){return this.displayedKeys[i]}getSelectAllItem(){return Vr.SELECT_ALL}getAddSelectionToFilterItem(){return Vr.ADD_SELECTION_TO_FILTER}getDisplayedKeys(){return this.displayedKeys}forEachDisplayedKey(i){this.displayedKeys.forEach(i)}someDisplayedKey(i){return this.displayedKeys.some(i)}hasGroups(){return!1}refresh(){}},oq=(()=>{let i=class QR{constructor(t,n,r,s){this.formatter=t,this.treeListPathGetter=n,this.treeListFormatter=r,this.treeDataOrGrouping=s,this.allDisplayedItemsTree=[],this.activeDisplayedItemsFlat=[],this.selectAllItem={depth:0,filterPasses:!0,available:!0,treeKey:Vr.SELECT_ALL,children:this.allDisplayedItemsTree,expanded:!0,key:Vr.SELECT_ALL,parentTreeKeys:[]},this.addSelectionToFilterItem={depth:0,filterPasses:!0,available:!0,treeKey:Vr.ADD_SELECTION_TO_FILTER,expanded:!0,key:Vr.ADD_SELECTION_TO_FILTER,parentTreeKeys:[]}}updateDisplayedValuesToAllAvailable(t,n,r,s){s==="reload"?this.generateItemTree(t,n,r):s==="otherFilter"?(this.updateAvailable(r),this.updateExpandAll()):s==="miniFilter"&&(this.resetFilter(),this.updateExpandAll()),this.flattenItems()}updateDisplayedValuesToMatchMiniFilter(t,n,r,s,o,a){a==="reload"?this.generateItemTree(t,n,r):a==="otherFilter"&&this.updateAvailable(r),this.updateFilter(s,o),this.updateExpandAll(),this.flattenItems()}generateItemTree(t,n,r){var s;this.allDisplayedItemsTree=[],this.groupsExist=!1;let o=this.getTreeListPathGetter(t,r);for(let a of n){let l=t(a),c=(s=o(l))!=null?s:[null];c.length>1&&(this.groupsExist=!0);let u=r.has(a),d=this.allDisplayedItemsTree,h,p=[];c.forEach((m,g)=>{d||(d=[],h.children=d),h=d.find(f=>{var y;return((y=f.treeKey)==null?void 0:y.toUpperCase())===m?.toUpperCase()}),h||(h={treeKey:m,depth:g,filterPasses:!0,expanded:!1,available:u,parentTreeKeys:p},g===c.length-1&&(h.key=a),d.push(h)),d=h.children,p=[...p,m]})}this.updateAvailable(r),this.selectAllItem.children=this.allDisplayedItemsTree,this.selectAllItem.expanded=!1}getTreeListPathGetter(t,n){if(this.treeListPathGetter)return this.treeListPathGetter;if(this.treeDataOrGrouping)return s=>s;let r=!1;for(let s of n){let o=t(s);if(o instanceof Date){r=!0;break}else if(o!=null)break}return r?QR.DATE_TREE_LIST_PATH_GETTER:(M.warnOnce("property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date."),s=>[String(s)])}flattenItems(){this.activeDisplayedItemsFlat=[];let t=n=>{n.forEach(r=>{!r.filterPasses||!r.available||(this.activeDisplayedItemsFlat.push(r),r.children&&r.expanded&&t(r.children))})};t(this.allDisplayedItemsTree)}resetFilter(){let t=n=>{n.children&&n.children.forEach(r=>{t(r)}),n.filterPasses=!0};this.allDisplayedItemsTree.forEach(n=>t(n))}updateFilter(t,n){let r=s=>s.available?s.treeKey==null?n:t(this.formatter(this.treeListFormatter?this.treeListFormatter(s.treeKey,s.depth,s.parentTreeKeys):s.treeKey)):!1;this.allDisplayedItemsTree.forEach(s=>this.recursiveItemCheck(s,!1,r,"filterPasses"))}getDisplayedValueCount(){return this.activeDisplayedItemsFlat.length}getDisplayedItem(t){return this.activeDisplayedItemsFlat[t]}getSelectAllItem(){return this.selectAllItem}getAddSelectionToFilterItem(){return this.addSelectionToFilterItem}getDisplayedKeys(){let t=[];return this.forEachDisplayedKey(n=>t.push(n)),t}forEachDisplayedKey(t){let n=(r,s)=>{r.children?(!r.expanded||!s)&&r.children.forEach(o=>{o.filterPasses&&n(o,!1)}):t(r.key)};this.activeDisplayedItemsFlat.forEach(r=>n(r,!0))}someDisplayedKey(t){let n=(r,s)=>{if(r.children){if(!r.expanded||!s)return r.children.some(o=>o.filterPasses?n(o,!1):!1)}else return t(r.key);return!1};return this.activeDisplayedItemsFlat.some(r=>n(r,!0))}hasGroups(){return this.groupsExist}refresh(){this.updateExpandAll(),this.flattenItems()}updateExpandAll(){let t=(r,s,o)=>{for(let a of r){if(!a.filterPasses||!a.available||!a.children)continue;if(s=s||!!a.expanded,o=o||!a.expanded,s&&o)return;let l=t(a.children,s,o);if(l===void 0)return;l?s=!0:o=!0}return s&&o?void 0:s},n=this.getSelectAllItem();n.expanded=t(n.children,!1,!1)}recursiveItemCheck(t,n,r,s){let o=!1;t.children&&t.children.forEach(l=>{let c=this.recursiveItemCheck(l,n||r(t),r,s);o=o||c});let a=n||o||r(t);return t[s]=a,a}updateAvailable(t){let n=r=>t.has(r.key);this.allDisplayedItemsTree.forEach(r=>this.recursiveItemCheck(r,!1,n,"available"))}};return i.DATE_TREE_LIST_PATH_GETTER=e=>e?[String(e.getFullYear()),String(e.getMonth()+1),String(e.getDate())]:null,i})(),aq=oq,lq=class{constructor({caseFormat:i}){this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1,this.caseFormat=i}allFilteringKeys(){return this.filteringKeys}allFilteringKeysCaseFormatted(){return this.filteringKeysCaseFormatted}noAppliedFilteringKeys(){return this.hasNoAppliedFilteringKeys}setFilteringKeys(i){this.filteringKeys=new Set(i),this.hasNoAppliedFilteringKeys=!this.filteringKeys||this.filteringKeys.size===0,this.filteringKeysCaseFormatted=new Set,this.filteringKeys.forEach(e=>this.filteringKeysCaseFormatted.add(this.caseFormat(e)))}addFilteringKey(i){this.filteringKeys==null&&(this.filteringKeys=new Set,this.filteringKeysCaseFormatted=new Set),this.filteringKeys.add(i),this.filteringKeysCaseFormatted.add(this.caseFormat(i)),this.hasNoAppliedFilteringKeys&&(this.hasNoAppliedFilteringKeys=!1)}hasCaseFormattedFilteringKey(i){return this.filteringKeysCaseFormatted.has(this.caseFormat(i))}hasFilteringKey(i){return this.filteringKeys.has(i)}reset(){this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1}},cq=(()=>{let i=class JR{constructor(t){this.localEventService=new hd,this.miniFilterText=null,this.addCurrentSelectionToFilter=!1,this.providedValues=null,this.allValues=new Map,this.availableKeys=new Set,this.selectedKeys=new Set,this.initialised=!1;let{usingComplexObjects:n,columnModel:r,valueService:s,treeDataTreeList:o,groupingTreeList:a,filterParams:l,gos:c,valueFormatter:u,addManagedListener:d}=t,{column:h,colDef:p,textFormatter:m,doesRowPassOtherFilter:g,suppressSorting:f,comparator:y,rowModel:b,values:v,caseSensitive:S,convertValuesToStrings:w,treeList:T,treeListPathGetter:D,treeListFormatter:O}=l;this.filterParams=l,this.gos=c,this.setIsLoading=t.setIsLoading,this.translate=t.translate,this.caseFormat=t.caseFormat,this.createKey=t.createKey,this.usingComplexObjects=!!t.usingComplexObjects,this.formatter=m||Ip.DEFAULT_FORMATTER,this.doesRowPassOtherFilters=g,this.suppressSorting=f||!1,this.convertValuesToStrings=!!w,this.filteringKeys=new lq({caseFormat:this.caseFormat});let R=y??p.comparator,L=!!o||!!a;this.compareByValue=!!(n&&R||L||T&&!D),L&&!R?this.entryComparator=this.createTreeDataOrGroupingComparator():T&&!D&&!R?this.entryComparator=([U,K],[ie,te])=>M.defaultComparator(K,te):this.entryComparator=([U,K],[ie,te])=>R(K,te),this.keyComparator=R??M.defaultComparator,this.caseSensitive=!!S;let B=c.get("getDataPath"),$=c.get("groupAllowUnbalanced");b.getType()==="clientSide"&&(this.clientSideValuesExtractor=new rq(b,this.filterParams,this.createKey,this.caseFormat,r,s,L,!!o,B,$,d)),v==null?this.valuesType=2:(this.valuesType=Array.isArray(v)?0:1,this.providedValues=v),this.displayValueModel=T?new aq(this.formatter,D,O,o||a):new sq(s,u,this.formatter,h),this.updateAllValues().then(U=>this.resetSelectionState(U||[]))}addEventListener(t,n,r){this.localEventService.addEventListener(t,n,r)}removeEventListener(t,n,r){this.localEventService.removeEventListener(t,n,r)}updateOnParamsChange(t){return new vt(n=>{let{values:r,textFormatter:s,suppressSorting:o}=t,a=this.providedValues,l=this.suppressSorting;if(this.filterParams=t,this.formatter=s||Ip.DEFAULT_FORMATTER,this.suppressSorting=o||!1,this.providedValues=r??null,this.providedValues!==a||this.suppressSorting!==l){!r||r.length===0?(this.valuesType=2,this.providedValues=null):this.valuesType=Array.isArray(r)?0:1;let c=this.getModel();this.updateAllValues().then(u=>{this.setModel(c).then(()=>n())})}else n()})}refreshValues(){return new vt(t=>{this.allValuesPromise.then(()=>{let n=this.getModel();this.updateAllValues(),this.setModel(n).then(()=>t())})})}overrideValues(t){return new vt(n=>{this.allValuesPromise.then(()=>{this.valuesType=0,this.providedValues=t,this.refreshValues().then(()=>n())})})}refreshAfterAnyFilterChanged(){return this.showAvailableOnly()?this.allValuesPromise.then(t=>(this.updateAvailableKeys(t??[],"otherFilter"),!0)):vt.resolve(!1)}isInitialised(){return this.initialised}updateAllValues(){return this.allValuesPromise=new vt(t=>{switch(this.valuesType){case 2:this.getValuesFromRowsAsync(!1).then(n=>t(this.processAllValues(n)));break;case 0:{t(this.processAllValues(this.uniqueValues(this.validateProvidedValues(this.providedValues))));break}case 1:{this.setIsLoading(!0);let n=this.providedValues,{column:r,colDef:s}=this.filterParams,o=this.gos.addGridCommonParams({success:a=>{this.setIsLoading(!1),t(this.processAllValues(this.uniqueValues(this.validateProvidedValues(a))))},colDef:s,column:r});window.setTimeout(()=>n(o),0);break}default:throw new Error("Unrecognised valuesType")}}),this.allValuesPromise.then(t=>this.updateAvailableKeys(t||[],"reload")).then(()=>this.initialised=!0),this.allValuesPromise}processAllValues(t){let n=this.sortKeys(t);return this.allValues=t??new Map,n}validateProvidedValues(t){if(this.usingComplexObjects&&t?.length){let n=t[0];n&&typeof n!="object"&&typeof n!="function"&&(this.createKey(n)==null?M.warnOnce("Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types"):M.warnOnce("Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects or enable convertValuesToStrings?"))}return t}setValuesType(t){this.valuesType=t}getValuesType(){return this.valuesType}isKeyAvailable(t){return this.availableKeys.has(t)}showAvailableOnly(){return this.valuesType===2}updateAvailableKeys(t,n){let r=this.showAvailableOnly()?this.sortKeys(this.getValuesFromRows(!0)):t;this.availableKeys=new Set(r),this.localEventService.dispatchEvent({type:JR.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues(n,t)}sortKeys(t){let n=t??new Map;if(this.suppressSorting)return Array.from(n.keys());let r;return this.compareByValue?r=Array.from(n.entries()).sort(this.entryComparator).map(([s])=>s):r=Array.from(n.keys()).sort(this.keyComparator),this.filterParams.excelMode&&n.has(null)&&(r=r.filter(s=>s!=null),r.push(null)),r}getParamsForValuesFromRows(t=!1){if(!this.clientSideValuesExtractor)return M.doOnce(()=>{console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values")},"setFilterValueNotCSRM"),null;let n=s=>!t||this.doesRowPassOtherFilters(s),r=t&&!this.caseSensitive?this.allValues:void 0;return{predicate:n,existingValues:r}}getValuesFromRows(t=!1){let n=this.getParamsForValuesFromRows(t);return n?this.clientSideValuesExtractor.extractUniqueValues(n.predicate,n.existingValues):null}getValuesFromRowsAsync(t=!1){let n=this.getParamsForValuesFromRows(t);return n?this.clientSideValuesExtractor.extractUniqueValuesAsync(n.predicate,n.existingValues):vt.resolve(null)}setMiniFilter(t){return t=M.makeNull(t),this.miniFilterText===t?!1:(t===null&&this.setAddCurrentSelectionToFilter(!1),this.miniFilterText=t,this.updateDisplayedValues("miniFilter"),!0)}getMiniFilter(){return this.miniFilterText}updateDisplayedValues(t,n){if(t==="expansion"){this.displayValueModel.refresh();return}if(this.miniFilterText==null){this.displayValueModel.updateDisplayedValuesToAllAvailable(a=>this.getValue(a),n,this.availableKeys,t);return}let r=this.caseFormat(this.formatter(this.miniFilterText)||""),s=a=>a!=null&&this.caseFormat(a).indexOf(r)>=0,o=!!this.filterParams.excelMode&&s(this.translate("blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter(a=>this.getValue(a),n,this.availableKeys,s,o,t)}getDisplayedValueCount(){return this.displayValueModel.getDisplayedValueCount()}getDisplayedItem(t){return this.displayValueModel.getDisplayedItem(t)}getSelectAllItem(){return this.displayValueModel.getSelectAllItem()}getAddSelectionToFilterItem(){return this.displayValueModel.getAddSelectionToFilterItem()}hasSelections(){return this.filterParams.defaultToNothingSelected?this.selectedKeys.size>0:this.allValues.size!==this.selectedKeys.size}getKeys(){return Array.from(this.allValues.keys())}getValues(){return Array.from(this.allValues.values())}getValue(t){return this.allValues.get(t)}setAddCurrentSelectionToFilter(t){this.addCurrentSelectionToFilter=t}isInWindowsExcelMode(){return this.filterParams.excelMode==="windows"}isAddCurrentSelectionToFilterChecked(){return this.isInWindowsExcelMode()&&this.addCurrentSelectionToFilter}showAddCurrentSelectionToFilter(){return this.isInWindowsExcelMode()&&M.exists(this.miniFilterText)&&this.miniFilterText.length>0}selectAllMatchingMiniFilter(t=!1){this.miniFilterText==null?this.selectedKeys=new Set(this.allValues.keys()):(t&&this.selectedKeys.clear(),this.displayValueModel.forEachDisplayedKey(n=>this.selectedKeys.add(n)))}deselectAllMatchingMiniFilter(){this.miniFilterText==null?this.selectedKeys.clear():this.displayValueModel.forEachDisplayedKey(t=>this.selectedKeys.delete(t))}selectKey(t){this.selectedKeys.add(t)}deselectKey(t){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayValueModel.getDisplayedKeys()),this.selectedKeys.delete(t)}isKeySelected(t){return this.selectedKeys.has(t)}isEverythingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(t=>!this.isKeySelected(t))}isNothingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(t=>this.isKeySelected(t))}getModel(){if(!this.hasSelections())return null;let t=this.isAddCurrentSelectionToFilterChecked()?this.filteringKeys.allFilteringKeys():null;if(t&&t.size>0){if(this.selectedKeys){let n=new Set([...Array.from(t),...Array.from(this.selectedKeys).filter(r=>!t.has(r))]);return Array.from(n)}return Array.from(t)}return Array.from(this.selectedKeys)}setModel(t){return this.allValuesPromise.then(n=>{if(t==null)this.resetSelectionState(n??[]);else{this.selectedKeys.clear();let r=new Map;this.allValues.forEach((s,o)=>{r.set(this.caseFormat(o),o)}),t.forEach(s=>{let o=this.caseFormat(M.makeNull(s)),a=r.get(o);a!==void 0&&this.selectKey(a)})}})}uniqueValues(t){let n=new Map,r=new Set;return(t??[]).forEach(s=>{let o=M.makeNull(s),a=this.convertAndGetKey(o),l=this.caseFormat(a);r.has(l)||(r.add(l),n.set(a,o))}),n}convertAndGetKey(t){return this.convertValuesToStrings?t:this.createKey(t)}resetSelectionState(t){this.filterParams.defaultToNothingSelected?this.selectedKeys.clear():this.selectedKeys=new Set(t)}hasGroups(){return this.displayValueModel.hasGroups()}createTreeDataOrGroupingComparator(){return([t,n],[r,s])=>{if(n==null)return s==null?0:-1;if(s==null)return 1;for(let o=0;o<n.length;o++){if(o>=s.length)return 1;let a=M.defaultComparator(n[o],s[o]);if(a!==0)return a}return 0}}setAppliedModelKeys(t){this.filteringKeys.setFilteringKeys(t)}addToAppliedModelKeys(t){this.filteringKeys.addFilteringKey(t)}getAppliedModelKeys(){return this.filteringKeys.allFilteringKeys()}getCaseFormattedAppliedModelKeys(){return this.filteringKeys.allFilteringKeysCaseFormatted()}hasAppliedModelKey(t){return this.filteringKeys.hasCaseFormattedFilteringKey(t)}hasAnyAppliedModelKey(){return!this.filteringKeys.noAppliedFilteringKeys()}};return i.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged",i})(),e3=cq,_c=(()=>{let i=class ig extends ae{constructor(t){var n;super(t.isGroup?ig.GROUP_TEMPLATE:ig.TEMPLATE),this.focusWrapper=t.focusWrapper,this.value=t.value,this.params=t.params,this.translate=t.translate,this.valueFormatter=t.valueFormatter,this.item=t.item,this.isSelected=t.isSelected,this.isTree=t.isTree,this.depth=(n=t.depth)!=null?n:0,this.isGroup=t.isGroup,this.groupsExist=t.groupsExist,this.isExpanded=t.isExpanded,this.hasIndeterminateExpandState=t.hasIndeterminateExpandState}init(){this.addDestroyFunc(()=>{var t;return(t=this.destroyCellRendererComponent)==null?void 0:t.call(this)}),this.render(),this.eCheckbox.setLabelEllipsis(!0).setValue(this.isSelected,!0).setDisabled(!!this.params.readOnly).getInputElement().setAttribute("tabindex","-1"),this.refreshVariableAriaLabels(),this.isTree&&(this.depth>0&&this.addCssClass("ag-set-filter-indent-"+this.depth),this.isGroup?this.setupExpansion():this.groupsExist&&this.addCssClass("ag-set-filter-add-group-indent"),M.setAriaLevel(this.getAriaElement(),this.depth+1)),this.refreshAriaChecked(),!this.params.readOnly&&this.eCheckbox.onValueChange(t=>this.onCheckboxChanged(!!t))}getFocusableElement(){return this.focusWrapper}setupExpansion(){this.eGroupClosedIcon.appendChild(M.createIcon("setFilterGroupClosed",this.gos,null)),this.eGroupOpenedIcon.appendChild(M.createIcon("setFilterGroupOpen",this.gos,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.hasIndeterminateExpandState&&(this.eGroupIndeterminateIcon.appendChild(M.createIcon("setFilterGroupIndeterminate",this.gos,null)),this.addManagedListener(this.eGroupIndeterminateIcon,"click",this.onExpandOrContractClicked.bind(this))),this.setExpandedIcons(),this.refreshAriaExpanded()}onExpandOrContractClicked(){this.setExpanded(!this.isExpanded)}setExpanded(t,n){if(this.isGroup&&t!==this.isExpanded){this.isExpanded=t;let r={type:ig.EVENT_EXPANDED_CHANGED,isExpanded:!!t,item:this.item};n||this.dispatchEvent(r),this.setExpandedIcons(),this.refreshAriaExpanded()}}setExpandedIcons(){M.setDisplayed(this.eGroupClosedIcon,this.hasIndeterminateExpandState?this.isExpanded===!1:!this.isExpanded),M.setDisplayed(this.eGroupOpenedIcon,this.isExpanded===!0),this.hasIndeterminateExpandState&&M.setDisplayed(this.eGroupIndeterminateIcon,this.isExpanded===void 0)}onCheckboxChanged(t){this.isSelected=t;let n={type:ig.EVENT_SELECTION_CHANGED,isSelected:t,item:this.item};this.dispatchEvent(n),this.refreshVariableAriaLabels(),this.refreshAriaChecked()}toggleSelected(){this.params.readOnly||this.setSelected(!this.isSelected)}setSelected(t,n){this.isSelected=t,this.eCheckbox.setValue(t,n),this.refreshAriaChecked()}refreshVariableAriaLabels(){if(!this.isTree)return;let t=this.localeService.getLocaleTextFunc(),n=this.eCheckbox.getValue(),r=n===void 0?t("ariaIndeterminate","indeterminate"):n?t("ariaVisible","visible"):t("ariaHidden","hidden"),s=t("ariaToggleVisibility","Press SPACE to toggle visibility");M.setAriaLabelledBy(this.eCheckbox.getInputElement(),void 0),this.eCheckbox.setInputAriaLabel(`${s} (${r})`)}setupFixedAriaLabels(t){if(!this.isTree)return;let r=this.localeService.getLocaleTextFunc()("ariaFilterValue","Filter Value"),s=this.getAriaElement();M.setAriaLabel(s,`${t} ${r}`),M.setAriaDescribedBy(s,this.eCheckbox.getInputElement().id)}refreshAriaChecked(){let t=this.getAriaElement();M.setAriaChecked(t,this.eCheckbox.getValue())}refreshAriaExpanded(){M.setAriaExpanded(this.getAriaElement(),!!this.isExpanded)}refresh(t,n,r){var s,o;if(this.item=t,n!==this.isSelected&&this.setSelected(n,!0),this.setExpanded(r,!0),this.valueFunction){let a=this.valueFunction();this.setTooltipAndCellRendererParams(a,a),this.cellRendererComponent||this.renderCellWithoutCellRenderer()}if(this.cellRendererComponent&&!((o=(s=this.cellRendererComponent).refresh)==null?void 0:o.call(s,this.cellRendererParams))){let l=this.cellRendererComponent;this.renderCell(),this.destroyBean(l)}}render(){let{params:{column:t}}=this,{value:n}=this,r=null;typeof n=="function"?(this.valueFunction=n,r=this.valueFunction(),n=r):this.isTree?r=M.toStringOrNull(n):r=this.getFormattedValue(t,n),this.setTooltipAndCellRendererParams(n,r),this.renderCell()}setTooltipAndCellRendererParams(t,n){let r=this.gos.get("tooltipShowMode")==="whenTruncated";if(this.params.showTooltips&&(!r||!this.params.cellRenderer)){let s=n??M.toStringOrNull(t),o;r&&(o=()=>{let a=this.eCheckbox.getGui().querySelector(".ag-label");return a?a.scrollWidth>a.clientWidth:!0}),this.setTooltip({newTooltipText:s,location:"setFilterValue",getColDef:()=>this.params.colDef,getColumn:()=>this.params.column,shouldDisplayTooltip:o})}this.cellRendererParams=this.gos.addGridCommonParams({value:t,valueFormatted:n,colDef:this.params.colDef,column:this.params.column,setTooltip:(s,o)=>{this.setTooltip({newTooltipText:s,getColDef:()=>this.params.colDef,getColumn:()=>this.params.column,location:"setFilterValue",shouldDisplayTooltip:o})}})}getTooltipParams(){let t=super.getTooltipParams();return t.location="setFilterValue",t.colDef=this.getComponentHolder(),this.isTree&&(t.level=this.depth),t}getFormattedValue(t,n){return this.valueService.formatValue(t,null,n,this.valueFormatter,!1)}renderCell(){let t=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,this.cellRendererParams),n=t?t.newAgStackInstance():void 0;if(n==null){this.renderCellWithoutCellRenderer();return}n.then(r=>{r&&(this.cellRendererComponent=r,this.eCheckbox.setLabel(r.getGui()),this.destroyCellRendererComponent=()=>this.destroyBean(r))})}renderCellWithoutCellRenderer(){var t;let n=(t=this.cellRendererParams.valueFormatted==null?this.cellRendererParams.value:this.cellRendererParams.valueFormatted)!=null?t:this.translate("blanks");typeof n!="string"&&(M.warnOnce(`Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects, or set convertValuesToStrings=true in the filterParams. See ${this.getFrameworkOverrides().getDocLink("filter-set-filter-list/#filter-value-types")}`),n=""),this.eCheckbox.setLabel(n),this.setupFixedAriaLabels(n)}getComponentHolder(){return this.params.column.getColDef()}};return i.EVENT_SELECTION_CHANGED="selectionChanged",i.EVENT_EXPANDED_CHANGED="expandedChanged",i.GROUP_TEMPLATE=`
        <div class="ag-set-filter-item" aria-hidden="true">
            <span class="ag-set-filter-group-icons">
                <span class="ag-set-filter-group-closed-icon" ref="eGroupClosedIcon"></span>
                <span class="ag-set-filter-group-opened-icon" ref="eGroupOpenedIcon"></span>
                <span class="ag-set-filter-group-indeterminate-icon" ref="eGroupIndeterminateIcon"></span>
            </span>
            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>
        </div>`,i.TEMPLATE=`
        <div class="ag-set-filter-item">
            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>
        </div>`,i})();vr([k("valueService")],_c.prototype,"valueService",2);vr([k("userComponentFactory")],_c.prototype,"userComponentFactory",2);vr([ce("eCheckbox")],_c.prototype,"eCheckbox",2);vr([ce("eGroupOpenedIcon")],_c.prototype,"eGroupOpenedIcon",2);vr([ce("eGroupClosedIcon")],_c.prototype,"eGroupClosedIcon",2);vr([ce("eGroupIndeterminateIcon")],_c.prototype,"eGroupIndeterminateIcon",2);vr([J],_c.prototype,"init",1);var Kx=_c,uq={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",addCurrentSelectionToFilter:"Add current selection to filter",noMatches:"No matches."},t3=class{getModelAsString(i,e){let{values:t}=i||e.getModel()||{},n=e.getValueModel();if(t==null||n==null)return"";let r=t.filter(a=>n.isKeyAvailable(a)),s=r.length,o=r.slice(0,10).map(a=>e.getFormattedValue(a));return`(${s}) ${o.join(",")}${s>10?",...":""}`}},dl=class extends zc{constructor(){super("setFilter"),this.valueModel=null,this.setFilterParams=null,this.virtualList=null,this.caseSensitive=!1,this.convertValuesToStrings=!1,this.treeDataTreeList=!1,this.groupingTreeList=!1,this.hardRefreshVirtualList=!1,this.noValueFormatterSupplied=!1,this.filterModelFormatter=new t3,this.updateSetFilterOnParamsChange=i=>{var e;this.setFilterParams=i,this.convertValuesToStrings=!!i.convertValuesToStrings,this.caseSensitive=!!i.caseSensitive;let t=(e=i.keyCreator)!=null?e:i.colDef.keyCreator;this.setValueFormatter(i.valueFormatter,t,this.convertValuesToStrings,!!i.treeList,!!i.colDef.refData);let n=i.column.getId().startsWith(pd);this.treeDataTreeList=this.gos.get("treeData")&&!!i.treeList&&n,this.getDataPath=this.gos.get("getDataPath"),this.groupingTreeList=!!this.columnModel.getRowGroupColumns().length&&!!i.treeList&&n,this.createKey=this.generateCreateKey(t,this.convertValuesToStrings,this.treeDataTreeList||this.groupingTreeList)}}postConstruct(){super.postConstruct()}updateUiVisibility(){}createBodyTemplate(){return`
            <div class="ag-set-filter">
                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">${this.translateForSetFilter("loadingOoo")}</div>
                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>
                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">${this.translateForSetFilter("noMatches")}</div>
                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>
            </div>`}handleKeyDown(i){if(super.handleKeyDown(i),!i.defaultPrevented)switch(i.key){case Xe.SPACE:this.handleKeySpace(i);break;case Xe.ENTER:this.handleKeyEnter(i);break;case Xe.LEFT:this.handleKeyLeft(i);break;case Xe.RIGHT:this.handleKeyRight(i);break}}handleKeySpace(i){var e;(e=this.getComponentForKeyEvent(i))==null||e.toggleSelected()}handleKeyEnter(i){if(!this.setFilterParams)return;let{excelMode:e,readOnly:t}=this.setFilterParams||{};!e||t||(i.preventDefault(),this.onBtApply(!1,!1,i),this.setFilterParams.excelMode==="mac"&&this.eMiniFilter.getInputElement().select())}handleKeyLeft(i){var e;(e=this.getComponentForKeyEvent(i))==null||e.setExpanded(!1)}handleKeyRight(i){var e;(e=this.getComponentForKeyEvent(i))==null||e.setExpanded(!0)}getComponentForKeyEvent(i){var e;if(!this.eSetFilterList.contains(this.gos.getActiveDomElement())||!this.virtualList)return;let t=this.virtualList.getLastFocusedRow();if(t==null)return;let n=this.virtualList.getComponentAt(t);if(n==null)return;i.preventDefault();let{readOnly:r}=(e=this.setFilterParams)!=null?e:{};if(!r)return n}getCssIdentifier(){return"set-filter"}setModel(i){var e;return i==null&&((e=this.valueModel)==null?void 0:e.getModel())==null?(this.setMiniFilter(null),vt.resolve()):super.setModel(i)}refresh(i){var e,t,n;return!super.refresh(i)||["treeList","treeListFormatter","treeListPathGetter","keyCreator","convertValuesToStrings","caseSensitive","comparator","suppressSelectAll","excelMode"].some(s=>{var o;return i[s]!==((o=this.setFilterParams)==null?void 0:o[s])})||this.haveColDefParamsChanged(i.colDef)?!1:(super.updateParams(i),this.updateSetFilterOnParamsChange(i),this.updateMiniFilter(),(i.cellRenderer!==((e=this.setFilterParams)==null?void 0:e.cellRenderer)||i.valueFormatter!==((t=this.setFilterParams)==null?void 0:t.valueFormatter))&&this.checkAndRefreshVirtualList(),(n=this.valueModel)==null||n.updateOnParamsChange(i).then(()=>{var s;(s=this.valueModel)!=null&&s.hasSelections()&&this.refreshFilterValues()}),!0)}haveColDefParamsChanged(i){var e;let t=["keyCreator","filterValueGetter"],n=(e=this.setFilterParams)==null?void 0:e.colDef;return t.some(r=>i[r]!==n?.[r])}setModelAndRefresh(i){return this.valueModel?this.valueModel.setModel(i).then(()=>this.checkAndRefreshVirtualList()):vt.resolve()}resetUiToDefaults(){return this.setMiniFilter(null),this.setModelAndRefresh(null)}setModelIntoUi(i){this.setMiniFilter(null);let e=i==null?null:i.values;return this.setModelAndRefresh(e)}getModelFromUi(){if(!this.valueModel)throw new Error("Value model has not been created.");let i=this.valueModel.getModel();return i?{values:i,filterType:this.getFilterType()}:null}getFilterType(){return"set"}getValueModel(){return this.valueModel}areModelsEqual(i,e){return i==null&&e==null?!0:i!=null&&e!=null&&M.areEqual(i.values,e.values)}setParams(i){var e;this.applyExcelModeOptions(i),super.setParams(i),this.updateSetFilterOnParamsChange(i);let t=(e=i.keyCreator)!=null?e:i.colDef.keyCreator;this.valueModel=new e3({filterParams:i,setIsLoading:n=>this.setIsLoading(n),translate:n=>this.translateForSetFilter(n),caseFormat:n=>this.caseFormat(n),createKey:this.createKey,valueFormatter:this.valueFormatter,usingComplexObjects:!!t,gos:this.gos,columnModel:this.columnModel,valueService:this.valueService,treeDataTreeList:this.treeDataTreeList,groupingTreeList:this.groupingTreeList,addManagedListener:(n,r)=>this.addManagedListener(this.eventService,n,r)}),this.initialiseFilterBodyUi(),this.addEventListenersForDataChanges()}onAddCurrentSelectionToFilterChange(i){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setAddCurrentSelectionToFilter(i)}setValueFormatter(i,e,t,n,r){let s=i;if(!s){if(e&&!t&&!n)throw new Error("AG Grid: Must supply a Value Formatter in Set Filter params when using a Key Creator unless convertValuesToStrings is enabled");this.noValueFormatterSupplied=!0,r||(s=o=>M.toStringOrNull(o.value))}this.valueFormatter=s}generateCreateKey(i,e,t){if(t&&!i)throw new Error("AG Grid: Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.");return i?(n,r=null)=>{let s=this.getKeyCreatorParams(n,r);return M.makeNull(i(s))}:e?n=>Array.isArray(n)?n:M.makeNull(M.toStringOrNull(n)):n=>M.makeNull(M.toStringOrNull(n))}getFormattedValue(i){var e;let t=this.valueModel.getValue(i);this.noValueFormatterSupplied&&(this.treeDataTreeList||this.groupingTreeList)&&Array.isArray(t)&&(t=M.last(t));let n=this.valueService.formatValue(this.setFilterParams.column,null,t,this.valueFormatter,!1);return(e=n??M.toStringOrNull(t))!=null?e:this.translateForSetFilter("blanks")}applyExcelModeOptions(i){i.excelMode==="windows"?(i.buttons||(i.buttons=["apply","cancel"]),i.closeOnApply==null&&(i.closeOnApply=!0)):i.excelMode==="mac"&&(i.buttons||(i.buttons=["reset"]),i.applyMiniFilterWhileTyping==null&&(i.applyMiniFilterWhileTyping=!0),i.debounceMs==null&&(i.debounceMs=500)),i.excelMode&&i.defaultToNothingSelected&&(i.defaultToNothingSelected=!1,M.warnOnce('The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.'))}addEventListenersForDataChanges(){this.isValuesTakenFromGrid()&&(this.addManagedListener(this.eventService,X.EVENT_CELL_VALUE_CHANGED,i=>{this.setFilterParams&&i.column===this.setFilterParams.column&&this.syncAfterDataChange()}),this.addManagedPropertyListeners(["treeData","getDataPath","groupAllowUnbalanced"],()=>{this.syncAfterDataChange()}))}syncAfterDataChange(){if(!this.valueModel)throw new Error("Value model has not been created.");return this.valueModel.refreshValues().then(()=>{this.checkAndRefreshVirtualList(),this.onBtApply(!1,!0)})}setIsLoading(i){M.setDisplayed(this.eFilterLoading,i),i||(this.hardRefreshVirtualList=!0)}initialiseFilterBodyUi(){this.initVirtualList(),this.initMiniFilter()}initVirtualList(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");let e=this.localeService.getLocaleTextFunc()("ariaFilterList","Filter List"),t=!!this.setFilterParams.treeList,n=this.virtualList=this.createBean(new Oo({cssIdentifier:"filter",ariaRole:t?"tree":"listbox",listName:e})),r=this.getRefElement("eSetFilterList");t&&r.classList.add("ag-set-filter-tree-list"),r&&r.appendChild(n.getGui());let{cellHeight:s}=this.setFilterParams;s!=null&&n.setRowHeight(s);let o=(c,u)=>this.createSetListItem(c,t,u);n.setComponentCreator(o);let a=(c,u)=>this.updateSetListItem(c,u);n.setComponentUpdater(a);let l;this.setFilterParams.suppressSelectAll?l=new dq(this.valueModel):l=new hq(this.valueModel,()=>this.isSelectAllSelected()),t&&(l=new pq(l)),n.setModel(l)}getSelectAllLabel(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");let i=this.valueModel.getMiniFilter()==null||!this.setFilterParams.excelMode?"selectAll":"selectAllSearchResults";return this.translateForSetFilter(i)}getAddSelectionToFilterLabel(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.translateForSetFilter("addCurrentSelectionToFilter")}createSetListItem(i,e,t){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");let n=this.valueModel.hasGroups(),{isSelected:r,isExpanded:s}=this.isSelectedExpanded(i),{value:o,depth:a,isGroup:l,hasIndeterminateExpandState:c,selectedListener:u,expandedListener:d}=this.newSetListItemAttributes(i,e),h={focusWrapper:t,value:o,params:this.setFilterParams,translate:m=>this.translateForSetFilter(m),valueFormatter:this.valueFormatter,item:i,isSelected:r,isTree:e,depth:a,groupsExist:n,isGroup:l,isExpanded:s,hasIndeterminateExpandState:c},p=this.createBean(new Kx(h));return p.addEventListener(Kx.EVENT_SELECTION_CHANGED,u),d&&p.addEventListener(Kx.EVENT_EXPANDED_CHANGED,d),p}newSetTreeItemAttributes(i,e){var t,n,r,s,o,a;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");let l=this.valueModel.hasGroups();return i.key===Vr.SELECT_ALL?{value:()=>this.getSelectAllLabel(),isGroup:l,depth:i.depth,hasIndeterminateExpandState:!0,selectedListener:c=>this.onSelectAll(c.isSelected),expandedListener:c=>this.onExpandAll(c.item,c.isExpanded)}:i.key===Vr.ADD_SELECTION_TO_FILTER?{value:()=>this.getAddSelectionToFilterLabel(),depth:i.depth,isGroup:!1,hasIndeterminateExpandState:!1,selectedListener:c=>{this.onAddCurrentSelectionToFilterChange(c.isSelected)}}:i.children?{value:(r=(n=(t=this.setFilterParams).treeListFormatter)==null?void 0:n.call(t,i.treeKey,i.depth,i.parentTreeKeys))!=null?r:i.treeKey,depth:i.depth,isGroup:!0,selectedListener:c=>this.onGroupItemSelected(c.item,c.isSelected),expandedListener:c=>this.onExpandedChanged(c.item,c.isExpanded)}:{value:(a=(o=(s=this.setFilterParams).treeListFormatter)==null?void 0:o.call(s,i.treeKey,i.depth,i.parentTreeKeys))!=null?a:i.treeKey,depth:i.depth,selectedListener:c=>this.onItemSelected(c.item.key,c.isSelected)}}newSetListItemAttributes(i,e){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.isSetFilterModelTreeItem(i)?this.newSetTreeItemAttributes(i,e):i===Vr.SELECT_ALL?{value:()=>this.getSelectAllLabel(),selectedListener:t=>this.onSelectAll(t.isSelected)}:i===Vr.ADD_SELECTION_TO_FILTER?{value:()=>this.getAddSelectionToFilterLabel(),selectedListener:t=>{this.onAddCurrentSelectionToFilterChange(t.isSelected)}}:{value:this.valueModel.getValue(i),selectedListener:t=>this.onItemSelected(t.item,t.isSelected)}}updateSetListItem(i,e){let{isSelected:t,isExpanded:n}=this.isSelectedExpanded(i);e.refresh(i,t,n)}isSelectedExpanded(i){let e,t;return this.isSetFilterModelTreeItem(i)?(t=i.expanded,i.key===Vr.SELECT_ALL?e=this.isSelectAllSelected():i.key===Vr.ADD_SELECTION_TO_FILTER?e=this.valueModel.isAddCurrentSelectionToFilterChecked():i.children?e=this.areAllChildrenSelected(i):e=this.valueModel.isKeySelected(i.key)):i===Vr.SELECT_ALL?e=this.isSelectAllSelected():i===Vr.ADD_SELECTION_TO_FILTER?e=this.valueModel.isAddCurrentSelectionToFilterChecked():e=this.valueModel.isKeySelected(i),{isSelected:e,isExpanded:t}}isSetFilterModelTreeItem(i){return i?.treeKey!==void 0}initMiniFilter(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");let{eMiniFilter:i,localeService:e}=this,t=e.getLocaleTextFunc();i.setDisplayed(!this.setFilterParams.suppressMiniFilter),i.setValue(this.valueModel.getMiniFilter()),i.onValueChange(()=>this.onMiniFilterInput()),i.setInputAriaLabel(t("ariaSearchFilterValues","Search filter values")),this.addManagedListener(i.getInputElement(),"keydown",n=>this.onMiniFilterKeyDown(n))}updateMiniFilter(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");let{eMiniFilter:i}=this;i.isDisplayed()!==!this.setFilterParams.suppressMiniFilter&&i.setDisplayed(!this.setFilterParams.suppressMiniFilter);let e=this.valueModel.getMiniFilter();i.getValue()!==e&&i.setValue(e)}afterGuiAttached(i){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");super.afterGuiAttached(i),this.resetExpansion(),this.refreshVirtualList();let{eMiniFilter:e}=this;e.setInputPlaceholder(this.translateForSetFilter("searchOoo")),(!i||!i.suppressFocus)&&e.getFocusableElement().focus()}afterGuiDetached(){var i,e;super.afterGuiDetached(),(i=this.setFilterParams)!=null&&i.excelMode&&this.resetMiniFilter();let t=this.getModel();((e=this.setFilterParams)!=null&&e.excelMode||!this.areModelsEqual(t,this.getModelFromUi()))&&(this.resetUiToActiveModel(t),this.showOrHideResults())}applyModel(i="api"){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&i!=="rowDataUpdated"&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();let e=this.valueModel.showAddCurrentSelectionToFilter()&&this.valueModel.isAddCurrentSelectionToFilterChecked();if(e&&!this.getModel())return!1;let t=super.applyModel(i),n=this.getModel();return n?(e||this.valueModel.setAppliedModelKeys(new Set),n.values.forEach(r=>{this.valueModel.addToAppliedModelKeys(r)})):e||this.valueModel.setAppliedModelKeys(null),t}isModelValid(i){return this.setFilterParams&&this.setFilterParams.excelMode?i==null||i.values.length>0:!0}doesFilterPass(i){if(!this.setFilterParams||!this.valueModel||!this.valueModel.getCaseFormattedAppliedModelKeys())return!0;if(!this.valueModel.hasAnyAppliedModelKey())return!1;let{node:e,data:t}=i;if(this.treeDataTreeList)return this.doesFilterPassForTreeData(e,t);if(this.groupingTreeList)return this.doesFilterPassForGrouping(e);let n=this.getValueFromNode(e);return this.convertValuesToStrings?this.doesFilterPassForConvertValuesToString(e,n):n!=null&&Array.isArray(n)?n.length===0?this.valueModel.hasAppliedModelKey(null):n.some(r=>this.isInAppliedModel(this.createKey(r,e))):this.isInAppliedModel(this.createKey(n,e))}doesFilterPassForConvertValuesToString(i,e){let t=this.createKey(e,i);return t!=null&&Array.isArray(t)?t.length===0?this.valueModel.hasAppliedModelKey(null):t.some(n=>this.isInAppliedModel(n)):this.isInAppliedModel(t)}doesFilterPassForTreeData(i,e){var t;return(t=i.childrenAfterGroup)!=null&&t.length?!1:this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(this.getDataPath(e))))}doesFilterPassForGrouping(i){let e=this.columnModel.getRowGroupColumns().map(t=>this.valueService.getKeyForNode(t,i));return e.push(this.getValueFromNode(i)),this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(e)))}checkMakeNullDataPath(i){return i&&(i=i.map(e=>M.toStringOrNull(M.makeNull(e)))),i?.some(e=>e==null)?null:i}isInAppliedModel(i){return this.valueModel.hasAppliedModelKey(i)}getValueFromNode(i){return this.setFilterParams.getValue(i)}getKeyCreatorParams(i,e=null){return{value:i,colDef:this.setFilterParams.colDef,column:this.setFilterParams.column,node:e,data:e?.data,api:this.setFilterParams.api,columnApi:this.setFilterParams.columnApi,context:this.setFilterParams.context}}onNewRowsLoaded(){this.isValuesTakenFromGrid()&&this.syncAfterDataChange()}isValuesTakenFromGrid(){return this.valueModel?this.valueModel.getValuesType()===2:!1}setFilterValues(i){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(i).then(()=>{this.checkAndRefreshVirtualList(),this.onUiChanged()})}resetFilterValues(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(2),this.syncAfterDataChange()}refreshFilterValues(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.isInitialised()&&this.valueModel.refreshValues().then(()=>{this.checkAndRefreshVirtualList(),this.onUiChanged()})}onAnyFilterChanged(){setTimeout(()=>{if(this.isAlive()){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.refreshAfterAnyFilterChanged().then(i=>{i&&(this.checkAndRefreshVirtualList(),this.showOrHideResults())})}},0)}onMiniFilterInput(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.valueModel.setMiniFilter(this.eMiniFilter.getValue()))return;let{applyMiniFilterWhileTyping:i,readOnly:e}=this.setFilterParams||{};!e&&i?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}updateUiAfterMiniFilterChange(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");let{excelMode:i,readOnly:e}=this.setFilterParams||{};i==null||e?this.checkAndRefreshVirtualList():this.valueModel.getMiniFilter()==null?this.resetUiToActiveModel(this.getModel()):(this.valueModel.selectAllMatchingMiniFilter(!0),this.checkAndRefreshVirtualList(),this.onUiChanged()),this.showOrHideResults()}showOrHideResults(){if(!this.valueModel)throw new Error("Value model has not been created.");let i=this.valueModel.getMiniFilter()!=null&&this.valueModel.getDisplayedValueCount()<1;M.setDisplayed(this.eNoMatches,i),M.setDisplayed(this.eSetFilterList,!i)}resetMiniFilter(){var i;this.eMiniFilter.setValue(null,!0),(i=this.valueModel)==null||i.setMiniFilter(null)}resetUiToActiveModel(i,e){this.setModelAndRefresh(i==null?null:i.values).then(()=>{this.onUiChanged(!1,"prevent"),e?.()})}handleCancelEnd(i){this.setMiniFilter(null),super.handleCancelEnd(i)}onMiniFilterKeyDown(i){let{excelMode:e,readOnly:t}=this.setFilterParams||{};i.key===Xe.ENTER&&!e&&!t&&this.filterOnAllVisibleValues()}filterOnAllVisibleValues(i=!0){let{readOnly:e}=this.setFilterParams||{};if(!this.valueModel)throw new Error("Value model has not been created.");if(e)throw new Error("Unable to filter in readOnly mode.");this.valueModel.selectAllMatchingMiniFilter(!0),this.checkAndRefreshVirtualList(),this.onUiChanged(!1,i?"immediately":"debounce"),this.showOrHideResults()}focusRowIfAlive(i){i!=null&&window.setTimeout(()=>{if(!this.virtualList)throw new Error("Virtual list has not been created.");this.isAlive()&&this.virtualList.focusRow(i)},0)}onSelectAll(i){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");i?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter(),this.refreshAfterSelection()}onGroupItemSelected(i,e){let t=n=>{n.children?n.children.forEach(r=>t(r)):this.selectItem(n.key,e)};t(i),this.refreshAfterSelection()}onItemSelected(i,e){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");this.selectItem(i,e),this.refreshAfterSelection()}selectItem(i,e){e?this.valueModel.selectKey(i):this.valueModel.deselectKey(i)}onExpandAll(i,e){let t=n=>{n.filterPasses&&n.available&&n.children&&(n.children.forEach(r=>t(r)),n.expanded=e)};t(i),this.refreshAfterExpansion()}onExpandedChanged(i,e){i.expanded=e,this.refreshAfterExpansion()}refreshAfterExpansion(){let i=this.virtualList.getLastFocusedRow();this.valueModel.updateDisplayedValues("expansion"),this.checkAndRefreshVirtualList(),this.focusRowIfAlive(i)}refreshAfterSelection(){let i=this.virtualList.getLastFocusedRow();this.checkAndRefreshVirtualList(),this.onUiChanged(),this.focusRowIfAlive(i)}setMiniFilter(i){this.eMiniFilter.setValue(i),this.onMiniFilterInput()}getMiniFilter(){return this.valueModel?this.valueModel.getMiniFilter():null}checkAndRefreshVirtualList(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh(!this.hardRefreshVirtualList),this.hardRefreshVirtualList&&(this.hardRefreshVirtualList=!1)}getFilterKeys(){return this.valueModel?this.valueModel.getKeys():[]}getFilterValues(){return this.valueModel?this.valueModel.getValues():[]}getValues(){return this.getFilterKeys()}refreshVirtualList(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.checkAndRefreshVirtualList()}translateForSetFilter(i){return this.localeService.getLocaleTextFunc()(i,uq[i])}isSelectAllSelected(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}}areAllChildrenSelected(i){let e=t=>{if(t.children){let n=!1,r=!1;return t.children.some(o=>{if(!o.filterPasses||!o.available)return!1;let a=e(o);return a===void 0?!0:(a?n=!0:r=!0,n&&r)})?void 0:n}else return this.valueModel.isKeySelected(t.key)};return this.setFilterParams.defaultToNothingSelected?this.valueModel.hasSelections()&&e(i):e(i)}destroy(){this.virtualList!=null&&(this.virtualList.destroy(),this.virtualList=null),super.destroy()}caseFormat(i){return i==null||typeof i!="string"||this.caseSensitive?i:i.toUpperCase()}resetExpansion(){var i,e;if(!((i=this.setFilterParams)!=null&&i.treeList))return;let t=(e=this.valueModel)==null?void 0:e.getSelectAllItem();if(this.isSetFilterModelTreeItem(t)){let n=r=>{r.children&&(r.children.forEach(s=>n(s)),r.expanded=!1)};n(t),this.valueModel.updateDisplayedValues("expansion")}}getModelAsString(i){return this.filterModelFormatter.getModelAsString(i,this)}getPositionableElement(){return this.eSetFilterList}};vr([ce("eMiniFilter")],dl.prototype,"eMiniFilter",2);vr([ce("eFilterLoading")],dl.prototype,"eFilterLoading",2);vr([ce("eSetFilterList")],dl.prototype,"eSetFilterList",2);vr([ce("eFilterNoMatches")],dl.prototype,"eNoMatches",2);vr([k("columnModel")],dl.prototype,"columnModel",2);vr([k("valueService")],dl.prototype,"valueService",2);var dq=class{constructor(i){this.model=i}getRowCount(){return this.model.getDisplayedValueCount()}getRow(i){return this.model.getDisplayedItem(i)}areRowsEqual(i,e){return i===e}},hq=class{constructor(i,e){this.model=i,this.isSelectAllSelected=e}getRowCount(){let e=this.model.showAddCurrentSelectionToFilter()?2:1;return this.model.getDisplayedValueCount()+e}getRow(i){if(i===0)return this.model.getSelectAllItem();let e=this.model.showAddCurrentSelectionToFilter(),t=e?2:1;return i===1&&e?this.model.getAddSelectionToFilterItem():this.model.getDisplayedItem(i-t)}areRowsEqual(i,e){return i===e}},pq=class{constructor(i){this.model=i}getRowCount(){return this.model.getRowCount()}getRow(i){return this.model.getRow(i)}areRowsEqual(i,e){return i==null&&e==null?!0:i!=null&&e!=null&&i.treeKey===e.treeKey&&i.depth===e.depth}},g1=class extends ae{constructor(){super(`
            <div class="ag-floating-filter-input ag-set-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`),this.availableValuesListenerAdded=!1,this.filterModelFormatter=new t3}destroy(){super.destroy()}init(i){this.params=i,this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",()=>this.params.showParentFilter()),this.setParams(i)}setParams(i){let e=this.columnModel.getDisplayNameForColumn(i.column,"header",!0),t=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setInputAriaLabel(`${e} ${t("ariaFilterInput","Filter Input")}`)}onParamsUpdated(i){this.refresh(i)}refresh(i){this.params=i,this.setParams(i)}onParentModelChanged(i){this.updateFloatingFilterText(i)}parentSetFilterInstance(i){this.params.parentFilterInstance(e=>{if(!(e instanceof dl))throw new Error("AG Grid - SetFloatingFilter expects SetFilter as its parent");i(e)})}addAvailableValuesListener(){this.parentSetFilterInstance(i=>{let e=i.getValueModel();e&&this.addManagedListener(e,e3.EVENT_AVAILABLE_VALUES_CHANGED,()=>this.updateFloatingFilterText())}),this.availableValuesListenerAdded=!0}updateFloatingFilterText(i){this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance(e=>{this.eFloatingFilterText.setValue(this.filterModelFormatter.getModelAsString(i,e))})}};vr([ce("eFloatingFilterText")],g1.prototype,"eFloatingFilterText",2);vr([k("columnModel")],g1.prototype,"columnModel",2);var mq="31.3.4",i3={version:mq,moduleName:qe.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:dl},{componentName:"agSetColumnFloatingFilter",componentClass:g1}],dependantModules:[Tn]},n3=Object.defineProperty,gq=Object.getOwnPropertyDescriptor,XF=Object.getOwnPropertySymbols,fq=Object.prototype.hasOwnProperty,vq=Object.prototype.propertyIsEnumerable,ZF=(i,e,t)=>e in i?n3(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,yq=(i,e)=>{for(var t in e||(e={}))fq.call(e,t)&&ZF(i,t,e[t]);if(XF)for(var t of XF(e))vq.call(e,t)&&ZF(i,t,e[t]);return i},pp=(i,e,t,n)=>{for(var r=n>1?void 0:n?gq(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&n3(e,t,r),r},Cq=`
.ag-sparkline-tooltip-wrapper {
    position: absolute;
    user-select: none;
    pointer-events: none;
}

.ag-sparkline-tooltip {
    position: relative;
    font: 12px arial,sans-serif;
    border-radius: 2px;
    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);
    line-height: 1.7em;
    overflow: hidden;
    white-space: nowrap;
    z-index: 99999;
    background-color: rgb(255, 255, 255);
    color: rgba(0,0,0, 0.67);
}

.ag-sparkline-tooltip-content {
    padding: 0 7px;
    opacity: 1;
}

.ag-sparkline-tooltip-title {
    padding-left: 7px;
    opacity: 1;
}

.ag-sparkline-tooltip-wrapper-hidden {
    top: -10000px !important;
}

.ag-sparkline-wrapper {
    box-sizing: border-box;
    overflow: hidden;
}
`,{extent:bq,isNumber:eg,isString:Sq,isStringObject:xq,isDate:QF,createId:_q,Padding:wq}=ai,{LinearScale:jx,BandScale:Eq,TimeScale:JF}=Ls,Tq=class{constructor(){this.type="category",this.stroke="rgb(204, 214, 235)",this.strokeWidth=1}},Mq=(()=>{let i=class y_{constructor(){this.id=_q(this),this.seriesRect={x:0,y:0,width:0,height:0},this._context=void 0,this._container=void 0,this._data=void 0,this.padding=new wq(3),this.xKey="x",this.yKey="y",this.dataType=void 0,this.xData=[],this.yData=[],this.min=void 0,this.max=void 0,this.yScale=new jx,this.axis=new Tq,this.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1},this._width=100,this._height=100,this.smallestInterval=void 0,this.layoutId=0,this.defaultDateFormatter=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),this._onMouseMove=this.onMouseMove.bind(this),this._onMouseOut=this.onMouseOut.bind(this);let t=new le.Group;this.rootGroup=t;let n=document.createElement("div");n.setAttribute("class","ag-sparkline-wrapper");let r=new le.Scene({});this.scene=r,this.canvasElement=r.canvas.element,r.setRoot(t),r.setContainer(n),this.resizeAndSetDimensions(this.width,this.height),y_.tooltipDocuments.includes(document)||this.initialiseTooltipStyles(),this.setupDomEventListeners(this.canvasElement)}set context(t){this._context!==t&&(this._context=t)}get context(){return this._context}set container(t){if(this._container!==t){let{parentNode:n}=this.canvasElement;n?.removeChild(this.canvasElement),t&&t.appendChild(this.canvasElement),this._container=t}}get container(){return this._container}set data(t){this._data!==t&&(this._data=t,this.processData(),this.mouseMoveEvent&&this.highlightedDatum&&this.updateHitPoint(this.mouseMoveEvent))}get data(){return this._data}resizeAndSetDimensions(t,n){this.scene.resize(t,n),this.seriesRect.width=t,this.seriesRect.height=n}initialiseTooltipStyles(){let t=document.createElement("style");t.innerHTML=Cq,document.head.insertBefore(t,document.head.querySelector("style")),y_.tooltipDocuments.push(document)}set width(t){this._width!==t&&(this._width=t,this.scene.resize(t,this.height),this.scheduleLayout())}get width(){return this._width}set height(t){this._height!==t&&(this._height=t,this.scene.resize(this.width,t),this.scheduleLayout())}get height(){return this._height}update(){}updateYScale(){this.updateYScaleRange(),this.updateYScaleDomain()}updateYScaleDomain(){}updateYScaleRange(){let{yScale:t,seriesRect:n}=this;t.range=[n.height,0]}updateXScale(){let{type:t}=this.axis;this.xScale=this.getXScale(t),this.updateXScaleRange(),this.updateXScaleDomain()}updateXScaleRange(){this.xScale.range=[0,this.seriesRect.width]}updateXScaleDomain(){let{xData:t,xScale:n}=this,r;(n instanceof jx||n instanceof JF)&&(r=bq(t)),this.xScale.domain=r?r.slice():t}getXScale(t="category"){switch(t){case"number":return new jx;case"time":return new JF;case"category":default:return new Eq}}updateAxisLine(){}updateAxes(){this.updateYScale(),this.updateXScale(),this.updateAxisLine()}updateCrosshairs(){this.updateXCrosshairLine(),this.updateYCrosshairLine()}generateNodeData(){return[]}getNodeData(){return[]}updateNodes(){}updateXCrosshairLine(){}updateYCrosshairLine(){}highlightDatum(t){this.updateNodes()}dehighlightDatum(){this.highlightedDatum=void 0,this.updateNodes(),this.updateCrosshairs()}onMouseMove(t){this.mouseMoveEvent=t,this.updateHitPoint(t)}updateHitPoint(t){var n,r,s;let o=this.pickClosestSeriesNodeDatum(t.offsetX,t.offsetY);if(!o)return;let a=this.highlightedDatum;this.highlightedDatum=o,(this.highlightedDatum&&!a||this.highlightedDatum&&a&&this.highlightedDatum!==a)&&(this.highlightDatum(o),this.updateCrosshairs(),this.scene.render().catch(c=>console.error("AG Grid - chart rendering failed",c))),((s=(r=(n=this.processedOptions)==null?void 0:n.tooltip)==null?void 0:r.enabled)!=null?s:!0)&&this.handleTooltip(t,o)}onMouseOut(t){this.dehighlightDatum(),this.tooltip.toggle(!1),this.scene.render().catch(n=>console.error("AG Grid - chart rendering failed",n))}processData(){let{data:t,yData:n,xData:r}=this;if(!t||this.invalidData(this.data))return;n.length=0,r.length=0;let s=t.length,o=this.getDataType(t);this.dataType=o;let{type:a}=this.axis,l=a!=="number"&&a!=="time"?"category":a,c=l==="number"||l==="time",u=(h,p)=>{this.smallestInterval==null&&(this.smallestInterval={x:1/0,y:1/0});let{x:m}=this.smallestInterval,g=Math.abs(h-p);g>0&&g<m&&(this.smallestInterval.x=g)},d;if(o==="number")for(let h=0;h<s;h++){let p=h,m=t[h],g=this.getDatum(p,l),f=this.getDatum(m,"number");c&&u(g,d),r.push(g),n.push(f),d=g}else if(o==="array")for(let h=0;h<s;h++){let p=t[h];if(Array.isArray(p)){let m=p[0],g=p[1],f=this.getDatum(m,l),y=this.getDatum(g,"number");if(f==null)continue;c&&u(f,d),r.push(f),n.push(y),d=f}}else if(o==="object"){let{yKey:h,xKey:p}=this;for(let m=0;m<s;m++){let g=t[m];if(typeof g=="object"&&!Array.isArray(g)){let f=g[p],y=g[h],b=this.getDatum(f,l),v=this.getDatum(y,"number");if(b==null)continue;c&&u(b,d),r.push(b),n.push(v),d=b}}}this.updateAxes(),this.immediateLayout()}getDataType(t){for(let n of t)if(n!=null){if(eg(n))return"number";if(Array.isArray(n))return"array";if(typeof n=="object")return"object"}}getDatum(t,n){if(n==="number"&&eg(t)||n==="time"&&(eg(t)||QF(t)))return t;if(n==="category"){if(Sq(t)||QF(t)||eg(t))return{toString:()=>String(t)};if(xq(t))return t}}get layoutScheduled(){return!!this.layoutId}scheduleLayout(){this.layoutId&&cancelAnimationFrame(this.layoutId),this.layoutId=requestAnimationFrame(()=>{this.immediateLayout(),this.layoutId=0})}immediateLayout(){this.setSparklineDimensions(),!this.invalidData(this.data)&&(this.updateXScaleRange(),this.updateYScaleRange(),this.updateAxisLine(),this.update(),this.scene.render().catch(t=>console.error("AG Grid - chart rendering failed",t)))}setSparklineDimensions(){let{width:t,height:n,padding:r,seriesRect:s,rootGroup:o}=this,a=t-r.left-r.right,l=n-r.top-r.bottom;s.width=a,s.height=l,s.x=r.left,s.y=r.top,o.translationX=s.x,o.translationY=s.y}pickClosestSeriesNodeDatum(t,n){let r=1/0,s,o=this.rootGroup.transformPoint(t,n),a=this.getNodeData();for(let l=0;l<a.length;l++){let c=a[l];if(!c.point)return;let u=this.getDistance(o,c.point);u<=r&&(r=u,s=c)}return s}getDistance(t,n){return Math.abs(t.x-n.x)}handleTooltip(t,n){var r,s;let{seriesDatum:o}=n,{canvasElement:a}=this,{clientX:l,clientY:c}=t,u=(r=this.processedOptions)==null?void 0:r.tooltip,d={pageX:l,pageY:c,position:{xOffset:u?.xOffset,yOffset:u?.yOffset},container:u?.container};d.container==null&&(d.container=a);let h=o.y,p=o.x,m=(s=u?.enabled)!=null?s:!0,g=u?.renderer;if(g){let y=g({context:this.context,datum:o,yValue:h,xValue:p});m=typeof y!="string"&&y.enabled!==void 0?y.enabled:m}let f=m&&o.y!==void 0&&this.getTooltipHtml(n);f&&this.tooltip.show(d,f)}formatNumericDatum(t){return String(Math.round(t*10)/10)}formatDatum(t){let n=this.axis.type||"category";return n==="number"&&typeof t=="number"?this.formatNumericDatum(t):n==="time"&&(t instanceof Date||eg(t))?this.defaultDateFormatter.format(t):String(t)}setupDomEventListeners(t){t.addEventListener("mousemove",this._onMouseMove),t.addEventListener("mouseout",this._onMouseOut)}cleanupDomEventListeners(t){t.removeEventListener("mousemove",this._onMouseMove),t.removeEventListener("mouseout",this._onMouseOut)}invalidData(t){return!t||!Array.isArray(t)}destroy(){this.cleanupDomEventListeners(this.canvasElement),this.scene.destroy(),this.container=void 0}};return i.tooltipDocuments=[],i})(),f1=Mq;function ip(i,e){var t,n,r;if(typeof i=="string")return i;e=e??{};let{content:s=(t=e.content)!=null?t:"",title:o=(n=e.title)!=null?n:void 0,color:a=e.color,backgroundColor:l=e.backgroundColor,opacity:c=(r=e.opacity)!=null?r:1}=i,u,d;a?(u=o?`<span class="${$h.class}-title"; style="color: ${a}">${o}</span>`:"",d=`<span class="${$h.class}-content" style="color: ${a}">${s}</span>`):(u=o?`<span class="${$h.class}-title">${o}</span>`:"",d=`<span class="${$h.class}-content">${s}</span>`);let h=`opacity: ${c}`;return l&&(h+=`; background-color: ${l.toLowerCase()}`),`<div class="${$h.class}" style="${h}">
                ${u}
                ${d}
            </div>`}var Aq=(()=>{let i=class ng{constructor(){this.element=document.createElement("div"),document.body.appendChild(this.element)}isVisible(){let{element:t}=this;if(t.classList)return!t.classList.contains(`${ng.class}-wrapper-hidden`);let n=t.getAttribute("class");return n?n.split(" ").indexOf(`${ng.class}-wrapper-hidden`)<0:!1}updateClass(t){let n=[`${ng.class}-wrapper`];t!==!0&&n.push(`${ng.class}-wrapper-hidden`),this.element.setAttribute("class",n.join(" "))}show(t,n){var r,s,o,a;this.toggle(!1);let{element:l}=this;if(n!==void 0)l.innerHTML=n;else if(!l.innerHTML)return;let c=(s=(r=t.position)==null?void 0:r.xOffset)!=null?s:10,u=(a=(o=t.position)==null?void 0:o.yOffset)!=null?a:0,d=t.pageX+c,h=t.pageY+u,p=l.getBoundingClientRect(),m=window.innerWidth-p.width;if(t.container){let g=t.container.getBoundingClientRect();m=g.left+(g.width-p.width)}d>m&&(d=t.pageX-l.clientWidth-c),typeof scrollX<"u"&&(d+=scrollX),typeof scrollY<"u"&&(h+=scrollY),l.style.left=`${Math.round(d)}px`,l.style.top=`${Math.round(h)}px`,this.toggle(!0)}toggle(t){this.updateClass(t)}destroy(){let{parentNode:t}=this.element;t&&t.removeChild(this.element)}};return i.class="ag-sparkline-tooltip",i})(),$h=Aq;function r3(i){switch(i){case"circle":return le.Circle;case"square":return le.Square;case"diamond":return le.Diamond;default:return le.Circle}}function Cy(i,e="solid"){let t={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]},n={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};return i==="round"||i==="square"?n[e]==null?(console.warn(`'${e}' is not a valid 'lineDash' option.`),n.solid):n[e]:t[e]==null?(console.warn(`'${e}' is not a valid 'lineDash' option.`),t.solid):t[e]}var{extent:Pq}=ai,{BandScale:Dq}=Ls,kq=class{constructor(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}},Iq=class{constructor(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}},Fq=class{constructor(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}},Oq=(()=>{let i=class extends f1{constructor(){super(),this.fill="rgba(124, 181, 236, 0.25)",this.strokePath=new le.Path,this.fillPath=new le.Path,this.xCrosshairLine=new le.Line,this.yCrosshairLine=new le.Line,this.areaSparklineGroup=new le.Group,this.xAxisLine=new le.Line,this.markers=new le.Group,this.markerSelection=le.Selection.select(this.markers,()=>this.markerFactory()),this.markerSelectionData=[],this.marker=new kq,this.line=new Iq,this.crosshairs=new Fq,this.rootGroup.append(this.areaSparklineGroup),this.xAxisLine.zIndex=500,this.fillPath.zIndex=50,this.strokePath.zIndex=1e3,this.xCrosshairLine.zIndex=2e3,this.yCrosshairLine.zIndex=2e3,this.markers.zIndex=2500,this.areaSparklineGroup.append([this.fillPath,this.xAxisLine,this.strokePath,this.xCrosshairLine,this.yCrosshairLine,this.markers])}markerFactory(){let{shape:e}=this.marker,t=r3(e);return new t}getNodeData(){return this.markerSelectionData}update(){let e=this.generateNodeData();if(!e)return;let{nodeData:t,fillData:n,strokeData:r}=e;this.markerSelectionData=t,this.updateSelection(t),this.updateNodes(),this.updateStroke(r),this.updateFill(n)}updateYScaleDomain(){let{yData:e,yScale:t}=this,n=Pq(e),r=0,s=1;n!==void 0&&(r=this.min=n[0],s=this.max=n[1]),r=r<0?r:0,s=s<0?0:s,t.domain=[r,s]}generateNodeData(){let{data:e,yData:t,xData:n,xScale:r,yScale:s}=this;if(!e)return;let o=!(r instanceof Dq),a=o?0:r.bandwidth/2,l=t.length,c=[],u=[],d=[],h,p,m,g,f=s.convert(0);for(let y=0;y<l;y++){let b=t[y],v=n[y],S=r.convert(o?r.toDomain(v):v)+a,w=b===void 0?NaN:s.convert(b);y+1<l&&(g=r.convert(o?r.toDomain(n[y+1]):n[y+1])+a),d.push({seriesDatum:{x:v,y:b},point:{x:S,y:w}}),b===void 0&&m!==void 0?(u.push({seriesDatum:void 0,point:{x:m,y:f}}),g!==void 0&&u.push({seriesDatum:void 0,point:{x:g,y:f}})):b!==void 0&&(u.push({seriesDatum:{x:v,y:b},point:{x:S,y:w}}),c.push({seriesDatum:{x:v,y:b},point:{x:S,y:w}}),h=h!==void 0?h:S,p=S),m=S}return u.push({seriesDatum:void 0,point:{x:p,y:f}},{seriesDatum:void 0,point:{x:h,y:f}}),{nodeData:c,fillData:u,strokeData:d}}updateAxisLine(){let{xScale:e,yScale:t,axis:n,xAxisLine:r}=this;r.x1=e.range[0],r.x2=e.range[1],r.y1=r.y2=0,r.stroke=n.stroke,r.strokeWidth=n.strokeWidth;let s=t.convert(0);r.translationY=s}updateSelection(e){this.markerSelection.update(e)}updateNodes(){let{highlightedDatum:e,highlightStyle:t,marker:n}=this,{size:r,fill:s,stroke:o,strokeWidth:a}=t,l=n.formatter;this.markerSelection.each((c,u,d)=>{let{point:h,seriesDatum:p}=u;if(!h)return;let m=u===e,g=m&&s!==void 0?s:n.fill,f=m&&o!==void 0?o:n.stroke,y=m&&a!==void 0?a:n.strokeWidth,b=m&&r!==void 0?r:n.size,v;if(l){let S=d===0,w=d===this.markerSelectionData.length-1,T=p.y===this.min,D=p.y===this.max;v=l({datum:u,xValue:p.x,yValue:p.y,min:T,max:D,first:S,last:w,fill:g,stroke:f,strokeWidth:y,size:b,highlighted:m})}c.size=v&&v.size!=null?v.size:b,c.fill=v&&v.fill!=null?v.fill:g,c.stroke=v&&v.stroke!=null?v.stroke:f,c.strokeWidth=v&&v.strokeWidth!=null?v.strokeWidth:y,c.translationX=h.x,c.translationY=h.y,c.visible=v&&v.enabled!=null?v.enabled:n.enabled&&c.size>0})}updateStroke(e){let{strokePath:t,yData:n,line:r}=this,s=t.path;if(s.clear(),n.length<2)return;let o=e.length,a=!0;for(let l=0;l<o;l++){let{point:c,seriesDatum:u}=e[l],d=c.x,h=c.y;u.y==null?a=!0:a?(s.moveTo(d,h),a=!1):s.lineTo(d,h)}t.lineJoin=t.lineCap="round",t.fill=void 0,t.stroke=r.stroke,t.strokeWidth=r.strokeWidth}updateFill(e){let{fillPath:t,yData:n,fill:r}=this,s=t.path,o=e.length;if(s.clear(),!(n.length<2)){for(let a=0;a<o;a++){let{point:l}=e[a],c=l.x,u=l.y;a>0?s.lineTo(c,u):s.moveTo(c,u)}s.closePath(),t.lineJoin="round",t.stroke=void 0,t.fill=r}}updateXCrosshairLine(){var e;let{yScale:t,xCrosshairLine:n,highlightedDatum:r,crosshairs:{xLine:s}}=this;if(!s.enabled||r==null){n.strokeWidth=0;return}n.y1=t.range[0],n.y2=t.range[1],n.x1=n.x2=0,n.stroke=s.stroke,n.strokeWidth=(e=s.strokeWidth)!=null?e:1,n.lineCap=s.lineCap==="round"||s.lineCap==="square"?s.lineCap:void 0;let{lineDash:o}=s;n.lineDash=Array.isArray(o)?o:Cy(n.lineCap,s.lineDash),n.translationX=r.point.x}updateYCrosshairLine(){var e;let{xScale:t,yCrosshairLine:n,highlightedDatum:r,crosshairs:{yLine:s}}=this;if(!s.enabled||r==null){n.strokeWidth=0;return}n.x1=t.range[0],n.x2=t.range[1],n.y1=n.y2=0,n.stroke=s.stroke,n.strokeWidth=(e=s.strokeWidth)!=null?e:1,n.lineCap=s.lineCap==="round"||s.lineCap==="square"?s.lineCap:void 0;let{lineDash:o}=s;n.lineDash=Array.isArray(o)?o:Cy(n.lineCap,s.lineDash),n.translationY=r.point.y}getTooltipHtml(e){var t,n;let{dataType:r}=this,{seriesDatum:s}=e,o=s.y,a=s.x,l=this.formatNumericDatum(o),c=r==="array"||r==="object"?this.formatDatum(a):void 0,u={content:l,title:c},d=(n=(t=this.processedOptions)==null?void 0:t.tooltip)==null?void 0:n.renderer;return d?ip(d({context:this.context,datum:s,yValue:o,xValue:a}),u):ip(u)}};return i.className="AreaSparkline",i})(),{extent:Lq}=ai,{BandScale:eO}=Ls,Rq=class{constructor(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}},Nq=class{constructor(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}},Vq=class{constructor(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}},Bq=(()=>{let i=class extends f1{constructor(){super(),this.linePath=new le.Path,this.xCrosshairLine=new le.Line,this.yCrosshairLine=new le.Line,this.lineSparklineGroup=new le.Group,this.markers=new le.Group,this.markerSelection=le.Selection.select(this.markers,()=>this.markerFactory()),this.markerSelectionData=[],this.marker=new Rq,this.line=new Nq,this.crosshairs=new Vq,this.rootGroup.append(this.lineSparklineGroup),this.linePath.zIndex=1e3,this.xCrosshairLine.zIndex=2e3,this.yCrosshairLine.zIndex=2e3,this.markers.zIndex=2500,this.lineSparklineGroup.append([this.linePath,this.xCrosshairLine,this.yCrosshairLine,this.markers])}getNodeData(){return this.markerSelectionData}markerFactory(){let{shape:e}=this.marker,t=r3(e);return new t}onMarkerShapeChange(){this.markerSelection=this.markerSelection.clear(),this.scheduleLayout()}update(){let e=this.generateNodeData();e&&(this.markerSelectionData=e,this.updateSelection(e),this.updateNodes(),this.updateLine())}updateYScaleDomain(){let{yData:e,yScale:t}=this,n=Lq(e),r=0,s=1;if(n!==void 0&&(r=this.min=n[0],s=this.max=n[1]),r===s){let o=Math.abs(r*.01);r-=o,s+=o}t.domain=[r,s]}generateNodeData(){let{data:e,yData:t,xData:n,xScale:r,yScale:s}=this;if(!e)return;let o=!(r instanceof eO),a=o?0:r.bandwidth/2,l=[];for(let c=0;c<t.length;c++){let u=t[c],d=n[c];if(u==null)continue;let h=r.convert(o?r.toDomain(d):d)+a,p=u===void 0?NaN:s.convert(u);l.push({seriesDatum:{x:d,y:u},point:{x:h,y:p}})}return l}updateSelection(e){this.markerSelection.update(e)}updateNodes(){let{highlightedDatum:e,highlightStyle:t,marker:n}=this,{size:r,fill:s,stroke:o,strokeWidth:a}=t,l=n.formatter;this.markerSelection.each((c,u,d)=>{let h=u===e,p=h&&s!==void 0?s:n.fill,m=h&&o!==void 0?o:n.stroke,g=h&&a!==void 0?a:n.strokeWidth,f=h&&r!==void 0?r:n.size,y,{seriesDatum:b,point:v}=u;if(l){let S=d===0,w=d===this.markerSelectionData.length-1,T=b.y===this.min,D=b.y===this.max;y=l({datum:u,xValue:b.x,yValue:b.y,min:T,max:D,first:S,last:w,fill:p,stroke:m,strokeWidth:g,size:f,highlighted:h})}c.size=y&&y.size!=null?y.size:f,c.fill=y&&y.fill!=null?y.fill:p,c.stroke=y&&y.stroke!=null?y.stroke:m,c.strokeWidth=y&&y.strokeWidth!=null?y.strokeWidth:g,c.translationX=v.x,c.translationY=v.y,c.visible=y&&y.enabled!=null?y.enabled:n.enabled&&c.size>0})}updateLine(){let{linePath:e,yData:t,xData:n,xScale:r,yScale:s,line:o}=this,a=e.path;if(a.clear(),t.length<2)return;let l=!(r instanceof eO),c=t.length,u=l?0:r.bandwidth/2,d=!0;for(let h=0;h<c;h++){let p=n[h],m=t[h],g=r.convert(l?r.toDomain(p):p)+u,f=m===void 0?NaN:s.convert(m);m==null?d=!0:d?(a.moveTo(g,f),d=!1):a.lineTo(g,f)}e.fill=void 0,e.stroke=o.stroke,e.strokeWidth=o.strokeWidth}updateXCrosshairLine(){var e;let{yScale:t,xCrosshairLine:n,highlightedDatum:r,crosshairs:{xLine:s}}=this;if(!s.enabled||r==null){n.strokeWidth=0;return}n.y1=t.range[0],n.y2=t.range[1],n.x1=n.x2=0,n.stroke=s.stroke,n.strokeWidth=(e=s.strokeWidth)!=null?e:1,n.lineCap=s.lineCap==="round"||s.lineCap==="square"?s.lineCap:void 0;let{lineDash:o}=s;n.lineDash=Array.isArray(o)?o:Cy(n.lineCap,s.lineDash),n.translationX=r.point.x}updateYCrosshairLine(){var e;let{xScale:t,yCrosshairLine:n,highlightedDatum:r,crosshairs:{yLine:s}}=this;if(!s.enabled||r==null){n.strokeWidth=0;return}n.x1=t.range[0],n.x2=t.range[1],n.y1=n.y2=0,n.stroke=s.stroke,n.strokeWidth=(e=s.strokeWidth)!=null?e:1,n.lineCap=s.lineCap==="round"||s.lineCap==="square"?s.lineCap:void 0;let{lineDash:o}=s;n.lineDash=Array.isArray(o)?o:Cy(n.lineCap,s.lineDash),n.translationY=r.point.y}getTooltipHtml(e){var t,n;let{dataType:r}=this,{seriesDatum:s}=e,o=s.y,a=s.x,l=this.formatNumericDatum(o),c=r==="array"||r==="object"?this.formatDatum(a):void 0,u={content:l,title:c},d=(n=(t=this.processedOptions)==null?void 0:t.tooltip)==null?void 0:n.renderer;return d?ip(d({context:this.context,datum:s,yValue:o,xValue:a}),u):ip(u)}};return i.className="LineSparkline",i})(),Gq=class{constructor(){this.enabled=!0,this.fontSize=8,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}},{extent:Uq}=ai,Hq=class extends Gq{constructor(){super(...arguments),this.formatter=void 0,this.placement="insideEnd"}},s3=class extends f1{constructor(){super(),this.fill="rgb(124, 181, 236)",this.stroke="silver",this.strokeWidth=0,this.paddingInner=.1,this.paddingOuter=.2,this.valueAxisDomain=void 0,this.formatter=void 0,this.axisLine=new le.Line,this.bandWidth=0,this.sparklineGroup=new le.Group,this.rectGroup=new le.Group,this.labelGroup=new le.Group,this.rectSelection=le.Selection.select(this.rectGroup,le.Rect),this.labelSelection=le.Selection.select(this.labelGroup,le.Text),this.nodeSelectionData=[],this.label=new Hq,this.rootGroup.append(this.sparklineGroup),this.rectGroup.zIndex=50,this.axisLine.zIndex=500,this.labelGroup.zIndex=1500,this.sparklineGroup.append([this.rectGroup,this.axisLine,this.labelGroup]),this.axisLine.lineCap="round",this.label.enabled=!1}getNodeData(){return this.nodeSelectionData}update(){this.updateSelections(),this.updateNodes()}updateSelections(){let i=this.generateNodeData();i&&(this.nodeSelectionData=i,this.updateRectSelection(i),this.updateLabelSelection(i))}updateNodes(){this.updateRectNodes(),this.updateLabelNodes()}calculateStep(i){var e;let{xScale:t,paddingInner:n,paddingOuter:r,smallestInterval:s}=this,a=(t.domain[1]-t.domain[0])/((e=s?.x)!=null?e:1)+1,c=Math.min(a,50),u=c-1;return i/Math.max(1,2*r+u*n+c)}updateYScaleDomain(){let{yScale:i,yData:e,valueAxisDomain:t}=this,n=Uq(e),r=0,s=1;n!==void 0&&(r=this.min=n[0],s=this.max=n[1]),r=r<0?r:0,s=s<0?0:s,t&&(t[1]<s&&(t[1]=s),t[0]>r&&(t[0]=r)),i.domain=t||[r,s]}updateRectSelection(i){this.rectSelection.update(i)}updateRectNodes(){let{highlightedDatum:i,formatter:e,fill:t,stroke:n,strokeWidth:r}=this,{fill:s,stroke:o,strokeWidth:a}=this.highlightStyle;this.rectSelection.each((l,c,u)=>{let d=c===i,h=d&&s!==void 0?s:t,p=d&&o!==void 0?o:n,m=d&&a!==void 0?a:r,g,{x:f,y,width:b,height:v,seriesDatum:S}=c;if(e){let w=u===0,T=u===this.nodeSelectionData.length-1,D=S.y===this.min,O=S.y===this.max;g=e({datum:c,xValue:S.x,yValue:S.y,width:b,height:v,min:D,max:O,first:w,last:T,fill:h,stroke:p,strokeWidth:m,highlighted:d})}l.fill=g&&g.fill||h,l.stroke=g&&g.stroke||p,l.strokeWidth=g&&g.strokeWidth||m,l.x=l.y=0,l.width=b,l.height=v,l.visible=l.height>0,l.translationX=f,l.translationY=y})}updateLabelSelection(i){this.labelSelection.update(i,e=>{e.tag=1,e.pointerEvents=le.PointerEvents.None})}updateLabelNodes(){let{label:{enabled:i,fontStyle:e,fontWeight:t,fontSize:n,fontFamily:r,color:s}}=this;this.labelSelection.each((o,a)=>{let l=a.label;l&&i?(o.fontStyle=e,o.fontWeight=t,o.fontSize=n,o.fontFamily=r,o.textAlign=l.textAlign,o.textBaseline=l.textBaseline,o.text=l.text,o.x=l.x,o.y=l.y,o.fill=s,o.visible=!0):o.visible=!1})}getTooltipHtml(i){var e,t;let{dataType:n}=this,{seriesDatum:r}=i,s=r.y,o=r.x,a=this.formatNumericDatum(s),l=n==="array"||n==="object"?this.formatDatum(o):void 0,c={content:a,title:l},u=(t=(e=this.processedOptions)==null?void 0:e.tooltip)==null?void 0:t.renderer;return u?ip(u({context:this.context,datum:r,yValue:s,xValue:o}),c):ip(c)}formatLabelValue(i){return i%1!==0?i.toFixed(1):i.toFixed(0)}},{isNumber:zq}=ai,{BandScale:tO}=Ls,Wq=(()=>{let i=class extends s3{updateYScaleRange(){let{seriesRect:e,yScale:t}=this;t.range=[0,e.width]}updateXScaleRange(){let{xScale:e,seriesRect:t,paddingOuter:n,paddingInner:r}=this;if(e instanceof tO)e.range=[0,t.height],e.paddingInner=r,e.paddingOuter=n;else{let s=this.calculateStep(t.height),o=s*n;this.bandWidth=s*(1-r),e.range=[o,t.height-o-this.bandWidth]}}updateAxisLine(){let{yScale:e,axis:t,axisLine:n,seriesRect:r}=this,{strokeWidth:s}=t;n.x1=0,n.x2=0,n.y1=0,n.y2=r.height,n.stroke=t.stroke,n.strokeWidth=s+(s%2===1?1:0);let o=e.convert(0);n.translationX=o}generateNodeData(){let{data:e,yData:t,xData:n,xScale:r,yScale:s,fill:o,stroke:a,strokeWidth:l,label:c}=this;if(!e)return;let{fontStyle:u,fontWeight:d,fontSize:h,fontFamily:p,color:m,formatter:g,placement:f}=c,y=[],b=s.convert(0),v=!(r instanceof tO);for(let S=0,w=t.length;S<w;S++){let T=t[S],D=n[S],O=T===void 0;O&&(T=0);let R=r.convert(v?r.toDomain(D):D),L=Math.min(T===void 0?NaN:s.convert(T),b),B=Math.max(T===void 0?NaN:s.convert(T),b),$=v?this.bandWidth:r.bandwidth,U=B-L,K={x:b,y:R},ie;g?ie=g({value:T}):ie=T!==void 0&&zq(T)?this.formatLabelValue(T):"";let te=R+$/2,j,Y="middle",se,me=T!==void 0&&T>=0,re=4;if(f==="center")j=L+U/2,se="center";else if(f==="outsideEnd")j=L+(me?U+re:-re),se=me?"start":"end";else if(f==="insideEnd"){j=L+(me?U-re:re),se=me?"end":"start";let _e=le.Text.getTextSize(ie,p).width||20,Ge=b+_e,Le=b-_e;(me&&j<Ge||!me&&j>Le)&&(j=b+re*(me?1:-1),se=me?"start":"end")}else j=b+re*(me?1:-1),se=me?"start":"end";y.push({x:L,y:R,width:U,height:$,fill:o,stroke:a,strokeWidth:l,seriesDatum:{x:D,y:O?void 0:T},point:K,label:{x:j,y:te,text:ie,fontStyle:u,fontWeight:d,fontSize:h,fontFamily:p,textAlign:se,textBaseline:Y,fill:m}})}return y}getDistance(e,t){return Math.abs(e.y-t.y)}};return i.className="BarSparkline",i})(),{isNumber:$q}=ai,{BandScale:iO}=Ls,Kq=(()=>{let i=class extends s3{updateYScaleRange(){let{seriesRect:e,yScale:t}=this;t.range=[e.height,0]}updateXScaleRange(){let{xScale:e,seriesRect:t,paddingOuter:n,paddingInner:r}=this;if(e instanceof iO)e.range=[0,t.width],e.paddingInner=r,e.paddingOuter=n;else{let s=this.calculateStep(t.width),o=s*n;this.bandWidth=s*(1-r),e.range=[o,t.width-o-this.bandWidth]}}updateAxisLine(){let{yScale:e,axis:t,axisLine:n,seriesRect:r}=this,{strokeWidth:s}=t;n.x1=0,n.x2=r.width,n.y1=0,n.y2=0,n.stroke=t.stroke,n.strokeWidth=s+(s%2===1?1:0);let o=e.convert(0);n.translationY=o}generateNodeData(){let{data:e,yData:t,xData:n,xScale:r,yScale:s,fill:o,stroke:a,strokeWidth:l,label:c}=this;if(!e)return;let{fontStyle:u,fontWeight:d,fontSize:h,fontFamily:p,color:m,formatter:g,placement:f}=c,y=[],b=s.convert(0),v=!(r instanceof iO);for(let S=0,w=t.length;S<w;S++){let T=t[S],D=n[S],O=T===void 0;O&&(T=0);let R=Math.min(T===void 0?NaN:s.convert(T),b),L=r.convert(v?r.toDomain(D):D),B=Math.max(T===void 0?NaN:s.convert(T),b),$=v?this.bandWidth:r.bandwidth,U=B-R,K={x:L+$/2,y:b},ie;g?ie=g({value:T}):ie=T!==void 0&&$q(T)?this.formatLabelValue(T):"";let te=L+$/2,j,Y="center",se,me=T!==void 0&&T>=0,re=2;if(f==="center")j=R+U/2,se="middle";else if(f==="outsideEnd")j=R+(me?-re:U+re),se=me?"bottom":"top";else if(f==="insideEnd"){j=R+(me?re:U-re),se=me?"top":"bottom";let _e=le.Text.getTextSize(ie,p).height||10,Ge=b-_e,Le=b+_e;(me&&j>Ge||!me&&j<Le)&&(j=b+re*(me?-1:1),se=me?"bottom":"top")}else j=b+re*(me?-1:1),se=me?"bottom":"top";y.push({x:L,y:R,width:$,height:U,fill:o,stroke:a,strokeWidth:l,seriesDatum:{x:D,y:O?void 0:T},point:K,label:{x:te,y:j,text:ie,fontStyle:u,fontWeight:d,fontSize:h,fontFamily:p,textAlign:Y,textBaseline:se,fill:m}})}return y}};return i.className="ColumnSparkline",i})(),{isNumber:jq}=ai,Yq=class{static create(i,e){i=ai.deepClone(i);let t=qq(i.type);return e&&(t.tooltip=e),Zq(t,i),Xq(t,i),i.data&&(t.data=i.data),t.processedOptions=i,t}};function qq(i="line"){switch(i){case"column":return new Kq;case"bar":return new Wq;case"area":return new Oq;case"line":default:return new Bq}}function Xq(i,e){switch(e.type){case"bar":nO(i,e);break;case"column":nO(i,e);break;case"area":Jq(i,e);break;case"line":default:Qq(i,e);break}}function Zq(i,e){ft(i,"context",e.context,e),ft(i,"width",e.width,e),ft(i,"height",e.height,e),ft(i,"container",e.container,e),ft(i,"xKey",e.xKey,e),ft(i,"yKey",e.yKey,e),e.padding&&eX(i.padding,e.padding),e.axis&&iX(i.axis,e.axis),e.highlightStyle&&nX(i.highlightStyle,e.highlightStyle)}function Qq(i,e){e.marker&&o3(i.marker,e.marker),e.line&&a3(i.line,e.line),e.crosshairs&&l3(i.crosshairs,e.crosshairs)}function Jq(i,e){ft(i,"fill",e.fill,e),e.marker&&o3(i.marker,e.marker),e.line&&a3(i.line,e.line),e.crosshairs&&l3(i.crosshairs,e.crosshairs)}function nO(i,e){ft(i,"valueAxisDomain",e.valueAxisDomain,e),ft(i,"fill",e.fill,e),ft(i,"stroke",e.stroke,e),ft(i,"strokeWidth",e.strokeWidth,e),ft(i,"paddingInner",e.paddingInner,e),ft(i,"paddingOuter",e.paddingOuter,e),ft(i,"formatter",e.formatter,e),e.label&&tX(i.label,e.label)}function eX(i,e){ft(i,"top",e.top,e),ft(i,"right",e.right,e),ft(i,"bottom",e.bottom,e),ft(i,"left",e.left,e)}function o3(i,e){ft(i,"enabled",e.enabled,e),ft(i,"size",e.size,e),ft(i,"shape",e.shape,e),ft(i,"fill",e.fill,e),ft(i,"stroke",e.stroke,e),ft(i,"strokeWidth",e.strokeWidth,e),ft(i,"formatter",e.formatter,e)}function tX(i,e){ft(i,"enabled",e.enabled,e),ft(i,"fontStyle",e.fontStyle,e),ft(i,"fontWeight",e.fontWeight,e),ft(i,"fontSize",e.fontSize,e),ft(i,"fontFamily",e.fontFamily,e),ft(i,"textAlign",e.textAlign,e),ft(i,"textBaseline",e.textBaseline,e),ft(i,"color",e.color,e),ft(i,"formatter",e.formatter,e),ft(i,"placement",e.placement,e)}function a3(i,e){ft(i,"stroke",e.stroke,e),ft(i,"strokeWidth",e.strokeWidth,e)}function iX(i,e){ft(i,"type",e.type,e),ft(i,"stroke",e.stroke,e),ft(i,"strokeWidth",e.strokeWidth,e)}function nX(i,e){ft(i,"fill",e.fill,e),ft(i,"size",e.size,e),ft(i,"stroke",e.stroke,e),ft(i,"strokeWidth",e.strokeWidth,e)}function l3(i,e){i.xLine&&e.xLine&&rO(i.xLine,e.xLine),i.yLine&&e.yLine&&rO(i.yLine,e.yLine)}function rO(i,e){ft(i,"enabled",e.enabled,e),ft(i,"stroke",e.stroke,e),ft(i,"strokeWidth",e.strokeWidth,e),ft(i,"lineDash",e.lineDash,e),ft(i,"lineCap",e.lineCap,e)}var sO={};function rX(i,e){sO[e]||(i(),sO[e]=!0)}var oO=(i,e,t)=>{if(jq(e))return!0;let n=`AG Charts: ${i} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`;return rX(()=>console.warn(n),`${i} not a number`),!1},sX={xOffset:oO,yOffset:oO};function ft(i,e,t,n){if(e in n)if(e in i){let r=sX[e];(r?r(e,t,i[e]):!0)&&i[e]!==t&&(i[e]=t)}else console.warn(`Property ${e} does not exist on the target object.`)}var jy=(()=>{let i=class c3 extends ae{constructor(){super(c3.TEMPLATE)}init(t){let n=!0,r=()=>{let{clientWidth:o,clientHeight:a}=this.getGui();if(!(o===0||a===0))if(n){let l=yq({data:t.value,width:o,height:a,context:{data:t.data}},t.sparklineOptions);this.sparkline=Yq.create(l,this.sparklineTooltipSingleton.getSparklineTooltip()),this.eSparkline.appendChild(this.sparkline.canvasElement),n=!1}else this.sparkline.width=o,this.sparkline.height=a},s=this.resizeObserverService.observeResize(this.getGui(),r);this.addDestroyFunc(()=>s())}refresh(t){return this.sparkline?(this.sparkline.data=t.value,!0):!1}destroy(){this.sparkline&&this.sparkline.destroy(),super.destroy()}};return i.TEMPLATE=`<div class="ag-sparkline-wrapper">
            <span ref="eSparkline"></span>
        </div>`,i})();pp([ce("eSparkline")],jy.prototype,"eSparkline",2);pp([k("resizeObserverService")],jy.prototype,"resizeObserverService",2);pp([k("sparklineTooltipSingleton")],jy.prototype,"sparklineTooltipSingleton",2);var oX=jy,xg=class extends be{postConstruct(){this.tooltip=new $h}getSparklineTooltip(){return this.tooltip}destroyTooltip(){this.tooltip&&this.tooltip.destroy()}};pp([J],xg.prototype,"postConstruct",1);pp([_i],xg.prototype,"destroyTooltip",1);xg=pp([De("sparklineTooltipSingleton")],xg);var aX="31.3.4",u3={version:aX,moduleName:qe.SparklinesModule,beans:[xg],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:oX}],dependantModules:[Tn]},C_=class extends be{constructor(){super(),this.allComponents=new Map}registerStatusPanel(i,e){this.allComponents.set(i,e)}unregisterStatusPanel(i){this.allComponents.delete(i)}unregisterAllComponents(){this.allComponents.clear()}getStatusPanel(i){return this.allComponents.get(i)}destroy(){this.unregisterAllComponents(),super.destroy()}};C_=Ht([De("statusBarService")],C_);var wc=(()=>{let i=class d3 extends ae{constructor(){super(d3.TEMPLATE),this.compDestroyFunctions={}}postConstruct(){this.processStatusPanels(new Map),this.addManagedPropertyListeners(["statusBar"],this.handleStatusBarChanged.bind(this))}processStatusPanels(t){var n;let r=(n=this.gos.get("statusBar"))==null?void 0:n.statusPanels;if(r){let s=r.filter(l=>l.align==="left");this.createAndRenderComponents(s,this.eStatusBarLeft,t);let o=r.filter(l=>l.align==="center");this.createAndRenderComponents(o,this.eStatusBarCenter,t);let a=r.filter(l=>!l.align||l.align==="right");this.createAndRenderComponents(a,this.eStatusBarRight,t)}else this.setDisplayed(!1)}handleStatusBarChanged(){var t;let n=(t=this.gos.get("statusBar"))==null?void 0:t.statusPanels,r=Array.isArray(n)&&n.length>0;this.setDisplayed(r);let s=new Map;r&&n.forEach(o=>{var a,l;let c=(a=o.key)!=null?a:o.statusPanel,u=this.statusBarService.getStatusPanel(c);if(u?.refresh){let d=this.gos.addGridCommonParams((l=o.statusPanelParams)!=null?l:{});u.refresh(d)&&(s.set(c,u),delete this.compDestroyFunctions[c],M.removeFromParent(u.getGui()))}}),this.resetStatusBar(),r&&this.processStatusPanels(s)}resetStatusBar(){this.eStatusBarLeft.innerHTML="",this.eStatusBarCenter.innerHTML="",this.eStatusBarRight.innerHTML="",this.destroyComponents(),this.statusBarService.unregisterAllComponents()}destroyComponents(){Object.values(this.compDestroyFunctions).forEach(t=>t()),this.compDestroyFunctions={}}createAndRenderComponents(t,n,r){let s=[];t.forEach(o=>{let a=o.key||o.statusPanel,l=r.get(a),c;if(l)c=vt.resolve(l);else{let u={};if(c=this.userComponentFactory.getStatusPanelCompDetails(o,u).newAgStackInstance(),!c)return}s.push({key:a,promise:c})}),vt.all(s.map(o=>o.promise)).then(()=>{s.forEach(o=>{o.promise.then(a=>{let l=()=>{this.getContext().destroyBean(a)};this.isAlive()?(this.statusBarService.registerStatusPanel(o.key,a),n.appendChild(a.getGui()),this.compDestroyFunctions[o.key]=l):l()})})})}};return i.TEMPLATE=`<div class="ag-status-bar">
            <div ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>
            <div ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>
            <div ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>
        </div>`,i})();Ht([k("userComponentFactory")],wc.prototype,"userComponentFactory",2);Ht([k("statusBarService")],wc.prototype,"statusBarService",2);Ht([ce("eStatusBarLeft")],wc.prototype,"eStatusBarLeft",2);Ht([ce("eStatusBarCenter")],wc.prototype,"eStatusBarCenter",2);Ht([ce("eStatusBarRight")],wc.prototype,"eStatusBarRight",2);Ht([J],wc.prototype,"postConstruct",1);Ht([_i],wc.prototype,"destroyComponents",1);var lX=wc,v1=(()=>{let i=class h3 extends ae{constructor(){super(h3.TEMPLATE)}setLabel(t,n){this.setDisplayed(!1);let r=this.localeService.getLocaleTextFunc();this.eLabel.innerHTML=r(t,n)}setValue(t){this.eValue.innerHTML=t}};return i.TEMPLATE=`<div class="ag-status-name-value">
            <span ref="eLabel"></span>:&nbsp;
            <span ref="eValue" class="ag-status-name-value-value"></span>
        </div>`,i})();Ht([ce("eLabel")],v1.prototype,"eLabel",2);Ht([ce("eValue")],v1.prototype,"eValue",2);var Og=v1,y1=class extends Og{postConstruct(){if(this.rowModel.getType()!=="clientSide"){M.warnOnce("agTotalAndFilteredRowCountComponent should only be used with the client side row model.");return}this.setLabel("totalAndFilteredRows","Rows"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,X.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()}onDataChanged(){let i=this.localeService.getLocaleTextFunc(),e=i("thousandSeparator",","),t=i("decimalSeparator","."),n=M.formatNumberCommas(this.getFilteredRowCountValue(),e,t),r=M.formatNumberCommas(this.getTotalRowCount(),e,t);if(n===r)this.setValue(n);else{let s=this.localeService.getLocaleTextFunc();this.setValue(`${n} ${s("of","of")} ${r}`)}}getFilteredRowCountValue(){let i=0;return this.rowModel.forEachNodeAfterFilter(e=>{e.group||i++}),i}getTotalRowCount(){let i=0;return this.rowModel.forEachNode(e=>{e.group||i++}),i}init(){}refresh(){return!0}destroy(){super.destroy()}};Ht([k("rowModel")],y1.prototype,"rowModel",2);Ht([J],y1.prototype,"postConstruct",1);var C1=class extends Og{postConstruct(){if(this.setLabel("filteredRows","Filtered"),this.rowModel.getType()!=="clientSide"){M.warnOnce("agFilteredRowCountComponent should only be used with the client side row model.");return}this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);let i=this.onDataChanged.bind(this);this.addManagedListener(this.eventService,X.EVENT_MODEL_UPDATED,i),i()}onDataChanged(){let i=this.getTotalRowCountValue(),e=this.getFilteredRowCountValue(),t=this.localeService.getLocaleTextFunc(),n=t("thousandSeparator",","),r=t("decimalSeparator",".");this.setValue(M.formatNumberCommas(e,n,r)),this.setDisplayed(i!==e)}getTotalRowCountValue(){let i=0;return this.rowModel.forEachNode(e=>i+=1),i}getFilteredRowCountValue(){let i=0;return this.rowModel.forEachNodeAfterFilter(e=>{e.group||(i+=1)}),i}init(){}refresh(){return!0}destroy(){super.destroy()}};Ht([k("rowModel")],C1.prototype,"rowModel",2);Ht([J],C1.prototype,"postConstruct",1);var b1=class extends Og{postConstruct(){if(this.setLabel("totalRows","Total Rows"),this.rowModel.getType()!=="clientSide"){M.warnOnce("agTotalRowCountComponent should only be used with the client side row model.");return}this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,X.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()}onDataChanged(){let i=this.localeService.getLocaleTextFunc(),e=i("thousandSeparator",","),t=i("decimalSeparator",".");this.setValue(M.formatNumberCommas(this.getRowCountValue(),e,t))}getRowCountValue(){let i=0;return this.rowModel.forEachLeafNode(e=>i+=1),i}init(){}refresh(){return!0}destroy(){super.destroy()}};Ht([k("rowModel")],b1.prototype,"rowModel",2);Ht([J],b1.prototype,"postConstruct",1);var Yy=class extends Og{postConstruct(){if(!this.isValidRowModel()){console.warn("AG Grid: agSelectedRowCountComponent should only be used with the client and server side row model.");return}this.setLabel("selectedRows","Selected"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-selected-row-count"),this.onRowSelectionChanged();let i=this.onRowSelectionChanged.bind(this);this.addManagedListener(this.eventService,X.EVENT_MODEL_UPDATED,i),this.addManagedListener(this.eventService,X.EVENT_SELECTION_CHANGED,i)}isValidRowModel(){let i=this.rowModel.getType();return i==="clientSide"||i==="serverSide"}onRowSelectionChanged(){let i=this.selectionService.getSelectionCount();if(i<0){this.setValue("?"),this.setDisplayed(!0);return}let e=this.localeService.getLocaleTextFunc(),t=e("thousandSeparator",","),n=e("decimalSeparator",".");this.setValue(M.formatNumberCommas(i,t,n)),this.setDisplayed(i>0)}init(){}refresh(){return!0}destroy(){super.destroy()}};Ht([k("rowModel")],Yy.prototype,"rowModel",2);Ht([k("selectionService")],Yy.prototype,"selectionService",2);Ht([J],Yy.prototype,"postConstruct",1);var ss=(()=>{let i=class p3 extends ae{constructor(){super(p3.TEMPLATE)}destroy(){super.destroy()}postConstruct(){if(!this.isValidRowModel()){console.warn("AG Grid: agAggregationComponent should only be used with the client and server side row model.");return}this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedListener(this.eventService,X.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this)),this.addManagedListener(this.eventService,X.EVENT_MODEL_UPDATED,this.onRangeSelectionChanged.bind(this))}isValidRowModel(){let t=this.rowModel.getType();return t==="clientSide"||t==="serverSide"}init(t){this.params=t}refresh(t){return this.params=t,this.onRangeSelectionChanged(),!0}setAggregationComponentValue(t,n,r){var s;let o=this.getAllowedAggregationValueComponent(t);if(M.exists(o)&&o){let a=this.localeService.getLocaleTextFunc(),l=a("thousandSeparator",","),c=a("decimalSeparator",".");o.setValue(M.formatNumberTwoDecimalPlacesAndCommas(n,l,c)),o.setDisplayed(r)}else(s=this.getAggregationValueComponent(t))==null||s.setDisplayed(!1)}getAllowedAggregationValueComponent(t){let{aggFuncs:n}=this.params;return!n||n.includes(t)?this.getAggregationValueComponent(t):null}getAggregationValueComponent(t){let n=`${t}AggregationComp`;return this[n]}onRangeSelectionChanged(){var t;let n=(t=this.rangeService)==null?void 0:t.getCellRanges(),r=0,s=0,o=0,a=null,l=null,c={};if(n&&!M.missingOrEmpty(n)&&this.rangeService)for(let h=0;h<n.length;h++){let p=n[h],m=this.rangeService.getRangeStartRow(p),g=this.rangeService.getRangeEndRow(p);for(;!(M.missing(m)||!m||this.rowPositionUtils.before(g,m)||!m||!p.columns);)p.columns.forEach(y=>{if(m===null)return;let b=this.cellPositionUtils.createId({rowPinned:m.rowPinned,column:y,rowIndex:m.rowIndex});if(c[b])return;c[b]=!0;let v=this.rowPositionUtils.getRowNode(m);if(M.missing(v))return;let S=this.valueService.getValue(y,v);M.missing(S)||S===""||(s++,!(typeof S=="object"&&"value"in S&&(S=S.value,S===""))&&(typeof S=="string"&&(S=Number(S)),typeof S=="number"&&!isNaN(S)&&(r+=S,(l===null||S>l)&&(l=S),(a===null||S<a)&&(a=S),o++)))}),m=this.cellNavigationService.getRowBelow(m)}let u=s>1,d=o>1;this.setAggregationComponentValue("count",s,u),this.setAggregationComponentValue("sum",r,d),this.setAggregationComponentValue("min",a,d),this.setAggregationComponentValue("max",l,d),this.setAggregationComponentValue("avg",r/o,d)}};return i.TEMPLATE=`<div class="ag-status-panel ag-status-panel-aggregations">
            <ag-name-value ref="avgAggregationComp"></ag-name-value>
            <ag-name-value ref="countAggregationComp"></ag-name-value>
            <ag-name-value ref="minAggregationComp"></ag-name-value>
            <ag-name-value ref="maxAggregationComp"></ag-name-value>
            <ag-name-value ref="sumAggregationComp"></ag-name-value>
        </div>`,i})();Ht([ji("rangeService")],ss.prototype,"rangeService",2);Ht([k("valueService")],ss.prototype,"valueService",2);Ht([k("cellNavigationService")],ss.prototype,"cellNavigationService",2);Ht([k("rowModel")],ss.prototype,"rowModel",2);Ht([k("cellPositionUtils")],ss.prototype,"cellPositionUtils",2);Ht([k("rowPositionUtils")],ss.prototype,"rowPositionUtils",2);Ht([ce("sumAggregationComp")],ss.prototype,"sumAggregationComp",2);Ht([ce("countAggregationComp")],ss.prototype,"countAggregationComp",2);Ht([ce("minAggregationComp")],ss.prototype,"minAggregationComp",2);Ht([ce("maxAggregationComp")],ss.prototype,"maxAggregationComp",2);Ht([ce("avgAggregationComp")],ss.prototype,"avgAggregationComp",2);Ht([J],ss.prototype,"postConstruct",1);var cX=ss,uX="31.3.4",m3={version:uX,moduleName:qe.StatusBarModule,beans:[C_],agStackComponents:[{componentName:"AgStatusBar",componentClass:lX},{componentName:"AgNameValue",componentClass:Og}],userComponents:[{componentName:"agAggregationComponent",componentClass:cX},{componentName:"agSelectedRowCountComponent",componentClass:Yy},{componentName:"agTotalRowCountComponent",componentClass:b1},{componentName:"agFilteredRowCountComponent",componentClass:C1},{componentName:"agTotalAndFilteredRowCountComponent",componentClass:y1}],dependantModules:[Tn]},dX=Object.defineProperty,hX=Object.getOwnPropertyDescriptor,mp=(i,e,t,n)=>{for(var r=n>1?void 0:n?hX(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&dX(e,t,r),r},pX="31.3.4",Cc=class extends be{constructor(){super(...arguments),this.firstRow=-1,this.lastRow=-1,this.rowCount=-1,this.rowNodesByIndex={}}ensureRowHeightsValid(i,e,t,n){return!1}init(){this.rowHeight=this.gos.getRowHeightAsNumber(),this.addManagedListener(this.eventService,X.EVENT_VIEWPORT_CHANGED,this.onViewportChanged.bind(this)),this.addManagedPropertyListener("viewportDatasource",()=>this.updateDatasource()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.updateRowHeights()})}start(){this.updateDatasource()}isLastRowIndexKnown(){return!0}destroyDatasource(){this.viewportDatasource&&(this.viewportDatasource.destroy&&this.viewportDatasource.destroy(),this.rowRenderer.datasourceChanged(),this.firstRow=-1,this.lastRow=-1)}updateDatasource(){let i=this.gos.get("viewportDatasource");i&&this.setViewportDatasource(i)}getViewportRowModelPageSize(){return this.gos.get("viewportRowModelPageSize")}getViewportRowModelBufferSize(){return this.gos.get("viewportRowModelBufferSize")}calculateFirstRow(i){let e=this.getViewportRowModelBufferSize(),t=this.getViewportRowModelPageSize(),n=i-e;return n<0?0:Math.floor(n/t)*t}calculateLastRow(i){if(i===-1)return i;let e=this.getViewportRowModelBufferSize(),t=this.getViewportRowModelPageSize(),n=i+e,r=Math.ceil(n/t)*t,s=this.rowCount-1;return Math.min(r,s)}onViewportChanged(i){let e=this.calculateFirstRow(i.firstRow),t=this.calculateLastRow(i.lastRow);(this.firstRow!==e||this.lastRow!==t)&&(this.firstRow=e,this.lastRow=t,this.purgeRowsNotInViewport(),this.viewportDatasource&&this.viewportDatasource.setViewportRange(this.firstRow,this.lastRow))}purgeRowsNotInViewport(){Object.keys(this.rowNodesByIndex).forEach(i=>{let e=parseInt(i,10);if(e<this.firstRow||e>this.lastRow){if(this.isRowFocused(e))return;delete this.rowNodesByIndex[e]}})}isRowFocused(i){let e=this.focusService.getFocusCellToUseAfterRefresh();return!e||e.rowPinned!=null?!1:e.rowIndex===i}setViewportDatasource(i){this.destroyDatasource(),this.viewportDatasource=i,this.rowCount=-1,i.init?i.init({setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)}):console.warn("AG Grid: viewport is missing init method.")}getType(){return"viewport"}getRow(i){return this.rowNodesByIndex[i]||(this.rowNodesByIndex[i]=this.createBlankRowNode(i)),this.rowNodesByIndex[i]}getRowNode(i){let e;return this.forEachNode(t=>{t.id===i&&(e=t)}),e}getRowCount(){return this.rowCount===-1?0:this.rowCount}getRowIndexAtPixel(i){return this.rowHeight!==0?Math.floor(i/this.rowHeight):0}getRowBounds(i){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*i}}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)});let i={type:X.EVENT_MODEL_UPDATED,newData:!1,newPage:!1,keepRenderedRows:!0,animate:!1};this.eventService.dispatchEvent(i)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(i){return i}isEmpty(){return this.rowCount>0}isRowsToRender(){return this.rowCount>0}getNodesInRangeForSelection(i,e){let t=M.missing(i)?0:i.rowIndex,n=e.rowIndex,r=t<this.firstRow||t>this.lastRow,s=n<this.firstRow||n>this.lastRow;if(r||s)return[];let o=[],a=t<=n?t:n,l=t<=n?n:t;for(let c=a;c<=l;c++)o.push(this.rowNodesByIndex[c]);return o}forEachNode(i){let e=0;Object.keys(this.rowNodesByIndex).forEach(t=>{let n=parseInt(t,10),r=this.rowNodesByIndex[n];i(r,e),e++})}setRowData(i){M.iterateObject(i,(e,t)=>{let n=parseInt(e,10);if(n>=this.firstRow&&n<=this.lastRow){let r=this.rowNodesByIndex[n];M.missing(r)&&(r=this.createBlankRowNode(n),this.rowNodesByIndex[n]=r),r.setDataAndId(t,n.toString())}})}createBlankRowNode(i){let e=new Wr(this.beans);return e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*i),e.setRowIndex(i),e}setRowCount(i,e=!1){if(i===this.rowCount)return;this.rowCount=i,this.eventService.dispatchEventOnce({type:X.EVENT_ROW_COUNT_READY});let t={type:X.EVENT_MODEL_UPDATED,newData:!1,newPage:!1,keepRenderedRows:e,animate:!1};this.eventService.dispatchEvent(t)}isRowPresent(i){return!!this.getRowNode(i.id)}};mp([k("rowRenderer")],Cc.prototype,"rowRenderer",2);mp([k("focusService")],Cc.prototype,"focusService",2);mp([k("beans")],Cc.prototype,"beans",2);mp([J],Cc.prototype,"init",1);mp([_i],Cc.prototype,"destroyDatasource",1);Cc=mp([De("rowModel")],Cc);var g3={version:pX,moduleName:qe.ViewportRowModelModule,rowModel:"viewport",beans:[Cc],dependantModules:[Tn]};cO(uO,M_);jt.__registerModules([dM,hM,bd,CO,n1,nR,yR,DR,RR,GR,HR,$R,A_,KR,s1,ZR,i3,zy,u3,m3,g3],!1,void 0);var li=Se({},GM);var Ec="8.47.0";var os=globalThis;function Lg(i,e,t){let n=t||os,r=n.__SENTRY__=n.__SENTRY__||{},s=r[Ec]=r[Ec]||{};return s[i]||(s[i]=e())}var qy=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var mX="Sentry Logger ",f3=["debug","info","warn","error","log","assert","trace"],v3={};function gX(i){if(!("console"in os))return i();let e=os.console,t={},n=Object.keys(v3);n.forEach(r=>{let s=v3[r];t[r]=e[r],e[r]=s});try{return i()}finally{n.forEach(r=>{e[r]=t[r]})}}function fX(){let i=!1,e={enable:()=>{i=!0},disable:()=>{i=!1},isEnabled:()=>i};return qy?f3.forEach(t=>{e[t]=(...n)=>{i&&gX(()=>{os.console[t](`${mX}[${t}]:`,...n)})}}):f3.forEach(t=>{e[t]=()=>{}}),e}var gp=Lg("logger",fX);function Rg(){return Ng(os),os}function Ng(i){let e=i.__SENTRY__=i.__SENTRY__||{};return e.version=e.version||Ec,e[Ec]=e[Ec]||{}}var vX=Object.prototype.toString;function yX(i,e){return vX.call(i)===`[object ${e}]`}function y3(i){return yX(i,"Object")}function C3(i){return!!(i&&i.then&&typeof i.then=="function")}function b3(i,e,t){try{Object.defineProperty(i,e,{value:t,writable:!0,configurable:!0})}catch{qy&&gp.log(`Failed to add non-enumerable property "${e}" to object`,i)}}var S3=1e3;function S1(){return Date.now()/S3}function CX(){let{performance:i}=os;if(!i||!i.now)return S1;let e=Date.now()-i.now(),t=i.timeOrigin==null?e:i.timeOrigin;return()=>(t+i.now())/S3}var x3=CX(),Xy,Hxe=(()=>{let{performance:i}=os;if(!i||!i.now){Xy="none";return}let e=3600*1e3,t=i.now(),n=Date.now(),r=i.timeOrigin?Math.abs(i.timeOrigin+t-n):e,s=r<e,o=i.timing&&i.timing.navigationStart,l=typeof o=="number"?Math.abs(o+t-n):e,c=l<e;return s||c?r<=l?(Xy="timeOrigin",i.timeOrigin):(Xy="navigationStart",o):(Xy="dateNow",n)})();function hl(){let i=os,e=i.crypto||i.msCrypto,t=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(t=()=>{let n=new Uint8Array(1);return e.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(t()&15)>>n/4).toString(16))}function _3(i,e={}){if(e.user&&(!i.ipAddress&&e.user.ip_address&&(i.ipAddress=e.user.ip_address),!i.did&&!e.did&&(i.did=e.user.id||e.user.email||e.user.username)),i.timestamp=e.timestamp||x3(),e.abnormal_mechanism&&(i.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(i.ignoreDuration=e.ignoreDuration),e.sid&&(i.sid=e.sid.length===32?e.sid:hl()),e.init!==void 0&&(i.init=e.init),!i.did&&e.did&&(i.did=`${e.did}`),typeof e.started=="number"&&(i.started=e.started),i.ignoreDuration)i.duration=void 0;else if(typeof e.duration=="number")i.duration=e.duration;else{let t=i.timestamp-i.started;i.duration=t>=0?t:0}e.release&&(i.release=e.release),e.environment&&(i.environment=e.environment),!i.ipAddress&&e.ipAddress&&(i.ipAddress=e.ipAddress),!i.userAgent&&e.userAgent&&(i.userAgent=e.userAgent),typeof e.errors=="number"&&(i.errors=e.errors),e.status&&(i.status=e.status)}function x1(){return hl()}function _1(){return hl().substring(16)}function w1(i,e,t=2){if(!e||typeof e!="object"||t<=0)return e;if(i&&e&&Object.keys(e).length===0)return i;let n=Se({},i);for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=w1(n[r],e[r],t-1));return n}var E1="_sentrySpan";function T1(i,e){e?b3(i,E1,e):delete i[E1]}function M1(i){return i[E1]}var bX=100,A1=class i{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:x1(),spanId:_1()}}clone(){let e=new i;return e._breadcrumbs=[...this._breadcrumbs],e._tags=Se({},this._tags),e._extra=Se({},this._extra),e._contexts=Se({},this._contexts),this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata=Se({},this._sdkProcessingMetadata),e._propagationContext=Se({},this._propagationContext),e._client=this._client,e._lastEventId=this._lastEventId,T1(e,M1(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&_3(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags=Se(Se({},this._tags),e),this._notifyScopeListeners(),this}setTag(e,t){return this._tags=dt(Se({},this._tags),{[e]:t}),this._notifyScopeListeners(),this}setExtras(e){return this._extra=Se(Se({},this._extra),e),this._notifyScopeListeners(),this}setExtra(e,t){return this._extra=dt(Se({},this._extra),{[e]:t}),this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return t===null?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;let t=typeof e=="function"?e(this):e,[n,r]=t instanceof Tc?[t.getScopeData(),t.getRequestSession()]:y3(t)?[e,e.requestSession]:[],{tags:s,extra:o,user:a,contexts:l,level:c,fingerprint:u=[],propagationContext:d}=n||{};return this._tags=Se(Se({},this._tags),s),this._extra=Se(Se({},this._extra),o),this._contexts=Se(Se({},this._contexts),l),a&&Object.keys(a).length&&(this._user=a),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),r&&(this._requestSession=r),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,T1(this,void 0),this._attachments=[],this.setPropagationContext({traceId:x1()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){let n=typeof t=="number"?t:bX;if(n<=0)return this;let r=Se({timestamp:S1()},e),s=this._breadcrumbs;return s.push(r),this._breadcrumbs=s.length>n?s.slice(-n):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:M1(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=w1(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=Se({spanId:_1()},e),this}getPropagationContext(){return this._propagationContext}captureException(e,t){let n=t&&t.event_id?t.event_id:hl();if(!this._client)return gp.warn("No client configured on scope - will not capture exception!"),n;let r=new Error("Sentry syntheticException");return this._client.captureException(e,dt(Se({originalException:e,syntheticException:r},t),{event_id:n}),this),n}captureMessage(e,t,n){let r=n&&n.event_id?n.event_id:hl();if(!this._client)return gp.warn("No client configured on scope - will not capture message!"),r;let s=new Error(e);return this._client.captureMessage(e,t,dt(Se({originalException:e,syntheticException:s},n),{event_id:r}),this),r}captureEvent(e,t){let n=t&&t.event_id?t.event_id:hl();return this._client?(this._client.captureEvent(e,dt(Se({},t),{event_id:n}),this),n):(gp.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}},Tc=A1;function w3(){return Lg("defaultCurrentScope",()=>new Tc)}function E3(){return Lg("defaultIsolationScope",()=>new Tc)}var P1=class{constructor(e,t){let n;e?n=e:n=new Tc;let r;t?r=t:r=new Tc,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){let t=this._pushScope(),n;try{n=e(t)}catch(r){throw this._popScope(),r}return C3(n)?n.then(r=>(this._popScope(),r),r=>{throw this._popScope(),r}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function fp(){let i=Rg(),e=Ng(i);return e.stack=e.stack||new P1(w3(),E3())}function SX(i){return fp().withScope(i)}function xX(i,e){let t=fp();return t.withScope(()=>(t.getStackTop().scope=i,e(i)))}function T3(i){return fp().withScope(()=>i(fp().getIsolationScope()))}function M3(){return{withIsolationScope:T3,withScope:SX,withSetScope:xX,withSetIsolationScope:(i,e)=>T3(e),getCurrentScope:()=>fp().getScope(),getIsolationScope:()=>fp().getIsolationScope()}}function A3(i){let e=Ng(i);return e.acs?e.acs:M3()}function D1(){let i=Rg();return A3(i).getIsolationScope()}function Zy(i){D1().setTags(i)}function zX(i,e){if(i&1&&(C(0,"li",11),H(1,"svg-icon",12)(2,"span",13),x()),i&2){let t=e.$implicit,n=P(4);_(),F("iconName",n.icons.CircleSmall),_(),F("innerHTML",t,Sf)}}function WX(i,e){if(i&1&&(C(0,"li",6),H(1,"svg-icon",7)(2,"svg-icon",8),C(3,"span",9),A(4),x(),C(5,"ul",10),St(6,zX,3,2,"li",11,zr),x()()),i&2){let t=e.$implicit,n=P(3);_(),F("iconName",n.icons.CircleSmall),_(),F("iconName",n.icons.CircleSmall),_(2),Re(t.title),_(2),xt(t.changes)}}function $X(i,e){if(i&1&&(C(0,"h6",4),A(1),x(),C(2,"ul",5),St(3,WX,8,3,"li",6,zr),x()),i&2){let t=e.$implicit,n=e.$index,r=P(2);_(),Re(r.releaseNoteService.desktopTitles[n]),_(2),xt(t)}}function KX(i,e){if(i&1){let t=ne();C(0,"div",0)(1,"div",1),St(2,$X,5,1,null,null,_2),C(4,"div",2),V("click",function(){z(t);let r=P();return W(r.openReleaseHistory())}),A(5,"\u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u0646\u0633\u062E\u0647\u200C\u0647\u0627"),x(),C(6,"button",3),V("click",function(){z(t);let r=P();return W(r.close())}),A(7," \u0645\u062A\u0648\u062C\u0647 \u0634\u062F\u0645 "),x()()()}if(i&2){let t=P();_(2),xt(t.releaseNoteService.desktopUpdateLists)}}var P3=(()=>{let e=class e{constructor(n,r){this.releaseNoteService=n,this.sidePanelServiceService=r,this.icons=Fe,this.showNewVersion=Ce(this.releaseNoteService.showNewVersion$)}openReleaseHistory(){this.sidePanelServiceService.openSidePanelFromRoute({sidePanel:Ee.ChangeHistory}),this.close()}close(){this.releaseNoteService.closeReleaseNote()}};e.\u0275fac=function(r){return new(r||e)(st(r0),st(Tr))},e.\u0275cmp=ge({type:e,selectors:[["release-notes"]],decls:1,vars:1,consts:[[1,"position-fixed","full-offset","d-flex","align-items-center","justify-content-center"],[1,"bg-principal","m-2","p-4","rounded","shadow-lg","text-dark","position-relative",2,"overflow-y","auto","max-height","70%"],[1,"text-primary","cup","py-2","mb-2",3,"click"],["data-cy","release-note-confirm-btn",1,"btn","btn-lg","d-block","w-100","btn-success","mt-auto","text-light",3,"click"],[1,"text-warning"],[1,"list-unstyled","ps-2","mt-3","update-list"],[1,"mt-2"],["width","12","height","12",1,"me-1","text-warning",2,"margin-top","3px",3,"iconName"],["width","12","height","12",1,"me-1","text-warning",3,"iconName"],[1,"text-body"],[1,"list-unstyled","ps-4","update-list","mb-4"],[1,"d-flex","mt-2"],["width","12","height","12",1,"me-2","text-warning",2,"margin-top","3px",3,"iconName"],[1,"text-body",3,"innerHTML"]],template:function(r,s){r&1&&Z(0,KX,8,0,"div",0),r&2&&q(s.showNewVersion()?0:-1)},dependencies:[Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var jX=["noteComponentRef"],YX=()=>[o6],qX=i=>({"d-inline-block":i}),XX=i=>({"d-none":i});function ZX(i,e){if(i&1){let t=ne();C(0,"div",3)(1,"svg-icon",4),V("click",function(){z(t);let r=P();return W(r.back())}),x(),C(2,"h6",5),A(3," \u06CC\u0627\u062F\u062F\u0627\u0634\u062A\u200C\u0647\u0627\u06CC "),C(4,"span",6),V("click",function(){z(t);let r=P();return W(r.activeStock())}),A(5),x()()(),C(6,"div",7)(7,"svg-icon",8),V("click",function(){z(t);let r=P();return W(r.closeToolbar())}),x(),H(8,"svg-icon",9),C(9,"div",10)(10,"div",11),V("click",function(){z(t);let r=P();return W(r.setIsMultiSelect(!0))}),H(11,"svg-icon",12),A(12," \u062D\u0630\u0641\u200C \u06AF\u0631\u0648\u0647\u06CC "),x()()()}if(i&2){let t=P();_(),F("iconName",t.icons.ChevronRight),_(4),Re(t.isinName()),_(2),F("iconName",t.icons.Close)("ngClass",de(7,qX,t.isMultiSelect())),_(),F("iconName",t.icons.MenuVertical)("ngClass",de(9,XX,t.isMultiSelect())),_(3),F("iconName",t.icons.ListSelect)}}function QX(i,e){if(i&1){let t=ne();C(0,"div",2)(1,"div",13)(2,"svg-icon",4),V("click",function(){z(t);let r=P();return W(r.backToMenu())}),x(),C(3,"h6",14),A(4,"\u06CC\u0627\u062F\u062F\u0627\u0634\u062A\u200C\u0647\u0627"),x()(),C(5,"div",15)(6,"svg-icon",16),V("click",function(){z(t);let r=P();return W(r.setIsNewSearch(!0))}),x()()()}if(i&2){let t=P();_(2),F("iconName",t.icons.ChevronRight),_(4),F("iconName",t.icons.NoteAdd)}}function JX(i,e){if(i&1){let t=ne();C(0,"note-comp",17,0),Tf("noteActiveIsinChange",function(r){z(t);let s=P();return Ef(s.isin,r)||(s.isin=r),W(r)}),x()}if(i&2){let t=P();wf("noteActiveIsin",t.isin)}}var D3=(()=>{let e=class e{constructor(){this.activeSymbolService=ee(Bo),this.sidePanelServiceService=ee(Tr),this.symbolService=ee(Ll),this.noteEventService=ee(mb),this.noteComponent=$t.required("noteComponentRef"),this.menuSelectEvent=it(),this.icons=Fe,this.isin=xf(),this.isinName=pe(""),this.newSearchSignal=Ce(this.noteEventService.on(Jc.isNewSearch)),this.isMultiSelect=Ce(this.noteEventService.on(Jc.multiSelectChanged),{initialValue:!1}),_r(()=>Uc(this,null,function*(){let n=yield this.symbolService.getSymbol(this.isin());this.isinName.set(n?.symbolName)}))}backToMenu(){this.newSearchSignal()?this.back():(this.menuSelectEvent.emit(Ee.Menu),this.noteEventService.dispatch(Jc.isNewSearch,!1))}back(){this.isin.set(""),this.noteEventService.dispatch(Jc.isNewSearch,!1),this.setIsMultiSelect(!1)}setIsMultiSelect(n){this.noteEventService.dispatch(Jc.multiSelectChanged,n)}setIsNewSearch(n){this.noteEventService.dispatch(Jc.isNewSearch,n)}activeStock(){this.activeSymbolService.setActiveIsin(this.isin()),this.sidePanelServiceService.openSidePanelFromRoute({sidePanel:Ee.None})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["d-note-management"]],viewQuery:function(r,s){r&1&&Kt(s.noteComponent,jX,5),r&2&&si()},inputs:{isin:[1,"isin"]},outputs:{menuSelectEvent:"menuSelectEvent",isin:"isinChange"},features:[bl([mb])],decls:6,vars:1,consts:[["noteComponentRef",""],[1,"py-3","px-2","bg-principal","bg-principal-4x-dark","shadow-sm","position-relative","z-2","d-flex","justify-content-between"],[1,"d-flex","align-items-center","justify-content-between","w-100"],[1,"d-flex","align-items-center"],["width","36","height","36",1,"cup","text-secondary",3,"click","iconName"],[1,"mb-0"],[1,"text-primary","fw-bold","cup",3,"click"],["ngbDropdown","",1,"left-section-header"],["width","24","height","24",1,"d-none","cup","pe-2",3,"click","iconName","ngClass"],["width","24","height","24","data-cy","order-list-dropdown","id","dropdownBasic1","ngbDropdownToggle","",1,"pe-2","cup",3,"iconName","ngClass"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"position-fixed","text-start","dropdown-menu-left"],["data-cy","order-list-show-toolbar-btn","ngbDropdownItem","","id","order-list-item-1-div",1,"cup",3,"click"],["width","20","height","20","id","order-list-item-1-span",1,"me-2","cup","text-muted",3,"iconName"],[1,"d-flex","gap-1","align-items-center"],[1,"mb-0","text-body"],[1,"d-flex","align-items-center","text-muted"],["width","24","height","24","data-cy","add-new-note-btn",1,"p-2","cup",3,"click","iconName"],[1,"h-100","overflow-hidden",3,"noteActiveIsinChange","noteActiveIsin"]],template:function(r,s){r&1&&(C(0,"div",1),Z(1,ZX,13,11)(2,QX,7,2,"div",2),x(),Z(3,JX,2,1),Dn(4,3,YX),kn()),r&2&&(_(),q(s.isin()?1:2))},dependencies:[Oe,Ke,Ve,s0,Il,kl,Dl,Pl],encapsulation:2,changeDetection:0});let i=e;return i})();var k3=(()=>{let e=class e{constructor(){this.icons=Fe,this.menuSelectEvent=it(),this.agreementsComponent=$t(g0),this.unleashService=ee(Xn),this.title=oi(()=>this.agreementsComponent()?.selectedContract()?.title||"\u062A\u0648\u0627\u0641\u0642\u200C\u0646\u0627\u0645\u0647\u200C\u0647\u0627 \u0648 \u0642\u0631\u0627\u0631\u062F\u0627\u062F\u0647\u0627")}back(){let n=this.agreementsComponent();n.selectedAgreement()?n.onResetAgreement():n.selectedContract()?n.onResetContract():this.menuSelectEvent.emit(Ee.Menu)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["d-agreement-management"]],viewQuery:function(r,s){r&1&&Kt(s.agreementsComponent,g0,5),r&2&&si()},outputs:{menuSelectEvent:"menuSelectEvent"},decls:6,vars:2,consts:[[1,"d-flex","align-items-center","justify-content-between","py-3","px-2","bg-principal","bg-principal-4x-dark","shadow-sm","position-relative","z-2"],[1,"d-flex","align-items-center"],["width","36","height","36",1,"cup","text-secondary",3,"click","iconName"],[1,"mb-0","text-body"],["agreement","",1,"d-flex","flex-column","h-10","0","overflow-auto"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"div",1)(2,"svg-icon",2),V("click",function(){return s.back()}),x(),C(3,"h6",3),A(4),x()()(),H(5,"div",4)),r&2&&(_(2),F("iconName",s.icons.ChevronRight),_(2),Re(s.title()))},dependencies:[Oe,g0,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var Mc=(()=>{let e=class e extends Ma{constructor(){super(...arguments),this.accountService=ee(Er),this.successCashFlow=new r2,this.hasChildren$=new pf(null)}getChildren(){return this.httpService.get(this.mtsPath+this.apiUrls.tbs+"cash-flow/children").pipe(Be(n=>n.sort((r,s)=>r.firstName<s.firstName?-1:r.firstName>s.firstName?1:0)),Be(n=>n.map(r=>(r.totalAmount=r.buyPower+r.fundAmount+r.portfolioAmount,r.totalAmount===0?(r.buyPowerPercent=0,r.portfolioAmountPercent=0,r.fundAmountPercent=0):(r.buyPowerPercent=Math.round(r.buyPower/r.totalAmount*100),r.portfolioAmountPercent=Math.round(r.portfolioAmount/r.totalAmount*100),r.fundAmountPercent=100-r.buyPowerPercent-r.portfolioAmountPercent,r.fundAmountPercent<0&&(r.fundAmountPercent=0),r.fundAmountPercent>100&&(r.fundAmountPercent=100)),r))))}hasChildren(){return this.hasChildren$.value?this.hasChildren$:this.httpService.getCached("children-"+this.accountService.userAccountInfo?.value?.customerIsin,this.mtsPath+this.apiUrls.tbs+"cash-flow/has-children").pipe(Je(n=>{this.hasChildren$.next(n)}))}cashFlow(n){return this.httpService.post(this.mtsPath+this.apiUrls.tbs+"cash-flow",{body:n})}};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=Mo(e)))(s||e)}})(),e.\u0275prov=Hi({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var I3=[{value:1e6,label:"1",unit:"\u0645\u06CC\u0644\u06CC\u0648\u0646"},{value:1e7,label:"10",unit:"\u0645\u06CC\u0644\u06CC\u0648\u0646"},{value:5e7,label:"50",unit:"\u0645\u06CC\u0644\u06CC\u0648\u0646"},{value:1e8,label:"100",unit:"\u0645\u06CC\u0644\u06CC\u0648\u0646"},{value:5e8,label:"500",unit:"\u0645\u06CC\u0644\u06CC\u0648\u0646"},{value:1e9,label:"1",unit:"\u0645\u06CC\u0644\u06CC\u0627\u0631\u062F"}];var eZ=["myForm"],tZ=(i,e)=>e.value,iZ=()=>({selected:!0}),nZ=i=>({"pe-none":i});function rZ(i,e){if(i&1){let t=ne();C(0,"svg-icon",29),V("click",function(){z(t);let r=P();return W(r.closeForm())}),x()}if(i&2){let t=P();F("iconName",t.icons.Close)}}function sZ(i,e){i&1&&(C(0,"div",21),A(1,"\u0645\u0628\u0644\u063A \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F"),x())}function oZ(i,e){i&1&&(C(0,"div",21),A(1,"\u062D\u062F\u0627\u0642\u0644 \u0645\u0628\u0644\u063A \u062F\u0647 \u0647\u0632\u0627\u0631 \u062A\u0648\u0645\u0627\u0646 \u0645\u06CC\u200C\u0628\u0627\u0634\u062F"),x())}function aZ(i,e){if(i&1&&(C(0,"p"),A(1),x()),i&2){let t=P();_(),ye(" ",t.valueInPersian()," ")}}function lZ(i,e){if(i&1){let t=ne();C(0,"div",30),V("click",function(){let r=z(t).$implicit,s=P();return W(s.onSelectSuggestionHandler(r.value))}),C(1,"span",31)(2,"span",9),A(3),x(),C(4,"div",10)(5,"span"),A(6),x(),C(7,"span",32),A(8,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()()()}if(i&2){let t=e.$implicit;_(3),Re(t.label),_(3),Re(t.unit+" ")}}function cZ(i,e){if(i&1&&H(0,"svg-icon",28),i&2){let t=P();F("iconName",t.icons.Loading)}}var Qy=(()=>{let e=class e{constructor(){this.icons=Fe,this.myForm=$t("myForm"),this.isMobile=rt(void 0),this.data=rt(void 0),this.closeOverlay=it(),this.MoneySuggestion=I3,this.moneyService=ee(_s),this.accountService=ee(Er),this.childrenService=ee(Mc),this.fb=ee(Yn),this.notificationService=ee(pi),this.overlayService=ee(Id),this.destroyRef$=ee(xr),this.customerTitle=Ce(this.accountService?.userAccountInfo$.pipe(Be(n=>n.customerTitle))),this.loadingCashFlowButton=pe(!1),this.form=this.fb.group({value:["",[ii.required,ii.min(1e5)]]}),this.value=Ce(this.form.get("value").valueChanges.pipe(ms(this.destroyRef$))),this.valueInPersian=oi(()=>this.value()&&Ed(+this.value()?.toString().replace(/,/g,"")))}submit(){this.form.valid&&(this.loadingCashFlowButton.set(!0),this.childrenService.cashFlow({amount:+this.form.value.value,childNationalCode:this.data().nationalCode,createdFrom:3}).pipe(Je(()=>{this.notificationService.alert("\u0627\u0646\u062A\u0642\u0627\u0644 \u0648\u062C\u0647 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0646\u062C\u0627\u0645 \u0634\u062F",_t.success),this.childrenService.successCashFlow.next(!0),this.closeForm()}),Pi(()=>(this.notificationService.alert("\u0627\u0646\u062A\u0642\u0627\u0644 \u0648\u062C\u0647 \u0645\u0648\u0641\u0642\u06CC\u062A \u0622\u0645\u06CC\u0632 \u0646\u0628\u0648\u062F",_t.danger),l2(()=>new Error))),pn(()=>{this.loadingCashFlowButton.set(!1)})).subscribe())}closeForm(){this.isMobile()?this.overlayService.hideOverlay():this.closeOverlay.emit(),this.form.patchValue({value:null})}onSelectSuggestionHandler(n){this.form.get("value").setValue(n.toString())}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["lib-children-cash-flow"]],viewQuery:function(r,s){r&1&&Kt(s.myForm,eZ,5),r&2&&si()},inputs:{isMobile:[1,"isMobile"],data:[1,"data"]},outputs:{closeOverlay:"closeOverlay"},decls:60,vars:27,consts:[["myForm","ngForm"],[1,"position-relative","text-center","mb-4"],[1,"fw-bold","fs-6"],["width","24","height","24",1,"position-absolute","end-0","cup",3,"iconName"],[1,"d-flex","flex-column","overflow-hidden","gap-2","was-validated"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-secondary"],[1,"d-flex","justify-content-between","align-items-center","px-3","rounded-2","bg-principal-3x","bg-principal-2x-dark"],[1,"d-flex","flex-column","py-2"],[1,"fw-bold"],[1,"text-secondary","small"],[1,"d-flex","ms-auto","align-self-stretch","align-items-end","py-2"],[1,"fs-6"],[1,"d-flex"],[1,"d-flex","justify-content-between","align-items-center","bg-principal-3x","bg-principal-2x-dark","px-3","rounded-2"],[1,"ms-auto","d-flex","align-self-stretch","align-items-end","py-2","gap-1"],[1,"d-flex","justify-content-between"],[3,"ngSubmit","formGroup"],[1,"form-control","form-control-lg","d-flex","align-items-center","input-index","mb-1",3,"ngClass"],["id","value","valueChangeEvent","keyup",1,"ps-3","flex-grow-1",3,"focusInInit","form"],[1,"text-secondary","ps-1","d-flex","justify-content-center","align-items-center"],[1,"invalid-feedback"],[1,"mt-2"],[1,"mb-1","text-secondary","text-nowrap","mb-1"],[1,"d-flex","gap-1","flex-wrap"],[1,"bg-principal-2x","bg-principal-3x-dark","bg-principal-hover","p-1","rounded","cup","text-nowrap"],["type","submit",1,"btn","btn-lg","btn-success","d-block","w-100","mt-3",3,"ngClass"],[1,"text-center"],["title","\u0627\u0646\u062A\u0642\u0627\u0644 \u0648\u062C\u0647","width","18","height","18",1,"spin",3,"iconName"],["width","24","height","24",1,"position-absolute","end-0","cup",3,"click","iconName"],[1,"bg-principal-2x","bg-principal-3x-dark","bg-principal-hover","p-1","rounded","cup","text-nowrap",3,"click"],[1,"text-body","flex-grow-1","text-end","d-flex","gap-1","px-1"],[1,"position-relative",2,"top","2px"]],template:function(r,s){if(r&1){let o=ne();C(0,"div",1)(1,"span",2),A(2),x(),Z(3,rZ,1,1,"svg-icon",3),x(),C(4,"div",4)(5,"div",5)(6,"span",6),A(7,"\u0627\u0646\u062A\u0642\u0627\u0644 \u0627\u0632"),x()(),C(8,"div",7)(9,"div",8)(10,"span",9),A(11),x(),C(12,"span",10),A(13,"\u0645\u0648\u062C\u0648\u062F\u06CC \u0642\u0627\u0628\u0644 \u0627\u0646\u062A\u0642\u0627\u0644:"),x()(),C(14,"div",11)(15,"div")(16,"span",12),A(17),fe(18,"number"),fe(19,"positiveNumber"),x(),C(20,"span",6),A(21,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()()(),C(22,"div",13)(23,"span",6),A(24,"\u0628\u0647"),x()(),C(25,"div",14)(26,"div",8)(27,"span",9),A(28),x(),C(29,"span",10),A(30,"\u0645\u0648\u062C\u0648\u062F\u06CC:"),x()(),C(31,"div",15)(32,"span",12),A(33),fe(34,"number"),fe(35,"positiveNumber"),x(),C(36,"span",6),A(37,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()(),C(38,"div",16)(39,"span",6),A(40,"\u0645\u0628\u0644\u063A"),x()(),C(41,"form",17,0),V("ngSubmit",function(){return z(o),W(s.submit())}),C(43,"div",18),H(44,"custom-number-box",19),C(45,"span",20),A(46,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()(),Z(47,sZ,2,0,"div",21)(48,oZ,2,0,"div",21)(49,aZ,2,1,"p"),C(50,"div",22)(51,"div",23),A(52,"\u062A\u0631\u0627\u06A9\u0646\u0634\u200C\u0647\u0627\u06CC \u067E\u0631 \u062A\u06A9\u0631\u0627\u0631:"),x(),C(53,"div",24),St(54,lZ,9,2,"div",25,tZ),x()(),C(56,"button",26)(57,"span",27),A(58," \u0627\u0646\u062A\u0642\u0627\u0644 \u0648\u062C\u0647 "),x(),Z(59,cZ,1,1,"svg-icon",28),x()()()}if(r&2){let o,a,l,c,u=ki(42);_(2),ye(" \u0627\u0646\u062A\u0642\u0627\u0644 \u0648\u062C\u0647 \u0628\u0647 ",((o=s.data())==null?null:o.firstName)+" "+((o=s.data())==null?null:o.lastName),""),_(),q(s.isMobile()?-1:3),_(8),ye("\u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u06AF\u0632\u0627\u0631\u06CC ",s.customerTitle(),""),_(6),Re(Te(19,18,Te(18,16,s.moneyService.calculatorBrokerAccountBalance()))),_(11),ye("\u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u06AF\u0632\u0627\u0631\u06CC ",s.data().firstName+" "+s.data().lastName,""),_(5),Re(Te(35,22,Te(34,20,s.data().buyPower))),_(8),F("formGroup",s.form),_(2),js("form-invalid",u.submitted&&((a=s.form.get("value"))==null?null:a.invalid)),F("ngClass",qs(24,iZ)),_(),F("focusInInit",!0)("form",s.form),_(3),q(u.submitted&&(!((l=s.form.get("value"))==null||l.errors==null)&&l.errors.required)?47:u.submitted&&(!((l=s.form.get("value"))==null||l.errors==null)&&l.errors.min)?48:-1),_(2),q(s.valueInPersian()&&(!u.submitted||(c=s.form.get("value"))!=null&&c.valid)?49:-1),_(5),xt(s.MoneySuggestion),_(2),F("ngClass",de(25,nZ,s.loadingCashFlowButton())),_(3),q(s.loadingCashFlowButton()?59:-1)}},dependencies:[Oe,Ke,yi,ys,Fn,fs,gs,nn,vs,Zn,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var I1=i=>({width:i});function uZ(i,e){if(i&1&&(C(0,"div",7)(1,"div",15),H(2,"div",16),x(),C(3,"div",15),H(4,"div",17),x(),C(5,"div",15),H(6,"div",18),x()()),i&2){let t=P();_(),F("ngbTooltip","\u0645\u0627\u0646\u062F\u0647 \u0642\u0627\u0628\u0644 \u0628\u0631\u062F\u0627\u0634\u062A")("ngStyle",de(6,I1,t.data().buyPowerPercent+"%")),_(2),F("ngbTooltip","\u0627\u0631\u0632\u0634 \u067E\u0631\u062A\u0641\u0648\u06CC")("ngStyle",de(8,I1,t.data().portfolioAmountPercent+"%")),_(2),F("ngbTooltip","\u0627\u0631\u0632\u0634 \u0635\u0646\u062F\u0648\u0642\u200C\u0647\u0627")("ngStyle",de(10,I1,t.data().fundAmountPercent+"%"))}}var F3=(()=>{let e=class e{constructor(){this.isMobile=rt.required(),this.data=rt.required(),this.overlayService=ee(Id),this.showOverlay=it()}openCashFlow(n){let r=this.isMobile();r?this.overlayService.showOverlay({component:Qy,input:[{inputName:"isMobile",inputValue:r},{inputName:"data",inputValue:this.data()}],option:{componentName:"ChildrenCashFlowComponent"}}):this.showOverlay.emit({data:this.data(),event:n})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["child"]],inputs:{isMobile:[1,"isMobile"],data:[1,"data"]},outputs:{showOverlay:"showOverlay"},decls:50,vars:23,consts:[[1,"bg-principal","bg-principal-3x-dark","rounded","mb-2","p-3"],[1,"fs-6","fw-bold","mb-2"],[1,"bg-principal-2x","rounded","p-3","mb-2","fw-bold"],[1,"d-flex","justify-content-between","align-items-center","gap-2"],[1,"flex-grow-1"],[1,"fs-6"],[1,"small","text-secondary","text-opacity-75"],[1,"progress-stacked","mt-2"],[1,"border","border-principal-6x-dark","border-principal-3x","rounded-3","d-flex","justify-content-between","align-items-center","gap-2","p-2","mb-2"],[1,"flex-shrink-0","rounded-3","bg-global","text-white","d-flex","align-items-center","justify-content-center","small",2,"width","36px","height","36px"],[1,"text-end"],[1,"flex-shrink-0","rounded-3","bg-global-700","text-white","d-flex","align-items-center","justify-content-center","small",2,"width","36px","height","36px"],[1,"flex-shrink-0","rounded-3","bg-primary","text-white","d-flex","align-items-center","justify-content-center","small",2,"width","36px","height","36px"],[1,"d-flex","justify-content-center","gap-2","mt-3"],["type","button",1,"btn","btn-outline-success","px-5",3,"click"],[1,"progress","h-100",3,"ngbTooltip","ngStyle"],[1,"progress-bar","bg-global"],[1,"progress-bar","bg-global-700"],[1,"progress-bar","bg-primary"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"div",1),A(2),x(),C(3,"div",2)(4,"div",3)(5,"div",4),A(6,"\u0627\u0631\u0632\u0634 \u06A9\u0644 \u062F\u0627\u0631\u0627\u06CC\u06CC"),x(),C(7,"div")(8,"span",5),A(9),fe(10,"priceNumber"),x(),C(11,"span",6),A(12,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()(),Z(13,uZ,7,12,"div",7),x(),C(14,"div",8)(15,"div",9),A(16),fe(17,"priceNumber"),x(),C(18,"div",4),A(19,"\u0645\u0627\u0646\u062F\u0647 \u0642\u0627\u0628\u0644 \u0628\u0631\u062F\u0627\u0634\u062A"),x(),C(20,"div",10),A(21),fe(22,"priceNumber"),C(23,"span",6),A(24,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()(),C(25,"div",8)(26,"div",11),A(27),fe(28,"priceNumber"),x(),C(29,"div",4),A(30,"\u0627\u0631\u0632\u0634 \u067E\u0631\u062A\u0641\u0648\u06CC"),x(),C(31,"div",10),A(32),fe(33,"priceNumber"),C(34,"span",6),A(35,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()(),C(36,"div",8)(37,"div",12),A(38),fe(39,"priceNumber"),x(),C(40,"div",4),A(41,"\u0627\u0631\u0632\u0634 \u0635\u0646\u062F\u0648\u0642\u200C\u0647\u0627"),x(),C(42,"div",10),A(43),fe(44,"priceNumber"),C(45,"span",6),A(46,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()(),C(47,"div",13)(48,"button",14),V("click",function(a){return s.openCashFlow(a)}),A(49," \u0627\u0646\u062A\u0642\u0627\u0644 \u0648\u062C\u0647 \u0628\u0647 \u0641\u0631\u0632\u0646\u062F "),x()()()),r&2&&(_(2),Re(s.data().firstName+" "+s.data().lastName),_(7),Re(Te(10,9,s.data().totalAmount)),_(4),q(s.data().totalAmount?13:-1),_(3),ye(" ",Te(17,11,s.data().buyPowerPercent)+"%"," "),_(5),ye(" ",Te(22,13,s.data().buyPower)," "),_(6),ye(" ",Te(28,15,s.data().portfolioAmountPercent)+"%"," "),_(5),ye(" ",Te(33,17,s.data().portfolioAmount)," "),_(6),ye(" ",Te(39,19,s.data().fundAmountPercent)+"%"," "),_(5),ye(" ",Te(44,21,s.data().fundAmount)," "))},dependencies:[Oe,Sl,PM,rA],encapsulation:2,changeDetection:0});let i=e;return i})();var dZ=(i,e)=>e.date+e.balance,hZ=i=>({"pe-none":i});function pZ(i,e){if(i&1&&(C(0,"div",1),H(1,"svg-icon",2),C(2,"p"),A(3,"\u062F\u0631 \u062D\u0627\u0644 \u062F\u0631\u06CC\u0627\u0641\u062A \u0627\u0637\u0644\u0627\u0639\u0627\u062A"),x()()),i&2){let t=P(2);_(),F("iconName",t.icons.Loading)}}function mZ(i,e){if(i&1){let t=ne();C(0,"div",1)(1,"p"),A(2,"\u062E\u0637\u0627 \u062F\u0631 \u062F\u0631\u06CC\u0627\u0641\u062A \u0627\u0637\u0644\u0627\u0639\u0627\u062A"),x(),C(3,"button",3),V("click",function(){z(t);let r=P(2);return W(r.getHistory())}),A(4,"\u062A\u0644\u0627\u0634 \u0645\u062C\u062F\u062F"),x()()}}function gZ(i,e){if(i&1&&(C(0,"div",0),Z(1,pZ,4,1,"div",1)(2,mZ,5,0,"div",1),x()),i&2){let t=P();_(),q(t.loadingChildrenHistory()?1:t.retryLoadingChildrenHistory()?2:-1)}}function fZ(i,e){if(i&1&&(C(0,"div",7)(1,"div",9),A(2),C(3,"span",10),A(4),fe(5,"jdateLong"),x()(),C(6,"div",11),A(7),fe(8,"number"),C(9,"span",12),A(10,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()()),i&2){let t=e.$implicit;_(2),ye(" ",t.childName," "),_(2),Re(ci(5,3,t.date,!0)),_(3),ye(" ",Te(8,6,t.debtor)," ")}}function vZ(i,e){if(i&1&&H(0,"svg-icon",14),i&2){let t=P(3);F("iconName",t.icons.Loading)}}function yZ(i,e){if(i&1){let t=ne();C(0,"div",8)(1,"button",13),V("click",function(){z(t);let r=P(2);return W(r.loadMoreHandler())}),A(2," \u0646\u0645\u0627\u06CC\u0634 \u0628\u06CC\u0634\u062A\u0631 "),Z(3,vZ,1,1,"svg-icon",14),x()()}if(i&2){let t=P(2);_(),F("ngClass",de(2,hZ,t.loadingMore())),_(2),q(t.loadingMore()?3:-1)}}function CZ(i,e){if(i&1&&(C(0,"div",4),H(1,"svg-icon",5),A(2," \u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u0627\u0646\u062A\u0642\u0627\u0644 \u0648\u062C\u0647 "),x(),C(3,"div",6),St(4,fZ,11,8,"div",7,dZ),x(),Z(6,yZ,4,4,"div",8)),i&2){let t,n=P();_(),F("iconName",n.icons.History),_(3),xt((t=n.transactions())==null?null:t.transactions),_(2),q(n.hasMore()?6:-1)}}var O3=(()=>{let e=class e{constructor(){this.icons=Fe,this.notificationService=ee(pi),this.transactionService=ee(iA),this.childrenService=ee(Mc),this.destroyRef=ee(xr),this.loadingChildrenHistory=pe(!0),this.retryLoadingChildrenHistory=pe(!1),this.transactions=pe(null),this.loadingMore=pe(!1),this.hasMore=pe(!1),this.loadOption={page:0,size:15,accountHistoryType:1,description:"\u062D\u0633\u0627\u0628 \u0641\u0631\u0632\u0646\u062F",voucherType:0}}ngOnInit(){this.getHistory(),this.childrenService.successCashFlow.pipe(ms(this.destroyRef)).subscribe(n=>{n&&this.getHistory()})}getHistory(){this.loadingChildrenHistory.set(!0),this.transactionService.get(dt(Se({},this.loadOption),{page:0,size:15})).pipe(Pi(()=>{this.loadingChildrenHistory.set(!1),this.retryLoadingChildrenHistory.set(!0)}),Be(n=>(n.transactions.map(r=>(r.childName=this.getChildNameFromDescription(r.description),r)),n))).subscribe(n=>{this.loadingChildrenHistory.set(!1),this.retryLoadingChildrenHistory.set(!1),this.transactions.set(n),this.checkForMore()})}loadMoreHandler(){this.loadingMore.set(!0),this.loadOption=dt(Se({},this.loadOption),{page:this.loadOption.page+1}),this.transactionService.get(this.loadOption).pipe(Pi(()=>{this.loadingMore.set(!1),this.notificationService.alert("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0642\u0631\u0627\u0631\u06CC \u0627\u0631\u062A\u0628\u0627\u0637 \u0628\u0627 \u0633\u0631\u0648\u0631",_t.danger)}),Be(n=>(n.transactions.map(r=>(r.childName=this.getChildNameFromDescription(r.description),r)),n))).subscribe(n=>{this.loadingMore.set(!1),this.transactions.update(r=>dt(Se({},r),{transactions:[...r.transactions,...n.transactions]})),this.checkForMore()})}checkForMore(){this.transactions().totalRecord>this.transactions().transactions.length?this.hasMore.set(!0):this.hasMore.set(!1)}getChildNameFromDescription(n){let r=n.split(" ");return r.slice(r.lastIndexOf("[")+1,r.lastIndexOf("\u0628\u0627")).join(" ")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["children-history"]],decls:2,vars:1,consts:[[1,"d-flex","flex-column","align-items-center","mb-4","text-muted"],[1,"text-center"],["width","36","height","36",1,"spin",3,"iconName"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"text-secondary","px-3","mb-2"],["width","24","height","24",1,"",3,"iconName"],[1,"list-group","list-group-flush"],[1,"list-group-item","bg-principal","bg-principal-4x-dark","bg-principal-3x-dark-mobile","bg-principal-hover","p-2","px-3","d-flex","align-items-center","justify-content-between","gap-2"],[1,"py-3","text-center"],[1,"flex-grow-1"],[1,"small","text-secondary","text-opacity-75","d-block"],[1,"text-body","text-end"],[1,"text-secondary","d-block","small"],["type","button",1,"btn","btn-outline-primary",3,"click","ngClass"],["width","18","height","18",1,"spin","ms-1",3,"iconName"]],template:function(r,s){if(r&1&&Z(0,gZ,3,1,"div",0)(1,CZ,7,2),r&2){let o;q(s.loadingChildrenHistory()||s.retryLoadingChildrenHistory()?0:(o=s.transactions())!=null&&o.transactions&&((o=s.transactions())==null?null:o.transactions.length)>0?1:-1)}},dependencies:[Oe,Ke,yi,Ad,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var bZ=(i,e)=>e.nationalCode,SZ=i=>({backdropShow:i}),xZ=(i,e)=>({"fund-overlay--show":i,"":e});function _Z(i,e){i&1&&H(0,"div",0)}function wZ(i,e){if(i&1){let t=ne();C(0,"child",6),V("showOverlay",function(r){z(t);let s=P(2);return W(s.openOverlay(r))}),x()}if(i&2){let t=e.$implicit,n=P(2);F("isMobile",n.isMobile())("data",t)}}function EZ(i,e){if(i&1&&(C(0,"div",5),H(1,"svg-icon",7),A(2," \u0627\u0637\u0644\u0627\u0639\u0627\u062A\u06CC \u062C\u0647\u062A \u0646\u0645\u0627\u06CC\u0634 \u0648\u062C\u0648\u062F \u0646\u062F\u0627\u0631\u062F "),x()),i&2){let t=P(2);_(),F("iconName",t.icons.AccountError)}}function TZ(i,e){if(i&1){let t=ne();C(0,"div",3),V("click",function(){z(t);let r=P();return W(r.showOverlay()&&r.closeOverlay())}),St(1,wZ,1,2,"child",4,bZ,!1,EZ,3,1,"div",5),H(4,"children-history"),x()}if(i&2){let t=P();F("ngClass",de(2,SZ,t.showOverlay())),_(),xt(t.children())}}function MZ(i,e){if(i&1){let t=ne();C(0,"div",2)(1,"lib-children-cash-flow",8),V("closeOverlay",function(){z(t);let r=P();return W(r.closeOverlay())}),x()()}if(i&2){let t=P();F("ngClass",zi(3,xZ,t.showOverlay(),!t.showOverlay())),_(),F("isMobile",t.isMobile())("data",t.data())}}var Jy=(()=>{let e=class e{constructor(){this.icons=Fe,this.isMobile=rt.required(),this.childrenService=ee(Mc),this.notificationService=ee(pi),this.destroyRef=ee(xr),this.showOverlay=pe(!1),this.data=pe(null),this.loadData=pe(!1),this.loadData$=Ft(this.loadData),this.loading=pe(!0),this.children=Ce(this.loadData$.pipe(Jt(()=>this.childrenService.getChildren().pipe(Pi(()=>(this.notificationService.alert("\u062E\u0637\u0627 \u062F\u0631 \u062E\u0648\u0627\u0646\u062F\u0646 \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0641\u0631\u0632\u0646\u062F\u0627\u0646",_t.danger),Ji(null))),pn(()=>this.loading.set(!1))))))}ngOnInit(){this.childrenService.successCashFlow.pipe(ms(this.destroyRef)).subscribe(n=>{n&&this.reloadData()})}openOverlay(n){n.event.stopPropagation(),this.showOverlay.set(!0),this.data.set(n.data)}reloadData(){this.loadData.update(n=>!n),this.loading.set(!0)}closeOverlay(){this.showOverlay()&&this.showOverlay.set(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["children"]],inputs:{isMobile:[1,"isMobile"]},decls:3,vars:2,consts:[[1,"d-flex","flex-column","h-100","loading","position-relative"],[1,"fund-backdrop","h-100",3,"ngClass"],[1,"fund-overlay","bg-principal","bg-principal-4x-dark","rounded-top-4","p-3","shadow-lg","z-2",3,"ngClass"],[1,"fund-backdrop","h-100",3,"click","ngClass"],[1,"p-2","d-block",3,"isMobile","data"],[1,"d-flex","flex-column","h-100","justify-content-center","align-items-center","gap-2"],[1,"p-2","d-block",3,"showOverlay","isMobile","data"],["width","48","height","48",1,"text-secondary",3,"iconName"],[3,"closeOverlay","isMobile","data"]],template:function(r,s){r&1&&Z(0,_Z,1,0,"div",0)(1,TZ,5,4,"div",1)(2,MZ,2,6,"div",2),r&2&&(q(s.loading()?0:1),_(2),q(!s.isMobile()&&s.showOverlay()?2:-1))},dependencies:[Oe,Ke,F3,Qy,O3,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var AZ=i=>({spin:i}),L3=(()=>{let e=class e{constructor(){this.icons=Fe,this.childrenComponent=$t(Jy),this.menuSelectEvent=it()}back(){this.menuSelectEvent.emit(Ee.Menu)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["d-children-management"]],viewQuery:function(r,s){r&1&&Kt(s.childrenComponent,Jy,5),r&2&&si()},outputs:{menuSelectEvent:"menuSelectEvent"},decls:7,vars:6,consts:[[1,"d-flex","align-items-center","justify-content-between","py-3","px-2","bg-principal","bg-principal-4x-dark","shadow-sm","position-relative","z-2"],[1,"d-flex","align-items-center","justify-content-between"],["width","36","height","36",1,"cup",3,"click","iconName"],[1,"mb-0","text-body"],["width","24","height","24","title","\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F",1,"cup","px-2",3,"click","iconName","ngClass"],[1,"h-100","overflow-auto",3,"isMobile"]],template:function(r,s){if(r&1&&(C(0,"div",0)(1,"div",1)(2,"svg-icon",2),V("click",function(){return s.back()}),x(),C(3,"h6",3),A(4,"\u062D\u0633\u0627\u0628 \u0641\u0631\u0632\u0646\u062F\u0627\u0646"),x()(),C(5,"svg-icon",4),V("click",function(){let a;return(a=s.childrenComponent())==null?null:a.reloadData()}),x()(),H(6,"children",5)),r&2){let o;_(2),F("iconName",s.icons.ChevronRight),_(3),F("iconName",s.icons.refresh)("ngClass",de(4,AZ,(o=s.childrenComponent())==null?null:o.loading())),_(),F("isMobile",!1)}},dependencies:[Oe,Ke,Jy,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var PZ=()=>[import("./chunk-MDC7EKQP.js").then(i=>i.MarketViewOrbisComponent)];function DZ(i,e){i&1&&H(0,"market-view-orbis",4),i&2&&F("isMobile",!1)}var R3=(()=>{let e=class e{constructor(){this.icons=Fe,this.menuSelectEvent=it()}backToMenu(){this.menuSelectEvent.emit(Ee.Menu)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["d-market-view-orbis-management"]],outputs:{menuSelectEvent:"menuSelectEvent"},decls:8,vars:1,consts:[[1,"p-2","d-flex","justify-content-between","align-items-center","py-3","sector-header","flex-shrink-0","bg-principal","bg-principal-4x-dark"],[1,"d-flex","align-items-center",3,"click"],["width","36","height","36",1,"cup","text-secondary",3,"iconName"],[1,"mb-0"],[1,"d-flex","flex-column","h-100","flex-grow-1","overflow-hidden",3,"isMobile"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"div",1),V("click",function(){return s.backToMenu()}),H(2,"svg-icon",2),C(3,"h6",3),A(4,"\u0646\u0645\u0627\u06CC \u0628\u0627\u0632\u0627\u0631"),x()()(),Z(5,DZ,1,1),Dn(6,5,PZ),kn()),r&2&&(_(2),F("iconName",s.icons.ChevronRight))},dependencies:[Oe,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var iC="last-bank-gateway-redirect-url",N3=6,eC=class{constructor(e){Object.assign(this,e)}get icon(){switch(this.providerId){case 1:return"asan-pardakht";case 2:return"behpardakht-mellat";case 3:return"pep-pasargad";case 4:return"sep-saman";case 5:return"pec-parsian";case 6:return"sadad-melli";default:return null}}};var tC=class{constructor(e){Object.assign(this,e)}get icon2(){switch(this.cashFlowState){case Vg.ReviewMode:return{icon:"transaction-clock",class:"text-warning"};case Vg.Deleted:return{icon:"transaction-error",class:"text-danger"};case Vg.CancelByCustomer:return{icon:"transaction-close",class:"text-danger"};case Vg.Done:return{icon:"transaction-check",class:"text-success"};default:return null}}get type(){switch(this.bankInterfaceTransactionType){case Bg.PaymentGateCardToCardDraft:return"\u062F\u0631\u06AF\u0627\u0647";case Bg.MofidCard:return"\u0645\u0641\u06CC\u062F \u06A9\u0627\u0631\u062A";default:return"\u062B\u0628\u062A \u0641\u06CC\u0634"}}},V3="\u0648\u0627\u0631\u06CC\u0632 \u0627\u0632 \u0637\u0631\u06CC\u0642 \u0627\u06CC\u0646 \u062F\u0631\u06AF\u0627\u0647\u060C \u062A\u0646\u0647\u0627 \u0628\u0627 \u06A9\u0627\u0631\u062A \u0628\u0627\u0646\u06A9\u06CC \u0645\u062A\u0639\u0644\u0642 \u0628\u0647 \u062E\u0648\u062F \u06A9\u0627\u0631\u0628\u0631 \u0627\u0645\u06A9\u0627\u0646 \u067E\u0630\u06CC\u0631 \u0627\u0633\u062A.";var Vg=function(i){return i[i.Unknown=0]="Unknown",i[i.ReviewMode=1]="ReviewMode",i[i.CancelByCustomer=2]="CancelByCustomer",i[i.Deleted=3]="Deleted",i[i.ActionMode=4]="ActionMode",i[i.Done=6]="Done",i}(Vg||{}),Bg=function(i){return i[i.BankManualReceipt=1]="BankManualReceipt",i[i.BankSatnaDraft=2]="BankSatnaDraft",i[i.BankCheque=3]="BankCheque",i[i.BankDraft=4]="BankDraft",i[i.BankPayaDraft=5]="BankPayaDraft",i[i.InternetBankManualDraft=6]="InternetBankManualDraft",i[i.InternetBankCardToCardDraft=7]="InternetBankCardToCardDraft",i[i.InternetBankSatnaDraft=8]="InternetBankSatnaDraft",i[i.InternetBankPayaDraft=9]="InternetBankPayaDraft",i[i.ATMCardToCardDraft=10]="ATMCardToCardDraft",i[i.PosCardToCardDraft=11]="PosCardToCardDraft",i[i.MobileBankManualDraft=12]="MobileBankManualDraft",i[i.MobileBankCardToCardDraft=13]="MobileBankCardToCardDraft",i[i.PaymentGateCardToCardDraft=14]="PaymentGateCardToCardDraft",i[i.BankChequeCoded=15]="BankChequeCoded",i[i.MofidCard=16]="MofidCard",i}(Bg||{});function B3(i){return{1:qn.bank_gateway_Ap,2:qn.bank_gateway_Mellat,3:qn.bank_gateway_Pasargad,4:qn.bank_gateway_saman,5:qn.bank_gateway_Parsian,6:qn.bank_gateway_Sadad}[i]}var yr=function(i){return i.cancel="cancel",i.success="success",i.error="error",i.canceledParam="Canceled",i.successParam="Success",i.errorParam="Error",i}(yr||{});var Us=(()=>{let e=class e extends Ma{constructor(){super(...arguments),this.unleashService=ee(Xn),this.moneyReceiptHistorySubject=new pf(!1),this.moneyReceiptHistory$=this.moneyReceiptHistorySubject.asObservable(),this.hasSadadUnleash=Ce(this.unleashService.isFeatureEnabled$(qn.bank_gateway_Sadad))}setMoneyReceiptRegister(){this.moneyReceiptHistorySubject.next(!0)}getBankGateways(){return this.httpService.getCached("BankGateways",`${this.mtsPath+this.apiUrls.ipg}bank-gateways`,{guestUserRestriction:!0}).pipe(Be(n=>n?.map(r=>new eC(Se({},r)))),gt(n=>!!n&&n.length>0),Be(n=>n.filter(r=>r.providerId!==N3||this.hasSadadUnleash())),Be(n=>n.sort((r,s)=>r.orderNumber-s.orderNumber)),Be(n=>this.selectGatewayRandomly(n)))}selectGatewayRandomly(n){let r=n.filter(a=>!!a.weightPercent).map(a=>a.weightPercent).reduce((a,l)=>a+l,0),s=RM(1,r),o=n.map((a,l,c)=>a.weightPercent+c.slice(0,l).reduce((u,d)=>u+d.weightPercent,0)).findIndex(a=>a>=s);return o>=0&&(n[o].selected=!0),n}addReceiptBill(n){return this.httpService.post(this.mtsPath+this.apiUrls.easy+"receipt/receipt-bill",{body:{receiptBill:n},guestUserRestriction:!0})}getBrokerBankAccounts(){return this.cachedBrokerAccount$||(this.cachedBrokerAccount$=this.httpService.getCached("brokerAccounts",this.mtsPath+this.apiUrls.easy+"receipt/broker-bank-accounts").pipe(Be(n=>n?.map(r=>(r.description=`${r.bankName} - ${r.branchName} ${r.accountNumber}`,r))),f2(1))),this.cachedBrokerAccount$}customersAgentAge(n){return this.httpService.get(this.mtsPath+this.apiUrls.ipg+`customer-agent?nationalCode=${n}`).pipe(Be(r=>r.data))}getMoneyReceipts(n){return this.httpService.post(this.mtsPath+this.apiUrls.easy+"receipt/receipts",{body:n,guestUserRestriction:!0}).pipe(Be(r=>r.map(s=>new tC(s))))}getGatewayRedirectionData(n,r){let s=r?`${this.environment.setting.mtsPath+"ipg/api/gateway_token"}`:`${this.environment.setting.mtsPath+"ipg/api/easy-bank-gateway-token/"}`;return this.httpService.post(`${s}`,{body:n,guestUserRestriction:!0})}cancelReceipt(n){return this.httpService.post(`${this.mtsPath+this.apiUrls.easy}payment/cancel-payment`,{body:{id:n},guestUserRestriction:!0})}};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=Mo(e)))(s||e)}})(),e.\u0275prov=Hi({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var G3="\u0635\u062F \u0645\u06CC\u0644\u06CC\u0648\u0646 \u062A\u0648\u0645\u0627\u0646";var Mn={moreThanValidAmountWarningText:`  \u062C\u0647\u062A \u0648\u0627\u0631\u06CC\u0632 \u0645\u0628\u0627\u0644\u063A \u0628\u06CC\u0634\u062A\u0631 \u0627\u0632 ${G3}\u060C \u0644\u0637\u0641\u0627 \u067E\u0633 \u0627\u0632 \u0648\u0627\u0631\u06CC\u0632 \u0645\u0628\u0644\u063A \u0645\u0648\u0631\u062F
            \u0646\u0638\u0631 \u0628\u0647 \u06CC\u06A9\u06CC \u0627\u0632 \u062D\u0633\u0627\u0628 \u0647\u0627\u06CC \u06A9\u0627\u0631\u06AF\u0632\u0627\u0631\u06CC \u0645\u0641\u06CC\u062F\u060C \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0648\u0627\u0631\u06CC\u0632 \u0631\u0627 \u062F\u0631 \u0627\u06CC\u0646 \u0642\u0633\u0645\u062A
            \u062B\u0628\u062A \u0646\u0645\u0627\u06CC\u06CC\u062F.`,brokerAccountDDDefaultText:"\u0628\u0647 \u06A9\u062F\u0627\u0645  \u062D\u0633\u0627\u0628 \u0648\u0627\u0631\u06CC\u0632  \u06A9\u0631\u062F\u0647\u200C\u0627\u06CC\u062F\u061F",inputFileDefaultLabel:"\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u062A\u0635\u0648\u06CC\u0631 \u0641\u06CC\u0634 \u0648\u0627\u0631\u06CC\u0632\u06CC",errorMessage:"\u0627\u0646\u062C\u0627\u0645 \u062A\u0631\u0627\u06A9\u0646\u0634 \u0628\u0627 \u062E\u0637\u0627 \u0631\u0648\u0628\u0631\u0648 \u0634\u062F\u060C \u062F\u0631 \u0635\u0648\u0631\u062A \u06A9\u0633\u0631 \u0648\u062C\u0647\u060C \u0645\u0628\u0644\u063A \u06A9\u0633\u0631 \u0634\u062F\u0647 \u0639\u0648\u062F\u062A \u062F\u0627\u062F\u0647 \u062E\u0648\u0627\u0647\u062F \u0634\u062F",successMessage:"\u0648\u0627\u0631\u06CC\u0632 \u0648\u062C\u0647 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0646\u062C\u0627\u0645 \u0634\u062F",amountValidationText:`\u0633\u0642\u0641 \u0645\u0628\u0644\u063A \u0648\u0627\u0631\u06CC\u0632 ${G3} \u0627\u0633\u062A. `,useful_card_activation:"\u0627\u0628\u062A\u062F\u0627 \u0646\u0633\u0628\u062A \u0628\u0647 \u0641\u0639\u0627\u0644\u200C\u0633\u0627\u0632\u06CC \u0645\u0641\u06CC\u062F \u06A9\u0627\u0631\u062A \u062E\u0648\u062F \u0627\u0642\u062F\u0627\u0645 \u06A9\u0646\u06CC\u062F",not_enough_inventory_mofid_card:"\u0645\u0648\u062C\u0648\u062F\u06CC \u0645\u0641\u06CC\u062F \u06A9\u0627\u0631\u062A \u06A9\u0627\u0641\u06CC \u0646\u0645\u06CC\u200C\u0628\u0627\u0634\u062F",tryAgain:"\u062F\u0648\u0628\u0627\u0631\u0647 \u062A\u0644\u0627\u0634 \u06A9\u0646\u06CC\u062F",transfer_successful:"\u0627\u0646\u062A\u0642\u0627\u0644 \u0645\u0648\u0641\u0642\u06CC\u062A \u0622\u0645\u06CC\u0632 \u0628\u0648\u062F",enter_date:"\u062A\u0627\u0631\u06CC\u062E \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F",success:"\u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062B\u0628\u062A \u06AF\u0631\u062F\u06CC\u062F.",formatError:"\u0641\u0631\u0645\u062A \u0641\u0627\u06CC\u0644 \u0645\u0648\u0631\u062F \u0642\u0628\u0648\u0644 \u0646\u0645\u06CC \u0628\u0627\u0634\u062F",sizeError:"\u0627\u0646\u062F\u0627\u0632\u0647 \u0639\u06A9\u0633 \u0628\u0627\u06CC\u062F \u06A9\u0645\u062A\u0631 \u0627\u0632 25 \u0645\u06AF\u0627\u0628\u0627\u06CC\u062A \u0628\u0627\u0634\u062F",upload_deposit:"\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u062A\u0635\u0648\u06CC\u0631 \u0641\u06CC\u0634 \u0648\u0627\u0631\u06CC\u0632\u06CC",copy_in_memory:" \u062F\u0631 \u062D\u0627\u0641\u0638\u0647 \u06A9\u067E\u06CC \u0634\u062F",copy_in_memory2:"\u06A9\u067E\u06CC \u062F\u0631 \u062D\u0627\u0641\u0638\u0647",make_transaction:"\u0627\u0646\u062C\u0627\u0645 \u062A\u0631\u0627\u06A9\u0646\u0634 \u0628\u0627 \u062E\u0637\u0627 \u0631\u0648\u0628\u0631\u0648 \u0634\u062F\u060C \u062F\u0631 \u0635\u0648\u0631\u062A \u06A9\u0633\u0631 \u0648\u062C\u0647\u060C \u0645\u0628\u0644\u063A \u06A9\u0633\u0631 \u0634\u062F\u0647 \u0639\u0648\u062F\u062A \u062F\u0627\u062F\u0647 \u062E\u0648\u0627\u0647\u062F \u0634\u062F",success_deposit:"\u0648\u0627\u0631\u06CC\u0632 \u0648\u062C\u0647 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0646\u062C\u0627\u0645 \u0634\u062F",attention:"\u06A9\u0627\u0631\u0628\u0631 \u06AF\u0631\u0627\u0645\u06CC\u060C \u0644\u0637\u0641\u0627 \u0642\u0628\u0644 \u0627\u0632 \u0648\u0627\u0631\u06CC\u0632 \u0648\u062C\u0647 \u0628\u0647 \u0645\u0648\u0627\u0631\u062F \u0632\u06CC\u0631 \u062A\u0648\u062C\u0647 \u0641\u0631\u0645\u0627\u06CC\u06CC\u062F:",attention2:"\u0627\u0632 \u0648\u0627\u06AF\u0630\u0627\u0631\u06CC \u0686\u06A9 \u0628\u0647 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u06AF\u0632\u0627\u0631\u06CC \u0645\u0641\u06CC\u062F \u0627\u06A9\u06CC\u062F\u0627 \u062E\u0648\u062F\u062F\u0627\u0631\u06CC \u0646\u0645\u0627\u06CC\u06CC\u062F.",bank:"\u0628\u0627\u0646\u06A9 ",lengthNumberAmount:20},vp=function(i){return i[i.Instant=0]="Instant",i[i.Deposit=1]="Deposit",i}(vp||{}),Dc=function(i){return i[i.WalletNeedsReverify=0]="WalletNeedsReverify",i[i.WalletNeedsActivate=1]="WalletNeedsActivate",i[i.WalletIsActive=2]="WalletIsActive",i}(Dc||{}),U3=[{value:1e6,label:"1",unit:"\u0645\u06CC\u0644\u06CC\u0648\u0646"},{value:1e7,label:"10",unit:"\u0645\u06CC\u0644\u06CC\u0648\u0646"},{value:5e7,label:"50",unit:"\u0645\u06CC\u0644\u06CC\u0648\u0646"},{value:1e8,label:"100",unit:"\u0645\u06CC\u0644\u06CC\u0648\u0646"},{value:5e8,label:"500",unit:"\u0645\u06CC\u0644\u06CC\u0648\u0646"},{value:1e9,label:"1",unit:"\u0645\u06CC\u0644\u06CC\u0627\u0631\u062F"}],H3=["IMAGE/TIFF","IMAGE/PNG","IMAGE/JPEG","IMAGE/JPG","IMAGE/TIF"],z3=25e3*1024,Gg=function(i){return i.ReceiptPerformDateInvalid="Receipt perform date should be less than today",i.cashflow="Too many cashflow requests",i.NullValueInColumn="Cannot insert the value NULL into column 'FileName', table 'TBSFileData.ref.DocumentStore'; column does not allow nulls. INSERT fails.The statement has been terminated.",i.UnknownError="error",i}(Gg||{}),W3={[Gg.ReceiptPerformDateInvalid]:"\u062A\u0627\u0631\u06CC\u062E \u0646\u0645\u06CC\u200C\u062A\u0648\u0627\u0646\u062F \u0628\u0632\u0631\u06AF\u062A\u0631 \u0627\u0632 \u0631\u0648\u0632 \u062C\u0627\u0631\u06CC \u0628\u0627\u0634\u062F",[Gg.NullValueInColumn]:"\u062A\u0635\u0648\u06CC\u0631 \u0641\u06CC\u0634 \u0628\u0627\u06CC\u062F \u0622\u067E\u0644\u0648\u062F \u0634\u0648\u062F",[Gg.UnknownError]:"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u0641\u06CC\u0634 \u0648\u0627\u0631\u06CC\u0632\u06CC",[Gg.cashflow]:"\u062F\u0631\u062E\u0648\u0627\u0633\u062A  \u0628\u06CC\u0634 \u0627\u0632 \u062D\u062F \u0645\u062C\u0627\u0632"},Pc=function(i){return i.Error="error",i.Success="success",i.Cancel="cancel",i}(Pc||{}),nC=function(i){return i.Error="Error",i.Success="Success",i.Cancel="Canceled",i}(nC||{}),F1={[Pc.Error]:"\u0645\u0634\u06A9\u0644\u06CC \u062F\u0631 \u0627\u0646\u062C\u0627\u0645 \u062A\u0631\u0627\u06A9\u0646\u0634 \u067E\u06CC\u0634 \u0622\u0645\u062F\u0647 \u0627\u0633\u062A.",[Pc.Success]:"\u0648\u0627\u0631\u06CC\u0632 \u0648\u062C\u0647 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0646\u062C\u0627\u0645 \u0634\u062F."};var kZ=["customFile"],IZ=["myForm"],FZ=["dp"],OZ=(i,e)=>e.accountNumber,$3=i=>({selected:i}),LZ=i=>({"pe-none":i}),RZ=i=>({"rotate-180":i});function NZ(i,e){if(i&1&&(C(0,"p",10),A(1),x()),i&2){let t=P();_(),ye(" ",t.receiptAmountPersian()," ")}}function VZ(i,e){i&1&&(C(0,"div",11),A(1,"\u0645\u0628\u0644\u063A \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F"),x())}function BZ(i,e){i&1&&(C(0,"span",7),A(1,"\u0634\u0645\u0627\u0631\u0647 \u0641\u06CC\u0634"),x())}function GZ(i,e){i&1&&(C(0,"div",11),A(1,"\u0634\u0645\u0627\u0631\u0647 \u0641\u06CC\u0634 \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F"),x())}function UZ(i,e){i&1&&(C(0,"div",11),A(1,"\u062D\u062F\u0627\u06A9\u062B\u0631 \u0637\u0648\u0644 \u0634\u0645\u0627\u0631\u0647 \u0641\u06CC\u0634 25 \u06A9\u0627\u0631\u0627\u06A9\u062A\u0631 \u0645\u06CC \u0628\u0627\u0634\u062F"),x())}function HZ(i,e){i&1&&(C(0,"div",11),A(1,"\u0634\u0645\u0627\u0631\u0647 \u062D\u0633\u0627\u0628 \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"),x())}function zZ(i,e){if(i&1){let t=ne();C(0,"button",37),V("click",function(){let r=z(t).$implicit,s=P();return W(s.changeSelectedBrokerAccount(r))}),C(1,"span",38)(2,"span",39),A(3),x(),C(4,"span")(5,"span",40),A(6,"\u0634\u0639\u0628\u0647"),x(),A(7),x()(),C(8,"span",38)(9,"span",40),A(10,"\u0634\u0645\u0627\u0631\u0647 \u062D\u0633\u0627\u0628"),x(),C(11,"span"),A(12),x()()()}if(i&2){let t=e.$implicit;_(3),ye("",t.bankName," "),_(4),ye(" ",t.branchName," "),_(5),ye(" ",t.accountNumber," ")}}function WZ(i,e){if(i&1&&H(0,"svg-icon",29),i&2){let t=P();F("iconName",t.icons.Loading)}}var K3=(()=>{let e=class e{constructor(){this.fileInput=$t("customFile"),this.myForm=$t("myForm"),this.validityDateJalaliDatePicker=$t("dp"),this.isMobile=rt(!1),this.keyboardAction=it(),this.notificationService=ee(pi),this.fb=ee(Yn),this.moneyReceiptService=ee(Us),this.compressImageService=ee(sA),this.destroyRef$=ee(xr),this.loadingDepositPostMethod=pe(!1),this.receiptAmountPersian=pe(""),this.uploadFileLabel=pe(Mn.upload_deposit),this.isAlertCollapsed=pe(!0),this.brokerAccountDDText=pe(Mn.brokerAccountDDDefaultText),this.currentInputSelectedNameDeposit=pe(null),this.bankAccounts=Ce(this.moneyReceiptService.getBrokerBankAccounts()),this.showPlaceholderForBankDocumentNumber=!0,this.fileToUpload=null,this.icons=Fe,this.StaticMoneyConstModel=Mn,this.form=this.fb.group({Amount:["",ii.required],BankDocumentNumber:["",[ii.required,ii.minLength(1),ii.maxLength(25)]],AccountNumber:["",ii.required],File:[""]}),this.submitted=pe(!1),this.removeSemicolon=n=>n?.toString().replace(/,/g,"")}postReceiptHandler(){if(this.submitted.set(!0),!this.form.valid)return;let n=this.validityDateJalaliDatePicker()?.getValue();if(!n){this.notificationService.alert(Mn.enter_date,_t.warning);return}this.loadingDepositPostMethod.set(!0);let r=this.form.value,s={amount:r.Amount,bankDocumentNumber:r.BankDocumentNumber.toString(),accountNumber:r.AccountNumber,performDate:wd.persianDateToGoDate(n),fileContent:this.inputFileAsString?.slice(this.inputFileAsString.indexOf(",")+1),fileExtension:this.fileToUpload?.type};this.moneyReceiptService.addReceiptBill(s).pipe(pn(()=>{this.loadingDepositPostMethod.set(!1)}),Pi(()=>this.handleError())).subscribe({next:o=>{o?.isSuccessful?this.handleSuccessResponse():this.notificationService.alert(this.errorTranslate(o.tadbirError??"error"),_t.danger)},error:o=>this.handleErrorResponse(o)})}errorTranslate(n){return W3[n]}handleFileInput(n){let r=n.files;if(r&&r.length>0){if(this.fileToUpload=r.item(0),!H3.includes(this.fileToUpload.type.toUpperCase())){this.notificationService.alert(Mn.formatError,_t.warning),this.clearFileUpload();return}if(this.fileToUpload.size>z3){this.notificationService.alert(Mn.sizeError,_t.warning),this.clearFileUpload();return}this.uploadFileLabel.set(this.fileToUpload.name);let s=new FileReader;this.fileToUpload.size>500*1024?this.compressImageService.compress(this.fileToUpload).pipe(hs(1)).subscribe(o=>{s.onloadend=()=>{let a=s.result;this.inputFileAsString=a},s.readAsDataURL(o)}):(s.onloadend=()=>{let o=s.result;this.inputFileAsString=o},s.readAsDataURL(this.fileToUpload))}}handleSuccessResponse(){this.submitted.set(!1),this.moneyReceiptService.setMoneyReceiptRegister(),this.brokerAccountDDText.set(Mn.brokerAccountDDDefaultText),this.form.reset(),this.myForm()?.resetForm(),this.clearFileUpload(),this.notificationService.alert(Mn.success,_t.success)}handleErrorResponse(n){this.notificationService.alert(n,_t.danger)}clearFileUpload(){this.fileInput().nativeElement.value="",this.uploadFileLabel.set(Mn.upload_deposit),this.fileToUpload=null}onAmountTap(){this.currentInputSelectedNameDeposit.set("Amount"),this.keyboardAction.emit({controlId:"Amount",formGroup:this.form})}onBankDocumentNumberTap(){this.closeKeyboardHandler(),this.currentInputSelectedNameDeposit.set("BankDocumentNumber")}changeSelectedBrokerAccount(n){this.form.get("AccountNumber").setValue(n.number),this.brokerAccountDDText.set(n.description)}get toggleCollapseText(){return this.isAlertCollapsed()===!0?"\u0628\u06CC\u0634\u062A\u0631":"\u06A9\u0645\u062A\u0631"}collapseOrShow(){this.isAlertCollapsed.set(!this.isAlertCollapsed())}ngOnInit(){this.setPriceInPersian(),this.onAmountTap(),this.changeInput()}closeKeyboardHandler(){this.currentInputSelectedNameDeposit.set(null),this.keyboardAction.emit({keyboardClose:!0})}changeInput(){this.form.controls.BankDocumentNumber.valueChanges.subscribe(n=>{this.showPlaceholderForBankDocumentNumber=!n})}setPriceInPersian(){this.form.get("Amount").valueChanges.pipe(ms(this.destroyRef$)).subscribe(n=>{let r=this.removeSemicolon(n);this.receiptAmountPersian.set(r>0?Ed(+r):"")})}handleError(){return this.notificationService.alert("\u0639\u0645\u0644\u06CC\u0627\u062A \u0628\u0627 \u062E\u0637\u0627 \u0645\u0648\u0627\u062C\u0647 \u0634\u062F",_t.danger),Ji(null)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["lib-deposit-receipt"]],viewQuery:function(r,s){r&1&&(Kt(s.fileInput,kZ,5),Kt(s.myForm,IZ,5),Kt(s.validityDateJalaliDatePicker,FZ,5)),r&2&&si(3)},inputs:{isMobile:[1,"isMobile"]},outputs:{keyboardAction:"keyboardAction"},decls:74,vars:39,consts:[["myForm","ngForm"],["dp",""],["customFile",""],[1,"p-3","flex-shrink-0"],[1,"was-validated",3,"ngSubmit","formGroup"],[1,"form-group","mb-2"],[1,"form-control","input-index","d-flex","align-items-center",3,"ngClass"],[1,"text-secondary","position-absolute",2,"pointer-events","none"],["data-cy","amount-custom-number-box","id","Amount","valueChangeEvent","keyup",1,"ps-3","flex-grow-1",3,"tap","touchstart","form","focusInInit","readOnly"],[1,"text-secondary","d-flex","justify-content-center","align-items-center","ps-2"],[1,"mt-1"],[1,"invalid-feedback"],[1,"form-group","d-flex","gap-1","mb-2","position-relative",2,"z-index","100"],[1,"d-flex","flex-column","flex-grow-1"],[1,"form-control",3,"ngClass"],["data-cy","bank-document-number","formControlName","BankDocumentNumber","id","BankDocumentNumber","type","text","inputmode","numeric","numbersOnly","","minlength","1","maxlength","25",1,"BankDocumentNumber",3,"tap"],[2,"height","35.19px",3,"focusin","required","defaultValue","isMobile"],["ngbDropdown","","dir","rtl","placement","bottom-right",1,"mb-2"],["data-cy","bank-accounts-dd","type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"form-select","text-start",3,"focusin"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"w-100","shadow","rounded"],[1,"list-group","list-group-flush"],["data-cy","account-number-item","type","button","ngbDropdownItem","",1,"list-group-item","list-group-item-action","border-principal-3x-dark-mobile","d-block",2,"padding","var(--bs-list-group-item-padding-y) var(--bs-list-group-item-padding-x)"],[1,"form-group"],[1,"custom-file","form-control"],["type","file","id","customFile","formControlName","File","accept","image/png,image/jpeg,image/jpg,image/tif,image/tiff",1,"custom-file-input","opacity-0",3,"change","focusin"],["for","customFile",1,"custom-file-label"],[1,"text-muted","small","mb-0","mt-1","mb-2"],["data-cy","deposit-receipt-btn","type","submit",1,"btn","btn-success","d-block","w-100",3,"focusin","ngClass"],[1,"me-1"],["width","18","height","18","title","\u067E\u0631\u062F\u0627\u062E\u062A",1,"spin",3,"iconName"],[1,"mt-3",3,"ngClass"],[1,"text-justify"],[1,"ps-4"],[1,"text-danger"],[1,"text-decoration"],[1,"collapse-content-more","text-center","text-primary","cup",3,"click"],["width","18","height","18",3,"iconName","ngClass"],["data-cy","account-number-item","type","button","ngbDropdownItem","",1,"list-group-item","list-group-item-action","border-principal-3x-dark-mobile","d-block",2,"padding","var(--bs-list-group-item-padding-y) var(--bs-list-group-item-padding-x)",3,"click"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bold"],[1,"text-muted"]],template:function(r,s){if(r&1){let o=ne();C(0,"div",3)(1,"form",4,0),V("ngSubmit",function(){return z(o),W(s.postReceiptHandler())}),C(3,"div",5)(4,"div",6)(5,"span",7),A(6,"\u0645\u0628\u0644\u063A"),x(),C(7,"custom-number-box",8),V("tap",function(){return z(o),W(s.onAmountTap())})("touchstart",function(){return z(o),W(s.onAmountTap())}),x(),C(8,"span",9),A(9,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()(),Z(10,NZ,2,1,"p",10)(11,VZ,2,0,"div",11),x(),C(12,"div",12)(13,"div",13)(14,"div",14),Z(15,BZ,2,0,"span",7),C(16,"input",15),V("tap",function(){return z(o),W(s.onBankDocumentNumberTap())}),x()(),Z(17,GZ,2,0,"div",11)(18,UZ,2,0,"div",11),x(),C(19,"div")(20,"custom-date-picker",16,1),V("focusin",function(){return z(o),W(s.closeKeyboardHandler())}),x()()(),C(22,"div",17)(23,"button",18),V("focusin",function(){return z(o),W(s.closeKeyboardHandler())}),A(24),x(),Z(25,HZ,2,0,"div",11),C(26,"div",19)(27,"div",20),St(28,zZ,13,3,"button",21,OZ),x()()(),C(30,"div",22)(31,"div",23)(32,"input",24,2),V("change",function(l){return z(o),W(s.handleFileInput(l.target))})("focusin",function(){return z(o),W(s.closeKeyboardHandler())}),x(),C(34,"label",25),A(35),x()(),C(36,"p",26),A(37,"\u0641\u0631\u0645\u062A \u0647\u0627\u06CC \u0642\u0627\u0628\u0644 \u0642\u0628\u0648\u0644\u060C tif\u060Ctiff\u060C jpeg\u060C jpg \u0648 png \u0645\u06CC \u0628\u0627\u0634\u062F."),x()(),C(38,"button",27),V("focusin",function(){return z(o),W(s.closeKeyboardHandler())}),C(39,"span",28),A(40,"\u062B\u0628\u062A"),x(),Z(41,WZ,1,1,"svg-icon",29),x()(),C(42,"div",30)(43,"p",31)(44,"b"),A(45),x()(),C(46,"ol",32)(47,"li",31)(48,"span",33),A(49),x(),A(50," \u062F\u0631 \u0635\u0648\u0631\u062A \u062B\u0628\u062A \u0648\u0627\u0631\u06CC\u0632\u06CC \u0646\u0627\u0634\u06CC \u0627\u0632 \u0686\u06A9 \u0648\u0627\u06AF\u0630\u0627\u0631 \u0634\u062F\u0647 "),C(51,"span",33),A(52,'"\u0628\u0647 \u0647\u06CC\u0686 \u0639\u0646\u0648\u0627\u0646"'),x(),A(53," \u062D\u0633\u0627\u0628 \u0634\u0645\u0627 \u0634\u0627\u0631\u0698 \u0646\u0645\u06CC\u200C\u06AF\u0631\u062F\u062F \u0648 \u0645\u0628\u0644\u063A \u0645\u0630\u06A9\u0648\u0631 \u0628\u0647 \u062D\u0633\u0627\u0628 \u0635\u0627\u062F\u0631\u06A9\u0646\u0646\u062F\u0647 \u0686\u06A9 \u0639\u0648\u062F\u062A \u062F\u0627\u062F\u0647 \u0645\u06CC\u200C\u0634\u0648\u062F. "),x(),C(54,"li",31),A(55," \u0644\u0627\u0632\u0645 \u0627\u0633\u062A \u0646\u0627\u0645 \u0635\u0627\u062D\u0628 \u062D\u0633\u0627\u0628 \u0628\u0627\u0646\u06A9\u06CC (\u0645\u0628\u062F\u0627) \u0648 \u0635\u0627\u062D\u0628 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u06AF\u0632\u0627\u0631\u06CC "),C(56,"span",34),A(57,"\u06CC\u06A9\u0633\u0627\u0646"),x(),A(58," \u0628\u0627\u0634\u062F. \u062F\u0631 \u063A\u06CC\u0631 \u0627\u06CC\u0646\u0635\u0648\u0631\u062A \u0645\u0628\u0644\u063A \u0648\u0627\u0631\u06CC\u0632 \u0628\u0647 \u062D\u0633\u0627\u0628 \u0645\u0628\u062F\u0627 \u0639\u0648\u062F\u062A \u062F\u0627\u062F\u0647 \u062E\u0648\u0627\u0647\u062F \u0634\u062F. "),x(),C(59,"li",31),A(60," \u0648\u0627\u0631\u06CC\u0632 \u0648\u062C\u0647 \u0627\u0632 \u062D\u0633\u0627\u0628 \u0628\u0627\u0646\u06A9\u06CC "),C(61,"span",34),A(62,"\u0645\u0634\u062A\u0631\u06A9"),x(),A(63," \u0642\u0627\u0628\u0644 \u0642\u0628\u0648\u0644 \u0646\u06CC\u0633\u062A. "),x(),C(64,"li",31),A(65,"\u0645\u0628\u0644\u063A \u0648\u0627\u0631\u06CC\u0632\u06CC \u067E\u0633 \u0627\u0632 \u062A\u0627\u06CC\u06CC\u062F \u0646\u0647\u0627\u06CC\u06CC \u0641\u06CC\u0634 \u062F\u0631 \u0641\u0631\u0627\u06CC\u0646\u062F \u0633\u0648\u062F\u062F\u0647\u06CC \u0635\u0646\u062F\u0648\u0642 \u062D\u0627\u0645\u06CC \u0642\u0631\u0627\u0631 \u0645\u06CC\u200C\u06AF\u06CC\u0631\u062F."),x()(),C(66,"p",31),A(67," \u0648\u0627\u0631\u06CC\u0632\u06CC\u200C\u0647\u0627\u06CC \u062B\u0628\u062A \u0634\u062F\u0647\u060C \u062F\u0631 \u0631\u0648\u0632 \u06A9\u0627\u0631\u06CC \u0628\u0639\u062F (\u0642\u0628\u0644 \u0627\u0632 \u0622\u063A\u0627\u0632 \u0645\u0639\u0627\u0645\u0644\u0627\u062A) \u062A\u0627\u0626\u06CC\u062F \u062E\u0648\u0627\u0647\u062F \u0634\u062F. \u0644\u0630\u0627 \u0628\u0647 \u0641\u06CC\u0634\u200C\u0647\u0627\u06CC \u0648\u0627\u0631\u06CC\u0632\u06CC \u062F\u0631 \u0637\u06CC \u0631\u0648\u0632 \u06A9\u0627\u0631\u06CC \u062A\u0631\u062A\u06CC\u0628 \u0627\u062B\u0631 \u062F\u0627\u062F\u0647 \u0646\u0645\u06CC\u200C\u0634\u0648\u062F. \u067E\u06CC\u0634\u0646\u0647\u0627\u062F \u0645\u06CC \u0634\u0648\u062F \u062C\u0647\u062A \u0633\u0647\u0648\u0644\u062A \u062F\u0631 \u0641\u0631\u0622\u06CC\u0646\u062F \u0634\u0627\u0631\u0698 \u062D\u0633\u0627\u0628\u060C \u0648\u0627\u0631\u06CC\u0632 \u0631\u0627 \u0628\u0647 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u06AF\u0632\u0627\u0631\u06CC \u0645\u0641\u06CC\u062F \u0646\u0632\u062F "),C(68,"b"),A(69,'"\u0628\u0627\u0646\u06A9 \u0645\u0644\u062A"'),x(),A(70," \u0627\u0646\u062C\u0627\u0645 \u062F\u0647\u06CC\u062F. "),x(),C(71,"div",35),V("click",function(){return z(o),W(s.collapseOrShow())}),A(72),H(73,"svg-icon",36),x()()()}if(r&2){let o,a,l,c,u,d,h,p;_(),F("formGroup",s.form),_(3),js("form-invalid",s.submitted()&&((o=s.form.get("Amount"))==null?null:o.invalid)),F("ngClass",de(31,$3,s.currentInputSelectedNameDeposit()==="Amount")),_(3),F("form",s.form)("focusInInit",!0)("readOnly",s.isMobile()),_(3),q(s.receiptAmountPersian()&&(!s.submitted()||(a=s.form.get("Amount"))!=null&&a.valid)?10:-1),_(),q(s.submitted()&&(!((l=s.form.get("Amount"))==null||l.errors==null)&&l.errors.required)?11:-1),_(3),js("form-invalid",s.submitted()&&((c=s.form.get("BankDocumentNumber"))==null?null:c.invalid)),F("ngClass",de(33,$3,s.currentInputSelectedNameDeposit()==="BankDocumentNumber")),_(),q(s.showPlaceholderForBankDocumentNumber?15:-1),_(2),q(s.submitted()&&(!((u=s.form.get("BankDocumentNumber"))==null||u.errors==null)&&u.errors.required)?17:-1),_(),q(s.submitted()&&(!((d=s.form.get("BankDocumentNumber"))==null||d.errors==null)&&d.errors.maxlength)?18:-1),_(2),F("required",!0)("defaultValue",!0)("isMobile",s.isMobile()),_(3),js("form-invalid",s.submitted()&&((h=s.form.get("AccountNumber"))==null?null:h.invalid)),_(),ye(" ",s.brokerAccountDDText()," "),_(),q(s.submitted()&&(!((p=s.form.get("AccountNumber"))==null||p.errors==null)&&p.errors.required)?25:-1),_(3),xt(s.bankAccounts()),_(7),Re(s.uploadFileLabel()),_(3),F("ngClass",de(35,LZ,s.loadingDepositPostMethod())),_(3),q(s.loadingDepositPostMethod()?41:-1),_(),F("ngClass",s.isAlertCollapsed()?"collapse-content":"show"),_(3),Re(s.StaticMoneyConstModel.attention),_(4),Re(s.StaticMoneyConstModel.attention2),_(23),ye(" ",s.toggleCollapseText," "),_(),F("iconName",s.icons.ChevronUp)("ngClass",de(37,RZ,s.isAlertCollapsed()))}},dependencies:[Oe,Ke,nn,fs,El,Ro,gs,MM,AM,vs,Sd,Zn,Il,Pl,Dl,kl,Zf,Ve,kM],styles:[`.BankDocumentNumber[_ngcontent-%COMP%]{background-color:transparent!important;border:none;width:100%!important;direction:ltr!important;color:var(--bs-body-color)}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}
/*# sourceMappingURL=deposit-receipt.component-T6HSGHTP.css.map */`],changeDetection:0});let i=e;return i})();function $Z(i,e){if(i&1){let t=ne();C(0,"span",6),V("click",function(){z(t);let r=P();return W(r.openBankAccountsModalHandler())}),A(1," \u0634\u0645\u0627\u0631\u0647 \u062D\u0633\u0627\u0628\u200C\u0647\u0627 "),x()}}var j3=(()=>{let e=class e{constructor(n){this.easyKeyboardService=n,this.selectedTab=rt(void 0),this.selectTab=it(),this.openMofidBankAccountsModal=it(),this.ReceiptTabs=vp}changeReceiptTab(n){this.selectTab.emit(n),this.easyKeyboardService.changeState(!1)}openBankAccountsModalHandler(){this.openMofidBankAccountsModal.emit()}};e.\u0275fac=function(r){return new(r||e)(st(Pd))},e.\u0275cmp=ge({type:e,selectors:[["money-receipt-tab"]],inputs:{selectedTab:[1,"selectedTab"]},outputs:{selectTab:"selectTab",openMofidBankAccountsModal:"openMofidBankAccountsModal"},decls:9,vars:5,consts:[[1,"tabs-handler","d-flex","align-items-center","justify-content-between","flex-shrink-0","shadow-sm","z-2"],[1,"nav","nav-tabs"],["data-cy","instant-receipt-tab",1,"nav-item"],[1,"nav-link",3,"click"],["data-cy","deposit-receipt-tab",1,"nav-item"],[1,"text-primary","cup","me-3"],[1,"text-primary","cup","me-3",3,"click"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"ul",1)(2,"li",2)(3,"span",3),V("click",function(){return s.changeReceiptTab(s.ReceiptTabs.Instant)}),A(4," \u0648\u0627\u0631\u06CC\u0632 \u0622\u0646\u06CC "),x()(),C(5,"li",4)(6,"span",3),V("click",function(){return s.changeReceiptTab(s.ReceiptTabs.Deposit)}),A(7," \u062B\u0628\u062A \u0641\u06CC\u0634 \u0648\u0627\u0631\u06CC\u0632\u06CC "),x()()(),Z(8,$Z,2,0,"span",5),x()),r&2&&(_(3),js("active",s.selectedTab()===s.ReceiptTabs.Instant),_(3),js("active",s.selectedTab()===s.ReceiptTabs.Deposit),_(2),q(s.selectedTab()===s.ReceiptTabs.Deposit?8:-1))},dependencies:[Oe],encapsulation:2,changeDetection:0});let i=e;return i})();var KZ=()=>({loading:!1});function jZ(i,e){if(i&1){let t=ne();C(0,"li",6)(1,"div",7)(2,"span",8),A(3),x(),C(4,"span")(5,"span",9),A(6,"\u0634\u0639\u0628\u0647"),x(),A(7),C(8,"span",9),A(9,"\u06A9\u062F"),x(),A(10),x()(),C(11,"div",7)(12,"span",9),A(13,"\u0634\u0645\u0627\u0631\u0647 \u062D\u0633\u0627\u0628"),x(),C(14,"span",10),V("click",function(){let r=z(t).$implicit,s=P();return W(s.copyText(r.number,"\u0634\u0645\u0627\u0631\u0647 \u062D\u0633\u0627\u0628",r.accountNumber))}),A(15),H(16,"svg-icon",11),x()(),C(17,"div",7)(18,"span",9),A(19,"\u0634\u0645\u0627\u0631\u0647 \u0634\u0628\u0627"),x(),C(20,"span",10),V("click",function(){let r=z(t).$implicit,s=P();return W(s.copyText(r.number,"\u0634\u0645\u0627\u0631\u0647 \u0634\u0628\u0627",r.shebaNumber))}),A(21),H(22,"svg-icon",11),x()()()}if(i&2){let t=e.$implicit,n=P();_(3),ye("",t.bankName," "),_(4),ye(" ",t.branchName," "),_(3),ye(" ",t.branchCode," "),_(5),ye(" ",t.accountNumber," "),_(),eb("title","",n.StaticMoneyConstModel.copy_in_memory2,"\u064F\u064F"),F("iconName",n.icons.Copy),_(5),ye(" ",t.shebaNumber," "),_(),eb("title","",n.StaticMoneyConstModel.copy_in_memory2,"\u064F\u064F"),F("iconName",n.icons.Copy)}}var Y3=(()=>{let e=class e{constructor(){this.icons=Fe,this.modalService=ee(Ol),this.moneyReceiptService=ee(Us),this.notificationService=ee(pi),this.StaticMoneyConstModel=Mn,this.bankAccounts=Ce(this.moneyReceiptService.getBrokerBankAccounts())}closeModal(){this.modalService.dismissAll()}copyText(n,r,s){let o=this.bankAccounts().find(a=>a.number===n);Qf(s.toString()),this.notificationService.alert(r+" "+Mn.bank+" "+o.bankName+Mn.copy_in_memory,_t.success)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["lib-mofid-bank-accounts"]],decls:9,vars:2,consts:[[1,"modal-header","d-flex","align-items-center","justify-content-between"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close","p-0","m-0",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"ngClass"],[1,"list-group","list-group-flush","p-0","m-0"],[1,"list-group-item","py-2","px-0","bg-transparent"],[1,"d-flex","justify-content-between","align-items-center"],[1,"h6"],[1,"text-muted"],[1,"cup",3,"click"],["width","18","height","18",1,"text-primary","ms-1",3,"iconName","title"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"span",1),A(2,"\u0634\u0645\u0627\u0631\u0647 \u062D\u0633\u0627\u0628 \u0647\u0627\u06CC \u0645\u0641\u06CC\u062F"),x(),C(3,"button",2),V("click",function(){return s.closeModal()}),H(4,"span",3),x()(),C(5,"div",4)(6,"ul",5),St(7,jZ,23,11,"li",6,zr),x()()),r&2&&(_(5),F("ngClass",qs(1,KZ)),_(2),xt(s.bankAccounts()))},dependencies:[Oe,Ke,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var YZ=i=>({"rotate-180":i});function qZ(i,e){if(i&1){let t=ne();C(0,"svg-icon",7),V("click",function(){z(t);let r=P(2);return W(r.showRemoveConfirm.set(!1))}),x()}if(i&2){let t=P(2);F("iconName",t.icons.Close)}}function XZ(i,e){if(i&1){let t=ne();C(0,"div",1)(1,"svg-icon",4),V("click",function(){z(t);let r=P();return W(r.cancelHandler())}),x(),A(2," \u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0645\u0648\u0631\u062F \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F "),C(3,"div",5)(4,"svg-icon",4),V("click",function(){z(t);let r=P();return W(r.cancelHandler())}),x(),Z(5,qZ,1,1,"svg-icon",6),x()()}if(i&2){let t=P();_(),F("iconName",t.icons.Blank),_(3),F("iconName",t.icons.Check),_(),q(t.cancelLoading()?-1:5)}}function ZZ(i,e){i&1&&A(0," \u0648\u0627\u0631\u06CC\u0632 \u0627\u0632 ")}function QZ(i,e){if(i&1){let t=ne();C(0,"svg-icon",14),V("click",function(){z(t);let r=P(2);return W(r.showRemoveConfirm.set(!0))}),x()}if(i&2){let t=P(2);F("iconName",t.icons.CloseBox)}}function JZ(i,e){if(i&1&&H(0,"svg-icon",8),i&2){let t=P(2);F("iconName",t.icons.ChevronUp)("ngClass",de(2,YZ,t.showTooltip()))}}function eQ(i,e){if(i&1&&(C(0,"div",2),H(1,"svg-icon",8),C(2,"div",9)(3,"div"),Z(4,ZZ,1,0),C(5,"span"),A(6),x()(),C(7,"span",10),A(8),fe(9,"jdateLong"),x()(),C(10,"span",11),A(11),fe(12,"number"),C(13,"span",12),A(14,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()(),Z(15,QZ,1,1,"svg-icon",13)(16,JZ,1,4,"svg-icon",8),x()),i&2){let t=P();_(),F("iconName",t.item().icon2.icon)("ngClass",t.item().icon2.class),_(3),q(t.item().bankInterfaceTransactionType===t.BankInterfaceTransactionTypeEnum.MofidCard||t.item().bankInterfaceTransactionType===t.BankInterfaceTransactionTypeEnum.PaymentGateCardToCardDraft?4:-1),_(2),Re(t.item().type),_(2),Re(ci(9,8,t.item().requestDate,!0)),_(3),ye("",Te(12,11,t.item().amount)," "),_(4),q(t.item().isDeletable?15:-1),_(),q(t.item().brokerDescription?16:-1)}}function tQ(i,e){if(i&1&&(C(0,"div",3)(1,"div",15),A(2,"\u067E\u06CC\u0627\u0645 \u06A9\u0627\u0631\u06AF\u0632\u0627\u0631:"),x(),A(3),x()),i&2){let t=P();_(3),ye(" ",t.item().brokerDescription," ")}}var q3=(()=>{let e=class e{constructor(){this.icons=Fe,this.item=rt.required(),this.reloadHistory=it(),this.BankInterfaceTransactionTypeEnum=Bg,this.moneyReceiptService=ee(Us),this.notificationService=ee(pi),this.showTooltip=pe(!1),this.cancelLoading=pe(!1),this.showRemoveConfirm=pe(!1)}cancelHandler(){this.cancelLoading.set(!0),this.moneyReceiptService.cancelReceipt(this.item().id).subscribe({next:()=>{this.notificationService.alert("\u062D\u0630\u0641 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0646\u062C\u0627\u0645 \u0634\u062F",_t.success),this.reloadHistory.emit(),this.showRemoveConfirm.set(!1),this.cancelLoading.set(!1)},error:()=>{this.notificationService.alert("\u062E\u0637\u0627\u06CC\u06CC \u0631\u062E \u062F\u0627\u062F\u0647 \u0627\u0633\u062A",_t.danger),this.cancelLoading.set(!1)}})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["receipt-history-item"]],inputs:{item:[1,"item"]},outputs:{reloadHistory:"reloadHistory"},decls:4,vars:3,consts:[[3,"click"],[1,"d-flex","justify-content-between","align-items-center","py-2","px-1"],[1,"d-flex","align-items-center","justify-content-between","cup","gap-2"],[1,"d-flex","ms-5"],["width","20","height","20","data-cy","confirm-cancel-deposit-receipt",1,"px-2","text-success","cup",3,"click","iconName"],[1,"ms-auto"],["width","20","height","20",1,"px-2","text-danger","cup",3,"iconName"],["width","20","height","20",1,"px-2","text-danger","cup",3,"click","iconName"],["width","20","height","20",1,"px-2",3,"iconName","ngClass"],[1,"flex-grow-1"],[1,"small","text-secondary","text-opacity-75"],[1,"text-body","flex-grow-1","text-end","px-2"],[1,"text-secondary"],["width","20","height","20","data-cy","cancel-deposit-receipt",1,"text-hover-danger","px-2",3,"iconName"],["width","20","height","20","data-cy","cancel-deposit-receipt",1,"text-hover-danger","px-2",3,"click","iconName"],[1,"text-body","me-1","text-nowrap"]],template:function(r,s){r&1&&(C(0,"div",0),V("click",function(){return s.showTooltip.set(!s.showTooltip())}),Z(1,XZ,6,3,"div",1)(2,eQ,17,13,"div",2)(3,tQ,4,1,"div",3),x()),r&2&&(_(),q(s.showRemoveConfirm()?1:-1),_(),q(s.showRemoveConfirm()?-1:2),_(),q(s.showTooltip()&&s.item().brokerDescription?3:-1))},dependencies:[Oe,Ke,yi,Ad,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var iQ=(i,e)=>e.id,nQ=i=>({"pe-none":i});function rQ(i,e){if(i&1&&(C(0,"div",1),H(1,"svg-icon",2),C(2,"p"),A(3,"\u062F\u0631 \u062D\u0627\u0644 \u062F\u0631\u06CC\u0627\u0641\u062A \u0627\u0637\u0644\u0627\u0639\u0627\u062A"),x()()),i&2){let t=P(2);_(),F("iconName",t.icons.Loading)}}function sQ(i,e){if(i&1){let t=ne();C(0,"div",1)(1,"p"),A(2,"\u062E\u0637\u0627 \u062F\u0631 \u062F\u0631\u06CC\u0627\u0641\u062A \u0627\u0637\u0644\u0627\u0639\u0627\u062A"),x(),C(3,"button",3),V("click",function(){z(t);let r=P(2);return W(r.getReceipts())}),A(4,"\u062A\u0644\u0627\u0634 \u0645\u062C\u062F\u062F"),x()()}}function oQ(i,e){if(i&1&&(C(0,"div",0),Z(1,rQ,4,1,"div",1)(2,sQ,5,0,"div",1),x()),i&2){let t=P();_(),q(t.loadingReceiptHistory()?1:t.retryLoadingReceiptHistory()?2:-1)}}function aQ(i,e){if(i&1){let t=ne();C(0,"receipt-history-item",9),V("reloadHistory",function(){z(t);let r=P(2);return W(r.getReceipts())}),x()}if(i&2){let t=e.$implicit;F("item",t)}}function lQ(i,e){if(i&1&&H(0,"svg-icon",11),i&2){let t=P(3);F("iconName",t.icons.Loading)}}function cQ(i,e){if(i&1){let t=ne();C(0,"div",8)(1,"button",10),V("click",function(){z(t);let r=P(2);return W(r.loadMoreHandler())}),A(2," \u0646\u0645\u0627\u06CC\u0634 \u0628\u06CC\u0634\u062A\u0631 "),Z(3,lQ,1,1,"svg-icon",11),x()()}if(i&2){let t=P(2);_(),F("ngClass",de(2,nQ,t.loadingMore())),_(2),q(t.loadingMore()?3:-1)}}function uQ(i,e){if(i&1&&(C(0,"div",4),H(1,"svg-icon",5),A(2," \u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u0648\u0627\u0631\u06CC\u0632 \u0648\u062C\u0647 "),x(),C(3,"div",6),St(4,aQ,1,1,"receipt-history-item",7,iQ),x(),Z(6,cQ,4,4,"div",8)),i&2){let t=P();_(),F("iconName",t.icons.History),_(3),xt(t.receipts()),_(2),q(t.hasMore()?6:-1)}}var rC=(()=>{let e=class e{constructor(){this.icons=Fe,this.moneyReceiptService=ee(Us),this.notificationService=ee(pi),this.loadingReceiptHistory=pe(!0),this.retryLoadingReceiptHistory=pe(!1),this.receipts=pe([]),this.loadingMore=pe(!1),this.hasMore=pe(!1),this.loadOption={page:0,size:15}}ngOnInit(){this.getReceipts(),this.moneyReceiptService.moneyReceiptHistory$.subscribe(n=>{n&&this.getReceipts()})}getReceipts(){this.loadingReceiptHistory.set(!0),this.moneyReceiptService.getMoneyReceipts(this.loadOption).pipe(Pi(()=>{this.loadingReceiptHistory.set(!1),this.retryLoadingReceiptHistory.set(!0)})).subscribe(n=>{this.loadingReceiptHistory.set(!1),this.retryLoadingReceiptHistory.set(!1),this.receipts.set(n),this.checkForMore(n?.length)})}loadMoreHandler(){this.loadingMore.set(!0),this.loadOption={page:this.loadOption.page+1,size:15},this.moneyReceiptService.getMoneyReceipts(this.loadOption).pipe(Pi(()=>{this.loadingMore.set(!1),this.notificationService.alert("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0642\u0631\u0627\u0631\u06CC \u0627\u0631\u062A\u0628\u0627\u0637 \u0628\u0627 \u0633\u0631\u0648\u0631",_t.danger)})).subscribe(n=>{this.loadingMore.set(!1),n.forEach(r=>{this.receipts.update(s=>[...s,r])}),this.checkForMore(n.length)})}checkForMore(n){n===this.loadOption.size?this.hasMore.set(!0):this.hasMore.set(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["receipt-history"]],decls:2,vars:1,consts:[[1,"d-flex","flex-column","align-items-center","mb-4","text-muted"],[1,"text-center"],["width","36","height","36",1,"spin",3,"iconName"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"text-secondary","px-3","mb-2"],["width","24","height","24",1,"",3,"iconName"],[1,"list-unstyled","p-0","mb-0","overflow-auto","list-group","list-group-flush","position-relative"],["data-cy","receipt-history-item",1,"list-group-item","bg-principal","bg-principal-4x-dark","bg-principal-3x-dark-mobile","bg-principal-hover","p-1",3,"item"],[1,"py-3","text-center"],["data-cy","receipt-history-item",1,"list-group-item","bg-principal","bg-principal-4x-dark","bg-principal-3x-dark-mobile","bg-principal-hover","p-1",3,"reloadHistory","item"],["type","button",1,"btn","btn-outline-primary",3,"click","ngClass"],["width","18","height","18",1,"spin","ms-1",3,"iconName"]],template:function(r,s){r&1&&Z(0,oQ,3,1,"div",0)(1,uQ,7,2),r&2&&q(s.loadingReceiptHistory()||s.retryLoadingReceiptHistory()?0:s.receipts()&&s.receipts().length>0?1:-1)},dependencies:[Oe,Ke,q3,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var dQ=(i,e)=>e.providerId,hQ=i=>({"bg-principal bg-principal-4x-dark rounded p-2 mb-2":i});function pQ(i,e){if(i&1&&H(0,"svg-icon",4),i&2){let t,n=P();F("iconName",((t=n.selectedGateway())==null?null:t.providerId)!==n.WalletConstants.BankAccountId?(t=n.selectedGateway())==null?null:t.icon:"mofidcart")}}function mQ(i,e){if(i&1&&(C(0,"span",9),A(1),x()),i&2){let t=P(2);_(),Re(t.cardNumber())}}function gQ(i,e){if(i&1){let t=ne();C(0,"span",12),V("click",function(){z(t);let r=P(2);return W(r.openWallet())}),A(1,"\u0641\u0639\u0627\u0644\u200C\u0633\u0627\u0632\u06CC"),x()}}function fQ(i,e){if(i&1){let t=ne();C(0,"span",13),V("click",function(){z(t);let r=P(2);return W(r.openWallet())}),A(1,"\u0641\u0639\u0627\u0644\u200C\u0633\u0627\u0632\u06CC \u0645\u062C\u062F\u062F"),x()}}function vQ(i,e){if(i&1&&Z(0,mQ,2,1,"span",9)(1,gQ,2,0,"span",10)(2,fQ,2,0,"span",11),i&2){let t,n=P();q((t=n.walletStatus())===n.WalletStatusEnum.WalletIsActive?0:t===n.WalletStatusEnum.WalletNeedsActivate?1:t===n.WalletStatusEnum.WalletNeedsReverify?2:-1)}}function yQ(i,e){i&1&&(C(0,"span",16),A(1,"\u0641\u0639\u0627\u0644 \u0646\u0634\u062F\u0647"),x())}function CQ(i,e){if(i&1&&(C(0,"span",9),A(1),x()),i&2){let t=P(4);_(),Re(t.cardNumber())}}function bQ(i,e){if(i&1){let t=ne();C(0,"button",13),V("click",function(){z(t);let r=P(4);return W(r.openWallet())}),A(1," \u0641\u0639\u0627\u0644\u200C\u0633\u0627\u0632\u06CC "),x()}}function SQ(i,e){if(i&1){let t=ne();C(0,"button",13),V("click",function(){z(t);let r=P(4);return W(r.openWallet())}),A(1," \u0641\u0639\u0627\u0644\u200C\u0633\u0627\u0632\u06CC \u0645\u062C\u062F\u062F "),x()}}function xQ(i,e){if(i&1&&Z(0,yQ,2,0,"span",16)(1,CQ,2,1,"span",9)(2,bQ,2,0,"button",11)(3,SQ,2,0,"button",11),i&2){let t,n=P(3);q((t=n.walletStatus())===n.WalletStatusEnum.WalletNeedsActivate?0:t===n.WalletStatusEnum.WalletIsActive?1:t===n.WalletStatusEnum.WalletNeedsActivate?2:t===n.WalletStatusEnum.WalletNeedsReverify?3:-1)}}function _Q(i,e){if(i&1){let t=ne();C(0,"div",15),V("click",function(){z(t);let r=P().$implicit,s=P();return W(s.changeSelectedGateway(r))}),H(1,"svg-icon",4),A(2),Z(3,xQ,4,1),x()}if(i&2){let t=P().$implicit,n=P();_(),F("iconName",n.setIcon(t)),_(),ye(" ",t.name," "),_(),q(t.providerId===n.WalletConstants.BankAccountId?3:-1)}}function wQ(i,e){if(i&1&&Z(0,_Q,4,3,"div",14),i&2){let t=e.$implicit,n=P();q(t.providerId===n.WalletConstants.BankAccountId&&n.showWalletRow()||t.providerId!==n.WalletConstants.BankAccountId?0:-1)}}function EQ(i,e){if(i&1&&(C(0,"span",17),A(1),fe(2,"number"),x()),i&2){let t=P(2);_(),Re(Te(2,1,t.walletBalance()))}}function TQ(i,e){if(i&1&&H(0,"svg-icon",18),i&2){let t=P(2);F("iconName",t.icons.Loading)}}function MQ(i,e){if(i&1&&(C(0,"div",7)(1,"span"),A(2,"\u0645\u0648\u062C\u0648\u062F\u06CC:"),x(),Z(3,EQ,3,3,"span",17)(4,TQ,1,1,"svg-icon",18),C(5,"span"),A(6,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()),i&2){let t=P();_(3),q(t.walletBalance()!==void 0?3:4)}}function AQ(i,e){if(i&1&&(C(0,"div",8),H(1,"svg-icon",19),C(2,"small"),A(3),x()()),i&2){let t=P();_(),F("iconName",t.icons.Alert),_(2),Re(t.bankRestriction())}}var sC=(()=>{let e=class e{constructor(){this.icons=Fe,this.isMobile=rt(void 0),this.focusIn=it(),this.loadBankGateways=it(),this.destroyRef$=ee(xr),this.WalletConstants=Da,this.WalletStatusEnum=Dc,this.accountService=ee(Er),this.moneyReceiptService=ee(Us),this.walletCardService=ee(Ho),this.notificationService=ee(pi),this.router=ee($n),this.sidePanelServiceService=ee(Tr),this.gateways=pe([]),this.selectedGateway=oi(()=>this.gateways().find(n=>n.selected)),this.gatewayDDText=oi(()=>this.selectedGateway()?.name),this.customerIsAdultData=Ce(this.accountService.userAccountInfo.pipe(Jt(n=>this.moneyReceiptService.customersAgentAge(n.nationalId)),ms(this.destroyRef$))),this.bankRestriction=oi(()=>this.selectedGateway()?.matchNationalIdWithDebitCard?V3:""),this.cardNumber=pe(""),this.walletBalance=pe(void 0),this.walletStatus=pe(null),this.showWalletRow=pe(!0)}ngOnInit(){this.loadData()}loadData(){this.loadBankGateways.emit(!0),this.moneyReceiptService.getBankGateways().pipe(Je(n=>{this.gateways.set(n)}),pn(()=>this.loadBankGateways.emit(!1)),Jt(()=>this.addWalletCardToBankGateways())).subscribe()}setGateway(n){this.gateways.update(r=>{let s=this.gateways().find(o=>o.selected);return s.selected=!1,r.find(o=>o.providerId===n).selected=!0,[...r]})}addWalletCardToBankGateways(){return this.walletCardService.getWalletUserInfo().pipe(Je(n=>{if(n?.data){let r=n?.data?.card?n?.data?.card.match(/.{1,4}/g).join("-"):null;switch(this.cardNumber.set(r),this.setNewBankGateway(),this.showWalletRow.set(this.walletCardService.isWalletMenuVisible(n?.data)),n.data?.result){case Rd.AccessWithdraw:case Rd.REVERIFY:this.walletStatus.set(Dc.WalletNeedsReverify);break;case Rd.SUCCESS:n.data.status!=="CARD_VERIFIED_OTP"?this.walletStatus.set(Dc.WalletNeedsActivate):this.walletStatus.set(Dc.WalletIsActive)}}}),Pi(()=>(this.notificationService.alert("\u062E\u0637\u0627 \u062F\u0631 \u062E\u0648\u0627\u0646\u062F\u0646 \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0645\u0641\u06CC\u062F \u06A9\u0627\u0631\u062A",_t.danger),Ji(null))))}setNewBankGateway(){let n={name:"\u0645\u0641\u06CC\u062F \u06A9\u0627\u0631\u062A",providerId:Da.BankAccountId,orderNumber:5e3};this.gateways.update(r=>[...r,n])}getWalletBalance(){return this.walletBalance.set(null),this.walletCardService.getWalletBalance()}getDataWithLoader(){this.getWalletBalance().pipe(Eo(wo(1e3))).subscribe(([n])=>{this.walletBalance.set(n.balance)})}changeSelectedGateway(n){n.providerId===Da.BankAccountId&&this.getDataWithLoader(),this.setGateway(n.providerId)}changeGatewayWithProblem(){let n=this.gateways().find(r=>!r.selected&&r.providerId!==Da.BankAccountId).providerId;this.setGateway(n)}openWallet(){this.isMobile()?this.router.navigateByUrl(`/menu/${ut.WALLET_CARD_ROUTE}`):this.sidePanelServiceService.openSidePanelFromRoute({sidePanel:Ee.WalletCard})}setIcon(n){return n.providerId===Da.BankAccountId?"mofidcart":n?.icon}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["instant-money-bank-gateways"]],inputs:{isMobile:[1,"isMobile"]},outputs:{focusIn:"focusIn",loadBankGateways:"loadBankGateways"},decls:14,vars:10,consts:[[3,"focusin","ngClass"],["ngbDropdown","","dir","rtl","placement","bottom-right",1,"mb-2"],["type","text",1,"d-none"],["type","button","ngbDropdownToggle","",1,"form-select","form-select-lg","text-start","d-flex","align-items-center","gap-1"],["width","24","height","24",3,"iconName"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"w-100","shadow","rounded"],[1,"list-group","list-group-flush"],[1,"text-muted","mb-2"],[1,"text-primary"],[1,"ms-auto"],["type","button",1,"btn","btn-sm","btn-primary","py-0","ms-auto",2,"font-size","10px"],["type","button",1,"btn","btn-sm","btn-primary","py-0","ms-auto"],["type","button",1,"btn","btn-sm","btn-primary","py-0","ms-auto",2,"font-size","10px",3,"click"],["type","button",1,"btn","btn-sm","btn-primary","py-0","ms-auto",3,"click"],["type","button","ngbDropdownItem","",1,"list-group-item","list-group-item-action","p-2","text-start","d-flex","gap-1","align-items-baseline"],["type","button","ngbDropdownItem","",1,"list-group-item","list-group-item-action","p-2","text-start","d-flex","gap-1","align-items-baseline",3,"click"],[1,"me-auto","ms-1","text-warning"],[1,"text-body"],["width","18","height","18",1,"spin","ms-1",3,"iconName"],["width","18","height","18",1,"",3,"iconName"]],template:function(r,s){if(r&1&&(C(0,"div",0),V("focusin",function(){return s.focusIn.emit()}),C(1,"div",1),H(2,"input",2),C(3,"button",3),Z(4,pQ,1,1,"svg-icon",4),A(5),fe(6,"positiveNumber"),Z(7,vQ,3,1),x(),C(8,"div",5)(9,"div",6),St(10,wQ,1,1,null,null,dQ),x()()(),Z(12,MQ,7,1,"div",7)(13,AQ,4,2,"div",8),x()),r&2){let o,a,l;F("ngClass",de(8,hQ,s.bankRestriction())),_(4),q((o=s.selectedGateway())!=null&&o.providerId?4:-1),_(),ye(" ",Te(6,6,s.gatewayDDText())," "),_(2),q(((a=s.selectedGateway())==null?null:a.providerId)===s.WalletConstants.BankAccountId?7:-1),_(3),xt(s.gateways()),_(2),q(((l=s.selectedGateway())==null?null:l.providerId)===s.WalletConstants.BankAccountId&&s.walletStatus()===s.WalletStatusEnum.WalletIsActive?12:-1),_(),q(s.bankRestriction()?13:-1)}},dependencies:[Oe,Ke,yi,ys,Il,Pl,Dl,kl,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var DQ=["myForm"],kQ=(i,e)=>e.value,IQ=i=>({loading:i}),FQ=i=>({selected:i}),OQ=i=>({"pe-none":i});function LQ(i,e){i&1&&(C(0,"div",9),A(1,"\u0645\u0628\u0644\u063A \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F"),x())}function RQ(i,e){i&1&&(C(0,"div",9),A(1,"\u062D\u062F\u0627\u0642\u0644 \u0645\u0628\u0644\u063A \u062F\u0647 \u0647\u0632\u0627\u0631 \u062A\u0648\u0645\u0627\u0646 \u0645\u06CC\u200C\u0628\u0627\u0634\u062F"),x())}function NQ(i,e){if(i&1&&(C(0,"p"),A(1),x()),i&2){let t=P();_(),ye(" ",t.valueInPersian()," ")}}function VQ(i,e){if(i&1){let t=ne();C(0,"div",17),V("click",function(){let r=z(t).$implicit,s=P();return W(s.onSelectSuggestionHandler(r.value))}),C(1,"span",18)(2,"span",19),A(3),x(),C(4,"div",20)(5,"span"),A(6),x(),C(7,"span",21),A(8,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()()()}if(i&2){let t=e.$implicit;_(3),Re(t.label),_(3),Re(t.unit+" ")}}function BQ(i,e){if(i&1&&H(0,"svg-icon",16),i&2){let t=P();F("iconName",t.icons.Loading)}}var X3=(()=>{let e=class e{constructor(){this.icons=Fe,this.myForm=$t("myForm"),this.instantMoneyBankGatewaysComponent=$t(sC),this.amount=rt(void 0),this.formValue=rt(void 0),this.isMobile=rt(void 0),this.keyboardAction=it(),this.updateHistory=it(),this.MoneySuggestion=U3,this.environment=ee(Td),this.fb=ee(Yn),this.notificationService=ee(pi),this.walletCardService=ee(Ho),this.moneyReceiptService=ee(Us),this.unleashService=ee(Xn),this.destroyRef$=ee(xr),this.loadingReceiptOptions=pe(!1),this.loadingReceiptButton=pe(!1),this.currentInputSelectedNameDeposit=pe(null),this.form=this.fb.group({value:["",[ii.required,ii.min(this.environment.env!==Tl.PROD?1e4:1e5)]]}),this.value=Ce(this.form.get("value").valueChanges.pipe(ms(this.destroyRef$))),this.valueInPersian=oi(()=>{let n=+this.value()?.toString()?.replace(/,/g,"");return n>0&&Ed(n)})}ngOnInit(){let n=this.amount();n&&!isNaN(+n)&&this.form.get("value").setValue(n);let r=this.formValue();r&&this.form.patchValue({value:r}),this.onValueTap()}submit(){if(this.form.valid&&!this.loadingReceiptButton()){this.loadingReceiptButton.set(!0);let n=this.instantMoneyBankGatewaysComponent(),r=B3(n.selectedGateway()?.providerId),s=!1;if(this.unleashService.isFeatureEnabled$(r).subscribe(o=>{s=o}),s){let o=this.environment.appUrl,a=this.isMobile()?"menu/money-receipt":"receipt";this.moneyReceipt={amount:+this.form.value.value,gateway:n.selectedGateway()?.providerId,callbackUrl:`${o}/${a}`,deviceType:this.isMobile()?Cn.Mobile:Cn.Desktop}}else this.moneyReceipt={amount:+this.form.value.value,gatewayProviderId:n.selectedGateway()?.providerId,clientRoute:this.isMobile()?"menu/money-receipt":"receipt",deviceType:this.isMobile()?Cn.Mobile:Cn.Desktop};this.moneyReceipt.gatewayProviderId!==Da.BankAccountId?this.getGatewayRedirectionData(this.moneyReceipt,s):this.moneyReceipt.gatewayProviderId===Da.BankAccountId&&(n.walletStatus()===Dc.WalletNeedsActivate?(this.loadingReceiptButton.set(!1),this.notificationService.alert(Mn.useful_card_activation,_t.warning)):n.walletBalance()<+this.moneyReceipt.amount?(this.notificationService.alert(Mn.not_enough_inventory_mofid_card,_t.danger),this.loadingReceiptButton.set(!1)):this.walletWidthDraw(this.moneyReceipt))}}closeKeyboardHandler(){this.currentInputSelectedNameDeposit.set(null),this.keyboardAction.emit({keyboardClose:!0})}getGatewayRedirectionData(n,r){this.moneyReceiptService.getGatewayRedirectionData(n,r).pipe(Je(s=>{this.redirectToGateway(s)}),Pi(()=>(this.notificationService.alert(Mn.tryAgain,_t.warning),this.instantMoneyBankGatewaysComponent().changeGatewayWithProblem(),Ji(null))),pn(()=>this.loadingReceiptButton.set(!1))).subscribe()}walletWidthDraw(n){let r=n.amount.toString();this.walletCardService.walletWithdraw({amount:r}).pipe(Je(s=>{s?.isSuccessful&&this.resetForm(),this.updateWalletBalance(s?.isSuccessful);let o=s.result===Rd.SUCCESS?_t.success:_t.danger;this.notificationService.alert(s.description||"\u0627\u0646\u062A\u0642\u0627\u0644 \u0645\u0648\u0641\u0642\u06CC\u062A \u0622\u0645\u06CC\u0632 \u0628\u0648\u062F",o)}),pn(()=>this.loadingReceiptButton.set(!1)),Pi(()=>(this.loadingReceiptButton.set(!1),this.notificationService.alert(Mn.tryAgain,_t.warning),Ji(null)))).subscribe()}resetForm(){this.form.reset(),this.myForm().resetForm(),this.form.get("value").setValue(null),this.loadingReceiptButton.set(!1)}updateWalletBalance(n){n&&this.instantMoneyBankGatewaysComponent().getDataWithLoader()}onValueTap(){this.currentInputSelectedNameDeposit.set("value"),this.keyboardAction.emit({controlId:"value",formGroup:this.form})}redirectToGateway(n){if(!n.tokenNameAttribute){window.location.href=n.url;return}let r=document.createElement("form");r.method="POST",r.action=n.url;let s=document.createElement("input");if(s.type="hidden",s.name=n.tokenNameAttribute,s.value=n.token,r.appendChild(s),n.phoneNumber){let o=document.createElement("input");o.type="hidden",o.name=n.phoneNumberNameAttribute,o.value=n.phoneNumber,r.appendChild(o)}document.body.appendChild(r),this.loadingReceiptButton.set(!1),r.submit(),document.body.removeChild(r)}onSelectSuggestionHandler(n){this.form.get("value").setValue(n.toString()),this.closeKeyboardHandler()}loadBankGateways(n){this.loadingReceiptOptions.set(n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["lib-instant-money-receipt"]],viewQuery:function(r,s){r&1&&(Kt(s.myForm,DQ,5),Kt(s.instantMoneyBankGatewaysComponent,sC,5)),r&2&&si(2)},inputs:{amount:[1,"amount"],formValue:[1,"formValue"],isMobile:[1,"isMobile"]},outputs:{keyboardAction:"keyboardAction",updateHistory:"updateHistory"},decls:24,vars:19,consts:[["myForm","ngForm"],[1,"p-3","flex-shrink-0","was-validated"],[3,"ngSubmit","formGroup"],[1,"position-relative",3,"ngClass"],[3,"focusIn","loadBankGateways","isMobile"],[1,"form-control","form-control-lg","d-flex","align-items-center","input-index","mb-1",3,"ngClass"],[1,"text-secondary","position-absolute",2,"pointer-events","none"],["id","value","valueChangeEvent","keyup",1,"ps-3","flex-grow-1",3,"tap","touchstart","focusInInit","form","readOnly"],[1,"text-secondary","ps-1","d-flex","justify-content-center","align-items-center"],[1,"invalid-feedback"],[1,"mb-3","mt-2"],[1,"mb-1","text-secondary","text-nowrap","mb-1"],[1,"d-flex","gap-1","flex-wrap"],[1,"bg-principal","bg-principal-4x-dark","bg-principal-hover","p-1","rounded","cup","text-nowrap"],["type","submit","data-cy","instant-money-receipt-btn",1,"btn","btn-success","d-block","w-100","mt-2",3,"focusin","ngClass"],[1,"text-center"],["width","18","height","18",1,"spin","ms-1",3,"iconName"],[1,"bg-principal","bg-principal-4x-dark","bg-principal-hover","p-1","rounded","cup","text-nowrap",3,"click"],[1,"text-body","flex-grow-1","text-end","d-flex","gap-1","px-1"],[1,"fw-bold"],[1,"text-secondary","small"],[1,"position-relative",2,"top","2px"]],template:function(r,s){if(r&1){let o=ne();C(0,"div",1)(1,"form",2,0),V("ngSubmit",function(){return z(o),W(s.submit())}),C(3,"div",3)(4,"instant-money-bank-gateways",4),V("focusIn",function(){return z(o),W(s.closeKeyboardHandler())})("loadBankGateways",function(l){return z(o),W(s.loadBankGateways(l))}),x(),C(5,"div",5)(6,"span",6),A(7,"\u0645\u0628\u0644\u063A"),x(),C(8,"custom-number-box",7),V("tap",function(){return z(o),W(s.onValueTap())})("touchstart",function(){return z(o),W(s.onValueTap())}),x(),C(9,"span",8),A(10,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()(),Z(11,LQ,2,0,"div",9)(12,RQ,2,0,"div",9)(13,NQ,2,1,"p"),C(14,"div",10)(15,"div",11),A(16,"\u062A\u0631\u0627\u06A9\u0646\u0634\u200C\u0647\u0627\u06CC \u067E\u0631 \u062A\u06A9\u0631\u0627\u0631:"),x(),C(17,"div",12),St(18,VQ,9,2,"div",13,kQ),x()(),C(20,"button",14),V("focusin",function(){return z(o),W(s.closeKeyboardHandler())}),C(21,"span",15),A(22," \u067E\u0631\u062F\u0627\u062E\u062A "),x(),Z(23,BQ,1,1,"svg-icon",16),x()()()()}if(r&2){let o,a,l,c=ki(2);_(),F("formGroup",s.form),_(2),F("ngClass",de(13,IQ,s.loadingReceiptOptions())),_(),F("isMobile",s.isMobile()),_(),js("form-invalid",c.submitted&&((o=s.form.get("value"))==null?null:o.invalid)),F("ngClass",de(15,FQ,s.currentInputSelectedNameDeposit()==="value")),_(3),F("focusInInit",!0)("form",s.form)("readOnly",s.isMobile()),_(3),q(c.submitted&&(!((a=s.form.get("value"))==null||a.errors==null)&&a.errors.required)?11:c.submitted&&(!((a=s.form.get("value"))==null||a.errors==null)&&a.errors.min)?12:-1),_(2),q(s.valueInPersian()&&(!c.submitted||(l=s.form.get("value"))!=null&&l.valid)?13:-1),_(5),xt(s.MoneySuggestion),_(2),F("ngClass",de(17,OQ,s.loadingReceiptButton())),_(3),q(s.loadingReceiptButton()?23:-1)}},dependencies:[Oe,Ke,Zn,Fn,fs,gs,nn,vs,sC,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();function GQ(i,e){if(i&1){let t=ne();C(0,"lib-instant-money-receipt",4),V("keyboardAction",function(r){z(t);let s=P();return W(s.keyboardChangeStatus(r))})("updateHistory",function(){z(t);let r=P();return W(r.updateHistoryHandler())}),x()}if(i&2){let t=P();F("amount",t.amount())("isMobile",t.isMobile())}}function UQ(i,e){if(i&1){let t=ne();C(0,"lib-deposit-receipt",5),V("keyboardAction",function(r){z(t);let s=P();return W(s.keyboardChangeStatus(r))}),x()}if(i&2){let t=P();F("isMobile",t.isMobile())}}var oC=(()=>{let e=class e{constructor(){this.icons=Fe,this.amount=rt(""),this.isMobile=rt(void 0),this.urlData=rt(void 0),this.toggleEasyKeyboardEvent=it(),this.receiptHistoryComponent=$t(rC),this.selectedTab=pe(vp.Instant),this.ReceiptTabs=vp,this.router=ee($n),this.activatedRoute=ee(Pf),this.notificationService=ee(pi),this.easyKeyboardService=ee(Pd),this.modalService=ee(Ol)}ngOnInit(){this.subscribeToQueryParams()}subscribeToQueryParams(){this.activatedRoute.queryParams.subscribe(n=>{this.updatePaymentType(n)})}updatePaymentType(n){if(!n?.paymentType){this.UrlDataStatus();return}this.params=n.paymentType,this.UrlDataStatusWithPaymentType(n?.paymentType)}ngAfterViewInit(){this.setDefaultRoute()}UrlDataStatus(){let n=NM(localStorage.getItem(iC),"paymentType"),r=this.urlData();r?.status?this.handleNotification(r.status):this.handleNotification(n),localStorage.removeItem(iC)}handleNotification(n){switch(n){case Pc.Error:case nC.Error:this.notificationService.alert(F1[Pc.Error],_t.danger);break;case Pc.Success:case nC.Success:this.notificationService.alert(F1[Pc.Success],_t.success);break;default:break}}UrlDataStatusWithPaymentType(n){this.handleNotification(n),localStorage.removeItem(iC)}setDefaultRoute(){let n=this.isMobile()?`${ut.MENU_ROUTE}/${Lp.RECEIPT_ROUTE}`:"/";history.replaceState(null,"",n)}ngOnDestroy(){this.closeEasyKeyboard()}openMofidBankAccountsHandler(){this.modalService.open(Y3,{scrollable:!0})}checkForScroll(n){let r=document.getElementsByTagName("main")[0],s=r.getBoundingClientRect().height;n>s/2&&setTimeout(()=>{r.scrollTop=r.scrollHeight},200)}changeSelectedTab(n){this.selectedTab.set(n)}closeEasyKeyboard(){this.toggleEasyKeyboard(!1)}openKeyboard(n,r){this.easyKeyboardInputControl=r.get(n),this.toggleEasyKeyboard(!0,n)}keyboardChangeStatus(n){this.isMobile()&&(n.keyboardClose?this.closeEasyKeyboard():this.openKeyboard(n.controlId,n.formGroup))}toggleEasyKeyboard(n,r){this.toggleEasyKeyboardEvent.emit(new Jf(n,r))}back(){this.easyKeyboardService.easyKeyboardState$.pipe(hs(1)).subscribe(n=>{if(this.isMobile()&&n)return this.easyKeyboardService.changeState(!1)}),this.urlData()?.status||this.params?this.router.navigateByUrl("/menu"):history.go(-1)}updateHistoryHandler(){this.receiptHistoryComponent().getReceipts()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["lib-money-receipt"]],viewQuery:function(r,s){r&1&&Kt(s.receiptHistoryComponent,rC,5),r&2&&si()},inputs:{amount:[1,"amount"],isMobile:[1,"isMobile"],urlData:[1,"urlData"]},outputs:{toggleEasyKeyboardEvent:"toggleEasyKeyboardEvent"},decls:5,vars:2,consts:[[3,"selectTab","openMofidBankAccountsModal","selectedTab"],[1,"money-receipt","flex-grow-1"],[3,"amount","isMobile"],[3,"isMobile"],[3,"keyboardAction","updateHistory","amount","isMobile"],[3,"keyboardAction","isMobile"]],template:function(r,s){r&1&&(C(0,"money-receipt-tab",0),V("selectTab",function(a){return s.changeSelectedTab(a)})("openMofidBankAccountsModal",function(){return s.openMofidBankAccountsHandler()}),x(),C(1,"div",1),Z(2,GQ,1,2,"lib-instant-money-receipt",2)(3,UQ,1,1,"lib-deposit-receipt",3),H(4,"receipt-history"),x()),r&2&&(F("selectedTab",s.selectedTab()),_(2),q(s.selectedTab()===s.ReceiptTabs.Instant?2:s.selectedTab()===s.ReceiptTabs.Deposit?3:-1))},dependencies:[Fn,nn,j3,K3,rC,X3],styles:[`.BankDocumentNumber[_ngcontent-%COMP%]   .dx-placeholder[_ngcontent-%COMP%]{right:10px}.BankDocumentNumber[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:4rem;top:2px;position:relative}
/*# sourceMappingURL=money-receipt.style-AO4CB23G.css.map */`],changeDetection:0});let i=e;return i})();var HQ=()=>[oC];function zQ(i,e){if(i&1&&H(0,"lib-money-receipt",4),i&2){let t=P();F("isMobile",!1)("amount",t.amount())("urlData",t.urlData())}}var Z3=(()=>{let e=class e{constructor(){this.icons=Fe,this.amount=rt(""),this.urlData=rt(void 0),this.menuSelectEvent=it(),this.moneyReceiptComponent=$t(oC)}backToMenu(){this.menuSelectEvent.emit(Ee.Menu)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["d-money-receipt-management"]],viewQuery:function(r,s){r&1&&Kt(s.moneyReceiptComponent,oC,5),r&2&&si()},inputs:{amount:[1,"amount"],urlData:[1,"urlData"]},outputs:{menuSelectEvent:"menuSelectEvent"},decls:8,vars:1,consts:[[1,"d-flex","flex-column","h-100"],[1,"d-flex","align-items-center","py-3","px-2","bg-principal","bg-principal-4x-dark","shadow-sm","position-relative","z-2"],["width","36","height","36",1,"cup","text-secondary",3,"click","iconName"],[1,"mb-0","text-body"],[1,"d-flex","flex-column","flex-grow-1","overflow-hidden",3,"isMobile","amount","urlData"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"div",1)(2,"svg-icon",2),V("click",function(){return s.backToMenu()}),x(),C(3,"h6",3),A(4,"\u0648\u0627\u0631\u06CC\u0632 \u0648\u062C\u0647"),x()(),Z(5,zQ,1,3),Dn(6,5,HQ),kn(),x()),r&2&&(_(2),F("iconName",s.icons.ChevronRight))},dependencies:[Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var WQ=()=>[v0],$Q=i=>({spin:i});function KQ(i,e){if(i&1){let t=ne();C(0,"div",5),V("click",function(){z(t);let r=P();return W(r.refreshCurrentTab())}),H(1,"svg-icon",6),x()}if(i&2){let t=P();_(),F("iconName",t.icons.refresh)("ngClass",de(2,$Q,t.reloading()))}}function jQ(i,e){i&1&&H(0,"lib-wallet-card",7),i&2&&F("isMobile",!1)}var Q3=(()=>{let e=class e{constructor(n){this.walletCardService=n,this.icons=Fe,this.walletCardComponent=$t(v0),this.menuSelectEvent=it(),this.reloading=pe(!1),this.WalletCardStatusType=c6,this.walletCardStatusSubject=Ce(this.walletCardService.walletCardStatusSubject)}backToMenu(){this.walletCardService.userRegisterVerifySubject.value?this.walletCardService.userRegisterVerifySubject.next(!1):this.menuSelectEvent.emit(Ee.Menu)}refreshCurrentTab(){this.reloading.set(!0);let n=this.walletCardComponent();n&&(n.loadWalletData(),n.loadWalletBalance(),n.reloadHistory()),wo(700).subscribe(()=>{this.reloading.set(!1)})}};e.\u0275fac=function(r){return new(r||e)(st(Ho))},e.\u0275cmp=ge({type:e,selectors:[["d-wallet-card-management"]],viewQuery:function(r,s){r&1&&Kt(s.walletCardComponent,v0,5),r&2&&si()},outputs:{menuSelectEvent:"menuSelectEvent"},decls:9,vars:2,consts:[[1,"d-flex","align-items-center","justify-content-between","py-3","px-2","flex-shrink-0","bg-principal","bg-principal-4x-dark","shadow-sm","position-relative","z-2"],[1,"d-flex","align-items-center"],["width","36","height","36",1,"cup","text-secondary",3,"click","iconName"],[1,"mb-0"],["title","\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F",1,"d-flex","align-items-center","cup"],["title","\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F",1,"d-flex","align-items-center","cup",3,"click"],["width","24","height","24",1,"ms-1","px-2","text-secondary",3,"iconName","ngClass"],[1,"wallet-card","d-flex","flex-column","flex-grow-1","overflow-auto",3,"isMobile"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"div",1)(2,"svg-icon",2),V("click",function(){return s.backToMenu()}),x(),C(3,"h6",3),A(4,"\u0645\u0641\u06CC\u062F \u06A9\u0627\u0631\u062A"),x()(),Z(5,KQ,2,4,"div",4),x(),Z(6,jQ,1,1),Dn(7,6,WQ),kn()),r&2&&(_(2),F("iconName",s.icons.ChevronRight),_(3),q(s.walletCardStatusSubject()===s.WalletCardStatusType.CARD_VERIFIED_OTP?5:-1))},dependencies:[Oe,Ke,Ve],styles:[`.overlay-management{position:fixed;left:0;right:0;bottom:0;z-index:1000;padding-top:1rem;-webkit-transition:transform .2s!important;-moz-transition:transform .2s!important;-ms-transition:transform .2s!important;-o-transition:transform .2s!important;will-change:transition;-webkit-transform:translate3d(0,100%,0);-moz-transform:translate3d(0,100%,0);-ms-transform:translate3d(0,100%,0);-o-transform:translate3d(0,100%,0);will-change:transform;max-height:85%}.overlay-management:before{content:"";position:absolute;top:10px;right:50%;width:50px;margin-right:-25px;height:5px;border-radius:10px;background-color:rgba(var(--bs-secondary-rgb),.5)}.overlay-management.overlay-management--show{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);-o-transform:translate3d(0,0,0);will-change:transform}.overlay-management lib-search-symbol-input .mdi{margin-left:1rem}
/*# sourceMappingURL=d-wallet-card-management.component-FBTKUTBD.css.map */
`],encapsulation:2,changeDetection:0});let i=e;return i})();var YQ=()=>[y0],qQ=i=>({spin:i});function XQ(i,e){if(i&1&&(C(0,"span",5),H(1,"svg-icon",9),C(2,"small"),A(3,"\u062D\u0627\u0645\u06CC \u0641\u0639\u0627\u0644 \u0645\u06CC \u0628\u0627\u0634\u062F"),x()()),i&2){let t=P();_(),F("iconName",t.icons.Check)}}function ZQ(i,e){if(i&1&&(C(0,"span",6),H(1,"svg-icon",9),C(2,"small"),A(3,"\u062D\u0627\u0645\u06CC \u0641\u0639\u0627\u0644 \u0646\u0645\u06CC \u0628\u0627\u0634\u062F!"),x()()),i&2){let t=P();_(),F("iconName",t.icons.Close)}}function QQ(i,e){i&1&&H(0,"lib-payment",10),i&2&&F("isMobile",!1)}var J3=(()=>{let e=class e{constructor(){this.agreementStore=ee(ZA),this.hasHami=Ce(this.agreementStore.hamiAgreementStatus$.pipe(Be(n=>n===XA.Confirm))),this.icons=Fe,this.paymentComponent=$t(y0),this.menuSelectEvent=it()}backToMenu(){this.menuSelectEvent.emit(Ee.Menu)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["d-payment-management"]],viewQuery:function(r,s){r&1&&Kt(s.paymentComponent,y0,5),r&2&&si()},outputs:{menuSelectEvent:"menuSelectEvent"},decls:14,vars:7,consts:[[1,"d-flex","align-items-center","justify-content-between","py-3","px-2","flex-shrink-0","bg-principal","bg-principal-4x-dark","shadow-sm","position-relative","z-2"],[1,"d-flex","align-items-center"],["width","36","height","36",1,"cup","text-secondary",3,"click","iconName"],[1,"mb-0","text-body"],["href","https://learning.emofid.com/introduction-to-hami-fund/","target","_blank",1,"d-flex","align-items-center"],[1,"text-success"],[1,"text-warning"],["width","18","height","18",1,"ms-1",3,"iconName"],["width","24","height","24","title","\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F",1,"cup","px-2","text-secondary",3,"click","iconName","ngClass"],["width","18","height","18",3,"iconName"],[1,"d-flex","flex-column","flex-grow-1","overflow-auto",3,"isMobile"]],template:function(r,s){if(r&1&&(C(0,"div",0)(1,"div",1)(2,"svg-icon",2),V("click",function(){return s.backToMenu()}),x(),C(3,"h6",3),A(4,"\u0628\u0631\u062F\u0627\u0634\u062A \u0648\u062C\u0647"),x()(),C(5,"div",1)(6,"a",4),Z(7,XQ,4,1,"span",5)(8,ZQ,4,1,"span",6),H(9,"svg-icon",7),x(),C(10,"svg-icon",8),V("click",function(){let a;return(a=s.paymentComponent())==null?null:a.getPaymentOptions()}),x()()(),Z(11,QQ,1,1),Dn(12,11,YQ),kn()),r&2){let o;_(2),F("iconName",s.icons.ChevronRight),_(5),q(s.hasHami()?7:8),_(2),F("iconName",s.icons.QuestionBox),_(),F("iconName",s.icons.refresh)("ngClass",de(5,qQ,(o=s.paymentComponent())==null||(o=o.paymentInfo())==null?null:o.loading()))}},dependencies:[Ke,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();function JQ(i,e){}var eN=(()=>{let e=class e{constructor(){this.icons=Fe,this.menuSelectEvent=new lt,this.rejectedEvent=new lt,this.subscriptions=[]}set stockIsin(n){this.conditionalActiveIsin=n}ngOnInit(){return Uc(this,null,function*(){import("./chunk-3WZTNRQY.js").then(({ConditionalComponent:n})=>{let r=this.dynamicHost.viewContainerRef;r.clear();let s=r.createComponent(n);s.setInput("stockIsin",this.conditionalActiveIsin),this.conditionId&&s.setInput("conditionId",this.conditionId),s.location.nativeElement.className="d-flex flex-column flex-grow-1 overflow-hidden",this.conditionalComponent=s.instance,this.subscriptions.push(this.conditionalComponent.rejectedEvent.subscribe(()=>{this.rejectedEvent.emit()})),this.subscriptions.push(this.conditionalComponent.menuSelectEvent.subscribe(()=>{this.backToMenu()}))})})}ngOnDestroy(){this.subscriptions?.forEach(n=>n?.unsubscribe())}backToMenu(){this.menuSelectEvent.emit(Ee.Menu)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["d-conditional-management"]],viewQuery:function(r,s){if(r&1&&bi(xd,7),r&2){let o;Si(o=xi())&&(s.dynamicHost=o.first)}},inputs:{stockIsin:"stockIsin",conditionId:"conditionId"},outputs:{menuSelectEvent:"menuSelectEvent",rejectedEvent:"rejectedEvent"},decls:1,vars:0,consts:[["appDynamic",""]],template:function(r,s){r&1&&Z(0,JQ,0,0,"ng-template",0)},dependencies:[Oe,xd],encapsulation:2});let i=e;return i})();var eJ=()=>[import("./chunk-QDN4ATEK.js").then(i=>i.BrokerChangeComponent)];function tJ(i,e){i&1&&H(0,"div",3),i&2&&F("isMobile",!0)}var tN=(()=>{let e=class e{constructor(){this.icons=Fe,this.menuSelectEvent=it()}backToMenu(){this.menuSelectEvent.emit(Ee.Menu)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["d-broker-change-management"]],outputs:{menuSelectEvent:"menuSelectEvent"},decls:7,vars:1,consts:[[1,"d-flex","align-items-center","py-3","px-2","bg-principal","bg-principal-4x-dark","shadow-sm","position-relative","z-2"],["width","36","height","36",1,"cup","text-secondary",3,"click","iconName"],[1,"mb-0","text-body"],["lib-broker-change","",1,"d-flex","flex-column","flex-grow-1","overflow-auto",3,"isMobile"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"svg-icon",1),V("click",function(){return s.backToMenu()}),x(),C(2,"h6",2),A(3,"\u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0627\u0631\u06AF\u0632\u0627\u0631 \u0646\u0627\u0638\u0631"),x()(),Z(4,tJ,1,1),Dn(5,4,eJ),kn()),r&2&&(_(),F("iconName",s.icons.ChevronRight))},dependencies:[Oe,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var iJ=()=>[import("./chunk-26URETHX.js").then(i=>i.FeedbackComponent)];function nJ(i,e){i&1&&H(0,"lib-feedback",3)}var iN=(()=>{let e=class e{constructor(){this.icons=Fe,this.menuSelectEvent=it()}backToMenu(){this.menuSelectEvent.emit(Ee.Menu)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["d-feedback-management"]],outputs:{menuSelectEvent:"menuSelectEvent"},decls:7,vars:1,consts:[[1,"d-flex","align-items-center","py-3","px-2","bg-principal","bg-principal-4x-dark","shadow-sm","position-relative","z-2"],["width","36","height","36",1,"cup","text-secondary",3,"click","iconName"],[1,"mb-0","text-body"],[1,"d-flex","flex-column","h-100","overflow-auto"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"svg-icon",1),V("click",function(){return s.backToMenu()}),x(),C(2,"h6",2),A(3,"\u0628\u0627\u0632\u062E\u0648\u0631\u062F"),x()(),Z(4,nJ,1,0),Dn(5,4,iJ),kn()),r&2&&(_(),F("iconName",s.icons.ChevronRight))},dependencies:[Oe,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var rJ=i=>({loading:i}),nN=(i,e)=>({"flex-column":i,"flex-row":e});function sJ(i,e){if(i&1&&(C(0,"div",8),H(1,"svg-icon",19),x()),i&2){let t,n=P(2);_(),F("iconName",n.getDeviceIcon((t=n.currentSession())==null?null:t.deviceType,(t=n.currentSession())==null||t.deviceInfo==null?null:t.deviceInfo.os))}}function oJ(i,e){if(i&1&&(C(0,"div",9),H(1,"svg-icon",19),x()),i&2){let t,n=P(2);_(),F("iconName",n.getDeviceIcon((t=n.currentSession())==null?null:t.deviceType,(t=n.currentSession())==null||t.deviceInfo==null?null:t.deviceInfo.os))}}function aJ(i,e){if(i&1&&(C(0,"div",10),H(1,"svg-icon",19),x()),i&2){let t,n=P(2);_(),F("iconName",n.getDeviceIcon((t=n.currentSession())==null?null:t.deviceType,(t=n.currentSession())==null||t.deviceInfo==null?null:t.deviceInfo.os))}}function lJ(i,e){if(i&1&&(C(0,"div",5),A(1,"\u062F\u0633\u062A\u06AF\u0627\u0647 \u0641\u0639\u0644\u06CC"),x(),C(2,"div",6)(3,"div",7),Z(4,sJ,2,1,"div",8)(5,oJ,2,1,"div",9)(6,aJ,2,1,"div",10),x(),C(7,"div",11)(8,"div",12)(9,"div",13)(10,"div",14),A(11),x(),C(12,"div",15),A(13),x()()(),C(14,"div",16)(15,"div",17)(16,"span"),A(17,"\u0648\u0631\u0648\u062F "),x(),C(18,"span",18),A(19),fe(20,"jdate"),fe(21,"positiveNumber"),x()()()()()),i&2){let t,n,r,s,o=P();_(4),q(((t=o.currentSession())==null||t.deviceInfo==null?null:t.deviceInfo.os)==="Android"?4:((t=o.currentSession())==null||t.deviceInfo==null?null:t.deviceInfo.os)==="iOS"?5:6),_(7),ye(" ",((n=o.currentSession())==null||n.deviceInfo==null?null:n.deviceInfo.os)+", "+((n=o.currentSession())==null||n.deviceInfo==null?null:n.deviceInfo.browser)," "),_(2),ye(" ip:",(r=o.currentSession())!=null&&r.ip.startsWith(":")?(r=o.currentSession())==null?null:r.ip.substring(7):(r=o.currentSession())==null?null:r.ip," "),_(6),Re(Te(21,7,ci(20,4,(s=o.currentSession())==null?null:s.createDateTime,"time")))}}function cJ(i,e){if(i&1){let t=ne();C(0,"div",2),A(1," \u062F\u06CC\u06AF\u0631 \u062F\u0633\u062A\u06AF\u0627\u0647\u200C\u0647\u0627\u06CC \u0641\u0639\u0627\u0644 "),C(2,"div",20),V("click",function(){z(t);let r=P();return W(r.removeAllSessions())}),H(3,"svg-icon",21),A(4," \u062E\u0631\u0648\u062C \u0647\u0645\u0647 \u062F\u0633\u062A\u06AF\u0627\u0647\u200C\u0647\u0627 "),x()()}if(i&2){let t=P();_(3),F("iconName",t.icons.Logout)}}function uJ(i,e){if(i&1&&(C(0,"div",22),H(1,"svg-icon",19),x()),i&2){let t=P().$implicit,n=P();_(),F("iconName",n.getDeviceIcon(t.deviceType,t==null||t.deviceInfo==null?null:t.deviceInfo.os))}}function dJ(i,e){if(i&1&&(C(0,"div",23),H(1,"svg-icon",28),x()),i&2){let t=P().$implicit,n=P();_(),F("iconName",n.getDeviceIcon(t.deviceType,t==null||t.deviceInfo==null?null:t.deviceInfo.os))}}function hJ(i,e){if(i&1&&(C(0,"div",7),H(1,"svg-icon",19),x()),i&2){let t=P().$implicit,n=P();_(),F("iconName",n.getDeviceIcon(t.deviceType,t==null||t.deviceInfo==null?null:t.deviceInfo.os))}}function pJ(i,e){if(i&1){let t=ne();C(0,"span",20),V("click",function(){z(t);let r=P().$implicit,s=P();return W(s.removeSession(r))}),H(1,"svg-icon",21),A(2," \u062E\u0631\u0648\u062C \u062F\u0633\u062A\u06AF\u0627\u0647 "),x()}if(i&2){let t=P(2);_(),F("iconName",t.icons.Logout)}}function mJ(i,e){if(i&1&&(C(0,"div",4),Z(1,uJ,2,1,"div",22)(2,dJ,2,1,"div",23)(3,hJ,2,1,"div",7),C(4,"div",11)(5,"div",12)(6,"div",24)(7,"div"),A(8),x(),C(9,"div",15),A(10),x()(),C(11,"div",25),Z(12,pJ,3,1,"span",26),x()(),C(13,"div",27)(14,"div",17)(15,"span"),A(16,"\u0648\u0631\u0648\u062F "),x(),C(17,"span",18),A(18),fe(19,"jdate"),fe(20,"positiveNumber"),x()()()()()),i&2){let t=e.$implicit;_(),q(t.deviceInfo.os==="Android"?1:t.deviceInfo.os==="iOS"?2:3),_(5),F("ngClass",zi(11,nN,!t.isExpired&&!t.logoutDate,t.isExpired||t.logoutDate)),_(2),ye(" ",(t==null||t.deviceInfo==null?null:t.deviceInfo.os)+", "+(t==null||t.deviceInfo==null?null:t.deviceInfo.browser)," "),_(2),ye(" ip:",t.ip.startsWith(":")?t.ip.substring(7):t.ip," "),_(2),q(!t.isExpired&&!t.logoutDate?12:-1),_(6),Re(Te(20,9,ci(19,6,t.createDateTime,"time")))}}function gJ(i,e){if(i&1&&(C(0,"div",22),H(1,"svg-icon",19),x()),i&2){let t=P().$implicit,n=P(2);_(),F("iconName",n.getDeviceIcon(t.deviceType,t==null||t.deviceInfo==null?null:t.deviceInfo.os))}}function fJ(i,e){if(i&1&&(C(0,"div",23),H(1,"svg-icon",28),x()),i&2){let t=P().$implicit,n=P(2);_(),F("iconName",n.getDeviceIcon(t.deviceType,t==null||t.deviceInfo==null?null:t.deviceInfo.os))}}function vJ(i,e){if(i&1&&(C(0,"div",7),H(1,"svg-icon",19),x()),i&2){let t=P().$implicit,n=P(2);_(),F("iconName",n.getDeviceIcon(t.deviceType,t==null||t.deviceInfo==null?null:t.deviceInfo.os))}}function yJ(i,e){if(i&1&&(C(0,"div",30)(1,"span"),A(2,"\u062E\u0631\u0648\u062C "),x(),C(3,"span",18),A(4),fe(5,"jdate"),fe(6,"positiveNumber"),x()()),i&2){let t=P().$implicit;_(4),Re(Te(6,4,ci(5,1,t.logoutDate,"time")))}}function CJ(i,e){if(i&1&&(C(0,"div",31)(1,"span"),A(2,"\u0645\u0646\u0642\u0636\u06CC"),x(),C(3,"span",18),A(4),fe(5,"jdate"),fe(6,"positiveNumber"),x()()),i&2){let t=P().$implicit;_(4),Re(Te(6,4,ci(5,1,t.expiryDate,"time")))}}function bJ(i,e){if(i&1&&(C(0,"div",4),Z(1,gJ,2,1,"div",22)(2,fJ,2,1,"div",23)(3,vJ,2,1,"div",7),C(4,"div",11)(5,"div",12)(6,"div",24)(7,"div"),A(8),x(),C(9,"div",15),A(10),x()()(),C(11,"div",29)(12,"div",17)(13,"span"),A(14,"\u0648\u0631\u0648\u062F "),x(),C(15,"span",18),A(16),fe(17,"jdate"),fe(18,"positiveNumber"),x()(),Z(19,yJ,7,6,"div",30)(20,CJ,7,6,"div",31),x()()()),i&2){let t=e.$implicit;_(),q(t.deviceInfo.os==="Android"?1:t.deviceInfo.os==="iOS"?2:3),_(5),F("ngClass",zi(12,nN,!t.isExpired&&!t.logoutDate,t.isExpired||t.logoutDate)),_(2),ye(" ",(t==null||t.deviceInfo==null?null:t.deviceInfo.os)+", "+(t==null||t.deviceInfo==null?null:t.deviceInfo.browser)," "),_(2),ye(" ip:",t.ip.startsWith(":")?t.ip.substring(7):t.ip," "),_(6),Re(Te(18,10,ci(17,7,t.createDateTime,"time"))),_(3),q(t.logoutDate?19:-1),_(),q(t.isExpired?20:-1)}}function SJ(i,e){if(i&1&&(C(0,"div",5),A(1,"\u0633\u0627\u0628\u0642\u0647 \u0648\u0631\u0648\u062F \u0648 \u062E\u0631\u0648\u062C"),x(),St(2,bJ,21,15,"div",4,zr)),i&2){let t=P();_(2),xt(t.accountActivities())}}var rN=(()=>{let e=class e{constructor(n,r){this.accountService=n,this.notificationService=r,this.icons=Fe,this.loading=pe(!0),this.allAccountActivities=pe(null),this.activities=Ce(this.accountService.getUserAccountActivities().pipe(Je(s=>{this.loading.set(!1),this.allAccountActivities.set(s)}))),this.activeSessions=oi(()=>this.allAccountActivities()?.filter(s=>!s.isCurrentSession&&!s.isExpired&&!s.logoutDate)),this.accountActivities=oi(()=>this.allAccountActivities()?.filter(s=>!s.isCurrentSession&&(s.isExpired||s.logoutDate))),this.currentSession=oi(()=>this.allAccountActivities()?.find(s=>s.isCurrentSession))}ngOnInit(){setTimeout(()=>{this.accountService.accountActivitySeen(!0)},1e3)}getDeviceIcon(n,r){switch(n){case Cn.Mobile:{if(r==="Android")return"android";if(r==="iOS")return"apple";break}case Cn.Desktop:return"computer"}}removeSession(n){this.accountService.removeSession([n.id]).subscribe({next:()=>{n.logoutDate=new Date(Date.now()),this.notificationService.alert("\u062E\u0631\u0648\u062C \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0646\u062C\u0627\u0645 \u0634\u062F",_t.success)},error:()=>{this.notificationService.alert("\u062E\u0631\u0648\u062C \u0645\u0648\u0641\u0642\u06CC\u062A \u0622\u0645\u06CC\u0632 \u0646\u0628\u0648\u062F",_t.danger)}})}removeAllSessions(){this.accountService.removeSession(this.activeSessions().map(n=>n.id)).subscribe({next:()=>{this.allAccountActivities.update(n=>n.map(r=>this.activeSessions().map(s=>s.id).includes(r.id)?dt(Se({},r),{logoutDate:new Date(Date.now())}):Se({},r))),this.notificationService.alert("\u062E\u0631\u0648\u062C \u0627\u0632 \u0647\u0645\u0647 \u062F\u0633\u062A\u06AF\u0627\u0647\u200C\u0647\u0627 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0646\u062C\u0627\u0645 \u0634\u062F",_t.success)},error:()=>{this.notificationService.alert("\u062E\u0631\u0648\u062C \u0627\u0632 \u0647\u0645\u0647 \u062F\u0633\u062A\u06AF\u0627\u0647\u200C\u0647\u0627 \u0628\u0627 \u0645\u0634\u06A9\u0644 \u0645\u0648\u0627\u062C\u0647 \u0634\u062F",_t.danger)}})}};e.\u0275fac=function(r){return new(r||e)(st(Er),st(pi))},e.\u0275cmp=ge({type:e,selectors:[["lib-account-activity"]],decls:8,vars:6,consts:[[1,"overflow-auto","h-100","ss02",3,"ngClass"],[1,"list-group","list-group-flush"],[1,"my-2","mx-3","text-muted","d-flex","align-items-center","justify-content-between"],[1,"mb-3"],[1,"d-flex","list-group-item","p-2","align-items-center","bg-principal","bg-principal-3x-dark-mobile","bg-principal-hover"],[1,"my-2","mx-3","text-muted"],[1,"d-flex","list-group-item","p-2","align-items-center","bg-principal","bg-principal-3x-dark-mobile","bg-principal-hover","mb-3"],[1,"text-center","flex-shrink-0","bg-primary","text-light","d-flex","align-items-center","justify-content-center","ms-2",2,"width","40px","height","40px","border-radius","10px"],[1,"text-center","flex-shrink-0","text-light","d-flex","align-items-center","justify-content-center",2,"width","40px","height","40px","border-radius","10px","background-color","#9cc820"],[1,"text-center","flex-shrink-0","bg-emphasis","bg-emphasis-dark","text-light","d-flex","align-items-center","justify-content-center",2,"width","40px","height","40px","border-radius","10px"],[1,"text-center","flex-shrink-0","bg-primary","text-light","d-flex","align-items-center","justify-content-center",2,"width","40px","height","40px","border-radius","10px"],[1,"flex-grow-1","p-2","position-69","ms-2"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","w-100","justify-content-between","h6"],[1,"fw-bold"],[1,"small","ss01","text-start"],[1,"align-items-center","border-principal-2x","border-principal-4x-dark","border-top","d-flex","flex-wrap","justify-content-between","pt-2"],[1,"text-success","d-flex","align-items-center","me-2"],[1,"text-muted","ms-2","text-nowrap"],["width","18","height","18",1,"px-2",3,"iconName"],[1,"text-danger","cup",3,"click"],["width","18","height","18",3,"iconName"],[1,"text-center","flex-shrink-0","text-light","d-flex","align-items-center","justify-content-center","ms-2",2,"width","40px","height","40px","border-radius","10px","background-color","#9cc820"],[1,"text-center","flex-shrink-0","bg-emphasis","text-light","d-flex","align-items-center","justify-content-center","ms-2",2,"width","40px","height","40px","border-radius","10px"],[1,"fw-bold","d-flex","w-100","justify-content-between","h6",3,"ngClass"],[1,"align-self-center","flex-shrink-0"],[1,"text-danger","cup"],[1,"border-top","border-principal-2x","border-principal-4x-dark","d-flex","justify-content-between","align-items-center","pt-2"],["width","18","height","18",1,"px-2","text-body-reverse",3,"iconName"],[1,"border-principal-2x","border-principal-4x-dark","border-top","d-flex","flex-wrap","justify-content-between","pt-2"],[1,"text-danger","d-flex","align-items-center"],[1,"text-warning","d-flex","align-items-center"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"div",1),Z(2,lJ,22,9)(3,cJ,5,1,"div",2),C(4,"div",3),St(5,mJ,21,14,"div",4,zr),x(),Z(7,SJ,4,0),x()()),r&2&&(F("ngClass",de(4,rJ,s.loading())),_(2),q(s.currentSession()?2:-1),_(),q(s.activeSessions()&&s.activeSessions().length>0?3:-1),_(2),xt(s.activeSessions()),_(2),q(s.accountActivities()?7:-1))},dependencies:[Ke,ys,Md,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var sN=(()=>{let e=class e{constructor(){this.icons=Fe,this.menuSelectEvent=it()}backToMenu(){this.menuSelectEvent.emit(Ee.Menu)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["d-account-activity-management"]],outputs:{menuSelectEvent:"menuSelectEvent"},decls:6,vars:1,consts:[[1,"d-flex","align-items-center","justify-content-between","py-3","px-2","flex-shrink-0","bg-principal","bg-principal-4x-dark","shadow-sm","position-relative","z-2"],[1,"d-flex","align-items-center"],["width","36","height","36",1,"cup","text-secondary",3,"click","iconName"],[1,"mb-0"],[1,"d-flex","flex-column","flex-grow-1","overflow-hidden"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"div",1)(2,"svg-icon",2),V("click",function(){return s.backToMenu()}),x(),C(3,"h6",3),A(4,"\u062F\u0633\u062A\u06AF\u0627\u0647\u200C\u0647\u0627\u06CC \u0641\u0639\u0627\u0644"),x()()(),H(5,"lib-account-activity",4)),r&2&&(_(2),F("iconName",s.icons.ChevronRight))},dependencies:[Oe,rN,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var xJ=i=>({spin:i}),_J=i=>({"text-primary":i}),oN=(()=>{let e=class e{constructor(n){this.messageFacade=n,this.icons=Fe,this.childMessages=$t(b0),this.menuSelectEvent=it(),this.urlData=rt(void 0),this.reloading=pe(!1),this.searchActive=pe(!1),this.selectedMessageType=pe(gb.MarketMessage),this.messageTab=pe(CM.Broker),this.lastMarketMessageTime=Ce(this.messageFacade.getMarketLastUpdateTime$()),this.lastMofidMessageUpdateTime=Ce(this.messageFacade.getMofidLastUpdateTime$()),this.lastUpdateTime=oi(()=>this.selectedMessageType()===gb.MarketMessage?this.lastMarketMessageTime():this.lastMofidMessageUpdateTime())}ngOnInit(){return Uc(this,null,function*(){let n=this.urlData(),r=n?.selectedTab?n?.selectedTab:yield this.messageFacade.getTabBasedOnUnreadMessageAsync();this.messageTab.set(r),wo(200).subscribe(()=>this.refreshCurrentTab())})}backToMenu(){this.menuSelectEvent.emit(Ee.Menu)}refreshCurrentTab(){this.setLoading(),this.messageFacade.loadMessages(this.selectedMessageType())}setLoading(){this.reloading.set(!0),setTimeout(()=>{this.reloading.set(!1)},700)}onChangeTap(n){this.selectedMessageType.set(n.type),this.messageTab.set(n.tab)}toggleSearchActive(){this.searchActive.update(n=>!n)}};e.\u0275fac=function(r){return new(r||e)(st(Bl))},e.\u0275cmp=ge({type:e,selectors:[["d-messages-management"]],viewQuery:function(r,s){r&1&&Kt(s.childMessages,b0,5),r&2&&si()},inputs:{urlData:[1,"urlData"]},outputs:{menuSelectEvent:"menuSelectEvent"},decls:15,vars:15,consts:[[1,"d-flex","align-items-center","justify-content-between","py-3","px-2","flex-shrink-0","bg-principal","bg-principal-4x-dark"],[1,"d-flex","align-items-center"],["width","36","height","36",1,"cup",3,"click","iconName"],[1,"mb-0"],[1,"d-flex","align-items-center","cup"],["title","\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F",1,"d-flex","align-items-center",3,"click"],[1,"me-1"],["width","24","height","24",1,"ms-1","line-height-none",3,"iconName","ngClass"],["width","24","height","24",1,"px-2","cup","line-height-none",3,"tap","iconName","ngClass"],[1,"d-flex","flex-column","flex-grow-1","overflow-hidden",3,"changeTap","messageTab","searchActive"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"div",1)(2,"svg-icon",2),V("click",function(){return s.backToMenu()}),x(),C(3,"h6",3),A(4,"\u067E\u06CC\u0627\u0645\u200C\u0647\u0627"),x()(),C(5,"div",4)(6,"div",5),V("click",function(){return s.refreshCurrentTab()}),C(7,"small",6),A(8,"\u0622\u062E\u0631\u06CC\u0646 \u0628\u0631\u0648\u0632\u200C\u0631\u0633\u0627\u0646\u06CC:"),x(),C(9,"span"),A(10),fe(11,"date"),x(),H(12,"svg-icon",7),x(),C(13,"svg-icon",8),V("tap",function(){return s.toggleSearchActive()}),x()()(),C(14,"lib-messages",9),V("changeTap",function(a){return s.onChangeTap(a)}),x()),r&2&&(_(2),F("iconName",s.icons.ChevronRight),_(8),ye(" ",ci(11,8,s.lastUpdateTime(),"HH:mm:ss")," "),_(2),F("iconName",s.icons.refresh)("ngClass",de(11,xJ,s.reloading())),_(),F("iconName",s.icons.CommentSearch)("ngClass",de(13,_J,s.searchActive())),_(),F("messageTab",s.messageTab())("searchActive",s.searchActive()))},dependencies:[Ke,O2,b0,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var wJ=()=>[S6],EJ=i=>({spin:i});function TJ(i,e){i&1&&(C(0,"h6",3),A(1,"\u0635\u0646\u062F\u0648\u0642\u200C\u0647\u0627\u06CC \u0645\u0641\u06CC\u062F"),x())}function MJ(i,e){if(i&1&&(C(0,"h6",3),A(1," \u0635\u0646\u062F\u0648\u0642 "),C(2,"span"),A(3),x()()),i&2){let t,n=P(2);_(3),Re((t=n.fundPageStateSignal().activeFund)==null?null:t.name)}}function AJ(i,e){i&1&&(C(0,"h6",3),A(1,"\u067E\u0630\u06CC\u0631\u0647 \u0646\u0648\u06CC\u0633\u06CC"),x())}function PJ(i,e){if(i&1&&(C(0,"h6",3),A(1," \u062A\u0631\u0627\u06A9\u0646\u0634 \u0647\u0627\u06CC \u0635\u0646\u062F\u0648\u0642 "),C(2,"span"),A(3),x()()),i&2){let t,n=P(2);_(3),Re((t=n.fundPageStateSignal().activeFund)==null?null:t.name)}}function DJ(i,e){i&1&&(C(0,"h6",3),A(1,"\u062A\u0631\u0627\u06A9\u0646\u0634 \u0647\u0627\u06CC \u0645\u0646"),x())}function kJ(i,e){if(i&1){let t=ne();C(0,"div",4)(1,"div",5),V("click",function(){z(t);let r=P(2);return W(r.refreshCurrentPage(r.fundPageStateSignal().name))}),H(2,"span")(3,"svg-icon",6),x()()}if(i&2){let t=P(2);_(3),F("iconName",t.icons.refresh)("ngClass",de(2,EJ,t.reloading()))}}function IJ(i,e){if(i&1){let t=ne();C(0,"div",1)(1,"svg-icon",2),V("click",function(){z(t);let r=P();return W(r.back(r.fundPageStateSignal().name))}),x(),Z(2,TJ,2,0,"h6",3)(3,MJ,4,1,"h6",3)(4,AJ,2,0,"h6",3)(5,PJ,4,1,"h6",3)(6,DJ,2,0,"h6",3),x(),Z(7,kJ,4,4,"div",4)}if(i&2){let t,n,r=P();_(),F("iconName",r.icons.ChevronRight),_(),q(r.fundPageStateSignal().name===r.FundPageName.Fund?2:-1),_(),q(r.fundPageStateSignal().name===r.FundPageName.FundDetail?3:-1),_(),q(r.fundPageStateSignal().name===r.FundPageName.NoneEtf?4:-1),_(),q(r.fundPageStateSignal().name===r.FundPageName.Transaction&&((t=r.fundPageStateSignal().activeFund)!=null&&t.code)?5:-1),_(),q(r.fundPageStateSignal().name===r.FundPageName.Transaction&&!((n=r.fundPageStateSignal().activeFund)!=null&&n.code)?6:-1),_(),q(r.fundPageStateSignal().name===r.FundPageName.Transaction||r.fundPageStateSignal().name===r.FundPageName.Fund?7:-1)}}function FJ(i,e){if(i&1&&H(0,"fund",7),i&2){let t=P();F("fundCode",t.fundCode())("isMobile",!1)}}var aN=(()=>{let e=class e{constructor(n){this.fundsFacade=n,this.FundPageName=Bp,this.icons=Fe,this.subs=[],this.menuSelectEvent=it(),this.fundCode=rt(""),this.reloading=pe(!1),this.fundPageStateSignal=Ce(this.fundsFacade.fundPageState$)}ngOnInit(){this.refreshCurrentPage(Bp.Fund)}ngOnDestroy(){this.subs.forEach(n=>n.unsubscribe()),this.fundsFacade.resetFundPages()}back(n){this.fundsFacade.hideOverlay(),n!==Bp.Fund?this.fundsFacade.backFundPage():this.menuSelectEvent.emit(Ee.Menu)}refreshCurrentPage(n){this.reloading.set(!0);let r=wo(400).subscribe(()=>this.reloading.set(!1));if(this.subs.push(r),n===Bp.Transaction){this.fundsFacade.reloadTransactions();return}let s=this.fundsFacade.loadFundData().subscribe();this.subs.push(s)}};e.\u0275fac=function(r){return new(r||e)(st(S0))},e.\u0275cmp=ge({type:e,selectors:[["d-fund-management"]],inputs:{fundCode:[1,"fundCode"]},outputs:{menuSelectEvent:"menuSelectEvent"},decls:5,vars:1,consts:[[1,"d-flex","align-items-center","justify-content-between","py-3","px-2","flex-shrink-0","bg-principal","bg-principal-4x-dark","shadow-sm","position-relative","z-2"],[1,"d-flex","align-items-center"],["width","36","height","36",1,"cup",3,"click","iconName"],[1,"mb-0"],[1,"d-flex","align-items-center","cup"],["title","\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F",1,"d-flex","align-items-center",3,"click"],["width","24","height","24",1,"ms-1","px-2","line-height-none","text-secondary",3,"iconName","ngClass"],[1,"d-flex","flex-column","overflow-hidden","h-100",3,"fundCode","isMobile"]],template:function(r,s){r&1&&(C(0,"div",0),Z(1,IJ,8,7),x(),Z(2,FJ,1,2),Dn(3,2,wJ),kn()),r&2&&(_(),q(s.fundPageStateSignal()?1:-1))},dependencies:[Oe,Ke,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var OJ=(i,e)=>e.id,LJ=i=>({active:i});function RJ(i,e){if(i&1&&H(0,"svg-icon",31),i&2){let t=P(3).$implicit;Nt(t.mdIconClass),F("iconName",t.svgIcon)}}function NJ(i,e){if(i&1){let t=ne();C(0,"a",28),V("click",function(){z(t);let r=P(2).$implicit,s=P();return W(s.onItemClick(r.type))}),C(1,"span",29),Z(2,RJ,1,3,"svg-icon",30),A(3),x()()}if(i&2){let t=P(2).$implicit,n=P();F("ngClass",de(5,LJ,n.hasConditionalNotif()))("id",t.id),_(),F("id",t.id+"-outer-span"),_(),q(t!=null&&t.svgIcon?2:-1),_(),ye(" ",t.caption," ")}}function VJ(i,e){if(i&1&&H(0,"svg-icon",31),i&2){let t=P(3).$implicit;Nt(t.mdIconClass),F("iconName",t.svgIcon)}}function BJ(i,e){i&1&&w2(0)}function GJ(i,e){if(i&1&&(C(0,"span"),A(1),fe(2,"positiveNumber"),x()),i&2){let t,n,r=P(4);Hc("badge align-self-center ",(t=r.messageFacade.getUnreadMessageState())==null?null:t.state,""),_(),ye(" ",Te(2,4,(n=r.messageFacade.getUnreadMessageState())==null?null:n.count)," ")}}function UJ(i,e){if(i&1){let t=ne();C(0,"a",32),V("click",function(){z(t);let r=P(2).$implicit,s=P();return W(s.onItemClick(r.type))}),C(1,"span",29),Z(2,VJ,1,3,"svg-icon",30),A(3),Z(4,BJ,1,0,"ng-container",33)(5,GJ,3,6,"span",34),x()()}if(i&2){let t,n=P(2).$implicit,r=P(),s=ki(37);F("id",n.id),_(),F("id",n.id+"-outer-span"),_(),q(n!=null&&n.svgIcon?2:-1),_(),ye(" ",n.caption," "),_(),F("ngTemplateOutlet",s)("ngTemplateOutletContext",n),_(),q(n.caption===r.messageCaption&&((t=r.messageFacade.getUnreadMessageState())!=null&&t.count)?5:-1)}}function HJ(i,e){if(i&1&&(C(0,"li",25),Z(1,NJ,4,7,"a",26)(2,UJ,6,7,"a",27),x()),i&2){let t=P().$implicit,n=P();mn("data-cy",t.dataCy),_(),q(t.caption===n.conditionalNotif?1:2)}}function zJ(i,e){if(i&1&&Z(0,HJ,3,2,"li",25),i&2){let t=e.$implicit;q(t.visible?0:-1)}}function WJ(i,e){i&1&&(C(0,"div",35)(1,"div"),A(2,"\u062A\u0645\u0627\u0633 \u0628\u0627 \u067E\u0634\u062A\u06CC\u0628\u0627\u0646\u06CC"),x(),C(3,"div",36),A(4,"021 8700"),x()())}function $J(i,e){i&1&&(C(0,"div",35)(1,"div"),A(2,"\u06A9\u0627\u0646\u0627\u0644 \u062A\u0644\u06AF\u0631\u0627\u0645 \u0627\u06CC\u0632\u06CC\u200C\u062A\u0631\u06CC\u062F\u0631"),x(),C(3,"div",36),A(4),x()()),i&2&&(_(4),Re("@easytrader"))}function KJ(i,e){i&1&&(C(0,"div",35)(1,"div"),A(2,"\u0635\u0641\u062D\u0647 \u0627\u06CC\u0646\u0633\u062A\u0627\u06AF\u0631\u0627\u0645 \u0645\u0641\u06CC\u062F"),x(),C(3,"div",36),A(4),x()()),i&2&&(_(4),Re("@mofidsecurities"))}function jJ(i,e){i&1&&(C(0,"small",37),A(1,"\u062C\u062F\u06CC\u062F"),x())}function YJ(i,e){if(i&1&&Z(0,jJ,2,0,"small",37),i&2){let t=e.newFeatureBadge;q(t?0:-1)}}function qJ(i,e){if(i&1){let t=ne();C(0,"logout-modal",38),V("logoutEmitter",function(r){z(t);let s=P();return W(s.onLogoutEmitter(r))})("userActivityEmitter",function(r){z(t);let s=P();return W(s.onUserActivityEmitter(r))}),x()}}var lN=(()=>{let e=class e{constructor(){this.authService=ee(Vo),this.accountService=ee(Ml),this.localStorage=ee(jM),this.conditionalNotificationService=ee(Nd),this.overlayService=ee(Id),this.messageFacade=ee(Bl),this.childrenService=ee(Mc),this.unleashService=ee(Xn),this.walletCardService=ee(Ho),this.icons=Fe,this.conditionalNotif="\u0647\u0634\u062F\u0627\u0631 \u062F\u0631\u0648\u0646 \u0628\u0631\u0646\u0627\u0645\u0647\u200C\u0627\u06CC",this.logoutModalIsVisible=pe(!1),this.hasConditionalNotif=Ce(this.conditionalNotificationService.newConditionObs$.pipe(Jt(n=>Ji(n>0)))),this.SidePanelType=Ee,this.messageCaption="\u067E\u06CC\u0627\u0645",this.version=li.version,this.build=li.build,this.menuItems=pe([]),this.guestUserMenuItems=oi(()=>this.menuItems().filter(n=>!n.doNotShowForGuest)),this.menuSelectEvent=it(),this.menuItems.set([{type:Ee.MoneyReceipt,caption:"\u0648\u0627\u0631\u06CC\u0632 \u0648\u062C\u0647",mdIconClass:"text-success",hasBadge:!1,svgIcon:"settle",doNotShowForGuest:!0,id:"d-menu-money-receipt",dataCy:"d-menu-money-receipt",visible:!0},{type:Ee.Payment,caption:"\u0628\u0631\u062F\u0627\u0634\u062A \u0648\u062C\u0647",mdIconClass:"text-primary",hasBadge:!1,svgIcon:"withdraw",doNotShowForGuest:!0,id:"d-menu-payment",dataCy:"d-menu-payment",visible:!0},{type:Ee.WalletCard,caption:"\u0645\u0641\u06CC\u062F \u06A9\u0627\u0631\u062A",mdIconClass:"text-aqua",hasBadge:!1,svgIcon:"card",doNotShowForGuest:!0,id:"d-menu-wallet-card",dataCy:"d-menu-wallet-card",visible:this.walletCardService.isWalletMenuVisible()},{type:Ee.Messages,caption:this.messageCaption,mdIconClass:"text-muted",svgIcon:"comment-load",hasBadge:!1,id:"d-menu-messages",visible:!0},{type:Ee.Funds,caption:"\u0635\u0646\u062F\u0648\u0642\u200C\u0647\u0627\u06CC \u0645\u0641\u06CC\u062F",mdIconClass:"text-grass",svgIcon:"safe",hasBadge:!1,id:"d-menu-funds",dataCy:"d-menu-funds",visible:!0},{type:Ee.Note,caption:"\u06CC\u0627\u062F\u062F\u0627\u0634\u062A\u200C\u0647\u0627",mdIconClass:"text-violet",svgIcon:"note",hasBadge:!1,newFeatureBadge:!1,id:"d-menu-note",dataCy:"d-menu-note",visible:!0},{type:Ee.Conditional,caption:this.conditionalNotif,mdIconClass:"text-warning",svgIcon:"bell",hasBadge:!1,id:"d-menu-conditional",dataCy:"d-menu-conditional",visible:!0},{type:Ee.BrokerChange,caption:"\u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0627\u0631\u06AF\u0632\u0627\u0631 \u0646\u0627\u0638\u0631",mdIconClass:"text-grapefruit",hasBadge:!1,svgIcon:"agent-change",doNotShowForGuest:!0,id:"d-menu-broker-change",dataCy:"d-menu-broker-change",visible:!0},{type:Ee.Settings,caption:"\u062A\u0646\u0638\u06CC\u0645\u0627\u062A",mdIconClass:"text-muted",svgIcon:"setting",hasBadge:!1,id:"d-menu-money-settings",visible:!0},{type:Ee.MarketView,caption:"\u0646\u0645\u0627\u06CC \u0628\u0627\u0632\u0627\u0631",mdIconClass:"text-teal",svgIcon:"market-view",hasBadge:!1,visible:!0}]),Ce(this.childrenService.hasChildren().pipe(Je(n=>{n?.hasChildren&&!this.menuItems().find(r=>r.id==="main-menu-children")&&this.menuItems.update(r=>[...r,{type:Ee.Children,caption:"\u062D\u0633\u0627\u0628 \u0641\u0631\u0632\u0646\u062F\u0627\u0646",mdIconClass:"text-violet",svgIcon:"children",hasBadge:!1,doNotShowForGuest:!0,id:"main-menu-children",newFeatureBadge:!1,visible:!0}])}))),Ce(this.unleashService.isFeatureEnabled$(qn.ai_market_assistant).pipe(Je(n=>{n&&this.menuItems.update(r=>[...r,{type:Ee.AiMarketAssistant,caption:"\u06AF\u0632\u0627\u0631\u0634 \u0628\u0627\u0632\u0627\u0631",mdIconClass:"text-global",svgIcon:"smart-report",hasBadge:!1,id:"d-menu-ai-market-assistant",visible:!0}])})))}signOut(){this.localStorage.removeItem("commissions"),this.localStorage.removeItem("User"),this.localStorage.removeItem("redirect-after-login"),this.localStorage.removeItem("settings"),this.localStorage.removeItem(KM.isGuestUser),this.authService.logout()}onSignOutClick(){this.logoutModalIsVisible.set(!0)}onSettingClick(){this.onItemClick(Ee.Settings)}onChangeClick(){this.onItemClick(Ee.ChangeHistory)}onItemClick(n){this.menuSelectEvent.emit(n)}reloadApp(){setTimeout(()=>{location.reload()},1e3)}onLogoutEmitter(n){this.logoutModalIsVisible.set(!1),n&&this.signOut()}onUserActivityEmitter(n){this.logoutModalIsVisible.set(!1),n&&this.onItemClick(Ee.AccountActivity)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["app-menu"]],outputs:{menuSelectEvent:"menuSelectEvent"},decls:39,vars:11,consts:[["telContent",""],["telegramContent",""],["instagramContent",""],["newFeatureBadgeTemplate",""],[1,"list-unstyled","flex-shrink-0","main-menu","mb-3","grid","p-0",2,"--bs-columns","3","--bs-gap","0.5rem"],[1,"mt-auto","bg-principal-2x","bg-principal-4x-dark","bg-principal-hover","p-3","rounded","d-flex","align-items-center","cup",3,"click"],[1,"flex-grow-1"],[1,"fw-bold","h6"],[1,"opacity-7"],["width","48","height","48",1,"line-height-none","opacity-3",3,"iconName"],[1,"d-flex","justify-content-between","my-3","px-3"],[1,"d-flex","justify-content-center"],["triggers","mouseenter:mouseleave","popover-class","increase-popover-width","placement","left",1,"text-center","d-flex","align-items-center","mx-1",3,"ngbPopover"],["href","tel:0218700",1,"d-flex","flex-column","align-items-center"],[1,"d-flex","align-items-center","justify-content-center","rounded-circle","bg-principal","bg-principal-hover","bg-principal-6x-dark","bg-principal-6x-dark-hover","p-2"],["width","20","height","20",1,"line-height-20px","text-global",3,"iconName"],["triggers","mouseenter:mouseleave","popover-class","increase-popover-width",1,"text-center","d-flex","align-items-center","mx-1",3,"ngbPopover"],["href","https://t.me/easytrader","target","_blank",1,"d-flex","flex-column","align-items-center"],["width","20","height","20",1,"d-flex","align-items-center","justify-content-center","rounded-circle","bg-principal","bg-principal-hover","bg-principal-6x-dark","bg-principal-6x-dark-hover","p-2","text-global",3,"iconName"],["href","https://instagram.com/mofidsecurities?igshid=hsp4v1goqu00","target","_blank",1,"d-flex","flex-column","align-items-center"],[1,"d-flex","align-items-center","justify-content-center","rounded-circle","p-2","bg-principal","bg-principal-hover","bg-principal-6x-dark","bg-principal-6x-dark-hover"],["dir","ltr","title","EasyTrader",1,"text-end","text-muted","cup",3,"click"],[1,"d-flex","align-items-center","gap-1"],["width","16","height","16",3,"iconName"],[1,"h6","m-0","mt-1"],[1,"cup","text-center"],[1,"bg-principal-7x-dark","bg-principal","bg-principal-hover","d-flex","flex-column","align-items-center","text-body","py-3","px-1","position-relative","ripple","rounded","h-100",3,"ngClass","id"],[1,"bg-principal-7x-dark","bg-principal","bg-principal-hover","d-flex","flex-column","align-items-center","text-body","py-3","px-1","position-relative","ripple","rounded","h-100",3,"id"],[1,"bg-principal-7x-dark","bg-principal","bg-principal-hover","d-flex","flex-column","align-items-center","text-body","py-3","px-1","position-relative","ripple","rounded","h-100",3,"click","ngClass","id"],[1,"d-flex","flex-column","align-items-center","justify-content-center","gap-1",2,"font-size","11.7px",3,"id"],["width","24","height","24",3,"iconName","class"],["width","24","height","24",3,"iconName"],[1,"bg-principal-7x-dark","bg-principal","bg-principal-hover","d-flex","flex-column","align-items-center","text-body","py-3","px-1","position-relative","ripple","rounded","h-100",3,"click","id"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"class"],[1,"text-center"],["dir","ltr",1,"fw-bold","mt-1"],[1,"position-absolute","text-warning","fw-bold",2,"right","5px","top","2px"],[3,"logoutEmitter","userActivityEmitter"]],template:function(r,s){if(r&1){let o=ne();C(0,"ul",4),St(1,zJ,1,1,null,null,OJ),x(),C(3,"div",5),V("click",function(){return z(o),W(s.onItemClick(s.SidePanelType.Feedback))}),C(4,"div",6)(5,"div",7),A(6,"\u062B\u0628\u062A \u0628\u0627\u0632\u062E\u0648\u0631\u062F"),x(),C(7,"div",8),A(8,"\u062F\u0631 \u0627\u0646\u062A\u0638\u0627\u0631 \u0627\u0646\u062A\u0642\u0627\u062F\u0627\u062A \u0648 \u067E\u06CC\u0634\u0646\u0647\u0627\u062F\u0627\u062A \u0634\u0645\u0627 \u0647\u0633\u062A\u06CC\u0645"),x()(),H(9,"svg-icon",9),x(),C(10,"div",10),Z(11,WJ,5,0,"ng-template",null,0,Wi)(13,$J,5,1,"ng-template",null,1,Wi)(15,KJ,5,1,"ng-template",null,2,Wi),C(17,"div",11)(18,"div",12)(19,"a",13)(20,"span",14),H(21,"svg-icon",15),x()()(),C(22,"div",16)(23,"a",17),H(24,"svg-icon",18),x()(),C(25,"div",16)(26,"a",19)(27,"span",20),H(28,"svg-icon",15),x()()()(),C(29,"div",21),V("click",function(){return z(o),W(s.onChangeClick())}),C(30,"div",22),H(31,"svg-icon",23),C(32,"div",24),A(33,"EasyTrader"),x()(),C(34,"div"),A(35),x()()(),Z(36,YJ,1,1,"ng-template",null,3,Wi)(38,qJ,1,0,"logout-modal")}if(r&2){let o=ki(12),a=ki(14),l=ki(16);_(),xt(s.accountService.isGuestUser?s.guestUserMenuItems():s.menuItems()),_(8),F("iconName",s.icons.CommentSmile),_(9),F("ngbPopover",o),_(3),F("iconName",s.icons.Phone),_(),F("ngbPopover",a),_(2),F("iconName",s.icons.Telegram),_(),F("ngbPopover",l),_(3),F("iconName",s.icons.Instagram),_(3),F("iconName",s.icons.EasyFill),_(4),Ao("Version ",s.version,", Build ",s.build,""),_(3),q(s.logoutModalIsVisible()?38:-1)}},dependencies:[Oe,Ke,F2,kd,ys,Fl,Dd,Ve],styles:[`[data-bs-theme=light][_ngcontent-%COMP%]{--color-base: #4f6883;--color-base-rgb: 79, 104, 131;--color-bg: #e3e8f1;--color-bg-rgb: 227, 232, 241;--color-emphasis: var(--bs-emphasis-color-rgb);--color-emphasis-rgb: var(--bs-emphasis-color-rgb);--color-principal: white;--color-principal-rgb: 255, 255, 255;--color-principal-2x: #f8f8f8;--color-principal-2x-rgb: 248, 248, 248;--color-principal-3x: #efeff5;--color-principal-3x-rgb: 239, 239, 245;--color-principal-4x: #c8c7cc;--color-principal-4x-rgb: 200, 199, 204;--color-principal-5x: #a1a1a1;--color-principal-5x-rgb: 161, 161, 161}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-base[_ngcontent-%COMP%]{background-color:rgba(var(--color-base-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-base.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=light][_ngcontent-%COMP%]   .bg-base.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-base),#000 3%)!important}[data-bs-theme=light][_ngcontent-%COMP%]   .border-base[_ngcontent-%COMP%]{border-color:rgba(var(--color-base-rgb),var(--bs-border-opacity))!important}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-bg[_ngcontent-%COMP%]{background-color:rgba(var(--color-bg-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-bg.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=light][_ngcontent-%COMP%]   .bg-bg.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-bg),#000 3%)!important}[data-bs-theme=light][_ngcontent-%COMP%]   .border-bg[_ngcontent-%COMP%]{border-color:rgba(var(--color-bg-rgb),var(--bs-border-opacity))!important}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-emphasis[_ngcontent-%COMP%]{background-color:rgba(var(--color-emphasis-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-emphasis.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=light][_ngcontent-%COMP%]   .bg-emphasis.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-emphasis),#000 3%)!important}[data-bs-theme=light][_ngcontent-%COMP%]   .border-emphasis[_ngcontent-%COMP%]{border-color:rgba(var(--color-emphasis-rgb),var(--bs-border-opacity))!important}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-principal[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-principal.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=light][_ngcontent-%COMP%]   .bg-principal.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal),#000 3%)!important}[data-bs-theme=light][_ngcontent-%COMP%]   .border-principal[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-rgb),var(--bs-border-opacity))!important}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-principal-2x[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-2x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-principal-2x.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=light][_ngcontent-%COMP%]   .bg-principal-2x.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-2x),#000 3%)!important}[data-bs-theme=light][_ngcontent-%COMP%]   .border-principal-2x[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-2x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-principal-3x[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-3x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-principal-3x.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=light][_ngcontent-%COMP%]   .bg-principal-3x.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-3x),#000 3%)!important}[data-bs-theme=light][_ngcontent-%COMP%]   .border-principal-3x[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-3x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-principal-4x[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-4x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-principal-4x.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=light][_ngcontent-%COMP%]   .bg-principal-4x.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-4x),#000 3%)!important}[data-bs-theme=light][_ngcontent-%COMP%]   .border-principal-4x[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-4x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-principal-5x[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-5x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light][_ngcontent-%COMP%]   .bg-principal-5x.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=light][_ngcontent-%COMP%]   .bg-principal-5x.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-5x),#000 3%)!important}[data-bs-theme=light][_ngcontent-%COMP%]   .border-principal-5x[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-5x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]{--color-base: #24242e;--color-base-rgb: 36, 36, 46;--color-bg: #403f4d;--color-bg-rgb: 64, 63, 77;--color-emphasis: var(--bs-emphasis-color-rgb);--color-emphasis-rgb: var(--bs-emphasis-color-rgb);--color-principal: #31303e;--color-principal-rgb: 49, 48, 62;--color-principal-2x: #343341;--color-principal-2x-rgb: 52, 51, 65;--color-principal-3x: #24262d;--color-principal-3x-rgb: 36, 38, 45;--color-principal-4x: #3a3947;--color-principal-4x-rgb: 58, 57, 71;--color-principal-5x: #787c85;--color-principal-5x-rgb: 120, 124, 133;--color-principal-6x: #575669;--color-principal-6x-rgb: 87, 86, 105;--color-principal-7x: #403f4d;--color-principal-7x-rgb: 64, 63, 77}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-base[_ngcontent-%COMP%]{background-color:rgba(var(--color-base-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-base.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-base.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-base),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-base[_ngcontent-%COMP%]{border-color:rgba(var(--color-base-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-bg[_ngcontent-%COMP%]{background-color:rgba(var(--color-bg-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-bg.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-bg.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-bg),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-bg[_ngcontent-%COMP%]{border-color:rgba(var(--color-bg-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-emphasis[_ngcontent-%COMP%]{background-color:rgba(var(--color-emphasis-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-emphasis.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-emphasis.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-emphasis),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-emphasis[_ngcontent-%COMP%]{border-color:rgba(var(--color-emphasis-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-principal[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-2x[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-2x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-2x.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-2x.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-2x),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-principal-2x[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-2x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-3x[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-3x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-3x.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-3x.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-3x),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-principal-3x[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-3x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-4x[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-4x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-4x.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-4x.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-4x),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-principal-4x[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-4x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-5x[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-5x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-5x.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-5x.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-5x),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-principal-5x[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-5x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-6x[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-6x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-6x.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-6x.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-6x),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-principal-6x[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-6x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-7x[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-7x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-7x.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-7x.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-7x),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-principal-7x[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-7x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-base-dark[_ngcontent-%COMP%]{background-color:rgba(var(--color-base-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-base-dark.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-base-dark.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-base),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-base-dark[_ngcontent-%COMP%]{border-color:rgba(var(--color-base-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-bg-dark[_ngcontent-%COMP%]{background-color:rgba(var(--color-bg-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-bg-dark.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-bg-dark.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-bg),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-bg-dark[_ngcontent-%COMP%]{border-color:rgba(var(--color-bg-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-emphasis-dark[_ngcontent-%COMP%]{background-color:rgba(var(--color-emphasis-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-emphasis-dark.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-emphasis-dark.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-emphasis),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-emphasis-dark[_ngcontent-%COMP%]{border-color:rgba(var(--color-emphasis-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-dark[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-dark.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-dark.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-principal-dark[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-2x-dark[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-2x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-2x-dark.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-2x-dark.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-2x),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-principal-2x-dark[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-2x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-3x-dark[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-3x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-3x-dark.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-3x-dark.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-3x),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-principal-3x-dark[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-3x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-4x-dark[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-4x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-4x-dark.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-4x-dark.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-4x),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-principal-4x-dark[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-4x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-5x-dark[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-5x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-5x-dark.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-5x-dark.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-5x),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-principal-5x-dark[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-5x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-6x-dark[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-6x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-6x-dark.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-6x-dark.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-6x),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-principal-6x-dark[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-6x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-7x-dark[_ngcontent-%COMP%]{background-color:rgba(var(--color-principal-7x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-7x-dark.bg-principal-hover[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-principal-7x-dark.bg-principal-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-principal-7x),#fff 5%)!important}[data-bs-theme=dark][_ngcontent-%COMP%]   .border-principal-7x-dark[_ngcontent-%COMP%]{border-color:rgba(var(--color-principal-7x-rgb),var(--bs-border-opacity))!important}.bg-success-50[_ngcontent-%COMP%]{background-color:var(--bs-success-50)}.text-success-50[_ngcontent-%COMP%]{color:var(--bs-success-50)}.bg-success-100[_ngcontent-%COMP%]{background-color:var(--bs-success-100)}.text-success-100[_ngcontent-%COMP%]{color:var(--bs-success-100)}.bg-success-200[_ngcontent-%COMP%]{background-color:var(--bs-success-200)}.text-success-200[_ngcontent-%COMP%]{color:var(--bs-success-200)}.bg-success-300[_ngcontent-%COMP%]{background-color:var(--bs-success-300)}.text-success-300[_ngcontent-%COMP%]{color:var(--bs-success-300)}.bg-success-400[_ngcontent-%COMP%]{background-color:var(--bs-success-400)}.text-success-400[_ngcontent-%COMP%]{color:var(--bs-success-400)}.bg-success-500[_ngcontent-%COMP%]{background-color:var(--bs-success-500)}.text-success-500[_ngcontent-%COMP%]{color:var(--bs-success-500)}.bg-success-600[_ngcontent-%COMP%]{background-color:var(--bs-success-600)}.text-success-600[_ngcontent-%COMP%]{color:var(--bs-success-600)}.bg-success-700[_ngcontent-%COMP%]{background-color:var(--bs-success-700)}.text-success-700[_ngcontent-%COMP%]{color:var(--bs-success-700)}.bg-success-800[_ngcontent-%COMP%]{background-color:var(--bs-success-800)}.text-success-800[_ngcontent-%COMP%]{color:var(--bs-success-800)}.bg-success-900[_ngcontent-%COMP%]{background-color:var(--bs-success-900)}.text-success-900[_ngcontent-%COMP%]{color:var(--bs-success-900)}.bg-danger-50[_ngcontent-%COMP%]{background-color:var(--bs-danger-50)}.text-danger-50[_ngcontent-%COMP%]{color:var(--bs-danger-50)}.bg-danger-100[_ngcontent-%COMP%]{background-color:var(--bs-danger-100)}.text-danger-100[_ngcontent-%COMP%]{color:var(--bs-danger-100)}.bg-danger-200[_ngcontent-%COMP%]{background-color:var(--bs-danger-200)}.text-danger-200[_ngcontent-%COMP%]{color:var(--bs-danger-200)}.bg-danger-300[_ngcontent-%COMP%]{background-color:var(--bs-danger-300)}.text-danger-300[_ngcontent-%COMP%]{color:var(--bs-danger-300)}.bg-danger-400[_ngcontent-%COMP%]{background-color:var(--bs-danger-400)}.text-danger-400[_ngcontent-%COMP%]{color:var(--bs-danger-400)}.bg-danger-500[_ngcontent-%COMP%]{background-color:var(--bs-danger-500)}.text-danger-500[_ngcontent-%COMP%]{color:var(--bs-danger-500)}.bg-danger-600[_ngcontent-%COMP%]{background-color:var(--bs-danger-600)}.text-danger-600[_ngcontent-%COMP%]{color:var(--bs-danger-600)}.bg-danger-700[_ngcontent-%COMP%]{background-color:var(--bs-danger-700)}.text-danger-700[_ngcontent-%COMP%]{color:var(--bs-danger-700)}.bg-danger-800[_ngcontent-%COMP%]{background-color:var(--bs-danger-800)}.text-danger-800[_ngcontent-%COMP%]{color:var(--bs-danger-800)}.bg-danger-900[_ngcontent-%COMP%]{background-color:var(--bs-danger-900)}.text-danger-900[_ngcontent-%COMP%]{color:var(--bs-danger-900)}.bg-primary-50[_ngcontent-%COMP%]{background-color:var(--bs-primary-50)}.text-primary-50[_ngcontent-%COMP%]{color:var(--bs-primary-50)}.bg-primary-100[_ngcontent-%COMP%]{background-color:var(--bs-primary-100)}.text-primary-100[_ngcontent-%COMP%]{color:var(--bs-primary-100)}.bg-primary-200[_ngcontent-%COMP%]{background-color:var(--bs-primary-200)}.text-primary-200[_ngcontent-%COMP%]{color:var(--bs-primary-200)}.bg-primary-300[_ngcontent-%COMP%]{background-color:var(--bs-primary-300)}.text-primary-300[_ngcontent-%COMP%]{color:var(--bs-primary-300)}.bg-primary-400[_ngcontent-%COMP%]{background-color:var(--bs-primary-400)}.text-primary-400[_ngcontent-%COMP%]{color:var(--bs-primary-400)}.bg-primary-500[_ngcontent-%COMP%]{background-color:var(--bs-primary-500)}.text-primary-500[_ngcontent-%COMP%]{color:var(--bs-primary-500)}.bg-primary-600[_ngcontent-%COMP%]{background-color:var(--bs-primary-600)}.text-primary-600[_ngcontent-%COMP%]{color:var(--bs-primary-600)}.bg-primary-700[_ngcontent-%COMP%]{background-color:var(--bs-primary-700)}.text-primary-700[_ngcontent-%COMP%]{color:var(--bs-primary-700)}.bg-primary-800[_ngcontent-%COMP%]{background-color:var(--bs-primary-800)}.text-primary-800[_ngcontent-%COMP%]{color:var(--bs-primary-800)}.bg-primary-900[_ngcontent-%COMP%]{background-color:var(--bs-primary-900)}.text-primary-900[_ngcontent-%COMP%]{color:var(--bs-primary-900)}.bg-warning-50[_ngcontent-%COMP%]{background-color:var(--bs-warning-50)}.text-warning-50[_ngcontent-%COMP%]{color:var(--bs-warning-50)}.bg-warning-100[_ngcontent-%COMP%]{background-color:var(--bs-warning-100)}.text-warning-100[_ngcontent-%COMP%]{color:var(--bs-warning-100)}.bg-warning-200[_ngcontent-%COMP%]{background-color:var(--bs-warning-200)}.text-warning-200[_ngcontent-%COMP%]{color:var(--bs-warning-200)}.bg-warning-300[_ngcontent-%COMP%]{background-color:var(--bs-warning-300)}.text-warning-300[_ngcontent-%COMP%]{color:var(--bs-warning-300)}.bg-warning-400[_ngcontent-%COMP%]{background-color:var(--bs-warning-400)}.text-warning-400[_ngcontent-%COMP%]{color:var(--bs-warning-400)}.bg-warning-500[_ngcontent-%COMP%]{background-color:var(--bs-warning-500)}.text-warning-500[_ngcontent-%COMP%]{color:var(--bs-warning-500)}.bg-warning-600[_ngcontent-%COMP%]{background-color:var(--bs-warning-600)}.text-warning-600[_ngcontent-%COMP%]{color:var(--bs-warning-600)}.bg-warning-700[_ngcontent-%COMP%]{background-color:var(--bs-warning-700)}.text-warning-700[_ngcontent-%COMP%]{color:var(--bs-warning-700)}.bg-warning-800[_ngcontent-%COMP%]{background-color:var(--bs-warning-800)}.text-warning-800[_ngcontent-%COMP%]{color:var(--bs-warning-800)}.bg-warning-900[_ngcontent-%COMP%]{background-color:var(--bs-warning-900)}.text-warning-900[_ngcontent-%COMP%]{color:var(--bs-warning-900)}.bg-violet-50[_ngcontent-%COMP%]{background-color:var(--bs-violet-50)}.text-violet-50[_ngcontent-%COMP%]{color:var(--bs-violet-50)}.bg-violet-100[_ngcontent-%COMP%]{background-color:var(--bs-violet-100)}.text-violet-100[_ngcontent-%COMP%]{color:var(--bs-violet-100)}.bg-violet-200[_ngcontent-%COMP%]{background-color:var(--bs-violet-200)}.text-violet-200[_ngcontent-%COMP%]{color:var(--bs-violet-200)}.bg-violet-300[_ngcontent-%COMP%]{background-color:var(--bs-violet-300)}.text-violet-300[_ngcontent-%COMP%]{color:var(--bs-violet-300)}.bg-violet-400[_ngcontent-%COMP%]{background-color:var(--bs-violet-400)}.text-violet-400[_ngcontent-%COMP%]{color:var(--bs-violet-400)}.bg-violet-500[_ngcontent-%COMP%]{background-color:var(--bs-violet-500)}.text-violet-500[_ngcontent-%COMP%]{color:var(--bs-violet-500)}.bg-violet-600[_ngcontent-%COMP%]{background-color:var(--bs-violet-600)}.text-violet-600[_ngcontent-%COMP%]{color:var(--bs-violet-600)}.bg-violet-700[_ngcontent-%COMP%]{background-color:var(--bs-violet-700)}.text-violet-700[_ngcontent-%COMP%]{color:var(--bs-violet-700)}.bg-violet-800[_ngcontent-%COMP%]{background-color:var(--bs-violet-800)}.text-violet-800[_ngcontent-%COMP%]{color:var(--bs-violet-800)}.bg-violet-900[_ngcontent-%COMP%]{background-color:var(--bs-violet-900)}.text-violet-900[_ngcontent-%COMP%]{color:var(--bs-violet-900)}.bg-global-50[_ngcontent-%COMP%]{background-color:var(--bs-global-50)}.text-global-50[_ngcontent-%COMP%]{color:var(--bs-global-50)}.bg-global-100[_ngcontent-%COMP%]{background-color:var(--bs-global-100)}.text-global-100[_ngcontent-%COMP%]{color:var(--bs-global-100)}.bg-global-200[_ngcontent-%COMP%]{background-color:var(--bs-global-200)}.text-global-200[_ngcontent-%COMP%]{color:var(--bs-global-200)}.bg-global-300[_ngcontent-%COMP%]{background-color:var(--bs-global-300)}.text-global-300[_ngcontent-%COMP%]{color:var(--bs-global-300)}.bg-global-400[_ngcontent-%COMP%]{background-color:var(--bs-global-400)}.text-global-400[_ngcontent-%COMP%]{color:var(--bs-global-400)}.bg-global-500[_ngcontent-%COMP%]{background-color:var(--bs-global-500)}.text-global-500[_ngcontent-%COMP%]{color:var(--bs-global-500)}.bg-global-600[_ngcontent-%COMP%]{background-color:var(--bs-global-600)}.text-global-600[_ngcontent-%COMP%]{color:var(--bs-global-600)}.bg-global-700[_ngcontent-%COMP%]{background-color:var(--bs-global-700)}.text-global-700[_ngcontent-%COMP%]{color:var(--bs-global-700)}.bg-global-800[_ngcontent-%COMP%]{background-color:var(--bs-global-800)}.text-global-800[_ngcontent-%COMP%]{color:var(--bs-global-800)}.bg-global-900[_ngcontent-%COMP%]{background-color:var(--bs-global-900)}.text-global-900[_ngcontent-%COMP%]{color:var(--bs-global-900)}[_ngcontent-%COMP%]:root{--bs-font-sans-serif: IRANSansX !important;--bs-body-font-size: 13px;--bs-body-color: #212529;--bs-body-color-rgb: 33, 37, 41;--tab-active-bg: #4f6883;--icon-color: #758696;--bs-success-50: #e7fded;--bs-success-100: #d0fbdc;--bs-success-200: #a3f8c3;--bs-success-300: #72ebab;--bs-success-400: #4dd89c;--bs-success-500: #1bbf89;--bs-success-600: #13a482;--bs-success-700: #0d8979;--bs-success-800: #086e6b;--bs-success-900: #05565b;--bs-danger-50: #fef3ed;--bs-danger-100: #fde8db;--bs-danger-200: #fbcdb9;--bs-danger-300: #f4a893;--bs-danger-400: #e98576;--bs-danger-500: #db524b;--bs-danger-600: #bc363b;--bs-danger-700: #9d2534;--bs-danger-800: #7f172c;--bs-danger-900: #690e28;--bs-primary-50: #eff8fe;--bs-primary-100: #dff2fe;--bs-primary-200: #bfe2fd;--bs-primary-300: #9ecef9;--bs-primary-400: #84baf3;--bs-primary-500: #5d9cec;--bs-primary-600: #4379ca;--bs-primary-700: #2e5aa9;--bs-primary-800: #1d3e88;--bs-primary-900: #112a71;--bs-warning-50: #fefaeb;--bs-warning-100: #fef5d8;--bs-warning-200: #fee9b2;--bs-warning-300: #fcd98b;--bs-warning-400: #fac96d;--bs-warning-500: #f7af3e;--bs-warning-600: #d48c2d;--bs-warning-700: #b16d1f;--bs-warning-800: #8f5013;--bs-warning-900: #763c0b;--bs-violet-50: #f7f2fe;--bs-violet-100: #e8d7fd;--bs-violet-200: #dfcefb;--bs-violet-300: #c9b3f4;--bs-violet-400: #b49bea;--bs-violet-500: #967adc;--bs-violet-600: #7259bd;--bs-violet-700: #533d9e;--bs-violet-800: #38267f;--bs-violet-900: #251769;--bs-global-50: #e2fcff;--bs-global-100: #c5f8ff;--bs-global-200: #94e0ed;--bs-global-300: #63c7db;--bs-global-400: #31afc9;--bs-global-500: #0096b7;--bs-global-600: #007191;--bs-global-700: #004c6a;--bs-global-800: #00364b;--bs-global-900: #001f2b}[data-bs-theme=light][_ngcontent-%COMP%]   .ag-theme-balham[_ngcontent-%COMP%]{--ag-secondary-foreground-color: color-mix(in srgb, var(--color-base), #000 50%);--ag-row-hover-color: color-mix(in srgb, var(--color-bg), #fff 10%);--ag-data-color: inherit}.panel[_ngcontent-%COMP%]{--panel-bg-rgb: 227, 232, 241}.dropdown[_ngcontent-%COMP%]{--dropdown-menu-bg: var(--color-principal);--dropdown-item-color: var(--bs-body-color);--dropdown-item-bg: var(--color-principal);--dropdown-item-hover-bg: color-mix(in srgb, var(--color-principal-2x), #fff 10%)}.market-view-bourse[_ngcontent-%COMP%]{--market-view-category-item: var(--color-principal-3x);--market-view-category-item-active: var(--color-principal)}[data-bs-theme=dark][_ngcontent-%COMP%]{--bs-body-color: white;--bs-body-color-rgb: 255, 255, 255;--tab-active-bg: #575669;--icon-color: #787c85}[data-bs-theme=dark][_ngcontent-%COMP%]   .ag-theme-balham[_ngcontent-%COMP%]{--ag-secondary-foreground-color: color-mix(in srgb, var(--color-base), #fff 50%);--ag-row-hover-color: var(--color-base);--ag-background-color: rgba(var(--color-principal-3x-rgb), .5);--ag-border-color: var(--color-principal);--ag-data-color: inherit;--ag-modal-overlay-background-color: rgba(var(--color-base-rgb), .5);--ag-foreground-color: var(--bs-body-color)}[data-bs-theme=dark][_ngcontent-%COMP%]   .ag-theme-balham[_ngcontent-%COMP%]   .ag-menu-option-active[_ngcontent-%COMP%], [data-bs-theme=dark][_ngcontent-%COMP%]   .ag-theme-balham[_ngcontent-%COMP%]   .ag-compact-menu-option-active[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--color-base),#fff 5%)}[data-bs-theme=dark][_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{--panel-bg-rgb: 52, 51, 65}[data-bs-theme=dark][_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{--dropdown-menu-bg: var(--color-principal-4x);--dropdown-item-color: var(--bs-body-color);--dropdown-item-bg: var(--color-principal-4x)}.main-menu[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-size:90%}.main-menu[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{position:absolute;top:9px;font-weight:400;right:50%;font-size:85%;margin-right:4px;padding:.45em .3em .1em;min-width:15px}.main-menu[_ngcontent-%COMP%]   .bg-blue_jeans[_ngcontent-%COMP%]{background-color:#5d9cec!important}.main-menu[_ngcontent-%COMP%]   .bg-aqua[_ngcontent-%COMP%]{background-color:#3bafda!important}.main-menu[_ngcontent-%COMP%]   .bg-mint[_ngcontent-%COMP%]{background-color:#37bc9b!important}.main-menu[_ngcontent-%COMP%]   .bg-grass[_ngcontent-%COMP%]{background-color:#8cc152!important}.main-menu[_ngcontent-%COMP%]   .bg-sun_flower[_ngcontent-%COMP%], .main-menu[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%], .main-menu[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]:hover{background-color:#f6bb42!important}.main-menu[_ngcontent-%COMP%]   .bg-sun_flower[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%], .main-menu[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%], .main-menu[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]:hover   svg-icon[_ngcontent-%COMP%]{color:#fff!important}.main-menu[_ngcontent-%COMP%]   .bg-teal[_ngcontent-%COMP%]{background-color:#177c7c!important}.main-menu[_ngcontent-%COMP%]   .bg-bittersweet[_ngcontent-%COMP%]{background-color:#e9573f!important}.main-menu[_ngcontent-%COMP%]   .bg-persimmon[_ngcontent-%COMP%]{background-color:#e04a00!important}.main-menu[_ngcontent-%COMP%]   .bg-grapefruit[_ngcontent-%COMP%]{background-color:#da4453!important}.main-menu[_ngcontent-%COMP%]   .bg-lavender[_ngcontent-%COMP%]{background-color:#967adc!important}.main-menu[_ngcontent-%COMP%]   .bg-pink_rose[_ngcontent-%COMP%]{background-color:#d770ad!important}.main-menu[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(:hover)   .active[_ngcontent-%COMP%]   .mdi[_ngcontent-%COMP%]{color:#fff!important}.grid[_ngcontent-%COMP%]{display:grid;grid-template-rows:repeat(var(--bs-rows, 1),1fr);grid-template-columns:repeat(var(--bs-columns, 12),1fr);gap:var(--bs-gap, 1.5rem)}
/*# sourceMappingURL=d-menu.style-BCW37NBO.css.map */`],changeDetection:0});let i=e;return i})();var aC=(()=>{let e=class e extends Ma{constructor(){super(...arguments),this.loading=pe(!1),this.selectedTopicId=pe("061bdc1e-58f8-4b16-adf3-d2ee160388ee"),this.selectedTopicId$=Ft(this.selectedTopicId)}setSelectedTopicId(n){this.selectedTopicId.set(n)}reloadData(){let n=this.selectedTopicId();this.selectedTopicId.set(""),this.selectedTopicId.set(n)}getTopics$(){return this.loading.set(!0),this.httpService.get(`${this.mtsPath}${this.apiUrls.marketReport}topics`).pipe(pn(()=>{this.loading.set(!1)}),Pi(()=>Ji([])))}getReportsData$(n="061bdc1e-58f8-4b16-adf3-d2ee160388ee"){return this.loading.set(!0),this.httpService.get(`${this.mtsPath}${this.apiUrls.marketReport}reports?${"topicId="+n}`).pipe(Be(r=>r.sort((s,o)=>new Date(o.dateTime).getTime()-new Date(s.dateTime).getTime())),pn(()=>{this.loading.set(!1)}),Pi(()=>Ji([])))}};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=Mo(e)))(s||e)}})(),e.\u0275prov=Hi({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var XJ=(i,e)=>e.id,ZJ=i=>({"rotate-180":i});function QJ(i,e){if(i&1&&(C(0,"div",5),A(1),x()),i&2){let t=P().$implicit;_(),ye(" ",t.description," ")}}function JJ(i,e){if(i&1){let t=ne();C(0,"div",1)(1,"div",2),V("click",function(){let r=z(t).$implicit,s=P();return W(s.changeVisibility(r.id))}),C(2,"div",3),A(3),fe(4,"jdateLong"),x(),H(5,"svg-icon",4),x(),Z(6,QJ,2,1,"div",5),x()}if(i&2){let t=e.$implicit,n=P();_(3),Ao("",t.title," (",ci(4,6,t.dateTime,!1),")"),_(2),Nt(de(9,ZJ,n.showContent(t.id))),F("iconName",n.icons.ChevronDown),_(),q(n.showContent(t.id)?6:-1)}}var cN=(()=>{let e=class e{constructor(){this.icons=Fe,this.aiMarketAssistantService=ee(aC),this.visibleContents=pe([]),this.data=Ce(this.aiMarketAssistantService.selectedTopicId$.pipe(Jt(()=>this.aiMarketAssistantService.getReportsData$().pipe(Je(n=>{this.visibleContents.set([n[0]?.id])})))))}changeVisibility(n){this.visibleContents.update(r=>r.includes(n)?(r.splice(r.indexOf(n),1),[...r]):[...r,n])}showContent(n){return this.visibleContents().includes(n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["lib-ai-market-assistant"]],decls:3,vars:0,consts:[[1,"list-group","list-group-flush","h-100","overflow-auto"],[1,"bg-principal","bg-principal-hover","list-group-item","p-0"],[1,"d-flex","align-items-center","px-2","py-2","cup",3,"click"],[1,"flex-grow-1"],["width","20","height","20",1,"ms-2","text-muted","my-1",3,"iconName"],[1,"px-3","py-2","text-justify"]],template:function(r,s){r&1&&(C(0,"div",0),St(1,JJ,7,11,"div",1,XJ),x()),r&2&&(_(),xt(s.data()))},dependencies:[Ad,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var eee=i=>({spin:i}),tee=i=>({loading:i}),uN=(()=>{let e=class e{constructor(){this.icons=Fe,this.aiMarketAssistantService=ee(aC),this.menuSelectEvent=it()}reloadData(){this.aiMarketAssistantService.reloadData()}back(){this.menuSelectEvent.emit(Ee.Menu)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["d-ai-market-assistant-container"]],outputs:{menuSelectEvent:"menuSelectEvent"},decls:9,vars:8,consts:[[1,"d-flex","justify-content-between","py-3","px-2","bg-principal","bg-principal-4x-dark","shadow-sm","position-relative","z-2"],[1,"d-flex","align-items-center"],["width","36","height","36",1,"cup",3,"click","iconName"],[1,"mb-0"],[1,"d-flex","align-items-center","cup"],["title","\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F",1,"d-flex","align-items-center",3,"click"],["width","24","height","24",1,"ms-1",3,"iconName","ngClass"],[1,"overflow-auto","h-100",3,"ngClass"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"div",1)(2,"svg-icon",2),V("click",function(){return s.back()}),x(),C(3,"h6",3),A(4,"\u06AF\u0632\u0627\u0631\u0634 \u0628\u0627\u0632\u0627\u0631"),x()(),C(5,"div",4)(6,"div",5),V("click",function(){return s.reloadData()}),H(7,"svg-icon",6),x()()(),H(8,"lib-ai-market-assistant",7)),r&2&&(_(2),F("iconName",s.icons.ChevronRight),_(5),F("iconName",s.icons.refresh)("ngClass",de(4,eee,s.aiMarketAssistantService.loading())),_(),F("ngClass",de(6,tee,s.aiMarketAssistantService.loading())))},dependencies:[cN,Ke,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var dN=(()=>{let e=class e extends Ma{constructor(n){super(),this.userDeviceService=n}fetchVersionHistory(n){return this.httpService.post(this.mtsPath+this.apiUrls.easy+"ReleaseNotes",{body:{page:n,size:jf,device:this.userDeviceService.deviceType===Cn.Desktop?Cn.Mobile:Cn.Desktop}})}};e.\u0275fac=function(r){return new(r||e)(en(Aa))},e.\u0275prov=Hi({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var nee=i=>({loading:i});function ree(i,e){if(i&1&&(C(0,"div",1)(1,"div",3),A(2," \u0628\u0631\u0648\u0632 \u0631\u0633\u0627\u0646\u06CC "),C(3,"span"),A(4),fe(5,"jdate"),x()(),C(6,"div",4)(7,"span",5),A(8),x()(),H(9,"div",6),x()),i&2){let t=e.$implicit;_(4),Re(Te(5,4,t.releaseDate)),_(4),Ao("Version ",t.version,", Build ",t.buildNumber," "),_(),F("innerHTML",t.text,Sf)}}function see(i,e){if(i&1){let t=ne();C(0,"div",2)(1,"button",7),V("click",function(){z(t);let r=P();return W(r.loadMoreClicked())}),A(2," \u0628\u06CC\u0634\u062A\u0631 "),x()()}if(i&2){let t=P();_(),F("disabled",t.loading())}}var hN=(()=>{let e=class e{constructor(n){this.changeService=n,this.icons=Fe,this.loading=pe(!1),this.page=pe(0),this.histories$=Ft(this.page).pipe(gt(r=>r!==-1),h2(r=>this.changeService.fetchVersionHistory(r).pipe(Je(s=>{this.checkForLoadMore(s),this.loading.set(!1)}))),ff((r,s)=>[...r,...s],[])),this.histories=Ce(this.histories$),this.loading.set(!0)}loadMoreClicked(){this.page.set(this.page()+1)}checkForLoadMore(n){n&&n.length===jf||this.page.set(-1)}};e.\u0275fac=function(r){return new(r||e)(st(dN))},e.\u0275cmp=ge({type:e,selectors:[["lib-change-history"]],decls:4,vars:4,consts:[[1,"h-100","overflow-auto","p-2",3,"ngClass"],[1,"bg-principal","bg-principal-4x-dark","p-3","mb-2","rounded"],[1,"my-2","mx-auto","text-center"],[1,"h6","text-warning"],[1,"text-muted"],["dir","ltr",1,"d-inline-block"],[1,"mt-3","wysiwyg",3,"innerHTML"],["type","button",1,"btn","btn-sm","px-5","btn-outline-primary",3,"click","disabled"]],template:function(r,s){r&1&&(C(0,"div",0),St(1,ree,10,6,"div",1,zr),x(),Z(3,see,3,1,"div",2)),r&2&&(F("ngClass",de(2,nee,s.loading())),_(),xt(s.histories()),_(2),q(s.page()>=0?3:-1))},dependencies:[Ke,Md],encapsulation:2,changeDetection:0});let i=e;return i})();var pN=(()=>{let e=class e{constructor(){this.icons=Fe,this.menuSelectEvent=it()}backToMenu(){this.menuSelectEvent.emit(Ee.Menu)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["d-change-history-management"]],outputs:{menuSelectEvent:"menuSelectEvent"},decls:5,vars:1,consts:[[1,"d-flex","align-items-center","py-3","px-2"],["width","36","height","36",1,"cup","text-secondary",3,"click","iconName"],[1,"mb-0","text-body"],[1,"d-flex","flex-column","flex-grow-1","overflow-auto"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"svg-icon",1),V("click",function(){return s.backToMenu()}),x(),C(2,"h6",2),A(3,"\u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u0646\u0633\u062E\u0647\u200C\u0647\u0627"),x()(),H(4,"lib-change-history",3)),r&2&&(_(),F("iconName",s.icons.ChevronRight))},dependencies:[Oe,hN,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var lC=(()=>{let e=class e{constructor(n){this.formBuilder=n,this.lsService=ee(Cs),this.marketDataService=ee(Al),this.orderService=ee(Uo),this.portfolioFacadeService=ee(Ld)}initializeOrderForm(n){let r=n.side?n.side.toLowerCase():"",s=n.quantity?parseInt(n.quantity.toString()):null,o=s;if(r===yn.SELL){let d=this.getSymbolQuantity(n.isin);o=d>0&&d<=s?d:s}else o=0;let a=n.validityType?n.validityType:Pa.DefaultEasyValidityTypeCode,l=n.price?parseInt(n.price.toString()):null,c=n.iceberg,u=n.financialProviderCode?n.financialProviderCode:Pa.DefaultFinancialProviderCode;return this.formBuilder.group({quantity:[o,ii.required],price:[l,ii.required],totalDesiredExpense:[null],iceberg:[c],validityType:[a],financialProviderCode:[u]})}getSymbolQuantity(n){let r=this.portfolioFacadeService.portfolioItems()?.find(o=>o.symbolIsin.toLowerCase()===n.toLowerCase());return r?r?.asset:0}getQuantityWithConsideringMinDealCount(n,r,s){return n=r?n<=r?n:r:n,n+(n%s===0?0:-(n%s)+s)}};e.\u0275fac=function(r){return new(r||e)(en(Yn))},e.\u0275prov=Hi({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var cC=n2(yB());function mN(i,e,t,n=!1){switch(e){case On.ValidToDate:return n?new Date(cC.default.from(i,"fa","YYYY/M/D").toDate().getTime()-cC.default.from(i,"fa","YYYY/M/D").toDate().getTimezoneOffset()*6e4).toISOString().slice(0,-1):i?cC.default.from(i,"fa","YYYY/M/D").toDate().toISOString():t;case On.Week:return new Date(Date.now()+7*24*60*60*1e3-new Date().getTimezoneOffset()*6e4).toISOString().slice(0,-1);case On.Month:return new Date(Date.now()+30*24*60*60*1e3-new Date().getTimezoneOffset()*6e4).toISOString().slice(0,-1);default:return null}}var O1=Object.keys(On).filter(i=>!isNaN(+i)).filter(i=>+i!==On.SharedDueDate).map(i=>({name:Vp[i[0]],code:+i}));var Hs=function(i){return i[i.Normal=1]="Normal",i[i.Algo=2]="Algo",i}(Hs||{}),gN={[yn.BUY]:{type:pt.Buy,text:"\u062E\u0631\u06CC\u062F",btnClass:"btn-success",textClass:"text-success",sideClass:"buy",priceTitle:"\u0633\u0642\u0641 \u0642\u06CC\u0645\u062A"},[yn.SELL]:{type:pt.Sell,text:"\u0641\u0631\u0648\u0634",btnClass:"btn-danger",textClass:"text-danger",sideClass:"sell",priceTitle:"\u06A9\u0641 \u0642\u06CC\u0645\u062A"}},uC={0:Zc.Off,1:Zc.On},dC={0:Qc.Unlocked,1:Qc.Locked},L1={[pt.Buy]:{minValidVolume:"minValidBuyVolume",maxValidVolume:"maxValidBuyVolume"},[pt.Sell]:{minValidVolume:"minValidSellVolume",maxValidVolume:"maxValidSellVolume"}},fN={[pt.Buy]:"buyQuantity",[pt.Sell]:"sellQuantity"},vN={[pt.Buy]:"buyCommission",[pt.Sell]:"sellCommission"},kc={[pt.Buy]:"hidePrice"},Ug={[pt.Buy+Go.Same]:"askPrice",[pt.Buy+Go.Opposite]:"bidPrice",[pt.Sell+Go.Same]:"bidPrice",[pt.Sell+Go.Opposite]:"askPrice"},yN={[pt.Buy]:"bidPrice",[pt.Sell]:"askPrice"};var qu=(()=>{let e=class e{getOptionAstaneValue(n,r,s){return n===pt.Buy?Math.round(Math.max(r,s)*1.5):Math.round(Math.min(r,s)*.5)}connectOrderFormToLiveMarketData(n,r){return this.lsService.connectionState$.pipe(Di(s=>s===bM.Connected),Jt(()=>r?this.connectOrderFormToLsByIsin(n):this.connectOrderFormToActiveMarketData()))}connectOrderFormToActiveMarketData(){return this.activeSymbolService.activeSymbolObs$.pipe(gt(n=>!!n?.marketData?.tradeDate),Be(n=>n.marketData))}connectOrderFormToLsByIsin(n){return this.lsService.subscribeToLs(qc.OrderForm,n).pipe(Je(r=>this.addSubId(r?.subId)),Be(r=>r.val),Be(r=>{let s=Rp.OrderFormSchema;return{priceTickSize:+(r[s.priceTickSize]??0),minValidBuyVolume:+(r[s.minValidBuyVolume]??0),minValidSellVolume:+(r[s.minValidSellVolume]??0),maxValidBuyVolume:+(r[s.maxValidBuyVolume]??0),maxValidSellVolume:+(r[s.maxValidSellVolume]??0),maxDailyPrice:+(r[s.maxDailyPrice]??0),minDailyPrice:+(r[s.minDailyPrice]??0),askPrice:+(r[s.askPrice]??0),bidPrice:+(r[s.bidPrice]??0),feeOfPreviousDaysClosingPrice:+(r[s.feeOfPreviousDaysClosingPrice]??0)}}))}getStockOrderData(n){return this.marketDataService.GetMarketData(8,n).pipe(Be(r=>dt(Se({},r),{maxDailyPrice:+r.highAllowedPrice,minDailyPrice:+r.lowAllowedPrice})))}generateOMSOrderToSubmit(n,r){return{price:+n.price,quantity:+n.quantity,side:this.OrderSide().type,validityType:+n.validityType,symbolIsin:this.Symbol()?.symbolIsin,symbolName:this.Symbol()?.symbolName,createDateTime:new Date(Date.now()).toLocaleString(),validityDate:+n.validityType!==On.SharedDueDate?mN(r,+n.validityType,null,!0):this.Symbol()?.shareDueDate,commission:this.Commission()}}generateAlgoOrderToSubmit(n){return{id:_d(),price:+n.price,quantity:+Math.floor(n.quantity),executingQuantity:+n.quantity,executedQuantity:0,executedPercent:0,createDateTime:new Date(Date.now()).toLocaleString(),side:this.OrderSide().type,symbolIsin:this.Symbol()?.symbolIsin,symbolName:this.Symbol()?.symbolName,state:d0.None,commission:this.Commission()}}callShowOrderForm(n){this.orderService.showOrderFormSubject.next(n)}initForm(){return this.OrderInput$.pipe(Jt(n=>n?.id?Ji(n):this.InitializeData$.pipe(Be(r=>this.calcPrice(n,r)),Be(r=>this.calcQuantity(n,r)))))}getSummary(n){return this.Symbol$.pipe(Eo(n,this.OrderSide$,this.Commission$,this.PortfolioSymbol$,this.IsOptionSymbol$,this.OptionSymbolContract$),Be(([r,s,o,a,l,c,u])=>({symbol:r,commission:a,orderSide:o,price:s.price,quantity:s.quantity,asset:l.asset,isOptionSymbol:c,initialMargin:u?.initialMargin})))}addSubId(n){n&&!this.subIds?.includes(n)&&this.subIds.push(n)}constructor(){this.subIds=[],this.omsFacade=ee(kA),this.algoOrderFacade=ee(h0),this.lsService=ee(Cs),this.orderStore=ee(Rl),this.algoStore=ee(BA),this.positionFacade=ee(C0),this.draftFacade=ee(u0),this.offlineFacade=ee(IA),this.moneyService=ee(_s),this.orderService=ee(Uo),this.symbolService=ee(Ll),this.unleashService=ee(Xn),this.settingFacadeService=ee(xs),this.portfolioFacadeService=ee(Ld),this.marketDataService=ee(Al),this.userDeviceService=ee(Aa),this.PopupMode=pe(void 0),this.OrderInput=pe(void 0),this.MarketData=pe(void 0),this.Settings$=this.settingFacadeService.getSettings$(),this.AccountBalance$=this.moneyService.accountBalance$,this.OrderInput$=Ft(this.OrderInput).pipe(gt(Boolean)),this.MarketData$=Ft(this.MarketData).pipe(gt(Boolean)),this.PopupMode$=Ft(this.PopupMode).pipe(gt(n=>n!==void 0)),this.Symbol$=this.OrderInput$.pipe(Be(n=>this.symbolService.symbolByIsin[n.isin])),this.Order$=this.OrderInput$.pipe(Be(n=>this.orderStore.getOrder(n?.id)),Be(n=>({isExist:!!n,value:n}))),this.AlgoOrder$=this.OrderInput$.pipe(Be(n=>this.algoStore.getAlgoOrderById(n?.id)),Be(n=>({isExist:!!n,value:n}))),this.OptionData$=this.Symbol$.pipe(Be(n=>{let r=BM(n.marketUnit);return{isOption:r,symbol:n,baseSymbol:r?this.symbolService.symbolByCompanyIsin[n.baseIsin]:void 0}})),this.PositionData$=this.Symbol$.pipe(Jt(n=>this.positionFacade.getPositionsByIsin(n.symbolIsin))),this.PositionData=Ce(this.PositionData$),this.IsOptionSymbol$=this.OptionData$.pipe(Be(n=>n.isOption)),this.OptionSymbol$=this.OptionData$.pipe(gt(n=>n.isOption),Be(n=>({symbol:n.symbol,baseSymbol:n.baseSymbol}))),this.IsOptionSymbol=Ce(this.IsOptionSymbol$),this.OptionSymbol=Ce(this.OptionSymbol$),this.Order=Ce(this.Order$),this.AlgoOrder=Ce(this.AlgoOrder$),this.Symbol=Ce(this.Symbol$),this.AccountBalance=Ce(this.AccountBalance$),this.OrderSide$=this.OrderInput$.pipe(Be(n=>gN[n?.side])),this.DraftMode$=this.Order$.pipe(Be(n=>n?.value?.orderModelType===Ss.draft)),this.DraftMode=Ce(this.DraftMode$),this.OrderSide=Ce(this.OrderSide$),this.Commission=Ce(cd([this.OrderSide$,this.Symbol$]).pipe(Di(),Be(([n,r])=>+(r[vN[n.type]]??0)))),this.Commission$=Ft(this.Commission).pipe(Di(n=>n!==void 0)),this.PortfolioSymbol$=this.OrderInput$.pipe(Jt(n=>this.portfolioFacadeService.getPortfolioItems$().pipe(Be(s=>s?.find(o=>o.symbolIsin===n?.isin)),Be(s=>({isExist:!!s,asset:s?.asset??0}))))),this.PortfolioSymbol=Ce(this.PortfolioSymbol$),this.KeepOrderFormAfterCreateOrUpdate$=this.Settings$.pipe(Be(n=>n.keepOrderFormAfterSubmit)),this.OrderRequestDone$=this.orderStore.omsRequestDone$.pipe(p2(this.orderStore.draftRequestDone$,this.algoStore.algoRequestDone$)),this.CloseActionEvent$=this.OrderRequestDone$.pipe(Eo(this.KeepOrderFormAfterCreateOrUpdate$,this.OrderInput$),gt(([,n,r])=>r?.isEditMode||!n)),this.IsEditMode=oi(()=>this.OrderInput()?.isEditMode),this.MarketDepthDesktop$=this.orderService.orderFromDesktopMarketDepth$.pipe(gt(n=>n.isin===this.OrderInput()?.isin)),this.MarketDepthMobile$=this.orderService.orderFromMarketDepthSubject$.pipe(gt(n=>n.isin===this.OrderInput()?.isin)),this.HasSettingConfirmation=Ce(this.DraftMode$.pipe(gt(n=>!n),Jt(()=>this.Settings$),Be(n=>n.orderConfirmation))),this.AlgoFeatureIsEnabled=Ce(this.unleashService.isFeatureEnabled$(qn.algo)),this.hasAlgoClaim=ee(Vo).hasClaim(Xc.Algo),this.OptionCalculatedValue$=this.OptionSymbol$.pipe(Jt(n=>this.lsService.subscribeToLs(qc.MarketDepthSymbol,n.baseSymbol.symbolIsin).pipe(Di(),Je(r=>this.addSubId(r?.subId)),Be(r=>r.val),Be(r=>+(r[Rp.MarketDepthSymbolSchema.feeOfPreviousDaysClosingPrice]??0)),Be(r=>h6(p6[n.symbol.marketUnit],r,n.symbol.strikePrice,new Date(n.symbol.shareDueDate)))))),this.OptionAstanehValue=Ce(cd([this.MarketData$,this.OptionCalculatedValue$,this.OrderSide$]).pipe(Di(),Be(([n,r,s])=>this.getOptionAstaneValue(s.type,r,n?.feeOfPreviousDaysClosingPrice)))),this.OptionCalculatedValue=Ce(this.OptionCalculatedValue$),this.OptionSymbolContract=Ce(cd([this.OptionData$,this.OrderSide$]).pipe(Di(),Jt(([n,{type:r}])=>n.isOption&&r===pt.Sell?this.positionFacade.getContractForSymbol(n.symbol.symbolIsin):Ji(void 0)))),this.OptionSymbolContract$=Ft(this.OptionSymbolContract),this.updateMarketData=(n,r)=>{this.MarketData.update(s=>dt(Se(Se({},s),n),{minValidVolume:n[L1[r].minValidVolume],maxValidVolume:n[L1[r].maxValidVolume]}))},this.onSubmit=(n,r,s)=>{let o=Se({id:this.OrderInput()?.id},this.generateOMSOrderToSubmit(n,r));return this.OrderInput()?.isEditMode?this.DraftMode()?this.draftFacade.update(o,this.OrderInput().popUpId):this.omsFacade.update(o,s,this.OrderInput().popUpId):this.omsFacade.create(o,!1,s,this.OrderInput().popUpId)},this.onAlgoSubmit=(n,r=!1)=>{let s=dt(Se({},this.generateAlgoOrderToSubmit(n)),{id:this.OrderInput()?.id});return s.id?this.algoOrderFacade.update(s,r,this.OrderInput()?.popUpId):this.algoOrderFacade.create(s,r,this.OrderInput()?.popUpId)},this.createDraft=(n,r)=>{this.draftFacade.create(this.generateOMSOrderToSubmit(n,r),this.OrderInput()?.popUpId)},this.InitializeData$=this.MarketData$.pipe(Di(n=>!!n),Eo(this.Settings$,this.OrderSide$,this.Commission$,this.PortfolioSymbol$,this.PositionData$,this.IsOptionSymbol$),Be(([n,r,s,o,a,l,c])=>({marketData:n,setting:r,orderSide:s,commission:o,portfolioSymbol:a,positionData:l,isOptionSymbol:c}))),this.calcPrice=(n,r)=>{if(r?.isOptionSymbol)return dt(Se({},r),{price:0});if(n?.price)return dt(Se({},r),{price:n.price});if(r.setting?.priceFromHeadline){let s=+r.marketData[Ug[r.orderSide.type+r.setting.priceFromHeadlineSide]];return s>r.marketData?.maxDailyPrice||s<r.marketData?.minDailyPrice?dt(Se({},r),{price:r.marketData?.maxDailyPrice}):dt(Se({},r),{price:s})}return dt(Se({},r),{price:0})},this.calcQuantity=(n,r)=>{if(r?.isOptionSymbol)return dt(Se({},r),{quantity:0});if(n?.quantity)return{price:r.price,quantity:n.quantity};if(r?.positionData&&r.positionData?.side!==r.orderSide.type)return{price:r.price,quantity:r.positionData.executedQuantity};let s=+r.setting[fN[r.orderSide.type]],o=+(r.marketData?.maxValidVolume??s),a=s;return(r.orderSide.type===pt.Buy||r.portfolioSymbol.isExist)&&(a=GA(r.orderSide.type,this.AccountBalance(),s,r.price,r.commission,r.portfolioSymbol.asset)),{price:r.price,quantity:Math.min(s,o,a)}},this.activeSymbolService=this.userDeviceService.deviceType===Cn.Desktop?ee(Bo):ee(MA),Ce(this.OrderInput$.pipe(Eo(this.OrderSide$,this.PopupMode$),Di(),Jt(([n,r,s])=>Pp(this.connectOrderFormToLiveMarketData(n.isin,s).pipe(Je(o=>this.updateMarketData(o,r.type))),this.lsService.callFunctionWhenLsIsNotConnected(()=>this.getStockOrderData(n.isin).pipe(Je(o=>this.updateMarketData(o,r.type))))))))}ngOnDestroy(){this.lsService.unsubscribeSchemaByIds(this.subIds)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Hi({token:e,factory:e.\u0275fac});let i=e;return i})();function lee(i,e){if(i&1&&(C(0,"div",5)(1,"span",6),A(2),fe(3,"math"),x()()),i&2){let t=P();Ys("left:"+t.RangeValue()+"%"),_(2),ye(" ",Te(3,3,t.RangeValue()),"% ")}}var CN=(()=>{let e=class e{constructor(){this.showTooltip=!1,this.RangeValue=pe(0),this.changeValue=new lt,this.dragEvent=new lt,this.showTooltipEvent=()=>{this.showTooltip=!0,this.dragEvent.emit(!0)},this.hideTooltipEvent=()=>{this.showTooltip=!1,this.dragEvent.emit(!1)}}set value(n){n>=0&&this.RangeValue.set(n)}onInputChange(n){this.RangeValue.set(n.target.value),this.changeValue.emit(n.target.value)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["input-range"]],inputs:{value:"value"},outputs:{changeValue:"changeValue",dragEvent:"dragEvent"},decls:8,vars:4,consts:[["type","range","min","0","max","100","step","any",3,"input","mouseenter","mouseleave","touchstart","touchend","ngModel"],[1,"progress",2,"height","8px","--bs-progress-bar-transition","none"],[1,"progress-step","bg-principal-2x-dark-mobile"],[1,"progress-bar","bg-global"],[1,"position-absolute","text-wrap",2,"top","-29px","margin-left","-8px",3,"style"],[1,"position-absolute","text-wrap",2,"top","-29px","margin-left","-8px"],[1,"bg-dark","text-white","p-1","small","rounded"]],template:function(r,s){r&1&&(C(0,"input",0),V("input",function(a){return s.onInputChange(a)})("mouseenter",function(){return s.showTooltipEvent()})("mouseleave",function(){return s.hideTooltipEvent()})("touchstart",function(){return s.showTooltipEvent()})("touchend",function(){return s.hideTooltipEvent()}),x(),C(1,"div",1),H(2,"div",2)(3,"div",2)(4,"div",2)(5,"div",2)(6,"div",3),x(),Z(7,lee,4,5,"div",4)),r&2&&(F("ngModel",s.RangeValue()),_(6),Ys("width:"+s.RangeValue()+"%"),_(),q(s.showTooltip?7:-1))},dependencies:[Oe,Fn,El,_M,Ro,qf,nn,DM],styles:[`input-range .progress{position:relative;display:flex;gap:4px;background-color:transparent!important}input-range .progress .progress-step{background-color:var(--color-principal-3x);border-radius:var(--bs-border-radius);flex-grow:1;width:25%}input-range .progress .progress-bar{position:absolute;height:100%;left:0;border-radius:var(--bs-border-radius)}input[type=range]{position:absolute;top:0;left:0;right:0;width:100%;direction:ltr;background-color:transparent;height:10px;-webkit-appearance:none;z-index:1}input[type=range]::-webkit-slider-thumb{height:20px;width:20px;border-radius:50%;background-color:#fff;border:6px solid var(--bs-global);margin-top:-2px;z-index:2;-webkit-appearance:none}
/*# sourceMappingURL=input-range.style-W6V36FIZ.css.map */
`],encapsulation:2,changeDetection:0});let i=e;return i})();var bN=(()=>{let e=class e{constructor(){this.icons=Fe,this.OrderTabType=Hs,this.selectedTab=Hs.Normal,this.OrderTypeEnum=Hs,this.id=_d(),this.changeTab=new lt}onChangeTab(n){this.selectedTab!==n&&(this.selectedTab=n,this.changeTab.emit(n))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["order-form-tab"]],inputs:{selectedTab:"selectedTab",title:"title"},outputs:{changeTab:"changeTab"},decls:9,vars:9,consts:[[1,"switch-toggle","switch-candy","mb-2","z-0"],["type","radio","name","view1",3,"id","checked"],["data-cy","algo-order-tab-radio",3,"click","for"],["width","16","height","16",3,"iconName"],["data-cy","normal-order-tab-radio",3,"click","for"],["href",""]],template:function(r,s){r&1&&(C(0,"div",0),H(1,"input",1),C(2,"label",2),V("click",function(){return s.onChangeTab(s.OrderTypeEnum.Algo)}),H(3,"svg-icon",3),A(4),x(),H(5,"input",1),C(6,"label",4),V("click",function(){return s.onChangeTab(s.OrderTypeEnum.Normal)}),A(7),x(),H(8,"a",5),x()),r&2&&(_(),F("id",s.id+1)("checked",s.selectedTab===s.OrderTabType.Algo),_(),F("for",s.id+1),_(),F("iconName",s.icons.SmartAssistantGradient),_(),ye(" ",s.title," \u0647\u0648\u0634\u0645\u0646\u062F "),_(),F("id",s.id+2)("checked",s.selectedTab===void 0||s.selectedTab===s.OrderTabType.Normal),_(),F("for",s.id+2),_(),ye(" ",s.title," \u0639\u0627\u062F\u06CC "))},dependencies:[Oe,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var cee=["*"],uee=i=>({"is-invalid":i}),dee=i=>({selected:i}),hee=(i,e)=>({"input-highlight":i,disabled:e}),pee=i=>({"disabled text-body-tertiary opacity-5 ":i});function mee(i,e){if(i&1){let t=ne();C(0,"svg-icon",11),V("click",function(){z(t);let r=P();return W(r.onImageClick())}),x()}if(i&2){let t=P();Nt(t.class),F("iconName",t.icon)("ngClass",de(5,pee,t.iconDisabled)),mn("data-cy","order-form-calc-btn-"+t.id)}}var hC=(()=>{let e=class e{set iconName(n){let r=n.split(" ");this.class=r?.[0],this.icon=r?.[1]}checkValidation(n){if(!this.minValue()||!this.maxValue())return;let r=+n>=this.minValue()&&+n<=this.maxValue();this.ControlIsValid.update(()=>r)}constructor(){this.icons=Fe,this.onImageClick=()=>!this.iconDisabled&&this.imgClick.emit(),this.onKeyDown=n=>this.keyDown.emit(n),this.onMouseEvent=n=>this.mouseEvent.emit(n),this.onValueClicked=n=>this.valueClick.emit(n),this.minValue=rt(0),this.maxValue=rt(1),this.step=1,this.disabled=!1,this.iconDisabled=!1,this.class="",this.id="",this.title="",this.imgClick=new lt,this.valueClick=new lt,this.keyDown=new lt,this.mouseEvent=new lt,this.ControlIsValid=pe(!0),_r(()=>{this.minValue()&&this.maxValue()&&this.checkValidation(this.form.controls[this.id].value)})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["order-form-value"]],inputs:{minValue:[1,"minValue"],maxValue:[1,"maxValue"],step:"step",disabled:"disabled",iconDisabled:"iconDisabled",highlight:"highlight",iconName:"iconName",id:"id",title:"title",form:"form"},outputs:{imgClick:"imgClick",valueClick:"valueClick",keyDown:"keyDown",mouseEvent:"mouseEvent"},ngContentSelectors:cee,decls:19,vars:28,consts:[[1,"order-form-field",3,"ngClass"],[1,"d-flex","flex-column","form-control","p-0","h-auto","position-relative","overflow-hidden",3,"ngClass"],[1,"d-flex"],[1,"text-secondary","position-absolute",2,"pointer-events","none","top","2px","right","4px"],[1,"d-flex","align-items-center","px-1","bg-principal","flex-grow-1",3,"keyDown","mouseEvent","valueChanged","id","form","ngClass","step","roundOnStep"],[1,"d-flex","flex-column","medium","border-end","border-start",2,"min-width","80px","min-height","45px"],[1,"d-flex","justify-content-between","align-items-center","p-1_2","border-bottom","cup","h-100",3,"click"],["width","18","height","18",1,"",3,"iconName"],[1,"position-relative","flex-grow-1","text-center",2,"top","1px"],[1,"d-flex","justify-content-between","align-items-center","p-1_2","cup","h-100",3,"click"],["width","20","height","20",1,"d-flex","justify-content-center","align-items-center","px-2","cup",3,"iconName","class","ngClass"],["width","20","height","20",1,"d-flex","justify-content-center","align-items-center","px-2","cup",3,"click","iconName","ngClass"]],template:function(r,s){r&1&&(E2(),C(0,"div",0)(1,"div",1)(2,"div",2)(3,"small",3),A(4),x(),C(5,"custom-number-box",4),V("keyDown",function(a){return s.onKeyDown(a)})("mouseEvent",function(a){return s.onMouseEvent(a)})("valueChanged",function(a){return s.checkValidation(a.value)}),x(),C(6,"div",5)(7,"div",6),V("click",function(){return s.onValueClicked(s.maxValue())}),H(8,"svg-icon",7),C(9,"span",8),A(10),fe(11,"number"),x()(),C(12,"div",9),V("click",function(){return s.onValueClicked(s.minValue())}),H(13,"svg-icon",7),C(14,"span",8),A(15),fe(16,"number"),x()()(),Z(17,mee,1,7,"svg-icon",10),x(),T2(18),x()()),r&2&&(F("ngClass",de(21,uee,!s.ControlIsValid())),_(),F("ngClass",de(23,dee,s.highlight)),_(3),Re(s.title),_(),F("id",s.id)("form",s.form)("ngClass",zi(25,hee,s.highlight,s.disabled))("step",s.step)("roundOnStep",!0),_(2),mn("data-cy","order-form-max-"+s.id),_(),F("iconName",s.icons.ChevronUp),_(),mn("data-cy","order-form-value-max-"+s.id),_(),ye(" ",Te(11,17,s.maxValue())," "),_(2),mn("data-cy","order-form-min-"+s.id),_(),F("iconName",s.icons.ChevronDown),_(),mn("data-cy","order-form-value-min-"+s.id),_(),ye(" ",Te(16,19,s.minValue())," "),_(2),q(s.icon?17:-1))},dependencies:[Oe,Ke,yi,Zn,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var gee=i=>({"justify-content-between":i});function fee(i,e){if(i&1&&(C(0,"div",2)(1,"span"),A(2,"\u0642\u062F\u0631\u062A \u062E\u0631\u06CC\u062F"),x(),A(3,": "),C(4,"span"),A(5),fe(6,"number"),x()()),i&2){let t=P();_(5),Re(Te(6,1,t.AccountBalance()))}}function vee(i,e){if(i&1&&(C(0,"div",4),A(1),x()),i&2){let t,n,r=P();M2("title",(t=r.symbolName())!==null&&t!==void 0?t:(t=r.Symbol())==null?null:t.symbolName),_(),ye(" ",(n=r.symbolName())!==null&&n!==void 0?n:(n=r.Symbol())==null?null:n.symbolName," ")}}function yee(i,e){if(i&1){let t=ne();C(0,"div",5)(1,"svg-icon",7),V("click",function(){z(t);let r=P();return W(r.closeClick.emit())}),x()()}if(i&2){let t=P();_(),F("iconName",t.icons.Close)}}function Cee(i,e){if(i&1&&H(0,"symbol-group-market-time-item",6),i&2){let t=P();F("show",t.showSymbolMarketTime())("integratedGroupType",t.IntegratedGroupType())("showCloseButton",!1)("showCompactSize",!0)}}var SN=(()=>{let e=class e{set symbol(n){this.Symbol.set(n)}onClockClick(){this.showSymbolMarketTime.set(!this.showSymbolMarketTime())}constructor(){this.icons=Fe,this.hasCloseBtn=!1,this.showSymbolName=!0,this.showBuyPower=!1,this.showClock=!1,this.symbolName=rt(void 0),this.showMarketTime=rt(!0),this.closeClick=new lt,this.timeService=ee(n0),this.lsService=ee(Cs),this.moneyService=ee(_s),this.showSymbolMarketTime=pe(!1),this.Symbol=pe(void 0),this.Time=Ce(this.timeService.serverTimeObs$),this.AccountBalance=Ce(this.moneyService.accountBalance$),this.GroupStateValue$=Ft(this.Symbol).pipe(Di(n=>n?.symbolGroup!==void 0),Jt(n=>this.lsService.subscribeToLs(qc.GroupStateChange,n.symbolGroup).pipe(Je(r=>{this.subId||(this.subId=r.subId)}),gt(r=>r?.name===Rp.GroupStateChangeSchema.stateCode),Be(r=>r.val?.toUpperCase())))),this.GroupStateValue=Ce(this.GroupStateValue$),this.IntegratedGroupType=oi(()=>{let{symbolGroup:n=void 0,symbolIsin:r=""}=this.Symbol()??{};if(n)return IM(n,this.Symbol()?.marketUnit,r)}),this.SymbolMarketState=oi(()=>{if(this.IntegratedGroupType())return FM(this.Time(),this.IntegratedGroupType())}),this.IsSymbolMarketTime=oi(()=>{if(this.IntegratedGroupType())return OM(this.Time(),this.IntegratedGroupType(),this.timeService.showMarketOpenTimeSub.getValue())}),this.MarketTimeVisibility=Ce(Ft(this.IsSymbolMarketTime).pipe(Di(n=>n!==void 0),Be(n=>!n))),this.ClockStyle=oi(()=>this.GroupStateValue()!==void 0&&this.SymbolMarketState()!==void 0?LM(this.GroupStateValue(),this.SymbolMarketState(),this.timeService.isMarketOpenSub.getValue()):{clockClass:"",tooltip:"",iconName:""}),_r(()=>this.showSymbolMarketTime.set(this.MarketTimeVisibility()))}ngOnDestroy(){this.lsService.unsubscribeSchemaById(this.subId)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["order-form-header"]],inputs:{symbol:"symbol",hasCloseBtn:"hasCloseBtn",showSymbolName:"showSymbolName",showBuyPower:"showBuyPower",showClock:"showClock",symbolName:[1,"symbolName"],showMarketTime:[1,"showMarketTime"]},outputs:{closeClick:"closeClick"},decls:7,vars:13,consts:[[1,"mb-2","order-stock-symbol","d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center","overflow-hidden","py-1","w-100",3,"ngClass"],[1,"mb-0","ms-1","text-truncate"],[3,"click","showClockIcon","showClockText","clickable","tooltip","clockClass","icon"],[1,"h6","mb-0","ms-1","text-truncate",3,"title"],[1,"d-flex","justify-content-between","align-items-center"],[3,"show","integratedGroupType","showCloseButton","showCompactSize"],["width","18","height","18","data-cy","order-form-header-close-btn",1,"px-1","rounded","text-grey","cup",3,"click","iconName"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"div",1),Z(2,fee,7,3,"div",2),C(3,"clock-management",3),V("click",function(){return s.onClockClick()}),x(),Z(4,vee,2,2,"div",4),x(),Z(5,yee,2,1,"div",5),x(),Z(6,Cee,1,4,"symbol-group-market-time-item",6)),r&2&&(_(),F("ngClass",de(11,gee,s.showBuyPower)),_(),q(s.showBuyPower?2:-1),_(),F("showClockIcon",!0)("showClockText",s.showClock)("clickable",!1)("tooltip",s.ClockStyle().tooltip)("clockClass",s.ClockStyle().clockClass)("icon",s.ClockStyle().iconName),_(),q(s.showSymbolName?4:-1),_(),q(s.hasCloseBtn?5:-1),_(),q(s.showMarketTime()?6:-1))},dependencies:[Oe,Ke,yi,CA,vA,Ve],encapsulation:2});let i=e;return i})();function bee(i,e){if(i&1){let t=ne();C(0,"button",14),V("click",function(r){return z(t),P().cancelClick.emit(),W(r.stopPropagation())}),A(1," \u0628\u0627\u0632\u06AF\u0634\u062A "),x()}}function See(i,e){if(i&1){let t=ne();C(0,"button",15),V("click",function(r){return z(t),P().cancelClick.emit(),W(r.stopPropagation())}),A(1," \u0628\u0627\u0632\u06AF\u0634\u062A "),x()}}var xN=(()=>{let e=class e{constructor(){this.isMobile=rt.required(),this.Value=pe(void 0),this.Value$=Ft(this.Value).pipe(gt(Boolean)),this.Summary=Ce(this.Value$.pipe(Be(n=>dt(Se({},n),{sideName:n.orderSide.text,sideTextClass:n.orderSide.textClass,symbolName:n.symbol.symbolName,totalComputedExpense:Nl(n.orderSide.type,n.price,n.quantity,n.commission,n?.symbol?.[kc[n.orderSide.type]]??0,n?.symbol?.csize??1)})))),this.confirmClick=new lt,this.cancelClick=new lt}set input(n){this.Value.set(n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["order-form-confirm"]],inputs:{isMobile:[1,"isMobile"],input:"input"},outputs:{confirmClick:"confirmClick",cancelClick:"cancelClick"},decls:43,vars:17,consts:[[1,"confirm-order","text-body","bg-principal","bg-principal-4x-dark-mobile","d-flex","flex-column","align-items-center","justify-content-center","gap-2","py-3","px-2","px-lg-3","rounded"],[1,"fs-7","fw-bold","text-center","mb-2"],[1,"col","text-start","p-0"],[1,"w-100"],[1,"d-flex","w-100","justify-content-between","gap-2"],[1,"opacity-6"],[1,"mb-1"],[1,"d-flex","w-100","gap-2","justify-content-between"],[1,"d-flex","gap-2","justify-content-between","w-100"],[1,"d-block","small","opacity-6"],[1,"d-flex","gap-1","w-100","mt-1","text-center","py-2","px-2"],[1,"btn","btn-sm","w-50","btn-outline-secondary","m-0","px-4"],[1,"btn","w-50","btn-sm","btn-outline-light","m-0","px-4"],["data-cy","order-form-btn-confirm",1,"btn","btn-sm","w-50","flex-grow-1","btn-success","m-0","px-4",3,"click"],[1,"btn","btn-sm","w-50","btn-outline-secondary","m-0","px-4",3,"click"],[1,"btn","w-50","btn-sm","btn-outline-light","m-0","px-4",3,"click"]],template:function(r,s){if(r&1&&(C(0,"div",0)(1,"div",1)(2,"span"),A(3," \u062B\u0628\u062A \u062F\u0631\u062E\u0648\u0627\u0633\u062A "),x(),C(4,"span",2),A(5),x()(),C(6,"div",3)(7,"div",4)(8,"span",5),A(9,"\u0646\u0645\u0627\u062F:"),x(),C(10,"span",6),A(11),x()(),C(12,"div",7)(13,"span",5),A(14,"\u062A\u0639\u062F\u0627\u062F:"),x(),C(15,"span",6),A(16),fe(17,"number"),x()(),C(18,"div",7)(19,"span",5),A(20,"\u0642\u06CC\u0645\u062A:"),x(),C(21,"span",6),A(22),fe(23,"number"),C(24,"small",5),A(25,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()(),C(26,"div",8)(27,"span",5),A(28,"\u0627\u0631\u0632\u0634:"),x(),C(29,"span",6),A(30),fe(31,"number"),C(32,"small",5),A(33,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()()(),C(34,"div")(35,"span",9),A(36),fe(37,"numberToPersianWords"),x()()(),C(38,"div",10),Z(39,bee,2,0,"button",11)(40,See,2,0,"button",12),C(41,"button",13),V("click",function(a){return s.confirmClick.emit(),a.stopPropagation()}),A(42," \u062A\u0627\u06CC\u06CC\u062F "),x()()),r&2){let o,a,l,c,u,d,h;_(4),Nt((o=s.Summary())==null?null:o.sideTextClass),_(),ye(" ",(a=s.Summary())==null?null:a.sideName," "),_(6),ye(" ",(l=s.Summary())==null?null:l.symbolName," "),_(5),Re(Te(17,9,(c=s.Summary())==null?null:c.quantity)),_(6),ye("",Te(23,11,(u=s.Summary())==null?null:u.price)," "),_(8),ye("",Te(31,13,(d=s.Summary())==null||d.totalComputedExpense==null?null:d.totalComputedExpense.toFixed(0))," "),_(6),ye(" (",Te(37,15,(h=s.Summary())==null?null:h.totalComputedExpense),") "),_(3),q(s.isMobile()?39:40)}},dependencies:[Oe,yi,Xf],encapsulation:2,changeDetection:0});let i=e;return i})();function xee(i,e){if(i&1){let t=ne();C(0,"div",1)(1,"span",2),A(2),x(),C(3,"span",3),V("click",function(){z(t);let r=P().$implicit;return W(r==null?null:r.func())}),A(4),fe(5,"number"),x()()}if(i&2){let t=P().$implicit;_(2),ye("",t==null?null:t.title," "),_(),Nt(t==null?null:t.class),mn("data-cy",t==null?null:t.dataCy),_(),ye(" ",(t==null?null:t.type)==="string"?t==null?null:t.value:Te(5,5,t==null?null:t.value),"")}}function _ee(i,e){if(i&1&&Z(0,xee,6,7,"div",1),i&2){let t=e.$implicit;q(t.hide?-1:0)}}function wee(i,e){if(i&1&&(C(0,"div",0),St(1,_ee,1,1,null,null,zr),x()),i&2){let t=P();_(),xt(t.htmlItems())}}function Eee(i,e){if(i&1){let t=ne();C(0,"div",4)(1,"span",2),A(2),x(),C(3,"span",5),V("click",function(){z(t);let r=P().$implicit;return W(r==null||r.func==null?null:r.func())}),A(4),fe(5,"number"),x()()}if(i&2){let t=P().$implicit;_(2),ye("",t==null?null:t.title," "),_(),Nt(t==null?null:t.class),mn("data-cy",t==null?null:t.dataCy),_(),ye(" ",(t==null?null:t.type)==="string"?t==null?null:t.value:Te(5,5,t==null?null:t.value),"")}}function Tee(i,e){if(i&1&&Z(0,Eee,6,7,"div",4),i&2){let t=e.$implicit;q(t.hide?-1:0)}}function Mee(i,e){if(i&1&&(C(0,"div",0),St(1,Tee,1,1,null,null,zr),x()),i&2){let t=P();_(),xt(t.htmlItems())}}var Xu=(()=>{let e=class e{constructor(){this.onAssetClick=()=>this.assetEvent.emit(+(this.Summary()?.asset??0)),this.Side=pt,this.isAlgo=rt(!1),this.isOption=rt(!1),this.position=rt(void 0),this.showAsset=rt(!0),this.isMobile=!0,this.assetEvent=new lt,this.Value=pe(void 0),this.Value$=Ft(this.Value).pipe(gt(Boolean)),this.Summary$=this.Value$.pipe(Be(n=>dt(Se({},n),{dealExpense:HA(n.commission,n.price,n.quantity,n?.symbol?.csize??1),hidePrice:zA(n.quantity,n?.symbol?.[kc[n.orderSide.type]]??0),totalComputedExpense:Nl(n.orderSide.type,n.quantity,n.price,n.commission,n?.symbol?.[kc[n.orderSide.type]]??0,n.symbol.csize??1),breakEvenPrice:UA(n.price,+n.symbol.sellCommission,+n.symbol.buyCommission,n?.symbol?.[kc[n.orderSide.type]]??0),totalMargin:WA(n.price,n.quantity,n?.initialMargin,this.position()?.side,this.position()?.executedQuantity,this.position()?.openSellQuantity,n.symbol.csize)}))),this.Summary=Ce(this.Summary$),this.htmlItems=Ce(this.Summary$.pipe(Be(n=>[{title:"\u062F\u0627\u0631\u0627\u06CC\u06CC \u0641\u0639\u0644\u06CC",value:n?.asset,dataCy:"order-summary-asset",hide:!this.showAsset()||this.isOption(),class:"cup",func:this.onAssetClick},{title:"\u0645\u0648\u0642\u0639\u06CC\u062A \u0641\u0639\u0644\u06CC",value:this.position()?.executedQuantity??0,hide:!n.isOptionSymbol},{title:"\u0633\u0645\u062A \u0645\u0648\u0642\u0639\u06CC\u062A \u0641\u0639\u0644\u06CC",value:this.position()?.side===pt.Buy?"\u062E\u0631\u06CC\u062F":"\u0641\u0631\u0648\u0634",class:this.position()?.side===pt.Buy?"text-success":"text-danger",hide:!this.position(),type:"string"},{title:"\u0648\u062C\u0647 \u062A\u0636\u0645\u06CC\u0646",value:n?.totalMargin,hide:!n.isOptionSymbol||n?.initialMargin===void 0||n.isOptionSymbol&&n.orderSide.type!==pt.Sell},{title:"\u0642\u06CC\u0645\u062A \u0633\u0631\u0628\u0647\u200C\u0633\u0631",value:n?.breakEvenPrice,dataCy:"order-summary-break-even-price",hide:this.Value()?.orderSide?.type!==pt.Buy},{title:"\u0647\u0632\u06CC\u0646\u0647 \u0645\u0639\u0627\u0645\u0644\u0647",value:n?.dealExpense,dataCy:"order-summary-deal-expense",hide:this.isAlgo()},{title:"\u0647\u0632\u06CC\u0646\u0647 \u067E\u0630\u06CC\u0631\u0647 \u0646\u0648\u06CC\u0633\u06CC",value:n?.hidePrice,dataCy:"order-summary-hide-price",hide:!this.Value()?.symbol.hidePrice},{title:this.isAlgo()?"\u062A\u062E\u0645\u06CC\u0646 \u0627\u0631\u0632\u0634":"\u062C\u0645\u0639 \u06A9\u0644",value:n?.totalComputedExpense,dataCy:"order-summary-total-expense"}])))}set value(n){n&&this.Value.set(n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["order-form-summary"]],inputs:{isAlgo:[1,"isAlgo"],isOption:[1,"isOption"],position:[1,"position"],showAsset:[1,"showAsset"],value:"value",isMobile:"isMobile"},outputs:{assetEvent:"assetEvent"},decls:2,vars:1,consts:[[1,"mt-2","px-2"],[1,"d-flex","justify-content-between","py-1","orderformoption","border-bottom","border-emphasis","border-opacity-10"],[1,"text-body-tertiary"],["dir","ltr",1,"fw-bold",3,"click"],[1,"d-flex","justify-content-between","orderformoption"],["dir","ltr",3,"click"]],template:function(r,s){r&1&&Z(0,wee,3,0,"div",0)(1,Mee,3,0,"div",0),r&2&&q(s.isMobile?0:1)},dependencies:[Oe,yi],encapsulation:2,changeDetection:0});let i=e;return i})();function Aee(i,e){i&1&&(C(0,"div",1)(1,"div",3),To(),C(2,"svg",4),H(3,"path",5),C(4,"g",6),H(5,"path",7),x(),C(6,"defs")(7,"linearGradient",8),H(8,"stop",9)(9,"stop",10)(10,"stop",11)(11,"stop",12),x(),C(12,"clipPath",13),H(13,"rect",14),x()()()(),yl(),C(14,"div",15),To(),C(15,"svg",16),H(16,"path",17),C(17,"g",18),H(18,"path",19),x(),C(19,"defs")(20,"linearGradient",20),H(21,"stop",9)(22,"stop",21)(23,"stop",22)(24,"stop",12),x(),C(25,"clipPath",23),H(26,"rect",24),x()()()(),yl(),C(27,"div",25)(28,"div",26),To(),C(29,"svg",27),H(30,"ellipse",28),x()(),yl(),C(31,"div",29),To(),C(32,"svg",30)(33,"defs")(34,"style"),A(35," .cls-1 { isolation: isolate; opacity: 0.02; } .cls-2 { fill: #badaf1; } .cls-3 { fill: #a9c9e0; } .cls-4 { fill: #91bcda; } .cls-5 { fill: #7ba8c9; } .cls-6 { fill: none; stroke: #6a96b6; stroke-linecap: round; stroke-width: 3.74px; } "),x()(),C(36,"g",31)(37,"g"),H(38,"path",32)(39,"path",33)(40,"path",34)(41,"path",35)(42,"path",36)(43,"path",37),x()()()()()())}function Pee(i,e){i&1&&(C(0,"div",2)(1,"div",3),To(),C(2,"svg",38),H(3,"path",39)(4,"path",40)(5,"rect",41),x()(),yl(),C(6,"div",42),To(),C(7,"svg",43),H(8,"path",44)(9,"path",45)(10,"rect",46),x()(),yl(),C(11,"div",15),To(),C(12,"svg",47),H(13,"path",48)(14,"path",49)(15,"rect",50),x()(),yl(),C(16,"div",25)(17,"div",26),To(),C(18,"svg",27),H(19,"ellipse",28),x()(),yl(),C(20,"div",29),To(),C(21,"svg",30)(22,"defs")(23,"style"),A(24," .cls-1 { isolation: isolate; opacity: 0.02; } .cls-2 { fill: #badaf1; } .cls-3 { fill: #a9c9e0; } .cls-4 { fill: #91bcda; } .cls-5 { fill: #7ba8c9; } .cls-6 { fill: none; stroke: #6a96b6; stroke-linecap: round; stroke-width: 3.74px; } "),x()(),C(25,"g",31)(26,"g"),H(27,"path",32)(28,"path",33)(29,"path",34)(30,"path",35)(31,"path",36)(32,"path",37),x()()()()()())}var pC=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["order-form-loading"]],inputs:{iconName:"iconName",algo:"algo"},decls:3,vars:1,consts:[[1,"text-center","py-3"],[1,"loader-stack","loader-stack-at"],[1,"loader-stack"],[1,"loader-stack-order","loader-stack-order--secondary","animate__animated","animate__bounce"],["viewBox","0 0 38 35","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5.85498 6.11187C7.38012 3.47024 8.1427 2.14942 9.23932 1.43727C10.2039 0.810837 11.3421 0.505865 12.4907 0.566061C13.7965 0.634494 15.1173 1.39707 17.7589 2.92221L31.734 10.9907C34.3756 12.5158 35.6964 13.2784 36.4086 14.375C37.035 15.3397 37.34 16.4778 37.2798 17.6264C37.2113 18.9322 36.4488 20.253 34.9236 22.8946L31.4323 28.9419C29.9071 31.5835 29.1445 32.9043 28.0479 33.6165C27.0833 34.2429 25.9451 34.5479 24.7965 34.4877C23.4907 34.4192 22.1699 33.6567 19.5283 32.1315L5.55328 24.063C2.91164 22.5379 1.59083 21.7753 0.878673 20.6787C0.252243 19.7141 -0.0527287 18.5759 0.00746678 17.4273C0.0758999 16.1215 0.838473 14.8007 2.36362 12.1591L5.85498 6.11187Z","fill","url(#paint0_linear_1836_3)"],["clip-path","url(#clip0_1836_3)"],["d","M21.0388 21.43C20.5685 22.2189 19.5589 22.4743 18.77 22.0041C17.9811 21.5338 17.7256 20.5242 18.1959 19.7353C18.6661 18.9464 19.6828 18.6952 20.4646 19.1612C21.2464 19.6272 21.5048 20.6482 21.0388 21.43ZM15.4896 16.1955C14.7078 15.7295 13.6868 15.9879 13.2208 16.7697C12.7548 17.5515 13.0131 18.5724 13.7949 19.0384C14.5767 19.5045 15.5934 19.2532 16.0637 18.4643C16.534 17.6754 16.2785 16.6658 15.4896 16.1955ZM25.1596 23.4047L23.8886 25.5369C23.6556 25.9278 23.1451 26.057 22.7542 25.824L22.0435 25.4003L21.6198 26.111C21.1496 26.8999 20.14 27.1554 19.351 26.6852L9.40089 20.7539C8.61909 20.2879 8.3565 19.274 8.82677 18.4851L9.25043 17.7744L8.5397 17.3507C8.1488 17.1177 8.01963 16.6072 8.25264 16.2163L9.52363 14.0842C9.75665 13.6933 10.2671 13.5641 10.658 13.7971L11.3687 14.2208C13.0083 11.4702 16.559 10.5717 19.3095 12.2113L20.0202 12.635L20.5582 11.7324C20.2758 11.2365 20.2669 10.6051 20.5805 10.0791C21.0465 9.29735 22.0674 9.03899 22.8492 9.50502C23.631 9.97105 23.8894 10.992 23.4234 11.7738C23.1098 12.2997 22.5502 12.5922 21.9797 12.5797L21.4416 13.4823L22.1524 13.906C24.9029 15.5455 25.8014 19.0962 24.1618 21.8467L24.8725 22.2704C25.2634 22.5034 25.3926 23.0138 25.1596 23.4047ZM23.3145 23.2681L21.893 22.4208L22.7403 20.9994C23.9097 19.0378 23.2666 16.4967 21.305 15.3274L18.4621 13.6328C16.5005 12.4635 13.9595 13.1065 12.7902 15.0681L11.9429 16.4895L10.5214 15.6422L10.0978 16.3529L11.5192 17.2003L10.2482 19.3324L20.1984 25.2637L21.4694 23.1315L22.8908 23.9789L23.3145 23.2681Z","fill","#D2D2D2"],["id","paint0_linear_1836_3","x1","-77.7444","y1","28.7661","x2","75.4635","y2","23.1641","gradientUnits","userSpaceOnUse"],["stop-color","#F0414B"],["offset","0.481169","stop-color","#DEB245"],["offset","0.728442","stop-color","#008BA3"],["offset","1","stop-color","#46B97D"],["id","clip0_1836_3"],["width","19.858","height","19.858","fill","white","transform","translate(15.168 3) rotate(30.7992)"],[1,"loader-stack-order","loader-stack-order--primary","animate__animated","animate__bounce"],["viewBox","0 0 47 42","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M1.23406 19.493C1.21893 20.3824 1.44158 21.2547 1.83852 22.2699C2.22956 23.27 2.81509 24.4692 3.5678 26.0107L3.58303 26.0419L7.08823 33.2205L7.10346 33.2517C7.85616 34.7932 8.44169 35.9924 8.98989 36.9157C9.54636 37.8531 10.0973 38.5651 10.8079 39.1001C11.9885 39.9889 13.4202 40.4811 14.8978 40.5063C15.7871 40.5214 16.6594 40.2987 17.6747 39.9018C18.6748 39.5108 19.8739 38.9252 21.4154 38.1726L21.4467 38.1573L38.0362 30.0568L38.0674 30.0416C39.6089 29.2889 40.8081 28.7034 41.7315 28.1552C42.6688 27.5987 43.3808 27.0477 43.9158 26.3371C44.8046 25.1565 45.2969 23.7249 45.322 22.2473C45.3371 21.358 45.1145 20.4856 44.7175 19.4704C44.3265 18.4702 43.7409 17.2711 42.9882 15.7295L42.973 15.6984L39.4678 8.51985L39.4527 8.48882C38.6999 6.94722 38.1144 5.748 37.5662 4.82458C37.0097 3.88725 36.4587 3.17523 35.7481 2.64025C34.5675 1.75143 33.1358 1.25919 31.6583 1.23406C30.7689 1.21893 29.8966 1.44158 28.8814 1.83852C27.8813 2.22955 26.6821 2.81509 25.1406 3.56779L25.1094 3.58303L8.51985 11.6835L8.48865 11.6987C6.94713 12.4514 5.74797 13.037 4.82458 13.5851C3.88725 14.1416 3.17523 14.6926 2.64025 15.4032C1.75143 16.5838 1.25919 18.0155 1.23406 19.493Z","fill","url(#paint0_linear_1835_2)","stroke","currentColor","stroke-width","1.53333"],["clip-path","url(#clip0_1835_2)"],["d","M30.1282 21.2124C30.5998 22.2459 30.1492 23.4526 29.1157 23.9242C28.0822 24.3958 26.8754 23.9453 26.4038 22.9118C25.9323 21.8783 26.3921 20.6672 27.4163 20.1999C28.4405 19.7326 29.6608 20.1882 30.1282 21.2124ZM20.8987 23.1739C19.8745 23.6412 19.4189 24.8616 19.8863 25.8858C20.3536 26.9099 21.5739 27.3655 22.5981 26.8982C23.6223 26.4309 24.0822 25.2198 23.6106 24.1863C23.139 23.1528 21.9322 22.7023 20.8987 23.1739ZM35.0367 18.4101L36.3113 21.2034C36.5449 21.7155 36.3171 22.3256 35.805 22.5593L34.874 22.9842L35.2988 23.9152C35.7704 24.9487 35.3198 26.1555 34.2863 26.6271L21.2512 32.5751C20.227 33.0424 19.0109 32.5961 18.5393 31.5626L18.1145 30.6315L17.1834 31.0564C16.6713 31.2901 16.0611 31.0622 15.8274 30.5502L14.5529 27.7569C14.3192 27.2448 14.547 26.6346 15.0591 26.401L15.9902 25.9761C14.346 22.3728 15.9305 18.1287 19.5338 16.4846L20.4649 16.0597L19.9253 14.8772C19.2222 14.8156 18.5736 14.3803 18.2592 13.6913C17.7919 12.6671 18.2475 11.4468 19.2717 10.9794C20.2959 10.5121 21.5162 10.9677 21.9836 11.9919C22.298 12.6809 22.2017 13.456 21.7875 14.0275L22.327 15.21L23.2581 14.7851C26.8614 13.141 31.1055 14.7255 32.7497 18.3287L33.6808 17.9039C34.1929 17.6702 34.803 17.898 35.0367 18.4101ZM33.5994 20.1909L31.7372 21.0406L30.8875 19.1785C29.7149 16.6087 26.6776 15.4747 24.1078 16.6473L20.3835 18.3467C17.8137 19.5193 16.6798 22.5566 17.8524 25.1264L18.7021 26.9886L16.8399 27.8383L17.2648 28.7694L19.1269 27.9197L20.4015 30.7129L33.4366 24.7649L32.1621 21.9717L34.0242 21.122L33.5994 20.1909Z","fill","white"],["id","paint0_linear_1835_2","x1","-29.9149","y1","117.999","x2","62.2122","y2","-31.2266","gradientUnits","userSpaceOnUse"],["offset","0.424101","stop-color","#FFCD50"],["offset","0.731459","stop-color","#00AFCD"],["id","clip0_1835_2"],["width","24.5624","height","24.5624","fill","white","transform","translate(7.24951 14.2158) rotate(-24.5273)"],[1,"loader-stack-basket"],[1,"loader-stack-basket--shadow"],["viewBox","0 0 61 6","fill","none","xmlns","http://www.w3.org/2000/svg"],["opacity","0.2","cx","30.4","cy","3.20002","rx","30.4","ry","2.8","fill","#D9D9D9"],[1,"animate__animated","animate__bounce"],["viewBox","0 0 64 34","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","Layer_1-2","data-name","Layer 1"],["d","m9.66,29.42L3,9h54l-6.66,20.42c-.5,1.54-1.94,2.58-3.56,2.58H13.22c-1.62,0-3.06-1.04-3.56-2.58Z",1,"cls-5"],["d","m30.79,29.44l-6.79-20.44h34l-6.79,20.44c-.51,1.53-1.94,2.56-3.55,2.56h-13.32c-1.61,0-3.04-1.03-3.55-2.56Z",1,"cls-4"],["d","m3.48,9.38h53.91l-.73,3.01H4.21l-.73-3.01Z",1,"cls-1"],["d","m0,1.5C0,.67.67,0,1.5,0h57c.83,0,1.5.67,1.5,1.5v8c0,.83-.67,1.5-1.5,1.5H1.5c-.83,0-1.5-.67-1.5-1.5V1.5Z",1,"cls-2"],["d","m0,1.5C0,.67.67,0,1.5,0h21c.83,0,1.5.67,1.5,1.5v9.5H1.5c-.83,0-1.5-.67-1.5-1.5V1.5Z",1,"cls-3"],["d","m37,7v4.5c0,3.04,2.46,5.5,5.5,5.5h0c3.04,0,5.5-2.46,5.5-5.5v-4.5",1,"cls-6"],["viewBox","0 0 34 26","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.5353 2.81837C4.11439 3.27712 3.83505 3.83146 3.58821 4.51787C3.34646 5.19013 3.11757 6.04439 2.82733 7.12758L2.81931 7.15751L1.61715 11.644L1.60913 11.674C1.31889 12.7572 1.08998 13.6114 0.963217 14.3145C0.83378 15.0324 0.798529 15.6521 0.933667 16.2598C1.1542 17.2516 1.6878 18.1499 2.45479 18.8277C2.9231 19.2416 3.48637 19.5195 4.18617 19.7682C4.87294 20.0123 5.74548 20.2461 6.85547 20.5435L6.88421 20.5512L21.6327 24.503L21.6614 24.5107C22.7714 24.8082 23.644 25.042 24.3608 25.174C25.0912 25.3085 25.7179 25.3495 26.3304 25.2252C27.3336 25.0216 28.2448 24.5105 28.9317 23.7619C29.3526 23.3031 29.6319 22.7488 29.8788 22.0624C30.1205 21.3901 30.3494 20.5358 30.6397 19.4526L30.6477 19.4227L31.8498 14.9362L31.8579 14.9063C32.1481 13.8231 32.377 12.9688 32.5038 12.2658C32.6332 11.5479 32.6685 10.9282 32.5333 10.3204C32.3128 9.32865 31.7792 8.43039 31.0122 7.75252C30.5439 7.33862 29.9806 7.06076 29.2808 6.81206C28.594 6.56798 27.7215 6.33418 26.6115 6.03677L26.5828 6.02907L11.8343 2.07722L11.8056 2.06952C10.6956 1.7721 9.82302 1.5383 9.10623 1.40629C8.37583 1.27178 7.74909 1.23077 7.13658 1.35506C6.13341 1.55863 5.22216 2.06974 4.5353 2.81837Z","fill","#F0414B","stroke","currentColor","stroke-width","1.36612"],["d","M9.79492 2.23804L26.5534 6.72847C28.7705 7.32254 29.8791 7.61957 30.6103 8.27795C31.2535 8.85707 31.6968 9.62495 31.8767 10.4715C32.0813 11.4339 31.7843 12.5425 31.1902 14.7596L29.988 19.2461C29.394 21.4632 29.0969 22.5717 28.4386 23.3029C27.8594 23.9461 27.0916 24.3894 26.245 24.5694C25.2826 24.774 24.174 24.4769 21.9569 23.8829L5.19842 19.3924L9.79492 2.23804Z","fill","#D0D9E5"],["opacity","0.4","x","20.9639","y","8.05933","width","8.87977","height","3.4153","rx","1.70765","transform","rotate(15 20.9639 8.05933)","fill","#F0F8FF"],[1,"loader-stack-order","animate__animated","animate__bounce"],["viewBox","0 0 35 27","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M1.75381 10.5205C1.61867 11.1282 1.65392 11.748 1.78336 12.4658C1.91012 13.1689 2.13902 14.0231 2.42927 15.1063L2.43729 15.1363L3.63945 19.6228L3.64747 19.6527C3.93771 20.7359 4.1666 21.5902 4.40835 22.2624C4.65519 22.9489 4.93453 23.5032 5.35544 23.9619C6.0423 24.7106 6.95355 25.2217 7.95672 25.4252C8.56923 25.5495 9.19597 25.5085 9.92636 25.374C10.6432 25.242 11.5157 25.0082 12.6257 24.7108L12.6544 24.7031L27.4029 20.7512L27.4316 20.7435C28.5416 20.4461 29.4142 20.2123 30.101 19.9683C30.8008 19.7195 31.364 19.4417 31.8323 19.0278C32.5993 18.3499 33.1329 17.4517 33.3535 16.4599C33.4886 15.8522 33.4533 15.2324 33.3239 14.5145C33.1971 13.8115 32.9682 12.9572 32.678 11.874L32.67 11.8441L31.4678 7.35756L31.4598 7.32761C31.1696 6.24443 30.9407 5.39018 30.6989 4.71793C30.4521 4.03151 30.1727 3.47718 29.7518 3.01843C29.065 2.2698 28.1537 1.75868 27.1505 1.55512C26.538 1.43083 25.9113 1.47183 25.1809 1.60635C24.4641 1.73835 23.5916 1.97215 22.4816 2.26958L22.4528 2.27728L7.70435 6.22912L7.67561 6.23682C6.56562 6.53424 5.69308 6.76803 5.00631 7.01211C4.30651 7.26082 3.74324 7.53867 3.27493 7.95257C2.50794 8.63045 1.97434 9.52871 1.75381 10.5205Z","fill","#FFCD50","stroke","currentColor","stroke-width","1.36612"],["d","M6.01855 7.38818L22.7771 2.89775C24.9942 2.30368 26.1027 2.00665 27.0651 2.21122C27.9117 2.39117 28.6796 2.8345 29.2587 3.47768C29.9171 4.20888 30.2141 5.31743 30.8082 7.53451L32.0103 12.021C32.6044 14.2381 32.9014 15.3467 32.6969 16.3091C32.5169 17.1557 32.0736 17.9235 31.4304 18.5027C30.6992 19.161 29.5907 19.4581 27.3736 20.0521L10.6151 24.5426L6.01855 7.38818Z","fill","#E3EAF1"],["opacity","0.7","x","18.6016","y","6.84503","width","8.87977","height","3.4153","rx","1.70765","transform","rotate(-15 18.6016 6.84503)","fill","white"],["viewBox","0 0 34 34","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M22.3484 1.65373C22.9423 1.84057 23.4614 2.18097 24.0183 2.652C24.5638 3.11332 25.1892 3.73868 25.9821 4.53164L26.004 4.55354L29.2884 7.83791L29.3103 7.85982C30.1033 8.65277 30.7286 9.27813 31.1899 9.82362C31.661 10.3806 32.0014 10.8997 32.1882 11.4936C32.4931 12.4627 32.4801 13.5074 32.1548 14.478C31.9562 15.0706 31.6073 15.5929 31.1256 16.1581C30.6529 16.7129 30.0142 17.3517 29.2016 18.1642L29.1806 18.1853L18.3839 28.9819L18.3629 29.0029C17.5503 29.8155 16.9116 30.4543 16.3568 30.927C15.7915 31.4087 15.2693 31.7575 14.6767 31.9562C13.7061 32.2815 12.6614 32.2944 11.6922 31.9895C11.0984 31.8027 10.5793 31.4623 10.0223 30.9913C9.47679 30.5299 8.85142 29.9046 8.05845 29.1116L8.03659 29.0897L4.75222 25.8054L4.73029 25.7834C3.93734 24.9905 3.31199 24.3651 2.85067 23.8197C2.37964 23.2627 2.03924 22.7436 1.85241 22.1497C1.54751 21.1805 1.56049 20.1358 1.88578 19.1653C2.0844 18.5727 2.43328 18.0504 2.91497 17.4851C3.38769 16.9304 4.02644 16.2916 4.83901 15.4791L4.86005 15.458L15.6567 4.66138L15.6777 4.64034C16.4903 3.82777 17.129 3.18902 17.6838 2.7163C18.2491 2.23461 18.7713 1.88573 19.3639 1.68711C20.3345 1.36182 21.3792 1.34883 22.3484 1.65373Z","fill","#26BE8C","stroke","currentColor","stroke-width","1.36612"],["d","M17.5034 3.78064L5.23533 16.0487C3.61231 17.6717 2.8008 18.4833 2.49675 19.419C2.2293 20.2422 2.2293 21.1288 2.49675 21.952C2.8008 22.8877 3.61231 23.6992 5.23533 25.3222L8.5197 28.6066C10.1427 30.2296 10.9542 31.0411 11.89 31.3452C12.7131 31.6126 13.5998 31.6126 14.4229 31.3452C15.3587 31.0411 16.1702 30.2296 17.7932 28.6066L30.0613 16.3385L17.5034 3.78064Z","fill","#ECF2F9"],["opacity","0.7","x","11.2241","y","13.9234","width","8.87977","height","3.4153","rx","1.70765","transform","rotate(-45 11.2241 13.9234)","fill","white"]],template:function(r,s){r&1&&(C(0,"div",0),Z(1,Aee,44,0,"div",1)(2,Pee,33,0,"div",2),x()),r&2&&(_(),q(s.algo?1:2))},dependencies:[Oe],styles:[`[_nghost-%COMP%]{--animate-duration: 1.5s;--animate-delay: 0s;--animate-repeat: infinite}.animate__animated[_ngcontent-%COMP%]{animation:var(--animate-duration) ease-in var(--animate-delay) var(--animate-repeat) both}.animate__bounce[_ngcontent-%COMP%]{-webkit-animation-name:_ngcontent-%COMP%_bounce;animation-name:_ngcontent-%COMP%_bounce;-webkit-transform-origin:center bottom;transform-origin:center bottom}.body[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;height:100vh;gap:11rem}.loader-stack[_ngcontent-%COMP%]{position:relative;font-size:16px;width:4.4em;margin:5.5em auto;color:var(--color-principal)}.loader-stack-at[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:-4em;width:4em;height:4em;background-image:url("data:image/svg+xml,%3Csvg width='71' height='42' viewBox='0 0 71 42' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M6.75983 31.8096C6.23534 31.5098 6.21965 30.7592 6.73116 30.4377L8.84539 29.1091C9.761 28.5337 10.5352 27.7595 11.1106 26.8439L12.4318 24.7416C12.7549 24.2273 13.5108 24.2466 13.8073 24.7767L14.789 26.5318C15.4129 27.6471 16.3224 28.5763 17.4241 29.2239L19.4741 30.4289C20.0111 30.7446 19.9972 31.5259 19.4492 31.8222L17.6856 32.7761C16.4542 33.4421 15.4436 34.4526 14.7776 35.684L13.8198 37.455C13.5243 38.0014 12.746 38.0172 12.4285 37.4833L11.2057 35.4268C10.5704 34.3584 9.66924 33.4726 8.59003 32.8557L6.75983 31.8096Z' fill='%2300B1CB'/%3E%3Cpath d='M61.133 6.17167C60.6425 5.81781 60.6104 5.05703 61.0945 4.69449C62.42 3.70194 63.4176 2.6909 64.4093 1.33958C64.738 0.891591 65.4117 0.874659 65.7563 1.31057C66.861 2.70793 67.8884 3.7416 69.1904 4.76356C69.6327 5.11066 69.6171 5.79402 69.1574 6.11753C67.6373 7.18709 66.7867 8.03771 65.7172 9.55772C65.3937 10.0175 64.7116 10.0324 64.3769 9.58078C63.4055 8.26996 62.425 7.1037 61.133 6.17167Z' fill='%2348E8DE'/%3E%3Cpath d='M0.572645 38.5452C0.321578 38.3766 0.305053 37.9974 0.550135 37.8202C1.58695 37.0707 2.32621 36.3241 3.07613 35.2721C3.23741 35.0459 3.57469 35.0374 3.74486 35.2571C4.57811 36.3324 5.33111 37.0889 6.33038 37.8532C6.55366 38.024 6.5461 38.3662 6.31446 38.5255C5.13247 39.338 4.53765 39.9329 3.72512 41.1148C3.56589 41.3464 3.22406 41.3539 3.05811 41.127C2.31979 40.1176 1.5894 39.2279 0.572645 38.5452Z' fill='%2345D9AC'/%3E%3C/svg%3E%0A");background-repeat:no-repeat;background-position:center;background-size:100%}.loader-stack-basket[_ngcontent-%COMP%]{position:relative;z-index:1;padding-bottom:.2em;width:4.4em}.loader-stack-basket--shadow[_ngcontent-%COMP%]{position:absolute;bottom:-.5em;width:4.4em}.loader-stack-order[_ngcontent-%COMP%]{position:absolute;width:3.1em;top:-1.3em;right:.6em;-webkit-animation-name:_ngcontent-%COMP%_order;animation-name:_ngcontent-%COMP%_order}.loader-stack-order.loader-stack-order--secondary[_ngcontent-%COMP%]{left:5%;-webkit-animation-name:_ngcontent-%COMP%_order-secondary;animation-name:_ngcontent-%COMP%_order-secondary}.loader-stack-at[_ngcontent-%COMP%]   .loader-stack-order.loader-stack-order--secondary[_ngcontent-%COMP%]{right:5%;left:auto}.loader-stack-order.loader-stack-order--primary[_ngcontent-%COMP%]{left:50%;margin-left:-1.55em;-webkit-animation-name:_ngcontent-%COMP%_order-primary;animation-name:_ngcontent-%COMP%_order-primary}.loader-stack-at[_ngcontent-%COMP%]   .loader-stack-order.loader-stack-order--primary[_ngcontent-%COMP%]{left:5%;right:auto;margin-left:0}@keyframes _ngcontent-%COMP%_order-secondary{0%,20%,53%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-2em,0) scaleY(1.1);transform:translate3d(0,-2em,0) scaleY(1.1)}70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-.6em,0) scaleY(1.05);transform:translate3d(0,-.6em,0) scaleY(1.05)}80%{-webkit-transition-timing-function:cubic-bezier(.215,.61,.355,1);transition-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0) scaleY(.95);transform:translateZ(0) scaleY(.95)}90%{-webkit-transform:translate3d(0,-.2em,0) scaleY(1.02);transform:translate3d(0,-.2em,0) scaleY(1.02)}}@keyframes _ngcontent-%COMP%_order-primary{0%,20%,53%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-4em,0) scaleY(1.1);transform:translate3d(0,-4em,0) scaleY(1.1)}70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-.9em,0) scaleY(1.05);transform:translate3d(0,-.9em,0) scaleY(1.05)}80%{-webkit-transition-timing-function:cubic-bezier(.215,.61,.355,1);transition-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0) scaleY(.95);transform:translateZ(0) scaleY(.95)}90%{-webkit-transform:translate3d(0,-.3em,0) scaleY(1.02);transform:translate3d(0,-.3em,0) scaleY(1.02)}}@keyframes _ngcontent-%COMP%_order{0%,20%,53%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-1em,0) scaleY(1.1);transform:translate3d(0,-1em,0) scaleY(1.1)}70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-.5em,0) scaleY(1.05);transform:translate3d(0,-.5em,0) scaleY(1.05)}80%{-webkit-transition-timing-function:cubic-bezier(.215,.61,.355,1);transition-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0) scaleY(.95);transform:translateZ(0) scaleY(.95)}90%{-webkit-transform:translate3d(0,-.1em,0) scaleY(1.02);transform:translate3d(0,-.1em,0) scaleY(1.02)}}@keyframes _ngcontent-%COMP%_bounce{0%,20%,53%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,0,0) scaleY(1.2);transform:translateZ(0) scaleY(1.2)}70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-15px,0) scaleY(1.1);transform:translateZ(0) scaleY(1.1)}80%{-webkit-transition-timing-function:cubic-bezier(.215,.61,.355,1);transition-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0) scaleY(.97);transform:translateZ(0) scaleY(.97)}90%{-webkit-transform:translate3d(0,-4px,0) scaleY(1.03);transform:translateZ(0) scaleY(1.03)}}
/*# sourceMappingURL=order-form-loading.style-2PDNJAHN.css.map */`]});let i=e;return i})();var Dee=i=>({"is-invalid":i}),kee=i=>({"rounded-end-0":i}),Iee=(i,e,t)=>({"is-invalid":i,"border-primary":e,"border-secondary-subtle":t}),Fee=i=>({selected:i}),Oee=i=>({"input-highlight":i});function Lee(i,e){if(i&1){let t=ne();C(0,"div",4)(1,"svg-icon",7),V("click",function(){z(t);let r=P(2);return W(r.onImageClick())}),x()()}if(i&2){let t=P(2);_(),F("iconName",t.icons.Calculator)("ngClass",t.iconName)}}function Ree(i,e){if(i&1){let t=ne();C(0,"div",0)(1,"span",2),A(2),x(),C(3,"div",3),Z(4,Lee,2,2,"div",4),C(5,"div",5)(6,"custom-number-box",6),V("keyDown",function(r){z(t);let s=P();return W(s.onKeyDown(r))})("valueChanged",function(r){z(t);let s=P();return W(s.checkValidation(r.value))}),x()()()()}if(i&2){let t=P();F("ngClass",de(7,Dee,!t.ControlIsValid())),_(2),Re(t.title),_(2),q(t.iconName?4:-1),_(),F("ngClass",de(9,kee,t.iconName)),_(),F("id",t.id)("form",t.form)("roundOnStep",!0)}}function Nee(i,e){if(i&1){let t=ne();C(0,"span",14),V("click",function(){z(t);let r=P(2);return W(r.onImageClick())}),x()}if(i&2){let t=P(2);F("ngClass",t.iconName)}}function Vee(i,e){if(i&1){let t=ne();C(0,"div",1)(1,"div",8),H(2,"svg-icon",9),C(3,"span",10),A(4),x()(),C(5,"div",11)(6,"custom-number-box",12),V("tap",function(){z(t);let r=P();return W(r.onValueTap())})("keyDown",function(r){z(t);let s=P();return W(s.onKeyDown(r))})("valueChanged",function(r){z(t);let s=P();return s.checkValidation(r.value),W(s.valueChanged.emit(r.value))}),x(),Z(7,Nee,1,1,"span",13),x()()}if(i&2){let t=P();F("ngClass",kp(10,Iee,!t.ControlIsValid(),t.highlight,!t.highlight)),_(2),F("iconName",t.icons.ChevronUp),_(2),Re(t.title),_(),F("ngClass",de(14,Fee,t.highlight)),_(),F("id",t.id)("form",t.form)("readOnly",!0)("ngClass",de(16,Oee,t.highlight))("roundOnStep",!0),_(),q(t.iconName?7:-1)}}var _N=(()=>{let e=class e{constructor(){this.icons=Fe,this.onImageClick=()=>this.imgClick.emit(),this.onValueTap=()=>this.valueTap.emit(!0),this.onValueClicked=n=>this.valueClick.emit(n),this.onKeyDown=n=>this.keyDown.emit(n),this.isMobile=!1,this.iconName="",this.id="",this.title="",this.imgClick=new lt,this.valueTap=new lt,this.valueClick=new lt,this.valueChanged=new lt,this.keyDown=new lt,this.ControlIsValid=pe(!0)}checkValidation(n){this.maxValue&&this.ControlIsValid.update(()=>+n<=this.maxValue)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["order-form-algo-value"]],inputs:{isMobile:"isMobile",iconName:"iconName",id:"id",title:"title",form:"form",highlight:"highlight",maxValue:"maxValue"},outputs:{imgClick:"imgClick",valueTap:"valueTap",valueClick:"valueClick",valueChanged:"valueChanged",keyDown:"keyDown"},decls:2,vars:1,consts:[[1,"d-flex","justify-content-between","align-items-center","gap-2",3,"ngClass"],[1,"order-form-field","flex-grow-1","rounded","border","border-2","overflow-hidden",3,"ngClass"],[1,"text-body","text-opacity-50","small","text-nowrap"],[1,"input-group","flex-row-reverse"],[1,"form-control","d-flex","justify-content-center","input-group-text","p-0"],[1,"form-control","rounded","d-flex","w-50","overflow-hidden","line-height-18px","ps-0","pe-1",3,"ngClass"],[1,"align-items-center","d-flex",3,"keyDown","valueChanged","id","form","roundOnStep"],["width","20","height","20",1,"cup","text-white","px-1",3,"click","iconName","ngClass"],[1,"d-flex","justify-content-between","align-items-center","border-bottom","border-opacity-25","border-secondary","text-body-secondary","p-1"],["width","18","height","18",1,"",3,"iconName"],[1,"me-2"],[1,"align-items-center","d-flex","form-control","border-0","input-index","ps-3","pe-1","bg-transparent",3,"ngClass"],[1,"ps-3","flex-grow-1","px-1",3,"tap","keyDown","valueChanged","id","form","readOnly","ngClass","roundOnStep"],[1,"d-flex","justify-content-center","align-items-center","px-1","cup",3,"ngClass"],[1,"d-flex","justify-content-center","align-items-center","px-1","cup",3,"click","ngClass"]],template:function(r,s){r&1&&Z(0,Ree,7,11,"div",0)(1,Vee,8,18,"div",1),r&2&&q(s.isMobile?1:0)},dependencies:[Oe,Ke,Zn,Ve],styles:[`custom-number-box .custome-editor-input-container{margin-right:5px!important}custom-number-box input{width:100%!important}
/*# sourceMappingURL=order-from-algo-value.style-3SNHB6XJ.css.map */
`],encapsulation:2,changeDetection:0});let i=e;return i})();var Bee=i=>({selected:i}),Gee=i=>({"input-highlight":i});function Uee(i,e){if(i&1){let t=ne();C(0,"div",4)(1,"div",5),V("click",function(){z(t);let r=P();return W(r.onAccountBalanceClicked())}),C(2,"span",6),A(3," \u0642\u062F\u0631\u062A \u062E\u0631\u06CC\u062F"),x()(),C(4,"div",7),V("click",function(){z(t);let r=P();return W(r.onMinimumBuyClicked())}),C(5,"span",6),A(6,"\u062D\u062F\u0627\u0642\u0644 \u062E\u0631\u06CC\u062F"),x()()()}if(i&2){let t=P();Ys(t.isMobile?"min-height: 38px":"min-width: 80px; min-height: 45px;padding: 2px;"),Nt(t.isMobile?"flex-row justify-content-around":"flex-column"),_(),Nt(t.selectedCalculation===t.BuyPower?"text-primary bg-primary":"bg-emphasis"),F("ngClass",t.isMobile?"border-start px-2":""),_(),Nt(t.isMobile?"small":""),_(2),Nt(t.selectedCalculation===t.MinimumBuy?"text-primary bg-primary":"bg-emphasis"),F("ngClass",t.isMobile?"border-principal-4x px-2":""),_(),Nt(t.isMobile?"small":"")}}function Hee(i,e){if(i&1){let t=ne();C(0,"div",4)(1,"div",8),V("click",function(){z(t);let r=P();return W(r.onSellValueClicked())}),C(2,"span",6),A(3,"\u0627\u0631\u0632\u0634 \u0641\u0631\u0648\u0634"),x()(),C(4,"div",9),V("click",function(){z(t);let r=P();return W(r.onMinimumSellClicked())}),C(5,"span",6),A(6,"\u062D\u062F\u0627\u0642\u0644 \u0641\u0631\u0648\u0634"),x()()()}if(i&2){let t=P();Ys(t.isMobile?"min-height: 38px":"min-width: 80px; min-height: 45px;padding: 2px;"),Nt(t.isMobile?"flex-row justify-content-around":"flex-column"),_(),Nt(t.selectedCalculation===t.SellValue?"text-primary bg-primary":"bg-emphasis"),F("ngClass",t.isMobile?"border-start px-2":""),_(),Nt(t.isMobile?"small":""),_(2),Nt(t.selectedCalculation===t.MinimumSell?"text-primary bg-primary":"bg-emphasis"),F("ngClass",t.isMobile?"border-principal-4x px-2":""),_(),Nt(t.isMobile?"small":"")}}var wN=(()=>{let e=class e{set InputValue(n){this.form?.patchValue({totalDesiredExpense:n})}set price(n){switch(this._price=n,this.selectedCalculation){case bs.BuyPower:{this.onAccountBalanceClicked();break}case bs.MinimumBuy:{this.onMinimumBuyClicked();break}case bs.MinimumSell:{this.onMinimumSellClicked();break}default:this.form?.value?.totalDesiredExpense&&this.assignQuantityFromNewTotalDesiredExpenseAndPrice(this.form.value.totalDesiredExpense)}}constructor(n,r){this.moneyService=n,this.orderFormService=r,this.totalDesiredExpenseIsFocused=!1,this.totalBuyOrSellCommission=0,this.maxQuantityOrder=0,this.minDealableCount=0,this.symbolQuantity=0,this.isMobile=!1,this.totalDesiredExpenseFocused=new lt,this.keyDown=new lt,this.changeFormValue=new lt,this.changeQuantity=new lt,this.valueTap=new lt,this.isOption=rt(!1),this.SellValue=bs.SellValue,this._price=0,this.MinimumSell=bs.MinimumSell,this.BuyPower=bs.BuyPower,this.MinimumBuy=bs.MinimumBuy,this.selectedCalculation=null,this.sellSide=pt.Sell,this.buySide=pt.Buy}ngOnDestroy(){this.form.patchValue({totalDesiredExpense:null})}onTotalDesiredExpenseInput(n){this.changeFormValue.emit({totalDesiredExpense:n})}onTotalDesiredExpenseValueChanged(n){this.assignQuantityFromNewTotalDesiredExpenseAndPrice(n)}onTotalDesiredExpenseFocusIn(n){this.setTotalDesiredExpenseIsFocused(!0),this.selectElementText(n),this.selectedCalculation=null}onInputTap(){this.valueTap.emit()}onTotalDesiredExpenseKeyDown(n){this.keyDown.emit(n.keyCode)}onAccountBalanceClicked(){let n=pb(this.side,this.moneyService.accountBalance,+this._price,this.totalBuyOrSellCommission,this.symbol.hidePrice,this.isOption()?this.symbol.csize??1:1),r=this.orderFormService.getQuantityWithConsideringMinDealCount(n,this.maxQuantityOrder,this.minDealableCount);this.emitCalculationToOrderForm(r),this.selectedCalculation=bs.BuyPower}onMinimumBuyClicked(){let n=this.isOption()?this.minDealableCount:$A(this.symbol,+this._price),r=this.orderFormService.getQuantityWithConsideringMinDealCount(n,this.maxQuantityOrder,this.minDealableCount);this.emitCalculationToOrderForm(r),this.selectedCalculation=bs.MinimumBuy}onMinimumSellClicked(){let n=KA(this.symbol,+this._price,this.symbolQuantity,this.totalBuyOrSellCommission),r=this.orderFormService.getQuantityWithConsideringMinDealCount(n,this.maxQuantityOrder,this.minDealableCount);this.emitCalculationToOrderForm(r),this.selectedCalculation=bs.MinimumSell}onSellValueClicked(){this.resetCalculator(),this.totalDesiredExpenseIsFocused=!0,this.inputElement.focusInput(),this.selectedCalculation=bs.SellValue}emitCalculationToOrderForm(n){let r=this.getNewTotalDesiredExpenseFromQuantityAndPrice(n);this.form.patchValue({totalDesiredExpense:r})}resetCalculator(){}selectElementText(n){n.srcElement.select()}assignQuantityFromNewTotalDesiredExpenseAndPrice(n){let r=pb(this.side,n,+this._price,this.totalBuyOrSellCommission,this.symbol.hidePrice,this.isOption()?this.symbol.csize??1:1);this.changeQuantity.emit(r)}setTotalDesiredExpenseIsFocused(n){this.totalDesiredExpenseFocused.emit(n)}getNewTotalDesiredExpenseFromQuantityAndPrice(n){return Nl(this.side,n,+this._price,this.totalBuyOrSellCommission,this.symbol.hidePrice,this.isOption()?this.symbol.csize??1:1)}};e.\u0275fac=function(r){return new(r||e)(st(_s),st(lC))},e.\u0275cmp=ge({type:e,selectors:[["order-form-calculator"]],viewQuery:function(r,s){if(r&1&&bi(Zn,7),r&2){let o;Si(o=xi())&&(s.inputElement=o.first)}},inputs:{highlight:"highlight",totalDesiredExpenseIsFocused:"totalDesiredExpenseIsFocused",side:"side",form:"form",InputValue:"InputValue",price:"price",totalBuyOrSellCommission:"totalBuyOrSellCommission",maxQuantityOrder:"maxQuantityOrder",minDealableCount:"minDealableCount",symbolQuantity:"symbolQuantity",symbol:"symbol",isMobile:"isMobile",isOption:[1,"isOption"]},outputs:{totalDesiredExpenseFocused:"totalDesiredExpenseFocused",keyDown:"keyDown",changeFormValue:"changeFormValue",changeQuantity:"changeQuantity",valueTap:"valueTap"},decls:8,vars:18,consts:[[1,"d-flex","form-control","bg-transparent","p-0","h-auto","position-relative","overflow-hidden",3,"ngClass"],[1,"text-secondary","position-absolute",3,"ngClass"],["id","totalDesiredExpense",1,"flex-grow-1",3,"inputChange","valueChanged","focusIn","tap","touchstart","keyDown","form","ngClass","inputValue","min","readOnly"],[1,"d-flex","medium","gap-1","p-1",3,"class","style"],[1,"d-flex","medium","gap-1","p-1"],["data-cy","calculator-buy-power",1,"d-flex","justify-content-between","align-items-center","p-1_2","cup","h-100","text-nowrap","rounded-1","bg-opacity-10",3,"click","ngClass"],[1,"position-relative","flex-grow-1","text-center"],["data-cy","calculator-buy-limit",1,"d-flex","justify-content-between","align-items-center","p-1_2","cup","h-100","text-nowrap","rounded-1","bg-opacity-10",3,"click","ngClass"],["data-cy","calculator-sell-value",1,"d-flex","justify-content-between","align-items-center","p-1_2","cup","h-100","text-nowrap","rounded-1","bg-opacity-10",3,"click","ngClass"],["data-cy","calculator-sell-limit",1,"d-flex","justify-content-between","align-items-center","p-1_2","cup","h-100","text-nowrap","rounded-1","bg-opacity-10",3,"click","ngClass"]],template:function(r,s){r&1&&(C(0,"div")(1,"div",0)(2,"span",1),A(3,"\u0645\u0628\u0644\u063A \u06A9\u0644"),x(),C(4,"custom-number-box",2),fe(5,"number"),V("inputChange",function(a){return s.onTotalDesiredExpenseInput(a.value)})("valueChanged",function(a){return s.onTotalDesiredExpenseValueChanged(a.value)})("focusIn",function(a){return s.onTotalDesiredExpenseFocusIn(a)})("tap",function(){return s.onInputTap()})("touchstart",function(){return s.onInputTap()})("keyDown",function(a){return s.onTotalDesiredExpenseKeyDown(a)}),x(),Z(6,Uee,7,14,"div",3)(7,Hee,7,14,"div",3),x()()),r&2&&(Nt(s.isMobile?"mb-2 d-flex align-items-center":"order-form-field mt-1"),_(),F("ngClass",de(14,Bee,s.highlight)),_(),Ys(s.isMobile?"pointer-events: none; top: 8px; right: 14px":"pointer-events: none; top: 2px; right: 4px"),F("ngClass",s.isMobile?"":"small"),_(2),F("form",s.form)("ngClass",de(16,Gee,s.highlight))("inputValue",Te(5,12,s.form.value.totalDesiredExpense))("min","0")("readOnly",s.isMobile),_(2),q(s.side===s.buySide?6:s.side===s.sellSide?7:-1))},dependencies:[Ke,yi,Zn],styles:[`#totalDesiredExpense *{height:100%}#totalDesiredExpense input[type=text]{padding-left:.5rem!important}
/*# sourceMappingURL=order-form-calculator.style-YN6ZQG5J.css.map */
`],encapsulation:2});let i=e;return i})();var zee=["datePicker"],EN=(()=>{let e=class e{set firstLoading(n){this.ShowLoading.set(n)}updateQuantity(n){this.orderForm?.value.quantity!==n&&(this.orderForm.patchValue({quantity:n}),this.updateHighlight("quantity"))}createUpdateOrder(){this.formFacade.onSubmit(this.orderForm?.value,this.datePicker?.getValue(),this.orderFormSummaryCmp()?.Summary()?.totalComputedExpense)}hasConfirmation(){return this.hasOptionConfirm()||this.formFacade.HasSettingConfirmation()}hasOptionConfirm(){if(!this.formFacade.IsOptionSymbol())return!1;let n=this.orderForm?.value.price,r=this.formFacade.OptionAstanehValue(),s=this.formFacade.OptionCalculatedValue(),o=this.formFacade.MarketData()?.feeOfPreviousDaysClosingPrice;return n<200&&s<200&&o<200?!1:this.formFacade.OrderSide().type===pt.Buy?n>r:this.formFacade.OrderSide().type===pt.Sell?n<r:!1}constructor(){this.orderFormSummaryCmp=$t(Xu),this.formBuilder=ee(Yn),this.formFacade=ee(qu),this.formValueChange=new lt,this.showConfirm=new lt,this.Side=pt,this.OrderModelType=Ss,this.EasyValidityTypeCode=On,this.EasyValidityTypes=Ce(this.formFacade.IsOptionSymbol$.pipe(Eo(this.formFacade.OrderSide$),Di(),Be(([n,r])=>{if(n){if(r.type===pt.Sell)return[{name:Vp[On.Day],code:+On.Day}];{let s=O1.filter(a=>a.code!==On.ValidToCancellation).concat([{code:On.SharedDueDate,name:Vp[On.SharedDueDate]}]),o=wd.calculateShamsiDateDifference(new Date,new Date(this.formFacade.OptionSymbol()?.symbol?.shareDueDate));return o.months+o.years*12<1&&s.splice(s.findIndex(a=>a.code===On.Month),1),o.days+o.months*30+ +o.years*365<7&&s.splice(s.findIndex(a=>a.code===On.Week),1),s}}return O1}))),this.orderForm=this.formBuilder.group({totalDesiredExpense:this.formBuilder.control(0),quantity:this.formBuilder.control(void 0,ii.required),price:this.formBuilder.control(void 0,ii.required),validityType:this.formBuilder.control(Pa.DefaultEasyValidityTypeCode),financialProviderCode:this.formBuilder.control(_A.TBRFinancialDataProvider)}),this.ShowLoading=pe(!0),this.HighlightControl=pe(void 0),this.calcState=pe({state:!1,class:Zc.Off}),this.LockState=pe({state:!1,class:Qc.Unlocked}),this.lockState$=Ft(this.LockState).pipe(gt(Boolean)),this.OrderFormValue=Ce(this.orderForm.valueChanges),this.ValidityType=Ce(this.orderForm?.controls.validityType.valueChanges),this.ValidityJalaliType=oi(()=>this.formFacade.OrderInput()?.validityType===On.ValidToDate?wd.getJDate(new Date(this.formFacade.OrderInput()?.validityDate)):wd.getJDate(new Date)),this.OrderFormValue$=Ft(this.OrderFormValue).pipe(gt(Boolean),Be(n=>({price:n.price,quantity:n.quantity}))),this.SummaryValue=Ce(this.formFacade.getSummary(this.OrderFormValue$)),this.CalcIsDisabled=oi(()=>this.formFacade.IsOptionSymbol()&&this.formFacade.OrderSide().type===pt.Sell),this.updateCalcState=n=>{n!==this.calcState().state&&this.calcState.update(r=>{let s=n??!r.state;return{state:s,class:uC[+s]}})},this.updateLockState=n=>this.LockState.update(r=>{let s=n??!r.state;return{state:s,class:dC[+s]}}),this.updateHighlight=(n,r=!0)=>{this.HighlightControl.update(()=>n),r&&Ta(()=>this.HighlightControl.update(()=>{}),200)},this.updateFormValues=({price:n,quantity:r,validityType:s})=>{n!==null&&n>=0&&this.updatePrice(n),r!==null&&r>=0&&this.updateQuantity(r),s!==null&&s>=0&&this.updateValidity(s)},this.updatePrice=n=>{this.orderForm?.value.price!==n&&(this.orderForm.patchValue({price:n}),this.updateHighlight("price"))},this.updateValidity=n=>this.orderForm.patchValue({validityType:n}),this.showConfirmation=()=>this.showConfirm.emit({summary:this.SummaryValue(),optionConfirm:this.hasOptionConfirm(),submit:()=>this.createUpdateOrder()}),this.onSubmit=()=>{this.hasConfirmation()?this.showConfirmation():this.createUpdateOrder()},this.createDraft=()=>this.formFacade.createDraft(this.orderForm?.value,this.datePicker?.getValue()),Ta(()=>this.ShowLoading.set(!1),1e3),Ce(this.formFacade.initForm().pipe(Di(),Je(this.updateFormValues))),Ce(this.OrderFormValue$.pipe(Je(n=>this.formValueChange.emit(n)))),Ce(this.lockState$.pipe(Jt(n=>n?.state?this.formFacade.MarketData$.pipe(Eo(this.formFacade.OrderSide$),Je(([r,s])=>{let o=r[yN[s.type]];o>r.maxDailyPrice||o<r.minDailyPrice?this.updatePrice(+r[Ug[s.type+Go.Same]]):this.updatePrice(+r[Ug[s.type+Go.Opposite]])})):ld)))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["ng-component"]],viewQuery:function(r,s){if(r&1&&(Kt(s.orderFormSummaryCmp,Xu,5),bi(zee,5)),r&2){si();let o;Si(o=xi())&&(s.datePicker=o.first)}},inputs:{firstLoading:"firstLoading"},outputs:{formValueChange:"formValueChange",showConfirm:"showConfirm"},decls:0,vars:0,template:function(r,s){},encapsulation:2,changeDetection:0});let i=e;return i})();var TN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["order-form-algo-tooltip"]],decls:10,vars:0,consts:[[1,"d-flex","gap-1"],[1,"text-muted","fw-bold"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"span",1),A(2,"\u0639\u0627\u062F\u06CC:"),x(),C(3,"span"),A(4,"\u0633\u0641\u0627\u0631\u0634 \u06AF\u0630\u0627\u0631\u06CC \u0637\u0628\u0642 \u0631\u0648\u0646\u062F \u0637\u0628\u06CC\u0639\u06CC \u0628\u0627\u0632\u0627\u0631"),x()(),C(5,"div",0)(6,"span",1),A(7,"\u0633\u0631\u06CC\u0639:"),x(),C(8,"span"),A(9,"\u0633\u0641\u0627\u0631\u0634 \u06AF\u0630\u0627\u0631\u06CC \u0628\u0631\u0627\u06CC \u062A\u062D\u0642\u0642 \u0633\u0631\u06CC\u0639 \u062A\u0631 \u0645\u0639\u0627\u0645\u0644\u0627\u062A"),x()())},dependencies:[Oe],encapsulation:2,changeDetection:0});let i=e;return i})();function Wee(i,e){if(i&1){let t=ne();C(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),H(4,"svg-icon",4),x()(),C(5,"div",5),A(6,"\u0627\u062E\u0637\u0627\u0631"),x(),C(7,"div",6),A(8," \u0642\u06CC\u0645\u062A \u067E\u06CC\u0634\u0646\u0647\u0627\u062F\u06CC \u0634\u0645\u0627 \u0628\u0627 \u062A\u0648\u062C\u0647 \u0628\u0647 \u0641\u0631\u0645\u0648\u0644 \u0628\u0644\u06A9 \u0634\u0648\u0644\u0632 \u0648 \u0642\u06CC\u0645\u062A \u067E\u0627\u06CC\u0627\u0646\u06CC \u0631\u0648\u0632 \u0642\u0628\u0644\u060C \u0645\u0646\u0635\u0641\u0627\u0646\u0647 \u0646\u06CC\u0633\u062A\u060C \u0622\u06CC\u0627 \u0627\u0632 \u0627\u0631\u0633\u0627\u0644 \u0633\u0641\u0627\u0631\u0634 \u062E\u0631\u06CC\u062F \u062E\u0648\u062F \u0628\u0647 \u062A\u0639\u062F\u0627\u062F "),C(9,"u",7),A(10),x(),A(11),x(),H(12,"div",8),C(13,"div",9)(14,"button",10),V("click",function(r){return z(t),P().confirmClick.emit(),W(r.stopPropagation())}),A(15," \u0628\u0644\u0647 "),x(),C(16,"button",11),V("click",function(r){return z(t),P().cancelClick.emit(),W(r.stopPropagation())}),A(17," \u062E\u06CC\u0631 "),x()()()()}if(i&2){let t,n,r=P();_(4),F("iconName",r.icons.Alert),_(6),Re((t=r.Value())==null?null:t.quantity),_(),ye(" \u0648 \u0642\u06CC\u0645\u062A ",(n=r.Value())==null?null:n.price," \u0631\u06CC\u0627\u0644 \u0645\u0637\u0645\u0626\u0646 \u0647\u0633\u062A\u06CC\u062F \u061F ")}}function $ee(i,e){if(i&1){let t=ne();C(0,"div",12),A(1,"\u0627\u062E\u0637\u0627\u0631"),x(),C(2,"div",13),A(3," \u0642\u06CC\u0645\u062A \u067E\u06CC\u0634\u0646\u0647\u0627\u062F\u06CC \u0634\u0645\u0627 \u0628\u0627 \u062A\u0648\u062C\u0647 \u0628\u0647 \u0641\u0631\u0645\u0648\u0644 \u0628\u0644\u06A9 \u0634\u0648\u0644\u0632 \u0648 \u0642\u06CC\u0645\u062A \u067E\u0627\u06CC\u0627\u0646\u06CC \u0631\u0648\u0632 \u0642\u0628\u0644\u060C \u0645\u0646\u0635\u0641\u0627\u0646\u0647 \u0646\u06CC\u0633\u062A\u060C \u0622\u06CC\u0627 \u0627\u0632 \u0627\u0631\u0633\u0627\u0644 \u0633\u0641\u0627\u0631\u0634 \u062E\u0631\u06CC\u062F \u062E\u0648\u062F \u0628\u0647 \u062A\u0639\u062F\u0627\u062F "),C(4,"u"),A(5),x(),A(6),x(),C(7,"div",14)(8,"button",15),V("click",function(r){return z(t),P().confirmClick.emit(),W(r.stopPropagation())}),A(9," \u0628\u0644\u0647 "),x(),C(10,"button",16),V("click",function(r){return z(t),P().cancelClick.emit(),W(r.stopPropagation())}),A(11," \u062E\u06CC\u0631 "),x()()}if(i&2){let t,n,r=P();_(5),Re((t=r.Value())==null?null:t.quantity),_(),ye(" \u0648 \u0642\u06CC\u0645\u062A ",(n=r.Value())==null?null:n.price,` \u0631\u06CC\u0627\u0644 \u0645\u0637\u0645\u0626\u0646 \u0647\u0633\u062A\u06CC\u062F \u061F
`)}}var MN=(()=>{let e=class e{constructor(){this.icons=Fe,this.Value=rt.required(),this.isMobile=!0,this.confirmClick=new lt,this.cancelClick=new lt}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["order-option-confirm"]],inputs:{Value:[1,"Value"],isMobile:"isMobile"},outputs:{confirmClick:"confirmClick",cancelClick:"cancelClick"},decls:2,vars:1,consts:[[1,"p-3","text-center"],[1,"d-flex","flex-column","gap-1"],[1,"w-100","d-flex","justify-content-center","mb-2"],[1,"rounded","bg-warning","bg-opacity-10","p-2"],["width","36","height","36",1,"text-warning-500",3,"iconName"],[1,"fw-bold","h6"],[1,"text-right"],[1,"d-inline"],[1,"mt-1","text-center"],[1,"d-flex","gap-1"],["data-cy","order-form-btn-confirm",1,"btn","btn-sm","py-1","btn-success","rounded-2","text-center","me-2","px-4","flex-grow-1",3,"click"],[1,"btn","btn-sm","bg-principal-3x","bg-principal-3x-dark-mobile","bg-principal-4x-dark","bg-principal-hover","cup","flex-grow-1","rounded-2","text-body","text-center","py-1","px-3","flex-grow-1",3,"click"],[1,"fs-6","text-center","mb-3","fw-bold"],[1,"mb-3","text-right"],[1,"mt-1","text-center","d-flex"],["data-cy","order-form-btn-confirm",1,"btn","btn-sm","py-1","flex-grow-1","btn-success","me-2","px-4",3,"click"],[1,"btn","btn-sm","py-1","px-3","btn-secondary","flex-grow-1",3,"click"]],template:function(r,s){r&1&&Z(0,Wee,18,3,"div",0)(1,$ee,12,2),r&2&&q(s.isMobile?0:s.isMobile?-1:1)},dependencies:[Oe,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var Kee=["datePicker"],AN=(()=>{let e=class e{calculateOriginQuantity(n){let r=this.ByBudget(),s=this.formFacade.Commission(),{quantity:o=0,price:a}=n;return r?Math.floor((o-o*s)/(a??1)):n.quantity}constructor(){this.id=_d(),this.formBuilder=ee(Yn),this.formFacade=ee(qu),this.Side=pt,this.OrderModelType=Ss,this.showConfirm=new lt,this.orderForm=this.formBuilder.group({quantity:this.formBuilder.control(0,[ii.required,ii.max(this.formFacade.AccountBalance())]),price:this.formBuilder.control(0,ii.required)}),this.RangePercent=pe(0),this.ByBudget=pe(!1),this.HighlightControl=pe(void 0),this.calcState=pe({state:!1,class:Zc.Off}),this.LockState=pe({state:!1,class:Qc.Unlocked}),this.RangePercent$=Ft(this.RangePercent),this.lockState$=Ft(this.LockState).pipe(gt(Boolean)),this.OrderFormValue=Ce(this.orderForm.valueChanges),this.OrderFormValue$=Ft(this.OrderFormValue).pipe(gt(Boolean),Be(n=>({price:n.price,quantity:n.quantity}))),this.SummaryValue=Ce(this.formFacade.getSummary(this.OrderFormValue$.pipe(Be(n=>dt(Se({},n),{quantity:this.calculateOriginQuantity(n)}))))),this.updateCalcState=n=>this.calcState.update(r=>{let s=n??!r.state;return{state:s,class:uC[+s]}}),this.updateLockState=n=>this.LockState.update(r=>{let s=n??!r.state;return{state:s,class:dC[+s]}}),this.updateHighlight=(n,r=!0)=>{this.HighlightControl.update(()=>n),r&&Ta(()=>this.HighlightControl.update(()=>{}),200)},this.updateFormValues=({price:n,quantity:r})=>{n&&this.updatePrice(n),r&&this.updateQuantity(r)},this.updatePrice=n=>{this.orderForm.patchValue({price:n}),this.updateHighlight("price")},this.updateQuantity=n=>{this.orderForm.patchValue({quantity:n}),this.updateHighlight("quantity")},this.SummaryValue2=Ce(this.formFacade.getSummary(this.OrderFormValue$)),this.showConfirmation=()=>this.showConfirm.emit({summary:dt(Se({},this.SummaryValue2()),{byBudget:this.ByBudget()}),submit:this.createUpdateOrder}),this.onSubmit=()=>{this.formFacade.HasSettingConfirmation()?this.showConfirmation():this.createUpdateOrder()},this.createUpdateOrder=()=>{let n=Se({},this.orderForm?.value);n.quantity=this.calculateOriginQuantity(n),this.formFacade.onAlgoSubmit(n,this.ByBudget())},this.onInputChange=n=>{this.ByBudget.update(()=>n);let r=this.OrderFormValue().price,s=this.OrderFormValue().quantity,o=this.formFacade.Commission(),a=n?Math.ceil(s*(r??1)+s*(r??1)*o):Math.round((s-s*o)/(r??1));this.updateQuantity(a),this.getInputRangeValue()},this.onInputRangeValue=n=>this.RangePercent.update(()=>n),this.inputRangeValue=pe(0),this.getInputRangeValue=()=>{this.ByBudget()&&Ta(()=>{let n=this.OrderFormValue().quantity/this.formFacade.AccountBalance()*100;this.inputRangeValue.set(n)},200)},this.calcVolume=(n,r)=>Math.floor(n*r/100),this.ShowLoading=pe(!this.formFacade.IsEditMode()),Ta(()=>this.ShowLoading.set(!1),1e3),Ce(this.formFacade.initForm().pipe(Di(),Je(this.updateFormValues))),Ce(this.RangePercent$.pipe(dd(this.formFacade.AccountBalance$),Je(([n,r])=>{(n>0||this.ByBudget())&&this.updateQuantity(this.calcVolume(r,n))})))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["ng-component"]],viewQuery:function(r,s){if(r&1&&bi(Kee,5),r&2){let o;Si(o=xi())&&(s.datePicker=o.first)}},outputs:{showConfirm:"showConfirm"},decls:0,vars:0,template:function(r,s){},encapsulation:2,changeDetection:0});let i=e;return i})();function jee(i,e){if(i&1){let t=ne();C(0,"button",12),V("click",function(r){return z(t),P().cancelClick.emit(),W(r.stopPropagation())}),A(1," \u0628\u0627\u0632\u06AF\u0634\u062A "),x()}}function Yee(i,e){if(i&1){let t=ne();C(0,"button",13),V("click",function(r){return z(t),P().cancelClick.emit(),W(r.stopPropagation())}),A(1," \u0628\u0627\u0632\u06AF\u0634\u062A "),x()}}var PN=(()=>{let e=class e{constructor(){this.Side=pt,this.isMobile=rt.required(),this.Value=pe(void 0),this.Value$=Ft(this.Value).pipe(gt(Boolean)),this.Summary=Ce(this.Value$.pipe(Be(n=>dt(Se({},n),{sideName:n.orderSide.text,sideTextClass:n.orderSide.textClass,sideType:n.orderSide.type,symbolName:n.symbol.symbolName,totalComputedExpense:Nl(n.orderSide.type,n.price,n?.byBudget?Math.floor((n?.quantity-n?.quantity*n.commission)/(n.price??1)):n.quantity,n.commission,n?.symbol?.[kc[n.orderSide.type]]??0)})))),this.confirmClick=new lt,this.cancelClick=new lt}set input(n){this.Value.set(n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["order-form-confirm-algo"]],inputs:{isMobile:[1,"isMobile"],input:"input"},outputs:{confirmClick:"confirmClick",cancelClick:"cancelClick"},decls:48,vars:19,consts:[[1,"d-flex","flex-column","align-items-center","h-100","w-100"],[1,"w-100","text-body","bg-principal","bg-principal-4x-dark-mobile","d-flex","flex-column","align-items-center","justify-content-center","py-3","px-lg-3","rounded"],[1,"fs-7","fw-bold","text-center","mb-2"],[1,"col","text-start","p-0"],[1,"d-flex","justify-content-between","w-100"],[1,"me-1","opacity-6"],[1,"opacity-6"],[1,"d-block","small","opacity-6","mt-2"],[1,"mt-1","text-center","d-flex","gap-1","w-100","py-2"],[1,"btn","btn-sm","w-50","btn-outline-secondary","m-0","px-4"],[1,"btn","w-50","btn-sm","btn-outline-light","m-0","px-4"],["data-cy","order-form-btn-confirm",1,"btn","btn-sm","w-50","flex-grow-1","btn-success","m-0","px-4",3,"click"],[1,"btn","btn-sm","w-50","btn-outline-secondary","m-0","px-4",3,"click"],[1,"btn","w-50","btn-sm","btn-outline-light","m-0","px-4",3,"click"]],template:function(r,s){if(r&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),A(4," \u062B\u0628\u062A \u062F\u0631\u062E\u0648\u0627\u0633\u062A "),x(),C(5,"span",3),A(6),x()(),C(7,"div",4)(8,"span",5),A(9,"\u0646\u0645\u0627\u062F:"),x(),C(10,"span"),A(11),x()(),C(12,"div",4)(13,"span",5),A(14,"\u0633\u0631\u0639\u062A \u0627\u062C\u0631\u0627:"),x(),C(15,"span"),A(16,"\u0639\u0627\u062F\u06CC"),x()(),C(17,"div",4)(18,"span",5),A(19),x(),C(20,"span"),A(21),fe(22,"number"),x()(),C(23,"div",4)(24,"span",5),A(25),x(),C(26,"span"),A(27),fe(28,"number"),C(29,"small",6),A(30,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()(),C(31,"div",4)(32,"span",5),A(33,"\u0627\u0631\u0632\u0634:"),x(),C(34,"span"),A(35),fe(36,"number"),C(37,"small",6),A(38,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()(),C(39,"div")(40,"span",7),A(41),fe(42,"numberToPersianWords"),x()()(),C(43,"div",8),Z(44,jee,2,0,"button",9)(45,Yee,2,0,"button",10),C(46,"button",11),V("click",function(a){return s.confirmClick.emit(),a.stopPropagation()}),A(47," \u062A\u0627\u06CC\u06CC\u062F "),x()()()),r&2){let o,a,l,c,u,d,h,p,m;_(5),Nt((o=s.Summary())==null?null:o.sideTextClass),_(),ye(" ",(a=s.Summary())==null?null:a.sideName," "),_(5),ye(" ",(l=s.Summary())==null?null:l.symbolName," "),_(8),ye(" ",(c=s.Summary())!=null&&c.byBudget?"\u0633\u0642\u0641 \u0628\u0648\u062F\u062C\u0647:":"\u062A\u0639\u062F\u0627\u062F:"," "),_(2),Re(Te(22,11,(u=s.Summary())==null?null:u.quantity)),_(4),ye(" ",((d=s.Summary())==null||d.orderSide==null?null:d.orderSide.type)===s.Side.Buy?"\u0633\u0642\u0641:":"\u06A9\u0641:"," \u0642\u06CC\u0645\u062A: "),_(2),ye("",Te(28,13,(h=s.Summary())==null?null:h.price)," "),_(8),ye("",Te(36,15,(p=s.Summary())==null||p.totalComputedExpense==null?null:p.totalComputedExpense.toFixed(0))," "),_(6),ye(" (",Te(42,17,(m=s.Summary())==null?null:m.totalComputedExpense),") "),_(3),q(s.isMobile()?44:45)}},dependencies:[Oe,yi,Xf],encapsulation:2,changeDetection:0});let i=e;return i})();var Hg=(()=>{let e=class e{constructor(){this.dragDisabled=pe(!1),this.disableDrag=()=>this.dragDisabled.update(()=>!0),this.enableDrag=()=>this.dragDisabled.update(()=>!1),this.updateDragState=n=>this.dragDisabled.update(()=>n),this.DragDisabled=this.dragDisabled.asReadonly(),this.DragDisabled$=Ft(this.DragDisabled)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Hi({token:e,factory:e.\u0275fac});let i=e;return i})();var DN=i=>({"d-none":i});function qee(i,e){if(i&1){let t=ne();C(0,"div",7)(1,"span",5),A(2,"\u062E\u0631\u06CC\u062F \u0628\u0631 \u0627\u0633\u0627\u0633"),x(),C(3,"div",14)(4,"input",15),V("change",function(){z(t);let r=P(2);return W(r.onInputChange(!0))}),x(),C(5,"label",16),A(6," \u0628\u0648\u062F\u062C\u0647"),x(),C(7,"input",17),V("change",function(){z(t);let r=P(2);return W(r.onInputChange(!1))}),x(),C(8,"label",16),A(9," \u062A\u0639\u062F\u0627\u062F"),x(),C(10,"a",18),A(11,"."),x()()()}if(i&2){let t=P(2);_(4),F("id",t.id+"asas1"),_(),F("for",t.id+"asas1"),_(2),F("id",t.id+"asas2"),_(),F("for",t.id+"asas2")}}function Xee(i,e){if(i&1){let t=ne();C(0,"div")(1,"div",5),A(2,"\u062F\u0631\u0635\u062F \u0627\u0632 \u0628\u0648\u062F\u062C\u0647"),x(),C(3,"input-range",19),V("changeValue",function(r){z(t);let s=P(2);return W(s.onInputRangeValue(r))})("dragEvent",function(r){z(t);let s=P(2);return W(s.cdkDragService.updateDragState(r))}),x(),C(4,"div",20)(5,"span"),A(6,"100%"),x(),C(7,"span"),A(8,"0%"),x()()()}if(i&2){let t=P(2);_(3),F("value",t.inputRangeValue())}}function Zee(i,e){if(i&1){let t=ne();C(0,"button",21)(1,"span"),A(2),x()(),C(3,"button",22),V("click",function(){z(t);let r=P(2);return W(r.closeForm())}),A(4," \u0627\u0646\u0635\u0631\u0627\u0641 "),x()}if(i&2){let t,n,r=P(2);Hc("btn btn-sm flex-grow-1 ",(t=r.formFacade.OrderSide())==null?null:t.btnClass,""),_(2),ye("\u0648\u06CC\u0631\u0627\u06CC\u0634 \u062F\u0631\u062E\u0648\u0627\u0633\u062A ",(n=r.formFacade.OrderSide())==null?null:n.text,"")}}function Qee(i,e){if(i&1&&(C(0,"button",21)(1,"span"),A(2),x()()),i&2){let t,n,r=P(2);Hc("btn btn-sm flex-grow-1 ",(t=r.formFacade.OrderSide())==null?null:t.btnClass,""),_(2),ye("\u062B\u0628\u062A \u062F\u0631\u062E\u0648\u0627\u0633\u062A ",(n=r.formFacade.OrderSide())==null?null:n.text,"")}}function Jee(i,e){if(i&1){let t=ne();C(0,"form",3),V("ngSubmit",function(){z(t);let r=P();return W(r.onSubmit())}),C(1,"div",4)(2,"span",5),A(3,"\u0627\u0633\u062A\u0631\u0627\u062A\u0698\u06CC"),x(),C(4,"span",6),A(5),x()(),Z(6,qee,12,4,"div",7),C(7,"order-form-algo-value",8),V("imgClick",function(){z(t);let r=P();return W(r.updateCalcState())})("keyDown",function(){z(t);let r=P();return W(r.getInputRangeValue())}),x(),Z(8,Xee,9,1,"div"),C(9,"div",9)(10,"order-form-value",10),V("valueClick",function(r){z(t);let s=P();return W(s.updatePrice(r))})("imgClick",function(){z(t);let r=P();return W(r.updateLockState())}),x()(),C(11,"order-form-summary",11),V("assetEvent",function(r){z(t);let s=P();return W(s.updateQuantity(r))}),x(),C(12,"div",12),Z(13,Zee,5,4)(14,Qee,3,4,"button",13),x()()}if(i&2){let t,n,r,s,o,a,l=P();F("formGroup",l.orderForm)("ngClass",de(19,DN,l.ShowLoading())),_(5),ye(" \u0628\u0627 \u0631\u0639\u0627\u06CC\u062A ",(t=l.formFacade.OrderSide())==null?null:t.priceTitle," "),_(),q(l.formFacade.OrderSide().type===l.Side.Buy?6:-1),_(),F("form",l.orderForm)("title",l.ByBudget()?"\u0633\u0642\u0641 \u0628\u0648\u062F\u062C\u0647":"\u062A\u0639\u062F\u0627\u062F \u0633\u0647\u0645")("iconName",l.ByBudget()?l.calcState().class:"")("highlight",l.HighlightControl()==="quantity")("maxValue",l.formFacade.AccountBalance()),_(),q(l.ByBudget()&&l.calcState().state?8:-1),_(2),F("title",(n=l.formFacade.OrderSide())==null?null:n.priceTitle)("form",l.orderForm)("minValue",(r=l.formFacade.MarketData())==null?null:r.minDailyPrice)("maxValue",(s=l.formFacade.MarketData())==null?null:s.maxDailyPrice)("step",(o=l.formFacade.Symbol())==null?null:o.minDealablePrice)("highlight",l.HighlightControl()==="price"),_(),F("value",l.SummaryValue())("isAlgo",!0),_(2),q(!((a=l.formFacade.AlgoOrder())==null||a.value==null)&&a.value.id?13:14)}}function ete(i,e){i&1&&H(0,"order-form-algo-tooltip")}var kN=(()=>{let e=class e extends AN{constructor(){super(),this.cdkDragService=ee(Hg),this.closeEvent=new lt,this.closeForm=()=>this.closeEvent.emit(),Ce(this.formFacade.CloseActionEvent$.pipe(Je(()=>this.closeForm()))),Ce(this.formFacade.MarketDepthDesktop$.pipe(Je(this.updateFormValues)))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["order-form-algo"]],outputs:{closeEvent:"closeEvent"},features:[Cl],decls:4,vars:5,consts:[["risk",""],["iconName","order-algo-loading",3,"ngClass","algo"],[3,"formGroup","ngClass"],[3,"ngSubmit","formGroup","ngClass"],[1,"d-flex","justify-content-between","mb-1","pb-1","border-bottom","border-principal-3x"],[1,"text-body","text-opacity-50","small"],[1,"small"],[1,"d-flex","justify-content-between","align-items-center","mb-1"],["id","quantity",1,"flex-grow-1","d-block","mb-1",3,"imgClick","keyDown","form","title","iconName","highlight","maxValue"],[1,"d-flex","flex-column"],["id","price",3,"valueClick","imgClick","title","form","minValue","maxValue","step","highlight"],[3,"assetEvent","value","isAlgo"],[1,"d-flex","position-relative","gap-1","mt-1"],["type","submit","title","(Enter)",3,"class"],[1,"switch-toggle","switch-candy","w-50","z-0"],["type","radio","name","view3",3,"change","id"],[3,"for"],["type","radio","name","view3","checked","",3,"change","id"],["href",""],[1,"mt-2","position-relative","d-block",3,"changeValue","dragEvent","value"],[1,"d-flex","justify-content-between","mt-2"],["type","submit","title","(Enter)"],["data-cy","order-cancel-btn","type","button","title","(Esc)",1,"btn","btn-sm","btn-outline-secondary",3,"click"]],template:function(r,s){r&1&&(H(0,"order-form-loading",1),Z(1,Jee,15,21,"form",2)(2,ete,1,0,"ng-template",null,0,Wi)),r&2&&(F("ngClass",de(3,DN,!s.ShowLoading()))("algo",!0),_(),q(s.orderForm?1:-1))},dependencies:[Ke,Fn,fs,gs,nn,vs,CN,hC,Xu,pC,_N,TN],encapsulation:2,changeDetection:0});let i=e;return i})();var tte=(i,e)=>e.code,IN=i=>({"d-none":i});function ite(i,e){if(i&1){let t=ne();C(0,"order-form-calculator",16),V("changeQuantity",function(r){z(t);let s=P(2);return W(s.updateQuantity(r))}),x()}if(i&2){let t,n,r,s,o=P(2);F("side",o.formFacade.OrderSide().type)("symbol",o.formFacade.Symbol())("form",o.orderForm)("price",(t=o.OrderFormValue())==null?null:t.price)("symbolQuantity",(n=o.formFacade.PortfolioSymbol())==null?null:n.asset)("totalBuyOrSellCommission",o.formFacade.Commission())("maxQuantityOrder",(r=o.formFacade.MarketData())==null?null:r.maxValidVolume)("minDealableCount",(s=o.formFacade.Symbol())==null?null:s.minDealableCount)("isOption",o.formFacade.IsOptionSymbol())("highlight",o.HighlightControl()==="totalDesiredExpense")}}function nte(i,e){i&1&&(C(0,"span",10),A(1,"\u0627\u0639\u062A\u0628\u0627\u0631 \u0645\u0639\u0627\u0645\u0644\u0647: "),x())}function rte(i,e){if(i&1&&(C(0,"option",12),A(1),x()),i&2){let t=e.$implicit;F("value",t.code),_(),Re(t.name)}}function ste(i,e){if(i&1&&(C(0,"div",13),H(1,"custom-date-picker",17,1),x()),i&2){let t=P(2);_(),F("required",!0)("defaultValue",!0)("dateValue",t.ValidityJalaliType())("isMobile",!1)}}function ote(i,e){if(i&1){let t=ne();C(0,"button",18)(1,"span"),A(2),x()(),C(3,"button",19),V("click",function(){z(t);let r=P(2);return W(r.closeForm())}),A(4," \u0627\u0646\u0635\u0631\u0627\u0641 "),x()}if(i&2){let t,n,r=P(2);Nt(r.formFacade.DraftMode()?"btn-warning":(t=r.formFacade.OrderSide())==null?null:t.btnClass),_(2),ye("\u0648\u06CC\u0631\u0627\u06CC\u0634 ",r.formFacade.DraftMode()?"\u067E\u06CC\u0634\u200C\u0646\u0648\u06CC\u0633":(n=r.formFacade.OrderSide())==null?null:n.text,"")}}function ate(i,e){if(i&1){let t=ne();C(0,"button",21),V("click",function(){z(t);let r=P(3);return W(r.createDraft())}),A(1," \u067E\u06CC\u0634 \u0646\u0648\u06CC\u0633 "),x()}}function lte(i,e){if(i&1&&(C(0,"button",18)(1,"span"),A(2),x()(),Z(3,ate,2,0,"button",20)),i&2){let t,n,r=P(2);Nt((t=r.formFacade.OrderSide())==null?null:t.btnClass),_(2),ye("\u0627\u0631\u0633\u0627\u0644 ",(n=r.formFacade.OrderSide())==null?null:n.text,""),_(),q(r.formFacade.IsOptionSymbol()?-1:3)}}function cte(i,e){if(i&1){let t=ne();C(0,"form",4),V("ngSubmit",function(){z(t);let r=P();return W(r.onSubmit())})("keydown",function(r){z(t);let s=P();return W(s.checkIfHotkeysClicked(r))}),C(1,"div",5)(2,"order-form-value",6),V("imgClick",function(){z(t);let r=P();return W(r.updateCalcState())})("valueClick",function(r){z(t);let s=P();return s.updateQuantity(r),W(s.updateCalcState(!1))})("keyDown",function(){z(t);let r=P();return W(r.updateCalcState(!1))})("mouseEvent",function(){z(t);let r=P();return W(r.updateCalcState(!1))}),x(),Z(3,ite,1,10,"order-form-calculator",7),C(4,"order-form-value",8),V("valueClick",function(r){z(t);let s=P();return W(s.updatePrice(r))})("imgClick",function(){z(t);let r=P();return W(r.updateLockState())}),x()(),C(5,"div",9),Z(6,nte,2,0,"span",10),C(7,"select",11),St(8,rte,2,2,"option",12,tte),x(),Z(10,ste,3,4,"div",13),x(),C(11,"order-form-summary",14),V("assetEvent",function(r){z(t);let s=P();return W(s.updateQuantity(r))}),x(),C(12,"div",15),Z(13,ote,5,3)(14,lte,4,4),x()()}if(i&2){let t,n,r,s,o,a,l,c=P();F("formGroup",c.orderForm)("ngClass",de(25,IN,c.ShowLoading())),_(2),F("form",c.orderForm)("iconName",c.calcState().class)("iconDisabled",c.CalcIsDisabled())("minValue",(t=c.formFacade.MarketData())==null?null:t.minValidVolume)("maxValue",(n=c.formFacade.MarketData())==null?null:n.maxValidVolume)("step",(r=c.formFacade.Symbol())==null?null:r.minDealableCount)("highlight",c.HighlightControl()==="quantity"),_(),q(c.calcState().state?3:-1),_(),F("disabled",c.LockState().state)("form",c.orderForm)("iconName",c.LockState().class)("minValue",(s=c.formFacade.MarketData())==null?null:s.minDailyPrice)("maxValue",(o=c.formFacade.MarketData())==null?null:o.maxDailyPrice)("step",(a=c.formFacade.Symbol())==null?null:a.minDealablePrice)("highlight",c.HighlightControl()==="price"),_(2),q(+c.ValidityType()!==c.EasyValidityTypeCode.ValidToDate?6:-1),_(),F("value",c.ValidityType()),_(),xt(c.EasyValidityTypes()),_(2),q(+c.ValidityType()===c.EasyValidityTypeCode.ValidToDate?10:-1),_(),F("value",c.SummaryValue())("isMobile",!1)("isOption",c.formFacade.IsOptionSymbol())("position",c.formFacade.PositionData()),_(2),q(!((l=c.formFacade.Order())==null||l.value==null)&&l.value.id?13:14)}}function ute(i,e){i&1&&(C(0,"p",22),A(1," \u0642\u06CC\u0645\u062A \u0645\u0646\u0635\u0641\u0627\u0646\u0647 \u0646\u0645\u0627\u062F \u0627\u062E\u062A\u06CC\u0627\u0631 \u0628\u0627 \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0627\u0632 \u0641\u0631\u0645\u0648\u0644 \u0628\u0644\u06A9 \u0634\u0648\u0644\u0632\u060C \u0628\u0627 \u0646\u0631\u062E \u0628\u0647\u0631\u0647 30% \u0648 \u0627\u0646\u062D\u0631\u0627\u0641 \u0645\u0639\u06CC\u0627\u0631 40% \u0645\u062D\u0627\u0633\u0628\u0647 \u0634\u062F\u0647 \u0627\u0633\u062A "),x())}var FN=(()=>{let e=class e extends EN{createUpdateOrder(n=!0){this.closeState=n,super.createUpdateOrder()}constructor(){super(),this.icons=Fe,this.hotkeysService=ee(Np),this.closeEvent=new lt,this.closeState=!0,this.closeForm=()=>{this.closeState&&this.closeEvent.emit(!1),this.closeState=!1},this.checkIfHotkeysClicked=({key:n})=>{n===sb.Escape?this.closeForm():n===sb.F9&&this.createUpdateOrder(!1)},Ce(this.formFacade.MarketDepthDesktop$.pipe(Je(this.updateFormValues))),Ce(this.formFacade.CloseActionEvent$.pipe(Je(([{popUpId:n},,r])=>{r.popUpId?r.popUpId===n&&this.closeForm():this.closeForm()}))),this.hotkeys=this.hotkeysService.add(new e0([jn.Escape,jn.F9],(n,r)=>(r===jn.Escape?this.closeForm():r===jn.F9&&this.createUpdateOrder(!1),n)))}ngOnDestroy(){this.hotkeysService.remove(this.hotkeys)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["order-form"]],outputs:{closeEvent:"closeEvent"},features:[bl([Np]),Cl],decls:4,vars:5,consts:[["option_tooltip",""],["datePicker",""],["iconName","order-form-loading",3,"ngClass","algo"],["data-cy","order-form",3,"formGroup","ngClass"],["data-cy","order-form",3,"ngSubmit","keydown","formGroup","ngClass"],[1,"d-flex","flex-column"],["data-cy","order-form-quantity","id","quantity","title","\u062A\u0639\u062F\u0627\u062F",3,"imgClick","valueClick","keyDown","mouseEvent","form","iconName","iconDisabled","minValue","maxValue","step","highlight"],["data-cy","order-form-calculator",3,"side","symbol","form","price","symbolQuantity","totalBuyOrSellCommission","maxQuantityOrder","minDealableCount","isOption","highlight"],["data-cy","order-form-price","id","price","title","\u0642\u06CC\u0645\u062A",1,"my-1",3,"valueClick","imgClick","disabled","form","iconName","minValue","maxValue","step","highlight"],[1,"mb-1","d-flex","align-items-center","position-relative"],[1,"text-body","text-opacity-50","text-nowrap","me-1","small"],["data-cy","order-form-date-select","formControlName","validityType",1,"form-select","form-select-sm","rounded",3,"value"],[3,"value"],["data-cy","order-form-date-picker",1,"order-form-datepicker","ms-1"],[3,"assetEvent","value","isMobile","isOption","position"],[1,"d-flex","position-relative","gap-1","mt-1"],["data-cy","order-form-calculator",3,"changeQuantity","side","symbol","form","price","symbolQuantity","totalBuyOrSellCommission","maxQuantityOrder","minDealableCount","isOption","highlight"],["form-control-sm","",3,"required","defaultValue","dateValue","isMobile"],["data-cy","order-submit-btn","type","submit","title","(Enter)",1,"btn","btn-sm","flex-grow-1"],["data-cy","order-cancel-btn","type","button","title","(Esc)",1,"btn","btn-sm","btn-outline-secondary",3,"click"],["data-cy","order-draft-btn","type","button","title","(Esc)",1,"btn","btn-sm","btn-outline-warning"],["data-cy","order-draft-btn","type","button","title","(Esc)",1,"btn","btn-sm","btn-outline-warning",3,"click"],[1,"mb-0","text-justify"]],template:function(r,s){r&1&&(H(0,"order-form-loading",2),Z(1,cte,15,27,"form",3)(2,ute,2,0,"ng-template",null,0,Wi)),r&2&&(F("ngClass",de(3,IN,!s.ShowLoading()))("algo",!1),_(),q(s.orderForm?1:-1))},dependencies:[Ke,Fn,fs,EM,TM,wM,Ro,gs,nn,vs,Sd,hC,Zf,Xu,pC,wN],styles:[`.order-side[_ngcontent-%COMP%]   .custom-switch[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%] ~ .custom-control-label[_ngcontent-%COMP%]:after{background-color:#fff}.order-side[_ngcontent-%COMP%]   .custom-switch[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%] ~ .custom-control-label[_ngcontent-%COMP%]:before{background-color:var(--bs-success);border-color:var(--bs-success)}.order-side[_ngcontent-%COMP%]   .custom-switch[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:checked ~ .custom-control-label[_ngcontent-%COMP%]:before{background-color:var(--bs-danger);border-color:var(--bs-danger)}
/*# sourceMappingURL=order-from.style-AJZ4RQRY.css.map */`],changeDetection:0});let i=e;return i})();var dte=["formAlgo"],hte=i=>({draft:i});function pte(i,e){if(i&1){let t=ne();C(0,"order-form-tab",8),V("changeTab",function(r){z(t);let s=P();return W(s.changeOrderType(r))}),x()}if(i&2){let t,n,r=P();F("selectedTab",(t=r.OrderTabState())==null?null:t.orderType)("title",(n=r.formFacade.OrderSide())==null?null:n.text)}}function mte(i,e){if(i&1){let t=ne();C(0,"order-form",9),V("closeEvent",function(){z(t);let r=P();return W(r.closeForm())})("showConfirm",function(r){z(t);let s=P();return W(s.onShowConfirm(r))})("formValueChange",function(r){z(t);let s=P();return W(s.NormalOrderValues.set(r))}),x()}if(i&2){let t=P();F("firstLoading",t.OrderTabState().firstLoading)}}function gte(i,e){if(i&1){let t=ne();C(0,"order-form-algo",10,0),V("closeEvent",function(){z(t);let r=P();return W(r.closeForm())})("showConfirm",function(r){z(t);let s=P();return W(s.onShowConfirm(r))}),x()}}function fte(i,e){if(i&1){let t=ne();C(0,"order-option-confirm",13),V("confirmClick",function(){let r;z(t);let s=P(2);return(r=s.ConfirmData())==null||r.submit(),W(s.closeConfirm())})("cancelClick",function(){z(t);let r=P(2);return W(r.closeConfirm())}),x()}if(i&2){let t,n=P(2);F("isMobile",!1)("Value",(t=n.ConfirmData())==null?null:t.summary)}}function vte(i,e){if(i&1){let t=ne();C(0,"order-form-confirm",14),V("confirmClick",function(){let r;z(t);let s=P(2);return(r=s.ConfirmData())==null||r.submit(),W(s.closeConfirm())})("cancelClick",function(){z(t);let r=P(2);return W(r.closeConfirm())}),x()}if(i&2){let t,n=P(2);F("input",(t=n.ConfirmData())==null?null:t.summary)("isMobile",!1)}}function yte(i,e){if(i&1&&Z(0,fte,1,2,"order-option-confirm",11)(1,vte,1,2,"order-form-confirm",12),i&2){let t=P();q(t.ConfirmData().optionConfirm?0:1)}}function Cte(i,e){if(i&1){let t=ne();C(0,"order-form-confirm-algo",15),V("confirmClick",function(){let r;z(t);let s=P();return(r=s.ConfirmData())==null||r.submit(),W(s.closeConfirm())})("cancelClick",function(){z(t);let r=P();return W(r.closeConfirm())}),x()}if(i&2){let t,n=P();F("isMobile",!1)("input",(t=n.ConfirmData())==null?null:t.summary)}}var mC=(()=>{let e=class e{set popupMode(n){this.formFacade.PopupMode.set(n)}set orderInput(n){n&&this.formFacade.OrderInput.set(n)}constructor(){this.cdkDragService=ee(Hg),this.modalSliderService=ee(l0),this.NormalOrderValues=pe(void 0),this.ConfirmData=pe(void 0),this.onShowConfirm=n=>this.ConfirmData.update(()=>Se({},n)),this.allowToShowLoading=!1,this.changeOrderType=n=>{this.OrderTabState.update(()=>({orderType:n,firstLoading:this.allowToShowLoading})),this.allowToShowLoading=!0},this.OrderTypeEnum=Hs,this.formFacade=ee(qu),this.algoFacade=ee(Od),this.closeFormEventEmitter=new lt,this.cdkDragDisable=new lt,this.OrderTabState=pe({orderType:Hs.Normal}),this.AlgoTab$=Ft(this.OrderTabState).pipe(gt(n=>n.orderType===Hs.Algo)),this.closeForm=()=>{this.formFacade.callShowOrderForm(!0),this.closeFormEventEmitter.emit(!1);let n=this.formFacade.OrderInput();n.orderTabType===Hs.Algo&&this.algoFacade.updateState(n.id,{isEditMode:!1})},this.closeConfirm=()=>this.ConfirmData.set(void 0),Ce(this.cdkDragService.DragDisabled$.pipe(Je(n=>this.cdkDragDisable.emit(n)))),Ce(this.formFacade.OrderInput$.pipe(gt(Boolean),Je(n=>this.changeOrderType(n.orderTabType??Hs.Normal)))),_r(()=>{this.OrderTabState().orderType===Hs.Algo&&Ta(()=>this.formAlgo?.updateFormValues(this.NormalOrderValues()))})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["order-form-container"]],viewQuery:function(r,s){if(r&1&&bi(dte,5),r&2){let o;Si(o=xi())&&(s.formAlgo=o.first)}},inputs:{popupMode:"popupMode",orderInput:"orderInput"},outputs:{closeFormEventEmitter:"closeFormEventEmitter",cdkDragDisable:"cdkDragDisable"},features:[bl([qu,Hg])],decls:8,vars:13,consts:[["formAlgo",""],["data-cy","order-form-container",1,"stock","shadow-sm","user-select-none","rounded",3,"ngClass"],[1,"p-2","position-relative"],["data-cy","order-form-header",3,"closeClick","symbol","symbolName","hasCloseBtn","showClock","showBuyPower"],["data-cy","order-form-tab",3,"selectedTab","title"],["data-cy","order-form-normal",3,"firstLoading"],["data-cy","order-form-algo"],[1,"confirm-order","d-flex","flex-column","justify-content-start","position-absolute","full-offset","p-2",3,"isMobile","input"],["data-cy","order-form-tab",3,"changeTab","selectedTab","title"],["data-cy","order-form-normal",3,"closeEvent","showConfirm","formValueChange","firstLoading"],["data-cy","order-form-algo",3,"closeEvent","showConfirm"],[1,"confirm-order","d-flex","flex-column","justify-content-center","position-absolute","full-offset","p-2","text-white",3,"isMobile","Value"],[1,"confirm-order","d-flex","flex-column","justify-content-start","position-absolute","full-offset","p-2",3,"input","isMobile"],[1,"confirm-order","d-flex","flex-column","justify-content-center","position-absolute","full-offset","p-2","text-white",3,"confirmClick","cancelClick","isMobile","Value"],[1,"confirm-order","d-flex","flex-column","justify-content-start","position-absolute","full-offset","p-2",3,"confirmClick","cancelClick","input","isMobile"],[1,"confirm-order","d-flex","flex-column","justify-content-start","position-absolute","full-offset","p-2",3,"confirmClick","cancelClick","isMobile","input"]],template:function(r,s){if(r&1&&(C(0,"div",1)(1,"div",2)(2,"order-form-header",3),V("closeClick",function(){return s.closeForm()}),x(),Z(3,pte,1,2,"order-form-tab",4)(4,mte,1,1,"order-form",5)(5,gte,2,0,"order-form-algo",6)(6,yte,2,1)(7,Cte,1,2,"order-form-confirm-algo",7),x()()),r&2){let o,a,l,c;Nt((o=s.formFacade.OrderSide())==null?null:o.sideClass),F("ngClass",de(11,hte,s.formFacade.DraftMode())),_(2),F("symbol",s.formFacade.IsOptionSymbol()?s.formFacade==null||(a=s.formFacade.OptionSymbol())==null?null:a.baseSymbol:s.formFacade.Symbol())("symbolName",(l=s.formFacade.Symbol())==null?null:l.symbolName)("hasCloseBtn",!s.formFacade.PopupMode())("showClock",!1)("showBuyPower",!1),_(),q(s.formFacade.AlgoFeatureIsEnabled()&&s.formFacade.hasAlgoClaim&&!s.formFacade.IsOptionSymbol()&&!((c=s.formFacade.OrderInput())!=null&&c.isEditMode)?3:-1),_(),q(s.OrderTabState().orderType===s.OrderTypeEnum.Normal?4:s.OrderTabState().orderType===s.OrderTypeEnum.Algo?5:-1),_(2),q(s.ConfirmData()&&s.OrderTabState().orderType===s.OrderTypeEnum.Normal?6:s.ConfirmData()&&s.OrderTabState().orderType===s.OrderTypeEnum.Algo?7:-1)}},dependencies:[Oe,Ke,FN,bN,kN,SN,xN,MN,PN],encapsulation:2});let i=e;return i})();var bte=["order-list-algorithm-order-item",""],Ste=(i,e)=>e.id,xte=(i,e)=>[i,e],_te=i=>({"rotate-180":i}),wte=i=>({spin:i}),Ete=(i,e)=>({"bs-tooltip-bottom":i,"bs-tooltip-top":e}),Tte=i=>({opacity:1,top:i});function Mte(i,e){if(i&1&&H(0,"svg-icon",21),i&2){let t,n,r,s=P();Nt(((t=s.Order())==null?null:t.StateNotificationColorClass)+" ms-1"),F("ngClass",de(4,wte,((n=s.Order())==null?null:n.StateNotificationIconClass)==="loading"))("iconName",(r=s.Order())==null?null:r.StateNotificationIconClass)}}function Ate(i,e){if(i&1){let t=ne();C(0,"svg-icon",22),V("click",function(r){return z(t),P().onEditBtnClickedHandler(),W(r.stopPropagation())}),x()}if(i&2){let t=P();F("iconName",t.icons.Edit)}}function Pte(i,e){i&1&&H(0,"svg-icon",24),i&2&&F("iconName","loading")}function Dte(i,e){if(i&1&&H(0,"svg-icon",24),i&2){let t=P(2);F("iconName",t.icons.StopBox)}}function kte(i,e){if(i&1){let t=ne();C(0,"button",23),V("click",function(){z(t);let r=P();return W(r.onStopClick())}),Z(1,Pte,1,1,"svg-icon",24)(2,Dte,1,1,"svg-icon",24),A(3," \u062A\u0648\u0642\u0641 "),x()}if(i&2){let t=P();F("disabled",t.Order().state===t.AlgoOrderEasyStates.WaitForStop),_(),q(t.Order().state===t.AlgoOrderEasyStates.WaitForStop?1:2)}}function Ite(i,e){if(i&1&&(C(0,"div",31)(1,"div",28)(2,"span"),A(3),fe(4,"number"),x(),C(5,"div",7)(6,"span"),A(7),x(),C(8,"span"),A(9),fe(10,"number"),x()()(),C(11,"div",32),H(12,"div",13),x(),C(13,"div",28)(14,"span"),A(15),fe(16,"number"),x(),C(17,"span",33),A(18),fe(19,"jdate"),fe(20,"eDigit"),x()()()),i&2){let t=e.$implicit;_(3),Re(Te(4,7,t==null?null:t.quantity)),_(4),ye("(",t==null?null:t.ExecutedPercent,"%)"),_(2),Re(Te(10,9,t==null?null:t.ExecutedQuantity)),_(3),Ys("width:"+(t==null?null:t.ExecutedPercent)+"%"),_(3),Re(Te(16,11,t==null?null:t.price)),_(3),ye(" ",Te(20,16,ci(19,13,t==null?null:t.createDateTime,"time"))," ")}}function Fte(i,e){if(i&1&&(C(0,"div",29),A(1,"\u0633\u0641\u0627\u0631\u0634\u200C\u0647\u0627\u06CC \u062F\u0631 \u062D\u0627\u0644 \u0627\u062C\u0631\u0627"),x(),C(2,"div",30),St(3,Ite,21,18,"div",31,Ste),x()),i&2){let t=P(2);_(3),xt(t.visibleDetails())}}function Ote(i,e){if(i&1&&(C(0,"div",25)(1,"div",26)(2,"span",27),A(3,"\u0632\u0645\u0627\u0646 \u062B\u0628\u062A"),x(),C(4,"span"),A(5),fe(6,"jdate"),x()(),C(7,"div",26)(8,"span",27),A(9),x(),C(10,"span"),A(11),fe(12,"number"),x()(),C(13,"div",26)(14,"span",27),A(15,"\u0645\u06CC\u0627\u0646\u06AF\u06CC\u0646 \u0642\u06CC\u0645\u062A"),x(),C(16,"span"),A(17),fe(18,"number"),x()(),C(19,"div",26)(20,"span",27),A(21,"\u0627\u0631\u0632\u0634 \u06A9\u0644"),x(),C(22,"span"),A(23),fe(24,"number"),x()(),C(25,"div",28)(26,"span",27),A(27,"\u0627\u0631\u0632\u0634 \u0641\u0639\u0644\u06CC"),x(),C(28,"span"),A(29),fe(30,"number"),x()()(),Z(31,Fte,5,0)),i&2){let t,n,r,s,o,a,l,c=P();_(5),Re(ci(6,7,(t=c.Order())==null?null:t.createDateTime,"time")),_(4),ye(" ",((n=c.Order())==null?null:n.side)===c.Side.Buy?"\u0633\u0642\u0641":"\u06A9\u0641"," \u0642\u06CC\u0645\u062A "),_(2),Re(Te(12,10,(r=c.Order())==null?null:r.price)),_(6),Re(Te(18,12,(s=c.Order())==null?null:s.averagePrice)),_(6),Re(Te(24,14,(o=c.Order())==null?null:o.value)),_(6),Re(Te(30,16,(a=c.Order())==null?null:a.executedValue)),_(2),q(!((l=c.Order())==null||l.details==null)&&l.details.length?31:-1)}}function Lte(i,e){if(i&1&&(C(0,"div",20)(1,"div",34)(2,"small",35),A(3,"\u0648\u0636\u0639\u06CC\u062A \u0633\u0641\u0627\u0631\u0634:"),x(),A(4),x()()),i&2){let t=P();F("ngClass",zi(3,Ete,!t.tooltipOnTop(),t.tooltipOnTop()))("ngStyle",de(6,Tte,t.tooltipPosition()+"px")),_(4),ye(" ",t.tooltipLabel()," ")}}var ON=(()=>{let e=class e{constructor(){this.editOrderEvent=it(),this.icons=Fe,this.Side=pt,this.showActionButton=pe(!1),this.algoHistoryRoute=ut.ALGO_HISTORY_ROUTE,this.router=ee($n),this.algoFacade=ee(Od),this.symbolService=ee(Bo),this.popupOrderService=ee(Vl),this.layoutService=ee(ws),this.Order=rt.required(),this.Order$=Ft(this.Order).pipe(gt(Boolean)),this.visibleDetails=oi(()=>[...this.Order().details.filter(n=>EA(new TA(n)))]),this.SideClass=Ce(this.Order$.pipe(Be(n=>Rte[n?.side]))),this.ShowMore=pe(!1),this.onClick=()=>this.ShowMore.update(n=>!n),this.onStopClick=()=>this.algoFacade.delete(this.Order().id),this.onOrderClick=()=>{this.algoFacade.selectAlgo(this.Order().id),this.router.navigateByUrl(`/${ut.ALGO_HISTORY_ROUTE}/${this.Order().id}`)},this.itemClickHandler=()=>this.symbolService.setActiveIsin(this.Order().symbolIsin),this.tooltipOnTop=pe(!1),this.showTooltip=pe(!1),this.tooltipLabel=pe(""),this.tooltipPosition=pe(0),this.AlgoOrderStates=RA,this.AlgoOrderEasyStates=d0}onEditBtnClickedHandler(){this.layoutService.baseLayout===Zs.TABULAR_ORDER?(this.algoFacade.updateState(this.Order().id,{isEditMode:!0}),this.popupOrderService.openPopup({isin:this.Order().symbolIsin},null,Se({},this.Order()))):(this.algoFacade.updateState(this.Order().id,{isEditMode:!0}),this.editOrderEvent.emit(this.Order()))}showTooltipEvent(n,r){let o=(n.target||n.srcElement||n.currentTarget).getBoundingClientRect();this.tooltipOnTop.set(window.innerHeight-o.bottom<80),this.tooltipLabel.set(r),this.tooltipPosition.set(this.tooltipOnTop()?o.top-30:o.bottom),this.showTooltip.set(!0),this.showActionButton.set(!0)}hideTooltipEvent(){this.showTooltip.set(!1),this.showActionButton.set(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["","order-list-algorithm-order-item",""]],inputs:{Order:[1,"Order"]},outputs:{editOrderEvent:"editOrderEvent"},attrs:bte,decls:46,vars:37,consts:[[1,"stock","shadow-sm","user-select-none","position-relative",3,"mouseenter","mouseleave","ngClass"],[1,"p-2","bg-principal","rounded","position-relative"],[1,"order-stock-symbol","d-flex","justify-content-between","align-items-center","mb-2"],[1,"h6","mb-0",3,"click"],["width","20","height","20",3,"ngClass","class","iconName"],[1,"stock-actions","align-items-center","justify-content-end"],["width","18","height","18","data-cy","edit-btn","title","\u0648\u06CC\u0631\u0627\u06CC\u0634",1,"icon","px-1","text-muted",3,"iconName"],[1,"d-flex","gap-1"],["width","16","height","16",3,"iconName"],[1,"d-flex","justify-content-between","gap-1"],[1,"d-flex","gap-1","text-global"],[1,"progress-stacked","w-100","my-2",2,"direction","ltr","height","2px"],[1,"progress"],[1,"progress-bar","bg-global"],[1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-global"],["id","contextParent",1,"d-flex","gap-1","pt-2"],["type","button",1,"btn","btn-sm","btn-outline-danger","flex-grow-1",3,"disabled"],["type","button","context-menu","orderContext",1,"bg-principal-3x","bg-principal-4x-dark","bg-principal-hover","btn","btn-sm","flex-grow-1","text-body",3,"click"],[1,"cup","pt-2","text-center","text-body","text-opacity-50",3,"click"],["width","18","height","18",3,"iconName","ngClass"],["role","tooltip",1,"tooltip","bs-tooltip-auto","position-absolute","text-wrap",3,"ngClass","ngStyle"],["width","20","height","20",3,"ngClass","iconName"],["width","18","height","18","data-cy","edit-btn","title","\u0648\u06CC\u0631\u0627\u06CC\u0634",1,"icon","px-1","text-muted",3,"click","iconName"],["type","button",1,"btn","btn-sm","btn-outline-danger","flex-grow-1",3,"click","disabled"],["width","18","height","18",3,"iconName"],[1,"bg-principal-2x","bg-principal-4x-dark","p-2","mb-2","mt-1","rounded"],[1,"d-flex","justify-content-between","mb-1","border-bottom","border-opacity-25","border-principal-4x","border-principal-6x-dark"],[1,"text-body","text-opacity-50","small"],[1,"d-flex","justify-content-between"],[1,"mb-1"],[1,"bg-principal-2x","bg-principal-4x-dark","p-2","rounded"],[1,"mb-2"],[1,"progress","bg-principal-3x"],[1,"text-muted","position-relative"],[1,"tooltip-inner"],[1,"text-secondary"]],template:function(r,s){if(r&1&&(C(0,"div",0),V("mouseenter",function(a){let l;return s.showTooltipEvent(a,(l=s.Order())==null?null:l.StateNotificationText)})("mouseleave",function(){return s.hideTooltipEvent()}),C(1,"div",1)(2,"div",2)(3,"span",3),V("click",function(){return s.itemClickHandler()}),A(4),x(),Z(5,Mte,1,6,"svg-icon",4),C(6,"div",5),Z(7,Ate,1,1,"svg-icon",6),x()(),C(8,"div",7),H(9,"svg-icon",8),A(10),x(),C(11,"div",9)(12,"div",7)(13,"span"),A(14),fe(15,"number"),x()(),C(16,"div",10)(17,"span"),A(18),x(),C(19,"span"),A(20),fe(21,"number"),x()()(),C(22,"div",11)(23,"div",12),H(24,"div",13),x(),C(25,"div",12),H(26,"div",14),x()(),C(27,"div",9)(28,"div",7)(29,"span"),A(30),fe(31,"number"),x()(),C(32,"div",7)(33,"span"),A(34),fe(35,"jdate"),fe(36,"eDigit"),x()()(),C(37,"div",15),Z(38,kte,4,2,"button",16),C(39,"button",17),V("click",function(){return s.onOrderClick()}),A(40," \u0633\u0641\u0627\u0631\u0634\u0627\u062A "),x()(),C(41,"div",18),V("click",function(){return s.onClick()}),A(42),H(43,"svg-icon",19),x(),Z(44,Ote,32,18),x()(),Z(45,Lte,5,8,"div",20)),r&2){let o,a,l,c,u,d,h,p,m,g,f,y;F("ngClass",zi(32,xte,(o=s.SideClass())!==null&&o!==void 0?o:"",(o=(o=s.Order())==null?null:o.StateClass)!==null&&o!==void 0?o:"")),_(4),Re((a=s.Order())==null?null:a.symbolName),_(),q((l=s.Order())!=null&&l.StateNotificationIconClass?5:-1),_(2),q(s.showActionButton()&&((c=s.Order())!=null&&c.IsEditValid)?7:-1),_(2),F("iconName",s.icons.SmartAssistantGradient),_(),ye(" ",s.Order().side===s.Side.Buy?"\u062E\u0631\u06CC\u062F":"\u0641\u0631\u0648\u0634"," \u0647\u0648\u0634\u0645\u0646\u062F "),_(4),Re(Te(15,21,(u=s.Order())==null?null:u.quantity)),_(4),ye("(",(d=s.Order())==null?null:d.executedPercent,"%)"),_(2),Re(Te(21,23,(h=s.Order())==null?null:h.executedQuantity)),_(3),Ys("--bs-progress-height: 10px; width:"+((p=s.Order())==null?null:p.executedPercent)+"%"),_(2),Ys("--bs-progress-height: 10px; width:"+((m=s.Order())==null?null:m.executingPercent)+"%"),_(5),Re(Te(31,25,(g=s.Order())==null?null:g.price)),_(4),Re(Te(36,30,ci(35,27,(f=s.Order())==null?null:f.createDateTime,"time"))),_(4),q((y=s.Order())!=null&&y.IsDeleteValid&&((y=s.Order())==null?null:y.state)!==s.AlgoOrderEasyStates.WaitForStop?38:-1),_(4),ye(" ",s.ShowMore()?"\u0628\u0633\u062A\u0646":"\u0628\u06CC\u0634\u062A\u0631"," "),_(),F("iconName",s.icons.ChevronDown)("ngClass",de(35,_te,s.ShowMore())),_(),q(s.ShowMore()?44:-1),_(),q(s.showTooltip()?45:-1)}},dependencies:[Oe,Ke,Sl,yi,Ve,Md,HM,j2],styles:[`.progress-bar-striped[_ngcontent-%COMP%]{--bs-progress-height: 4px;background-color:transparent!important;background-image:linear-gradient(45deg,var(--bs-global) 25%,transparent 25%,transparent 50%,var(--bs-global) 50%,var(--bs-global) 75%,transparent 75%,transparent)!important}
/*# sourceMappingURL=order-list-algorithm-order-item.component-NZXZGA7X.css.map */`],changeDetection:0});let i=e;return i})(),Rte={[pt.Buy]:"buy",[pt.Sell]:"sell"};var Gte=(i,e)=>e.id,Ute=(i,e)=>e==null?null:e.id,VN=i=>({"transform-left":i}),BN=i=>({spin:i}),Hte=i=>({"flip-h":i}),zte=i=>({"d-inline-block":i}),LN=i=>({disabled:i});function Wte(i,e){if(i&1){let t=ne();C(0,"div",0)(1,"div",2)(2,"span",3),A(3,"\u0641\u0639\u0627\u0644\u06CC\u062A \u0627\u0645\u0631\u0648\u0632"),x(),C(4,"svg-icon",4),V("click",function(){z(t);let r=P();return W(r.onTodayActivityReload())}),x(),C(5,"svg-icon",5),V("click",function(){z(t);let r=P();return W(r.toggleTodayActivity())}),x()(),H(6,"today-activity",6),x()}if(i&2){let t=P();F("ngClass",de(5,VN,t.todayActivityTransformLeft())),_(4),F("iconName",t.icons.refresh)("ngClass",de(7,BN,t.orderStore.loading())),_(),F("iconName",t.icons.ChevronLeft),_(),F("isMobile",!1)}}function $te(i,e){if(i&1){let t=ne();C(0,"div",19),V("editOrderEvent",function(r){z(t);let s=P(4);return W(s.editAlgoOrder(r))}),x()}if(i&2){let t=P().$implicit;F("Order",t)}}function Kte(i,e){if(i&1){let t=ne();C(0,"div",20),V("editOrderEvent",function(r){z(t);let s=P(4);return W(s.editOmsOrder(r))})("checkboxChanged",function(r){z(t);let s=P(4);return W(s.checkboxChanged(r))}),x()}if(i&2){let t=P().$implicit,n=P(3);F("order",t)("collapseMode",n.layoutService.collapseMode.stackOrderCollapse)("isChecked",n.isOrderSelected(t.id))("toolbarIsActive",n.toolbarActive())}}function jte(i,e){if(i&1){let t=ne();C(0,"div",21),V("editOrderEvent",function(r){z(t);let s=P(4);return W(s.editDraftOrder(r))})("checkboxChanged",function(r){z(t);let s=P(4);return W(s.checkboxChanged(r))}),x()}if(i&2){let t=P().$implicit,n=P(3);F("order",t)("collapseMode",n.layoutService.collapseMode.stackOrderCollapse)("isChecked",n.isOrderSelected(t.id))("toolbarIsActive",n.toolbarActive())}}function Yte(i,e){if(i&1){let t=ne();C(0,"div",22),V("checkboxChanged",function(r){z(t);let s=P(4);return W(s.checkboxChanged(r))}),x()}if(i&2){let t=P().$implicit,n=P(3);F("order",t)("collapseMode",n.layoutService.collapseMode.stackOrderCollapse)("isChecked",n.isOrderSelected(t.id))("toolbarIsActive",n.toolbarActive())}}function qte(i,e){if(i&1&&(C(0,"div"),Z(1,$te,1,1,"div",15)(2,Kte,1,4,"div",16)(3,jte,1,4,"div",17)(4,Yte,1,4,"div",18),x()),i&2){let t=e.$implicit,n=P(3);_(),q((t==null?null:t.orderModelType)===n.OrderModelType.algorithm?1:(t==null?null:t.orderModelType)===n.OrderModelType.oms?2:(t==null?null:t.orderModelType)===n.OrderModelType.draft?3:(t==null?null:t.orderModelType)===n.OrderModelType.offline?4:-1)}}function Xte(i,e){if(i&1){let t=ne();C(0,"div",7)(1,"svg-icon",8),V("click",function(){z(t);let r=P(2);return W(r.toggleCollapseMode())}),x(),C(2,"div",9)(3,"svg-icon",10),V("click",function(){z(t);let r=P(2);return W(r.toggleColorFilters("showDone"))}),x(),C(4,"svg-icon",11),V("click",function(){z(t);let r=P(2);return W(r.toggleColorFilters("showDraft"))}),x(),C(5,"svg-icon",12),V("click",function(){z(t);let r=P(2);return W(r.toggleColorFilters("showRed"))}),x(),C(6,"svg-icon",13),V("click",function(){z(t);let r=P(2);return W(r.toggleColorFilters("showGreen"))}),x()()(),C(7,"div",14),St(8,qte,5,1,"div",null,Gte),x()}if(i&2){let t=P(2);_(),F("iconName",t.icons.ChevronLeft)("ngClass",de(6,Hte,t.collapseMode())),_(2),F("iconName",t.blueLightClass()),_(),F("iconName",t.yellowLightClass()),_(),F("iconName",t.redLightClass()),_(),F("iconName",t.greenLightClass()),_(2),xt(t.filteredOrder())}}function Zte(i,e){if(i&1&&H(0,"svg-icon",26),i&2){let t=P(3);F("iconName",t.icons.Blank)}}function Qte(i,e){if(i&1&&H(0,"svg-icon",27),i&2){let t=P(3);F("iconName",t.icons.MenuVertical)}}function Jte(i,e){if(i&1){let t=ne();C(0,"div",51),V("click",function(){z(t);let r=P(4);return W(r.selectAll())}),H(1,"svg-icon",52),C(2,"small",53),A(3,"\u0647\u0645\u0647"),x()()}if(i&2){let t=P(4);_(),F("iconName",t.icons.CheckboxEmpty)}}function eie(i,e){if(i&1){let t=ne();C(0,"div",54),V("click",function(){z(t);let r=P(4);return W(r.deselectAll())}),H(1,"svg-icon",45),C(2,"small",53),A(3," \u0644\u063A\u0648 \u0627\u0646\u062A\u062E\u0627\u0628"),x()()}if(i&2){let t=P(4);_(),F("iconName",t.icons.CheckBoxFill)}}function tie(i,e){if(i&1){let t=ne();C(0,"div",36)(1,"div",41),Z(2,Jte,4,1,"div",42)(3,eie,4,1,"div",43),C(4,"div",44),V("click",function(r){return z(t),P(3).onDeleteSelectedOrdersClicked(),W(r.stopPropagation())}),H(5,"svg-icon",45),C(6,"small",46),A(7),x()(),C(8,"div",47),V("click",function(r){return z(t),P(3).onSendSelectedDraftsClicked(),W(r.stopPropagation())}),H(9,"svg-icon",48),C(10,"small",46),A(11),x()(),C(12,"div",49)(13,"svg-icon",50),V("click",function(){z(t);let r=P(3);return W(r.closeToolbar())}),x()()()()}if(i&2){let t=P(3);_(2),q(t.allOrdersSelected()?3:2),_(2),F("ngClass",de(8,LN,!t.deleteToolbarActive())),_(),F("iconName",t.icons.Delete),_(2),ye("\u062D\u0630\u0641 ",t.deleteOrdersCountLabel(),""),_(),F("ngClass",de(10,LN,t.sendToolbarNotActive()||t.sendDraftsCountLabel().length<=0)),_(),F("iconName",t.icons.Send),_(2),ye("\u0627\u0631\u0633\u0627\u0644 ",t.sendDraftsCountLabel()," "),_(2),F("iconName",t.icons.Close)}}function iie(i,e){if(i&1){let t=ne();C(0,"svg-icon",67),V("click",function(){z(t);let r=P(4);return W(r.onClearSearchClicked())}),x()}if(i&2){let t=P(4);F("iconName",t.icons.Close)}}function nie(i,e){if(i&1){let t=ne();C(0,"div",37)(1,"div",55),Z(2,iie,1,1,"svg-icon",56),C(3,"input",57),Tf("ngModelChange",function(r){z(t);let s=P(3);return Ef(s.filterObject().searchInput,r)||(s.filterObject().searchInput=r),W(r)}),V("input",function(r){z(t);let s=P(3);return W(s.onSearchOrders(r.target.value))}),x()(),C(4,"div",58)(5,"div",59),V("click",function(){z(t);let r=P(3);return W(r.toggleColorFilters("showDone"))}),H(6,"svg-icon",60),A(7," \u0627\u0646\u062C\u0627\u0645 \u0634\u062F\u0647 "),x(),C(8,"div",61),V("click",function(){z(t);let r=P(3);return W(r.toggleColorFilters("showRed"))}),H(9,"svg-icon",62),A(10," \u0641\u0631\u0648\u0634 "),x(),C(11,"div",63),V("click",function(){z(t);let r=P(3);return W(r.toggleColorFilters("showGreen"))}),H(12,"svg-icon",64),A(13," \u062E\u0631\u06CC\u062F "),x(),C(14,"div",65),V("click",function(){z(t);let r=P(3);return W(r.toggleColorFilters("showDraft"))}),H(15,"svg-icon",66),A(16," \u067E\u06CC\u0634\u200C\u0646\u0648\u06CC\u0633 "),x()()()}if(i&2){let t=P(3);_(2),q(t.filterObject().searchInput.length?2:-1),_(),wf("ngModel",t.filterObject().searchInput),_(3),F("iconName",t.blueLightClass()),_(3),F("iconName",t.redLightClass()),_(3),F("iconName",t.greenLightClass()),_(3),F("iconName",t.yellowLightClass())}}function rie(i,e){if(i&1){let t=ne();C(0,"div",68),V("click",function(){z(t);let r=P(3);return W(r.openClockModal())}),C(1,"span"),A(2,"\u0633\u0627\u0639\u062A \u0645\u062C\u0627\u0632 \u062B\u0628\u062A \u0633\u0641\u0627\u0631\u0634\u0627\u062A"),x(),H(3,"svg-icon",69),x()}if(i&2){let t=P(3);_(3),F("iconName",t.icons.QuestionBox)}}function sie(i,e){if(i&1&&(C(0,"div",39),H(1,"order-form-container",70),x()),i&2){let t=P(3);_(),F("orderInput",t.OrderInputData())("popupMode",!1)}}function oie(i,e){if(i&1){let t=ne();C(0,"div",71),H(1,"svg-icon",74),A(2," \u0633\u0641\u0627\u0631\u0634\u06CC \u0648\u062C\u0648\u062F \u0646\u062F\u0627\u0631\u062F "),C(3,"button",75),V("click",function(){z(t);let r=P(4);return W(r.openOrdersHistory())}),A(4," \u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u0633\u0641\u0627\u0631\u0634\u0627\u062A "),x()()}if(i&2){let t=P(4);_(),F("iconName",t.icons.BasketError)}}function aie(i,e){if(i&1){let t=ne();C(0,"button",80),V("click",function(){z(t);let r=P(5);return W(r.deleteSelectedOrders(!0))}),A(1," \u062A\u0627\u06CC\u06CC\u062F "),x()}}function lie(i,e){if(i&1){let t=ne();C(0,"button",81),V("click",function(){z(t);let r=P(5);return W(r.sendSelectedDrafts(!0))}),A(1," \u062A\u0627\u06CC\u06CC\u062F "),x()}}function cie(i,e){if(i&1){let t=ne();C(0,"div",72),A(1),C(2,"div",76),Z(3,aie,2,0,"button",77)(4,lie,2,0,"button",78),C(5,"button",79),V("click",function(){z(t);let r=P(4);return W(r.onCancelClicked())}),A(6," \u0627\u0646\u0635\u0631\u0627\u0641 "),x()()()}if(i&2){let t=P(4);_(),ye(" ",t.confirmString()," "),_(2),q(t.actionType()===0?3:t.actionType()===1?4:-1)}}function uie(i,e){if(i&1){let t=ne();C(0,"div",19),V("editOrderEvent",function(r){z(t);let s=P(5);return W(s.editAlgoOrder(r))}),x()}if(i&2){let t=P().$implicit;F("Order",t)}}function die(i,e){if(i&1){let t=ne();C(0,"div",83),V("editOrderEvent",function(r){z(t);let s=P(5);return W(s.editOmsOrder(r))})("checkboxChanged",function(r){z(t);let s=P(5);return W(s.checkboxChanged(r))}),x()}if(i&2){let t=P().$implicit,n=P(4);F("order",t)("isChecked",n.isOrderSelected(t.id))("collapseMode",n.layoutService.collapseMode.stackOrderCollapse)("toolbarIsActive",n.toolbarActive())}}function hie(i,e){if(i&1){let t=ne();C(0,"div",21),V("editOrderEvent",function(r){z(t);let s=P(5);return W(s.editDraftOrder(r))})("checkboxChanged",function(r){z(t);let s=P(5);return W(s.checkboxChanged(r))}),x()}if(i&2){let t=P().$implicit,n=P(4);F("order",t)("collapseMode",n.layoutService.collapseMode.stackOrderCollapse)("isChecked",n.isOrderSelected(t.id))("toolbarIsActive",n.toolbarActive())}}function pie(i,e){if(i&1){let t=ne();C(0,"div",22),V("checkboxChanged",function(r){z(t);let s=P(5);return W(s.checkboxChanged(r))}),x()}if(i&2){let t=P().$implicit,n=P(4);F("order",t)("collapseMode",n.layoutService.collapseMode.stackOrderCollapse)("isChecked",n.isOrderSelected(t.id))("toolbarIsActive",n.toolbarActive())}}function mie(i,e){if(i&1&&(C(0,"div",73),Z(1,uie,1,1,"div",15)(2,die,1,4,"div",82)(3,hie,1,4,"div",17)(4,pie,1,4,"div",18),x()),i&2){let t=e.$implicit,n=P(4);mn("data-cy","order-list-item-container-"+t.id),_(),q((t==null?null:t.orderModelType)===n.OrderModelType.algorithm?1:(t==null?null:t.orderModelType)===n.OrderModelType.oms?2:(t==null?null:t.orderModelType)===n.OrderModelType.draft?3:-1),_(3),q((t==null?null:t.orderModelType)===n.OrderModelType.offline?4:-1)}}function gie(i,e){if(i&1&&(C(0,"div",40),Z(1,oie,5,1,"div",71)(2,cie,7,2,"div",72),St(3,mie,5,3,"div",73,Ute),x()),i&2){let t,n=P(3);_(),q(!n._showOrderForm()&&!n.orderStore.loading()&&!((t=n.filteredOrder())!=null&&t.length)?1:-1),_(),q(n.showConfirmation()?2:-1),_(),xt(n.filteredOrder())}}function fie(i,e){if(i&1){let t=ne();C(0,"div",23)(1,"div",7)(2,"div",24)(3,"svg-icon",25),V("click",function(){z(t);let r=P(2);return W(r.onToolbarIconClicked())}),x(),H(4,"span"),Z(5,Zte,1,1,"svg-icon",26)(6,Qte,1,1,"svg-icon",27),C(7,"div",28)(8,"div",29),V("click",function(){z(t);let r=P(2);return W(r.onToolbarIconClicked())}),H(9,"svg-icon",30),C(10,"div"),A(11,"\u062D\u0630\u0641\u200C/\u200C\u0627\u0631\u0633\u0627\u0644 \u06AF\u0631\u0648\u0647\u06CC"),x()(),C(12,"div",31),V("click",function(){z(t);let r=P(2);return W(r.toggleTodayActivity())}),H(13,"svg-icon",30),C(14,"div"),A(15,"\u0641\u0639\u0627\u0644\u06CC\u062A \u0627\u0645\u0631\u0648\u0632"),x()(),C(16,"div",32),V("click",function(){z(t);let r=P(2);return W(r.toggleOrderSetting())}),H(17,"svg-icon",30),C(18,"div"),A(19,"\u062A\u0646\u0638\u06CC\u0645\u0627\u062A"),x()()()(),C(20,"app-clock",33),V("clockChange",function(){z(t);let r=P(2);return W(r.onClockChange())}),x(),C(21,"div")(22,"svg-icon",34),V("click",function(){z(t);let r=P(2);return W(r.onReloadBtnClicked())}),x(),C(23,"svg-icon",35),V("click",function(){z(t);let r=P(2);return W(r.toggleFilterPanel())}),x()()(),Z(24,tie,14,12,"div",36)(25,nie,17,6,"div",37),x(),Z(26,rie,4,1,"div",38)(27,sie,2,2,"div",39)(28,gie,5,2,"div",40)}if(i&2){let t,n=P(2);_(3),F("iconName",n.icons.Close)("ngClass",de(15,zte,n.toolbarActive())),_(2),q(n.toolbarActive()?5:6),_(4),F("iconName",n.icons.ListSelect),_(4),F("iconName",n.icons.History),_(4),F("iconName",n.icons.Setting),_(3),F("showClockIcon",!1),_(2),F("iconName",n.icons.refresh)("ngClass",de(17,BN,n.orderStore.loading())),_(),F("iconName",n.filterIcon()),_(),q(n.toolbarActive()?24:-1),_(),q(n.filterPanel()?25:-1),_(),q(n.showOutOfOrderTimeNotify()?26:-1),_(),q(n._showOrderForm()||((t=n.orderIdForEdit())==null?null:t.length)>0?27:-1),_(),q(n.filteredOrder()?28:-1)}}function vie(i,e){if(i&1&&(C(0,"div",1),Z(1,Xte,10,8)(2,fie,29,19),x()),i&2){let t=P();F("ngClass",de(2,VN,t.ordersTransformLeft())),_(),q(t.collapseMode()&&!t.layoutService.closeMode.stackOrderClose?1:!t.collapseMode()&&!t.layoutService.closeMode.stackOrderClose?2:-1)}}var GN=(()=>{let e=class e extends jA{collapseMode(){return this.layoutService.collapseMode.stackOrderCollapse}setOrderIdForEdit(n){let r=this.orderIdForEdit();this.orderIdForEdit.set(n),n?.length===0&&r?.length>0&&this.orderFacade.resetOrderState(r),this.orderIdForEditChangedEventEmitter.emit(n)}constructor(n,r,s,o,a,l,c,u,d,h,p,m,g){super(),this.orderService=n,this.orderFacade=r,this.draftFacade=s,this.orderStore=o,this.settingFacadeService=a,this.notificationService=l,this.hotkeysService=c,this.activeSymbolService=u,this.layoutService=d,this.sidePanelServiceService=h,this.router=p,this.cautionModalService=m,this.algoOrderFacade=g,this.icons=Fe,this.todayActivityComponent=$t(m0),this.clockComponent=$t(Fd),this.orderInputData=rt(void 0),this.showOrderForm=xf(!1),this.closeFormEventEmitter=it(),this.orderIdForEditChangedEventEmitter=it(),this.collapseEvent=it(),this.OrderInputData=pe(void 0),this.ShowOrderForm=pe(!1),this._showOrderForm=pe(!1),this.todayActivityActive=pe(!1),this.todayActivityTransformLeft=pe(!1),this.ordersTransformLeft=pe(!1),this.updateOderInput=f=>this.OrderInputData.update(()=>Se({},f)),this.OrderModelType=Ss,_r(()=>{this.orderInputData()&&this.updateOderInput(this.orderInputData())}),_r(()=>{this.ShowOrderForm.update(()=>this.showOrderForm())}),this.resetFilters(),this.orderService.openOrderFormEditModeObservable$.subscribe({next:f=>{f.orderModelType===Ss.oms&&this.editOmsOrder(f),f.orderModelType===Ss.draft&&this.editDraftOrder(f)}}),_r(()=>{this.ShowOrderForm()?this.ShowOrderForm()&&this.OrderInputData()&&this.cautionModalService.checkCaution({acceptButton:!0,symbolIsin:this.OrderInputData()?.isin,side:this.OrderInputData()?.side,onAccept:()=>{this._showOrderForm.set(!0),this.closeToolbar(),this.setOrderIdForEdit("")}}):this._showOrderForm.set(this.ShowOrderForm())})}ngOnInit(){this.orderService.openOrderFormEditModeObservable$.subscribe({next:n=>{n.orderModelType===Ss.oms&&this.editOmsOrder(n),n.orderModelType===Ss.draft&&this.editDraftOrder(n)}}),this.addHotKeys(),this.handleOrderState(),this.orderService.showOrderForm$.subscribe(n=>{this.closeFormEventReceived(n)}),this.subscribeToEditOrderFromMarketDepth(),this.subscribeToOrderFromMarketDepth(),this.subscribeToOrderFromLayouts(),this.subscribeToOrderFromSparkLine(),this.subscribeToOrderFromContextMenu(),this.subscribeToOrderFromDesktopMarketDepth(),this.subscribeToOrderFromCloneOrder(),this.subscribeToOrderFromPopup(),this.subscribeToOrderFromSearchPanel(),this.setClasses()}ngOnDestroy(){this.removeHotKeys()}subscribeToOrderFromSearchPanel(){let n=this.orderService.orderFromSearchPanel$.subscribe(()=>{this.todayActivityActive()&&this.toggleTodayActivity()});this.subscriptions.push(n)}subscribeToOrderFromPopup(){let n=this.orderService.orderFromPopup$.subscribe(()=>{this.todayActivityActive()&&this.toggleTodayActivity()});this.subscriptions.push(n)}subscribeToOrderFromCloneOrder(){let n=this.orderService.orderFromCloneOrder$.subscribe(()=>{this.todayActivityActive()&&this.toggleTodayActivity()});this.subscriptions.push(n)}subscribeToOrderFromDesktopMarketDepth(){let n=this.orderService.orderFromDesktopMarketDepth$.subscribe(()=>{this.todayActivityActive()&&this.toggleTodayActivity()});this.subscriptions.push(n)}subscribeToOrderFromMarketDepth(){let n=this.orderService.orderFromMarketDepthSubject$.subscribe(()=>{this.todayActivityActive()&&this.toggleTodayActivity()});this.subscriptions.push(n)}subscribeToOrderFromContextMenu(){let n=this.orderService.orderFromContextMenu$.subscribe(()=>{this.todayActivityActive()&&this.toggleTodayActivity()});this.subscriptions.push(n)}subscribeToOrderFromSparkLine(){let n=this.orderService.orderFromSparkLine$.subscribe(()=>{this.todayActivityActive()&&this.toggleTodayActivity()});this.subscriptions.push(n)}subscribeToEditOrderFromMarketDepth(){let n=this.orderService.editOrderFromMarketDepthSubject$.subscribe(()=>{this.todayActivityActive()&&this.toggleTodayActivity()});this.subscriptions.push(n)}subscribeToOrderFromLayouts(){let n=this.orderService.orderFromLayouts$.subscribe(()=>{this.todayActivityActive()&&this.toggleTodayActivity()});this.subscriptions.push(n)}addHotKeys(){this.hotkeys=this.hotkeysService.add(new e0([jn.F1,jn.F2,jn.F3,jn.F4,jn.F9],(n,r)=>{switch(r){case jn.F9:this.onSendSelectedDraftsWithoutRemove();break;case jn.F1:this.toggleColorFilters("showGreen");break;case jn.F2:this.toggleColorFilters("showRed");break;case jn.F3:this.toggleColorFilters("showDraft");break;case jn.F4:this.toggleColorFilters("showDone");break}let s=n;return s.returnValue=!1,s}))}handleOrderState(){this.orderService.orderOverlayState$.subscribe(n=>{n||this.addHotKeys()})}toggleCollapseMode(){this.layoutService.changeStackOrderCollapse(!this.collapseMode())}removeHotKeys(){this.hotkeysService.remove(this.hotkeys)}editAlgoOrder(n){this.setOrderIdForEdit(""),setTimeout(()=>{this.collapseMode()&&this.toggleCollapseMode(),n&&n.symbolIsin&&this.activeSymbolService.setActiveIsin(n.symbolIsin),this.setOrderIdForEdit(n.id),this.updateOderInput(Se({},this.orderService.getOrderDataForEdit(n))),this.showOrderForm.set(!1),this.closeFormEventEmitter.emit(!1)},10)}editOmsOrder(n){this.setOrderIdForEdit(""),setTimeout(()=>{this.collapseMode()&&this.toggleCollapseMode(),n&&n.symbolIsin&&this.activeSymbolService.setActiveIsin(n.symbolIsin),this.setOrderIdForEdit(n.id),this.updateOderInput(this.orderService.getOrderDataForEdit(n)),this.showOrderForm.set(!1),this.closeFormEventEmitter.emit(!1)},10)}editDraftOrder(n){this.setOrderIdForEdit(""),setTimeout(()=>{this.collapseMode()&&this.toggleCollapseMode(),n&&n.symbolIsin&&this.activeSymbolService.setActiveIsin(n.symbolIsin),this.setOrderIdForEdit(n.id),this.updateOderInput(this.orderService.getOrderDataForEdit(n)),this.showOrderForm.set(!1),this.closeFormEventEmitter.emit(!1)},10)}onToolbarIconClicked(){this.toolbarActive.update(n=>!n),this.filterPanel.set(!1),this.toolbarActive()&&this.ShowOrderForm.update(()=>!1)}openClockModal(){this.clockComponent().handleOpen()}closeFormEventReceived(n){this.orderIdForEdit()?.length>0?this.cancelEdit():this.closeFormEventEmitter.emit(n)}cancelEdit(){this.setOrderIdForEdit("")}onCancelClicked(){setTimeout(()=>{this.showConfirmation.set(!1)},rb)}toggleTodayActivity(){let n=!this.todayActivityActive();n?(this.ordersTransformLeft.set(n),setTimeout(()=>{this.todayActivityActive.set(n),setTimeout(()=>{this.todayActivityTransformLeft.set(!n)},100)},100)):(this.todayActivityTransformLeft.set(!n),setTimeout(()=>{this.todayActivityActive.set(n),setTimeout(()=>{this.ordersTransformLeft.set(n)},100)},100))}onSendSelectedDraftsWithoutRemove(){this.toolbarActive()&&(this.settingFacadeService.getSettings().orderConfirmation?(this.actionType.set(xA.SEND),this.confirmString.set(Pa.ActionConfirmTexts.SendSelectedDrafts),this.showConfirmation.set(!0)):this.sendSelectedDraftsWithoutRemove(!1))}sendSelectedDraftsWithoutRemove(n){setTimeout(()=>{this.showConfirmation.set(!1),this.selectedDrafts().length===0?this.notificationService.alert(Pa.Messages.NoDraftIsSelectedForSend,_t.warning):(this.selectedDrafts().some(s=>s.side===pt.Buy)&&(this.filterObject().showGreen=!0),this.selectedDrafts().some(s=>s.side===pt.Sell)&&(this.filterObject().showRed=!0),this.draftFacade.batchCreate(this.selectedOrderIds().map(s=>s.id),!1))},n?rb:0)}onTodayActivityReload(){this.todayActivityComponent().reload()}openOrdersHistory(){this.router.navigate(["/orders-history"])}toggleOrderSetting(){this.sidePanelServiceService.openSidePanelFromRoute({sidePanel:Ee.Settings,value:"Order"})}track(n,r){return r.id}};e.\u0275fac=function(r){return new(r||e)(st(Uo),st(c0),st(u0),st(Rl),st(xs),st(pi),st(Np),st(Bo),st(ws),st(Tr),st($n),st(f0),st(h0))},e.\u0275cmp=ge({type:e,selectors:[["d-order-list"]],viewQuery:function(r,s){r&1&&(Kt(s.todayActivityComponent,m0,5),Kt(s.clockComponent,Fd,5)),r&2&&si(2)},inputs:{orderInputData:[1,"orderInputData"],showOrderForm:[1,"showOrderForm"]},outputs:{showOrderForm:"showOrderFormChange",closeFormEventEmitter:"closeFormEventEmitter",orderIdForEditChangedEventEmitter:"orderIdForEditChangedEventEmitter",collapseEvent:"collapseEvent"},features:[bl([lC]),Cl],decls:2,vars:1,consts:[[1,"d-flex","flex-column","h-100","transform","overflow-hidden",3,"ngClass"],[1,"d-flex","flex-column","h-100","transform",3,"ngClass"],[1,"d-flex","justify-content-between","align-items-center","px-2","py-1","text-light"],[1,"fw-bold"],["title","\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F","width","20","height","20",1,"text-light","ms-auto","cup","position-relative",3,"click","iconName","ngClass"],["width","20","height","20","title","\u0628\u0627\u0632\u06AF\u0634\u062A \u0628\u0647 \u0633\u0641\u0627\u0631\u0634\u0627\u062A",1,"cup","ps-2",3,"click","iconName"],[1,"overflow-auto","h-100",3,"isMobile"],[1,"d-flex","align-items-center","justify-content-between","text-nowrap"],["width","20","height","20","title","\u063A\u06CC\u0631\u200C\u0641\u0634\u0631\u062F\u0647",1,"text-light","cup","ms-2",3,"click","iconName","ngClass"],[1,"d-flex","justify-content-center","align-items-center","top-orders","px-2","flex-shrink-0"],["width","18","height","18","title","\u0627\u0646\u062C\u0627\u0645 \u0634\u062F\u0647 (F4)",1,"py-1","text-primary",3,"click","iconName"],["width","18","height","18","title","\u067E\u06CC\u0634\u200C\u0646\u0648\u06CC\u0633 (F3)",1,"py-1","ms-1","text-warning",3,"click","iconName"],["width","18","height","18","title","\u0641\u0631\u0648\u0634 (F2)",1,"py-1","ms-1","text-danger",3,"click","iconName"],["width","18","height","18","title","\u062E\u0631\u06CC\u062F (F1)",1,"py-1","ms-1","text-success",3,"click","iconName"],[1,"stocks","stocks__compact","flex-fill","overflow-auto","h-100"],["order-list-algorithm-order-item","",3,"Order"],["order-list-oms-order-item","",3,"order","collapseMode","isChecked","toolbarIsActive"],["order-list-draft-item","",3,"order","collapseMode","isChecked","toolbarIsActive"],["order-list-offline-order-item","",3,"order","collapseMode","isChecked","toolbarIsActive"],["order-list-algorithm-order-item","",3,"editOrderEvent","Order"],["order-list-oms-order-item","",3,"editOrderEvent","checkboxChanged","order","collapseMode","isChecked","toolbarIsActive"],["order-list-draft-item","",3,"editOrderEvent","checkboxChanged","order","collapseMode","isChecked","toolbarIsActive"],["order-list-offline-order-item","",3,"checkboxChanged","order","collapseMode","isChecked","toolbarIsActive"],[1,"top-orders","px-2","py-1","flex-shrink-0","user-select-none"],["ngbDropdown","","data-cy","order-list-dropdown",1,"d-inline-block"],["width","20","height","20",1,"text-light","d-none","cup","pe-1",3,"click","iconName","ngClass"],["width","20","height","20",3,"iconName"],["width","20","height","20","id","dropdownBasic1","ngbDropdownToggle","",1,"text-light","cup",3,"iconName"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"text-start","dropdown-menu-right"],["data-cy","order-list-show-toolbar-btn","ngbDropdownItem","",1,"cup","ps-3",3,"click"],["width","20","height","20",1,"cup","text-muted",3,"iconName"],["data-cy","order-list-today-activity","ngbDropdownItem","",1,"cup","ps-3",3,"click"],["data-cy","order-list-setting","ngbDropdownItem","",1,"cup","ps-3",3,"click"],["data-cy","order-list-clock",1,"text-light",3,"clockChange","showClockIcon"],["width","20","height","20","data-cy","order-list-reload-btn","title","\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F",1,"ms-1","text-light","me-auto","cup","position-relative",3,"click","iconName","ngClass"],["width","20","height","20","data-cy","order-list-filter-btn","id","order-list-filter-id",1,"ms-1","cup","text-light",3,"click","iconName"],["data-cy","order-list-toolbar",1,"d-flex","align-items-center","justify-content-between","my-2","flex-shrink-0"],["data-cy","order-list-filter",1,"bg-white","bg-opacity-10","mb-2","p-2","rounded","user-select-none"],["data-cy","order-list-order-valid-times",1,"alert","bg-warning","d-flex","align-items-center","justify-content-between","p-2","rounded","cup","mb-2","mx-2"],[1,"stocks","mb-2"],[1,"stocks","flex-fill","overflow-auto","h-100","d-flex","flex-column"],[1,"toolbar","d-flex","justify-content-between","align-items-center","w-100","bg-white","bg-opacity-10","text-light","rounded","p-1"],["data-cy","order-list-toolbar-select-all",1,"col","text-center","p-0","cup","link-light","link-opacity-50-hover"],["data-cy","order-list-toolbar-cancel-all",1,"col","text-center","p-0","cup","link-light","link-opacity-50-hover"],["data-cy","order-list-toolbar-delete",1,"col","text-center","p-0","cup","link-light","link-opacity-50-hover","d-flex","align-items-center",3,"click","ngClass"],["width","18","height","18",1,"text-primary",3,"iconName"],[1,"fw-light","text-start"],["data-cy","order-list-toolbar-send",1,"col","text-center","p-0","cup","link-light","link-opacity-50-hover","d-flex","align-items-center",3,"click","ngClass"],["width","18","height","18",1,"me-1","text-primary",3,"iconName"],[1,"text-center"],["width","18","height","18","data-cy","order-list-toolbar-close",1,"text-opacity-50","cup",3,"click","iconName"],["data-cy","order-list-toolbar-select-all",1,"col","text-center","p-0","cup","link-light","link-opacity-50-hover",3,"click"],["width","20","height","20",1,"text-primary",3,"iconName"],[1,"fw-light"],["data-cy","order-list-toolbar-cancel-all",1,"col","text-center","p-0","cup","link-light","link-opacity-50-hover",3,"click"],[1,"position-relative"],["width","18","height","18","data-cy","order-list-clear-search-clear",1,"position-absolute","px-2","text-muted","cup",2,"left","0","top","5px",3,"iconName"],["data-cy","order-list-filter-search","type","text","id","searchOrder","placeholder","\u062C\u0633\u062A\u062C\u0648\u06CC \u0646\u0645\u0627\u062F ...",1,"form-control","h-100","border-0","rounded-1",3,"ngModelChange","input","ngModel"],[1,"bg-white","bg-opacity-10","row","mx-0","d-flex","mt-1","justify-content-around","text-light","small","rounded-1","p-2"],["data-cy","order-list-done-filter",1,"col","p-0","text-center","cup",3,"click"],["width","18","height","18","title","(F4)",1,"d-block","text-primary",3,"iconName"],["data-cy","order-list-sell-filter",1,"col","p-0","text-center","cup",3,"click"],["width","18","height","18","title","(F2)",1,"d-block","text-danger",3,"iconName"],["data-cy","order-list-buy-filter",1,"col","p-0","text-center","cup",3,"click"],["width","18","height","18","title","(F1)",1,"d-block","text-success",3,"iconName"],["data-cy","order-list-draft-filter",1,"col","p-0","text-center","cup",3,"click"],["width","18","height","18","title","(F3)",1,"d-block","text-warning",3,"iconName"],["width","18","height","18","data-cy","order-list-clear-search-clear",1,"position-absolute","px-2","text-muted","cup",2,"left","0","top","5px",3,"click","iconName"],["data-cy","order-list-order-valid-times",1,"alert","bg-warning","d-flex","align-items-center","justify-content-between","p-2","rounded","cup","mb-2","mx-2",3,"click"],["width","20","height","20",1,"",3,"iconName"],[3,"orderInput","popupMode"],["data-cy","empty-order-list-container",1,"d-flex","flex-column","justify-content-center","align-items-center","text-light","h-100","opacity-5"],[1,"confirm-order","d-flex","flex-column","justify-content-center","position-absolute","full-offset","text-center","p-2","z-2"],[1,"d-order-list-item"],["width","48","height","48",1,"mb-3",3,"iconName"],["type","button","data-cy","order-history-btn",1,"btn","btn-sm","btn-outline-light","mt-3",3,"click"],[1,"mt-3"],["type","button","data-cy","order-list-delete-confirm",1,"btn","btn-sm","py-1","btn-global","me-2","px-4"],["type","button",1,"btn","btn-sm","py-1","btn-global","me-2","px-4"],["type","button",1,"btn","btn-sm","py-1","btn-outline-light",3,"click"],["type","button","data-cy","order-list-delete-confirm",1,"btn","btn-sm","py-1","btn-global","me-2","px-4",3,"click"],["type","button",1,"btn","btn-sm","py-1","btn-global","me-2","px-4",3,"click"],["order-list-oms-order-item","",3,"order","isChecked","collapseMode","toolbarIsActive"],["order-list-oms-order-item","",3,"editOrderEvent","checkboxChanged","order","isChecked","collapseMode","toolbarIsActive"]],template:function(r,s){r&1&&Z(0,Wte,7,9,"div",0)(1,vie,3,4,"div",1),r&2&&q(s.todayActivityActive()&&!s.layoutService.closeMode.stackOrderClose?0:s.todayActivityActive()?-1:1)},dependencies:[Fn,El,Ro,qf,Oe,Ke,Fd,Fl,s0,Il,kl,Dl,Pl,w6,x6,_6,ON,mC,Ve,m0],styles:[`.transform{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);-o-transform:translate3d(0,0,0);will-change:transform;-webkit-transition:transform .2s!important;-moz-transition:transform .2s!important;-ms-transition:transform .2s!important;-o-transition:transform .2s!important;will-change:transition}.transform-left{-webkit-transform:translate3d(-120%,0,0);-moz-transform:translate3d(-120%,0,0);-ms-transform:translate3d(-120%,0,0);-o-transform:translate3d(-120%,0,0);will-change:transform}
/*# sourceMappingURL=d-order-list.style-KMNIPNE6.css.map */
`],encapsulation:2,changeDetection:0});let i=e;return i})();var yie=["balancePopUpContent"],Cie=["customerStatusPopUpContent"],bie=["p4"],Sie=["popoverMenu"],UN=(()=>{let e=class e{constructor(){this.isMobile=!0,this.userActivityEmitter=new lt,this.userDetailsEmitter=new lt,this.agreementEmitter=new lt,this.marketData=ee(Al),this.portfolioService=ee(p0),this.moneyService=ee(_s),this.marketDataStatusService=ee(XM),this.accountService=ee(Er),this.authService=ee(Vo),this.settingFacadeService=ee(xs),this.router=ee($n),this.pwaService=ee(i0),this.userService=ee(Ml),this.sidePanelServiceService=ee(Tr),this.notificationService=ee(pi),this.timeService=ee(n0),this.optionService=ee(m6),this.lsService=ee(Cs),this.orderStore=ee(Rl),this.CustomerStatusType=u6,this.CustomerStatus=pe(void 0),this.updateCustomerStatus=n=>this.CustomerStatus.update(()=>dt(Se({},n),{statusExtra:d6[n.status]})),this.AccessToCustomerStatus$=cd({userChecked:this.userService.userChecked$}).pipe(Di(({userChecked:n})=>n&&this.authService.hasClaim(Xc.OptionSell))),this.refreshing=!1,this.toggleState="",this.isActive=!1,this.SWIPE_ACTION={UP:"swipeup",DOWN:"swipedown"},this.logoutModalIsVisible=!1,this.isSigningOut=!1,this.lastIndexValue=0,this.percentVariation=0,this.indexChanges=0,this.indexLoading=!1,this.hamvaznLastIndexValue=0,this.hamvaznPercentVariation=0,this.hamvaznIndexChanges=0,this.lastIndexUpdatedToday=!1,this.spinExit=!1,this.subs=[],this.showBourseCode=!1,Ce(this.AccessToCustomerStatus$.pipe(Jt(()=>this.optionService.getCustomerStatus().pipe(Je(this.updateCustomerStatus))),Jt(()=>u2(3e4).pipe(dd(this.orderStore.tradeLastUpdateTime$),Be(([,n])=>Math.round((Date.now()-n)/1e3)),gt(n=>n<=30),Jt(()=>this.optionService.getCustomerStatus().pipe(Je(this.updateCustomerStatus))),Pi(()=>ld))))),Ce(this.AccessToCustomerStatus$.pipe(Jt(()=>this.lsService.subscribeToLs(qc.OptionCustomerStatus)),Be(({val:n})=>JSON.parse(n)),Je(this.updateCustomerStatus)))}get accountBalance(){return this.moneyService.accountBalance}get userName(){return this.accountService?.userAccountInfo?.value?.customerTitle}get blockedBalance(){return this.moneyService.blockedBalance}get realBalance(){return this.moneyService.balance}get credit(){return this.moneyService.credit}get avandCredit(){return this.moneyService.avandCredit}get totalAssuranceValue(){return this.moneyService.totalAssuranceValue}get noBalance(){return this.settingFacadeService.getSettings()&&this.settingFacadeService.getSettings().noBalance}get isUserStatusBarToUp(){return this.settingFacadeService.getSettings()&&this.settingFacadeService.getSettings().userStatusBarToUp}get bourseCode(){return this.accountService?.userAccountInfo?.value?.bourseCode}ngOnInit(){this.getIndexAndBalance(),this.subscribeToIndex(),this.marketDataStatusService.closeIndicator$.subscribe(()=>this.closeIndicator())}ngOnDestroy(){this.subs.forEach(n=>n.unsubscribe())}getIndexAndBalance(){this.moneyService.reloadBalance(),this.getTseIndexFromService()}reloadApp(){this.refreshing=!0,setTimeout(()=>{location.reload()},1e3)}getUserInfo(){this.accountService.getUserInfo()}getTseIndexFromService(){this.marketData.getTseIndex().pipe(hs(1),m2(n=>n.pipe(ud(3e3),hs(2)))).subscribe()}subscribeToIndex(){let n=this.marketData.indexes$.subscribe(r=>{r.length!==0&&this.setIndexParameters(r)});this.subs.push(n)}setIndexParameters(n){let r=n.find(s=>s.symbolIsin===Kf.code.TEDPIX);this.lastIndexValue=r.lastIndexValue,this.percentVariation=r.percentVariation,this.indexChanges=r.indexChanges,this.dayOfEvent=new Date(r.dayOfEvent),this.lastIndexUpdatedToday=this.isIndexForToday()}isIndexForToday(){if(!this.dayOfEvent)return!1;let n=new Date;return n.setHours(0,0,0,0),this.dayOfEvent.setHours(0,0,0,0),this.dayOfEvent.toDateString()===n.toDateString()}pan(n){n.additionalEvent==="panup"&&this.openIndicator(),n.additionalEvent==="pandown"&&this.closeIndicator()}indicatorToggle(){this.toggleState===""?this.openIndicator():this.closeIndicator()}openIndicator(){this.toggleState="open",this.marketDataStatusService.changeIndicatorStatus(!0)}closeIndicator(){this.toggleState="",this.marketDataStatusService.changeIndicatorStatus(!1)}openReceiptForFullBalancePopContent(){this.balancePopContent.close(),this.openReceipt()}openReceiptForCustomerStatusPopContent(){this.customerStatusPopContent.close(),this.openReceiptMargin()}openReceipt(){this.sidePanelServiceService.openSidePanelFromRoute({sidePanel:Ee.MoneyReceipt})}openReceiptMargin(){this.sidePanelServiceService.openSidePanelFromRoute({sidePanel:Ee.MoneyReceipt,value:this.calculateMargin()})}calculateMargin(){return Math.abs(this.moneyService.accountBalance-this.CustomerStatus()?.margin).toString()}openPayment(){this.sidePanelServiceService.openSidePanelFromRoute({sidePanel:Ee.Payment})}openReceiptMobile(){this.router.navigateByUrl(`/menu/${Lp.RECEIPT_ROUTE}`),this.closeIndicator()}openPaymentMobile(){this.router.navigateByUrl(`/menu/${ut.PAYMENT_ROUTE}`),this.closeIndicator()}onLogoutEmitter(n){this.logoutModalIsVisible=!1,this.spinExit=n,n&&this.signOut()}signOut(){this.isSigningOut=!0,this.authService.logout()}onSignOutClick(){this.spinExit=!0,this.popoverMenu.close(),this.logoutModalIsVisible=!0}onAccountActivityClick(){this.popoverMenu.close(),this.userActivityEmitter.emit()}openUserDetails(){this.popoverMenu.close(),this.userDetailsEmitter.emit()}openAgreements(){this.popoverMenu.close(),this.agreementEmitter.emit()}loadIndexes(){this.indexLoading=!0;let n=this.marketData.getOtherIndexes().pipe(Je(r=>{this.farabourseIndex=r.find(s=>s.symbolIsin.toLowerCase()===Kf.code.IFX.toLowerCase()),this.hamvaznIndex=r.find(s=>s.symbolIsin.toLowerCase()===Kf.code.Hamvazn.toLowerCase())}),pn(()=>{this.indexLoading=!1})).subscribe();this.subs.push(n)}onIncreaseClick(){this.isMobile&&(this.router.navigateByUrl(`/menu/${Lp.RECEIPT_ROUTE}`),this.closeIndicator())}copyToClipboard(){Qf((this.realBalance??"\u0646\u0627\u0645\u0634\u062E\u0635").toString()),this.notificationService.alert(" \u062F\u0631 \u062D\u0627\u0641\u0638\u0647 \u06A9\u067E\u06CC \u0634\u062F",_t.success)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["ng-component"]],viewQuery:function(r,s){if(r&1&&(bi(yie,5),bi(Cie,5),bi(bie,5),bi(Sie,5)),r&2){let o;Si(o=xi())&&(s.balancePopContent=o.first),Si(o=xi())&&(s.customerStatusPopContent=o.first),Si(o=xi())&&(s.p4=o.first),Si(o=xi())&&(s.popoverMenu=o.first)}},inputs:{isMobile:"isMobile"},outputs:{userActivityEmitter:"userActivityEmitter",userDetailsEmitter:"userDetailsEmitter",agreementEmitter:"agreementEmitter"},decls:0,vars:0,template:function(r,s){},encapsulation:2});let i=e;return i})();var Ic=i=>({"rotate-180":i}),R1=(i,e)=>({"text-success":i,"text-danger":e}),xie=i=>({spin:i});function _ie(i,e){if(i&1&&H(0,"svg-icon",11),i&2){let t=P();F("iconName",t.icons.CircleMedium)}}function wie(i,e){if(i&1&&H(0,"svg-icon",13),i&2){let t=P(),n=ki(2);F("iconName",t.icons.ChevronDown)("ngClass",de(2,Ic,n==null?null:n.isOpen()))}}function Eie(i,e){if(i&1&&H(0,"svg-icon",13),i&2){let t=P(),n=ki(2);F("iconName",t.icons.ChevronUp)("ngClass",de(2,Ic,n==null?null:n.isOpen()))}}function Tie(i,e){if(i&1&&(A(0," ( "),C(1,"span",22),A(2,"\u0648\u0636\u0639\u06CC\u062A \u0645\u0634\u062A\u0642\u0647:"),x(),C(3,"span",23),A(4),x(),A(5,")")),i&2){let t,n,r=P(2);_(3),Nt((t=r.CustomerStatus())==null?null:t.statusExtra.class),_(),ye(" ",(n=r.CustomerStatus())==null?null:n.statusExtra.title," ")}}function Mie(i,e){if(i&1&&H(0,"svg-icon",13),i&2){P();let t=ki(2),n=P();F("iconName",n.icons.ChevronDown)("ngClass",de(2,Ic,t==null?null:t.isOpen()))}}function Aie(i,e){if(i&1&&H(0,"svg-icon",13),i&2){P();let t=ki(2),n=P();F("iconName",n.icons.ChevronUp)("ngClass",de(2,Ic,t==null?null:t.isOpen()))}}function Pie(i,e){if(i&1&&(C(0,"div",14)(1,"div",21,6)(3,"span",16),A(4,"\u0648\u0636\u0639\u06CC\u062A \u062D\u0633\u0627\u0628"),x(),Z(5,Tie,6,3)(6,Mie,1,4,"svg-icon",13)(7,Aie,1,4,"svg-icon",13),x()()),i&2){let t=P(),n=ki(32);_(),F("autoClose","outside")("placement",t.isUserStatusBarToUp?"bottom":"top")("ngbPopover",n),_(4),q(t.CustomerStatus()?5:-1),_(),q(t.isUserStatusBarToUp?6:7)}}function Die(i,e){if(i&1&&(A(0," ( "),C(1,"span",22),A(2,"\u0648\u0636\u0639\u06CC\u062A \u0645\u0634\u062A\u0642\u0647:"),x(),C(3,"span",23),A(4),x(),A(5,")")),i&2){let t,n,r=P(2);_(3),Nt((t=r.CustomerStatus())==null?null:t.statusExtra.class),_(),ye(" ",(n=r.CustomerStatus())==null?null:n.statusExtra.title," ")}}function kie(i,e){if(i&1&&H(0,"svg-icon",13),i&2){P();let t=ki(2),n=P();F("iconName",n.icons.ChevronDown)("ngClass",de(2,Ic,t.isOpen()))}}function Iie(i,e){if(i&1&&H(0,"svg-icon",13),i&2){P();let t=ki(2),n=P();F("iconName",n.icons.ChevronUp)("ngClass",de(2,Ic,t.isOpen()))}}function Fie(i,e){if(i&1&&(C(0,"div",14)(1,"div",21,6)(3,"span",22),A(4,"\u0642\u062F\u0631\u062A \u062E\u0631\u06CC\u062F:"),x(),C(5,"span",24),A(6),fe(7,"number"),fe(8,"positiveNumber"),x(),C(9,"span",25),A(10,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x(),Z(11,Die,6,3)(12,kie,1,4,"svg-icon",13)(13,Iie,1,4,"svg-icon",13),x()()),i&2){let t=P(),n=ki(32);_(),F("autoClose","outside")("placement",t.isUserStatusBarToUp?"bottom":"top")("ngbPopover",n),_(5),ye(" ",t.authService.isLoggedIn()===!0&&t.accountBalance!==void 0?Te(8,8,Te(7,6,t.accountBalance)):"..."," "),_(5),q(t.CustomerStatus()?11:-1),_(),q(t.isUserStatusBarToUp?12:13)}}function Oie(i,e){if(i&1&&(C(0,"span",19),A(1),fe(2,"number"),fe(3,"positiveNumber"),fe(4,"number"),fe(5,"positiveNumber"),x()),i&2){let t=P();F("ngClass",zi(13,R1,t.indexChanges>0||t.percentVariation>0,t.indexChanges<0||t.percentVariation<0)),_(),Ao(" ",Te(3,6,ci(2,3,t.indexChanges,"1.0-0"))," (",Te(5,11,ci(4,8,t.percentVariation,"1.0-2")),"\u066A) ")}}function Lie(i,e){if(i&1&&H(0,"svg-icon",13),i&2){let t=P(),n=ki(16);F("iconName",t.icons.ChevronDown)("ngClass",de(2,Ic,n.isOpen()))}}function Rie(i,e){if(i&1&&H(0,"svg-icon",13),i&2){let t=P(),n=ki(16);F("iconName",t.icons.ChevronUp)("ngClass",de(2,Ic,n.isOpen()))}}function Nie(i,e){if(i&1&&(C(0,"div",26)(1,"span",27),A(2,"\u06A9\u062F \u0628\u0648\u0631\u0633\u06CC:"),x(),C(3,"span",17),A(4),x()()),i&2){let t=P();_(4),ye(" ",t.bourseCode,"")}}function Vie(i,e){if(i&1&&(C(0,"div",29)(1,"span",38),A(2,"\u0627\u0639\u062A\u0628\u0627\u0631 \u0622\u0648\u0646\u062F:"),x(),C(3,"div")(4,"span",31),A(5),fe(6,"number"),fe(7,"positiveNumber"),x(),C(8,"span",32),A(9,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()()),i&2){let t=P(2);_(5),ye(" ",t.authService.isLoggedIn()===!0&&t.avandCredit!==void 0?Te(7,3,Te(6,1,t.avandCredit)):"...","")}}function Bie(i,e){if(i&1&&(C(0,"div",29)(1,"span",27),A(2,"\u0627\u0639\u062A\u0628\u0627\u0631:"),x(),C(3,"div")(4,"span",31),A(5),fe(6,"number"),fe(7,"positiveNumber"),x(),C(8,"span",32),A(9,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()()),i&2){let t=P(2);_(5),ye(" ",t.authService.isLoggedIn()===!0&&t.credit!==void 0?Te(7,3,Te(6,1,t.credit)):"...","")}}function Gie(i,e){if(i&1&&(C(0,"div",29)(1,"span",39),A(2,"\u0627\u0631\u0632\u0634 \u062A\u0636\u0645\u06CC\u0646 \u0627\u0639\u062A\u0628\u0627\u0631\u06CC:"),x(),C(3,"div",40)(4,"span",31),A(5),fe(6,"number"),fe(7,"positiveNumber"),x(),C(8,"span",32),A(9,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()()),i&2){let t=P(2);_(5),ye(" ",t.authService.isLoggedIn()===!0&&t.totalAssuranceValue!==void 0?Te(7,3,Te(6,1,t.totalAssuranceValue)):"...","")}}function Uie(i,e){if(i&1&&(C(0,"div",36)(1,"div",41)(2,"span",42),A(3,"\u0648\u062C\u0647 \u062A\u0636\u0645\u06CC\u0646 \u0645\u0634\u062A\u0642\u0647:"),x(),C(4,"div",43)(5,"span",44),A(6),fe(7,"number"),x(),C(8,"span",32),A(9,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()(),C(10,"div",41)(11,"span",45),A(12,"\u0648\u0636\u0639\u06CC\u062A \u0645\u0634\u062A\u0642\u0647:"),x(),C(13,"span",44),A(14),x()(),C(15,"div",41)(16,"span",30),A(17,"\u0642\u062F\u0631\u062A \u062E\u0631\u06CC\u062F \u0645\u0634\u062A\u0642\u0647:"),x(),C(18,"div",46)(19,"span",17),A(20),fe(21,"number"),fe(22,"positiveNumber"),x(),C(23,"span",32),A(24,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()()()),i&2){let t,n,r,s=P(2);_(6),ye(" ",ci(7,5,(t=s.CustomerStatus())==null?null:t.margin,"1.0-0"),""),_(7),Nt((n=s.CustomerStatus())==null?null:n.statusExtra.tooltipClass),_(),ye(" ",(r=s.CustomerStatus())==null?null:r.statusExtra.title," "),_(6),ye(" ",s.authService.isLoggedIn()===!0&&s.accountBalance!==void 0?Te(22,10,Te(21,8,s.accountBalance-s.credit-s.avandCredit)):"...","")}}function Hie(i,e){if(i&1){let t=ne();C(0,"div",47),V("click",function(){z(t);let r=P(2);return W(r.openReceiptForFullBalancePopContent())}),C(1,"div")(2,"div",48)(3,"div",49)(4,"div",20),H(5,"svg-icon",50),C(6,"span",18),A(7,"\u0648\u0627\u0631\u06CC\u0632 \u0648\u062C\u0647"),x()(),H(8,"svg-icon",51),x()()()()}if(i&2){let t=P(2);_(5),F("iconName",t.icons.Settle),_(3),F("iconName",t.icons.ChevronLeft)}}function zie(i,e){if(i&1){let t=ne();C(0,"div",28)(1,"div",29)(2,"span",30),A(3,"\u0642\u062F\u0631\u062A \u062E\u0631\u06CC\u062F:"),x(),C(4,"div")(5,"span",31),A(6),fe(7,"number"),fe(8,"positiveNumber"),x(),C(9,"span",32),A(10,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()(),C(11,"div",33),V("click",function(){z(t);let r=P();return W(r.copyToClipboard())}),C(12,"span",27),A(13,"\u0645\u0627\u0646\u062F\u0647:"),x(),C(14,"div")(15,"span",31),A(16),fe(17,"number"),fe(18,"positiveNumber"),x(),C(19,"span",32),A(20,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()(),Z(21,Vie,10,5,"div",29)(22,Bie,10,5,"div",29)(23,Gie,10,5,"div",29),C(24,"div",29)(25,"span",27),A(26,"\u0628\u0644\u0648\u06A9\u0647 \u0634\u062F\u0647:"),x(),C(27,"div")(28,"span",34),A(29),fe(30,"number"),fe(31,"positiveNumber"),x(),C(32,"span",35),A(33,"\u0631\u06CC\u0627\u0644\u0621\u0621"),x()()(),Z(34,Uie,25,12,"div",36)(35,Hie,9,2,"div",37),x()}if(i&2){let t=P();_(6),ye(" ",t.authService.isLoggedIn()===!0&&t.accountBalance!==void 0?Te(8,10,Te(7,8,t.accountBalance)):"...",""),_(10),ye(" ",t.authService.isLoggedIn()===!0&&t.realBalance!==void 0?Te(18,14,Te(17,12,t.realBalance)):"...",""),_(5),q(t.avandCredit>0?21:-1),_(),q(t.credit?22:-1),_(),q(t.totalAssuranceValue?23:-1),_(6),ye(" ",t.authService.isLoggedIn()===!0&&t.blockedBalance!==void 0?Te(31,18,Te(30,16,t.blockedBalance)):"...",""),_(5),q(t.CustomerStatus()?34:-1),_(),q(t.userService.isGuestUser?-1:35)}}function Wie(i,e){if(i&1&&(C(0,"span"),A(1),fe(2,"async"),x()),i&2){let t,n=P(2);_(),Re((t=Te(2,1,n.accountService==null?null:n.accountService.userAccountInfo$))==null?null:t.bourseCode)}}function $ie(i,e){i&1&&(C(0,"div",54)(1,"div",70),A(2,"*"),x(),C(3,"div",70),A(4,"*"),x(),C(5,"div",70),A(6,"*"),x(),C(7,"div",70),A(8,"*"),x(),C(9,"div",70),A(10,"*"),x()())}function Kie(i,e){if(i&1){let t=ne();C(0,"svg-icon",71),V("click",function(){z(t);let r=P(2);return r.showBourseCode=!r.showBourseCode,W(r.getUserInfo())}),x()}if(i&2){let t=P(2);F("iconName",t.icons.EyeOff)}}function jie(i,e){if(i&1){let t=ne();C(0,"svg-icon",71),V("click",function(){z(t);let r=P(2);return r.showBourseCode=!r.showBourseCode,W(r.getUserInfo())}),x()}if(i&2){let t=P(2);F("iconName",t.icons.Eye)}}function Yie(i,e){if(i&1&&H(0,"svg-icon",56),i&2){let t=P(2);F("iconName",t.icons.Loading)}}function qie(i,e){if(i&1&&H(0,"svg-icon",61),i&2){let t=P(2);F("iconName",t.icons.CircleMedium)}}function Xie(i,e){i&1&&(C(0,"span",63),A(1,"\u0646\u0633\u062E\u0647 \u062C\u062F\u06CC\u062F"),x())}function Zie(i,e){if(i&1&&H(0,"svg-icon",65),i&2){let t=P(2);F("iconName",t.icons.CircleMedium)}}function Qie(i,e){if(i&1&&H(0,"svg-icon",68),i&2){let t=P(2);F("iconName",t.icons.Logout)}}function Jie(i,e){if(i&1&&H(0,"svg-icon",69),i&2){let t=P(2);F("iconName",t.icons.Loading)}}function ene(i,e){if(i&1){let t=ne();C(0,"div",52)(1,"div",53)(2,"span",16),A(3,"\u06A9\u062F \u0628\u0648\u0631\u0633\u06CC: "),x(),Z(4,Wie,3,3,"span")(5,$ie,11,0,"div",54),x(),Z(6,Kie,1,1,"svg-icon",55),fe(7,"async"),fe(8,"async"),Z(9,jie,1,1,"svg-icon",55)(10,Yie,1,1,"svg-icon",56),x(),C(11,"div",57),V("click",function(){z(t);let r=P();return W(r.openUserDetails())}),H(12,"svg-icon",58),A(13," \u0648\u06CC\u0631\u0627\u06CC\u0634 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC "),x(),C(14,"div",57),V("click",function(){z(t);let r=P();return W(r.openUserDetails())}),H(15,"svg-icon",58),A(16," \u062A\u063A\u06CC\u06CC\u0631 \u0631\u0645\u0632 \u0639\u0628\u0648\u0631 "),x(),C(17,"div",57),V("click",function(){z(t);let r=P();return W(r.openAgreements())}),H(18,"svg-icon",58),A(19," \u062A\u0648\u0627\u0641\u0642\u0646\u0627\u0645\u0647\u200C\u0647\u0627 \u0648 \u0642\u0631\u0627\u0631\u062F\u0627\u062F\u0647\u0627 "),x(),C(20,"div",59),V("tap",function(){z(t);let r=P();return W(r.reloadApp())}),C(21,"div",60),Z(22,qie,1,1,"svg-icon",61),fe(23,"async"),H(24,"span")(25,"svg-icon",62),x(),A(26," \u0631\u0627\u0647\u200C\u0627\u0646\u062F\u0627\u0632\u06CC \u0645\u062C\u062F\u062F "),Z(27,Xie,2,0,"span",63),fe(28,"async"),x(),H(29,"div",64),C(30,"div",57),V("click",function(){z(t);let r=P();return W(r.onAccountActivityClick())}),C(31,"div",60),Z(32,Zie,1,1,"svg-icon",65),fe(33,"async"),H(34,"span")(35,"svg-icon",66),x(),A(36," \u062F\u0633\u062A\u06AF\u0627\u0647\u200C\u0647\u0627\u06CC \u0641\u0639\u0627\u0644 "),x(),C(37,"div",67),V("click",function(){z(t);let r=P();return W(r.onSignOutClick())}),Z(38,Qie,1,1,"svg-icon",68)(39,Jie,1,1,"svg-icon",69),A(40," \u062E\u0631\u0648\u062C "),x()}if(i&2){let t,n=P();_(4),q(n.showBourseCode?4:5),_(2),q(n.showBourseCode?n.showBourseCode&&((t=Te(7,12,n.accountService==null?null:n.accountService.userAccountInfo$))!=null&&t.bourseCode)?9:n.showBourseCode&&!((t=Te(8,14,n.accountService==null?null:n.accountService.userAccountInfo$))!=null&&t.bourseCode)?10:-1:6),_(6),F("iconName",n.icons.AccountEdit),_(3),F("iconName",n.icons.Lock),_(3),F("iconName",n.icons.Contract),_(4),q(Te(23,16,n.pwaService.newVersionAvailable$)?22:-1),_(3),F("iconName",n.icons.Sync)("ngClass",de(22,xie,n.refreshing)),_(2),q(Te(28,18,n.pwaService.newVersionAvailable$)?27:-1),_(5),q(Te(33,20,n.accountService.accountActivitySeen$)===!1?32:-1),_(3),F("iconName",n.icons.Device),_(3),q(n.spinExit?n.spinExit?39:-1:38)}}function tne(i,e){if(i&1&&(C(0,"div",73),H(1,"svg-icon",74),x()),i&2){let t=P(2);_(),F("iconName",t.icons.Loading)}}function ine(i,e){if(i&1&&(C(0,"span",76),A(1),fe(2,"number"),fe(3,"positiveNumber"),fe(4,"number"),fe(5,"positiveNumber"),x()),i&2){let t=P(3);F("ngClass",zi(13,R1,(t.farabourseIndex==null?null:t.farabourseIndex.indexChanges)>0,(t.farabourseIndex==null?null:t.farabourseIndex.indexChanges)<0)),_(),Ao(" ",Te(3,6,ci(2,3,t.farabourseIndex==null?null:t.farabourseIndex.indexChanges,"1.0-0"))," (",Te(5,11,ci(4,8,t.farabourseIndex==null?null:t.farabourseIndex.percentVariation,"1.0-2")),"\u066A) ")}}function nne(i,e){if(i&1&&(C(0,"span",76),A(1),fe(2,"number"),fe(3,"positiveNumber"),fe(4,"number"),fe(5,"positiveNumber"),x()),i&2){let t=P(3);F("ngClass",zi(13,R1,(t.hamvaznIndex==null?null:t.hamvaznIndex.indexChanges)>0,(t.hamvaznIndex==null?null:t.hamvaznIndex.indexChanges)<0)),_(),Ao(" ",Te(3,6,ci(2,3,t.hamvaznIndex==null?null:t.hamvaznIndex.indexChanges,"1.0-0"))," (",Te(5,11,ci(4,8,t.hamvaznIndex==null?null:t.hamvaznIndex.percentVariation,"1.0-2")),"\u066A) ")}}function rne(i,e){if(i&1&&(C(0,"div")(1,"div",75)(2,"span",27),A(3,"\u0634\u0627\u062E\u0635 \u0641\u0631\u0627\u0628\u0648\u0631\u0633:"),x(),C(4,"span",17),A(5),fe(6,"number"),fe(7,"positiveNumber"),Z(8,ine,6,16,"span",76),x()(),C(9,"div",77)(10,"span",27),A(11,"\u0634\u0627\u062E\u0635 \u0647\u0645\u200C\u0648\u0632\u0646:"),x(),C(12,"span",17),A(13),fe(14,"number"),fe(15,"positiveNumber"),Z(16,nne,6,16,"span",76),x()()()),i&2){let t=P(2);_(5),ye(" ",Te(7,7,ci(6,4,t.farabourseIndex==null?null:t.farabourseIndex.lastIndexValue,"1.0-0"))," "),_(3),q(t.lastIndexUpdatedToday?8:-1),_(5),ye(" ",Te(15,12,ci(14,9,t.hamvaznIndex==null?null:t.hamvaznIndex.lastIndexValue,"1.0-0"))," "),_(3),q(t.lastIndexUpdatedToday?16:-1)}}function sne(i,e){if(i&1&&(C(0,"div",72),Z(1,tne,2,1,"div",73)(2,rne,17,14,"div"),x()),i&2){let t=P();_(),q(t.indexLoading?1:-1),_(),q(t.indexLoading?-1:2)}}function one(i,e){if(i&1){let t=ne();C(0,"logout-modal",78),V("logoutEmitter",function(r){z(t);let s=P();return W(s.onLogoutEmitter(r))}),x()}}var HN=(()=>{let e=class e extends UN{constructor(){super(...arguments),this.icons=Fe}};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=Mo(e)))(s||e)}})(),e.\u0275cmp=ge({type:e,selectors:[["market-data"]],features:[Cl],decls:38,vars:24,consts:[["popoverMenu","ngbPopover"],["popOverIndex","ngbPopover"],["BourseCodePopContent",""],["balancePopOver",""],["menuPopContent",""],["indexPopContent",""],["balancePopUpContent","ngbPopover"],[1,"bottombar","d-flex","justify-content-between","align-items-center","text-body","text-opacity-75","p-2","rounded"],["data-cy","market-data-pop-over","popoverClass","custom-popover bg-principal-3x-dark","container","body",1,"d-flex","align-items-center","cup",3,"autoClose","ngbPopover","placement"],[1,"me-2","fw-bold","user-select-none","d-flex","align-items-center"],[1,"position-relative","me-1","d-flex","align-items-center"],["width","15","height","15",1,"position-absolute","text-warning",2,"right","-6px","top","-10px",3,"iconName"],["width","24","height","24",1,"",3,"iconName"],["width","18","height","18",1,"popover-chevron","ms-1",3,"iconName","ngClass"],[1,"d-flex","align-items-center","cup","user-select-none"],["popoverClass","popover-body-p0 cud",1,"d-flex","align-items-center",3,"shown","autoClose","placement","ngbPopover"],[1,"me-1"],["dir","ltr"],[1,"text-body"],["dir","ltr",3,"ngClass"],[1,"d-flex","align-items-center"],["popoverClass","popover-body-p0 cud",1,"d-flex","align-items-center",3,"autoClose","placement","ngbPopover"],["id","market-data-span-1",1,"me-1"],["data-cy","account-balance-value","dir","ltr","id","market-data-span-2"],["data-cy","account-balance-value","dir","ltr","id","market-data-span-2",1,"text-body"],["id","market-data-span-3",1,"opacity-5","mx-1"],[1,"mb-1"],[1,"d-inline-block","text-muted","me-2",2,"min-width","60px"],[1,"p-3"],[1,"mb-1","d-flex","justify-content-between"],[1,"text-muted","d-inline-block",2,"min-width","60px"],["dir","ltr",1,"me-1"],[1,"opacity-5"],[1,"cup","d-flex","justify-content-between","mb-1",3,"click"],["dir","ltr",1,"text-warning","ms-auto","me-1"],[1,"opacity-5","text-warning"],[1,"d-flex","flex-column","gap-1","flex-grow","bg-body-tertiary","rounded","p-2","gap-1","mt-2"],[1,"bg-principal","bg-principal-3x-dark",2,"min-width","150px"],[1,"text-muted","d-inline-block","me-2",2,"min-width","60px"],[1,"d-inline-block","text-muted","me-2",2,"min-width","112px"],[1,"text-nowrap"],[1,"d-flex","justify-content-between","gap-3"],[1,"d-inline-block","text-muted","text-start",2,"min-width","60px"],[1,"d-flex","gap-1"],["dir","ltr",1,"text-end"],[1,"d-inline-block","text-muted",2,"min-width","60px"],[1,"d-flex","gap-1","text-end"],[1,"bg-principal","bg-principal-3x-dark",2,"min-width","150px",3,"click"],[1,"mt-2","bg-emphasis","bg-opacity-05","bg-opacity-hover","rounded","px-2"],[1,"d-flex","justify-content-between","align-items-center","cup"],["width","24","height","24",1,"line-height-none","py-2","text-success","me-1",3,"iconName"],["width","18","height","18",1,"text-body-tertiary",3,"iconName"],[1,"d-flex","align-items-center","px-3","py-2","mt-2","text-secondary"],["id","bourseCode",1,"cud","d-flex","align-items-center"],[1,"ms-2","d-flex","gap-2",2,"letter-spacing","-5px"],["width","20","height","20",1,"icon","text-muted","ms-auto","cup",3,"iconName"],["width","20","height","20",1,"icon","text-muted","ms-auto","spin","pe-none",3,"iconName"],[1,"px-3","py-2","dropdown-item","cup","d-flex","align-items-center","bg-principal","bg-principal-3x-dark","bg-principal-hover",3,"click"],["width","20","height","20",1,"line-height-none","text-secondary","me-2",3,"iconName"],[1,"px-3","py-2","dropdown-item","cup","d-flex","align-items-center","bg-principal","bg-principal-3x-dark","bg-principal-hover",3,"tap"],[1,"position-relative","me-2"],["width","15","height","15",1,"position-absolute","text-warning",2,"right","-9px","top","-5px",3,"iconName"],["width","20","height","20",1,"line-height-none","text-secondary",3,"iconName","ngClass"],[1,"ms-auto","small","text-warning","fw-bold"],[1,"dropdown-divider"],["width","15","height","15",1,"position-absolute","text-warning",2,"right","-6px","top","-11px",3,"iconName"],["width","20","height","20",1,"line-height-none","text-secondary",3,"iconName"],["data-cy","sign-out",1,"px-3","py-2","mb-2","dropdown-item","cup","text-danger","d-flex","align-items-center","bg-principal","bg-principal-3x-dark","bg-principal-hover",3,"click"],["width","20","height","20",1,"text-persimmon","me-2",3,"iconName"],["width","24","height","24",1,"text-persimmon","me-2","spin",3,"iconName"],[1,"fs-6"],["width","20","height","20",1,"icon","text-muted","ms-auto","cup",3,"click","iconName"],[1,"p-3","user-select-none"],[1,"px-3"],["width","24","height","24",3,"iconName"],[1,"d-flex","justify-content-between","my-1"],[3,"ngClass"],[1,"d-flex","justify-content-between"],[3,"logoutEmitter"]],template:function(r,s){if(r&1){let o=ne();C(0,"div",7)(1,"div",8,0)(3,"div",9)(4,"div",10),Z(5,_ie,1,1,"svg-icon",11),fe(6,"async"),fe(7,"async"),H(8,"svg-icon",12),x(),A(9),Z(10,wie,1,4,"svg-icon",13)(11,Eie,1,4,"svg-icon",13),x()(),Z(12,Pie,8,5,"div",14)(13,Fie,14,10,"div",14),C(14,"div",14)(15,"div",15,1),V("shown",function(){return z(o),W(s.loadIndexes())}),C(17,"span",16),A(18,"\u0634\u0627\u062E\u0635 \u0628\u0648\u0631\u0633:"),x(),C(19,"span",17)(20,"span",18),A(21),fe(22,"number"),fe(23,"positiveNumber"),x(),Z(24,Oie,6,16,"span",19),x(),Z(25,Lie,1,4,"svg-icon",13)(26,Rie,1,4,"svg-icon",13),x()(),C(27,"div",20),H(28,"app-clock"),x()(),Z(29,Nie,5,1,"ng-template",null,2,Wi)(31,zie,36,20,"ng-template",null,3,Wi)(33,ene,41,24,"ng-template",null,4,Wi)(35,sne,3,2,"ng-template",null,5,Wi)(37,one,1,0,"logout-modal")}if(r&2){let o=ki(34),a=ki(36);_(),F("autoClose","outside")("ngbPopover",o)("placement",s.isUserStatusBarToUp?"bottom":"top"),_(4),q(Te(6,15,s.pwaService.newVersionAvailable$)||Te(7,17,s.accountService.accountActivitySeen$)===!1?5:-1),_(3),F("iconName",s.icons.Account),_(),ye(" ",s.userName," "),_(),q(s.isUserStatusBarToUp?10:11),_(2),q(s.noBalance?12:13),_(3),F("autoClose","outside")("placement",s.isUserStatusBarToUp?"bottom":"top")("ngbPopover",a),_(6),Re(Te(23,22,ci(22,19,s.lastIndexValue,"1.0-0"))),_(3),q(s.lastIndexUpdatedToday?24:-1),_(),q(s.isUserStatusBarToUp?25:26),_(12),q(s.logoutModalIsVisible?37:-1)}},dependencies:[Oe,Ke,Mf,yi,Dd,Fd,ys,kd,Ve],styles:[`.popover-body-p0 .popover-body{padding:0!important}
/*# sourceMappingURL=d-market-data.style-PJX3YAWX.css.map */
`],encapsulation:2});let i=e;return i})();var ane=i=>({"text-primary":i});function lne(i,e){if(i&1&&H(0,"svg-icon",3),i&2){let t=P();F("iconName",t.icons.Sort)}}function cne(i,e){if(i&1&&H(0,"svg-icon",3),i&2){let t=P();F("iconName",t.icons.Blank)}}function une(i,e){if(i&1){let t=ne();C(0,"lib-search-panel",5),V("openNoteManagement",function(r){z(t);let s=P();return W(s.onOpenNoteManagement(r))})("openConditionalTools",function(r){z(t);let s=P();return W(s.onOpenConditionalTools(r))})("selectSymbol",function(r){z(t);let s=P();return W(s.onSelectSymbol(r))})("marketWatchAddToCategorySelector",function(r){z(t);let s=P();return W(s.openWatches(r))}),A(1,` class="flex-grow-1 overflow-hidden">
`),x()}i&2&&F("isMobile",!1)}var zN=(()=>{let e=class e{get selectedSector(){return this.searchService.selectedSector()}set selectedSector(n){this.searchService.selectedSector.set(n)}get sectorSelected(){return this.selectedSector!=null}get searchInputExists(){return this.lastSearchValue&&this.lastSearchValue.length>0}get sectorStocksFilterActive(){return this.searchService.sectorStocksFilterActive}constructor(n,r){this.layoutService=n,this.searchService=r,this.icons=Fe,this.marketManager=ee(O6),this.marketWatchStoreFacade=ee(I6),this.modalNgService=ee(o0),this.selectSymbol=new lt,this.showSearchPanel=!1,this.lastSearchValue=""}onOpenConditionalTools(n){this.layoutService.openConditionalTools(n)}onOpenNoteManagement(n){this.layoutService.openNoteManagement(n)}onSelectSymbol(n){this.selectSymbol.emit(n)}onSectorStocksFilterActiveClick(){this.searchService.toggleFilterActive()}openWatches(n){this.marketManager.setSymbol(n),this.marketManager.setShowCategoryOverlay(!0);let r=this.modalNgService.open(R6);r.componentInstance.isMobile=!1}};e.\u0275fac=function(r){return new(r||e)(st(ws),st(AA))},e.\u0275cmp=ge({type:e,selectors:[["d-search-management"]],inputs:{showSearchPanel:"showSearchPanel"},outputs:{selectSymbol:"selectSymbol"},decls:7,vars:5,consts:[[1,"d-flex","align-items-center","justify-content-between","py-3","p-2","flex-shrink-0","bg-principal","bg-principal-4x-dark"],[1,"mb-0"],[3,"tap","ngClass"],["width","24","height","24",1,"text-muted",3,"iconName"],["class","overflow-hidden",3,"isMobile","openNoteManagement","openConditionalTools","selectSymbol","marketWatchAddToCategorySelector",4,"ngIf"],[1,"overflow-hidden",3,"openNoteManagement","openConditionalTools","selectSymbol","marketWatchAddToCategorySelector","isMobile"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"h6",1),A(2,"\u062C\u0633\u062A\u062C\u0648"),x(),C(3,"span",2),V("tap",function(){return s.onSectorStocksFilterActiveClick()}),Z(4,lne,1,1,"svg-icon",3)(5,cne,1,1,"svg-icon",3),x()(),Z(6,une,2,1,"lib-search-panel",4)),r&2&&(_(3),F("ngClass",de(3,ane,s.sectorStocksFilterActive)),_(),q(s.sectorSelected&&!s.searchInputExists?4:s.sectorSelected&&!s.searchInputExists?-1:5),_(2),F("ngIf",s.showSearchPanel))},dependencies:[Oe,Ke,I2,V6,Ve],styles:[`d-search-management[_ngcontent-%COMP%]   lib-search-panel[_ngcontent-%COMP%]{overflow:hidden}d-search-management[_ngcontent-%COMP%]   lib-search-panel[_ngcontent-%COMP%]   .search-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column}d-search-management[_ngcontent-%COMP%]   lib-search-panel[_ngcontent-%COMP%]   .search-panel[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]{background-color:transparent!important}d-search-management[_ngcontent-%COMP%]   lib-search-panel[_ngcontent-%COMP%]   .search-panel[_ngcontent-%COMP%]   .search-category-list[_ngcontent-%COMP%]{z-index:10;top:0}d-search-management[_ngcontent-%COMP%]   lib-search-panel[_ngcontent-%COMP%]   .search-panel[_ngcontent-%COMP%]   .sector-header[_ngcontent-%COMP%] ~ .search-category-list[_ngcontent-%COMP%]{top:35px}d-search-management[_ngcontent-%COMP%]   lib-search-panel[_ngcontent-%COMP%]   .search-panel.sector-selected[_ngcontent-%COMP%]   .sector-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;margin-top:0!important}d-search-management[_ngcontent-%COMP%]   lib-search-panel[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .mdi[_ngcontent-%COMP%]{top:10px}d-search-management[_ngcontent-%COMP%]   lib-search-panel[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]{overflow:auto}d-search-management[_ngcontent-%COMP%]   lib-search-panel[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .mdi[_ngcontent-%COMP%]{color:var(--bs-primary)!important}
/*# sourceMappingURL=d-search-management.style-HN5KHX4D.css.map */`]});let i=e;return i})();var hne=(i,e)=>e.id,pne=i=>({transform:i}),mne=i=>({active:i});function gne(i,e){if(i&1){let t=ne();C(0,"div",6),H(1,"symbol-header",8),C(2,"div",9)(3,"button",10),V("click",function(){z(t);let r=P().$implicit,s=P(2);return W(s.onBuyBtnClicked(r))}),A(4," \u062E\u0631\u06CC\u062F "),x(),C(5,"button",11),V("click",function(){z(t);let r=P().$implicit,s=P(2);return W(s.onSellBtnClicked(r))}),A(6," \u0641\u0631\u0648\u0634 "),x()(),C(7,"lib-market-depth",12),V("orderFromDesktopMarketDepthInsidePopupEventEmitter",function(r){z(t);let s=P().$implicit,o=P(2);return W(o.orderFromMarketDepth(s,r))}),x()()}if(i&2){let t=P().$implicit,n=P(2);_(),F("activeStockIsin",t.isin)("isModal",!0),_(2),F("disabled",!t.canBuy||t.showOrderForm),_(2),F("disabled",!t.canSell||t.showOrderForm),_(2),F("isModal",!0)("marketDataInput",n.getMarketDataForIsin(t.isin))("symbolDataInput",n.symbolService.symbolByIsin[t.isin])("activeSymbolIsin",t.isin)}}function fne(i,e){if(i&1){let t=ne();C(0,"span",13)(1,"svg-icon",15),V("click",function(){z(t);let r=P(2).$implicit,s=P(2);return W(s.onVerticalCollapseClicked(r))}),x()()}if(i&2){let t=P(2).$implicit;_(),F("iconName",t.hideMarketDepth?"chevron-right":"chevron-left")}}function vne(i,e){if(i&1){let t=ne();C(0,"div",7),Z(1,fne,2,1,"span",13),C(2,"order-form-container",14),V("isCautionAgreementAppliedEmitter",function(r){z(t);let s=P().$implicit,o=P(2);return W(o.showCautionEventReceived(s,r))})("isCautionEmitter",function(r){z(t);let s=P().$implicit,o=P(2);return W(o.isCautionEventReceived(s,r))})("closeFormEventEmitter",function(r){z(t);let s=P().$implicit,o=P(2);return W(o.closeFormEventReceived(s,r))})("saveEditEventEmitter",function(r){z(t);let s=P().$implicit,o=P(2);return W(o.saveEditClicked(s.id,r))})("cancelEdit",function(){z(t);let r=P().$implicit,s=P(2);return W(s.cancelEdit(r.id))})("cdkDragDisable",function(r){z(t);let s=P().$index,o=P(2);return W(o.updateCdkDragState(s,r))}),x()()}if(i&2){let t=P().$implicit;_(),q(t.isCaution?-1:1),_(),F("orderInput",t.orderInputData)("popupMode",!0)}}function yne(i,e){if(i&1){let t=ne();C(0,"div",1),V("click",function(){let r=z(t).$implicit,s=P(2);return W(s.onPopupClick(r))}),C(1,"span",2),V("click",function(){let r=z(t).$implicit,s=P(2);return W(s.close(r.id))}),H(2,"svg-icon",3),x(),C(3,"div",4)(4,"div",5),Z(5,gne,8,8,"div",6)(6,vne,3,3,"div",7),x()()()}if(i&2){let t,n=e.$implicit,r=e.$index,s=P(2);F("id",n.id)("ngStyle",de(7,pne,"translate("+n.x+"px,"+n.y+"px)"))("cdkDragDisabled",(t=s.DragDisabled())==null?null:t[r])("ngClass",de(9,mne,n.isSelected)),_(2),F("iconName",s.icons.CloseBox),_(3),q(n.hideMarketDepth?-1:5),_(),q(n.showOrderForm?6:-1)}}function Cne(i,e){if(i&1&&St(0,yne,7,11,"div",0,hne),i&2){let t=P();xt(t.popups)}}var WN=(()=>{let e=class e{updateCdkDragState(n,r){this.DragDisabled.update(s=>(s||(s=new Map),s[n]=r,Se({},s)))}get popups(){return this.popupOrderService.popups}constructor(n,r,s,o){this.popupOrderService=n,this.marketDataService=r,this.symbolService=s,this.ls=o,this.icons=Fe,this.DragDisabled=pe(void 0),this.popupOrderService.changeExistingOrderPopUpFieldsSubject.subscribe({next:a=>{this.popups.forEach(l=>{l.isin===a.data.isin&&(this.orderFromDesktopMarketDepthInsidePopup=a.data)})}}),this.popupOrderService.popupArrayChanged.subscribe(()=>{this.marketDataMap?.forEach(a=>a.destroy()),this.marketDataMap=null,this.marketDataMap=new Map,this.popups.forEach(a=>{if(!this.marketDataMap.keys()[a.isin]){let l=new ZM(this.marketDataService,this.ls,a.isin);l.initFlow(),this.marketDataMap.set(a.isin,l)}})})}getMarketDataForIsin(n){return this.marketDataMap?.get(n)?.marketData.value??null}close(n){this.popupOrderService.closePopup(n)}onPopupClick(n){this.popupOrderService.select(n)}onBuyBtnClicked(n){n.canBuy&&this.popupOrderService.makeOrder(yn.BUY,n)}onSellBtnClicked(n){n.canSell&&this.popupOrderService.makeOrder(yn.SELL,n)}orderFromMarketDepth(n,r){n.showOrderForm?this.orderFromDesktopMarketDepthInsidePopup=r:this.popupOrderService.makeOrChangeExistingOrder(r.side,n,r.quantity,r.price)}onVerticalCollapseClicked(n){n.hideMarketDepth=!n.hideMarketDepth}closeFormEventReceived(n,r){this.close(n.id)}showCautionEventReceived(n,r){r?n.isCaution=!1:this.close(n.id)}isCautionEventReceived(n,r){n.isCaution=r}saveEditClicked(n,r){r&&this.close(n)}cancelEdit(n){this.close(n)}};e.\u0275fac=function(r){return new(r||e)(st(Vl),st(Al),st(Ll),st(Cs))},e.\u0275cmp=ge({type:e,selectors:[["popup-order"]],decls:1,vars:1,consts:[["cdkDrag","",1,"order-box","rounded",3,"id","ngStyle","cdkDragDisabled","ngClass"],["cdkDrag","",1,"order-box","rounded",3,"click","id","ngStyle","cdkDragDisabled","ngClass"],["data-cy","popup-close-btn",1,"position-absolute",2,"left","-12px","top","-11px","width","24px","height","24px",3,"click"],["width","24","height","24",1,"position-relative","cup","text-body-secondary","z-1","bg-principal","rounded",2,"position","relative","top","2px","right","2px",3,"iconName"],["cdkDragHandle","",1,"bg-principal","rounded","market-data-holder","w-100"],[1,"d-flex"],[1,"d-flex","flex-column","market-data","position-relative","w-100","p-3","rounded"],["data-cy","popup-order-form",1,"p-2",2,"min-width","270px"],[1,"flex-shrink-0",3,"activeStockIsin","isModal"],[1,"d-flex","gap-2","mt-2","flex-shrink-0"],["title","\u06A9\u0644\u06CC\u062F +",1,"btn","btn-sm","btn-outline-success","flex-grow-1",3,"click","disabled"],["title","\u06A9\u0644\u06CC\u062F -",1,"btn","btn-sm","btn-outline-danger","flex-grow-1","mt-0",3,"click","disabled"],[1,"mt-4","px-2",3,"orderFromDesktopMarketDepthInsidePopupEventEmitter","isModal","marketDataInput","symbolDataInput","activeSymbolIsin"],[1,"vertical-collapse","text-light","bg-secondary"],[3,"isCautionAgreementAppliedEmitter","isCautionEmitter","closeFormEventEmitter","saveEditEventEmitter","cancelEdit","cdkDragDisable","orderInput","popupMode"],["width","18","height","18",1,"position-relative",2,"left","3px","top","1px",3,"click","iconName"]],template:function(r,s){r&1&&Z(0,Cne,2,0),r&2&&q(s.popups?0:-1)},dependencies:[Oe,Ke,Sl,mC,b6,C6,B6,Ve],styles:[`.order-box[_ngcontent-%COMP%]{position:absolute;cursor:grab;z-index:100;transition:box-shadow .2s cubic-bezier(0,0,.2,1);box-shadow:0 1rem 3rem #0003!important;border:2px solid transparent}.order-box.active[_ngcontent-%COMP%]{z-index:101!important;box-shadow:0 1rem 3rem #5d9cec40!important;border-color:var(--bs-primary)!important}.order-box[_ngcontent-%COMP%]:active{cursor:grabbing}.order-box[_ngcontent-%COMP%]   .market-data[_ngcontent-%COMP%]{min-width:430px}
/*# sourceMappingURL=popup-order.component-7NMTOK6J.css.map */`]});let i=e;return i})();var N1=i=>({"layout-selector--active":i});function bne(i,e){if(i&1){let t=ne();C(0,"div",8)(1,"div",9),V("click",function(){z(t);let r=P();return W(r.selectLayout(0))}),C(2,"div",10),H(3,"div",11),C(4,"div",12)(5,"div",13),H(6,"span",14)(7,"span",15),x()()()(),C(8,"div",16),V("click",function(){z(t);let r=P();return W(r.selectLayout(1))}),C(9,"div",17),H(10,"div",18),C(11,"div")(12,"div",13),H(13,"span",14)(14,"span",15),x()()()(),C(15,"div",19),V("click",function(){z(t);let r=P();return W(r.selectLayout(2))}),C(16,"div",17)(17,"div",20),H(18,"div",11)(19,"div",12),x(),C(20,"div")(21,"div",13),H(22,"span",14)(23,"span",15),x()()()()()}if(i&2){let t=P();_(),F("ngClass",de(3,N1,t.changeLayout()==="layout1")),_(7),F("ngClass",de(5,N1,t.changeLayout()==="layout2")),_(7),F("ngClass",de(7,N1,t.changeLayout()==="layout3"))}}var $N=(()=>{let e=class e{constructor(n,r,s){this.layoutService=n,this.orderService=r,this.popupOrderService=s,this.stackOrder=Zs.STACK_ORDER,this.tabularOrder=Zs.TABULAR_ORDER,this.router=ee($n),this.activatedRoute=ee(Pf),this.changeLayout=Ce(this.layoutService.changeLayout$),this.fb=ee(Yn),this.isTabularOrder=pe(this.layoutService.baseLayout===Zs.TABULAR_ORDER),this.destroyRef=ee(xr)}handleTabularOrderChange(n){let s=n.target.checked;this.orderService.showOrderFormSubject.next(!1),this.popupOrderService.closeAllPopups(),s?this.layoutService.baseLayout=Zs.TABULAR_ORDER:this.layoutService.baseLayout=Zs.STACK_ORDER}selectLayout(n){this.router.navigate(["/"],{relativeTo:this.activatedRoute}),this.layoutService.portfolioWatchContainerActiveIndex=0,this.layoutService.homePageComponentTabIndex$.next(0),this.layoutService.selectLayout(n)}onChange(n){this.layoutService.baseLayout=n}};e.\u0275fac=function(r){return new(r||e)(st(ws),st(Uo),st(Vl))},e.\u0275cmp=ge({type:e,selectors:[["layout-list-panel"]],decls:12,vars:2,consts:[[1,"py-2","px-3"],[1,"d-flex","align-items-center","justify-content-between"],[1,"col-7","p-0","mb-0","text-inverse"],[1,"d-flex","align-items-center"],["for","tabularOrder",1,"ios7-switch","mb-0"],["type","checkbox","data-cy","order-grid-view-radio-button","id","tabularOrder",3,"change","checked"],[1,"h4","mb-0"],[1,"col-7","p-0","mb-0","text-inverse","mb-2"],[1,"d-flex","mb-3","justify-content-center"],["data-cy","layout1-btn",1,"layout-selector",3,"click","ngClass"],[1,"layout-selector-inner","d-flex","flex-column","h-100"],[2,"height","55%"],[1,"ls-border","ls-border-top"],[1,"d-flex",2,"margin","4px 2px"],[1,"ls-btn","ls-btn-success"],[1,"ls-btn","ls-btn-danger"],["data-cy","layout2-btn",1,"layout-selector",3,"click","ngClass"],[1,"layout-selector-inner","d-flex","h-100"],[1,"ls-border","ls-border-end",2,"width","70%"],["data-cy","layout3-btn",1,"layout-selector",3,"click","ngClass"],[1,"ls-border","ls-border-left","d-flex","flex-column",2,"width","70%"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"div",1)(2,"div",2),A(3,"\u0646\u0645\u0627\u06CC\u0634 \u062C\u062F\u0648\u0644\u06CC \u0628\u062E\u0634 \u0633\u0641\u0627\u0631\u0634\u0627\u062A"),x(),C(4,"div",3)(5,"label",4)(6,"input",5),V("change",function(a){return s.handleTabularOrderChange(a)}),x(),H(7,"span",6),x()()()(),C(8,"div",0)(9,"div",7),A(10,"\u0686\u06CC\u062F\u0645\u0627\u0646 \u0635\u0641\u062D\u0647"),x(),Z(11,bne,24,9,"div",8),x()),r&2&&(_(6),F("checked",s.isTabularOrder()),_(5),q(s.changeLayout()?11:-1))},dependencies:[Ke,nn],styles:[`.layout-selector[_ngcontent-%COMP%]{height:66px;width:98px;box-shadow:0 0 0 1px #575669 inset!important;-webkit-transition:box-shadow .2s!important;-moz-transition:box-shadow .2s!important;-ms-transition:box-shadow .2s!important;-o-transition:box-shadow .2s!important;will-change:transition;border-radius:4px;padding:12px;cursor:pointer}.layout-selector.layout-selector--active[_ngcontent-%COMP%]{cursor:default;box-shadow:0 0 0 2px #5d9cec inset!important}.layout-selector[_ngcontent-%COMP%]   .layout-selector-inner[_ngcontent-%COMP%]{border:4px solid #575669;border-radius:2px}.layout-selector[_ngcontent-%COMP%]   .layout-selector-inner[_ngcontent-%COMP%]   .ls-border[_ngcontent-%COMP%]{border-style:solid;border-color:#575669!important;border-width:0}.layout-selector[_ngcontent-%COMP%]   .layout-selector-inner[_ngcontent-%COMP%]   .ls-border-top[_ngcontent-%COMP%]{border-top-width:2px}.layout-selector[_ngcontent-%COMP%]   .layout-selector-inner[_ngcontent-%COMP%]   .ls-border-left[_ngcontent-%COMP%]{border-left-width:2px}.layout-selector[_ngcontent-%COMP%]   .layout-selector-inner[_ngcontent-%COMP%]   .ls-btn[_ngcontent-%COMP%]{width:9px;height:3px;display:inline-block}.layout-selector[_ngcontent-%COMP%]   .layout-selector-inner[_ngcontent-%COMP%]   .ls-btn[_ngcontent-%COMP%] + .ls-btn[_ngcontent-%COMP%]{margin-right:2px}.layout-selector[_ngcontent-%COMP%]   .layout-selector-inner[_ngcontent-%COMP%]   .ls-btn-success[_ngcontent-%COMP%]{background-color:var(--bs-success)}.layout-selector[_ngcontent-%COMP%]   .layout-selector-inner[_ngcontent-%COMP%]   .ls-btn-danger[_ngcontent-%COMP%]{background-color:var(--bs-danger)}.layout-selector[_ngcontent-%COMP%] + .layout-selector[_ngcontent-%COMP%]{margin-right:1rem}
/*# sourceMappingURL=layout-list-panel.style-JM7W47UQ.css.map */`],changeDetection:0});let i=e;return i})();var Sne=["unsavedChangeAlarmTemplate"],xne=["resetTemplate"],_ne=i=>({"overflow-auto":i}),wne=i=>({"d-none":i}),Ene=(i,e)=>({"d-none":i,"px-2 mx-2":e}),Zu=i=>({"px-3":i}),zg=i=>({"input-highlight":i}),KN=(i,e,t)=>({"d-none":i,"px-4 mx-2":e,"h-100 overflow-auto px-3":t}),Wg=i=>({"rotate-180":i}),Tne=(i,e)=>({"bottom-0":i,"panel-footer mx-2":e}),Mne=i=>({show:i});function Ane(i,e){if(i&1){let t=ne();C(0,"div",6)(1,"span",7),A(2,"\u062A\u0646\u0638\u06CC\u0645\u0627\u062A"),x()(),C(3,"div",8),H(4,"svg-icon",9),A(5," \u062A\u0646\u0638\u06CC\u0645\u0627\u062A \u0630\u062E\u06CC\u0631\u0647 \u0646\u0634\u062F\u0647 \u0627\u0633\u062A! "),x(),C(6,"div",10)(7,"div",11)(8,"button",12),V("click",function(){z(t);let r=P();return W(r.Exit())}),A(9,"\u0627\u0646\u0635\u0631\u0627\u0641"),x(),C(10,"button",13),V("click",function(){z(t);let r=P();return r.closeModal(),W(r.save())}),A(11,"\u0630\u062E\u06CC\u0631\u0647"),x()()()}if(i&2){let t=P();_(4),F("iconName",t.icons.SaveError)}}function Pne(i,e){if(i&1){let t=ne();C(0,"div",6)(1,"span",7),A(2,"\u062A\u0646\u0638\u06CC\u0645\u0627\u062A"),x()(),C(3,"div",14),A(4,"\u0622\u06CC\u0627 \u0627\u0632 \u062A\u063A\u06CC\u06CC\u0631 \u062A\u0646\u0638\u06CC\u0645\u0627\u062A \u0628\u0647 \u062D\u0627\u0644\u062A \u067E\u06CC\u0634 \u0641\u0631\u0636 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F"),x(),C(5,"div",10)(6,"div",11)(7,"button",12),V("click",function(){z(t);let r=P();return W(r.closeResetConfirmModal())}),A(8,"\u0627\u0646\u0635\u0631\u0627\u0641"),x(),C(9,"button",15),V("click",function(){z(t);let r=P();return W(r.reset())}),A(10," \u062A\u0627\u06CC\u06CC\u062F "),x()()()}}function Dne(i,e){if(i&1){let t=ne();C(0,"div",71),V("click",function(){z(t);let r=P(2);return W(r.showGeneral.set(!r.showGeneral()))}),A(1," \u0639\u0645\u0648\u0645\u06CC "),H(2,"svg-icon",62),x()}if(i&2){let t=P(2);_(2),F("iconName",t.icons.ChevronDown)("ngClass",de(3,Wg,t.showGeneral())),mn("data-cy","setting-general-chevron-"+t.icons.ChevronDown)}}function kne(i,e){i&1&&(C(0,"label",22),H(1,"input",72)(2,"span",25),x())}function Ine(i,e){i&1&&H(0,"input",73)(1,"label",74)}function Fne(i,e){i&1&&H(0,"input",76)(1,"label",77)}function One(i,e){i&1&&(C(0,"label",22),H(1,"input",78)(2,"span",25),x())}function Lne(i,e){if(i&1&&(C(0,"div",19)(1,"div",20)(2,"label",75),A(3,"\u0646\u0645\u0627\u06CC\u0634 \u0627\u0639\u0644\u0627\u0646\u200C\u200C\u0647\u0627 "),H(4,"span",25),x(),Z(5,Fne,2,0)(6,One,3,0,"label",22),x()()),i&2){let t=P(2);_(5),q(t.isAndroid()?5:6)}}function Rne(i,e){i&1&&(C(0,"div",19)(1,"div")(2,"ul",30)(3,"li",20)(4,"label",79),A(5,"\u0641\u0627\u0635\u0644\u0647 \u0627\u0632 \u067E\u0627\u06CC\u06CC\u0646"),x(),C(6,"label",22),H(7,"input",80)(8,"span",25),x()(),C(9,"li")(10,"p",28),A(11,"\u0628\u0631\u0627\u06CC \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u062F\u0631 \u0622\u06CC\u0641\u0648\u0646\u200C\u0647\u0627\u06CC \u0633\u0631\u06CC X \u0628\u0647 \u0628\u0627\u0644\u0627"),x()()()()())}function Nne(i,e){i&1&&H(0,"input",81)(1,"label",82)}function Vne(i,e){i&1&&(C(0,"label",22),H(1,"input",83)(2,"span",25),x())}function Bne(i,e){i&1&&H(0,"input",84)(1,"label",85)}function Gne(i,e){i&1&&(C(0,"label",22),H(1,"input",86)(2,"span",25),x())}function Une(i,e){i&1&&H(0,"input",87)(1,"label",88)}function Hne(i,e){i&1&&(C(0,"label",22),H(1,"input",89)(2,"span",25),x())}function zne(i,e){if(i&1){let t=ne();C(0,"div",71),V("click",function(){z(t);let r=P(2);return W(r.showOrder.set(!r.showOrder()))}),A(1," \u0633\u0641\u0627\u0631\u0634 "),H(2,"svg-icon",62),x()}if(i&2){let t=P(2);_(2),F("iconName",t.icons.ChevronDown)("ngClass",de(3,Wg,t.showOrder())),mn("data-cy","setting-order-chevron-"+t.icons.ChevronDown)}}function Wne(i,e){if(i&1&&(C(0,"span"),H(1,"svg-icon",90),A(2," \u062F\u0631\u0635\u062F \u062A\u06CC\u06A9 \u0628\u0627\u06CC\u0633\u062A\u06CC \u0628\u06CC\u0646 0 \u062A\u0627 100 \u0628\u0627\u0634\u062F "),x()),i&2){let t=P(4);_(),F("iconName",t.icons.Alert)}}function $ne(i,e){if(i&1&&(C(0,"span"),H(1,"svg-icon",90),A(2),x()),i&2){let t=P(4);_(),F("iconName",t.icons.Alert),_(),ye(" \u0645\u0642\u062F\u0627\u0631 \u062A\u06CC\u06A9 \u0628\u0627\u06CC\u0633\u062A\u06CC \u0628\u06CC\u0646 0 \u062A\u0627 ",t.maxTickAmount," \u0628\u0627\u0634\u062F ")}}function Kne(i,e){if(i&1&&(C(0,"div"),Z(1,Wne,3,1,"span")(2,$ne,3,2,"span"),x()),i&2){let t,n,r=P(3);_(),q(((t=r.profileForm.get("tickType"))==null?null:t.value)==="Percent"?1:-1),_(),q(((n=r.profileForm.get("tickType"))==null?null:n.value)==="Amount"?2:-1)}}function jne(i,e){if(i&1&&(C(0,"div",48),Z(1,Kne,3,2,"div"),x()),i&2){let t,n=P(2);_(),q((t=n.profileForm.get("tick").errors)!=null&&t.min||(t=n.profileForm.get("tick").errors)!=null&&t.max?1:-1)}}function Yne(i,e){i&1&&H(0,"input",91)(1,"label",92)}function qne(i,e){i&1&&(C(0,"label",22),H(1,"input",93)(2,"span",25),x())}function Xne(i,e){i&1&&(C(0,"label",22),H(1,"input",94)(2,"span",25),x())}function Zne(i,e){i&1&&H(0,"input",95)(1,"label",96)}function Qne(i,e){i&1&&(C(0,"li",51)(1,"div",97)(2,"label",98),H(3,"input",99)(4,"span"),C(5,"i",100),A(6,"\u0628\u0631\u062A\u0631\u06CC\u0646 \u0645\u0638\u0646\u0647\u200C\u06CC \u0633\u0645\u062A \u0633\u0641\u0627\u0631\u0634"),x()()(),C(7,"div",39)(8,"label",101),H(9,"input",102)(10,"span"),C(11,"i",100),A(12,"\u0628\u0631\u062A\u0631\u06CC\u0646 \u0645\u0638\u0646\u0647\u200C\u06CC \u0633\u0645\u062A \u0645\u0642\u0627\u0628\u0644 \u0633\u0641\u0627\u0631\u0634"),x()()()()),i&2&&(_(3),F("value",0),_(6),F("value",1))}function Jne(i,e){i&1&&(C(0,"label",22),H(1,"input",103)(2,"span",25),x())}function ere(i,e){i&1&&H(0,"input",104)(1,"label",105)}function tre(i,e){if(i&1){let t=ne();C(0,"div",71),V("click",function(){z(t);let r=P(2);return W(r.showPortfolio.set(!r.showPortfolio()))}),A(1," \u067E\u0631\u062A\u0641\u0648\u06CC "),H(2,"svg-icon",62),x()}if(i&2){let t=P(2);_(2),F("iconName",t.icons.ChevronDown)("ngClass",de(3,Wg,t.showPortfolio())),mn("data-cy","setting-portfolio-chevron-"+t.icons.ChevronDown)}}function ire(i,e){if(i&1&&(C(0,"div",54),H(1,"svg-icon",106),C(2,"span",107),A(3,"\u062A\u0646\u0638\u06CC\u0645\u0627\u062A \u067E\u0631\u062A\u0641\u0648\u06CC"),x()()),i&2){let t=P(2);_(),F("iconName",t.icons.Setting)}}function nre(i,e){i&1&&(C(0,"div",116),A(1,"\u0645\u062D\u0627\u0633\u0628\u0627\u062A \u0628\u0631 \u0627\u0633\u0627\u0633 \u062F\u0648\u0631\u0647 \u0633\u0631\u0645\u0627\u06CC\u0647\u200C\u06AF\u0630\u0627\u0631\u06CC"),x(),C(2,"div")(3,"div",39)(4,"label",56),H(5,"input",117)(6,"span"),C(7,"i",58),A(8,"\u0627\u0632 \u0627\u0648\u0644\u06CC\u0646"),x()()(),C(9,"p",59),A(10," \u0645\u0628\u0646\u0627\u06CC \u0645\u062D\u0627\u0633\u0628\u0627\u062A\u060C \u0627\u0632 \u0627\u0648\u0644\u06CC\u0646 \u0633\u0631\u0645\u0627\u06CC\u0647 \u06AF\u0630\u0627\u0631\u06CC \u062F\u0631 \u0647\u0631 \u0646\u0645\u0627\u062F \u0628\u0627 \u0644\u062D\u0627\u0638 \u06A9\u0627\u0631\u0645\u0632\u062F \u0627\u0633\u062A. "),x(),C(11,"div",39)(12,"label",56),H(13,"input",117)(14,"span"),C(15,"i",58),A(16,"\u0627\u0632 \u0622\u062E\u0631\u06CC\u0646"),x()()(),C(17,"p",59),A(18," \u0645\u0628\u0646\u0627\u06CC \u0645\u062D\u0627\u0633\u0628\u0627\u062A\u060C \u0628\u0639\u062F \u0627\u0632 \u0622\u062E\u0631\u06CC\u0646 \u0628\u0627\u0631\u06CC \u0627\u0633\u062A \u06A9\u0647 \u062F\u0627\u0631\u0627\u06CC\u06CC \u0635\u0641\u0631 \u0634\u062F\u0647 \u0648 \u0628\u0627 \u0644\u062D\u0627\u0638 \u06A9\u0627\u0631\u0645\u0632\u062F \u0627\u0633\u062A. "),x()(),C(19,"div",118),A(20," \u0645\u062D\u0627\u0633\u0628\u0627\u062A \u0628\u0631 \u0627\u0633\u0627\u0633 \u0642\u06CC\u0645\u062A \u0645\u06CC\u0627\u0646\u06AF\u06CC\u0646 \u062E\u0631\u06CC\u062F "),x(),C(21,"div")(22,"div",39)(23,"label",56),H(24,"input",119)(25,"span"),C(26,"i",58),A(27,"\u062A\u0639\u062F\u06CC\u0644 \u0634\u062F\u0647 \u062A\u0648\u0633\u0637 \u0633\u0648\u062F \u0646\u0642\u062F\u06CC (DPS)"),x()()(),C(28,"p",59),A(29," \u0627\u06CC\u0646 \u0642\u06CC\u0645\u062A \u0645\u06CC\u0627\u0646\u06AF\u06CC\u0646 \u062E\u0631\u06CC\u062F \u062A\u0648\u0633\u0637 \u0633\u0648\u062F \u0646\u0642\u062F\u06CC \u0645\u062C\u0627\u0645\u0639 \u06A9\u0645(\u062A\u0639\u062F\u06CC\u0644) \u0634\u062F\u0647 \u0627\u0633\u062A. "),x(),C(30,"div",39)(31,"label",56),H(32,"input",119)(33,"span"),C(34,"i",58),A(35,"\u062A\u0639\u062F\u06CC\u0644 \u0646\u0634\u062F\u0647 \u062A\u0648\u0633\u0637 \u0633\u0648\u062F \u0646\u0642\u062F\u06CC (DPS)"),x()()(),C(36,"p",59),A(37," \u062F\u0631 \u0627\u06CC\u0646 \u0642\u06CC\u0645\u062A \u0645\u06CC\u0627\u0646\u06AF\u06CC\u0646 \u062E\u0631\u06CC\u062F\u060C \u0633\u0648\u062F \u0646\u0642\u062F\u06CC \u0645\u062C\u0627\u0645\u0639 \u062A\u0627\u062B\u06CC\u0631\u06CC \u0646\u062F\u0627\u0634\u062A\u0647 \u0627\u0633\u062A. "),x()()),i&2&&(_(5),F("value",1),_(8),F("value",0),_(11),F("value",0),_(8),F("value",1))}function rre(i,e){i&1&&(C(0,"div",116),A(1,"\u0645\u062D\u0627\u0633\u0628\u0627\u062A \u0628\u0631 \u0627\u0633\u0627\u0633 \u062F\u0648\u0631\u0647 \u0633\u0631\u0645\u0627\u06CC\u0647\u200C\u06AF\u0630\u0627\u0631\u06CC"),x(),C(2,"div")(3,"div",39)(4,"label",56),H(5,"input",120)(6,"span"),C(7,"i",58),A(8,"\u0627\u0632 \u0627\u0648\u0644\u06CC\u0646"),x()()(),C(9,"p",59),A(10," \u0645\u0628\u0646\u0627\u06CC \u0645\u062D\u0627\u0633\u0628\u0627\u062A\u060C \u0627\u0632 \u0627\u0648\u0644\u06CC\u0646 \u0633\u0631\u0645\u0627\u06CC\u0647 \u06AF\u0630\u0627\u0631\u06CC \u062F\u0631 \u0647\u0631 \u0646\u0645\u0627\u062F \u0628\u0627 \u0644\u062D\u0627\u0638 \u06A9\u0627\u0631\u0645\u0632\u062F \u0627\u0633\u062A. "),x(),C(11,"div",39)(12,"label",56),H(13,"input",120)(14,"span"),C(15,"i",58),A(16,"\u0627\u0632 \u0622\u062E\u0631\u06CC\u0646"),x()()(),C(17,"p",59),A(18," \u0645\u0628\u0646\u0627\u06CC \u0645\u062D\u0627\u0633\u0628\u0627\u062A\u060C \u0628\u0639\u062F \u0627\u0632 \u0622\u062E\u0631\u06CC\u0646 \u0628\u0627\u0631\u06CC \u0627\u0633\u062A \u06A9\u0647 \u062F\u0627\u0631\u0627\u06CC\u06CC \u0635\u0641\u0631 \u0634\u062F\u0647 \u0648 \u0628\u0627 \u0644\u062D\u0627\u0638 \u06A9\u0627\u0631\u0645\u0632\u062F \u0627\u0633\u062A. "),x()(),C(19,"div",118),A(20," \u0645\u062D\u0627\u0633\u0628\u0627\u062A \u0628\u0631 \u0627\u0633\u0627\u0633 \u0642\u06CC\u0645\u062A \u0645\u06CC\u0627\u0646\u06AF\u06CC\u0646 \u062E\u0631\u06CC\u062F "),x(),C(21,"div")(22,"div",39)(23,"label",56),H(24,"input",121)(25,"span"),C(26,"i",58),A(27,"\u062A\u0639\u062F\u06CC\u0644 \u0634\u062F\u0647 \u062A\u0648\u0633\u0637 \u0633\u0648\u062F \u0646\u0642\u062F\u06CC (DPS)"),x()()(),C(28,"p",59),A(29," \u0627\u06CC\u0646 \u0642\u06CC\u0645\u062A \u0645\u06CC\u0627\u0646\u06AF\u06CC\u0646 \u062E\u0631\u06CC\u062F \u062A\u0648\u0633\u0637 \u0633\u0648\u062F \u0646\u0642\u062F\u06CC \u0645\u062C\u0627\u0645\u0639 \u06A9\u0645(\u062A\u0639\u062F\u06CC\u0644) \u0634\u062F\u0647 \u0627\u0633\u062A. "),x(),C(30,"div",39)(31,"label",56),H(32,"input",121)(33,"span"),C(34,"i",58),A(35,"\u062A\u0639\u062F\u06CC\u0644 \u0646\u0634\u062F\u0647 \u062A\u0648\u0633\u0637 \u0633\u0648\u062F \u0646\u0642\u062F\u06CC (DPS)"),x()()(),C(36,"p",59),A(37," \u062F\u0631 \u0627\u06CC\u0646 \u0642\u06CC\u0645\u062A \u0645\u06CC\u0627\u0646\u06AF\u06CC\u0646 \u062E\u0631\u06CC\u062F\u060C \u0633\u0648\u062F \u0646\u0642\u062F\u06CC \u0645\u062C\u0627\u0645\u0639 \u062A\u0627\u062B\u06CC\u0631\u06CC \u0646\u062F\u0627\u0634\u062A\u0647 \u0627\u0633\u062A. "),x()()),i&2&&(_(5),F("value",1),_(8),F("value",0),_(11),F("value",0),_(8),F("value",1))}function sre(i,e){if(i&1){let t=ne();C(0,"div",108)(1,"div",109),H(2,"input",110),C(3,"label",111),V("click",function(){z(t);let r=P(2);return W(r.showSoldPortfolioHandler(!0))}),A(4,"\u0646\u0645\u0627\u062F\u0647\u0627\u06CC \u0641\u0631\u0648\u062E\u062A\u0647 \u0634\u062F\u0647"),x(),H(5,"input",112),C(6,"label",113),V("click",function(){z(t);let r=P(2);return W(r.showSoldPortfolioHandler(!1))}),A(7," \u0646\u0645\u0627\u062F\u0647\u0627\u06CC \u067E\u0631\u062A\u0641\u0648\u06CC"),x(),C(8,"a",114),A(9,"."),x()()(),C(10,"div",115),Z(11,nre,38,4)(12,rre,38,4),x()}if(i&2){let t=P(2);_(2),F("checked",t.showSoldPortfolio()),_(3),F("checked",!t.showSoldPortfolio()),_(5),F("ngClass",de(4,Mne,!t.showSoldPortfolioFade())),_(),q(t.showSoldPortfolio()?12:11)}}function ore(i,e){if(i&1){let t=ne();C(0,"div",71),V("click",function(){z(t);let r=P(2);return W(r.showOptions.set(!r.showOptions()))}),A(1," \u0622\u067E\u0634\u0646 "),H(2,"svg-icon",122),x()}if(i&2){let t=P(2);_(2),F("iconName",t.icons.ChevronDown)("ngClass",de(2,Wg,t.showOptions()))}}function are(i,e){if(i&1&&(C(0,"div",54),H(1,"svg-icon",106),C(2,"span",107),A(3,"\u062A\u0646\u0638\u06CC\u0645\u0627\u062A \u0622\u067E\u0634\u0646"),x()()),i&2){let t=P(2);_(),F("iconName",t.icons.Setting)}}function lre(i,e){if(i&1){let t=ne();C(0,"div",123),V("click",function(){z(t);let r=P(2);return W(r.openResetConfirmModal())}),C(1,"div",124),H(2,"svg-icon",125),x(),A(3," \u0628\u0627\u0632\u06AF\u0634\u062A \u0628\u0647 \u062A\u0646\u0638\u06CC\u0645\u0627\u062A \u067E\u06CC\u0634\u200C\u0641\u0631\u0636 "),x()}if(i&2){let t=P(2);_(2),F("iconName",t.icons.SettingRestore)}}function cre(i,e){if(i&1){let t=ne();C(0,"form",16),V("ngSubmit",function(){z(t);let r=P();return W(r.save())}),Z(1,Dne,3,5,"div",17),C(2,"div",18)(3,"div",19)(4,"div",20)(5,"label",21),A(6,"\u0642\u0627\u0644\u0628 \u0631\u0648\u0634\u0646"),x(),Z(7,kne,3,0,"label",22)(8,Ine,2,0),x()(),Z(9,Lne,7,1,"div",19)(10,Rne,12,0,"div",19),C(11,"div",19)(12,"div",20)(13,"label",23),A(14,"\u0627\u0646\u062A\u0642\u0627\u0644 \u0646\u0648\u0627\u0631 \u0645\u0634\u062E\u0635\u0627\u062A \u0628\u0647 \u0628\u0627\u0644\u0627"),x(),C(15,"label",22),H(16,"input",24)(17,"span",25),x()()(),C(18,"div",19)(19,"div",20)(20,"label",26),A(21," \u0639\u062F\u0645 \u0646\u0645\u0627\u06CC\u0634 \u0645\u0627\u0646\u062F\u0647 "),x(),Z(22,Nne,2,0)(23,Vne,3,0,"label",22),x()(),C(24,"div",19)(25,"div",20)(26,"label",27),A(27," \u0646\u0645\u0627\u06CC\u0634 \u0627\u0639\u062F\u0627\u062F \u0641\u0627\u0631\u0633\u06CC "),x(),Z(28,Bne,2,0)(29,Gne,3,0,"label",22),x()(),C(30,"div",19)(31,"div",20)(32,"label",26),A(33," \u0646\u0645\u0627\u06CC\u0634 \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A \u0646\u0645\u0627\u062F "),x(),Z(34,Une,2,0)(35,Hne,3,0,"label",22),x(),C(36,"p",28),A(37,"\u0645\u062A\u0645\u0627\u06CC\u0632 \u0646\u0645\u0648\u062F\u0646 \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A \u0644\u062D\u0638\u0647\u200C\u0627\u06CC \u062F\u0631 \u0639\u0646\u0627\u0635\u0631 \u062F\u06CC\u062F\u0647\u200C\u0628\u0627\u0646 \u0648 \u067E\u0631\u062A\u0641\u0648\u06CC"),x()(),H(38,"layout-list-panel"),x(),Z(39,zne,3,5,"div",17),C(40,"div",29)(41,"ul",30)(42,"li",31)(43,"label",32),A(44,"\u062D\u062C\u0645 \u067E\u06CC\u0634 \u0641\u0631\u0636 \u062E\u0631\u06CC\u062F"),x(),C(45,"div",33),H(46,"custom-number-box",34),x()(),C(47,"li",31)(48,"label",35),A(49,"\u062D\u062C\u0645 \u067E\u06CC\u0634 \u0641\u0631\u0636 \u0641\u0631\u0648\u0634"),x(),C(50,"div",36),H(51,"custom-number-box",37),x()(),C(52,"li",31)(53,"label",38),A(54,"\u0646\u0648\u0639 \u062A\u06CC\u06A9 \u0642\u06CC\u0645\u062A"),x(),C(55,"div",39)(56,"label"),H(57,"input",40),C(58,"span"),A(59,"\u062F\u0631\u0635\u062F"),x()()(),C(60,"div",39)(61,"label"),H(62,"input",41),C(63,"span"),A(64,"\u0645\u0642\u062F\u0627\u0631"),x()()()(),C(65,"li",31)(66,"div",42)(67,"label",43),A(68,"\u062A\u06CC\u06A9 \u0642\u06CC\u0645\u062A "),H(69,"svg-icon",44),x()(),C(70,"div",45),H(71,"custom-number-box",46),x()(),C(72,"li",47),Z(73,jne,2,1,"div",48),x(),C(74,"li",31)(75,"label",49),A(76,"\u062A\u0627\u06CC\u06CC\u062F \u0642\u0628\u0644 \u0627\u0632 \u0627\u0631\u0633\u0627\u0644"),x(),Z(77,Yne,2,0)(78,qne,3,0,"label",22),x(),C(79,"li",31)(80,"label",50),A(81,"\u06AF\u0631\u0641\u062A\u0646 \u0642\u06CC\u0645\u062A \u0627\u0632 \u0633\u0631\u062E\u0637"),x(),Z(82,Xne,3,0,"label",22)(83,Zne,2,0),x(),Z(84,Qne,13,2,"li",51),C(85,"li",31)(86,"label",52),A(87,"\u0646\u06AF\u0647\u062F\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0633\u0641\u0627\u0631\u0634 \u067E\u0633 \u0627\u0632 \u0627\u0631\u0633\u0627\u0644"),x(),Z(88,Jne,3,0,"label",22)(89,ere,2,0),x()()(),Z(90,tre,3,5,"div",17),C(91,"div",53),Z(92,ire,4,1,"div",54),C(93,"div",55),A(94,"\u0645\u062D\u0627\u0633\u0628\u0627\u062A \u0628\u0631 \u0627\u0633\u0627\u0633 \u0642\u06CC\u0645\u062A"),x(),C(95,"div")(96,"div",39)(97,"label",56),H(98,"input",57)(99,"span"),C(100,"i",58),A(101,"\u062E\u0648\u062F\u06A9\u0627\u0631"),x()()(),C(102,"p",59),A(103," \u062F\u0631 \u0633\u0627\u0639\u062A \u0645\u0639\u0627\u0645\u0644\u0627\u062A\u060C \u0645\u062D\u0627\u0633\u0628\u0627\u062A \u0628\u0631 \u0627\u0633\u0627\u0633 \u0642\u06CC\u0645\u062A \u0622\u062E\u0631\u06CC\u0646 \u0645\u0639\u0627\u0645\u0644\u0647 \u0648 \u0628\u0639\u062F \u0627\u0632 \u0633\u0627\u0639\u062A \u0645\u0639\u0627\u0645\u0644\u0627\u062A \u0628\u0631 \u0627\u0633\u0627\u0633 \u0642\u06CC\u0645\u062A \u067E\u0627\u06CC\u0627\u0646\u06CC \u0627\u0646\u062C\u0627\u0645 \u0645\u06CC\u200C\u0634\u0648\u062F. "),x(),C(104,"div",39)(105,"label",56),H(106,"input",57)(107,"span"),C(108,"i",58),A(109,"\u0622\u062E\u0631\u06CC\u0646 \u0642\u06CC\u0645\u062A"),x()()(),C(110,"div",39)(111,"label",56),H(112,"input",57)(113,"span"),C(114,"i",58),A(115,"\u0642\u06CC\u0645\u062A \u067E\u0627\u06CC\u0627\u0646\u06CC"),x()()()(),C(116,"div",60),V("click",function(){z(t);let r=P();return W(r.showPortfolioAdvancedSettingHandler())}),C(117,"span",61),A(118,"\u062A\u0646\u0638\u06CC\u0645\u0627\u062A \u067E\u06CC\u0634\u0631\u0641\u062A\u0647"),x(),H(119,"svg-icon",62),x(),Z(120,sre,13,6),x(),Z(121,ore,3,4,"div",17),C(122,"div",53),Z(123,are,4,1,"div",54),C(124,"div",55),A(125,"\u0646\u062D\u0648\u0647 \u0645\u062D\u0627\u0633\u0628\u0647 \u0628\u0644\u06A9 \u0634\u0648\u0644\u0632"),x(),C(126,"div")(127,"p",63),A(128," \u062F\u0631 \u0635\u0641\u062D\u0627\u062A \u0632\u0646\u062C\u06CC\u0631\u0647 \u0622\u067E\u0634\u0646\u060C \u0628\u06CC\u0634\u062A\u0631\u06CC\u0646\u200C\u0647\u0627 \u0648 \u0641\u06CC\u0644\u062A\u0631\u06AF\u0630\u0627\u0631\u06CC \u0622\u067E\u0634\u0646\u060C \u0633\u062A\u0648\u0646\u200C\u0647\u0627\u06CC \u0645\u0631\u0628\u0648\u0637 \u0628\u0647 \u067E\u0627\u0631\u0627\u0645\u062A\u0631\u0647\u0627\u06CC \u0628\u0644\u06A9 \u0634\u0648\u0644\u0632 \u0628\u0627 \u0645\u0642\u0627\u062F\u06CC\u0631 \u0632\u06CC\u0631 \u0645\u062D\u0627\u0633\u0628\u0647 \u0645\u06CC\u200C\u06AF\u0631\u062F\u062F. "),x(),C(129,"div",64)(130,"div")(131,"label"),A(132,"\u0646\u0648\u0633\u0627\u0646 \u067E\u0630\u06CC\u0631\u06CC (Volatility)"),x(),C(133,"div",45)(134,"custom-number-box",65),V("tap",function(){z(t);let r=P();return W(r.onTickTap())}),x()()(),C(135,"div")(136,"label"),A(137,"\u0646\u0631\u062E \u0628\u0647\u0631\u0647"),x(),C(138,"div",45)(139,"custom-number-box",66),V("tap",function(){z(t);let r=P();return W(r.onTickTap())}),x()()()()()(),Z(140,lre,4,1,"div",67),C(141,"div",68)(142,"button",69),V("click",function(){z(t);let r=P();return W(r.Exit())}),A(143,"\u0627\u0646\u0635\u0631\u0627\u0641"),x(),C(144,"button",70),A(145," \u0630\u062E\u06CC\u0631\u0647 "),x()()()}if(i&2){let t,n=P(),r=ki(6);F("formGroup",n.profileForm)("ngClass",de(55,_ne,!n.overlayMode())),_(),q(n.overlayMode()?-1:1),_(),F("ngClass",de(57,wne,!n.showGeneral())),_(5),q(n.isAndroid()?8:7),_(2),q(n.isAndroid()?9:-1),_(),q(n.isIOS13OrAbove()?10:-1),_(12),q(n.isAndroid()?22:23),_(6),q(n.isAndroid()?28:29),_(6),q(n.isAndroid()?34:35),_(5),q(n.overlayMode()?-1:39),_(),F("ngClass",zi(59,Ene,!n.showOrder(),!n.overlayMode())),_(2),F("ngClass",de(62,Zu,!n.overlayMode())),_(4),F("form",n.profileForm)("ngClass",de(64,zg,n.currentInputSelectedName==="buyQuantity")),_(),F("ngClass",de(66,Zu,!n.overlayMode())),_(4),F("form",n.profileForm)("ngClass",de(68,zg,n.currentInputSelectedName==="sellQuantity")),_(),F("ngClass",de(70,Zu,!n.overlayMode())),_(13),F("ngClass",de(72,Zu,!n.overlayMode())),_(2),F("ngbPopover",r)("autoClose","outside"),_(2),F("iconName",n.icons.InfoBoxFill),_(2),F("form",n.profileForm)("ngClass",de(74,zg,n.currentInputSelectedName==="tick")),_(2),q(n.profileForm.get("tick").invalid?73:-1),_(),F("ngClass",de(76,Zu,!n.overlayMode())),_(3),q(n.isAndroid()?77:78),_(2),F("ngClass",de(78,Zu,!n.overlayMode())),_(3),q(n.isAndroid()?83:82),_(2),q((t=n.profileForm.get("priceFromHeadline"))!=null&&t.value?84:-1),_(),F("ngClass",de(80,Zu,!n.overlayMode())),_(3),q(n.isAndroid()?-1:88),_(),q(n.isAndroid()?89:-1),_(),q(n.overlayMode()?-1:90),_(),F("ngClass",kp(82,KN,!n.showPortfolio(),!n.overlayMode(),n.overlayMode())),_(),q(n.overlayMode()?92:-1),_(6),F("value",1),_(8),F("value",2),_(6),F("value",0),_(7),F("iconName",n.icons.ChevronDown)("ngClass",de(86,Wg,n.showPortfolioAdvancedSetting())),_(),q(n.showPortfolioAdvancedSetting()?120:-1),_(),q(n.overlayMode()?-1:121),_(),F("ngClass",kp(88,KN,!n.showOptions(),!n.overlayMode(),n.overlayMode())),_(),q(n.overlayMode()?123:-1),_(11),F("maxLength",2)("form",n.profileForm)("ngClass",de(92,zg,n.currentInputSelectedName==="volatility")),_(5),F("maxLength",2)("form",n.profileForm)("ngClass",de(94,zg,n.currentInputSelectedName==="interestRate")),_(),q(n.overlayMode()?-1:140),_(),F("ngClass",zi(96,Tne,n.formHasChanged,!n.overlayMode())),_(3),F("disabled",!n.profileForm.valid)}}function ure(i,e){i&1&&(C(0,"div"),A(1," \u0628\u0627 \u062A\u0646\u0638\u06CC\u0645 \u0639\u062F\u062F \u062A\u06CC\u06A9\u060C \u0628\u0627 \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0627\u0632 \u0627\u0633\u06A9\u0631\u0648\u0644 \u0645\u0648\u0633 \u0648 \u062F\u06A9\u0645\u0647\u200C\u0647\u0627\u06CC \u0628\u0627\u0644\u0627 \u0648 \u067E\u0627\u06CC\u06CC\u0646 \u06A9\u06CC\u0628\u0648\u0631\u062F \u0645\u06CC\u200C\u062A\u0648\u0627\u0646\u06CC\u062F \u0642\u06CC\u0645\u062A \u0648\u0627\u0631\u062F \u0634\u062F\u0647 \u062F\u0631 \u0633\u0641\u0627\u0631\u0634 \u0631\u0627 \u062A\u063A\u06CC\u06CC\u0631 \u062F\u0647\u06CC\u062F. "),x())}function dre(i,e){i&1&&(C(0,"div"),A(1," \u062F\u0631 \u062D\u0627\u0644\u062A \u062E\u0648\u062F\u06A9\u0627\u0631 \u0645\u0628\u0646\u0627\u06CC \u0645\u062D\u0627\u0633\u0628\u0627\u062A \u0627\u0632 \u0633\u0627\u0639\u062A 9 - 15 (\u0632\u0645\u0627\u0646 \u0628\u0627\u0632\u0627\u0631) \u0628\u0631 \u0627\u0633\u0627\u0633 \u0622\u062E\u0631\u06CC\u0646 \u0642\u06CC\u0645\u062A \u0648 \u062E\u0627\u0631\u062C \u0627\u06CC\u0646 \u0628\u0627\u0632\u0647 \u0628\u0631 \u0627\u0633\u0627\u0633 \u0642\u06CC\u0645\u062A \u067E\u0627\u06CC\u0627\u0646\u06CC \u0627\u0633\u062A. "),x())}function hre(i,e){i&1&&(C(0,"div"),A(1,"\u062F\u0631 \u0635\u0648\u0631\u062A \u0631\u0648\u0634\u0646 \u0628\u0648\u062F\u0646 \u0642\u0627\u0628\u0644\u06CC\u062A power saving (\u0635\u0631\u0641\u0647 \u062C\u0648\u06CC\u06CC \u062F\u0631 \u0645\u0635\u0631\u0641 \u0628\u0627\u062A\u0631\u06CC) \u060C \u0645\u0645\u06A9\u0646 \u0627\u0633\u062A \u0635\u0641\u062D\u0647 \u0646\u0645\u0627\u06CC\u0634 \u062E\u0627\u0645\u0648\u0634 \u0634\u0648\u062F"),x())}var gC=(()=>{let e=class e{showPortfolioAdvancedSettingHandler(){this.showPortfolioAdvancedSetting.update(n=>!n)}showSoldPortfolioHandler(n){this.showSoldPortfolioFade.set(!0),wo(200).subscribe(()=>this.showSoldPortfolioFade.set(!1)),this.showSoldPortfolio.set(n)}constructor(n,r,s,o,a,l,c){this.fb=n,this.easyKeyboardService=r,this.router=s,this.modalService=o,this.accountService=a,this.deviceService=l,this.settingFacadeService=c,this.unleashService=ee(Xn),this.icons=Fe,this.showPortfolioAdvancedSetting=pe(!1),this.showSoldPortfolio=pe(!1),this.showSoldPortfolioFade=pe(!1),this.unsavedChangeAlarmTemplate=$t("unsavedChangeAlarmTemplate"),this.resetTemplate=$t("resetTemplate"),this.showGeneral=pe(!0),this.showOrder=pe(!0),this.showPortfolio=pe(!0),this.showOptions=pe(!0),this.overlayMode=rt(!1),this.overlayState=it(),this.settingPart=rt(),this.toggleEasyKeyboardEvent=it(),this.backToMenu=it(),this.maxTickAmount=1e4,this.setting=pe(void 0),this.settingKeyValues=[],this.isAndroid=pe(!0),this.getSetting=Ce(this.settingFacadeService.getSettings$().pipe(ud(10),Be(u=>dt(Se({},u),{volatility:u.volatility*100,interestRate:u.interestRate*100})),Je(u=>{this.setting.set(u),this.profileForm.patchValue(this.setting()),this.profileForm.valueChanges.subscribe(()=>{this.formHasChanged=!0}),this.isIOS13OrAbove.set(this.deviceService.isiOS_13_Or_Above)}))),this.isIOS=!0,this.showEasyKeyboard=!1,this.decimalKeyboard=!1,this.currentInputSelectedName="",this.easyKeyboardTaped=!1,this.forceExit=!1,this.showTickInfo=!1,this.showPortfolioInfo=!1,this.showNotchInfo=!1,this.isIOS13OrAbove=pe(!0),this.loading=!1,this.unsavedChangeAlarm=!1,this.formHasChanged=!1,this.subs=[],this.profileForm=this.fb.group({lightTheme:new No({value:!1,disabled:!1}),buyQuantity:[1e3,[ii.max(1e7)]],sellQuantity:[0,[ii.max(1e7)]],tick:[0,[ii.min(0),ii.max(100)]],tickType:new No(hb.Percent),priceFromHeadline:[!1],orderConfirmation:[!1],divideOrderToMultiple:[!1],notchUp:[!1],notchDown:!1,pageSize:15,applyCommissionInPortfolio:!0,useClosingPriceInPortfolioTotalValue:!1,showNotifications:!0,noSleep:!0,noBalance:!0,blinkOnDataChange:!1,userStatusBarToUp:!1,portfolioBasedOnLastPositivePeriod:!1,usePersianNumber:!1,portfolioTotalValueCalculateType:[0,[ii.max(2)]],priceFromHeadlineSide:new No(Go.Same),keepOrderFormAfterSubmit:!1,portfolioCalculationType:new No(db.Periodic),portfolioBuyAveragePriceCalculationType:new No(ub.WithDPS),soldPortfolioBuyAveragePriceCalculationType:new No(ub.WithDPS),soldPortfolioCalculationType:new No(db.Periodic),volatility:new No(void 0),interestRate:new No(void 0)}),Ce(this.settingFacadeService.settingUpdated$().pipe(Je(()=>{this.Exit()}))),Ce(this.settingFacadeService.settingResetDone$().pipe(Je(()=>{this.modalService.dismissAll(),this.ngOnInit()}))),_r(()=>{this.settingPart()&&(this.showGeneral.set(this.settingPart()===$r.All||this.settingPart()===$r.General),this.showOrder.set(this.settingPart()===$r.All||this.settingPart()===$r.Order),this.showPortfolio.set(this.settingPart()===$r.All||this.settingPart()===$r.Portfolio||this.settingPart()===$r.PortfolioSold),this.showSoldPortfolio.set(this.settingPart()===$r.PortfolioSold),this.showOptions.set(this.settingPart()===$r.All||this.settingPart()===$r.Option))},{allowSignalWrites:!0})}ngOnInit(){this.isAndroid.set(this.deviceService.userDevice===vM),this.isIOS=this.deviceService.userDevice===yM,this.setDynamicValidations()}ngOnDestroy(){this.subs.forEach(n=>n.unsubscribe())}setDynamicValidations(){let n=this.profileForm.get("tickType"),r=this.profileForm.get("tick");n.valueChanges.subscribe(s=>{s===hb.Percent?r.setValidators([ii.min(0),ii.max(100)]):r.setValidators([ii.max(this.maxTickAmount)]),r.updateValueAndValidity()})}save(){let n=JSON.stringify(this.profileForm.value),r=JSON.parse(n);r.customerIsin=this.accountService?.userAccountInfo?.value?.customerIsin,r.volatility/=100,r.interestRate/=100,this.settingFacadeService.setSetting(r)}navigateBack(){this.easyKeyboardService.changeState(!1),this.forceExit=!0,this.overlayMode()?this.overlayState.emit(!1):this.router.navigate(["/menu"])}Exit(){this.forceExit=!0,this.closeModal()}closeModal(){this.modalService.dismissAll(),this.backToMenu.emit(!0)}canDeactivate(){return this.forceExit?!0:this.profileForm.dirty||this.easyKeyboardTaped?(this.openModal(this.unsavedChangeAlarmTemplate()),!1):!0}openModal(n){this.modalService.open(n)}closeEasyKeyboard(){this.toggleEasyKeyboard(!1)}onBuyQuantityTap(){this.decimalKeyboard=!1;let n="buyQuantity";this.easyKeyboardInputControl=this.profileForm.get(n)}onSellQuantityTap(){this.decimalKeyboard=!1;let n="sellQuantity";this.easyKeyboardInputControl=this.profileForm.get(n)}onTickTap(){this.decimalKeyboard=!0;let n="tick";this.easyKeyboardInputControl=this.profileForm.get(n)}toggleEasyKeyboard(n,r){this.easyKeyboardTaped=!0,this.toggleEasyKeyboardEvent.emit(new Jf(n,r))}openResetConfirmModal(){this.openModal(this.resetTemplate())}reset(){this.settingFacadeService.resetSetting()}closeResetConfirmModal(){this.modalService.dismissAll()}};e.\u0275fac=function(r){return new(r||e)(st(Yn),st(Pd),st($n),st(o0),st(Er),st(Aa),st(xs))},e.\u0275cmp=ge({type:e,selectors:[["app-setting"]],viewQuery:function(r,s){r&1&&(Kt(s.unsavedChangeAlarmTemplate,Sne,5),Kt(s.resetTemplate,xne,5)),r&2&&si(2)},inputs:{overlayMode:[1,"overlayMode"],settingPart:[1,"settingPart"]},outputs:{overlayState:"overlayState",toggleEasyKeyboardEvent:"toggleEasyKeyboardEvent",backToMenu:"backToMenu"},decls:11,vars:1,consts:[["unsavedChangeAlarmTemplate",""],["resetTemplate",""],["priceTick",""],["portfolioValue",""],["dim",""],[1,"check-for-scroll","flex-grow-1","position-relative",3,"formGroup","ngClass"],[1,"modal-header","d-flex","justify-content-between"],[1,"modal-title","fw-bold"],[1,"modal-body","text-center"],["width","48","height","48",1,"text-secondary","d-block","mb-3",3,"iconName"],[1,"modal-footer"],[1,"m-0","d-flex","gap-2"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-success","px-5",3,"click"],[1,"modal-body"],["data-cy","setting-reset-to-default-modal-confirm","type","button",1,"btn","btn-success","px-5",3,"click"],[1,"check-for-scroll","flex-grow-1","position-relative",3,"ngSubmit","formGroup","ngClass"],[1,"d-flex","justify-content-between","mb-1","mt-2","mx-3","text-muted","cup"],[1,"pt-3","px-2","mx-2","mt-2","bg-principal","bg-principal-7x-dark","bg-principal-4x-dark-mobile","rounded",3,"ngClass"],[1,"py-2","px-3"],[1,"d-flex","align-items-center","justify-content-between"],["for","themeSelectId",1,"col-7","p-0","mb-0","text-inverse"],[1,"ios7-switch","mb-0"],["for","userStatusId",1,"col-7","p-0","mb-0","text-inverse"],["id","userStatusId","type","checkbox","formControlName","userStatusBarToUp"],[1,"h4","mb-0"],["for","noBalanceId",1,"col-7","p-0","mb-0","text-inverse"],["for","usePersianNumberId",1,"col-7","p-0","mb-0","text-inverse"],[1,"small","text-muted","mb-0"],[1,"pt-3","bg-principal","bg-principal-7x-dark","bg-principal-4x-dark-mobile","rounded",3,"ngClass"],[1,"list-unstyled","p-0","m-0"],[1,"d-flex","align-items-center","justify-content-between","py-2",3,"ngClass"],["for","buyQuantity",1,"col-7","p-0","mb-0","text-inverse"],["data-cy","setting-buy-quantity",1,"form-control"],["dir","ltr","id","buyQuantity","inputMode","number",3,"form","ngClass"],["for","sellQuantity",1,"col-7","p-0","mb-0","text-inverse"],["data-cy","setting-sell-quantity",1,"form-control"],["dir","ltr","id","sellQuantity","inputMode","number",3,"form","ngClass"],["for","tickType",1,"col-7","p-0","mb-0","text-inverse"],[1,"radio-custom"],["type","radio","id","tickType","formControlName","tickType","value","Percent",1,"form-check-input"],["type","radio","id","tickType2","formControlName","tickType","value","Amount",1,"form-check-input"],[1,"p-0","col-7","position-relative"],[1,"text-inverse","mb-0",3,"ngbPopover","autoClose"],["width","18","height","18",1,"text-primary","cup",3,"iconName"],[1,"form-control"],["dir","ltr","id","tick","inputMode","decimal",3,"form","ngClass"],[1,"px-3"],[1,"text-warning"],["for","orderConfirmation",1,"col-7","p-0","mb-0","text-inverse"],["for","priceFromHeadline",1,"col-7","p-0","mb-0","text-inverse"],[1,"bg-principal-2x","mx-3","mb-2","p-2","pb-2","pt-3","rounded"],["for","keepOrderFormAfterSubmit",1,"col-7","p-0","mb-0","text-inverse"],[1,"py-3","bg-principal","bg-principal-7x-dark","bg-principal-4x-dark-mobile","rounded",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-center","gap-1"],[1,"fw-bold","fs-7","mt-3","mb-2"],[1,"justify-content-start","d-flex","flex-row","gap-2"],["type","radio","name","portfolioTotalValueCalculateType","formControlName","portfolioTotalValueCalculateType",3,"value"],[1,"d-block","mt-1",2,"font-style","normal"],[1,"ps-4","ms-1","text-body-tertiary","mb-2"],[1,"d-flex","justify-content-between","py-2","border-top","border-bg-dark","mt-2","cup",3,"click"],[1,"text-global","text-decoration-underline"],["width","20","height","20",3,"iconName","ngClass"],[1,"mb-2","ms-1","text-body-tertiary"],[1,"d-flex","gap-2","justify-content-between"],["dir","ltr","id","volatility","inputMode","decimal",3,"tap","maxLength","form","ngClass"],["dir","ltr","id","interestRate","inputMode","decimal",3,"tap","maxLength","form","ngClass"],["data-cy","reset-to-default-setting-btn",1,"bg-principal","bg-principal-7x-dark","bg-principal-4x-dark-mobile","rounded","cup","d-flex","align-items-center","text-primary","px-3","py-3","mt-4","mx-2"],[1,"py-3","position-sticky","z-2","d-flex","align-items-center","gap-2",3,"ngClass"],["type","button",1,"btn","btn-outline-secondary","px-4",3,"click"],["data-cy","settings-save-btn","type","submit",1,"btn","btn-success","flex-grow-1",3,"disabled"],[1,"d-flex","justify-content-between","mb-1","mt-2","mx-3","text-muted","cup",3,"click"],["data-cy","theme-radio-button","id","themeSelectId","type","checkbox","formControlName","lightTheme"],["type","checkbox","id","themeSelectId","formControlName","lightTheme",1,"switch-input"],["for","themeSelectId",1,"switch-label"],["for","showNotificationsId",1,"col-7","p-0","mb-0","text-inverse"],["type","checkbox","id","showNotificationsId","formControlName","showNotifications",1,"switch-input"],["for","showNotificationsId",1,"switch-label"],["id","showNotificationsId","type","checkbox","formControlName","showNotifications"],["for","EEEE",1,"col-7","p-0","text-inverse"],["type","checkbox","id","EEEE","formControlName","notchDown"],["type","checkbox","id","noBalanceId","formControlName","noBalance",1,"switch-input"],["for","noBalanceId",1,"switch-label"],["id","noBalanceId","type","checkbox","formControlName","noBalance"],["type","checkbox","id","usePersianNumberId","formControlName","usePersianNumber",1,"switch-input"],["for","usePersianNumberId",1,"switch-label"],["id","usePersianNumberId","type","checkbox","formControlName","usePersianNumber"],["type","checkbox","id","blinkOnDataChangeId","formControlName","blinkOnDataChange",1,"switch-input"],["for","blinkOnDataChangeId",1,"switch-label"],["id","blinkOnDataChangeId","type","checkbox","formControlName","blinkOnDataChange"],["width","18","height","18",1,"me-1",3,"iconName"],["type","checkbox","id","orderConfirmation","formControlName","orderConfirmation",1,"switch-input"],["for","orderConfirmation",1,"switch-label"],["data-cy","setting-confirm-radio-btn","id","orderConfirmation","type","checkbox","formControlName","orderConfirmation"],["data-cy","setting-price-from-head-line","id","priceFromHeadline","type","checkbox","formControlName","priceFromHeadline"],["data-cy","setting-price-from-head-line","type","checkbox","id","priceFromHeadline","formControlName","priceFromHeadline",1,"switch-input"],["for","priceFromHeadline",1,"switch-label"],[1,"radio-custom","me-2","mb-2"],[1,"flex-row"],["data-cy","setting-price-from-same-side","type","radio","name","priceFromHeadlineSide","formControlName","priceFromHeadlineSide",3,"value"],[1,"small","d-block",2,"font-style","normal"],[1,"flex-row","text-nowrap"],["data-cy","setting-price-from-opposite-side","type","radio","name","priceFromHeadlineSide","formControlName","priceFromHeadlineSide",3,"value"],["data-cy","setting-keep-order-after-submit","id","keepOrderFormAfterSubmit","type","checkbox","formControlName","keepOrderFormAfterSubmit"],["type","checkbox","id","keepOrderFormAfterSubmit","formControlName","keepOrderFormAfterSubmit",1,"switch-input"],["for","keepOrderFormAfterSubmit",1,"switch-label"],["width","24","height","24",1,"line-height-24px",3,"iconName"],[1,"fw-bold","fs-7"],[1,"d-flex","justify-content-between","align-items-center","mb-1"],[1,"switch-toggle","switch-candy","w-100","z-0"],["type","radio","name","view3","id","soldSymbol",3,"checked"],["for","soldSymbol",3,"click"],["type","radio","name","view3","id","mySymbol",3,"checked"],["for","mySymbol",3,"click"],["href",""],[1,"fade",3,"ngClass"],[1,"fw-bold","fs-7","mt-3","mb-2","pb-2"],["type","radio","name","portfolioCalculationType","formControlName","portfolioCalculationType",3,"value"],[1,"fw-bold","fs-7","mt-3","mb-2","border-top","border-bg-dark","py-2"],["type","radio","name","portfolioBuyAveragePriceCalculationType","formControlName","portfolioBuyAveragePriceCalculationType",3,"value"],["type","radio","name","soldPortfolioCalculationType","formControlName","soldPortfolioCalculationType",3,"value"],["type","radio","name","soldPortfolioBuyAveragePriceCalculationType","formControlName","soldPortfolioBuyAveragePriceCalculationType",3,"value"],["width","20","height","20",1,"",3,"iconName","ngClass"],["data-cy","reset-to-default-setting-btn",1,"bg-principal","bg-principal-7x-dark","bg-principal-4x-dark-mobile","rounded","cup","d-flex","align-items-center","text-primary","px-3","py-3","mt-4","mx-2",3,"click"],[1,"me-2","text-muted"],["width","24","height","24",3,"iconName"]],template:function(r,s){r&1&&Z(0,Ane,12,1,"ng-template",null,0,Wi)(2,Pne,11,0,"ng-template",null,1,Wi)(4,cre,146,99,"form",5)(5,ure,2,0,"ng-template",null,2,Wi)(7,dre,2,0,"ng-template",null,3,Wi)(9,hre,2,0,"ng-template",null,4,Wi),r&2&&(_(4),q(s.setting()?4:-1))},dependencies:[Ke,Fn,fs,El,SM,xM,Ro,gs,nn,vs,Sd,Zn,Fl,Dd,$N,Ve],styles:[`.couple-mdi[_ngcontent-%COMP%]{position:relative}.couple-mdi[_ngcontent-%COMP%]   .mdi[_ngcontent-%COMP%]{line-height:1em}.couple-mdi[_ngcontent-%COMP%]   .mdi[_ngcontent-%COMP%]:before{line-height:1em}.couple-mdi[_ngcontent-%COMP%]   .mdi[_ngcontent-%COMP%] + .mdi[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;border-radius:50%;padding:.1em;margin:-.4em}
/*# sourceMappingURL=setting.style-6KFEPEE3.css.map */`],changeDetection:0});let i=e;return i})();var pre=()=>[gC];function mre(i,e){if(i&1){let t=ne();C(0,"app-setting",4,0),V("backToMenu",function(){z(t);let r=P();return W(r.back())}),x()}if(i&2){let t=P();F("settingPart",t.settingPart())}}var V1=(()=>{let e=class e{constructor(){this.icons=Fe,this.setting=$t(gC),this.menuSelectEvent=it(),this.settingPart=rt()}back(){this.setting().canDeactivate()&&(this.settingPart()&&this.settingPart()!==$r.All?this.menuSelectEvent.emit(Ee.Settings):this.menuSelectEvent.emit(Ee.Menu))}canDeactivate(){return this.setting().canDeactivate()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["d-settings-management"]],viewQuery:function(r,s){r&1&&Kt(s.setting,gC,5),r&2&&si()},inputs:{settingPart:[1,"settingPart"]},outputs:{menuSelectEvent:"menuSelectEvent"},decls:7,vars:1,consts:[["setting",""],[1,"d-flex","align-items-center","py-3","px-2","bg-principal","bg-principal-4x-dark","shadow-sm","position-relative","z-2"],["width","36","height","36",1,"cup",3,"click","iconName"],[1,"mb-0","text-body"],[1,"'d-flex","flex-column","flex-grow-1","overflow-auto",3,"backToMenu","settingPart"]],template:function(r,s){r&1&&(C(0,"div",1)(1,"svg-icon",2),V("click",function(){return s.back()}),x(),C(2,"h6",3),A(3,"\u062A\u0646\u0638\u06CC\u0645\u0627\u062A"),x()(),Z(4,mre,2,1),Dn(5,4,pre),kn()),r&2&&(_(),F("iconName",s.icons.ChevronRight))},dependencies:[Fn,Oe,nn,Fl,Ve],encapsulation:2,changeDetection:0});let i=e;return i})();var gre=(i,e)=>({active:i,"full-overlay":e}),fre=i=>({"menu_items--overlay":i}),vre=()=>["/"],Cr=i=>({"menu_item--active":i}),yre=i=>({"menu-scrollable-items":i}),Cre=i=>({"opacity-3":i}),bre=()=>["/orders-history"],Sre=()=>["/transactions"],xre=()=>["/easy-filter"],_re=()=>["/market-map"],jN=i=>({open:i}),wre=i=>({width:i}),Ere=(i,e)=>({"up-status":i,collapsed:e}),Tre=i=>({active:i}),Mre=(i,e)=>({top:i,left:e,opacity:1}),Are=()=>["/algo-orders-history"],Pre=(i,e)=>({collapsed:i,closed:e});function Dre(i,e){if(i&1&&(C(0,"div",3),H(1,"div",88),C(2,"div",89),A(3),x()()),i&2){let t=P();F("ngStyle",zi(2,Mre,t.tooltipHorizontalPlace+"px","0%")),_(3),ye(" ",t.tooltipLabel," ")}}function kre(i,e){if(i&1){let t=ne();C(0,"li",90),V("mouseenter",function(r){z(t);let s=P();return W(s.showTooltipEvent(r,"\u0633\u0641\u0627\u0631\u0634\u0627\u062A \u0647\u0648\u0634\u0645\u0646\u062F "))})("mouseleave",function(){z(t);let r=P();return W(r.hideTooltipEvent())})("click",function(){z(t);let r=P();return W(r.menuSelectHandler())}),C(1,"span",91)(2,"span",92),A(3,"\u062C\u062F\u06CC\u062F"),x(),H(4,"svg-icon",93),x()()}if(i&2){let t=P();F("routerLink",qs(3,Are))("ngClass",de(4,Cr,t.sidePanelActiveItem===t.sidePanelType.None&&t.activeRoute.includes("/algo-orders-history"))),_(4),F("iconName",t.sidePanelActiveItem===t.sidePanelType.None&&t.activeRoute.includes("/algo-orders-history")?"smart-assistant-fill":"smart-assistant")}}function Ire(i,e){if(i&1&&(C(0,"span",94),A(1),fe(2,"positiveNumber"),x()),i&2){let t,n,r=P();Hc("badge align-self-center ",(t=r.messageFacade.getUnreadMessageState())==null?null:t.state,""),_(),ye(" ",Te(2,4,(n=r.messageFacade.getUnreadMessageState())==null?null:n.count)," ")}}function Fre(i,e){if(i&1&&H(0,"svg-icon",62),i&2){let t=P();F("iconName",t.icons.CircleMedium)}}function Ore(i,e){if(i&1){let t=ne();C(0,"d-note-management",95),V("menuSelectEvent",function(r){z(t);let s=P();return W(s.onOpenSidePanelWithData(r))}),x()}if(i&2){let t=P();F("isin",t.urlValue)}}function Lre(i,e){if(i&1){let t=ne();C(0,"d-agreement-management",96),V("menuSelectEvent",function(){z(t);let r=P();return W(r.toggleOverlay())}),x()}}function Rre(i,e){if(i&1){let t=ne();C(0,"d-children-management",96),V("menuSelectEvent",function(r){z(t);let s=P();return W(s.onOpenSidePanelWithData(r))}),x()}}function Nre(i,e){if(i&1){let t=ne();C(0,"d-settings-management",97),V("menuSelectEvent",function(r){z(t);let s=P();return W(s.onOpenSidePanelWithData(r))}),x()}if(i&2){let t=P();F("settingPart",t.urlValue)}}function Vre(i,e){if(i&1){let t=ne();C(0,"d-market-view-orbis-management",96),V("menuSelectEvent",function(r){z(t);let s=P();return W(s.onOpenSidePanelWithData(r))}),x()}}function Bre(i,e){if(i&1){let t=ne();C(0,"d-money-receipt-management",98),V("menuSelectEvent",function(r){z(t);let s=P();return W(s.onOpenSidePanelWithData(r))}),x()}if(i&2){let t=P();F("amount",t.urlValue)("urlData",t.urlData)}}function Gre(i,e){if(i&1){let t=ne();C(0,"d-wallet-card-management",99),V("menuSelectEvent",function(r){z(t);let s=P();return W(s.onOpenSidePanelWithData(r))}),x()}}function Ure(i,e){if(i&1){let t=ne();C(0,"d-payment-management",99),V("menuSelectEvent",function(r){z(t);let s=P();return W(s.onOpenSidePanelWithData(r))}),x()}}function Hre(i,e){if(i&1){let t=ne();C(0,"d-conditional-management",100),V("menuSelectEvent",function(r){z(t);let s=P();return W(s.onOpenSidePanelWithData(r))})("rejectedEvent",function(){z(t);let r=P();return W(r.closeSidePanel())}),x()}if(i&2){let t=P();F("stockIsin",t.urlValue)("conditionId",t.urlData==null?null:t.urlData.conditionId)}}function zre(i,e){if(i&1){let t=ne();C(0,"d-broker-change-management",96),V("menuSelectEvent",function(r){z(t);let s=P();return W(s.onOpenSidePanelWithData(r))}),x()}}function Wre(i,e){if(i&1){let t=ne();C(0,"d-feedback-management",96),V("menuSelectEvent",function(r){z(t);let s=P();return W(s.onOpenSidePanelWithData(r))}),x()}}function $re(i,e){if(i&1){let t=ne();C(0,"d-account-activity-management",96),V("menuSelectEvent",function(){z(t);let r=P();return W(r.toggleOverlay())}),x()}}function Kre(i,e){if(i&1){let t=ne();C(0,"d-messages-management",101),V("menuSelectEvent",function(r){z(t);let s=P();return W(s.onOpenSidePanelWithData(r))}),x()}if(i&2){let t=P();F("urlData",t.urlData)}}function jre(i,e){if(i&1){let t=ne();C(0,"d-fund-management",102),V("menuSelectEvent",function(r){z(t);let s=P();return W(s.onOpenSidePanelWithData(r))}),x()}if(i&2){let t=P();F("fundCode",t.urlValue)}}function Yre(i,e){if(i&1){let t=ne();C(0,"app-menu",103),V("menuSelectEvent",function(r){z(t);let s=P();return W(s.onOpenSidePanelWithData(r))}),x()}}function qre(i,e){if(i&1){let t=ne();C(0,"d-ai-market-assistant-container",96),V("menuSelectEvent",function(r){z(t);let s=P();return W(s.onOpenSidePanelWithData(r))}),x()}}function Xre(i,e){if(i&1){let t=ne();C(0,"d-change-history-management",96),V("menuSelectEvent",function(r){z(t);let s=P();return W(s.onOpenSidePanelWithData(r))}),x()}}function Zre(i,e){if(i&1){let t=ne();C(0,"d-order-list",104),V("closeFormEventEmitter",function(){z(t);let r=P();return W(r.closeForm())})("orderIdForEditChangedEventEmitter",function(r){z(t);let s=P();return W(s.orderIdForEditChanged(r))}),x(),C(1,"span",105)(2,"span",106)(3,"svg-icon",107),V("click",function(){z(t);let r=P();return W(r.onToggleForceClose())}),x()()()}if(i&2){let t=P();F("ngClass",zi(5,Pre,t.orderCollapseMode&&!t.stackOrderCloseMode,t.stackOrderCloseMode))("showOrderForm",t.showOrderForm)("orderInputData",t.orderInputData),_(3),F("iconName",t.stackOrderClose?"chevron-right":"chevron-left"),mn("data-cy","order-list-toggle-btn-"+t.stackOrderClose)}}function Qre(i,e){i&1&&(C(0,"div")(1,"div",108),A(2,"\u0634\u0645\u0627 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u06A9\u0627\u0631\u0628\u0631 \u0645\u06CC\u0647\u0645\u0627\u0646 \u062F\u0631 \u0627\u06CC\u0632\u06CC\u200C\u062A\u0631\u06CC\u062F\u0631 \u062D\u0636\u0648\u0631 \u062F\u0627\u0631\u06CC\u062F."),x(),C(3,"div",109),A(4," \u0628\u0631\u0627\u06CC \u0628\u0631\u0631\u0633\u06CC \u0648\u0636\u0639\u06CC\u062A \u06CC\u0627 \u062A\u06A9\u0645\u06CC\u0644 \u0627\u0641\u062A\u062A\u0627\u062D \u062D\u0633\u0627\u0628 \u062E\u0648\u062F \u0628\u0647 \u0644\u06CC\u0646\u06A9 \u0631\u0648\u0628\u0631\u0648 \u0645\u0631\u0627\u062C\u0639\u0647 \u0641\u0631\u0645\u0627\u06CC\u06CC\u062F. "),x()(),C(5,"div",110)(6,"a",111)(7,"small"),A(8,"\u062A\u06A9\u0645\u06CC\u0644 \u0627\u0641\u062A\u062A\u0627\u062D \u062D\u0633\u0627\u0628"),x()()())}function Jre(i,e){i&1&&(C(0,"div")(1,"div",108),A(2,"\u0634\u0645\u0627 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u06A9\u0627\u0631\u0628\u0631 \u0645\u06CC\u0647\u0645\u0627\u0646 \u062F\u0631 \u0627\u06CC\u0632\u06CC\u200C\u062A\u0631\u06CC\u062F\u0631 \u062D\u0636\u0648\u0631 \u062F\u0627\u0631\u06CC\u062F."),x(),C(3,"div",109),A(4,"\u0628\u0631\u0627\u06CC \u062F\u0631\u062E\u0648\u0627\u0633\u062A \u0627\u0646\u062A\u0642\u0627\u0644 \u0628\u0647 \u0627\u06CC\u0632\u06CC \u062A\u0631\u06CC\u062F\u0631 \u0628\u0647 \u0644\u06CC\u0646\u06A9 \u0631\u0648\u0628\u0631\u0648 \u0645\u0631\u0627\u062C\u0639\u0647 \u0641\u0631\u0645\u0627\u06CC\u06CC\u062F."),x()(),C(5,"p",112)(6,"a",113)(7,"small"),A(8,"\u062F\u0631\u062E\u0648\u0627\u0633\u062A \u0627\u0646\u062A\u0642\u0627\u0644 \u0628\u0647 \u0627\u06CC\u0632\u06CC \u062A\u0631\u06CC\u062F\u0631"),x()()())}function ese(i,e){if(i&1&&(C(0,"div",77),Z(1,Qre,9,0)(2,Jre,9,0),x()),i&2){let t=P();_(),q(t.userService.isEasy2User?2:1)}}function tse(i,e){if(i&1&&(C(0,"as-split-area",81),H(1,"d-orders-grid",114),x()),i&2){let t=P();F("size",t.tabularOrderSizeInOtherRoutes)}}function ise(i,e){if(i&1){let t=ne();C(0,"market-data",115),V("userActivityEmitter",function(){z(t);let r=P();return W(r.onMarketDataUserActivityEmitter())})("userDetailsEmitter",function(){z(t);let r=P();return W(r.onUserDetailsEmitter())})("agreementEmitter",function(){z(t);let r=P();return W(r.onUserAgreementsEmitter())}),x()}}function nse(i,e){if(i&1){let t=ne();C(0,"logout-modal",116),V("logoutEmitter",function(r){z(t);let s=P();return W(s.onLogoutEmitter(r))})("userActivityEmitter",function(r){z(t);let s=P();return W(s.onUserActivityEmitter(r))}),x()}}var YN=40,rse=250,qN=(()=>{let e=class e{get orderCollapseMode(){return this.layoutService.collapseMode.stackOrderCollapse}get stackOrderCloseMode(){return this.layoutService.closeMode.stackOrderClose}get bottomBarCollapseMode(){return this.layoutService.closeMode.userStatusbarClose}get stackOrderClose(){return this.layoutService.closeMode.stackOrderClose}get rocketScriptLoaded(){return this.rocketService.rocketScriptLoaded}get scrollMenuHasScroll(){let n=document.getElementById("scrollMenu");return n.clientHeight+1<n.scrollHeight}get menuHasUpScroll(){let n=document.getElementById("scrollMenu");return this.scrollMenuHasScroll&&n.scrollTop>0}get menuHasDownScroll(){let n=document.getElementById("scrollMenu");return this.scrollMenuHasScroll&&n.scrollTop!==n.scrollHeight}get sidePanelType(){return Ee}get activeIndex(){return this.layoutService.portfolioWatchContainerActiveIndex}get isHome(){return this.layoutService.isHome}get userStatusBarToUp(){return this.settingFacadeService.getSettings()&&this.settingFacadeService.getSettings().userStatusBarToUp}get ordersGridEnabled(){return this.layoutService.ordersGridEnabled}get showOrderForm(){return this._showOrderForm}set showOrderForm(n){this._showOrderForm=n,n&&(this.orderCollapseMode||this.stackOrderCloseMode)&&(this.layoutService.changeStackOrderCollapse(!1),this.layoutService.changeStackOrderCloseMode(!1))}get isinOfOrderIdForEdit(){if(!this.orderIdForEdit)return"";let n=this.orderStore.getOrder(this.orderIdForEdit);return n?n.symbolIsin:""}get searchedValue(){return this._searchedValue?this._searchedValue:"\u062C\u0633\u062A\u062C\u0648\u06CC \u0646\u0645\u0627\u062F"}set searchedValue(n){this._searchedValue=n}get layout3Active(){return this.layoutService.selectedLayout=="layout3"}get isMarketWatchActive(){return(this.layout3Active&&[0,1].includes(this.activeIndex)||!this.layout3Active&&this.activeIndex==0)&&this.isHome}get isPortfolioActive(){return(this.layout3Active&&[0,1].includes(this.activeIndex)||!this.layout3Active&&this.activeIndex==1)&&this.isHome}get isOptionActive(){return this.activeIndex===3}get isEasyChartActive(){return this.activeIndex===2}get layoutModel(){return this.layoutService.layoutModel}get baseLayoutType(){return this.layoutModel.baseLayout}constructor(){this.icons=Fe,this.authService=ee(Vo),this.activeSymbolService=ee(Bo),this.userService=ee(Ml),this.orderService=ee(Uo),this.orderStore=ee(Rl),this.layoutService=ee(ws),this.router=ee($n),this.generalHotkeysService=ee(t0),this.messageFacade=ee(Bl),this.popupOrderService=ee(Vl),this.cn=ee(Nd),this.releaseNoteService=ee(r0),this.settingFacadeService=ee(xs),this.rocketService=ee(eA),this.sidePanelServiceService=ee(Tr),this.unleashService=ee(Xn),this.cautionModalService=ee(f0),this.AlgoFeature=Ce(this.unleashService.isFeatureEnabled$(qn.algo)),this.AiMarketAssistantFeature=Ce(this.unleashService.isFeatureEnabled$(qn.ai_market_assistant)),this.isSigningOut=!1,this.draggingOnTvChart=!1,this.openSearchClass=!1,this.remainIsVisible=!0,this.overlayActive=!1,this.fullOverlayActive=!1,this.hAreas=[{order:1},{size:YN,order:2}],this.vAreas=[{order:1},{size:rse,order:2}],this.moneyReceiptValue="",this.logoutModalIsVisible=!1,this.showTooltip=!1,this.tooltipLabel="",this.activeRoute="",this.openPanel=!1,this.subscriptions=[],this._showOrderForm=!1,this.tabularOrderSizeInOtherRoutes=30,this.stackOrder=Zs.STACK_ORDER,this.tabularOrder=Zs.TABULAR_ORDER,this.sidePanelActiveItem=Ee.None,this.router.events.pipe(gt(n=>n instanceof H2),Je(n=>{n.url==="/"&&this.activeIndex===-1&&this.homePageClickHandler()})).subscribe(n=>this.activeRoute=n.url)}ngAfterViewInit(){this.rocketService.subscribeToLoadRocket()}ngOnInit(){this.subscribeToActiveIsin(),this.subscribeToCloseSidePanel(),this.subscribeToOrderFromSparkLine(),this.subscribeToOrderFromContextMenu(),this.subscribeToOrderFromDesktopMarketDepth(),this.subscribeToOrderFromCloneOrder(),this.subscribeToOrderFromLayouts(),this.subscribeToOrderFromPopup(),this.subscribeToOrderFromSearchPanel(),this.subscribeToReleaseNote(),this.subscribeToHotkeys(),this.messageFacade.getStockChange$().subscribe(n=>{this.setActiveStock(n),this.toggleOverlay()}),this.sidePanelServiceService.openSidePanelWithData$.pipe(gt(n=>n!==null)).subscribe(n=>{n?.sidePanel===Ee.None?(this.toggleOverlay(),n?.data?.url===ut.STOCK_DETAILS_ROUTE&&this.setActiveStock(n.value),n?.data?.url===ut.SUPPORT_ROUTE&&this.rocketService.loadRocketByRoute()):n?.sidePanel===Ee.EasyChart?this.onEasyChartActive(n?.data):n?.sidePanel===Ee.Option?this.onOptionActive():n?.sidePanel&&this.onOpenSidePanelWithData(n.sidePanel,n.data,n.value)})}onDragStart(){this.router.url==`/${ut.EASY_CHART_ROUTE}`&&(this.draggingOnTvChart=!0)}onDragEndTabularOrder(n){switch(this.draggingOnTvChart=!1,this.router.url){case`/${Kn.EASY_FILTER_ROUTE}`:this.layoutService.tabularOrderSizeByPercent=dt(Se({},this.layoutModel.tabularOrderSizeByPercent),{ef:n.sizes[1]});break;case`/${ut.TRANSACTIONS_ROUTE}`:this.layoutService.tabularOrderSizeByPercent=dt(Se({},this.layoutModel.tabularOrderSizeByPercent),{tr:n.sizes[1]});break;case`/${ut.EASY_CHART_ROUTE}`:this.layoutService.tabularOrderSizeByPercent=dt(Se({},this.layoutModel.tabularOrderSizeByPercent),{tv:n.sizes[1]});break;case`/${ut.ORDER_HISTORY_ROUTE}`:this.layoutService.tabularOrderSizeByPercent=dt(Se({},this.layoutModel.tabularOrderSizeByPercent),{oh:n.sizes[1]});break}}subscribeToReleaseNote(){this.releaseNoteService.showNewVersion$.pipe(Je(n=>this.fullOverlayActive=n)).subscribe()}subscribeToActiveIsin(){this.activeSymbolService.activeSymbolObs$.pipe(Je(n=>{n&&n?.symbol?.symbolIsin&&(this.searchedValue=`${n.symbol?.symbolIsin} (${n?.symbol?.title})`,this.showOrderForm&&n.symbol.symbolIsin.toLowerCase()!=this.orderInputData.isin.toLowerCase()&&(this.showOrderForm=!1),!this.isHome&&this.activeSymbolService.changeActiveIsinEventRaised&&!this.popupOrderService.popups.some(r=>r.isin===n.symbol.symbolIsin)&&this.activeSymbolIsin!==n.symbol.symbolIsin&&this.popupOrderService.openPopup({isin:n?.symbol?.symbolIsin,name:n?.symbol?.symbolName,canBuy:n?.symbol?.canBuy,canSell:n?.symbol?.canSell}),this.activeSymbolIsin=n.symbol.symbolIsin)})).subscribe()}subscribeToCloseSidePanel(){this.sidePanelServiceService.closeSidePanel$.subscribe(()=>{this.toggleOverlay()})}subscribeToOrderFromSparkLine(){this.orderService.orderFromSparkLine$.subscribe(n=>{if(this.setActiveStock(n.isin),this.ordersGridEnabled){let r={isin:n.isin,side:n.side,quantity:n.quantity};this.openPopupIncludingOrderForm(r)}else this.openOrderFormWithNewData(n.side,n.quantity)})}openOrderFormWithNewData(n,r=null,s=null){this.showOrderForm=!1,setTimeout(()=>{this.setOrderInputData(n,r,s),this.showOrderForm=!0},10)}subscribeToOrderFromContextMenu(){this.orderService.orderFromContextMenu$.subscribe(n=>{if(this.setActiveStock(n.isin),this.ordersGridEnabled){let r={isin:n.isin,side:n.side,quantity:n.quantity,price:n.price};this.openPopupIncludingOrderForm(r)}else this.openOrderFormWithNewData(n.side,n.quantity,n.price)})}openPopupIncludingOrderForm(n){this.cautionModalService.checkCaution({acceptButton:!0,symbolIsin:n?.isin,side:n?.side,onAccept:()=>{let r=n.side.toLowerCase(),s={isin:n.isin,side:r===yn.BUY?pt.Buy:r===yn.SELL?pt.Sell:pt.None,showOrderForm:!0};this.popupOrderService.openPopup(s,n)}})}subscribeToOrderFromCloneOrder(){this.orderService.orderFromCloneOrder$.subscribe(n=>{this.ordersGridEnabled?(n.side==="buy"?n.side=yn.BUY:n.side=yn.SELL,this.openPopupIncludingOrderForm(n)):(this.setActiveStock(n.isin),this.openOrderFormWithNewData(n.side,n.quantity,n.price))})}subscribeToOrderFromDesktopMarketDepth(){this.orderService.orderFromDesktopMarketDepth$.subscribe(n=>{if(this.ordersGridEnabled)this.popupOrderService.popupExists?this.popupOrderService.changeExistingOrderPopUpFieldsSubject.next({id:this.popupOrderService.selectedPopup.id,data:{side:this.popupOrderService.selectedPopup.side===0?"buy":"sell",isin:n.isin,price:n.price,quantity:n.quantity}}):this.openPopupIncludingOrderForm(n);else{let r=n.isin.toUpperCase();this.orderIdForEdit&&r===this.isinOfOrderIdForEdit.toUpperCase()?this.orderService.updateOrderFromMarketDepthState(dt(Se({},n),{type:3})):this.showOrderForm&&r===this.orderInputData.isin.toUpperCase()?this.orderService.updateOrderFromMarketDepthState(dt(Se({},n),{type:1})):(this.setActiveStock(n.isin),this.openOrderFormWithNewData(n.side,n.quantity,n.price))}})}subscribeToOrderFromLayouts(){this.orderService.orderFromLayouts$.subscribe(n=>{if(this.ordersGridEnabled){let r={isin:this.activeSymbolService.activeStockIsin,side:n.side};this.openPopupIncludingOrderForm(r)}else this.openOrderFormWithNewData(n.side)})}subscribeToOrderFromPopup(){this.orderService.orderFromPopup$.subscribe(n=>{this.layoutService.ordersGridEnabled||this.setActiveStock(n.isin),this.openOrderFormWithNewData(n.side)})}subscribeToOrderFromSearchPanel(){this.orderService.orderFromSearchPanel$.subscribe(n=>{if(this.setActiveStock(n.isin),this.ordersGridEnabled){let r={isin:n.isin,side:n.side};this.openPopupIncludingOrderForm(r)}else this.showOrderForm=!1,setTimeout(()=>{this.showOrderForm=!0,this.setOrderInputData(n.side),this.toggleOverlay()},0)})}subscribeToHotkeys(){this.generalHotkeysService.hotkeys$.subscribe(n=>{switch(n){case Yf.Escape:this.searchClicked();break;case Yf.Plus:this.popupOrderService.selectedPopup?this.popupOrderService.makeOrderForSelectedPopup(yn.BUY):this.onBuyBtnClicked();break;case Yf.Minus:this.popupOrderService.selectedPopup?this.popupOrderService.makeOrderForSelectedPopup(yn.SELL):this.onSellBtnClicked();break}})}onRemainGutterClick(n){n.gutterNum===1&&(this.hAreas[1].size>0?(this.hAreas[0].size+=this.hAreas[1].size,this.hAreas[1].size=0):this.hAreas[1].size=YN)}exit(){this.isSigningOut=!0,setTimeout(()=>{this.isSigningOut=!1},3e3),this.authService.logout()}onSearchChanged(n){this.searchedValue=n}toggleSidePanel(){this.openPanel=!this.openPanel}searchClicked(){this.sidePanelActiveItem!==Ee.Search?(this.closeSidePanel(),this.openSearchPanel(),this.overlayActive=!0):(this.closeSidePanel(),this.closeSearchPanel(),this.overlayActive=!1)}openSearchPanel(){this.sidePanelActiveItem=Ee.Search,setTimeout(()=>{this.openSearchClass=!0},100)}closeSearchPanel(){this.openSearchClass=!1,setTimeout(()=>{this.sidePanelActiveItem===Ee.Search&&(this.sidePanelActiveItem=Ee.None)},200)}toggleOverlay(){this.sidePanelActiveItem===Ee.Settings&&this.settingComponent&&!this.settingComponent.canDeactivate()||this.overlayActive&&(this.overlayActive=!1,this.closeSidePanel(),this.closeSearchPanel())}closeSidePanel(){this.openPanel=!1,this.sidePanelActiveItem=Ee.None}onSelectSymbolFromSearch(n){if(n.searchCategoryName===cb.cars){window.open("https://learning.emofid.com/buying-car-from-commodity-exchange","_blank");return}else n.searchCategoryName===cb.funds?this.onOpenSidePanelWithData(Ee.Funds,void 0,n.symbolIsin):(this.setActiveStock(n.symbolIsin),this.toggleOverlay())}onBuyBtnClicked(){if(this.activeSymbolService.activeStockIsin,this.ordersGridEnabled){let n={isin:this.activeSymbolService.activeStockIsin,side:yn.BUY};this.openPopupIncludingOrderForm(n)}else this.openOrderFormWithNewData(yn.BUY)}onSellBtnClicked(){if(this.ordersGridEnabled){let n={isin:this.activeSymbolService.activeStockIsin,side:yn.SELL};this.openPopupIncludingOrderForm(n)}else this.openOrderFormWithNewData(yn.SELL)}setOrderInputData(n,r=null,s=null){this.orderInputData=this.orderService.getDefaultOrderInputData(n,r,s,this.activeSymbolIsin)}closeForm(){this.showOrderForm=!1}onOpenSidePanelWithData(n,r,s){if(this.sidePanelActiveItem===n){this.toggleOverlay();return}if(n===Ee.Search){this.searchClicked();return}this.sidePanelActiveItem=n,this.urlData=r,this.urlValue=s,this.activeSidePanel()}activeSidePanel(){this.openPanel=!0,this.overlayActive=!0,this.closeSearchPanel()}setActiveStock(n){this.activeSymbolService.setActiveIsin(n)}onPortfolioActive(){this.toggleOverlay(),(!this.isHome||this.layoutService.portfolioWatchContainerActiveIndex===2)&&this.router.navigate([""]),this.layoutService.portfolioWatchContainerActiveIndex=1,this.layoutService.homePageComponentTabIndex$.next(1)}onWatchActive(){this.toggleOverlay(),(!this.isHome||this.layoutService.portfolioWatchContainerActiveIndex===2)&&this.router.navigate([""]),this.layoutService.portfolioWatchContainerActiveIndex=0,this.layoutService.homePageComponentTabIndex$.next(0)}onOptionActive(){this.toggleOverlay(),(!this.isHome||this.layoutService.portfolioWatchContainerActiveIndex===2)&&this.router.navigate([""]),this.layoutService.portfolioWatchContainerActiveIndex=3,this.layoutService.homePageComponentTabIndex$.next(3)}onEasyChartActive(n=null){this.toggleOverlay(),this.router.navigate(["/easy-chart"]),n&&(this.router.navigate(["/easy-chart",n]),this.activeSymbolService.setActiveIsin(n,{openPopup:!1})),this.layoutService.portfolioWatchContainerActiveIndex=2,this.layoutService.homePageComponentTabIndex$.next(2)}onCollapseBottomBar(){this.layoutService.changeUserStatusbarCloseMode(!this.bottomBarCollapseMode)}orderIdForEditChanged(n){this.orderIdForEdit=n}rocket(){this.toggleOverlay(),this.rocketService.rocket()}onDragEnd(){}onToggleForceClose(){this.layoutService.changeStackOrderCloseMode(!this.stackOrderClose)}onSignOutClick(){this.logoutModalIsVisible=!0}onLogoutEmitter(n){this.logoutModalIsVisible=!1,n&&this.exit()}onUserActivityEmitter(n){this.logoutModalIsVisible=!1,n&&this.onOpenSidePanelWithData(Ee.AccountActivity)}onMarketDataUserActivityEmitter(){this.onOpenSidePanelWithData(Ee.AccountActivity)}onUserDetailsEmitter(){window.open(`https://account.emofid.com/connect/info?client_id=${li.oidcSettings.client_id}&redirect_uri=${li.appUrl}`,"_blank")}onUserAgreementsEmitter(){this.onOpenSidePanelWithData(Ee.Agreement)}showTooltipEvent(n,r){let o=(n.target||n.srcElement||n.currentTarget).getBoundingClientRect();this.tooltipHorizontalPlace=o.top+10,this.tooltipLabel=r,this.showTooltip=!0}hideTooltipEvent(){this.showTooltip=!1}scrollMenuToTop(){let n=document.getElementById("scrollMenu");n.scrollTop=0}scrollMenuToBottom(){let n=document.getElementById("scrollMenu");n.scrollTop=n.scrollHeight}homePageClickHandler(){this.layoutService.portfolioWatchContainerActiveIndex=0,this.layoutService.homePageComponentTabIndex$.next(0)}menuSelectHandler(){this.layoutService.portfolioWatchContainerActiveIndex=-1,this.layoutService.homePageComponentTabIndex$.next(-1),this.toggleOverlay()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["main-layout"]],viewQuery:function(r,s){if(r&1&&bi(V1,5),r&2){let o;Si(o=xi())&&(s.settingComponent=o.first)}},decls:110,vars:120,consts:[[1,"d-main","colorize-light"],["data-cy","main-layout-overlay",1,"overlay",3,"click","ngClass"],[1,"menu"],["role","tooltip",1,"tooltip","bs-tooltip-left","position-absolute",3,"ngStyle"],[1,"menu_items","position-absolute","full-offset","z-1","d-flex","flex-column","align-items-center","justify-content-start",3,"ngClass"],[1,"list-unstyled","p-0","m-0","w-100"],[1,"text-center"],["href","#",1,"d-inline-block","pt-2","pb-1",3,"click","routerLink"],[3,"height","width","iconName"],["data-cy","search-menu-icon","placement","left","ngbTooltip","\u062C\u0633\u062A\u062C\u0648 (Esc)",1,"menu_item","menu_item_panel","user-select-none",3,"click","ngClass"],["data-cy","mw-menu-icon",1,"menu_item","menu_item_tab","user-select-none",3,"click","ngClass"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"gap","1rem"],[1,"mt-3","me-1"],["width","20","height","20",3,"iconName"],["data-cy","portfolio-menu-icon",1,"menu_item","menu_item_tab","user-select-none",3,"click","ngClass"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"gap","0.75rem"],[1,"flex-grow-1","d-flex","flex-column","overflow-hidden","w-100",3,"ngClass"],["width","18","height","18",1,"d-none","text-center","text-light","cup","position-relative","z-2","py-1","icon-chevron-up",3,"click","iconName","ngClass"],["id","scrollMenu",1,"d-flex","flex-column","menu-scrollable-overflow","overflow-auto","flex-grow-1"],[1,"list-unstyled","p-0","w-100"],["id","option-li","data-cy","option-li",1,"menu_item",3,"mouseenter","mouseleave","click","ngClass"],["id","option-li-span"],["id","option-li-span-inner",1,"new-badge","small","bg-warning","rounded","position-absolute","text-white","z-1",2,"bottom","-2px","left","4px","padding","0 2px","font-size","9px"],["id","option-li-icon","width","22","height","22",3,"iconName"],["data-cy","order-history-menu-icon","id","orders-history-li",1,"menu_item",3,"mouseenter","mouseleave","click","routerLink","ngClass"],["id","orders-history-span"],["id","orders-history-i",3,"height","width","iconName"],["id","algo-history-li",1,"menu_item",3,"routerLink","ngClass"],["data-cy","transactions-history-menu-icon","id","transactions-li",1,"menu_item",3,"mouseenter","mouseleave","click","routerLink","ngClass"],["id","transactions-span"],["width","22","height","22","id","transactions-i",3,"iconName"],["data-cy","easy-filter-menu-icon","id","easy-filter-li",1,"menu_item",3,"mouseenter","mouseleave","click","ngClass","routerLink"],["id","easy-filter-span"],["width","22","height","22","id","easy-filter-i",3,"iconName"],["id","easy-chart-li",1,"menu_item",3,"mouseenter","mouseleave","click","ngClass"],["id","easy-chart-span"],["width","22","height","22","id","easy-chart-i",3,"iconName"],["data-cy","market-map-menu-btn","id","market-map-li",1,"menu_item",3,"mouseenter","mouseleave","click","routerLink","ngClass"],["id","market-map-span"],["width","22","height","22","id","market-map-i",3,"iconName"],["data-cy","funds-menu-icon","id","funds-li",1,"menu_item","menu_item_panel","user-select-none",3,"mouseenter","mouseleave","click","ngClass"],["id","funds-span"],["width","22","height","22","id","funds-i",3,"iconName"],["data-cy","market-view-menu-icon","id","market-view-li",1,"menu_item","menu_item_panel","user-select-none",3,"mouseenter","mouseleave","click","ngClass"],["id","market-view-span"],["width","22","height","22","id","market-view-i",3,"iconName"],[1,"list-unstyled","p-0","w-100","mt-auto"],["id","menu-message-icon","data-cy","message-menu-icon",1,"menu_item","menu_item_panel","user-select-none",3,"mouseenter","mouseleave","click","ngClass"],["id","messages-span"],["width","22","height","22","id","messages-i",3,"iconName"],["id","messages-badges-div",1,"badges"],["id","messages-badges-span",2,"left","4px","top","0",3,"class"],["id","rocket-li",1,"menu_item",3,"mouseenter","mouseleave","click"],["id","rocket-span"],["width","22","height","22","id","rocket-i",3,"iconName"],["data-cy","settings-menu-icon","id","settings-li",1,"menu_item","menu_item_panel","user-select-none",3,"mouseenter","mouseleave","click","ngClass"],["id","settings-span"],["width","22","height","22","id","settings-i",3,"iconName"],["data-cy","rest-menu-icon","id","other-li",1,"menu_item","menu_item_panel","user-select-none",3,"mouseenter","mouseleave","click","ngClass"],["id","other-span"],["width","22","height","22","id","other-i",1,"position-relative",3,"iconName"],["dir","ltr","id","other-badges-div",1,"badges","d-flex","justify-content-between"],["id","other-badges-i","width","12","height","12",1,"menu-icon-badges",3,"iconName"],["width","18","height","18",1,"d-none","text-center","text-light","cup","position-relative","z-2","py-1","icon-chevron-down",3,"click","iconName"],[1,"panel","overflow-hidden",3,"ngClass","ngStyle"],[1,"h-100"],[1,"d-flex","flex-column","h-100",3,"isin"],[1,"d-flex","flex-column","h-100"],[1,"d-flex","flex-column","h-100",3,"settingPart"],[3,"amount","urlData"],[1,"d-flex","flex-column","h-100",3,"stockIsin","conditionId"],[1,"d-flex","flex-column","h-100",3,"urlData"],[1,"d-flex","flex-column","h-100",3,"fundCode"],[1,"d-flex","flex-column","h-100","p-2"],[1,"d-flex","h-100"],[1,"d-main_inner","h-100","flex-grow-1","d-flex","overflow-hidden"],[1,"d-flex","flex-column","h-100","w-100",3,"ngClass"],[1,"mb-2","d-flex","justify-content-between","align-items-center","rounded","bg-warning","p-2","position-relative"],["direction","vertical","unit","percent","gutterSize","8",3,"dragEnd","dragStart"],["minSize","60",1,"position-relative",3,"size"],[1,"overlay","full-offset",3,"ngClass"],["minSize","6",3,"size"],[1,"position-relative","status-bar","mt-2"],["data-cy","layout-bottom-bar-toggle",1,"horizontal-collapse",3,"click"],["width","18","height","18",1,"position-relative",2,"bottom","3px",3,"iconName"],[1,"d-block"],[1,"search-management","d-flex","flex-column","h-100","overflow-hidden",3,"keydown.esc","selectSymbol","ngClass","showSearchPanel"],[1,"position-absolute","d-flex","justify-content-center","align-items-center"],[1,"arrow"],[1,"tooltip-inner","position-absolute"],["id","algo-history-li",1,"menu_item",3,"mouseenter","mouseleave","click","routerLink","ngClass"],["id","algo-history-span"],[1,"new-badge","small","bg-warning","rounded","position-absolute","text-white","z-1",2,"bottom","-2px","left","4px","padding","0 2px","font-size","9px"],["width","22","height","22",3,"iconName"],["id","messages-badges-span",2,"left","4px","top","0"],[1,"d-flex","flex-column","h-100",3,"menuSelectEvent","isin"],[1,"d-flex","flex-column","h-100",3,"menuSelectEvent"],[1,"d-flex","flex-column","h-100",3,"menuSelectEvent","settingPart"],[3,"menuSelectEvent","amount","urlData"],[3,"menuSelectEvent"],[1,"d-flex","flex-column","h-100",3,"menuSelectEvent","rejectedEvent","stockIsin","conditionId"],[1,"d-flex","flex-column","h-100",3,"menuSelectEvent","urlData"],[1,"d-flex","flex-column","h-100",3,"menuSelectEvent","fundCode"],[1,"d-flex","flex-column","h-100","p-2",3,"menuSelectEvent"],["data-cy","order-list-container",1,"d-order-list","d-flex","flex-column","h-100","flex-shrink-0","position-relative","order-2",3,"closeFormEventEmitter","orderIdForEditChangedEventEmitter","ngClass","showOrderForm","orderInputData"],[1,"order-1","align-self-center","position-relative",2,"width","0","z-index","101"],["data-cy","order-list-toggle-btn","id","layout-orders-close-outer",1,"d-inline-block","m-0","position-relative","vertical-collapse",2,"top","auto"],["id","layout-orders-close-inner","width","18","height","18",1,"position-relative",2,"left","2px",3,"click","iconName"],[1,"fw-bolder"],[1,"m-0"],[1,"text-center","mb-0"],["href","https://reg.emofid.com/","target","_blank",1,"btn","btn-sm","btn-primary","px-3"],[1,"text-center","mb-0","mt-1"],["href","https://d.easytrader.emofid.com/agreement","target","_blank",1,"btn","btn-sm","btn-primary","px-3"],[1,"mt-2"],[1,"d-block",3,"userActivityEmitter","userDetailsEmitter","agreementEmitter"],[3,"logoutEmitter","userActivityEmitter"]],template:function(r,s){if(r&1&&(C(0,"main",0)(1,"div",1),V("click",function(){return s.toggleOverlay()}),x(),C(2,"div",2),Z(3,Dre,4,5,"div",3),C(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),V("click",function(){return s.homePageClickHandler()}),H(8,"svg-icon",8),x()(),C(9,"li",9),V("click",function(){return s.searchClicked()}),C(10,"span"),H(11,"svg-icon",8),x()()(),C(12,"ul",5)(13,"li",10),V("click",function(){return s.onWatchActive()}),C(14,"span",11)(15,"i",12),A(16," \u062F\u06CC\u062F\u0647\u200C\u0628\u0627\u0646 "),x(),H(17,"svg-icon",13),x()(),C(18,"li",14),V("click",function(){return s.onPortfolioActive()}),C(19,"span",15)(20,"i",12),A(21," \u067E\u0631\u062A\u0641\u0648\u06CC "),x(),H(22,"svg-icon",13),x()()(),C(23,"div",16)(24,"svg-icon",17),V("click",function(){return s.scrollMenuToTop()}),x(),C(25,"div",18)(26,"ul",19)(27,"li",20),V("mouseenter",function(a){return s.showTooltipEvent(a,"\u0645\u0639\u0627\u0645\u0644\u0627\u062A \u0622\u067E\u0634\u0646")})("mouseleave",function(){return s.hideTooltipEvent()})("click",function(){return s.onOptionActive()}),C(28,"span",21)(29,"span",22),A(30,"\u062C\u062F\u06CC\u062F"),x(),H(31,"svg-icon",23),x()(),C(32,"li",24),V("mouseenter",function(a){return s.showTooltipEvent(a,"\u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u0633\u0641\u0627\u0631\u0634\u0627\u062A")})("mouseleave",function(){return s.hideTooltipEvent()})("click",function(){return s.menuSelectHandler()}),C(33,"span",25),H(34,"svg-icon",26),x()(),Z(35,kre,5,6,"li",27),C(36,"li",28),V("mouseenter",function(a){return s.showTooltipEvent(a,"\u06AF\u0631\u062F\u0634 \u062D\u0633\u0627\u0628")})("mouseleave",function(){return s.hideTooltipEvent()})("click",function(){return s.menuSelectHandler()}),C(37,"span",29),H(38,"svg-icon",30),x()(),C(39,"li",31),V("mouseenter",function(a){return s.showTooltipEvent(a,"\u0627\u06CC\u0632\u06CC \u0641\u06CC\u0644\u062A\u0631")})("mouseleave",function(){return s.hideTooltipEvent()})("click",function(){return s.menuSelectHandler()}),C(40,"span",32),H(41,"svg-icon",33),x()(),C(42,"li",34),V("mouseenter",function(a){return s.showTooltipEvent(a,"\u0627\u06CC\u0632\u06CC \u0686\u0627\u0631\u062A")})("mouseleave",function(){return s.hideTooltipEvent()})("click",function(){return s.onEasyChartActive()}),C(43,"span",35),H(44,"svg-icon",36),x()(),C(45,"li",37),V("mouseenter",function(a){return s.showTooltipEvent(a,"\u0646\u0642\u0634\u0647 \u0628\u0627\u0632\u0627\u0631")})("mouseleave",function(){return s.hideTooltipEvent()})("click",function(){return s.menuSelectHandler()}),C(46,"span",38),H(47,"svg-icon",39),x()(),C(48,"li",40),V("mouseenter",function(a){return s.showTooltipEvent(a,"\u0635\u0646\u062F\u0648\u0642\u200C\u0647\u0627\u06CC \u0645\u0641\u06CC\u062F")})("mouseleave",function(){return s.hideTooltipEvent()})("click",function(){return s.onOpenSidePanelWithData(s.sidePanelType.Funds)}),C(49,"span",41),H(50,"svg-icon",42),x()(),C(51,"li",43),V("mouseenter",function(a){return s.showTooltipEvent(a,"\u0646\u0645\u0627\u06CC \u0628\u0627\u0632\u0627\u0631")})("mouseleave",function(){return s.hideTooltipEvent()})("click",function(){return s.onOpenSidePanelWithData(s.sidePanelType.MarketView)}),C(52,"span",44),H(53,"svg-icon",45),x()()(),C(54,"ul",46)(55,"li",47),V("mouseenter",function(a){return s.showTooltipEvent(a,"\u067E\u06CC\u0627\u0645\u200C \u0647\u0627")})("mouseleave",function(){return s.hideTooltipEvent()})("click",function(){return s.onOpenSidePanelWithData(s.sidePanelType.Messages)}),C(56,"span",48),H(57,"svg-icon",49),x(),C(58,"div",50),Z(59,Ire,3,6,"span",51),x()(),C(60,"li",52),V("mouseenter",function(a){return s.showTooltipEvent(a,"\u067E\u0634\u062A\u06CC\u0628\u0627\u0646\u06CC \u0622\u0646\u0644\u0627\u06CC\u0646")})("mouseleave",function(){return s.hideTooltipEvent()})("click",function(){return s.rocket()}),C(61,"span",53),H(62,"svg-icon",54),x()(),C(63,"li",55),V("mouseenter",function(a){return s.showTooltipEvent(a,"\u062A\u0646\u0638\u06CC\u0645\u0627\u062A")})("mouseleave",function(){return s.hideTooltipEvent()})("click",function(){return s.onOpenSidePanelWithData(s.sidePanelType.Settings)}),C(64,"span",56),H(65,"svg-icon",57),x()(),C(66,"li",58),V("mouseenter",function(a){return s.showTooltipEvent(a,"\u0633\u0627\u06CC\u0631")})("mouseleave",function(){return s.hideTooltipEvent()})("click",function(){return s.onOpenSidePanelWithData(s.sidePanelType.Menu)}),C(67,"span",59),H(68,"svg-icon",60),x(),C(69,"div",61),Z(70,Fre,1,1,"svg-icon",62),fe(71,"async"),x()()()(),C(72,"svg-icon",63),V("click",function(){return s.scrollMenuToBottom()}),x()()(),C(73,"div",64)(74,"div",65)(75,"div",65),Z(76,Ore,1,1,"d-note-management",66)(77,Lre,1,0,"d-agreement-management",67)(78,Rre,1,0,"d-children-management",67)(79,Nre,1,1,"d-settings-management",68)(80,Vre,1,0,"d-market-view-orbis-management",67)(81,Bre,1,2,"d-money-receipt-management",69)(82,Gre,1,0,"d-wallet-card-management")(83,Ure,1,0,"d-payment-management")(84,Hre,1,2,"d-conditional-management",70)(85,zre,1,0,"d-broker-change-management",67)(86,Wre,1,0,"d-feedback-management",67)(87,$re,1,0,"d-account-activity-management",67)(88,Kre,1,1,"d-messages-management",71)(89,jre,1,1,"d-fund-management",72)(90,Yre,1,0,"app-menu",73)(91,qre,1,0,"d-ai-market-assistant-container",67)(92,Xre,1,0,"d-change-history-management",67),x()()()(),C(93,"div",74),Z(94,Zre,4,8),C(95,"div",75)(96,"div",76),Z(97,ese,3,1,"div",77),C(98,"as-split",78),V("dragEnd",function(a){return s.onDragEndTabularOrder(a)})("dragStart",function(){return s.onDragStart()}),C(99,"as-split-area",79),H(100,"div",80)(101,"router-outlet"),x(),Z(102,tse,2,1,"as-split-area",81),x(),C(103,"div",82)(104,"span",83),V("click",function(){return s.onCollapseBottomBar()}),H(105,"svg-icon",84),x(),Z(106,ise,1,0,"market-data",85),x()()()(),C(107,"d-search-management",86),V("keydown.esc",function(){return s.toggleOverlay()})("selectSymbol",function(a){return s.onSelectSymbolFromSearch(a)}),x(),H(108,"popup-order",87),x(),Z(109,nse,1,0,"logout-modal")),r&2){let o,a;_(),F("ngClass",zi(67,gre,s.overlayActive||s.fullOverlayActive,s.fullOverlayActive)),_(2),q(s.showTooltip?3:-1),_(),F("ngClass",de(70,fre,s.sidePanelActiveItem!==s.sidePanelType.None)),_(3),F("routerLink",qs(72,vre)),_(),F("height",24)("width",24)("iconName",s.icons.EasyFill),_(),F("ngClass",de(73,Cr,s.sidePanelActiveItem===s.sidePanelType.Search)),_(2),F("height",22)("width",22)("iconName",s.sidePanelActiveItem===s.sidePanelType.Search?"magnify-fill":"magnify"),_(2),F("ngClass",de(75,Cr,s.isMarketWatchActive)),_(4),F("iconName",s.isMarketWatchActive?"watchlist-fill":"watchlist"),_(),F("ngClass",de(77,Cr,s.isPortfolioActive)),_(4),F("iconName",s.isPortfolioActive?"portfolio-fill":"portfolio"),_(),F("ngClass",de(79,yre,s.scrollMenuHasScroll)),_(),F("iconName",s.icons.ChevronUp)("ngClass",de(81,Cre,!s.menuHasUpScroll)),_(3),F("ngClass",de(83,Cr,s.isOptionActive)),_(4),F("iconName",s.isOptionActive?"option-fill":"option"),_(),F("routerLink",qs(85,bre))("ngClass",de(86,Cr,s.sidePanelActiveItem===s.sidePanelType.None&&s.activeRoute==="/orders-history")),_(2),F("height",22)("width",22)("iconName",s.sidePanelActiveItem===s.sidePanelType.None&&s.activeRoute==="/orders-history"?"time-fill":"time"),_(),q(s.AlgoFeature()?35:-1),_(),F("routerLink",qs(88,Sre))("ngClass",de(89,Cr,s.sidePanelActiveItem===s.sidePanelType.None&&s.activeRoute==="/transactions")),_(2),F("iconName",s.icons.History),_(),F("ngClass",de(91,Cr,s.sidePanelActiveItem===s.sidePanelType.None&&s.activeRoute==="/easy-filter"))("routerLink",qs(93,xre)),_(2),F("iconName",s.sidePanelActiveItem===s.sidePanelType.None&&s.activeRoute==="/easy-filter"?"easyfilter-fill":"easyfilter"),_(),F("ngClass",de(94,Cr,s.isEasyChartActive)),_(2),F("iconName",s.isEasyChartActive?"easychart-fill":"easychart"),_(),F("routerLink",qs(96,_re))("ngClass",de(97,Cr,s.sidePanelActiveItem===s.sidePanelType.None&&s.activeRoute==="/market-map")),_(2),F("iconName",s.sidePanelActiveItem===s.sidePanelType.None&&s.activeRoute==="/market-map"?"marketmap-fill":"marketmap"),_(),F("ngClass",de(99,Cr,s.sidePanelActiveItem===s.sidePanelType.Funds&&s.openPanel)),_(2),F("iconName",s.sidePanelActiveItem===s.sidePanelType.Funds&&s.openPanel?"safe-fill":"safe"),_(),F("ngClass",de(101,Cr,s.sidePanelActiveItem===s.sidePanelType.MarketView&&s.openPanel)),_(2),F("iconName",s.sidePanelActiveItem===s.sidePanelType.MarketView&&s.openPanel?"market-view-fill":"market-view"),_(2),F("ngClass",de(103,Cr,s.sidePanelActiveItem===s.sidePanelType.Messages&&s.openPanel)),_(2),F("iconName",s.sidePanelActiveItem===s.sidePanelType.Messages&&s.openPanel?"comment-load-fill":"comment-load"),_(2),q((o=s.messageFacade.getUnreadMessageState())!=null&&o.count?59:-1),_(3),F("iconName",s.icons.Support),_(),F("ngClass",de(105,Cr,s.sidePanelActiveItem===s.sidePanelType.Settings&&s.openPanel)),_(2),F("iconName",s.sidePanelActiveItem===s.sidePanelType.Settings&&s.openPanel?"setting-fill":"setting"),_(),F("ngClass",de(107,Cr,(s.sidePanelActiveItem===s.sidePanelType.Menu||s.sidePanelActiveItem===s.sidePanelType.BrokerChange||s.sidePanelActiveItem===s.sidePanelType.Feedback||s.sidePanelActiveItem===s.sidePanelType.Conditional||s.sidePanelActiveItem===s.sidePanelType.Payment||s.sidePanelActiveItem===s.sidePanelType.MoneyReceipt||s.sidePanelActiveItem===s.sidePanelType.Note||s.sidePanelActiveItem===s.sidePanelType.Agreement||s.sidePanelActiveItem===s.sidePanelType.Children||s.sidePanelActiveItem===s.sidePanelType.AccountActivity)&&s.openPanel)),_(2),F("iconName",s.icons.DotsGrid),_(2),q(Te(71,65,s.cn.newConditionObs$)>0?70:-1),_(2),F("iconName",s.icons.ChevronDown),_(),F("ngClass",de(109,jN,s.openPanel))("ngStyle",de(111,wre,s.sidePanelActiveItem===s.sidePanelType.MarketView?"600px":"")),_(3),q((a=s.sidePanelActiveItem)===s.sidePanelType.Note?76:a===s.sidePanelType.Agreement?77:a===s.sidePanelType.Children?78:a===s.sidePanelType.Settings?79:a===s.sidePanelType.MarketView?80:a===s.sidePanelType.MoneyReceipt?81:a===s.sidePanelType.WalletCard?82:a===s.sidePanelType.Payment?83:a===s.sidePanelType.Conditional?84:a===s.sidePanelType.BrokerChange?85:a===s.sidePanelType.Feedback?86:a===s.sidePanelType.AccountActivity?87:a===s.sidePanelType.Messages?88:a===s.sidePanelType.Funds?89:a===s.sidePanelType.Menu?90:a===s.sidePanelType.AiMarketAssistant?91:a===s.sidePanelType.ChangeHistory?92:-1),_(18),q(s.baseLayoutType===s.stackOrder?94:-1),_(2),F("ngClass",zi(113,Ere,s.userStatusBarToUp,s.bottomBarCollapseMode)),_(),q(s.userService.isGuestUser?97:-1),_(2),F("size",100-s.tabularOrderSizeInOtherRoutes),_(),F("ngClass",de(116,Tre,s.draggingOnTvChart)),_(2),q(s.baseLayoutType===s.tabularOrder&&!s.isHome?102:-1),_(3),F("iconName",s.bottomBarCollapseMode?"chevron-up":"chevron-down"),_(),q(s.bottomBarCollapseMode?-1:106),_(),F("ngClass",de(118,jN,s.openSearchClass))("showSearchPanel",s.sidePanelActiveItem===s.sidePanelType.Search),_(2),q(s.logoutModalIsVisible?109:-1)}},dependencies:[Oe,Ke,Sl,Mf,W2,D3,k3,L3,V1,R3,Z3,Ve,ys,Q3,J3,eN,tN,iN,sN,oN,aN,lN,uN,pN,GN,M6,E6,T6,z2,N6,HN,zN,WN,kd],styles:[`[data-bs-theme=light]{--color-base: #4f6883;--color-base-rgb: 79, 104, 131;--color-bg: #e3e8f1;--color-bg-rgb: 227, 232, 241;--color-emphasis: var(--bs-emphasis-color-rgb);--color-emphasis-rgb: var(--bs-emphasis-color-rgb);--color-principal: white;--color-principal-rgb: 255, 255, 255;--color-principal-2x: #f8f8f8;--color-principal-2x-rgb: 248, 248, 248;--color-principal-3x: #efeff5;--color-principal-3x-rgb: 239, 239, 245;--color-principal-4x: #c8c7cc;--color-principal-4x-rgb: 200, 199, 204;--color-principal-5x: #a1a1a1;--color-principal-5x-rgb: 161, 161, 161}[data-bs-theme=light] .bg-base{background-color:rgba(var(--color-base-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light] .bg-base.bg-principal-hover:hover,[data-bs-theme=light] .bg-base.bg-principal-active{background-color:color-mix(in srgb,var(--color-base),#000 3%)!important}[data-bs-theme=light] .border-base{border-color:rgba(var(--color-base-rgb),var(--bs-border-opacity))!important}[data-bs-theme=light] .bg-bg{background-color:rgba(var(--color-bg-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light] .bg-bg.bg-principal-hover:hover,[data-bs-theme=light] .bg-bg.bg-principal-active{background-color:color-mix(in srgb,var(--color-bg),#000 3%)!important}[data-bs-theme=light] .border-bg{border-color:rgba(var(--color-bg-rgb),var(--bs-border-opacity))!important}[data-bs-theme=light] .bg-emphasis{background-color:rgba(var(--color-emphasis-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light] .bg-emphasis.bg-principal-hover:hover,[data-bs-theme=light] .bg-emphasis.bg-principal-active{background-color:color-mix(in srgb,var(--color-emphasis),#000 3%)!important}[data-bs-theme=light] .border-emphasis{border-color:rgba(var(--color-emphasis-rgb),var(--bs-border-opacity))!important}[data-bs-theme=light] .bg-principal{background-color:rgba(var(--color-principal-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light] .bg-principal.bg-principal-hover:hover,[data-bs-theme=light] .bg-principal.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal),#000 3%)!important}[data-bs-theme=light] .border-principal{border-color:rgba(var(--color-principal-rgb),var(--bs-border-opacity))!important}[data-bs-theme=light] .bg-principal-2x{background-color:rgba(var(--color-principal-2x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light] .bg-principal-2x.bg-principal-hover:hover,[data-bs-theme=light] .bg-principal-2x.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-2x),#000 3%)!important}[data-bs-theme=light] .border-principal-2x{border-color:rgba(var(--color-principal-2x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=light] .bg-principal-3x{background-color:rgba(var(--color-principal-3x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light] .bg-principal-3x.bg-principal-hover:hover,[data-bs-theme=light] .bg-principal-3x.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-3x),#000 3%)!important}[data-bs-theme=light] .border-principal-3x{border-color:rgba(var(--color-principal-3x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=light] .bg-principal-4x{background-color:rgba(var(--color-principal-4x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light] .bg-principal-4x.bg-principal-hover:hover,[data-bs-theme=light] .bg-principal-4x.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-4x),#000 3%)!important}[data-bs-theme=light] .border-principal-4x{border-color:rgba(var(--color-principal-4x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=light] .bg-principal-5x{background-color:rgba(var(--color-principal-5x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=light] .bg-principal-5x.bg-principal-hover:hover,[data-bs-theme=light] .bg-principal-5x.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-5x),#000 3%)!important}[data-bs-theme=light] .border-principal-5x{border-color:rgba(var(--color-principal-5x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark]{--color-base: #24242e;--color-base-rgb: 36, 36, 46;--color-bg: #403f4d;--color-bg-rgb: 64, 63, 77;--color-emphasis: var(--bs-emphasis-color-rgb);--color-emphasis-rgb: var(--bs-emphasis-color-rgb);--color-principal: #31303e;--color-principal-rgb: 49, 48, 62;--color-principal-2x: #343341;--color-principal-2x-rgb: 52, 51, 65;--color-principal-3x: #24262d;--color-principal-3x-rgb: 36, 38, 45;--color-principal-4x: #3a3947;--color-principal-4x-rgb: 58, 57, 71;--color-principal-5x: #787c85;--color-principal-5x-rgb: 120, 124, 133;--color-principal-6x: #575669;--color-principal-6x-rgb: 87, 86, 105;--color-principal-7x: #403f4d;--color-principal-7x-rgb: 64, 63, 77}[data-bs-theme=dark] .bg-base{background-color:rgba(var(--color-base-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-base.bg-principal-hover:hover,[data-bs-theme=dark] .bg-base.bg-principal-active{background-color:color-mix(in srgb,var(--color-base),#fff 5%)!important}[data-bs-theme=dark] .border-base{border-color:rgba(var(--color-base-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-bg{background-color:rgba(var(--color-bg-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-bg.bg-principal-hover:hover,[data-bs-theme=dark] .bg-bg.bg-principal-active{background-color:color-mix(in srgb,var(--color-bg),#fff 5%)!important}[data-bs-theme=dark] .border-bg{border-color:rgba(var(--color-bg-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-emphasis{background-color:rgba(var(--color-emphasis-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-emphasis.bg-principal-hover:hover,[data-bs-theme=dark] .bg-emphasis.bg-principal-active{background-color:color-mix(in srgb,var(--color-emphasis),#fff 5%)!important}[data-bs-theme=dark] .border-emphasis{border-color:rgba(var(--color-emphasis-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-principal{background-color:rgba(var(--color-principal-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-principal.bg-principal-hover:hover,[data-bs-theme=dark] .bg-principal.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal),#fff 5%)!important}[data-bs-theme=dark] .border-principal{border-color:rgba(var(--color-principal-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-principal-2x{background-color:rgba(var(--color-principal-2x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-principal-2x.bg-principal-hover:hover,[data-bs-theme=dark] .bg-principal-2x.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-2x),#fff 5%)!important}[data-bs-theme=dark] .border-principal-2x{border-color:rgba(var(--color-principal-2x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-principal-3x{background-color:rgba(var(--color-principal-3x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-principal-3x.bg-principal-hover:hover,[data-bs-theme=dark] .bg-principal-3x.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-3x),#fff 5%)!important}[data-bs-theme=dark] .border-principal-3x{border-color:rgba(var(--color-principal-3x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-principal-4x{background-color:rgba(var(--color-principal-4x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-principal-4x.bg-principal-hover:hover,[data-bs-theme=dark] .bg-principal-4x.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-4x),#fff 5%)!important}[data-bs-theme=dark] .border-principal-4x{border-color:rgba(var(--color-principal-4x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-principal-5x{background-color:rgba(var(--color-principal-5x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-principal-5x.bg-principal-hover:hover,[data-bs-theme=dark] .bg-principal-5x.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-5x),#fff 5%)!important}[data-bs-theme=dark] .border-principal-5x{border-color:rgba(var(--color-principal-5x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-principal-6x{background-color:rgba(var(--color-principal-6x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-principal-6x.bg-principal-hover:hover,[data-bs-theme=dark] .bg-principal-6x.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-6x),#fff 5%)!important}[data-bs-theme=dark] .border-principal-6x{border-color:rgba(var(--color-principal-6x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-principal-7x{background-color:rgba(var(--color-principal-7x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-principal-7x.bg-principal-hover:hover,[data-bs-theme=dark] .bg-principal-7x.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-7x),#fff 5%)!important}[data-bs-theme=dark] .border-principal-7x{border-color:rgba(var(--color-principal-7x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-base-dark{background-color:rgba(var(--color-base-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-base-dark.bg-principal-hover:hover,[data-bs-theme=dark] .bg-base-dark.bg-principal-active{background-color:color-mix(in srgb,var(--color-base),#fff 5%)!important}[data-bs-theme=dark] .border-base-dark{border-color:rgba(var(--color-base-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-bg-dark{background-color:rgba(var(--color-bg-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-bg-dark.bg-principal-hover:hover,[data-bs-theme=dark] .bg-bg-dark.bg-principal-active{background-color:color-mix(in srgb,var(--color-bg),#fff 5%)!important}[data-bs-theme=dark] .border-bg-dark{border-color:rgba(var(--color-bg-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-emphasis-dark{background-color:rgba(var(--color-emphasis-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-emphasis-dark.bg-principal-hover:hover,[data-bs-theme=dark] .bg-emphasis-dark.bg-principal-active{background-color:color-mix(in srgb,var(--color-emphasis),#fff 5%)!important}[data-bs-theme=dark] .border-emphasis-dark{border-color:rgba(var(--color-emphasis-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-principal-dark{background-color:rgba(var(--color-principal-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-principal-dark.bg-principal-hover:hover,[data-bs-theme=dark] .bg-principal-dark.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal),#fff 5%)!important}[data-bs-theme=dark] .border-principal-dark{border-color:rgba(var(--color-principal-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-principal-2x-dark{background-color:rgba(var(--color-principal-2x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-principal-2x-dark.bg-principal-hover:hover,[data-bs-theme=dark] .bg-principal-2x-dark.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-2x),#fff 5%)!important}[data-bs-theme=dark] .border-principal-2x-dark{border-color:rgba(var(--color-principal-2x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-principal-3x-dark{background-color:rgba(var(--color-principal-3x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-principal-3x-dark.bg-principal-hover:hover,[data-bs-theme=dark] .bg-principal-3x-dark.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-3x),#fff 5%)!important}[data-bs-theme=dark] .border-principal-3x-dark{border-color:rgba(var(--color-principal-3x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-principal-4x-dark{background-color:rgba(var(--color-principal-4x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-principal-4x-dark.bg-principal-hover:hover,[data-bs-theme=dark] .bg-principal-4x-dark.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-4x),#fff 5%)!important}[data-bs-theme=dark] .border-principal-4x-dark{border-color:rgba(var(--color-principal-4x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-principal-5x-dark{background-color:rgba(var(--color-principal-5x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-principal-5x-dark.bg-principal-hover:hover,[data-bs-theme=dark] .bg-principal-5x-dark.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-5x),#fff 5%)!important}[data-bs-theme=dark] .border-principal-5x-dark{border-color:rgba(var(--color-principal-5x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-principal-6x-dark{background-color:rgba(var(--color-principal-6x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-principal-6x-dark.bg-principal-hover:hover,[data-bs-theme=dark] .bg-principal-6x-dark.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-6x),#fff 5%)!important}[data-bs-theme=dark] .border-principal-6x-dark{border-color:rgba(var(--color-principal-6x-rgb),var(--bs-border-opacity))!important}[data-bs-theme=dark] .bg-principal-7x-dark{background-color:rgba(var(--color-principal-7x-rgb),var(--bs-bg-opacity))!important;transition:background-color .2s;-webkit-transition:background-color .2s}[data-bs-theme=dark] .bg-principal-7x-dark.bg-principal-hover:hover,[data-bs-theme=dark] .bg-principal-7x-dark.bg-principal-active{background-color:color-mix(in srgb,var(--color-principal-7x),#fff 5%)!important}[data-bs-theme=dark] .border-principal-7x-dark{border-color:rgba(var(--color-principal-7x-rgb),var(--bs-border-opacity))!important}.bg-success-50{background-color:var(--bs-success-50)}.text-success-50{color:var(--bs-success-50)}.bg-success-100{background-color:var(--bs-success-100)}.text-success-100{color:var(--bs-success-100)}.bg-success-200{background-color:var(--bs-success-200)}.text-success-200{color:var(--bs-success-200)}.bg-success-300{background-color:var(--bs-success-300)}.text-success-300{color:var(--bs-success-300)}.bg-success-400{background-color:var(--bs-success-400)}.text-success-400{color:var(--bs-success-400)}.bg-success-500{background-color:var(--bs-success-500)}.text-success-500{color:var(--bs-success-500)}.bg-success-600{background-color:var(--bs-success-600)}.text-success-600{color:var(--bs-success-600)}.bg-success-700{background-color:var(--bs-success-700)}.text-success-700{color:var(--bs-success-700)}.bg-success-800{background-color:var(--bs-success-800)}.text-success-800{color:var(--bs-success-800)}.bg-success-900{background-color:var(--bs-success-900)}.text-success-900{color:var(--bs-success-900)}.bg-danger-50{background-color:var(--bs-danger-50)}.text-danger-50{color:var(--bs-danger-50)}.bg-danger-100{background-color:var(--bs-danger-100)}.text-danger-100{color:var(--bs-danger-100)}.bg-danger-200{background-color:var(--bs-danger-200)}.text-danger-200{color:var(--bs-danger-200)}.bg-danger-300{background-color:var(--bs-danger-300)}.text-danger-300{color:var(--bs-danger-300)}.bg-danger-400{background-color:var(--bs-danger-400)}.text-danger-400{color:var(--bs-danger-400)}.bg-danger-500{background-color:var(--bs-danger-500)}.text-danger-500{color:var(--bs-danger-500)}.bg-danger-600{background-color:var(--bs-danger-600)}.text-danger-600{color:var(--bs-danger-600)}.bg-danger-700{background-color:var(--bs-danger-700)}.text-danger-700{color:var(--bs-danger-700)}.bg-danger-800{background-color:var(--bs-danger-800)}.text-danger-800{color:var(--bs-danger-800)}.bg-danger-900{background-color:var(--bs-danger-900)}.text-danger-900{color:var(--bs-danger-900)}.bg-primary-50{background-color:var(--bs-primary-50)}.text-primary-50{color:var(--bs-primary-50)}.bg-primary-100{background-color:var(--bs-primary-100)}.text-primary-100{color:var(--bs-primary-100)}.bg-primary-200{background-color:var(--bs-primary-200)}.text-primary-200{color:var(--bs-primary-200)}.bg-primary-300{background-color:var(--bs-primary-300)}.text-primary-300{color:var(--bs-primary-300)}.bg-primary-400{background-color:var(--bs-primary-400)}.text-primary-400{color:var(--bs-primary-400)}.bg-primary-500{background-color:var(--bs-primary-500)}.text-primary-500{color:var(--bs-primary-500)}.bg-primary-600{background-color:var(--bs-primary-600)}.text-primary-600{color:var(--bs-primary-600)}.bg-primary-700{background-color:var(--bs-primary-700)}.text-primary-700{color:var(--bs-primary-700)}.bg-primary-800{background-color:var(--bs-primary-800)}.text-primary-800{color:var(--bs-primary-800)}.bg-primary-900{background-color:var(--bs-primary-900)}.text-primary-900{color:var(--bs-primary-900)}.bg-warning-50{background-color:var(--bs-warning-50)}.text-warning-50{color:var(--bs-warning-50)}.bg-warning-100{background-color:var(--bs-warning-100)}.text-warning-100{color:var(--bs-warning-100)}.bg-warning-200{background-color:var(--bs-warning-200)}.text-warning-200{color:var(--bs-warning-200)}.bg-warning-300{background-color:var(--bs-warning-300)}.text-warning-300{color:var(--bs-warning-300)}.bg-warning-400{background-color:var(--bs-warning-400)}.text-warning-400{color:var(--bs-warning-400)}.bg-warning-500{background-color:var(--bs-warning-500)}.text-warning-500{color:var(--bs-warning-500)}.bg-warning-600{background-color:var(--bs-warning-600)}.text-warning-600{color:var(--bs-warning-600)}.bg-warning-700{background-color:var(--bs-warning-700)}.text-warning-700{color:var(--bs-warning-700)}.bg-warning-800{background-color:var(--bs-warning-800)}.text-warning-800{color:var(--bs-warning-800)}.bg-warning-900{background-color:var(--bs-warning-900)}.text-warning-900{color:var(--bs-warning-900)}.bg-violet-50{background-color:var(--bs-violet-50)}.text-violet-50{color:var(--bs-violet-50)}.bg-violet-100{background-color:var(--bs-violet-100)}.text-violet-100{color:var(--bs-violet-100)}.bg-violet-200{background-color:var(--bs-violet-200)}.text-violet-200{color:var(--bs-violet-200)}.bg-violet-300{background-color:var(--bs-violet-300)}.text-violet-300{color:var(--bs-violet-300)}.bg-violet-400{background-color:var(--bs-violet-400)}.text-violet-400{color:var(--bs-violet-400)}.bg-violet-500{background-color:var(--bs-violet-500)}.text-violet-500{color:var(--bs-violet-500)}.bg-violet-600{background-color:var(--bs-violet-600)}.text-violet-600{color:var(--bs-violet-600)}.bg-violet-700{background-color:var(--bs-violet-700)}.text-violet-700{color:var(--bs-violet-700)}.bg-violet-800{background-color:var(--bs-violet-800)}.text-violet-800{color:var(--bs-violet-800)}.bg-violet-900{background-color:var(--bs-violet-900)}.text-violet-900{color:var(--bs-violet-900)}.bg-global-50{background-color:var(--bs-global-50)}.text-global-50{color:var(--bs-global-50)}.bg-global-100{background-color:var(--bs-global-100)}.text-global-100{color:var(--bs-global-100)}.bg-global-200{background-color:var(--bs-global-200)}.text-global-200{color:var(--bs-global-200)}.bg-global-300{background-color:var(--bs-global-300)}.text-global-300{color:var(--bs-global-300)}.bg-global-400{background-color:var(--bs-global-400)}.text-global-400{color:var(--bs-global-400)}.bg-global-500{background-color:var(--bs-global-500)}.text-global-500{color:var(--bs-global-500)}.bg-global-600{background-color:var(--bs-global-600)}.text-global-600{color:var(--bs-global-600)}.bg-global-700{background-color:var(--bs-global-700)}.text-global-700{color:var(--bs-global-700)}.bg-global-800{background-color:var(--bs-global-800)}.text-global-800{color:var(--bs-global-800)}.bg-global-900{background-color:var(--bs-global-900)}.text-global-900{color:var(--bs-global-900)}:root{--bs-font-sans-serif: IRANSansX !important;--bs-body-font-size: 13px;--bs-body-color: #212529;--bs-body-color-rgb: 33, 37, 41;--tab-active-bg: #4f6883;--icon-color: #758696;--bs-success-50: #e7fded;--bs-success-100: #d0fbdc;--bs-success-200: #a3f8c3;--bs-success-300: #72ebab;--bs-success-400: #4dd89c;--bs-success-500: #1bbf89;--bs-success-600: #13a482;--bs-success-700: #0d8979;--bs-success-800: #086e6b;--bs-success-900: #05565b;--bs-danger-50: #fef3ed;--bs-danger-100: #fde8db;--bs-danger-200: #fbcdb9;--bs-danger-300: #f4a893;--bs-danger-400: #e98576;--bs-danger-500: #db524b;--bs-danger-600: #bc363b;--bs-danger-700: #9d2534;--bs-danger-800: #7f172c;--bs-danger-900: #690e28;--bs-primary-50: #eff8fe;--bs-primary-100: #dff2fe;--bs-primary-200: #bfe2fd;--bs-primary-300: #9ecef9;--bs-primary-400: #84baf3;--bs-primary-500: #5d9cec;--bs-primary-600: #4379ca;--bs-primary-700: #2e5aa9;--bs-primary-800: #1d3e88;--bs-primary-900: #112a71;--bs-warning-50: #fefaeb;--bs-warning-100: #fef5d8;--bs-warning-200: #fee9b2;--bs-warning-300: #fcd98b;--bs-warning-400: #fac96d;--bs-warning-500: #f7af3e;--bs-warning-600: #d48c2d;--bs-warning-700: #b16d1f;--bs-warning-800: #8f5013;--bs-warning-900: #763c0b;--bs-violet-50: #f7f2fe;--bs-violet-100: #e8d7fd;--bs-violet-200: #dfcefb;--bs-violet-300: #c9b3f4;--bs-violet-400: #b49bea;--bs-violet-500: #967adc;--bs-violet-600: #7259bd;--bs-violet-700: #533d9e;--bs-violet-800: #38267f;--bs-violet-900: #251769;--bs-global-50: #e2fcff;--bs-global-100: #c5f8ff;--bs-global-200: #94e0ed;--bs-global-300: #63c7db;--bs-global-400: #31afc9;--bs-global-500: #0096b7;--bs-global-600: #007191;--bs-global-700: #004c6a;--bs-global-800: #00364b;--bs-global-900: #001f2b}[data-bs-theme=light] .ag-theme-balham{--ag-secondary-foreground-color: color-mix(in srgb, var(--color-base), #000 50%);--ag-row-hover-color: color-mix(in srgb, var(--color-bg), #fff 10%);--ag-data-color: inherit}.panel{--panel-bg-rgb: 227, 232, 241}.dropdown{--dropdown-menu-bg: var(--color-principal);--dropdown-item-color: var(--bs-body-color);--dropdown-item-bg: var(--color-principal);--dropdown-item-hover-bg: color-mix(in srgb, var(--color-principal-2x), #fff 10%)}.market-view-bourse{--market-view-category-item: var(--color-principal-3x);--market-view-category-item-active: var(--color-principal)}[data-bs-theme=dark]{--bs-body-color: white;--bs-body-color-rgb: 255, 255, 255;--tab-active-bg: #575669;--icon-color: #787c85}[data-bs-theme=dark] .ag-theme-balham{--ag-secondary-foreground-color: color-mix(in srgb, var(--color-base), #fff 50%);--ag-row-hover-color: var(--color-base);--ag-background-color: rgba(var(--color-principal-3x-rgb), .5);--ag-border-color: var(--color-principal);--ag-data-color: inherit;--ag-modal-overlay-background-color: rgba(var(--color-base-rgb), .5);--ag-foreground-color: var(--bs-body-color)}[data-bs-theme=dark] .ag-theme-balham .ag-menu-option-active,[data-bs-theme=dark] .ag-theme-balham .ag-compact-menu-option-active{background-color:color-mix(in srgb,var(--color-base),#fff 5%)}[data-bs-theme=dark] .panel{--panel-bg-rgb: 52, 51, 65}[data-bs-theme=dark] .dropdown{--dropdown-menu-bg: var(--color-principal-4x);--dropdown-item-color: var(--bs-body-color);--dropdown-item-bg: var(--color-principal-4x)}.panel{border-radius:0 10px 10px 0;width:500px;position:absolute;right:45px;top:0;bottom:0;-webkit-transform:translate3d(120%,0,0);-moz-transform:translate3d(120%,0,0);-ms-transform:translate3d(120%,0,0);-o-transform:translate3d(120%,0,0);will-change:transform;-webkit-transition:all .2s!important;-moz-transition:all .2s!important;-ms-transition:all .2s!important;-o-transition:all .2s!important;will-change:transition}.panel.open{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);-o-transform:translate3d(0,0,0);will-change:transform}.panel .tabs-handler .nav{margin-right:.5rem!important}.horizontal-collapse{position:absolute;right:50%;margin-right:-17.5px;top:-4px;border-radius:var(--bs-border-radius);cursor:pointer;height:.7rem;padding:0 .5rem}.horizontal-collapse .mdi:before{content:"\\f0140";position:relative;top:5px;display:block;line-height:0}.horizontal-collapse.collapsed{top:-6px}.horizontal-collapse.collapsed .mdi:before{content:"\\f0143"}.up-status .status-bar{order:-1;margin-top:0!important}.up-status .status-bar market-data{margin-top:0!important;margin-bottom:.5rem!important}.up-status .status-bar .horizontal-collapse{top:auto;bottom:3px}.up-status .status-bar .horizontal-collapse .mdi:before{content:"\\f0143";top:5px}.up-status .status-bar .horizontal-collapse.collapsed{top:-6px}.up-status .status-bar .horizontal-collapse.collapsed .mdi:before{content:"\\f0140"}.up-status.collapsed .status-bar{min-height:7px}.up-status .custom-popover{transform:translate3d(0,40px,0)!important;bottom:auto;top:0!important}.badges{position:absolute;left:4px;top:-2px;right:4px}.badges .badge{position:absolute;left:0;top:0;color:#fff!important}.custom-popover{width:250px}.custom-popover .popover-body{padding:0!important}.custom-popover .arrow{left:auto;right:40px}d-search-management{position:fixed;right:45px;width:500px;bottom:0;z-index:104;top:0;display:flex;flex-direction:column;border-radius:0 1rem 1rem 0;-webkit-transform:translate3d(120%,0,0);-moz-transform:translate3d(120%,0,0);-ms-transform:translate3d(120%,0,0);-o-transform:translate3d(120%,0,0);will-change:transform;-webkit-transition:all .2s!important;-moz-transition:all .2s!important;-ms-transition:all .2s!important;-o-transition:all .2s!important;will-change:transition}d-search-management.open{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);-o-transform:translate3d(0,0,0);will-change:transform}d-payment-management,d-wallet-card-management{display:flex;flex-direction:column;height:100%}popup-order{left:50%;top:50%;width:0;height:0;z-index:101}
/*# sourceMappingURL=layout.style-5UF3S6VP.css.map */
`],encapsulation:2});let i=e;return i})();var XN=(()=>{let e=class e{constructor(){this.closeAlert=pe(!1)}setCloseAlert(){this.closeAlert.update(n=>!n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["size-warning"]],decls:8,vars:1,consts:[["role","alert",1,"alert","alert-dismissible","alert-warning","align-items-md-center","d-lg-none","fade","flex-column","flex-md-row","end-0","m-3","position-fixed","right-0","show","top-0",2,"z-index","1000",3,"ngClass"],["type","button","data-dismiss","alert","aria-label","Close",1,"btn-close",3,"click"],["aria-hidden","true"],[1,"me-2"],["href","https://m.easytrader.ir/",1,"align-self-center","btn","btn-sm","btn-warning","ms-2","mt-3","mt-md-0","px-4"]],template:function(r,s){r&1&&(C(0,"div",0)(1,"button",1),V("click",function(){return s.setCloseAlert()}),H(2,"span",2),x(),C(3,"strong",3),A(4,"\u06A9\u0627\u0631\u0628\u0631 \u06AF\u0631\u0627\u0645\u06CC!"),x(),A(5," \u062C\u0647\u062A \u06A9\u0633\u0628 \u062A\u062C\u0631\u0628\u0647 \u0628\u0647\u062A\u0631 \u0627\u0632 \u0646\u0633\u062E\u0647 \u0645\u0648\u0628\u0627\u06CC\u0644 \u0627\u06CC\u0632\u06CC\u200C \u062A\u0631\u06CC\u062F\u0631 \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0646\u0645\u0627\u06CC\u06CC\u062F. "),C(6,"a",4),A(7,"\u0648\u0631\u0648\u062F \u0628\u0647 \u0646\u0633\u062E\u0647 \u0645\u0648\u0628\u0627\u06CC\u0644"),x()()),r&2&&F("ngClass",s.closeAlert()?"d-none":"d-flex")},dependencies:[Ke],encapsulation:2,changeDetection:0});let i=e;return i})();var sse=["modalContent"],ose=["modalSwiperContainer"],ase=["divSwiper"],lse=(i,e)=>e.id;function cse(i,e){if(i&1&&(C(0,"swiper-slide",8)(1,"div")(2,"div",12),H(3,"img",13),x(),C(4,"div",14)(5,"div",15),A(6),x(),C(7,"p",16),A(8),x()()()()),i&2){let t=e.$implicit;_(),x2("background-color",t.backgroundColor),_(2),F("src",t.media,b2),_(3),Re(t.title),_(2),Re(t.description)}}function use(i,e){if(i&1){let t=ne();C(0,"button",10),V("tap",function(){z(t);let r=P(2);return W(r.prev())}),A(1,"\u0642\u0628\u0644\u06CC"),x()}}function dse(i,e){if(i&1){let t=ne();H(0,"div",4),C(1,"div",5,1)(3,"div",6,2)(5,"swiper-container",7,3),St(7,cse,9,5,"swiper-slide",8,lse),x(),C(9,"div",9)(10,"button",10),V("tap",function(){z(t);let r=P();return W(r.next())}),A(11),x(),Z(12,use,2,0,"button",11),x()()()}if(i&2){let t=P();_(7),xt(t.data()),_(4),Re(t.buttonTitle()),_(),q(t.showPrevButton()?12:-1)}}var ZN=(()=>{let e=class e{constructor(){this.modalSlierService=ee(l0),this.modalService=ee(Ol),this.showModal$=Ft(this.modalSlierService.showModal),this.data=Ce(this.modalSlierService.data$.pipe(Je(n=>{n?.length>0&&(this.modalSlierService.showSliderModal(),setTimeout(()=>this.initialComponent(),10))}))),this.buttonTitle=pe("\u0628\u0639\u062F\u06CC"),this.showModalContent=()=>{let n={backdrop:!0,scrollable:!0,keyboard:!1,size:"xl"};this.modalService.open(this.modalContent,n)},this.checkPrevButton=()=>this.showPrevButton.set(this.modalSwiperContainer?.nativeElement?.swiper?.activeIndex>0),this.showPrevButton=pe(!1),this.prev=()=>{this.modalSwiperContainer?.nativeElement?.swiper.slidePrev(),this.checkPrevButton()},Ce(this.showModal$.pipe(gf(),gt(Boolean),Je(this.showModalContent)))}closeModal(){this.modalService.dismissAll(),this.divSwiper.nativeElement.className=this.divSwiper?.nativeElement?.className?.replaceAll("open",""),setTimeout(()=>{this.modalSlierService.closeSliderModal(this.data()?.[0].featureId)},220)}next(){this.data()?.length-1>this.modalSwiperContainer?.nativeElement?.swiper?.activeIndex?(this.modalSwiperContainer?.nativeElement?.swiper.slideNext(),this.buttonTitle.set(this.modalSwiperContainer?.nativeElement?.swiper?.activeIndex===this.data()?.length-1?"\u0634\u0631\u0648\u0639":"\u0628\u0639\u062F\u06CC"),this.checkPrevButton()):this.closeModal()}initialComponent(){let n={pagination:{clickable:!0},injectStyles:[`.swiper-pagination-bullet {
					width: 5px;
					height: 5px;
					background-color: rgba(var(--color-emphasis-rgb),0.1);
					opacity: 1;
					margin: 0 2px !important;
					transition: 0.2s ease;
				}
				
				.swiper-pagination-bullet-active {
					background-color: var(--bs-global);
					width: 16px;
					border-radius: 20px;
					box-shadow: 0px 1px 6px rgba(0, 150, 183, 0.20);
				}
				
				.swiper-pagination {
					position: static;
					margin-bottom: 1rem;
				}
				`]};this.modalSwiperContainer?.nativeElement&&(Object.assign(this.modalSwiperContainer.nativeElement,n),this.modalSwiperContainer?.nativeElement.initialize(),this.modalSwiperContainer?.nativeElement.swiper.on("slideChange",r=>{this.buttonTitle.set(r.activeIndex===this.data()?.length-1?"\u0634\u0631\u0648\u0639":"\u0628\u0639\u062F\u06CC"),this.checkPrevButton()})),setTimeout(()=>{this.divSwiper.nativeElement.className=this.divSwiper?.nativeElement?.className+" open"},200)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["modal-slider"]],viewQuery:function(r,s){if(r&1&&(bi(sse,7),bi(ose,5),bi(ase,5)),r&2){let o;Si(o=xi())&&(s.modalContent=o.first),Si(o=xi())&&(s.modalSwiperContainer=o.first),Si(o=xi())&&(s.divSwiper=o.first)}},decls:2,vars:0,consts:[["modalContent",""],["modalBody",""],["divSwiper",""],["modalSwiperContainer",""],[1,"modal-header","align-items-center","d-none"],[1,"modal-body","p-0"],[1,"swiper","bg-principal","bg-principal-3x-dark","shadow-lg","text-dark","position-relative","overflow-hidden"],["init","false"],[1,"d-block"],[1,"d-flex","justify-content-between","flex-row-reverse","px-3","pb-3"],["type","button",1,"btn","btn-global",3,"tap"],["type","button",1,"btn","btn-global"],[1,"text-end"],[1,"img-fluid",3,"src"],[1,"p-3","pt-4","bg-principal","bg-principal-3x-dark"],[1,"fs-5","fw-bold","mb-2","text-body"],[1,"text-secondary","mb-0"]],template:function(r,s){r&1&&Z(0,dse,13,2,"ng-template",null,0,Wi)},encapsulation:2});let i=e;return i})();var hse=i=>({"internet-offline":i}),QN=(()=>{let e=class e{initiateUserInGTM(){let n=this.authService.checkLoginSuccess$.pipe(mf(1e3),hs(1),pn(()=>n.unsubscribe())).subscribe(()=>{"dataLayer"in window&&Array.isArray(window.dataLayer)&&(window.dataLayer.push({user_id:this.accountService.userAccountInfo?.value?.nationalId}),window.dataLayer.push({is_guest:this.userService.isGuestUser?1:0}))})}constructor(){this.authService=ee(Vo),this.accountService=ee(Er),this.symbolService=ee(Ll),this.lsTempService=ee(pA),this.lsService=ee(Cs),this.marketSheetLsService=ee(hA),this.orderLsNewService=ee(LA),this.moneyService=ee(_s),this.portfolioService=ee(p0),this.conditionalNotificationService=ee(Nd),this.generalHotkeysService=ee(t0),this.settingFacadeService=ee(xs),this.notificationService=ee(pi),this.pwaService=ee(i0),this.dimensionsService=ee($M),this.userDeviceService=ee(Aa),this.agreementFacade=ee(QA),this.userService=ee(Ml),this.environment=ee(Td),this.messageFacade=ee(Bl),this.algoFacade=ee(Od),this.orderFacade=ee(c0),this.positionFacade=ee(C0),this.unleashService=ee(Xn),this.portfolioFacadeService=ee(Ld),this.contractFacade=ee(JA),this.ipoFacade=ee(x0),this.marketWatchFacade=ee(k6),this.noteFacade=ee(s6),this.walletCardService=ee(Ho),this.fundsFacade=ee(S0),this.setting=Ce(this.settingFacadeService.getSettings$().pipe(Je(n=>{this.notificationService.canShowNotification.set(n.showNotifications)}))),Ce(this.authService.logoutFromApp$.pipe(Je(()=>{this.lsService.unsubscribeAllAndDisconnect(),this.marketSheetLsService.unsubscribeAllAndDisconnect()}))),Ce(this.fundsFacade.loadFundData().pipe(hs(1)))}ngOnInit(){this.userService.userChecked$.pipe(Di(Boolean)).subscribe(()=>{this.positionFacade.load(),Zy({customerIsin:this.accountService?.userAccountInfo?.value?.customerIsin,version:this.environment.version,build:this.environment.build})}),this.walletCardService.getWalletUserInfo().subscribe(),this.userDeviceService.setUserDevice(Cn.Desktop),this.pwaService.subscribeToUpdateApp(),this.calculateDeviceDimensions(),this.unleashService.init(),this.loadData(),this.getSectors(),this.initiateUserInGTM(),this.marketWatchFacade.loadCategories(),(this.authService.hasClaim(Xc.OptionBuy)||this.authService.hasClaim(Xc.OptionSell))&&this.positionFacade.load()}getSectors(){this.symbolService.sectors().subscribe()}loadData(){let n=this.accountService.userAccountInfo$.pipe(Di(r=>r?.customerIsin?.length>0),pn(()=>n.unsubscribe())).subscribe(()=>{this.connectToLs()});this.orderFacade.load(),this.userDeviceService.sendUserDesktopDeviceInfo(),this.userDeviceService.checkInfrastructure(),this.settingFacadeService.loadSetting(),this.checkSymbolsOnLoad(),this.initGeneralHotkeys(),this.portfolioFacadeService.loadPortfolioItems(),this.portfolioFacadeService.subscribeToPerformanceLS(),this.ipoFacade.loadIposAndNoneEtfs(),this.subscribeToMessages(),this.marketSheetLsService.start(),this.agreementFacade.loadAgreements(),this.contractFacade.loadContracts(),this.initStockConditions(),this.noteFacade.loadUserNotes()}calculateDeviceDimensions(){let n=document.getElementById("root"),r=n.getBoundingClientRect().width,s=n.getBoundingClientRect().height;this.dimensionsService.setDimensions(r,s)}connectToLs(){this.lsTempService.start(),this.lsService.waitForStableConnection().subscribe(()=>{this.userService.isGuestUser||this.lsSubscriptions()})}subscribeToMessages(){this.getMessages()}getMessages(){this.messageFacade.loadAllMessageTypes()}subscribeToLsMessages(){this.messageFacade.subscribeToLs()}lsSubscriptions(){this.orderLsNewService.subscribeLsForOrderChanges(),this.moneyService.subscribeLsForBalanceChanges(),this.subscribeToLsMessages()}checkSymbolsOnLoad(){this.symbolService.checkSymbolsOnLoad()}initStockConditions(){this.conditionalNotificationService.initStockConditions()}initGeneralHotkeys(){this.generalHotkeysService.initHotkeys()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["app-root"]],viewQuery:function(r,s){if(r&1&&bi(lb,7),r&2){let o;Si(o=xi())&&(s.connectionState=o.first)}},decls:10,vars:7,consts:[[3,"isMobile"],["id","root",3,"ngClass"],[1,"position-relative",2,"z-index","121"]],template:function(r,s){r&1&&H(0,"connection-state",0)(1,"size-warning")(2,"main-layout",1)(3,"app-notify",0)(4,"waiting-for-login",0)(5,"release-notes",2)(6,"connection-failed",0)(7,"user-warning-modal")(8,"lib-caution-modal")(9,"modal-slider"),r&2&&(F("isMobile",!1),_(2),F("ngClass",de(5,hse,s.connectionState.barMessage())),_(),F("isMobile",!1),_(),F("isMobile",!1),_(2),F("isMobile",!1))},dependencies:[P3,lb,Oe,Ke,bA,yA,fA,SA,r6,qN,XN,ZN],styles:[`.internet-offline .d-main{padding-top:30px!important}.internet-offline .menu{top:28px!important}.alert-dismissible{padding-left:4rem;padding-right:1.25rem}.alert-dismissible .btn-close{right:auto;left:0}
/*# sourceMappingURL=d.app.component-BU5TBIC6.css.map */
`],encapsulation:2});let i=e;return i})();var Lt=function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i}(Lt||{}),fa="*";function JN(i,e=null){return{type:Lt.Sequence,steps:i,options:e}}function B1(i){return{type:Lt.Style,styles:i,offset:null}}var Fc=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},$g=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,n=0,r=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(n=>{let r=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(r)})}getPosition(){let e=this.players.reduce((t,n)=>t===null||n.totalTime>t.totalTime?n:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},fC="!";function e4(i){return new Zt(3e3,!1)}function pse(){return new Zt(3100,!1)}function mse(){return new Zt(3101,!1)}function gse(i){return new Zt(3001,!1)}function fse(i){return new Zt(3003,!1)}function vse(i){return new Zt(3004,!1)}function yse(i,e){return new Zt(3005,!1)}function Cse(){return new Zt(3006,!1)}function bse(){return new Zt(3007,!1)}function Sse(i,e){return new Zt(3008,!1)}function xse(i){return new Zt(3002,!1)}function _se(i,e,t,n,r){return new Zt(3010,!1)}function wse(){return new Zt(3011,!1)}function Ese(){return new Zt(3012,!1)}function Tse(){return new Zt(3200,!1)}function Mse(){return new Zt(3202,!1)}function Ase(){return new Zt(3013,!1)}function Pse(i){return new Zt(3014,!1)}function Dse(i){return new Zt(3015,!1)}function kse(i){return new Zt(3016,!1)}function Ise(i,e){return new Zt(3404,!1)}function Fse(i){return new Zt(3502,!1)}function Ose(i){return new Zt(3503,!1)}function Lse(){return new Zt(3300,!1)}function Rse(i){return new Zt(3504,!1)}function Nse(i){return new Zt(3301,!1)}function Vse(i,e){return new Zt(3302,!1)}function Bse(i){return new Zt(3303,!1)}function Gse(i,e){return new Zt(3400,!1)}function Use(i){return new Zt(3401,!1)}function Hse(i){return new Zt(3402,!1)}function zse(i,e){return new Zt(3505,!1)}function Oc(i){switch(i.length){case 0:return new Fc;case 1:return i[0];default:return new $g(i)}}function m4(i,e,t=new Map,n=new Map){let r=[],s=[],o=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),u=c==o,d=u&&a||new Map;l.forEach((h,p)=>{let m=p,g=h;if(p!=="offset")switch(m=i.normalizePropertyName(m,r),g){case fC:g=t.get(p);break;case fa:g=n.get(p);break;default:g=i.normalizeStyleValue(p,m,g,r);break}d.set(m,g)}),u||s.push(d),a=d,o=c}),r.length)throw Fse(r);return s}function aw(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&G1(t,"start",i)));break;case"done":i.onDone(()=>n(t&&G1(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&G1(t,"destroy",i)));break}}function G1(i,e,t){let n=t.totalTime,r=!!t.disabled,s=lw(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,n??i.totalTime,r),o=i._data;return o!=null&&(s._data=o),s}function lw(i,e,t,n,r="",s=0,o){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function ls(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function t4(i){let e=i.indexOf(":"),t=i.substring(1,e),n=i.slice(e+1);return[t,n]}var Wse=typeof document>"u"?null:document.documentElement;function cw(i){let e=i.parentNode||i.host||null;return e===Wse?null:e}function $se(i){return i.substring(1,6)=="ebkit"}var Qu=null,i4=!1;function Kse(i){Qu||(Qu=jse()||{},i4=Qu.style?"WebkitAppearance"in Qu.style:!1);let e=!0;return Qu.style&&!$se(i)&&(e=i in Qu.style,!e&&i4&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in Qu.style)),e}function jse(){return typeof document<"u"?document.body:null}function g4(i,e){for(;e;){if(e===i)return!0;e=cw(e)}return!1}function f4(i,e,t){if(t)return Array.from(i.querySelectorAll(e));let n=i.querySelector(e);return n?[n]:[]}var uw=(()=>{class i{validateStyleProperty(t){return Kse(t)}containsElement(t,n){return g4(t,n)}getParentElement(t){return cw(t)}query(t,n,r){return f4(t,n,r)}computeStyle(t,n,r){return r||""}animate(t,n,r,s,o,a=[],l){return new Fc(r,s)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Hi({token:i,factory:i.\u0275fac})}return i})(),td=class{static NOOP=new uw},id=class{};var Yse=1e3,v4="{{",qse="}}",y4="ng-enter",K1="ng-leave",vC="ng-trigger",xC=".ng-trigger",n4="ng-animating",j1=".ng-animating";function pl(i){if(typeof i=="number")return i;let e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Y1(parseFloat(e[1]),e[2])}function Y1(i,e){switch(e){case"s":return i*Yse;default:return i}}function _C(i,e,t){return i.hasOwnProperty("duration")?i:Xse(i,e,t)}function Xse(i,e,t){let n=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,s=0,o="";if(typeof i=="string"){let a=i.match(n);if(a===null)return e.push(e4(i)),{duration:0,delay:0,easing:""};r=Y1(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(s=Y1(parseFloat(l),a[4]));let c=a[5];c&&(o=c)}else r=i;if(!t){let a=!1,l=e.length;r<0&&(e.push(pse()),a=!0),s<0&&(e.push(mse()),a=!0),a&&e.splice(l,0,e4(i))}return{duration:r,delay:s,easing:o}}function Zse(i){return i.length?i[0]instanceof Map?i:i.map(e=>new Map(Object.entries(e))):[]}function va(i,e,t){e.forEach((n,r)=>{let s=dw(r);t&&!t.has(r)&&t.set(r,i.style[s]),i.style[s]=n})}function ed(i,e){e.forEach((t,n)=>{let r=dw(n);i.style[r]=""})}function Kg(i){return Array.isArray(i)?i.length==1?i[0]:JN(i):i}function Qse(i,e,t){let n=e.params||{},r=C4(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||t.push(gse(s))})}var q1=new RegExp(`${v4}\\s*(.+?)\\s*${qse}`,"g");function C4(i){let e=[];if(typeof i=="string"){let t;for(;t=q1.exec(i);)e.push(t[1]);q1.lastIndex=0}return e}function Yg(i,e,t){let n=`${i}`,r=n.replace(q1,(s,o)=>{let a=e[o];return a==null&&(t.push(fse(o)),a=""),a.toString()});return r==n?i:r}var Jse=/-+([a-z0-9])/g;function dw(i){return i.replace(Jse,(...e)=>e[1].toUpperCase())}function eoe(i,e){return i===0||e===0}function toe(i,e,t){if(t.size&&e.length){let n=e[0],r=[];if(t.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,hw(i,a)))}}return e}function as(i,e,t){switch(e.type){case Lt.Trigger:return i.visitTrigger(e,t);case Lt.State:return i.visitState(e,t);case Lt.Transition:return i.visitTransition(e,t);case Lt.Sequence:return i.visitSequence(e,t);case Lt.Group:return i.visitGroup(e,t);case Lt.Animate:return i.visitAnimate(e,t);case Lt.Keyframes:return i.visitKeyframes(e,t);case Lt.Style:return i.visitStyle(e,t);case Lt.Reference:return i.visitReference(e,t);case Lt.AnimateChild:return i.visitAnimateChild(e,t);case Lt.AnimateRef:return i.visitAnimateRef(e,t);case Lt.Query:return i.visitQuery(e,t);case Lt.Stagger:return i.visitStagger(e,t);default:throw vse(e.type)}}function hw(i,e){return window.getComputedStyle(i)[e]}var ioe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),wC=class extends id{normalizePropertyName(e,t){return dw(e)}normalizeStyleValue(e,t,n,r){let s="",o=n.toString().trim();if(ioe.has(t)&&n!==0&&n!=="0")if(typeof n=="number")s="px";else{let a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(yse(e,n))}return o+s}};var EC="*";function noe(i,e){let t=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(n=>roe(n,t,e)):t.push(i),t}function roe(i,e,t){if(i[0]==":"){let l=soe(i,t);if(typeof l=="function"){e.push(l);return}i=l}let n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return t.push(Dse(i)),e;let r=n[1],s=n[2],o=n[3];e.push(r4(r,o));let a=r==EC&&o==EC;s[0]=="<"&&!a&&e.push(r4(o,r))}function soe(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(kse(i)),"* => *"}}var yC=new Set(["true","1"]),CC=new Set(["false","0"]);function r4(i,e){let t=yC.has(i)||CC.has(i),n=yC.has(e)||CC.has(e);return(r,s)=>{let o=i==EC||i==r,a=e==EC||e==s;return!o&&t&&typeof r=="boolean"&&(o=r?yC.has(i):CC.has(i)),!a&&n&&typeof s=="boolean"&&(a=s?yC.has(e):CC.has(e)),o&&a}}var b4=":self",ooe=new RegExp(`s*${b4}s*,?`,"g");function S4(i,e,t,n){return new X1(i).build(e,t,n)}var s4="",X1=class{_driver;constructor(e){this._driver=e}build(e,t,n){let r=new Z1(t);return this._resetContextStyleTimingState(r),as(this,Kg(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=s4,e.collectedStyles=new Map,e.collectedStyles.set(s4,new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(Cse()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Lt.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(a.type==Lt.Transition){let l=this.visitTransition(a,t);n+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(bse())}),{type:Lt.Trigger,name:e.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(e,t){let n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){let s=new Set,o=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{C4(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&t.errors.push(Sse(e.name,[...s.values()]))}return{type:Lt.State,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let n=as(this,Kg(e.animation),t),r=noe(e.expr,t.errors);return{type:Lt.Transition,matchers:r,animation:n,queryCount:t.queryCount,depCount:t.depCount,options:Ju(e.options)}}visitSequence(e,t){return{type:Lt.Sequence,steps:e.steps.map(n=>as(this,n,t)),options:Ju(e.options)}}visitGroup(e,t){let n=t.currentTime,r=0,s=e.steps.map(o=>{t.currentTime=n;let a=as(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:Lt.Group,steps:s,options:Ju(e.options)}}visitAnimate(e,t){let n=uoe(e.timings,t.errors);t.currentAnimateTimings=n;let r,s=e.styles?e.styles:B1({});if(s.type==Lt.Keyframes)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let c={};n.easing&&(c.easing=n.easing),o=B1(c)}t.currentTime+=n.duration+n.delay;let l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:Lt.Animate,timings:n,style:r,options:null}}visitStyle(e,t){let n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){let n=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===fa?n.push(a):t.errors.push(xse(a)):n.push(new Map(Object.entries(a)));let s=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let l of a.values())if(l.toString().indexOf(v4)>=0){s=!0;break}}}),{type:Lt.Style,styles:n,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let n=t.currentAnimateTimings,r=t.currentTime,s=t.currentTime;n&&s>0&&(s-=n.duration+n.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l),d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(_se(l,u.startTime,u.endTime,s,r)),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:r}),t.options&&Qse(a,t.options,t.errors)})})}visitKeyframes(e,t){let n={type:Lt.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(wse()),n;let r=1,s=0,o=[],a=!1,l=!1,c=0,u=e.steps.map(y=>{let b=this._makeStyleAst(y,t),v=b.offset!=null?b.offset:coe(b.styles),S=0;return v!=null&&(s++,S=b.offset=v),l=l||S<0||S>1,a=a||S<c,c=S,o.push(S),b});l&&t.errors.push(Ese()),a&&t.errors.push(Tse());let d=e.steps.length,h=0;s>0&&s<d?t.errors.push(Mse()):s==0&&(h=r/(d-1));let p=d-1,m=t.currentTime,g=t.currentAnimateTimings,f=g.duration;return u.forEach((y,b)=>{let v=h>0?b==p?1:h*b:o[b],S=v*f;t.currentTime=m+g.delay+S,g.duration=S,this._validateStyleAst(y,t),y.offset=v,n.styles.push(y)}),n}visitReference(e,t){return{type:Lt.Reference,animation:as(this,Kg(e.animation),t),options:Ju(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Lt.AnimateChild,options:Ju(e.options)}}visitAnimateRef(e,t){return{type:Lt.AnimateRef,animation:this.visitReference(e.animation,t),options:Ju(e.options)}}visitQuery(e,t){let n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=aoe(e.selector);t.currentQuerySelector=n.length?n+" "+s:s,ls(t.collectedStyles,t.currentQuerySelector,new Map);let a=as(this,Kg(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:Lt.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Ju(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Ase());let n=e.timings==="full"?{duration:0,delay:0,easing:"full"}:_C(e.timings,t.errors,!0);return{type:Lt.Stagger,animation:as(this,Kg(e.animation),t),timings:n,options:null}}};function aoe(i){let e=!!i.split(/\s*,\s*/).find(t=>t==b4);return e&&(i=i.replace(ooe,"")),i=i.replace(/@\*/g,xC).replace(/@\w+/g,t=>xC+"-"+t.slice(1)).replace(/:animating/g,j1),[i,e]}function loe(i){return i?Se({},i):null}var Z1=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function coe(i){if(typeof i=="string")return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function uoe(i,e){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let s=_C(i,e).duration;return U1(s,0,"")}let t=i;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=U1(0,0,"");return s.dynamic=!0,s.strValue=t,s}let r=_C(t,e);return U1(r.duration,r.delay,r.easing)}function Ju(i){return i?(i=Se({},i),i.params&&(i.params=loe(i.params))):i={},i}function U1(i,e,t){return{duration:i,delay:e,easing:t}}function pw(i,e,t,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}var qg=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},doe=1,hoe=":enter",poe=new RegExp(hoe,"g"),moe=":leave",goe=new RegExp(moe,"g");function x4(i,e,t,n,r,s=new Map,o=new Map,a,l,c=[]){return new Q1().buildKeyframes(i,e,t,n,r,s,o,a,l,c)}var Q1=class{buildKeyframes(e,t,n,r,s,o,a,l,c,u=[]){c=c||new qg;let d=new J1(e,t,c,r,s,u,[]);d.options=l;let h=l.delay?pl(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,l),as(this,n,d);let p=d.timelines.filter(m=>m.containsAnimation());if(p.length&&a.size){let m;for(let g=p.length-1;g>=0;g--){let f=p[g];if(f.element===t){m=f;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,d.errors,l)}return p.length?p.map(m=>m.buildKeyframes()):[pw(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let n=t.subInstructions.get(t.element);if(n){let r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(let r of e){let s=r?.delay;if(s){let o=typeof s=="number"?s:pl(Yg(s,r?.params??{},t.errors));n.delayNextStep(o)}}}_visitSubInstructions(e,t,n){let s=t.currentTimeline.currentTime,o=n.duration!=null?pl(n.duration):null,a=n.delay!=null?pl(n.delay):null;return o!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),as(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let n=t.subContextCount,r=t,s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==Lt.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=TC);let o=pl(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>as(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let n=[],r=t.currentTimeline.currentTime,s=e.options&&e.options.delay?pl(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),as(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let n=e.strValue,r=t.params?Yg(n,t.params,t.errors):n;return _C(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());let s=e.style;s.type==Lt.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(n.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();let s=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(s):n.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let n=t.currentAnimateTimings,r=t.currentTimeline.duration,s=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){let n=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?pl(r.delay):0;s&&(t.previousNode.type===Lt.Style||n==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=TC);let o=n,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;let d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),as(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;o=Math.max(o,h)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let n=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime;break}let u=t.currentTimeline;l&&u.delayNextStep(l);let d=u.currentTime;as(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-d+(r.startTime-n.currentTimeline.startTime)}},TC={},J1=class i{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=TC;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,n,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=l||new MC(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let n=e,r=this.options;n.duration!=null&&(r.duration=pl(n.duration)),n.delay!=null&&(r.delay=pl(n.delay));let s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Yg(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let n=e.params={};Object.keys(t).forEach(r=>{n[r]=t[r]})}}return e}createSubContext(e=null,t,n){let r=t||this.element,s=new i(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=TC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},s=new ew(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(poe,"."+this._enterClassName),e=e.replace(goe,"."+this._leaveClassName);let l=n!=1,c=this._driver.query(this.element,e,l);n!==0&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!s&&a.length==0&&o.push(Pse(t)),a}},MC=class i{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new i(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=doe,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||fa),this._currentKeyframe.set(t,fa);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&this._previousKeyframe.set("easing",t);let s=r&&r.params||{},o=foe(e,this._globalTimelineStyles);for(let[a,l]of o){let c=Yg(l,s,n);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??fa),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{let r=this._styleSummary.get(n);(!r||t.time>r.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,n=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((u,d)=>{u===fC?e.add(d):u===fa&&t.add(d)}),n||c.set("offset",l/this.duration),r.push(c)});let s=[...e.values()],o=[...t.values()];if(n){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return pw(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}},ew=class extends MC{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,n,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=n+t,a=t/o,l=new Map(e[0]);l.set("offset",0),s.push(l);let c=new Map(e[0]);c.set("offset",o4(a)),s.push(c);let u=e.length-1;for(let d=1;d<=u;d++){let h=new Map(e[d]),p=h.get("offset"),m=t+p*n;h.set("offset",o4(m/o)),s.push(h)}n=o,t=0,r="",e=s}return pw(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}};function o4(i,e=3){let t=Math.pow(10,e-1);return Math.round(i*t)/t}function foe(i,e){let t=new Map,n;return i.forEach(r=>{if(r==="*"){n??=e.keys();for(let s of n)t.set(s,fa)}else for(let[s,o]of r)t.set(s,o)}),t}function a4(i,e,t,n,r,s,o,a,l,c,u,d,h){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}var H1={},AC=class{_triggerName;ast;_stateStyles;constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return voe(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,n):new Map}build(e,t,n,r,s,o,a,l,c,u){let d=[],h=this.ast.options&&this.ast.options.params||H1,p=a&&a.params||H1,m=this.buildStyles(n,p,d),g=l&&l.params||H1,f=this.buildStyles(r,g,d),y=new Set,b=new Map,v=new Map,S=r==="void",w={params:_4(g,h),delay:this.ast.options?.delay},T=u?[]:x4(e,t,this.ast.animation,s,o,m,f,w,c,d),D=0;return T.forEach(O=>{D=Math.max(O.duration+O.delay,D)}),d.length?a4(t,this._triggerName,n,r,S,m,f,[],[],b,v,D,d):(T.forEach(O=>{let R=O.element,L=ls(b,R,new Set);O.preStyleProps.forEach($=>L.add($));let B=ls(v,R,new Set);O.postStyleProps.forEach($=>B.add($)),R!==t&&y.add(R)}),a4(t,this._triggerName,n,r,S,m,f,T,[...y.values()],b,v,D))}};function voe(i,e,t,n,r){return i.some(s=>s(e,t,n,r))}function _4(i,e){let t=Se({},e);return Object.entries(i).forEach(([n,r])=>{r!=null&&(t[n]=r)}),t}var tw=class{styles;defaultParams;normalizer;constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){let n=new Map,r=_4(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=Yg(o,r,t));let l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),n.set(a,o)})}),n}};function yoe(i,e,t){return new iw(i,e,t)}var iw=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,t.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new tw(r.style,s,n))}),l4(this.states,"true","1"),l4(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new AC(e,r,this.states))}),this.fallbackTransition=Coe(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(o=>o.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}};function Coe(i,e,t){let n=[(o,a)=>!0],r={type:Lt.Sequence,steps:[],options:null},s={type:Lt.Transition,animation:r,matchers:n,options:null,queryCount:0,depCount:0};return new AC(i,s,e)}function l4(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}var boe=new qg,nw=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n}register(e,t){let n=[],r=[],s=S4(this._driver,t,n,r);if(n.length)throw Ose(n);r.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,t,n){let r=e.element,s=m4(this._normalizer,e.keyframes,t,n);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){let r=[],s=this._animations.get(e),o,a=new Map;if(s?(o=x4(this._driver,t,s,y4,K1,new Map,new Map,n,boe,r),o.forEach(u=>{let d=ls(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(Lse()),o=[]),r.length)throw Rse(r);a.forEach((u,d)=>{u.forEach((h,p)=>{u.set(p,this._driver.computeStyle(d,p,fa))})});let l=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),c=Oc(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw Nse(e);return t}listen(e,t,n,r){let s=lw(t,"","","");return aw(this._getPlayer(e),n,s,r),()=>{}}command(e,t,n,r){if(n=="register"){this.register(e,r[0]);return}if(n=="create"){let o=r[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},c4="ng-animate-queued",Soe=".ng-animate-queued",z1="ng-animate-disabled",xoe=".ng-animate-disabled",_oe="ng-star-inserted",woe=".ng-star-inserted",Eoe=[],w4={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Toe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Co="__ng_removed",Xg=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let n=e&&e.hasOwnProperty("value"),r=n?e.value:e;if(this.value=Aoe(r),n){let s=e,{value:o}=s,a=i2(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let n=this.options.params;Object.keys(t).forEach(r=>{n[r]==null&&(n[r]=t[r])})}}},jg="void",W1=new Xg(jg),rw=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this._hostClassName="ng-tns-"+e,zs(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.has(t))throw Vse(n,t);if(n==null||n.length==0)throw Bse(t);if(!Poe(n))throw Gse(n,t);let s=ls(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};s.push(o);let a=ls(this._engine.statesByElement,e,new Map);return a.has(t)||(zs(e,vC),zs(e,vC+"-"+t),a.set(t,W1)),()=>{this._engine.afterFlush(()=>{let l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw Use(e);return t}trigger(e,t,n,r=!0){let s=this._getTrigger(t),o=new Zg(this.id,t,e),a=this._engine.statesByElement.get(e);a||(zs(e,vC),zs(e,vC+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),c=new Xg(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=W1),!(c.value===jg)&&l.value===c.value){if(!Ioe(l.params,c.params)){let g=[],f=s.matchStyles(l.value,l.params,g),y=s.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{ed(e,f),va(e,y)})}return}let h=ls(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let p=s.matchTransition(l.value,c.value,e,c.params),m=!1;if(!p){if(!r)return;p=s.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:p,fromState:l,toState:c,player:o,isFallbackTransition:m}),m||(zs(e,c4),o.onStart(()=>{yp(e,c4)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);let f=this._engine.playersByElement.get(e);if(f){let y=f.indexOf(o);y>=0&&f.splice(y,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let n=this._engine.driver.query(e,xC,!0);n.forEach(r=>{if(r[Co])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,n,r){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){let u=this.trigger(e,c,jg,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),n&&Oc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){let r=new Set;t.forEach(s=>{let o=s.name;if(r.has(o))return;r.add(o);let l=this._triggers.get(o).fallbackTransition,c=n.get(o)||W1,u=new Xg(jg),d=new Zg(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){let n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){let s=n.players.length?n.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{let s=e[Co];(!s||s===w4)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){zs(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(n=>{let r=n.player;if(r.destroyed)return;let s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){let l=lw(s,n.triggerName,n.fromState.value,n.toState.value);l._data=e,aw(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((n,r)=>{let s=n.transition.ast.depCount,o=r.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},sw=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){let n=new rw(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){let n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let l=r.get(a);if(l){let c=n.indexOf(l);n.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(e)}else n.push(e);return r.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(e);this.namespacesByHostElement.delete(n.hostElement);let r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1),n.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,n=this.statesByElement.get(e);if(n){for(let r of n.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}}return t}trigger(e,t,n,r){if(bC(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!bC(t))return;let s=t[Co];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),zs(e,z1)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),yp(e,z1))}removeNode(e,t,n){if(bC(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,n)}else this._onRemovalComplete(t,n)}markElementAsRemoved(e,t,n,r,s){this.collectedLeaveElements.push(t),t[Co]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,n,r,s){return bC(t)?this._fetchNamespace(e).listen(t,n,r,s):()=>{}}_buildInstruction(e,t,n,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,xC,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,j1,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Oc(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Co];if(t&&t.setForRemoval){if(e[Co]=w4,t.namespaceId){this.destroyInnerAnimations(e);let n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(z1)&&this.markElementAsDisabled(e,!1),this.driver.query(e,xoe,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let r=this.collectedEnterElements[n];zs(r,_oe)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{t=this._flushAnimations(n,e)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let r=this.collectedLeaveElements[n];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],t.length?Oc(t).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(e){throw Hse(e)}_flushAnimations(e,t){let n=new qg,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(te=>{u.add(te);let j=this.driver.query(te,Soe,!0);for(let Y=0;Y<j.length;Y++)u.add(j[Y])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),p=h4(h,this.collectedEnterElements),m=new Map,g=0;p.forEach((te,j)=>{let Y=y4+g++;m.set(j,Y),te.forEach(se=>zs(se,Y))});let f=[],y=new Set,b=new Set;for(let te=0;te<this.collectedLeaveElements.length;te++){let j=this.collectedLeaveElements[te],Y=j[Co];Y&&Y.setForRemoval&&(f.push(j),y.add(j),Y.hasAnimation?this.driver.query(j,woe,!0).forEach(se=>y.add(se)):b.add(j))}let v=new Map,S=h4(h,Array.from(y));S.forEach((te,j)=>{let Y=K1+g++;v.set(j,Y),te.forEach(se=>zs(se,Y))}),e.push(()=>{p.forEach((te,j)=>{let Y=m.get(j);te.forEach(se=>yp(se,Y))}),S.forEach((te,j)=>{let Y=v.get(j);te.forEach(se=>yp(se,Y))}),f.forEach(te=>{this.processLeaveNode(te)})});let w=[],T=[];for(let te=this._namespaceList.length-1;te>=0;te--)this._namespaceList[te].drainQueuedTransitions(t).forEach(Y=>{let se=Y.player,me=Y.element;if(w.push(se),this.collectedEnterElements.length){let xe=me[Co];if(xe&&xe.setForMove){if(xe.previousTriggersValues&&xe.previousTriggersValues.has(Y.triggerName)){let $e=xe.previousTriggersValues.get(Y.triggerName),He=this.statesByElement.get(Y.element);if(He&&He.has(Y.triggerName)){let at=He.get(Y.triggerName);at.value=$e,He.set(Y.triggerName,at)}}se.destroy();return}}let re=!d||!this.driver.containsElement(d,me),ve=v.get(me),_e=m.get(me),Ge=this._buildInstruction(Y,n,_e,ve,re);if(Ge.errors&&Ge.errors.length){T.push(Ge);return}if(re){se.onStart(()=>ed(me,Ge.fromStyles)),se.onDestroy(()=>va(me,Ge.toStyles)),r.push(se);return}if(Y.isFallbackTransition){se.onStart(()=>ed(me,Ge.fromStyles)),se.onDestroy(()=>va(me,Ge.toStyles)),r.push(se);return}let Le=[];Ge.timelines.forEach(xe=>{xe.stretchStartingKeyframe=!0,this.disabledNodes.has(xe.element)||Le.push(xe)}),Ge.timelines=Le,n.append(me,Ge.timelines);let We={instruction:Ge,player:se,element:me};o.push(We),Ge.queriedElements.forEach(xe=>ls(a,xe,[]).push(se)),Ge.preStyleProps.forEach((xe,$e)=>{if(xe.size){let He=l.get($e);He||l.set($e,He=new Set),xe.forEach((at,Ct)=>He.add(Ct))}}),Ge.postStyleProps.forEach((xe,$e)=>{let He=c.get($e);He||c.set($e,He=new Set),xe.forEach((at,Ct)=>He.add(Ct))})});if(T.length){let te=[];T.forEach(j=>{te.push(zse(j.triggerName,j.errors))}),w.forEach(j=>j.destroy()),this.reportError(te)}let D=new Map,O=new Map;o.forEach(te=>{let j=te.element;n.has(j)&&(O.set(j,j),this._beforeAnimationBuild(te.player.namespaceId,te.instruction,D))}),r.forEach(te=>{let j=te.element;this._getPreviousPlayers(j,!1,te.namespaceId,te.triggerName,null).forEach(se=>{ls(D,j,[]).push(se),se.destroy()})});let R=f.filter(te=>p4(te,l,c)),L=new Map;d4(L,this.driver,b,c,fa).forEach(te=>{p4(te,l,c)&&R.push(te)});let $=new Map;p.forEach((te,j)=>{d4($,this.driver,new Set(te),l,fC)}),R.forEach(te=>{let j=L.get(te),Y=$.get(te);L.set(te,new Map([...j?.entries()??[],...Y?.entries()??[]]))});let U=[],K=[],ie={};o.forEach(te=>{let{element:j,player:Y,instruction:se}=te;if(n.has(j)){if(u.has(j)){Y.onDestroy(()=>va(j,se.toStyles)),Y.disabled=!0,Y.overrideTotalTime(se.totalTime),r.push(Y);return}let me=ie;if(O.size>1){let ve=j,_e=[];for(;ve=ve.parentNode;){let Ge=O.get(ve);if(Ge){me=Ge;break}_e.push(ve)}_e.forEach(Ge=>O.set(Ge,me))}let re=this._buildAnimation(Y.namespaceId,se,D,s,$,L);if(Y.setRealPlayer(re),me===ie)U.push(Y);else{let ve=this.playersByElement.get(me);ve&&ve.length&&(Y.parentPlayer=Oc(ve)),r.push(Y)}}else ed(j,se.fromStyles),Y.onDestroy(()=>va(j,se.toStyles)),K.push(Y),u.has(j)&&r.push(Y)}),K.forEach(te=>{let j=s.get(te.element);if(j&&j.length){let Y=Oc(j);te.setRealPlayer(Y)}}),r.forEach(te=>{te.parentPlayer?te.syncPlayerEvents(te.parentPlayer):te.destroy()});for(let te=0;te<f.length;te++){let j=f[te],Y=j[Co];if(yp(j,K1),Y&&Y.hasAnimation)continue;let se=[];if(a.size){let re=a.get(j);re&&re.length&&se.push(...re);let ve=this.driver.query(j,j1,!0);for(let _e=0;_e<ve.length;_e++){let Ge=a.get(ve[_e]);Ge&&Ge.length&&se.push(...Ge)}}let me=se.filter(re=>!re.destroyed);me.length?Doe(this,j,me):this.processLeaveNode(j)}return f.length=0,U.forEach(te=>{this.players.push(te),te.onDone(()=>{te.destroy();let j=this.players.indexOf(te);this.players.splice(j,1)}),te.play()}),U}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let l=!s||s==jg;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,n){let r=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let c=l.element,u=c!==s,d=ls(n,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(p=>{let m=p.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),p.destroy(),d.push(p)})}ed(s,t.fromStyles)}_buildAnimation(e,t,n,r,s,o){let a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(m=>{let g=m.element;u.add(g);let f=g[Co];if(f&&f.removedBeforeQueried)return new Fc(m.duration,m.delay);let y=g!==l,b=koe((n.get(g)||Eoe).map(D=>D.getRealPlayer())).filter(D=>{let O=D;return O.element?O.element===g:!1}),v=s.get(g),S=o.get(g),w=m4(this._normalizer,m.keyframes,v,S),T=this._buildPlayer(m,w,b);if(m.subTimeline&&r&&d.add(g),y){let D=new Zg(e,a,g);D.setRealPlayer(T),c.push(D)}return T});c.forEach(m=>{ls(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>Moe(this.playersByQueriedElement,m.element,m))}),u.forEach(m=>zs(m,n4));let p=Oc(h);return p.onDestroy(()=>{u.forEach(m=>yp(m,n4)),va(l,t.toStyles)}),d.forEach(m=>{ls(r,m,[]).push(p)}),p}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new Fc(e.duration,e.delay)}},Zg=class{namespaceId;triggerName;element;_player=new Fc;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(r=>aw(e,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ls(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Moe(i,e,t){let n=i.get(e);if(n){if(n.length){let r=n.indexOf(t);n.splice(r,1)}n.length==0&&i.delete(e)}return n}function Aoe(i){return i??null}function bC(i){return i&&i.nodeType===1}function Poe(i){return i=="start"||i=="done"}function u4(i,e){let t=i.style.display;return i.style.display=e??"none",t}function d4(i,e,t,n,r){let s=[];t.forEach(l=>s.push(u4(l)));let o=[];n.forEach((l,c)=>{let u=new Map;l.forEach(d=>{let h=e.computeStyle(c,d,r);u.set(d,h),(!h||h.length==0)&&(c[Co]=Toe,o.push(c))}),i.set(c,u)});let a=0;return t.forEach(l=>u4(l,s[a++])),o}function h4(i,e){let t=new Map;if(i.forEach(a=>t.set(a,[])),e.length==0)return t;let n=1,r=new Set(e),s=new Map;function o(a){if(!a)return n;let l=s.get(a);if(l)return l;let c=a.parentNode;return t.has(c)?l=c:r.has(c)?l=n:l=o(c),s.set(a,l),l}return e.forEach(a=>{let l=o(a);l!==n&&t.get(l).push(a)}),t}function zs(i,e){i.classList?.add(e)}function yp(i,e){i.classList?.remove(e)}function Doe(i,e,t){Oc(t).onDone(()=>i.processLeaveNode(e))}function koe(i){let e=[];return E4(i,e),e}function E4(i,e){for(let t=0;t<i.length;t++){let n=i[t];n instanceof $g?E4(n.players,e):e.push(n)}}function Ioe(i,e){let t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){let s=t[r];if(!e.hasOwnProperty(s)||i[s]!==e[s])return!1}return!0}function p4(i,e,t){let n=t.get(i);if(!n)return!1;let r=e.get(i);return r?n.forEach(s=>r.add(s)):e.set(i,n),t.delete(i),!0}var Cp=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,n){this._driver=t,this._normalizer=n,this._transitionEngine=new sw(e.body,t,n),this._timelineEngine=new nw(e.body,t,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,n,r,s){let o=e+"-"+r,a=this._triggerCache[o];if(!a){let l=[],c=[],u=S4(this._driver,s,l,c);if(l.length)throw Ise(r,l);c.length&&void 0,a=yoe(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n){this._transitionEngine.removeNode(e,t,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if(n.charAt(0)=="@"){let[s,o]=t4(n),a=r;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,s){if(n.charAt(0)=="@"){let[o,a]=t4(n);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,n,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Foe(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=$1(e[0]),e.length>1&&(n=$1(e[e.length-1]))):e instanceof Map&&(t=$1(e)),t||n?new Ooe(i,t,n):null}var Ooe=(()=>{class i{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r;let s=i.initialStylesByElement.get(t);s||i.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&va(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(va(this._element,this._initialStyles),this._endStyles&&(va(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(ed(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ed(this._element,this._endStyles),this._endStyles=null),va(this._element,this._initialStyles),this._state=3)}}return i})();function $1(i){let e=null;return i.forEach((t,n)=>{Loe(n)&&(e=e||new Map,e.set(n,t))}),e}function Loe(i){return i==="display"||i==="position"}var PC=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{r!=="offset"&&e.set(r,this._finished?n:hw(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},DC=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return g4(e,t)}getParentElement(e){return cw(e)}query(e,t,n){return f4(e,t,n)}computeStyle(e,t,n){return hw(e,t)}animate(e,t,n,r,s,o=[]){let a=r==0?"both":"forwards",l={duration:n,delay:r,fill:a};s&&(l.easing=s);let c=new Map,u=o.filter(p=>p instanceof PC);eoe(n,r)&&u.forEach(p=>{p.currentSnapshot.forEach((m,g)=>c.set(g,m))});let d=Zse(t).map(p=>new Map(p));d=toe(e,d,c);let h=Foe(e,d);return new PC(e,d,l,h)}};var SC="@",T4="@.disabled",kC=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,n,r){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==SC&&t==T4?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},ow=class extends kC{factory;constructor(e,t,n,r,s){super(t,n,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==SC?t.charAt(1)=="."&&t==T4?(n=n===void 0?!0:!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if(t.charAt(0)==SC){let r=Roe(e),s=t.slice(1),o="";return s.charAt(0)!=SC&&([s,o]=Noe(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{let l=a._data||-1;this.factory.scheduleListenerCallback(l,n,a)})}return this.delegate.listen(e,t,n)}};function Roe(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function Noe(i){let e=i.indexOf("."),t=i.substring(0,e),n=i.slice(e+1);return[t,n]}var IC=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,t.onRemovalComplete=(r,s)=>{s?.removeChild(null,r)}}createRenderer(e,t){let n="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,u=c.get(r);if(!u){let d=()=>c.delete(r);u=new kC(n,r,this.engine,d),c.set(r,u)}return u}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(s,o,e,c.name,c)};return t.data.animation.forEach(a),new ow(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(n));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var Boe=(()=>{class i extends Cp{constructor(t,n,r){super(t,n,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(n){return new(n||i)(en(k2),en(td),en(id))};static \u0275prov=Hi({token:i,factory:i.\u0275fac})}return i})();function Goe(){return new wC}function Uoe(i,e,t){return new IC(i,e,t)}var A4=[{provide:id,useFactory:Goe},{provide:Cp,useClass:Boe},{provide:S2,useFactory:Uoe,deps:[V2,Cp,Cf]}],M4=[{provide:td,useFactory:()=>new DC},{provide:JC,useValue:"BrowserAnimations"},...A4],Hoe=[{provide:td,useClass:uw},{provide:JC,useValue:"NoopAnimations"},...A4],P4=(()=>{class i{static withConfig(t){return{ngModule:i,providers:t.disableAnimations?Hoe:M4}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=_f({type:i});static \u0275inj=yf({providers:M4,imports:[Af]})}return i})();var Jg="PERFORM_ACTION",zoe="REFRESH",L4="RESET",R4="ROLLBACK",N4="COMMIT",V4="SWEEP",B4="TOGGLE_ACTION",Woe="SET_ACTIONS_ACTIVE",G4="JUMP_TO_STATE",U4="JUMP_TO_ACTION",Tw="IMPORT_STATE",H4="LOCK_CHANGES",z4="PAUSE_RECORDING",bp=class{constructor(e,t){if(this.action=e,this.timestamp=t,this.type=Jg,typeof e.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},mw=class{constructor(){this.type=zoe}},gw=class{constructor(e){this.timestamp=e,this.type=L4}},fw=class{constructor(e){this.timestamp=e,this.type=R4}},vw=class{constructor(e){this.timestamp=e,this.type=N4}},yw=class{constructor(){this.type=V4}},Cw=class{constructor(e){this.id=e,this.type=B4}};var bw=class{constructor(e){this.index=e,this.type=G4}},Sw=class{constructor(e){this.actionId=e,this.type=U4}},xw=class{constructor(e){this.nextLiftedState=e,this.type=Tw}},_w=class{constructor(e){this.status=e,this.type=H4}},ww=class{constructor(e){this.status=e,this.type=z4}};var RC=new Dp("@ngrx/store-devtools Options"),D4=new Dp("@ngrx/store-devtools Initial Config");function W4(){return null}var $oe="NgRx Store DevTools";function Koe(i){let e={maxAge:!1,monitor:W4,actionSanitizer:void 0,stateSanitizer:void 0,name:$oe,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},t=typeof i=="function"?i():i,n=t.logOnly?{pause:!0,export:!0,test:!0}:!1,r=t.features||n||e.features;r.import===!0&&(r.import="custom");let s=Object.assign({},e,{features:r},t);if(s.maxAge&&s.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${s.maxAge}`);return s}function k4(i,e){return i.filter(t=>e.indexOf(t)<0)}function $4(i){let{computedStates:e,currentStateIndex:t}=i;if(t>=e.length){let{state:r}=e[e.length-1];return r}let{state:n}=e[t];return n}function Qg(i){return new bp(i,+Date.now())}function joe(i,e){return Object.keys(e).reduce((t,n)=>{let r=Number(n);return t[r]=K4(i,e[r],r),t},{})}function K4(i,e,t){return dt(Se({},e),{action:i(e.action,t)})}function Yoe(i,e){return e.map((t,n)=>({state:j4(i,t.state,n),error:t.error}))}function j4(i,e,t){return i(e,t)}function Y4(i){return i.predicate||i.actionsSafelist||i.actionsBlocklist}function qoe(i,e,t,n){let r=[],s={},o=[];return i.stagedActionIds.forEach((a,l)=>{let c=i.actionsById[a];c&&(l&&Mw(i.computedStates[l],c,e,t,n)||(s[a]=c,r.push(a),o.push(i.computedStates[l])))}),dt(Se({},i),{stagedActionIds:r,actionsById:s,computedStates:o})}function Mw(i,e,t,n,r){let s=t&&!t(i,e.action),o=n&&!e.action.type.match(n.map(l=>I4(l)).join("|")),a=r&&e.action.type.match(r.map(l=>I4(l)).join("|"));return s||o||a}function I4(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function q4(i){return{ngZone:i?ee(Cf):null,connectInZone:i}}var NC=(()=>{let e=class e extends a0{};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=Mo(e)))(s||e)}})(),e.\u0275prov=Hi({token:e,factory:e.\u0275fac});let i=e;return i})(),FC={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Ew=new Dp("@ngrx/store-devtools Redux Devtools Extension"),X4=(()=>{let e=class e{constructor(n,r,s){this.config=r,this.dispatcher=s,this.zoneConfig=q4(this.config.connectInZone),this.devtoolsExtension=n,this.createActionStreams()}notify(n,r){if(this.devtoolsExtension)if(n.type===Jg){if(r.isLocked||r.isPaused)return;let s=$4(r);if(Y4(this.config)&&Mw(s,n,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let o=this.config.stateSanitizer?j4(this.config.stateSanitizer,s,r.currentStateIndex):s,a=this.config.actionSanitizer?K4(this.config.actionSanitizer,n,r.nextActionId):n;this.sendToReduxDevtools(()=>this.extensionConnection.send(a,o))}else{let s=dt(Se({},r),{stagedActionIds:r.stagedActionIds,actionsById:this.config.actionSanitizer?joe(this.config.actionSanitizer,r.actionsById):r.actionsById,computedStates:this.config.stateSanitizer?Yoe(this.config.stateSanitizer,r.computedStates):r.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,s,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new QC(n=>{let r=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=r,r.init(),r.subscribe(s=>n.next(s)),r.unsubscribe}):ld}createActionStreams(){let n=this.createChangesObservable().pipe(g2()),r=n.pipe(gt(u=>u.type===FC.START)),s=n.pipe(gt(u=>u.type===FC.STOP)),o=n.pipe(gt(u=>u.type===FC.DISPATCH),Be(u=>this.unwrapAction(u.payload)),d2(u=>u.type===Tw?this.dispatcher.pipe(gt(d=>d.type===ab),c2(1e3),mf(1e3),Be(()=>u),Pi(()=>Ji(u)),hs(1)):Ji(u))),l=n.pipe(gt(u=>u.type===FC.ACTION),Be(u=>this.unwrapAction(u.payload))).pipe(vf(s)),c=o.pipe(vf(s));this.start$=r.pipe(vf(s)),this.actions$=this.start$.pipe(Jt(()=>l)),this.liftedActions$=this.start$.pipe(Jt(()=>c))}unwrapAction(n){return typeof n=="string"?(0,eval)(`(${n})`):n}getExtensionConfig(n){let r={name:n.name,features:n.features,serialize:n.serialize,autoPause:n.autoPause??!1,trace:n.trace??!1,traceLimit:n.traceLimit??75};return n.maxAge!==!1&&(r.maxAge=n.maxAge),r}sendToReduxDevtools(n){try{n()}catch(r){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",r)}}};e.\u0275fac=function(r){return new(r||e)(en(Ew),en(RC),en(NC))},e.\u0275prov=Hi({token:e,factory:e.\u0275fac});let i=e;return i})(),LC={type:ob},Xoe="@ngrx/store-devtools/recompute",Zoe={type:Xoe};function Z4(i,e,t,n,r){if(n)return{state:t,error:"Interrupted by an error up the chain"};let s=t,o;try{s=i(t,e)}catch(a){o=a.toString(),r.handleError(a)}return{state:s,error:o}}function OC(i,e,t,n,r,s,o,a,l){if(e>=i.length&&i.length===s.length)return i;let c=i.slice(0,e),u=s.length-(l?1:0);for(let d=e;d<u;d++){let h=s[d],p=r[h].action,m=c[d-1],g=m?m.state:n,f=m?m.error:void 0,b=o.indexOf(h)>-1?m:Z4(t,p,g,f,a);c.push(b)}return l&&c.push(i[i.length-1]),c}function Qoe(i,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:Qg(LC)},stagedActionIds:[0],skippedActionIds:[],committedState:i,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function Joe(i,e,t,n,r={}){return s=>(o,a)=>{let{monitorState:l,actionsById:c,nextActionId:u,stagedActionIds:d,skippedActionIds:h,committedState:p,currentStateIndex:m,computedStates:g,isLocked:f,isPaused:y}=o||e;o||(c=Object.create(c));function b(w){let T=w,D=d.slice(1,T+1);for(let O=0;O<D.length;O++)if(g[O+1].error){T=O,D=d.slice(1,T+1);break}else delete c[D[O]];h=h.filter(O=>D.indexOf(O)===-1),d=[0,...d.slice(T+1)],p=g[T].state,g=g.slice(T),m=m>T?m-T:0}function v(){c={0:Qg(LC)},u=1,d=[0],h=[],p=g[m].state,m=0,g=[]}let S=0;switch(a.type){case H4:{f=a.status,S=1/0;break}case z4:{y=a.status,y?(d=[...d,u],c[u]=new bp({type:"@ngrx/devtools/pause"},+Date.now()),u++,S=d.length-1,g=g.concat(g[g.length-1]),m===d.length-2&&m++,S=1/0):v();break}case L4:{c={0:Qg(LC)},u=1,d=[0],h=[],p=i,m=0,g=[];break}case N4:{v();break}case R4:{c={0:Qg(LC)},u=1,d=[0],h=[],m=0,g=[];break}case B4:{let{id:w}=a;h.indexOf(w)===-1?h=[w,...h]:h=h.filter(D=>D!==w),S=d.indexOf(w);break}case Woe:{let{start:w,end:T,active:D}=a,O=[];for(let R=w;R<T;R++)O.push(R);D?h=k4(h,O):h=[...h,...O],S=d.indexOf(w);break}case G4:{m=a.index,S=1/0;break}case U4:{let w=d.indexOf(a.actionId);w!==-1&&(m=w),S=1/0;break}case V4:{d=k4(d,h),h=[],m=Math.min(m,d.length-1);break}case Jg:{if(f)return o||e;if(y||o&&Mw(o.computedStates[m],a,r.predicate,r.actionsSafelist,r.actionsBlocklist)){let T=g[g.length-1];g=[...g.slice(0,-1),Z4(s,a.action,T.state,T.error,t)],S=1/0;break}r.maxAge&&d.length===r.maxAge&&b(1),m===d.length-1&&m++;let w=u++;c[w]=a,d=[...d,w],S=d.length-1;break}case Tw:{({monitorState:l,actionsById:c,nextActionId:u,stagedActionIds:d,skippedActionIds:h,committedState:p,currentStateIndex:m,computedStates:g,isLocked:f,isPaused:y}=a.nextLiftedState);break}case ob:{S=0,r.maxAge&&d.length>r.maxAge&&(g=OC(g,S,s,p,c,d,h,t,y),b(d.length-r.maxAge),S=1/0);break}case ab:{if(g.filter(T=>T.error).length>0)S=0,r.maxAge&&d.length>r.maxAge&&(g=OC(g,S,s,p,c,d,h,t,y),b(d.length-r.maxAge),S=1/0);else{if(!y&&!f){m===d.length-1&&m++;let T=u++;c[T]=new bp(a,+Date.now()),d=[...d,T],S=d.length-1,g=OC(g,S,s,p,c,d,h,t,y)}g=g.map(T=>dt(Se({},T),{state:s(T.state,Zoe)})),m=d.length-1,r.maxAge&&d.length>r.maxAge&&b(d.length-r.maxAge),S=1/0}break}default:{S=1/0;break}}return g=OC(g,S,s,p,c,d,h,t,y),l=n(l,a),{monitorState:l,actionsById:c,nextActionId:u,stagedActionIds:d,skippedActionIds:h,committedState:p,currentStateIndex:m,computedStates:g,isLocked:f,isPaused:y}}}var F4=(()=>{let e=class e{constructor(n,r,s,o,a,l,c,u){let d=Qoe(c,u.monitor),h=Joe(c,d,l,u.monitor,u),p=Pp(Pp(r.asObservable().pipe(v2(1)),o.actions$).pipe(Be(Qg)),n,o.liftedActions$).pipe(a2(o2)),m=s.pipe(Be(h)),g=q4(u.connectInZone),f=new s2(1);this.liftedStateSubscription=p.pipe(dd(m),O4(g),ff(({state:v},[S,w])=>{let T=w(v,S);return S.type!==Jg&&Y4(u)&&(T=qoe(T,u.predicate,u.actionsSafelist,u.actionsBlocklist)),o.notify(S,T),{state:T,action:S}},{state:d,action:null})).subscribe(({state:v,action:S})=>{if(f.next(v),S.type===Jg){let w=S.action;a.next(w)}}),this.extensionStartSubscription=o.start$.pipe(O4(g)).subscribe(()=>{this.refresh()});let y=f.asObservable(),b=y.pipe(Be($4));Object.defineProperty(b,"state",{value:Ce(b,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=n,this.liftedState=y,this.state=b}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(n){this.dispatcher.next(n)}next(n){this.dispatcher.next(n)}error(n){}complete(){}performAction(n){this.dispatch(new bp(n,+Date.now()))}refresh(){this.dispatch(new mw)}reset(){this.dispatch(new gw(+Date.now()))}rollback(){this.dispatch(new fw(+Date.now()))}commit(){this.dispatch(new vw(+Date.now()))}sweep(){this.dispatch(new yw)}toggleAction(n){this.dispatch(new Cw(n))}jumpToAction(n){this.dispatch(new Sw(n))}jumpToState(n){this.dispatch(new bw(n))}importState(n){this.dispatch(new xw(n))}lockChanges(n){this.dispatch(new _w(n))}pauseRecording(n){this.dispatch(new ww(n))}};e.\u0275fac=function(r){return new(r||e)(en(NC),en(a0),en(aA),en(X4),en(cA),en(bf),en(oA),en(RC))},e.\u0275prov=Hi({token:e,factory:e.\u0275fac});let i=e;return i})();function O4({ngZone:i,connectInZone:e}){return t=>e?new QC(n=>t.subscribe({next:r=>i.run(()=>n.next(r)),error:r=>i.run(()=>n.error(r)),complete:()=>i.run(()=>n.complete())})):t}var eae=new Dp("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function tae(i,e){return!!i||e.monitor!==W4}function iae(){let i="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[i]<"u"?window[i]:null}function nae(i={}){return y2([X4,NC,F4,{provide:D4,useValue:i},{provide:eae,deps:[Ew,RC],useFactory:tae},{provide:Ew,useFactory:iae},{provide:RC,deps:[D4],useFactory:Koe},{provide:uA,deps:[F4],useFactory:rae},{provide:lA,useExisting:NC}])}function rae(i){return i.state}var Q4=(()=>{let e=class e{static instrument(n={}){return{ngModule:e,providers:[nae(n)]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=_f({type:e}),e.\u0275inj=yf({});let i=e;return i})();function sae(i,e){}var zt=(()=>{let e=class e{set urlValue1(n){this.Input.set(n)}set ipoIsin(n){n?.length>0&&this.Input.set("offline-order/"+n)}ngOnInit(){this.layoutService.changeLayout$.pipe(gf()).subscribe(n=>{n&&this.layout[n]()}),this.urlData?.sidePanel===Ee.EasyChart&&this.symbolIsin&&(this.urlData.data=this.symbolIsin),this.sidePanelServiceService.openSidePanelFromRoute({sidePanel:this.urlData?.sidePanel,data:this.urlData?.data,value:this.Input()})}createComponent(n){let r=this.appDynamic.viewContainerRef;r.clear(),r.createComponent(n)}constructor(n,r,s){this.modalService=n,this.mwManager=r,this.ipoFacade=s,this.Input=pe(void 0),this.Input$=Ft(this.Input).pipe(gt(Boolean)),this.layoutService=ee(ws),this.sidePanelServiceService=ee(Tr),this.layout={layout1:()=>{import("./chunk-RYSQG2F4.js").then(({Layout1Component:o})=>this.createComponent(o))},layout2:()=>{import("./chunk-LQYXVI7Q.js").then(({Layout2Component:o})=>this.createComponent(o))},layout3:()=>{import("./chunk-R3UUK6GL.js").then(({Layout3Component:o})=>this.createComponent(o))}},Ce(this.Input$.pipe(ud(1500),Je(o=>{o?.includes("ipo")?this.mwManager.selectedItem.next({item:void 0,type:fb.IPO}):o?.includes("offline-order")&&this.mwManager.selectedItem.next({item:o?.split("/")?.[1]??void 0,type:fb.IPO})}))),Ce(this.Input$.pipe(Jt(o=>this.ipoFacade.getIpos$().pipe(Di(a=>!!a?.length),Be(a=>a.find(l=>l.symbolIsin===o.slice(o.lastIndexOf("/")+1))),gt(Boolean),Je(a=>{this.ipoFacade.getIpoByIsin(a.symbolIsin)?.hasOfflineOrdering&&this.modalService.open(D6,{scrollable:!0}).componentInstance.ipo.set(a)})))))}};e.\u0275fac=function(r){return new(r||e)(st(Ol),st(G6),st(x0))},e.\u0275cmp=ge({type:e,selectors:[["app-layout-selector"]],viewQuery:function(r,s){if(r&1&&bi(xd,7),r&2){let o;Si(o=xi())&&(s.appDynamic=o.first)}},inputs:{urlData:"urlData",symbolIsin:"symbolIsin",urlValue1:"urlValue1",ipoIsin:"ipoIsin"},decls:1,vars:0,consts:[["appDynamic",""]],template:function(r,s){r&1&&Z(0,sae,0,0,"ng-template",0)},dependencies:[xd],encapsulation:2});let i=e;return i})();var J4=[{path:ut.ORDER_HISTORY_ROUTE,loadComponent:()=>import("./chunk-FHVB4WJM.js").then(i=>i.DOrdersHistoryComponent),canActivate:[Et],title:jc.ORDER_HISTORY_ROUTE},{path:ut.ORDER_HISTORY_ROUTE+"/:isin",loadComponent:()=>import("./chunk-FHVB4WJM.js").then(i=>i.DOrdersHistoryComponent),canActivate:[Et],title:jc.ORDER_HISTORY_ROUTE},{path:ut.ALGO_HISTORY_ROUTE,loadComponent:()=>import("./chunk-SHUDPFSD.js").then(i=>i.AlgoOrderHistoryComponent),canActivate:[Et]},{path:ut.ALGO_HISTORY_ROUTE+"/:id",loadComponent:()=>import("./chunk-KVLZUT5P.js").then(i=>i.AlgoOrderHistoryDetailComponent),canActivate:[Et]},{path:ut.MARKET_MAP_ROUTE,loadComponent:()=>import("./chunk-LSY7467Q.js").then(i=>i.DMarketMapComponent),canActivate:[Et],data:{preload:!0},title:jc.MARKET_MAP_ROUTE},{path:Kn.EASY_FILTER_ROUTE,loadComponent:()=>import("./chunk-QVAMZFF6.js").then(i=>i.DEasyFilterComponent),canActivate:[Et],data:{preload:!1},title:jc.EASY_FILTER_ROUTE},{path:ut.TRANSACTIONS_ROUTE,loadComponent:()=>import("./chunk-A24HPTBS.js").then(i=>i.DTransactionsComponent),canActivate:[Et],title:jc.TRANSACTIONS_ROUTE,data:{preload:!1}},{path:ut.EASY_CHART_ROUTE,component:zt,data:{urlData:{sidePanel:Ee.EasyChart}},title:jc.EASY_CHART_ROUTE,canActivate:[Et]},{path:ut.EASY_CHART_ROUTE+"/:symbolIsin",component:zt,data:{urlData:{sidePanel:Ee.EasyChart}},canActivate:[Et]},{path:ut.SUPPORT_ROUTE,data:{urlData:{sidePanel:Ee.None,data:{url:ut.SUPPORT_ROUTE}}},component:zt,canActivate:[Et]},{path:ut.STOCK_DETAILS_ROUTE+"/:urlValue1",data:{urlData:{sidePanel:Ee.None,data:{url:ut.STOCK_DETAILS_ROUTE}}},component:zt,canActivate:[Et]},{path:ut.AGREEMENT_ROUTE,component:zt,resolve:{urlData:()=>Yc(ut.AGREEMENT_ROUTE)},canActivate:[Et]},{path:ut.ACCOUNT_ACTIVITY_ROUTE,resolve:{urlData:()=>Yc(ut.ACCOUNT_ACTIVITY_ROUTE)},component:zt,canActivate:[Et]},{path:ut.BROKER_CHANGE_ROUTE,data:{urlData:{sidePanel:Ee.BrokerChange}},component:zt,canActivate:[Et]},{path:ut.FUND_ROUTE,data:{urlData:{sidePanel:Ee.Funds}},component:zt,canActivate:[Et]},{path:ut.FUND_ROUTE+"/:urlValue1",data:{urlData:{sidePanel:Ee.Funds}},component:zt,canActivate:[Et]},{path:ut.MESSAGES_ROUTE,resolve:{urlData:()=>Yc(ut.MESSAGES_ROUTE)},component:zt,canActivate:[Et]},{path:ut.IMMEDIATE_MESSAGE_ROUTE,resolve:{urlData:()=>Yc(ut.IMMEDIATE_MESSAGE_ROUTE)},component:zt,canActivate:[Et]},{path:ut.PORTFOLIO_MESSAGE_ROUTE,resolve:{data:()=>Yc(ut.PORTFOLIO_MESSAGE_ROUTE)},component:zt,canActivate:[Et]},{path:ut.MOFID_MESSAGE_ROUTE,resolve:{urlData:()=>Yc(ut.MOFID_MESSAGE_ROUTE)},component:zt,canActivate:[Et]},{path:ut.PAYMENT_ROUTE,data:{urlData:{sidePanel:Ee.Payment}},component:zt,canActivate:[Et]},{path:ut.MENU_ROUTE,data:{urlData:{sidePanel:Ee.Menu}},component:zt,canActivate:[Et]},{path:ut.SETTING,data:{urlData:{sidePanel:Ee.Settings}},component:zt,canActivate:[Et]},{path:Kn.RECEIPT_ROUTE,data:{urlData:{sidePanel:Ee.MoneyReceipt}},component:zt,canActivate:[Et]},{path:Kn.RECEIPT_ROUTE_ERROR,data:{urlData:{sidePanel:Ee.MoneyReceipt,data:{status:yr.error}}},component:zt,canActivate:[Et]},{path:Kn.RECEIPT_ROUTE+`/:transactionId/${yr.success}`,data:{urlData:{sidePanel:Ee.MoneyReceipt,data:{status:yr.success}}},component:zt,canActivate:[Et]},{path:Kn.RECEIPT_ROUTE+`/:transactionId/${yr.success}/:providerId`,data:{urlData:{sidePanel:Ee.MoneyReceipt,data:{status:yr.success}}},component:zt,canActivate:[Et]},{path:Kn.RECEIPT_ROUTE+`/:transactionId/${yr.error}`,data:{urlData:{sidePanel:Ee.MoneyReceipt,data:{status:yr.error}}},component:zt,canActivate:[Et]},{path:Kn.RECEIPT_ROUTE+`/:transactionId/${yr.error}/:providerId`,data:{urlData:{sidePanel:Ee.MoneyReceipt,data:{status:yr.error}}},component:zt,canActivate:[Et]},{path:Kn.RECEIPT_ROUTE+`/${yr.cancel}`,data:{urlData:{sidePanel:Ee.MoneyReceipt,data:{status:yr.cancel}}},component:zt,canActivate:[Et]},{path:Kn.RECEIPT_ROUTE+`/${yr.cancel}/:providerId`,data:{urlData:{sidePanel:Ee.MoneyReceipt,data:{status:yr.cancel}}},component:zt,canActivate:[Et]},{path:Kn.RECEIPT_ROUTE+"/:urlValue1",data:{urlData:{sidePanel:Ee.MoneyReceipt}},component:zt},{path:ut.WALLET_CARD_ROUTE,data:{urlData:{sidePanel:Ee.WalletCard}},component:zt,canActivate:[Et]},{path:ut.MARKET_VIEW_ROUTE,data:{urlData:{sidePanel:Ee.MarketView}},component:zt,canActivate:[Et]},{path:Kn.NOTES_ROUTE+"/:urlValue1",data:{urlData:{sidePanel:Ee.Note}},component:zt,canActivate:[Et]},{path:ut.CONDITION_ROUTE,data:{urlData:{sidePanel:Ee.Conditional}},component:zt,canActivate:[Et]},{path:ut.CONDITION_ROUTE+"/:urlValue1",data:{urlData:{sidePanel:Ee.Conditional}},component:zt,canActivate:[Et]},{path:ut.BANK_ACCOUNT_ROUTE,data:{urlData:{sidePanel:Ee.Payment}},component:zt,canActivate:[Et]},{path:Kn.MARKET_WATCH_ROUTE+"/ipo/:urlValue1",component:zt,canActivate:[Et]},{path:ut.OFFLINE_ORDER+"/:ipoIsin",component:zt,canActivate:[Et]},{path:Kn.MARKET_WATCH_ROUTE+"/:urlValue1",component:zt,canActivate:[Et]},{path:"",component:zt,canActivate:[Et]},{path:"auth-callback",component:gA},{path:"login",component:mA},{path:"**",redirectTo:"",pathMatch:"full"}];var eV={providers:[C2(Af,P4,U2,JM.register("ngsw-worker.js",{enabled:li.env!==Tl.DEV}),YM.forRoot(),dA.forRoot(Se(Se(Se(Se(Se(Se(Se(Se(Se(Se(Se({},F6),A6),g6),NA),y6),FA),DA),YA),n6),t6),l6)),wA.forRoot([...L6,...P6,...f6,...VA,...v6,...OA,...PA,...qA,...a6,e6,i6]),Q4.instrument({maxAge:25,logOnly:!1,autoPause:!0,features:{pause:!1,lock:!0,persist:!0}})),R2(N2()),{provide:L2,useClass:nA,multi:!0},A2({eventCoalescing:!0}),$2(J4,tb(),K2(tA),tb()),{provide:Td,useValue:li},{provide:bf,useClass:WM},{provide:G2,useClass:zM},yi,qM,li.env!==Tl.DEV?QM("ngsw-worker.js"):[]]};function tV(i){return i!==null&&typeof i=="object"&&"constructor"in i&&i.constructor===Object}function Aw(i,e){i===void 0&&(i={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof i[t]>"u"?i[t]=e[t]:tV(e[t])&&tV(i[t])&&Object.keys(e[t]).length>0&&Aw(i[t],e[t])})}var iV={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ci(){let i=typeof document<"u"?document:{};return Aw(i,iV),i}var oae={document:iV,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(i){return typeof setTimeout>"u"?(i(),null):setTimeout(i,0)},cancelAnimationFrame(i){typeof setTimeout>"u"||clearTimeout(i)}};function di(){let i=typeof window<"u"?window:{};return Aw(i,oae),i}function ml(i){return i===void 0&&(i=""),i.trim().split(" ").filter(e=>!!e.trim())}function nV(i){let e=i;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function bo(i,e){return e===void 0&&(e=0),setTimeout(i,e)}function br(){return Date.now()}function aae(i){let e=di(),t;return e.getComputedStyle&&(t=e.getComputedStyle(i,null)),!t&&i.currentStyle&&(t=i.currentStyle),t||(t=i.style),t}function ef(i,e){e===void 0&&(e="x");let t=di(),n,r,s,o=aae(i);return t.WebKitCSSMatrix?(r=o.transform||o.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(r==="none"?"":r)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=s.m41:n.length===16?r=parseFloat(n[12]):r=parseFloat(n[4])),e==="y"&&(t.WebKitCSSMatrix?r=s.m42:n.length===16?r=parseFloat(n[13]):r=parseFloat(n[5])),r||0}function Sp(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"}function lae(i){return typeof window<"u"&&typeof window.HTMLElement<"u"?i instanceof HTMLElement:i&&(i.nodeType===1||i.nodeType===11)}function Ur(){let i=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){let n=t<0||arguments.length<=t?void 0:arguments[t];if(n!=null&&!lae(n)){let r=Object.keys(Object(n)).filter(s=>e.indexOf(s)<0);for(let s=0,o=r.length;s<o;s+=1){let a=r[s],l=Object.getOwnPropertyDescriptor(n,a);l!==void 0&&l.enumerable&&(Sp(i[a])&&Sp(n[a])?n[a].__swiper__?i[a]=n[a]:Ur(i[a],n[a]):!Sp(i[a])&&Sp(n[a])?(i[a]={},n[a].__swiper__?i[a]=n[a]:Ur(i[a],n[a])):i[a]=n[a])}}}return i}function nd(i,e,t){i.style.setProperty(e,t)}function Pw(i){let{swiper:e,targetPosition:t,side:n}=i,r=di(),s=-e.translate,o=null,a,l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);let c=t>s?"next":"prev",u=(h,p)=>c==="next"&&h>=p||c==="prev"&&h<=p,d=()=>{a=new Date().getTime(),o===null&&(o=a);let h=Math.max(Math.min((a-o)/l,1),0),p=.5-Math.cos(h*Math.PI)/2,m=s+p*(t-s);if(u(m,t)&&(m=t),e.wrapperEl.scrollTo({[n]:m}),u(m,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:m})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(d)};d()}function Hr(i){return i.querySelector(".swiper-slide-transform")||i.shadowRoot&&i.shadowRoot.querySelector(".swiper-slide-transform")||i}function Vi(i,e){e===void 0&&(e="");let t=[...i.children];return i instanceof HTMLSlotElement&&t.push(...i.assignedElements()),e?t.filter(n=>n.matches(e)):t}function rV(i,e){let t=e.contains(i);return!t&&e instanceof HTMLSlotElement?[...e.assignedElements()].includes(i):t}function tf(i){try{console.warn(i);return}catch{}}function hn(i,e){e===void 0&&(e=[]);let t=document.createElement(i);return t.classList.add(...Array.isArray(e)?e:ml(e)),t}function rd(i){let e=di(),t=Ci(),n=i.getBoundingClientRect(),r=t.body,s=i.clientTop||r.clientTop||0,o=i.clientLeft||r.clientLeft||0,a=i===e?e.scrollY:i.scrollTop,l=i===e?e.scrollX:i.scrollLeft;return{top:n.top+a-s,left:n.left+l-o}}function sV(i,e){let t=[];for(;i.previousElementSibling;){let n=i.previousElementSibling;e?n.matches(e)&&t.push(n):t.push(n),i=n}return t}function oV(i,e){let t=[];for(;i.nextElementSibling;){let n=i.nextElementSibling;e?n.matches(e)&&t.push(n):t.push(n),i=n}return t}function gl(i,e){return di().getComputedStyle(i,null).getPropertyValue(e)}function Lc(i){let e=i,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function So(i,e){let t=[],n=i.parentElement;for(;n;)e?n.matches(e)&&t.push(n):t.push(n),n=n.parentElement;return t}function Rc(i,e){function t(n){n.target===i&&(e.call(i,n),i.removeEventListener("transitionend",t))}e&&i.addEventListener("transitionend",t)}function nf(i,e,t){let n=di();return t?i[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(i,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(i,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):i.offsetWidth}function Pt(i){return(Array.isArray(i)?i:[i]).filter(e=>!!e)}function Nc(i){return e=>Math.abs(e)>0&&i.browser&&i.browser.need3dFix&&Math.abs(e)%90===0?e+.001:e}var Dw;function cae(){let i=di(),e=Ci();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in i||i.DocumentTouch&&e instanceof i.DocumentTouch)}}function dV(){return Dw||(Dw=cae()),Dw}var kw;function uae(i){let{userAgent:e}=i===void 0?{}:i,t=dV(),n=di(),r=n.navigator.platform,s=e||n.navigator.userAgent,o={ios:!1,android:!1},a=n.screen.width,l=n.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/),u=s.match(/(iPad).*OS\s([\d_]+)/),d=s.match(/(iPod)(.*OS\s([\d_]+))?/),h=!u&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=r==="Win32",m=r==="MacIntel",g=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&m&&t.touch&&g.indexOf(`${a}x${l}`)>=0&&(u=s.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),m=!1),c&&!p&&(o.os="android",o.android=!0),(u||h||d)&&(o.os="ios",o.ios=!0),o}function hV(i){return i===void 0&&(i={}),kw||(kw=uae(i)),kw}var Iw;function dae(){let i=di(),e=hV(),t=!1;function n(){let a=i.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(n()){let a=String(i.navigator.userAgent);if(a.includes("Version/")){let[l,c]=a.split("Version/")[1].split(" ")[0].split(".").map(u=>Number(u));t=l<16||l===16&&c<2}}let r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(i.navigator.userAgent),s=n(),o=s||r&&e.ios;return{isSafari:t||s,needPerspectiveFix:t,need3dFix:o,isWebView:r}}function hae(){return Iw||(Iw=dae()),Iw}function pae(i){let{swiper:e,on:t,emit:n}=i,r=di(),s=null,o=null,a=()=>{!e||e.destroyed||!e.initialized||(n("beforeResize"),n("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(d=>{o=r.requestAnimationFrame(()=>{let{width:h,height:p}=e,m=h,g=p;d.forEach(f=>{let{contentBoxSize:y,contentRect:b,target:v}=f;v&&v!==e.el||(m=b?b.width:(y[0]||y).inlineSize,g=b?b.height:(y[0]||y).blockSize)}),(m!==h||g!==p)&&a()})}),s.observe(e.el))},c=()=>{o&&r.cancelAnimationFrame(o),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},u=()=>{!e||e.destroyed||!e.initialized||n("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",a),r.addEventListener("orientationchange",u)}),t("destroy",()=>{c(),r.removeEventListener("resize",a),r.removeEventListener("orientationchange",u)})}function mae(i){let{swiper:e,extendParams:t,on:n,emit:r}=i,s=[],o=di(),a=function(u,d){d===void 0&&(d={});let h=o.MutationObserver||o.WebkitMutationObserver,p=new h(m=>{if(e.__preventObserver__)return;if(m.length===1){r("observerUpdate",m[0]);return}let g=function(){r("observerUpdate",m[0])};o.requestAnimationFrame?o.requestAnimationFrame(g):o.setTimeout(g,0)});p.observe(u,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:e.isElement||(typeof d.childList>"u"?!0:d).childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),s.push(p)},l=()=>{if(e.params.observer){if(e.params.observeParents){let u=So(e.hostEl);for(let d=0;d<u.length;d+=1)a(u[d])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(u=>{u.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",l),n("destroy",c)}var gae={on(i,e,t){let n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;let r=t?"unshift":"push";return i.split(" ").forEach(s=>{n.eventsListeners[s]||(n.eventsListeners[s]=[]),n.eventsListeners[s][r](e)}),n},once(i,e,t){let n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;function r(){n.off(i,r),r.__emitterProxy&&delete r.__emitterProxy;for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];e.apply(n,o)}return r.__emitterProxy=e,n.on(i,r,t)},onAny(i,e){let t=this;if(!t.eventsListeners||t.destroyed||typeof i!="function")return t;let n=e?"unshift":"push";return t.eventsAnyListeners.indexOf(i)<0&&t.eventsAnyListeners[n](i),t},offAny(i){let e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;let t=e.eventsAnyListeners.indexOf(i);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(i,e){let t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||i.split(" ").forEach(n=>{typeof e>"u"?t.eventsListeners[n]=[]:t.eventsListeners[n]&&t.eventsListeners[n].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[n].splice(s,1)})}),t},emit(){let i=this;if(!i.eventsListeners||i.destroyed||!i.eventsListeners)return i;let e,t,n;for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),n=i):(e=s[0].events,t=s[0].data,n=s[0].context||i),t.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{i.eventsAnyListeners&&i.eventsAnyListeners.length&&i.eventsAnyListeners.forEach(c=>{c.apply(n,[l,...t])}),i.eventsListeners&&i.eventsListeners[l]&&i.eventsListeners[l].forEach(c=>{c.apply(n,t)})}),i}};function fae(){let i=this,e,t,n=i.el;typeof i.params.width<"u"&&i.params.width!==null?e=i.params.width:e=n.clientWidth,typeof i.params.height<"u"&&i.params.height!==null?t=i.params.height:t=n.clientHeight,!(e===0&&i.isHorizontal()||t===0&&i.isVertical())&&(e=e-parseInt(gl(n,"padding-left")||0,10)-parseInt(gl(n,"padding-right")||0,10),t=t-parseInt(gl(n,"padding-top")||0,10)-parseInt(gl(n,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(i,{width:e,height:t,size:i.isHorizontal()?e:t}))}function vae(){let i=this;function e(L,B){return parseFloat(L.getPropertyValue(i.getDirectionLabel(B))||0)}let t=i.params,{wrapperEl:n,slidesEl:r,size:s,rtlTranslate:o,wrongRTL:a}=i,l=i.virtual&&t.virtual.enabled,c=l?i.virtual.slides.length:i.slides.length,u=Vi(r,`.${i.params.slideClass}, swiper-slide`),d=l?i.virtual.slides.length:u.length,h=[],p=[],m=[],g=t.slidesOffsetBefore;typeof g=="function"&&(g=t.slidesOffsetBefore.call(i));let f=t.slidesOffsetAfter;typeof f=="function"&&(f=t.slidesOffsetAfter.call(i));let y=i.snapGrid.length,b=i.slidesGrid.length,v=t.spaceBetween,S=-g,w=0,T=0;if(typeof s>"u")return;typeof v=="string"&&v.indexOf("%")>=0?v=parseFloat(v.replace("%",""))/100*s:typeof v=="string"&&(v=parseFloat(v)),i.virtualSize=-v,u.forEach(L=>{o?L.style.marginLeft="":L.style.marginRight="",L.style.marginBottom="",L.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(nd(n,"--swiper-centered-offset-before",""),nd(n,"--swiper-centered-offset-after",""));let D=t.grid&&t.grid.rows>1&&i.grid;D?i.grid.initSlides(u):i.grid&&i.grid.unsetSlides();let O,R=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(L=>typeof t.breakpoints[L].slidesPerView<"u").length>0;for(let L=0;L<d;L+=1){O=0;let B;if(u[L]&&(B=u[L]),D&&i.grid.updateSlide(L,B,u),!(u[L]&&gl(B,"display")==="none")){if(t.slidesPerView==="auto"){R&&(u[L].style[i.getDirectionLabel("width")]="");let $=getComputedStyle(B),U=B.style.transform,K=B.style.webkitTransform;if(U&&(B.style.transform="none"),K&&(B.style.webkitTransform="none"),t.roundLengths)O=i.isHorizontal()?nf(B,"width",!0):nf(B,"height",!0);else{let ie=e($,"width"),te=e($,"padding-left"),j=e($,"padding-right"),Y=e($,"margin-left"),se=e($,"margin-right"),me=$.getPropertyValue("box-sizing");if(me&&me==="border-box")O=ie+Y+se;else{let{clientWidth:re,offsetWidth:ve}=B;O=ie+te+j+Y+se+(ve-re)}}U&&(B.style.transform=U),K&&(B.style.webkitTransform=K),t.roundLengths&&(O=Math.floor(O))}else O=(s-(t.slidesPerView-1)*v)/t.slidesPerView,t.roundLengths&&(O=Math.floor(O)),u[L]&&(u[L].style[i.getDirectionLabel("width")]=`${O}px`);u[L]&&(u[L].swiperSlideSize=O),m.push(O),t.centeredSlides?(S=S+O/2+w/2+v,w===0&&L!==0&&(S=S-s/2-v),L===0&&(S=S-s/2-v),Math.abs(S)<1/1e3&&(S=0),t.roundLengths&&(S=Math.floor(S)),T%t.slidesPerGroup===0&&h.push(S),p.push(S)):(t.roundLengths&&(S=Math.floor(S)),(T-Math.min(i.params.slidesPerGroupSkip,T))%i.params.slidesPerGroup===0&&h.push(S),p.push(S),S=S+O+v),i.virtualSize+=O+v,w=O,T+=1}}if(i.virtualSize=Math.max(i.virtualSize,s)+f,o&&a&&(t.effect==="slide"||t.effect==="coverflow")&&(n.style.width=`${i.virtualSize+v}px`),t.setWrapperSize&&(n.style[i.getDirectionLabel("width")]=`${i.virtualSize+v}px`),D&&i.grid.updateWrapperSize(O,h),!t.centeredSlides){let L=[];for(let B=0;B<h.length;B+=1){let $=h[B];t.roundLengths&&($=Math.floor($)),h[B]<=i.virtualSize-s&&L.push($)}h=L,Math.floor(i.virtualSize-s)-Math.floor(h[h.length-1])>1&&h.push(i.virtualSize-s)}if(l&&t.loop){let L=m[0]+v;if(t.slidesPerGroup>1){let B=Math.ceil((i.virtual.slidesBefore+i.virtual.slidesAfter)/t.slidesPerGroup),$=L*t.slidesPerGroup;for(let U=0;U<B;U+=1)h.push(h[h.length-1]+$)}for(let B=0;B<i.virtual.slidesBefore+i.virtual.slidesAfter;B+=1)t.slidesPerGroup===1&&h.push(h[h.length-1]+L),p.push(p[p.length-1]+L),i.virtualSize+=L}if(h.length===0&&(h=[0]),v!==0){let L=i.isHorizontal()&&o?"marginLeft":i.getDirectionLabel("marginRight");u.filter((B,$)=>!t.cssMode||t.loop?!0:$!==u.length-1).forEach(B=>{B.style[L]=`${v}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let L=0;m.forEach($=>{L+=$+(v||0)}),L-=v;let B=L>s?L-s:0;h=h.map($=>$<=0?-g:$>B?B+f:$)}if(t.centerInsufficientSlides){let L=0;m.forEach($=>{L+=$+(v||0)}),L-=v;let B=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(L+B<s){let $=(s-L-B)/2;h.forEach((U,K)=>{h[K]=U-$}),p.forEach((U,K)=>{p[K]=U+$})}}if(Object.assign(i,{slides:u,snapGrid:h,slidesGrid:p,slidesSizesGrid:m}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){nd(n,"--swiper-centered-offset-before",`${-h[0]}px`),nd(n,"--swiper-centered-offset-after",`${i.size/2-m[m.length-1]/2}px`);let L=-i.snapGrid[0],B=-i.slidesGrid[0];i.snapGrid=i.snapGrid.map($=>$+L),i.slidesGrid=i.slidesGrid.map($=>$+B)}if(d!==c&&i.emit("slidesLengthChange"),h.length!==y&&(i.params.watchOverflow&&i.checkOverflow(),i.emit("snapGridLengthChange")),p.length!==b&&i.emit("slidesGridLengthChange"),t.watchSlidesProgress&&i.updateSlidesOffset(),i.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){let L=`${t.containerModifierClass}backface-hidden`,B=i.el.classList.contains(L);d<=t.maxBackfaceHiddenSlides?B||i.el.classList.add(L):B&&i.el.classList.remove(L)}}function yae(i){let e=this,t=[],n=e.virtual&&e.params.virtual.enabled,r=0,s;typeof i=="number"?e.setTransition(i):i===!0&&e.setTransition(e.params.speed);let o=a=>n?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){let a=e.activeIndex+s;if(a>e.slides.length&&!n)break;t.push(o(a))}else t.push(o(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){let a=t[s].offsetHeight;r=a>r?a:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function Cae(){let i=this,e=i.slides,t=i.isElement?i.isHorizontal()?i.wrapperEl.offsetLeft:i.wrapperEl.offsetTop:0;for(let n=0;n<e.length;n+=1)e[n].swiperSlideOffset=(i.isHorizontal()?e[n].offsetLeft:e[n].offsetTop)-t-i.cssOverflowAdjustment()}var aV=(i,e,t)=>{e&&!i.classList.contains(t)?i.classList.add(t):!e&&i.classList.contains(t)&&i.classList.remove(t)};function bae(i){i===void 0&&(i=this&&this.translate||0);let e=this,t=e.params,{slides:n,rtlTranslate:r,snapGrid:s}=e;if(n.length===0)return;typeof n[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-i;r&&(o=i),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=t.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<n.length;l+=1){let c=n[l],u=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(u-=n[0].swiperSlideOffset);let d=(o+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+a),h=(o-s[0]+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+a),p=-(o-u),m=p+e.slidesSizesGrid[l],g=p>=0&&p<=e.size-e.slidesSizesGrid[l],f=p>=0&&p<e.size-1||m>1&&m<=e.size||p<=0&&m>=e.size;f&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l)),aV(c,f,t.slideVisibleClass),aV(c,g,t.slideFullyVisibleClass),c.progress=r?-d:d,c.originalProgress=r?-h:h}}function Sae(i){let e=this;if(typeof i>"u"){let u=e.rtlTranslate?-1:1;i=e&&e.translate&&e.translate*u||0}let t=e.params,n=e.maxTranslate()-e.minTranslate(),{progress:r,isBeginning:s,isEnd:o,progressLoop:a}=e,l=s,c=o;if(n===0)r=0,s=!0,o=!0;else{r=(i-e.minTranslate())/n;let u=Math.abs(i-e.minTranslate())<1,d=Math.abs(i-e.maxTranslate())<1;s=u||r<=0,o=d||r>=1,u&&(r=0),d&&(r=1)}if(t.loop){let u=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),h=e.slidesGrid[u],p=e.slidesGrid[d],m=e.slidesGrid[e.slidesGrid.length-1],g=Math.abs(i);g>=h?a=(g-h)/m:a=(g+m-p)/m,a>1&&(a-=1)}Object.assign(e,{progress:r,progressLoop:a,isBeginning:s,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(i),s&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!o)&&e.emit("fromEdge"),e.emit("progress",r)}var Fw=(i,e,t)=>{e&&!i.classList.contains(t)?i.classList.add(t):!e&&i.classList.contains(t)&&i.classList.remove(t)};function xae(){let i=this,{slides:e,params:t,slidesEl:n,activeIndex:r}=i,s=i.virtual&&t.virtual.enabled,o=i.grid&&t.grid&&t.grid.rows>1,a=d=>Vi(n,`.${t.slideClass}${d}, swiper-slide${d}`)[0],l,c,u;if(s)if(t.loop){let d=r-i.virtual.slidesBefore;d<0&&(d=i.virtual.slides.length+d),d>=i.virtual.slides.length&&(d-=i.virtual.slides.length),l=a(`[data-swiper-slide-index="${d}"]`)}else l=a(`[data-swiper-slide-index="${r}"]`);else o?(l=e.filter(d=>d.column===r)[0],u=e.filter(d=>d.column===r+1)[0],c=e.filter(d=>d.column===r-1)[0]):l=e[r];l&&(o||(u=oV(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!u&&(u=e[0]),c=sV(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(d=>{Fw(d,d===l,t.slideActiveClass),Fw(d,d===u,t.slideNextClass),Fw(d,d===c,t.slidePrevClass)}),i.emitSlidesClasses()}var VC=(i,e)=>{if(!i||i.destroyed||!i.params)return;let t=()=>i.isElement?"swiper-slide":`.${i.params.slideClass}`,n=e.closest(t());if(n){let r=n.querySelector(`.${i.params.lazyPreloaderClass}`);!r&&i.isElement&&(n.shadowRoot?r=n.shadowRoot.querySelector(`.${i.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{n.shadowRoot&&(r=n.shadowRoot.querySelector(`.${i.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},Ow=(i,e)=>{if(!i.slides[e])return;let t=i.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Nw=i=>{if(!i||i.destroyed||!i.params)return;let e=i.params.lazyPreloadPrevNext,t=i.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);let n=i.params.slidesPerView==="auto"?i.slidesPerViewDynamic():Math.ceil(i.params.slidesPerView),r=i.activeIndex;if(i.params.grid&&i.params.grid.rows>1){let o=r,a=[o-e];a.push(...Array.from({length:e}).map((l,c)=>o+n+c)),i.slides.forEach((l,c)=>{a.includes(l.column)&&Ow(i,c)});return}let s=r+n-1;if(i.params.rewind||i.params.loop)for(let o=r-e;o<=s+e;o+=1){let a=(o%t+t)%t;(a<r||a>s)&&Ow(i,a)}else for(let o=Math.max(r-e,0);o<=Math.min(s+e,t-1);o+=1)o!==r&&(o>s||o<r)&&Ow(i,o)};function _ae(i){let{slidesGrid:e,params:t}=i,n=i.rtlTranslate?i.translate:-i.translate,r;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?n>=e[s]&&n<e[s+1]-(e[s+1]-e[s])/2?r=s:n>=e[s]&&n<e[s+1]&&(r=s+1):n>=e[s]&&(r=s);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function wae(i){let e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:n,params:r,activeIndex:s,realIndex:o,snapIndex:a}=e,l=i,c,u=p=>{let m=p-e.virtual.slidesBefore;return m<0&&(m=e.virtual.slides.length+m),m>=e.virtual.slides.length&&(m-=e.virtual.slides.length),m};if(typeof l>"u"&&(l=_ae(e)),n.indexOf(t)>=0)c=n.indexOf(t);else{let p=Math.min(r.slidesPerGroupSkip,l);c=p+Math.floor((l-p)/r.slidesPerGroup)}if(c>=n.length&&(c=n.length-1),l===s&&!e.params.loop){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===s&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=u(l);return}let d=e.grid&&r.grid&&r.grid.rows>1,h;if(e.virtual&&r.virtual.enabled&&r.loop)h=u(l);else if(d){let p=e.slides.filter(g=>g.column===l)[0],m=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(m)&&(m=Math.max(e.slides.indexOf(p),0)),h=Math.floor(m/r.grid.rows)}else if(e.slides[l]){let p=e.slides[l].getAttribute("data-swiper-slide-index");p?h=parseInt(p,10):h=l}else h=l;Object.assign(e,{previousSnapIndex:a,snapIndex:c,previousRealIndex:o,realIndex:h,previousIndex:s,activeIndex:l}),e.initialized&&Nw(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==h&&e.emit("realIndexChange"),e.emit("slideChange"))}function Eae(i,e){let t=this,n=t.params,r=i.closest(`.${n.slideClass}, swiper-slide`);!r&&t.isElement&&e&&e.length>1&&e.includes(i)&&[...e.slice(e.indexOf(i)+1,e.length)].forEach(a=>{!r&&a.matches&&a.matches(`.${n.slideClass}, swiper-slide`)&&(r=a)});let s=!1,o;if(r){for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===r){s=!0,o=a;break}}if(r&&s)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}n.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var Tae={updateSize:fae,updateSlides:vae,updateAutoHeight:yae,updateSlidesOffset:Cae,updateSlidesProgress:bae,updateProgress:Sae,updateSlidesClasses:xae,updateActiveIndex:wae,updateClickedSlide:Eae};function Mae(i){i===void 0&&(i=this.isHorizontal()?"x":"y");let e=this,{params:t,rtlTranslate:n,translate:r,wrapperEl:s}=e;if(t.virtualTranslate)return n?-r:r;if(t.cssMode)return r;let o=ef(s,i);return o+=e.cssOverflowAdjustment(),n&&(o=-o),o||0}function Aae(i,e){let t=this,{rtlTranslate:n,params:r,wrapperEl:s,progress:o}=t,a=0,l=0,c=0;t.isHorizontal()?a=n?-i:i:l=i,r.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l,r.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:r.virtualTranslate||(t.isHorizontal()?a-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),s.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`);let u,d=t.maxTranslate()-t.minTranslate();d===0?u=0:u=(i-t.minTranslate())/d,u!==o&&t.updateProgress(i),t.emit("setTranslate",t.translate,e)}function Pae(){return-this.snapGrid[0]}function Dae(){return-this.snapGrid[this.snapGrid.length-1]}function kae(i,e,t,n,r){i===void 0&&(i=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),n===void 0&&(n=!0);let s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;let l=s.minTranslate(),c=s.maxTranslate(),u;if(n&&i>l?u=l:n&&i<c?u=c:u=i,s.updateProgress(u),o.cssMode){let d=s.isHorizontal();if(e===0)a[d?"scrollLeft":"scrollTop"]=-u;else{if(!s.support.smoothScroll)return Pw({swiper:s,targetPosition:-u,side:d?"left":"top"}),!0;a.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(h){!s||s.destroyed||h.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var Iae={getTranslate:Mae,setTranslate:Aae,minTranslate:Pae,maxTranslate:Dae,translateTo:kae};function Fae(i,e){let t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${i}ms`,t.wrapperEl.style.transitionDelay=i===0?"0ms":""),t.emit("setTransition",i,e)}function pV(i){let{swiper:e,runCallbacks:t,direction:n,step:r}=i,{activeIndex:s,previousIndex:o}=e,a=n;if(a||(s>o?a="next":s<o?a="prev":a="reset"),e.emit(`transition${r}`),t&&s!==o){if(a==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),a==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function Oae(i,e){i===void 0&&(i=!0);let t=this,{params:n}=t;n.cssMode||(n.autoHeight&&t.updateAutoHeight(),pV({swiper:t,runCallbacks:i,direction:e,step:"Start"}))}function Lae(i,e){i===void 0&&(i=!0);let t=this,{params:n}=t;t.animating=!1,!n.cssMode&&(t.setTransition(0),pV({swiper:t,runCallbacks:i,direction:e,step:"End"}))}var Rae={setTransition:Fae,transitionStart:Oae,transitionEnd:Lae};function Nae(i,e,t,n,r){i===void 0&&(i=0),t===void 0&&(t=!0),typeof i=="string"&&(i=parseInt(i,10));let s=this,o=i;o<0&&(o=0);let{params:a,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:h,wrapperEl:p,enabled:m}=s;if(!m&&!n&&!r||s.destroyed||s.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=s.params.speed);let g=Math.min(s.params.slidesPerGroupSkip,o),f=g+Math.floor((o-g)/s.params.slidesPerGroup);f>=l.length&&(f=l.length-1);let y=-l[f];if(a.normalizeSlideIndex)for(let w=0;w<c.length;w+=1){let T=-Math.floor(y*100),D=Math.floor(c[w]*100),O=Math.floor(c[w+1]*100);typeof c[w+1]<"u"?T>=D&&T<O-(O-D)/2?o=w:T>=D&&T<O&&(o=w+1):T>=D&&(o=w)}if(s.initialized&&o!==d&&(!s.allowSlideNext&&(h?y>s.translate&&y>s.minTranslate():y<s.translate&&y<s.minTranslate())||!s.allowSlidePrev&&y>s.translate&&y>s.maxTranslate()&&(d||0)!==o))return!1;o!==(u||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(y);let b;o>d?b="next":o<d?b="prev":b="reset";let v=s.virtual&&s.params.virtual.enabled;if(!(v&&r)&&(h&&-y===s.translate||!h&&y===s.translate))return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(y),b!=="reset"&&(s.transitionStart(t,b),s.transitionEnd(t,b)),!1;if(a.cssMode){let w=s.isHorizontal(),T=h?y:-y;if(e===0)v&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),v&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[w?"scrollLeft":"scrollTop"]=T})):p[w?"scrollLeft":"scrollTop"]=T,v&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1});else{if(!s.support.smoothScroll)return Pw({swiper:s,targetPosition:T,side:w?"left":"top"}),!0;p.scrollTo({[w?"left":"top"]:T,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(y),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,n),s.transitionStart(t,b),e===0?s.transitionEnd(t,b):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(T){!s||s.destroyed||T.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,b))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function Vae(i,e,t,n){i===void 0&&(i=0),t===void 0&&(t=!0),typeof i=="string"&&(i=parseInt(i,10));let r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);let s=r.grid&&r.params.grid&&r.params.grid.rows>1,o=i;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)o=o+r.virtual.slidesBefore;else{let a;if(s){let h=o*r.params.grid.rows;a=r.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===h)[0].column}else a=r.getSlideIndexByData(o);let l=s?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:c}=r.params,u=r.params.slidesPerView;u==="auto"?u=r.slidesPerViewDynamic():(u=Math.ceil(parseFloat(r.params.slidesPerView,10)),c&&u%2===0&&(u=u+1));let d=l-a<u;if(c&&(d=d||a<Math.ceil(u/2)),n&&c&&r.params.slidesPerView!=="auto"&&!s&&(d=!1),d){let h=c?a<r.activeIndex?"prev":"next":a-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:h,slideTo:!0,activeSlideIndex:h==="next"?a+1:a-l+1,slideRealIndex:h==="next"?r.realIndex:void 0})}if(s){let h=o*r.params.grid.rows;o=r.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===h)[0].column}else o=r.getSlideIndexByData(o)}return requestAnimationFrame(()=>{r.slideTo(o,e,t,n)}),r}function Bae(i,e,t){e===void 0&&(e=!0);let n=this,{enabled:r,params:s,animating:o}=n;if(!r||n.destroyed)return n;typeof i>"u"&&(i=n.params.speed);let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(n.slidesPerViewDynamic("current",!0),1));let l=n.activeIndex<s.slidesPerGroupSkip?1:a,c=n.virtual&&s.virtual.enabled;if(s.loop){if(o&&!c&&s.loopPreventsSliding)return!1;if(n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft,n.activeIndex===n.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{n.slideTo(n.activeIndex+l,i,e,t)}),!0}return s.rewind&&n.isEnd?n.slideTo(0,i,e,t):n.slideTo(n.activeIndex+l,i,e,t)}function Gae(i,e,t){e===void 0&&(e=!0);let n=this,{params:r,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=n;if(!l||n.destroyed)return n;typeof i>"u"&&(i=n.params.speed);let u=n.virtual&&r.virtual.enabled;if(r.loop){if(c&&!u&&r.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}let d=a?n.translate:-n.translate;function h(y){return y<0?-Math.floor(Math.abs(y)):Math.floor(y)}let p=h(d),m=s.map(y=>h(y)),g=s[m.indexOf(p)-1];if(typeof g>"u"&&r.cssMode){let y;s.forEach((b,v)=>{p>=b&&(y=v)}),typeof y<"u"&&(g=s[y>0?y-1:y])}let f=0;if(typeof g<"u"&&(f=o.indexOf(g),f<0&&(f=n.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(f=f-n.slidesPerViewDynamic("previous",!0)+1,f=Math.max(f,0))),r.rewind&&n.isBeginning){let y=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(y,i,e,t)}else if(r.loop&&n.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{n.slideTo(f,i,e,t)}),!0;return n.slideTo(f,i,e,t)}function Uae(i,e,t){e===void 0&&(e=!0);let n=this;if(!n.destroyed)return typeof i>"u"&&(i=n.params.speed),n.slideTo(n.activeIndex,i,e,t)}function Hae(i,e,t,n){e===void 0&&(e=!0),n===void 0&&(n=.5);let r=this;if(r.destroyed)return;typeof i>"u"&&(i=r.params.speed);let s=r.activeIndex,o=Math.min(r.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[a]){let c=r.snapGrid[a],u=r.snapGrid[a+1];l-c>(u-c)*n&&(s+=r.params.slidesPerGroup)}else{let c=r.snapGrid[a-1],u=r.snapGrid[a];l-c<=(u-c)*n&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,i,e,t)}function zae(){let i=this;if(i.destroyed)return;let{params:e,slidesEl:t}=i,n=e.slidesPerView==="auto"?i.slidesPerViewDynamic():e.slidesPerView,r=i.clickedIndex,s,o=i.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(i.animating)return;s=parseInt(i.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<i.loopedSlides-n/2||r>i.slides.length-i.loopedSlides+n/2?(i.loopFix(),r=i.getSlideIndex(Vi(t,`${o}[data-swiper-slide-index="${s}"]`)[0]),bo(()=>{i.slideTo(r)})):i.slideTo(r):r>i.slides.length-n?(i.loopFix(),r=i.getSlideIndex(Vi(t,`${o}[data-swiper-slide-index="${s}"]`)[0]),bo(()=>{i.slideTo(r)})):i.slideTo(r)}else i.slideTo(r)}var Wae={slideTo:Nae,slideToLoop:Vae,slideNext:Bae,slidePrev:Gae,slideReset:Uae,slideToClosest:Hae,slideToClickedSlide:zae};function $ae(i){let e=this,{params:t,slidesEl:n}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;let r=()=>{Vi(n,`.${t.slideClass}, swiper-slide`).forEach((d,h)=>{d.setAttribute("data-swiper-slide-index",h)})},s=e.grid&&t.grid&&t.grid.rows>1,o=t.slidesPerGroup*(s?t.grid.rows:1),a=e.slides.length%o!==0,l=s&&e.slides.length%t.grid.rows!==0,c=u=>{for(let d=0;d<u;d+=1){let h=e.isElement?hn("swiper-slide",[t.slideBlankClass]):hn("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(h)}};if(a){if(t.loopAddBlankSlides){let u=o-e.slides.length%o;c(u),e.recalcSlides(),e.updateSlides()}else tf("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(l){if(t.loopAddBlankSlides){let u=t.grid.rows-e.slides.length%t.grid.rows;c(u),e.recalcSlides(),e.updateSlides()}else tf("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();e.loopFix({slideRealIndex:i,direction:t.centeredSlides?void 0:"next"})}function Kae(i){let{slideRealIndex:e,slideTo:t=!0,direction:n,setTranslate:r,activeSlideIndex:s,byController:o,byMousewheel:a}=i===void 0?{}:i,l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");let{slides:c,allowSlidePrev:u,allowSlideNext:d,slidesEl:h,params:p}=l,{centeredSlides:m}=p;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&p.virtual.enabled){t&&(!p.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):p.centeredSlides&&l.snapIndex<p.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=u,l.allowSlideNext=d,l.emit("loopFix");return}let g=p.slidesPerView;g==="auto"?g=l.slidesPerViewDynamic():(g=Math.ceil(parseFloat(p.slidesPerView,10)),m&&g%2===0&&(g=g+1));let f=p.slidesPerGroupAuto?g:p.slidesPerGroup,y=f;y%f!==0&&(y+=f-y%f),y+=p.loopAdditionalSlides,l.loopedSlides=y;let b=l.grid&&p.grid&&p.grid.rows>1;c.length<g+y?tf("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):b&&p.grid.fill==="row"&&tf("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");let v=[],S=[],w=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(c.filter(U=>U.classList.contains(p.slideActiveClass))[0]):w=s;let T=n==="next"||!n,D=n==="prev"||!n,O=0,R=0,L=b?Math.ceil(c.length/p.grid.rows):c.length,$=(b?c[s].column:s)+(m&&typeof r>"u"?-g/2+.5:0);if($<y){O=Math.max(y-$,f);for(let U=0;U<y-$;U+=1){let K=U-Math.floor(U/L)*L;if(b){let ie=L-K-1;for(let te=c.length-1;te>=0;te-=1)c[te].column===ie&&v.push(te)}else v.push(L-K-1)}}else if($+g>L-y){R=Math.max($-(L-y*2),f);for(let U=0;U<R;U+=1){let K=U-Math.floor(U/L)*L;b?c.forEach((ie,te)=>{ie.column===K&&S.push(te)}):S.push(K)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),D&&v.forEach(U=>{c[U].swiperLoopMoveDOM=!0,h.prepend(c[U]),c[U].swiperLoopMoveDOM=!1}),T&&S.forEach(U=>{c[U].swiperLoopMoveDOM=!0,h.append(c[U]),c[U].swiperLoopMoveDOM=!1}),l.recalcSlides(),p.slidesPerView==="auto"?l.updateSlides():b&&(v.length>0&&D||S.length>0&&T)&&l.slides.forEach((U,K)=>{l.grid.updateSlide(K,U,l.slides)}),p.watchSlidesProgress&&l.updateSlidesOffset(),t){if(v.length>0&&D){if(typeof e>"u"){let U=l.slidesGrid[w],ie=l.slidesGrid[w+O]-U;a?l.setTranslate(l.translate-ie):(l.slideTo(w+Math.ceil(O),0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-ie,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-ie))}else if(r){let U=b?v.length/p.grid.rows:v.length;l.slideTo(l.activeIndex+U,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(S.length>0&&T)if(typeof e>"u"){let U=l.slidesGrid[w],ie=l.slidesGrid[w-R]-U;a?l.setTranslate(l.translate-ie):(l.slideTo(w-R,0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-ie,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-ie))}else{let U=b?S.length/p.grid.rows:S.length;l.slideTo(l.activeIndex-U,0,!1,!0)}}if(l.allowSlidePrev=u,l.allowSlideNext=d,l.controller&&l.controller.control&&!o){let U={slideRealIndex:e,direction:n,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(K=>{!K.destroyed&&K.params.loop&&K.loopFix(dt(Se({},U),{slideTo:K.params.slidesPerView===p.slidesPerView?t:!1}))}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix(dt(Se({},U),{slideTo:l.controller.control.params.slidesPerView===p.slidesPerView?t:!1}))}l.emit("loopFix")}function jae(){let i=this,{params:e,slidesEl:t}=i;if(!e.loop||i.virtual&&i.params.virtual.enabled)return;i.recalcSlides();let n=[];i.slides.forEach(r=>{let s=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;n[s]=r}),i.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),n.forEach(r=>{t.append(r)}),i.recalcSlides(),i.slideTo(i.realIndex,0)}var Yae={loopCreate:$ae,loopFix:Kae,loopDestroy:jae};function qae(i){let e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;let t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=i?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function Xae(){let i=this;i.params.watchOverflow&&i.isLocked||i.params.cssMode||(i.isElement&&(i.__preventObserver__=!0),i[i.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",i.isElement&&requestAnimationFrame(()=>{i.__preventObserver__=!1}))}var Zae={setGrabCursor:qae,unsetGrabCursor:Xae};function Qae(i,e){e===void 0&&(e=this);function t(n){if(!n||n===Ci()||n===di())return null;n.assignedSlot&&(n=n.assignedSlot);let r=n.closest(i);return!r&&!n.getRootNode?null:r||t(n.getRootNode().host)}return t(e)}function lV(i,e,t){let n=di(),{params:r}=i,s=r.edgeSwipeDetection,o=r.edgeSwipeThreshold;return s&&(t<=o||t>=n.innerWidth-o)?s==="prevent"?(e.preventDefault(),!0):!1:!0}function Jae(i){let e=this,t=Ci(),n=i;n.originalEvent&&(n=n.originalEvent);let r=e.touchEventsData;if(n.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==n.pointerId)return;r.pointerId=n.pointerId}else n.type==="touchstart"&&n.targetTouches.length===1&&(r.touchId=n.targetTouches[0].identifier);if(n.type==="touchstart"){lV(e,n,n.targetTouches[0].pageX);return}let{params:s,touches:o,enabled:a}=e;if(!a||!s.simulateTouch&&n.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=n.target;if(s.touchEventsTarget==="wrapper"&&!rV(l,e.wrapperEl)||"which"in n&&n.which===3||"button"in n&&n.button>0||r.isTouched&&r.isMoved)return;let c=!!s.noSwipingClass&&s.noSwipingClass!=="",u=n.composedPath?n.composedPath():n.path;c&&n.target&&n.target.shadowRoot&&u&&(l=u[0]);let d=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,h=!!(n.target&&n.target.shadowRoot);if(s.noSwiping&&(h?Qae(d,l):l.closest(d))){e.allowClick=!0;return}if(s.swipeHandler&&!l.closest(s.swipeHandler))return;o.currentX=n.pageX,o.currentY=n.pageY;let p=o.currentX,m=o.currentY;if(!lV(e,n,p))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=m,r.touchStartTime=br(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let g=!0;l.matches(r.focusableElements)&&(g=!1,l.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==l&&(n.pointerType==="mouse"||n.pointerType!=="mouse"&&!l.matches(r.focusableElements))&&t.activeElement.blur();let f=g&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||f)&&!l.isContentEditable&&n.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",n)}function ele(i){let e=Ci(),t=this,n=t.touchEventsData,{params:r,touches:s,rtlTranslate:o,enabled:a}=t;if(!a||!r.simulateTouch&&i.pointerType==="mouse")return;let l=i;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(n.touchId!==null||l.pointerId!==n.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].filter(T=>T.identifier===n.touchId)[0],!c||c.identifier!==n.touchId)return}else c=l;if(!n.isTouched){n.startMoving&&n.isScrolling&&t.emit("touchMoveOpposite",l);return}let u=c.pageX,d=c.pageY;if(l.preventedByNestedSwiper){s.startX=u,s.startY=d;return}if(!t.allowTouchMove){l.target.matches(n.focusableElements)||(t.allowClick=!1),n.isTouched&&(Object.assign(s,{startX:u,startY:d,currentX:u,currentY:d}),n.touchStartTime=br());return}if(r.touchReleaseOnEdges&&!r.loop){if(t.isVertical()){if(d<s.startY&&t.translate<=t.maxTranslate()||d>s.startY&&t.translate>=t.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else if(u<s.startX&&t.translate<=t.maxTranslate()||u>s.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&e.activeElement.matches(n.focusableElements)&&e.activeElement!==l.target&&l.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&l.target===e.activeElement&&l.target.matches(n.focusableElements)){n.isMoved=!0,t.allowClick=!1;return}n.allowTouchCallbacks&&t.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=u,s.currentY=d;let h=s.currentX-s.startX,p=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(h**2+p**2)<t.params.threshold)return;if(typeof n.isScrolling>"u"){let T;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?n.isScrolling=!1:h*h+p*p>=25&&(T=Math.atan2(Math.abs(p),Math.abs(h))*180/Math.PI,n.isScrolling=t.isHorizontal()?T>r.touchAngle:90-T>r.touchAngle)}if(n.isScrolling&&t.emit("touchMoveOpposite",l),typeof n.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(n.startMoving=!0),n.isScrolling||l.type==="touchmove"&&n.preventTouchMoveFromPointerMove){n.isTouched=!1;return}if(!n.startMoving)return;t.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let m=t.isHorizontal()?h:p,g=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(m=Math.abs(m)*(o?1:-1),g=Math.abs(g)*(o?1:-1)),s.diff=m,m*=r.touchRatio,o&&(m=-m,g=-g);let f=t.touchesDirection;t.swipeDirection=m>0?"prev":"next",t.touchesDirection=g>0?"prev":"next";let y=t.params.loop&&!r.cssMode,b=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!n.isMoved){if(y&&b&&t.loopFix({direction:t.swipeDirection}),n.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){let T=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(T)}n.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let v;if(new Date().getTime(),n.isMoved&&n.allowThresholdMove&&f!==t.touchesDirection&&y&&b&&Math.abs(m)>=1){Object.assign(s,{startX:u,startY:d,currentX:u,currentY:d,startTranslate:n.currentTranslate}),n.loopSwapReset=!0,n.startTranslate=n.currentTranslate;return}t.emit("sliderMove",l),n.isMoved=!0,n.currentTranslate=m+n.startTranslate;let S=!0,w=r.resistanceRatio;if(r.touchReleaseOnEdges&&(w=0),m>0?(y&&b&&!v&&n.allowThresholdMove&&n.currentTranslate>(r.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),n.currentTranslate>t.minTranslate()&&(S=!1,r.resistance&&(n.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+n.startTranslate+m)**w))):m<0&&(y&&b&&!v&&n.allowThresholdMove&&n.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),n.currentTranslate<t.maxTranslate()&&(S=!1,r.resistance&&(n.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-n.startTranslate-m)**w))),S&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(n.currentTranslate=n.startTranslate),r.threshold>0)if(Math.abs(m)>r.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,n.currentTranslate=n.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{n.currentTranslate=n.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(n.currentTranslate),t.setTranslate(n.currentTranslate))}function tle(i){let e=this,t=e.touchEventsData,n=i;n.originalEvent&&(n=n.originalEvent);let r;if(n.type==="touchend"||n.type==="touchcancel"){if(r=[...n.changedTouches].filter(w=>w.identifier===t.touchId)[0],!r||r.identifier!==t.touchId)return}else{if(t.touchId!==null||n.pointerId!==t.pointerId)return;r=n}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;let{params:o,touches:a,rtlTranslate:l,slidesGrid:c,enabled:u}=e;if(!u||!o.simulateTouch&&n.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",n),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&o.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}o.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);let d=br(),h=d-t.touchStartTime;if(e.allowClick){let w=n.path||n.composedPath&&n.composedPath();e.updateClickedSlide(w&&w[0]||n.target,w),e.emit("tap click",n),h<300&&d-t.lastClickTime<300&&e.emit("doubleTap doubleClick",n)}if(t.lastClickTime=br(),bo(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let p;if(o.followFinger?p=l?e.translate:-e.translate:p=-t.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:p});return}let m=p>=-e.maxTranslate()&&!e.params.loop,g=0,f=e.slidesSizesGrid[0];for(let w=0;w<c.length;w+=w<o.slidesPerGroupSkip?1:o.slidesPerGroup){let T=w<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof c[w+T]<"u"?(m||p>=c[w]&&p<c[w+T])&&(g=w,f=c[w+T]-c[w]):(m||p>=c[w])&&(g=w,f=c[c.length-1]-c[c.length-2])}let y=null,b=null;o.rewind&&(e.isBeginning?b=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(y=0));let v=(p-c[g])/f,S=g<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(h>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(v>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?y:g+S):e.slideTo(g)),e.swipeDirection==="prev"&&(v>1-o.longSwipesRatio?e.slideTo(g+S):b!==null&&v<0&&Math.abs(v)>o.longSwipesRatio?e.slideTo(b):e.slideTo(g))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(n.target===e.navigation.nextEl||n.target===e.navigation.prevEl)?n.target===e.navigation.nextEl?e.slideTo(g+S):e.slideTo(g):(e.swipeDirection==="next"&&e.slideTo(y!==null?y:g+S),e.swipeDirection==="prev"&&e.slideTo(b!==null?b:g))}}function cV(){let i=this,{params:e,el:t}=i;if(t&&t.offsetWidth===0)return;e.breakpoints&&i.setBreakpoint();let{allowSlideNext:n,allowSlidePrev:r,snapGrid:s}=i,o=i.virtual&&i.params.virtual.enabled;i.allowSlideNext=!0,i.allowSlidePrev=!0,i.updateSize(),i.updateSlides(),i.updateSlidesClasses();let a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&i.isEnd&&!i.isBeginning&&!i.params.centeredSlides&&!a?i.slideTo(i.slides.length-1,0,!1,!0):i.params.loop&&!o?i.slideToLoop(i.realIndex,0,!1,!0):i.slideTo(i.activeIndex,0,!1,!0),i.autoplay&&i.autoplay.running&&i.autoplay.paused&&(clearTimeout(i.autoplay.resizeTimeout),i.autoplay.resizeTimeout=setTimeout(()=>{i.autoplay&&i.autoplay.running&&i.autoplay.paused&&i.autoplay.resume()},500)),i.allowSlidePrev=r,i.allowSlideNext=n,i.params.watchOverflow&&s!==i.snapGrid&&i.checkOverflow()}function ile(i){let e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&i.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(i.stopPropagation(),i.stopImmediatePropagation())))}function nle(){let i=this,{wrapperEl:e,rtlTranslate:t,enabled:n}=i;if(!n)return;i.previousTranslate=i.translate,i.isHorizontal()?i.translate=-e.scrollLeft:i.translate=-e.scrollTop,i.translate===0&&(i.translate=0),i.updateActiveIndex(),i.updateSlidesClasses();let r,s=i.maxTranslate()-i.minTranslate();s===0?r=0:r=(i.translate-i.minTranslate())/s,r!==i.progress&&i.updateProgress(t?-i.translate:i.translate),i.emit("setTranslate",i.translate,!1)}function rle(i){let e=this;VC(e,i.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function sle(){let i=this;i.documentTouchHandlerProceeded||(i.documentTouchHandlerProceeded=!0,i.params.touchReleaseOnEdges&&(i.el.style.touchAction="auto"))}var mV=(i,e)=>{let t=Ci(),{params:n,el:r,wrapperEl:s,device:o}=i,a=!!n.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;!r||typeof r=="string"||(t[l]("touchstart",i.onDocumentTouchStart,{passive:!1,capture:a}),r[l]("touchstart",i.onTouchStart,{passive:!1}),r[l]("pointerdown",i.onTouchStart,{passive:!1}),t[l]("touchmove",i.onTouchMove,{passive:!1,capture:a}),t[l]("pointermove",i.onTouchMove,{passive:!1,capture:a}),t[l]("touchend",i.onTouchEnd,{passive:!0}),t[l]("pointerup",i.onTouchEnd,{passive:!0}),t[l]("pointercancel",i.onTouchEnd,{passive:!0}),t[l]("touchcancel",i.onTouchEnd,{passive:!0}),t[l]("pointerout",i.onTouchEnd,{passive:!0}),t[l]("pointerleave",i.onTouchEnd,{passive:!0}),t[l]("contextmenu",i.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&r[l]("click",i.onClick,!0),n.cssMode&&s[l]("scroll",i.onScroll),n.updateOnWindowResize?i[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",cV,!0):i[c]("observerUpdate",cV,!0),r[l]("load",i.onLoad,{capture:!0}))};function ole(){let i=this,{params:e}=i;i.onTouchStart=Jae.bind(i),i.onTouchMove=ele.bind(i),i.onTouchEnd=tle.bind(i),i.onDocumentTouchStart=sle.bind(i),e.cssMode&&(i.onScroll=nle.bind(i)),i.onClick=ile.bind(i),i.onLoad=rle.bind(i),mV(i,"on")}function ale(){mV(this,"off")}var lle={attachEvents:ole,detachEvents:ale},uV=(i,e)=>i.grid&&e.grid&&e.grid.rows>1;function cle(){let i=this,{realIndex:e,initialized:t,params:n,el:r}=i,s=n.breakpoints;if(!s||s&&Object.keys(s).length===0)return;let o=i.getBreakpoint(s,i.params.breakpointsBase,i.el);if(!o||i.currentBreakpoint===o)return;let l=(o in s?s[o]:void 0)||i.originalParams,c=uV(i,n),u=uV(i,l),d=i.params.grabCursor,h=l.grabCursor,p=n.enabled;c&&!u?(r.classList.remove(`${n.containerModifierClass}grid`,`${n.containerModifierClass}grid-column`),i.emitContainerClasses()):!c&&u&&(r.classList.add(`${n.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&n.grid.fill==="column")&&r.classList.add(`${n.containerModifierClass}grid-column`),i.emitContainerClasses()),d&&!h?i.unsetGrabCursor():!d&&h&&i.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(v=>{if(typeof l[v]>"u")return;let S=n[v]&&n[v].enabled,w=l[v]&&l[v].enabled;S&&!w&&i[v].disable(),!S&&w&&i[v].enable()});let m=l.direction&&l.direction!==n.direction,g=n.loop&&(l.slidesPerView!==n.slidesPerView||m),f=n.loop;m&&t&&i.changeDirection(),Ur(i.params,l);let y=i.params.enabled,b=i.params.loop;Object.assign(i,{allowTouchMove:i.params.allowTouchMove,allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev}),p&&!y?i.disable():!p&&y&&i.enable(),i.currentBreakpoint=o,i.emit("_beforeBreakpoint",l),t&&(g?(i.loopDestroy(),i.loopCreate(e),i.updateSlides()):!f&&b?(i.loopCreate(e),i.updateSlides()):f&&!b&&i.loopDestroy()),i.emit("breakpoint",l)}function ule(i,e,t){if(e===void 0&&(e="window"),!i||e==="container"&&!t)return;let n=!1,r=di(),s=e==="window"?r.innerHeight:t.clientHeight,o=Object.keys(i).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){let l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){let{point:l,value:c}=o[a];e==="window"?r.matchMedia(`(min-width: ${c}px)`).matches&&(n=l):c<=t.clientWidth&&(n=l)}return n||"max"}var dle={setBreakpoint:cle,getBreakpoint:ule};function hle(i,e){let t=[];return i.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(r=>{n[r]&&t.push(e+r)}):typeof n=="string"&&t.push(e+n)}),t}function ple(){let i=this,{classNames:e,params:t,rtl:n,el:r,device:s}=i,o=hle(["initialized",t.direction,{"free-mode":i.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:n},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),r.classList.add(...e),i.emitContainerClasses()}function mle(){let i=this,{el:e,classNames:t}=i;!e||typeof e=="string"||(e.classList.remove(...t),i.emitContainerClasses())}var gle={addClasses:ple,removeClasses:mle};function fle(){let i=this,{isLocked:e,params:t}=i,{slidesOffsetBefore:n}=t;if(n){let r=i.slides.length-1,s=i.slidesGrid[r]+i.slidesSizesGrid[r]+n*2;i.isLocked=i.size>s}else i.isLocked=i.snapGrid.length===1;t.allowSlideNext===!0&&(i.allowSlideNext=!i.isLocked),t.allowSlidePrev===!0&&(i.allowSlidePrev=!i.isLocked),e&&e!==i.isLocked&&(i.isEnd=!1),e!==i.isLocked&&i.emit(i.isLocked?"lock":"unlock")}var vle={checkOverflow:fle},BC={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function yle(i,e){return function(n){n===void 0&&(n={});let r=Object.keys(n)[0],s=n[r];if(typeof s!="object"||s===null){Ur(e,n);return}if(i[r]===!0&&(i[r]={enabled:!0}),r==="navigation"&&i[r]&&i[r].enabled&&!i[r].prevEl&&!i[r].nextEl&&(i[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&i[r]&&i[r].enabled&&!i[r].el&&(i[r].auto=!0),!(r in i&&"enabled"in s)){Ur(e,n);return}typeof i[r]=="object"&&!("enabled"in i[r])&&(i[r].enabled=!0),i[r]||(i[r]={enabled:!1}),Ur(e,n)}}var Lw={eventsEmitter:gae,update:Tae,translate:Iae,transition:Rae,slide:Wae,loop:Yae,grabCursor:Zae,events:lle,breakpoints:dle,checkOverflow:vle,classes:gle},Rw={},Vc=class i{constructor(){let e,t;for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=Ur({},t),e&&!t.el&&(t.el=e);let o=Ci();if(t.el&&typeof t.el=="string"&&o.querySelectorAll(t.el).length>1){let u=[];return o.querySelectorAll(t.el).forEach(d=>{let h=Ur({},t,{el:d});u.push(new i(h))}),u}let a=this;a.__swiper__=!0,a.support=dV(),a.device=hV({userAgent:t.userAgent}),a.browser=hae(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);let l={};a.modules.forEach(u=>{u({params:t,swiper:a,extendParams:yle(t,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});let c=Ur({},BC,l);return a.params=Ur({},c,Rw,t),a.originalParams=Ur({},a.params),a.passedParams=Ur({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(u=>{a.on(u,a.params.on[u])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){let{slidesEl:t,params:n}=this,r=Vi(t,`.${n.slideClass}, swiper-slide`),s=Lc(r[0]);return Lc(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){let e=this,{slidesEl:t,params:n}=e;e.slides=Vi(t,`.${n.slideClass}, swiper-slide`)}enable(){let e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){let e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){let n=this;e=Math.min(Math.max(e,0),1);let r=n.minTranslate(),o=(n.maxTranslate()-r)*e+r;n.translateTo(o,typeof t>"u"?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){let e=this;if(!e.params._emitClasses||!e.el)return;let t=e.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){let t=this;return t.destroyed?"":e.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){let e=this;if(!e.params._emitClasses||!e.el)return;let t=[];e.slides.forEach(n=>{let r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);let n=this,{params:r,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=n,u=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let d=s[c]?Math.ceil(s[c].swiperSlideSize):0,h;for(let p=c+1;p<s.length;p+=1)s[p]&&!h&&(d+=Math.ceil(s[p].swiperSlideSize),u+=1,d>l&&(h=!0));for(let p=c-1;p>=0;p-=1)s[p]&&!h&&(d+=s[p].swiperSlideSize,u+=1,d>l&&(h=!0))}else if(e==="current")for(let d=c+1;d<s.length;d+=1)(t?o[d]+a[d]-o[c]<l:o[d]-o[c]<l)&&(u+=1);else for(let d=c-1;d>=0;d-=1)o[c]-o[d]<l&&(u+=1);return u}update(){let e=this;if(!e||e.destroyed)return;let{snapGrid:t,params:n}=e;n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&VC(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){let o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(n.freeMode&&n.freeMode.enabled&&!n.cssMode)r(),n.autoHeight&&e.updateAutoHeight();else{if((n.slidesPerView==="auto"||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){let o=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(o.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||r()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);let n=this,r=n.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(n.el.classList.remove(`${n.params.containerModifierClass}${r}`),n.el.classList.add(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){let t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){let t=this;if(t.mounted)return!0;let n=e||t.params.el;if(typeof n=="string"&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);let r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`,o=n&&n.shadowRoot&&n.shadowRoot.querySelector?n.shadowRoot.querySelector(r()):Vi(n,r())[0];return!o&&t.params.createElements&&(o=hn("div",t.params.wrapperClass),n.append(o),Vi(n,`.${t.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(t,{el:n,wrapperEl:o,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:o,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:n.dir.toLowerCase()==="rtl"||gl(n,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(n.dir.toLowerCase()==="rtl"||gl(n,"direction")==="rtl"),wrongRTL:gl(o,"display")==="-webkit-box"}),!0}init(e){let t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();let r=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&r.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(s=>{s.complete?VC(t,s):s.addEventListener("load",o=>{VC(t,o.target)})}),Nw(t),t.initialized=!0,Nw(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);let n=this,{params:r,el:s,wrapperEl:o,slides:a}=n;return typeof n.params>"u"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),s&&typeof s!="string"&&s.removeAttribute("style"),o&&o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(l=>{n.off(l)}),e!==!1&&(n.el&&typeof n.el!="string"&&(n.el.swiper=null),nV(n)),n.destroyed=!0),null}static extendDefaults(e){Ur(Rw,e)}static get extendedDefaults(){return Rw}static get defaults(){return BC}static installModule(e){i.prototype.__modules__||(i.prototype.__modules__=[]);let t=i.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>i.installModule(t)),i):(i.installModule(e),i)}};Object.keys(Lw).forEach(i=>{Object.keys(Lw[i]).forEach(e=>{Vc.prototype[e]=Lw[i][e]})});Vc.use([pae,mae]);function gV(i){let{swiper:e,extendParams:t,on:n,emit:r}=i;t({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});let s,o=Ci();e.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};let a=o.createElement("div");function l(m,g){let f=e.params.virtual;if(f.cache&&e.virtual.cache[g])return e.virtual.cache[g];let y;return f.renderSlide?(y=f.renderSlide.call(e,m,g),typeof y=="string"&&(a.innerHTML=y,y=a.children[0])):e.isElement?y=hn("swiper-slide"):y=hn("div",e.params.slideClass),y.setAttribute("data-swiper-slide-index",g),f.renderSlide||(y.innerHTML=m),f.cache&&(e.virtual.cache[g]=y),y}function c(m,g){let{slidesPerView:f,slidesPerGroup:y,centeredSlides:b,loop:v,initialSlide:S}=e.params;if(g&&!v&&S>0)return;let{addSlidesBefore:w,addSlidesAfter:T}=e.params.virtual,{from:D,to:O,slides:R,slidesGrid:L,offset:B}=e.virtual;e.params.cssMode||e.updateActiveIndex();let $=e.activeIndex||0,U;e.rtlTranslate?U="right":U=e.isHorizontal()?"left":"top";let K,ie;b?(K=Math.floor(f/2)+y+T,ie=Math.floor(f/2)+y+w):(K=f+(y-1)+T,ie=(v?f:y)+w);let te=$-ie,j=$+K;v||(te=Math.max(te,0),j=Math.min(j,R.length-1));let Y=(e.slidesGrid[te]||0)-(e.slidesGrid[0]||0);v&&$>=ie?(te-=ie,b||(Y+=e.slidesGrid[0])):v&&$<ie&&(te=-ie,b&&(Y+=e.slidesGrid[0])),Object.assign(e.virtual,{from:te,to:j,offset:Y,slidesGrid:e.slidesGrid,slidesBefore:ie,slidesAfter:K});function se(){e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),r("virtualUpdate")}if(D===te&&O===j&&!m){e.slidesGrid!==L&&Y!==B&&e.slides.forEach(Le=>{Le.style[U]=`${Y-Math.abs(e.cssOverflowAdjustment())}px`}),e.updateProgress(),r("virtualUpdate");return}if(e.params.virtual.renderExternal){e.params.virtual.renderExternal.call(e,{offset:Y,from:te,to:j,slides:function(){let We=[];for(let xe=te;xe<=j;xe+=1)We.push(R[xe]);return We}()}),e.params.virtual.renderExternalUpdate?se():r("virtualUpdate");return}let me=[],re=[],ve=Le=>{let We=Le;return Le<0?We=R.length+Le:We>=R.length&&(We=We-R.length),We};if(m)e.slides.filter(Le=>Le.matches(`.${e.params.slideClass}, swiper-slide`)).forEach(Le=>{Le.remove()});else for(let Le=D;Le<=O;Le+=1)if(Le<te||Le>j){let We=ve(Le);e.slides.filter(xe=>xe.matches(`.${e.params.slideClass}[data-swiper-slide-index="${We}"], swiper-slide[data-swiper-slide-index="${We}"]`)).forEach(xe=>{xe.remove()})}let _e=v?-R.length:0,Ge=v?R.length*2:R.length;for(let Le=_e;Le<Ge;Le+=1)if(Le>=te&&Le<=j){let We=ve(Le);typeof O>"u"||m?re.push(We):(Le>O&&re.push(We),Le<D&&me.push(We))}if(re.forEach(Le=>{e.slidesEl.append(l(R[Le],Le))}),v)for(let Le=me.length-1;Le>=0;Le-=1){let We=me[Le];e.slidesEl.prepend(l(R[We],We))}else me.sort((Le,We)=>We-Le),me.forEach(Le=>{e.slidesEl.prepend(l(R[Le],Le))});Vi(e.slidesEl,".swiper-slide, swiper-slide").forEach(Le=>{Le.style[U]=`${Y-Math.abs(e.cssOverflowAdjustment())}px`}),se()}function u(m){if(typeof m=="object"&&"length"in m)for(let g=0;g<m.length;g+=1)m[g]&&e.virtual.slides.push(m[g]);else e.virtual.slides.push(m);c(!0)}function d(m){let g=e.activeIndex,f=g+1,y=1;if(Array.isArray(m)){for(let b=0;b<m.length;b+=1)m[b]&&e.virtual.slides.unshift(m[b]);f=g+m.length,y=m.length}else e.virtual.slides.unshift(m);if(e.params.virtual.cache){let b=e.virtual.cache,v={};Object.keys(b).forEach(S=>{let w=b[S],T=w.getAttribute("data-swiper-slide-index");T&&w.setAttribute("data-swiper-slide-index",parseInt(T,10)+y),v[parseInt(S,10)+y]=w}),e.virtual.cache=v}c(!0),e.slideTo(f,0)}function h(m){if(typeof m>"u"||m===null)return;let g=e.activeIndex;if(Array.isArray(m))for(let f=m.length-1;f>=0;f-=1)e.params.virtual.cache&&(delete e.virtual.cache[m[f]],Object.keys(e.virtual.cache).forEach(y=>{y>m&&(e.virtual.cache[y-1]=e.virtual.cache[y],e.virtual.cache[y-1].setAttribute("data-swiper-slide-index",y-1),delete e.virtual.cache[y])})),e.virtual.slides.splice(m[f],1),m[f]<g&&(g-=1),g=Math.max(g,0);else e.params.virtual.cache&&(delete e.virtual.cache[m],Object.keys(e.virtual.cache).forEach(f=>{f>m&&(e.virtual.cache[f-1]=e.virtual.cache[f],e.virtual.cache[f-1].setAttribute("data-swiper-slide-index",f-1),delete e.virtual.cache[f])})),e.virtual.slides.splice(m,1),m<g&&(g-=1),g=Math.max(g,0);c(!0),e.slideTo(g,0)}function p(){e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),c(!0),e.slideTo(0,0)}n("beforeInit",()=>{if(!e.params.virtual.enabled)return;let m;if(typeof e.passedParams.virtual.slides>"u"){let g=[...e.slidesEl.children].filter(f=>f.matches(`.${e.params.slideClass}, swiper-slide`));g&&g.length&&(e.virtual.slides=[...g],m=!0,g.forEach((f,y)=>{f.setAttribute("data-swiper-slide-index",y),e.virtual.cache[y]=f,f.remove()}))}m||(e.virtual.slides=e.params.virtual.slides),e.classNames.push(`${e.params.containerModifierClass}virtual`),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0,c(!1,!0)}),n("setTranslate",()=>{e.params.virtual.enabled&&(e.params.cssMode&&!e._immediateVirtual?(clearTimeout(s),s=setTimeout(()=>{c()},100)):c())}),n("init update resize",()=>{e.params.virtual.enabled&&e.params.cssMode&&nd(e.wrapperEl,"--swiper-virtual-size",`${e.virtualSize}px`)}),Object.assign(e.virtual,{appendSlide:u,prependSlide:d,removeSlide:h,removeAllSlides:p,update:c})}function fV(i){let{swiper:e,extendParams:t,on:n,emit:r}=i,s=Ci(),o=di();e.keyboard={enabled:!1},t({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function a(u){if(!e.enabled)return;let{rtlTranslate:d}=e,h=u;h.originalEvent&&(h=h.originalEvent);let p=h.keyCode||h.charCode,m=e.params.keyboard.pageUpDown,g=m&&p===33,f=m&&p===34,y=p===37,b=p===39,v=p===38,S=p===40;if(!e.allowSlideNext&&(e.isHorizontal()&&b||e.isVertical()&&S||f)||!e.allowSlidePrev&&(e.isHorizontal()&&y||e.isVertical()&&v||g))return!1;if(!(h.shiftKey||h.altKey||h.ctrlKey||h.metaKey)&&!(s.activeElement&&s.activeElement.nodeName&&(s.activeElement.nodeName.toLowerCase()==="input"||s.activeElement.nodeName.toLowerCase()==="textarea"))){if(e.params.keyboard.onlyInViewport&&(g||f||y||b||v||S)){let w=!1;if(So(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&So(e.el,`.${e.params.slideActiveClass}`).length===0)return;let T=e.el,D=T.clientWidth,O=T.clientHeight,R=o.innerWidth,L=o.innerHeight,B=rd(T);d&&(B.left-=T.scrollLeft);let $=[[B.left,B.top],[B.left+D,B.top],[B.left,B.top+O],[B.left+D,B.top+O]];for(let U=0;U<$.length;U+=1){let K=$[U];if(K[0]>=0&&K[0]<=R&&K[1]>=0&&K[1]<=L){if(K[0]===0&&K[1]===0)continue;w=!0}}if(!w)return}e.isHorizontal()?((g||f||y||b)&&(h.preventDefault?h.preventDefault():h.returnValue=!1),((f||b)&&!d||(g||y)&&d)&&e.slideNext(),((g||y)&&!d||(f||b)&&d)&&e.slidePrev()):((g||f||v||S)&&(h.preventDefault?h.preventDefault():h.returnValue=!1),(f||S)&&e.slideNext(),(g||v)&&e.slidePrev()),r("keyPress",p)}}function l(){e.keyboard.enabled||(s.addEventListener("keydown",a),e.keyboard.enabled=!0)}function c(){e.keyboard.enabled&&(s.removeEventListener("keydown",a),e.keyboard.enabled=!1)}n("init",()=>{e.params.keyboard.enabled&&l()}),n("destroy",()=>{e.keyboard.enabled&&c()}),Object.assign(e.keyboard,{enable:l,disable:c})}function vV(i){let{swiper:e,extendParams:t,on:n,emit:r}=i,s=di();t({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let o,a=br(),l,c=[];function u(v){let D=0,O=0,R=0,L=0;return"detail"in v&&(O=v.detail),"wheelDelta"in v&&(O=-v.wheelDelta/120),"wheelDeltaY"in v&&(O=-v.wheelDeltaY/120),"wheelDeltaX"in v&&(D=-v.wheelDeltaX/120),"axis"in v&&v.axis===v.HORIZONTAL_AXIS&&(D=O,O=0),R=D*10,L=O*10,"deltaY"in v&&(L=v.deltaY),"deltaX"in v&&(R=v.deltaX),v.shiftKey&&!R&&(R=L,L=0),(R||L)&&v.deltaMode&&(v.deltaMode===1?(R*=40,L*=40):(R*=800,L*=800)),R&&!D&&(D=R<1?-1:1),L&&!O&&(O=L<1?-1:1),{spinX:D,spinY:O,pixelX:R,pixelY:L}}function d(){e.enabled&&(e.mouseEntered=!0)}function h(){e.enabled&&(e.mouseEntered=!1)}function p(v){return e.params.mousewheel.thresholdDelta&&v.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&br()-a<e.params.mousewheel.thresholdTime?!1:v.delta>=6&&br()-a<60?!0:(v.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),r("scroll",v.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),r("scroll",v.raw)),a=new s.Date().getTime(),!1)}function m(v){let S=e.params.mousewheel;if(v.direction<0){if(e.isEnd&&!e.params.loop&&S.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&S.releaseOnEdges)return!0;return!1}function g(v){let S=v,w=!0;if(!e.enabled||v.target.closest(`.${e.params.mousewheel.noMousewheelClass}`))return;let T=e.params.mousewheel;e.params.cssMode&&S.preventDefault();let D=e.el;e.params.mousewheel.eventsTarget!=="container"&&(D=document.querySelector(e.params.mousewheel.eventsTarget));let O=D&&D.contains(S.target);if(!e.mouseEntered&&!O&&!T.releaseOnEdges)return!0;S.originalEvent&&(S=S.originalEvent);let R=0,L=e.rtlTranslate?-1:1,B=u(S);if(T.forceToAxis)if(e.isHorizontal())if(Math.abs(B.pixelX)>Math.abs(B.pixelY))R=-B.pixelX*L;else return!0;else if(Math.abs(B.pixelY)>Math.abs(B.pixelX))R=-B.pixelY;else return!0;else R=Math.abs(B.pixelX)>Math.abs(B.pixelY)?-B.pixelX*L:-B.pixelY;if(R===0)return!0;T.invert&&(R=-R);let $=e.getTranslate()+R*T.sensitivity;if($>=e.minTranslate()&&($=e.minTranslate()),$<=e.maxTranslate()&&($=e.maxTranslate()),w=e.params.loop?!0:!($===e.minTranslate()||$===e.maxTranslate()),w&&e.params.nested&&S.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){let U={time:br(),delta:Math.abs(R),direction:Math.sign(R),raw:v};c.length>=2&&c.shift();let K=c.length?c[c.length-1]:void 0;if(c.push(U),K?(U.direction!==K.direction||U.delta>K.delta||U.time>K.time+150)&&p(U):p(U),m(U))return!0}else{let U={time:br(),delta:Math.abs(R),direction:Math.sign(R)},K=l&&U.time<l.time+500&&U.delta<=l.delta&&U.direction===l.direction;if(!K){l=void 0;let ie=e.getTranslate()+R*T.sensitivity,te=e.isBeginning,j=e.isEnd;if(ie>=e.minTranslate()&&(ie=e.minTranslate()),ie<=e.maxTranslate()&&(ie=e.maxTranslate()),e.setTransition(0),e.setTranslate(ie),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!te&&e.isBeginning||!j&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:U.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(o),o=void 0,c.length>=15&&c.shift();let Y=c.length?c[c.length-1]:void 0,se=c[0];if(c.push(U),Y&&(U.delta>Y.delta||U.direction!==Y.direction))c.splice(0);else if(c.length>=15&&U.time-se.time<500&&se.delta-U.delta>=1&&U.delta<=6){let me=R>0?.8:.2;l=U,c.splice(0),o=bo(()=>{e.destroyed||!e.params||e.slideToClosest(e.params.speed,!0,void 0,me)},0)}o||(o=bo(()=>{if(e.destroyed||!e.params)return;let me=.5;l=U,c.splice(0),e.slideToClosest(e.params.speed,!0,void 0,me)},500))}if(K||r("scroll",S),e.params.autoplay&&e.params.autoplayDisableOnInteraction&&e.autoplay.stop(),T.releaseOnEdges&&(ie===e.minTranslate()||ie===e.maxTranslate()))return!0}}return S.preventDefault?S.preventDefault():S.returnValue=!1,!1}function f(v){let S=e.el;e.params.mousewheel.eventsTarget!=="container"&&(S=document.querySelector(e.params.mousewheel.eventsTarget)),S[v]("mouseenter",d),S[v]("mouseleave",h),S[v]("wheel",g)}function y(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",g),!0):e.mousewheel.enabled?!1:(f("addEventListener"),e.mousewheel.enabled=!0,!0)}function b(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,g),!0):e.mousewheel.enabled?(f("removeEventListener"),e.mousewheel.enabled=!1,!0):!1}n("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&b(),e.params.mousewheel.enabled&&y()}),n("destroy",()=>{e.params.cssMode&&y(),e.mousewheel.enabled&&b()}),Object.assign(e.mousewheel,{enable:y,disable:b})}function xp(i,e,t,n){return i.params.createElements&&Object.keys(n).forEach(r=>{if(!t[r]&&t.auto===!0){let s=Vi(i.el,`.${n[r]}`)[0];s||(s=hn("div",n[r]),s.className=n[r],i.el.append(s)),t[r]=s,e[r]=s}}),t}function yV(i){let{swiper:e,extendParams:t,on:n,emit:r}=i;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function s(m){let g;return m&&typeof m=="string"&&e.isElement&&(g=e.el.querySelector(m)||e.hostEl.querySelector(m),g)?g:(m&&(typeof m=="string"&&(g=[...document.querySelectorAll(m)]),e.params.uniqueNavElements&&typeof m=="string"&&g&&g.length>1&&e.el.querySelectorAll(m).length===1?g=e.el.querySelector(m):g&&g.length===1&&(g=g[0])),m&&!g?m:g)}function o(m,g){let f=e.params.navigation;m=Pt(m),m.forEach(y=>{y&&(y.classList[g?"add":"remove"](...f.disabledClass.split(" ")),y.tagName==="BUTTON"&&(y.disabled=g),e.params.watchOverflow&&e.enabled&&y.classList[e.isLocked?"add":"remove"](f.lockClass))})}function a(){let{nextEl:m,prevEl:g}=e.navigation;if(e.params.loop){o(g,!1),o(m,!1);return}o(g,e.isBeginning&&!e.params.rewind),o(m,e.isEnd&&!e.params.rewind)}function l(m){m.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function c(m){m.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function u(){let m=e.params.navigation;if(e.params.navigation=xp(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(m.nextEl||m.prevEl))return;let g=s(m.nextEl),f=s(m.prevEl);Object.assign(e.navigation,{nextEl:g,prevEl:f}),g=Pt(g),f=Pt(f);let y=(b,v)=>{b&&b.addEventListener("click",v==="next"?c:l),!e.enabled&&b&&b.classList.add(...m.lockClass.split(" "))};g.forEach(b=>y(b,"next")),f.forEach(b=>y(b,"prev"))}function d(){let{nextEl:m,prevEl:g}=e.navigation;m=Pt(m),g=Pt(g);let f=(y,b)=>{y.removeEventListener("click",b==="next"?c:l),y.classList.remove(...e.params.navigation.disabledClass.split(" "))};m.forEach(y=>f(y,"next")),g.forEach(y=>f(y,"prev"))}n("init",()=>{e.params.navigation.enabled===!1?p():(u(),a())}),n("toEdge fromEdge lock unlock",()=>{a()}),n("destroy",()=>{d()}),n("enable disable",()=>{let{nextEl:m,prevEl:g}=e.navigation;if(m=Pt(m),g=Pt(g),e.enabled){a();return}[...m,...g].filter(f=>!!f).forEach(f=>f.classList.add(e.params.navigation.lockClass))}),n("click",(m,g)=>{let{nextEl:f,prevEl:y}=e.navigation;f=Pt(f),y=Pt(y);let b=g.target,v=y.includes(b)||f.includes(b);if(e.isElement&&!v){let S=g.path||g.composedPath&&g.composedPath();S&&(v=S.find(w=>f.includes(w)||y.includes(w)))}if(e.params.navigation.hideOnClick&&!v){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===b||e.pagination.el.contains(b)))return;let S;f.length?S=f[0].classList.contains(e.params.navigation.hiddenClass):y.length&&(S=y[0].classList.contains(e.params.navigation.hiddenClass)),r(S===!0?"navigationShow":"navigationHide"),[...f,...y].filter(w=>!!w).forEach(w=>w.classList.toggle(e.params.navigation.hiddenClass))}});let h=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),u(),a()},p=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),d()};Object.assign(e.navigation,{enable:h,disable:p,update:a,init:u,destroy:d})}function Ws(i){return i===void 0&&(i=""),`.${i.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function CV(i){let{swiper:e,extendParams:t,on:n,emit:r}=i,s="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:b=>b,formatFractionTotal:b=>b,bulletClass:`${s}-bullet`,bulletActiveClass:`${s}-bullet-active`,modifierClass:`${s}-`,currentClass:`${s}-current`,totalClass:`${s}-total`,hiddenClass:`${s}-hidden`,progressbarFillClass:`${s}-progressbar-fill`,progressbarOppositeClass:`${s}-progressbar-opposite`,clickableClass:`${s}-clickable`,lockClass:`${s}-lock`,horizontalClass:`${s}-horizontal`,verticalClass:`${s}-vertical`,paginationDisabledClass:`${s}-disabled`}}),e.pagination={el:null,bullets:[]};let o,a=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(b,v){let{bulletActiveClass:S}=e.params.pagination;b&&(b=b[`${v==="prev"?"previous":"next"}ElementSibling`],b&&(b.classList.add(`${S}-${v}`),b=b[`${v==="prev"?"previous":"next"}ElementSibling`],b&&b.classList.add(`${S}-${v}-${v}`)))}function u(b,v,S){if(b=b%S,v=v%S,v===b+1)return"next";if(v===b-1)return"previous"}function d(b){let v=b.target.closest(Ws(e.params.pagination.bulletClass));if(!v)return;b.preventDefault();let S=Lc(v)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===S)return;let w=u(e.realIndex,S,e.slides.length);w==="next"?e.slideNext():w==="previous"?e.slidePrev():e.slideToLoop(S)}else e.slideTo(S)}function h(){let b=e.rtl,v=e.params.pagination;if(l())return;let S=e.pagination.el;S=Pt(S);let w,T,D=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,O=e.params.loop?Math.ceil(D/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(T=e.previousRealIndex||0,w=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(w=e.snapIndex,T=e.previousSnapIndex):(T=e.previousIndex||0,w=e.activeIndex||0),v.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){let R=e.pagination.bullets,L,B,$;if(v.dynamicBullets&&(o=nf(R[0],e.isHorizontal()?"width":"height",!0),S.forEach(U=>{U.style[e.isHorizontal()?"width":"height"]=`${o*(v.dynamicMainBullets+4)}px`}),v.dynamicMainBullets>1&&T!==void 0&&(a+=w-(T||0),a>v.dynamicMainBullets-1?a=v.dynamicMainBullets-1:a<0&&(a=0)),L=Math.max(w-a,0),B=L+(Math.min(R.length,v.dynamicMainBullets)-1),$=(B+L)/2),R.forEach(U=>{let K=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(ie=>`${v.bulletActiveClass}${ie}`)].map(ie=>typeof ie=="string"&&ie.includes(" ")?ie.split(" "):ie).flat();U.classList.remove(...K)}),S.length>1)R.forEach(U=>{let K=Lc(U);K===w?U.classList.add(...v.bulletActiveClass.split(" ")):e.isElement&&U.setAttribute("part","bullet"),v.dynamicBullets&&(K>=L&&K<=B&&U.classList.add(...`${v.bulletActiveClass}-main`.split(" ")),K===L&&c(U,"prev"),K===B&&c(U,"next"))});else{let U=R[w];if(U&&U.classList.add(...v.bulletActiveClass.split(" ")),e.isElement&&R.forEach((K,ie)=>{K.setAttribute("part",ie===w?"bullet-active":"bullet")}),v.dynamicBullets){let K=R[L],ie=R[B];for(let te=L;te<=B;te+=1)R[te]&&R[te].classList.add(...`${v.bulletActiveClass}-main`.split(" "));c(K,"prev"),c(ie,"next")}}if(v.dynamicBullets){let U=Math.min(R.length,v.dynamicMainBullets+4),K=(o*U-o)/2-$*o,ie=b?"right":"left";R.forEach(te=>{te.style[e.isHorizontal()?ie:"top"]=`${K}px`})}}S.forEach((R,L)=>{if(v.type==="fraction"&&(R.querySelectorAll(Ws(v.currentClass)).forEach(B=>{B.textContent=v.formatFractionCurrent(w+1)}),R.querySelectorAll(Ws(v.totalClass)).forEach(B=>{B.textContent=v.formatFractionTotal(O)})),v.type==="progressbar"){let B;v.progressbarOpposite?B=e.isHorizontal()?"vertical":"horizontal":B=e.isHorizontal()?"horizontal":"vertical";let $=(w+1)/O,U=1,K=1;B==="horizontal"?U=$:K=$,R.querySelectorAll(Ws(v.progressbarFillClass)).forEach(ie=>{ie.style.transform=`translate3d(0,0,0) scaleX(${U}) scaleY(${K})`,ie.style.transitionDuration=`${e.params.speed}ms`})}v.type==="custom"&&v.renderCustom?(R.innerHTML=v.renderCustom(e,w+1,O),L===0&&r("paginationRender",R)):(L===0&&r("paginationRender",R),r("paginationUpdate",R)),e.params.watchOverflow&&e.enabled&&R.classList[e.isLocked?"add":"remove"](v.lockClass)})}function p(){let b=e.params.pagination;if(l())return;let v=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length,S=e.pagination.el;S=Pt(S);let w="";if(b.type==="bullets"){let T=e.params.loop?Math.ceil(v/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&T>v&&(T=v);for(let D=0;D<T;D+=1)b.renderBullet?w+=b.renderBullet.call(e,D,b.bulletClass):w+=`<${b.bulletElement} ${e.isElement?'part="bullet"':""} class="${b.bulletClass}"></${b.bulletElement}>`}b.type==="fraction"&&(b.renderFraction?w=b.renderFraction.call(e,b.currentClass,b.totalClass):w=`<span class="${b.currentClass}"></span> / <span class="${b.totalClass}"></span>`),b.type==="progressbar"&&(b.renderProgressbar?w=b.renderProgressbar.call(e,b.progressbarFillClass):w=`<span class="${b.progressbarFillClass}"></span>`),e.pagination.bullets=[],S.forEach(T=>{b.type!=="custom"&&(T.innerHTML=w||""),b.type==="bullets"&&e.pagination.bullets.push(...T.querySelectorAll(Ws(b.bulletClass)))}),b.type!=="custom"&&r("paginationRender",S[0])}function m(){e.params.pagination=xp(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});let b=e.params.pagination;if(!b.el)return;let v;typeof b.el=="string"&&e.isElement&&(v=e.el.querySelector(b.el)),!v&&typeof b.el=="string"&&(v=[...document.querySelectorAll(b.el)]),v||(v=b.el),!(!v||v.length===0)&&(e.params.uniqueNavElements&&typeof b.el=="string"&&Array.isArray(v)&&v.length>1&&(v=[...e.el.querySelectorAll(b.el)],v.length>1&&(v=v.filter(S=>So(S,".swiper")[0]===e.el)[0])),Array.isArray(v)&&v.length===1&&(v=v[0]),Object.assign(e.pagination,{el:v}),v=Pt(v),v.forEach(S=>{b.type==="bullets"&&b.clickable&&S.classList.add(...(b.clickableClass||"").split(" ")),S.classList.add(b.modifierClass+b.type),S.classList.add(e.isHorizontal()?b.horizontalClass:b.verticalClass),b.type==="bullets"&&b.dynamicBullets&&(S.classList.add(`${b.modifierClass}${b.type}-dynamic`),a=0,b.dynamicMainBullets<1&&(b.dynamicMainBullets=1)),b.type==="progressbar"&&b.progressbarOpposite&&S.classList.add(b.progressbarOppositeClass),b.clickable&&S.addEventListener("click",d),e.enabled||S.classList.add(b.lockClass)}))}function g(){let b=e.params.pagination;if(l())return;let v=e.pagination.el;v&&(v=Pt(v),v.forEach(S=>{S.classList.remove(b.hiddenClass),S.classList.remove(b.modifierClass+b.type),S.classList.remove(e.isHorizontal()?b.horizontalClass:b.verticalClass),b.clickable&&(S.classList.remove(...(b.clickableClass||"").split(" ")),S.removeEventListener("click",d))})),e.pagination.bullets&&e.pagination.bullets.forEach(S=>S.classList.remove(...b.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;let b=e.params.pagination,{el:v}=e.pagination;v=Pt(v),v.forEach(S=>{S.classList.remove(b.horizontalClass,b.verticalClass),S.classList.add(e.isHorizontal()?b.horizontalClass:b.verticalClass)})}),n("init",()=>{e.params.pagination.enabled===!1?y():(m(),p(),h())}),n("activeIndexChange",()=>{typeof e.snapIndex>"u"&&h()}),n("snapIndexChange",()=>{h()}),n("snapGridLengthChange",()=>{p(),h()}),n("destroy",()=>{g()}),n("enable disable",()=>{let{el:b}=e.pagination;b&&(b=Pt(b),b.forEach(v=>v.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),n("lock unlock",()=>{h()}),n("click",(b,v)=>{let S=v.target,w=Pt(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&w&&w.length>0&&!S.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&S===e.navigation.nextEl||e.navigation.prevEl&&S===e.navigation.prevEl))return;let T=w[0].classList.contains(e.params.pagination.hiddenClass);r(T===!0?"paginationShow":"paginationHide"),w.forEach(D=>D.classList.toggle(e.params.pagination.hiddenClass))}});let f=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:b}=e.pagination;b&&(b=Pt(b),b.forEach(v=>v.classList.remove(e.params.pagination.paginationDisabledClass))),m(),p(),h()},y=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:b}=e.pagination;b&&(b=Pt(b),b.forEach(v=>v.classList.add(e.params.pagination.paginationDisabledClass))),g()};Object.assign(e.pagination,{enable:f,disable:y,render:p,update:h,init:m,destroy:g})}function bV(i){let{swiper:e,extendParams:t,on:n,emit:r}=i,s=Ci(),o=!1,a=null,l=null,c,u,d,h;t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function p(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;let{scrollbar:$,rtlTranslate:U}=e,{dragEl:K,el:ie}=$,te=e.params.scrollbar,j=e.params.loop?e.progressLoop:e.progress,Y=u,se=(d-u)*j;U?(se=-se,se>0?(Y=u-se,se=0):-se+u>d&&(Y=d+se)):se<0?(Y=u+se,se=0):se+u>d&&(Y=d-se),e.isHorizontal()?(K.style.transform=`translate3d(${se}px, 0, 0)`,K.style.width=`${Y}px`):(K.style.transform=`translate3d(0px, ${se}px, 0)`,K.style.height=`${Y}px`),te.hide&&(clearTimeout(a),ie.style.opacity=1,a=setTimeout(()=>{ie.style.opacity=0,ie.style.transitionDuration="400ms"},1e3))}function m($){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${$}ms`)}function g(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;let{scrollbar:$}=e,{dragEl:U,el:K}=$;U.style.width="",U.style.height="",d=e.isHorizontal()?K.offsetWidth:K.offsetHeight,h=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?u=d*h:u=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?U.style.width=`${u}px`:U.style.height=`${u}px`,h>=1?K.style.display="none":K.style.display="",e.params.scrollbar.hide&&(K.style.opacity=0),e.params.watchOverflow&&e.enabled&&$.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function f($){return e.isHorizontal()?$.clientX:$.clientY}function y($){let{scrollbar:U,rtlTranslate:K}=e,{el:ie}=U,te;te=(f($)-rd(ie)[e.isHorizontal()?"left":"top"]-(c!==null?c:u/2))/(d-u),te=Math.max(Math.min(te,1),0),K&&(te=1-te);let j=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*te;e.updateProgress(j),e.setTranslate(j),e.updateActiveIndex(),e.updateSlidesClasses()}function b($){let U=e.params.scrollbar,{scrollbar:K,wrapperEl:ie}=e,{el:te,dragEl:j}=K;o=!0,c=$.target===j?f($)-$.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,$.preventDefault(),$.stopPropagation(),ie.style.transitionDuration="100ms",j.style.transitionDuration="100ms",y($),clearTimeout(l),te.style.transitionDuration="0ms",U.hide&&(te.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),r("scrollbarDragStart",$)}function v($){let{scrollbar:U,wrapperEl:K}=e,{el:ie,dragEl:te}=U;o&&($.preventDefault&&$.cancelable?$.preventDefault():$.returnValue=!1,y($),K.style.transitionDuration="0ms",ie.style.transitionDuration="0ms",te.style.transitionDuration="0ms",r("scrollbarDragMove",$))}function S($){let U=e.params.scrollbar,{scrollbar:K,wrapperEl:ie}=e,{el:te}=K;o&&(o=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",ie.style.transitionDuration=""),U.hide&&(clearTimeout(l),l=bo(()=>{te.style.opacity=0,te.style.transitionDuration="400ms"},1e3)),r("scrollbarDragEnd",$),U.snapOnRelease&&e.slideToClosest())}function w($){let{scrollbar:U,params:K}=e,ie=U.el;if(!ie)return;let te=ie,j=K.passiveListeners?{passive:!1,capture:!1}:!1,Y=K.passiveListeners?{passive:!0,capture:!1}:!1;if(!te)return;let se=$==="on"?"addEventListener":"removeEventListener";te[se]("pointerdown",b,j),s[se]("pointermove",v,j),s[se]("pointerup",S,Y)}function T(){!e.params.scrollbar.el||!e.scrollbar.el||w("on")}function D(){!e.params.scrollbar.el||!e.scrollbar.el||w("off")}function O(){let{scrollbar:$,el:U}=e;e.params.scrollbar=xp(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});let K=e.params.scrollbar;if(!K.el)return;let ie;if(typeof K.el=="string"&&e.isElement&&(ie=e.el.querySelector(K.el)),!ie&&typeof K.el=="string"){if(ie=s.querySelectorAll(K.el),!ie.length)return}else ie||(ie=K.el);e.params.uniqueNavElements&&typeof K.el=="string"&&ie.length>1&&U.querySelectorAll(K.el).length===1&&(ie=U.querySelector(K.el)),ie.length>0&&(ie=ie[0]),ie.classList.add(e.isHorizontal()?K.horizontalClass:K.verticalClass);let te;ie&&(te=ie.querySelector(Ws(e.params.scrollbar.dragClass)),te||(te=hn("div",e.params.scrollbar.dragClass),ie.append(te))),Object.assign($,{el:ie,dragEl:te}),K.draggable&&T(),ie&&ie.classList[e.enabled?"remove":"add"](...ml(e.params.scrollbar.lockClass))}function R(){let $=e.params.scrollbar,U=e.scrollbar.el;U&&U.classList.remove(...ml(e.isHorizontal()?$.horizontalClass:$.verticalClass)),D()}n("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;let $=e.params.scrollbar,{el:U}=e.scrollbar;U=Pt(U),U.forEach(K=>{K.classList.remove($.horizontalClass,$.verticalClass),K.classList.add(e.isHorizontal()?$.horizontalClass:$.verticalClass)})}),n("init",()=>{e.params.scrollbar.enabled===!1?B():(O(),g(),p())}),n("update resize observerUpdate lock unlock changeDirection",()=>{g()}),n("setTranslate",()=>{p()}),n("setTransition",($,U)=>{m(U)}),n("enable disable",()=>{let{el:$}=e.scrollbar;$&&$.classList[e.enabled?"remove":"add"](...ml(e.params.scrollbar.lockClass))}),n("destroy",()=>{R()});let L=()=>{e.el.classList.remove(...ml(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...ml(e.params.scrollbar.scrollbarDisabledClass)),O(),g(),p()},B=()=>{e.el.classList.add(...ml(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...ml(e.params.scrollbar.scrollbarDisabledClass)),R()};Object.assign(e.scrollbar,{enable:L,disable:B,updateSize:g,setTranslate:p,init:O,destroy:R})}function SV(i){let{swiper:e,extendParams:t,on:n}=i;t({parallax:{enabled:!1}});let r="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",s=(l,c)=>{let{rtl:u}=e,d=u?-1:1,h=l.getAttribute("data-swiper-parallax")||"0",p=l.getAttribute("data-swiper-parallax-x"),m=l.getAttribute("data-swiper-parallax-y"),g=l.getAttribute("data-swiper-parallax-scale"),f=l.getAttribute("data-swiper-parallax-opacity"),y=l.getAttribute("data-swiper-parallax-rotate");if(p||m?(p=p||"0",m=m||"0"):e.isHorizontal()?(p=h,m="0"):(m=h,p="0"),p.indexOf("%")>=0?p=`${parseInt(p,10)*c*d}%`:p=`${p*c*d}px`,m.indexOf("%")>=0?m=`${parseInt(m,10)*c}%`:m=`${m*c}px`,typeof f<"u"&&f!==null){let v=f-(f-1)*(1-Math.abs(c));l.style.opacity=v}let b=`translate3d(${p}, ${m}, 0px)`;if(typeof g<"u"&&g!==null){let v=g-(g-1)*(1-Math.abs(c));b+=` scale(${v})`}if(y&&typeof y<"u"&&y!==null){let v=y*c*-1;b+=` rotate(${v}deg)`}l.style.transform=b},o=()=>{let{el:l,slides:c,progress:u,snapGrid:d,isElement:h}=e,p=Vi(l,r);e.isElement&&p.push(...Vi(e.hostEl,r)),p.forEach(m=>{s(m,u)}),c.forEach((m,g)=>{let f=m.progress;e.params.slidesPerGroup>1&&e.params.slidesPerView!=="auto"&&(f+=Math.ceil(g/2)-u*(d.length-1)),f=Math.min(Math.max(f,-1),1),m.querySelectorAll(`${r}, [data-swiper-parallax-rotate]`).forEach(y=>{s(y,f)})})},a=function(l){l===void 0&&(l=e.params.speed);let{el:c,hostEl:u}=e,d=[...c.querySelectorAll(r)];e.isElement&&d.push(...u.querySelectorAll(r)),d.forEach(h=>{let p=parseInt(h.getAttribute("data-swiper-parallax-duration"),10)||l;l===0&&(p=0),h.style.transitionDuration=`${p}ms`})};n("beforeInit",()=>{e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)}),n("init",()=>{e.params.parallax.enabled&&o()}),n("setTranslate",()=>{e.params.parallax.enabled&&o()}),n("setTransition",(l,c)=>{e.params.parallax.enabled&&a(c)})}function xV(i){let{swiper:e,extendParams:t,on:n,emit:r}=i,s=di();t({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),e.zoom={enabled:!1};let o=1,a=!1,l,c,u=[],d={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},h={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},p={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0},m=1;Object.defineProperty(e.zoom,"scale",{get(){return m},set(re){if(m!==re){let ve=d.imageEl,_e=d.slideEl;r("zoomChange",re,ve,_e)}m=re}});function g(){if(u.length<2)return 1;let re=u[0].pageX,ve=u[0].pageY,_e=u[1].pageX,Ge=u[1].pageY;return Math.sqrt((_e-re)**2+(Ge-ve)**2)}function f(){let re=e.params.zoom,ve=d.imageWrapEl.getAttribute("data-swiper-zoom")||re.maxRatio;if(re.limitToOriginalSize&&d.imageEl&&d.imageEl.naturalWidth){let _e=d.imageEl.naturalWidth/d.imageEl.offsetWidth;return Math.min(_e,ve)}return ve}function y(){if(u.length<2)return{x:null,y:null};let re=d.imageEl.getBoundingClientRect();return[(u[0].pageX+(u[1].pageX-u[0].pageX)/2-re.x-s.scrollX)/o,(u[0].pageY+(u[1].pageY-u[0].pageY)/2-re.y-s.scrollY)/o]}function b(){return e.isElement?"swiper-slide":`.${e.params.slideClass}`}function v(re){let ve=b();return!!(re.target.matches(ve)||e.slides.filter(_e=>_e.contains(re.target)).length>0)}function S(re){let ve=`.${e.params.zoom.containerClass}`;return!!(re.target.matches(ve)||[...e.hostEl.querySelectorAll(ve)].filter(_e=>_e.contains(re.target)).length>0)}function w(re){if(re.pointerType==="mouse"&&u.splice(0,u.length),!v(re))return;let ve=e.params.zoom;if(l=!1,c=!1,u.push(re),!(u.length<2)){if(l=!0,d.scaleStart=g(),!d.slideEl){d.slideEl=re.target.closest(`.${e.params.slideClass}, swiper-slide`),d.slideEl||(d.slideEl=e.slides[e.activeIndex]);let _e=d.slideEl.querySelector(`.${ve.containerClass}`);if(_e&&(_e=_e.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),d.imageEl=_e,_e?d.imageWrapEl=So(d.imageEl,`.${ve.containerClass}`)[0]:d.imageWrapEl=void 0,!d.imageWrapEl){d.imageEl=void 0;return}d.maxRatio=f()}if(d.imageEl){let[_e,Ge]=y();d.originX=_e,d.originY=Ge,d.imageEl.style.transitionDuration="0ms"}a=!0}}function T(re){if(!v(re))return;let ve=e.params.zoom,_e=e.zoom,Ge=u.findIndex(Le=>Le.pointerId===re.pointerId);Ge>=0&&(u[Ge]=re),!(u.length<2)&&(c=!0,d.scaleMove=g(),d.imageEl&&(_e.scale=d.scaleMove/d.scaleStart*o,_e.scale>d.maxRatio&&(_e.scale=d.maxRatio-1+(_e.scale-d.maxRatio+1)**.5),_e.scale<ve.minRatio&&(_e.scale=ve.minRatio+1-(ve.minRatio-_e.scale+1)**.5),d.imageEl.style.transform=`translate3d(0,0,0) scale(${_e.scale})`))}function D(re){if(!v(re)||re.pointerType==="mouse"&&re.type==="pointerout")return;let ve=e.params.zoom,_e=e.zoom,Ge=u.findIndex(Le=>Le.pointerId===re.pointerId);Ge>=0&&u.splice(Ge,1),!(!l||!c)&&(l=!1,c=!1,d.imageEl&&(_e.scale=Math.max(Math.min(_e.scale,d.maxRatio),ve.minRatio),d.imageEl.style.transitionDuration=`${e.params.speed}ms`,d.imageEl.style.transform=`translate3d(0,0,0) scale(${_e.scale})`,o=_e.scale,a=!1,_e.scale>1&&d.slideEl?d.slideEl.classList.add(`${ve.zoomedSlideClass}`):_e.scale<=1&&d.slideEl&&d.slideEl.classList.remove(`${ve.zoomedSlideClass}`),_e.scale===1&&(d.originX=0,d.originY=0,d.slideEl=void 0)))}let O;function R(){e.touchEventsData.preventTouchMoveFromPointerMove=!1}function L(){clearTimeout(O),e.touchEventsData.preventTouchMoveFromPointerMove=!0,O=setTimeout(()=>{e.destroyed||R()})}function B(re){let ve=e.device;if(!d.imageEl||h.isTouched)return;ve.android&&re.cancelable&&re.preventDefault(),h.isTouched=!0;let _e=u.length>0?u[0]:re;h.touchesStart.x=_e.pageX,h.touchesStart.y=_e.pageY}function $(re){if(!v(re)||!S(re))return;let ve=e.zoom;if(!d.imageEl||!h.isTouched||!d.slideEl)return;h.isMoved||(h.width=d.imageEl.offsetWidth||d.imageEl.clientWidth,h.height=d.imageEl.offsetHeight||d.imageEl.clientHeight,h.startX=ef(d.imageWrapEl,"x")||0,h.startY=ef(d.imageWrapEl,"y")||0,d.slideWidth=d.slideEl.offsetWidth,d.slideHeight=d.slideEl.offsetHeight,d.imageWrapEl.style.transitionDuration="0ms");let _e=h.width*ve.scale,Ge=h.height*ve.scale;if(h.minX=Math.min(d.slideWidth/2-_e/2,0),h.maxX=-h.minX,h.minY=Math.min(d.slideHeight/2-Ge/2,0),h.maxY=-h.minY,h.touchesCurrent.x=u.length>0?u[0].pageX:re.pageX,h.touchesCurrent.y=u.length>0?u[0].pageY:re.pageY,Math.max(Math.abs(h.touchesCurrent.x-h.touchesStart.x),Math.abs(h.touchesCurrent.y-h.touchesStart.y))>5&&(e.allowClick=!1),!h.isMoved&&!a){if(e.isHorizontal()&&(Math.floor(h.minX)===Math.floor(h.startX)&&h.touchesCurrent.x<h.touchesStart.x||Math.floor(h.maxX)===Math.floor(h.startX)&&h.touchesCurrent.x>h.touchesStart.x)){h.isTouched=!1,R();return}if(!e.isHorizontal()&&(Math.floor(h.minY)===Math.floor(h.startY)&&h.touchesCurrent.y<h.touchesStart.y||Math.floor(h.maxY)===Math.floor(h.startY)&&h.touchesCurrent.y>h.touchesStart.y)){h.isTouched=!1,R();return}}re.cancelable&&re.preventDefault(),re.stopPropagation(),L(),h.isMoved=!0;let We=(ve.scale-o)/(d.maxRatio-e.params.zoom.minRatio),{originX:xe,originY:$e}=d;h.currentX=h.touchesCurrent.x-h.touchesStart.x+h.startX+We*(h.width-xe*2),h.currentY=h.touchesCurrent.y-h.touchesStart.y+h.startY+We*(h.height-$e*2),h.currentX<h.minX&&(h.currentX=h.minX+1-(h.minX-h.currentX+1)**.8),h.currentX>h.maxX&&(h.currentX=h.maxX-1+(h.currentX-h.maxX+1)**.8),h.currentY<h.minY&&(h.currentY=h.minY+1-(h.minY-h.currentY+1)**.8),h.currentY>h.maxY&&(h.currentY=h.maxY-1+(h.currentY-h.maxY+1)**.8),p.prevPositionX||(p.prevPositionX=h.touchesCurrent.x),p.prevPositionY||(p.prevPositionY=h.touchesCurrent.y),p.prevTime||(p.prevTime=Date.now()),p.x=(h.touchesCurrent.x-p.prevPositionX)/(Date.now()-p.prevTime)/2,p.y=(h.touchesCurrent.y-p.prevPositionY)/(Date.now()-p.prevTime)/2,Math.abs(h.touchesCurrent.x-p.prevPositionX)<2&&(p.x=0),Math.abs(h.touchesCurrent.y-p.prevPositionY)<2&&(p.y=0),p.prevPositionX=h.touchesCurrent.x,p.prevPositionY=h.touchesCurrent.y,p.prevTime=Date.now(),d.imageWrapEl.style.transform=`translate3d(${h.currentX}px, ${h.currentY}px,0)`}function U(){let re=e.zoom;if(!d.imageEl)return;if(!h.isTouched||!h.isMoved){h.isTouched=!1,h.isMoved=!1;return}h.isTouched=!1,h.isMoved=!1;let ve=300,_e=300,Ge=p.x*ve,Le=h.currentX+Ge,We=p.y*_e,xe=h.currentY+We;p.x!==0&&(ve=Math.abs((Le-h.currentX)/p.x)),p.y!==0&&(_e=Math.abs((xe-h.currentY)/p.y));let $e=Math.max(ve,_e);h.currentX=Le,h.currentY=xe;let He=h.width*re.scale,at=h.height*re.scale;h.minX=Math.min(d.slideWidth/2-He/2,0),h.maxX=-h.minX,h.minY=Math.min(d.slideHeight/2-at/2,0),h.maxY=-h.minY,h.currentX=Math.max(Math.min(h.currentX,h.maxX),h.minX),h.currentY=Math.max(Math.min(h.currentY,h.maxY),h.minY),d.imageWrapEl.style.transitionDuration=`${$e}ms`,d.imageWrapEl.style.transform=`translate3d(${h.currentX}px, ${h.currentY}px,0)`}function K(){let re=e.zoom;d.slideEl&&e.activeIndex!==e.slides.indexOf(d.slideEl)&&(d.imageEl&&(d.imageEl.style.transform="translate3d(0,0,0) scale(1)"),d.imageWrapEl&&(d.imageWrapEl.style.transform="translate3d(0,0,0)"),d.slideEl.classList.remove(`${e.params.zoom.zoomedSlideClass}`),re.scale=1,o=1,d.slideEl=void 0,d.imageEl=void 0,d.imageWrapEl=void 0,d.originX=0,d.originY=0)}function ie(re){let ve=e.zoom,_e=e.params.zoom;if(!d.slideEl){re&&re.target&&(d.slideEl=re.target.closest(`.${e.params.slideClass}, swiper-slide`)),d.slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?d.slideEl=Vi(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:d.slideEl=e.slides[e.activeIndex]);let us=d.slideEl.querySelector(`.${_e.containerClass}`);us&&(us=us.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),d.imageEl=us,us?d.imageWrapEl=So(d.imageEl,`.${_e.containerClass}`)[0]:d.imageWrapEl=void 0}if(!d.imageEl||!d.imageWrapEl)return;e.params.cssMode&&(e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.touchAction="none"),d.slideEl.classList.add(`${_e.zoomedSlideClass}`);let Ge,Le,We,xe,$e,He,at,Ct,ri,Wt,tt,wt,It,Bi,An,Sr,Ki,ba;typeof h.touchesStart.x>"u"&&re?(Ge=re.pageX,Le=re.pageY):(Ge=h.touchesStart.x,Le=h.touchesStart.y);let cs=typeof re=="number"?re:null;o===1&&cs&&(Ge=void 0,Le=void 0,h.touchesStart.x=void 0,h.touchesStart.y=void 0);let Sa=f();ve.scale=cs||Sa,o=cs||Sa,re&&!(o===1&&cs)?(Ki=d.slideEl.offsetWidth,ba=d.slideEl.offsetHeight,We=rd(d.slideEl).left+s.scrollX,xe=rd(d.slideEl).top+s.scrollY,$e=We+Ki/2-Ge,He=xe+ba/2-Le,ri=d.imageEl.offsetWidth||d.imageEl.clientWidth,Wt=d.imageEl.offsetHeight||d.imageEl.clientHeight,tt=ri*ve.scale,wt=Wt*ve.scale,It=Math.min(Ki/2-tt/2,0),Bi=Math.min(ba/2-wt/2,0),An=-It,Sr=-Bi,at=$e*ve.scale,Ct=He*ve.scale,at<It&&(at=It),at>An&&(at=An),Ct<Bi&&(Ct=Bi),Ct>Sr&&(Ct=Sr)):(at=0,Ct=0),cs&&ve.scale===1&&(d.originX=0,d.originY=0),d.imageWrapEl.style.transitionDuration="300ms",d.imageWrapEl.style.transform=`translate3d(${at}px, ${Ct}px,0)`,d.imageEl.style.transitionDuration="300ms",d.imageEl.style.transform=`translate3d(0,0,0) scale(${ve.scale})`}function te(){let re=e.zoom,ve=e.params.zoom;if(!d.slideEl){e.params.virtual&&e.params.virtual.enabled&&e.virtual?d.slideEl=Vi(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:d.slideEl=e.slides[e.activeIndex];let _e=d.slideEl.querySelector(`.${ve.containerClass}`);_e&&(_e=_e.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),d.imageEl=_e,_e?d.imageWrapEl=So(d.imageEl,`.${ve.containerClass}`)[0]:d.imageWrapEl=void 0}!d.imageEl||!d.imageWrapEl||(e.params.cssMode&&(e.wrapperEl.style.overflow="",e.wrapperEl.style.touchAction=""),re.scale=1,o=1,h.touchesStart.x=void 0,h.touchesStart.y=void 0,d.imageWrapEl.style.transitionDuration="300ms",d.imageWrapEl.style.transform="translate3d(0,0,0)",d.imageEl.style.transitionDuration="300ms",d.imageEl.style.transform="translate3d(0,0,0) scale(1)",d.slideEl.classList.remove(`${ve.zoomedSlideClass}`),d.slideEl=void 0,d.originX=0,d.originY=0)}function j(re){let ve=e.zoom;ve.scale&&ve.scale!==1?te():ie(re)}function Y(){let re=e.params.passiveListeners?{passive:!0,capture:!1}:!1,ve=e.params.passiveListeners?{passive:!1,capture:!0}:!0;return{passiveListener:re,activeListenerWithCapture:ve}}function se(){let re=e.zoom;if(re.enabled)return;re.enabled=!0;let{passiveListener:ve,activeListenerWithCapture:_e}=Y();e.wrapperEl.addEventListener("pointerdown",w,ve),e.wrapperEl.addEventListener("pointermove",T,_e),["pointerup","pointercancel","pointerout"].forEach(Ge=>{e.wrapperEl.addEventListener(Ge,D,ve)}),e.wrapperEl.addEventListener("pointermove",$,_e)}function me(){let re=e.zoom;if(!re.enabled)return;re.enabled=!1;let{passiveListener:ve,activeListenerWithCapture:_e}=Y();e.wrapperEl.removeEventListener("pointerdown",w,ve),e.wrapperEl.removeEventListener("pointermove",T,_e),["pointerup","pointercancel","pointerout"].forEach(Ge=>{e.wrapperEl.removeEventListener(Ge,D,ve)}),e.wrapperEl.removeEventListener("pointermove",$,_e)}n("init",()=>{e.params.zoom.enabled&&se()}),n("destroy",()=>{me()}),n("touchStart",(re,ve)=>{e.zoom.enabled&&B(ve)}),n("touchEnd",(re,ve)=>{e.zoom.enabled&&U()}),n("doubleTap",(re,ve)=>{!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&j(ve)}),n("transitionEnd",()=>{e.zoom.enabled&&e.params.zoom.enabled&&K()}),n("slideChange",()=>{e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&K()}),Object.assign(e.zoom,{enable:se,disable:me,in:ie,out:te,toggle:j})}function _V(i){let{swiper:e,extendParams:t,on:n}=i;t({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0};function r(c,u){let d=function(){let g,f,y;return(b,v)=>{for(f=-1,g=b.length;g-f>1;)y=g+f>>1,b[y]<=v?f=y:g=y;return g}}();this.x=c,this.y=u,this.lastIndex=c.length-1;let h,p;return this.interpolate=function(g){return g?(p=d(this.x,g),h=p-1,(g-this.x[h])*(this.y[p]-this.y[h])/(this.x[p]-this.x[h])+this.y[h]):0},this}function s(c){e.controller.spline=e.params.loop?new r(e.slidesGrid,c.slidesGrid):new r(e.snapGrid,c.snapGrid)}function o(c,u){let d=e.controller.control,h,p,m=e.constructor;function g(f){if(f.destroyed)return;let y=e.rtlTranslate?-e.translate:e.translate;e.params.controller.by==="slide"&&(s(f),p=-e.controller.spline.interpolate(-y)),(!p||e.params.controller.by==="container")&&(h=(f.maxTranslate()-f.minTranslate())/(e.maxTranslate()-e.minTranslate()),(Number.isNaN(h)||!Number.isFinite(h))&&(h=1),p=(y-e.minTranslate())*h+f.minTranslate()),e.params.controller.inverse&&(p=f.maxTranslate()-p),f.updateProgress(p),f.setTranslate(p,e),f.updateActiveIndex(),f.updateSlidesClasses()}if(Array.isArray(d))for(let f=0;f<d.length;f+=1)d[f]!==u&&d[f]instanceof m&&g(d[f]);else d instanceof m&&u!==d&&g(d)}function a(c,u){let d=e.constructor,h=e.controller.control,p;function m(g){g.destroyed||(g.setTransition(c,e),c!==0&&(g.transitionStart(),g.params.autoHeight&&bo(()=>{g.updateAutoHeight()}),Rc(g.wrapperEl,()=>{h&&g.transitionEnd()})))}if(Array.isArray(h))for(p=0;p<h.length;p+=1)h[p]!==u&&h[p]instanceof d&&m(h[p]);else h instanceof d&&u!==h&&m(h)}function l(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}n("beforeInit",()=>{if(typeof window<"u"&&(typeof e.params.controller.control=="string"||e.params.controller.control instanceof HTMLElement)){(typeof e.params.controller.control=="string"?[...document.querySelectorAll(e.params.controller.control)]:[e.params.controller.control]).forEach(u=>{if(e.controller.control||(e.controller.control=[]),u&&u.swiper)e.controller.control.push(u.swiper);else if(u){let d=`${e.params.eventsPrefix}init`,h=p=>{e.controller.control.push(p.detail[0]),e.update(),u.removeEventListener(d,h)};u.addEventListener(d,h)}});return}e.controller.control=e.params.controller.control}),n("update",()=>{l()}),n("resize",()=>{l()}),n("observerUpdate",()=>{l()}),n("setTranslate",(c,u,d)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTranslate(u,d)}),n("setTransition",(c,u,d)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTransition(u,d)}),Object.assign(e.controller,{setTranslate:o,setTransition:a})}function wV(i){let{swiper:e,extendParams:t,on:n}=i;t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,containerRole:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null,scrollOnFocus:!0}}),e.a11y={clicked:!1};let r=null,s,o,a=new Date().getTime();function l(j){let Y=r;Y.length!==0&&(Y.innerHTML="",Y.innerHTML=j)}function c(j){j===void 0&&(j=16);let Y=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(j).replace(/x/g,Y)}function u(j){j=Pt(j),j.forEach(Y=>{Y.setAttribute("tabIndex","0")})}function d(j){j=Pt(j),j.forEach(Y=>{Y.setAttribute("tabIndex","-1")})}function h(j,Y){j=Pt(j),j.forEach(se=>{se.setAttribute("role",Y)})}function p(j,Y){j=Pt(j),j.forEach(se=>{se.setAttribute("aria-roledescription",Y)})}function m(j,Y){j=Pt(j),j.forEach(se=>{se.setAttribute("aria-controls",Y)})}function g(j,Y){j=Pt(j),j.forEach(se=>{se.setAttribute("aria-label",Y)})}function f(j,Y){j=Pt(j),j.forEach(se=>{se.setAttribute("id",Y)})}function y(j,Y){j=Pt(j),j.forEach(se=>{se.setAttribute("aria-live",Y)})}function b(j){j=Pt(j),j.forEach(Y=>{Y.setAttribute("aria-disabled",!0)})}function v(j){j=Pt(j),j.forEach(Y=>{Y.setAttribute("aria-disabled",!1)})}function S(j){if(j.keyCode!==13&&j.keyCode!==32)return;let Y=e.params.a11y,se=j.target;if(!(e.pagination&&e.pagination.el&&(se===e.pagination.el||e.pagination.el.contains(j.target))&&!j.target.matches(Ws(e.params.pagination.bulletClass)))){if(e.navigation&&e.navigation.prevEl&&e.navigation.nextEl){let me=Pt(e.navigation.prevEl);Pt(e.navigation.nextEl).includes(se)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?l(Y.lastSlideMessage):l(Y.nextSlideMessage)),me.includes(se)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?l(Y.firstSlideMessage):l(Y.prevSlideMessage))}e.pagination&&se.matches(Ws(e.params.pagination.bulletClass))&&se.click()}}function w(){if(e.params.loop||e.params.rewind||!e.navigation)return;let{nextEl:j,prevEl:Y}=e.navigation;Y&&(e.isBeginning?(b(Y),d(Y)):(v(Y),u(Y))),j&&(e.isEnd?(b(j),d(j)):(v(j),u(j)))}function T(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function D(){return T()&&e.params.pagination.clickable}function O(){let j=e.params.a11y;T()&&e.pagination.bullets.forEach(Y=>{e.params.pagination.clickable&&(u(Y),e.params.pagination.renderBullet||(h(Y,"button"),g(Y,j.paginationBulletMessage.replace(/\{\{index\}\}/,Lc(Y)+1)))),Y.matches(Ws(e.params.pagination.bulletActiveClass))?Y.setAttribute("aria-current","true"):Y.removeAttribute("aria-current")})}let R=(j,Y,se)=>{u(j),j.tagName!=="BUTTON"&&(h(j,"button"),j.addEventListener("keydown",S)),g(j,se),m(j,Y)},L=j=>{o&&o!==j.target&&!o.contains(j.target)&&(s=!0),e.a11y.clicked=!0},B=()=>{s=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},$=j=>{a=new Date().getTime()},U=j=>{if(e.a11y.clicked||!e.params.a11y.scrollOnFocus||new Date().getTime()-a<100)return;let Y=j.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!Y||!e.slides.includes(Y))return;o=Y;let se=e.slides.indexOf(Y)===e.activeIndex,me=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(Y);se||me||j.sourceCapabilities&&j.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,requestAnimationFrame(()=>{s||(e.params.loop?e.slideToLoop(parseInt(Y.getAttribute("data-swiper-slide-index")),0):e.slideTo(e.slides.indexOf(Y),0),s=!1)}))},K=()=>{let j=e.params.a11y;j.itemRoleDescriptionMessage&&p(e.slides,j.itemRoleDescriptionMessage),j.slideRole&&h(e.slides,j.slideRole);let Y=e.slides.length;j.slideLabelMessage&&e.slides.forEach((se,me)=>{let re=e.params.loop?parseInt(se.getAttribute("data-swiper-slide-index"),10):me,ve=j.slideLabelMessage.replace(/\{\{index\}\}/,re+1).replace(/\{\{slidesLength\}\}/,Y);g(se,ve)})},ie=()=>{let j=e.params.a11y;e.el.append(r);let Y=e.el;j.containerRoleDescriptionMessage&&p(Y,j.containerRoleDescriptionMessage),j.containerMessage&&g(Y,j.containerMessage),j.containerRole&&h(Y,j.containerRole);let se=e.wrapperEl,me=j.id||se.getAttribute("id")||`swiper-wrapper-${c(16)}`,re=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";f(se,me),y(se,re),K();let{nextEl:ve,prevEl:_e}=e.navigation?e.navigation:{};ve=Pt(ve),_e=Pt(_e),ve&&ve.forEach(Le=>R(Le,me,j.nextSlideMessage)),_e&&_e.forEach(Le=>R(Le,me,j.prevSlideMessage)),D()&&Pt(e.pagination.el).forEach(We=>{We.addEventListener("keydown",S)}),Ci().addEventListener("visibilitychange",$),e.el.addEventListener("focus",U,!0),e.el.addEventListener("focus",U,!0),e.el.addEventListener("pointerdown",L,!0),e.el.addEventListener("pointerup",B,!0)};function te(){r&&r.remove();let{nextEl:j,prevEl:Y}=e.navigation?e.navigation:{};j=Pt(j),Y=Pt(Y),j&&j.forEach(me=>me.removeEventListener("keydown",S)),Y&&Y.forEach(me=>me.removeEventListener("keydown",S)),D()&&Pt(e.pagination.el).forEach(re=>{re.removeEventListener("keydown",S)}),Ci().removeEventListener("visibilitychange",$),e.el&&typeof e.el!="string"&&(e.el.removeEventListener("focus",U,!0),e.el.removeEventListener("pointerdown",L,!0),e.el.removeEventListener("pointerup",B,!0))}n("beforeInit",()=>{r=hn("span",e.params.a11y.notificationClass),r.setAttribute("aria-live","assertive"),r.setAttribute("aria-atomic","true")}),n("afterInit",()=>{e.params.a11y.enabled&&ie()}),n("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&K()}),n("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&w()}),n("paginationUpdate",()=>{e.params.a11y.enabled&&O()}),n("destroy",()=>{e.params.a11y.enabled&&te()})}function EV(i){let{swiper:e,extendParams:t,on:n}=i;t({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let r=!1,s={},o=p=>p.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),a=p=>{let m=di(),g;p?g=new URL(p):g=m.location;let f=g.pathname.slice(1).split("/").filter(S=>S!==""),y=f.length,b=f[y-2],v=f[y-1];return{key:b,value:v}},l=(p,m)=>{let g=di();if(!r||!e.params.history.enabled)return;let f;e.params.url?f=new URL(e.params.url):f=g.location;let y=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${m}"]`):e.slides[m],b=o(y.getAttribute("data-history"));if(e.params.history.root.length>0){let S=e.params.history.root;S[S.length-1]==="/"&&(S=S.slice(0,S.length-1)),b=`${S}/${p?`${p}/`:""}${b}`}else f.pathname.includes(p)||(b=`${p?`${p}/`:""}${b}`);e.params.history.keepQuery&&(b+=f.search);let v=g.history.state;v&&v.value===b||(e.params.history.replaceState?g.history.replaceState({value:b},null,b):g.history.pushState({value:b},null,b))},c=(p,m,g)=>{if(m)for(let f=0,y=e.slides.length;f<y;f+=1){let b=e.slides[f];if(o(b.getAttribute("data-history"))===m){let S=e.getSlideIndex(b);e.slideTo(S,p,g)}}else e.slideTo(0,p,g)},u=()=>{s=a(e.params.url),c(e.params.speed,s.value,!1)},d=()=>{let p=di();if(e.params.history){if(!p.history||!p.history.pushState){e.params.history.enabled=!1,e.params.hashNavigation.enabled=!0;return}if(r=!0,s=a(e.params.url),!s.key&&!s.value){e.params.history.replaceState||p.addEventListener("popstate",u);return}c(0,s.value,e.params.runCallbacksOnInit),e.params.history.replaceState||p.addEventListener("popstate",u)}},h=()=>{let p=di();e.params.history.replaceState||p.removeEventListener("popstate",u)};n("init",()=>{e.params.history.enabled&&d()}),n("destroy",()=>{e.params.history.enabled&&h()}),n("transitionEnd _freeModeNoMomentumRelease",()=>{r&&l(e.params.history.key,e.activeIndex)}),n("slideChange",()=>{r&&e.params.cssMode&&l(e.params.history.key,e.activeIndex)})}function TV(i){let{swiper:e,extendParams:t,emit:n,on:r}=i,s=!1,o=Ci(),a=di();t({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(h,p){if(e.virtual&&e.params.virtual.enabled){let m=e.slides.filter(f=>f.getAttribute("data-hash")===p)[0];return m?parseInt(m.getAttribute("data-swiper-slide-index"),10):0}return e.getSlideIndex(Vi(e.slidesEl,`.${e.params.slideClass}[data-hash="${p}"], swiper-slide[data-hash="${p}"]`)[0])}}});let l=()=>{n("hashChange");let h=o.location.hash.replace("#",""),p=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],m=p?p.getAttribute("data-hash"):"";if(h!==m){let g=e.params.hashNavigation.getSlideIndex(e,h);if(typeof g>"u"||Number.isNaN(g))return;e.slideTo(g)}},c=()=>{if(!s||!e.params.hashNavigation.enabled)return;let h=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],p=h?h.getAttribute("data-hash")||h.getAttribute("data-history"):"";e.params.hashNavigation.replaceState&&a.history&&a.history.replaceState?(a.history.replaceState(null,null,`#${p}`||""),n("hashSet")):(o.location.hash=p||"",n("hashSet"))},u=()=>{if(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)return;s=!0;let h=o.location.hash.replace("#","");if(h){let m=e.params.hashNavigation.getSlideIndex(e,h);e.slideTo(m||0,0,e.params.runCallbacksOnInit,!0)}e.params.hashNavigation.watchState&&a.addEventListener("hashchange",l)},d=()=>{e.params.hashNavigation.watchState&&a.removeEventListener("hashchange",l)};r("init",()=>{e.params.hashNavigation.enabled&&u()}),r("destroy",()=>{e.params.hashNavigation.enabled&&d()}),r("transitionEnd _freeModeNoMomentumRelease",()=>{s&&c()}),r("slideChange",()=>{s&&e.params.cssMode&&c()})}function MV(i){let{swiper:e,extendParams:t,on:n,emit:r,params:s}=i;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let o,a,l=s&&s.autoplay?s.autoplay.delay:3e3,c=s&&s.autoplay?s.autoplay.delay:3e3,u,d=new Date().getTime(),h,p,m,g,f,y,b;function v(Y){!e||e.destroyed||!e.wrapperEl||Y.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",v),!(b||Y.detail&&Y.detail.bySwiperTouchMove)&&L())}let S=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?h=!0:h&&(c=u,h=!1);let Y=e.autoplay.paused?u:d+c-new Date().getTime();e.autoplay.timeLeft=Y,r("autoplayTimeLeft",Y,Y/l),a=requestAnimationFrame(()=>{S()})},w=()=>{let Y;return e.virtual&&e.params.virtual.enabled?Y=e.slides.filter(me=>me.classList.contains("swiper-slide-active"))[0]:Y=e.slides[e.activeIndex],Y?parseInt(Y.getAttribute("data-swiper-autoplay"),10):void 0},T=Y=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(a),S();let se=typeof Y>"u"?e.params.autoplay.delay:Y;l=e.params.autoplay.delay,c=e.params.autoplay.delay;let me=w();!Number.isNaN(me)&&me>0&&typeof Y>"u"&&(se=me,l=me,c=me),u=se;let re=e.params.speed,ve=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(re,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,re,!0,!0),r("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(re,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,re,!0,!0),r("autoplay")),e.params.cssMode&&(d=new Date().getTime(),requestAnimationFrame(()=>{T()})))};return se>0?(clearTimeout(o),o=setTimeout(()=>{ve()},se)):requestAnimationFrame(()=>{ve()}),se},D=()=>{d=new Date().getTime(),e.autoplay.running=!0,T(),r("autoplayStart")},O=()=>{e.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(a),r("autoplayStop")},R=(Y,se)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(o),Y||(y=!0);let me=()=>{r("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",v):L()};if(e.autoplay.paused=!0,se){f&&(u=e.params.autoplay.delay),f=!1,me();return}u=(u||e.params.autoplay.delay)-(new Date().getTime()-d),!(e.isEnd&&u<0&&!e.params.loop)&&(u<0&&(u=0),me())},L=()=>{e.isEnd&&u<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(d=new Date().getTime(),y?(y=!1,T(u)):T(),e.autoplay.paused=!1,r("autoplayResume"))},B=()=>{if(e.destroyed||!e.autoplay.running)return;let Y=Ci();Y.visibilityState==="hidden"&&(y=!0,R(!0)),Y.visibilityState==="visible"&&L()},$=Y=>{Y.pointerType==="mouse"&&(y=!0,b=!0,!(e.animating||e.autoplay.paused)&&R(!0))},U=Y=>{Y.pointerType==="mouse"&&(b=!1,e.autoplay.paused&&L())},K=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",$),e.el.addEventListener("pointerleave",U))},ie=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",$),e.el.removeEventListener("pointerleave",U))},te=()=>{Ci().addEventListener("visibilitychange",B)},j=()=>{Ci().removeEventListener("visibilitychange",B)};n("init",()=>{e.params.autoplay.enabled&&(K(),te(),D())}),n("destroy",()=>{ie(),j(),e.autoplay.running&&O()}),n("_freeModeStaticRelease",()=>{(m||y)&&L()}),n("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?O():R(!0,!0)}),n("beforeTransitionStart",(Y,se,me)=>{e.destroyed||!e.autoplay.running||(me||!e.params.autoplay.disableOnInteraction?R(!0,!0):O())}),n("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){O();return}p=!0,m=!1,y=!1,g=setTimeout(()=>{y=!0,m=!0,R(!0)},200)}}),n("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!p)){if(clearTimeout(g),clearTimeout(o),e.params.autoplay.disableOnInteraction){m=!1,p=!1;return}m&&e.params.cssMode&&L(),m=!1,p=!1}}),n("slideChange",()=>{e.destroyed||!e.autoplay.running||(f=!0)}),Object.assign(e.autoplay,{start:D,stop:O,pause:R,resume:L})}function AV(i){let{swiper:e,extendParams:t,on:n}=i;t({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let r=!1,s=!1;e.thumbs={swiper:null};function o(){let c=e.thumbs.swiper;if(!c||c.destroyed)return;let u=c.clickedIndex,d=c.clickedSlide;if(d&&d.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof u>"u"||u===null)return;let h;c.params.loop?h=parseInt(c.clickedSlide.getAttribute("data-swiper-slide-index"),10):h=u,e.params.loop?e.slideToLoop(h):e.slideTo(h)}function a(){let{thumbs:c}=e.params;if(r)return!1;r=!0;let u=e.constructor;if(c.swiper instanceof u)e.thumbs.swiper=c.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(Sp(c.swiper)){let d=Object.assign({},c.swiper);Object.assign(d,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new u(d),s=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",o),!0}function l(c){let u=e.thumbs.swiper;if(!u||u.destroyed)return;let d=u.params.slidesPerView==="auto"?u.slidesPerViewDynamic():u.params.slidesPerView,h=1,p=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(h=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(h=1),h=Math.floor(h),u.slides.forEach(f=>f.classList.remove(p)),u.params.loop||u.params.virtual&&u.params.virtual.enabled)for(let f=0;f<h;f+=1)Vi(u.slidesEl,`[data-swiper-slide-index="${e.realIndex+f}"]`).forEach(y=>{y.classList.add(p)});else for(let f=0;f<h;f+=1)u.slides[e.realIndex+f]&&u.slides[e.realIndex+f].classList.add(p);let m=e.params.thumbs.autoScrollOffset,g=m&&!u.params.loop;if(e.realIndex!==u.realIndex||g){let f=u.activeIndex,y,b;if(u.params.loop){let v=u.slides.filter(S=>S.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];y=u.slides.indexOf(v),b=e.activeIndex>e.previousIndex?"next":"prev"}else y=e.realIndex,b=y>e.previousIndex?"next":"prev";g&&(y+=b==="next"?m:-1*m),u.visibleSlidesIndexes&&u.visibleSlidesIndexes.indexOf(y)<0&&(u.params.centeredSlides?y>f?y=y-Math.floor(d/2)+1:y=y+Math.floor(d/2)-1:y>f&&u.params.slidesPerGroup,u.slideTo(y,c?0:void 0))}}n("beforeInit",()=>{let{thumbs:c}=e.params;if(!(!c||!c.swiper))if(typeof c.swiper=="string"||c.swiper instanceof HTMLElement){let u=Ci(),d=()=>{let p=typeof c.swiper=="string"?u.querySelector(c.swiper):c.swiper;if(p&&p.swiper)c.swiper=p.swiper,a(),l(!0);else if(p){let m=`${e.params.eventsPrefix}init`,g=f=>{c.swiper=f.detail[0],p.removeEventListener(m,g),a(),l(!0),c.swiper.update(),e.update()};p.addEventListener(m,g)}return p},h=()=>{if(e.destroyed)return;d()||requestAnimationFrame(h)};requestAnimationFrame(h)}else a(),l(!0)}),n("slideChange update resize observerUpdate",()=>{l()}),n("setTransition",(c,u)=>{let d=e.thumbs.swiper;!d||d.destroyed||d.setTransition(u)}),n("beforeDestroy",()=>{let c=e.thumbs.swiper;!c||c.destroyed||s&&c.destroy()}),Object.assign(e.thumbs,{init:a,update:l})}function PV(i){let{swiper:e,extendParams:t,emit:n,once:r}=i;t({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function s(){if(e.params.cssMode)return;let l=e.getTranslate();e.setTranslate(l),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function o(){if(e.params.cssMode)return;let{touchEventsData:l,touches:c}=e;l.velocities.length===0&&l.velocities.push({position:c[e.isHorizontal()?"startX":"startY"],time:l.touchStartTime}),l.velocities.push({position:c[e.isHorizontal()?"currentX":"currentY"],time:br()})}function a(l){let{currentPos:c}=l;if(e.params.cssMode)return;let{params:u,wrapperEl:d,rtlTranslate:h,snapGrid:p,touchEventsData:m}=e,f=br()-m.touchStartTime;if(c<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(c>-e.maxTranslate()){e.slides.length<p.length?e.slideTo(p.length-1):e.slideTo(e.slides.length-1);return}if(u.freeMode.momentum){if(m.velocities.length>1){let O=m.velocities.pop(),R=m.velocities.pop(),L=O.position-R.position,B=O.time-R.time;e.velocity=L/B,e.velocity/=2,Math.abs(e.velocity)<u.freeMode.minimumVelocity&&(e.velocity=0),(B>150||br()-O.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=u.freeMode.momentumVelocityRatio,m.velocities.length=0;let y=1e3*u.freeMode.momentumRatio,b=e.velocity*y,v=e.translate+b;h&&(v=-v);let S=!1,w,T=Math.abs(e.velocity)*20*u.freeMode.momentumBounceRatio,D;if(v<e.maxTranslate())u.freeMode.momentumBounce?(v+e.maxTranslate()<-T&&(v=e.maxTranslate()-T),w=e.maxTranslate(),S=!0,m.allowMomentumBounce=!0):v=e.maxTranslate(),u.loop&&u.centeredSlides&&(D=!0);else if(v>e.minTranslate())u.freeMode.momentumBounce?(v-e.minTranslate()>T&&(v=e.minTranslate()+T),w=e.minTranslate(),S=!0,m.allowMomentumBounce=!0):v=e.minTranslate(),u.loop&&u.centeredSlides&&(D=!0);else if(u.freeMode.sticky){let O;for(let R=0;R<p.length;R+=1)if(p[R]>-v){O=R;break}Math.abs(p[O]-v)<Math.abs(p[O-1]-v)||e.swipeDirection==="next"?v=p[O]:v=p[O-1],v=-v}if(D&&r("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(h?y=Math.abs((-v-e.translate)/e.velocity):y=Math.abs((v-e.translate)/e.velocity),u.freeMode.sticky){let O=Math.abs((h?-v:v)-e.translate),R=e.slidesSizesGrid[e.activeIndex];O<R?y=u.speed:O<2*R?y=u.speed*1.5:y=u.speed*2.5}}else if(u.freeMode.sticky){e.slideToClosest();return}u.freeMode.momentumBounce&&S?(e.updateProgress(w),e.setTransition(y),e.setTranslate(v),e.transitionStart(!0,e.swipeDirection),e.animating=!0,Rc(d,()=>{!e||e.destroyed||!m.allowMomentumBounce||(n("momentumBounce"),e.setTransition(u.speed),setTimeout(()=>{e.setTranslate(w),Rc(d,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(n("_freeModeNoMomentumRelease"),e.updateProgress(v),e.setTransition(y),e.setTranslate(v),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,Rc(d,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(v),e.updateActiveIndex(),e.updateSlidesClasses()}else if(u.freeMode.sticky){e.slideToClosest();return}else u.freeMode&&n("_freeModeNoMomentumRelease");(!u.freeMode.momentum||f>=u.longSwipesMs)&&(n("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:s,onTouchMove:o,onTouchEnd:a}})}function DV(i){let{swiper:e,extendParams:t,on:n}=i;t({grid:{rows:1,fill:"column"}});let r,s,o,a,l=()=>{let g=e.params.spaceBetween;return typeof g=="string"&&g.indexOf("%")>=0?g=parseFloat(g.replace("%",""))/100*e.size:typeof g=="string"&&(g=parseFloat(g)),g},c=g=>{let{slidesPerView:f}=e.params,{rows:y,fill:b}=e.params.grid,v=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:g.length;o=Math.floor(v/y),Math.floor(v/y)===v/y?r=v:r=Math.ceil(v/y)*y,f!=="auto"&&b==="row"&&(r=Math.max(r,f*y)),s=r/y},u=()=>{e.slides&&e.slides.forEach(g=>{g.swiperSlideGridSet&&(g.style.height="",g.style[e.getDirectionLabel("margin-top")]="")})},d=(g,f,y)=>{let{slidesPerGroup:b}=e.params,v=l(),{rows:S,fill:w}=e.params.grid,T=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:y.length,D,O,R;if(w==="row"&&b>1){let L=Math.floor(g/(b*S)),B=g-S*b*L,$=L===0?b:Math.min(Math.ceil((T-L*S*b)/S),b);R=Math.floor(B/$),O=B-R*$+L*b,D=O+R*r/S,f.style.order=D}else w==="column"?(O=Math.floor(g/S),R=g-O*S,(O>o||O===o&&R===S-1)&&(R+=1,R>=S&&(R=0,O+=1))):(R=Math.floor(g/s),O=g-R*s);f.row=R,f.column=O,f.style.height=`calc((100% - ${(S-1)*v}px) / ${S})`,f.style[e.getDirectionLabel("margin-top")]=R!==0?v&&`${v}px`:"",f.swiperSlideGridSet=!0},h=(g,f)=>{let{centeredSlides:y,roundLengths:b}=e.params,v=l(),{rows:S}=e.params.grid;if(e.virtualSize=(g+v)*r,e.virtualSize=Math.ceil(e.virtualSize/S)-v,e.params.cssMode||(e.wrapperEl.style[e.getDirectionLabel("width")]=`${e.virtualSize+v}px`),y){let w=[];for(let T=0;T<f.length;T+=1){let D=f[T];b&&(D=Math.floor(D)),f[T]<e.virtualSize+f[0]&&w.push(D)}f.splice(0,f.length),f.push(...w)}},p=()=>{a=e.params.grid&&e.params.grid.rows>1},m=()=>{let{params:g,el:f}=e,y=g.grid&&g.grid.rows>1;a&&!y?(f.classList.remove(`${g.containerModifierClass}grid`,`${g.containerModifierClass}grid-column`),o=1,e.emitContainerClasses()):!a&&y&&(f.classList.add(`${g.containerModifierClass}grid`),g.grid.fill==="column"&&f.classList.add(`${g.containerModifierClass}grid-column`),e.emitContainerClasses()),a=y};n("init",p),n("update",m),e.grid={initSlides:c,unsetSlides:u,updateSlide:d,updateWrapperSize:h}}function Cle(i){let e=this,{params:t,slidesEl:n}=e;t.loop&&e.loopDestroy();let r=s=>{if(typeof s=="string"){let o=document.createElement("div");o.innerHTML=s,n.append(o.children[0]),o.innerHTML=""}else n.append(s)};if(typeof i=="object"&&"length"in i)for(let s=0;s<i.length;s+=1)i[s]&&r(i[s]);else r(i);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update()}function ble(i){let e=this,{params:t,activeIndex:n,slidesEl:r}=e;t.loop&&e.loopDestroy();let s=n+1,o=a=>{if(typeof a=="string"){let l=document.createElement("div");l.innerHTML=a,r.prepend(l.children[0]),l.innerHTML=""}else r.prepend(a)};if(typeof i=="object"&&"length"in i){for(let a=0;a<i.length;a+=1)i[a]&&o(i[a]);s=n+i.length}else o(i);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),e.slideTo(s,0,!1)}function Sle(i,e){let t=this,{params:n,activeIndex:r,slidesEl:s}=t,o=r;n.loop&&(o-=t.loopedSlides,t.loopDestroy(),t.recalcSlides());let a=t.slides.length;if(i<=0){t.prependSlide(e);return}if(i>=a){t.appendSlide(e);return}let l=o>i?o+1:o,c=[];for(let u=a-1;u>=i;u-=1){let d=t.slides[u];d.remove(),c.unshift(d)}if(typeof e=="object"&&"length"in e){for(let u=0;u<e.length;u+=1)e[u]&&s.append(e[u]);l=o>i?o+e.length:o}else s.append(e);for(let u=0;u<c.length;u+=1)s.append(c[u]);t.recalcSlides(),n.loop&&t.loopCreate(),(!n.observer||t.isElement)&&t.update(),n.loop?t.slideTo(l+t.loopedSlides,0,!1):t.slideTo(l,0,!1)}function xle(i){let e=this,{params:t,activeIndex:n}=e,r=n;t.loop&&(r-=e.loopedSlides,e.loopDestroy());let s=r,o;if(typeof i=="object"&&"length"in i){for(let a=0;a<i.length;a+=1)o=i[a],e.slides[o]&&e.slides[o].remove(),o<s&&(s-=1);s=Math.max(s,0)}else o=i,e.slides[o]&&e.slides[o].remove(),o<s&&(s-=1),s=Math.max(s,0);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),t.loop?e.slideTo(s+e.loopedSlides,0,!1):e.slideTo(s,0,!1)}function _le(){let i=this,e=[];for(let t=0;t<i.slides.length;t+=1)e.push(t);i.removeSlide(e)}function kV(i){let{swiper:e}=i;Object.assign(e,{appendSlide:Cle.bind(e),prependSlide:ble.bind(e),addSlide:Sle.bind(e),removeSlide:xle.bind(e),removeAllSlides:_le.bind(e)})}function $s(i){let{effect:e,swiper:t,on:n,setTranslate:r,setTransition:s,overwriteParams:o,perspective:a,recreateShadows:l,getEffectParams:c}=i;n("beforeInit",()=>{if(t.params.effect!==e)return;t.classNames.push(`${t.params.containerModifierClass}${e}`),a&&a()&&t.classNames.push(`${t.params.containerModifierClass}3d`);let d=o?o():{};Object.assign(t.params,d),Object.assign(t.originalParams,d)}),n("setTranslate",()=>{t.params.effect===e&&r()}),n("setTransition",(d,h)=>{t.params.effect===e&&s(h)}),n("transitionEnd",()=>{if(t.params.effect===e&&l){if(!c||!c().slideShadows)return;t.slides.forEach(d=>{d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>h.remove())}),l()}});let u;n("virtualUpdate",()=>{t.params.effect===e&&(t.slides.length||(u=!0),requestAnimationFrame(()=>{u&&t.slides&&t.slides.length&&(r(),u=!1)}))})}function ya(i,e){let t=Hr(e);return t!==e&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function Bc(i){let{swiper:e,duration:t,transformElements:n,allSlides:r}=i,{activeIndex:s}=e,o=a=>a.parentElement?a.parentElement:e.slides.filter(c=>c.shadowRoot&&c.shadowRoot===a.parentNode)[0];if(e.params.virtualTranslate&&t!==0){let a=!1,l;r?l=n:l=n.filter(c=>{let u=c.classList.contains("swiper-slide-transform")?o(c):c;return e.getSlideIndex(u)===s}),l.forEach(c=>{Rc(c,()=>{if(a||!e||e.destroyed)return;a=!0,e.animating=!1;let u=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(u)})})}}function IV(i){let{swiper:e,extendParams:t,on:n}=i;t({fadeEffect:{crossFade:!1}}),$s({effect:"fade",swiper:e,on:n,setTranslate:()=>{let{slides:o}=e,a=e.params.fadeEffect;for(let l=0;l<o.length;l+=1){let c=e.slides[l],d=-c.swiperSlideOffset;e.params.virtualTranslate||(d-=e.translate);let h=0;e.isHorizontal()||(h=d,d=0);let p=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(c.progress),0):1+Math.min(Math.max(c.progress,-1),0),m=ya(a,c);m.style.opacity=p,m.style.transform=`translate3d(${d}px, ${h}px, 0px)`}},setTransition:o=>{let a=e.slides.map(l=>Hr(l));a.forEach(l=>{l.style.transitionDuration=`${o}ms`}),Bc({swiper:e,duration:o,transformElements:a,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function FV(i){let{swiper:e,extendParams:t,on:n}=i;t({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});let r=(l,c,u)=>{let d=u?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),h=u?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");d||(d=hn("div",`swiper-slide-shadow-cube swiper-slide-shadow-${u?"left":"top"}`.split(" ")),l.append(d)),h||(h=hn("div",`swiper-slide-shadow-cube swiper-slide-shadow-${u?"right":"bottom"}`.split(" ")),l.append(h)),d&&(d.style.opacity=Math.max(-c,0)),h&&(h.style.opacity=Math.max(c,0))};$s({effect:"cube",swiper:e,on:n,setTranslate:()=>{let{el:l,wrapperEl:c,slides:u,width:d,height:h,rtlTranslate:p,size:m,browser:g}=e,f=Nc(e),y=e.params.cubeEffect,b=e.isHorizontal(),v=e.virtual&&e.params.virtual.enabled,S=0,w;y.shadow&&(b?(w=e.wrapperEl.querySelector(".swiper-cube-shadow"),w||(w=hn("div","swiper-cube-shadow"),e.wrapperEl.append(w)),w.style.height=`${d}px`):(w=l.querySelector(".swiper-cube-shadow"),w||(w=hn("div","swiper-cube-shadow"),l.append(w))));for(let D=0;D<u.length;D+=1){let O=u[D],R=D;v&&(R=parseInt(O.getAttribute("data-swiper-slide-index"),10));let L=R*90,B=Math.floor(L/360);p&&(L=-L,B=Math.floor(-L/360));let $=Math.max(Math.min(O.progress,1),-1),U=0,K=0,ie=0;R%4===0?(U=-B*4*m,ie=0):(R-1)%4===0?(U=0,ie=-B*4*m):(R-2)%4===0?(U=m+B*4*m,ie=m):(R-3)%4===0&&(U=-m,ie=3*m+m*4*B),p&&(U=-U),b||(K=U,U=0);let te=`rotateX(${f(b?0:-L)}deg) rotateY(${f(b?L:0)}deg) translate3d(${U}px, ${K}px, ${ie}px)`;$<=1&&$>-1&&(S=R*90+$*90,p&&(S=-R*90-$*90)),O.style.transform=te,y.slideShadows&&r(O,$,b)}if(c.style.transformOrigin=`50% 50% -${m/2}px`,c.style["-webkit-transform-origin"]=`50% 50% -${m/2}px`,y.shadow)if(b)w.style.transform=`translate3d(0px, ${d/2+y.shadowOffset}px, ${-d/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${y.shadowScale})`;else{let D=Math.abs(S)-Math.floor(Math.abs(S)/90)*90,O=1.5-(Math.sin(D*2*Math.PI/360)/2+Math.cos(D*2*Math.PI/360)/2),R=y.shadowScale,L=y.shadowScale/O,B=y.shadowOffset;w.style.transform=`scale3d(${R}, 1, ${L}) translate3d(0px, ${h/2+B}px, ${-h/2/L}px) rotateX(-89.99deg)`}let T=(g.isSafari||g.isWebView)&&g.needPerspectiveFix?-m/2:0;c.style.transform=`translate3d(0px,0,${T}px) rotateX(${f(e.isHorizontal()?0:S)}deg) rotateY(${f(e.isHorizontal()?-S:0)}deg)`,c.style.setProperty("--swiper-cube-translate-z",`${T}px`)},setTransition:l=>{let{el:c,slides:u}=e;if(u.forEach(d=>{d.style.transitionDuration=`${l}ms`,d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>{h.style.transitionDuration=`${l}ms`})}),e.params.cubeEffect.shadow&&!e.isHorizontal()){let d=c.querySelector(".swiper-cube-shadow");d&&(d.style.transitionDuration=`${l}ms`)}},recreateShadows:()=>{let l=e.isHorizontal();e.slides.forEach(c=>{let u=Math.max(Math.min(c.progress,1),-1);r(c,u,l)})},getEffectParams:()=>e.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}function Ca(i,e,t){let n=`swiper-slide-shadow${t?`-${t}`:""}${i?` swiper-slide-shadow-${i}`:""}`,r=Hr(e),s=r.querySelector(`.${n.split(" ").join(".")}`);return s||(s=hn("div",n.split(" ")),r.append(s)),s}function OV(i){let{swiper:e,extendParams:t,on:n}=i;t({flipEffect:{slideShadows:!0,limitRotation:!0}});let r=(l,c)=>{let u=e.isHorizontal()?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),d=e.isHorizontal()?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");u||(u=Ca("flip",l,e.isHorizontal()?"left":"top")),d||(d=Ca("flip",l,e.isHorizontal()?"right":"bottom")),u&&(u.style.opacity=Math.max(-c,0)),d&&(d.style.opacity=Math.max(c,0))};$s({effect:"flip",swiper:e,on:n,setTranslate:()=>{let{slides:l,rtlTranslate:c}=e,u=e.params.flipEffect,d=Nc(e);for(let h=0;h<l.length;h+=1){let p=l[h],m=p.progress;e.params.flipEffect.limitRotation&&(m=Math.max(Math.min(p.progress,1),-1));let g=p.swiperSlideOffset,y=-180*m,b=0,v=e.params.cssMode?-g-e.translate:-g,S=0;e.isHorizontal()?c&&(y=-y):(S=v,v=0,b=-y,y=0),p.style.zIndex=-Math.abs(Math.round(m))+l.length,u.slideShadows&&r(p,m);let w=`translate3d(${v}px, ${S}px, 0px) rotateX(${d(b)}deg) rotateY(${d(y)}deg)`,T=ya(u,p);T.style.transform=w}},setTransition:l=>{let c=e.slides.map(u=>Hr(u));c.forEach(u=>{u.style.transitionDuration=`${l}ms`,u.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(d=>{d.style.transitionDuration=`${l}ms`})}),Bc({swiper:e,duration:l,transformElements:c})},recreateShadows:()=>{e.params.flipEffect,e.slides.forEach(l=>{let c=l.progress;e.params.flipEffect.limitRotation&&(c=Math.max(Math.min(l.progress,1),-1)),r(l,c)})},getEffectParams:()=>e.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function LV(i){let{swiper:e,extendParams:t,on:n}=i;t({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),$s({effect:"coverflow",swiper:e,on:n,setTranslate:()=>{let{width:o,height:a,slides:l,slidesSizesGrid:c}=e,u=e.params.coverflowEffect,d=e.isHorizontal(),h=e.translate,p=d?-h+o/2:-h+a/2,m=d?u.rotate:-u.rotate,g=u.depth,f=Nc(e);for(let y=0,b=l.length;y<b;y+=1){let v=l[y],S=c[y],w=v.swiperSlideOffset,T=(p-w-S/2)/S,D=typeof u.modifier=="function"?u.modifier(T):T*u.modifier,O=d?m*D:0,R=d?0:m*D,L=-g*Math.abs(D),B=u.stretch;typeof B=="string"&&B.indexOf("%")!==-1&&(B=parseFloat(u.stretch)/100*S);let $=d?0:B*D,U=d?B*D:0,K=1-(1-u.scale)*Math.abs(D);Math.abs(U)<.001&&(U=0),Math.abs($)<.001&&($=0),Math.abs(L)<.001&&(L=0),Math.abs(O)<.001&&(O=0),Math.abs(R)<.001&&(R=0),Math.abs(K)<.001&&(K=0);let ie=`translate3d(${U}px,${$}px,${L}px)  rotateX(${f(R)}deg) rotateY(${f(O)}deg) scale(${K})`,te=ya(u,v);if(te.style.transform=ie,v.style.zIndex=-Math.abs(Math.round(D))+1,u.slideShadows){let j=d?v.querySelector(".swiper-slide-shadow-left"):v.querySelector(".swiper-slide-shadow-top"),Y=d?v.querySelector(".swiper-slide-shadow-right"):v.querySelector(".swiper-slide-shadow-bottom");j||(j=Ca("coverflow",v,d?"left":"top")),Y||(Y=Ca("coverflow",v,d?"right":"bottom")),j&&(j.style.opacity=D>0?D:0),Y&&(Y.style.opacity=-D>0?-D:0)}}},setTransition:o=>{e.slides.map(l=>Hr(l)).forEach(l=>{l.style.transitionDuration=`${o}ms`,l.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(c=>{c.style.transitionDuration=`${o}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function RV(i){let{swiper:e,extendParams:t,on:n}=i;t({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});let r=a=>typeof a=="string"?a:`${a}px`;$s({effect:"creative",swiper:e,on:n,setTranslate:()=>{let{slides:a,wrapperEl:l,slidesSizesGrid:c}=e,u=e.params.creativeEffect,{progressMultiplier:d}=u,h=e.params.centeredSlides,p=Nc(e);if(h){let m=c[0]/2-e.params.slidesOffsetBefore||0;l.style.transform=`translateX(calc(50% - ${m}px))`}for(let m=0;m<a.length;m+=1){let g=a[m],f=g.progress,y=Math.min(Math.max(g.progress,-u.limitProgress),u.limitProgress),b=y;h||(b=Math.min(Math.max(g.originalProgress,-u.limitProgress),u.limitProgress));let v=g.swiperSlideOffset,S=[e.params.cssMode?-v-e.translate:-v,0,0],w=[0,0,0],T=!1;e.isHorizontal()||(S[1]=S[0],S[0]=0);let D={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};y<0?(D=u.next,T=!0):y>0&&(D=u.prev,T=!0),S.forEach((K,ie)=>{S[ie]=`calc(${K}px + (${r(D.translate[ie])} * ${Math.abs(y*d)}))`}),w.forEach((K,ie)=>{let te=D.rotate[ie]*Math.abs(y*d);w[ie]=te}),g.style.zIndex=-Math.abs(Math.round(f))+a.length;let O=S.join(", "),R=`rotateX(${p(w[0])}deg) rotateY(${p(w[1])}deg) rotateZ(${p(w[2])}deg)`,L=b<0?`scale(${1+(1-D.scale)*b*d})`:`scale(${1-(1-D.scale)*b*d})`,B=b<0?1+(1-D.opacity)*b*d:1-(1-D.opacity)*b*d,$=`translate3d(${O}) ${R} ${L}`;if(T&&D.shadow||!T){let K=g.querySelector(".swiper-slide-shadow");if(!K&&D.shadow&&(K=Ca("creative",g)),K){let ie=u.shadowPerProgress?y*(1/u.limitProgress):y;K.style.opacity=Math.min(Math.max(Math.abs(ie),0),1)}}let U=ya(u,g);U.style.transform=$,U.style.opacity=B,D.origin&&(U.style.transformOrigin=D.origin)}},setTransition:a=>{let l=e.slides.map(c=>Hr(c));l.forEach(c=>{c.style.transitionDuration=`${a}ms`,c.querySelectorAll(".swiper-slide-shadow").forEach(u=>{u.style.transitionDuration=`${a}ms`})}),Bc({swiper:e,duration:a,transformElements:l,allSlides:!0})},perspective:()=>e.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}function NV(i){let{swiper:e,extendParams:t,on:n}=i;t({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),$s({effect:"cards",swiper:e,on:n,setTranslate:()=>{let{slides:o,activeIndex:a,rtlTranslate:l}=e,c=e.params.cardsEffect,{startTranslate:u,isTouched:d}=e.touchEventsData,h=l?-e.translate:e.translate;for(let p=0;p<o.length;p+=1){let m=o[p],g=m.progress,f=Math.min(Math.max(g,-4),4),y=m.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(y-=o[0].swiperSlideOffset);let b=e.params.cssMode?-y-e.translate:-y,v=0,S=-100*Math.abs(f),w=1,T=-c.perSlideRotate*f,D=c.perSlideOffset-Math.abs(f)*.75,O=e.virtual&&e.params.virtual.enabled?e.virtual.from+p:p,R=(O===a||O===a-1)&&f>0&&f<1&&(d||e.params.cssMode)&&h<u,L=(O===a||O===a+1)&&f<0&&f>-1&&(d||e.params.cssMode)&&h>u;if(R||L){let K=(1-Math.abs((Math.abs(f)-.5)/.5))**.5;T+=-28*f*K,w+=-.5*K,D+=96*K,v=`${-25*K*Math.abs(f)}%`}if(f<0?b=`calc(${b}px ${l?"-":"+"} (${D*Math.abs(f)}%))`:f>0?b=`calc(${b}px ${l?"-":"+"} (-${D*Math.abs(f)}%))`:b=`${b}px`,!e.isHorizontal()){let K=v;v=b,b=K}let B=f<0?`${1+(1-w)*f}`:`${1-(1-w)*f}`,$=`
        translate3d(${b}, ${v}, ${S}px)
        rotateZ(${c.rotate?l?-T:T:0}deg)
        scale(${B})
      `;if(c.slideShadows){let K=m.querySelector(".swiper-slide-shadow");K||(K=Ca("cards",m)),K&&(K.style.opacity=Math.min(Math.max((Math.abs(f)-.5)/.5,0),1))}m.style.zIndex=-Math.abs(Math.round(g))+o.length;let U=ya(c,m);U.style.transform=$}},setTransition:o=>{let a=e.slides.map(l=>Hr(l));a.forEach(l=>{l.style.transitionDuration=`${o}ms`,l.querySelectorAll(".swiper-slide-shadow").forEach(c=>{c.style.transitionDuration=`${o}ms`})}),Bc({swiper:e,duration:o,transformElements:a})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}var wle=[gV,fV,vV,yV,CV,bV,SV,xV,_V,wV,EV,TV,MV,AV,PV,DV,kV,IV,FV,OV,LV,RV,NV];Vc.use(wle);var _p=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function sd(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"&&!i.__swiper__}function GC(i,e){let t=["__proto__","constructor","prototype"];Object.keys(e).filter(n=>t.indexOf(n)<0).forEach(n=>{typeof i[n]>"u"?i[n]=e[n]:sd(e[n])&&sd(i[n])&&Object.keys(e[n]).length>0?e[n].__swiper__?i[n]=e[n]:GC(i[n],e[n]):i[n]=e[n]})}function VV(i){return i===void 0&&(i={}),i.navigation&&typeof i.navigation.nextEl>"u"&&typeof i.navigation.prevEl>"u"}function BV(i){return i===void 0&&(i={}),i.pagination&&typeof i.pagination.el>"u"}function GV(i){return i===void 0&&(i={}),i.scrollbar&&typeof i.scrollbar.el>"u"}function wp(i){return i===void 0&&(i=""),i.replace(/-[a-z]/g,e=>e.toUpperCase().replace("-",""))}function UV(i){let{swiper:e,slides:t,passedParams:n,changedParams:r,nextEl:s,prevEl:o,scrollbarEl:a,paginationEl:l}=i,c=r.filter(R=>R!=="children"&&R!=="direction"&&R!=="wrapperClass"),{params:u,pagination:d,navigation:h,scrollbar:p,virtual:m,thumbs:g}=e,f,y,b,v,S,w,T,D;r.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&!n.thumbs.swiper.destroyed&&u.thumbs&&(!u.thumbs.swiper||u.thumbs.swiper.destroyed)&&(f=!0),r.includes("controller")&&n.controller&&n.controller.control&&u.controller&&!u.controller.control&&(y=!0),r.includes("pagination")&&n.pagination&&(n.pagination.el||l)&&(u.pagination||u.pagination===!1)&&d&&!d.el&&(b=!0),r.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||a)&&(u.scrollbar||u.scrollbar===!1)&&p&&!p.el&&(v=!0),r.includes("navigation")&&n.navigation&&(n.navigation.prevEl||o)&&(n.navigation.nextEl||s)&&(u.navigation||u.navigation===!1)&&h&&!h.prevEl&&!h.nextEl&&(S=!0);let O=R=>{e[R]&&(e[R].destroy(),R==="navigation"?(e.isElement&&(e[R].prevEl.remove(),e[R].nextEl.remove()),u[R].prevEl=void 0,u[R].nextEl=void 0,e[R].prevEl=void 0,e[R].nextEl=void 0):(e.isElement&&e[R].el.remove(),u[R].el=void 0,e[R].el=void 0))};r.includes("loop")&&e.isElement&&(u.loop&&!n.loop?w=!0:!u.loop&&n.loop?T=!0:D=!0),c.forEach(R=>{if(sd(u[R])&&sd(n[R]))Object.assign(u[R],n[R]),(R==="navigation"||R==="pagination"||R==="scrollbar")&&"enabled"in n[R]&&!n[R].enabled&&O(R);else{let L=n[R];(L===!0||L===!1)&&(R==="navigation"||R==="pagination"||R==="scrollbar")?L===!1&&O(R):u[R]=n[R]}}),c.includes("controller")&&!y&&e.controller&&e.controller.control&&u.controller&&u.controller.control&&(e.controller.control=u.controller.control),r.includes("children")&&t&&m&&u.virtual.enabled?(m.slides=t,m.update(!0)):r.includes("virtual")&&m&&u.virtual.enabled&&(t&&(m.slides=t),m.update(!0)),r.includes("children")&&t&&u.loop&&(D=!0),f&&g.init()&&g.update(!0),y&&(e.controller.control=u.controller.control),b&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(u.pagination.el=l),d.init(),d.render(),d.update()),v&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(u.scrollbar.el=a),p.init(),p.updateSize(),p.setTranslate()),S&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),s.innerHTML=e.hostEl.constructor.nextButtonSvg,s.part.add("button-next"),e.el.appendChild(s)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),o.innerHTML=e.hostEl.constructor.prevButtonSvg,o.part.add("button-prev"),e.el.appendChild(o))),s&&(u.navigation.nextEl=s),o&&(u.navigation.prevEl=o),h.init(),h.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=n.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=n.allowSlidePrev),r.includes("direction")&&e.changeDirection(n.direction,!1),(w||D)&&e.loopDestroy(),(T||D)&&e.loopCreate(),e.update()}var HV=i=>{if(parseFloat(i)===Number(i))return Number(i);if(i==="true"||i==="")return!0;if(i==="false")return!1;if(i==="null")return null;if(i!=="undefined"){if(typeof i=="string"&&i.includes("{")&&i.includes("}")&&i.includes('"')){let e;try{e=JSON.parse(i)}catch{e=i}return e}return i}},zV=["a11y","autoplay","controller","cards-effect","coverflow-effect","creative-effect","cube-effect","fade-effect","flip-effect","free-mode","grid","hash-navigation","history","keyboard","mousewheel","navigation","pagination","parallax","scrollbar","thumbs","virtual","zoom"];function Vw(i,e,t){let n={},r={};GC(n,BC);let s=[..._p,"on"],o=s.map(l=>l.replace(/_/,""));s.forEach(l=>{l=l.replace("_",""),typeof i[l]<"u"&&(r[l]=i[l])});let a=[...i.attributes];return typeof e=="string"&&typeof t<"u"&&a.push({name:e,value:sd(t)?Se({},t):t}),a.forEach(l=>{let c=zV.filter(u=>l.name.indexOf(`${u}-`)===0)[0];if(c){let u=wp(c),d=wp(l.name.split(`${c}-`)[1]);typeof r[u]>"u"&&(r[u]={}),r[u]===!0&&(r[u]={enabled:!0}),r[u][d]=HV(l.value)}else{let u=wp(l.name);if(!o.includes(u))return;let d=HV(l.value);r[u]&&zV.includes(l.name)&&!sd(d)?(r[u].constructor!==Object&&(r[u]={}),r[u].enabled=!!d):r[u]=d}}),GC(n,r),n.navigation?n.navigation=Se({prevEl:".swiper-button-prev",nextEl:".swiper-button-next"},n.navigation!==!0?n.navigation:{}):n.navigation===!1&&delete n.navigation,n.scrollbar?n.scrollbar=Se({el:".swiper-scrollbar"},n.scrollbar!==!0?n.scrollbar:{}):n.scrollbar===!1&&delete n.scrollbar,n.pagination?n.pagination=Se({el:".swiper-pagination"},n.pagination!==!0?n.pagination:{}):n.pagination===!1&&delete n.pagination,{params:n,passedParams:r}}var Ele=":host{--swiper-theme-color:#007aff}:host{position:relative;display:block;margin-left:auto;margin-right:auto;z-index:1}.swiper{width:100%;height:100%;margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1;display:block}.swiper-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:flex;transition-property:transform;transition-timing-function:var(--swiper-wrapper-transition-timing-function,initial);box-sizing:content-box}.swiper-android ::slotted(swiper-slide),.swiper-ios ::slotted(swiper-slide),.swiper-wrapper{transform:translate3d(0px,0,0)}.swiper-horizontal{touch-action:pan-y}.swiper-vertical{touch-action:pan-x}::slotted(swiper-slide){flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform;display:block}::slotted(.swiper-slide-invisible-blank){visibility:hidden}.swiper-autoheight,.swiper-autoheight ::slotted(swiper-slide){height:auto}.swiper-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-backface-hidden ::slotted(swiper-slide){transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-3d.swiper-css-mode .swiper-wrapper{perspective:1200px}.swiper-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-3d{perspective:1200px}.swiper-3d .swiper-cube-shadow,.swiper-3d ::slotted(swiper-slide){transform-style:preserve-3d}.swiper-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-css-mode ::slotted(swiper-slide){scroll-snap-align:start start}.swiper-css-mode.swiper-horizontal>.swiper-wrapper{scroll-snap-type:x mandatory}.swiper-css-mode.swiper-vertical>.swiper-wrapper{scroll-snap-type:y mandatory}.swiper-css-mode.swiper-free-mode>.swiper-wrapper{scroll-snap-type:none}.swiper-css-mode.swiper-free-mode ::slotted(swiper-slide){scroll-snap-align:none}.swiper-css-mode.swiper-centered>.swiper-wrapper::before{content:'';flex-shrink:0;order:9999}.swiper-css-mode.swiper-centered ::slotted(swiper-slide){scroll-snap-align:center center;scroll-snap-stop:always}.swiper-css-mode.swiper-centered.swiper-horizontal ::slotted(swiper-slide):first-child{margin-inline-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper::before{height:100%;min-height:1px;width:var(--swiper-centered-offset-after)}.swiper-css-mode.swiper-centered.swiper-vertical ::slotted(swiper-slide):first-child{margin-block-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper::before{width:100%;min-width:1px;height:var(--swiper-centered-offset-after)}.swiper-virtual ::slotted(swiper-slide){-webkit-backface-visibility:hidden;transform:translateZ(0)}.swiper-virtual.swiper-css-mode .swiper-wrapper::after{content:'';position:absolute;left:0;top:0;pointer-events:none}.swiper-virtual.swiper-css-mode.swiper-horizontal .swiper-wrapper::after{height:1px;width:var(--swiper-virtual-size)}.swiper-virtual.swiper-css-mode.swiper-vertical .swiper-wrapper::after{width:1px;height:var(--swiper-virtual-size)}:host{--swiper-navigation-size:44px}.swiper-button-next,.swiper-button-prev{position:absolute;top:var(--swiper-navigation-top-offset,50%);width:calc(var(--swiper-navigation-size)/ 44 * 27);height:var(--swiper-navigation-size);margin-top:calc(0px - (var(--swiper-navigation-size)/ 2));z-index:10;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--swiper-navigation-color,var(--swiper-theme-color))}.swiper-button-next.swiper-button-disabled,.swiper-button-prev.swiper-button-disabled{opacity:.35;cursor:auto;pointer-events:none}.swiper-button-next.swiper-button-hidden,.swiper-button-prev.swiper-button-hidden{opacity:0;cursor:auto;pointer-events:none}.swiper-navigation-disabled .swiper-button-next,.swiper-navigation-disabled .swiper-button-prev{display:none!important}.swiper-button-next svg,.swiper-button-prev svg{width:100%;height:100%;object-fit:contain;transform-origin:center}.swiper-rtl .swiper-button-next svg,.swiper-rtl .swiper-button-prev svg{transform:rotate(180deg)}.swiper-button-prev,.swiper-rtl .swiper-button-next{left:var(--swiper-navigation-sides-offset,10px);right:auto}.swiper-button-next,.swiper-rtl .swiper-button-prev{right:var(--swiper-navigation-sides-offset,10px);left:auto}.swiper-button-lock{display:none}.swiper-pagination{position:absolute;text-align:center;transition:.3s opacity;transform:translate3d(0,0,0);z-index:10}.swiper-pagination.swiper-pagination-hidden{opacity:0}.swiper-pagination-disabled>.swiper-pagination,.swiper-pagination.swiper-pagination-disabled{display:none!important}.swiper-horizontal>.swiper-pagination-bullets,.swiper-pagination-bullets.swiper-pagination-horizontal,.swiper-pagination-custom,.swiper-pagination-fraction{bottom:var(--swiper-pagination-bottom,8px);top:var(--swiper-pagination-top,auto);left:0;width:100%}.swiper-pagination-bullets-dynamic{overflow:hidden;font-size:0}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transform:scale(.33);position:relative}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev{transform:scale(.33)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next{transform:scale(.33)}.swiper-pagination-bullet{width:var(--swiper-pagination-bullet-width,var(--swiper-pagination-bullet-size,8px));height:var(--swiper-pagination-bullet-height,var(--swiper-pagination-bullet-size,8px));display:inline-block;border-radius:var(--swiper-pagination-bullet-border-radius,50%);background:var(--swiper-pagination-bullet-inactive-color,#000);opacity:var(--swiper-pagination-bullet-inactive-opacity, .2)}button.swiper-pagination-bullet{border:none;margin:0;padding:0;box-shadow:none;-webkit-appearance:none;appearance:none}.swiper-pagination-clickable .swiper-pagination-bullet{cursor:pointer}.swiper-pagination-bullet:only-child{display:none!important}.swiper-pagination-bullet-active{opacity:var(--swiper-pagination-bullet-opacity, 1);background:var(--swiper-pagination-color,var(--swiper-theme-color))}.swiper-pagination-vertical.swiper-pagination-bullets,.swiper-vertical>.swiper-pagination-bullets{right:var(--swiper-pagination-right,8px);left:var(--swiper-pagination-left,auto);top:50%;transform:translate3d(0px,-50%,0)}.swiper-pagination-vertical.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets .swiper-pagination-bullet{margin:var(--swiper-pagination-bullet-vertical-gap,6px) 0;display:block}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{top:50%;transform:translateY(-50%);width:8px}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{display:inline-block;transition:.2s transform,.2s top}.swiper-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 var(--swiper-pagination-bullet-horizontal-gap,4px)}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{left:50%;transform:translateX(-50%);white-space:nowrap}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s left}.swiper-horizontal.swiper-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s right}.swiper-pagination-fraction{color:var(--swiper-pagination-fraction-color,inherit)}.swiper-pagination-progressbar{background:var(--swiper-pagination-progressbar-bg-color,rgba(0,0,0,.25));position:absolute}.swiper-pagination-progressbar .swiper-pagination-progressbar-fill{background:var(--swiper-pagination-color,var(--swiper-theme-color));position:absolute;left:0;top:0;width:100%;height:100%;transform:scale(0);transform-origin:left top}.swiper-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill{transform-origin:right top}.swiper-horizontal>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-horizontal,.swiper-pagination-progressbar.swiper-pagination-vertical.swiper-pagination-progressbar-opposite,.swiper-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite{width:100%;height:var(--swiper-pagination-progressbar-size,4px);left:0;top:0}.swiper-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-horizontal.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-vertical,.swiper-vertical>.swiper-pagination-progressbar{width:var(--swiper-pagination-progressbar-size,4px);height:100%;left:0;top:0}.swiper-pagination-lock{display:none}.swiper-scrollbar{border-radius:var(--swiper-scrollbar-border-radius,10px);position:relative;touch-action:none;background:var(--swiper-scrollbar-bg-color,rgba(0,0,0,.1))}.swiper-scrollbar-disabled>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-disabled{display:none!important}.swiper-horizontal>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-horizontal{position:absolute;left:var(--swiper-scrollbar-sides-offset,1%);bottom:var(--swiper-scrollbar-bottom,4px);top:var(--swiper-scrollbar-top,auto);z-index:50;height:var(--swiper-scrollbar-size,4px);width:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar.swiper-scrollbar-vertical,.swiper-vertical>.swiper-scrollbar{position:absolute;left:var(--swiper-scrollbar-left,auto);right:var(--swiper-scrollbar-right,4px);top:var(--swiper-scrollbar-sides-offset,1%);z-index:50;width:var(--swiper-scrollbar-size,4px);height:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar-drag{height:100%;width:100%;position:relative;background:var(--swiper-scrollbar-drag-bg-color,rgba(0,0,0,.5));border-radius:var(--swiper-scrollbar-border-radius,10px);left:0;top:0}.swiper-scrollbar-cursor-drag{cursor:move}.swiper-scrollbar-lock{display:none}::slotted(.swiper-slide-zoomed){cursor:move;touch-action:none}.swiper .swiper-notification{position:absolute;left:0;top:0;pointer-events:none;opacity:0;z-index:-1000}.swiper-free-mode>.swiper-wrapper{transition-timing-function:ease-out;margin:0 auto}.swiper-grid>.swiper-wrapper{flex-wrap:wrap}.swiper-grid-column>.swiper-wrapper{flex-wrap:wrap;flex-direction:column}.swiper-fade.swiper-free-mode ::slotted(swiper-slide){transition-timing-function:ease-out}.swiper-fade ::slotted(swiper-slide){pointer-events:none;transition-property:opacity}.swiper-fade ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-fade ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-fade ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper.swiper-cube{overflow:visible}.swiper-cube ::slotted(swiper-slide){pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1;visibility:hidden;transform-origin:0 0;width:100%;height:100%}.swiper-cube ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-cube.swiper-rtl ::slotted(swiper-slide){transform-origin:100% 0}.swiper-cube ::slotted(.swiper-slide-active),.swiper-cube ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-cube ::slotted(.swiper-slide-active),.swiper-cube ::slotted(.swiper-slide-next),.swiper-cube ::slotted(.swiper-slide-prev){pointer-events:auto;visibility:visible}.swiper-cube .swiper-cube-shadow{position:absolute;left:0;bottom:0px;width:100%;height:100%;opacity:.6;z-index:0}.swiper-cube .swiper-cube-shadow:before{content:'';background:#000;position:absolute;left:0;top:0;bottom:0;right:0;filter:blur(50px)}.swiper-cube ::slotted(.swiper-slide-next)+::slotted(swiper-slide){pointer-events:auto;visibility:visible}.swiper.swiper-flip{overflow:visible}.swiper-flip ::slotted(swiper-slide){pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1}.swiper-flip ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-flip ::slotted(.swiper-slide-active),.swiper-flip ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-creative ::slotted(swiper-slide){-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden;transition-property:transform,opacity,height}.swiper.swiper-cards{overflow:visible}.swiper-cards ::slotted(swiper-slide){transform-origin:center bottom;-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden}",Tle="::slotted(.swiper-slide-shadow),::slotted(.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-top){position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}::slotted(.swiper-slide-shadow){background:rgba(0,0,0,.15)}::slotted(.swiper-slide-shadow-left){background-image:linear-gradient(to left,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-right){background-image:linear-gradient(to right,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-top){background-image:linear-gradient(to top,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-bottom){background-image:linear-gradient(to bottom,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-lazy-preloader{animation:swiper-preloader-spin 1s infinite linear;width:42px;height:42px;position:absolute;left:50%;top:50%;margin-left:-21px;margin-top:-21px;z-index:10;transform-origin:50%;box-sizing:border-box;border:4px solid var(--swiper-preloader-color,var(--swiper-theme-color));border-radius:50%;border-top-color:transparent}@keyframes swiper-preloader-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-top){z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-top){z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}::slotted(.swiper-zoom-container){width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-align:center}::slotted(.swiper-zoom-container)>canvas,::slotted(.swiper-zoom-container)>img,::slotted(.swiper-zoom-container)>svg{max-width:100%;max-height:100%;object-fit:contain}",Bw=class{},$V=typeof window>"u"||typeof HTMLElement>"u"?Bw:HTMLElement,WV=`<svg width="11" height="20" viewBox="0 0 11 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.38296 20.0762C0.111788 19.805 0.111788 19.3654 0.38296 19.0942L9.19758 10.2796L0.38296 1.46497C0.111788 1.19379 0.111788 0.754138 0.38296 0.482966C0.654131 0.211794 1.09379 0.211794 1.36496 0.482966L10.4341 9.55214C10.8359 9.9539 10.8359 10.6053 10.4341 11.007L1.36496 20.0762C1.09379 20.3474 0.654131 20.3474 0.38296 20.0762Z" fill="currentColor"/></svg>
    `,KV=(i,e)=>{if(typeof CSSStyleSheet<"u"&&i.adoptedStyleSheets){let t=new CSSStyleSheet;t.replaceSync(e),i.adoptedStyleSheets=[t]}else{let t=document.createElement("style");t.rel="stylesheet",t.textContent=e,i.appendChild(t)}},UC=class extends $V{constructor(){super(),this.attachShadow({mode:"open"})}static get nextButtonSvg(){return WV}static get prevButtonSvg(){return WV.replace("/></svg>",' transform-origin="center" transform="rotate(180)"/></svg>')}cssStyles(){return[Ele,...this.injectStyles&&Array.isArray(this.injectStyles)?this.injectStyles:[]].join(`
`)}cssLinks(){return this.injectStylesUrls||[]}calcSlideSlots(){let e=this.slideSlots||0,t=[...this.querySelectorAll("[slot^=slide-]")].map(n=>parseInt(n.getAttribute("slot").split("slide-")[1],10));if(this.slideSlots=t.length?Math.max(...t)+1:0,!!this.rendered){if(this.slideSlots>e)for(let n=e;n<this.slideSlots;n+=1){let r=document.createElement("swiper-slide");r.setAttribute("part",`slide slide-${n+1}`);let s=document.createElement("slot");s.setAttribute("name",`slide-${n+1}`),r.appendChild(s),this.shadowRoot.querySelector(".swiper-wrapper").appendChild(r)}else if(this.slideSlots<e){let n=this.swiper.slides;for(let r=n.length-1;r>=0;r-=1)r>this.slideSlots&&n[r].remove()}}}render(){if(this.rendered)return;this.calcSlideSlots();let e=this.cssStyles();this.slideSlots>0&&(e=e.replace(/::slotted\(([a-z-0-9.]*)\)/g,"$1")),e.length&&KV(this.shadowRoot,e),this.cssLinks().forEach(n=>{if(this.shadowRoot.querySelector(`link[href="${n}"]`))return;let s=document.createElement("link");s.rel="stylesheet",s.href=n,this.shadowRoot.appendChild(s)});let t=document.createElement("div");t.classList.add("swiper"),t.part="container",t.innerHTML=`
      <slot name="container-start"></slot>
      <div class="swiper-wrapper" part="wrapper">
        <slot></slot>
        ${Array.from({length:this.slideSlots}).map((n,r)=>`
        <swiper-slide part="slide slide-${r}">
          <slot name="slide-${r}"></slot>
        </swiper-slide>
        `).join("")}
      </div>
      <slot name="container-end"></slot>
      ${VV(this.passedParams)?`
        <div part="button-prev" class="swiper-button-prev">${this.constructor.prevButtonSvg}</div>
        <div part="button-next" class="swiper-button-next">${this.constructor.nextButtonSvg}</div>
      `:""}
      ${BV(this.passedParams)?`
        <div part="pagination" class="swiper-pagination"></div>
      `:""}
      ${GV(this.passedParams)?`
        <div part="scrollbar" class="swiper-scrollbar"></div>
      `:""}
    `,this.shadowRoot.appendChild(t),this.rendered=!0}initialize(){var e=this;if(this.initialized)return;this.initialized=!0;let{params:t,passedParams:n}=Vw(this);this.swiperParams=t,this.passedParams=n,delete this.swiperParams.init,this.render(),this.swiper=new Vc(this.shadowRoot.querySelector(".swiper"),dt(Se(Se({},t.virtual?{}:{observer:!0}),t),{touchEventsTarget:"container",onAny:function(r){r==="observerUpdate"&&e.calcSlideSlots();let s=t.eventsPrefix?`${t.eventsPrefix}${r.toLowerCase()}`:r.toLowerCase();for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];let c=new CustomEvent(s,{detail:a,bubbles:r!=="hashChange",cancelable:!0});e.dispatchEvent(c)}}))}connectedCallback(){this.initialized&&this.nested&&this.closest("swiper-slide")&&this.closest("swiper-slide").swiperLoopMoveDOM||this.init===!1||this.getAttribute("init")==="false"||this.initialize()}disconnectedCallback(){this.nested&&this.closest("swiper-slide")&&this.closest("swiper-slide").swiperLoopMoveDOM||(this.swiper&&this.swiper.destroy&&this.swiper.destroy(),this.initialized=!1)}updateSwiperOnPropChange(e,t){let{params:n,passedParams:r}=Vw(this,e,t);this.passedParams=r,this.swiperParams=n,!(this.swiper&&this.swiper.params[e]===t)&&UV(Se(Se(Se({swiper:this.swiper,passedParams:this.passedParams,changedParams:[wp(e)]},e==="navigation"&&r[e]?{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}:{}),e==="pagination"&&r[e]?{paginationEl:".swiper-pagination"}:{}),e==="scrollbar"&&r[e]?{scrollbarEl:".swiper-scrollbar"}:{}))}attributeChangedCallback(e,t,n){this.initialized&&(t==="true"&&n===null&&(n=!1),this.updateSwiperOnPropChange(e,n))}static get observedAttributes(){return _p.filter(t=>t.includes("_")).map(t=>t.replace(/[A-Z]/g,n=>`-${n}`).replace("_","").toLowerCase())}};_p.forEach(i=>{i!=="init"&&(i=i.replace("_",""),Object.defineProperty(UC.prototype,i,{configurable:!0,get(){return(this.passedParams||{})[i]},set(e){this.passedParams||(this.passedParams={}),this.passedParams[i]=e,this.initialized&&this.updateSwiperOnPropChange(i,e)}}))});var Gw=class extends $V{constructor(){super(),this.attachShadow({mode:"open"})}render(){let e=this.lazy||this.getAttribute("lazy")===""||this.getAttribute("lazy")==="true";if(KV(this.shadowRoot,Tle),this.shadowRoot.appendChild(document.createElement("slot")),e){let t=document.createElement("div");t.classList.add("swiper-lazy-preloader"),t.part.add("preloader"),this.shadowRoot.appendChild(t)}}initialize(){this.render()}connectedCallback(){this.initialize()}},jV=()=>{typeof window>"u"||(window.customElements.get("swiper-container")||window.customElements.define("swiper-container",UC),window.customElements.get("swiper-slide")||window.customElements.define("swiper-slide",Gw))};typeof window<"u"&&(window.SwiperElementRegisterParams=i=>{_p.push(...i)});li.appUrl==="https://d.orbis.easytrader.ir"&&(window.location.href="https://d.easytrader.ir");Fu.setLicenseKey("DownloadDevTools_COM_NDEwMjM0NTgwMDAwMA==59158b5225400879a12a96634544f5b6");B2(QN,eV).catch(console.error).finally(()=>{li.env===Tl.PROD&&UM(li,Cn.Desktop)});jV();Y2({dsn:li.sentry?.dsn,release:`d-${li.build}`,debug:li.sentry?.debug,environment:li.sentry?.environment,maxBreadcrumbs:li.sentry?.maxBreadcrumbs,attachStacktrace:li.sentry?.attachStacktrace,tracesSampleRate:li.sentry?.tracesSampleRate,integrations:[P2({console:li?.sentry?.breadcrumb?.console,dom:li?.sentry?.breadcrumb?.dom,fetch:li?.sentry?.breadcrumb?.fetch,history:li?.sentry?.breadcrumb?.history,sentry:li?.sentry?.breadcrumb?.sentry,xhr:li?.sentry?.breadcrumb?.xhr}),D2({onerror:li?.sentry?.error?.error,onunhandledrejection:li?.sentry?.error?.unhandled})],beforeSend(i){return i},beforeBreadcrumb(i){return i}});li.env===Tl.PROD&&VM();
//# sourceMappingURL=main-E6GX2EWK.js.map
