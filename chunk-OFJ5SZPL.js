import {$a as lv, A as Hr, Aa as N0, Ab as Ph, Ac as W, Ad as $0, B as Y8, Bc as me, Bd as Tv, Bf as Kv, C as Q8, Cb as s4, Cd as k5, Ce as Wv, Cf as g4, Da as Jp, Db as fv, Dd as A5, Ea as sv, Eb as kh, Ed as Ov, Ef as Yv, F as J8, Fa as Mh, Fb as Q, Fc as an, Fd as I5, Fg as n_, Ga as Vt, Gb as Mt, Gc as Ih, Gd as Mv, Gf as Qv, Gg as i_, H as We, Ha as In, Hb as pv, Hc as Qe, Hd as Pv, He as F5, I as cl, Ia as He, Ib as S5, Ic as Te, Id as Nn, If as Jv, J as ai, Jb as gv, Jc as E5, Jd as kv, K as Xp, Kb as mv, Kc as T5, Kd as Dh, Ke as L5, Kg as $5, L as A0, La as F0, Lb as b5, Lc as H0, Ld as Av, M as I0, Ma as ui, Mb as wt, Md as Iv, Mf as Zv, Mg as r_, Na as ic, Nb as sc, Nd as Nh, O as sn, Oa as ov, Oc as Rh, Od as Rv, P as ci, Pa as re, Pc as xv, Pd as ir, Q as ll, Qa as tr, Qc as G0, Qe as jv, R as nc, Ra as av, Rb as oc, Rc as V0, Re as qv, S as ul, Sa as Je, Sb as vv, Se as B5, T as mt, Ta as Zp, Tb as o4, Tc as cc, Te as U5, U as Kp, Ua as xe, Ub as Ye, Uc as lc, V as v5, Va as z, Vb as nr, Vc as uc, Vd as Dv, Wa as e4, Wb as as, Wc as oe, Wd as Nv, Xa as _5, Xb as ac, Xc as Mn, Xd as Fv, Xe as zv, Ya as cv, Yb as bo, Yc as Jn, Ye as Fh, Z as on, Za as L0, Zb as _v, Ze as gc, _ as Z8, _b as at, _d as Lv, a as C, aa as li, ab as rc, ac as B0, ae as fc, af as Lh, b as ve, bb as So, bc as yv, be as Bv, bf as H5, c as j8, cb as js, cc as x5, ce as pc, cf as pl, d as er, da as Yp, db as yt, dc as w5, dd as l4, de as h4, df as d4, dg as e_, e as NP, ea as Lt, eb as St, ec as a4, ee as Uv, f as q8, fb as hl, fc as Sv, fd as Dn, fe as Hv, g as g5, ga as ev, gc as Ah, gd as u4, ge as Gv, h as Oh, ha as ss, hb as Tn, hc as c4, i as ue, ib as t4, ic as ua, ja as R0, jb as On, je as Vv, jf as f4, k as z8, l as m5, la as tv, lb as uv, ld as ha, m as yo, mb as os, mc as U0, md as da, n as qp, na as dr, nb as Rn, nc as ye, ne as Wt, ng as t_, o as zp, oa as Qn, ob as n4, oc as C5, of as G5, p as lt, pb as $t, pc as xo, pd as hc, pe as $v, q as Ne, qa as Qp, qb as Ee, qc as bv, qd as O5, qe as xi, ra as nv, rb as Es, rc as fr, rd as M5, re as Fn, sb as hv, sc as cs, t as X8, tb as i4, td as wv, ub as dv, uc as et, ud as dc, ug as FP, v as Ur, va as iv, vb as qs, vc as ls, ve as R5, vf as Xv, wa as rv, wd as Cv, we as fl, wf as p4, x as K8, xb as r4, xc as us, xd as Ev, xe as D5, xf as V5, y as Yn, ya as D0, yb as y5, yc as hs, yd as P5, ye as N5, z as Be, zb as dl, zc as H} from "./chunk-K3475DQT.js";
var pT = NP( (D2e, W2) => {
    (function(e, t, n) {
        if (!e)
            return;
        for (var i = {
            8: "backspace",
            9: "tab",
            13: "enter",
            16: "shift",
            17: "ctrl",
            18: "alt",
            20: "capslock",
            27: "esc",
            32: "space",
            33: "pageup",
            34: "pagedown",
            35: "end",
            36: "home",
            37: "left",
            38: "up",
            39: "right",
            40: "down",
            45: "ins",
            46: "del",
            91: "meta",
            93: "meta",
            224: "meta"
        }, r = {
            106: "*",
            107: "+",
            109: "-",
            110: ".",
            111: "/",
            186: ";",
            187: "=",
            188: ",",
            189: "-",
            190: ".",
            191: "/",
            192: "`",
            219: "[",
            220: "\\",
            221: "]",
            222: "'"
        }, s = {
            "~": "`",
            "!": "1",
            "@": "2",
            "#": "3",
            $: "4",
            "%": "5",
            "^": "6",
            "&": "7",
            "*": "8",
            "(": "9",
            ")": "0",
            _: "-",
            "+": "=",
            ":": ";",
            '"': "'",
            "<": ",",
            ">": ".",
            "?": "/",
            "|": "\\"
        }, o = {
            option: "alt",
            command: "meta",
            return: "enter",
            escape: "esc",
            plus: "+",
            mod: /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? "meta" : "ctrl"
        }, a, c = 1; c < 20; ++c)
            i[111 + c] = "f" + c;
        for (c = 0; c <= 9; ++c)
            i[c + 96] = c.toString();
        function l(N, E, F) {
            if (N.addEventListener) {
                N.addEventListener(E, F, !1);
                return
            }
            N.attachEvent("on" + E, F)
        }
        function u(N) {
            if (N.type == "keypress") {
                var E = String.fromCharCode(N.which);
                return N.shiftKey || (E = E.toLowerCase()),
                E
            }
            return i[N.which] ? i[N.which] : r[N.which] ? r[N.which] : String.fromCharCode(N.which).toLowerCase()
        }
        function h(N, E) {
            return N.sort().join(",") === E.sort().join(",")
        }
        function d(N) {
            var E = [];
            return N.shiftKey && E.push("shift"),
            N.altKey && E.push("alt"),
            N.ctrlKey && E.push("ctrl"),
            N.metaKey && E.push("meta"),
            E
        }
        function f(N) {
            if (N.preventDefault) {
                N.preventDefault();
                return
            }
            N.returnValue = !1
        }
        function g(N) {
            if (N.stopPropagation) {
                N.stopPropagation();
                return
            }
            N.cancelBubble = !0
        }
        function p(N) {
            return N == "shift" || N == "ctrl" || N == "alt" || N == "meta"
        }
        function v() {
            if (!a) {
                a = {};
                for (var N in i)
                    N > 95 && N < 112 || i.hasOwnProperty(N) && (a[i[N]] = N)
            }
            return a
        }
        function S(N, E, F) {
            return F || (F = v()[N] ? "keydown" : "keypress"),
            F == "keypress" && E.length && (F = "keydown"),
            F
        }
        function x(N) {
            return N === "+" ? ["+"] : (N = N.replace(/\+{2}/g, "+plus"),
            N.split("+"))
        }
        function w(N, E) {
            var F, O, V, X = [];
            for (F = x(N),
            V = 0; V < F.length; ++V)
                O = F[V],
                o[O] && (O = o[O]),
                E && E != "keypress" && s[O] && (O = s[O],
                X.push("shift")),
                p(O) && X.push(O);
            return E = S(O, X, E),
            {
                key: O,
                modifiers: X,
                action: E
            }
        }
        function k(N, E) {
            return N === null || N === t ? !1 : N === E ? !0 : k(N.parentNode, E)
        }
        function B(N) {
            var E = this;
            if (N = N || t,
            !(E instanceof B))
                return new B(N);
            E.target = N,
            E._callbacks = {},
            E._directMap = {};
            var F = {}, O, V = !1, X = !1, b = !1;
            function j(fe) {
                fe = fe || {};
                var Ge = !1, A;
                for (A in F) {
                    if (fe[A]) {
                        Ge = !0;
                        continue
                    }
                    F[A] = 0
                }
                Ge || (b = !1)
            }
            function de(fe, Ge, A, q, L, U) {
                var te, Ce, Ve = [], De = A.type;
                if (!E._callbacks[fe])
                    return [];
                for (De == "keyup" && p(fe) && (Ge = [fe]),
                te = 0; te < E._callbacks[fe].length; ++te)
                    if (Ce = E._callbacks[fe][te],
                    !(!q && Ce.seq && F[Ce.seq] != Ce.level) && De == Ce.action && (De == "keypress" && !A.metaKey && !A.ctrlKey || h(Ge, Ce.modifiers))) {
                        var ge = !q && Ce.combo == L
                          , kt = q && Ce.seq == q && Ce.level == U;
                        (ge || kt) && E._callbacks[fe].splice(te, 1),
                        Ve.push(Ce)
                    }
                return Ve
            }
            function he(fe, Ge, A, q) {
                E.stopCallback(Ge, Ge.target || Ge.srcElement, A, q) || fe(Ge, A) === !1 && (f(Ge),
                g(Ge))
            }
            E._handleKey = function(fe, Ge, A) {
                var q = de(fe, Ge, A), L, U = {}, te = 0, Ce = !1;
                for (L = 0; L < q.length; ++L)
                    q[L].seq && (te = Math.max(te, q[L].level));
                for (L = 0; L < q.length; ++L) {
                    if (q[L].seq) {
                        if (q[L].level != te)
                            continue;
                        Ce = !0,
                        U[q[L].seq] = 1,
                        he(q[L].callback, A, q[L].combo, q[L].seq);
                        continue
                    }
                    Ce || he(q[L].callback, A, q[L].combo)
                }
                var Ve = A.type == "keypress" && X;
                A.type == b && !p(fe) && !Ve && j(U),
                X = Ce && A.type == "keydown"
            }
            ;
            function Re(fe) {
                typeof fe.which != "number" && (fe.which = fe.keyCode);
                var Ge = u(fe);
                if (Ge) {
                    if (fe.type == "keyup" && V === Ge) {
                        V = !1;
                        return
                    }
                    E.handleKey(Ge, d(fe), fe)
                }
            }
            function Xe() {
                clearTimeout(O),
                O = setTimeout(j, 1e3)
            }
            function pt(fe, Ge, A, q) {
                F[fe] = 0;
                function L(De) {
                    return function() {
                        b = De,
                        ++F[fe],
                        Xe()
                    }
                }
                function U(De) {
                    he(A, De, fe),
                    q !== "keyup" && (V = u(De)),
                    setTimeout(j, 10)
                }
                for (var te = 0; te < Ge.length; ++te) {
                    var Ce = te + 1 === Ge.length
                      , Ve = Ce ? U : L(q || w(Ge[te + 1]).action);
                    it(Ge[te], Ve, q, fe, te)
                }
            }
            function it(fe, Ge, A, q, L) {
                E._directMap[fe + ":" + A] = Ge,
                fe = fe.replace(/\s+/g, " ");
                var U = fe.split(" "), te;
                if (U.length > 1) {
                    pt(fe, U, Ge, A);
                    return
                }
                te = w(fe, A),
                E._callbacks[te.key] = E._callbacks[te.key] || [],
                de(te.key, te.modifiers, {
                    type: te.action
                }, q, fe, L),
                E._callbacks[te.key][q ? "unshift" : "push"]({
                    callback: Ge,
                    modifiers: te.modifiers,
                    action: te.action,
                    seq: q,
                    level: L,
                    combo: fe
                })
            }
            E._bindMultiple = function(fe, Ge, A) {
                for (var q = 0; q < fe.length; ++q)
                    it(fe[q], Ge, A)
            }
            ,
            l(N, "keypress", Re),
            l(N, "keydown", Re),
            l(N, "keyup", Re)
        }
        B.prototype.bind = function(N, E, F) {
            var O = this;
            return N = N instanceof Array ? N : [N],
            O._bindMultiple.call(O, N, E, F),
            O
        }
        ,
        B.prototype.unbind = function(N, E) {
            var F = this;
            return F.bind.call(F, N, function() {}, E)
        }
        ,
        B.prototype.trigger = function(N, E) {
            var F = this;
            return F._directMap[N + ":" + E] && F._directMap[N + ":" + E]({}, N),
            F
        }
        ,
        B.prototype.reset = function() {
            var N = this;
            return N._callbacks = {},
            N._directMap = {},
            N
        }
        ,
        B.prototype.stopCallback = function(N, E) {
            var F = this;
            if ((" " + E.className + " ").indexOf(" mousetrap ") > -1 || k(E, F.target))
                return !1;
            if ("composedPath"in N && typeof N.composedPath == "function") {
                var O = N.composedPath()[0];
                O !== N.target && (E = O)
            }
            return E.tagName == "INPUT" || E.tagName == "SELECT" || E.tagName == "TEXTAREA" || E.isContentEditable
        }
        ,
        B.prototype.handleKey = function() {
            var N = this;
            return N._handleKey.apply(N, arguments)
        }
        ,
        B.addKeycodes = function(N) {
            for (var E in N)
                N.hasOwnProperty(E) && (i[E] = N[E]);
            a = null
        }
        ,
        B.init = function() {
            var N = B(t);
            for (var E in N)
                E.charAt(0) !== "_" && (B[E] = function(F) {
                    return function() {
                        return N[F].apply(N, arguments)
                    }
                }(E))
        }
        ,
        B.init(),
        e.Mousetrap = B,
        typeof W2 < "u" && W2.exports && (W2.exports = B),
        typeof define == "function" && define.amd && define(function() {
            return B
        })
    }
    )(typeof window < "u" ? window : null, typeof window < "u" ? document : null)
}
);
var s_ = Object.prototype.toString;
function Bh(e) {
    switch (s_.call(e)) {
    case "[object Error]":
    case "[object Exception]":
    case "[object DOMException]":
        return !0;
    default:
        return Co(e, Error)
    }
}
function W0(e, t) {
    return s_.call(e) === `[object ${t}]`
}
function j0(e) {
    return W0(e, "ErrorEvent")
}
function W5(e) {
    return W0(e, "DOMError")
}
function m4(e) {
    return W0(e, "DOMException")
}
function pr(e) {
    return W0(e, "String")
}
function q0(e) {
    return typeof e == "object" && e !== null && "__sentry_template_string__"in e && "__sentry_template_values__"in e
}
function gl(e) {
    return e === null || q0(e) || typeof e != "object" && typeof e != "function"
}
function zs(e) {
    return W0(e, "Object")
}
function ml(e) {
    return typeof Event < "u" && Co(e, Event)
}
function v4(e) {
    return typeof Element < "u" && Co(e, Element)
}
function _4(e) {
    return W0(e, "RegExp")
}
function wo(e) {
    return !!(e && e.then && typeof e.then == "function")
}
function y4(e) {
    return zs(e) && "nativeEvent"in e && "preventDefault"in e && "stopPropagation"in e
}
function S4(e) {
    return typeof e == "number" && e !== e
}
function Co(e, t) {
    try {
        return e instanceof t
    } catch {
        return !1
    }
}
function Uh(e) {
    return !!(typeof e == "object" && e !== null && (e.__isVue || e._isVue))
}
function Eo(e, t=0) {
    return typeof e != "string" || t === 0 || e.length <= t ? e : `${e.slice(0, t)}...`
}
function j5(e, t) {
    if (!Array.isArray(e))
        return "";
    let n = [];
    for (let i = 0; i < e.length; i++) {
        let r = e[i];
        try {
            Uh(r) ? n.push("[VueViewModel]") : n.push(String(r))
        } catch {
            n.push("[value cannot be serialized]")
        }
    }
    return n.join(t)
}
function o_(e, t, n=!1) {
    return pr(e) ? _4(t) ? t.test(e) : pr(t) ? n ? e === t : e.includes(t) : !1 : !1
}
function z0(e, t=[], n=!1) {
    return t.some(i => o_(e, i, n))
}
function Hh(e, t, n=250, i, r, s, o) {
    if (!s.exception || !s.exception.values || !o || !Co(o.originalException, Error))
        return;
    let a = s.exception.values.length > 0 ? s.exception.values[s.exception.values.length - 1] : void 0;
    a && (s.exception.values = LP(b4(e, t, r, o.originalException, i, s.exception.values, a, 0), n))
}
function b4(e, t, n, i, r, s, o, a) {
    if (s.length >= n + 1)
        return s;
    let c = [...s];
    if (Co(i[r], Error)) {
        a_(o, a);
        let l = e(t, i[r])
          , u = c.length;
        c_(l, r, u, a),
        c = b4(e, t, n, i[r], r, [l, ...c], l, u)
    }
    return Array.isArray(i.errors) && i.errors.forEach( (l, u) => {
        if (Co(l, Error)) {
            a_(o, a);
            let h = e(t, l)
              , d = c.length;
            c_(h, `errors[${u}]`, d, a),
            c = b4(e, t, n, l, r, [h, ...c], h, d)
        }
    }
    ),
    c
}
function a_(e, t) {
    e.mechanism = e.mechanism || {
        type: "generic",
        handled: !0
    },
    e.mechanism = ve(C(C({}, e.mechanism), e.type === "AggregateError" && {
        is_exception_group: !0
    }), {
        exception_id: t
    })
}
function c_(e, t, n, i) {
    e.mechanism = e.mechanism || {
        type: "generic",
        handled: !0
    },
    e.mechanism = ve(C({}, e.mechanism), {
        type: "chained",
        source: t,
        exception_id: n,
        parent_id: i
    })
}
function LP(e, t) {
    return e.map(n => (n.value && (n.value = Eo(n.value, t)),
    n))
}
function q5(e) {
    return e && e.Math == Math ? e : void 0
}
var ft = typeof globalThis == "object" && q5(globalThis) || typeof window == "object" && q5(window) || typeof self == "object" && q5(self) || typeof global == "object" && q5(global) || function() {
    return this
}() || {};
function vl() {
    return ft
}
function Gh(e, t, n) {
    let i = n || ft
      , r = i.__SENTRY__ = i.__SENTRY__ || {};
    return r[e] || (r[e] = t())
}
var x4 = vl()
  , BP = 80;
function Vh(e, t={}) {
    if (!e)
        return "<unknown>";
    try {
        let n = e, i = 5, r = [], s = 0, o = 0, a = " > ", c = a.length, l, u = Array.isArray(t) ? t : t.keyAttrs, h = !Array.isArray(t) && t.maxStringLength || BP;
        for (; n && s++ < i && (l = UP(n, u),
        !(l === "html" || s > 1 && o + r.length * c + l.length >= h)); )
            r.push(l),
            o += l.length,
            n = n.parentNode;
        return r.reverse().join(a)
    } catch {
        return "<unknown>"
    }
}
function UP(e, t) {
    let n = e, i = [], r, s, o, a, c;
    if (!n || !n.tagName)
        return "";
    if (x4.HTMLElement && n instanceof HTMLElement && n.dataset && n.dataset.sentryComponent)
        return n.dataset.sentryComponent;
    i.push(n.tagName.toLowerCase());
    let l = t && t.length ? t.filter(h => n.getAttribute(h)).map(h => [h, n.getAttribute(h)]) : null;
    if (l && l.length)
        l.forEach(h => {
            i.push(`[${h[0]}="${h[1]}"]`)
        }
        );
    else if (n.id && i.push(`#${n.id}`),
    r = n.className,
    r && pr(r))
        for (s = r.split(/\s+/),
        c = 0; c < s.length; c++)
            i.push(`.${s[c]}`);
    let u = ["aria-label", "type", "name", "title", "alt"];
    for (c = 0; c < u.length; c++)
        o = u[c],
        a = n.getAttribute(o),
        a && i.push(`[${o}="${a}"]`);
    return i.join("")
}
function w4() {
    try {
        return x4.document.location.href
    } catch {
        return ""
    }
}
function C4(e) {
    if (!x4.HTMLElement)
        return null;
    let t = e
      , n = 5;
    for (let i = 0; i < n; i++) {
        if (!t)
            return null;
        if (t instanceof HTMLElement && t.dataset.sentryComponent)
            return t.dataset.sentryComponent;
        t = t.parentNode
    }
    return null
}
var To = typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__;
var HP = "Sentry Logger "
  , $h = ["debug", "info", "warn", "error", "log", "assert", "trace"]
  , X0 = {};
function mc(e) {
    if (!("console"in ft))
        return e();
    let t = ft.console
      , n = {}
      , i = Object.keys(X0);
    i.forEach(r => {
        let s = X0[r];
        n[r] = t[r],
        t[r] = s
    }
    );
    try {
        return e()
    } finally {
        i.forEach(r => {
            t[r] = n[r]
        }
        )
    }
}
function GP() {
    let e = !1
      , t = {
        enable: () => {
            e = !0
        }
        ,
        disable: () => {
            e = !1
        }
        ,
        isEnabled: () => e
    };
    return To ? $h.forEach(n => {
        t[n] = (...i) => {
            e && mc( () => {
                ft.console[n](`${HP}[${n}]:`, ...i)
            }
            )
        }
    }
    ) : $h.forEach(n => {
        t[n] = () => {}
    }
    ),
    t
}
var $e = GP();
var VP = /^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;
function $P(e) {
    return e === "http" || e === "https"
}
function Ts(e, t=!1) {
    let {host: n, path: i, pass: r, port: s, projectId: o, protocol: a, publicKey: c} = e;
    return `${a}://${c}${t && r ? `:${r}` : ""}@${n}${s ? `:${s}` : ""}/${i && `${i}/`}${o}`
}
function l_(e) {
    let t = VP.exec(e);
    if (!t) {
        mc( () => {
            console.error(`Invalid Sentry Dsn: ${e}`)
        }
        );
        return
    }
    let[n,i,r="",s,o="",a] = t.slice(1)
      , c = ""
      , l = a
      , u = l.split("/");
    if (u.length > 1 && (c = u.slice(0, -1).join("/"),
    l = u.pop()),
    l) {
        let h = l.match(/^\d+/);
        h && (l = h[0])
    }
    return u_({
        host: s,
        pass: r,
        path: c,
        projectId: l,
        port: o,
        protocol: n,
        publicKey: i
    })
}
function u_(e) {
    return {
        protocol: e.protocol,
        publicKey: e.publicKey || "",
        pass: e.pass || "",
        host: e.host,
        port: e.port || "",
        path: e.path || "",
        projectId: e.projectId
    }
}
function WP(e) {
    if (!To)
        return !0;
    let {port: t, projectId: n, protocol: i} = e;
    return ["protocol", "publicKey", "host", "projectId"].find(o => e[o] ? !1 : ($e.error(`Invalid Sentry Dsn: ${o} missing`),
    !0)) ? !1 : n.match(/^\d+$/) ? $P(i) ? t && isNaN(parseInt(t, 10)) ? ($e.error(`Invalid Sentry Dsn: Invalid port ${t}`),
    !1) : !0 : ($e.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),
    !1) : ($e.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),
    !1)
}
function z5(e) {
    let t = typeof e == "string" ? l_(e) : u_(e);
    if (!(!t || !WP(t)))
        return t
}
var rr = class extends Error {
    constructor(t, n="warn") {
        super(t),
        this.message = t,
        this.name = new.target.prototype.constructor.name,
        Object.setPrototypeOf(this, new.target.prototype),
        this.logLevel = n
    }
}
;
function Sn(e, t, n) {
    if (!(t in e))
        return;
    let i = e[t]
      , r = n(i);
    typeof r == "function" && X5(r, i),
    e[t] = r
}
function fa(e, t, n) {
    try {
        Object.defineProperty(e, t, {
            value: n,
            writable: !0,
            configurable: !0
        })
    } catch {
        To && $e.log(`Failed to add non-enumerable property "${t}" to object`, e)
    }
}
function X5(e, t) {
    try {
        let n = t.prototype || {};
        e.prototype = t.prototype = n,
        fa(e, "__sentry_original__", t)
    } catch {}
}
function _l(e) {
    return e.__sentry_original__
}
function T4(e) {
    return Object.keys(e).map(t => `${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")
}
function K5(e) {
    if (Bh(e))
        return C({
            message: e.message,
            name: e.name,
            stack: e.stack
        }, d_(e));
    if (ml(e)) {
        let t = C({
            type: e.type,
            target: h_(e.target),
            currentTarget: h_(e.currentTarget)
        }, d_(e));
        return typeof CustomEvent < "u" && Co(e, CustomEvent) && (t.detail = e.detail),
        t
    } else
        return e
}
function h_(e) {
    try {
        return v4(e) ? Vh(e) : Object.prototype.toString.call(e)
    } catch {
        return "<unknown>"
    }
}
function d_(e) {
    if (typeof e == "object" && e !== null) {
        let t = {};
        for (let n in e)
            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
        return t
    } else
        return {}
}
function O4(e, t=40) {
    let n = Object.keys(K5(e));
    if (n.sort(),
    !n.length)
        return "[object has no keys]";
    if (n[0].length >= t)
        return Eo(n[0], t);
    for (let i = n.length; i > 0; i--) {
        let r = n.slice(0, i).join(", ");
        if (!(r.length > t))
            return i === n.length ? r : Eo(r, t)
    }
    return ""
}
function gr(e) {
    return E4(e, new Map)
}
function E4(e, t) {
    if (jP(e)) {
        let n = t.get(e);
        if (n !== void 0)
            return n;
        let i = {};
        t.set(e, i);
        for (let r of Object.keys(e))
            typeof e[r] < "u" && (i[r] = E4(e[r], t));
        return i
    }
    if (Array.isArray(e)) {
        let n = t.get(e);
        if (n !== void 0)
            return n;
        let i = [];
        return t.set(e, i),
        e.forEach(r => {
            i.push(E4(r, t))
        }
        ),
        i
    }
    return e
}
function jP(e) {
    if (!zs(e))
        return !1;
    try {
        let t = Object.getPrototypeOf(e).constructor.name;
        return !t || t === "Object"
    } catch {
        return !0
    }
}
var g_ = 50
  , f_ = /\(error: (.*)\)/
  , p_ = /captureMessage|captureException/;
function Y5(...e) {
    let t = e.sort( (n, i) => n[0] - i[0]).map(n => n[1]);
    return (n, i=0) => {
        let r = []
          , s = n.split(`
`);
        for (let o = i; o < s.length; o++) {
            let a = s[o];
            if (a.length > 1024)
                continue;
            let c = f_.test(a) ? a.replace(f_, "$1") : a;
            if (!c.match(/\S*Error: /)) {
                for (let l of t) {
                    let u = l(c);
                    if (u) {
                        r.push(u);
                        break
                    }
                }
                if (r.length >= g_)
                    break
            }
        }
        return m_(r)
    }
}
function P4(e) {
    return Array.isArray(e) ? Y5(...e) : e
}
function m_(e) {
    if (!e.length)
        return [];
    let t = Array.from(e);
    return /sentryWrapped/.test(t[t.length - 1].function || "") && t.pop(),
    t.reverse(),
    p_.test(t[t.length - 1].function || "") && (t.pop(),
    p_.test(t[t.length - 1].function || "") && t.pop()),
    t.slice(0, g_).map(n => ve(C({}, n), {
        filename: n.filename || t[t.length - 1].filename,
        function: n.function || "?"
    }))
}
var M4 = "<anonymous>";
function Os(e) {
    try {
        return !e || typeof e != "function" ? M4 : e.name || M4
    } catch {
        return M4
    }
}
var Q5 = {}
  , v_ = {};
function Gr(e, t) {
    Q5[e] = Q5[e] || [],
    Q5[e].push(t)
}
function Vr(e, t) {
    v_[e] || (t(),
    v_[e] = !0)
}
function wi(e, t) {
    let n = e && Q5[e];
    if (n)
        for (let i of n)
            try {
                i(t)
            } catch (r) {
                To && $e.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Os(i)}
Error:`, r)
            }
}
function k4(e) {
    let t = "console";
    Gr(t, e),
    Vr(t, qP)
}
function qP() {
    "console"in ft && $h.forEach(function(e) {
        e in ft.console && Sn(ft.console, e, function(t) {
            return X0[e] = t,
            function(...n) {
                wi("console", {
                    args: n,
                    level: e
                });
                let r = X0[e];
                r && r.apply(ft.console, n)
            }
        })
    })
}
function hi() {
    let e = ft
      , t = e.crypto || e.msCrypto
      , n = () => Math.random() * 16;
    try {
        if (t && t.randomUUID)
            return t.randomUUID().replace(/-/g, "");
        t && t.getRandomValues && (n = () => {
            let i = new Uint8Array(1);
            return t.getRandomValues(i),
            i[0]
        }
        )
    } catch {}
    return ("10000000100040008000" + 1e11).replace(/[018]/g, i => (i ^ (n() & 15) >> i / 4).toString(16))
}
function __(e) {
    return e.exception && e.exception.values ? e.exception.values[0] : void 0
}
function Xs(e) {
    let {message: t, event_id: n} = e;
    if (t)
        return t;
    let i = __(e);
    return i ? i.type && i.value ? `${i.type}: ${i.value}` : i.type || i.value || n || "<unknown>" : n || "<unknown>"
}
function K0(e, t, n) {
    let i = e.exception = e.exception || {}
      , r = i.values = i.values || []
      , s = r[0] = r[0] || {};
    s.value || (s.value = t || ""),
    s.type || (s.type = n || "Error")
}
function pa(e, t) {
    let n = __(e);
    if (!n)
        return;
    let i = {
        type: "generic",
        handled: !0
    }
      , r = n.mechanism;
    if (n.mechanism = C(C(C({}, i), r), t),
    t && "data"in t) {
        let s = C(C({}, r && r.data), t.data);
        n.mechanism.data = s
    }
}
function J5(e) {
    if (e && e.__sentry_captured__)
        return !0;
    try {
        fa(e, "__sentry_captured__", !0)
    } catch {}
    return !1
}
function Wh(e) {
    return Array.isArray(e) ? e : [e]
}
var Y0 = ft, zP = 1e3, y_, A4, I4;
function R4(e) {
    let t = "dom";
    Gr(t, e),
    Vr(t, XP)
}
function XP() {
    if (!Y0.document)
        return;
    let e = wi.bind(null, "dom")
      , t = S_(e, !0);
    Y0.document.addEventListener("click", t, !1),
    Y0.document.addEventListener("keypress", t, !1),
    ["EventTarget", "Node"].forEach(n => {
        let i = Y0[n] && Y0[n].prototype;
        !i || !i.hasOwnProperty || !i.hasOwnProperty("addEventListener") || (Sn(i, "addEventListener", function(r) {
            return function(s, o, a) {
                if (s === "click" || s == "keypress")
                    try {
                        let c = this
                          , l = c.__sentry_instrumentation_handlers__ = c.__sentry_instrumentation_handlers__ || {}
                          , u = l[s] = l[s] || {
                            refCount: 0
                        };
                        if (!u.handler) {
                            let h = S_(e);
                            u.handler = h,
                            r.call(this, s, h, a)
                        }
                        u.refCount++
                    } catch {}
                return r.call(this, s, o, a)
            }
        }),
        Sn(i, "removeEventListener", function(r) {
            return function(s, o, a) {
                if (s === "click" || s == "keypress")
                    try {
                        let c = this
                          , l = c.__sentry_instrumentation_handlers__ || {}
                          , u = l[s];
                        u && (u.refCount--,
                        u.refCount <= 0 && (r.call(this, s, u.handler, a),
                        u.handler = void 0,
                        delete l[s]),
                        Object.keys(l).length === 0 && delete c.__sentry_instrumentation_handlers__)
                    } catch {}
                return r.call(this, s, o, a)
            }
        }))
    }
    )
}
function KP(e) {
    if (e.type !== A4)
        return !1;
    try {
        if (!e.target || e.target._sentryId !== I4)
            return !1
    } catch {}
    return !0
}
function YP(e, t) {
    return e !== "keypress" ? !1 : !t || !t.tagName ? !0 : !(t.tagName === "INPUT" || t.tagName === "TEXTAREA" || t.isContentEditable)
}
function S_(e, t=!1) {
    return n => {
        if (!n || n._sentryCaptured)
            return;
        let i = QP(n);
        if (YP(n.type, i))
            return;
        fa(n, "_sentryCaptured", !0),
        i && !i._sentryId && fa(i, "_sentryId", hi());
        let r = n.type === "keypress" ? "input" : n.type;
        KP(n) || (e({
            event: n,
            name: r,
            global: t
        }),
        A4 = n.type,
        I4 = i ? i._sentryId : void 0),
        clearTimeout(y_),
        y_ = Y0.setTimeout( () => {
            I4 = void 0,
            A4 = void 0
        }
        , zP)
    }
}
function QP(e) {
    try {
        return e.target
    } catch {
        return null
    }
}
var D4 = vl();
function Z5() {
    if (!("fetch"in D4))
        return !1;
    try {
        return new Headers,
        new Request("http://www.example.com"),
        new Response,
        !0
    } catch {
        return !1
    }
}
function jh(e) {
    return e && /^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())
}
function N4() {
    if (typeof EdgeRuntime == "string")
        return !0;
    if (!Z5())
        return !1;
    if (jh(D4.fetch))
        return !0;
    let e = !1
      , t = D4.document;
    if (t && typeof t.createElement == "function")
        try {
            let n = t.createElement("iframe");
            n.hidden = !0,
            t.head.appendChild(n),
            n.contentWindow && n.contentWindow.fetch && (e = jh(n.contentWindow.fetch)),
            t.head.removeChild(n)
        } catch (n) {
            To && $e.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ", n)
        }
    return e
}
function L4(e) {
    let t = "fetch";
    Gr(t, e),
    Vr(t, JP)
}
function JP() {
    N4() && Sn(ft, "fetch", function(e) {
        return function(...t) {
            let {method: n, url: i} = ZP(t)
              , r = {
                args: t,
                fetchData: {
                    method: n,
                    url: i
                },
                startTimestamp: Date.now()
            };
            return wi("fetch", C({}, r)),
            e.apply(ft, t).then(s => {
                let o = ve(C({}, r), {
                    endTimestamp: Date.now(),
                    response: s
                });
                return wi("fetch", o),
                s
            }
            , s => {
                let o = ve(C({}, r), {
                    endTimestamp: Date.now(),
                    error: s
                });
                throw wi("fetch", o),
                s
            }
            )
        }
    })
}
function F4(e, t) {
    return !!e && typeof e == "object" && !!e[t]
}
function b_(e) {
    return typeof e == "string" ? e : e ? F4(e, "url") ? e.url : e.toString ? e.toString() : "" : ""
}
function ZP(e) {
    if (e.length === 0)
        return {
            method: "GET",
            url: ""
        };
    if (e.length === 2) {
        let[n,i] = e;
        return {
            url: b_(n),
            method: F4(i, "method") ? String(i.method).toUpperCase() : "GET"
        }
    }
    let t = e[0];
    return {
        url: b_(t),
        method: F4(t, "method") ? String(t.method).toUpperCase() : "GET"
    }
}
var ef = null;
function B4(e) {
    let t = "error";
    Gr(t, e),
    Vr(t, ek)
}
function ek() {
    ef = ft.onerror,
    ft.onerror = function(e, t, n, i, r) {
        return wi("error", {
            column: i,
            error: r,
            line: n,
            msg: e,
            url: t
        }),
        ef && !ef.__SENTRY_LOADER__ ? ef.apply(this, arguments) : !1
    }
    ,
    ft.onerror.__SENTRY_INSTRUMENTED__ = !0
}
var tf = null;
function U4(e) {
    let t = "unhandledrejection";
    Gr(t, e),
    Vr(t, tk)
}
function tk() {
    tf = ft.onunhandledrejection,
    ft.onunhandledrejection = function(e) {
        return wi("unhandledrejection", e),
        tf && !tf.__SENTRY_LOADER__ ? tf.apply(this, arguments) : !0
    }
    ,
    ft.onunhandledrejection.__SENTRY_INSTRUMENTED__ = !0
}
var nf = vl();
function x_() {
    let e = nf.chrome
      , t = e && e.app && e.app.runtime
      , n = "history"in nf && !!nf.history.pushState && !!nf.history.replaceState;
    return !t && n
}
var qh = ft, rf;
function zh(e) {
    let t = "history";
    Gr(t, e),
    Vr(t, nk)
}
function nk() {
    if (!x_())
        return;
    let e = qh.onpopstate;
    qh.onpopstate = function(...n) {
        let i = qh.location.href
          , r = rf;
        if (rf = i,
        wi("history", {
            from: r,
            to: i
        }),
        e)
            try {
                return e.apply(this, n)
            } catch {}
    }
    ;
    function t(n) {
        return function(...i) {
            let r = i.length > 2 ? i[2] : void 0;
            if (r) {
                let s = rf
                  , o = String(r);
                rf = o,
                wi("history", {
                    from: s,
                    to: o
                })
            }
            return n.apply(this, i)
        }
    }
    Sn(qh.history, "pushState", t),
    Sn(qh.history, "replaceState", t)
}
var ik = ft
  , yl = "__sentry_xhr_v3__";
function H4(e) {
    let t = "xhr";
    Gr(t, e),
    Vr(t, rk)
}
function rk() {
    if (!ik.XMLHttpRequest)
        return;
    let e = XMLHttpRequest.prototype;
    Sn(e, "open", function(t) {
        return function(...n) {
            let i = Date.now()
              , r = pr(n[0]) ? n[0].toUpperCase() : void 0
              , s = sk(n[1]);
            if (!r || !s)
                return t.apply(this, n);
            this[yl] = {
                method: r,
                url: s,
                request_headers: {}
            },
            r === "POST" && s.match(/sentry_key/) && (this.__sentry_own_request__ = !0);
            let o = () => {
                let a = this[yl];
                if (a && this.readyState === 4) {
                    try {
                        a.status_code = this.status
                    } catch {}
                    let c = {
                        args: [r, s],
                        endTimestamp: Date.now(),
                        startTimestamp: i,
                        xhr: this
                    };
                    wi("xhr", c)
                }
            }
            ;
            return "onreadystatechange"in this && typeof this.onreadystatechange == "function" ? Sn(this, "onreadystatechange", function(a) {
                return function(...c) {
                    return o(),
                    a.apply(this, c)
                }
            }) : this.addEventListener("readystatechange", o),
            Sn(this, "setRequestHeader", function(a) {
                return function(...c) {
                    let[l,u] = c
                      , h = this[yl];
                    return h && pr(l) && pr(u) && (h.request_headers[l.toLowerCase()] = u),
                    a.apply(this, c)
                }
            }),
            t.apply(this, n)
        }
    }),
    Sn(e, "send", function(t) {
        return function(...n) {
            let i = this[yl];
            if (!i)
                return t.apply(this, n);
            n[0] !== void 0 && (i.body = n[0]);
            let r = {
                args: [i.method, i.url],
                startTimestamp: Date.now(),
                xhr: this
            };
            return wi("xhr", r),
            t.apply(this, n)
        }
    })
}
function sk(e) {
    if (pr(e))
        return e;
    try {
        return e.toString()
    } catch {}
}
function G4() {
    return "npm"
}
function w_() {
    let e = typeof WeakSet == "function"
      , t = e ? new WeakSet : [];
    function n(r) {
        if (e)
            return t.has(r) ? !0 : (t.add(r),
            !1);
        for (let s = 0; s < t.length; s++)
            if (t[s] === r)
                return !0;
        return t.push(r),
        !1
    }
    function i(r) {
        if (e)
            t.delete(r);
        else
            for (let s = 0; s < t.length; s++)
                if (t[s] === r) {
                    t.splice(s, 1);
                    break
                }
    }
    return [n, i]
}
function Ks(e, t=100, n=1 / 0) {
    try {
        return sf("", e, t, n)
    } catch (i) {
        return {
            ERROR: `**non-serializable** (${i})`
        }
    }
}
function of(e, t=3, n=100 * 1024) {
    let i = Ks(e, t);
    return lk(i) > n ? of(e, t - 1, n) : i
}
function sf(e, t, n=1 / 0, i=1 / 0, r=w_()) {
    let[s,o] = r;
    if (t == null || ["number", "boolean", "string"].includes(typeof t) && !S4(t))
        return t;
    let a = ok(e, t);
    if (!a.startsWith("[object "))
        return a;
    if (t.__sentry_skip_normalization__)
        return t;
    let c = typeof t.__sentry_override_normalization_depth__ == "number" ? t.__sentry_override_normalization_depth__ : n;
    if (c === 0)
        return a.replace("object ", "");
    if (s(t))
        return "[Circular ~]";
    let l = t;
    if (l && typeof l.toJSON == "function")
        try {
            let f = l.toJSON();
            return sf("", f, c - 1, i, r)
        } catch {}
    let u = Array.isArray(t) ? [] : {}
      , h = 0
      , d = K5(t);
    for (let f in d) {
        if (!Object.prototype.hasOwnProperty.call(d, f))
            continue;
        if (h >= i) {
            u[f] = "[MaxProperties ~]";
            break
        }
        let g = d[f];
        u[f] = sf(f, g, c - 1, i, r),
        h++
    }
    return o(t),
    u
}
function ok(e, t) {
    try {
        if (e === "domain" && t && typeof t == "object" && t._events)
            return "[Domain]";
        if (e === "domainEmitter")
            return "[DomainEmitter]";
        if (typeof global < "u" && t === global)
            return "[Global]";
        if (typeof window < "u" && t === window)
            return "[Window]";
        if (typeof document < "u" && t === document)
            return "[Document]";
        if (Uh(t))
            return "[VueViewModel]";
        if (y4(t))
            return "[SyntheticEvent]";
        if (typeof t == "number" && t !== t)
            return "[NaN]";
        if (typeof t == "function")
            return `[Function: ${Os(t)}]`;
        if (typeof t == "symbol")
            return `[${String(t)}]`;
        if (typeof t == "bigint")
            return `[BigInt: ${String(t)}]`;
        let n = ak(t);
        return /^HTML(\w*)Element$/.test(n) ? `[HTMLElement: ${n}]` : `[object ${n}]`
    } catch (n) {
        return `**non-serializable** (${n})`
    }
}
function ak(e) {
    let t = Object.getPrototypeOf(e);
    return t ? t.constructor.name : "null prototype"
}
function ck(e) {
    return ~-encodeURI(e).split(/%..|./).length
}
function lk(e) {
    return ck(JSON.stringify(e))
}
var ga;
(function(e) {
    e[e.PENDING = 0] = "PENDING";
    let n = 1;
    e[e.RESOLVED = n] = "RESOLVED";
    let i = 2;
    e[e.REJECTED = i] = "REJECTED"
}
)(ga || (ga = {}));
function Ys(e) {
    return new ds(t => {
        t(e)
    }
    )
}
function Sl(e) {
    return new ds( (t, n) => {
        n(e)
    }
    )
}
var ds = class e {
    constructor(t) {
        e.prototype.__init.call(this),
        e.prototype.__init2.call(this),
        e.prototype.__init3.call(this),
        e.prototype.__init4.call(this),
        this._state = ga.PENDING,
        this._handlers = [];
        try {
            t(this._resolve, this._reject)
        } catch (n) {
            this._reject(n)
        }
    }
    then(t, n) {
        return new e( (i, r) => {
            this._handlers.push([!1, s => {
                if (!t)
                    i(s);
                else
                    try {
                        i(t(s))
                    } catch (o) {
                        r(o)
                    }
            }
            , s => {
                if (!n)
                    r(s);
                else
                    try {
                        i(n(s))
                    } catch (o) {
                        r(o)
                    }
            }
            ]),
            this._executeHandlers()
        }
        )
    }
    catch(t) {
        return this.then(n => n, t)
    }
    finally(t) {
        return new e( (n, i) => {
            let r, s;
            return this.then(o => {
                s = !1,
                r = o,
                t && t()
            }
            , o => {
                s = !0,
                r = o,
                t && t()
            }
            ).then( () => {
                if (s) {
                    i(r);
                    return
                }
                n(r)
            }
            )
        }
        )
    }
    __init() {
        this._resolve = t => {
            this._setResult(ga.RESOLVED, t)
        }
    }
    __init2() {
        this._reject = t => {
            this._setResult(ga.REJECTED, t)
        }
    }
    __init3() {
        this._setResult = (t, n) => {
            if (this._state === ga.PENDING) {
                if (wo(n)) {
                    n.then(this._resolve, this._reject);
                    return
                }
                this._state = t,
                this._value = n,
                this._executeHandlers()
            }
        }
    }
    __init4() {
        this._executeHandlers = () => {
            if (this._state === ga.PENDING)
                return;
            let t = this._handlers.slice();
            this._handlers = [],
            t.forEach(n => {
                n[0] || (this._state === ga.RESOLVED && n[1](this._value),
                this._state === ga.REJECTED && n[2](this._value),
                n[0] = !0)
            }
            )
        }
    }
}
;
function V4(e) {
    let t = [];
    function n() {
        return e === void 0 || t.length < e
    }
    function i(o) {
        return t.splice(t.indexOf(o), 1)[0]
    }
    function r(o) {
        if (!n())
            return Sl(new rr("Not adding Promise because buffer limit was reached."));
        let a = o();
        return t.indexOf(a) === -1 && t.push(a),
        a.then( () => i(a)).then(null, () => i(a).then(null, () => {}
        )),
        a
    }
    function s(o) {
        return new ds( (a, c) => {
            let l = t.length;
            if (!l)
                return a(!0);
            let u = setTimeout( () => {
                o && o > 0 && a(!1)
            }
            , o);
            t.forEach(h => {
                Ys(h).then( () => {
                    --l || (clearTimeout(u),
                    a(!0))
                }
                , c)
            }
            )
        }
        )
    }
    return {
        $: t,
        add: r,
        drain: s
    }
}
function Xh(e) {
    if (!e)
        return {};
    let t = e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);
    if (!t)
        return {};
    let n = t[6] || ""
      , i = t[8] || "";
    return {
        host: t[4],
        path: t[5],
        protocol: t[2],
        search: n,
        hash: i,
        relative: t[5] + n + i
    }
}
var C_ = ["fatal", "error", "warning", "log", "info", "debug"];
function $4(e) {
    return e === "warn" ? "warning" : C_.includes(e) ? e : "log"
}
var E_ = 1e3;
function Oo() {
    return Date.now() / E_
}
function uk() {
    let {performance: e} = ft;
    if (!e || !e.now)
        return Oo;
    let t = Date.now() - e.now()
      , n = e.timeOrigin == null ? t : e.timeOrigin;
    return () => (n + e.now()) / E_
}
var bl = uk();
var Kh, hk = ( () => {
    let {performance: e} = ft;
    if (!e || !e.now) {
        Kh = "none";
        return
    }
    let t = 3600 * 1e3
      , n = e.now()
      , i = Date.now()
      , r = e.timeOrigin ? Math.abs(e.timeOrigin + n - i) : t
      , s = r < t
      , o = e.timing && e.timing.navigationStart
      , c = typeof o == "number" ? Math.abs(o + n - i) : t
      , l = c < t;
    return s || l ? r <= c ? (Kh = "timeOrigin",
    e.timeOrigin) : (Kh = "navigationStart",
    o) : (Kh = "dateNow",
    i)
}
)();
function Ms(e, t=[]) {
    return [e, t]
}
function j4(e, t) {
    let[n,i] = e;
    return [n, [...i, t]]
}
function af(e, t) {
    let n = e[1];
    for (let i of n) {
        let r = i[0].type;
        if (t(i, r))
            return !0
    }
    return !1
}
function W4(e, t) {
    return (t || new TextEncoder).encode(e)
}
function q4(e, t) {
    let[n,i] = e
      , r = JSON.stringify(n);
    function s(o) {
        typeof r == "string" ? r = typeof o == "string" ? r + o : [W4(r, t), o] : r.push(typeof o == "string" ? W4(o, t) : o)
    }
    for (let o of i) {
        let[a,c] = o;
        if (s(`
${JSON.stringify(a)}
`),
        typeof c == "string" || c instanceof Uint8Array)
            s(c);
        else {
            let l;
            try {
                l = JSON.stringify(c)
            } catch {
                l = JSON.stringify(Ks(c))
            }
            s(l)
        }
    }
    return typeof r == "string" ? r : dk(r)
}
function dk(e) {
    let t = e.reduce( (r, s) => r + s.length, 0)
      , n = new Uint8Array(t)
      , i = 0;
    for (let r of e)
        n.set(r, i),
        i += r.length;
    return n
}
function z4(e, t) {
    let n = typeof e.data == "string" ? W4(e.data, t) : e.data;
    return [gr({
        type: "attachment",
        length: n.length,
        filename: e.filename,
        content_type: e.contentType,
        attachment_type: e.attachmentType
    }), n]
}
var fk = {
    session: "session",
    sessions: "session",
    attachment: "attachment",
    transaction: "transaction",
    event: "error",
    client_report: "internal",
    user_report: "default",
    profile: "profile",
    replay_event: "replay",
    replay_recording: "replay",
    check_in: "monitor",
    feedback: "feedback",
    span: "span",
    statsd: "metric_bucket"
};
function cf(e) {
    return fk[e]
}
function lf(e) {
    if (!e || !e.sdk)
        return;
    let {name: t, version: n} = e.sdk;
    return {
        name: t,
        version: n
    }
}
function X4(e, t, n, i) {
    let r = e.sdkProcessingMetadata && e.sdkProcessingMetadata.dynamicSamplingContext;
    return C(C(C({
        event_id: e.event_id,
        sent_at: new Date().toISOString()
    }, t && {
        sdk: t
    }), !!n && i && {
        dsn: Ts(i)
    }), r && {
        trace: gr(C({}, r))
    })
}
function K4(e, t, n) {
    let i = [{
        type: "client_report"
    }, {
        timestamp: n || Oo(),
        discarded_events: e
    }];
    return Ms(t ? {
        dsn: t
    } : {}, [i])
}
function T_(e, t=Date.now()) {
    let n = parseInt(`${e}`, 10);
    if (!isNaN(n))
        return n * 1e3;
    let i = Date.parse(`${e}`);
    return isNaN(i) ? 6e4 : i - t
}
function O_(e, t) {
    return e[t] || e.all || 0
}
function Y4(e, t, n=Date.now()) {
    return O_(e, t) > n
}
function Q4(e, {statusCode: t, headers: n}, i=Date.now()) {
    let r = C({}, e)
      , s = n && n["x-sentry-rate-limits"]
      , o = n && n["retry-after"];
    if (s)
        for (let a of s.trim().split(",")) {
            let[c,l,,,u] = a.split(":", 5)
              , h = parseInt(c, 10)
              , d = (isNaN(h) ? 60 : h) * 1e3;
            if (!l)
                r.all = i + d;
            else
                for (let f of l.split(";"))
                    f === "metric_bucket" ? (!u || u.split(";").includes("custom")) && (r[f] = i + d) : r[f] = i + d
        }
    else
        o ? r.all = i + T_(o, i) : t === 429 && (r.all = i + 60 * 1e3);
    return r
}
function M_(e, t) {
    return e(t.stack || "", 1)
}
function J4(e, t) {
    let n = {
        type: t.name || t.constructor.name,
        value: t.message
    }
      , i = M_(e, t);
    return i.length && (n.stacktrace = {
        frames: i
    }),
    n
}
var Gt = typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__;
var vc = "production";
function Yh() {
    return Gh("globalEventProcessors", () => [])
}
function Z4(e) {
    Yh().push(e)
}
function Q0(e, t, n, i=0) {
    return new ds( (r, s) => {
        let o = e[i];
        if (t === null || typeof o != "function")
            r(t);
        else {
            let a = o(C({}, t), n);
            Gt && o.id && a === null && $e.log(`Event processor "${o.id}" dropped event`),
            wo(a) ? a.then(c => Q0(e, c, n, i + 1).then(r)).then(null, s) : Q0(e, a, n, i + 1).then(r).then(null, s)
        }
    }
    )
}
function uf(e) {
    let t = bl()
      , n = {
        sid: hi(),
        init: !0,
        timestamp: t,
        started: t,
        duration: 0,
        status: "ok",
        errors: 0,
        ignoreDuration: !1,
        toJSON: () => gk(n)
    };
    return e && Qs(n, e),
    n
}
function Qs(e, t={}) {
    if (t.user && (!e.ipAddress && t.user.ip_address && (e.ipAddress = t.user.ip_address),
    !e.did && !t.did && (e.did = t.user.id || t.user.email || t.user.username)),
    e.timestamp = t.timestamp || bl(),
    t.abnormal_mechanism && (e.abnormal_mechanism = t.abnormal_mechanism),
    t.ignoreDuration && (e.ignoreDuration = t.ignoreDuration),
    t.sid && (e.sid = t.sid.length === 32 ? t.sid : hi()),
    t.init !== void 0 && (e.init = t.init),
    !e.did && t.did && (e.did = `${t.did}`),
    typeof t.started == "number" && (e.started = t.started),
    e.ignoreDuration)
        e.duration = void 0;
    else if (typeof t.duration == "number")
        e.duration = t.duration;
    else {
        let n = e.timestamp - e.started;
        e.duration = n >= 0 ? n : 0
    }
    t.release && (e.release = t.release),
    t.environment && (e.environment = t.environment),
    !e.ipAddress && t.ipAddress && (e.ipAddress = t.ipAddress),
    !e.userAgent && t.userAgent && (e.userAgent = t.userAgent),
    typeof t.errors == "number" && (e.errors = t.errors),
    t.status && (e.status = t.status)
}
function hf(e, t) {
    let n = {};
    t ? n = {
        status: t
    } : e.status === "ok" && (n = {
        status: "exited"
    }),
    Qs(e, n)
}
function gk(e) {
    return gr({
        sid: `${e.sid}`,
        init: e.init,
        started: new Date(e.started * 1e3).toISOString(),
        timestamp: new Date(e.timestamp * 1e3).toISOString(),
        status: e.status,
        errors: e.errors,
        did: typeof e.did == "number" || typeof e.did == "string" ? `${e.did}` : void 0,
        duration: e.duration,
        abnormal_mechanism: e.abnormal_mechanism,
        attrs: {
            release: e.release,
            environment: e.environment,
            ip_address: e.ipAddress,
            user_agent: e.userAgent
        }
    })
}
var mk = 1;
function P_(e) {
    let {spanId: t, traceId: n} = e.spanContext()
      , {data: i, op: r, parent_span_id: s, status: o, tags: a, origin: c} = ma(e);
    return gr({
        data: i,
        op: r,
        parent_span_id: s,
        span_id: t,
        status: o,
        tags: a,
        trace_id: n,
        origin: c
    })
}
function ma(e) {
    return vk(e) ? e.getSpanJSON() : typeof e.toJSON == "function" ? e.toJSON() : {}
}
function vk(e) {
    return typeof e.getSpanJSON == "function"
}
function k_(e) {
    let {traceFlags: t} = e.spanContext();
    return !!(t & mk)
}
function I_(e, t, n, i, r, s) {
    let {normalizeDepth: o=3, normalizeMaxBreadth: a=1e3} = e
      , c = ve(C({}, t), {
        event_id: t.event_id || n.event_id || hi(),
        timestamp: t.timestamp || Oo()
    })
      , l = n.integrations || e.integrations.map(v => v.name);
    _k(c, e),
    bk(c, l),
    t.type === void 0 && yk(c, e.stackParser);
    let u = wk(i, n.captureContext);
    n.mechanism && pa(c, n.mechanism);
    let h = r && r.getEventProcessors ? r.getEventProcessors() : []
      , d = D_().getScopeData();
    if (s) {
        let v = s.getScopeData();
        e6(d, v)
    }
    if (u) {
        let v = u.getScopeData();
        e6(d, v)
    }
    let f = [...n.attachments || [], ...d.attachments];
    f.length && (n.attachments = f),
    df(c, d);
    let g = [...h, ...Yh(), ...d.eventProcessors];
    return Q0(g, c, n).then(v => (v && Sk(v),
    typeof o == "number" && o > 0 ? xk(v, o, a) : v))
}
function _k(e, t) {
    let {environment: n, release: i, dist: r, maxValueLength: s=250} = t;
    "environment"in e || (e.environment = "environment"in t ? n : vc),
    e.release === void 0 && i !== void 0 && (e.release = i),
    e.dist === void 0 && r !== void 0 && (e.dist = r),
    e.message && (e.message = Eo(e.message, s));
    let o = e.exception && e.exception.values && e.exception.values[0];
    o && o.value && (o.value = Eo(o.value, s));
    let a = e.request;
    a && a.url && (a.url = Eo(a.url, s))
}
var A_ = new WeakMap;
function yk(e, t) {
    let n = ft._sentryDebugIds;
    if (!n)
        return;
    let i, r = A_.get(t);
    r ? i = r : (i = new Map,
    A_.set(t, i));
    let s = Object.keys(n).reduce( (o, a) => {
        let c, l = i.get(a);
        l ? c = l : (c = t(a),
        i.set(a, c));
        for (let u = c.length - 1; u >= 0; u--) {
            let h = c[u];
            if (h.filename) {
                o[h.filename] = n[a];
                break
            }
        }
        return o
    }
    , {});
    try {
        e.exception.values.forEach(o => {
            o.stacktrace.frames.forEach(a => {
                a.filename && (a.debug_id = s[a.filename])
            }
            )
        }
        )
    } catch {}
}
function Sk(e) {
    let t = {};
    try {
        e.exception.values.forEach(i => {
            i.stacktrace.frames.forEach(r => {
                r.debug_id && (r.abs_path ? t[r.abs_path] = r.debug_id : r.filename && (t[r.filename] = r.debug_id),
                delete r.debug_id)
            }
            )
        }
        )
    } catch {}
    if (Object.keys(t).length === 0)
        return;
    e.debug_meta = e.debug_meta || {},
    e.debug_meta.images = e.debug_meta.images || [];
    let n = e.debug_meta.images;
    Object.keys(t).forEach(i => {
        n.push({
            type: "sourcemap",
            code_file: i,
            debug_id: t[i]
        })
    }
    )
}
function bk(e, t) {
    t.length > 0 && (e.sdk = e.sdk || {},
    e.sdk.integrations = [...e.sdk.integrations || [], ...t])
}
function xk(e, t, n) {
    if (!e)
        return null;
    let i = C(C(C(C(C({}, e), e.breadcrumbs && {
        breadcrumbs: e.breadcrumbs.map(r => C(C({}, r), r.data && {
            data: Ks(r.data, t, n)
        }))
    }), e.user && {
        user: Ks(e.user, t, n)
    }), e.contexts && {
        contexts: Ks(e.contexts, t, n)
    }), e.extra && {
        extra: Ks(e.extra, t, n)
    });
    return e.contexts && e.contexts.trace && i.contexts && (i.contexts.trace = e.contexts.trace,
    e.contexts.trace.data && (i.contexts.trace.data = Ks(e.contexts.trace.data, t, n))),
    e.spans && (i.spans = e.spans.map(r => {
        let s = ma(r).data;
        return s && (r.data = Ks(s, t, n)),
        r
    }
    )),
    i
}
function wk(e, t) {
    if (!t)
        return e;
    let n = e ? e.clone() : new Mo;
    return n.update(t),
    n
}
function R_(e) {
    if (e)
        return Ck(e) ? {
            captureContext: e
        } : Tk(e) ? {
            captureContext: e
        } : e
}
function Ck(e) {
    return e instanceof Mo || typeof e == "function"
}
var Ek = ["user", "level", "extra", "contexts", "tags", "fingerprint", "requestSession", "propagationContext"];
function Tk(e) {
    return Object.keys(e).some(t => Ek.includes(t))
}
function xl(e, t) {
    return mr().captureException(e, R_(t))
}
function Qh(e, t) {
    return mr().captureEvent(e, t)
}
function Po(e, t) {
    mr().addBreadcrumb(e, t)
}
function ff(e, t) {
    mr().setContext(e, t)
}
function pf(...e) {
    let t = mr();
    if (e.length === 2) {
        let[n,i] = e;
        return n ? t.withScope( () => (t.getStackTop().scope = n,
        i(n))) : t.withScope(i)
    }
    return t.withScope(e[0])
}
function Pn() {
    return mr().getClient()
}
function ko() {
    return mr().getScope()
}
function Jh(e) {
    let t = Pn()
      , n = J0()
      , i = ko()
      , {release: r, environment: s=vc} = t && t.getOptions() || {}
      , {userAgent: o} = ft.navigator || {}
      , a = uf(C(C({
        release: r,
        environment: s,
        user: i.getUser() || n.getUser()
    }, o && {
        userAgent: o
    }), e))
      , c = n.getSession();
    return c && c.status === "ok" && Qs(c, {
        status: "exited"
    }),
    gf(),
    n.setSession(a),
    i.setSession(a),
    a
}
function gf() {
    let e = J0()
      , t = ko()
      , n = t.getSession() || e.getSession();
    n && hf(n),
    N_(),
    e.setSession(),
    t.setSession()
}
function N_() {
    let e = J0()
      , t = ko()
      , n = Pn()
      , i = t.getSession() || e.getSession();
    i && n && n.captureSession && n.captureSession(i)
}
function Zh(e=!1) {
    if (e) {
        gf();
        return
    }
    N_()
}
function mf(e) {
    return e.transaction
}
function t6(e, t, n) {
    let i = t.getOptions()
      , {publicKey: r} = t.getDsn() || {}
      , {segment: s} = n && n.getUser() || {}
      , o = gr({
        environment: i.environment || vc,
        release: i.release,
        user_segment: s,
        public_key: r,
        trace_id: e
    });
    return t.emit && t.emit("createDsc", o),
    o
}
function F_(e) {
    let t = Pn();
    if (!t)
        return {};
    let n = t6(ma(e).trace_id || "", t, ko())
      , i = mf(e);
    if (!i)
        return n;
    let r = i && i._frozenDynamicSamplingContext;
    if (r)
        return r;
    let {sampleRate: s, source: o} = i.metadata;
    s != null && (n.sample_rate = `${s}`);
    let a = ma(i);
    return o && o !== "url" && (n.transaction = a.description),
    n.sampled = String(k_(i)),
    t.emit && t.emit("createDsc", n),
    n
}
function df(e, t) {
    let {fingerprint: n, span: i, breadcrumbs: r, sdkProcessingMetadata: s} = t;
    Ok(e, t),
    i && kk(e, i),
    Ak(e, n),
    Mk(e, r),
    Pk(e, s)
}
function e6(e, t) {
    let {extra: n, tags: i, user: r, contexts: s, level: o, sdkProcessingMetadata: a, breadcrumbs: c, fingerprint: l, eventProcessors: u, attachments: h, propagationContext: d, transactionName: f, span: g} = t;
    ed(e, "extra", n),
    ed(e, "tags", i),
    ed(e, "user", r),
    ed(e, "contexts", s),
    ed(e, "sdkProcessingMetadata", a),
    o && (e.level = o),
    f && (e.transactionName = f),
    g && (e.span = g),
    c.length && (e.breadcrumbs = [...e.breadcrumbs, ...c]),
    l.length && (e.fingerprint = [...e.fingerprint, ...l]),
    u.length && (e.eventProcessors = [...e.eventProcessors, ...u]),
    h.length && (e.attachments = [...e.attachments, ...h]),
    e.propagationContext = C(C({}, e.propagationContext), d)
}
function ed(e, t, n) {
    if (n && Object.keys(n).length) {
        e[t] = C({}, e[t]);
        for (let i in n)
            Object.prototype.hasOwnProperty.call(n, i) && (e[t][i] = n[i])
    }
}
function Ok(e, t) {
    let {extra: n, tags: i, user: r, contexts: s, level: o, transactionName: a} = t
      , c = gr(n);
    c && Object.keys(c).length && (e.extra = C(C({}, c), e.extra));
    let l = gr(i);
    l && Object.keys(l).length && (e.tags = C(C({}, l), e.tags));
    let u = gr(r);
    u && Object.keys(u).length && (e.user = C(C({}, u), e.user));
    let h = gr(s);
    h && Object.keys(h).length && (e.contexts = C(C({}, h), e.contexts)),
    o && (e.level = o),
    a && (e.transaction = a)
}
function Mk(e, t) {
    let n = [...e.breadcrumbs || [], ...t];
    e.breadcrumbs = n.length ? n : void 0
}
function Pk(e, t) {
    e.sdkProcessingMetadata = C(C({}, e.sdkProcessingMetadata), t)
}
function kk(e, t) {
    e.contexts = C({
        trace: P_(t)
    }, e.contexts);
    let n = mf(t);
    if (n) {
        e.sdkProcessingMetadata = C({
            dynamicSamplingContext: F_(t)
        }, e.sdkProcessingMetadata);
        let i = ma(n).description;
        i && (e.tags = C({
            transaction: i
        }, e.tags))
    }
}
function Ak(e, t) {
    e.fingerprint = e.fingerprint ? Wh(e.fingerprint) : [],
    t && (e.fingerprint = e.fingerprint.concat(t)),
    e.fingerprint && !e.fingerprint.length && delete e.fingerprint
}
var Ik = 100, n6, Mo = class e {
    constructor() {
        this._notifyingListeners = !1,
        this._scopeListeners = [],
        this._eventProcessors = [],
        this._breadcrumbs = [],
        this._attachments = [],
        this._user = {},
        this._tags = {},
        this._extra = {},
        this._contexts = {},
        this._sdkProcessingMetadata = {},
        this._propagationContext = L_()
    }
    static clone(t) {
        return t ? t.clone() : new e
    }
    clone() {
        let t = new e;
        return t._breadcrumbs = [...this._breadcrumbs],
        t._tags = C({}, this._tags),
        t._extra = C({}, this._extra),
        t._contexts = C({}, this._contexts),
        t._user = this._user,
        t._level = this._level,
        t._span = this._span,
        t._session = this._session,
        t._transactionName = this._transactionName,
        t._fingerprint = this._fingerprint,
        t._eventProcessors = [...this._eventProcessors],
        t._requestSession = this._requestSession,
        t._attachments = [...this._attachments],
        t._sdkProcessingMetadata = C({}, this._sdkProcessingMetadata),
        t._propagationContext = C({}, this._propagationContext),
        t._client = this._client,
        t
    }
    setClient(t) {
        this._client = t
    }
    getClient() {
        return this._client
    }
    addScopeListener(t) {
        this._scopeListeners.push(t)
    }
    addEventProcessor(t) {
        return this._eventProcessors.push(t),
        this
    }
    setUser(t) {
        return this._user = t || {
            email: void 0,
            id: void 0,
            ip_address: void 0,
            segment: void 0,
            username: void 0
        },
        this._session && Qs(this._session, {
            user: t
        }),
        this._notifyScopeListeners(),
        this
    }
    getUser() {
        return this._user
    }
    getRequestSession() {
        return this._requestSession
    }
    setRequestSession(t) {
        return this._requestSession = t,
        this
    }
    setTags(t) {
        return this._tags = C(C({}, this._tags), t),
        this._notifyScopeListeners(),
        this
    }
    setTag(t, n) {
        return this._tags = ve(C({}, this._tags), {
            [t]: n
        }),
        this._notifyScopeListeners(),
        this
    }
    setExtras(t) {
        return this._extra = C(C({}, this._extra), t),
        this._notifyScopeListeners(),
        this
    }
    setExtra(t, n) {
        return this._extra = ve(C({}, this._extra), {
            [t]: n
        }),
        this._notifyScopeListeners(),
        this
    }
    setFingerprint(t) {
        return this._fingerprint = t,
        this._notifyScopeListeners(),
        this
    }
    setLevel(t) {
        return this._level = t,
        this._notifyScopeListeners(),
        this
    }
    setTransactionName(t) {
        return this._transactionName = t,
        this._notifyScopeListeners(),
        this
    }
    setContext(t, n) {
        return n === null ? delete this._contexts[t] : this._contexts[t] = n,
        this._notifyScopeListeners(),
        this
    }
    setSpan(t) {
        return this._span = t,
        this._notifyScopeListeners(),
        this
    }
    getSpan() {
        return this._span
    }
    getTransaction() {
        let t = this._span;
        return t && t.transaction
    }
    setSession(t) {
        return t ? this._session = t : delete this._session,
        this._notifyScopeListeners(),
        this
    }
    getSession() {
        return this._session
    }
    update(t) {
        if (!t)
            return this;
        let n = typeof t == "function" ? t(this) : t;
        if (n instanceof e) {
            let i = n.getScopeData();
            this._tags = C(C({}, this._tags), i.tags),
            this._extra = C(C({}, this._extra), i.extra),
            this._contexts = C(C({}, this._contexts), i.contexts),
            i.user && Object.keys(i.user).length && (this._user = i.user),
            i.level && (this._level = i.level),
            i.fingerprint.length && (this._fingerprint = i.fingerprint),
            n.getRequestSession() && (this._requestSession = n.getRequestSession()),
            i.propagationContext && (this._propagationContext = i.propagationContext)
        } else if (zs(n)) {
            let i = t;
            this._tags = C(C({}, this._tags), i.tags),
            this._extra = C(C({}, this._extra), i.extra),
            this._contexts = C(C({}, this._contexts), i.contexts),
            i.user && (this._user = i.user),
            i.level && (this._level = i.level),
            i.fingerprint && (this._fingerprint = i.fingerprint),
            i.requestSession && (this._requestSession = i.requestSession),
            i.propagationContext && (this._propagationContext = i.propagationContext)
        }
        return this
    }
    clear() {
        return this._breadcrumbs = [],
        this._tags = {},
        this._extra = {},
        this._user = {},
        this._contexts = {},
        this._level = void 0,
        this._transactionName = void 0,
        this._fingerprint = void 0,
        this._requestSession = void 0,
        this._span = void 0,
        this._session = void 0,
        this._notifyScopeListeners(),
        this._attachments = [],
        this._propagationContext = L_(),
        this
    }
    addBreadcrumb(t, n) {
        let i = typeof n == "number" ? n : Ik;
        if (i <= 0)
            return this;
        let r = C({
            timestamp: Oo()
        }, t)
          , s = this._breadcrumbs;
        return s.push(r),
        this._breadcrumbs = s.length > i ? s.slice(-i) : s,
        this._notifyScopeListeners(),
        this
    }
    getLastBreadcrumb() {
        return this._breadcrumbs[this._breadcrumbs.length - 1]
    }
    clearBreadcrumbs() {
        return this._breadcrumbs = [],
        this._notifyScopeListeners(),
        this
    }
    addAttachment(t) {
        return this._attachments.push(t),
        this
    }
    getAttachments() {
        return this.getScopeData().attachments
    }
    clearAttachments() {
        return this._attachments = [],
        this
    }
    getScopeData() {
        let {_breadcrumbs: t, _attachments: n, _contexts: i, _tags: r, _extra: s, _user: o, _level: a, _fingerprint: c, _eventProcessors: l, _propagationContext: u, _sdkProcessingMetadata: h, _transactionName: d, _span: f} = this;
        return {
            breadcrumbs: t,
            attachments: n,
            contexts: i,
            tags: r,
            extra: s,
            user: o,
            level: a,
            fingerprint: c || [],
            eventProcessors: l,
            propagationContext: u,
            sdkProcessingMetadata: h,
            transactionName: d,
            span: f
        }
    }
    applyToEvent(t, n={}, i=[]) {
        df(t, this.getScopeData());
        let r = [...i, ...Yh(), ...this._eventProcessors];
        return Q0(r, t, n)
    }
    setSDKProcessingMetadata(t) {
        return this._sdkProcessingMetadata = C(C({}, this._sdkProcessingMetadata), t),
        this
    }
    setPropagationContext(t) {
        return this._propagationContext = t,
        this
    }
    getPropagationContext() {
        return this._propagationContext
    }
    captureException(t, n) {
        let i = n && n.event_id ? n.event_id : hi();
        if (!this._client)
            return $e.warn("No client configured on scope - will not capture exception!"),
            i;
        let r = new Error("Sentry syntheticException");
        return this._client.captureException(t, ve(C({
            originalException: t,
            syntheticException: r
        }, n), {
            event_id: i
        }), this),
        i
    }
    captureMessage(t, n, i) {
        let r = i && i.event_id ? i.event_id : hi();
        if (!this._client)
            return $e.warn("No client configured on scope - will not capture message!"),
            r;
        let s = new Error(t);
        return this._client.captureMessage(t, n, ve(C({
            originalException: t,
            syntheticException: s
        }, i), {
            event_id: r
        }), this),
        r
    }
    captureEvent(t, n) {
        let i = n && n.event_id ? n.event_id : hi();
        return this._client ? (this._client.captureEvent(t, ve(C({}, n), {
            event_id: i
        }), this),
        i) : ($e.warn("No client configured on scope - will not capture event!"),
        i)
    }
    _notifyScopeListeners() {
        this._notifyingListeners || (this._notifyingListeners = !0,
        this._scopeListeners.forEach(t => {
            t(this)
        }
        ),
        this._notifyingListeners = !1)
    }
}
;
function D_() {
    return n6 || (n6 = new Mo),
    n6
}
function L_() {
    return {
        traceId: hi(),
        spanId: hi().substring(16)
    }
}
var Z0 = "7.114.0";
var B_ = parseFloat(Z0)
  , Rk = 100
  , td = class {
    constructor(t, n, i, r=B_) {
        this._version = r;
        let s;
        n ? s = n : (s = new Mo,
        s.setClient(t));
        let o;
        i ? o = i : (o = new Mo,
        o.setClient(t)),
        this._stack = [{
            scope: s
        }],
        t && this.bindClient(t),
        this._isolationScope = o
    }
    isOlderThan(t) {
        return this._version < t
    }
    bindClient(t) {
        let n = this.getStackTop();
        n.client = t,
        n.scope.setClient(t),
        t && t.setupIntegrations && t.setupIntegrations()
    }
    pushScope() {
        let t = this.getScope().clone();
        return this.getStack().push({
            client: this.getClient(),
            scope: t
        }),
        t
    }
    popScope() {
        return this.getStack().length <= 1 ? !1 : !!this.getStack().pop()
    }
    withScope(t) {
        let n = this.pushScope(), i;
        try {
            i = t(n)
        } catch (r) {
            throw this.popScope(),
            r
        }
        return wo(i) ? i.then(r => (this.popScope(),
        r), r => {
            throw this.popScope(),
            r
        }
        ) : (this.popScope(),
        i)
    }
    getClient() {
        return this.getStackTop().client
    }
    getScope() {
        return this.getStackTop().scope
    }
    getIsolationScope() {
        return this._isolationScope
    }
    getStack() {
        return this._stack
    }
    getStackTop() {
        return this._stack[this._stack.length - 1]
    }
    captureException(t, n) {
        let i = this._lastEventId = n && n.event_id ? n.event_id : hi()
          , r = new Error("Sentry syntheticException");
        return this.getScope().captureException(t, ve(C({
            originalException: t,
            syntheticException: r
        }, n), {
            event_id: i
        })),
        i
    }
    captureMessage(t, n, i) {
        let r = this._lastEventId = i && i.event_id ? i.event_id : hi()
          , s = new Error(t);
        return this.getScope().captureMessage(t, n, ve(C({
            originalException: t,
            syntheticException: s
        }, i), {
            event_id: r
        })),
        r
    }
    captureEvent(t, n) {
        let i = n && n.event_id ? n.event_id : hi();
        return t.type || (this._lastEventId = i),
        this.getScope().captureEvent(t, ve(C({}, n), {
            event_id: i
        })),
        i
    }
    lastEventId() {
        return this._lastEventId
    }
    addBreadcrumb(t, n) {
        let {scope: i, client: r} = this.getStackTop();
        if (!r)
            return;
        let {beforeBreadcrumb: s=null, maxBreadcrumbs: o=Rk} = r.getOptions && r.getOptions() || {};
        if (o <= 0)
            return;
        let a = Oo()
          , c = C({
            timestamp: a
        }, t)
          , l = s ? mc( () => s(c, n)) : c;
        l !== null && (r.emit && r.emit("beforeAddBreadcrumb", l, n),
        i.addBreadcrumb(l, o))
    }
    setUser(t) {
        this.getScope().setUser(t),
        this.getIsolationScope().setUser(t)
    }
    setTags(t) {
        this.getScope().setTags(t),
        this.getIsolationScope().setTags(t)
    }
    setExtras(t) {
        this.getScope().setExtras(t),
        this.getIsolationScope().setExtras(t)
    }
    setTag(t, n) {
        this.getScope().setTag(t, n),
        this.getIsolationScope().setTag(t, n)
    }
    setExtra(t, n) {
        this.getScope().setExtra(t, n),
        this.getIsolationScope().setExtra(t, n)
    }
    setContext(t, n) {
        this.getScope().setContext(t, n),
        this.getIsolationScope().setContext(t, n)
    }
    configureScope(t) {
        let {scope: n, client: i} = this.getStackTop();
        i && t(n)
    }
    run(t) {
        let n = i6(this);
        try {
            t(this)
        } finally {
            i6(n)
        }
    }
    getIntegration(t) {
        let n = this.getClient();
        if (!n)
            return null;
        try {
            return n.getIntegration(t)
        } catch {
            return Gt && $e.warn(`Cannot retrieve integration ${t.id} from the current Hub`),
            null
        }
    }
    startTransaction(t, n) {
        let i = this._callExtensionMethod("startTransaction", t, n);
        return Gt && !i && (this.getClient() ? $e.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`) : $e.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),
        i
    }
    traceHeaders() {
        return this._callExtensionMethod("traceHeaders")
    }
    captureSession(t=!1) {
        if (t)
            return this.endSession();
        this._sendSessionUpdate()
    }
    endSession() {
        let n = this.getStackTop().scope
          , i = n.getSession();
        i && hf(i),
        this._sendSessionUpdate(),
        n.setSession()
    }
    startSession(t) {
        let {scope: n, client: i} = this.getStackTop()
          , {release: r, environment: s=vc} = i && i.getOptions() || {}
          , {userAgent: o} = ft.navigator || {}
          , a = uf(C(C({
            release: r,
            environment: s,
            user: n.getUser()
        }, o && {
            userAgent: o
        }), t))
          , c = n.getSession && n.getSession();
        return c && c.status === "ok" && Qs(c, {
            status: "exited"
        }),
        this.endSession(),
        n.setSession(a),
        a
    }
    shouldSendDefaultPii() {
        let t = this.getClient()
          , n = t && t.getOptions();
        return !!(n && n.sendDefaultPii)
    }
    _sendSessionUpdate() {
        let {scope: t, client: n} = this.getStackTop()
          , i = t.getSession();
        i && n && n.captureSession && n.captureSession(i)
    }
    _callExtensionMethod(t, ...n) {
        let r = _f().__SENTRY__;
        if (r && r.extensions && typeof r.extensions[t] == "function")
            return r.extensions[t].apply(this, n);
        Gt && $e.warn(`Extension method ${t} couldn't be found, doing nothing.`)
    }
}
;
function _f() {
    return ft.__SENTRY__ = ft.__SENTRY__ || {
        extensions: {},
        hub: void 0
    },
    ft
}
function i6(e) {
    let t = _f()
      , n = vf(t);
    return U_(t, e),
    n
}
function mr() {
    let e = _f();
    if (e.__SENTRY__ && e.__SENTRY__.acs) {
        let t = e.__SENTRY__.acs.getCurrentHub();
        if (t)
            return t
    }
    return Dk(e)
}
function J0() {
    return mr().getIsolationScope()
}
function Dk(e=_f()) {
    return (!Nk(e) || vf(e).isOlderThan(B_)) && U_(e, new td),
    vf(e)
}
function Nk(e) {
    return !!(e && e.__SENTRY__ && e.__SENTRY__.hub)
}
function vf(e) {
    return Gh("hub", () => new td, e)
}
function U_(e, t) {
    if (!e)
        return !1;
    let n = e.__SENTRY__ = e.__SENTRY__ || {};
    return n.hub = t,
    !0
}
function Fk(e, t) {
    return t && (e.sdk = e.sdk || {},
    e.sdk.name = e.sdk.name || t.name,
    e.sdk.version = e.sdk.version || t.version,
    e.sdk.integrations = [...e.sdk.integrations || [], ...t.integrations || []],
    e.sdk.packages = [...e.sdk.packages || [], ...t.packages || []]),
    e
}
function H_(e, t, n, i) {
    let r = lf(n)
      , s = C(C({
        sent_at: new Date().toISOString()
    }, r && {
        sdk: r
    }), !!i && t && {
        dsn: Ts(t)
    })
      , o = "aggregates"in e ? [{
        type: "sessions"
    }, e] : [{
        type: "session"
    }, e.toJSON()];
    return Ms(s, [o])
}
function G_(e, t, n, i) {
    let r = lf(n)
      , s = e.type && e.type !== "replay_event" ? e.type : "event";
    Fk(e, n && n.sdk);
    let o = X4(e, r, i, t);
    return delete e.sdkProcessingMetadata,
    Ms(o, [[{
        type: s
    }, e]])
}
var Lk = "7";
function Bk(e) {
    let t = e.protocol ? `${e.protocol}:` : ""
      , n = e.port ? `:${e.port}` : "";
    return `${t}//${e.host}${n}${e.path ? `/${e.path}` : ""}/api/`
}
function Uk(e) {
    return `${Bk(e)}${e.projectId}/envelope/`
}
function Hk(e, t) {
    return T4(C({
        sentry_key: e.publicKey,
        sentry_version: Lk
    }, t && {
        sentry_client: `${t.name}/${t.version}`
    }))
}
function V_(e, t={}) {
    let n = typeof t == "string" ? t : t.tunnel
      , i = typeof t == "string" || !t._metadata ? void 0 : t._metadata.sdk;
    return n || `${Uk(e)}?${Hk(e, i)}`
}
var $_ = [];
function Gk(e) {
    let t = {};
    return e.forEach(n => {
        let {name: i} = n
          , r = t[i];
        r && !r.isDefaultInstance && n.isDefaultInstance || (t[i] = n)
    }
    ),
    Object.keys(t).map(n => t[n])
}
function r6(e) {
    let t = e.defaultIntegrations || []
      , n = e.integrations;
    t.forEach(o => {
        o.isDefaultInstance = !0
    }
    );
    let i;
    Array.isArray(n) ? i = [...t, ...n] : typeof n == "function" ? i = Wh(n(t)) : i = t;
    let r = Gk(i)
      , s = Vk(r, o => o.name === "Debug");
    if (s !== -1) {
        let[o] = r.splice(s, 1);
        r.push(o)
    }
    return r
}
function W_(e, t) {
    let n = {};
    return t.forEach(i => {
        i && o6(e, i, n)
    }
    ),
    n
}
function s6(e, t) {
    for (let n of t)
        n && n.afterAllSetup && n.afterAllSetup(e)
}
function o6(e, t, n) {
    if (n[t.name]) {
        Gt && $e.log(`Integration skipped because it was already installed: ${t.name}`);
        return
    }
    if (n[t.name] = t,
    $_.indexOf(t.name) === -1 && (t.setupOnce(Z4, mr),
    $_.push(t.name)),
    t.setup && typeof t.setup == "function" && t.setup(e),
    e.on && typeof t.preprocessEvent == "function") {
        let i = t.preprocessEvent.bind(t);
        e.on("preprocessEvent", (r, s) => i(r, s, e))
    }
    if (e.addEventProcessor && typeof t.processEvent == "function") {
        let i = t.processEvent.bind(t)
          , r = Object.assign( (s, o) => i(s, o, e), {
            id: t.name
        });
        e.addEventProcessor(r)
    }
    Gt && $e.log(`Integration installed: ${t.name}`)
}
function Vk(e, t) {
    for (let n = 0; n < e.length; n++)
        if (t(e[n]) === !0)
            return n;
    return -1
}
function di(e, t) {
    return Object.assign(function(...i) {
        return t(...i)
    }, {
        id: e
    })
}
function j_(e) {
    let t = "";
    for (let n of e) {
        let i = Object.entries(n.tags)
          , r = i.length > 0 ? `|#${i.map( ([s,o]) => `${s}:${o}`).join(",")}` : "";
        t += `${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}
`
    }
    return t
}
function q_(e, t, n, i) {
    let r = {
        sent_at: new Date().toISOString()
    };
    n && n.sdk && (r.sdk = {
        name: n.sdk.name,
        version: n.sdk.version
    }),
    i && t && (r.dsn = Ts(t));
    let s = $k(e);
    return Ms(r, [s])
}
function $k(e) {
    let t = j_(e);
    return [{
        type: "statsd",
        length: t.length
    }, t]
}
var z_ = "Not capturing exception because it's already been captured."
  , nd = class {
    constructor(t) {
        if (this._options = t,
        this._integrations = {},
        this._integrationsInitialized = !1,
        this._numProcessing = 0,
        this._outcomes = {},
        this._hooks = {},
        this._eventProcessors = [],
        t.dsn ? this._dsn = z5(t.dsn) : Gt && $e.warn("No DSN provided, client will not send events."),
        this._dsn) {
            let n = V_(this._dsn, t);
            this._transport = t.transport(ve(C({
                tunnel: this._options.tunnel,
                recordDroppedEvent: this.recordDroppedEvent.bind(this)
            }, t.transportOptions), {
                url: n
            }))
        }
    }
    captureException(t, n, i) {
        if (J5(t)) {
            Gt && $e.log(z_);
            return
        }
        let r = n && n.event_id;
        return this._process(this.eventFromException(t, n).then(s => this._captureEvent(s, n, i)).then(s => {
            r = s
        }
        )),
        r
    }
    captureMessage(t, n, i, r) {
        let s = i && i.event_id
          , o = q0(t) ? t : String(t)
          , a = gl(t) ? this.eventFromMessage(o, n, i) : this.eventFromException(t, i);
        return this._process(a.then(c => this._captureEvent(c, i, r)).then(c => {
            s = c
        }
        )),
        s
    }
    captureEvent(t, n, i) {
        if (n && n.originalException && J5(n.originalException)) {
            Gt && $e.log(z_);
            return
        }
        let r = n && n.event_id
          , o = (t.sdkProcessingMetadata || {}).capturedSpanScope;
        return this._process(this._captureEvent(t, n, o || i).then(a => {
            r = a
        }
        )),
        r
    }
    captureSession(t) {
        typeof t.release != "string" ? Gt && $e.warn("Discarded session because of missing or non-string release") : (this.sendSession(t),
        Qs(t, {
            init: !1
        }))
    }
    getDsn() {
        return this._dsn
    }
    getOptions() {
        return this._options
    }
    getSdkMetadata() {
        return this._options._metadata
    }
    getTransport() {
        return this._transport
    }
    flush(t) {
        let n = this._transport;
        return n ? (this.metricsAggregator && this.metricsAggregator.flush(),
        this._isClientDoneProcessing(t).then(i => n.flush(t).then(r => i && r))) : Ys(!0)
    }
    close(t) {
        return this.flush(t).then(n => (this.getOptions().enabled = !1,
        this.metricsAggregator && this.metricsAggregator.close(),
        n))
    }
    getEventProcessors() {
        return this._eventProcessors
    }
    addEventProcessor(t) {
        this._eventProcessors.push(t)
    }
    setupIntegrations(t) {
        (t && !this._integrationsInitialized || this._isEnabled() && !this._integrationsInitialized) && this._setupIntegrations()
    }
    init() {
        this._isEnabled() && this._setupIntegrations()
    }
    getIntegrationById(t) {
        return this.getIntegrationByName(t)
    }
    getIntegrationByName(t) {
        return this._integrations[t]
    }
    getIntegration(t) {
        try {
            return this._integrations[t.id] || null
        } catch {
            return Gt && $e.warn(`Cannot retrieve integration ${t.id} from the current Client`),
            null
        }
    }
    addIntegration(t) {
        let n = this._integrations[t.name];
        o6(this, t, this._integrations),
        n || s6(this, [t])
    }
    sendEvent(t, n={}) {
        this.emit("beforeSendEvent", t, n);
        let i = G_(t, this._dsn, this._options._metadata, this._options.tunnel);
        for (let s of n.attachments || [])
            i = j4(i, z4(s, this._options.transportOptions && this._options.transportOptions.textEncoder));
        let r = this._sendEnvelope(i);
        r && r.then(s => this.emit("afterSendEvent", t, s), null)
    }
    sendSession(t) {
        let n = H_(t, this._dsn, this._options._metadata, this._options.tunnel);
        this._sendEnvelope(n)
    }
    recordDroppedEvent(t, n, i) {
        if (this._options.sendClientReports) {
            let r = `${t}:${n}`;
            Gt && $e.log(`Adding outcome: "${r}"`),
            this._outcomes[r] = this._outcomes[r] + 1 || 1
        }
    }
    captureAggregateMetrics(t) {
        Gt && $e.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);
        let n = q_(t, this._dsn, this._options._metadata, this._options.tunnel);
        this._sendEnvelope(n)
    }
    on(t, n) {
        this._hooks[t] || (this._hooks[t] = []),
        this._hooks[t].push(n)
    }
    emit(t, ...n) {
        this._hooks[t] && this._hooks[t].forEach(i => i(...n))
    }
    _setupIntegrations() {
        let {integrations: t} = this._options;
        this._integrations = W_(this, t),
        s6(this, t),
        this._integrationsInitialized = !0
    }
    _updateSessionFromEvent(t, n) {
        let i = !1
          , r = !1
          , s = n.exception && n.exception.values;
        if (s) {
            r = !0;
            for (let c of s) {
                let l = c.mechanism;
                if (l && l.handled === !1) {
                    i = !0;
                    break
                }
            }
        }
        let o = t.status === "ok";
        (o && t.errors === 0 || o && i) && (Qs(t, ve(C({}, i && {
            status: "crashed"
        }), {
            errors: t.errors || Number(r || i)
        })),
        this.captureSession(t))
    }
    _isClientDoneProcessing(t) {
        return new ds(n => {
            let i = 0
              , r = 1
              , s = setInterval( () => {
                this._numProcessing == 0 ? (clearInterval(s),
                n(!0)) : (i += r,
                t && i >= t && (clearInterval(s),
                n(!1)))
            }
            , r)
        }
        )
    }
    _isEnabled() {
        return this.getOptions().enabled !== !1 && this._transport !== void 0
    }
    _prepareEvent(t, n, i, r=J0()) {
        let s = this.getOptions()
          , o = Object.keys(this._integrations);
        return !n.integrations && o.length > 0 && (n.integrations = o),
        this.emit("preprocessEvent", t, n),
        I_(s, t, n, i, this, r).then(a => {
            if (a === null)
                return a;
            let c = C(C({}, r.getPropagationContext()), i ? i.getPropagationContext() : void 0);
            if (!(a.contexts && a.contexts.trace) && c) {
                let {traceId: u, spanId: h, parentSpanId: d, dsc: f} = c;
                a.contexts = C({
                    trace: {
                        trace_id: u,
                        span_id: h,
                        parent_span_id: d
                    }
                }, a.contexts);
                let g = f || t6(u, this, i);
                a.sdkProcessingMetadata = C({
                    dynamicSamplingContext: g
                }, a.sdkProcessingMetadata)
            }
            return a
        }
        )
    }
    _captureEvent(t, n={}, i) {
        return this._processEvent(t, n, i).then(r => r.event_id, r => {
            if (Gt) {
                let s = r;
                s.logLevel === "log" ? $e.log(s.message) : $e.warn(s)
            }
        }
        )
    }
    _processEvent(t, n, i) {
        let r = this.getOptions()
          , {sampleRate: s} = r
          , o = K_(t)
          , a = X_(t)
          , c = t.type || "error"
          , l = `before send for type \`${c}\``;
        if (a && typeof s == "number" && Math.random() > s)
            return this.recordDroppedEvent("sample_rate", "error", t),
            Sl(new rr(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));
        let u = c === "replay_event" ? "replay" : c
          , d = (t.sdkProcessingMetadata || {}).capturedSpanIsolationScope;
        return this._prepareEvent(t, n, i, d).then(f => {
            if (f === null)
                throw this.recordDroppedEvent("event_processor", u, t),
                new rr("An event processor returned `null`, will not send event.","log");
            if (n.data && n.data.__sentry__ === !0)
                return f;
            let p = jk(r, f, n);
            return Wk(p, l)
        }
        ).then(f => {
            if (f === null)
                throw this.recordDroppedEvent("before_send", u, t),
                new rr(`${l} returned \`null\`, will not send event.`,"log");
            let g = i && i.getSession();
            !o && g && this._updateSessionFromEvent(g, f);
            let p = f.transaction_info;
            if (o && p && f.transaction !== t.transaction) {
                let v = "custom";
                f.transaction_info = ve(C({}, p), {
                    source: v
                })
            }
            return this.sendEvent(f, n),
            f
        }
        ).then(null, f => {
            throw f instanceof rr ? f : (this.captureException(f, {
                data: {
                    __sentry__: !0
                },
                originalException: f
            }),
            new rr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${f}`))
        }
        )
    }
    _process(t) {
        this._numProcessing++,
        t.then(n => (this._numProcessing--,
        n), n => (this._numProcessing--,
        n))
    }
    _sendEnvelope(t) {
        if (this.emit("beforeEnvelope", t),
        this._isEnabled() && this._transport)
            return this._transport.send(t).then(null, n => {
                Gt && $e.error("Error while sending event:", n)
            }
            );
        Gt && $e.error("Transport disabled")
    }
    _clearOutcomes() {
        let t = this._outcomes;
        return this._outcomes = {},
        Object.keys(t).map(n => {
            let[i,r] = n.split(":");
            return {
                reason: i,
                category: r,
                quantity: t[n]
            }
        }
        )
    }
}
;
function Wk(e, t) {
    let n = `${t} must return \`null\` or a valid event.`;
    if (wo(e))
        return e.then(i => {
            if (!zs(i) && i !== null)
                throw new rr(n);
            return i
        }
        , i => {
            throw new rr(`${t} rejected with ${i}`)
        }
        );
    if (!zs(e) && e !== null)
        throw new rr(n);
    return e
}
function jk(e, t, n) {
    let {beforeSend: i, beforeSendTransaction: r} = e;
    return X_(t) && i ? i(t, n) : K_(t) && r ? r(t, n) : t
}
function X_(e) {
    return e.type === void 0
}
function K_(e) {
    return e.type === "transaction"
}
function a6(e, t) {
    t.debug === !0 && (Gt ? $e.enable() : mc( () => {
        console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")
    }
    )),
    ko().update(t.initialScope);
    let i = new e(t);
    c6(i),
    qk(i)
}
function c6(e) {
    let n = mr().getStackTop();
    n.client = e,
    n.scope.setClient(e)
}
function qk(e) {
    e.init ? e.init() : e.setupIntegrations && e.setupIntegrations()
}
var zk = 30;
function eu(e, t, n=V4(e.bufferSize || zk)) {
    let i = {}
      , r = o => n.drain(o);
    function s(o) {
        let a = [];
        if (af(o, (h, d) => {
            let f = cf(d);
            if (Y4(i, f)) {
                let g = Y_(h, d);
                e.recordDroppedEvent("ratelimit_backoff", f, g)
            } else
                a.push(h)
        }
        ),
        a.length === 0)
            return Ys();
        let c = Ms(o[0], a)
          , l = h => {
            af(c, (d, f) => {
                let g = Y_(d, f);
                e.recordDroppedEvent(h, cf(f), g)
            }
            )
        }
          , u = () => t({
            body: q4(c, e.textEncoder)
        }).then(h => (h.statusCode !== void 0 && (h.statusCode < 200 || h.statusCode >= 300) && Gt && $e.warn(`Sentry responded with status code ${h.statusCode} to sent event.`),
        i = Q4(i, h),
        h), h => {
            throw l("network_error"),
            h
        }
        );
        return n.add(u).then(h => h, h => {
            if (h instanceof rr)
                return Gt && $e.error("Skipped sending event because buffer is full."),
                l("queue_overflow"),
                Ys();
            throw h
        }
        )
    }
    return s.__sentry__baseTransport__ = !0,
    {
        send: s,
        flush: r
    }
}
function Y_(e, t) {
    if (!(t !== "event" && t !== "transaction"))
        return Array.isArray(e) ? e[1] : void 0
}
function id(e, t, n=[t], i="npm") {
    let r = e._metadata || {};
    r.sdk || (r.sdk = {
        name: `sentry.javascript.${t}`,
        packages: n.map(s => ({
            name: `${i}:@sentry/${s}`,
            version: Z0
        })),
        version: Z0
    }),
    e._metadata = r
}
var Xk = [/^Script error\.?$/, /^Javascript error: Script error\.? on line 0$/, /^ResizeObserver loop completed with undelivered notifications.$/, /^Cannot redefine property: googletag$/]
  , Kk = [/^.*\/healthcheck$/, /^.*\/healthy$/, /^.*\/live$/, /^.*\/ready$/, /^.*\/heartbeat$/, /^.*\/health$/, /^.*\/healthz$/]
  , Q_ = "InboundFilters"
  , Yk = (e={}) => ({
    name: Q_,
    setupOnce() {},
    processEvent(t, n, i) {
        let r = i.getOptions()
          , s = Qk(e, r);
        return Jk(t, s) ? null : t
    }
})
  , rd = Yk
  , Sf = di(Q_, rd);
function Qk(e={}, t={}) {
    return {
        allowUrls: [...e.allowUrls || [], ...t.allowUrls || []],
        denyUrls: [...e.denyUrls || [], ...t.denyUrls || []],
        ignoreErrors: [...e.ignoreErrors || [], ...t.ignoreErrors || [], ...e.disableErrorDefaults ? [] : Xk],
        ignoreTransactions: [...e.ignoreTransactions || [], ...t.ignoreTransactions || [], ...e.disableTransactionDefaults ? [] : Kk],
        ignoreInternal: e.ignoreInternal !== void 0 ? e.ignoreInternal : !0
    }
}
function Jk(e, t) {
    return t.ignoreInternal && rA(e) ? (Gt && $e.warn(`Event dropped due to being internal Sentry Error.
Event: ${Xs(e)}`),
    !0) : Zk(e, t.ignoreErrors) ? (Gt && $e.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Xs(e)}`),
    !0) : eA(e, t.ignoreTransactions) ? (Gt && $e.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Xs(e)}`),
    !0) : tA(e, t.denyUrls) ? (Gt && $e.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Xs(e)}.
Url: ${yf(e)}`),
    !0) : nA(e, t.allowUrls) ? !1 : (Gt && $e.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Xs(e)}.
Url: ${yf(e)}`),
    !0)
}
function Zk(e, t) {
    return e.type || !t || !t.length ? !1 : iA(e).some(n => z0(n, t))
}
function eA(e, t) {
    if (e.type !== "transaction" || !t || !t.length)
        return !1;
    let n = e.transaction;
    return n ? z0(n, t) : !1
}
function tA(e, t) {
    if (!t || !t.length)
        return !1;
    let n = yf(e);
    return n ? z0(n, t) : !1
}
function nA(e, t) {
    if (!t || !t.length)
        return !0;
    let n = yf(e);
    return n ? z0(n, t) : !0
}
function iA(e) {
    let t = [];
    e.message && t.push(e.message);
    let n;
    try {
        n = e.exception.values[e.exception.values.length - 1]
    } catch {}
    return n && n.value && (t.push(n.value),
    n.type && t.push(`${n.type}: ${n.value}`)),
    Gt && t.length === 0 && $e.error(`Could not extract message for event ${Xs(e)}`),
    t
}
function rA(e) {
    try {
        return e.exception.values[0].type === "SentryError"
    } catch {}
    return !1
}
function sA(e=[]) {
    for (let t = e.length - 1; t >= 0; t--) {
        let n = e[t];
        if (n && n.filename !== "<anonymous>" && n.filename !== "[native code]")
            return n.filename || null
    }
    return null
}
function yf(e) {
    try {
        let t;
        try {
            t = e.exception.values[0].stacktrace.frames
        } catch {}
        return t ? sA(t) : null
    } catch {
        return Gt && $e.error(`Cannot extract url for event ${Xs(e)}`),
        null
    }
}
var J_, ey = "FunctionToString", Z_ = new WeakMap, oA = () => ({
    name: ey,
    setupOnce() {
        J_ = Function.prototype.toString;
        try {
            Function.prototype.toString = function(...e) {
                let t = _l(this)
                  , n = Z_.has(Pn()) && t !== void 0 ? t : this;
                return J_.apply(n, e)
            }
        } catch {}
    },
    setup(e) {
        Z_.set(e, !0)
    }
}), sd = oA, bf = di(ey, sd);
var aA = "cause"
  , cA = 5
  , ty = "LinkedErrors"
  , lA = (e={}) => {
    let t = e.limit || cA
      , n = e.key || aA;
    return {
        name: ty,
        setupOnce() {},
        preprocessEvent(i, r, s) {
            let o = s.getOptions();
            Hh(J4, o.stackParser, o.maxValueLength, n, t, i, r)
        }
    }
}
  , uA = lA
  , ny = di(ty, uA);
var l6 = {};
q8(l6, {
    FunctionToString: () => bf,
    InboundFilters: () => Sf,
    LinkedErrors: () => ny
});
var iy = l6;
var vr = typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__;
var It = ft
  , u6 = 0;
function h6() {
    return u6 > 0
}
function OA() {
    u6++,
    setTimeout( () => {
        u6--
    }
    )
}
function _c(e, t={}, n) {
    if (typeof e != "function")
        return e;
    try {
        let r = e.__sentry_wrapped__;
        if (r)
            return r;
        if (_l(e))
            return e
    } catch {
        return e
    }
    let i = function() {
        let r = Array.prototype.slice.call(arguments);
        try {
            n && typeof n == "function" && n.apply(this, arguments);
            let s = r.map(o => _c(o, t));
            return e.apply(this, s)
        } catch (s) {
            throw OA(),
            pf(o => {
                o.addEventProcessor(a => (t.mechanism && (K0(a, void 0, void 0),
                pa(a, t.mechanism)),
                a.extra = ve(C({}, a.extra), {
                    arguments: r
                }),
                a)),
                xl(s)
            }
            ),
            s
        }
    };
    try {
        for (let r in e)
            Object.prototype.hasOwnProperty.call(e, r) && (i[r] = e[r])
    } catch {}
    X5(i, e),
    fa(e, "__sentry_wrapped__", i);
    try {
        Object.getOwnPropertyDescriptor(i, "name").configurable && Object.defineProperty(i, "name", {
            get() {
                return e.name
            }
        })
    } catch {}
    return i
}
var xf = 1024
  , ry = "Breadcrumbs"
  , MA = (e={}) => {
    let t = C({
        console: !0,
        dom: !0,
        fetch: !0,
        history: !0,
        sentry: !0,
        xhr: !0
    }, e);
    return {
        name: ry,
        setupOnce() {},
        setup(n) {
            t.console && k4(AA(n)),
            t.dom && R4(kA(n, t.dom)),
            t.xhr && H4(IA(n)),
            t.fetch && L4(RA(n)),
            t.history && zh(DA(n)),
            t.sentry && n.on && n.on("beforeSendEvent", PA(n))
        }
    }
}
  , wf = MA
  , d6 = di(ry, wf);
function PA(e) {
    return function(n) {
        Pn() === e && Po({
            category: `sentry.${n.type === "transaction" ? "transaction" : "event"}`,
            event_id: n.event_id,
            level: n.level,
            message: Xs(n)
        }, {
            event: n
        })
    }
}
function kA(e, t) {
    return function(i) {
        if (Pn() !== e)
            return;
        let r, s, o = typeof t == "object" ? t.serializeAttribute : void 0, a = typeof t == "object" && typeof t.maxStringLength == "number" ? t.maxStringLength : void 0;
        a && a > xf && (vr && $e.warn(`\`dom.maxStringLength\` cannot exceed ${xf}, but a value of ${a} was configured. Sentry will use ${xf} instead.`),
        a = xf),
        typeof o == "string" && (o = [o]);
        try {
            let l = i.event
              , u = NA(l) ? l.target : l;
            r = Vh(u, {
                keyAttrs: o,
                maxStringLength: a
            }),
            s = C4(u)
        } catch {
            r = "<unknown>"
        }
        if (r.length === 0)
            return;
        let c = {
            category: `ui.${i.name}`,
            message: r
        };
        s && (c.data = {
            "ui.component_name": s
        }),
        Po(c, {
            event: i.event,
            name: i.name,
            global: i.global
        })
    }
}
function AA(e) {
    return function(n) {
        if (Pn() !== e)
            return;
        let i = {
            category: "console",
            data: {
                arguments: n.args,
                logger: "console"
            },
            level: $4(n.level),
            message: j5(n.args, " ")
        };
        if (n.level === "assert")
            if (n.args[0] === !1)
                i.message = `Assertion failed: ${j5(n.args.slice(1), " ") || "console.assert"}`,
                i.data.arguments = n.args.slice(1);
            else
                return;
        Po(i, {
            input: n.args,
            level: n.level
        })
    }
}
function IA(e) {
    return function(n) {
        if (Pn() !== e)
            return;
        let {startTimestamp: i, endTimestamp: r} = n
          , s = n.xhr[yl];
        if (!i || !r || !s)
            return;
        let {method: o, url: a, status_code: c, body: l} = s
          , u = {
            method: o,
            url: a,
            status_code: c
        }
          , h = {
            xhr: n.xhr,
            input: l,
            startTimestamp: i,
            endTimestamp: r
        };
        Po({
            category: "xhr",
            data: u,
            type: "http"
        }, h)
    }
}
function RA(e) {
    return function(n) {
        if (Pn() !== e)
            return;
        let {startTimestamp: i, endTimestamp: r} = n;
        if (r && !(n.fetchData.url.match(/sentry_key/) && n.fetchData.method === "POST"))
            if (n.error) {
                let s = n.fetchData
                  , o = {
                    data: n.error,
                    input: n.args,
                    startTimestamp: i,
                    endTimestamp: r
                };
                Po({
                    category: "fetch",
                    data: s,
                    level: "error",
                    type: "http"
                }, o)
            } else {
                let s = n.response
                  , o = ve(C({}, n.fetchData), {
                    status_code: s && s.status
                })
                  , a = {
                    input: n.args,
                    response: s,
                    startTimestamp: i,
                    endTimestamp: r
                };
                Po({
                    category: "fetch",
                    data: o,
                    type: "http"
                }, a)
            }
    }
}
function DA(e) {
    return function(n) {
        if (Pn() !== e)
            return;
        let i = n.from
          , r = n.to
          , s = Xh(It.location.href)
          , o = i ? Xh(i) : void 0
          , a = Xh(r);
        (!o || !o.path) && (o = s),
        s.protocol === a.protocol && s.host === a.host && (r = a.relative),
        s.protocol === o.protocol && s.host === o.host && (i = o.relative),
        Po({
            category: "navigation",
            data: {
                from: i,
                to: r
            }
        })
    }
}
function NA(e) {
    return !!e && !!e.target
}
function g6(e, t) {
    let n = m6(e, t)
      , i = {
        type: t && t.name,
        value: UA(t)
    };
    return n.length && (i.stacktrace = {
        frames: n
    }),
    i.type === void 0 && i.value === "" && (i.value = "Unrecoverable error caught"),
    i
}
function FA(e, t, n, i) {
    let r = Pn()
      , s = r && r.getOptions().normalizeDepth
      , o = {
        exception: {
            values: [{
                type: ml(t) ? t.constructor.name : i ? "UnhandledRejection" : "Error",
                value: HA(t, {
                    isUnhandledRejection: i
                })
            }]
        },
        extra: {
            __serialized__: of(t, s)
        }
    };
    if (n) {
        let a = m6(e, n);
        a.length && (o.exception.values[0].stacktrace = {
            frames: a
        })
    }
    return o
}
function f6(e, t) {
    return {
        exception: {
            values: [g6(e, t)]
        }
    }
}
function m6(e, t) {
    let n = t.stacktrace || t.stack || ""
      , i = BA(t);
    try {
        return e(n, i)
    } catch {}
    return []
}
var LA = /Minified React error #\d+;/i;
function BA(e) {
    if (e) {
        if (typeof e.framesToPop == "number")
            return e.framesToPop;
        if (LA.test(e.message))
            return 1
    }
    return 0
}
function UA(e) {
    let t = e && e.message;
    return t ? t.error && typeof t.error.message == "string" ? t.error.message : t : "No error message"
}
function sy(e, t, n, i) {
    let r = n && n.syntheticException || void 0
      , s = Cf(e, t, r, i);
    return pa(s),
    s.level = "error",
    n && n.event_id && (s.event_id = n.event_id),
    Ys(s)
}
function oy(e, t, n="info", i, r) {
    let s = i && i.syntheticException || void 0
      , o = p6(e, t, s, r);
    return o.level = n,
    i && i.event_id && (o.event_id = i.event_id),
    Ys(o)
}
function Cf(e, t, n, i, r) {
    let s;
    if (j0(t) && t.error)
        return f6(e, t.error);
    if (W5(t) || m4(t)) {
        let o = t;
        if ("stack"in t)
            s = f6(e, t);
        else {
            let a = o.name || (W5(o) ? "DOMError" : "DOMException")
              , c = o.message ? `${a}: ${o.message}` : a;
            s = p6(e, c, n, i),
            K0(s, c)
        }
        return "code"in o && (s.tags = ve(C({}, s.tags), {
            "DOMException.code": `${o.code}`
        })),
        s
    }
    return Bh(t) ? f6(e, t) : zs(t) || ml(t) ? (s = FA(e, t, n, r),
    pa(s, {
        synthetic: !0
    }),
    s) : (s = p6(e, t, n, i),
    K0(s, `${t}`, void 0),
    pa(s, {
        synthetic: !0
    }),
    s)
}
function p6(e, t, n, i) {
    let r = {};
    if (i && n) {
        let s = m6(e, n);
        s.length && (r.exception = {
            values: [{
                value: t,
                stacktrace: {
                    frames: s
                }
            }]
        })
    }
    if (q0(t)) {
        let {__sentry_template_string__: s, __sentry_template_values__: o} = t;
        return r.logentry = {
            message: s,
            params: o
        },
        r
    }
    return r.message = t,
    r
}
function HA(e, {isUnhandledRejection: t}) {
    let n = O4(e)
      , i = t ? "promise rejection" : "exception";
    return j0(e) ? `Event \`ErrorEvent\` captured as ${i} with message \`${e.message}\`` : ml(e) ? `Event \`${GA(e)}\` (type=${e.type}) captured as ${i}` : `Object captured as ${i} with keys: ${n}`
}
function GA(e) {
    try {
        let t = Object.getPrototypeOf(e);
        return t ? t.constructor.name : void 0
    } catch {}
}
var cy = "GlobalHandlers"
  , VA = (e={}) => {
    let t = C({
        onerror: !0,
        onunhandledrejection: !0
    }, e);
    return {
        name: cy,
        setupOnce() {
            Error.stackTraceLimit = 50
        },
        setup(n) {
            t.onerror && ($A(n),
            ay("onerror")),
            t.onunhandledrejection && (WA(n),
            ay("onunhandledrejection"))
        }
    }
}
  , Ef = VA
  , v6 = di(cy, Ef);
function $A(e) {
    B4(t => {
        let {stackParser: n, attachStacktrace: i} = uy();
        if (Pn() !== e || h6())
            return;
        let {msg: r, url: s, line: o, column: a, error: c} = t
          , l = c === void 0 && pr(r) ? zA(r, s, o, a) : ly(Cf(n, c || r, void 0, i, !1), s, o, a);
        l.level = "error",
        Qh(l, {
            originalException: c,
            mechanism: {
                handled: !1,
                type: "onerror"
            }
        })
    }
    )
}
function WA(e) {
    U4(t => {
        let {stackParser: n, attachStacktrace: i} = uy();
        if (Pn() !== e || h6())
            return;
        let r = jA(t)
          , s = gl(r) ? qA(r) : Cf(n, r, void 0, i, !0);
        s.level = "error",
        Qh(s, {
            originalException: r,
            mechanism: {
                handled: !1,
                type: "onunhandledrejection"
            }
        })
    }
    )
}
function jA(e) {
    if (gl(e))
        return e;
    let t = e;
    try {
        if ("reason"in t)
            return t.reason;
        if ("detail"in t && "reason"in t.detail)
            return t.detail.reason
    } catch {}
    return e
}
function qA(e) {
    return {
        exception: {
            values: [{
                type: "UnhandledRejection",
                value: `Non-Error promise rejection captured with value: ${String(e)}`
            }]
        }
    }
}
function zA(e, t, n, i) {
    let r = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i
      , s = j0(e) ? e.message : e
      , o = "Error"
      , a = s.match(r);
    return a && (o = a[1],
    s = a[2]),
    ly({
        exception: {
            values: [{
                type: o,
                value: s
            }]
        }
    }, t, n, i)
}
function ly(e, t, n, i) {
    let r = e.exception = e.exception || {}
      , s = r.values = r.values || []
      , o = s[0] = s[0] || {}
      , a = o.stacktrace = o.stacktrace || {}
      , c = a.frames = a.frames || []
      , l = isNaN(parseInt(i, 10)) ? void 0 : i
      , u = isNaN(parseInt(n, 10)) ? void 0 : n
      , h = pr(t) && t.length > 0 ? t : w4();
    return c.length === 0 && c.push({
        colno: l,
        filename: h,
        function: "?",
        in_app: !0,
        lineno: u
    }),
    e
}
function ay(e) {
    vr && $e.log(`Global Handler attached: ${e}`)
}
function uy() {
    let e = Pn();
    return e && e.getOptions() || {
        stackParser: () => [],
        attachStacktrace: !1
    }
}
function hy(e, {metadata: t, tunnel: n, dsn: i}) {
    let r = C(C({
        event_id: e.event_id,
        sent_at: new Date().toISOString()
    }, t && t.sdk && {
        sdk: {
            name: t.sdk.name,
            version: t.sdk.version
        }
    }), !!n && !!i && {
        dsn: Ts(i)
    })
      , s = XA(e);
    return Ms(r, [s])
}
function XA(e) {
    return [{
        type: "user_report"
    }, e]
}
var Tf = class extends nd {
    constructor(t) {
        let n = It.SENTRY_SDK_SOURCE || G4();
        id(t, "browser", ["browser"], n),
        super(t),
        t.sendClientReports && It.document && It.document.addEventListener("visibilitychange", () => {
            It.document.visibilityState === "hidden" && this._flushOutcomes()
        }
        )
    }
    eventFromException(t, n) {
        return sy(this._options.stackParser, t, n, this._options.attachStacktrace)
    }
    eventFromMessage(t, n="info", i) {
        return oy(this._options.stackParser, t, n, i, this._options.attachStacktrace)
    }
    captureUserFeedback(t) {
        if (!this._isEnabled()) {
            vr && $e.warn("SDK not enabled, will not capture user feedback.");
            return
        }
        let n = hy(t, {
            metadata: this.getSdkMetadata(),
            dsn: this.getDsn(),
            tunnel: this.getOptions().tunnel
        });
        this._sendEnvelope(n)
    }
    _prepareEvent(t, n, i) {
        return t.platform = t.platform || "javascript",
        super._prepareEvent(t, n, i)
    }
    _flushOutcomes() {
        let t = this._clearOutcomes();
        if (t.length === 0) {
            vr && $e.log("No outcomes to send");
            return
        }
        if (!this._dsn) {
            vr && $e.log("No dsn provided, will not send outcomes");
            return
        }
        vr && $e.log("Sending outcomes:", t);
        let n = K4(t, this._options.tunnel && Ts(this._dsn));
        this._sendEnvelope(n)
    }
}
;
var od;
function dy() {
    if (od)
        return od;
    if (jh(It.fetch))
        return od = It.fetch.bind(It);
    let e = It.document
      , t = It.fetch;
    if (e && typeof e.createElement == "function")
        try {
            let n = e.createElement("iframe");
            n.hidden = !0,
            e.head.appendChild(n);
            let i = n.contentWindow;
            i && i.fetch && (t = i.fetch),
            e.head.removeChild(n)
        } catch (n) {
            vr && $e.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ", n)
        }
    return od = t.bind(It)
}
function fy() {
    od = void 0
}
function py(e, t=dy()) {
    let n = 0
      , i = 0;
    function r(s) {
        let o = s.body.length;
        n += o,
        i++;
        let a = C({
            body: s.body,
            method: "POST",
            referrerPolicy: "origin",
            headers: e.headers,
            keepalive: n <= 6e4 && i < 15
        }, e.fetchOptions);
        try {
            return t(e.url, a).then(c => (n -= o,
            i--,
            {
                statusCode: c.status,
                headers: {
                    "x-sentry-rate-limits": c.headers.get("X-Sentry-Rate-Limits"),
                    "retry-after": c.headers.get("Retry-After")
                }
            }))
        } catch (c) {
            return fy(),
            n -= o,
            i--,
            Sl(c)
        }
    }
    return eu(e, r)
}
var KA = 4;
function gy(e) {
    function t(n) {
        return new ds( (i, r) => {
            let s = new XMLHttpRequest;
            s.onerror = r,
            s.onreadystatechange = () => {
                s.readyState === KA && i({
                    statusCode: s.status,
                    headers: {
                        "x-sentry-rate-limits": s.getResponseHeader("X-Sentry-Rate-Limits"),
                        "retry-after": s.getResponseHeader("Retry-After")
                    }
                })
            }
            ,
            s.open("POST", e.url);
            for (let o in e.headers)
                Object.prototype.hasOwnProperty.call(e.headers, o) && s.setRequestHeader(o, e.headers[o]);
            s.send(n.body)
        }
        )
    }
    return eu(e, t)
}
var Of = "?";
var YA = 30
  , QA = 40
  , JA = 50;
function _6(e, t, n, i) {
    let r = {
        filename: e,
        function: t,
        in_app: !0
    };
    return n !== void 0 && (r.lineno = n),
    i !== void 0 && (r.colno = i),
    r
}
var ZA = /^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i
  , eI = /\((\S*)(?::(\d+))(?::(\d+))\)/
  , tI = e => {
    let t = ZA.exec(e);
    if (t) {
        if (t[2] && t[2].indexOf("eval") === 0) {
            let s = eI.exec(t[2]);
            s && (t[2] = s[1],
            t[3] = s[2],
            t[4] = s[3])
        }
        let[i,r] = vy(t[1] || Of, t[2]);
        return _6(r, i, t[3] ? +t[3] : void 0, t[4] ? +t[4] : void 0)
    }
}
  , nI = [YA, tI]
  , iI = /^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i
  , rI = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i
  , sI = e => {
    let t = iI.exec(e);
    if (t) {
        if (t[3] && t[3].indexOf(" > eval") > -1) {
            let s = rI.exec(t[3]);
            s && (t[1] = t[1] || "eval",
            t[3] = s[1],
            t[4] = s[2],
            t[5] = "")
        }
        let i = t[3]
          , r = t[1] || Of;
        return [r,i] = vy(r, i),
        _6(i, r, t[4] ? +t[4] : void 0, t[5] ? +t[5] : void 0)
    }
}
  , oI = [JA, sI]
  , aI = /^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i
  , cI = e => {
    let t = aI.exec(e);
    return t ? _6(t[2], t[1] || Of, +t[3], t[4] ? +t[4] : void 0) : void 0
}
  , lI = [QA, cI];
var uI = [nI, oI, lI]
  , my = Y5(...uI)
  , vy = (e, t) => {
    let n = e.indexOf("safari-extension") !== -1
      , i = e.indexOf("safari-web-extension") !== -1;
    return n || i ? [e.indexOf("@") !== -1 ? e.split("@")[0] : Of, n ? `safari-extension:${t}` : `safari-web-extension:${t}`] : [e, t]
}
;
var Sy = "Dedupe"
  , hI = () => {
    let e;
    return {
        name: Sy,
        setupOnce() {},
        processEvent(t) {
            if (t.type)
                return t;
            try {
                if (dI(t, e))
                    return vr && $e.warn("Event dropped due to being a duplicate of previously captured event."),
                    null
            } catch {}
            return e = t
        }
    }
}
  , y6 = hI
  , by = di(Sy, y6);
function dI(e, t) {
    return t ? !!(fI(e, t) || pI(e, t)) : !1
}
function fI(e, t) {
    let n = e.message
      , i = t.message;
    return !(!n && !i || n && !i || !n && i || n !== i || !wy(e, t) || !xy(e, t))
}
function pI(e, t) {
    let n = _y(t)
      , i = _y(e);
    return !(!n || !i || n.type !== i.type || n.value !== i.value || !wy(e, t) || !xy(e, t))
}
function xy(e, t) {
    let n = yy(e)
      , i = yy(t);
    if (!n && !i)
        return !0;
    if (n && !i || !n && i || (n = n,
    i = i,
    i.length !== n.length))
        return !1;
    for (let r = 0; r < i.length; r++) {
        let s = i[r]
          , o = n[r];
        if (s.filename !== o.filename || s.lineno !== o.lineno || s.colno !== o.colno || s.function !== o.function)
            return !1
    }
    return !0
}
function wy(e, t) {
    let n = e.fingerprint
      , i = t.fingerprint;
    if (!n && !i)
        return !0;
    if (n && !i || !n && i)
        return !1;
    n = n,
    i = i;
    try {
        return n.join("") === i.join("")
    } catch {
        return !1
    }
}
function _y(e) {
    return e.exception && e.exception.values && e.exception.values[0]
}
function yy(e) {
    let t = e.exception;
    if (t)
        try {
            return t.values[0].stacktrace.frames
        } catch {
            return
        }
}
var Cy = "HttpContext"
  , gI = () => ({
    name: Cy,
    setupOnce() {},
    preprocessEvent(e) {
        if (!It.navigator && !It.location && !It.document)
            return;
        let t = e.request && e.request.url || It.location && It.location.href
          , {referrer: n} = It.document || {}
          , {userAgent: i} = It.navigator || {}
          , r = C(C(C({}, e.request && e.request.headers), n && {
            Referer: n
        }), i && {
            "User-Agent": i
        })
          , s = ve(C(C({}, e.request), t && {
            url: t
        }), {
            headers: r
        });
        e.request = s
    }
})
  , S6 = gI
  , Ey = di(Cy, S6);
var mI = "cause"
  , vI = 5
  , Ty = "LinkedErrors"
  , _I = (e={}) => {
    let t = e.limit || vI
      , n = e.key || mI;
    return {
        name: Ty,
        setupOnce() {},
        preprocessEvent(i, r, s) {
            let o = s.getOptions();
            Hh(g6, o.stackParser, o.maxValueLength, n, t, i, r)
        }
    }
}
  , b6 = _I
  , Oy = di(Ty, b6);
var yI = ["EventTarget", "Window", "Node", "ApplicationCache", "AudioTrackList", "BroadcastChannel", "ChannelMergerNode", "CryptoOperation", "EventSource", "FileReader", "HTMLUnknownElement", "IDBDatabase", "IDBRequest", "IDBTransaction", "KeyOperation", "MediaController", "MessagePort", "ModalWindow", "Notification", "SVGElementInstance", "Screen", "SharedWorker", "TextTrack", "TextTrackCue", "TextTrackList", "WebSocket", "WebSocketWorker", "Worker", "XMLHttpRequest", "XMLHttpRequestEventTarget", "XMLHttpRequestUpload"]
  , Py = "TryCatch"
  , SI = (e={}) => {
    let t = C({
        XMLHttpRequest: !0,
        eventTarget: !0,
        requestAnimationFrame: !0,
        setInterval: !0,
        setTimeout: !0
    }, e);
    return {
        name: Py,
        setupOnce() {
            t.setTimeout && Sn(It, "setTimeout", My),
            t.setInterval && Sn(It, "setInterval", My),
            t.requestAnimationFrame && Sn(It, "requestAnimationFrame", bI),
            t.XMLHttpRequest && "XMLHttpRequest"in It && Sn(XMLHttpRequest.prototype, "send", xI);
            let n = t.eventTarget;
            n && (Array.isArray(n) ? n : yI).forEach(wI)
        }
    }
}
  , x6 = SI
  , ky = di(Py, x6);
function My(e) {
    return function(...t) {
        let n = t[0];
        return t[0] = _c(n, {
            mechanism: {
                data: {
                    function: Os(e)
                },
                handled: !1,
                type: "instrument"
            }
        }),
        e.apply(this, t)
    }
}
function bI(e) {
    return function(t) {
        return e.apply(this, [_c(t, {
            mechanism: {
                data: {
                    function: "requestAnimationFrame",
                    handler: Os(e)
                },
                handled: !1,
                type: "instrument"
            }
        })])
    }
}
function xI(e) {
    return function(...t) {
        let n = this;
        return ["onload", "onerror", "onprogress", "onreadystatechange"].forEach(r => {
            r in n && typeof n[r] == "function" && Sn(n, r, function(s) {
                let o = {
                    mechanism: {
                        data: {
                            function: r,
                            handler: Os(s)
                        },
                        handled: !1,
                        type: "instrument"
                    }
                }
                  , a = _l(s);
                return a && (o.mechanism.data.handler = Os(a)),
                _c(s, o)
            })
        }
        ),
        e.apply(this, t)
    }
}
function wI(e) {
    let t = It
      , n = t[e] && t[e].prototype;
    !n || !n.hasOwnProperty || !n.hasOwnProperty("addEventListener") || (Sn(n, "addEventListener", function(i) {
        return function(r, s, o) {
            try {
                typeof s.handleEvent == "function" && (s.handleEvent = _c(s.handleEvent, {
                    mechanism: {
                        data: {
                            function: "handleEvent",
                            handler: Os(s),
                            target: e
                        },
                        handled: !1,
                        type: "instrument"
                    }
                }))
            } catch {}
            return i.apply(this, [r, _c(s, {
                mechanism: {
                    data: {
                        function: "addEventListener",
                        handler: Os(s),
                        target: e
                    },
                    handled: !1,
                    type: "instrument"
                }
            }), o])
        }
    }),
    Sn(n, "removeEventListener", function(i) {
        return function(r, s, o) {
            let a = s;
            try {
                let c = a && a.__sentry_wrapped__;
                c && i.call(this, r, c, o)
            } catch {}
            return i.call(this, r, a, o)
        }
    }))
}
var Ay = [rd(), sd(), x6(), wf(), Ef(), b6(), y6(), S6()];
function Mf(e) {
    return [...Ay]
}
function w6(e={}) {
    e.defaultIntegrations === void 0 && (e.defaultIntegrations = Mf()),
    e.release === void 0 && (typeof __SENTRY_RELEASE__ == "string" && (e.release = __SENTRY_RELEASE__),
    It.SENTRY_RELEASE && It.SENTRY_RELEASE.id && (e.release = It.SENTRY_RELEASE.id)),
    e.autoSessionTracking === void 0 && (e.autoSessionTracking = !0),
    e.sendClientReports === void 0 && (e.sendClientReports = !0);
    let t = ve(C({}, e), {
        stackParser: P4(e.stackParser || my),
        integrations: r6(e),
        transport: e.transport || (Z5() ? py : gy)
    });
    a6(Tf, t),
    e.autoSessionTracking && CI()
}
function CI() {
    if (typeof It.document > "u") {
        vr && $e.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");
        return
    }
    Jh({
        ignoreDuration: !0
    }),
    Zh(),
    zh( ({from: e, to: t}) => {
        e !== void 0 && e !== t && (Jh({
            ignoreDuration: !0
        }),
        Zh())
    }
    )
}
var C6 = {};
q8(C6, {
    Breadcrumbs: () => d6,
    Dedupe: () => by,
    GlobalHandlers: () => v6,
    HttpContext: () => Ey,
    LinkedErrors: () => Oy,
    TryCatch: () => ky
});
var Iy = {};
It.Sentry && It.Sentry.Integrations && (Iy = It.Sentry.Integrations);
var Pre = C(C(C({}, Iy), iy), C6);
var T6 = class extends Pv {
    supportsDOMEvents = !0
}
  , O6 = class e extends T6 {
    static makeCurrent() {
        Mv(new e)
    }
    onAndCancel(t, n, i) {
        return t.addEventListener(n, i),
        () => {
            t.removeEventListener(n, i)
        }
    }
    dispatchEvent(t, n) {
        t.dispatchEvent(n)
    }
    remove(t) {
        t.remove()
    }
    createElement(t, n) {
        return n = n || this.getDefaultDocument(),
        n.createElement(t)
    }
    createHtmlDocument() {
        return document.implementation.createHTMLDocument("fakeTitle")
    }
    getDefaultDocument() {
        return document
    }
    isElementNode(t) {
        return t.nodeType === Node.ELEMENT_NODE
    }
    isShadowRoot(t) {
        return t instanceof DocumentFragment
    }
    getGlobalEventTarget(t, n) {
        return n === "window" ? window : n === "document" ? t : n === "body" ? t.body : null
    }
    getBaseHref(t) {
        let n = kI();
        return n == null ? null : AI(n)
    }
    resetBaseElement() {
        ad = null
    }
    getUserAgent() {
        return window.navigator.userAgent
    }
    getCookie(t) {
        return Rv(document.cookie, t)
    }
}
  , ad = null;
function kI() {
    return ad = ad || document.querySelector("base"),
    ad ? ad.getAttribute("href") : null
}
function AI(e) {
    return new URL(e,document.baseURI).pathname
}
var M6 = class {
    addToWindow(t) {
        ic.getAngularTestability = (i, r=!0) => {
            let s = t.findTestabilityInTree(i, r);
            if (s == null)
                throw new ui(5103,!1);
            return s
        }
        ,
        ic.getAllAngularTestabilities = () => t.getAllTestabilities(),
        ic.getAllAngularRootElements = () => t.getAllRootElements();
        let n = i => {
            let r = ic.getAllAngularTestabilities()
              , s = r.length
              , o = function() {
                s--,
                s == 0 && i()
            };
            r.forEach(a => {
                a.whenStable(o)
            }
            )
        }
        ;
        ic.frameworkStabilizers || (ic.frameworkStabilizers = []),
        ic.frameworkStabilizers.push(n)
    }
    findTestabilityInTree(t, n, i) {
        if (n == null)
            return null;
        let r = t.getTestability(n);
        return r ?? (i ? I5().isShadowRoot(n) ? this.findTestabilityInTree(t, n.host, !0) : this.findTestabilityInTree(t, n.parentElement, !0) : null)
    }
}
  , II = ( () => {
    class e {
        build() {
            return new XMLHttpRequest
        }
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac
        })
    }
    return e
}
)()
  , kf = new Je("")
  , Uy = ( () => {
    class e {
        _zone;
        _plugins;
        _eventNameToPlugin = new Map;
        constructor(n, i) {
            this._zone = i,
            n.forEach(r => {
                r.manager = this
            }
            ),
            this._plugins = n.slice().reverse()
        }
        addEventListener(n, i, r) {
            return this._findPluginFor(i).addEventListener(n, i, r)
        }
        getZone() {
            return this._zone
        }
        _findPluginFor(n) {
            let i = this._eventNameToPlugin.get(n);
            if (i)
                return i;
            if (i = this._plugins.find(s => s.supports(n)),
            !i)
                throw new ui(5101,!1);
            return this._eventNameToPlugin.set(n, i),
            i
        }
        static \u0275fac = function(i) {
            return new (i || e)(xe(kf),xe(Rn))
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac
        })
    }
    return e
}
)()
  , cd = class {
    _doc;
    constructor(t) {
        this._doc = t
    }
    manager
}
  , Pf = "ng-app-id";
function Ry(e) {
    for (let t of e)
        t.remove()
}
function Dy(e, t) {
    let n = t.createElement("style");
    return n.textContent = e,
    n
}
function RI(e, t, n, i) {
    let r = e.head?.querySelectorAll(`style[${Pf}="${t}"],link[${Pf}="${t}"]`);
    if (r)
        for (let s of r)
            s.removeAttribute(Pf),
            s instanceof HTMLLinkElement ? i.set(s.href.slice(s.href.lastIndexOf("/") + 1), {
                usage: 0,
                elements: [s]
            }) : s.textContent && n.set(s.textContent, {
                usage: 0,
                elements: [s]
            })
}
function P6(e, t) {
    let n = t.createElement("link");
    return n.setAttribute("rel", "stylesheet"),
    n.setAttribute("href", e),
    n
}
var Hy = ( () => {
    class e {
        doc;
        appId;
        nonce;
        inline = new Map;
        external = new Map;
        hosts = new Set;
        isServer;
        constructor(n, i, r, s={}) {
            this.doc = n,
            this.appId = i,
            this.nonce = r,
            this.isServer = h4(s),
            RI(n, i, this.inline, this.external),
            this.hosts.add(n.head)
        }
        addStyles(n, i) {
            for (let r of n)
                this.addUsage(r, this.inline, Dy);
            i?.forEach(r => this.addUsage(r, this.external, P6))
        }
        removeStyles(n, i) {
            for (let r of n)
                this.removeUsage(r, this.inline);
            i?.forEach(r => this.removeUsage(r, this.external))
        }
        addUsage(n, i, r) {
            let s = i.get(n);
            s ? s.usage++ : i.set(n, {
                usage: 1,
                elements: [...this.hosts].map(o => this.addElement(o, r(n, this.doc)))
            })
        }
        removeUsage(n, i) {
            let r = i.get(n);
            r && (r.usage--,
            r.usage <= 0 && (Ry(r.elements),
            i.delete(n)))
        }
        ngOnDestroy() {
            for (let[,{elements: n}] of [...this.inline, ...this.external])
                Ry(n);
            this.hosts.clear()
        }
        addHost(n) {
            this.hosts.add(n);
            for (let[i,{elements: r}] of this.inline)
                r.push(this.addElement(n, Dy(i, this.doc)));
            for (let[i,{elements: r}] of this.external)
                r.push(this.addElement(n, P6(i, this.doc)))
        }
        removeHost(n) {
            this.hosts.delete(n)
        }
        addElement(n, i) {
            return this.nonce && i.setAttribute("nonce", this.nonce),
            this.isServer && i.setAttribute(Pf, this.appId),
            n.appendChild(i)
        }
        static \u0275fac = function(i) {
            return new (i || e)(xe(Nn),xe(i4),xe(r4, 8),xe(qs))
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac
        })
    }
    return e
}
)()
  , E6 = {
    svg: "http://www.w3.org/2000/svg",
    xhtml: "http://www.w3.org/1999/xhtml",
    xlink: "http://www.w3.org/1999/xlink",
    xml: "http://www.w3.org/XML/1998/namespace",
    xmlns: "http://www.w3.org/2000/xmlns/",
    math: "http://www.w3.org/1998/Math/MathML"
}
  , I6 = /%COMP%/g
  , Gy = "%COMP%"
  , DI = `_nghost-${Gy}`
  , NI = `_ngcontent-${Gy}`
  , FI = !0
  , LI = new Je("",{
    providedIn: "root",
    factory: () => FI
});
function BI(e) {
    return NI.replace(I6, e)
}
function UI(e) {
    return DI.replace(I6, e)
}
function Vy(e, t) {
    return t.map(n => n.replace(I6, e))
}
var Ny = ( () => {
    class e {
        eventManager;
        sharedStylesHost;
        appId;
        removeStylesOnCompDestroy;
        doc;
        platformId;
        ngZone;
        nonce;
        rendererByCompId = new Map;
        defaultRenderer;
        platformIsServer;
        constructor(n, i, r, s, o, a, c, l=null) {
            this.eventManager = n,
            this.sharedStylesHost = i,
            this.appId = r,
            this.removeStylesOnCompDestroy = s,
            this.doc = o,
            this.platformId = a,
            this.ngZone = c,
            this.nonce = l,
            this.platformIsServer = h4(a),
            this.defaultRenderer = new ld(n,o,c,this.platformIsServer)
        }
        createRenderer(n, i) {
            if (!n || !i)
                return this.defaultRenderer;
            this.platformIsServer && i.encapsulation === Ph.ShadowDom && (i = ve(C({}, i), {
                encapsulation: Ph.Emulated
            }));
            let r = this.getOrCreateRenderer(n, i);
            return r instanceof Af ? r.applyToHost(n) : r instanceof ud && r.applyStyles(),
            r
        }
        getOrCreateRenderer(n, i) {
            let r = this.rendererByCompId
              , s = r.get(i.id);
            if (!s) {
                let o = this.doc
                  , a = this.ngZone
                  , c = this.eventManager
                  , l = this.sharedStylesHost
                  , u = this.removeStylesOnCompDestroy
                  , h = this.platformIsServer;
                switch (i.encapsulation) {
                case Ph.Emulated:
                    s = new Af(c,l,i,this.appId,u,o,a,h);
                    break;
                case Ph.ShadowDom:
                    return new k6(c,l,n,i,o,a,this.nonce,h);
                default:
                    s = new ud(c,l,i,u,o,a,h);
                    break
                }
                r.set(i.id, s)
            }
            return s
        }
        ngOnDestroy() {
            this.rendererByCompId.clear()
        }
        static \u0275fac = function(i) {
            return new (i || e)(xe(Uy),xe(Hy),xe(i4),xe(LI),xe(Nn),xe(qs),xe(Rn),xe(r4))
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac
        })
    }
    return e
}
)()
  , ld = class {
    eventManager;
    doc;
    ngZone;
    platformIsServer;
    data = Object.create(null);
    throwOnSyntheticProps = !0;
    constructor(t, n, i, r) {
        this.eventManager = t,
        this.doc = n,
        this.ngZone = i,
        this.platformIsServer = r
    }
    destroy() {}
    destroyNode = null;
    createElement(t, n) {
        return n ? this.doc.createElementNS(E6[n] || n, t) : this.doc.createElement(t)
    }
    createComment(t) {
        return this.doc.createComment(t)
    }
    createText(t) {
        return this.doc.createTextNode(t)
    }
    appendChild(t, n) {
        (Fy(t) ? t.content : t).appendChild(n)
    }
    insertBefore(t, n, i) {
        t && (Fy(t) ? t.content : t).insertBefore(n, i)
    }
    removeChild(t, n) {
        n.remove()
    }
    selectRootElement(t, n) {
        let i = typeof t == "string" ? this.doc.querySelector(t) : t;
        if (!i)
            throw new ui(-5104,!1);
        return n || (i.textContent = ""),
        i
    }
    parentNode(t) {
        return t.parentNode
    }
    nextSibling(t) {
        return t.nextSibling
    }
    setAttribute(t, n, i, r) {
        if (r) {
            n = r + ":" + n;
            let s = E6[r];
            s ? t.setAttributeNS(s, n, i) : t.setAttribute(n, i)
        } else
            t.setAttribute(n, i)
    }
    removeAttribute(t, n, i) {
        if (i) {
            let r = E6[i];
            r ? t.removeAttributeNS(r, n) : t.removeAttribute(`${i}:${n}`)
        } else
            t.removeAttribute(n)
    }
    addClass(t, n) {
        t.classList.add(n)
    }
    removeClass(t, n) {
        t.classList.remove(n)
    }
    setStyle(t, n, i, r) {
        r & (kh.DashCase | kh.Important) ? t.style.setProperty(n, i, r & kh.Important ? "important" : "") : t.style[n] = i
    }
    removeStyle(t, n, i) {
        i & kh.DashCase ? t.style.removeProperty(n) : t.style[n] = ""
    }
    setProperty(t, n, i) {
        t != null && (t[n] = i)
    }
    setValue(t, n) {
        t.nodeValue = n
    }
    listen(t, n, i) {
        if (typeof t == "string" && (t = I5().getGlobalEventTarget(this.doc, t),
        !t))
            throw new Error(`Unsupported event target ${t} for event ${n}`);
        return this.eventManager.addEventListener(t, n, this.decoratePreventDefault(i))
    }
    decoratePreventDefault(t) {
        return n => {
            if (n === "__ngUnwrap__")
                return t;
            (this.platformIsServer ? this.ngZone.runGuarded( () => t(n)) : t(n)) === !1 && n.preventDefault()
        }
    }
}
;
function Fy(e) {
    return e.tagName === "TEMPLATE" && e.content !== void 0
}
var k6 = class extends ld {
    sharedStylesHost;
    hostEl;
    shadowRoot;
    constructor(t, n, i, r, s, o, a, c) {
        super(t, s, o, c),
        this.sharedStylesHost = n,
        this.hostEl = i,
        this.shadowRoot = i.attachShadow({
            mode: "open"
        }),
        this.sharedStylesHost.addHost(this.shadowRoot);
        let l = Vy(r.id, r.styles);
        for (let h of l) {
            let d = document.createElement("style");
            a && d.setAttribute("nonce", a),
            d.textContent = h,
            this.shadowRoot.appendChild(d)
        }
        let u = r.getExternalStyles?.();
        if (u)
            for (let h of u) {
                let d = P6(h, s);
                a && d.setAttribute("nonce", a),
                this.shadowRoot.appendChild(d)
            }
    }
    nodeOrShadowRoot(t) {
        return t === this.hostEl ? this.shadowRoot : t
    }
    appendChild(t, n) {
        return super.appendChild(this.nodeOrShadowRoot(t), n)
    }
    insertBefore(t, n, i) {
        return super.insertBefore(this.nodeOrShadowRoot(t), n, i)
    }
    removeChild(t, n) {
        return super.removeChild(null, n)
    }
    parentNode(t) {
        return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))
    }
    destroy() {
        this.sharedStylesHost.removeHost(this.shadowRoot)
    }
}
  , ud = class extends ld {
    sharedStylesHost;
    removeStylesOnCompDestroy;
    styles;
    styleUrls;
    constructor(t, n, i, r, s, o, a, c) {
        super(t, s, o, a),
        this.sharedStylesHost = n,
        this.removeStylesOnCompDestroy = r,
        this.styles = c ? Vy(c, i.styles) : i.styles,
        this.styleUrls = i.getExternalStyles?.(c)
    }
    applyStyles() {
        this.sharedStylesHost.addStyles(this.styles, this.styleUrls)
    }
    destroy() {
        this.removeStylesOnCompDestroy && this.sharedStylesHost.removeStyles(this.styles, this.styleUrls)
    }
}
  , Af = class extends ud {
    contentAttr;
    hostAttr;
    constructor(t, n, i, r, s, o, a, c) {
        let l = r + "-" + i.id;
        super(t, n, i, s, o, a, c, l),
        this.contentAttr = BI(l),
        this.hostAttr = UI(l)
    }
    applyToHost(t) {
        this.applyStyles(),
        this.setAttribute(t, this.hostAttr, "")
    }
    createElement(t, n) {
        let i = super.createElement(t, n);
        return super.setAttribute(i, this.contentAttr, ""),
        i
    }
}
  , HI = ( () => {
    class e extends cd {
        constructor(n) {
            super(n)
        }
        supports(n) {
            return !0
        }
        addEventListener(n, i, r) {
            return n.addEventListener(i, r, !1),
            () => this.removeEventListener(n, i, r)
        }
        removeEventListener(n, i, r) {
            return n.removeEventListener(i, r)
        }
        static \u0275fac = function(i) {
            return new (i || e)(xe(Nn))
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac
        })
    }
    return e
}
)()
  , Ly = ["alt", "control", "meta", "shift"]
  , GI = {
    "\b": "Backspace",
    "	": "Tab",
    "\x7F": "Delete",
    "\x1B": "Escape",
    Del: "Delete",
    Esc: "Escape",
    Left: "ArrowLeft",
    Right: "ArrowRight",
    Up: "ArrowUp",
    Down: "ArrowDown",
    Menu: "ContextMenu",
    Scroll: "ScrollLock",
    Win: "OS"
}
  , VI = {
    alt: e => e.altKey,
    control: e => e.ctrlKey,
    meta: e => e.metaKey,
    shift: e => e.shiftKey
}
  , $I = ( () => {
    class e extends cd {
        constructor(n) {
            super(n)
        }
        supports(n) {
            return e.parseEventName(n) != null
        }
        addEventListener(n, i, r) {
            let s = e.parseEventName(i)
              , o = e.eventCallback(s.fullKey, r, this.manager.getZone());
            return this.manager.getZone().runOutsideAngular( () => I5().onAndCancel(n, s.domEventName, o))
        }
        static parseEventName(n) {
            let i = n.toLowerCase().split(".")
              , r = i.shift();
            if (i.length === 0 || !(r === "keydown" || r === "keyup"))
                return null;
            let s = e._normalizeKey(i.pop())
              , o = ""
              , a = i.indexOf("code");
            if (a > -1 && (i.splice(a, 1),
            o = "code."),
            Ly.forEach(l => {
                let u = i.indexOf(l);
                u > -1 && (i.splice(u, 1),
                o += l + ".")
            }
            ),
            o += s,
            i.length != 0 || s.length === 0)
                return null;
            let c = {};
            return c.domEventName = r,
            c.fullKey = o,
            c
        }
        static matchEventFullKeyCode(n, i) {
            let r = GI[n.key] || n.key
              , s = "";
            return i.indexOf("code.") > -1 && (r = n.code,
            s = "code."),
            r == null || !r ? !1 : (r = r.toLowerCase(),
            r === " " ? r = "space" : r === "." && (r = "dot"),
            Ly.forEach(o => {
                if (o !== r) {
                    let a = VI[o];
                    a(n) && (s += o + ".")
                }
            }
            ),
            s += r,
            s === i)
        }
        static eventCallback(n, i, r) {
            return s => {
                e.matchEventFullKeyCode(s, n) && r.runGuarded( () => i(s))
            }
        }
        static _normalizeKey(n) {
            return n === "esc" ? "escape" : n
        }
        static \u0275fac = function(i) {
            return new (i || e)(xe(Nn))
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac
        })
    }
    return e
}
)();
function cse(e, t) {
    return Ev(C({
        rootComponent: e
    }, WI(t)))
}
function WI(e) {
    return {
        appProviders: [...$y, ...e?.providers ?? []],
        platformProviders: XI
    }
}
function jI() {
    O6.makeCurrent()
}
function qI() {
    return new n4
}
function zI() {
    return hv(document),
    document
}
var XI = [{
    provide: qs,
    useValue: Bv
}, {
    provide: dv,
    useValue: jI,
    multi: !0
}, {
    provide: Nn,
    useFactory: zI,
    deps: []
}];
var KI = new Je("")
  , YI = [{
    provide: x5,
    useClass: M6,
    deps: []
}, {
    provide: yv,
    useClass: w5,
    deps: [Rn, a4, x5]
}, {
    provide: w5,
    useClass: w5,
    deps: [Rn, a4, x5]
}]
  , $y = [{
    provide: lv,
    useValue: "root"
}, {
    provide: n4,
    useFactory: qI,
    deps: []
}, {
    provide: kf,
    useClass: HI,
    multi: !0,
    deps: [Nn, Rn, qs]
}, {
    provide: kf,
    useClass: $I,
    multi: !0,
    deps: [Nn]
}, Ny, Hy, Uy, {
    provide: gv,
    useExisting: Ny
}, {
    provide: Hv,
    useClass: II,
    deps: []
}, []]
  , lse = ( () => {
    class e {
        constructor(n) {}
        static \u0275fac = function(i) {
            return new (i || e)(xe(KI, 12))
        }
        ;
        static \u0275mod = nr({
            type: e
        });
        static \u0275inj = tr({
            providers: [...$y, ...YI],
            imports: [fc, Cv]
        })
    }
    return e
}
)();
var Wy = ( () => {
    class e {
        _doc;
        constructor(n) {
            this._doc = n
        }
        getTitle() {
            return this._doc.title
        }
        setTitle(n) {
            this._doc.title = n || ""
        }
        static \u0275fac = function(i) {
            return new (i || e)(xe(Nn))
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac,
            providedIn: "root"
        })
    }
    return e
}
)();
var QI = {
    pan: !0,
    panstart: !0,
    panmove: !0,
    panend: !0,
    pancancel: !0,
    panleft: !0,
    panright: !0,
    panup: !0,
    pandown: !0,
    pinch: !0,
    pinchstart: !0,
    pinchmove: !0,
    pinchend: !0,
    pinchcancel: !0,
    pinchin: !0,
    pinchout: !0,
    press: !0,
    pressup: !0,
    rotate: !0,
    rotatestart: !0,
    rotatemove: !0,
    rotateend: !0,
    rotatecancel: !0,
    swipe: !0,
    swipeleft: !0,
    swiperight: !0,
    swipeup: !0,
    swipedown: !0,
    tap: !0,
    doubletap: !0
}
  , A6 = new Je("HammerGestureConfig")
  , jy = new Je("HammerLoader")
  , R6 = ( () => {
    class e {
        events = [];
        overrides = {};
        options;
        buildHammer(n) {
            let i = new Hammer(n,this.options);
            i.get("pinch").set({
                enable: !0
            }),
            i.get("rotate").set({
                enable: !0
            });
            for (let r in this.overrides)
                i.get(r).set(this.overrides[r]);
            return i
        }
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac
        })
    }
    return e
}
)()
  , JI = ( () => {
    class e extends cd {
        _config;
        console;
        loader;
        _loaderPromise = null;
        constructor(n, i, r, s) {
            super(n),
            this._config = i,
            this.console = r,
            this.loader = s
        }
        supports(n) {
            return !(!QI.hasOwnProperty(n.toLowerCase()) && !this.isCustomEvent(n) || !window.Hammer && !this.loader)
        }
        addEventListener(n, i, r) {
            let s = this.manager.getZone();
            if (i = i.toLowerCase(),
            !window.Hammer && this.loader) {
                this._loaderPromise = this._loaderPromise || s.runOutsideAngular( () => this.loader());
                let o = !1
                  , a = () => {
                    o = !0
                }
                ;
                return s.runOutsideAngular( () => this._loaderPromise.then( () => {
                    if (!window.Hammer) {
                        a = () => {}
                        ;
                        return
                    }
                    o || (a = this.addEventListener(n, i, r))
                }
                ).catch( () => {
                    a = () => {}
                }
                )),
                () => {
                    a()
                }
            }
            return s.runOutsideAngular( () => {
                let o = this._config.buildHammer(n)
                  , a = function(c) {
                    s.runGuarded(function() {
                        r(c)
                    })
                };
                return o.on(i, a),
                () => {
                    o.off(i, a),
                    typeof o.destroy == "function" && o.destroy()
                }
            }
            )
        }
        isCustomEvent(n) {
            return this._config.events.indexOf(n) > -1
        }
        static \u0275fac = function(i) {
            return new (i || e)(xe(Nn),xe(A6),xe(B0),xe(jy, 8))
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac
        })
    }
    return e
}
)()
  , use = ( () => {
    class e {
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275mod = nr({
            type: e
        });
        static \u0275inj = tr({
            providers: [{
                provide: kf,
                useClass: JI,
                multi: !0,
                deps: [Nn, A6, B0, [new _5, jy]]
            }, {
                provide: A6,
                useClass: R6,
                deps: []
            }]
        })
    }
    return e
}
)();
var Ct = "primary"
  , Ed = Symbol("RouteTitle")
  , B6 = class {
    params;
    constructor(t) {
        this.params = t || {}
    }
    has(t) {
        return Object.prototype.hasOwnProperty.call(this.params, t)
    }
    get(t) {
        if (this.has(t)) {
            let n = this.params[t];
            return Array.isArray(n) ? n[0] : n
        }
        return null
    }
    getAll(t) {
        if (this.has(t)) {
            let n = this.params[t];
            return Array.isArray(n) ? n : [n]
        }
        return []
    }
    get keys() {
        return Object.keys(this.params)
    }
}
;
function ou(e) {
    return new B6(e)
}
function tR(e, t, n) {
    let i = n.path.split("/");
    if (i.length > e.length || n.pathMatch === "full" && (t.hasChildren() || i.length < e.length))
        return null;
    let r = {};
    for (let s = 0; s < i.length; s++) {
        let o = i[s]
          , a = e[s];
        if (o[0] === ":")
            r[o.substring(1)] = a;
        else if (o !== a.path)
            return null
    }
    return {
        consumed: e.slice(0, i.length),
        posParams: r
    }
}
function nR(e, t) {
    if (e.length !== t.length)
        return !1;
    for (let n = 0; n < e.length; ++n)
        if (!Ao(e[n], t[n]))
            return !1;
    return !0
}
function Ao(e, t) {
    let n = e ? U6(e) : void 0
      , i = t ? U6(t) : void 0;
    if (!n || !i || n.length != i.length)
        return !1;
    let r;
    for (let s = 0; s < n.length; s++)
        if (r = n[s],
        !nS(e[r], t[r]))
            return !1;
    return !0
}
function U6(e) {
    return [...Object.keys(e), ...Object.getOwnPropertySymbols(e)]
}
function nS(e, t) {
    if (Array.isArray(e) && Array.isArray(t)) {
        if (e.length !== t.length)
            return !1;
        let n = [...e].sort()
          , i = [...t].sort();
        return n.every( (r, s) => i[s] === r)
    } else
        return e === t
}
function iS(e) {
    return e.length > 0 ? e[e.length - 1] : null
}
function Sc(e) {
    return Y8(e) ? e : Sv(e) ? Yn(Promise.resolve(e)) : Be(e)
}
var iR = {
    exact: sS,
    subset: oS
}
  , rS = {
    exact: rR,
    subset: sR,
    ignored: () => !0
};
function qy(e, t, n) {
    return iR[n.paths](e.root, t.root, n.matrixParams) && rS[n.queryParams](e.queryParams, t.queryParams) && !(n.fragment === "exact" && e.fragment !== t.fragment)
}
function rR(e, t) {
    return Ao(e, t)
}
function sS(e, t, n) {
    if (!Cl(e.segments, t.segments) || !Df(e.segments, t.segments, n) || e.numberOfChildren !== t.numberOfChildren)
        return !1;
    for (let i in t.children)
        if (!e.children[i] || !sS(e.children[i], t.children[i], n))
            return !1;
    return !0
}
function sR(e, t) {
    return Object.keys(t).length <= Object.keys(e).length && Object.keys(t).every(n => nS(e[n], t[n]))
}
function oS(e, t, n) {
    return aS(e, t, t.segments, n)
}
function aS(e, t, n, i) {
    if (e.segments.length > n.length) {
        let r = e.segments.slice(0, n.length);
        return !(!Cl(r, n) || t.hasChildren() || !Df(r, n, i))
    } else if (e.segments.length === n.length) {
        if (!Cl(e.segments, n) || !Df(e.segments, n, i))
            return !1;
        for (let r in t.children)
            if (!e.children[r] || !oS(e.children[r], t.children[r], i))
                return !1;
        return !0
    } else {
        let r = n.slice(0, e.segments.length)
          , s = n.slice(e.segments.length);
        return !Cl(e.segments, r) || !Df(e.segments, r, i) || !e.children[Ct] ? !1 : aS(e.children[Ct], t, s, i)
    }
}
function Df(e, t, n) {
    return t.every( (i, r) => rS[n](e[r].parameters, i.parameters))
}
var ya = class {
    root;
    queryParams;
    fragment;
    _queryParamMap;
    constructor(t=new Kt([],{}), n={}, i=null) {
        this.root = t,
        this.queryParams = n,
        this.fragment = i
    }
    get queryParamMap() {
        return this._queryParamMap ??= ou(this.queryParams),
        this._queryParamMap
    }
    toString() {
        return cR.serialize(this)
    }
}
  , Kt = class {
    segments;
    children;
    parent = null;
    constructor(t, n) {
        this.segments = t,
        this.children = n,
        Object.values(n).forEach(i => i.parent = this)
    }
    hasChildren() {
        return this.numberOfChildren > 0
    }
    get numberOfChildren() {
        return Object.keys(this.children).length
    }
    toString() {
        return Nf(this)
    }
}
  , wl = class {
    path;
    parameters;
    _parameterMap;
    constructor(t, n) {
        this.path = t,
        this.parameters = n
    }
    get parameterMap() {
        return this._parameterMap ??= ou(this.parameters),
        this._parameterMap
    }
    toString() {
        return lS(this)
    }
}
;
function oR(e, t) {
    return Cl(e, t) && e.every( (n, i) => Ao(n.parameters, t[i].parameters))
}
function Cl(e, t) {
    return e.length !== t.length ? !1 : e.every( (n, i) => n.path === t[i].path)
}
function aR(e, t) {
    let n = [];
    return Object.entries(e.children).forEach( ([i,r]) => {
        i === Ct && (n = n.concat(t(r, i)))
    }
    ),
    Object.entries(e.children).forEach( ([i,r]) => {
        i !== Ct && (n = n.concat(t(r, i)))
    }
    ),
    n
}
var Td = ( () => {
    class e {
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: () => new au,
            providedIn: "root"
        })
    }
    return e
}
)()
  , au = class {
    parse(t) {
        let n = new G6(t);
        return new ya(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())
    }
    serialize(t) {
        let n = `/${hd(t.root, !0)}`
          , i = hR(t.queryParams)
          , r = typeof t.fragment == "string" ? `#${lR(t.fragment)}` : "";
        return `${n}${i}${r}`
    }
}
  , cR = new au;
function Nf(e) {
    return e.segments.map(t => lS(t)).join("/")
}
function hd(e, t) {
    if (!e.hasChildren())
        return Nf(e);
    if (t) {
        let n = e.children[Ct] ? hd(e.children[Ct], !1) : ""
          , i = [];
        return Object.entries(e.children).forEach( ([r,s]) => {
            r !== Ct && i.push(`${r}:${hd(s, !1)}`)
        }
        ),
        i.length > 0 ? `${n}(${i.join("//")})` : n
    } else {
        let n = aR(e, (i, r) => r === Ct ? [hd(e.children[Ct], !1)] : [`${r}:${hd(i, !1)}`]);
        return Object.keys(e.children).length === 1 && e.children[Ct] != null ? `${Nf(e)}/${n[0]}` : `${Nf(e)}/(${n.join("//")})`
    }
}
function cS(e) {
    return encodeURIComponent(e).replace(/%40/g, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",")
}
function If(e) {
    return cS(e).replace(/%3B/gi, ";")
}
function lR(e) {
    return encodeURI(e)
}
function H6(e) {
    return cS(e).replace(/\(/g, "%28").replace(/\)/g, "%29").replace(/%26/gi, "&")
}
function Ff(e) {
    return decodeURIComponent(e)
}
function zy(e) {
    return Ff(e.replace(/\+/g, "%20"))
}
function lS(e) {
    return `${H6(e.path)}${uR(e.parameters)}`
}
function uR(e) {
    return Object.entries(e).map( ([t,n]) => `;${H6(t)}=${H6(n)}`).join("")
}
function hR(e) {
    let t = Object.entries(e).map( ([n,i]) => Array.isArray(i) ? i.map(r => `${If(n)}=${If(r)}`).join("&") : `${If(n)}=${If(i)}`).filter(n => n);
    return t.length ? `?${t.join("&")}` : ""
}
var dR = /^[^\/()?;#]+/;
function D6(e) {
    let t = e.match(dR);
    return t ? t[0] : ""
}
var fR = /^[^\/()?;=#]+/;
function pR(e) {
    let t = e.match(fR);
    return t ? t[0] : ""
}
var gR = /^[^=?&#]+/;
function mR(e) {
    let t = e.match(gR);
    return t ? t[0] : ""
}
var vR = /^[^&#]+/;
function _R(e) {
    let t = e.match(vR);
    return t ? t[0] : ""
}
var G6 = class {
    url;
    remaining;
    constructor(t) {
        this.url = t,
        this.remaining = t
    }
    parseRootSegment() {
        return this.consumeOptional("/"),
        this.remaining === "" || this.peekStartsWith("?") || this.peekStartsWith("#") ? new Kt([],{}) : new Kt([],this.parseChildren())
    }
    parseQueryParams() {
        let t = {};
        if (this.consumeOptional("?"))
            do
                this.parseQueryParam(t);
            while (this.consumeOptional("&"));
        return t
    }
    parseFragment() {
        return this.consumeOptional("#") ? decodeURIComponent(this.remaining) : null
    }
    parseChildren() {
        if (this.remaining === "")
            return {};
        this.consumeOptional("/");
        let t = [];
        for (this.peekStartsWith("(") || t.push(this.parseSegment()); this.peekStartsWith("/") && !this.peekStartsWith("//") && !this.peekStartsWith("/("); )
            this.capture("/"),
            t.push(this.parseSegment());
        let n = {};
        this.peekStartsWith("/(") && (this.capture("/"),
        n = this.parseParens(!0));
        let i = {};
        return this.peekStartsWith("(") && (i = this.parseParens(!1)),
        (t.length > 0 || Object.keys(n).length > 0) && (i[Ct] = new Kt(t,n)),
        i
    }
    parseSegment() {
        let t = D6(this.remaining);
        if (t === "" && this.peekStartsWith(";"))
            throw new ui(4009,!1);
        return this.capture(t),
        new wl(Ff(t),this.parseMatrixParams())
    }
    parseMatrixParams() {
        let t = {};
        for (; this.consumeOptional(";"); )
            this.parseParam(t);
        return t
    }
    parseParam(t) {
        let n = pR(this.remaining);
        if (!n)
            return;
        this.capture(n);
        let i = "";
        if (this.consumeOptional("=")) {
            let r = D6(this.remaining);
            r && (i = r,
            this.capture(i))
        }
        t[Ff(n)] = Ff(i)
    }
    parseQueryParam(t) {
        let n = mR(this.remaining);
        if (!n)
            return;
        this.capture(n);
        let i = "";
        if (this.consumeOptional("=")) {
            let o = _R(this.remaining);
            o && (i = o,
            this.capture(i))
        }
        let r = zy(n)
          , s = zy(i);
        if (t.hasOwnProperty(r)) {
            let o = t[r];
            Array.isArray(o) || (o = [o],
            t[r] = o),
            o.push(s)
        } else
            t[r] = s
    }
    parseParens(t) {
        let n = {};
        for (this.capture("("); !this.consumeOptional(")") && this.remaining.length > 0; ) {
            let i = D6(this.remaining)
              , r = this.remaining[i.length];
            if (r !== "/" && r !== ")" && r !== ";")
                throw new ui(4010,!1);
            let s;
            i.indexOf(":") > -1 ? (s = i.slice(0, i.indexOf(":")),
            this.capture(s),
            this.capture(":")) : t && (s = Ct);
            let o = this.parseChildren();
            n[s] = Object.keys(o).length === 1 ? o[Ct] : new Kt([],o),
            this.consumeOptional("//")
        }
        return n
    }
    peekStartsWith(t) {
        return this.remaining.startsWith(t)
    }
    consumeOptional(t) {
        return this.peekStartsWith(t) ? (this.remaining = this.remaining.substring(t.length),
        !0) : !1
    }
    capture(t) {
        if (!this.consumeOptional(t))
            throw new ui(4011,!1)
    }
}
;
function uS(e) {
    return e.segments.length > 0 ? new Kt([],{
        [Ct]: e
    }) : e
}
function hS(e) {
    let t = {};
    for (let[i,r] of Object.entries(e.children)) {
        let s = hS(r);
        if (i === Ct && s.segments.length === 0 && s.hasChildren())
            for (let[o,a] of Object.entries(s.children))
                t[o] = a;
        else
            (s.segments.length > 0 || s.hasChildren()) && (t[i] = s)
    }
    let n = new Kt(e.segments,t);
    return yR(n)
}
function yR(e) {
    if (e.numberOfChildren === 1 && e.children[Ct]) {
        let t = e.children[Ct];
        return new Kt(e.segments.concat(t.segments),t.children)
    }
    return e
}
function El(e) {
    return e instanceof ya
}
function SR(e, t, n=null, i=null) {
    let r = dS(e);
    return fS(r, t, n, i)
}
function dS(e) {
    let t;
    function n(s) {
        let o = {};
        for (let c of s.children) {
            let l = n(c);
            o[c.outlet] = l
        }
        let a = new Kt(s.url,o);
        return s === e && (t = a),
        a
    }
    let i = n(e.root)
      , r = uS(i);
    return t ?? r
}
function fS(e, t, n, i) {
    let r = e;
    for (; r.parent; )
        r = r.parent;
    if (t.length === 0)
        return N6(r, r, r, n, i);
    let s = bR(t);
    if (s.toRoot())
        return N6(r, r, new Kt([],{}), n, i);
    let o = xR(s, r, e)
      , a = o.processChildren ? pd(o.segmentGroup, o.index, s.commands) : gS(o.segmentGroup, o.index, s.commands);
    return N6(r, o.segmentGroup, a, n, i)
}
function Lf(e) {
    return typeof e == "object" && e != null && !e.outlets && !e.segmentPath
}
function vd(e) {
    return typeof e == "object" && e != null && e.outlets
}
function N6(e, t, n, i, r) {
    let s = {};
    i && Object.entries(i).forEach( ([c,l]) => {
        s[c] = Array.isArray(l) ? l.map(u => `${u}`) : `${l}`
    }
    );
    let o;
    e === t ? o = n : o = pS(e, t, n);
    let a = uS(hS(o));
    return new ya(a,s,r)
}
function pS(e, t, n) {
    let i = {};
    return Object.entries(e.children).forEach( ([r,s]) => {
        s === t ? i[r] = n : i[r] = pS(s, t, n)
    }
    ),
    new Kt(e.segments,i)
}
var Bf = class {
    isAbsolute;
    numberOfDoubleDots;
    commands;
    constructor(t, n, i) {
        if (this.isAbsolute = t,
        this.numberOfDoubleDots = n,
        this.commands = i,
        t && i.length > 0 && Lf(i[0]))
            throw new ui(4003,!1);
        let r = i.find(vd);
        if (r && r !== iS(i))
            throw new ui(4004,!1)
    }
    toRoot() {
        return this.isAbsolute && this.commands.length === 1 && this.commands[0] == "/"
    }
}
;
function bR(e) {
    if (typeof e[0] == "string" && e.length === 1 && e[0] === "/")
        return new Bf(!0,0,e);
    let t = 0
      , n = !1
      , i = e.reduce( (r, s, o) => {
        if (typeof s == "object" && s != null) {
            if (s.outlets) {
                let a = {};
                return Object.entries(s.outlets).forEach( ([c,l]) => {
                    a[c] = typeof l == "string" ? l.split("/") : l
                }
                ),
                [...r, {
                    outlets: a
                }]
            }
            if (s.segmentPath)
                return [...r, s.segmentPath]
        }
        return typeof s != "string" ? [...r, s] : o === 0 ? (s.split("/").forEach( (a, c) => {
            c == 0 && a === "." || (c == 0 && a === "" ? n = !0 : a === ".." ? t++ : a != "" && r.push(a))
        }
        ),
        r) : [...r, s]
    }
    , []);
    return new Bf(n,t,i)
}
var iu = class {
    segmentGroup;
    processChildren;
    index;
    constructor(t, n, i) {
        this.segmentGroup = t,
        this.processChildren = n,
        this.index = i
    }
}
;
function xR(e, t, n) {
    if (e.isAbsolute)
        return new iu(t,!0,0);
    if (!n)
        return new iu(t,!1,NaN);
    if (n.parent === null)
        return new iu(n,!0,0);
    let i = Lf(e.commands[0]) ? 0 : 1
      , r = n.segments.length - 1 + i;
    return wR(n, r, e.numberOfDoubleDots)
}
function wR(e, t, n) {
    let i = e
      , r = t
      , s = n;
    for (; s > r; ) {
        if (s -= r,
        i = i.parent,
        !i)
            throw new ui(4005,!1);
        r = i.segments.length
    }
    return new iu(i,!1,r - s)
}
function CR(e) {
    return vd(e[0]) ? e[0].outlets : {
        [Ct]: e
    }
}
function gS(e, t, n) {
    if (e ??= new Kt([],{}),
    e.segments.length === 0 && e.hasChildren())
        return pd(e, t, n);
    let i = ER(e, t, n)
      , r = n.slice(i.commandIndex);
    if (i.match && i.pathIndex < e.segments.length) {
        let s = new Kt(e.segments.slice(0, i.pathIndex),{});
        return s.children[Ct] = new Kt(e.segments.slice(i.pathIndex),e.children),
        pd(s, 0, r)
    } else
        return i.match && r.length === 0 ? new Kt(e.segments,{}) : i.match && !e.hasChildren() ? V6(e, t, n) : i.match ? pd(e, 0, r) : V6(e, t, n)
}
function pd(e, t, n) {
    if (n.length === 0)
        return new Kt(e.segments,{});
    {
        let i = CR(n)
          , r = {};
        if (Object.keys(i).some(s => s !== Ct) && e.children[Ct] && e.numberOfChildren === 1 && e.children[Ct].segments.length === 0) {
            let s = pd(e.children[Ct], t, n);
            return new Kt(e.segments,s.children)
        }
        return Object.entries(i).forEach( ([s,o]) => {
            typeof o == "string" && (o = [o]),
            o !== null && (r[s] = gS(e.children[s], t, o))
        }
        ),
        Object.entries(e.children).forEach( ([s,o]) => {
            i[s] === void 0 && (r[s] = o)
        }
        ),
        new Kt(e.segments,r)
    }
}
function ER(e, t, n) {
    let i = 0
      , r = t
      , s = {
        match: !1,
        pathIndex: 0,
        commandIndex: 0
    };
    for (; r < e.segments.length; ) {
        if (i >= n.length)
            return s;
        let o = e.segments[r]
          , a = n[i];
        if (vd(a))
            break;
        let c = `${a}`
          , l = i < n.length - 1 ? n[i + 1] : null;
        if (r > 0 && c === void 0)
            break;
        if (c && l && typeof l == "object" && l.outlets === void 0) {
            if (!Ky(c, l, o))
                return s;
            i += 2
        } else {
            if (!Ky(c, {}, o))
                return s;
            i++
        }
        r++
    }
    return {
        match: !0,
        pathIndex: r,
        commandIndex: i
    }
}
function V6(e, t, n) {
    let i = e.segments.slice(0, t)
      , r = 0;
    for (; r < n.length; ) {
        let s = n[r];
        if (vd(s)) {
            let c = TR(s.outlets);
            return new Kt(i,c)
        }
        if (r === 0 && Lf(n[0])) {
            let c = e.segments[t];
            i.push(new wl(c.path,Xy(n[0]))),
            r++;
            continue
        }
        let o = vd(s) ? s.outlets[Ct] : `${s}`
          , a = r < n.length - 1 ? n[r + 1] : null;
        o && a && Lf(a) ? (i.push(new wl(o,Xy(a))),
        r += 2) : (i.push(new wl(o,{})),
        r++)
    }
    return new Kt(i,{})
}
function TR(e) {
    let t = {};
    return Object.entries(e).forEach( ([n,i]) => {
        typeof i == "string" && (i = [i]),
        i !== null && (t[n] = V6(new Kt([],{}), 0, i))
    }
    ),
    t
}
function Xy(e) {
    let t = {};
    return Object.entries(e).forEach( ([n,i]) => t[n] = `${i}`),
    t
}
function Ky(e, t, n) {
    return e == n.path && Ao(t, n.parameters)
}
var gd = "imperative"
  , Ci = function(e) {
    return e[e.NavigationStart = 0] = "NavigationStart",
    e[e.NavigationEnd = 1] = "NavigationEnd",
    e[e.NavigationCancel = 2] = "NavigationCancel",
    e[e.NavigationError = 3] = "NavigationError",
    e[e.RoutesRecognized = 4] = "RoutesRecognized",
    e[e.ResolveStart = 5] = "ResolveStart",
    e[e.ResolveEnd = 6] = "ResolveEnd",
    e[e.GuardsCheckStart = 7] = "GuardsCheckStart",
    e[e.GuardsCheckEnd = 8] = "GuardsCheckEnd",
    e[e.RouteConfigLoadStart = 9] = "RouteConfigLoadStart",
    e[e.RouteConfigLoadEnd = 10] = "RouteConfigLoadEnd",
    e[e.ChildActivationStart = 11] = "ChildActivationStart",
    e[e.ChildActivationEnd = 12] = "ChildActivationEnd",
    e[e.ActivationStart = 13] = "ActivationStart",
    e[e.ActivationEnd = 14] = "ActivationEnd",
    e[e.Scroll = 15] = "Scroll",
    e[e.NavigationSkipped = 16] = "NavigationSkipped",
    e
}(Ci || {})
  , Ps = class {
    id;
    url;
    constructor(t, n) {
        this.id = t,
        this.url = n
    }
}
  , yc = class extends Ps {
    type = Ci.NavigationStart;
    navigationTrigger;
    restoredState;
    constructor(t, n, i="imperative", r=null) {
        super(t, n),
        this.navigationTrigger = i,
        this.restoredState = r
    }
    toString() {
        return `NavigationStart(id: ${this.id}, url: '${this.url}')`
    }
}
  , Io = class extends Ps {
    urlAfterRedirects;
    type = Ci.NavigationEnd;
    constructor(t, n, i) {
        super(t, n),
        this.urlAfterRedirects = i
    }
    toString() {
        return `NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`
    }
}
  , ps = function(e) {
    return e[e.Redirect = 0] = "Redirect",
    e[e.SupersededByNewNavigation = 1] = "SupersededByNewNavigation",
    e[e.NoDataFromResolver = 2] = "NoDataFromResolver",
    e[e.GuardRejected = 3] = "GuardRejected",
    e
}(ps || {})
  , Uf = function(e) {
    return e[e.IgnoredSameUrlNavigation = 0] = "IgnoredSameUrlNavigation",
    e[e.IgnoredByUrlHandlingStrategy = 1] = "IgnoredByUrlHandlingStrategy",
    e
}(Uf || {})
  , _a = class extends Ps {
    reason;
    code;
    type = Ci.NavigationCancel;
    constructor(t, n, i, r) {
        super(t, n),
        this.reason = i,
        this.code = r
    }
    toString() {
        return `NavigationCancel(id: ${this.id}, url: '${this.url}')`
    }
}
  , Ro = class extends Ps {
    reason;
    code;
    type = Ci.NavigationSkipped;
    constructor(t, n, i, r) {
        super(t, n),
        this.reason = i,
        this.code = r
    }
}
  , _d = class extends Ps {
    error;
    target;
    type = Ci.NavigationError;
    constructor(t, n, i, r) {
        super(t, n),
        this.error = i,
        this.target = r
    }
    toString() {
        return `NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`
    }
}
  , Hf = class extends Ps {
    urlAfterRedirects;
    state;
    type = Ci.RoutesRecognized;
    constructor(t, n, i, r) {
        super(t, n),
        this.urlAfterRedirects = i,
        this.state = r
    }
    toString() {
        return `RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`
    }
}
  , $6 = class extends Ps {
    urlAfterRedirects;
    state;
    type = Ci.GuardsCheckStart;
    constructor(t, n, i, r) {
        super(t, n),
        this.urlAfterRedirects = i,
        this.state = r
    }
    toString() {
        return `GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`
    }
}
  , W6 = class extends Ps {
    urlAfterRedirects;
    state;
    shouldActivate;
    type = Ci.GuardsCheckEnd;
    constructor(t, n, i, r, s) {
        super(t, n),
        this.urlAfterRedirects = i,
        this.state = r,
        this.shouldActivate = s
    }
    toString() {
        return `GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`
    }
}
  , j6 = class extends Ps {
    urlAfterRedirects;
    state;
    type = Ci.ResolveStart;
    constructor(t, n, i, r) {
        super(t, n),
        this.urlAfterRedirects = i,
        this.state = r
    }
    toString() {
        return `ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`
    }
}
  , q6 = class extends Ps {
    urlAfterRedirects;
    state;
    type = Ci.ResolveEnd;
    constructor(t, n, i, r) {
        super(t, n),
        this.urlAfterRedirects = i,
        this.state = r
    }
    toString() {
        return `ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`
    }
}
  , z6 = class {
    route;
    type = Ci.RouteConfigLoadStart;
    constructor(t) {
        this.route = t
    }
    toString() {
        return `RouteConfigLoadStart(path: ${this.route.path})`
    }
}
  , X6 = class {
    route;
    type = Ci.RouteConfigLoadEnd;
    constructor(t) {
        this.route = t
    }
    toString() {
        return `RouteConfigLoadEnd(path: ${this.route.path})`
    }
}
  , K6 = class {
    snapshot;
    type = Ci.ChildActivationStart;
    constructor(t) {
        this.snapshot = t
    }
    toString() {
        return `ChildActivationStart(path: '${this.snapshot.routeConfig && this.snapshot.routeConfig.path || ""}')`
    }
}
  , Y6 = class {
    snapshot;
    type = Ci.ChildActivationEnd;
    constructor(t) {
        this.snapshot = t
    }
    toString() {
        return `ChildActivationEnd(path: '${this.snapshot.routeConfig && this.snapshot.routeConfig.path || ""}')`
    }
}
  , Q6 = class {
    snapshot;
    type = Ci.ActivationStart;
    constructor(t) {
        this.snapshot = t
    }
    toString() {
        return `ActivationStart(path: '${this.snapshot.routeConfig && this.snapshot.routeConfig.path || ""}')`
    }
}
  , J6 = class {
    snapshot;
    type = Ci.ActivationEnd;
    constructor(t) {
        this.snapshot = t
    }
    toString() {
        return `ActivationEnd(path: '${this.snapshot.routeConfig && this.snapshot.routeConfig.path || ""}')`
    }
}
  , Gf = class {
    routerEvent;
    position;
    anchor;
    type = Ci.Scroll;
    constructor(t, n, i) {
        this.routerEvent = t,
        this.position = n,
        this.anchor = i
    }
    toString() {
        let t = this.position ? `${this.position[0]}, ${this.position[1]}` : null;
        return `Scroll(anchor: '${this.anchor}', position: '${t}')`
    }
}
  , yd = class {
}
  , cu = class {
    url;
    navigationBehaviorOptions;
    constructor(t, n) {
        this.url = t,
        this.navigationBehaviorOptions = n
    }
}
;
function OR(e, t) {
    return e.providers && !e._injector && (e._injector = o4(e.providers, t, `Route: ${e.path}`)),
    e._injector ?? t
}
function Js(e) {
    return e.outlet || Ct
}
function MR(e, t) {
    let n = e.filter(i => Js(i) === t);
    return n.push(...e.filter(i => Js(i) !== t)),
    n
}
function Od(e) {
    if (!e)
        return null;
    if (e.routeConfig?._injector)
        return e.routeConfig._injector;
    for (let t = e.parent; t; t = t.parent) {
        let n = t.routeConfig;
        if (n?._loadedInjector)
            return n._loadedInjector;
        if (n?._injector)
            return n._injector
    }
    return null
}
var Z6 = class {
    rootInjector;
    outlet = null;
    route = null;
    children;
    attachRef = null;
    get injector() {
        return Od(this.route?.snapshot) ?? this.rootInjector
    }
    constructor(t) {
        this.rootInjector = t,
        this.children = new Md(this.rootInjector)
    }
}
  , Md = ( () => {
    class e {
        rootInjector;
        contexts = new Map;
        constructor(n) {
            this.rootInjector = n
        }
        onChildOutletCreated(n, i) {
            let r = this.getOrCreateContext(n);
            r.outlet = i,
            this.contexts.set(n, r)
        }
        onChildOutletDestroyed(n) {
            let i = this.getContext(n);
            i && (i.outlet = null,
            i.attachRef = null)
        }
        onOutletDeactivated() {
            let n = this.contexts;
            return this.contexts = new Map,
            n
        }
        onOutletReAttached(n) {
            this.contexts = n
        }
        getOrCreateContext(n) {
            let i = this.getContext(n);
            return i || (i = new Z6(this.rootInjector),
            this.contexts.set(n, i)),
            i
        }
        getContext(n) {
            return this.contexts.get(n) || null
        }
        static \u0275fac = function(i) {
            return new (i || e)(xe(rc))
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac,
            providedIn: "root"
        })
    }
    return e
}
)()
  , Vf = class {
    _root;
    constructor(t) {
        this._root = t
    }
    get root() {
        return this._root.value
    }
    parent(t) {
        let n = this.pathFromRoot(t);
        return n.length > 1 ? n[n.length - 2] : null
    }
    children(t) {
        let n = eg(t, this._root);
        return n ? n.children.map(i => i.value) : []
    }
    firstChild(t) {
        let n = eg(t, this._root);
        return n && n.children.length > 0 ? n.children[0].value : null
    }
    siblings(t) {
        let n = tg(t, this._root);
        return n.length < 2 ? [] : n[n.length - 2].children.map(r => r.value).filter(r => r !== t)
    }
    pathFromRoot(t) {
        return tg(t, this._root).map(n => n.value)
    }
}
;
function eg(e, t) {
    if (e === t.value)
        return t;
    for (let n of t.children) {
        let i = eg(e, n);
        if (i)
            return i
    }
    return null
}
function tg(e, t) {
    if (e === t.value)
        return [t];
    for (let n of t.children) {
        let i = tg(e, n);
        if (i.length)
            return i.unshift(t),
            i
    }
    return []
}
var fs = class {
    value;
    children;
    constructor(t, n) {
        this.value = t,
        this.children = n
    }
    toString() {
        return `TreeNode(${this.value})`
    }
}
;
function nu(e) {
    let t = {};
    return e && e.children.forEach(n => t[n.value.outlet] = n),
    t
}
var $f = class extends Vf {
    snapshot;
    constructor(t, n) {
        super(t),
        this.snapshot = n,
        ug(this, t)
    }
    toString() {
        return this.snapshot.toString()
    }
}
;
function mS(e) {
    let t = PR(e)
      , n = new Ne([new wl("",{})])
      , i = new Ne({})
      , r = new Ne({})
      , s = new Ne({})
      , o = new Ne("")
      , a = new Do(n,i,s,o,r,Ct,e,t.root);
    return a.snapshot = t.root,
    new $f(new fs(a,[]),t)
}
function PR(e) {
    let t = {}
      , n = {}
      , i = {}
      , r = ""
      , s = new ru([],t,i,r,n,Ct,e,null,{});
    return new jf("",new fs(s,[]))
}
var Do = class {
    urlSubject;
    paramsSubject;
    queryParamsSubject;
    fragmentSubject;
    dataSubject;
    outlet;
    component;
    snapshot;
    _futureSnapshot;
    _routerState;
    _paramMap;
    _queryParamMap;
    title;
    url;
    params;
    queryParams;
    fragment;
    data;
    constructor(t, n, i, r, s, o, a, c) {
        this.urlSubject = t,
        this.paramsSubject = n,
        this.queryParamsSubject = i,
        this.fragmentSubject = r,
        this.dataSubject = s,
        this.outlet = o,
        this.component = a,
        this._futureSnapshot = c,
        this.title = this.dataSubject?.pipe(We(l => l[Ed])) ?? Be(void 0),
        this.url = t,
        this.params = n,
        this.queryParams = i,
        this.fragment = r,
        this.data = s
    }
    get routeConfig() {
        return this._futureSnapshot.routeConfig
    }
    get root() {
        return this._routerState.root
    }
    get parent() {
        return this._routerState.parent(this)
    }
    get firstChild() {
        return this._routerState.firstChild(this)
    }
    get children() {
        return this._routerState.children(this)
    }
    get pathFromRoot() {
        return this._routerState.pathFromRoot(this)
    }
    get paramMap() {
        return this._paramMap ??= this.params.pipe(We(t => ou(t))),
        this._paramMap
    }
    get queryParamMap() {
        return this._queryParamMap ??= this.queryParams.pipe(We(t => ou(t))),
        this._queryParamMap
    }
    toString() {
        return this.snapshot ? this.snapshot.toString() : `Future(${this._futureSnapshot})`
    }
}
;
function Wf(e, t, n="emptyOnly") {
    let i, {routeConfig: r} = e;
    return t !== null && (n === "always" || r?.path === "" || !t.component && !t.routeConfig?.loadComponent) ? i = {
        params: C(C({}, t.params), e.params),
        data: C(C({}, t.data), e.data),
        resolve: C(C(C(C({}, e.data), t.data), r?.data), e._resolvedData)
    } : i = {
        params: C({}, e.params),
        data: C({}, e.data),
        resolve: C(C({}, e.data), e._resolvedData ?? {})
    },
    r && _S(r) && (i.resolve[Ed] = r.title),
    i
}
var ru = class {
    url;
    params;
    queryParams;
    fragment;
    data;
    outlet;
    component;
    routeConfig;
    _resolve;
    _resolvedData;
    _routerState;
    _paramMap;
    _queryParamMap;
    get title() {
        return this.data?.[Ed]
    }
    constructor(t, n, i, r, s, o, a, c, l) {
        this.url = t,
        this.params = n,
        this.queryParams = i,
        this.fragment = r,
        this.data = s,
        this.outlet = o,
        this.component = a,
        this.routeConfig = c,
        this._resolve = l
    }
    get root() {
        return this._routerState.root
    }
    get parent() {
        return this._routerState.parent(this)
    }
    get firstChild() {
        return this._routerState.firstChild(this)
    }
    get children() {
        return this._routerState.children(this)
    }
    get pathFromRoot() {
        return this._routerState.pathFromRoot(this)
    }
    get paramMap() {
        return this._paramMap ??= ou(this.params),
        this._paramMap
    }
    get queryParamMap() {
        return this._queryParamMap ??= ou(this.queryParams),
        this._queryParamMap
    }
    toString() {
        let t = this.url.map(i => i.toString()).join("/")
          , n = this.routeConfig ? this.routeConfig.path : "";
        return `Route(url:'${t}', path:'${n}')`
    }
}
  , jf = class extends Vf {
    url;
    constructor(t, n) {
        super(n),
        this.url = t,
        ug(this, n)
    }
    toString() {
        return vS(this._root)
    }
}
;
function ug(e, t) {
    t.value._routerState = e,
    t.children.forEach(n => ug(e, n))
}
function vS(e) {
    let t = e.children.length > 0 ? ` { ${e.children.map(vS).join(", ")} } ` : "";
    return `${e.value}${t}`
}
function F6(e) {
    if (e.snapshot) {
        let t = e.snapshot
          , n = e._futureSnapshot;
        e.snapshot = n,
        Ao(t.queryParams, n.queryParams) || e.queryParamsSubject.next(n.queryParams),
        t.fragment !== n.fragment && e.fragmentSubject.next(n.fragment),
        Ao(t.params, n.params) || e.paramsSubject.next(n.params),
        nR(t.url, n.url) || e.urlSubject.next(n.url),
        Ao(t.data, n.data) || e.dataSubject.next(n.data)
    } else
        e.snapshot = e._futureSnapshot,
        e.dataSubject.next(e._futureSnapshot.data)
}
function ng(e, t) {
    let n = Ao(e.params, t.params) && oR(e.url, t.url)
      , i = !e.parent != !t.parent;
    return n && !i && (!e.parent || ng(e.parent, t.parent))
}
function _S(e) {
    return typeof e.title == "string" || e.title === null
}
var kR = new Je("")
  , AR = ( () => {
    class e {
        activated = null;
        get activatedComponentRef() {
            return this.activated
        }
        _activatedRoute = null;
        name = Ct;
        activateEvents = new os;
        deactivateEvents = new os;
        attachEvents = new os;
        detachEvents = new os;
        routerOutletData = Ee(void 0);
        parentContexts = z(Md);
        location = z(b5);
        changeDetector = z(dc);
        inputBinder = z(Kf, {
            optional: !0
        });
        supportsBindingToComponentInputs = !0;
        ngOnChanges(n) {
            if (n.name) {
                let {firstChange: i, previousValue: r} = n.name;
                if (i)
                    return;
                this.isTrackedInParentContexts(r) && (this.deactivate(),
                this.parentContexts.onChildOutletDestroyed(r)),
                this.initializeOutletWithName()
            }
        }
        ngOnDestroy() {
            this.isTrackedInParentContexts(this.name) && this.parentContexts.onChildOutletDestroyed(this.name),
            this.inputBinder?.unsubscribeFromRouteData(this)
        }
        isTrackedInParentContexts(n) {
            return this.parentContexts.getContext(n)?.outlet === this
        }
        ngOnInit() {
            this.initializeOutletWithName()
        }
        initializeOutletWithName() {
            if (this.parentContexts.onChildOutletCreated(this.name, this),
            this.activated)
                return;
            let n = this.parentContexts.getContext(this.name);
            n?.route && (n.attachRef ? this.attach(n.attachRef, n.route) : this.activateWith(n.route, n.injector))
        }
        get isActivated() {
            return !!this.activated
        }
        get component() {
            if (!this.activated)
                throw new ui(4012,!1);
            return this.activated.instance
        }
        get activatedRoute() {
            if (!this.activated)
                throw new ui(4012,!1);
            return this._activatedRoute
        }
        get activatedRouteData() {
            return this._activatedRoute ? this._activatedRoute.snapshot.data : {}
        }
        detach() {
            if (!this.activated)
                throw new ui(4012,!1);
            this.location.detach();
            let n = this.activated;
            return this.activated = null,
            this._activatedRoute = null,
            this.detachEvents.emit(n.instance),
            n
        }
        attach(n, i) {
            this.activated = n,
            this._activatedRoute = i,
            this.location.insert(n.hostView),
            this.inputBinder?.bindActivatedRouteToOutletComponent(this),
            this.attachEvents.emit(n.instance)
        }
        deactivate() {
            if (this.activated) {
                let n = this.component;
                this.activated.destroy(),
                this.activated = null,
                this._activatedRoute = null,
                this.deactivateEvents.emit(n)
            }
        }
        activateWith(n, i) {
            if (this.isActivated)
                throw new ui(4013,!1);
            this._activatedRoute = n;
            let r = this.location
              , o = n.snapshot.component
              , a = this.parentContexts.getOrCreateContext(this.name).children
              , c = new ig(n,a,r.injector,this.routerOutletData);
            this.activated = r.createComponent(o, {
                index: r.length,
                injector: c,
                environmentInjector: i
            }),
            this.changeDetector.markForCheck(),
            this.inputBinder?.bindActivatedRouteToOutletComponent(this),
            this.activateEvents.emit(this.activated.instance)
        }
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275dir = as({
            type: e,
            selectors: [["router-outlet"]],
            inputs: {
                name: "name",
                routerOutletData: [1, "routerOutletData"]
            },
            outputs: {
                activateEvents: "activate",
                deactivateEvents: "deactivate",
                attachEvents: "attach",
                detachEvents: "detach"
            },
            exportAs: ["outlet"],
            features: [js]
        })
    }
    return e
}
)()
  , ig = class e {
    route;
    childContexts;
    parent;
    outletData;
    __ngOutletInjector(t) {
        return new e(this.route,this.childContexts,t,this.outletData)
    }
    constructor(t, n, i, r) {
        this.route = t,
        this.childContexts = n,
        this.parent = i,
        this.outletData = r
    }
    get(t, n) {
        return t === Do ? this.route : t === Md ? this.childContexts : t === kR ? this.outletData : this.parent.get(t, n)
    }
}
  , Kf = new Je("")
  , Yy = ( () => {
    class e {
        outletDataSubscriptions = new Map;
        bindActivatedRouteToOutletComponent(n) {
            this.unsubscribeFromRouteData(n),
            this.subscribeToRouteData(n)
        }
        unsubscribeFromRouteData(n) {
            this.outletDataSubscriptions.get(n)?.unsubscribe(),
            this.outletDataSubscriptions.delete(n)
        }
        subscribeToRouteData(n) {
            let {activatedRoute: i} = n
              , r = cl([i.queryParams, i.params, i.data]).pipe(Vt( ([s,o,a], c) => (a = C(C(C({}, s), o), a),
            c === 0 ? Be(a) : Promise.resolve(a)))).subscribe(s => {
                if (!n.isActivated || !n.activatedComponentRef || n.activatedRoute !== i || i.component === null) {
                    this.unsubscribeFromRouteData(n);
                    return
                }
                let o = Ov(i.component);
                if (!o) {
                    this.unsubscribeFromRouteData(n);
                    return
                }
                for (let {templateName: a} of o.inputs)
                    n.activatedComponentRef.setInput(a, s[a])
            }
            );
            this.outletDataSubscriptions.set(n, r)
        }
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac
        })
    }
    return e
}
)();
function IR(e, t, n) {
    let i = Sd(e, t._root, n ? n._root : void 0);
    return new $f(i,t)
}
function Sd(e, t, n) {
    if (n && e.shouldReuseRoute(t.value, n.value.snapshot)) {
        let i = n.value;
        i._futureSnapshot = t.value;
        let r = RR(e, t, n);
        return new fs(i,r)
    } else {
        if (e.shouldAttach(t.value)) {
            let s = e.retrieve(t.value);
            if (s !== null) {
                let o = s.route;
                return o.value._futureSnapshot = t.value,
                o.children = t.children.map(a => Sd(e, a)),
                o
            }
        }
        let i = DR(t.value)
          , r = t.children.map(s => Sd(e, s));
        return new fs(i,r)
    }
}
function RR(e, t, n) {
    return t.children.map(i => {
        for (let r of n.children)
            if (e.shouldReuseRoute(i.value, r.value.snapshot))
                return Sd(e, i, r);
        return Sd(e, i)
    }
    )
}
function DR(e) {
    return new Do(new Ne(e.url),new Ne(e.params),new Ne(e.queryParams),new Ne(e.fragment),new Ne(e.data),e.outlet,e.component,e)
}
var bd = class {
    redirectTo;
    navigationBehaviorOptions;
    constructor(t, n) {
        this.redirectTo = t,
        this.navigationBehaviorOptions = n
    }
}
  , yS = "ngNavigationCancelingError";
function qf(e, t) {
    let {redirectTo: n, navigationBehaviorOptions: i} = El(t) ? {
        redirectTo: t,
        navigationBehaviorOptions: void 0
    } : t
      , r = SS(!1, ps.Redirect);
    return r.url = n,
    r.navigationBehaviorOptions = i,
    r
}
function SS(e, t) {
    let n = new Error(`NavigationCancelingError: ${e || ""}`);
    return n[yS] = !0,
    n.cancellationCode = t,
    n
}
function NR(e) {
    return bS(e) && El(e.url)
}
function bS(e) {
    return !!e && e[yS]
}
var FR = (e, t, n, i) => We(r => (new rg(t,r.targetRouterState,r.currentRouterState,n,i).activate(e),
r))
  , rg = class {
    routeReuseStrategy;
    futureState;
    currState;
    forwardEvent;
    inputBindingEnabled;
    constructor(t, n, i, r, s) {
        this.routeReuseStrategy = t,
        this.futureState = n,
        this.currState = i,
        this.forwardEvent = r,
        this.inputBindingEnabled = s
    }
    activate(t) {
        let n = this.futureState._root
          , i = this.currState ? this.currState._root : null;
        this.deactivateChildRoutes(n, i, t),
        F6(this.futureState.root),
        this.activateChildRoutes(n, i, t)
    }
    deactivateChildRoutes(t, n, i) {
        let r = nu(n);
        t.children.forEach(s => {
            let o = s.value.outlet;
            this.deactivateRoutes(s, r[o], i),
            delete r[o]
        }
        ),
        Object.values(r).forEach(s => {
            this.deactivateRouteAndItsChildren(s, i)
        }
        )
    }
    deactivateRoutes(t, n, i) {
        let r = t.value
          , s = n ? n.value : null;
        if (r === s)
            if (r.component) {
                let o = i.getContext(r.outlet);
                o && this.deactivateChildRoutes(t, n, o.children)
            } else
                this.deactivateChildRoutes(t, n, i);
        else
            s && this.deactivateRouteAndItsChildren(n, i)
    }
    deactivateRouteAndItsChildren(t, n) {
        t.value.component && this.routeReuseStrategy.shouldDetach(t.value.snapshot) ? this.detachAndStoreRouteSubtree(t, n) : this.deactivateRouteAndOutlet(t, n)
    }
    detachAndStoreRouteSubtree(t, n) {
        let i = n.getContext(t.value.outlet)
          , r = i && t.value.component ? i.children : n
          , s = nu(t);
        for (let o of Object.values(s))
            this.deactivateRouteAndItsChildren(o, r);
        if (i && i.outlet) {
            let o = i.outlet.detach()
              , a = i.children.onOutletDeactivated();
            this.routeReuseStrategy.store(t.value.snapshot, {
                componentRef: o,
                route: t,
                contexts: a
            })
        }
    }
    deactivateRouteAndOutlet(t, n) {
        let i = n.getContext(t.value.outlet)
          , r = i && t.value.component ? i.children : n
          , s = nu(t);
        for (let o of Object.values(s))
            this.deactivateRouteAndItsChildren(o, r);
        i && (i.outlet && (i.outlet.deactivate(),
        i.children.onOutletDeactivated()),
        i.attachRef = null,
        i.route = null)
    }
    activateChildRoutes(t, n, i) {
        let r = nu(n);
        t.children.forEach(s => {
            this.activateRoutes(s, r[s.value.outlet], i),
            this.forwardEvent(new J6(s.value.snapshot))
        }
        ),
        t.children.length && this.forwardEvent(new Y6(t.value.snapshot))
    }
    activateRoutes(t, n, i) {
        let r = t.value
          , s = n ? n.value : null;
        if (F6(r),
        r === s)
            if (r.component) {
                let o = i.getOrCreateContext(r.outlet);
                this.activateChildRoutes(t, n, o.children)
            } else
                this.activateChildRoutes(t, n, i);
        else if (r.component) {
            let o = i.getOrCreateContext(r.outlet);
            if (this.routeReuseStrategy.shouldAttach(r.snapshot)) {
                let a = this.routeReuseStrategy.retrieve(r.snapshot);
                this.routeReuseStrategy.store(r.snapshot, null),
                o.children.onOutletReAttached(a.contexts),
                o.attachRef = a.componentRef,
                o.route = a.route.value,
                o.outlet && o.outlet.attach(a.componentRef, a.route.value),
                F6(a.route.value),
                this.activateChildRoutes(t, null, o.children)
            } else
                o.attachRef = null,
                o.route = r,
                o.outlet && o.outlet.activateWith(r, o.injector),
                this.activateChildRoutes(t, null, o.children)
        } else
            this.activateChildRoutes(t, null, i)
    }
}
  , zf = class {
    path;
    route;
    constructor(t) {
        this.path = t,
        this.route = this.path[this.path.length - 1]
    }
}
  , su = class {
    component;
    route;
    constructor(t, n) {
        this.component = t,
        this.route = n
    }
}
;
function LR(e, t, n) {
    let i = e._root
      , r = t ? t._root : null;
    return dd(i, r, n, [i.value])
}
function BR(e) {
    let t = e.routeConfig ? e.routeConfig.canActivateChild : null;
    return !t || t.length === 0 ? null : {
        node: e,
        guards: t
    }
}
function uu(e, t) {
    let n = Symbol()
      , i = t.get(e, n);
    return i === n ? typeof e == "function" && !av(e) ? e : t.get(e) : i
}
function dd(e, t, n, i, r={
    canDeactivateChecks: [],
    canActivateChecks: []
}) {
    let s = nu(t);
    return e.children.forEach(o => {
        UR(o, s[o.value.outlet], n, i.concat([o.value]), r),
        delete s[o.value.outlet]
    }
    ),
    Object.entries(s).forEach( ([o,a]) => md(a, n.getContext(o), r)),
    r
}
function UR(e, t, n, i, r={
    canDeactivateChecks: [],
    canActivateChecks: []
}) {
    let s = e.value
      , o = t ? t.value : null
      , a = n ? n.getContext(e.value.outlet) : null;
    if (o && s.routeConfig === o.routeConfig) {
        let c = HR(o, s, s.routeConfig.runGuardsAndResolvers);
        c ? r.canActivateChecks.push(new zf(i)) : (s.data = o.data,
        s._resolvedData = o._resolvedData),
        s.component ? dd(e, t, a ? a.children : null, i, r) : dd(e, t, n, i, r),
        c && a && a.outlet && a.outlet.isActivated && r.canDeactivateChecks.push(new su(a.outlet.component,o))
    } else
        o && md(t, a, r),
        r.canActivateChecks.push(new zf(i)),
        s.component ? dd(e, null, a ? a.children : null, i, r) : dd(e, null, n, i, r);
    return r
}
function HR(e, t, n) {
    if (typeof n == "function")
        return n(e, t);
    switch (n) {
    case "pathParamsChange":
        return !Cl(e.url, t.url);
    case "pathParamsOrQueryParamsChange":
        return !Cl(e.url, t.url) || !Ao(e.queryParams, t.queryParams);
    case "always":
        return !0;
    case "paramsOrQueryParamsChange":
        return !ng(e, t) || !Ao(e.queryParams, t.queryParams);
    case "paramsChange":
    default:
        return !ng(e, t)
    }
}
function md(e, t, n) {
    let i = nu(e)
      , r = e.value;
    Object.entries(i).forEach( ([s,o]) => {
        r.component ? t ? md(o, t.children.getContext(s), n) : md(o, null, n) : md(o, t, n)
    }
    ),
    r.component ? t && t.outlet && t.outlet.isActivated ? n.canDeactivateChecks.push(new su(t.outlet.component,r)) : n.canDeactivateChecks.push(new su(null,r)) : n.canDeactivateChecks.push(new su(null,r))
}
function Pd(e) {
    return typeof e == "function"
}
function GR(e) {
    return typeof e == "boolean"
}
function VR(e) {
    return e && Pd(e.canLoad)
}
function $R(e) {
    return e && Pd(e.canActivate)
}
function WR(e) {
    return e && Pd(e.canActivateChild)
}
function jR(e) {
    return e && Pd(e.canDeactivate)
}
function qR(e) {
    return e && Pd(e.canMatch)
}
function xS(e) {
    return e instanceof Q8 || e?.name === "EmptyError"
}
var Rf = Symbol("INITIAL_VALUE");
function lu() {
    return Vt(e => cl(e.map(t => t.pipe(Lt(1), Mh(Rf)))).pipe(We(t => {
        for (let n of t)
            if (n !== !0) {
                if (n === Rf)
                    return Rf;
                if (n === !1 || zR(n))
                    return n
            }
        return !0
    }
    ), mt(t => t !== Rf), Lt(1)))
}
function zR(e) {
    return El(e) || e instanceof bd
}
function XR(e, t) {
    return ai(n => {
        let {targetSnapshot: i, currentSnapshot: r, guards: {canActivateChecks: s, canDeactivateChecks: o}} = n;
        return o.length === 0 && s.length === 0 ? Be(ve(C({}, n), {
            guardsResult: !0
        })) : KR(o, i, r, e).pipe(ai(a => a && GR(a) ? YR(i, s, e, t) : Be(a)), We(a => ve(C({}, n), {
            guardsResult: a
        })))
    }
    )
}
function KR(e, t, n, i) {
    return Yn(e).pipe(ai(r => tD(r.component, r.route, n, t, i)), Qn(r => r !== !0, !0))
}
function YR(e, t, n, i) {
    return Yn(t).pipe(li(r => A0(JR(r.route.parent, i), QR(r.route, i), eD(e, r.path, n), ZR(e, r.route, n))), Qn(r => r !== !0, !0))
}
function QR(e, t) {
    return e !== null && t && t(new Q6(e)),
    Be(!0)
}
function JR(e, t) {
    return e !== null && t && t(new K6(e)),
    Be(!0)
}
function ZR(e, t, n) {
    let i = t.routeConfig ? t.routeConfig.canActivate : null;
    if (!i || i.length === 0)
        return Be(!0);
    let r = i.map(s => I0( () => {
        let o = Od(t) ?? n
          , a = uu(s, o)
          , c = $R(a) ? a.canActivate(t, e) : So(o, () => a(t, e));
        return Sc(c).pipe(Qn())
    }
    ));
    return Be(r).pipe(lu())
}
function eD(e, t, n) {
    let i = t[t.length - 1]
      , s = t.slice(0, t.length - 1).reverse().map(o => BR(o)).filter(o => o !== null).map(o => I0( () => {
        let a = o.guards.map(c => {
            let l = Od(o.node) ?? n
              , u = uu(c, l)
              , h = WR(u) ? u.canActivateChild(i, e) : So(l, () => u(i, e));
            return Sc(h).pipe(Qn())
        }
        );
        return Be(a).pipe(lu())
    }
    ));
    return Be(s).pipe(lu())
}
function tD(e, t, n, i, r) {
    let s = t && t.routeConfig ? t.routeConfig.canDeactivate : null;
    if (!s || s.length === 0)
        return Be(!0);
    let o = s.map(a => {
        let c = Od(t) ?? r
          , l = uu(a, c)
          , u = jR(l) ? l.canDeactivate(e, t, n, i) : So(c, () => l(e, t, n, i));
        return Sc(u).pipe(Qn())
    }
    );
    return Be(o).pipe(lu())
}
function nD(e, t, n, i) {
    let r = t.canLoad;
    if (r === void 0 || r.length === 0)
        return Be(!0);
    let s = r.map(o => {
        let a = uu(o, e)
          , c = VR(a) ? a.canLoad(t, n) : So(e, () => a(t, n));
        return Sc(c)
    }
    );
    return Be(s).pipe(lu(), wS(i))
}
function wS(e) {
    return m5(He(t => {
        if (typeof t != "boolean")
            throw qf(e, t)
    }
    ), We(t => t === !0))
}
function iD(e, t, n, i) {
    let r = t.canMatch;
    if (!r || r.length === 0)
        return Be(!0);
    let s = r.map(o => {
        let a = uu(o, e)
          , c = qR(a) ? a.canMatch(t, n) : So(e, () => a(t, n));
        return Sc(c)
    }
    );
    return Be(s).pipe(lu(), wS(i))
}
var xd = class {
    segmentGroup;
    constructor(t) {
        this.segmentGroup = t || null
    }
}
  , wd = class extends Error {
    urlTree;
    constructor(t) {
        super(),
        this.urlTree = t
    }
}
;
function tu(e) {
    return Hr(new xd(e))
}
function rD(e) {
    return Hr(new ui(4e3,!1))
}
function sD(e) {
    return Hr(SS(!1, ps.GuardRejected))
}
var sg = class {
    urlSerializer;
    urlTree;
    constructor(t, n) {
        this.urlSerializer = t,
        this.urlTree = n
    }
    lineralizeSegments(t, n) {
        let i = []
          , r = n.root;
        for (; ; ) {
            if (i = i.concat(r.segments),
            r.numberOfChildren === 0)
                return Be(i);
            if (r.numberOfChildren > 1 || !r.children[Ct])
                return rD(`${t.redirectTo}`);
            r = r.children[Ct]
        }
    }
    applyRedirectCommands(t, n, i, r, s) {
        if (typeof n != "string") {
            let a = n
              , {queryParams: c, fragment: l, routeConfig: u, url: h, outlet: d, params: f, data: g, title: p} = r
              , v = So(s, () => a({
                params: f,
                data: g,
                queryParams: c,
                fragment: l,
                routeConfig: u,
                url: h,
                outlet: d,
                title: p
            }));
            if (v instanceof ya)
                throw new wd(v);
            n = v
        }
        let o = this.applyRedirectCreateUrlTree(n, this.urlSerializer.parse(n), t, i);
        if (n[0] === "/")
            throw new wd(o);
        return o
    }
    applyRedirectCreateUrlTree(t, n, i, r) {
        let s = this.createSegmentGroup(t, n.root, i, r);
        return new ya(s,this.createQueryParams(n.queryParams, this.urlTree.queryParams),n.fragment)
    }
    createQueryParams(t, n) {
        let i = {};
        return Object.entries(t).forEach( ([r,s]) => {
            if (typeof s == "string" && s[0] === ":") {
                let a = s.substring(1);
                i[r] = n[a]
            } else
                i[r] = s
        }
        ),
        i
    }
    createSegmentGroup(t, n, i, r) {
        let s = this.createSegments(t, n.segments, i, r)
          , o = {};
        return Object.entries(n.children).forEach( ([a,c]) => {
            o[a] = this.createSegmentGroup(t, c, i, r)
        }
        ),
        new Kt(s,o)
    }
    createSegments(t, n, i, r) {
        return n.map(s => s.path[0] === ":" ? this.findPosParam(t, s, r) : this.findOrReturn(s, i))
    }
    findPosParam(t, n, i) {
        let r = i[n.path.substring(1)];
        if (!r)
            throw new ui(4001,!1);
        return r
    }
    findOrReturn(t, n) {
        let i = 0;
        for (let r of n) {
            if (r.path === t.path)
                return n.splice(i),
                r;
            i++
        }
        return t
    }
}
  , og = {
    matched: !1,
    consumedSegments: [],
    remainingSegments: [],
    parameters: {},
    positionalParamSegments: {}
};
function oD(e, t, n, i, r) {
    let s = CS(e, t, n);
    return s.matched ? (i = OR(t, i),
    iD(i, t, n, r).pipe(We(o => o === !0 ? s : C({}, og)))) : Be(s)
}
function CS(e, t, n) {
    if (t.path === "**")
        return aD(n);
    if (t.path === "")
        return t.pathMatch === "full" && (e.hasChildren() || n.length > 0) ? C({}, og) : {
            matched: !0,
            consumedSegments: [],
            remainingSegments: n,
            parameters: {},
            positionalParamSegments: {}
        };
    let r = (t.matcher || tR)(n, e, t);
    if (!r)
        return C({}, og);
    let s = {};
    Object.entries(r.posParams ?? {}).forEach( ([a,c]) => {
        s[a] = c.path
    }
    );
    let o = r.consumed.length > 0 ? C(C({}, s), r.consumed[r.consumed.length - 1].parameters) : s;
    return {
        matched: !0,
        consumedSegments: r.consumed,
        remainingSegments: n.slice(r.consumed.length),
        parameters: o,
        positionalParamSegments: r.posParams ?? {}
    }
}
function aD(e) {
    return {
        matched: !0,
        parameters: e.length > 0 ? iS(e).parameters : {},
        consumedSegments: e,
        remainingSegments: [],
        positionalParamSegments: {}
    }
}
function Qy(e, t, n, i) {
    return n.length > 0 && uD(e, n, i) ? {
        segmentGroup: new Kt(t,lD(i, new Kt(n,e.children))),
        slicedSegments: []
    } : n.length === 0 && hD(e, n, i) ? {
        segmentGroup: new Kt(e.segments,cD(e, n, i, e.children)),
        slicedSegments: n
    } : {
        segmentGroup: new Kt(e.segments,e.children),
        slicedSegments: n
    }
}
function cD(e, t, n, i) {
    let r = {};
    for (let s of n)
        if (Yf(e, t, s) && !i[Js(s)]) {
            let o = new Kt([],{});
            r[Js(s)] = o
        }
    return C(C({}, i), r)
}
function lD(e, t) {
    let n = {};
    n[Ct] = t;
    for (let i of e)
        if (i.path === "" && Js(i) !== Ct) {
            let r = new Kt([],{});
            n[Js(i)] = r
        }
    return n
}
function uD(e, t, n) {
    return n.some(i => Yf(e, t, i) && Js(i) !== Ct)
}
function hD(e, t, n) {
    return n.some(i => Yf(e, t, i))
}
function Yf(e, t, n) {
    return (e.hasChildren() || t.length > 0) && n.pathMatch === "full" ? !1 : n.path === ""
}
function dD(e, t, n) {
    return t.length === 0 && !e.children[n]
}
var ag = class {
}
;
function fD(e, t, n, i, r, s, o="emptyOnly") {
    return new cg(e,t,n,i,r,o,s).recognize()
}
var pD = 31
  , cg = class {
    injector;
    configLoader;
    rootComponentType;
    config;
    urlTree;
    paramsInheritanceStrategy;
    urlSerializer;
    applyRedirects;
    absoluteRedirectCount = 0;
    allowRedirects = !0;
    constructor(t, n, i, r, s, o, a) {
        this.injector = t,
        this.configLoader = n,
        this.rootComponentType = i,
        this.config = r,
        this.urlTree = s,
        this.paramsInheritanceStrategy = o,
        this.urlSerializer = a,
        this.applyRedirects = new sg(this.urlSerializer,this.urlTree)
    }
    noMatchError(t) {
        return new ui(4002,`'${t.segmentGroup}'`)
    }
    recognize() {
        let t = Qy(this.urlTree.root, [], [], this.config).segmentGroup;
        return this.match(t).pipe(We( ({children: n, rootSnapshot: i}) => {
            let r = new fs(i,n)
              , s = new jf("",r)
              , o = SR(i, [], this.urlTree.queryParams, this.urlTree.fragment);
            return o.queryParams = this.urlTree.queryParams,
            s.url = this.urlSerializer.serialize(o),
            {
                state: s,
                tree: o
            }
        }
        ))
    }
    match(t) {
        let n = new ru([],Object.freeze({}),Object.freeze(C({}, this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ct,this.rootComponentType,null,{});
        return this.processSegmentGroup(this.injector, this.config, t, Ct, n).pipe(We(i => ({
            children: i,
            rootSnapshot: n
        })), on(i => {
            if (i instanceof wd)
                return this.urlTree = i.urlTree,
                this.match(i.urlTree.root);
            throw i instanceof xd ? this.noMatchError(i) : i
        }
        ))
    }
    processSegmentGroup(t, n, i, r, s) {
        return i.segments.length === 0 && i.hasChildren() ? this.processChildren(t, n, i, s) : this.processSegment(t, n, i, i.segments, r, !0, s).pipe(We(o => o instanceof fs ? [o] : []))
    }
    processChildren(t, n, i, r) {
        let s = [];
        for (let o of Object.keys(i.children))
            o === "primary" ? s.unshift(o) : s.push(o);
        return Yn(s).pipe(li(o => {
            let a = i.children[o]
              , c = MR(n, o);
            return this.processSegmentGroup(t, c, a, o, r)
        }
        ), N0( (o, a) => (o.push(...a),
        o)), Yp(null), nv(), ai(o => {
            if (o === null)
                return tu(i);
            let a = ES(o);
            return gD(a),
            Be(a)
        }
        ))
    }
    processSegment(t, n, i, r, s, o, a) {
        return Yn(n).pipe(li(c => this.processSegmentAgainstRoute(c._injector ?? t, n, c, i, r, s, o, a).pipe(on(l => {
            if (l instanceof xd)
                return Be(null);
            throw l
        }
        ))), Qn(c => !!c), on(c => {
            if (xS(c))
                return dD(i, r, s) ? Be(new ag) : tu(i);
            throw c
        }
        ))
    }
    processSegmentAgainstRoute(t, n, i, r, s, o, a, c) {
        return Js(i) !== o && (o === Ct || !Yf(r, s, i)) ? tu(r) : i.redirectTo === void 0 ? this.matchSegmentAgainstRoute(t, r, i, s, o, c) : this.allowRedirects && a ? this.expandSegmentAgainstRouteUsingRedirect(t, r, n, i, s, o, c) : tu(r)
    }
    expandSegmentAgainstRouteUsingRedirect(t, n, i, r, s, o, a) {
        let {matched: c, parameters: l, consumedSegments: u, positionalParamSegments: h, remainingSegments: d} = CS(n, r, s);
        if (!c)
            return tu(n);
        typeof r.redirectTo == "string" && r.redirectTo[0] === "/" && (this.absoluteRedirectCount++,
        this.absoluteRedirectCount > pD && (this.allowRedirects = !1));
        let f = new ru(s,l,Object.freeze(C({}, this.urlTree.queryParams)),this.urlTree.fragment,Jy(r),Js(r),r.component ?? r._loadedComponent ?? null,r,Zy(r))
          , g = Wf(f, a, this.paramsInheritanceStrategy);
        f.params = Object.freeze(g.params),
        f.data = Object.freeze(g.data);
        let p = this.applyRedirects.applyRedirectCommands(u, r.redirectTo, h, f, t);
        return this.applyRedirects.lineralizeSegments(r, p).pipe(ai(v => this.processSegment(t, i, n, v.concat(d), o, !1, a)))
    }
    matchSegmentAgainstRoute(t, n, i, r, s, o) {
        let a = oD(n, i, r, t, this.urlSerializer);
        return i.path === "**" && (n.children = {}),
        a.pipe(Vt(c => c.matched ? (t = i._injector ?? t,
        this.getChildConfig(t, i, r).pipe(Vt( ({routes: l}) => {
            let u = i._loadedInjector ?? t
              , {parameters: h, consumedSegments: d, remainingSegments: f} = c
              , g = new ru(d,h,Object.freeze(C({}, this.urlTree.queryParams)),this.urlTree.fragment,Jy(i),Js(i),i.component ?? i._loadedComponent ?? null,i,Zy(i))
              , p = Wf(g, o, this.paramsInheritanceStrategy);
            g.params = Object.freeze(p.params),
            g.data = Object.freeze(p.data);
            let {segmentGroup: v, slicedSegments: S} = Qy(n, d, f, l);
            if (S.length === 0 && v.hasChildren())
                return this.processChildren(u, l, v, g).pipe(We(w => new fs(g,w)));
            if (l.length === 0 && S.length === 0)
                return Be(new fs(g,[]));
            let x = Js(i) === s;
            return this.processSegment(u, l, v, S, x ? Ct : s, !0, g).pipe(We(w => new fs(g,w instanceof fs ? [w] : [])))
        }
        ))) : tu(n)))
    }
    getChildConfig(t, n, i) {
        return n.children ? Be({
            routes: n.children,
            injector: t
        }) : n.loadChildren ? n._loadedRoutes !== void 0 ? Be({
            routes: n._loadedRoutes,
            injector: n._loadedInjector
        }) : nD(t, n, i, this.urlSerializer).pipe(ai(r => r ? this.configLoader.loadChildren(t, n).pipe(He(s => {
            n._loadedRoutes = s.routes,
            n._loadedInjector = s.injector
        }
        )) : sD(n))) : Be({
            routes: [],
            injector: t
        })
    }
}
;
function gD(e) {
    e.sort( (t, n) => t.value.outlet === Ct ? -1 : n.value.outlet === Ct ? 1 : t.value.outlet.localeCompare(n.value.outlet))
}
function mD(e) {
    let t = e.value.routeConfig;
    return t && t.path === ""
}
function ES(e) {
    let t = []
      , n = new Set;
    for (let i of e) {
        if (!mD(i)) {
            t.push(i);
            continue
        }
        let r = t.find(s => i.value.routeConfig === s.value.routeConfig);
        r !== void 0 ? (r.children.push(...i.children),
        n.add(r)) : t.push(i)
    }
    for (let i of n) {
        let r = ES(i.children);
        t.push(new fs(i.value,r))
    }
    return t.filter(i => !n.has(i))
}
function Jy(e) {
    return e.data || {}
}
function Zy(e) {
    return e.resolve || {}
}
function vD(e, t, n, i, r, s) {
    return ai(o => fD(e, t, n, i, o.extractedUrl, r, s).pipe(We( ({state: a, tree: c}) => ve(C({}, o), {
        targetSnapshot: a,
        urlAfterRedirects: c
    }))))
}
function _D(e, t) {
    return ai(n => {
        let {targetSnapshot: i, guards: {canActivateChecks: r}} = n;
        if (!r.length)
            return Be(n);
        let s = new Set(r.map(c => c.route))
          , o = new Set;
        for (let c of s)
            if (!o.has(c))
                for (let l of TS(c))
                    o.add(l);
        let a = 0;
        return Yn(o).pipe(li(c => s.has(c) ? yD(c, i, e, t) : (c.data = Wf(c, c.parent, e).resolve,
        Be(void 0))), He( () => a++), Qp(1), ai(c => a === o.size ? Be(n) : Ur))
    }
    )
}
function TS(e) {
    let t = e.children.map(n => TS(n)).flat();
    return [e, ...t]
}
function yD(e, t, n, i) {
    let r = e.routeConfig
      , s = e._resolve;
    return r?.title !== void 0 && !_S(r) && (s[Ed] = r.title),
    SD(s, e, t, i).pipe(We(o => (e._resolvedData = o,
    e.data = Wf(e, e.parent, n).resolve,
    null)))
}
function SD(e, t, n, i) {
    let r = U6(e);
    if (r.length === 0)
        return Be({});
    let s = {};
    return Yn(r).pipe(ai(o => bD(e[o], t, n, i).pipe(Qn(), He(a => {
        if (a instanceof bd)
            throw qf(new au, a);
        s[o] = a
    }
    ))), Qp(1), ev(s), on(o => xS(o) ? Ur : Hr(o)))
}
function bD(e, t, n, i) {
    let r = Od(t) ?? i
      , s = uu(e, r)
      , o = s.resolve ? s.resolve(t, n) : So(r, () => s(t, n));
    return Sc(o)
}
function L6(e) {
    return Vt(t => {
        let n = e(t);
        return n ? Yn(n).pipe(We( () => t)) : Be(t)
    }
    )
}
var OS = ( () => {
    class e {
        buildTitle(n) {
            let i, r = n.root;
            for (; r !== void 0; )
                i = this.getResolvedTitleForRoute(r) ?? i,
                r = r.children.find(s => s.outlet === Ct);
            return i
        }
        getResolvedTitleForRoute(n) {
            return n.data[Ed]
        }
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: () => z(xD),
            providedIn: "root"
        })
    }
    return e
}
)()
  , xD = ( () => {
    class e extends OS {
        title;
        constructor(n) {
            super(),
            this.title = n
        }
        updateTitle(n) {
            let i = this.buildTitle(n);
            i !== void 0 && this.title.setTitle(i)
        }
        static \u0275fac = function(i) {
            return new (i || e)(xe(Wy))
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac,
            providedIn: "root"
        })
    }
    return e
}
)()
  , kd = new Je("",{
    providedIn: "root",
    factory: () => ({})
})
  , wD = ( () => {
    class e {
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275cmp = Ye({
            type: e,
            selectors: [["ng-component"]],
            decls: 1,
            vars: 0,
            template: function(i, r) {
                i & 1 && me(0, "router-outlet")
            },
            dependencies: [AR],
            encapsulation: 2
        })
    }
    return e
}
)();
function hg(e) {
    let t = e.children && e.children.map(hg)
      , n = t ? ve(C({}, e), {
        children: t
    }) : C({}, e);
    return !n.component && !n.loadComponent && (t || n.loadChildren) && n.outlet && n.outlet !== Ct && (n.component = wD),
    n
}
var Cd = new Je("")
  , dg = ( () => {
    class e {
        componentLoaders = new WeakMap;
        childrenLoaders = new WeakMap;
        onLoadStartListener;
        onLoadEndListener;
        compiler = z(M5);
        loadComponent(n) {
            if (this.componentLoaders.get(n))
                return this.componentLoaders.get(n);
            if (n._loadedComponent)
                return Be(n._loadedComponent);
            this.onLoadStartListener && this.onLoadStartListener(n);
            let i = Sc(n.loadComponent()).pipe(We(MS), He(s => {
                this.onLoadEndListener && this.onLoadEndListener(n),
                n._loadedComponent = s
            }
            ), dr( () => {
                this.componentLoaders.delete(n)
            }
            ))
              , r = new zp(i, () => new lt).pipe(qp());
            return this.componentLoaders.set(n, r),
            r
        }
        loadChildren(n, i) {
            if (this.childrenLoaders.get(i))
                return this.childrenLoaders.get(i);
            if (i._loadedRoutes)
                return Be({
                    routes: i._loadedRoutes,
                    injector: i._loadedInjector
                });
            this.onLoadStartListener && this.onLoadStartListener(i);
            let s = CD(i, this.compiler, n, this.onLoadEndListener).pipe(dr( () => {
                this.childrenLoaders.delete(i)
            }
            ))
              , o = new zp(s, () => new lt).pipe(qp());
            return this.childrenLoaders.set(i, o),
            o
        }
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac,
            providedIn: "root"
        })
    }
    return e
}
)();
function CD(e, t, n, i) {
    return Sc(e.loadChildren()).pipe(We(MS), ai(r => r instanceof vv || Array.isArray(r) ? Be(r) : Yn(t.compileModuleAsync(r))), We(r => {
        i && i(e);
        let s, o, a = !1;
        return Array.isArray(r) ? (o = r,
        a = !0) : (s = r.create(n).injector,
        o = s.get(Cd, [], {
            optional: !0,
            self: !0
        }).flat()),
        {
            routes: o.map(hg),
            injector: s
        }
    }
    ))
}
function ED(e) {
    return e && typeof e == "object" && "default"in e
}
function MS(e) {
    return ED(e) ? e.default : e
}
var fg = ( () => {
    class e {
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: () => z(TD),
            providedIn: "root"
        })
    }
    return e
}
)()
  , TD = ( () => {
    class e {
        shouldProcessUrl(n) {
            return !0
        }
        extract(n) {
            return n
        }
        merge(n, i) {
            return n
        }
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac,
            providedIn: "root"
        })
    }
    return e
}
)()
  , PS = new Je("")
  , kS = new Je("");
function OD(e, t, n) {
    let i = e.get(kS)
      , r = e.get(Nn);
    return e.get(Rn).runOutsideAngular( () => {
        if (!r.startViewTransition || i.skipNextTransition)
            return i.skipNextTransition = !1,
            new Promise(l => setTimeout(l));
        let s, o = new Promise(l => {
            s = l
        }
        ), a = r.startViewTransition( () => (s(),
        MD(e))), {onViewTransitionCreated: c} = i;
        return c && So(e, () => c({
            transition: a,
            from: t,
            to: n
        })),
        o
    }
    )
}
function MD(e) {
    return new Promise(t => {
        dl({
            read: () => setTimeout(t)
        }, {
            injector: e
        })
    }
    )
}
var AS = new Je("")
  , pg = ( () => {
    class e {
        currentNavigation = null;
        currentTransition = null;
        lastSuccessfulNavigation = null;
        events = new lt;
        transitionAbortSubject = new lt;
        configLoader = z(dg);
        environmentInjector = z(rc);
        urlSerializer = z(Td);
        rootContexts = z(Md);
        location = z(Nh);
        inputBindingEnabled = z(Kf, {
            optional: !0
        }) !== null;
        titleStrategy = z(OS);
        options = z(kd, {
            optional: !0
        }) || {};
        paramsInheritanceStrategy = this.options.paramsInheritanceStrategy || "emptyOnly";
        urlHandlingStrategy = z(fg);
        createViewTransition = z(PS, {
            optional: !0
        });
        navigationErrorHandler = z(AS, {
            optional: !0
        });
        navigationId = 0;
        get hasRequestedNavigation() {
            return this.navigationId !== 0
        }
        transitions;
        afterPreactivation = () => Be(void 0);
        rootComponentType = null;
        constructor() {
            let n = r => this.events.next(new z6(r))
              , i = r => this.events.next(new X6(r));
            this.configLoader.onLoadEndListener = i,
            this.configLoader.onLoadStartListener = n
        }
        complete() {
            this.transitions?.complete()
        }
        handleNavigationRequest(n) {
            let i = ++this.navigationId;
            this.transitions?.next(ve(C(C({}, this.transitions.value), n), {
                id: i
            }))
        }
        setupNavigations(n, i, r) {
            return this.transitions = new Ne({
                id: 0,
                currentUrlTree: i,
                currentRawUrl: i,
                extractedUrl: this.urlHandlingStrategy.extract(i),
                urlAfterRedirects: this.urlHandlingStrategy.extract(i),
                rawUrl: i,
                extras: {},
                resolve: () => {}
                ,
                reject: () => {}
                ,
                promise: Promise.resolve(!0),
                source: gd,
                restoredState: null,
                currentSnapshot: r.snapshot,
                targetSnapshot: null,
                currentRouterState: r,
                targetRouterState: null,
                guards: {
                    canActivateChecks: [],
                    canDeactivateChecks: []
                },
                guardsResult: null
            }),
            this.transitions.pipe(mt(s => s.id !== 0), We(s => ve(C({}, s), {
                extractedUrl: this.urlHandlingStrategy.extract(s.rawUrl)
            })), Vt(s => {
                let o = !1
                  , a = !1;
                return Be(s).pipe(Vt(c => {
                    if (this.navigationId > s.id)
                        return this.cancelNavigationTransition(s, "", ps.SupersededByNewNavigation),
                        Ur;
                    this.currentTransition = s,
                    this.currentNavigation = {
                        id: c.id,
                        initialUrl: c.rawUrl,
                        extractedUrl: c.extractedUrl,
                        targetBrowserUrl: typeof c.extras.browserUrl == "string" ? this.urlSerializer.parse(c.extras.browserUrl) : c.extras.browserUrl,
                        trigger: c.source,
                        extras: c.extras,
                        previousNavigation: this.lastSuccessfulNavigation ? ve(C({}, this.lastSuccessfulNavigation), {
                            previousNavigation: null
                        }) : null
                    };
                    let l = !n.navigated || this.isUpdatingInternalState() || this.isUpdatedBrowserUrl()
                      , u = c.extras.onSameUrlNavigation ?? n.onSameUrlNavigation;
                    if (!l && u !== "reload") {
                        let h = "";
                        return this.events.next(new Ro(c.id,this.urlSerializer.serialize(c.rawUrl),h,Uf.IgnoredSameUrlNavigation)),
                        c.resolve(!1),
                        Ur
                    }
                    if (this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))
                        return Be(c).pipe(Vt(h => {
                            let d = this.transitions?.getValue();
                            return this.events.next(new yc(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),
                            d !== this.transitions?.getValue() ? Ur : Promise.resolve(h)
                        }
                        ), vD(this.environmentInjector, this.configLoader, this.rootComponentType, n.config, this.urlSerializer, this.paramsInheritanceStrategy), He(h => {
                            s.targetSnapshot = h.targetSnapshot,
                            s.urlAfterRedirects = h.urlAfterRedirects,
                            this.currentNavigation = ve(C({}, this.currentNavigation), {
                                finalUrl: h.urlAfterRedirects
                            });
                            let d = new Hf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);
                            this.events.next(d)
                        }
                        ));
                    if (l && this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)) {
                        let {id: h, extractedUrl: d, source: f, restoredState: g, extras: p} = c
                          , v = new yc(h,this.urlSerializer.serialize(d),f,g);
                        this.events.next(v);
                        let S = mS(this.rootComponentType).snapshot;
                        return this.currentTransition = s = ve(C({}, c), {
                            targetSnapshot: S,
                            urlAfterRedirects: d,
                            extras: ve(C({}, p), {
                                skipLocationChange: !1,
                                replaceUrl: !1
                            })
                        }),
                        this.currentNavigation.finalUrl = d,
                        Be(s)
                    } else {
                        let h = "";
                        return this.events.next(new Ro(c.id,this.urlSerializer.serialize(c.extractedUrl),h,Uf.IgnoredByUrlHandlingStrategy)),
                        c.resolve(!1),
                        Ur
                    }
                }
                ), He(c => {
                    let l = new $6(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);
                    this.events.next(l)
                }
                ), We(c => (this.currentTransition = s = ve(C({}, c), {
                    guards: LR(c.targetSnapshot, c.currentSnapshot, this.rootContexts)
                }),
                s)), XR(this.environmentInjector, c => this.events.next(c)), He(c => {
                    if (s.guardsResult = c.guardsResult,
                    c.guardsResult && typeof c.guardsResult != "boolean")
                        throw qf(this.urlSerializer, c.guardsResult);
                    let l = new W6(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);
                    this.events.next(l)
                }
                ), mt(c => c.guardsResult ? !0 : (this.cancelNavigationTransition(c, "", ps.GuardRejected),
                !1)), L6(c => {
                    if (c.guards.canActivateChecks.length)
                        return Be(c).pipe(He(l => {
                            let u = new j6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);
                            this.events.next(u)
                        }
                        ), Vt(l => {
                            let u = !1;
                            return Be(l).pipe(_D(this.paramsInheritanceStrategy, this.environmentInjector), He({
                                next: () => u = !0,
                                complete: () => {
                                    u || this.cancelNavigationTransition(l, "", ps.NoDataFromResolver)
                                }
                            }))
                        }
                        ), He(l => {
                            let u = new q6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);
                            this.events.next(u)
                        }
                        ))
                }
                ), L6(c => {
                    let l = u => {
                        let h = [];
                        u.routeConfig?.loadComponent && !u.routeConfig._loadedComponent && h.push(this.configLoader.loadComponent(u.routeConfig).pipe(He(d => {
                            u.component = d
                        }
                        ), We( () => {}
                        )));
                        for (let d of u.children)
                            h.push(...l(d));
                        return h
                    }
                    ;
                    return cl(l(c.targetSnapshot.root)).pipe(Yp(null), Lt(1))
                }
                ), L6( () => this.afterPreactivation()), Vt( () => {
                    let {currentSnapshot: c, targetSnapshot: l} = s
                      , u = this.createViewTransition?.(this.environmentInjector, c.root, l.root);
                    return u ? Yn(u).pipe(We( () => s)) : Be(s)
                }
                ), We(c => {
                    let l = IR(n.routeReuseStrategy, c.targetSnapshot, c.currentRouterState);
                    return this.currentTransition = s = ve(C({}, c), {
                        targetRouterState: l
                    }),
                    this.currentNavigation.targetRouterState = l,
                    s
                }
                ), He( () => {
                    this.events.next(new yd)
                }
                ), FR(this.rootContexts, n.routeReuseStrategy, c => this.events.next(c), this.inputBindingEnabled), Lt(1), He({
                    next: c => {
                        o = !0,
                        this.lastSuccessfulNavigation = this.currentNavigation,
                        this.events.next(new Io(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),
                        this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),
                        c.resolve(!0)
                    }
                    ,
                    complete: () => {
                        o = !0
                    }
                }), In(this.transitionAbortSubject.pipe(He(c => {
                    throw c
                }
                ))), dr( () => {
                    !o && !a && this.cancelNavigationTransition(s, "", ps.SupersededByNewNavigation),
                    this.currentTransition?.id === s.id && (this.currentNavigation = null,
                    this.currentTransition = null)
                }
                ), on(c => {
                    if (a = !0,
                    bS(c))
                        this.events.next(new _a(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),
                        NR(c) ? this.events.next(new cu(c.url,c.navigationBehaviorOptions)) : s.resolve(!1);
                    else {
                        let l = new _d(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot ?? void 0);
                        try {
                            let u = So(this.environmentInjector, () => this.navigationErrorHandler?.(l));
                            if (u instanceof bd) {
                                let {message: h, cancellationCode: d} = qf(this.urlSerializer, u);
                                this.events.next(new _a(s.id,this.urlSerializer.serialize(s.extractedUrl),h,d)),
                                this.events.next(new cu(u.redirectTo,u.navigationBehaviorOptions))
                            } else
                                throw this.events.next(l),
                                c
                        } catch (u) {
                            this.options.resolveNavigationPromiseOnError ? s.resolve(!1) : s.reject(u)
                        }
                    }
                    return Ur
                }
                ))
            }
            ))
        }
        cancelNavigationTransition(n, i, r) {
            let s = new _a(n.id,this.urlSerializer.serialize(n.extractedUrl),i,r);
            this.events.next(s),
            n.resolve(!1)
        }
        isUpdatingInternalState() {
            return this.currentTransition?.extractedUrl.toString() !== this.currentTransition?.currentUrlTree.toString()
        }
        isUpdatedBrowserUrl() {
            let n = this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0)))
              , i = this.currentNavigation?.targetBrowserUrl ?? this.currentNavigation?.extractedUrl;
            return n.toString() !== i?.toString() && !this.currentNavigation?.extras.skipLocationChange
        }
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac,
            providedIn: "root"
        })
    }
    return e
}
)();
function PD(e) {
    return e !== gd
}
var kD = ( () => {
    class e {
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: () => z(AD),
            providedIn: "root"
        })
    }
    return e
}
)()
  , lg = class {
    shouldDetach(t) {
        return !1
    }
    store(t, n) {}
    shouldAttach(t) {
        return !1
    }
    retrieve(t) {
        return null
    }
    shouldReuseRoute(t, n) {
        return t.routeConfig === n.routeConfig
    }
}
  , AD = ( () => {
    class e extends lg {
        static \u0275fac = ( () => {
            let n;
            return function(r) {
                return (n || (n = Tn(e)))(r || e)
            }
        }
        )();
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac,
            providedIn: "root"
        })
    }
    return e
}
)()
  , IS = ( () => {
    class e {
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: () => z(ID),
            providedIn: "root"
        })
    }
    return e
}
)()
  , ID = ( () => {
    class e extends IS {
        location = z(Nh);
        urlSerializer = z(Td);
        options = z(kd, {
            optional: !0
        }) || {};
        canceledNavigationResolution = this.options.canceledNavigationResolution || "replace";
        urlHandlingStrategy = z(fg);
        urlUpdateStrategy = this.options.urlUpdateStrategy || "deferred";
        currentUrlTree = new ya;
        getCurrentUrlTree() {
            return this.currentUrlTree
        }
        rawUrlTree = this.currentUrlTree;
        getRawUrlTree() {
            return this.rawUrlTree
        }
        currentPageId = 0;
        lastSuccessfulId = -1;
        restoredState() {
            return this.location.getState()
        }
        get browserPageId() {
            return this.canceledNavigationResolution !== "computed" ? this.currentPageId : this.restoredState()?.\u0275routerPageId ?? this.currentPageId
        }
        routerState = mS(null);
        getRouterState() {
            return this.routerState
        }
        stateMemento = this.createStateMemento();
        createStateMemento() {
            return {
                rawUrlTree: this.rawUrlTree,
                currentUrlTree: this.currentUrlTree,
                routerState: this.routerState
            }
        }
        registerNonRouterCurrentEntryChangeListener(n) {
            return this.location.subscribe(i => {
                i.type === "popstate" && n(i.url, i.state)
            }
            )
        }
        handleRouterEvent(n, i) {
            if (n instanceof yc)
                this.stateMemento = this.createStateMemento();
            else if (n instanceof Ro)
                this.rawUrlTree = i.initialUrl;
            else if (n instanceof Hf) {
                if (this.urlUpdateStrategy === "eager" && !i.extras.skipLocationChange) {
                    let r = this.urlHandlingStrategy.merge(i.finalUrl, i.initialUrl);
                    this.setBrowserUrl(i.targetBrowserUrl ?? r, i)
                }
            } else
                n instanceof yd ? (this.currentUrlTree = i.finalUrl,
                this.rawUrlTree = this.urlHandlingStrategy.merge(i.finalUrl, i.initialUrl),
                this.routerState = i.targetRouterState,
                this.urlUpdateStrategy === "deferred" && !i.extras.skipLocationChange && this.setBrowserUrl(i.targetBrowserUrl ?? this.rawUrlTree, i)) : n instanceof _a && (n.code === ps.GuardRejected || n.code === ps.NoDataFromResolver) ? this.restoreHistory(i) : n instanceof _d ? this.restoreHistory(i, !0) : n instanceof Io && (this.lastSuccessfulId = n.id,
                this.currentPageId = this.browserPageId)
        }
        setBrowserUrl(n, i) {
            let r = n instanceof ya ? this.urlSerializer.serialize(n) : n;
            if (this.location.isCurrentPathEqualTo(r) || i.extras.replaceUrl) {
                let s = this.browserPageId
                  , o = C(C({}, i.extras.state), this.generateNgRouterState(i.id, s));
                this.location.replaceState(r, "", o)
            } else {
                let s = C(C({}, i.extras.state), this.generateNgRouterState(i.id, this.browserPageId + 1));
                this.location.go(r, "", s)
            }
        }
        restoreHistory(n, i=!1) {
            if (this.canceledNavigationResolution === "computed") {
                let r = this.browserPageId
                  , s = this.currentPageId - r;
                s !== 0 ? this.location.historyGo(s) : this.currentUrlTree === n.finalUrl && s === 0 && (this.resetState(n),
                this.resetUrlToCurrentUrlTree())
            } else
                this.canceledNavigationResolution === "replace" && (i && this.resetState(n),
                this.resetUrlToCurrentUrlTree())
        }
        resetState(n) {
            this.routerState = this.stateMemento.routerState,
            this.currentUrlTree = this.stateMemento.currentUrlTree,
            this.rawUrlTree = this.urlHandlingStrategy.merge(this.currentUrlTree, n.finalUrl ?? this.rawUrlTree)
        }
        resetUrlToCurrentUrlTree() {
            this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree), "", this.generateNgRouterState(this.lastSuccessfulId, this.currentPageId))
        }
        generateNgRouterState(n, i) {
            return this.canceledNavigationResolution === "computed" ? {
                navigationId: n,
                \u0275routerPageId: i
            } : {
                navigationId: n
            }
        }
        static \u0275fac = ( () => {
            let n;
            return function(r) {
                return (n || (n = Tn(e)))(r || e)
            }
        }
        )();
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac,
            providedIn: "root"
        })
    }
    return e
}
)()
  , fd = function(e) {
    return e[e.COMPLETE = 0] = "COMPLETE",
    e[e.FAILED = 1] = "FAILED",
    e[e.REDIRECTING = 2] = "REDIRECTING",
    e
}(fd || {});
function RS(e, t) {
    e.events.pipe(mt(n => n instanceof Io || n instanceof _a || n instanceof _d || n instanceof Ro), We(n => n instanceof Io || n instanceof Ro ? fd.COMPLETE : (n instanceof _a ? n.code === ps.Redirect || n.code === ps.SupersededByNewNavigation : !1) ? fd.REDIRECTING : fd.FAILED), mt(n => n !== fd.REDIRECTING), Lt(1)).subscribe( () => {
        t()
    }
    )
}
var RD = {
    paths: "exact",
    fragment: "ignored",
    matrixParams: "ignored",
    queryParams: "exact"
}
  , DD = {
    paths: "subset",
    fragment: "ignored",
    matrixParams: "ignored",
    queryParams: "subset"
}
  , _r = ( () => {
    class e {
        get currentUrlTree() {
            return this.stateManager.getCurrentUrlTree()
        }
        get rawUrlTree() {
            return this.stateManager.getRawUrlTree()
        }
        disposed = !1;
        nonRouterCurrentEntryChangeSubscription;
        console = z(B0);
        stateManager = z(IS);
        options = z(kd, {
            optional: !0
        }) || {};
        pendingTasks = z(uv);
        urlUpdateStrategy = this.options.urlUpdateStrategy || "deferred";
        navigationTransitions = z(pg);
        urlSerializer = z(Td);
        location = z(Nh);
        urlHandlingStrategy = z(fg);
        _events = new lt;
        get events() {
            return this._events
        }
        get routerState() {
            return this.stateManager.getRouterState()
        }
        navigated = !1;
        routeReuseStrategy = z(kD);
        onSameUrlNavigation = this.options.onSameUrlNavigation || "ignore";
        config = z(Cd, {
            optional: !0
        })?.flat() ?? [];
        componentInputBindingEnabled = !!z(Kf, {
            optional: !0
        });
        constructor() {
            this.resetConfig(this.config),
            this.navigationTransitions.setupNavigations(this, this.currentUrlTree, this.routerState).subscribe({
                error: n => {
                    this.console.warn(n)
                }
            }),
            this.subscribeToNavigationEvents()
        }
        eventsSubscription = new z8;
        subscribeToNavigationEvents() {
            let n = this.navigationTransitions.events.subscribe(i => {
                try {
                    let r = this.navigationTransitions.currentTransition
                      , s = this.navigationTransitions.currentNavigation;
                    if (r !== null && s !== null) {
                        if (this.stateManager.handleRouterEvent(i, s),
                        i instanceof _a && i.code !== ps.Redirect && i.code !== ps.SupersededByNewNavigation)
                            this.navigated = !0;
                        else if (i instanceof Io)
                            this.navigated = !0;
                        else if (i instanceof cu) {
                            let o = i.navigationBehaviorOptions
                              , a = this.urlHandlingStrategy.merge(i.url, r.currentRawUrl)
                              , c = C({
                                browserUrl: r.extras.browserUrl,
                                info: r.extras.info,
                                skipLocationChange: r.extras.skipLocationChange,
                                replaceUrl: r.extras.replaceUrl || this.urlUpdateStrategy === "eager" || PD(r.source)
                            }, o);
                            this.scheduleNavigation(a, gd, null, c, {
                                resolve: r.resolve,
                                reject: r.reject,
                                promise: r.promise
                            })
                        }
                    }
                    FD(i) && this._events.next(i)
                } catch (r) {
                    this.navigationTransitions.transitionAbortSubject.next(r)
                }
            }
            );
            this.eventsSubscription.add(n)
        }
        resetRootComponentType(n) {
            this.routerState.root.component = n,
            this.navigationTransitions.rootComponentType = n
        }
        initialNavigation() {
            this.setUpLocationChangeListener(),
            this.navigationTransitions.hasRequestedNavigation || this.navigateToSyncWithBrowser(this.location.path(!0), gd, this.stateManager.restoredState())
        }
        setUpLocationChangeListener() {
            this.nonRouterCurrentEntryChangeSubscription ??= this.stateManager.registerNonRouterCurrentEntryChangeListener( (n, i) => {
                setTimeout( () => {
                    this.navigateToSyncWithBrowser(n, "popstate", i)
                }
                , 0)
            }
            )
        }
        navigateToSyncWithBrowser(n, i, r) {
            let s = {
                replaceUrl: !0
            }
              , o = r?.navigationId ? r : null;
            if (r) {
                let c = C({}, r);
                delete c.navigationId,
                delete c.\u0275routerPageId,
                Object.keys(c).length !== 0 && (s.state = c)
            }
            let a = this.parseUrl(n);
            this.scheduleNavigation(a, i, o, s)
        }
        get url() {
            return this.serializeUrl(this.currentUrlTree)
        }
        getCurrentNavigation() {
            return this.navigationTransitions.currentNavigation
        }
        get lastSuccessfulNavigation() {
            return this.navigationTransitions.lastSuccessfulNavigation
        }
        resetConfig(n) {
            this.config = n.map(hg),
            this.navigated = !1
        }
        ngOnDestroy() {
            this.dispose()
        }
        dispose() {
            this.navigationTransitions.complete(),
            this.nonRouterCurrentEntryChangeSubscription && (this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),
            this.nonRouterCurrentEntryChangeSubscription = void 0),
            this.disposed = !0,
            this.eventsSubscription.unsubscribe()
        }
        createUrlTree(n, i={}) {
            let {relativeTo: r, queryParams: s, fragment: o, queryParamsHandling: a, preserveFragment: c} = i
              , l = c ? this.currentUrlTree.fragment : o
              , u = null;
            switch (a ?? this.options.defaultQueryParamsHandling) {
            case "merge":
                u = C(C({}, this.currentUrlTree.queryParams), s);
                break;
            case "preserve":
                u = this.currentUrlTree.queryParams;
                break;
            default:
                u = s || null
            }
            u !== null && (u = this.removeEmptyProps(u));
            let h;
            try {
                let d = r ? r.snapshot : this.routerState.snapshot.root;
                h = dS(d)
            } catch {
                (typeof n[0] != "string" || n[0][0] !== "/") && (n = []),
                h = this.currentUrlTree.root
            }
            return fS(h, n, u, l ?? null)
        }
        navigateByUrl(n, i={
            skipLocationChange: !1
        }) {
            let r = El(n) ? n : this.parseUrl(n)
              , s = this.urlHandlingStrategy.merge(r, this.rawUrlTree);
            return this.scheduleNavigation(s, gd, null, i)
        }
        navigate(n, i={
            skipLocationChange: !1
        }) {
            return ND(n),
            this.navigateByUrl(this.createUrlTree(n, i), i)
        }
        serializeUrl(n) {
            return this.urlSerializer.serialize(n)
        }
        parseUrl(n) {
            try {
                return this.urlSerializer.parse(n)
            } catch {
                return this.urlSerializer.parse("/")
            }
        }
        isActive(n, i) {
            let r;
            if (i === !0 ? r = C({}, RD) : i === !1 ? r = C({}, DD) : r = i,
            El(n))
                return qy(this.currentUrlTree, n, r);
            let s = this.parseUrl(n);
            return qy(this.currentUrlTree, s, r)
        }
        removeEmptyProps(n) {
            return Object.entries(n).reduce( (i, [r,s]) => (s != null && (i[r] = s),
            i), {})
        }
        scheduleNavigation(n, i, r, s, o) {
            if (this.disposed)
                return Promise.resolve(!1);
            let a, c, l;
            o ? (a = o.resolve,
            c = o.reject,
            l = o.promise) : l = new Promise( (h, d) => {
                a = h,
                c = d
            }
            );
            let u = this.pendingTasks.add();
            return RS(this, () => {
                queueMicrotask( () => this.pendingTasks.remove(u))
            }
            ),
            this.navigationTransitions.handleNavigationRequest({
                source: i,
                restoredState: r,
                currentUrlTree: this.currentUrlTree,
                currentRawUrl: this.currentUrlTree,
                rawUrl: n,
                extras: s,
                resolve: a,
                reject: c,
                promise: l,
                currentSnapshot: this.routerState.snapshot,
                currentRouterState: this.routerState
            }),
            l.catch(h => Promise.reject(h))
        }
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac,
            providedIn: "root"
        })
    }
    return e
}
)();
function ND(e) {
    for (let t = 0; t < e.length; t++)
        if (e[t] == null)
            throw new ui(4008,!1)
}
function FD(e) {
    return !(e instanceof yd) && !(e instanceof cu)
}
var kse = ( () => {
    class e {
        router;
        route;
        tabIndexAttribute;
        renderer;
        el;
        locationStrategy;
        href = null;
        target;
        queryParams;
        fragment;
        queryParamsHandling;
        state;
        info;
        relativeTo;
        isAnchorElement;
        subscription;
        onChanges = new lt;
        constructor(n, i, r, s, o, a) {
            this.router = n,
            this.route = i,
            this.tabIndexAttribute = r,
            this.renderer = s,
            this.el = o,
            this.locationStrategy = a;
            let c = o.nativeElement.tagName?.toLowerCase();
            this.isAnchorElement = c === "a" || c === "area",
            this.isAnchorElement ? this.subscription = n.events.subscribe(l => {
                l instanceof Io && this.updateHref()
            }
            ) : this.setTabIndexIfNotOnNativeEl("0")
        }
        preserveFragment = !1;
        skipLocationChange = !1;
        replaceUrl = !1;
        setTabIndexIfNotOnNativeEl(n) {
            this.tabIndexAttribute != null || this.isAnchorElement || this.applyAttributeValue("tabindex", n)
        }
        ngOnChanges(n) {
            this.isAnchorElement && this.updateHref(),
            this.onChanges.next(this)
        }
        routerLinkInput = null;
        set routerLink(n) {
            n == null ? (this.routerLinkInput = null,
            this.setTabIndexIfNotOnNativeEl(null)) : (El(n) ? this.routerLinkInput = n : this.routerLinkInput = Array.isArray(n) ? n : [n],
            this.setTabIndexIfNotOnNativeEl("0"))
        }
        onClick(n, i, r, s, o) {
            let a = this.urlTree;
            if (a === null || this.isAnchorElement && (n !== 0 || i || r || s || o || typeof this.target == "string" && this.target != "_self"))
                return !0;
            let c = {
                skipLocationChange: this.skipLocationChange,
                replaceUrl: this.replaceUrl,
                state: this.state,
                info: this.info
            };
            return this.router.navigateByUrl(a, c),
            !this.isAnchorElement
        }
        ngOnDestroy() {
            this.subscription?.unsubscribe()
        }
        updateHref() {
            let n = this.urlTree;
            this.href = n !== null && this.locationStrategy ? this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)) : null;
            let i = this.href === null ? null : fv(this.href, this.el.nativeElement.tagName.toLowerCase(), "href");
            this.applyAttributeValue("href", i)
        }
        applyAttributeValue(n, i) {
            let r = this.renderer
              , s = this.el.nativeElement;
            i !== null ? r.setAttribute(s, n, i) : r.removeAttribute(s, n)
        }
        get urlTree() {
            return this.routerLinkInput === null ? null : El(this.routerLinkInput) ? this.routerLinkInput : this.router.createUrlTree(this.routerLinkInput, {
                relativeTo: this.relativeTo !== void 0 ? this.relativeTo : this.route,
                queryParams: this.queryParams,
                fragment: this.fragment,
                queryParamsHandling: this.queryParamsHandling,
                preserveFragment: this.preserveFragment
            })
        }
        static \u0275fac = function(i) {
            return new (i || e)(Mt(_r),Mt(Do),t4("tabindex"),Mt(mv),Mt(Es),Mt(Dh))
        }
        ;
        static \u0275dir = as({
            type: e,
            selectors: [["", "routerLink", ""]],
            hostVars: 1,
            hostBindings: function(i, r) {
                i & 1 && Qe("click", function(o) {
                    return r.onClick(o.button, o.ctrlKey, o.shiftKey, o.altKey, o.metaKey)
                }),
                i & 2 && U0("target", r.target)
            },
            inputs: {
                target: "target",
                queryParams: "queryParams",
                fragment: "fragment",
                queryParamsHandling: "queryParamsHandling",
                state: "state",
                info: "info",
                relativeTo: "relativeTo",
                preserveFragment: [2, "preserveFragment", "preserveFragment", P5],
                skipLocationChange: [2, "skipLocationChange", "skipLocationChange", P5],
                replaceUrl: [2, "replaceUrl", "replaceUrl", P5],
                routerLink: "routerLink"
            },
            features: [_v, js]
        })
    }
    return e
}
)();
var Xf = class {
}
;
var LD = ( () => {
    class e {
        router;
        injector;
        preloadingStrategy;
        loader;
        subscription;
        constructor(n, i, r, s, o) {
            this.router = n,
            this.injector = r,
            this.preloadingStrategy = s,
            this.loader = o
        }
        setUpPreloading() {
            this.subscription = this.router.events.pipe(mt(n => n instanceof Io), li( () => this.preload())).subscribe( () => {}
            )
        }
        preload() {
            return this.processRoutes(this.injector, this.router.config)
        }
        ngOnDestroy() {
            this.subscription && this.subscription.unsubscribe()
        }
        processRoutes(n, i) {
            let r = [];
            for (let s of i) {
                s.providers && !s._injector && (s._injector = o4(s.providers, n, `Route: ${s.path}`));
                let o = s._injector ?? n
                  , a = s._loadedInjector ?? o;
                (s.loadChildren && !s._loadedRoutes && s.canLoad === void 0 || s.loadComponent && !s._loadedComponent) && r.push(this.preloadConfig(o, s)),
                (s.children || s._loadedRoutes) && r.push(this.processRoutes(a, s.children ?? s._loadedRoutes))
            }
            return Yn(r).pipe(Xp())
        }
        preloadConfig(n, i) {
            return this.preloadingStrategy.preload(i, () => {
                let r;
                i.loadChildren && i.canLoad === void 0 ? r = this.loader.loadChildren(n, i) : r = Be(null);
                let s = r.pipe(ai(o => o === null ? Be(void 0) : (i._loadedRoutes = o.routes,
                i._loadedInjector = o.injector,
                this.processRoutes(o.injector ?? n, o.routes))));
                if (i.loadComponent && !i._loadedComponent) {
                    let o = this.loader.loadComponent(i);
                    return Yn([s, o]).pipe(Xp())
                } else
                    return s
            }
            )
        }
        static \u0275fac = function(i) {
            return new (i || e)(xe(_r),xe(M5),xe(rc),xe(Xf),xe(dg))
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac,
            providedIn: "root"
        })
    }
    return e
}
)()
  , DS = new Je("")
  , BD = ( () => {
    class e {
        urlSerializer;
        transitions;
        viewportScroller;
        zone;
        options;
        routerEventsSubscription;
        scrollEventsSubscription;
        lastId = 0;
        lastSource = "imperative";
        restoredId = 0;
        store = {};
        constructor(n, i, r, s, o={}) {
            this.urlSerializer = n,
            this.transitions = i,
            this.viewportScroller = r,
            this.zone = s,
            this.options = o,
            o.scrollPositionRestoration ||= "disabled",
            o.anchorScrolling ||= "disabled"
        }
        init() {
            this.options.scrollPositionRestoration !== "disabled" && this.viewportScroller.setHistoryScrollRestoration("manual"),
            this.routerEventsSubscription = this.createScrollEvents(),
            this.scrollEventsSubscription = this.consumeScrollEvents()
        }
        createScrollEvents() {
            return this.transitions.events.subscribe(n => {
                n instanceof yc ? (this.store[this.lastId] = this.viewportScroller.getScrollPosition(),
                this.lastSource = n.navigationTrigger,
                this.restoredId = n.restoredState ? n.restoredState.navigationId : 0) : n instanceof Io ? (this.lastId = n.id,
                this.scheduleScrollEvent(n, this.urlSerializer.parse(n.urlAfterRedirects).fragment)) : n instanceof Ro && n.code === Uf.IgnoredSameUrlNavigation && (this.lastSource = void 0,
                this.restoredId = 0,
                this.scheduleScrollEvent(n, this.urlSerializer.parse(n.url).fragment))
            }
            )
        }
        consumeScrollEvents() {
            return this.transitions.events.subscribe(n => {
                n instanceof Gf && (n.position ? this.options.scrollPositionRestoration === "top" ? this.viewportScroller.scrollToPosition([0, 0]) : this.options.scrollPositionRestoration === "enabled" && this.viewportScroller.scrollToPosition(n.position) : n.anchor && this.options.anchorScrolling === "enabled" ? this.viewportScroller.scrollToAnchor(n.anchor) : this.options.scrollPositionRestoration !== "disabled" && this.viewportScroller.scrollToPosition([0, 0]))
            }
            )
        }
        scheduleScrollEvent(n, i) {
            this.zone.runOutsideAngular( () => {
                setTimeout( () => {
                    this.zone.run( () => {
                        this.transitions.events.next(new Gf(n,this.lastSource === "popstate" ? this.store[this.restoredId] : null,i))
                    }
                    )
                }
                , 0)
            }
            )
        }
        ngOnDestroy() {
            this.routerEventsSubscription?.unsubscribe(),
            this.scrollEventsSubscription?.unsubscribe()
        }
        static \u0275fac = function(i) {
            pv()
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac
        })
    }
    return e
}
)();
function Ase(e, ...t) {
    return L0([{
        provide: Cd,
        multi: !0,
        useValue: e
    }, [], {
        provide: Do,
        useFactory: NS,
        deps: [_r]
    }, {
        provide: c4,
        multi: !0,
        useFactory: FS
    }, t.map(n => n.\u0275providers)])
}
function NS(e) {
    return e.routerState.root
}
function Ad(e, t) {
    return {
        \u0275kind: e,
        \u0275providers: t
    }
}
function FS() {
    let e = z(On);
    return t => {
        let n = e.get(ua);
        if (t !== n.components[0])
            return;
        let i = e.get(_r)
          , r = e.get(LS);
        e.get(gg) === 1 && i.initialNavigation(),
        e.get(BS, null, Zp.Optional)?.setUpPreloading(),
        e.get(DS, null, Zp.Optional)?.init(),
        i.resetRootComponentType(n.componentTypes[0]),
        r.closed || (r.next(),
        r.complete(),
        r.unsubscribe())
    }
}
var LS = new Je("",{
    factory: () => new lt
})
  , gg = new Je("",{
    providedIn: "root",
    factory: () => 1
});
function UD() {
    return Ad(2, [{
        provide: gg,
        useValue: 0
    }, {
        provide: Ah,
        multi: !0,
        deps: [On],
        useFactory: t => {
            let n = t.get(kv, Promise.resolve());
            return () => n.then( () => new Promise(i => {
                let r = t.get(_r)
                  , s = t.get(LS);
                RS(r, () => {
                    i(!0)
                }
                ),
                t.get(pg).afterPreactivation = () => (i(!0),
                s.closed ? Be(void 0) : s),
                r.initialNavigation()
            }
            ))
        }
    }])
}
function HD() {
    return Ad(3, [{
        provide: Ah,
        multi: !0,
        useFactory: () => {
            let t = z(_r);
            return () => {
                t.setUpLocationChangeListener()
            }
        }
    }, {
        provide: gg,
        useValue: 2
    }])
}
var BS = new Je("");
function GD(e) {
    return Ad(0, [{
        provide: BS,
        useExisting: LD
    }, {
        provide: Xf,
        useExisting: e
    }])
}
function VD() {
    return Ad(8, [Yy, {
        provide: Kf,
        useExisting: Yy
    }])
}
function $D(e) {
    let t = [{
        provide: PS,
        useValue: OD
    }, {
        provide: kS,
        useValue: C({
            skipNextTransition: !!e?.skipInitialTransition
        }, e)
    }];
    return Ad(9, t)
}
var eS = new Je("ROUTER_FORROOT_GUARD")
  , WD = [Nh, {
    provide: Td,
    useClass: au
}, _r, Md, {
    provide: Do,
    useFactory: NS,
    deps: [_r]
}, dg, []]
  , Ise = ( () => {
    class e {
        constructor(n) {}
        static forRoot(n, i) {
            return {
                ngModule: e,
                providers: [WD, [], {
                    provide: Cd,
                    multi: !0,
                    useValue: n
                }, {
                    provide: eS,
                    useFactory: XD,
                    deps: [[_r, new _5, new cv]]
                }, i?.errorHandler ? {
                    provide: AS,
                    useValue: i.errorHandler
                } : [], {
                    provide: kd,
                    useValue: i || {}
                }, i?.useHash ? qD() : zD(), jD(), i?.preloadingStrategy ? GD(i.preloadingStrategy).\u0275providers : [], i?.initialNavigation ? KD(i) : [], i?.bindToComponentInputs ? VD().\u0275providers : [], i?.enableViewTransitions ? $D().\u0275providers : [], YD()]
            }
        }
        static forChild(n) {
            return {
                ngModule: e,
                providers: [{
                    provide: Cd,
                    multi: !0,
                    useValue: n
                }]
            }
        }
        static \u0275fac = function(i) {
            return new (i || e)(xe(eS, 8))
        }
        ;
        static \u0275mod = nr({
            type: e
        });
        static \u0275inj = tr({})
    }
    return e
}
)();
function jD() {
    return {
        provide: DS,
        useFactory: () => {
            let e = z(Uv)
              , t = z(Rn)
              , n = z(kd)
              , i = z(pg)
              , r = z(Td);
            return n.scrollOffset && e.setOffset(n.scrollOffset),
            new BD(r,i,e,t,n)
        }
    }
}
function qD() {
    return {
        provide: Dh,
        useClass: Iv
    }
}
function zD() {
    return {
        provide: Dh,
        useClass: Av
    }
}
function XD(e) {
    return "guarded"
}
function KD(e) {
    return [e.initialNavigation === "disabled" ? HD().\u0275providers : [], e.initialNavigation === "enabledBlocking" ? UD().\u0275providers : []]
}
var tS = new Je("");
function YD() {
    return [{
        provide: tS,
        useFactory: FS
    }, {
        provide: c4,
        multi: !0,
        useExisting: tS
    }]
}
var QD = typeof __SENTRY_DEBUG__ > "u" ? !0 : __SENTRY_DEBUG__;
function jse(e) {
    let t = Object.assign({
        defaultIntegrations: Mf(e).filter(n => n.name !== "TryCatch")
    }, e);
    id(t, "angular-ivy"),
    JD(),
    w6(t)
}
function JD() {
    let t = O5 && O5.major ? parseInt(O5.major, 10) : void 0;
    t && (t < 12 && QD && $e.warn(`This Sentry SDK does not officially support Angular ${t}.`, "This SDK only supports Angular 12 and above.", "If you're using Angular 10 or 11, please use `@sentry/angular` instead.", "Otherwise, please consider upgrading your Angular version."),
    ff("angular", {
        version: t
    }))
}
var qse = typeof Zone < "u" && !!Zone.current;
var fi = function(e) {
    return e[e.None = 0] = "None",
    e[e.Note = 1] = "Note",
    e[e.Agreement = 2] = "Agreement",
    e[e.Settings = 3] = "Settings",
    e[e.MarketView = 4] = "MarketView",
    e[e.MoneyReceipt = 5] = "MoneyReceipt",
    e[e.Payment = 6] = "Payment",
    e[e.Conditional = 7] = "Conditional",
    e[e.Menu = 8] = "Menu",
    e[e.BrokerChange = 9] = "BrokerChange",
    e[e.Feedback = 10] = "Feedback",
    e[e.AboutUs = 11] = "AboutUs",
    e[e.Messages = 12] = "Messages",
    e[e.layoutList = 13] = "layoutList",
    e[e.AccountActivity = 14] = "AccountActivity",
    e[e.WalletCard = 15] = "WalletCard",
    e[e.Funds = 16] = "Funds",
    e[e.ChangeHistory = 17] = "ChangeHistory",
    e[e.Search = 18] = "Search",
    e[e.Children = 19] = "Children",
    e[e.EasyChart = 20] = "EasyChart",
    e[e.Option = 21] = "Option",
    e[e.AiMarketAssistant = 22] = "AiMarketAssistant",
    e
}(fi || {})
  , Xse = {
    settings: fi.Settings,
    "wallet-card": fi.WalletCard,
    funds: fi.Funds,
    messages: fi.Messages,
    menu: fi.Menu,
    conditional: fi.Conditional,
    agreement: fi.Agreement,
    marketView: fi.MarketView,
    aiMarketAssistant: fi.AiMarketAssistant
};
var HS = function(e) {
    return e.EASY_FILTER_ROUTE = "easy-filter",
    e.RECEIPT_ROUTE = "receipt",
    e.RECEIPT_ROUTE_ERROR = "receipt/error",
    e.NOTES_ROUTE = "notes",
    e.MARKET_WATCH_ROUTE = "market-watch",
    e
}(HS || {})
  , mg = function(e) {
    return e.ORDERS_ROUTE = "orders",
    e.PORTFOLIO_ROUTE = "portfolio-fill",
    e.PORTFOLIO_SOLD_ITEMS = "portfolio-sold-items",
    e.MARKET_WATCH_ROUTE = "market-watch",
    e.AI_MARKET_ASSISTANT = "ai-market-assistant",
    e.SEARCH_ROUTE = "search",
    e.MENU_ROUTE = "menu",
    e.RECEIPT_ROUTE = "money-receipt",
    e.RECEIPT_ROUTE_ERROR = "money-receipt/error",
    e.SETTING_ROUTE = "setting",
    e.NOTES_ROUTE = "note-management",
    e.STOCK_DETAILS_MESSAGES_ROUTE = "messages",
    e.CHANGE_HISTORY = "release-notes",
    e.POSITION = "position",
    e.POSITION_HISTORY = "position-history",
    e.CHAIN = "chain",
    e.MARKET_VIEW = "market-view",
    e.MAP = "map",
    e
}(mg || {})
  , Ei = function(e) {
    return e.MAIN_ROUTE = "",
    e.BANK_ACCOUNT_ROUTE = "payment/bank-account",
    e.MARKET_MAP_ROUTE = "market-map",
    e.STOCK_DETAILS_ROUTE = "stock-details",
    e.STOCK_DETAILS_CONDITION_ROUTE = "condition",
    e.ORDER_HISTORY_ROUTE = "orders-history",
    e.OPTION_ROUTE = "option",
    e.ALGO_HISTORY_ROUTE = "algo-orders-history",
    e.EASY_CHART_ROUTE = "easy-chart",
    e.PAYMENT_ROUTE = "payment",
    e.CONDITION_ROUTE = "conditional",
    e.TRANSACTIONS_ROUTE = "transactions",
    e.ACCOUNT_ACTIVITY_ROUTE = "account-activity",
    e.MENU_ROUTE = "menu",
    e.MESSAGES_ROUTE = "messages",
    e.IMMEDIATE_MESSAGE_ROUTE = "immediate-messages",
    e.PORTFOLIO_MESSAGE_ROUTE = "portfolio-messages",
    e.MOFID_MESSAGE_ROUTE = "mofid-messages",
    e.WALLET_CARD_ROUTE = "wallet-card",
    e.AGREEMENT_ROUTE = "agreement",
    e.FUND_ROUTE = "funds",
    e.SUPPORT_ROUTE = "support",
    e.SETTING = "setting",
    e.BROKER_CHANGE_ROUTE = "broker-change",
    e.MARKET_VIEW_ROUTE = "market-view",
    e.CHILDREN_ROUTE = "children",
    e.OFFLINE_ORDER = "offline-order",
    e
}(Ei || {})
  , Qse = [Ei.ORDER_HISTORY_ROUTE, Ei.ALGO_HISTORY_ROUTE, Ei.OPTION_ROUTE, Ei.TRANSACTIONS_ROUTE, HS.EASY_FILTER_ROUTE, Ei.MARKET_MAP_ROUTE]
  , eN = function(e) {
    return e.TRANSACTIONS_ROUTE = "\u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u062A\u0631\u0627\u06A9\u0646\u0634",
    e.ORDER_HISTORY_ROUTE = "\u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u0633\u0641\u0627\u0631\u0634\u0627\u062A",
    e.EASY_FILTER_ROUTE = "\u0627\u06CC\u0632\u06CC \u0641\u06CC\u0644\u062A\u0631",
    e.EASY_CHART_ROUTE = "\u0686\u0627\u0631\u062A",
    e.MARKET_MAP_ROUTE = "\u0646\u0642\u0634\u0647 \u0628\u0627\u0632\u0627\u0631",
    e
}(eN || {})
  , Id = function(e) {
    return e[e.Broker = 1] = "Broker",
    e[e.Immediate = 2] = "Immediate",
    e[e.Portfolio = 3] = "Portfolio",
    e[e.Mofid = 4] = "Mofid",
    e
}(Id || {});
function GS(e, t) {
    switch (e) {
    case Ei.IMMEDIATE_MESSAGE_ROUTE:
        return {
            sidePanel: fi.Messages,
            data: {
                selectedTab: Id.Immediate
            }
        };
    case Ei.PORTFOLIO_MESSAGE_ROUTE:
        return {
            sidePanel: fi.Messages,
            data: {
                selectedTab: Id.Portfolio
            }
        };
    case Ei.MOFID_MESSAGE_ROUTE:
        return {
            sidePanel: fi.Messages,
            data: {
                selectedTab: Id.Mofid
            }
        };
    case Ei.MESSAGES_ROUTE:
        return {
            sidePanel: fi.Messages,
            data: {
                selectedTab: Id.Broker
            }
        };
    case Ei.AGREEMENT_ROUTE:
        return {
            sidePanel: fi.Agreement
        };
    case Ei.ACCOUNT_ACTIVITY_ROUTE:
        return {
            sidePanel: fi.AccountActivity
        };
    case Ei.CONDITION_ROUTE:
        return {
            sidePanel: fi.Conditional,
            value: t
        };
    case Ei.EASY_CHART_ROUTE:
        return {
            sidePanel: fi.EasyChart
        };
    default:
    }
}
var y = function(e) {
    return e[e.None = 0] = "None",
    e[e.Exchange = 1] = "Exchange",
    e[e.Rights = 2] = "Rights",
    e[e.ETFStock = 3] = "ETFStock",
    e[e.ETFFix = 4] = "ETFFix",
    e[e.ETFMixed = 5] = "ETFMixed",
    e[e.ETFZaminSakhteman = 6] = "ETFZaminSakhteman",
    e[e.ETFJasuraneh = 7] = "ETFJasuraneh",
    e[e.SandoghKala = 8] = "SandoghKala",
    e[e.NapeyvastehSiman = 9] = "NapeyvastehSiman",
    e[e.GovahiBourseKala = 10] = "GovahiBourseKala",
    e[e.Sekkeh = 11] = "Sekkeh",
    e[e.Maskan1 = 12] = "Maskan1",
    e[e.Tabaee = 13] = "Tabaee",
    e[e.Ekhtiar = 14] = "Ekhtiar",
    e[e.AtiSaham = 15] = "AtiSaham",
    e[e.AtiSabad = 16] = "AtiSabad",
    e[e.Fekri = 17] = "Fekri",
    e[e.PayehYellow = 18] = "PayehYellow",
    e[e.PayehOrange = 19] = "PayehOrange",
    e[e.PayehRed = 20] = "PayehRed",
    e[e.Koochak = 21] = "Koochak",
    e[e.Salaf = 22] = "Salaf",
    e[e.Bond1 = 23] = "Bond1",
    e[e.Bond2 = 24] = "Bond2",
    e[e.Bond3 = 25] = "Bond3",
    e[e.Bond4 = 26] = "Bond4",
    e[e.Bond5 = 27] = "Bond5",
    e[e.Bond6 = 28] = "Bond6",
    e[e.INDEX = 29] = "INDEX",
    e[e.bond7 = 30] = "bond7",
    e[e.EtfInEtf = 31] = "EtfInEtf",
    e[e.EtfAmlak = 32] = "EtfAmlak",
    e[e.NapeyvastehZaferan = 33] = "NapeyvastehZaferan",
    e[e.NapeyvastehSekkeh = 34] = "NapeyvastehSekkeh",
    e[e.NapeyvastehShisheh = 35] = "NapeyvastehShisheh",
    e[e.NapeyvastehMes = 36] = "NapeyvastehMes",
    e[e.NapeyvastehSangAhan = 37] = "NapeyvastehSangAhan",
    e[e.NapeyvastehMilgerd = 38] = "NapeyvastehMilgerd",
    e[e.ETFKhosusi = 39] = "ETFKhosusi",
    e[e.RightYellow = 40] = "RightYellow",
    e[e.RightOrange = 41] = "RightOrange",
    e[e.RightRed = 42] = "RightRed",
    e[e.EtfSector = 43] = "EtfSector",
    e[e.RightsKoochak = 44] = "RightsKoochak",
    e[e.BuyOptionTse = 45] = "BuyOptionTse",
    e[e.BuyOptionIfb = 46] = "BuyOptionIfb",
    e[e.SellOptionTse = 47] = "SellOptionTse",
    e[e.SellOptionIfb = 48] = "SellOptionIfb",
    e[e.Maskan2 = 50] = "Maskan2",
    e[e.ProMarket = 51] = "ProMarket",
    e[e.EnergyETF = 52] = "EnergyETF",
    e[e.AgreedMarket = 53] = "AgreedMarket",
    e
}(y || {});
var Rd = function(e) {
    return e.FirstStep = "FirstStep",
    e.SecondStep = "SecondStep",
    e.PaidInCapitalSurplus = "PaidInCapitalSurplus",
    e
}(Rd || {});
var Sa = class Sa {
}
;
Sa.EtfMarketUnits = [y.ETFStock, y.ETFFix, y.ETFMixed, y.ETFZaminSakhteman, y.ETFJasuraneh, y.ETFKhosusi, y.EtfInEtf, y.EtfAmlak],
Sa.BazarPayehMarketUnits = [y.PayehYellow, y.PayehOrange, y.PayehRed, y.RightYellow, y.RightOrange, y.RightRed],
Sa.symbolFlow = {
    0: "\u0639\u0645\u0648\u0645\u06CC",
    1: "\u0628\u0648\u0631\u0633",
    2: "\u0641\u0631\u0627\u0628\u0648\u0631\u0633",
    3: "\u0622\u062A\u06CC - \u0627\u062E\u062A\u06CC\u0627\u0631",
    4: "\u067E\u0627\u06CC\u0647 \u0641\u0631\u0627\u0628\u0648\u0631\u0633",
    5: "\u06AF\u0648\u0627\u0647\u06CC \u0635\u0627\u062F\u0631\u0627\u062A\u06CC",
    6: "\u0628\u0648\u0631\u0633 \u0627\u0646\u0631\u0698\u06CC",
    7: "\u0628\u0648\u0631\u0633 \u06A9\u0627\u0644\u0627"
},
Sa.PriorityTypeToText = {
    [Rd.FirstStep]: "\u0645\u0631\u062D\u0644\u0647 \u0627\u0648\u0644",
    [Rd.SecondStep]: "\u067E\u0630\u06CC\u0631\u0647 \u0646\u0648\u06CC\u0633\u06CC",
    [Rd.PaidInCapitalSurplus]: "\u0633\u0644\u0628 \u062D\u0642 \u062A\u0642\u062F\u0645"
},
Sa.symbolMarketUnit = {
    0: "\u0633\u0627\u06CC\u0631",
    1: "\u0633\u0647\u0627\u0645",
    2: "\u062D\u0642 \u062A\u0642\u062F\u0645 \u0633\u0647\u0627\u0645",
    3: "\u0635\u0646\u062F\u0648\u0642 \u0633\u0647\u0627\u0645",
    4: "\u0635\u0646\u062F\u0648\u0642 \u062B\u0627\u0628\u062A",
    5: "\u0635\u0646\u062F\u0648\u0642 \u0645\u062E\u062A\u0644\u0637",
    6: "\u0635\u0646\u062F\u0648\u0642 \u0632\u0645\u06CC\u0646 \u0648 \u0633\u0627\u062E\u062A\u0645\u0627\u0646",
    7: "\u0635\u0646\u062F\u0648\u0642 \u062C\u0633\u0648\u0631\u0627\u0646\u0647",
    8: "\u0635\u0646\u062F\u0648\u0642 \u0628\u0648\u0631\u0633 \u06A9\u0627\u0644\u0627",
    9: "\u06AF\u0648\u0627\u0647\u06CC \u0633\u06CC\u0645\u0627\u0646",
    10: "\u06AF\u0648\u0627\u0647\u06CC \u0633\u067E\u0631\u062F\u0647 \u06A9\u0627\u0644\u0627\u06CC\u06CC",
    11: "\u06AF\u0648\u0627\u0647\u06CC \u0633\u06A9\u0647",
    12: "\u0627\u0648\u0631\u0627\u0642 \u0645\u0633\u06A9\u0646",
    13: "\u0627\u0648\u0631\u0627\u0642 \u062A\u0628\u0639\u06CC",
    14: "\u0627\u062E\u062A\u06CC\u0627\u0631 (\u062E\u0631\u06CC\u062F \u0648 \u0641\u0631\u0648\u0634)",
    15: "\u0622\u062A\u06CC \u0633\u0647\u0645",
    16: "\u0633\u0628\u062F \u0622\u062A\u06CC",
    17: "\u062F\u0627\u0631\u0627\u06CC\u06CC \u0641\u06A9\u0631\u06CC",
    18: "\u0628\u0627\u0632\u0627\u0631 \u067E\u0627\u06CC\u0647 \u0632\u0631\u062F",
    19: "\u0628\u0627\u0632\u0627\u0631 \u067E\u0627\u06CC\u0647 \u0646\u0627\u0631\u0646\u062C\u06CC",
    20: "\u0628\u0627\u0632\u0627\u0631 \u067E\u0627\u06CC\u0647 \u0642\u0631\u0645\u0632",
    21: "\u0634\u0631\u06A9\u062A\u0647\u0627\u06CC \u06A9\u0648\u0686\u06A9 \u0648 \u0645\u062A\u0648\u0633\u0637",
    22: "\u0633\u0644\u0641",
    23: "\u0627\u0648\u0631\u0627\u0642 \u0645\u0634\u0627\u0631\u06A9\u062A",
    24: "\u0627\u0648\u0631\u0627\u0642 \u0635\u06A9\u0648\u06A9(\u0627\u062C\u0627\u0631\u0647/\u0645\u0631\u0627\u0628\u062D\u0647/\u062F\u06CC\u0646)",
    25: "\u0627\u0648\u0631\u0627\u0642 \u0627\u0631\u0632 \u0635\u0627\u062F\u0631\u0627\u062A\u06CC",
    26: "\u0627\u0633\u0646\u0627\u062F \u062E\u0632\u0627\u0646\u0647",
    27: "\u0627\u0648\u0631\u0627\u0642 (\u0645\u0634\u0627\u0631\u06A9\u062A/ \u0627\u062C\u0627\u0631\u0647/ \u0645\u0631\u0627\u0628\u062D\u0647)",
    28: "\u0645\u0638\u0646\u0647 \u06CC\u0627\u0628\u06CC",
    29: "\u0634\u0627\u062E\u0635",
    30: "\u06AF\u0627\u0645",
    31: "\u0635\u0646\u062F\u0648\u0642 \u062F\u0631 \u0635\u0646\u062F\u0648\u0642",
    32: "\u0635\u0646\u062F\u0648\u0642 \u0627\u0645\u0644\u0627\u06A9",
    33: "\u06AF\u0648\u0627\u0647\u06CC \u0632\u0639\u0641\u0631\u0627\u0646",
    34: "\u06AF\u0648\u0627\u0647\u06CC \u0633\u06A9\u0647",
    35: "\u06AF\u0648\u0627\u0647\u06CC \u0634\u06CC\u0634\u0647",
    36: "\u06AF\u0648\u0627\u0647\u06CC \u0645\u0633",
    37: "\u06AF\u0648\u0627\u0647\u06CC \u0633\u0646\u06AF \u0622\u0647\u0646",
    38: "\u06AF\u0648\u0627\u0647\u06CC \u0645\u06CC\u0644\u06AF\u0631\u062F",
    39: "\u0635\u0646\u062F\u0648\u0642 \u062E\u0635\u0648\u0635\u06CC",
    40: "\u062D\u0642 \u062A\u0642\u062F\u0645 \u067E\u0627\u06CC\u0647 \u0632\u0631\u062F",
    41: "\u062D\u0642 \u062A\u0642\u062F\u0645 \u0628\u0627\u0632\u0627\u0631 \u067E\u0627\u06CC\u0647 \u0646\u0627\u0631\u0646\u062C\u06CC",
    42: "\u062D\u0642 \u062A\u0642\u062F\u0645 \u0628\u0627\u0632\u0627\u0631 \u067E\u0627\u06CC\u0647 \u0642\u0631\u0645\u0632",
    45: "\u0627\u062E\u062A\u06CC\u0627\u0631 \u062E\u0631\u06CC\u062F",
    46: "\u0627\u062E\u062A\u06CC\u0627\u0631 \u062E\u0631\u06CC\u062F",
    47: "\u0627\u062E\u062A\u06CC\u0627\u0631 \u0641\u0631\u0648\u0634",
    48: "\u0627\u062E\u062A\u06CC\u0627\u0631 \u0641\u0631\u0648\u0634",
    50: "\u0627\u0648\u0631\u0627\u0642 \u0645\u0633\u06A9\u0646",
    51: "\u0633\u0631\u0645\u0627\u06CC\u0647\u200C\u06AF\u0630\u0627\u0631\u06CC \u062D\u0631\u0641\u0647\u200C\u0627\u06CC",
    52: "\u0635\u0646\u062F\u0648\u0642 \u0628\u0648\u0631\u0633 \u0627\u0646\u0631\u0698\u06CC",
    53: "\u0628\u0627\u0632\u0627\u0631 \u062A\u0648\u0627\u0641\u0642\u06CC"
},
Sa.validSymbolMarketUnitsForMarketMap = {
    1: "\u0633\u0647\u0627\u0645",
    2: "\u062D\u0642 \u062A\u0642\u062F\u0645 \u0633\u0647\u0627\u0645",
    3: "\u0635\u0646\u062F\u0648\u0642 \u0633\u0647\u0627\u0645",
    4: "\u0635\u0646\u062F\u0648\u0642 \u062B\u0627\u0628\u062A",
    5: "\u0635\u0646\u062F\u0648\u0642 \u0645\u062E\u062A\u0644\u0637",
    6: "\u0635\u0646\u062F\u0648\u0642 \u0632\u0645\u06CC\u0646 \u0648 \u0633\u0627\u062E\u062A\u0645\u0627\u0646",
    7: "\u0635\u0646\u062F\u0648\u0642 \u062C\u0633\u0648\u0631\u0627\u0646\u0647",
    8: "\u0635\u0646\u062F\u0648\u0642 \u0628\u0648\u0631\u0633 \u06A9\u0627\u0644\u0627",
    10: "\u06AF\u0648\u0627\u0647\u06CC \u0633\u067E\u0631\u062F\u0647 \u06A9\u0627\u0644\u0627\u06CC\u06CC",
    18: "\u0628\u0627\u0632\u0627\u0631 \u067E\u0627\u06CC\u0647 \u0632\u0631\u062F",
    19: "\u0628\u0627\u0632\u0627\u0631 \u067E\u0627\u06CC\u0647 \u0646\u0627\u0631\u0646\u062C\u06CC",
    20: "\u0628\u0627\u0632\u0627\u0631 \u067E\u0627\u06CC\u0647 \u0642\u0631\u0645\u0632",
    33: "\u06AF\u0648\u0627\u0647\u06CC \u0632\u0639\u0641\u0631\u0627\u0646",
    34: "\u06AF\u0648\u0627\u0647\u06CC \u0633\u06A9\u0647",
    40: "\u062D\u0642 \u062A\u0642\u062F\u0645 \u067E\u0627\u06CC\u0647 \u0632\u0631\u062F",
    41: "\u062D\u0642 \u062A\u0642\u062F\u0645 \u0628\u0627\u0632\u0627\u0631 \u067E\u0627\u06CC\u0647 \u0646\u0627\u0631\u0646\u062C\u06CC",
    42: "\u062D\u0642 \u062A\u0642\u062F\u0645 \u0628\u0627\u0632\u0627\u0631 \u067E\u0627\u06CC\u0647 \u0642\u0631\u0645\u0632"
},
Sa.validOptionSymbolMarketUnitsForMarketMap = {
    45: "\u062D\u0642 \u062A\u0642\u062F\u0645 \u0628\u0627\u0632\u0627\u0631 \u067E\u0627\u06CC\u0647 \u0646\u0627\u0631\u0646\u062C\u06CC",
    46: "\u062D\u0642 \u062A\u0642\u062F\u0645 \u0628\u0627\u0632\u0627\u0631 \u067E\u0627\u06CC\u0647 \u0642\u0631\u0645\u0632",
    47: "\u062D\u0642 \u062A\u0642\u062F\u0645 \u0628\u0627\u0632\u0627\u0631 \u067E\u0627\u06CC\u0647 \u0642\u0631\u0645\u0632",
    48: "\u062D\u0642 \u062A\u0642\u062F\u0645 \u0628\u0627\u0632\u0627\u0631 \u067E\u0627\u06CC\u0647 \u0642\u0631\u0645\u0632"
};
var VS = Sa;
var Rt = function(e) {
    return e[e.NotConnected = 0] = "NotConnected",
    e[e.Connecting = 1] = "Connecting",
    e[e.Connected = 2] = "Connected",
    e[e.Disconnected = 3] = "Disconnected",
    e[e.Unknown = 4] = "Unknown",
    e
}(Rt || {});
var ba = function(e) {
    return e[e.Field = 0] = "Field",
    e[e.Full = 1] = "Full",
    e
}(ba || {})
  , Tl = function(e) {
    return e.Raw = "RAW",
    e.Merge = "MERGE",
    e
}(Tl || {})
  , xa = function(e) {
    return e.Yes = "yes",
    e.No = "no",
    e
}(xa || {})
  , K = function(e) {
    return e[e.BestLimit = 1] = "BestLimit",
    e[e.Symbol = 2] = "Symbol",
    e[e.MarketWatch = 3] = "MarketWatch",
    e[e.SymbolHeader = 4] = "SymbolHeader",
    e[e.MarketDepthSymbol = 5] = "MarketDepthSymbol",
    e[e.OrderFormAskOrBid = 6] = "OrderFormAskOrBid",
    e[e.StockInfo = 7] = "StockInfo",
    e[e.OrderForm = 8] = "OrderForm",
    e[e.EasyFilter = 9] = "EasyFilter",
    e[e.Search = 10] = "Search",
    e[e.RecentSearch = 11] = "RecentSearch",
    e[e.Portfolio = 12] = "Portfolio",
    e[e.RealtimePortfolio = 13] = "RealtimePortfolio",
    e[e.Conditional = 14] = "Conditional",
    e[e.MarketAffecting = 15] = "MarketAffecting",
    e[e.BestOfMarket = 16] = "BestOfMarket",
    e[e.ReturnChart = 17] = "ReturnChart",
    e[e.DPortfolio = 18] = "DPortfolio",
    e[e.DRealtimePortfolio = 19] = "DRealtimePortfolio",
    e[e.TradeVolume = 20] = "TradeVolume",
    e[e.EasyFilterIndInst = 21] = "EasyFilterIndInst",
    e[e.GroupStateChange = 22] = "GroupStateChange",
    e[e.TextMessage = 23] = "TextMessage",
    e[e.Money = 24] = "Money",
    e[e.Order = 25] = "Order",
    e[e.OrderPlace = 26] = "OrderPlace",
    e[e.Index = 27] = "Index",
    e[e.MarketSheet = 28] = "MarketSheet",
    e[e.MarketSheetChartBuy = 29] = "MarketSheetChartBuy",
    e[e.MarketSheetChartSell = 30] = "MarketSheetChartSell",
    e[e.TodayActivity = 31] = "TodayActivity",
    e[e.ActiveStock = 32] = "ActiveStock",
    e[e.MarketViewTopRank = 33] = "MarketViewTopRank",
    e[e.SameGroup = 34] = "SameGroup",
    e[e.Performance = 35] = "Performance",
    e[e.PerformanceDetail = 36] = "PerformanceDetail",
    e[e.AlgoParent = 37] = "AlgoParent",
    e[e.PerformanceRecalculate = 38] = "PerformanceRecalculate",
    e[e.MtsCommand = 39] = "MtsCommand",
    e[e.OptionMarketView = 40] = "OptionMarketView",
    e[e.BlackScholesCalculator = 41] = "BlackScholesCalculator",
    e[e.OptionPosition = 42] = "OptionPosition",
    e[e.ContractInfo = 43] = "ContractInfo",
    e[e.OptionContract = 44] = "OptionContract",
    e[e.OptionCustomerStatus = 45] = "OptionCustomerStatus",
    e[e.OptionBaseSymbolInfo = 46] = "OptionBaseSymbolInfo",
    e[e.BaseSymbolInfo = 47] = "BaseSymbolInfo",
    e[e.OptionAveragePrice = 48] = "OptionAveragePrice",
    e
}(K || {});
var P = class P {
}
;
P.IndexSchema = {
    DayOfEvent: "timestamp",
    LastIndexValue: "aggregatedlast",
    YesterdayPrice: "prev-aggregatedlast",
    PercentVariation: "variationpreviousday"
},
P.TextMessageSchema = {
    timestamp: "timestamp",
    meta: "meta"
},
P.GroupStateChangeSchema = {
    group: "group",
    timestamp: "timestamp",
    stateCode: "state-code"
},
P.MarketDepthBestPriceSchema = {
    time: "timestamp",
    buyVolume1: "buy-volume-1",
    sellVolume1: "sell-volume-1",
    buyOrderCount1: "buy-order-count-1",
    sellOrderCount1: "sell-order-count-1",
    buyPrice1: "buy-price-1",
    sellPrice1: "sell-price-1",
    buyVolume2: "buy-volume-2",
    sellVolume2: "sell-volume-2",
    buyOrderCount2: "buy-order-count-2",
    sellOrderCount2: "sell-order-count-2",
    buyPrice2: "buy-price-2",
    sellPrice2: "sell-price-2",
    buyVolume3: "buy-volume-3",
    sellVolume3: "sell-volume-3",
    buyOrderCount3: "buy-order-count-3",
    sellOrderCount3: "sell-order-count-3",
    buyPrice3: "buy-price-3",
    sellPrice3: "sell-price-3",
    buyVolume4: "buy-volume-4",
    sellVolume4: "sell-volume-4",
    buyOrderCount4: "buy-order-count-4",
    sellOrderCount4: "sell-order-count-4",
    buyPrice4: "buy-price-4",
    sellPrice4: "sell-price-4",
    buyVolume5: "buy-volume-5",
    sellVolume5: "sell-volume-5",
    buyOrderCount5: "buy-order-count-5",
    sellOrderCount5: "sell-order-count-5",
    buyPrice5: "buy-price-5",
    sellPrice5: "sell-price-5"
},
P.MoneySchema = {
    timestamp: "timestamp",
    meta: "meta"
},
P.orderStateNewSchema = {
    timestamp: "timestamp",
    meta: "meta"
},
P.orderPlaceSchema = {
    isin: "isin",
    volumeAhead: "volume-ahead",
    placement: "placement"
},
P.SymbolSchema = {
    totalNumberOfSharesTraded: "total-number-of-shares-traded",
    totalNumberOfTrades: "total-number-of-trades",
    totalTradeValue: "total-trade-value",
    closingPrice: "closing-price",
    firstPrice: "opening-price",
    lastTradedPrice: "last-trade-price",
    maxDailyPrice: "max-daily-price",
    minDailyPrice: "min-daily-price",
    bestBuyLimitVolume: "buy-volume-1",
    bestBuyLimitPrice: "buy-price-1",
    bestSellLimitPrice: "sell-price-1",
    bestSellLimitVolume: "sell-volume-1",
    stateCode: "state-code",
    minValidBuyVolume: "min-valid-buy-volume",
    minValidSellVolume: "min-valid-sell-volume",
    maxValidBuyVolume: "max-valid-buy-volume",
    maxValidSellVolume: "max-valid-sell-volume",
    feeOfPreviousDaysClosingPrice: "prev-closing-price",
    maxDailyTradedPrice: "max-daily-traded-price",
    minDailyTradedPrice: "min-daily-traded-price",
    priceTickSize: "min-dealable-price",
    tradeDate: "trade-date2",
    lastTradedPriceVarPercent: "price-variation",
    navDate: "nav-date",
    navSubscription: "nav-subscription",
    navRedemption: "nav-redemption"
},
P.ActiveStockSchema = {
    firstTradedPrice: P.SymbolSchema.firstPrice,
    totalNumberOfTrades: P.SymbolSchema.totalNumberOfTrades,
    totalTradeValue: P.SymbolSchema.totalTradeValue,
    closePrice: P.SymbolSchema.closingPrice,
    lastTradedPrice: P.SymbolSchema.lastTradedPrice,
    totalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    stateCode: P.SymbolSchema.stateCode,
    tradeDate: P.SymbolSchema.tradeDate,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    maxDailyPrice: P.SymbolSchema.maxDailyPrice,
    minDailyPrice: P.SymbolSchema.minDailyPrice,
    navDate: P.SymbolSchema.navDate,
    navSubscription: P.SymbolSchema.navSubscription,
    navRedemption: P.SymbolSchema.navRedemption,
    lastTradedPriceVar: P.SymbolSchema.lastTradedPriceVarPercent,
    maxDailyTradedPrice: P.SymbolSchema.maxDailyTradedPrice,
    minDailyTradedPrice: P.SymbolSchema.minDailyTradedPrice,
    priceTickSize: P.SymbolSchema.priceTickSize,
    minValidBuyVolume: P.SymbolSchema.minValidBuyVolume,
    minValidSellVolume: P.SymbolSchema.minValidSellVolume,
    maxValidBuyVolume: P.SymbolSchema.maxValidBuyVolume,
    maxValidSellVolume: P.SymbolSchema.maxValidSellVolume,
    bidPrice: P.SymbolSchema.bestSellLimitPrice,
    askPrice: P.SymbolSchema.bestBuyLimitPrice
},
P.SameGroupSchema = {
    closePrice: P.SymbolSchema.closingPrice,
    firstTradedPrice: P.SymbolSchema.firstPrice,
    maxDailyPrice: P.SymbolSchema.maxDailyPrice,
    minDailyPrice: P.SymbolSchema.minDailyPrice,
    maxDailyTradedPrice: P.SymbolSchema.maxDailyTradedPrice,
    minDailyTradedPrice: P.SymbolSchema.minDailyTradedPrice,
    lastTradedPriceVarPercent: P.SymbolSchema.lastTradedPriceVarPercent,
    lastTradedPrice: P.SymbolSchema.lastTradedPrice,
    totalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    stateCode: P.SymbolSchema.stateCode,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    bidPrice: P.SymbolSchema.bestSellLimitPrice,
    askPrice: P.SymbolSchema.bestBuyLimitPrice
},
P.TradeVolumeSchema = {
    isin: "isin",
    timestamp: "timestamp",
    institutionCode: "institution-code",
    buyCountPerson: "buy-count-person",
    buyCountLegal: "buy-count-legal",
    buyVolumePerson: "buy-volume-person",
    buyVolumeLegal: "buy-volume-legal",
    sellCountPerson: "sell-count-person",
    sellCountLegal: "sell-count-legal",
    sellVolumePerson: "sell-volume-person",
    sellVolumeLegal: "sell-volume-legal"
},
P.SymbolHeaderSchema = {
    lastTradedPrice: P.SymbolSchema.lastTradedPrice,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    closePrice: P.SymbolSchema.closingPrice,
    totalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    stateCode: P.SymbolSchema.stateCode,
    lastTradedPriceVar: P.SymbolSchema.lastTradedPriceVarPercent
},
P.MarketDepthSymbolSchema = {
    maxDailyTradedPrice: P.SymbolSchema.maxDailyTradedPrice,
    minDailyTradedPrice: P.SymbolSchema.minDailyTradedPrice,
    maxDailyPrice: P.SymbolSchema.maxDailyPrice,
    minDailyPrice: P.SymbolSchema.minDailyPrice,
    lastTradedPrice: P.SymbolSchema.lastTradedPrice,
    closePrice: P.SymbolSchema.closingPrice,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    totalTradeValue: P.SymbolSchema.totalTradeValue,
    firstPrice: P.SymbolSchema.firstPrice,
    totalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded
},
P.StockInfoSchema = {
    firstPrice: P.SymbolSchema.firstPrice,
    totalNumberOfTrades: P.SymbolSchema.totalNumberOfTrades,
    totalTradeValue: P.SymbolSchema.totalTradeValue,
    closePrice: P.SymbolSchema.closingPrice,
    lastTradedPrice: P.SymbolSchema.lastTradedPrice,
    totalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    stateCode: P.SymbolSchema.stateCode,
    tradeDate: P.SymbolSchema.tradeDate,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    maxDailyPrice: P.SymbolSchema.maxDailyPrice,
    minDailyPrice: P.SymbolSchema.minDailyPrice,
    navDate: P.SymbolSchema.navDate,
    navSubscription: P.SymbolSchema.navSubscription,
    navRedemption: P.SymbolSchema.navRedemption
},
P.DPortfolioSchema = {
    totalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    totalNumberOfTrades: P.SymbolSchema.totalNumberOfTrades,
    totalTradeValue: P.SymbolSchema.totalTradeValue,
    closingPrice: P.SymbolSchema.closingPrice,
    firstTradedPrice: P.SymbolSchema.firstPrice,
    lastTradedPrice: P.SymbolSchema.lastTradedPrice,
    maxDailyPrice: P.SymbolSchema.maxDailyPrice,
    minDailyPrice: P.SymbolSchema.minDailyPrice,
    minDailyTradedPrice: P.SymbolSchema.minDailyTradedPrice,
    maxDailyTradedPrice: P.SymbolSchema.maxDailyTradedPrice,
    bestBuyLimitVolume: P.SymbolSchema.bestBuyLimitVolume,
    bestBuyLimitPrice: P.SymbolSchema.bestBuyLimitPrice,
    bestSellLimitPrice: P.SymbolSchema.bestSellLimitPrice,
    bestSellLimitVolume: P.SymbolSchema.bestSellLimitVolume,
    stateCode: P.SymbolSchema.stateCode,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    lastTradedPriceVarPercent: P.SymbolSchema.lastTradedPriceVarPercent,
    tradeDate: P.SymbolSchema.tradeDate
},
P.DRealtimePortfolioSchema = {
    totalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    totalNumberOfTrades: P.SymbolSchema.totalNumberOfTrades,
    totalTradeValue: P.SymbolSchema.totalTradeValue,
    closePrice: P.SymbolSchema.closingPrice,
    firstPrice: P.SymbolSchema.firstPrice,
    lastTradedPrice: P.SymbolSchema.lastTradedPrice,
    maxDailyPrice: P.SymbolSchema.maxDailyPrice,
    minDailyPrice: P.SymbolSchema.minDailyPrice,
    bestBuyLimitVolume: P.SymbolSchema.bestBuyLimitVolume,
    bestBuyLimitPrice: P.SymbolSchema.bestBuyLimitPrice,
    bestSellLimitPrice: P.SymbolSchema.bestSellLimitPrice,
    bestSellLimitVolume: P.SymbolSchema.bestSellLimitVolume,
    stateCode: P.SymbolSchema.stateCode,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    lastTradedPriceVarPercent: P.SymbolSchema.lastTradedPriceVarPercent,
    tradeDate: P.SymbolSchema.tradeDate
},
P.MarketWatchSchema = {
    totalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    totalNumberOfTrades: P.SymbolSchema.totalNumberOfTrades,
    totalTradeValue: P.SymbolSchema.totalTradeValue,
    closingPrice: P.SymbolSchema.closingPrice,
    firstTradedPrice: P.SymbolSchema.firstPrice,
    lastTradedPrice: P.SymbolSchema.lastTradedPrice,
    maxDailyPrice: P.SymbolSchema.maxDailyPrice,
    minDailyPrice: P.SymbolSchema.minDailyPrice,
    bestBuyLimitVolume: P.SymbolSchema.bestBuyLimitVolume,
    bestBuyLimitPrice: P.SymbolSchema.bestBuyLimitPrice,
    bestSellLimitPrice: P.SymbolSchema.bestSellLimitPrice,
    bestSellLimitVolume: P.SymbolSchema.bestSellLimitVolume,
    stateCode: P.SymbolSchema.stateCode,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    lastTradedPriceVarPercent: P.SymbolSchema.lastTradedPriceVarPercent,
    maxDailyTradedPrice: P.SymbolSchema.maxDailyTradedPrice,
    minDailyTradedPrice: P.SymbolSchema.minDailyTradedPrice
},
P.MobilePortfolioSchema = {
    lastTradedPrice: P.SymbolSchema.lastTradedPrice,
    closingPrice: P.SymbolSchema.closingPrice,
    stateCode: P.SymbolSchema.stateCode,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    totalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    lastTradedPriceVarPercent: P.SymbolSchema.lastTradedPriceVarPercent
},
P.MobileRealTimePortfolioSchema = {
    LastTradedPrice: P.SymbolSchema.lastTradedPrice,
    ClosingPrice: P.SymbolSchema.closingPrice,
    stateCode: P.SymbolSchema.stateCode,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    TotalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    lastTradedPriceVarPercent: P.SymbolSchema.lastTradedPriceVarPercent
},
P.OrderFormSchema = {
    priceTickSize: P.SymbolSchema.priceTickSize,
    minValidBuyVolume: P.SymbolSchema.minValidBuyVolume,
    minValidSellVolume: P.SymbolSchema.minValidSellVolume,
    maxValidBuyVolume: P.SymbolSchema.maxValidBuyVolume,
    maxValidSellVolume: P.SymbolSchema.maxValidSellVolume,
    maxDailyPrice: P.SymbolSchema.maxDailyPrice,
    minDailyPrice: P.SymbolSchema.minDailyPrice,
    bidPrice: P.SymbolSchema.bestSellLimitPrice,
    askPrice: P.SymbolSchema.bestBuyLimitPrice,
    feeOfPreviousDaysClosingPrice: P.SymbolHeaderSchema.feeOfPreviousDaysClosingPrice
},
P.OrderFormAskOrBidSchema = {
    bidPrice: P.SymbolSchema.bestSellLimitPrice,
    askPrice: P.SymbolSchema.bestBuyLimitPrice
},
P.EasyFilterSchema = {
    ClosingPrice: P.SymbolSchema.closingPrice,
    LastTradedPrice: P.SymbolSchema.lastTradedPrice,
    TotalTradeValue: P.SymbolSchema.totalTradeValue,
    TotalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    BestBuyLimitPrice_1: P.SymbolSchema.bestBuyLimitPrice,
    BestSellLimitPrice_1: P.SymbolSchema.bestSellLimitPrice,
    BestBuyLimitQuantity_1: P.SymbolSchema.bestBuyLimitVolume,
    BestSellLimitQuantity_1: P.SymbolSchema.bestSellLimitVolume,
    SymbolStateId: P.SymbolSchema.stateCode,
    LowAllowedPrice: P.SymbolSchema.minDailyPrice,
    HighAllowedPrice: P.SymbolSchema.maxDailyPrice,
    LowPrice: P.SymbolSchema.minDailyTradedPrice,
    HighPrice: P.SymbolSchema.maxDailyTradedPrice,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    lastTradedPriceVar: P.SymbolSchema.lastTradedPriceVarPercent
},
P.EasyFilterIndInstSchema = {
    IndInstTrade_Individual_SellVolume: P.TradeVolumeSchema.sellVolumePerson,
    IndInstTrade_Individual_BuyVolume: P.TradeVolumeSchema.buyVolumePerson,
    IndInstTrade_Institutional_SellVolume: P.TradeVolumeSchema.sellVolumeLegal,
    IndInstTrade_Institutional_BuyVolume: P.TradeVolumeSchema.buyVolumeLegal
},
P.SearchSchema = {
    SymbolStateId: P.SymbolSchema.stateCode,
    LastTradedPrice: P.SymbolSchema.lastTradedPrice,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    TotalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    lastTradedPriceVar: P.SymbolSchema.lastTradedPriceVarPercent
},
P.RecentSearchSchema = {
    SymbolStateId: P.SymbolSchema.stateCode,
    LastTradedPrice: P.SymbolSchema.lastTradedPrice,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    TotalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    lastTradedPriceVar: P.SymbolSchema.lastTradedPriceVarPercent,
    closePrice: P.SymbolSchema.closingPrice
},
P.ConditionalSchema = {
    LastTradedPrice: P.SymbolSchema.lastTradedPrice,
    TotalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    BestBuyLimitQuantity_1: P.SymbolSchema.bestBuyLimitVolume,
    BestSellLimitQuantity_1: P.SymbolSchema.bestSellLimitVolume,
    ClosingPrice: P.SymbolSchema.closingPrice,
    BestBuyLimitPrice_1: P.SymbolSchema.bestBuyLimitPrice,
    BestSellLimitPrice_1: P.SymbolSchema.bestSellLimitPrice,
    TotalTradeValue: P.SymbolSchema.totalTradeValue,
    FeeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    lastTradedPriceVar: P.SymbolSchema.lastTradedPriceVarPercent
},
P.MarketAffectingSchema = {
    SymbolStateId: P.SymbolSchema.stateCode,
    LastTradedPrice: P.SymbolSchema.lastTradedPrice,
    FeeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    TotalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    lastTradedPriceVar: P.SymbolSchema.lastTradedPriceVarPercent
},
P.BestOfMarketSchema = {
    SymbolStateId: P.SymbolSchema.stateCode,
    LastTradedPrice: P.SymbolSchema.lastTradedPrice,
    lastTradedPriceVar: P.SymbolSchema.lastTradedPriceVarPercent,
    BestBuyLimitPrice_1: P.SymbolSchema.bestBuyLimitPrice,
    BestSellLimitPrice_1: P.SymbolSchema.bestSellLimitPrice,
    BestSellLimitQuantity_1: P.SymbolSchema.bestSellLimitVolume,
    BestBuyLimitQuantity_1: P.SymbolSchema.bestBuyLimitVolume
},
P.MarketViewTopRankSchema = {
    totalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    totalNumberOfTrades: P.SymbolSchema.totalNumberOfTrades,
    totalTradeValue: P.SymbolSchema.totalTradeValue,
    lastTradedPrice: P.SymbolSchema.lastTradedPrice,
    tradedPriceVar: P.SymbolSchema.lastTradedPriceVarPercent,
    stateCode: P.SymbolSchema.stateCode,
    closePrice: P.SymbolSchema.closingPrice,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    bestBuyLimitVolume: P.SymbolSchema.bestBuyLimitVolume,
    bestSellLimitVolume: P.SymbolSchema.bestSellLimitVolume
},
P.TodayActivity = {
    SymbolStateId: P.SymbolSchema.stateCode
},
P.OptionMarketViewSchema = {
    stateCode: P.SymbolSchema.stateCode,
    lastTradedPrice: P.SymbolSchema.lastTradedPrice,
    lastTradedPriceVarPercent: P.SymbolSchema.lastTradedPriceVarPercent,
    closingPrice: P.SymbolSchema.closingPrice,
    totalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    totalTradeValue: P.SymbolSchema.totalTradeValue,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    bestBuyLimitVolume: P.SymbolSchema.bestBuyLimitVolume,
    bestBuyLimitPrice: P.SymbolSchema.bestBuyLimitPrice,
    bestSellLimitPrice: P.SymbolSchema.bestSellLimitPrice,
    bestSellLimitVolume: P.SymbolSchema.bestSellLimitVolume
},
P.BlackScholesCalculatorSchema = {
    lastTradedPrice: P.SymbolSchema.lastTradedPrice
},
P.ContractInfoSchema = {
    lastTradedPrice: P.SymbolSchema.lastTradedPrice,
    totalTradeValue: P.SymbolSchema.totalTradeValue,
    tradedPriceVar: P.SymbolSchema.lastTradedPriceVarPercent,
    totalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    closingPrice: P.SymbolSchema.closingPrice,
    stateCode: P.SymbolSchema.stateCode
},
P.OptionBaseSymbolInfo = {
    lastTradedPrice: P.SymbolSchema.lastTradedPrice,
    tradedPriceVar: P.SymbolSchema.lastTradedPriceVarPercent,
    closingPrice: P.SymbolSchema.closingPrice,
    totalTradeValue: P.SymbolSchema.totalTradeValue,
    totalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice,
    stateCode: P.SymbolSchema.stateCode
},
P.BaseSymbolSchema = {
    lastTradedPrice: P.SymbolSchema.lastTradedPrice,
    tradedPriceVar: P.SymbolSchema.lastTradedPriceVarPercent,
    closingPrice: P.SymbolSchema.closingPrice,
    totalTradeValue: P.SymbolSchema.totalTradeValue,
    totalNumberOfSharesTraded: P.SymbolSchema.totalNumberOfSharesTraded,
    feeOfPreviousDaysClosingPrice: P.SymbolSchema.feeOfPreviousDaysClosingPrice
},
P.MarketSheetSchema = {
    BuyCount: "buy-count",
    SellCount: "sell-count",
    BuyVolume: "buy-volume",
    SellVolume: "sell-volume"
},
P.MarketSheetBuyChartSchema = {
    meta: "meta"
},
P.MarketSheetSellChartSchema = {
    meta: "meta"
},
P.PerformanceSchema = {
    meta: "meta"
},
P.PerformanceDetailSchema = {
    meta: "meta"
},
P.AlgoParentSchema = {
    meta: "meta"
},
P.PerformanceRecalculateSchema = {
    meta: "meta"
},
P.MtsCommandSchema = {
    meta: "meta"
},
P.OptionPositionSchema = {
    meta: "meta"
},
P.OptionContractSchema = {
    initialMargin: "initial-margin",
    requiredMargin: "required-margin",
    maintenanceMargin: "maintenance-margin",
    openPositions: "open-positions"
},
P.OptionCustomerStatusSchema = {
    meta: "meta"
},
P.OptionAveragePriceSchema = {
    meta: "meta"
};
var se = P;
var bc = class bc {
}
;
bc.LsSchemas = [{
    type: K.BestLimit,
    schema: se.MarketDepthBestPriceSchema
}, {
    type: K.ActiveStock,
    schema: se.ActiveStockSchema
}, {
    type: K.TradeVolume,
    schema: se.TradeVolumeSchema
}, {
    type: K.EasyFilterIndInst,
    schema: se.EasyFilterIndInstSchema
}, {
    type: K.GroupStateChange,
    schema: se.GroupStateChangeSchema
}, {
    type: K.TextMessage,
    schema: se.TextMessageSchema
}, {
    type: K.Order,
    schema: se.orderStateNewSchema
}, {
    type: K.OrderPlace,
    schema: se.orderPlaceSchema
}, {
    type: K.Money,
    schema: se.MoneySchema
}, {
    type: K.Symbol,
    schema: se.SymbolSchema
}, {
    type: K.SymbolHeader,
    schema: se.SymbolHeaderSchema
}, {
    type: K.OrderFormAskOrBid,
    schema: se.OrderFormAskOrBidSchema
}, {
    type: K.MarketDepthSymbol,
    schema: se.MarketDepthSymbolSchema
}, {
    type: K.StockInfo,
    schema: se.StockInfoSchema
}, {
    type: K.OrderForm,
    schema: se.OrderFormSchema
}, {
    type: K.EasyFilter,
    schema: se.EasyFilterSchema
}, {
    type: K.Search,
    schema: se.SearchSchema
}, {
    type: K.RecentSearch,
    schema: se.RecentSearchSchema
}, {
    type: K.MarketWatch,
    schema: se.MarketWatchSchema
}, {
    type: K.Portfolio,
    schema: se.MobilePortfolioSchema
}, {
    type: K.RealtimePortfolio,
    schema: se.MobileRealTimePortfolioSchema
}, {
    type: K.Conditional,
    schema: se.ConditionalSchema
}, {
    type: K.MarketAffecting,
    schema: se.MarketAffectingSchema
}, {
    type: K.BestOfMarket,
    schema: se.BestOfMarketSchema
}, {
    type: K.DPortfolio,
    schema: se.DPortfolioSchema
}, {
    type: K.DRealtimePortfolio,
    schema: se.DRealtimePortfolioSchema
}, {
    type: K.TodayActivity,
    schema: se.TodayActivity
}, {
    type: K.Index,
    schema: se.IndexSchema
}, {
    type: K.MarketSheet,
    schema: se.MarketSheetSchema
}, {
    type: K.MarketSheetChartBuy,
    schema: se.MarketSheetBuyChartSchema
}, {
    type: K.MarketSheetChartSell,
    schema: se.MarketSheetSellChartSchema
}, {
    type: K.MarketViewTopRank,
    schema: se.MarketViewTopRankSchema
}, {
    type: K.SameGroup,
    schema: se.SameGroupSchema
}, {
    type: K.Performance,
    schema: se.PerformanceSchema
}, {
    type: K.PerformanceDetail,
    schema: se.PerformanceDetailSchema
}, {
    type: K.AlgoParent,
    schema: se.AlgoParentSchema
}, {
    type: K.PerformanceRecalculate,
    schema: se.PerformanceRecalculateSchema
}, {
    type: K.MtsCommand,
    schema: se.MtsCommandSchema
}, {
    type: K.OptionMarketView,
    schema: se.OptionMarketViewSchema
}, {
    type: K.BlackScholesCalculator,
    schema: se.BlackScholesCalculatorSchema
}, {
    type: K.OptionPosition,
    schema: se.OptionPositionSchema
}, {
    type: K.ContractInfo,
    schema: se.ContractInfoSchema
}, {
    type: K.OptionContract,
    schema: se.OptionContractSchema
}, {
    type: K.OptionBaseSymbolInfo,
    schema: se.OptionBaseSymbolInfo
}, {
    type: K.BaseSymbolInfo,
    schema: se.BaseSymbolSchema
}, {
    type: K.OptionCustomerStatus,
    schema: se.OptionCustomerStatusSchema
}, {
    type: K.OptionAveragePrice,
    schema: se.OptionAveragePriceSchema
}],
bc.LsSchemasTopic = [{
    schema: K.BestLimit,
    topic: "bestlimit"
}, {
    schema: K.ActiveStock,
    topic: "symbol"
}, {
    schema: K.TradeVolume,
    topic: "tradevolume"
}, {
    schema: K.EasyFilterIndInst,
    topic: "tradevolume"
}, {
    schema: K.GroupStateChange,
    topic: "groupstatechange"
}, {
    schema: K.TextMessage,
    topic: "textmessage"
}, {
    schema: K.Order,
    topic: "order"
}, {
    schema: K.OrderPlace,
    topic: "orderplace"
}, {
    schema: K.Money,
    topic: "money"
}, {
    schema: K.Symbol,
    topic: "symbol"
}, {
    schema: K.SymbolHeader,
    topic: "symbol"
}, {
    schema: K.MarketDepthSymbol,
    topic: "symbol"
}, {
    schema: K.StockInfo,
    topic: "symbol"
}, {
    schema: K.OrderForm,
    topic: "symbol"
}, {
    schema: K.EasyFilter,
    topic: "symbol"
}, {
    schema: K.Search,
    topic: "symbol"
}, {
    schema: K.RecentSearch,
    topic: "symbol"
}, {
    schema: K.MarketWatch,
    topic: "symbol"
}, {
    schema: K.Portfolio,
    topic: "symbol"
}, {
    schema: K.RealtimePortfolio,
    topic: "symbol"
}, {
    schema: K.Conditional,
    topic: "symbol"
}, {
    schema: K.MarketAffecting,
    topic: "symbol"
}, {
    schema: K.BestOfMarket,
    topic: "symbol"
}, {
    schema: K.ReturnChart,
    topic: "symbol"
}, {
    schema: K.DPortfolio,
    topic: "symbol"
}, {
    schema: K.DRealtimePortfolio,
    topic: "symbol"
}, {
    schema: K.OrderFormAskOrBid,
    topic: "symbol"
}, {
    schema: K.TodayActivity,
    topic: "symbol"
}, {
    schema: K.SameGroup,
    topic: "symbol"
}, {
    schema: K.Index,
    topic: "index"
}, {
    schema: K.MarketSheet,
    topic: "marketsheet"
}, {
    schema: K.MarketSheetChartBuy,
    topic: "marketsheet-details-buy"
}, {
    schema: K.MarketSheetChartSell,
    topic: "marketsheet-details-sell"
}, {
    schema: K.MarketViewTopRank,
    topic: "symbol"
}, {
    schema: K.Performance,
    topic: "performance"
}, {
    schema: K.PerformanceDetail,
    topic: "performancedetail"
}, {
    schema: K.AlgoParent,
    topic: "algoparent"
}, {
    schema: K.PerformanceRecalculate,
    topic: "performancerecalculate"
}, {
    schema: K.MtsCommand,
    topic: "mts-command"
}, {
    schema: K.OptionMarketView,
    topic: "symbol"
}, {
    schema: K.BlackScholesCalculator,
    topic: "symbol"
}, {
    schema: K.OptionPosition,
    topic: "option-position"
}, {
    schema: K.ContractInfo,
    topic: "symbol"
}, {
    schema: K.OptionContract,
    topic: "option-contract"
}, {
    schema: K.OptionCustomerStatus,
    topic: "option-customer-status"
}, {
    schema: K.OptionBaseSymbolInfo,
    topic: "symbol"
}, {
    schema: K.BaseSymbolInfo,
    topic: "symbol"
}, {
    schema: K.OptionAveragePrice,
    topic: "option-average-price"
}],
bc.LsAdapterName = [{
    topic: "bestlimit",
    value: "BESTLIMIT_ADAPTER"
}, {
    topic: "symbol",
    value: "RLC_ADAPTER"
}, {
    topic: "tradevolume",
    value: "SLE_ADAPTER"
}, {
    topic: "groupstatechange",
    value: "RLC_ADAPTER"
}, {
    topic: "textmessage",
    value: "SLE_ADAPTER"
}, {
    topic: "money",
    value: "SLE_ADAPTER"
}, {
    topic: "order",
    value: "SLE_ADAPTER"
}, {
    topic: "performance",
    value: "THIRDPARTY_ADAPTER"
}, {
    topic: "performancedetail",
    value: "THIRDPARTY_ADAPTER"
}, {
    topic: "algoparent",
    value: "THIRDPARTY_ADAPTER"
}, {
    topic: "orderplace",
    value: "SLE_ADAPTER"
}, {
    topic: "index",
    value: "SLE_ADAPTER"
}, {
    topic: "marketsheet",
    value: "MARKETSHEET_ADAPTER"
}, {
    topic: "marketsheet-details-buy",
    value: "MARKETSHEET_ADAPTER"
}, {
    topic: "marketsheet-details-sell",
    value: "MARKETSHEET_ADAPTER"
}, {
    topic: "performancerecalculate",
    value: "THIRDPARTY_ADAPTER"
}, {
    topic: "mts-command",
    value: "THIRDPARTY_ADAPTER"
}, {
    topic: "option-position",
    value: "SLE_ADAPTER"
}, {
    topic: "option-contract",
    value: "SLE_ADAPTER"
}, {
    topic: "option-customer-status",
    value: "SLE_ADAPTER"
}, {
    topic: "option-average-price",
    value: "SLE_ADAPTER"
}],
bc.SnapshotSchemas = [K.BestLimit, K.TradeVolume, K.GroupStateChange, K.Symbol, K.SymbolHeader, K.MarketDepthSymbol, K.StockInfo, K.OrderForm, K.EasyFilter, K.EasyFilterIndInst, K.RecentSearch, K.Conditional, K.MarketAffecting, K.BestOfMarket, K.ReturnChart, K.TodayActivity, K.Index, K.MarketWatch, K.Portfolio, K.RealtimePortfolio, K.DPortfolio, K.DRealtimePortfolio, K.OrderFormAskOrBid, K.MarketViewTopRank, K.ActiveStock, K.SameGroup, K.OptionMarketView, K.BlackScholesCalculator, K.ContractInfo, K.OptionContract, K.OptionBaseSymbolInfo, K.BaseSymbolInfo],
bc.RawModeSchemas = [K.Order, K.MarketSheetChartBuy, K.MarketSheetChartSell, K.Performance, K.PerformanceDetail, K.AlgoParent, K.OptionPosition, K.OptionCustomerStatus, K.OptionAveragePrice],
bc.FullModeChangeSchemas = [K.MarketWatch, K.Portfolio, K.RealtimePortfolio, K.DPortfolio, K.MarketViewTopRank, K.DRealtimePortfolio, K.SymbolHeader, K.ActiveStock, K.MarketDepthSymbol, K.TradeVolume, K.MarketSheet, K.BestLimit, K.OrderForm, K.SameGroup, K.OptionMarketView, K.ContractInfo, K.OptionContract, K.OptionBaseSymbolInfo, K.BaseSymbolInfo, K.Search];
var Zn = bc;
var Ol = class {
    constructor(t, n, i) {
        this.title = t,
        this.data = n,
        this.onMessageCallBack = i
    }
}
;
var $S = ( () => {
    let t = class t {
        agInit() {}
        refresh() {}
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["ag-grid-no-rows"]],
        decls: 1,
        vars: 0,
        template: function(r, s) {
            r & 1 && me(0, "empty-result-warning")
        },
        dependencies: [e_],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var tN = [{
    p: "\u0622",
    eng: "a"
}, {
    p: "\u0627",
    eng: "b"
}, {
    p: "\u0628",
    eng: "c"
}, {
    p: "\u067E",
    eng: "d"
}, {
    p: "\u062A",
    eng: "e"
}, {
    p: "\u062B",
    eng: "f"
}, {
    p: "\u062C",
    eng: "g"
}, {
    p: "\u0686",
    eng: "h"
}, {
    p: "\u062D",
    eng: "i"
}, {
    p: "\u062E",
    eng: "j"
}, {
    p: "\u062F",
    eng: "k"
}, {
    p: "\u0630",
    eng: "l"
}, {
    p: "\u0631",
    eng: "m"
}, {
    p: "\u0632",
    eng: "n"
}, {
    p: "\u0698",
    eng: "o"
}, {
    p: "\u0633",
    eng: "p"
}, {
    p: "\u0634",
    eng: "q"
}, {
    p: "\u0636",
    eng: "r"
}, {
    p: "\u0635",
    eng: "s"
}, {
    p: "\u0637",
    eng: "t"
}, {
    p: "\u0638",
    eng: "u"
}, {
    p: "\u0639",
    eng: "v"
}, {
    p: "\u063A",
    eng: "w"
}, {
    p: "\u0641",
    eng: "x"
}, {
    p: "\u0642",
    eng: "y"
}, {
    p: "\u06A9",
    eng: "z1"
}, {
    p: "\u06AF",
    eng: "z2"
}, {
    p: "\u0644",
    eng: "z3"
}, {
    p: "\u0645",
    eng: "z4"
}, {
    p: "\u0646",
    eng: "z5"
}, {
    p: "\u0648",
    eng: "z6"
}, {
    p: "\u0647",
    eng: "z7"
}, {
    p: "\u06CC",
    eng: "z8"
}, {
    p: "\u064A",
    eng: "z9"
}]
  , No = (e="") => {
    let t = "";
    e || (e = "");
    for (let n = 0; n < e?.length; n++) {
        let i = e[n]
          , r = tN.find(s => s.p === i);
        r ? t += r.eng : t += i
    }
    return t
}
  , voe = (e, t, n=!1) => e.map(i => ({
    source: i,
    enChared: No(i[t])
})).sort( (i, r) => {
    let s = 0;
    return i.enChared < r.enChared && (s = -1),
    i.enChared > r.enChared ? s = 1 : s = 0,
    s * (n ? -1 : 1)
}
).map(i => i.source);
var _oe = (e, t, n) => e.map(i => ({
    source: i,
    enChared: No(i[t])
})).sort( (i, r) => n === "asc" ? i.enChared < r.enChared ? -1 : i.enChared > r.enChared ? 1 : 0 : r.enChared < i.enChared ? -1 : r.enChared > i.enChared ? 1 : 0).map(i => i.source);
var WS = e => e == null ? "" : (+e).toLocaleString()
  , woe = e => e == null || isNaN(e) ? "-" : (+e).toLocaleString()
  , Coe = e => e.replace(/,/g, "")
  , nN = e => e ? e.substring(e.length - 1, e.length) != "1" ? e : e.substring(0, e.length - 1) : ""
  , Eoe = e => {
    let t = e.data.symbolFa || e.data.name || e.data.symbolName;
    return nN(t)
}
  , iN = e => {
    let t = e.slice(0, 1);
    return e.replace(t, t.toLowerCase())
}
  , Toe = $S
  , Ooe = '<div dir="rtl" class="loading"></div>'
  , Moe = e => {
    switch (e) {
    case se.SymbolSchema.lastTradedPriceVarPercent:
        return "priceVar";
    case se.SymbolSchema.totalNumberOfSharesTraded:
        return "totalNumberOfSharesTraded";
    case se.SymbolSchema.totalNumberOfTrades:
        return "totalNumberOfTrades";
    case se.SymbolSchema.totalTradeValue:
        return "totalTradeValue";
    case se.SymbolSchema.closingPrice:
        return "closingPrice";
    case se.SymbolSchema.firstPrice:
        return "firstTradedPrice";
    case se.SymbolSchema.lastTradedPrice:
        return "lastTradedPrice";
    case se.SymbolSchema.maxDailyPrice:
        return "highAllowedPrice";
    case se.SymbolSchema.minDailyPrice:
        return "lowAllowedPrice";
    case se.SymbolSchema.bestBuyLimitVolume:
        return "bestBuyQuantity";
    case se.SymbolSchema.bestBuyLimitPrice:
        return "bestBuyPrice";
    case se.SymbolSchema.bestSellLimitVolume:
        return "bestSellQuantity";
    case se.SymbolSchema.bestSellLimitPrice:
        return "bestSellPrice";
    case se.SymbolSchema.stateCode:
        return "stateColor";
    case se.SymbolSchema.minDailyTradedPrice:
        return "minDailyTradedPrice";
    case se.SymbolSchema.maxDailyTradedPrice:
        return "maxDailyTradedPrice";
    case se.TradeVolumeSchema.sellVolumePerson:
        return "indSV";
    case se.TradeVolumeSchema.buyVolumePerson:
        return "indBV";
    case se.TradeVolumeSchema.sellVolumeLegal:
        return "insSV";
    case se.TradeVolumeSchema.buyVolumeLegal:
        return "insBV";
    default:
        return iN(e)
    }
}
;
var Poe = (e, t) => e ? (+e.toFixed(t)).toLocaleString() : ""
  , koe = (e, t) => e === t ? 0 : e == null ? -1 : t == null ? 1 : e === t ? 0 : e == null ? -1 : t == null ? 1 : +e - +t
  , Aoe = (e, t) => {
    let n = No(e)
      , i = No(t);
    return n < i ? -1 : n > i ? 1 : 0
}
  , rN = function(e) {
    return e[e.MarketWatch = 0] = "MarketWatch",
    e[e.Portfolio = 1] = "Portfolio",
    e[e.Realtime = 2] = "Realtime",
    e[e.EasyFilter = 3] = "EasyFilter",
    e[e.Position = 4] = "Position",
    e[e.OptionMarketView = 5] = "OptionMarketView",
    e
}(rN || {});
var hu = "red"
  , Qf = "green"
  , vg = "yellow";
var Pt = function(e) {
    return e[e.P = 0] = "P",
    e[e.S = 1] = "S",
    e[e.C = 2] = "C",
    e
}(Pt || {})
  , ei = function(e) {
    return e[e.Exchange = 1] = "Exchange",
    e[e.BondETFMaskan = 2] = "BondETFMaskan",
    e[e.Gold = 3] = "Gold",
    e[e.Glass = 4] = "Glass",
    e[e.Cement = 5] = "Cement",
    e[e.Fix = 6] = "Fix",
    e[e.Energy = 7] = "Energy",
    e
}(ei || {});
var xc = class xc {
}
;
xc.OpenMarketEndTime = 1230,
xc.OpenMarketGroupStates = ["O", "P", "S"],
xc.GroupTypes = {
    [ei.Exchange]: ["16", "19", "91", "1N", "1Z", "21", "61", "71", "C1", "D1", "G1", "L1", "N1", "N2", "P1", "QC", "S1", "V1", "Z1", "ZS", "NS", "51", "T1"],
    [ei.BondETFMaskan]: ["17", "N4", "Q1", "M1"],
    [ei.Gold]: ["QB", "QS"],
    [ei.Glass]: ["QA"],
    [ei.Cement]: ["QA"],
    [ei.Fix]: ["27", "12", "1A", "I1", "I2", "H1"],
    [ei.Energy]: ["EZ"]
},
xc.IntegratedGroupTypes = [{
    groupType: ei.Exchange,
    headers: ["\u0633\u0647\u0627\u0645 \u0648 \u062D\u0642 \u062A\u0642\u062F\u0645 \u0633\u0647\u0627\u0645", "\u0635\u0646\u062F\u0648\u0642\u200C\u0647\u0627\u06CC \u0633\u0647\u0627\u0645\u06CC \u0648 \u0645\u062E\u062A\u0644\u0637"],
    titles: [{
        text: "\u067E\u06CC\u0634 \u06AF\u0634\u0627\u06CC\u0634",
        classes: ["w-40", "w-md-30"]
    }, {
        text: "\u0645\u0639\u0627\u0645\u0644\u0627\u062A \u067E\u06CC\u0648\u0633\u062A\u0647",
        classes: ["flex-fill"]
    }],
    days: [1, 2, 3, 4, 5],
    times: [{
        value: "08:45",
        classes: ["w-40", "w-md-30"],
        state: Pt.P
    }, {
        value: "09:00",
        classes: [],
        state: Pt.S
    }, {
        value: "12:30",
        classes: ["text-end", "flex-grow-1"],
        state: Pt.C
    }],
    progress: ["w-40 w-md-30 bg-warning", "flex-grow-1 bg-primary"],
    weekText: "\u0634\u0646\u0628\u0647 \u062A\u0627 \u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647"
}, {
    groupType: ei.Fix,
    headers: ["\u0627\u0648\u0631\u0627\u0642 \u0628\u0627 \u062F\u0631\u0622\u0645\u062F \u062B\u0627\u0628\u062A \u0641\u0631\u0627\u0628\u0648\u0631\u0633 (\u0645\u0634\u0627\u0631\u06A9\u062A/ \u0627\u062C\u0627\u0631\u0647/ \u0645\u0631\u0627\u0628\u062D\u0647)", "\u0635\u0646\u062F\u0648\u0642\u0647\u0627\u06CC \u062F\u0631\u0622\u0645\u062F \u062B\u0627\u0628\u062A"],
    titles: [{
        text: "\u067E\u06CC\u0634 \u06AF\u0634\u0627\u06CC\u0634",
        classes: ["w-40", "w-md-30"]
    }, {
        text: "\u0645\u0639\u0627\u0645\u0644\u0627\u062A \u067E\u06CC\u0648\u0633\u062A\u0647",
        classes: ["flex-fill"]
    }],
    days: [1, 2, 3, 4, 5],
    times: [{
        value: "08:25",
        classes: ["w-40", "w-md-30"],
        state: Pt.P
    }, {
        value: "08:30",
        classes: [],
        state: Pt.S
    }, {
        value: "15:00",
        classes: ["text-end", "flex-grow-1"],
        state: Pt.C
    }],
    progress: ["w-40 w-md-30 bg-warning", "flex-grow-1 bg-primary"],
    weekText: "\u0634\u0646\u0628\u0647 \u062A\u0627 \u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647"
}, {
    groupType: ei.BondETFMaskan,
    headers: ["\u0627\u0648\u0631\u0627\u0642 \u062A\u0633\u0647\u06CC\u0644\u0627\u062A \u0645\u0633\u06A9\u0646", "\u0627\u0648\u0631\u0627\u0642 \u0628\u0627 \u062F\u0631\u0622\u0645\u062F \u062B\u0627\u0628\u062A \u0628\u0648\u0631\u0633 (\u0645\u0634\u0627\u0631\u06A9\u062A/ \u0627\u062C\u0627\u0631\u0647/ \u0645\u0631\u0627\u0628\u062D\u0647)", "\u0635\u0646\u062F\u0648\u0642\u200C\u0647\u0627 \u0648 \u0633\u067E\u0631\u062F\u0647\u200C\u0647\u0627\u06CC \u06A9\u0627\u0644\u0627\u06CC\u06CC \u0628\u0647 \u063A\u06CC\u0631 \u0627\u0632 \u0637\u0644\u0627 (\u067E\u0633\u062A\u0647\u060C \u0632\u0639\u0641\u0631\u0627\u0646 \u0648 ...)"],
    titles: [{
        text: "\u067E\u06CC\u0634 \u06AF\u0634\u0627\u06CC\u0634",
        classes: ["w-40", "w-md-30"]
    }, {
        text: "\u0645\u0639\u0627\u0645\u0644\u0627\u062A \u067E\u06CC\u0648\u0633\u062A\u0647",
        classes: ["flex-fill"]
    }],
    days: [1, 2, 3, 4, 5],
    times: [{
        value: "08:45",
        classes: ["w-40", "w-md-30"],
        state: Pt.P
    }, {
        value: "09:00",
        classes: [],
        state: Pt.S
    }, {
        value: "15:00",
        classes: ["text-end", "flex-grow-1"],
        state: Pt.C
    }],
    progress: ["w-40 w-md-30 bg-warning", "flex-grow-1 bg-primary"],
    weekText: "\u0634\u0646\u0628\u0647 \u062A\u0627 \u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647"
}, {
    groupType: ei.Gold,
    headers: ["\u0635\u0646\u062F\u0648\u0642\u200C\u0647\u0627 \u0648 \u0633\u067E\u0631\u062F\u0647\u200C\u0647\u0627\u06CC \u06A9\u0627\u0644\u0627\u06CC\u06CC \u0637\u0644\u0627 (\u0639\u06CC\u0627\u0631\u060C \u0633\u06A9\u0647 \u0645\u0631\u06A9\u0632\u06CC \u0648 ...)"],
    titles: [{
        text: "\u067E\u06CC\u0634 \u06AF\u0634\u0627\u06CC\u0634",
        classes: ["w-40", "w-md-30"]
    }, {
        text: "\u0645\u0639\u0627\u0645\u0644\u0627\u062A \u067E\u06CC\u0648\u0633\u062A\u0647",
        classes: ["flex-fill"]
    }],
    days: [1, 2, 3, 4, 5],
    times: [{
        value: "11:30",
        classes: ["w-40", "w-md-30"],
        state: Pt.P
    }, {
        value: "12:00",
        classes: [],
        state: Pt.S
    }, {
        value: "15:00",
        classes: ["text-end", "flex-grow-1"],
        state: Pt.C
    }],
    progress: ["w-40 w-md-30 bg-warning", "flex-grow-1 bg-primary"],
    weekText: "\u0634\u0646\u0628\u0647 \u062A\u0627 \u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647"
}, {
    groupType: ei.Energy,
    headers: ["\u0635\u0646\u062F\u0648\u0642\u200C\u0647\u0627\u06CC \u0628\u0648\u0631\u0633 \u0627\u0646\u0631\u0698\u06CC"],
    titles: [{
        text: "\u067E\u06CC\u0634 \u06AF\u0634\u0627\u06CC\u0634",
        classes: ["w-40", "w-md-30"]
    }, {
        text: "\u0645\u0639\u0627\u0645\u0644\u0627\u062A \u067E\u06CC\u0648\u0633\u062A\u0647",
        classes: ["flex-fill"]
    }],
    days: [1, 2, 3, 4, 5],
    times: [{
        value: "10:45",
        classes: ["w-40", "w-md-30"],
        state: Pt.P
    }, {
        value: "11:00",
        classes: [],
        state: Pt.S
    }, {
        value: "14:00",
        classes: ["text-end", "flex-grow-1"],
        state: Pt.C
    }],
    progress: ["w-40 w-md-30 bg-warning", "flex-grow-1 bg-primary"],
    weekText: "\u0634\u0646\u0628\u0647 \u062A\u0627 \u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647"
}, {
    groupType: ei.Glass,
    headers: ["\u06AF\u0648\u0627\u0647\u06CC \u0633\u067E\u0631\u062F\u0647 \u06A9\u0627\u0644\u0627\u06CC\u06CC \u0634\u06CC\u0634\u0647"],
    titles: [{
        text: "\u067E\u06CC\u0634 \u06AF\u0634\u0627\u06CC\u0634",
        classes: ["w-75"]
    }, {
        text: "\u06AF\u0634\u0627\u06CC\u0634",
        classes: ["flex-fill"]
    }],
    days: [2],
    times: [{
        value: "12:45",
        classes: ["w-75"],
        state: Pt.P
    }, {
        value: "14:00",
        classes: [],
        state: Pt.C
    }],
    progress: ["bg-warning w-75", "bg-secondary flex-fill opacity-2"],
    weekText: "\u062F\u0648\u0634\u0646\u0628\u0647"
}, {
    groupType: ei.Cement,
    headers: ["\u06AF\u0648\u0627\u0647\u06CC \u0633\u067E\u0631\u062F\u0647 \u06A9\u0627\u0644\u0627\u06CC\u06CC \u0633\u06CC\u0645\u0627\u0646"],
    titles: [{
        text: "\u067E\u06CC\u0634 \u06AF\u0634\u0627\u06CC\u0634",
        classes: ["w-75"]
    }, {
        text: "\u06AF\u0634\u0627\u06CC\u0634",
        classes: ["flex-fill"]
    }],
    days: [2, 4],
    times: [{
        value: "12:45",
        classes: ["w-75"],
        state: Pt.P
    }, {
        value: "14:00",
        classes: [],
        state: Pt.C
    }],
    progress: ["bg-warning w-75", "bg-secondary flex-fill opacity-2"],
    weekText: "\u062F\u0648\u0634\u0646\u0628\u0647\u060C \u0633\u0647\u200C\u0634\u0646\u0628\u0647"
}],
xc.ExceptionSymbols = [],
xc.ExceptionGroups = [{
    group: "Q1",
    marketUnit: y.Sekkeh,
    groupType: ei.Gold,
    elseGroupType: ei.BondETFMaskan
}, {
    group: "QA",
    marketUnit: y.NapeyvastehSiman,
    groupType: ei.Cement,
    elseGroupType: ei.Glass
}];
var Fo = xc;
var du = e => {
    if (e = e?.trim(),
    e != null)
        switch (e) {
        case "AS":
        case "AR":
            return vg;
        case "A":
        case "65":
            return Qf;
        case "AG":
        case "IG":
        case "IS":
        case "IR":
        case "I":
        case "73":
            return hu
        }
    return ""
}
  , Voe = e => {
    if (e != null)
        switch (e = e.trim(),
        e) {
        case "I":
        case "73":
            return "\u0645\u0645\u0646\u0648\u0639";
        case "A":
        case "65":
            return "\u0645\u062C\u0627\u0632";
        case "AG":
            return "\u0645\u062C\u0627\u0632-\u0645\u0633\u062F\u0648\u062F";
        case "AS":
            return "\u0645\u062C\u0627\u0632-\u0645\u062A\u0648\u0642\u0641";
        case "AR":
            return "\u0645\u062C\u0627\u0632-\u0645\u062D\u0641\u0648\u0638";
        case "IG":
            return "\u0645\u0645\u0646\u0648\u0639-\u0645\u0633\u062F\u0648\u062F";
        case "IS":
            return "\u0645\u0645\u0646\u0648\u0639-\u0645\u062A\u0648\u0642\u0641";
        case "IR":
            return "\u0645\u0645\u0646\u0648\u0639-\u0645\u062D\u0641\u0648\u0638";
        default:
            return ""
        }
    return ""
}
;
var $oe = e => {
    if (!e)
        return "";
    switch (e) {
    case Qf:
        return "\u0645\u062C\u0627\u0632";
    case hu:
        return "\u0645\u0645\u0646\u0648\u0639-\u0645\u062A\u0648\u0642\u0641";
    case vg:
        return "\u0645\u062C\u0627\u0632 \u0645\u062D\u0641\u0648\u0638";
    default:
        return ""
    }
}
  , Woe = (e, t, n) => {
    let i = +Object.keys(Fo.GroupTypes).find(o => Fo.GroupTypes[o].includes(e));
    if (n) {
        let o = Fo.ExceptionSymbols.find(a => a.symbolIsin === n);
        o && (i = o.groupType)
    }
    let r = Fo.ExceptionGroups.find(o => o.group === e);
    return r && (r.marketUnit === t ? i = r.groupType : i = r.elseGroupType),
    Fo.IntegratedGroupTypes.find(o => o.groupType === i)
}
  , sN = (e, t) => {
    let n = e.split(":")
      , i = +(n[0] + n[1]);
    if (t) {
        let r = t.times.find(c => c.state === Pt.P)?.value?.split(":")
          , s = t.times.findIndex(c => c.state === Pt.S) > -1 ? t.times.find(c => c.state === Pt.S)?.value?.split(":") : t.times.find(c => c.state === Pt.C)?.value?.split(":")
          , o = t.times.find(c => c.state === Pt.S)?.value?.split(":")
          , a = t.times.find(c => c.state === Pt.C)?.value?.split(":");
        if (i >= +(r[0] + r[1]) && i < +(s[0] + s[1]))
            return Pt.P;
        if (i >= +(a[0] + a[1]) || i < +(r[0] + r[1]))
            return Pt.C;
        if (i >= +(o[0] + o[1]) && i < +(a[0] + a[1]))
            return Pt.S
    }
}
  , joe = (e, t, n) => {
    if (!n)
        return !1;
    let i = sN(e, t)
      , r = t?.times?.find(a => a.state === Pt.P)?.value?.split(":")
      , s = t?.times?.find(a => a.state === Pt.C)?.value?.split(":")
      , o = +(e.split(":")[0] + e.split(":")[1]);
    return !r || !s ? !1 : i === Pt.P || i === Pt.S || o >= +(r?.[0] + r?.[1]) - 1 && o <= +(s?.[0] + s?.[1])
}
  , qoe = (e, t, n) => n ? e?.toUpperCase() === "O" ? {
    clockClass: "text-warning",
    tooltip: "\u06AF\u0634\u0627\u06CC\u0634",
    iconName: Wt.Clock
} : t === Pt.P ? {
    clockClass: "text-warning",
    tooltip: "\u067E\u06CC\u0634 \u06AF\u0634\u0627\u06CC\u0634",
    iconName: Wt.Clock
} : t === Pt.S && e === "P" ? {
    clockClass: "text-warning",
    tooltip: "\u067E\u06CC\u0634 \u06AF\u0634\u0627\u06CC\u0634",
    iconName: Wt.Clock
} : t === Pt.S && e === "S" ? {
    clockClass: "text-success",
    tooltip: "\u0645\u0639\u0627\u0645\u0644\u0627\u062A \u067E\u06CC\u0648\u0633\u062A\u0647",
    iconName: Wt.Clock
} : t === Pt.C ? {
    clockClass: "text-danger",
    tooltip: "\u0628\u0633\u062A\u0647",
    iconName: Wt.ClockError
} : {
    clockClass: "",
    tooltip: "",
    iconName: Wt.Clock
} : {
    clockClass: "text-danger",
    tooltip: "\u0628\u0633\u062A\u0647",
    iconName: Wt.ClockError
};
var Jf = e => {
    let t = "";
    for (let n = 0; n < e.length; n++) {
        let i = e.charCodeAt(n);
        if (i >= 1776 && i <= 1785) {
            let r = i - 1728;
            t = t + String.fromCharCode(r)
        } else if (i >= 1632 && i <= 1641) {
            let r = i - 1584;
            t = t + String.fromCharCode(r)
        } else
            t = t + String.fromCharCode(i)
    }
    return t
}
;
var Xoe = e => e.toString().replace(/\d+/g, t => {
    let n = "";
    for (let i = 0, r = t.length; i < r; i++)
        n += String.fromCharCode(t.charCodeAt(i) + 1728);
    return n
}
)
  , Ml = () => {
    let e = new Date().getTime();
    return typeof performance < "u" && typeof performance.now == "function" && (e += performance.now()),
    "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, t => {
        let n = (e + Math.random() * 16) % 16 | 0;
        return e = Math.floor(e / 16),
        (t === "x" ? n : n & 3 | 8).toString(16)
    }
    )
}
;
var Koe = (e, t) => {
    let n = [];
    for (let i = 0, r = e.length; i < r; i += t)
        n.push(e.substring(i, i + t));
    return n
}
  , oN = e => {
    let t = e.toLowerCase();
    return t = t.replace(/a/g, "\u0634"),
    t = t.replace(/b/g, "\u0630"),
    t = t.replace(/c/g, "\u0632"),
    t = t.replace(/d/g, "\u06CC"),
    t = t.replace(/e/g, "\u062B"),
    t = t.replace(/f/g, "\u0628"),
    t = t.replace(/g/g, "\u0644"),
    t = t.replace(/h/g, "\u0627"),
    t = t.replace(/i/g, "\u0647"),
    t = t.replace(/j/g, "\u062A"),
    t = t.replace(/k/g, "\u0646"),
    t = t.replace(/l/g, "\u0645"),
    t = t.replace(/m/g, "\u067E"),
    t = t.replace(/n/g, "\u062F"),
    t = t.replace(/o/g, "\u062E"),
    t = t.replace(/p/g, "\u062D"),
    t = t.replace(/q/g, "\u0636"),
    t = t.replace(/r/g, "\u0642"),
    t = t.replace(/s/g, "\u0633"),
    t = t.replace(/t/g, "\u0641"),
    t = t.replace(/u/g, "\u0639"),
    t = t.replace(/v/g, "\u0631"),
    t = t.replace(/w/g, "\u0635"),
    t = t.replace(/x/g, "\u0637"),
    t = t.replace(/y/g, "\u063A"),
    t = t.replace(/z/g, "\u0638"),
    t = t.replace(/\[/g, "\u062C"),
    t = t.replace(/\]/g, "\u0686"),
    t = t.replace(/;/g, "\u06A9"),
    t = t.replace(/'/g, "\u06AF"),
    t = t.replace(/,/g, "\u0648"),
    t = t.replace(/A/g, "\u0624"),
    t = t.replace(/S/g, "\u0626"),
    t = t.replace(/G/g, "\u0623"),
    t = t.replace(/H/g, "\u0622"),
    t = t.replace(/X/g, "\u0637"),
    t = t.replace(/C/g, "\u0698"),
    t = t.replace(/N/g, "\u0654"),
    t = t.replace(/M/g, "\u0621"),
    t = t.replace(/\\/g, "\u067E"),
    t = t.replace(/`/g, "\u067E"),
    t
}
  , Yoe = e => {
    let t = e;
    return t = t.replace(new RegExp("\u06F0","g"), "0"),
    t = t.replace(new RegExp("\u06F1","g"), "1"),
    t = t.replace(new RegExp("\u06F2","g"), "2"),
    t = t.replace(new RegExp("\u06F3","g"), "3"),
    t = t.replace(new RegExp("\u06F4","g"), "4"),
    t = t.replace(new RegExp("\u06F5","g"), "5"),
    t = t.replace(new RegExp("\u06F6","g"), "6"),
    t = t.replace(new RegExp("\u06F7","g"), "7"),
    t = t.replace(new RegExp("\u06F8","g"), "8"),
    t = t.replace(new RegExp("\u06F9","g"), "9"),
    t
}
  , aN = (e, t=!1) => {
    let n = e;
    return n = n.replace(new RegExp("\u064A","g"), "\u06CC"),
    n = n.replace(new RegExp("\u0643","g"), "\u06A9"),
    t && (n = oN(n)),
    n
}
;
var Qoe = e => /[0-9]/.test(e)
  , Joe = e => {
    let t = "";
    if (e)
        for (let n = 0; n < e.length; n++)
            t += e.charCodeAt(n);
    return +("0." + t.slice(-10))
}
  , Zoe = e => /^[A-Za-z0-9:.,% ]*$/.test(e)
  , eae = e => /^[آ-ی0-9۰-۹:%،. ]*$/.test(aN(e).replaceAll("\u200C", ""));
String.prototype.withSeparator = function(e=",") {
    return this.replace(/\B(?=(\d{3})+(?!\d))/g, e)
}
;
var Ti = g5(r_());
var yr = ( () => {
    let t = class t {
        static ticksToDate(i) {
            if (!i)
                return null;
            let r = +i / 1e4
              , s = Math.abs(new Date(0,0,1).setFullYear(1));
            return new Date(r - s)
        }
        static getPersianMonth(i) {
            let s = (0,
            Ti.default)(new Date(i)).locale("fa").format("YYYY/M/D")
              , o = "";
            switch (parseInt(s.substr(5, 2).replace("/", ""))) {
            case 1:
                o = "\u0641\u0631\u0648\u0631\u062F\u06CC\u0646";
                break;
            case 2:
                o = "\u0627\u0631\u062F\u06CC\u0628\u0647\u0634\u062A";
                break;
            case 3:
                o = "\u062E\u0631\u062F\u0627\u062F";
                break;
            case 4:
                o = "\u062A\u06CC\u0631";
                break;
            case 5:
                o = "\u0645\u0631\u062F\u0627\u062F";
                break;
            case 6:
                o = "\u0634\u0647\u0631\u06CC\u0648\u0631";
                break;
            case 7:
                o = "\u0645\u0647\u0631";
                break;
            case 8:
                o = "\u0622\u0628\u0627\u0646";
                break;
            case 9:
                o = "\u0622\u0630\u0631";
                break;
            case 10:
                o = "\u062F\u06CC";
                break;
            case 11:
                o = "\u0628\u0647\u0645\u0646";
                break;
            case 12:
                o = "\u0627\u0633\u0641\u0646\u062F";
                break
            }
            return o
        }
        static getPersianDayOfWeek(i) {
            return ["\u06CC\u06A9\u0634\u0646\u0628\u0647", "\u062F\u0648\u0634\u0646\u0628\u0647", "\u0633\u0647 \u0634\u0646\u0628\u0647", "\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647", "\u067E\u0646\u062C \u0634\u0646\u0628\u0647", "\u062C\u0645\u0639\u0647", "\u0634\u0646\u0628\u0647"][new Date(i).getDay()]
        }
        static getJDayOfMonth(i) {
            let s = (0,
            Ti.default)(new Date(i)).locale("fa").format("YYYY/M/D");
            return s.substring(s.lastIndexOf("/") + 1)
        }
        static getJDateLongWithDay(i, r=!0) {
            let o = ["\u06CC\u06A9\u0634\u0646\u0628\u0647", "\u062F\u0648\u0634\u0646\u0628\u0647", "\u0633\u0647 \u0634\u0646\u0628\u0647", "\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647", "\u067E\u0646\u062C \u0634\u0646\u0628\u0647", "\u062C\u0645\u0639\u0647", "\u0634\u0646\u0628\u0647"][new Date(i).getDay()]
              , c = (0,
            Ti.default)(new Date(i)).locale("fa").format("YYYY/M/D")
              , l = "";
            switch (parseInt(c.substr(5, 2).replace("/", ""))) {
            case 1:
                l = "\u0641\u0631\u0648\u0631\u062F\u06CC\u0646";
                break;
            case 2:
                l = "\u0627\u0631\u062F\u06CC\u0628\u0647\u0634\u062A";
                break;
            case 3:
                l = "\u062E\u0631\u062F\u0627\u062F";
                break;
            case 4:
                l = "\u062A\u06CC\u0631";
                break;
            case 5:
                l = "\u0645\u0631\u062F\u0627\u062F";
                break;
            case 6:
                l = "\u0634\u0647\u0631\u06CC\u0648\u0631";
                break;
            case 7:
                l = "\u0645\u0647\u0631";
                break;
            case 8:
                l = "\u0622\u0628\u0627\u0646";
                break;
            case 9:
                l = "\u0622\u0630\u0631";
                break;
            case 10:
                l = "\u062F\u06CC";
                break;
            case 11:
                l = "\u0628\u0647\u0645\u0646";
                break;
            case 12:
                l = "\u0627\u0633\u0641\u0646\u062F";
                break
            }
            let u = new Date;
            u.setDate(u.getDate() + 1),
            u.setHours(0, 0, 0, 0);
            let h = new Date;
            h.setDate(h.getDate()),
            h.setHours(0, 0, 0, 0);
            let d = new Date(i).setHours(0, 0, 0, 0);
            return r && (d.valueOf() === u.valueOf() && (o = "\u0641\u0631\u062F\u0627"),
            d.valueOf() === h.valueOf() && (o = "\u0627\u0645\u0631\u0648\u0632")),
            o + " - " + c.substring(c.lastIndexOf("/") + 1) + " " + l
        }
        static getJDateLongString(i, r=!0) {
            let s = t.getJDateLongWithDay(i, r)
              , a = (0,
            Ti.default)(new Date(i)).locale("fa").format("YYYY/M/D");
            return s + " " + a.substr(0, 4)
        }
        static isValidDate(i) {
            return new Date(i).getFullYear() > 1800
        }
        static getformatTime(i) {
            let r = (c, l) => ("000" + c).slice(-l)
              , s = Math.floor(i / 3600)
              , o = Math.floor(i % 3600 / 60)
              , a = i % 60;
            return `${s ? r(s, 2) + ":" : ""}${r(o, 2)}:${r(a, 2)}`
        }
        static calculateShamsiDateDifference(i, r) {
            let s = this.getJDate(i, "YYYY/MM/DD")
              , o = this.getJDate(r, "YYYY/MM/DD")
              , a = +o.slice(0, 4) - +s.slice(0, 4)
              , c = +o.slice(5, 7) - +s.slice(5, 7)
              , l = +o.slice(8, 10) - +s.slice(8, 10);
            return l < 0 && (c -= 1,
            l += Ti.default.jDaysInMonth(+o.slice(0, 4), +o.slice(5, 7) - 1)),
            c < 0 && (a -= 1,
            c += 12),
            {
                years: a,
                months: c,
                days: l
            }
        }
    }
    ;
    t.getJDayOfWeek = i => i < 0 || i > 6 ? "" : ["\u06CC\u06A9\u0634\u0646\u0628\u0647", "\u062F\u0648\u0634\u0646\u0628\u0647", "\u0633\u0647 \u0634\u0646\u0628\u0647", "\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647", "\u067E\u0646\u062C \u0634\u0646\u0628\u0647", "\u062C\u0645\u0639\u0647", "\u0634\u0646\u0628\u0647"][i],
    t.isCurrentDateInDateRange = (i, r, s, o, a, c) => {
        let l = Ti.default.from(i, "fa", "YYYY/M/D").toDate();
        l.setHours(s, o, 0, 0);
        let u = Ti.default.from(r, "fa", "YYYY/M/D").toDate();
        u.setHours(a, c, 0, 0);
        let h = new Date;
        return l <= h && u >= h
    }
    ,
    t.isCurrentTimeInTimeRange = (i, r, s, o, a, c) => {
        let l = Ti.default.from(i, "fa", "YYYY/M/D").toDate()
          , u = Ti.default.from(i, "fa", "YYYY/M/D").toDate()
          , h = new Date;
        if (!r)
            return l.setHours(s, o, 0, 0),
            u.setHours(a, c, 59, 59),
            l <= h && u >= h;
        let d = Ti.default.from(r, "fa", "YYYY/M/D").toDate();
        if (l.setHours(s, o, 0, 0),
        d.setHours(a, c, 59, 59),
        l > h || d < h)
            return !1;
        let f = new Date;
        f.setHours(s, o, 0, 0);
        let g = new Date;
        return g.setHours(a, c, 59, 59),
        f <= h && g >= h
    }
    ,
    t.convertFormattedNumberToLocaleDate = i => new Date(i.replace(/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)$/, "$4:$5:$6 $2/$3/$1")).toLocaleString(),
    t.getJDate = (i, r) => i && t.isValidDate(i) ? (0,
    Ti.default)(i).locale("fa").format(r ?? "YYYY/M/D") : "",
    t.getDateWithTimeFromNumber = (i, r=!0) => {
        if (i) {
            let s = +i.slice(0, 4)
              , o = +i.slice(4, 6)
              , a = +i.slice(6, 8)
              , c = r ? i.slice(8, 10) : "0"
              , l = r ? i.slice(10, 12) : "0"
              , u = r ? i.slice(12, 14) : "0";
            return new Date(`${s}/${o}/${a} ${c}:${l}:${u}`)
        }
        return null
    }
    ,
    t.getJDateWithTimeFromNumber = i => {
        if (i) {
            let r = +i.slice(0, 4)
              , s = +i.slice(4, 6)
              , o = +i.slice(6, 8)
              , a = i.slice(8, 10)
              , c = i.slice(10, 12)
              , l = i.slice(12, 14)
              , u = new Date;
            return u.setUTCFullYear(r, s - 1, o),
            t.getJDate(u) + "  " + a + ":" + c + ":" + l
        }
        return null
    }
    ,
    t.getJDateWithTimeFromNumberSetTimeZone = (i, r) => {
        if (i) {
            let s = -new Date().getTimezoneOffset()
              , o = +i.slice(0, 4)
              , a = +i.slice(4, 6)
              , c = +i.slice(6, 8)
              , l = i.slice(8, 10)
              , u = i.slice(10, 12)
              , h = i.slice(12, 14)
              , d = new Date;
            d.setUTCFullYear(o, a - 1, c),
            d.setHours(+l),
            d.setMinutes(+u),
            d.setSeconds(+h);
            let f = (0,
            Ti.default)(d).add(s, "m").toDate();
            return (r ? "" : t.getJDate(f) + "  ") + ("0" + f.getHours()).slice(-2) + ":" + ("0" + f.getMinutes()).slice(-2) + ":" + ("0" + f.getSeconds()).slice(-2)
        }
        return null
    }
    ,
    t.getTimeFromNumber = i => {
        if (i) {
            let r = i.slice(8, 10)
              , s = i.slice(10, 12)
              , o = i.slice(12, 14);
            return r + ":" + s + ":" + o
        }
        return null
    }
    ,
    t.getFormattedJDate = i => i && t.isValidDate(i) ? (0,
    Ti.default)(i).locale("fa").format("YYYY/MM/DD") : null,
    t.getFormattedJTime = i => i && t.isValidDate(i) ? (0,
    Ti.default)(i).locale("fa").format("HH:mm:ss") : null,
    t.getFormattedJDateTime = i => i && t.isValidDate(i) ? (0,
    Ti.default)(i).locale("fa").format("HH:mm:ss YYYY/MM/DD") : null,
    t.jDateToDate = i => {
        if (i) {
            i = Jf(i);
            let r = Ti.default.from(i, "fa", "YYYY/MM/D").locale("en").format("YYYY-MM-DD");
            return new Date(r)
        }
        return null
    }
    ,
    t.getFormattedDate = i => {
        let r = i.getFullYear().toString()
          , s = (i.getMonth() + 1).toString()
          , o = i.getDate().toString();
        return o.length === 1 && (o = "0" + o),
        s.length === 1 && (s = "0" + s),
        r + "-" + s + "-" + o
    }
    ,
    t.gregorianToJalali = (i, r, s) => {
        let o = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], a = [31, 31, 31, 31, 31, 31, 30, 30, 30, 30, 30, 29], c = ["\u06CC\u06A9 \u0634\u0646\u0628\u0647", "\u062F\u0648 \u0634\u0646\u0628\u0647", "\u0633\u0647 \u0634\u0646\u0628\u0647", "\u0686\u0647\u0627\u0631 \u0634\u0646\u0628\u0647", "\u067E\u0646\u062C \u0634\u0646\u0628\u0647", "\u062C\u0645\u0639\u0647", "\u0634\u0646\u0628\u0647"], l, u, h, d, f = i - 1600, g = r - 1, p = s - 1, v = 365 * f + Math.floor((f + 3) / 4) - Math.floor((f + 99) / 100) + Math.floor((f + 399) / 400);
        for (l = 0; l < g; ++l)
            v += o[l];
        for (g > 1 && (f % 4 === 0 && f % 100 !== 0 || f % 400 === 0) && ++v,
        v += p,
        u = v - 79,
        h = Math.floor(u / 12053),
        u %= 12053,
        d = 979 + 33 * h + 4 * Math.floor(u / 1461),
        u %= 1461,
        u >= 366 && (d += Math.floor((u - 1) / 365),
        u = (u - 1) % 365),
        l = 0; l < 11 && u >= a[l]; ++l)
            u -= a[l];
        let S = new Date(i,r - 1,s);
        return `${c[S.getDay()]}  ${d}/${l + 1}/${u + 1}`
    }
    ,
    t.utcToTehran = (i, r) => i + r + 36e5 * 3.5,
    t.persianDateToGoDate = i => {
        if (!i)
            return i;
        let[r,s,o] = i.split(" ")[0].split("/").map(Number);
        return Ti.default.utc(`${r}/${s}/${o}`, "jYYYY/jMM/jDD").startOf("day").toISOString()
    }
    ,
    t.daysBetweenTwoDates = (i, r) => (r.setHours(0),
    r.setMinutes(0),
    r.setSeconds(0),
    i.setHours(0),
    i.setMinutes(0),
    i.setSeconds(0),
    Math.ceil((+r.setHours(0) - +i) / (1e3 * 60 * 60 * 24))),
    t.georgianDateToShamsi = i => Intl.DateTimeFormat("fa-IR", {
        year: "numeric",
        month: "numeric",
        day: "numeric",
        weekday: "short"
    }).format(i),
    t.getDifferTimestampInSeconds = i => {
        let r = i;
        return (new Date().getTime() - r) / 1e3
    }
    ;
    let e = t;
    return e
}
)();
var Zf = "Android"
  , _g = "iOS"
  , jS = "unknown"
  , qS = "Desktop"
  , sae = "easyChartLayout";
var oae = "myAdjustmentType";
var aae = new Date(2006,2,21)
  , cae = 15
  , zS = 825
  , yg = 1500;
var XS = 824;
var Pl = class {
    constructor(t, n) {
        this.desktopValidVersion = t,
        this.mobileValidVersion = n
    }
    isValid(t, n) {
        return this.checkBrowserVersion(n, t ? this.mobileValidVersion : this.desktopValidVersion)
    }
    checkBrowserVersion(t, n) {
        return t >= n
    }
}
  , Sg = new Map([["chrome", new Pl(72,71)], ["edge", new Pl(79,79)], ["firefox", new Pl(69,79)], ["opera", new Pl(58,50)], ["samsung", new Pl(10,10)]]);
var KS = [{
    browserName: "chrome",
    linksInfo: [{
        os: "android",
        icon: "assets/images/bazzar.svg",
        link: "https://cafebazaar.ir/app/com.android.chrome",
        linkTitle: "\u0644\u06CC\u0646\u06A9 \u0628\u0627\u0632\u0627\u0631"
    }, {
        os: "android",
        icon: "assets/images/google-play.svg",
        link: "https://play.google.com/store/apps/details?id=com.android.chrome&hl=en_IN&pli=1",
        linkTitle: "\u0644\u06CC\u0646\u06A9 \u06AF\u0648\u06AF\u0644"
    }, {
        os: "ios",
        icon: "assets/images/apple.svg",
        link: "https://apps.apple.com/us/app/google-chrome/id535886823",
        linkTitle: "\u0627\u067E \u0627\u0633\u062A\u0648\u0631"
    }, {
        os: "ios",
        icon: "assets/images/sibche.svg",
        link: "https://sibche.com/applications/google-chrome",
        linkTitle: "\u0633\u06CC\u0628 \u0686"
    }, {
        os: "desktop",
        icon: "assets/images/link.svg",
        link: "https://www.google.com/chrome/",
        linkTitle: "\u062F\u0627\u0646\u0644\u0648\u062F \u0645\u0631\u0648\u0631\u06AF\u0631"
    }]
}, {
    browserName: "safari",
    linksInfo: [{
        os: "ios",
        icon: "assets/images/apple.svg",
        link: "https://apps.apple.com/us/app/safari/id1146562112",
        linkTitle: "\u0627\u067E \u0627\u0633\u062A\u0648\u0631"
    }, {
        os: "desktop",
        icon: "assets/images/link.svg",
        link: "https://apps.apple.com/us/app/safari/id1146562112",
        linkTitle: "\u062F\u0627\u0646\u0644\u0648\u062F \u0645\u0631\u0648\u0631\u06AF\u0631"
    }]
}, {
    browserName: "firefox",
    linksInfo: [{
        os: "ios",
        icon: "assets/images/apple.svg",
        link: "https://apps.apple.com/us/app/firefox-private-safe-browser/id989804926",
        linkTitle: "\u0627\u067E \u0627\u0633\u062A\u0648\u0631"
    }, {
        os: "android",
        icon: "assets/images/bazzar.svg",
        link: "https://cafebazaar.ir/app/org.mozilla.firefox",
        linkTitle: "\u06A9\u0627\u0641\u0647 \u0628\u0627\u0632\u0627\u0631"
    }, {
        os: "android",
        icon: "assets/images/google-play.svg",
        link: "https://play.google.com/store/apps/details?id=org.mozilla.firefox&hl=en&gl=US",
        linkTitle: "\u06AF\u0648\u06AF\u0644 \u067E\u0644\u06CC"
    }, {
        os: "desktop",
        icon: "assets/images/link.svg",
        link: "https://www.mozilla.org/en-US/firefox/new/",
        linkTitle: "\u062F\u0627\u0646\u0644\u0648\u062F \u0645\u0631\u0648\u0631\u06AF\u0631"
    }]
}, {
    browserName: "edge",
    linksInfo: [{
        os: "ios",
        icon: "assets/images/apple.svg",
        link: "https://apps.apple.com/us/app/microsoft-edge-web-browser/id1288723196",
        linkTitle: "\u0627\u067E \u0627\u0633\u062A\u0648\u0631"
    }, {
        os: "android",
        icon: "assets/images/bazzar.svg",
        link: "https://cafebazaar.ir/app/com.microsoft.emmx",
        linkTitle: "\u06A9\u0627\u0641\u0647 \u0628\u0627\u0632\u0627\u0631"
    }, {
        os: "desktop",
        icon: "assets/images/link.svg",
        link: "https://www.microsoft.com/en-us/edge?form=MA13FJ&exp=e00",
        linkTitle: "\u062F\u0627\u0646\u0644\u0648\u062F \u0645\u0631\u0648\u0631\u06AF\u0631"
    }]
}, {
    browserName: "opera",
    linksInfo: [{
        os: "ios",
        icon: "assets/images/apple.svg",
        link: "https://apps.apple.com/us/app/opera-browser-private-vpn/id1411869974",
        linkTitle: "\u0627\u067E \u0627\u0633\u062A\u0648\u0631"
    }, {
        os: "android",
        icon: "assets/images/google-play.svg",
        link: "https://play.google.com/store/apps/details?id=com.opera.browser&hl=en&gl=US",
        linkTitle: "\u06AF\u0648\u06AF\u0644 \u067E\u0644\u06CC"
    }, {
        os: "desktop",
        icon: "assets/images/link.svg",
        link: "https://www.opera.com/download",
        linkTitle: "\u062F\u0627\u0646\u0644\u0648\u062F \u0645\u0631\u0648\u0631\u06AF\u0631"
    }]
}, {
    browserName: "samsung",
    linksInfo: [{
        os: "android",
        icon: "assets/images/bazzar.svg",
        link: "https://cafebazaar.ir/app/com.sec.android.app.sbrowser",
        linkTitle: "\u06A9\u0627\u0641\u0647 \u0628\u0627\u0632\u0627\u0631"
    }, {
        os: "android",
        icon: "assets/images/google-play.svg",
        link: "https://play.google.com/store/search?q=samsung%20browser&c=apps&hl=en&gl=US",
        linkTitle: "\u06AF\u0648\u06AF\u0644 \u067E\u0644\u06CC"
    }]
}];
var dae = e => {
    let t = t_(Math.floor(e / 10)).replace("\u0628\u06CC\u0644\u06CC\u0648\u0646", "\u0647\u0645\u062A") + " \u062A\u0648\u0645\u0627\u0646";
    return t?.split(" ")?.length === 3 && t.split(" ").at(1) === "\u0647\u0645\u062A" ? t.replace("\u062A\u0648\u0645\u0627\u0646", "") : t
}
;
var fae = e => {
    let t = "";
    return e = Math.round(e),
    e < 1e6 ? t = (+e).toLocaleString() : e >= 1e6 && e < 1e9 ? t = `${(Math.ceil(e / 1e3) / 1e3).toString()} M` : t = `${(Math.ceil(e / 1e6) / 1e3).toString()} B`,
    t
}
  , pae = (e, t) => t > 0 ? +(e / t * 100).toFixed(1) : 0;
var gae = (e, t=0) => {
    let n = ""
      , i = Math.abs(Math.floor(e));
    return e == null ? "" : (t == 0 ? i < 1e9 ? n = i.toLocaleString() : n = `${(i / 1e6).toLocaleString()} M` : t == 1 && (i < 1e6 ? n = (+i).toLocaleString() : i >= 1e6 && i < 1e9 ? n = `${(Math.ceil(i / 1e3) / 1e3).toLocaleString()} M` : n = `${(Math.ceil(i / 1e6) / 1e3).toLocaleString()} B`),
    `${e < 0 ? "-" : ""}${n}`)
}
;
function mae(e, t) {
    return Math.floor(Math.random() * (t - e + 1) + e)
}
function vae(e) {
    return !e && e !== 0
}
var wae = e => {
    navigator.clipboard.writeText(e).then(function() {}, function() {})
}
  , e3 = e => sn(window, "unload").subscribe( () => {
    e()
}
);
function wc(e, t=100) {
    let n = ci(t).pipe(He( () => e()), dr( () => n.unsubscribe())).subscribe()
}
var Cae = e => z(Do).params.pipe(mt(t => t[e]), We(t => t[e]))
  , Eae = () => {
    window && (window.console.log = () => null,
    window.console.assert = () => null,
    window.console.clear = () => null,
    window.console.count = () => null,
    window.console.countReset = () => null,
    window.console.debug = () => null,
    window.console.dir = () => null,
    window.console.error = () => null,
    window.console.group = () => null,
    window.console.groupCollapsed = () => null,
    window.console.groupEnd = () => null,
    window.console.info = () => null,
    window.console.table = () => null,
    window.console.time = () => null,
    window.console.timeEnd = () => null,
    window.console.timeStamp = () => null,
    window.console.trace = () => null,
    window.console.warn = () => null)
}
;
var Mae = e => YS(e) || QS(e)
  , YS = e => [y.BuyOptionTse, y.BuyOptionIfb].includes(e)
  , QS = e => [y.SellOptionTse, y.SellOptionIfb].includes(e)
  , wa = function(e) {
    return e.ITM = "ITM",
    e.OTM = "OTM",
    e.ATM = "ATM",
    e.Unknown = "-",
    e
}(wa || {});
function Pae(e, t, n) {
    if (YS(e))
        return t < n ? wa.ITM : t > n ? wa.OTM : t == n ? wa.ATM : wa.Unknown;
    if (QS(e))
        return t < n ? wa.OTM : t > n ? wa.ITM : t == n ? wa.ATM : wa.Unknown
}
var Yt = function(e) {
    return e[e.DEV = 0] = "DEV",
    e[e.STAGE = 1] = "STAGE",
    e[e.PROD = 2] = "PROD",
    e[e.PEN = 3] = "PEN",
    e[e.Feature = 4] = "Feature",
    e
}(Yt || {});
function Cc(e, t) {
    return {
        authority: e === Yt.STAGE ? "https://account-stg-dnd.emofid.com" : "https://login.emofid.com",
        client_id: e === Yt.PROD ? "easy_pkce" : "easy_pkce_test",
        redirect_uri: `${t}/auth-callback`,
        post_logout_redirect_uri: t,
        response_type: "code",
        scope: "easy2_api mts_api openid profile",
        filterProtocolClaims: !0,
        loadUserInfo: !1,
        silent_redirect_uri: `${t}/silent-refresh.html`
    }
}
var bn = class {
}
;
var Ec = {
    appUrl: "https://d.easytrader.ir",
    version: "2.6.0",
    build: "17567"
};
var pu = ve(C({}, Ec), {
    env: Yt.PROD,
    setting: {
        mtsPath: "https://api-mts.orbis.easytrader.ir/",
        lsUrl: "https://ls.easytrader.ir/",
        marketSheetLsUrl: ["https://ls-marketsheet.easytrader.ir/"],
        appLogApiPath: "https://stage-applogapi.easytrader.ir/api/",
        dataTracking: !1,
        tradingViewStorageURL: "https://api-mts.orbis.easytrader.ir/saveload",
        rocketChat: !0,
        appSettingsUrl: "https://api-mts.orbis.easytrader.ir/settings/",
        easy2ReferralUrl: "https://d.easytrader.emofid.com"
    },
    sentry: {
        dsn: "https://81e2e944aea3427fbd3d051e84c2bec2@sapi.emofid.com/50",
        debug: !1,
        environment: "d-client.prod",
        maxBreadcrumbs: 100,
        attachStacktrace: !0,
        tracesSampleRate: 1,
        breadcrumb: {
            console: !1,
            sentry: !1,
            dom: !1,
            history: !1,
            fetch: !1,
            xhr: !1
        },
        error: {
            error: !0,
            unhandled: !0
        }
    },
    unleash: {
        url: "https://unleash-edge.orbis.easytrader.ir/api/frontend",
        appName: "default",
        server: "default:production.0e68018c80f689af9e553daac3555bc646ddf639cf1774b8505dc4e2",
        refreshInterval: 0,
        environment: "production"
    },
    postHog: {
        url: "https://phog-api.emofid.com",
        _p: "phc_AFnureGmuRsrF10KMGzsgk2sAZIcCGduwuaiGW7X2Pr",
        active: !1
    },
    chatBot: {
        url: "https://chatbot.emofid.com/livechat",
        isActive: !0
    },
    oidcSettings: Cc(Yt.PROD, Ec.appUrl)
});
var Al = ve(C({}, Ec), {
    env: Yt.STAGE,
    setting: {
        mtsPath: "https://stage-api-mts.easytrader.ir/",
        appLogApiPath: "https://stage-applogapi.easytrader.ir/api/",
        lsUrl: "https://stage-ls.easytrader.ir",
        marketSheetLsUrl: ["https://stage-ls-marketsheet1.easytrader.ir", "https://stage-ls-marketsheet2.easytrader.ir"],
        dataTracking: !1,
        tradingViewStorageURL: "https://stage-api-mts.easytrader.ir/saveload",
        rocketChat: !0,
        appSettingsUrl: "https://stage-api-mts.easytrader.ir/settings/",
        easy2ReferralUrl: "https://dstage.emofid.com"
    },
    sentry: {
        dsn: "https://81e2e944aea3427fbd3d051e84c2bec2@sapi.emofid.com/50",
        debug: !1,
        environment: "d-client.local",
        maxBreadcrumbs: 100,
        attachStacktrace: !0,
        tracesSampleRate: 1,
        breadcrumb: {
            console: !1,
            sentry: !1,
            dom: !1,
            history: !1,
            fetch: !1,
            xhr: !1
        },
        error: {
            error: !0,
            unhandled: !0
        }
    },
    unleash: {
        url: "https://unleash-edge.orbis.easytrader.ir/api/frontend",
        appName: "default",
        server: "default:development.05fae8107ad0ba6a1833dec208ac59215149d326a1490b94a456a84b",
        refreshInterval: 0,
        environment: "development"
    },
    postHog: {
        url: "https://phog-api.emofid.com",
        _p: "phc_AFnureGmuRsrF10KMGzsgk2sAZIcCGduwuaiGW7X2Pr",
        active: !1
    },
    chatBot: {
        url: "https://stage-chatbot.emofid.com/livechat",
        isActive: !0
    },
    oidcSettings: Cc(Yt.STAGE, Ec.appUrl)
});
var Vae = ve(C({}, Al), {
    unleash: ve(C({}, Al.unleash), {
        environment: "production"
    })
});
var JS = "http://localhost:4200"
  , Xae = ve(C({}, pu), {
    version: "2.5.0",
    build: "0.0.0",
    env: Yt.DEV,
    chatBot: ve(C({}, pu.chatBot), {
        isActive: !1
    }),
    appUrl: JS,
    oidcSettings: Cc(Yt.DEV, JS),
    unleash: C({}, Al.unleash)
});
var tce = ve(C({}, pu), {
    chatBot: ve(C({}, pu.chatBot), {
        isActive: !1
    }),
    env: Yt.Feature,
    unleash: C({}, Al.unleash),
    oidcSettings: Cc(Yt.Feature, Ec.appUrl)
});
function fce(e, t) {
    return ue(this, null, function*() {
        let i = yield ue(this, null, function*() {
            let o = `${e.setting.mtsPath}boot/api/build-number?deviceType=${t}`
              , a = yield fetch(o);
            return a.ok ? yield a.json() : null
        })
          , r = e.build;
        if (console.table({
            buildNumber: r
        }),
        console.table(i),
        r && (i?.obsoleteBuildNumbers.includes(r) || +r < +(i?.minimumRequiredVersion ?? 1)) && "serviceWorker"in navigator && e.env !== Yt.DEV) {
            let o = yield navigator.serviceWorker.getRegistrations();
            for (let a of o)
                yield a.unregister();
            window.location.reload()
        }
    })
}
var gu = ( () => {
    let t = class t {
    }
    ;
    t.code = {
        TEDPIX: "IRX6XTPI0006",
        Hamvazn: "IRX6XTPI0026",
        IFX: "IRXZXOCI0006",
        Sekke: "IRK1K00197C1",
        Ayar: "IRTKMOFD0001",
        Foolad: "IRO1FOLD0001"
    };
    let e = t;
    return e
}
)();
var Dd = {
    delayToRemoveAfterClose: 0,
    delayToActiveAfterOpen: 0
}
  , xg = 10;
var Nd = function(e) {
    return e.crm = "crm/api/",
    e.oms = "core/api/",
    e.option = "option/api/",
    e.algo = "algo/api/order",
    e.algoHistory = "algo/api/order-history",
    e.symbol = "symbols/api/",
    e.easy = "easy/api/",
    e.ipg = "ipg/api/",
    e.portfolio = "portfolio/api/",
    e.marketSheet = "ms/api/MarketSheet/",
    e.fund = "fund/api/",
    e.wallet = "mofidcard/api/",
    e.tbs = "tbs/api/",
    e.assets = "assetmodule/api/",
    e.contract = "contract/api/",
    e.marketReport = "marketreport/api/",
    e
}(Nd || {});
var Fd = function(e) {
    return e.Escape = "escape",
    e.F1 = "f1",
    e.F2 = "f2",
    e.F3 = "f3",
    e.F4 = "f4",
    e.F9 = "f9",
    e.Plus = "+",
    e.Minus = "-",
    e
}(Fd || {})
  , Ld = function(e) {
    return e[e.Escape = 27] = "Escape",
    e[e.F1 = 112] = "F1",
    e[e.F2 = 113] = "F2",
    e[e.F3 = 114] = "F3",
    e[e.F4 = 115] = "F4",
    e[e.F9 = 120] = "F9",
    e[e.Plus = 43] = "Plus",
    e[e.Minus = 45] = "Minus",
    e[e.Enter = 13] = "Enter",
    e
}(Ld || {})
  , lN = function(e) {
    return e.Escape = "Escape",
    e.F1 = "F1",
    e.F2 = "F2",
    e.F3 = "F3",
    e.F4 = "F4",
    e.F9 = "F9",
    e.Plus = "Plus",
    e.Minus = "Minus",
    e.Enter = "Enter",
    e
}(lN || {});
var Qt = function(e) {
    return e[e.Details = 0] = "Details",
    e[e.Orders = 1] = "Orders",
    e[e.Messages = 2] = "Messages",
    e[e.SameGroup = 3] = "SameGroup",
    e[e.Calculator = 4] = "Calculator",
    e[e.OptionChain = 5] = "OptionChain",
    e[e.Analytics = 6] = "Analytics",
    e[e.CorporateActions = 7] = "CorporateActions",
    e[e.EasyChart = 8] = "EasyChart",
    e[e.Notes = 9] = "Notes",
    e[e.ConditionalAlerts = 10] = "ConditionalAlerts",
    e
}(Qt || {})
  , nt = class {
    constructor(t) {
        this.marketUnit = t,
        this.AllTabs = {
            [Qt.Details]: {
                htmlId: "symbol-detail-tab-details",
                dataCy: "symbol-detail-tab-details",
                name: "details",
                title: "\u062C\u0632\u0626\u06CC\u0627\u062A",
                icon: "symbol-detail",
                iconFill: "symbol-detail-fill",
                tab: Qt.Details
            },
            [Qt.Orders]: {
                title: "\u0633\u0641\u0627\u0631\u0634\u200C\u0647\u0627",
                htmlId: "symbol-detail-tab-orders",
                dataCy: "symbol-detail-tab-orders",
                name: "orders",
                icon: "basket",
                iconFill: "basket-fill",
                tab: Qt.Orders
            },
            [Qt.Messages]: {
                title: "\u067E\u06CC\u0627\u0645\u200C\u0647\u0627",
                htmlId: "symbol-detail-tab-messages",
                dataCy: "symbol-detail-tab-messages",
                name: "messages",
                icon: "comment-load",
                iconFill: "comment-load-fill",
                hasBadge: !0,
                tab: Qt.Messages
            },
            [Qt.SameGroup]: {
                title: "\u0647\u0645\u06AF\u0631\u0648\u0647\u06CC",
                htmlId: "symbol-detail-tab-sameGroup",
                dataCy: "symbol-detail-tab-sameGroup",
                name: "sameGroup",
                icon: "same-industry",
                iconFill: "same-industry-fill",
                tab: Qt.SameGroup
            },
            [Qt.Analytics]: {
                title: "\u0627\u0631\u0632\u06CC\u0627\u0628\u06CC \u0646\u0645\u0627\u062F",
                htmlId: "symbol-detail-tab-analytics",
                dataCy: "symbol-detail-tab-analytics",
                name: "analytics",
                icon: "symbol-check",
                newBadge: !1,
                tab: Qt.Analytics
            },
            [Qt.CorporateActions]: {
                title: "\u0627\u0641\u0632\u0627\u06CC\u0634 \u0633\u0631\u0645\u0627\u06CC\u0647 \u0648 \u0645\u062C\u0627\u0645\u0639",
                htmlId: "symbol-detail-tab-corporateActions",
                dataCy: "symbol-detail-tab-corporateActions",
                name: "corporateActions",
                icon: "bank",
                newBadge: !1,
                tab: Qt.CorporateActions
            },
            [Qt.EasyChart]: {
                title: "\u0627\u06CC\u0632\u06CC \u0686\u0627\u0631\u062A",
                htmlId: "symbol-detail-tab-easychart",
                dataCy: "symbol-detail-tab-easychart",
                name: "easychart",
                icon: "easychart",
                tab: Qt.EasyChart
            },
            [Qt.Notes]: {
                title: "\u06CC\u0627\u062F\u062F\u0627\u0634\u062A",
                htmlId: "symbol-detail-tab-notes",
                dataCy: "symbol-detail-tab-notes",
                name: "notes",
                icon: "note",
                tab: Qt.Notes
            },
            [Qt.ConditionalAlerts]: {
                title: "\u0647\u0634\u062F\u0627\u0631 \u0634\u0631\u0637\u06CC",
                htmlId: "symbol-detail-tab-conditionalAlerts",
                dataCy: "symbol-detail-tab-conditionalAlerts",
                name: "conditionalAlerts",
                icon: "bell-ring",
                tab: Qt.ConditionalAlerts
            },
            [Qt.Calculator]: {
                title: "\u0645\u0627\u0634\u06CC\u0646 \u062D\u0633\u0627\u0628",
                htmlId: "symbol-detail-tab-calculator",
                dataCy: "symbol-detail-tab-calculator",
                name: "calculator",
                icon: "calculator",
                iconFill: "calculator-fill",
                tab: Qt.Calculator
            }
        },
        this.allowShowNAVvalueInSymbolHeader = !1,
        this.allowShowIndInstWidget = !0,
        this.allowAnalyticsTab = !1,
        this.allowEasyChartTab = !1,
        this.allowContractInfo = !1,
        this.allowBasicIsinInfo = !1,
        this.allowToShowIndividualTradingTrend = !1,
        this.allowToCallTechnicalAnalysis = !1,
        this.allowToCallFundamentalAnalysis = !1,
        this.allowToShowSameGroupSignSection = !1,
        this.allowToShowCalculatorAndNotToShowSameGroup = !1,
        this.allowCorporateActionsSection = !1,
        this.allowCalculator = !1,
        this.allowOptionChain = !1,
        this.allowToShowSymbolInfoSection = !0,
        this.allowToShowReturnChartSection = !0,
        this.showNewBadgeOnMoreTabs = !0,
        this.OptionMarketUnit = [y.BuyOptionIfb, y.BuyOptionTse, y.SellOptionIfb, y.SellOptionTse],
        this.NotAllowAnalyticsTabUnitCodes = [y.None, y.NapeyvastehSiman, y.GovahiBourseKala, y.Sekkeh, y.Rights, y.ETFFix, y.Maskan1, y.Maskan2, y.Tabaee, y.Ekhtiar, y.AtiSaham, y.AtiSabad, y.Fekri, y.Salaf, y.Bond1, y.Bond2, y.Bond3, y.Bond4, y.Bond5, y.Bond6, y.bond7, y.INDEX, y.NapeyvastehZaferan, y.NapeyvastehSekkeh, y.NapeyvastehShisheh, y.NapeyvastehMes, y.NapeyvastehSangAhan, y.NapeyvastehMilgerd, y.RightYellow, y.RightOrange, y.RightRed, y.RightsKoochak, ...this.OptionMarketUnit],
        this.AllowToShowIndividualTradingTrendUnitCodes = [y.Exchange, y.ETFStock, y.ETFFix, y.ETFMixed, y.ETFZaminSakhteman, y.ETFJasuraneh, y.SandoghKala, y.PayehYellow, y.PayehOrange, y.PayehRed, y.Koochak, y.EtfSector, y.ProMarket, y.EnergyETF, y.AgreedMarket],
        this.AllowToCallTechnicalAnalysisUnitCodes = [y.Exchange, y.ETFMixed, y.ETFStock, y.ETFZaminSakhteman, y.ETFJasuraneh, y.SandoghKala, y.NapeyvastehSiman, y.GovahiBourseKala, y.Sekkeh, y.Koochak, y.EtfInEtf, y.ETFKhosusi, y.EtfAmlak, y.Bond5, y.Bond6, y.INDEX, y.PayehYellow, y.PayehOrange, y.PayehRed, y.ProMarket, y.EnergyETF, y.AgreedMarket],
        this.AllowToCallFundamentalAnalysisUnitCodes = [y.Exchange, y.PayehYellow, y.PayehOrange, y.PayehRed, y.Koochak, y.ProMarket, y.AgreedMarket],
        this.NotAllowEasyChartTabUnitCodes = [y.Rights, y.NapeyvastehSiman, y.NapeyvastehZaferan, y.NapeyvastehSekkeh, y.Tabaee, y.AtiSabad, y.Fekri, y.Salaf, y.Bond1, y.Bond2, y.Bond3, y.Bond4, y.Bond5, y.Bond6, y.bond7, y.INDEX, y.NapeyvastehShisheh, y.NapeyvastehMes, y.NapeyvastehSangAhan, y.NapeyvastehMilgerd, y.RightYellow, y.RightOrange, y.RightRed, y.RightsKoochak],
        this.NotAllowSameGroupSignSectionUnitCodes = [y.Rights, y.ETFStock, y.ETFFix, y.ETFMixed, y.ETFZaminSakhteman, y.ETFJasuraneh, y.SandoghKala, y.NapeyvastehSiman, y.GovahiBourseKala, y.Sekkeh, y.Maskan1, y.Maskan2, y.Tabaee, y.Ekhtiar, y.AtiSaham, y.AtiSabad, y.Fekri, y.Koochak, y.Salaf, y.Bond1, y.Bond2, y.Bond3, y.Bond4, y.Bond5, y.Bond6, y.INDEX, y.bond7, y.EtfInEtf, y.EtfAmlak, y.NapeyvastehZaferan, y.NapeyvastehSekkeh, y.NapeyvastehShisheh, y.NapeyvastehMes, y.NapeyvastehSangAhan, y.NapeyvastehMilgerd, y.ETFKhosusi, y.RightYellow, y.RightOrange, y.RightRed, y.EtfSector, y.RightsKoochak, y.EnergyETF],
        this.NotAllowCorporateActionsSectionUnitCodes = [y.ETFStock, y.Rights, y.RightsKoochak, y.ETFFix, y.ETFMixed, y.ETFZaminSakhteman, y.ETFJasuraneh, y.SandoghKala, y.NapeyvastehSiman, y.GovahiBourseKala, y.Sekkeh, y.Maskan1, y.Maskan2, y.Tabaee, y.Ekhtiar, y.AtiSaham, y.AtiSabad, y.Fekri, y.Salaf, y.Bond1, y.Bond2, y.Bond3, y.Bond4, y.Bond5, y.Bond6, y.INDEX, y.bond7, y.EtfInEtf, y.EtfAmlak, y.NapeyvastehZaferan, y.NapeyvastehSekkeh, y.NapeyvastehShisheh, y.NapeyvastehMes, y.NapeyvastehSangAhan, y.NapeyvastehMilgerd, y.ETFKhosusi, y.EtfSector, y.EnergyETF, ...this.OptionMarketUnit],
        this.AllowShowNAVvalueInSymbolHeaderMarketUnits = [y.ETFStock, y.ETFFix, y.ETFMixed, y.ETFZaminSakhteman, y.ETFJasuraneh, y.SandoghKala, y.EnergyETF, y.EtfInEtf, y.EtfAmlak, y.ETFKhosusi, y.EtfSector],
        this.AllowShowIndInstMarketUnits = [y.Exchange, y.Rights, y.ETFStock, y.ETFFix, y.ETFMixed, y.ETFZaminSakhteman, y.ETFJasuraneh, y.SandoghKala, y.PayehYellow, y.PayehOrange, y.PayehRed, y.Koochak, y.EtfInEtf, y.EtfAmlak, y.ETFKhosusi, y.RightYellow, y.RightOrange, y.RightRed, y.EtfSector, y.RightsKoochak, y.ProMarket, y.EnergyETF, y.AgreedMarket, ...this.OptionMarketUnit],
        this.AllowCalculatorTabUnitCodes = [...this.OptionMarketUnit],
        this.AllowOptionChainTabUnitCodes = [...this.OptionMarketUnit],
        this.AllowContractInfoMarketUnits = [...this.OptionMarketUnit],
        this.NotAllowToShowSymbolInfoMarketUnits = [...this.OptionMarketUnit],
        this.NotAllowToShowReturnChartMarketUnits = [...this.OptionMarketUnit],
        this.AllowToShowCalculatorAndNotToShowSameGroupUnitCodes = [...this.OptionMarketUnit],
        this.marketUnit = t,
        this.allowShowNAVvalueInSymbolHeader = this.AllowShowNAVvalueInSymbolHeaderMarketUnits.includes(t),
        this.allowShowIndInstWidget = this.AllowShowIndInstMarketUnits.includes(t),
        this.allowToShowIndividualTradingTrend = this.AllowToShowIndividualTradingTrendUnitCodes.includes(t),
        this.allowToCallTechnicalAnalysis = this.AllowToCallTechnicalAnalysisUnitCodes.includes(t),
        this.allowToCallFundamentalAnalysis = this.AllowToCallFundamentalAnalysisUnitCodes.includes(t),
        this.allowToShowSameGroupSignSection = !this.NotAllowSameGroupSignSectionUnitCodes.includes(t),
        this.allowToShowCalculatorAndNotToShowSameGroup = this.AllowToShowCalculatorAndNotToShowSameGroupUnitCodes.includes(t),
        this.allowCorporateActionsSection = !this.NotAllowCorporateActionsSectionUnitCodes.includes(t),
        this.allowAnalyticsTab = !this.NotAllowAnalyticsTabUnitCodes.includes(t),
        this.allowEasyChartTab = !this.NotAllowEasyChartTabUnitCodes.includes(t) && !this.AllowOptionChainTabUnitCodes.includes(t),
        this.allowCalculator = this.AllowCalculatorTabUnitCodes.includes(t),
        this.allowContractInfo = this.AllowContractInfoMarketUnits.includes(t),
        this.allowBasicIsinInfo = this.AllowContractInfoMarketUnits.includes(t),
        this.allowOptionChain = this.AllowOptionChainTabUnitCodes.includes(t),
        this.allowToShowSymbolInfoSection = !this.NotAllowToShowSymbolInfoMarketUnits.includes(t),
        this.allowToShowReturnChartSection = !this.NotAllowToShowReturnChartMarketUnits.includes(t),
        this.setTabs()
    }
    setTabs(t=!1) {
        this.allowedTabs = this.AllTabs,
        this.allowToShowCalculatorAndNotToShowSameGroup ? delete this.allowedTabs[Qt.SameGroup] : delete this.allowedTabs[Qt.Calculator],
        this.allowAnalyticsTab || delete this.allowedTabs[Qt.Analytics],
        this.allowEasyChartTab || delete this.allowedTabs[Qt.EasyChart],
        this.allowCorporateActionsSection || delete this.allowedTabs[Qt.CorporateActions],
        this.allowCalculator || delete this.allowedTabs[Qt.Calculator],
        this.allowOptionChain || t ? this.allowedTabs[Qt.OptionChain] = {
            title: "\u0632\u0646\u062C\u06CC\u0631\u0647 \u0622\u067E\u0634\u0646 \u0646\u0645\u0627\u062F",
            htmlId: "symbol-detail-tab-option-chain",
            dataCy: "symbol-detail-tab-option-chain",
            name: "optionChain",
            icon: "option",
            newBadge: !0,
            tab: Qt.OptionChain
        } : delete this.allowedTabs[Qt.OptionChain];
        try {
            let n = JSON.parse(localStorage.getItem("symbolDetailsTabNewBadgeState") ?? "{}");
            Object.entries(this.allowedTabs).filter( ([,i]) => i.newBadge).forEach( ([i,r]) => {
                r.newBadge = n[r.name] ?? !0,
                this.allowedTabs[i] = C({}, r)
            }
            ),
            this.showNewBadgeOnMoreTabs = !!Object.values(this.allowedTabs).filter(i => i.newBadge).length
        } catch {
            localStorage.removeItem("symbolDetailsTabNewBadgeState")
        }
        return Object.values(this.allowedTabs).sort( (n, i) => n.tab - i.tab)
    }
}
  , Dce = new Map([[y.None, new nt(y.None)], [y.Exchange, new nt(y.Exchange)], [y.Rights, new nt(y.Rights)], [y.ETFStock, new nt(y.ETFStock)], [y.ETFFix, new nt(y.ETFFix)], [y.ETFMixed, new nt(y.ETFMixed)], [y.ETFZaminSakhteman, new nt(y.ETFZaminSakhteman)], [y.ETFJasuraneh, new nt(y.ETFJasuraneh)], [y.SandoghKala, new nt(y.SandoghKala)], [y.NapeyvastehSiman, new nt(y.NapeyvastehSiman)], [y.GovahiBourseKala, new nt(y.GovahiBourseKala)], [y.Sekkeh, new nt(y.Sekkeh)], [y.Maskan1, new nt(y.Maskan1)], [y.Maskan2, new nt(y.Maskan2)], [y.Tabaee, new nt(y.Tabaee)], [y.Ekhtiar, new nt(y.Ekhtiar)], [y.AtiSaham, new nt(y.AtiSaham)], [y.AtiSabad, new nt(y.AtiSabad)], [y.Fekri, new nt(y.Fekri)], [y.PayehYellow, new nt(y.PayehYellow)], [y.PayehOrange, new nt(y.PayehOrange)], [y.PayehRed, new nt(y.PayehRed)], [y.Koochak, new nt(y.Koochak)], [y.Salaf, new nt(y.Salaf)], [y.Bond1, new nt(y.Bond1)], [y.Bond2, new nt(y.Bond2)], [y.Bond3, new nt(y.Bond3)], [y.Bond4, new nt(y.Bond4)], [y.Bond5, new nt(y.Bond5)], [y.Bond6, new nt(y.Bond6)], [y.INDEX, new nt(y.INDEX)], [y.bond7, new nt(y.bond7)], [y.EtfInEtf, new nt(y.EtfInEtf)], [y.EtfAmlak, new nt(y.EtfAmlak)], [y.NapeyvastehZaferan, new nt(y.NapeyvastehZaferan)], [y.NapeyvastehSekkeh, new nt(y.NapeyvastehSekkeh)], [y.NapeyvastehShisheh, new nt(y.NapeyvastehShisheh)], [y.NapeyvastehMes, new nt(y.NapeyvastehMes)], [y.NapeyvastehSangAhan, new nt(y.NapeyvastehSangAhan)], [y.NapeyvastehMilgerd, new nt(y.NapeyvastehMilgerd)], [y.ETFKhosusi, new nt(y.ETFKhosusi)], [y.RightYellow, new nt(y.RightYellow)], [y.RightOrange, new nt(y.RightOrange)], [y.RightRed, new nt(y.RightRed)], [y.EtfSector, new nt(y.EtfSector)], [y.RightsKoochak, new nt(y.RightsKoochak)], [y.BuyOptionTse, new nt(y.BuyOptionTse)], [y.BuyOptionIfb, new nt(y.BuyOptionIfb)], [y.SellOptionTse, new nt(y.SellOptionTse)], [y.SellOptionIfb, new nt(y.SellOptionIfb)], [y.ProMarket, new nt(y.ProMarket)], [y.EnergyETF, new nt(y.EnergyETF)], [y.AgreedMarket, new nt(y.AgreedMarket)]]);
var Lce = {
    0: "\u0647\u0645\u0647",
    1: "\u062F\u0631\u06CC\u0627\u0641\u062A",
    2: "\u067E\u0631\u062F\u0627\u062E\u062A",
    3: "\u062E\u0631\u06CC\u062F",
    4: "\u0641\u0631\u0648\u0634"
}
  , Bce = {
    0: "\u0645\u06CC\u0627\u0646\u06AF\u06CC\u0646",
    1: "\u062D\u0633\u0627\u0628\u062F\u0627\u0631\u06CC",
    2: "\u062D\u0633\u0627\u0628\u062F\u0627\u0631\u06CC \u0628\u0627 \u062D\u0627\u0645\u06CC"
};
var uN = function(e) {
    return e[e.ASC = 0] = "ASC",
    e[e.DESC = 1] = "DESC",
    e
}(uN || {})
  , hN = function(e) {
    return e[e.Equal = 0] = "Equal",
    e[e.GreatThan = 1] = "GreatThan",
    e[e.LessThan = 2] = "LessThan",
    e[e.GreatEqualThan = 3] = "GreatEqualThan",
    e[e.LessEqualThan = 4] = "LessEqualThan",
    e[e.NotEqual = 5] = "NotEqual",
    e[e.Between = 6] = "Between",
    e[e.Contains = 7] = "Contains",
    e[e.StartsWith = 8] = "StartsWith",
    e[e.ArrayOfElement = 9] = "ArrayOfElement",
    e[e.Any = 10] = "Any",
    e
}(hN || {});
var ti = function(e) {
    return e.info = "info",
    e.success = "success",
    e.warning = "warning",
    e.danger = "danger",
    e.secondary = "secondary",
    e.globalSecondary = "globalSecondary",
    e.pinkRose = "pinkRose",
    e
}(ti || {});
var dN = function(e) {
    return e.algo = "f_orbis_algo",
    e.ai_market_assistant = "ai-market-assistant",
    e.easyChart = "easy-chart",
    e.bank_gateway_saman = "bank-gateway-Saman",
    e.bank_gateway_Mellat = "bank-gateway-Mellat",
    e.bank_gateway_Pasargad = "bank-gateway-Pasargad",
    e.bank_gateway_Parsian = "bank-gateway-Parsian",
    e.bank_gateway_Sadad = "bank-gateway-Sadad",
    e.bank_gateway_Ap = "bank-gateway-Ap",
    e.payment_v2 = "payment-service",
    e
}(dN || {});
var n3 = function(e) {
    return e[e.Buy = 0] = "Buy",
    e[e.Sell = 1] = "Sell",
    e[e.Cross = 2] = "Cross",
    e[e.None = 3] = "None",
    e
}(n3 || {});
var wg = {
    firstTradedPrice: 0,
    lastTradedPrice: 0,
    lastTradedPriceVar: 0,
    lastTradedPriceVarPercent: 0,
    feeOfPreviousDaysClosingPrice: 0,
    closingPrice: 0,
    closingPriceVarPercent: 0,
    totalNumberOfTrades: 0,
    totalTradeValue: 0,
    totalNumberOfSharesTraded: 0,
    stateCode: "",
    stateColor: "",
    tradeDate: "",
    navDate: "",
    navSubscription: 0,
    navRedemption: 0,
    priceTickSize: 0,
    maxDailyPrice: 0,
    minDailyPrice: 0,
    maxDailyTradedPrice: 0,
    minDailyTradedPrice: 0,
    minValidBuyVolume: 0,
    minValidSellVolume: 0,
    maxValidBuyVolume: 0,
    maxValidSellVolume: 0,
    bidPrice: 0,
    askPrice: 0
};
var _n = function(e) {
    return e[e.Unknown = -1] = "Unknown",
    e[e.Mobile = 0] = "Mobile",
    e[e.Desktop = 1] = "Desktop",
    e
}(_n || {});
var Sr = function(e) {
    return e[e.None = 0] = "None",
    e[e.General = 1] = "General",
    e[e.DateError = 2] = "DateError",
    e[e.Easy2User = 3] = "Easy2User",
    e[e.GuestUser = 4] = "GuestUser",
    e[e.LoggedOutFromOtherTab = 5] = "LoggedOutFromOtherTab",
    e[e.InternetIsDisconnected = 6] = "InternetIsDisconnected",
    e[e.ForceContract2 = 7] = "ForceContract2",
    e[e.OnlineOptionUser = 8] = "OnlineOptionUser",
    e
}(Sr || {})
  , i3 = function(e) {
    return e.EContract2 = "Econtract_2.0",
    e.OptionBuy = "TradeOptionContractEasyTrader_1.0",
    e.OptionSell = "ShortSellEasyTrader_1.0",
    e.Algo = "SmartTrade_1.0",
    e.OptionBuyOnline = "TradeOptionContract_1.0",
    e.OptionSellOnline = "ShortSell_1.0",
    e
}(i3 || {});
var Vn = {
    isGuestUser: "isGuestUser",
    mwHelp: "mwHelp",
    olHelp: "olHelp",
    sdHelp: "sdHelp",
    loggedIn: "loggedIn",
    funds: "funds",
    defaultIsin: "defaultIsin",
    sortStore: "SORT_STORE",
    marketMapFilters: "MARKET_MAP_FILTERS",
    optionMarketMapFilters: "OPTION_MARKET_MAP_FILTERS",
    bankGateways: "BankGateways",
    setting: "settings",
    symbol: "all-symbols",
    uuid: "uuid"
}
  , Tc = ( () => {
    let t = class t {
        setItem(i, r) {
            localStorage.setItem(i, r)
        }
        getItem(i) {
            return localStorage.getItem(i)
        }
        removeItem(i) {
            localStorage.removeItem(i)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var $r = ( () => {
    let t = class t {
        constructor() {
            this.userCheckedSubject = new Ne(!1),
            this.userChecked$ = this.userCheckedSubject.asObservable(),
            this.isGuestUserSub = new Ne(sessionStorage.getItem(Vn.isGuestUser) === "true"),
            this.isGuestUserObs$ = this.isGuestUserSub.asObservable(),
            this.isEasy2User = !1
        }
        get isGuestUser() {
            return sessionStorage.getItem(Vn.isGuestUser) === "true"
        }
        set isGuestUser(i) {
            sessionStorage.setItem(Vn.isGuestUser, String(i)),
            this.isGuestUserSub.next(i)
        }
        userChecked() {
            this.userCheckedSubject.getValue() || this.userCheckedSubject.next(!0)
        }
        userUnChecked() {
            this.userCheckedSubject.next(!1)
        }
        getValue() {
            return this.userCheckedSubject.getValue()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var mu = class {
    constructor(t) {
        this.error = t
    }
}
;
var Bd = class extends mu {
}
;
var rle = ( () => {
    let t = class t {
        constructor(i) {
            this.environment = i
        }
        handleError(i) {
            this.environment.env === Yt.PROD ? i instanceof Error ? xl(i) : [500, 504, 401, 403].includes(i?.status) || xl(new Error(JSON.stringify(i))) : (console.debug(),
            console.error(`\u{1F6AB}\u{1F6AB}\u{1F6AB} -------- \u{1F92C}\u{1F92C}\u{1F92C}
\r`, i))
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(bn))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var r3 = ( () => {
    let t = class t {
        constructor() {
            this.environment = z(bn),
            this.http = z(Vv),
            this.userService = z($r)
        }
        get restrictionError() {
            return {
                status: 400,
                error: "\u062F\u0633\u062A\u0631\u0633\u06CC \u063A\u06CC\u0631 \u0645\u062C\u0627\u0632"
            }
        }
        getCached(i, r, s) {
            return A0(this.getCachedFromLocalStorage(i), this.getFromApiAndSetToLocalStorage(i, r, s))
        }
        get(i, r) {
            return this.httpGet(i, r).pipe(D0({
                count: r?.maxRetryAttempts ?? 0,
                delay: r?.delayMs ?? 1e3
            }), on(s => this.handleError(s)))
        }
        getBlob(i, r, s=0, o=1e3) {
            return this.http.get(i, r).pipe(D0({
                count: s,
                delay: o
            }), on(a => this.handleError(a)))
        }
        post(i, r) {
            return this.httpPost(i, r?.body, r).pipe(D0({
                count: r?.maxRetryAttempts ?? 0,
                delay: r?.delayMs ?? 1e3
            }), on(s => this.handleError(s)))
        }
        put(i, r) {
            return this.httpPut(i, r?.body, r).pipe(D0({
                count: r?.maxRetryAttempts ?? 0,
                delay: r?.delayMs ?? 1e3
            }), on(s => this.handleError(s)))
        }
        delete(i, r) {
            return this.httpDelete(i, r?.body, r).pipe(D0({
                count: r?.maxRetryAttempts ?? 0,
                delay: r?.delayMs ?? 1e3
            }), on(s => this.handleError(s)))
        }
        httpGet(i, r) {
            return this.checkGuestUserRestriction(r) ? Be([]) : r?.dontCheckSameLogin ? this.http.get(i, r?.options) : this.userService.userChecked$.pipe(Qn(s => s), li( () => this.http.get(i, r?.options)))
        }
        httpPost(i, r, s) {
            return this.checkGuestUserRestriction(s) ? this.handleError(this.restrictionError) : s?.dontCheckSameLogin ? this.http.post(i, r, s?.options) : this.userService.userChecked$.pipe(Qn(o => o), li( () => this.http.post(i, r, s?.options)))
        }
        httpPut(i, r, s) {
            return this.checkGuestUserRestriction(s) ? this.handleError(this.restrictionError) : (s?.dontCheckSameLogin && this.http.put(i, r, s?.options),
            this.userService.userChecked$.pipe(Qn(o => o), li( () => this.http.put(i, r, s?.options))))
        }
        httpDelete(i, r, s) {
            if (this.checkGuestUserRestriction(s))
                return this.handleError(this.restrictionError);
            let o = ve(C({}, s?.options), {
                body: r
            });
            return s?.dontCheckSameLogin && this.http.delete(i, o),
            this.userService.userChecked$.pipe(Qn(a => a), li( () => this.http.delete(i, o)))
        }
        checkGuestUserRestriction(i) {
            return i?.guestUserRestriction && this.userService.isGuestUser
        }
        getCachedFromLocalStorage(i) {
            let r = localStorage.getItem(i);
            return Be(r ? JSON.parse(r) : null)
        }
        getFromApiAndSetToLocalStorage(i, r, s) {
            return this.get(r, s).pipe(He(o => {
                localStorage.setItem(i, JSON.stringify(o))
            }
            ), on( () => this.getCachedFromLocalStorage(i)))
        }
        handleError(i) {
            if (this.environment.env !== Yt.PROD && console.log(`Error ${i.status}:`, i),
            i.status === 400) {
                if (i.error?.errors) {
                    let s = "";
                    return Object.keys(i.error.errors).forEach(o => {
                        i.error.errors[o].forEach(a => {
                            s += a + "\u060C "
                        }
                        )
                    }
                    ),
                    Hr( () => new Bd(s.slice(0, -2)))
                }
                let r = i.error?.detail ?? i.error;
                return Hr( () => new Bd(r))
            }
            return i.status === 404 ? Hr( () => new J8(i.error)) : (i.status,
            Hr( () => i))
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var fn = ( () => {
    let t = class t {
        constructor() {
            this.environment = z(bn),
            this.httpService = z(r3)
        }
        get mtsPath() {
            return this.environment.setting.mtsPath
        }
        get apiUrls() {
            return Nd
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var Ale = ( () => {
    let t = class t extends fn {
        constructor() {
            super(...arguments),
            this.loadingSubject = new Ne(!1),
            this.loading$ = this.loadingSubject.asObservable(),
            this.retryLoadingSubject = new Ne(!1),
            this.retryLoading$ = this.retryLoadingSubject.asObservable()
        }
        showLoaderUntilComplete(i) {
            return Be(null).pipe(He( () => {
                this.loadingOn()
            }
            ), li( () => i), dr( () => {
                this.loadingOff()
            }
            ), on(r => (this.retryLoadingOn(),
            this.httpService.handleError(r))))
        }
        loadingOn() {
            this.retryLoadingOff(),
            this.loadingSubject.next(!0)
        }
        loadingOff() {
            this.loadingSubject.next(!1)
        }
        retryLoadingOn() {
            this.retryLoadingSubject.next(!0)
        }
        retryLoadingOff() {
            this.retryLoadingSubject.next(!1)
        }
    }
    ;
    t.\u0275fac = ( () => {
        let i;
        return function(s) {
            return (i || (i = Tn(t)))(s || t)
        }
    }
    )(),
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac
    });
    let e = t;
    return e
}
)();
if (typeof Promise > "u") {
    (function() {
        function e(ne) {
            return typeof ne == "function" || typeof ne == "object" && ne !== null
        }
        function t(ne) {
            return typeof ne == "function"
        }
        function n(ne) {
            return typeof ne == "object" && ne !== null
        }
        var i;
        Array.isArray ? i = Array.isArray : i = function(ne) {
            return Object.prototype.toString.call(ne) === "[object Array]"
        }
        ;
        var r = i, s = 0, o, a = function(_e, Oe) {
            w[s] = _e,
            w[s + 1] = Oe,
            s += 2,
            s === 2 && (o ? o(k) : N())
        };
        function c(ne) {
            o = ne
        }
        function l(ne) {
            a = ne
        }
        var u = typeof window < "u" ? window : void 0
          , h = u || {}
          , d = h.MutationObserver || h.WebKitMutationObserver
          , f = typeof process < "u" && {}.toString.call(process) === "[object process]"
          , g = typeof Uint8ClampedArray < "u" && typeof importScripts < "u" && typeof MessageChannel < "u";
        function p() {
            return function() {
                process.nextTick(k)
            }
        }
        function v() {
            var ne = 0
              , _e = new d(k)
              , Oe = document.createTextNode("");
            return _e.observe(Oe, {
                characterData: !0
            }),
            function() {
                Oe.data = ne = ++ne % 2
            }
        }
        function S() {
            var ne = new MessageChannel;
            return ne.port1.onmessage = k,
            function() {
                ne.port2.postMessage(0)
            }
        }
        function x() {
            return function() {
                setTimeout(k, 1)
            }
        }
        var w = new Array(1e3);
        function k() {
            for (var ne = 0; ne < s; ne += 2) {
                var _e = w[ne]
                  , Oe = w[ne + 1];
                _e(Oe),
                w[ne] = void 0,
                w[ne + 1] = void 0
            }
            s = 0
        }
        function B() {
            return x()
        }
        var N;
        f ? N = p() : d ? N = v() : g ? N = S() : u === void 0 && typeof j8 == "function" ? N = B() : N = x();
        function E() {}
        var F = void 0
          , O = 1
          , V = 2
          , X = new U;
        function b() {
            return new TypeError("You cannot resolve a promise with itself")
        }
        function j() {
            return new TypeError("A promises callback cannot return that same promise.")
        }
        function de(ne) {
            try {
                return ne.then
            } catch (_e) {
                return X.error = _e,
                X
            }
        }
        function he(ne, _e, Oe, ht) {
            try {
                ne.call(_e, Oe, ht)
            } catch (At) {
                return At
            }
        }
        function Re(ne, _e, Oe) {
            a(function(ht) {
                var At = !1
                  , rn = he(Oe, _e, function(An) {
                    At || (At = !0,
                    _e !== An ? it(ht, An) : Ge(ht, An))
                }, function(An) {
                    At || (At = !0,
                    A(ht, An))
                }, "Settle: " + (ht._label || " unknown promise"));
                !At && rn && (At = !0,
                A(ht, rn))
            }, ne)
        }
        function Xe(ne, _e) {
            _e._state === O ? Ge(ne, _e._result) : _e._state === V ? A(ne, _e._result) : q(_e, void 0, function(Oe) {
                it(ne, Oe)
            }, function(Oe) {
                A(ne, Oe)
            })
        }
        function pt(ne, _e) {
            if (_e.constructor === ne.constructor)
                Xe(ne, _e);
            else {
                var Oe = de(_e);
                Oe === X ? A(ne, X.error) : Oe === void 0 ? Ge(ne, _e) : t(Oe) ? Re(ne, _e, Oe) : Ge(ne, _e)
            }
        }
        function it(ne, _e) {
            ne === _e ? A(ne, b()) : e(_e) ? pt(ne, _e) : Ge(ne, _e)
        }
        function fe(ne) {
            ne._onerror && ne._onerror(ne._result),
            L(ne)
        }
        function Ge(ne, _e) {
            ne._state === F && (ne._result = _e,
            ne._state = O,
            ne._subscribers.length !== 0 && a(L, ne))
        }
        function A(ne, _e) {
            ne._state === F && (ne._state = V,
            ne._result = _e,
            a(fe, ne))
        }
        function q(ne, _e, Oe, ht) {
            var At = ne._subscribers
              , rn = At.length;
            ne._onerror = null,
            At[rn] = _e,
            At[rn + O] = Oe,
            At[rn + V] = ht,
            rn === 0 && ne._state && a(L, ne)
        }
        function L(ne) {
            var _e = ne._subscribers
              , Oe = ne._state;
            if (_e.length !== 0) {
                for (var ht, At, rn = ne._result, An = 0; An < _e.length; An += 3)
                    ht = _e[An],
                    At = _e[An + Oe],
                    ht ? Ve(Oe, ht, At, rn) : At(rn);
                ne._subscribers.length = 0
            }
        }
        function U() {
            this.error = null
        }
        var te = new U;
        function Ce(ne, _e) {
            try {
                return ne(_e)
            } catch (Oe) {
                return te.error = Oe,
                te
            }
        }
        function Ve(ne, _e, Oe, ht) {
            var At = t(Oe), rn, An, _o, Ch;
            if (At) {
                if (rn = Ce(Oe, ht),
                rn === te ? (Ch = !0,
                An = rn.error,
                rn = null) : _o = !0,
                _e === rn) {
                    A(_e, j());
                    return
                }
            } else
                rn = ht,
                _o = !0;
            _e._state !== F || (At && _o ? it(_e, rn) : Ch ? A(_e, An) : ne === O ? Ge(_e, rn) : ne === V && A(_e, rn))
        }
        function De(ne, _e) {
            try {
                _e(function(ht) {
                    it(ne, ht)
                }, function(ht) {
                    A(ne, ht)
                })
            } catch (Oe) {
                A(ne, Oe)
            }
        }
        function ge(ne, _e) {
            var Oe = this;
            Oe._instanceConstructor = ne,
            Oe.promise = new ne(E),
            Oe._validateInput(_e) ? (Oe._input = _e,
            Oe.length = _e.length,
            Oe._remaining = _e.length,
            Oe._init(),
            Oe.length === 0 ? Ge(Oe.promise, Oe._result) : (Oe.length = Oe.length || 0,
            Oe._enumerate(),
            Oe._remaining === 0 && Ge(Oe.promise, Oe._result))) : A(Oe.promise, Oe._validationError())
        }
        ge.prototype._validateInput = function(ne) {
            return r(ne)
        }
        ,
        ge.prototype._validationError = function() {
            return new Error("Array Methods must be provided an Array")
        }
        ,
        ge.prototype._init = function() {
            this._result = new Array(this.length)
        }
        ;
        var kt = ge;
        ge.prototype._enumerate = function() {
            for (var ne = this, _e = ne.length, Oe = ne.promise, ht = ne._input, At = 0; Oe._state === F && At < _e; At++)
                ne._eachEntry(ht[At], At)
        }
        ,
        ge.prototype._eachEntry = function(ne, _e) {
            var Oe = this
              , ht = Oe._instanceConstructor;
            n(ne) ? ne.constructor === ht && ne._state !== F ? (ne._onerror = null,
            Oe._settledAt(ne._state, _e, ne._result)) : Oe._willSettleAt(ht.resolve(ne), _e) : (Oe._remaining--,
            Oe._result[_e] = ne)
        }
        ,
        ge.prototype._settledAt = function(ne, _e, Oe) {
            var ht = this
              , At = ht.promise;
            At._state === F && (ht._remaining--,
            ne === V ? A(At, Oe) : ht._result[_e] = Oe),
            ht._remaining === 0 && Ge(At, ht._result)
        }
        ,
        ge.prototype._willSettleAt = function(ne, _e) {
            var Oe = this;
            q(ne, void 0, function(ht) {
                Oe._settledAt(O, _e, ht)
            }, function(ht) {
                Oe._settledAt(V, _e, ht)
            })
        }
        ;
        function xt(ne) {
            return new kt(this,ne).promise
        }
        var hn = xt;
        function Ot(ne) {
            var _e = this
              , Oe = new _e(E);
            if (!r(ne))
                return A(Oe, new TypeError("You must pass an array to race.")),
                Oe;
            var ht = ne.length;
            function At(_o) {
                it(Oe, _o)
            }
            function rn(_o) {
                A(Oe, _o)
            }
            for (var An = 0; Oe._state === F && An < ht; An++)
                q(_e.resolve(ne[An]), void 0, At, rn);
            return Oe
        }
        var bi = Ot;
        function Xt(ne) {
            var _e = this;
            if (ne && typeof ne == "object" && ne.constructor === _e)
                return ne;
            var Oe = new _e(E);
            return it(Oe, ne),
            Oe
        }
        var Ue = Xt;
        function Zi(ne) {
            var _e = this
              , Oe = new _e(E);
            return A(Oe, ne),
            Oe
        }
        var ns = Zi
          , Bi = 0;
        function is() {
            throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")
        }
        function ol() {
            throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")
        }
        var Xn = dn;
        function dn(ne) {
            this._id = Bi++,
            this._state = void 0,
            this._result = void 0,
            this._subscribers = [],
            E !== ne && (t(ne) || is(),
            this instanceof dn || ol(),
            De(this, ne))
        }
        dn.all = hn,
        dn.race = bi,
        dn.resolve = Ue,
        dn.reject = ns,
        dn._setScheduler = c,
        dn._setAsap = l,
        dn._asap = a,
        dn.prototype = {
            constructor: dn,
            then: function(ne, _e) {
                var Oe = this
                  , ht = Oe._state;
                if (ht === O && !ne || ht === V && !_e)
                    return this;
                var At = new this.constructor(E)
                  , rn = Oe._result;
                if (ht) {
                    var An = arguments[ht - 1];
                    a(function() {
                        Ve(ht, At, An, rn)
                    })
                } else
                    q(Oe, At, ne, _e);
                return At
            },
            catch: function(ne) {
                return this.then(null, ne)
            }
        };
        function ca() {
            var ne;
            if (typeof global < "u")
                ne = global;
            else if (typeof self < "u")
                ne = self;
            else
                try {
                    ne = Function("return this")()
                } catch {
                    throw new Error("polyfill failed because global object is unavailable in this environment")
                }
            var _e = ne.Promise;
            _e && Object.prototype.toString.call(_e.resolve()) === "[object Promise]" && !_e.cast || (Xn.all = Xn.all,
            Xn.race = Xn.race,
            Xn.reject = Xn.reject,
            Xn.resolve = Xn.resolve,
            Xn.prototype.constructor = Xn.prototype.constructor,
            Xn.prototype.then = Xn.prototype.then,
            ne.Promise = Xn)
        }
        var tc = ca;
        tc()
    }
    ).call(window)
}
var bt = function() {
    var e = function(t) {
        this.name = "IllegalStateException",
        this.message = t
    };
    return e.prototype = {
        toString: function() {
            return ["[", this.name, this.message, "]"].join("|")
        }
    },
    e
}()
  , vt = function() {
    var e = typeof window < "u" && typeof navigator < "u" && typeof document < "u"
      , t = typeof importScripts < "u"
      , n = typeof process == "object" && (/node(\.exe)?$/.test(process.execPath) || process.node && process.v8 || process.versions && process.versions.node && process.versions.v8);
    if (e && !document.getElementById)
        throw new bt("Not supported browser");
    var i = {
        isBrowserDocument: function() {
            return e
        },
        isBrowser: function() {
            return !n && (e || t)
        },
        isNodeJS: function() {
            return !e && n
        },
        isWebWorker: function() {
            return !e && !n && t
        },
        isOther: function() {
            return !e && !n && !t
        },
        browserDocumentOrDie: function() {
            if (!this.isBrowserDocument())
                throw new bt("Trying to load a browser-only module on non-browser environment")
        }
    };
    return i.isBrowserDocument = i.isBrowserDocument,
    i.isBrowser = i.isBrowser,
    i.isNodeJS = i.isNodeJS,
    i.isWebWorker = i.isWebWorker,
    i.browserDocumentOrDie = i.browserDocumentOrDie,
    i
}()
  , Et = function() {
    var e = new RegExp("^\\s*([\\s\\S]*?)\\s*$")
      , t = new RegExp(",","g")
      , n = new RegExp("\\.","g")
      , i = {
        getTimeStamp: function() {
            return new Date().getTime()
        },
        randomG: function(r) {
            return r = r || 1e3,
            Math.round(Math.random() * r)
        },
        trim: function(r) {
            return r.replace(e, "$1")
        },
        getNumber: function(r, s) {
            return r ? r.replace ? (s ? (r = r.replace(n, ""),
            r = r.replace(t, ".")) : r = r.replace(t, ""),
            new Number(r)) : r : 0
        },
        isArray: function(r) {
            return r && r.join && typeof r.join == "function"
        },
        addEvent: function(r, s, o) {
            return vt.isBrowserDocument() ? (typeof r.addEventListener < "u" ? r.addEventListener(s, o, !1) : typeof r.attachEvent < "u" && r.attachEvent("on" + s, o),
            !0) : !1
        },
        removeEvent: function(r, s, o) {
            return vt.isBrowserDocument() ? (typeof r.removeEventListener < "u" ? r.removeEventListener(s, o, !1) : typeof r.detachEvent < "u" && r.detachEvent("on" + s, o),
            !0) : !1
        }
    };
    return i.getTimeStamp = i.getTimeStamp,
    i.randomG = i.randomG,
    i.trim = i.trim,
    i.getNumber = i.getNumber,
    i.isArray = i.isArray,
    i.addEvent = i.addEvent,
    i.removeEvent = i.removeEvent,
    i
}()
  , G = function() {
    var e = {
        handleError5: !1,
        REFRESH_STATUS_INTERVAL: 1e3,
        REFRESH_STATUS_INTERVAL_TOLERANCE: 200,
        STOP_SEARCH_TIMEOUT: 1e4,
        FRAME_NAME_INDEX: 1,
        TIMESTAMP_INDEX: 0,
        HOST_INDEX: 2,
        BUILD_INDEX: 3,
        PROTOCOL_INDEX: 4,
        BLOB_INDEX: 5,
        NULL_VALUE: "N",
        ALONE_CHECK_TIMEOUT: 200,
        MAIN_CLIENT: "MAIN",
        WORKER_BRIDGE_GLOBAL: "wbridge",
        FRAME_BRIDGE_GLOBAL: "fbridge",
        PROMISE_TIMEOUT: 1,
        PROMISE_FAILURE: 2,
        BUILD: "1811",
        LIBRARY_VERSION: "8.0.9",
        LIBRARY_NAME: "javascript",
        LIBRARY_TAG: "javascript_client",
        LS_CID: "pcYgxn8m8%20feOojyA1U661o3g2.pz47Ag7s",
        PAGE_PROTOCOL: vt.isBrowserDocument() && (document.location.protocol == "http:" || document.location.protocol == "https:") ? document.location.protocol : "file:",
        STREAM: "lightstreamer.stream",
        PROTOCOL: "lightstreamer.protocol",
        SESSION: "lightstreamer.session",
        REQUESTS: "lightstreamer.requests",
        SUBSCRIPTIONS: "lightstreamer.subscriptions",
        MESSAGES: "lightstreamer.messages",
        ACTIONS: "lightstreamer.actions",
        SHARING: "lightstreamer.sharing",
        CROSSTAB: "lightstreamer.crosstab",
        STATS: "lightstreamer.stats",
        MPN: "lightstreamer.mpn",
        STORAGE_PREFIX: "Lightstreamer_",
        LIGHTSTREAMER_PATH: "lightstreamer",
        _UNORDERED_MESSAGES: "UNORDERED_MESSAGES",
        UNCHANGED: {
            length: -1,
            toString: function() {
                return "[UNCHANGED]"
            }
        },
        CONNECTING: "CONNECTING",
        CONNECTED: "CONNECTED:",
        SENSE: "STREAM-SENSING",
        WS_STREAMING: "WS-STREAMING",
        HTTP_STREAMING: "HTTP-STREAMING",
        STALLED: "STALLED",
        WS_POLLING: "WS-POLLING",
        HTTP_POLLING: "HTTP-POLLING",
        DISCONNECTED: "DISCONNECTED",
        WILL_RETRY: "DISCONNECTED:WILL-RETRY",
        TRYING_RECOVERY: "DISCONNECTED:TRYING-RECOVERY",
        WS_ALL: "WS",
        HTTP_ALL: "HTTP",
        RAW: "RAW",
        DISTINCT: "DISTINCT",
        COMMAND: "COMMAND",
        MERGE: "MERGE",
        MASTER: "MASTER",
        TLCP_VERSION: "TLCP-2.1.0"
    };
    return e
}()
  , mi = function() {
    var e = vt.isBrowser() ? null : !1
      , t = vt.isBrowser() ? navigator.userAgent.toLowerCase() : null;
    function n(g, p, v) {
        return !p || !g ? !0 : v === !0 ? g <= p : v === !1 ? g >= p : g == p
    }
    function i(g) {
        return t.indexOf(g) > -1
    }
    function r(g) {
        var p = e;
        return function() {
            return p === null && (p = i(g)),
            p
        }
    }
    function s(g) {
        var p = e;
        return function() {
            if (p === null) {
                p = !0;
                for (var v = 0; v < g.length; v++)
                    p = p && g[v]()
            }
            return p
        }
    }
    function o(g) {
        var p = e;
        return function() {
            if (p === null) {
                p = !1;
                for (var v = 0; v < g.length; v++)
                    p = p || g[v]()
            }
            return p
        }
    }
    function a(g, p) {
        var v = e
          , S = e;
        return function(x, w) {
            return v === null && (v = g(),
            S = v ? p() : null),
            v ? n(S, x, w) : !1
        }
    }
    function c(g) {
        var p = e;
        return function() {
            if (p === null) {
                var v = g.exec(t);
                if (v && v.length >= 2)
                    return v[1]
            }
            return null
        }
    }
    function l() {
        if (opera.version) {
            var g = opera.version();
            return g = g.replace(new RegExp("[^0-9.]+","g"), ""),
            parseInt(g)
        } else
            return 7
    }
    function u() {
        return typeof opera < "u"
    }
    function h(g) {
        return function() {
            return !g()
        }
    }
    var d = e
      , f = {
        isProbablyRekonq: r("rekonq"),
        isProbablyAWebkit: r("webkit"),
        isProbablyPlaystation: r("playstation 3"),
        isProbablyChrome: a(r("chrome/"), c(new RegExp("chrome/([0-9]+)","g"))),
        isProbablyAKhtml: function() {
            return d === null && (d = document.childNodes && !document.all && !navigator.taintEnabled && !navigator.accentColorName),
            d
        },
        isProbablyKonqueror: a(r("konqueror"), c(new RegExp("konqueror/([0-9.]+)","g"))),
        isProbablyIE: function(g, p) {
            return !!(a(r("msie"), c(new RegExp("msie\\s([0-9]+)[.;]","g")))(g, p) || a(r("rv:11.0"), function() {
                return "11"
            })(g, p))
        },
        isProbablyEdge: r("edge"),
        isProbablyFX: a(r("firefox"), c(new RegExp("firefox\\/(\\d+\\.?\\d*)"))),
        isProbablyOldOpera: a(u, l)
    };
    return f.isProbablyAndroidBrowser = s([r("android"), f.isProbablyAWebkit, h(f.isProbablyChrome)]),
    f.isProbablyOperaMobile = s([f.isProbablyOldOpera, r("opera mobi")]),
    f.isProbablyApple = a(s([r("safari"), o([r("ipad"), r("iphone"), r("ipod"), s([h(f.isProbablyAndroidBrowser), h(f.isProbablyChrome), h(f.isProbablyRekonq)])])]), c(new RegExp("version\\/(\\d+\\.?\\d*)"))),
    f.isProbablyRekonq = f.isProbablyRekonq,
    f.isProbablyChrome = f.isProbablyChrome,
    f.isProbablyAWebkit = f.isProbablyAWebkit,
    f.isProbablyPlaystation = f.isProbablyPlaystation,
    f.isProbablyAndroidBrowser = f.isProbablyAndroidBrowser,
    f.isProbablyOperaMobile = f.isProbablyOperaMobile,
    f.isProbablyApple = f.isProbablyApple,
    f.isProbablyAKhtml = f.isProbablyAKhtml,
    f.isProbablyKonqueror = f.isProbablyKonqueror,
    f.isProbablyIE = f.isProbablyIE,
    f.isProbablyEdge = f.isProbablyEdge,
    f.isProbablyFX = f.isProbablyFX,
    f.isProbablyOldOpera = f.isProbablyOldOpera,
    f
}()
  , t1 = function() {
    var e = function() {
        this.data = []
    };
    return e.prototype = {
        add: function(t) {
            this.data.push(t)
        },
        remove: function(t) {
            var n = this.find(t);
            return n < 0 ? !1 : (this.data.splice(n, 1),
            !0)
        },
        contains: function(t) {
            return this.find(t) >= 0
        },
        find: function(t) {
            for (var n = 0; n < this.data.length; n++)
                if (this.data[n] === t)
                    return n;
            return -1
        },
        forEach: function(t) {
            for (var n = 0; n < this.data.length; n++)
                t(this.data[n])
        },
        asArray: function() {
            return [].concat(this.data)
        },
        clean: function() {
            this.data = []
        }
    },
    e.prototype.add = e.prototype.add,
    e.prototype.remove = e.prototype.remove,
    e.prototype.forEach = e.prototype.forEach,
    e.prototype.asArray = e.prototype.asArray,
    e.prototype.clean = e.prototype.clean,
    e
}()
  , Bt = function() {
    var e = new t1
      , t = new t1
      , n = new t1
      , i = 1e3
      , r = !1
      , s = {
        onloadDone: "onloadDone",
        onloadInprogress: "onloadInprogress",
        unloaded: "unloaded",
        unloading: "unloading",
        preunloading: "preunloading"
    }
      , o = {};
    for (var a in s)
        o[s[a]] = a;
    function c(S) {
        return h(S, o.onloadDone, o.onloadInprogress, t, "onloadEvent")
    }
    function l(S) {
        return h(S, o.unloaded, o.unloading, e, "unloadEvent")
    }
    function u(S) {
        return h(S, o.preunloading, o.preunloading, n, "preUnloadEvent")
    }
    function h(S, x, w, k, B) {
        return function() {
            S[x] || (S[w] = !0,
            k.forEach(function(N) {
                try {
                    d(N, B)
                } catch {}
            }),
            x != "preunloading" && k.clean(),
            S[x] = !0,
            S[w] = !1)
        }
    }
    function d(S, x) {
        S[x] ? S[x]() : S()
    }
    function f(S, x) {
        setTimeout(function() {
            d(S, x)
        }, 0)
    }
    function g(S, x, w, k) {
        setTimeout(function() {
            w ? k ? S.apply(w, k) : S.apply(w) : k ? S.apply(null, k) : S()
        }, x)
    }
    function p() {
        r = !0
    }
    var v = {
        onloadDone: !1,
        onloadInprogress: !1,
        unloaded: !1,
        unloading: !1,
        preunloading: !1,
        isLoaded: function() {
            return this.onloadDone
        },
        isUnloaded: function() {
            return this.unloaded
        },
        isUnloading: function() {
            return this.unloading
        },
        addOnloadHandler: function(S) {
            this.isPreOnload() ? t.add(S) : f(S, "onloadEvent")
        },
        addUnloadHandler: function(S) {
            this.isPreUnload() ? e.add(S) : f(S, "unloadEvent")
        },
        addBeforeUnloadHandler: function(S) {
            n.add(S),
            this.preunloading && f(S, "preUnloadEvent")
        },
        removeOnloadHandler: function(S) {
            t.remove(S)
        },
        removeUnloadHandler: function(S) {
            e.remove(S)
        },
        removeBeforeUnloadHandler: function(S) {
            n.remove(S)
        },
        isPreOnload: function() {
            return !(this.onloadDone || this.onloadInprogress)
        },
        isPreUnload: function() {
            return !(this.unloaded || this.unloading)
        },
        attachToWindow: function() {
            if (Et.addEvent(window, "unload", this.closeFun),
            Et.addEvent(window, "beforeunload", this.beforeCloseFun),
            document && typeof document.readyState < "u") {
                var S = document.readyState;
                if (S.toUpperCase() == "COMPLETE") {
                    this.asynchExecution();
                    return
                } else
                    g(this.controlReadyStateLoad, i, this)
            } else if (this.isInBody()) {
                this.asynchExecution();
                return
            }
            var x = Et.addEvent(window, "load", this.readyFun);
            if (!x)
                this.asynchExecution();
            else if (mi.isProbablyOldOpera()) {
                var w = !1;
                mi.isProbablyOldOpera(9, !1) && (w = !0,
                Et.addEvent(document, "DOMContentLoaded", p)),
                g(this.controlOperaLoad, i, this, [w])
            }
        },
        asynchExecution: function() {
            g(this.readyFun, 0)
        },
        controlReadyStateLoad: function() {
            if (!this.onloadDone) {
                var S = document.readyState;
                S.toUpperCase() == "COMPLETE" ? this.readyFun() : g(this.controlReadyStateLoad, i, this)
            }
        },
        controlOperaLoad: function(S) {
            this.onloadDone || (r || !S && this.isInBody() ? this.readyFun() : g(this.controlOperaLoad, i, this, [S]))
        },
        isInBody: function() {
            return typeof document.getElementsByTagName < "u" && typeof document.getElementById < "u" && (document.getElementsByTagName("body")[0] != null || document.body != null)
        }
    };
    return v.readyFun = c(v),
    v.closeFun = l(v),
    v.beforeCloseFun = u(v),
    vt.isBrowserDocument() ? v.attachToWindow() : v.asynchExecution(),
    v.addOnloadHandler = v.addOnloadHandler,
    v.addUnloadHandler = v.addUnloadHandler,
    v.addBeforeUnloadHandler = v.addBeforeUnloadHandler,
    v.removeOnloadHandler = v.removeOnloadHandler,
    v.removeUnloadHandler = v.removeUnloadHandler,
    v.removeBeforeUnloadHandler = v.removeBeforeUnloadHandler,
    v.isLoaded = v.isLoaded,
    v.isUnloaded = v.isUnloaded,
    v.isUnloading = v.isUnloading,
    v
}()
  , Hg = "Lightstreamer"
  , Ut = {
    wstatus: Bt,
    toString: function() {
        return "[" + Hg + " " + this.library + " client version " + this.version + " build " + this.build + "]"
    },
    exportGlobal: function(e, t, n, i) {
        i = i || "_";
        var r = i + e;
        return this[r] || (this[r] = {}),
        this[r][t] = n,
        Hg + "." + r + "." + t
    },
    hasGlobal: function(e, t, n) {
        n = n || "_";
        var i = n + e;
        return this[i] && this[i][t]
    },
    getGlobal: function(e, t, n) {
        n = n || "_";
        var i = n + e;
        return this[i] ? this[i][t] : null
    },
    cleanGlobal: function(e, t, n) {
        n = n || "_";
        var i = n + e;
        if (this[i] && this[i][t]) {
            delete this[i][t];
            for (var r in this[i])
                return;
            delete this[i]
        }
    },
    cleanAllGlobals: function(e, t) {
        t = t || "_";
        var n = t + e;
        this[n] && delete this[n]
    },
    localSharedEngines: {},
    addSharableEngine: function(e, t) {
        var n = this.localSharedEngines;
        n[e] || (n[e] = []),
        n[e].push(t)
    },
    removeSharableEngine: function(e, t) {
        var n = this.localSharedEngines[e];
        if (n) {
            for (var i = 0; i < n.length; i++)
                n[i] == t && n.splice(i, 1);
            n.length == 0 && delete n[e]
        }
    },
    getSharableEngine: function(e) {
        if (this.localSharedEngines[e]) {
            var t = this.localSharedEngines[e];
            if (t && t.length > 0)
                return t[0]
        }
        return null
    }
};
vt.isBrowserDocument() && (window.OpenAjax && window.OpenAjax.hub && window.OpenAjax.hub.registerLibrary(Hg, "http://www.lightstreamer.com/", Ut.version),
window.Lightstreamer = Ut);
Ut.library = G.LIBRARY_NAME;
Ut.version = G.LIBRARY_VERSION;
Ut.build = G.BUILD;
var be = function() {
    var e = 50
      , t = !1
      , n = []
      , i = Et.getTimeStamp()
      , r = 3 * 60 * 60 * 1e3
      , s = i + r
      , o = []
      , a = null
      , c = 0;
    function l(w, k) {
        return w.time === k.time ? w.orderId - k.orderId : w.time - k.time
    }
    var u = vt.isBrowserDocument() && (document.location.protocol == "http:" || document.location.protocol == "https:") ? document.location.protocol + "//" + document.location.hostname + (document.location.port ? ":" + document.location.port : "") : "*"
      , h = function() {}
      , d = h
      , f = !1;
    function g() {
        f = !1,
        S()
    }
    function p() {
        f || (f = !0,
        d())
    }
    function v() {
        if (a)
            clearInterval(a);
        else if (vt.isBrowserDocument() && typeof postMessage < "u") {
            d = function() {
                try {
                    window.postMessage("Lightstreamer.run", u)
                } catch {
                    try {
                        window.postMessage("Lightstreamer.run", u)
                    } catch {}
                }
            }
            ;
            var w = function(k) {
                (k.data == "Lightstreamer.run" && u == "*" || k.origin == u) && g()
            };
            Et.addEvent(window, "message", w),
            p(),
            f == !1 && (Et.removeEvent(window, "message", w),
            d = h)
        } else
            vt.isNodeJS() && typeof process < "u" && process.nextTick && (d = function() {
                process.nextTick(g)
            }
            );
        a = setInterval(S, e)
    }
    function S() {
        if (Bt.unloaded) {
            clearInterval(a);
            return
        }
        var w = i;
        if (i = Et.getTimeStamp(),
        i < w && (i = w),
        n.length > 0) {
            t && (n.sort(l),
            t = !1);
            for (var k; n.length > 0 && n[0].time <= i && !Bt.unloaded; )
                k = n.shift(),
                k.fun && (x.executeTask(k),
                k.step && o.push(k))
        }
        n.length <= 0 && (c = 0);
        for (var B; o.length > 0; )
            B = o.shift(),
            B.step && (B.orderId = c++,
            x.addPackedTimedTask(B, B.step, !0));
        i >= s && (s = i + r,
        n = [].concat(n))
    }
    var x = {
        toString: function() {
            return ["[", "Executor", e, n.length, "]"].join("|")
        },
        getQueueLength: function() {
            return n.length
        },
        packTask: function(w, k, B) {
            return {
                fun: w,
                context: k || null,
                params: B || null,
                orderId: c++
            }
        },
        addPackedTimedTask: function(w, k, B) {
            if (w.step = B ? k : null,
            w.time = i + parseInt(k),
            isNaN(w.time))
                try {
                    throw new Error
                } catch (E) {
                    var N = "Executor error for time: " + k;
                    throw E.stack && (N += " " + E.stack),
                    N
                }
            n.push(w),
            t = !0
        },
        addRepetitiveTask: function(w, k, B, N) {
            return this.addTimedTask(w, k, B, N, !0)
        },
        stopRepetitiveTask: function(w) {
            w && (w.fun = null,
            w.step = null)
        },
        addTimedTask: function(w, k, B, N, E) {
            var F = this.packTask(w, B, N);
            return this.addPackedTimedTask(F, k, E),
            k == 0 && p(),
            F
        },
        modifyTaskParam: function(w, k, B) {
            w.params[k] = B
        },
        modifyAllTaskParams: function(w, k) {
            w.params = k
        },
        delayTask: function(w, k) {
            w.time += k,
            t = !0
        },
        executeTask: function(w, k) {
            try {
                var B = k || w.params;
                w.context ? B ? w.fun.apply(w.context, B) : w.fun.apply(w.context) : B ? w.fun.apply(null, B) : w.fun()
            } catch {
                var N = null;
                try {
                    N = w.fun.name || w.fun.toString()
                } catch {}
            }
        }
    };
    return vt.isWebWorker() ? setTimeout(v, 1) : v(),
    x.getQueueLength = x.getQueueLength,
    x.packTask = x.packTask,
    x.addPackedTimedTask = x.addPackedTimedTask,
    x.addRepetitiveTask = x.addRepetitiveTask,
    x.stopRepetitiveTask = x.stopRepetitiveTask,
    x.addTimedTask = x.addTimedTask,
    x.modifyTaskParam = x.modifyTaskParam,
    x.modifyAllTaskParams = x.modifyAllTaskParams,
    x.delayTask = x.delayTask,
    x.executeTask = x.executeTask,
    x
}()
  , eb = function() {
    var e = function() {
        return !1
    }
      , t = {
        error: e,
        warn: e,
        info: e,
        debug: e,
        fatal: e,
        isDebugEnabled: e,
        isInfoEnabled: e,
        isWarnEnabled: e,
        isErrorEnabled: e,
        isFatalEnabled: e
    }
      , n = function(i) {
        this.setWrappedInstance(i)
    };
    return n.prototype = {
        setWrappedInstance: function(i) {
            this.wrappedLogger = i || t
        },
        logFatal: function(i) {
            this.isFatalLogEnabled() && (i += this.logArguments(arguments, 1),
            this.fatal(i))
        },
        fatal: function(i, r) {
            this.wrappedLogger.fatal(i, r)
        },
        isFatalLogEnabled: function() {
            return !this.wrappedLogger.isFatalEnabled || this.wrappedLogger.isFatalEnabled()
        },
        logError: function(i) {
            this.isErrorLogEnabled() && (i += this.logArguments(arguments, 1),
            this.error(i))
        },
        logErrorExc: function(i, r) {
            this.isErrorLogEnabled() && (r += this.logArguments(arguments, 2),
            this.error(r, i))
        },
        error: function(i, r) {
            this.wrappedLogger.error(i, r)
        },
        isErrorLogEnabled: function() {
            return !this.wrappedLogger.isErrorEnabled || this.wrappedLogger.isErrorEnabled()
        },
        logWarn: function(i) {
            this.isWarnLogEnabled() && (i += this.logArguments(arguments, 1),
            this.warn(i))
        },
        warn: function(i, r) {
            this.wrappedLogger.warn(i, r)
        },
        isWarnLogEnabled: function() {
            return !this.wrappedLogger.isWarnEnabled || this.wrappedLogger.isWarnEnabled()
        },
        logInfo: function(i) {
            this.isInfoLogEnabled() && (i += this.logArguments(arguments, 1),
            this.info(i))
        },
        info: function(i, r) {
            this.wrappedLogger.info(i, r)
        },
        isInfoLogEnabled: function() {
            return !this.wrappedLogger.isInfoEnabled || this.wrappedLogger.isInfoEnabled()
        },
        logDebug: function(i) {
            this.isDebugLogEnabled() && (i += this.logArguments(arguments, 1),
            this.debug(i))
        },
        debug: function(i, r) {
            this.wrappedLogger.debug(i, r)
        },
        isDebugLogEnabled: function() {
            return !this.wrappedLogger.isDebugEnabled || this.wrappedLogger.isDebugEnabled()
        },
        logArguments: function(i, r) {
            r = r || 0;
            for (var s = " {", o = r; o < i.length; o++)
                try {
                    var a = i[o];
                    a === null ? s += "NULL" : a.length < 0 ? s += "*" : a.charAt != null ? s += a : a.message ? (s += a.message,
                    a.stack && (s += `
` + a.stack + `
`)) : a[0] == a ? s += a : Et.isArray(a) ? (s += "(",
                    s += this.logArguments(a),
                    s += ")") : s += a,
                    s += " "
                } catch {
                    s += "??? "
                }
            return s + "}"
        }
    },
    n.prototype.debug = n.prototype.debug,
    n.prototype.isDebugLogEnabled = n.prototype.isDebugLogEnabled,
    n.prototype.logDebug = n.prototype.logDebug,
    n.prototype.info = n.prototype.info,
    n.prototype.isInfoLogEnabled = n.prototype.isInfoLogEnabled,
    n.prototype.logInfo = n.prototype.logInfo,
    n.prototype.warn = n.prototype.warn,
    n.prototype.isWarnEnabled = n.prototype.isWarnEnabled,
    n.prototype.logWarn = n.prototype.logWarn,
    n.prototype.error = n.prototype.error,
    n.prototype.isErrorEnabled = n.prototype.isErrorEnabled,
    n.prototype.logError = n.prototype.logError,
    n.prototype.logErrorExc = n.prototype.logErrorExc,
    n.prototype.fatal = n.prototype.fatal,
    n.prototype.isFatalEnabled = n.prototype.isFatalEnabled,
    n.prototype.logFatal = n.prototype.logFatal,
    n
}()
  , ct = function() {
    var e = function(t) {
        this.name = "IllegalArgumentException",
        this.message = t
    };
    return e.prototype = {
        toString: function() {
            return ["[", this.name, this.message, "]"].join("|")
        }
    },
    e
}()
  , m = function() {
    var e = {}
      , t = null
      , n = "The given object is not a LoggerProvider"
      , i = {
        setLoggerProvider: function(r) {
            if (r && !r.getLogger)
                throw new ct(n);
            t = r;
            for (var s in e)
                t ? e[s].setWrappedInstance(t.getLogger(s)) : e[s].setWrappedInstance(null)
        },
        getLoggerProxy: function(r) {
            return e[r] || (t ? e[r] = new eb(t.getLogger(r)) : e[r] = new eb),
            e[r]
        },
        resolve: function(r) {
            return r
        }
    };
    return i.setLoggerProvider = i.setLoggerProvider,
    i.getLoggerProxy = i.getLoggerProxy,
    i.resolve = i.resolve,
    i
}()
  , Ke = function() {
    var e = new RegExp("\\.","g")
      , t = new RegExp("-","g")
      , n = 1
      , i = 1
      , r = {
        isOffline: function() {
            return vt.isBrowser() ? navigator.onLine === !1 : !1
        },
        canUseLocalStorage: function() {
            try {
                if (typeof localStorage < "u" && localStorage !== null && localStorage.getItem && localStorage.setItem) {
                    var s = "__canUseLocalStorage_test__"
                      , o = "true";
                    return localStorage.setItem(s, o),
                    localStorage.removeItem(s),
                    !0
                } else
                    return !1
            } catch {
                return !1
            }
        },
        getDomain: function() {
            try {
                return document.domain
            } catch {
                return ""
            }
        },
        hasDefaultDomain: function() {
            if (!vt.isBrowserDocument())
                return !0;
            try {
                var s = document.location.host;
                return s.indexOf("[") > -1 ? !0 : r.getDomain() == document.location.hostname
            } catch {
                return !1
            }
        },
        copyByValue: function(s) {
            if (typeof s < "u") {
                if (s === !0 || s === !1)
                    return s === !0;
                if (s == null)
                    return null;
                if (typeof s == "number" || s instanceof Number)
                    return Number(s);
                if (Et.isArray(s)) {
                    for (var o = [], a = 0; a < s.length; a++)
                        o[a] = this.copyByValue(s[a]);
                    return o
                } else {
                    if (typeof s == "string" || s instanceof String)
                        return String(s);
                    if (s.length === -1)
                        return G.UNCHANGED;
                    if (isNaN(s) && typeof s == "number")
                        return NaN;
                    var c = {};
                    for (var a in s)
                        c[this.copyByValue(a)] = this.copyByValue(s[a]);
                    return c
                }
            }
            return null
        },
        extendObj: function(s, o) {
            if (s = s || {},
            o)
                for (var a in o)
                    s[a] = o[a];
            return s
        },
        sanitizeIFrameName: function(s) {
            return s.replace(e, "_").replace(t, "__")
        },
        getReverse: function(s) {
            var o = {};
            for (var a in s)
                o[s[a]] = a;
            return o
        },
        argumentsToArray: function(s) {
            if (s && !s.pop) {
                for (var o = [], a = 0; a < s.length; a++)
                    o.push(s[a]);
                return o
            }
            return s
        },
        parseSetCookieHeader: function(s) {
            if (!s)
                return [];
            for (var o = {
                i: 0,
                next: function() {
                    return s.charAt(this.i++)
                }
            }, a = /^\s*Expires/i, c = [], l = o.next(); l; ) {
                for (var u = "", h = ""; l && l != ";" && l != ","; )
                    h += l,
                    l = o.next();
                for (h = h.trim(),
                u += h,
                l == ";" && (u += "; ",
                l = o.next()); l && l != ","; ) {
                    for (var d = ""; l && l != ";" && l != ","; )
                        d += l,
                        l = o.next();
                    if (d.match(a))
                        for (console.assert(l == ","),
                        d += l,
                        l = o.next(); l && l != ";" && l != ","; )
                            d += l,
                            l = o.next();
                    d = d.trim(),
                    u += d,
                    l == ";" && (u += "; ",
                    l = o.next())
                }
                c.push(u),
                l = o.next()
            }
            return c
        },
        nextRequestId: function() {
            return n++
        },
        nextSubscriptionId: function() {
            return i++
        },
        defer: function() {
            var s, o, a = new Promise(function(c, l) {
                s = c,
                o = l
            }
            );
            return a.resolve = s,
            a.reject = o,
            a
        }
    };
    return r
}()
  , ot = function() {
    function e(i, r, s) {
        if (r)
            return s ? r.apply(i, s) : r.apply(i)
    }
    function t(i, r) {
        for (var s in i)
            if (i[r] == i[s] && r != s)
                return s;
        return null
    }
    var n = {
        Inheritance: function(i, r, s, o) {
            for (var a in r.prototype)
                if (!i.prototype[a])
                    i.prototype[a] = r.prototype[a];
                else if (o) {
                    var c = t(r.prototype, a);
                    if (c) {
                        if (i.prototype[c] && i.prototype[c] !== i.prototype[a] && r.prototype[c] !== r.prototype[c])
                            throw new bt("Can't solve alias collision, try to minify the classes again (" + c + ", " + a + ")");
                        i.prototype[c] = i.prototype[a]
                    }
                }
            return s || (i.prototype._super_ = r,
            i.prototype._callSuperConstructor = n._callSuperConstructor,
            i.prototype._callSuperMethod = n._callSuperMethod),
            i
        },
        _callSuperMethod: function(i, r, s) {
            return e(this, i.prototype._super_.prototype[r], s)
        },
        _callSuperConstructor: function(i, r) {
            e(this, i.prototype._super_, r)
        }
    };
    return n.Inheritance
}()
  , M3 = function() {
    var e = "The given value is not valid. "
      , t = "Use a number"
      , n = "Use an integer"
      , i = "Use a positive number"
      , r = " or 0"
      , s = "Use true or false"
      , o = function() {};
    function a(l, u, h) {
        var d = new Number(l);
        if (isNaN(d))
            throw new ct(e + t);
        if (!h && d != Math.round(d))
            throw new ct(e + n);
        if (u) {
            if (l < 0)
                throw new ct(e + i + r)
        } else if (l <= 0)
            throw new ct(e + i);
        return d
    }
    function c(l, u) {
        if (l === !0 || l === !1 || u && !l)
            return l === !0;
        throw new ct(e + s)
    }
    return o.prototype.checkPositiveNumber = a,
    o.prototype.checkBool = c,
    o.prototype.checkPositiveNumber = a,
    o.prototype.checkBool = c,
    o
}()
  , Rle = m.getLoggerProxy(G.ACTIONS)
  , Dle = m.getLoggerProxy(G.SHARING)
  , a1 = function(e) {
    this.constr = "Bean",
    this.parent = null,
    this.broadcastSimples = !1,
    e && this.copySettings(e)
};
a1.prototype = {
    getPropName: function(e) {
        return this.varNames[e]
    },
    simpleSetter: function(e, t) {
        var n = this.getPropName(e)
          , i = this[n];
        this[n] = Ke.copyByValue(t),
        this.parent && this.broadcastSimples && this.broadcastSetting(e),
        i != this[n] && this.notifyChange(e)
    },
    getValueForLog: function(e) {
        return this.doNotLogValueList && this.doNotLogValueList[e] ? "[...]" : this[e]
    },
    heavySetter: function(e, t) {
        var n = this.getPropName(e);
        t != this[n] && (this[n] = t,
        this.broadcastSetting(e),
        this.notifyChange(e))
    },
    setBroadcaster: function(e, t) {
        this.parent = e,
        this.broadcastSimples = t
    },
    broadcastSetting: function(e) {
        var t = this.getPropName(e);
        return !(this.parent && this.parent.broadcastSetting && !this.parent.broadcastSetting(this.constr, e, Ke.copyByValue(this[t])))
    },
    notifyChange: function(e) {
        var t = this.getPropName(e);
        if (this.parent && this.parent.notifyOptionChange) {
            if (this.noNotificationList && this.noNotificationList[t])
                return;
            this.parent.notifyOptionChange(e, this)
        }
    },
    copySettings: function(e) {
        var t = this.varNames;
        for (var n in t)
            this.simpleSetter(n, e[t[n]])
    },
    forEachProperty: function(e) {
        for (var t in this.varNames)
            e(t, this[this.varNames[t]])
    }
};
ot(a1, M3, !1, !0);
var pN = {}
  , Gg = {
    connectionRequested: "connectionRequested",
    clientsCount: "clientsCount"
};
Gg = Ke.getReverse(Gg);
var c1 = function(e) {
    this.connectionRequested = !1,
    this.clientsCount = 0,
    this.noNotificationList = pN,
    this.varNames = Gg,
    this._callSuperConstructor(c1, arguments),
    this.constr = "Configuration"
};
c1.prototype = {
    getConnectionRequested: function() {
        return this.connectionRequested
    },
    getClientsCount: function() {
        return this.clientsCount
    }
};
ot(c1, a1);
var s3 = m.getLoggerProxy(G.SESSION)
  , Lb = function(e) {
    this.initRetryDelay(e)
};
Lb.prototype = {
    resetRetryDelay: function(e) {
        this.initRetryDelay(e),
        s3.isDebugLogEnabled() && s3.debug("Reset currentRetryDelay: " + this.currentRetryDelay)
    },
    increaseRetryDelay: function() {
        this.retryAttempt >= 9 && this.currentRetryDelay < this.maxRetryDelay && (this.currentRetryDelay *= 2,
        this.currentRetryDelay > this.maxRetryDelay && (this.currentRetryDelay = this.maxRetryDelay),
        s3.isDebugLogEnabled() && s3.debug("Increase currentRetryDelay: " + this.currentRetryDelay)),
        this.retryAttempt++
    },
    initRetryDelay: function(e) {
        this.currentRetryDelay = e,
        this.minRetryDelay = e,
        this.maxRetryDelay = Math.max(6e4, e),
        this.retryAttempt = 0
    }
};
var vu = m.getLoggerProxy(G.SESSION)
  , Bb = function(e) {
    this.initConnectTimeout(e)
};
Bb.prototype = {
    resetConnectTimeout: function(e) {
        this.initConnectTimeout(e),
        vu.isDebugLogEnabled() && vu.debug("Reset currentConnectTimeout: " + this.currentConnectTimeout)
    },
    increaseConnectTimeout: function() {
        this.connectAttempt >= 9 && this.currentConnectTimeout < this.maxConnectTimeout && (this.currentConnectTimeout *= 2,
        this.currentConnectTimeout > this.maxConnectTimeout && (this.currentConnectTimeout = this.maxConnectTimeout),
        vu.isDebugLogEnabled() && vu.debug("Increase currentConnectTimeout: " + this.currentConnectTimeout)),
        this.connectAttempt++
    },
    increaseConnectTimeoutToMax: function() {
        this.currentConnectTimeout = this.maxConnectTimeout,
        vu.isDebugLogEnabled() && vu.debug("Increase currentConnectTimeout to max: " + this.currentConnectTimeout)
    },
    initConnectTimeout: function(e) {
        this.currentConnectTimeout = e,
        this.minConnectTimeout = e,
        this.maxConnectTimeout = Math.max(6e4, e),
        this.connectAttempt = 0
    }
};
var jl = {};
jl[G.HTTP_STREAMING] = !0;
jl[G.WS_POLLING] = !0;
jl[G.HTTP_POLLING] = !0;
jl[G.WS_STREAMING] = !0;
jl[G.WS_ALL] = !0;
jl[G.HTTP_ALL] = !0;
var gN = "The given value is not valid. Use one of: HTTP-STREAMING, HTTP-POLLING, WS-STREAMING, WS-POLLING, WS, HTTP or null"
  , Vg = {
    contentLength: "contentLength",
    idleTimeout: "idleTimeout",
    keepaliveInterval: "keepaliveInterval",
    requestedMaxBandwidth: "requestedMaxBandwidth",
    realMaxBandwidth: "realMaxBandwidth",
    pollingInterval: "pollingInterval",
    reconnectTimeout: "reconnectTimeout",
    stalledTimeout: "stalledTimeout",
    retryDelay: "retryDelay",
    firstRetryMaxDelay: "firstRetryMaxDelay",
    slowingEnabled: "slowingEnabled",
    forcedTransport: "forcedTransport",
    serverInstanceAddressIgnored: "serverInstanceAddressIgnored",
    cookieHandlingRequired: "cookieHandlingRequired",
    reverseHeartbeatInterval: "reverseHeartbeatInterval",
    earlyWSOpenEnabled: "earlyWSOpenEnabled",
    sessionRecoveryTimeout: "sessionRecoveryTimeout",
    spinFixTimeout: "spinFixTimeout",
    spinFixEnabled: "spinFixEnabled",
    xDomainStreamingEnabled: "xDomainStreamingEnabled",
    corsXHREnabled: "corsXHREnabled",
    forceBindTimeout: "forceBindTimeout",
    switchCheckTimeout: "switchCheckTimeout",
    httpExtraHeaders: "httpExtraHeaders",
    httpExtraHeadersOnSessionCreationOnly: "httpExtraHeadersOnSessionCreationOnly",
    remoteAdapterStatusObserver: "remoteAdapterStatusObserver",
    currentRetryDelay: "currentRetryDelay",
    minRetryDelay: "minRetryDelay",
    maxRetryDelay: "maxRetryDelay",
    retryAttempt: "retryAttempt",
    currentConnectTimeout: "currentConnectTimeout",
    minConnectTimeout: "minConnectTimeout",
    maxConnectTimeout: "maxConnectTimeout",
    connectAttempt: "connectAttempt"
};
Vg = Ke.getReverse(Vg);
var ae = function() {
    this.contentLength = 4e6,
    this.idleTimeout = 19e3,
    this.keepaliveInterval = 0,
    this.requestedMaxBandwidth = -1,
    this.pollingInterval = 0,
    this.reconnectTimeout = 3e3,
    this.stalledTimeout = 2e3,
    this.retryDelay = 4e3,
    this.initRetryDelay(this.retryDelay),
    this.initConnectTimeout(this.retryDelay),
    this.firstRetryMaxDelay = 100,
    this.slowingEnabled = !1,
    this.forcedTransport = null,
    this.serverInstanceAddressIgnored = !1,
    this.cookieHandlingRequired = !1,
    this.reverseHeartbeatInterval = 0,
    this.earlyWSOpenEnabled = !1,
    this.spinFixTimeout = 5e3,
    this.spinFixEnabled = null,
    this.httpExtraHeaders = null,
    this.httpExtraHeadersOnSessionCreationOnly = !1,
    this.sessionRecoveryTimeout = 15e3,
    this.xDomainStreamingEnabled = !0,
    this.corsXHREnabled = !0,
    this.forceBindTimeout = 2e3,
    this.switchCheckTimeout = 4e3,
    this.remoteAdapterStatusObserver = {},
    this.varNames = Vg,
    this._callSuperConstructor(ae, arguments),
    this.constr = "ConnectionOptions"
};
ae.prototype = {
    setContentLength: function(e) {
        this.heavySetter("contentLength", this.checkPositiveNumber(e))
    },
    getContentLength: function() {
        return this.contentLength
    },
    setIdleTimeout: function(e) {
        this.heavySetter("idleTimeout", this.checkPositiveNumber(e, !0))
    },
    getIdleTimeout: function() {
        return this.idleTimeout
    },
    setKeepaliveInterval: function(e) {
        this.heavySetter("keepaliveInterval", this.checkPositiveNumber(e, !0))
    },
    getKeepaliveInterval: function() {
        return this.keepaliveInterval
    },
    setRequestedMaxBandwidth: function(e) {
        var t = new String(e);
        t.toLowerCase() == "unlimited" ? e = 0 : e = this.checkPositiveNumber(e, !1, !0),
        this.heavySetter("requestedMaxBandwidth", e)
    },
    getRequestedMaxBandwidth: function() {
        return this.requestedMaxBandwidth <= 0 ? "unlimited" : this.requestedMaxBandwidth
    },
    getRealMaxBandwidth: function() {
        return this.realMaxBandwidth
    },
    setPollingInterval: function(e) {
        this.heavySetter("pollingInterval", this.checkPositiveNumber(e, !0))
    },
    getPollingInterval: function() {
        return this.pollingInterval
    },
    setReconnectTimeout: function(e) {
        this.heavySetter("reconnectTimeout", this.checkPositiveNumber(e))
    },
    getReconnectTimeout: function() {
        return this.reconnectTimeout
    },
    setStalledTimeout: function(e) {
        this.heavySetter("stalledTimeout", this.checkPositiveNumber(e))
    },
    getStalledTimeout: function() {
        return this.stalledTimeout
    },
    setConnectTimeout: function(e) {},
    getConnectTimeout: function() {
        return String(this.getRetryDelay())
    },
    setCurrentConnectTimeout: function(e) {},
    getCurrentConnectTimeout: function() {
        return this.currentConnectTimeout
    },
    setRetryDelay: function(e) {
        var t = this.checkPositiveNumber(e);
        this.heavySetter("retryDelay", t),
        this.resetRetryDelay(t),
        this.resetConnectTimeout(t)
    },
    getRetryDelay: function() {
        return this.retryDelay
    },
    setFirstRetryMaxDelay: function(e) {
        this.heavySetter("firstRetryMaxDelay", this.checkPositiveNumber(e))
    },
    getFirstRetryMaxDelay: function() {
        return this.firstRetryMaxDelay
    },
    setSlowingEnabled: function(e) {
        this.heavySetter("slowingEnabled", this.checkBool(e))
    },
    isSlowingEnabled: function() {
        return this.slowingEnabled
    },
    setForcedTransport: function(e) {
        if (e !== null && !jl[e])
            throw new ct(gN);
        this.heavySetter("forcedTransport", e)
    },
    getForcedTransport: function() {
        return this.forcedTransport
    },
    setServerInstanceAddressIgnored: function(e) {
        this.heavySetter("serverInstanceAddressIgnored", this.checkBool(e))
    },
    isServerInstanceAddressIgnored: function() {
        return this.serverInstanceAddressIgnored
    },
    setCookieHandlingRequired: function(e) {
        this.heavySetter("cookieHandlingRequired", this.checkBool(e))
    },
    isCookieHandlingRequired: function() {
        return this.cookieHandlingRequired
    },
    setEarlyWSOpenEnabled: function(e) {
        this.heavySetter("earlyWSOpenEnabled", this.checkBool(e))
    },
    isEarlyWSOpenEnabled: function() {
        return this.earlyWSOpenEnabled
    },
    setReverseHeartbeatInterval: function(e) {
        this.heavySetter("reverseHeartbeatInterval", this.checkPositiveNumber(e, !0))
    },
    getReverseHeartbeatInterval: function() {
        return this.reverseHeartbeatInterval
    },
    setHttpExtraHeaders: function(e) {
        if (!e) {
            this.heavySetter("httpExtraHeaders", null);
            return
        }
        var t = "";
        for (var n in e)
            t += n + `
` + e[n] + `
`;
        this.heavySetter("httpExtraHeaders", t)
    },
    getHttpExtraHeaders: function() {
        if (!this.httpExtraHeaders)
            return this.httpExtraHeaders;
        for (var e = {}, t = this.httpExtraHeaders.split(`
`), n = 0; n < t.length - 1; n += 2)
            e[t[n]] = t[n + 1];
        return e
    },
    setHttpExtraHeadersOnSessionCreationOnly: function(e) {
        this.heavySetter("httpExtraHeadersOnSessionCreationOnly", this.checkBool(e))
    },
    isHttpExtraHeadersOnSessionCreationOnly: function() {
        return this.httpExtraHeadersOnSessionCreationOnly
    },
    setSessionRecoveryTimeout: function(e) {
        this.heavySetter("sessionRecoveryTimeout", this.checkPositiveNumber(e, !0))
    },
    getSessionRecoveryTimeout: function() {
        return this.sessionRecoveryTimeout
    },
    hasHttpExtraHeaders: function(e) {
        if (this.httpExtraHeaders) {
            if (e)
                return !0
        } else
            return !1;
        return !this.httpExtraHeadersOnSessionCreationOnly
    },
    extractHttpExtraHeaders: function(e) {
        return !e && this.httpExtraHeadersOnSessionCreationOnly ? null : this.getHttpExtraHeaders()
    },
    setXDomainStreamingEnabled: function(e) {
        this.heavySetter("xDomainStreamingEnabled", this.checkBool(e))
    },
    isXDomainStreamingEnabled: function() {
        return this.xDomainStreamingEnabled
    },
    setCorsXHREnabled: function(e) {
        this.heavySetter("corsXHREnabled", this.checkBool(e))
    },
    isCorsXHREnabled: function() {
        return this.corsXHREnabled
    },
    setForceBindTimeout: function(e) {
        this.heavySetter("forceBindTimeout", this.checkPositiveNumber(e))
    },
    getForceBindTimeout: function() {
        return this.forceBindTimeout
    },
    setSwitchCheckTimeout: function(e) {
        this.heavySetter("switchCheckTimeout", this.checkPositiveNumber(e))
    },
    getSwitchCheckTimeout: function() {
        return this.switchCheckTimeout
    },
    setSpinFixTimeout: function(e) {
        this.heavySetter("spinFixTimeout", this.checkPositiveNumber(e))
    },
    getSpinFixTimeout: function() {
        return this.spinFixTimeout
    },
    setSpinFixEnabled: function(e) {
        this.heavySetter("spinFixTimeout", this._enabled === null ? null : this.checkBool(e))
    },
    getSpinFixEnabled: function() {
        return this.spinFixEnabled
    },
    installRemoteAdapterStatusObserver: function(e, t, n, i) {
        this.remoteAdapterStatusObserver = {
            metadataErrorCode: e,
            dataAdapterName: t,
            statusItemName: n,
            reconnectMaxDelay: i
        }
    }
};
ae.prototype.setContentLength = ae.prototype.setContentLength;
ae.prototype.getContentLength = ae.prototype.getContentLength;
ae.prototype.setIdleTimeout = ae.prototype.setIdleTimeout;
ae.prototype.getIdleTimeout = ae.prototype.getIdleTimeout;
ae.prototype.setKeepaliveInterval = ae.prototype.setKeepaliveInterval;
ae.prototype.getKeepaliveInterval = ae.prototype.getKeepaliveInterval;
ae.prototype.setRequestedMaxBandwidth = ae.prototype.setRequestedMaxBandwidth;
ae.prototype.getRequestedMaxBandwidth = ae.prototype.getRequestedMaxBandwidth;
ae.prototype.getRealMaxBandwidth = ae.prototype.getRealMaxBandwidth;
ae.prototype.setPollingInterval = ae.prototype.setPollingInterval;
ae.prototype.getPollingInterval = ae.prototype.getPollingInterval;
ae.prototype.setReconnectTimeout = ae.prototype.setReconnectTimeout;
ae.prototype.getReconnectTimeout = ae.prototype.getReconnectTimeout;
ae.prototype.setStalledTimeout = ae.prototype.setStalledTimeout;
ae.prototype.getStalledTimeout = ae.prototype.getStalledTimeout;
ae.prototype.setConnectTimeout = ae.prototype.setConnectTimeout;
ae.prototype.getConnectTimeout = ae.prototype.getConnectTimeout;
ae.prototype.setCurrentConnectTimeout = ae.prototype.setCurrentConnectTimeout;
ae.prototype.getCurrentConnectTimeout = ae.prototype.getCurrentConnectTimeout;
ae.prototype.setRetryDelay = ae.prototype.setRetryDelay;
ae.prototype.getRetryDelay = ae.prototype.getRetryDelay;
ae.prototype.setFirstRetryMaxDelay = ae.prototype.setFirstRetryMaxDelay;
ae.prototype.getFirstRetryMaxDelay = ae.prototype.getFirstRetryMaxDelay;
ae.prototype.setSlowingEnabled = ae.prototype.setSlowingEnabled;
ae.prototype.isSlowingEnabled = ae.prototype.isSlowingEnabled;
ae.prototype.setForcedTransport = ae.prototype.setForcedTransport;
ae.prototype.getForcedTransport = ae.prototype.getForcedTransport;
ae.prototype.setServerInstanceAddressIgnored = ae.prototype.setServerInstanceAddressIgnored;
ae.prototype.isServerInstanceAddressIgnored = ae.prototype.isServerInstanceAddressIgnored;
ae.prototype.setCookieHandlingRequired = ae.prototype.setCookieHandlingRequired;
ae.prototype.isCookieHandlingRequired = ae.prototype.isCookieHandlingRequired;
ae.prototype.setEarlyWSOpenEnabled = ae.prototype.setEarlyWSOpenEnabled;
ae.prototype.isEarlyWSOpenEnabled = ae.prototype.isEarlyWSOpenEnabled;
ae.prototype.setReverseHeartbeatInterval = ae.prototype.setReverseHeartbeatInterval;
ae.prototype.getReverseHeartbeatInterval = ae.prototype.getReverseHeartbeatInterval;
ae.prototype.setHttpExtraHeaders = ae.prototype.setHttpExtraHeaders;
ae.prototype.getHttpExtraHeaders = ae.prototype.getHttpExtraHeaders;
ae.prototype.setHttpExtraHeadersOnSessionCreationOnly = ae.prototype.setHttpExtraHeadersOnSessionCreationOnly;
ae.prototype.isHttpExtraHeadersOnSessionCreationOnly = ae.prototype.isHttpExtraHeadersOnSessionCreationOnly;
ae.prototype.setSessionRecoveryTimeout = ae.prototype.setSessionRecoveryTimeout;
ae.prototype.getSessionRecoveryTimeout = ae.prototype.getSessionRecoveryTimeout;
ae.prototype.setXDomainStreamingEnabled = ae.prototype.setXDomainStreamingEnabled;
ae.prototype.isXDomainStreamingEnabled = ae.prototype.isXDomainStreamingEnabled;
ae.prototype.setCorsXHREnabled = ae.prototype.setCorsXHREnabled;
ae.prototype.isCorsXHREnabled = ae.prototype.isCorsXHREnabled;
ae.prototype.setForceBindTimeout = ae.prototype.setForceBindTimeout;
ae.prototype.getForceBindTimeout = ae.prototype.getForceBindTimeout;
ae.prototype.setSwitchCheckTimeout = ae.prototype.setSwitchCheckTimeout;
ae.prototype.getSwitchCheckTimeout = ae.prototype.getSwitchCheckTimeout;
ae.prototype.setSpinFixTimeout = ae.prototype.setSpinFixTimeout;
ae.prototype.getSpinFixTimeout = ae.prototype.getSpinFixTimeout;
ae.prototype.setSpinFixEnabled = ae.prototype.setSpinFixEnabled;
ae.prototype.getSpinFixEnabled = ae.prototype.getSpinFixEnabled;
ae.prototype.setRetryTimeout = ae.prototype.setRetryDelay;
ae.prototype.getRetryTimeout = ae.prototype.getRetryDelay;
ae.prototype.setIdleMillis = ae.prototype.setIdleTimeout;
ae.prototype.getIdleMillis = ae.prototype.getIdleTimeout;
ae.prototype.setKeepaliveMillis = ae.prototype.setKeepaliveInterval;
ae.prototype.getKeepaliveMillis = ae.prototype.getKeepaliveInterval;
ae.prototype.setPollingMillis = ae.prototype.setPollingInterval;
ae.prototype.getPollingMillis = ae.prototype.getPollingInterval;
ae.prototype.setReverseHeartbeatMillis = ae.prototype.setReverseHeartbeatInterval;
ae.prototype.getReverseHeartbeatMillis = ae.prototype.getReverseHeartbeatInterval;
ot(ae, a1);
ot(ae, Lb, !0);
ot(ae, Bb, !0);
var ut = function() {
    var e = m.getLoggerProxy("weswit.test")
      , t = 0
      , n = {}
      , i = {
        VOID: n,
        getFailures: function() {
            return t
        },
        compareArrays: function(r, s, o) {
            if (r.length != s.length)
                return this.failInternal(),
                e.logError(m.resolve(497), r, s),
                !1;
            if (o) {
                for (var c = 0; c < r.length; c++)
                    if (r[c] != s[c])
                        return e.logError(m.resolve(500), r[c], s[c]),
                        this.failInternal(),
                        !1
            } else {
                for (var a = {}, c = 0; c < r.length; c++)
                    a[r[c]] = 1;
                for (var c = 0; c < s.length; c++)
                    if (a[s[c]])
                        a[s[c]]++;
                    else
                        return e.logError(m.resolve(498), s[c]),
                        this.failInternal(),
                        !1;
                for (var c in a)
                    if (a[c] == 1)
                        return e.logError(m.resolve(499), a[c]),
                        this.failInternal(),
                        !1
            }
            return !0
        },
        verifySuccess: function(r, s, o, a, c) {
            return this.verify(r, s, o, a, !1, c)
        },
        verifyException: function(r, s, o) {
            return this.verify(r, s, o, null, !0)
        },
        verifyNotNull: function(r) {
            return r === null ? (this.failInternal(),
            e.logError(m.resolve(501), r),
            !1) : !0
        },
        verifyValue: function(r, s, o) {
            var a = !1;
            if (o === !0)
                a = r === s;
            else if (o)
                a = o(r, s);
            else if (isNaN(r))
                a = r == s;
            else {
                var c = r && r.charAt ? r.charAt(0) : null
                  , l = s && s.charAt ? s.charAt(0) : null;
                c == "." || c == " " || c == "0" || l == "." || l == " " || l == "0" ? a = String(r) == String(s) : a = r == s
            }
            return a ? !0 : (this.failInternal(),
            e.logError(m.resolve(502), r, s),
            !1)
        },
        verifyDiffValue: function(r, s, o) {
            var a = !1;
            return o ? a = r !== s : a = r != s,
            a ? !0 : (this.failInternal(),
            e.logError(m.resolve(503), r, s),
            !1)
        },
        verifyOk: function(r) {
            return r ? !0 : (this.failInternal(),
            e.logError(m.resolve(504)),
            !1)
        },
        verifyNotOk: function(r) {
            return r ? (this.failInternal(),
            e.logError(m.resolve(505)),
            !1) : !0
        },
        fail: function() {
            return e.logError(m.resolve(506)),
            this.failInternal(),
            !1
        },
        failInternal: function() {
            t++
        },
        verify: function(r, s, o, a, c, l) {
            var u = !1
              , h = null
              , d = null;
            try {
                o !== n ? h = r[s].apply(r, o) : h = r[s]()
            } catch (p) {
                u = !0,
                d = p
            }
            var f = c ? "succes" : "failure"
              , g = c == u;
            return g ? !c && a !== n ? this.verifyValue(h, a, l) : !0 : (this.failInternal(),
            e.logError(m.resolve(507), f, "for", s, o, a, d),
            !1)
        }
    };
    return i.getFailures = i.getFailures,
    i.fail = i.fail,
    i.verifyNotOk = i.verifyNotOk,
    i.verifyOk = i.verifyOk,
    i.verifyDiffValue = i.verifyDiffValue,
    i.verifyNotNull = i.verifyNotNull,
    i.verifyValue = i.verifyValue,
    i.verifyException = i.verifyException,
    i.verifySuccess = i.verifySuccess,
    i.compareArrays = i.compareArrays,
    i
}()
  , _u = m.getLoggerProxy(G.PROTOCOL)
  , tb = "STREAMING_IN_PROGRESS"
  , nb = "bind_session"
  , mN = "create_session"
  , ib = "LS_cid=" + G.LS_CID + "&"
  , vN = new RegExp("^[a-z][a-z0-9-]+$")
  , _N = new RegExp("^((?:[a-z][a-z.0-9-]+).(?:[a-z][a-z-]+))(?![\\w.])")
  , yN = new RegExp("^((?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))(?![d])")
  , SN = new RegExp("^[a-f0-9:]+$")
  , no = {
    verifyServerAddress: function(e) {
        e = e.toLowerCase();
        var t = e.indexOf("http://") == 0 ? 7 : e.indexOf("https://") == 0 ? 8 : -1;
        if (t == -1)
            return "The given server address has not a valid scheme";
        var n = e.lastIndexOf(":");
        n = n > t ? n : e.length;
        var i = this.extractPort(e, e.indexOf("://"));
        if (i != null && isNaN(i.substring(1)))
            return "The given server address has not a valid port";
        var r = e.indexOf("/", t);
        if (r = r < n ? r : n,
        e.charAt(t) == "[") {
            var s = e.lastIndexOf("]")
              , o = e.substring(t + 1, s);
            if (!SN.test(o))
                return "The given server address is not a valid IPv6"
        } else {
            var o = e.substring(t, r);
            if (o.indexOf(".") > -1) {
                if (!_N.test(o) && !yN.test(o))
                    return "The given server address is not a valid URL"
            } else if (!vN.test(o))
                return "The given server address is not a valid machine name"
        }
        return !0
    },
    readUrl: function(e) {
        var t = {}
          , n = e.indexOf("://");
        n != -1 ? (t.schema = e.substring(0, n),
        e = e.substring(n + 3)) : t.schema = null;
        var i = e.indexOf("/");
        i != -1 ? (t.path = e.substring(i),
        e = e.substring(0, i)) : t.path = null;
        var r = this.extractPortStart(e);
        return r != -1 ? (t.port = e.substring(r),
        t.host = e.substring(0, r - 1)) : (t.port = null,
        t.host = e),
        t
    },
    writeUrl: function(e) {
        var t = e.host;
        return e.schema != null && (t = e.schema + "://" + t),
        e.port != null && (t += ":" + e.port),
        e.path != null && (t += e.path),
        t.substring(t.length - 1) != "/" && (t += "/"),
        t
    },
    extractPortStart: function(e) {
        var t = e.indexOf(":");
        return t <= -1 ? -1 : e.indexOf("]") > -1 ? (t = e.indexOf("]:"),
        t <= -1 ? -1 : t + 2) : t != e.lastIndexOf(":") ? -1 : t + 1
    },
    completeControlLink: function(e, t) {
        var n = this.readUrl(e)
          , i = this.readUrl(t)
          , r = {
            schema: i.schema != null ? i.schema : n.schema,
            host: i.host,
            port: i.port != null ? i.port : n.port,
            path: i.path
        };
        return this.writeUrl(r)
    },
    getPushCommand: function(e, t, n, i, r, s, o, a, c, l, u, h) {
        var d = u && vt.isBrowserDocument() && !Ke.hasDefaultDomain() ? "LS_domain=" + Ke.getDomain() + "&" : ""
          , f = "LS_phase=" + e + "&" + d + (a ? "LS_cause=" + a + "&" : "");
        if (r || s) {
            f += "LS_polling=true&";
            var g = 0
              , p = 0;
            s && (g = Number(n.pollingInterval),
            c != null && !isNaN(c) && (g += c),
            p = n.idleTimeout),
            isNaN(g) || (f += "LS_polling_millis=" + g + "&"),
            isNaN(p) || (f += "LS_idle_millis=" + p + "&")
        } else
            n.keepaliveInterval > 0 && (f += "LS_keepalive_millis=" + n.keepaliveInterval + "&"),
            n.reverseHeartbeatInterval > 0 && (f += "LS_inactivity_millis=" + n.reverseHeartbeatInterval + "&"),
            l && (f += "LS_content_length=" + n.contentLength + "&");
        if (r) {
            var x = "";
            n.requestedMaxBandwidth > 0 && (x += "LS_requested_max_bandwidth=" + n.requestedMaxBandwidth + "&"),
            i.adapterSet != null && (x += "LS_adapter_set=" + encodeURIComponent(i.adapterSet) + "&"),
            i.user != null && (x += "LS_user=" + encodeURIComponent(i.user) + "&");
            var w = f + ib + x;
            return o && (w += "LS_old_session=" + o + "&"),
            h && (w += "LS_ttl=unlimited&"),
            _u.logDebug(m.resolve(510), w),
            i.password != null && (w += "LS_password=" + encodeURIComponent(i.password) + "&"),
            w
        } else {
            ut.verifyOk(t) || _u.logError(m.resolve(508));
            var v = "LS_session=" + t + "&"
              , S = v + f;
            return _u.logDebug(m.resolve(509), S),
            S
        }
    },
    getRecoveryCommand: function(e, t, n, i, r, s, o) {
        var a = s && vt.isBrowserDocument() && !Ke.hasDefaultDomain() ? "LS_domain=" + Ke.getDomain() + "&" : ""
          , c = "LS_phase=" + e + "&" + a + (i ? "LS_cause=" + i + "&" : "");
        c += "LS_polling=true&";
        var l = 0;
        return r != null && !isNaN(r) && (l += r),
        c += "LS_polling_millis=" + l + "&",
        c += "LS_idle_millis=0&",
        n.requestedMaxBandwidth > 0 && (c += "LS_requested_max_bandwidth=" + n.requestedMaxBandwidth + "&"),
        c += "LS_session=" + t + "&",
        c += "LS_recovery_from=" + o + "&",
        _u.logDebug(m.resolve(511), c),
        c
    },
    getDestroyParams: function(e, t) {
        var n = {
            LS_op: "destroy",
            LS_session: e,
            LS_reqId: Ke.nextRequestId()
        };
        return t && (n.LS_cause = t),
        _u.logDebug(m.resolve(512)),
        n
    },
    getForceRebindParams: function(e, t) {
        var n = {
            LS_op: "force_rebind",
            LS_reqId: Ke.nextRequestId()
        };
        return e && (n.LS_cause = e),
        t != null && !isNaN(t) && (n.LS_polling_millis = t),
        _u.logDebug(m.resolve(513)),
        n
    },
    getLogRequestParams: function(e, t, n) {
        return t.LS_build = n,
        t.LS_phase = e,
        t
    },
    getConstraintParams: function(e) {
        return {
            LS_op: "constrain",
            LS_requested_max_bandwidth: e.requestedMaxBandwidth > 0 ? e.requestedMaxBandwidth : "unlimited",
            LS_reqId: Ke.nextRequestId()
        }
    },
    getPushPath: function(e, t, n) {
        var i;
        return t || n != null && n.indexOf(".txt") == 0 || n == "" ? e ? i = this.getCreateSessionExtraPath() + mN + n : i = nb + n : e ? i = this.getCreateSessionExtraPath() + tb : i = tb,
        i
    },
    getRecoveryPath: function(e) {
        return nb + e
    },
    getCreateSessionExtraPath: function() {
        return ""
    },
    setCID: function(e) {
        ib = e
    },
    extractPort: function(e, t) {
        var n = e.indexOf(":", t + 1);
        if (n <= -1)
            return null;
        if (e.indexOf("]") > -1) {
            if (n = e.indexOf("]:"),
            n <= -1)
                return null;
            n += 1
        } else if (n != e.lastIndexOf(":"))
            return null;
        var i = e.indexOf("/", t + 3);
        return i > -1 ? e.substring(n, i) : e.substring(n)
    }
}
  , $g = {
    serverAddress: "serverAddress",
    adapterSet: "adapterSet",
    user: "user",
    password: "password",
    serverInstanceAddress: "serverInstanceAddress",
    serverSocketName: "serverSocketName",
    sessionId: "sessionId",
    clientIp: "clientIp"
};
$g = Ke.getReverse($g);
var bN = {
    password: !0
}
  , Ub = !vt.isBrowser() || location.protocol != "http:" && location.protocol != "https:" ? null : location.protocol + "//" + location.hostname + (location.port ? ":" + location.port : "") + "/"
  , cn = function() {
    this.serverAddress = Ub,
    this.adapterSet = null,
    this.user = null,
    this.password = null,
    this.serverInstanceAddress = null,
    this.serverSocketName = null,
    this.sessionId = null,
    this.doNotLogValueList = bN,
    this.varNames = $g,
    this._callSuperConstructor(cn, arguments),
    this.constr = "ConnectionDetails"
};
cn.prototype = {
    setServerAddress: function(e) {
        if (e === null)
            e = Ub;
        else {
            e.substr(e.length - 1) != "/" && (e += "/");
            var t = no.verifyServerAddress(e);
            if (t !== !0)
                throw new ct(t)
        }
        this.heavySetter("serverAddress", e)
    },
    getServerAddress: function() {
        return this.serverAddress
    },
    setAdapterSet: function(e) {
        this.heavySetter("adapterSet", e)
    },
    getAdapterSet: function() {
        return this.adapterSet
    },
    setUser: function(e) {
        this.heavySetter("user", e)
    },
    getUser: function() {
        return this.user
    },
    setPassword: function(e) {
        this.heavySetter("password", e)
    },
    getServerInstanceAddress: function() {
        return this.serverInstanceAddress
    },
    getServerSocketName: function() {
        return this.serverSocketName
    },
    getSessionId: function() {
        return this.sessionId
    },
    getClientIp: function() {
        return this.clientIp
    }
};
cn.prototype.setServerAddress = cn.prototype.setServerAddress;
cn.prototype.getServerAddress = cn.prototype.getServerAddress;
cn.prototype.setAdapterSet = cn.prototype.setAdapterSet;
cn.prototype.getAdapterSet = cn.prototype.getAdapterSet;
cn.prototype.setUser = cn.prototype.setUser;
cn.prototype.getUser = cn.prototype.getUser;
cn.prototype.setPassword = cn.prototype.setPassword;
cn.prototype.getServerInstanceAddress = cn.prototype.getServerInstanceAddress;
cn.prototype.getServerSocketName = cn.prototype.getServerSocketName;
cn.prototype.getSessionId = cn.prototype.getSessionId;
cn.prototype.getClientIp = cn.prototype.getClientIp;
ot(cn, a1);
var Hb = {
    createCaller: function(e, t) {
        return t.wantsResponse ? t.addSessionPhase ? function() {
            try {
                var n = this.target[e].apply(this.target, [this.sessionPhase].concat(Ke.argumentsToArray(arguments)));
                return Promise.resolve(n)
            } catch (i) {
                return Promise.reject(i)
            }
        }
        : function() {
            try {
                var n = this.target[e].apply(this.target, arguments);
                return Promise.resolve(n)
            } catch (i) {
                return Promise.reject(i)
            }
        }
        : t.addSessionPhase ? function() {
            try {
                this.target[e].apply(this.target, [this.sessionPhase].concat(Ke.argumentsToArray(arguments)))
            } catch (n) {
                console.error(n)
            }
        }
        : function() {
            try {
                this.target[e].apply(this.target, arguments)
            } catch (n) {
                console.error(n)
            }
        }
    }
};
function Pi(e, t, n) {
    this.wantsResponse = e,
    this.addSessionPhase = t,
    this.responseTimeout = n || !1
}
var P3 = !0
  , Gb = !1
  , Zg = !0
  , e7 = !1;
Pi.simple = new Pi(Gb,e7);
Pi.simpleWithResponse = new Pi(P3,e7);
Pi.simpleWithResponseAndTimeout = new Pi(P3,e7,2e3);
Pi.session = new Pi(Gb,Zg);
Pi.sessionWithResponse = new Pi(P3,Zg);
Pi.sessionWithResponseAndTimeout = new Pi(P3,Zg,4e3);
var Cg = Pi.simple
  , yu = Pi.session
  , xN = Pi.simpleWithResponseAndTimeout
  , wN = Pi.sessionWithResponse
  , Wg = {
    onClientConfigurationChange: Cg,
    callConnect: yu,
    callDisconnect: yu,
    pong: xN,
    subscribeTable: wN,
    unsubscribeTable: yu,
    updateSubscriptionParams: yu,
    forwardMessage: yu,
    forwardLog: Cg,
    clientDeath: Cg,
    callDisconnectAndReconnect: yu
}
  , rb = m.getLoggerProxy(G.SHARING)
  , ql = function(e) {
    this.client = e,
    this.sessionAlive = !1,
    this.sessionPhase = -1,
    this.engineId = null,
    this.engineType = "local"
};
ql.methods = Wg;
ql.prototype = {
    setPushPageHandler: function(e) {
        this.target = e
    },
    setEngineId: function(e) {
        rb.logInfo(m.resolve(514), this.engineType, e),
        this.engineId = e
    },
    getEngineId: function() {
        return this.engineId
    },
    dispose: function() {
        this.client = null
    },
    setSessionPhase: function(e) {
        this.sessionPhase = e
    },
    isSessionAlive: function() {
        return this.sessionAlive
    },
    onEngineConfigurationChange: function(e, t, n) {
        var i = e == "ConnectionDetails" ? this.client._connection : e == "ConnectionOptions" ? this.client._policy : this.client._configuration;
        i.simpleSetter(t, n)
    },
    onSessionEnd: function(e) {
        this.sessionPhase = e,
        this.sessionAlive && this.sessionEnd(e)
    },
    sessionEnd: function(e) {
        this.sessionAlive = !1,
        this.client.sessionEnd()
    },
    onSessionStart: function(e) {
        this.sessionPhase = e,
        this.sessionAlive = !0,
        this.client.sessionStart()
    },
    onEngineDeath: function(e, t) {
        rb.logInfo(m.resolve(515), this.engineId + " is dead"),
        this.client && (this.sessionEnd(-1),
        this.client.engineMourningRoom(e, t))
    },
    checkDeath: function() {
        var e = this;
        this.pong().then(function() {}, function() {
            e.client && e.onEngineDeath()
        })
    },
    onEngineDying: function() {
        this.checkDeath(),
        be.addTimedTask(this.checkDeath, 1e3, this)
    },
    onServerError: function(e, t) {
        this.client.serverError(e, t)
    },
    onStatusChange: function(e) {
        this.client.cacheEngineStatus(e)
    },
    onSubscription: function(e, t, n, i, r) {
        this.client.getTablesHandler().subscriptionEvent(e, t, n, i, r)
    },
    onSubscriptionError: function(e, t, n) {
        this.client.getTablesHandler().errorEvent(e, t, n)
    },
    onUnsubscription: function(e) {
        this.client.getTablesHandler().unsubscriptionEvent(e)
    },
    onEndOfSnapshot: function(e, t) {
        this.client.getTablesHandler().onEndOfSnapshotEvent(e, t)
    },
    onUpdate: function(e, t) {
        this.client.getTablesHandler().updatePage(e, t)
    },
    onLostUpdates: function(e, t, n) {
        this.client.getTablesHandler().onLostUpdatesEvent(e, t, n)
    },
    onClearSnapshot: function(e, t) {
        this.client.getTablesHandler().onClearSnapshotEvent(e, t)
    },
    onMessageDiscarded: function(e) {
        this.client.getMessageProxy().messageDiscarded(e)
    },
    onMessageDenied: function(e, t, n) {
        this.client.getMessageProxy().messageDenied(e, t, n)
    },
    onMessageError: function(e, t, n) {
        this.client.getMessageProxy().messageError(e, t, n)
    },
    onMessageComplete: function(e) {
        this.client.getMessageProxy().messageComplete(e)
    },
    onMessageOnNetwork: function(e) {
        this.client.getMessageProxy().messageOnNetwork(e)
    },
    ping: function() {
        if (this.client === null)
            throw "net";
        return !0
    },
    onServerKeepalive: function() {
        this.client.onServerKeepalive()
    },
    onSubscriptionReconf: function(e, t) {
        this.client.getTablesHandler().doSubscriptionReconf(e, t)
    }
};
for (o3 in Wg)
    ql.prototype[o3] = Hb.createCaller(o3, Wg[o3]);
var o3, CN = "^https?://(?:[a-z][a-z0-9-]+.)*", EN = "(?:/|$|:)", or = function(e, t, n, i, r, s) {
    this.setPath(e),
    this.setFile(t),
    this.setData(n),
    this.setMethod(i),
    this.setCookieFlag(r),
    this.setExtraHeaders(s)
};
or._GET = "GET";
or._POST = "POST";
or.prototype = {
    toString: function() {
        return ["[", this._path, this._file, this._data, this._method, "]"].join("|")
    },
    setPath: function(e) {
        for (; e && e.substring(e.length - 1) == "/"; )
            e = e.substring(0, e.length - 1);
        this._path = e
    },
    setFile: function(e) {
        for (; e && e.substring(0, 1) == "/"; )
            e = e.substring(1);
        this._file = e
    },
    setMethod: function(e) {
        this._method = e || or._POST
    },
    setCookieFlag: function(e) {
        this.cookieFlag = e || !1
    },
    setExtraHeaders: function(e) {
        this.extraHeaders = e || null
    },
    setData: function(e) {
        this._data = e
    },
    extendData: function(e) {
        this._data ? this.containsData(e) || (this._data += e) : this.setData(e)
    },
    containsData: function(e) {
        return this._data && this._data.indexOf(e) > -1
    },
    getPath: function() {
        return this._path
    },
    getFile: function() {
        return this._file
    },
    getUrl: function() {
        return this._file ? this._path + "/" + this._file : this._path
    },
    getCookieFlag: function() {
        return this.cookieFlag
    },
    getExtraHeaders: function(e) {
        return this.extraHeaders
    },
    getData: function() {
        return this._data
    },
    getUrlWithParams: function(e) {
        return this._data ? this.getUrl() + "?" + this._data : this.getUrl()
    },
    getMethod: function() {
        return this._method
    },
    clone: function() {
        return new or(this._path,this._file,this._data,this._method,this.cookieFlag,this.extraHeaders)
    },
    isRelativeRequest: function() {
        return !(this._path.indexOf("http://") == 0 || this._path.indexOf("https://") == 0 || this._path.indexOf("file:///") == 0)
    },
    isSameDomain: function(e, t) {
        if (!vt.isBrowser())
            return !1;
        if (this.isRelativeRequest())
            return vt.isWebWorker() ? location.hostname == e : Ke.getDomain() == e;
        if (t) {
            if (!this.isSameProtocol(t))
                return !1;
            if (t == "file:")
                return e == ""
        }
        e = e.replace(".", ".");
        var n = new RegExp(CN + e + EN,"i");
        return n.test(this._path)
    },
    isSameProtocol: function(e) {
        return !vt.isBrowser() || e.indexOf(":") != e.length - 1 ? !1 : this.isRelativeRequest() ? location.protocol == e : this._path.indexOf(e) == 0
    },
    isCrossSite: function() {
        if (!vt.isBrowser())
            return !0;
        var e = vt.isWebWorker() ? location.hostname : Ke.getDomain();
        return !this.isSameDomain(e, location.protocol)
    },
    isCrossProtocol: function() {
        return vt.isBrowser() ? !this.isSameProtocol(location.protocol) : !0
    }
};
or.aboutBlank = new or("about:blank");
var TN = m.getLoggerProxy(G.REQUESTS);
function je(e, t, n, i, r) {
    this.request = e,
    this.related = t,
    this.relatedKey = i,
    this._type = n,
    this.retryingOrHost = r
}
je.ADD = 1;
je.REMOVE = 2;
je.CONSTRAINT = 3;
je.MESSAGE = 4;
je.LOG = 5;
je.DESTROY = 6;
je.FORCE_REBIND = 7;
je.HEARTBEAT = 8;
je.CHANGE_SUB = 9;
je.MPN = 10;
je.prototype = {
    toString: function() {
        var e = TN.isDebugLogEnabled() ? JSON.stringify(this.request) : this.request;
        return ["[", "ControlRequest", this.relatedKey, this._type, this.retryingOrHost, e, "]"].join("|")
    },
    getBridge: function() {
        return this.related
    },
    getKey: function() {
        return this.relatedKey
    },
    getType: function() {
        return this._type
    },
    getRequest: function() {
        return this.request
    }
};
var ON = "msg"
  , MN = "send_log"
  , PN = "control"
  , kN = "heartbeat"
  , AN = "LS_message"
  , IN = "LS_unq";
function RN(e) {
    return e == je.MESSAGE ? ON : e == je.LOG ? MN : e == je.HEARTBEAT ? kN : PN
}
var t7 = function() {};
t7.prototype = {
    toString: function() {
        return "[Encoder]"
    },
    initRequest: function(e, t, n) {
        var i = new or
          , r = RN(e.getBatchType())
          , s = this.getExt();
        return i.setFile(r + s),
        i.setMethod(or._POST),
        i.setCookieFlag(t),
        i.setExtraHeaders(n),
        i
    },
    encode: function(e, t, n) {
        for (var i = n ? "" : `\r
`; e.getLength() > 0; ) {
            var r = e.firstRequest()
              , s = r.getBridge()
              , o = r.getType();
            if (s && s.verifySuccess())
                s.notifyAborted(),
                e.shift();
            else {
                var a = r.getRequest();
                return o == je.MESSAGE ? i + this.encodeMessageRequest(a, s, t) : o == je.DESTROY ? i + this.encodeDestroyRequest(a, s, t) : o == je.HEARTBEAT ? i + this.encodeHeartbeatRequest(a, s, t) : o == je.LOG ? i + this.encodeLogRequest(a, s, t) : i + this.encodeControlRequest(a, s, t)
            }
        }
        return null
    },
    expand: function(e, t) {
        var n = "";
        if (e)
            for (var i in e)
                i !== t && (n += i + "=" + e[i] + "&");
        return n
    },
    encodeRequest: function(e, t, n) {
        var i = this.expand(e);
        return i += this.expand(t),
        i
    },
    encodeUnqRequest: function(e, t, n, i) {
        var r = this.expand(e, n);
        r += this.expand(t, n),
        e[n] ? r += n + "=" + e[n] : t && (r += n + "=" + t[n]);
        var s = r.length;
        return IN + "=" + s + "&" + r
    },
    wrapUp: function(e) {
        return e || `
`
    },
    getExt: function() {
        return ".txt?LS_protocol=" + G.TLCP_VERSION
    },
    getFixedOverhead: function(e) {
        return 0
    },
    getInvisibleOverhead: function(e) {
        return 2
    },
    encodeControlRequest: function(e, t, n, i) {
        return this.encodeRequest(e, i, n)
    },
    encodeDestroyRequest: function(e, t, n, i) {
        return this.encodeRequest(e, i, n)
    },
    encodeHeartbeatRequest: function(e, t, n, i) {
        return this.encodeRequest(e, i, n)
    },
    encodeLogRequest: function(e, t, n, i) {
        return this.encodeRequest(e, i, n)
    },
    encodeMessageRequest: function(e, t, n, i) {
        return this.encodeUnqRequest(e, i, AN, n)
    }
};
var sb = 1
  , Bl = {
    encodeMessageRequest: "encodeMessageRequest",
    encodeControlRequest: "encodeControlRequest",
    encodeDestroyRequest: "encodeDestroyRequest",
    encodeHeartbeatRequest: "encodeHeartbeatRequest",
    encodeLogRequest: "encodeLogRequest"
};
Bl = Ke.getReverse(Bl);
var Pa = function() {};
Pa.prototype = {
    encodeMessageRequest: function(e, t, n, i) {
        return i = Ke.extendObj(i, {
            LS_session: n
        }),
        this._callSuperMethod(Pa, Bl.encodeMessageRequest, [e, t, n, i])
    },
    encodeControlRequest: function(e, t, n, i) {
        return i = Ke.extendObj(i, {
            LS_session: n
        }),
        this._callSuperMethod(Pa, Bl.encodeControlRequest, [e, t, n, i])
    },
    encodeDestroyRequest: function(e, t, n, i) {
        return this._callSuperMethod(Pa, Bl.encodeDestroyRequest, [e, t, n, i])
    },
    encodeHeartbeatRequest: function(e, t, n, i) {
        return n && (i = Ke.extendObj(i, {
            LS_session: n
        })),
        i = Ke.extendObj(i, {
            LS_unique: sb++
        }),
        this._callSuperMethod(Pa, Bl.encodeHeartbeatRequest, [e, t, n, i])
    },
    encodeLogRequest: function(e, t, n, i) {
        return n && (i = Ke.extendObj(i, {
            LS_session: n
        })),
        i = Ke.extendObj(i, {
            LS_unique: sb++
        }),
        this._callSuperMethod(Pa, Bl.encodeLogRequest, [e, t, n, i])
    },
    expand: function(e, t) {
        var n = "";
        if (e)
            for (var i in e)
                i !== t ? n += i + "=" + e[i] + "&" : n += i + "=" + encodeURIComponent(e[i]) + "&";
        return n
    },
    encodeUnqRequest: function(e, t, n) {
        var i = this.expand(e, n);
        return i += this.expand(t, n),
        i
    }
};
ot(Pa, t7);
var k3 = {
    NodeWS: null,
    NodeXHR: null,
    getGlobalCookiesForNode: function() {},
    addGlobalCookiesForNode: function() {}
};
function DN() {
    return !1
}
function NN() {
    return !0
}
var FN = new Pa
  , Cn = function() {
    for (var e in {
        _load: !0
    })
        this._loadName = e;
    this.constr = Cn
};
Cn.attachPublicStaticMethods = function(e, t) {
    for (var n in t)
        t[n] === !0 ? e[n] = NN : t[n] === !1 ? e[n] = DN : e[n] = t[n]
}
;
Cn.attachPublicStaticMethods(Cn, {
    isAvailable: !1,
    isCrossSite: !1,
    isCrossProtocol: !1,
    areCookiesGuaranteed: !1,
    attachEngineId: !1,
    isStreamEnabled: !1,
    canUseCustomHeaders: !1
});
Cn.prototype = {
    _close: function() {},
    sessionLoad: function(e, t, n, i, r, s) {
        return this._load(e, t, n, i, r)
    },
    _load: function(e, t, n, i, r) {
        return !1
    },
    getEncoder: function() {
        return FN
    }
};
Cn.getGlobalCookiesForNode = k3.getGlobalCookiesForNode;
Cn.addGlobalCookiesForNode = k3.addGlobalCookiesForNode;
var Ud = m.getLoggerProxy("assertions")
  , jt = {
    assert: function(e, t) {
        e || this.fail(t)
    },
    assertNotNull: function(e, t) {
        e == null && this.fail(t)
    },
    assertNull: function(e, t) {
        e != null && this.fail(t)
    },
    assertEquals: function(e, t, n) {
        e !== t && this.fail(n + ": Expected " + e + " but found " + t)
    },
    implies: function(e, t, n) {
        this.assert(!e || t, n)
    },
    fail: function(e) {
        e != null && Ud.logError(e),
        ut.fail()
    },
    verifyOk: function(e, t) {
        ut.verifyOk(e) || t != null && Ud.logError(t)
    },
    verifyNotOk: function(e, t) {
        ut.verifyNotOk(e) || t != null && Ud.logError(t)
    },
    verifyValue: function(e, t, n) {
        ut.verifyValue(e, t, null) || n != null && Ud.logError(n)
    },
    verifyDiffValue: function(e, t, n) {
        ut.verifyDiffValue(e, t, null) || n != null && Ud.logError(n)
    }
}
  , Vb = function(e) {
    this.lastMessageListener = -1,
    this.pendingMessageListeners = {},
    this.pendingMessages = {},
    this.pendingMessagesOnNetwork = {},
    this.pendingMLCount = 0,
    this.engineHandler = e,
    this.queuedMessages = new t1
};
Vb.prototype = {
    switchEngineHandler: function(e) {
        this.engineHandler = e
    },
    getMessageListenerProxy: function(e, t) {
        return this.lastMessageListener++,
        this.pendingMessageListeners[this.lastMessageListener] = t,
        this.pendingMessages[this.lastMessageListener] = e,
        this.pendingMessagesOnNetwork[this.lastMessageListener] = !1,
        this.pendingMLCount++,
        this.lastMessageListener
    },
    getListener: function(e) {
        return this.pendingMessageListeners[e]
    },
    getOriginalMessage: function(e) {
        return this.pendingMessages[e]
    },
    wasSentOnNetwork: function(e) {
        return this.pendingMessagesOnNetwork[e]
    },
    cleanMessageListeners: function() {
        this.clearQueuedMessages();
        var e = [];
        for (var t in this.pendingMessageListeners)
            e.push(t);
        e.sort(function(n, i) {
            return n - i
        });
        for (var t = 0; t < e.length; t++)
            this.messageAbort(e[t]);
        jt.verifyValue(this.pendingMLCount, 0, "Unexpected pending messages"),
        this.lastMessageListener = -1,
        this.pendingMessageListeners = {},
        this.pendingMessages = {},
        this.pendingMessagesOnNetwork = {},
        this.pendingMLCount = 0
    },
    clean: function(e) {
        delete this.pendingMessageListeners[e],
        delete this.pendingMessages[e],
        delete this.pendingMessagesOnNetwork[e],
        this.pendingMLCount--
    },
    messageOnNetwork: function(e) {
        var t = this.getListener(e);
        t && (this.pendingMessagesOnNetwork[e] = !0)
    },
    enqueueMessage: function(e, t, n, i) {
        this.queuedMessages.add({
            msg: e,
            sequence: t,
            listener: n,
            timeout: i
        })
    },
    clearQueuedMessages: function() {
        var e = this;
        this.queuedMessages.forEach(function(t) {
            e.fireEvent("onAbort", t.listener, [t.msg, !1])
        }),
        this.queuedMessages.clean()
    },
    handleAllWaitingMessages: function() {
        var e = this;
        this.queuedMessages.forEach(function(t) {
            e.forwardMessage(t.msg, t.sequence, t.listener, t.timeout)
        }),
        this.queuedMessages.clean()
    },
    forwardMessage: function(e, t, n, i) {
        var r = null;
        n && (r = this.getMessageListenerProxy(e, n)),
        this.engineHandler.forwardMessage(e, t, r, i)
    },
    fireEvent: function(e, t, n) {
        !t || !t[e] || be.addTimedTask(t[e], 0, t, n)
    },
    messageComplete: function(e) {
        var t = this.getListener(e);
        this.fireEvent("onProcessed", t, [this.getOriginalMessage(e)]),
        this.clean(e)
    },
    messageError: function(e, t, n) {
        var i = this.getListener(e);
        t != 32 && t != 33 && this.fireEvent("onError", i, [this.getOriginalMessage(e)]),
        this.clean(e)
    },
    messageDenied: function(e, t, n) {
        var i = this.getListener(e);
        this.fireEvent("onDeny", i, [this.getOriginalMessage(e), t, n]),
        this.clean(e)
    },
    messageDiscarded: function(e) {
        var t = this.getListener(e);
        this.fireEvent("onDiscarded", t, [this.getOriginalMessage(e)]),
        this.clean(e)
    },
    messageAbort: function(e) {
        var t = this.getListener(e);
        this.fireEvent("onAbort", t, [this.getOriginalMessage(e), this.wasSentOnNetwork(e)]),
        this.clean(e)
    }
};
function LN(e, t) {
    var n = t ? e : [];
    n.changedFields = [],
    t || (n[0] = parseInt(e[0]),
    n[1] = parseInt(e[1]));
    for (var i = 2, r = e.length; i < r; i++)
        e[i] ? e[i].length == -1 ? n[i] = G.UNCHANGED : (t || (n[i] = e[i].toString()),
        n.changedFields.push(i - 1)) : (t || (e[i] === "" ? n[i] = "" : n[i] = null),
        n.changedFields.push(i - 1));
    return n
}
var pi = m.getLoggerProxy(G.SUBSCRIPTIONS)
  , $b = function(e) {
    this.nextId = 0,
    this.tableInfosFromId = {},
    this.tableIdsFromNum = {},
    this.generationNumber = 1,
    this.promisesFromId = {},
    this.promiseQueuesFromId = {},
    this.eh = null,
    this.policyBean = e,
    this.controlRequestTimeout = 4e3,
    this.phase = 0
};
$b.prototype = {
    toString: function() {
        return "[SubscriptionsHandler]"
    },
    setControlRequestTimeout: function(e) {
        this.controlRequestTimeout = e
    },
    switchEngineHandler: function(e) {
        this.eh = e
    },
    getAllTables: function() {
        return this.tableInfosFromId
    },
    addATable: function(e) {
        var t = ++this.nextId;
        pi.logInfo(m.resolve(516), e),
        e.onAdd(t, ++this.generationNumber, this),
        this.tableInfosFromId[t] = e,
        this.passTableToEngine(e)
    },
    removeATable: function(e) {
        if (this.eh && this.eh.isSessionAlive()) {
            var t = e.getTableNumber();
            (e.isSubscribing() || e.isPushing()) && t && (this.eh.unsubscribeTable(t),
            delete this.tableIdsFromNum[t])
        }
        pi.logInfo(m.resolve(517), e);
        var n = e.getSubscriptionId();
        return e.onRemove(),
        delete this.tableInfosFromId[n],
        e
    },
    updateSubscriptionParams: function(e, t) {
        if (!(!this.eh || !this.eh.isSessionAlive() || !e.isActive())) {
            jt.verifyOk(e.isActive(), "Inactive subscription");
            var n = e.getSubscriptionId();
            if (this.promisesFromId[n]) {
                pi.logDebug(m.resolve(518), e);
                var i = this;
                this.enqueueToPromise(n, function(s) {
                    pi.logDebug(m.resolve(519), e),
                    i.eh.updateSubscriptionParams(s, t)
                })
            } else {
                pi.logDebug(m.resolve(520), e);
                var r = e.getTableNumber();
                this.eh.updateSubscriptionParams(r, t)
            }
        }
    },
    passTableToEngine: function(e) {
        if (!(!this.eh || !this.eh.isSessionAlive()) && e.isPaused()) {
            var t = e.getSubscriptionId();
            pi.logDebug(m.resolve(521));
            var n = this.eh.subscribeTable(e.getRequestParams());
            this.promisesFromId[t] ? pi.logDebug(m.resolve(522), t) : (jt.verifyNotOk(this.promisesFromId[t], "Promise unexpected (1)"),
            jt.verifyNotOk(this.promiseQueuesFromId[t], "Promise unexpected (2)")),
            this.promisesFromId[t] = n,
            this.promiseQueuesFromId[t] = 0,
            e.onSubmission(),
            pi.logDebug(m.resolve(523), e);
            var i = this;
            this.enqueueToPromise(t, function(r) {
                pi.logDebug(m.resolve(524), e),
                i.tableInfosFromId[t] ? (e.onTableNumber(r),
                i.tableIdsFromNum[r] = t) : i.eh && i.eh.unsubscribeTable(r)
            })
        }
    },
    enqueueToPromise: function(e, t) {
        jt.verifyOk(this.promisesFromId[e], "Promise not found (1)"),
        this.promiseQueuesFromId[e] === 0 || jt.verifyOk(this.promiseQueuesFromId[e], "Promise not found (2)");
        var n = this.promisesFromId[e];
        this.promiseQueuesFromId[e]++;
        var i = this
          , r = this.phase;
        n.then(function(s) {
            if (i.promisesFromId[e] != n) {
                pi.logDebug(m.resolve(525), e);
                return
            }
            jt.verifyOk(i.promisesFromId[e], "Promise not found (3)"),
            jt.verifyOk(i.promiseQueuesFromId[e], "Promise not found (4)"),
            i.promiseQueuesFromId[e] > 1 ? i.promiseQueuesFromId[e]-- : (delete i.promisesFromId[e],
            delete i.promiseQueuesFromId[e]),
            s != null && r == i.phase && t(s)
        }, function() {
            if (i.promisesFromId[e] != n) {
                pi.logDebug(m.resolve(526), e);
                return
            }
            delete i.promisesFromId[e],
            delete i.promiseQueuesFromId[e]
        })
    },
    handleAllWaitingTables: function() {
        pi.logDebug(m.resolve(527));
        for (var e in this.tableInfosFromId)
            this.passTableToEngine(this.tableInfosFromId[e])
    },
    pauseTable: function(e) {
        jt.verifyNotOk(e.isOff(), "Table removed"),
        pi.logDebug(m.resolve(528), e),
        delete this.tableIdsFromNum[e.getTableNumber()],
        e.onPause(),
        e.isSubTable() && delete this.tableInfosFromId[e.getSubscriptionId()]
    },
    pauseAllTables: function() {
        pi.logDebug(m.resolve(529));
        for (var e in this.tableInfosFromId)
            this.pauseTable(this.tableInfosFromId[e]);
        this.tableIdsFromNum = {},
        this.phase++
    },
    callTableByNum: function(e, t) {
        var n = this.tableIdsFromNum[e];
        if (n) {
            var i = this.tableInfosFromId[n];
            if (this.promisesFromId[n]) {
                pi.logDebug(m.resolve(530), i);
                var r = this;
                this.enqueueToPromise(n, function(c) {
                    if (pi.logDebug(m.resolve(531), l),
                    jt.verifyValue(c, e, "Wrong table number"),
                    r.tableIdsFromNum[e] == n) {
                        var l = r.tableInfosFromId[n];
                        l && t.apply(l)
                    }
                })
            } else
                i && t.apply(i)
        } else {
            pi.logDebug(m.resolve(533), e);
            var r = this
              , s = 0;
            for (var o in this.promisesFromId) {
                var a = this.tableInfosFromId[o];
                a && (a.getTableNumber() ? jt.verifyDiffValue(a.getTableNumber(), e, "Unexpected table number") : (function(l) {
                    r.enqueueToPromise(l, function(u) {
                        if (u == e && (pi.logDebug(m.resolve(534), e),
                        r.tableIdsFromNum[e] == l)) {
                            var h = r.tableInfosFromId[l];
                            h && t.apply(h)
                        }
                    })
                }(o),
                s++))
            }
            pi.logDebug(m.resolve(535), s)
        }
    },
    updatePage: function(e, t) {
        var n = e[0];
        this.callTableByNum(n, function() {
            this.update(LN(e, !0), t, !1)
        })
    },
    onLostUpdatesEvent: function(e, t, n) {
        this.callTableByNum(e, function() {
            this.lostUpdates(t, n)
        })
    },
    onEndOfSnapshotEvent: function(e, t) {
        this.callTableByNum(e, function() {
            this.endOfSnapshot(t)
        })
    },
    onClearSnapshotEvent: function(e, t) {
        this.callTableByNum(e, function() {
            this.clearSnapshot(t)
        })
    },
    errorEvent: function(e, t, n) {
        this.callTableByNum(e, function() {
            this.serverDeny(t, n)
        })
    },
    subscriptionEvent: function(e, t, n, i, r) {
        this.callTableByNum(e, function() {
            this.onStartPush(t, n, i, r)
        })
    },
    unsubscriptionEvent: function(e) {
        this.callTableByNum(e, function() {
            this.onStopPush()
        })
    },
    doSubscriptionReconf: function(e, t) {
        this.callTableByNum(e, function() {
            this.configure(t)
        })
    }
};
var Ru = function() {
    var e = function() {
        this.initDispatcher()
    };
    e.prototype = {
        initDispatcher: function() {
            this.theListeners = new t,
            this.synchEvents = !1
        },
        addListener: function(n) {
            if (n && !this.theListeners.contains(n)) {
                var i = {
                    handler: n,
                    listening: !0
                };
                this.theListeners.add(i),
                this.dispatchToOneListener("onListenStart", [this], i, !0)
            }
        },
        removeListener: function(n) {
            if (n) {
                var i = this.theListeners.remove(n);
                i && this.dispatchToOneListener("onListenEnd", [this], i, !0)
            }
        },
        getListeners: function() {
            return this.theListeners.asArray()
        },
        useSynchEvents: function(n) {
            this.synchEvents = n === !0
        },
        dispatchToOneListener: function(n, i, r, s) {
            this.synchEvents ? this.dispatchToOneListenerExecution(n, i, r, !0) : be.addTimedTask(this.dispatchToOneListenerExecution, 0, this, [n, i, r, s])
        },
        dispatchToOneListenerExecution: function(n, i, r, s) {
            if (r && r.handler[n] && (s || r.listening))
                try {
                    i ? r.handler[n].apply(r.handler, i) : r.handler[n].apply(r.handler)
                } catch {}
        },
        dispatchEvent: function(n, i) {
            var r = this;
            this.theListeners.forEach(function(s) {
                r.dispatchToOneListener(n, i, s, !1)
            })
        }
    },
    e.prototype.initDispatcher = e.prototype.initDispatcher,
    e.prototype.addListener = e.prototype.addListener,
    e.prototype.removeListener = e.prototype.removeListener,
    e.prototype.getListeners = e.prototype.getListeners,
    e.prototype.useSynchEvents = e.prototype.useSynchEvents,
    e.prototype.dispatchEvent = e.prototype.dispatchEvent;
    var t = function() {
        this._callSuperConstructor(t)
    };
    return t.prototype = {
        remove: function(n) {
            var i = this.find(n);
            if (i < 0)
                return !1;
            var r = this.data[i];
            return r.listening = !1,
            this.data.splice(i, 1),
            r
        },
        find: function(n) {
            for (var i = 0; i < this.data.length; i++)
                if (this.data[i].handler == n)
                    return i;
            return -1
        },
        asArray: function() {
            var n = [];
            return this.forEach(function(i) {
                n.push(i.handler)
            }),
            n
        }
    },
    ot(t, t1),
    e
}()
  , ks = m.getLoggerProxy(G.PROTOCOL)
  , Wb = !1
  , A3 = function(e, t) {
    this.tablePhaseChecker = t,
    this.exportMethods(e)
};
A3.simulateSilence = function(e) {
    Wb = e
}
;
A3.prototype = {
    changeSession: function(e) {
        ks.logDebug(m.resolve(538), e),
        this.sessionHandler = e,
        this.sessionHandler.getSessionId() != this.currentIdForProg && (this.currentProg = null)
    },
    exportMethods: function(e) {
        var t = this;
        Ut.exportGlobal(e, "LS_e", function(n, i, r, s, o, a) {
            t.onPushEvent(n, i, r, s, o, a)
        }),
        Ut.exportGlobal(e, "LS_t", function(n) {
            t.onServerTitle(n)
        }),
        Ut.exportGlobal(e, "LS_u", function(n, i, r) {
            t.onUpdate(n, i, r)
        }),
        Ut.exportGlobal(e, "LS_v", function(n, i) {
            t.onUpdate(n, i, !0)
        }),
        Ut.exportGlobal(e, "LS_o", function(n, i) {
            t.onLostUpdatesEvent(n, i)
        }),
        Ut.exportGlobal(e, "LS_n", function(n, i) {
            t.onEndOfSnapshotEvent(n, i)
        }),
        Ut.exportGlobal(e, "LS_s", function(n, i) {
            if (i.length)
                t.onClearSnapshotEvent(n, i);
            else {
                var r = n
                  , s = i;
                t.onPushEvent(6, r, s)
            }
        }),
        Ut.exportGlobal(e, "LS_l", function(n, i, r, s, o) {
            t.onErrorEvent(n, i, r, s, o)
        }),
        Ut.exportGlobal(e, "LS_w", function(n, i, r, s, o, a, c) {
            t.onControlEvent(n, i, r, s, o, a, c)
        }),
        Ut.exportGlobal(e, "setTimeout", function(n, i) {
            setTimeout(n, i)
        }),
        Ut.exportGlobal(e, "alert", function(n) {
            typeof alert < "u" ? alert(n) : typeof console < "u" && console.log(n)
        }),
        Ut.exportGlobal(e, "LS_svrname", function(n) {
            t.onServerName(n)
        }),
        Ut.exportGlobal(e, "LS_MPNREG", function(n, i) {
            t.onMPNREG(n, i)
        }),
        Ut.exportGlobal(e, "LS_MPNOK", function(n, i) {
            t.onMPNOK(n, i)
        }),
        Ut.exportGlobal(e, "LS_MPNDEL", function(n) {
            t.onMPNDEL(n)
        })
    },
    preliminaryCheck: function(e, t, n, i) {
        var r = !Wb && !Bt.isUnloaded() && this.sessionHandler != null;
        return ks.isDebugLogEnabled() && ks.logDebug(m.resolve(539), r),
        r
    },
    processCountableNotification: function() {
        this.sessionHandler.getSessionId() != this.currentIdForProg && (this.currentProg = null);
        var e = this.sessionHandler.getDataNotificationProg();
        return ks.logDebug(m.resolve(540), e),
        this.currentProg != null ? (ut.verifyOk(this.currentProg <= e) || ks.logError(m.resolve(541), this.currentProg),
        this.currentProg++,
        this.currentProg <= e ? (ks.logDebug(m.resolve(542), this.currentProg),
        !1) : (this.sessionHandler.onDataNotification(),
        e = this.sessionHandler.getDataNotificationProg(),
        ut.verifyValue(this.currentProg, e) || ks.logError(m.resolve(543), this.currentProg),
        !0)) : (this.sessionHandler.onDataNotification(),
        !0)
    },
    onServerTitle: function(e) {},
    onPushEvent: function(e, t, n, i, r, s) {
        if (this.preliminaryCheck(t, null, e == 1, e == 3 || e == 4))
            if (e == 1)
                this.sessionHandler.onOKReceived(n, i, s, r);
            else if (e == 2)
                this.sessionHandler.onLoopReceived(n);
            else if (e == 3)
                this.sessionHandler.onSyncError("syncerror");
            else if (e == 4) {
                var o = 30;
                if (n != null) {
                    if (o = n,
                    o == 41) {
                        this.sessionHandler.onError41();
                        return
                    } else if (o == 48) {
                        this.sessionHandler.onSyncError("expired");
                        return
                    }
                    (o > 0 && o < 30 || o > 39) && (o = 39)
                }
                var a = "The session has been forcibly closed by the Server";
                i != null && (a = i),
                this.onErrorEvent(o, t, null, a)
            } else
                e == 5 ? this.sessionHandler.onServerSentBandwidth(n) : e == 6 ? this.sessionHandler.onSyncReceived(n) : e == 7 ? this.onProg(n) : this.sessionHandler.onEnd("Unsupported Server version")
    },
    onProg: function(e) {
        this.sessionHandler.getSessionId() != this.currentIdForProg && (this.currentProg = null);
        var t = this.sessionHandler.getDataNotificationProg();
        this.currentProg == null ? (this.currentProg = e,
        this.currentIdForProg = this.sessionHandler.getSessionId(),
        this.currentProg > t && (ut.fail(),
        ks.logError(m.resolve(544), e, t),
        this.sessionHandler.onPROGCounterMismatch())) : this.currentProg != e ? (ut.fail(),
        ks.logError(m.resolve(545), e, this.currentProg),
        this.sessionHandler.onPROGCounterMismatch()) : e != t && (ut.fail(),
        ks.logError(m.resolve(546), e, t),
        this.sessionHandler.onPROGCounterMismatch())
    },
    onUpdate: function(e, t, n) {
        if (t.length < 2) {
            if (!this.preliminaryCheck(e))
                return;
            this.sessionHandler.onKeepalive()
        } else {
            if (!this.preliminaryCheck(null, e) || !this.processCountableNotification())
                return;
            this.sessionHandler.onUpdateReceived(t, n || !1)
        }
    },
    onSnapshot: function(e, t) {
        this.onUpdate(e, t, !0)
    },
    onEndOfSnapshotEvent: function(e, t) {
        this.preliminaryCheck(null, e) && this.processCountableNotification() && this.sessionHandler.onEndOfSnapshotEvent(t)
    },
    onClearSnapshotEvent: function(e, t) {
        this.preliminaryCheck(null, e) && this.processCountableNotification() && this.sessionHandler.onClearSnapshotEvent(t)
    },
    onLostUpdatesEvent: function(e, t) {
        this.preliminaryCheck(null, e) && this.processCountableNotification() && this.sessionHandler.onLostUpdatesEvent(t)
    },
    onMessageErrorEvent: function(e, t, n, i, r) {
        if (this.preliminaryCheck()) {
            ut.verifyValue(n.substring(0, 3), "MSG") || ks.logError(m.resolve(547), n);
            var s = n.substr(3);
            if (r) {
                this.sessionHandler.onMessageError(s, e, i, t);
                return
            }
            if (this.processCountableNotification())
                if (e == 39) {
                    var o = parseInt(i);
                    t = parseInt(t);
                    for (var a = t - o + 1; a <= t; a++)
                        this.sessionHandler.onMessageDiscarded(s, a)
                } else
                    e == 38 ? this.sessionHandler.onMessageDiscarded(s, t) : e <= 0 ? this.sessionHandler.onMessageDeny(s, e, i, t) : this.sessionHandler.onMessageError(s, e, i, t)
        }
    },
    onErrorEvent: function(e, t, n, i, r) {
        if (n != null && isNaN(n)) {
            this.onMessageErrorEvent(e, t, n, i, r);
            return
        }
        if (n != null) {
            if (!this.preliminaryCheck(null, t))
                return;
            this.sessionHandler.onTableError(n, e, i)
        } else {
            if (!this.preliminaryCheck(t, null, null, !0))
                return;
            this.sessionHandler.forwardError(e, i)
        }
    },
    onControlEvent: function(e, t, n, i, r, s, o) {
        if (this.preliminaryCheck(null, e == 4 || e == 5 || e == 9 ? null : t))
            if (e == 4)
                this.sessionHandler.onMessageAck(n, t);
            else if (e == 5) {
                if (!this.processCountableNotification())
                    return;
                this.sessionHandler.onMessageOk(n, t)
            } else if (e == 8) {
                if (!this.processCountableNotification())
                    return;
                this.sessionHandler.onUnsubscription(n)
            } else if (e == 6) {
                if (!this.processCountableNotification())
                    return;
                this.sessionHandler.onSubscription(n, i, r, s + 1, o + 1)
            } else if (e == 9) {
                if (!this.processCountableNotification())
                    return;
                this.sessionHandler.onSubscriptionReconf(n, t, i)
            } else
                ks.logDebug(m.resolve(548), e)
    },
    onServerName: function(e) {
        this.sessionHandler.onServerName(e)
    },
    onMPNREG: function(e, t) {
        this.processCountableNotification() && this.sessionHandler.onMpnRegisterOK(e, t)
    },
    onMPNOK: function(e, t) {
        this.processCountableNotification() && this.sessionHandler.onMpnSubscribeOK(e, t)
    },
    onMPNDEL: function(e) {
        this.processCountableNotification() && this.sessionHandler.onMpnUnsubscribeOK(e)
    }
};
var BN = 4e3
  , zl = function(e, t) {
    this.discarded = !1,
    this.connOptions = e,
    this.timeoutMs = this.getFixedTimeout ? this.getFixedTimeout() : t ? t * 2 : BN
};
zl.prototype = {
    notifySender: function(e) {
        if (e)
            this.doRecovery();
        else {
            var t = this.timeoutMs + Number(this.connOptions.pollingInterval);
            be.addTimedTask(this.onTimeout, t, this)
        }
    },
    onTimeout: function() {
        this.discarded || this.verifySuccess() || this.doRecovery()
    },
    discard: function() {
        this.discarded = !0
    }
};
var I3 = function(e, t, n, i, r) {
    this._callSuperConstructor(I3, [e, r]),
    this.tableNum = t,
    this.owner = n,
    this.effort = i
};
I3.prototype = {
    verifySuccess: function() {
        return !this.owner.isWaitingUnsubscription(this.tableNum)
    },
    doRecovery: function() {
        this.owner.unsubscribeTable(this.tableNum, this.effort + 1, this.timeoutMs)
    },
    notifyAborted: function() {
        this.owner.onUnsubscription(this.tableNum)
    }
};
ot(I3, zl);
var jb;
for (ob in {
    notifySender: !0
})
    jb = ob;
var ob, i1 = function(e, t, n, i, r) {
    this._callSuperConstructor(i1, [e, r]),
    this.tableNum = t,
    this.owner = n,
    this.effort = i
};
i1.prototype = {
    verifySuccess: function() {
        return !this.owner.isWaitingSubscription(this.tableNum)
    },
    doRecovery: function() {
        this.owner.subscribeTable(this.tableNum, this.effort + 1, this.timeoutMs)
    },
    notifySender: function(e) {
        e || this.owner.subscriptionSent(this.tableNum),
        this._callSuperMethod(i1, jb, arguments)
    },
    notifyAborted: function() {}
};
ot(i1, zl);
var R3 = function(e, t, n, i, r, s, o) {
    this._callSuperConstructor(R3, [e, o]),
    this.tableNum = t,
    this.ph = n,
    this.owner = i,
    this.changingParams = r,
    this.effort = s
};
R3.prototype = {
    verifySuccess: function() {
        return !this.owner.isWaitingSubscriptionReconfNotification(this.tableNum, this.ph)
    },
    doRecovery: function() {
        this.owner.sendUpdateSubscriptionParams(this.tableNum, this.ph, this.changingParams, this.effort + 1, this.timeoutMs)
    },
    notifyAborted: function() {}
};
ot(R3, zl);
var Il = m.getLoggerProxy(G.SHARING)
  , jo = function(e, t, n, i) {
    this.reqPhase = 1,
    this.engine = e,
    this.configuration = t,
    this.details = n,
    this.options = i,
    this.sessionPhase = 0,
    this.sessionAlive = !1,
    this.pushPages = {},
    this.clientsCount = 0,
    this.subscriptions = {},
    this.page2Tables = {},
    this.cleanTask = be.addRepetitiveTask(this.cleanThread, 5e3, this),
    Bt.addBeforeUnloadHandler(this),
    Bt.addUnloadHandler(this)
};
jo.prototype = {
    toString: function() {
        return ["[", "PushPageCollectionHandler", "]"].join("|")
    },
    getSessionPhase: function() {
        return this.sessionPhase
    },
    checkSessionPhase: function(e) {
        return e == this.sessionPhase
    },
    checkConnectionPool: function(e) {
        var t = this.engine.getSharedStatus();
        t && t.getNumberOfConnectionsToServer(this.engine.sessionHandler.getPushServerAddress()) > e && Il.logWarn(m.resolve(549))
    },
    cleanAll: function() {
        this.subscriptions = {};
        for (var e in this.page2Tables)
            this.page2Tables[e] = {}
    },
    forEachPushPage: function(e) {
        for (var t in this.pushPages)
            e(this.pushPages[t], t)
    },
    onNewPushPage: function(e, t) {
        this.pushPages[e] = t,
        this.page2Tables[e] = {},
        this.clientsCount++,
        this.configuration.simpleSetter("clientsCount", this.clientsCount),
        Il.logDebug(m.resolve(550), this),
        e !== G.MAIN_CLIENT && (this.details.forEachProperty(function(n, i) {
            t.onEngineConfigurationChange("ConnectionDetails", n, i)
        }),
        this.options.forEachProperty(function(n, i) {
            t.onEngineConfigurationChange("ConnectionOptions", n, i)
        }),
        this.configuration.forEachProperty(function(n, i) {
            t.onEngineConfigurationChange("Configuration", n, i)
        }),
        t.onStatusChange(this.engine.getStatus()),
        this.sessionAlive ? t.onSessionStart(this.sessionPhase) : t.onSessionEnd(this.sessionPhase))
    },
    onPushPageLost: function(e) {
        if (Il.logDebug(m.resolve(551), this, e),
        this.pushPages[e]) {
            var t = this.page2Tables[e];
            for (var n in t)
                this.removeTable(n);
            this.pushPages[e].dispose(),
            delete this.pushPages[e],
            delete this.page2Tables[e],
            this.clientsCount--,
            this.configuration.simpleSetter("clientsCount", this.clientsCount)
        }
    },
    getPushPageHandlerFromTableNumber: function(e) {
        var t = this.subscriptions[e];
        return t ? this.getPushPageHandler(t.pageNum) : (Il.logDebug(m.resolve(552)),
        null)
    },
    getPushPageHandler: function(e) {
        return this.pushPages[e] ? this.pushPages[e] : (Il.logDebug(m.resolve(553)),
        null)
    },
    notifyNewStatus: function(e, t) {
        return this.forEachPushPage(function(n) {
            n.onStatusChange(e)
        }),
        !0
    },
    onSessionStart: function() {
        this.cleanAll(),
        this.sessionAlive = !0;
        var e = ++this.sessionPhase;
        this.forEachPushPage(function(t) {
            t.onSessionStart(e)
        })
    },
    onSessionEnd: function() {
        this.cleanAll(),
        this.sessionAlive = !1;
        var e = ++this.sessionPhase;
        this.forEachPushPage(function(t) {
            t.onSessionEnd(e)
        })
    },
    onSubscription: function(e) {
        this.subscriptions[e] && (this.subscriptions[e].pendingSubscription = !1)
    },
    onSubscriptionError: function(e) {
        this.onUnsubscription(e)
    },
    isWaitingSubscription: function(e) {
        return this.subscriptions[e] ? this.subscriptions[e].pendingSubscription && !this.subscriptions[e].pendingUnsubscription : !1
    },
    subscriptionSent: function(e) {
        this.subscriptions[e] && (this.subscriptions[e].sentSubscription = !0)
    },
    onSubscriptionEvent: function(e) {},
    onUnsubscription: function(e) {
        if (this.subscriptions[e]) {
            var t = this.subscriptions[e].pageNum;
            delete this.subscriptions[e],
            this.page2Tables[t] && delete this.page2Tables[t][e]
        }
    },
    isWaitingUnsubscription: function(e) {
        return this.subscriptions[e] ? this.subscriptions[e].sentSubscription && this.subscriptions[e].pendingUnsubscription : !1
    },
    isWaitingSubscriptionReconfNotification: function(e, t) {
        return this.subscriptions[e] ? this.subscriptions[e].pendingChange && this.subscriptions[e].pendingChangePhase == t : !1
    },
    onSubscriptionReconfEvent: function(e, t) {
        this.subscriptions[e] && t == this.subscriptions[e].pendingChangePhase && (this.subscriptions[e].pendingChange = !1)
    },
    handleTable: function(e, t) {
        var n = this.pushPages[e];
        if (!n || !this.engine.isSessionOpenOrRecovering()) {
            ut.fail(),
            Il.logError(m.resolve(554), this, e);
            return
        }
        var i = Ke.nextSubscriptionId();
        this.page2Tables[e][i] = !0;
        var r = this.getControlParams(t, i);
        return this.subscriptions[i] = new UN(e,r.add,r.remove),
        Il.logDebug(m.resolve(555)),
        this.subscribeTable(i, 1),
        i
    },
    subscribeTable: function(e, t, n) {
        if (this.subscriptions[e]) {
            t >= 3 && this.checkConnectionPool(1),
            this.subscriptions[e].pendingSubscription = !0;
            var i = new i1(this.options,e,this,t,n)
              , r = this.subscriptions[e].addBody;
            this.engine.sessionHandler.sendSubscription(e, r, this, t >= 2, i)
        }
    },
    removeTable: function(e) {
        !this.subscriptions[e] || this.subscriptions[e].pendingUnsubscription || this.unsubscribeTable(e, 1)
    },
    unsubscribeTable: function(e, t, n) {
        if (this.subscriptions[e]) {
            t >= 3 && this.checkConnectionPool(1),
            this.subscriptions[e].pendingUnsubscription = !0;
            var i = new I3(this.options,e,this,t,n)
              , r = this.subscriptions[e].deleteBody;
            r.LS_reqId = Ke.nextRequestId(),
            this.engine.sessionHandler.sendUnsubscription(e, r, this, t >= 2, i)
        }
    },
    updateSubscriptionParams: function(e, t) {
        if (this.subscriptions[e]) {
            var n = ++this.subscriptions[e].pendingChangePhase;
            this.sendUpdateSubscriptionParams(e, n, t, 1)
        }
    },
    sendUpdateSubscriptionParams: function(e, t, n, i, r) {
        if (!(!this.subscriptions[e] || this.subscriptions[e].pendingChangePhase != t)) {
            i >= 3 && this.checkConnectionPool(1),
            this.subscriptions[e].pendingChange = !0;
            var s = this.subscriptions[e].pendingChangePhase
              , o = Ke.extendObj({
                LS_subId: e,
                LS_op: "reconf",
                LS_reqId: Ke.nextRequestId()
            }, n)
              , a = new R3(this.options,e,s,this,n,i,r);
            this.engine.sessionHandler.sendSubscriptionChange(e, o, a)
        }
    },
    notifyEngineIsDying: function() {
        this.forEachPushPage(function(e) {
            e.onEngineDying()
        })
    },
    notifyEngineDeath: function(e) {
        var t = this.pushPages;
        this.pushPages = {};
        for (var n in t)
            t[n].onEngineDeath(e)
    },
    notifyServerError: function(e, t) {
        this.forEachPushPage(function(n) {
            n.onServerError(e, t)
        })
    },
    dispose: function() {
        be.stopRepetitiveTask(this.cleanTask),
        Bt.removeBeforeUnloadHandler(this),
        Bt.removeUnloadHandler(this)
    },
    unloadEvent: function() {
        this.notifyEngineDeath(!1)
    },
    preUnloadEvent: function() {
        this.notifyEngineIsDying()
    },
    cleanThread: function() {
        var e = this;
        this.forEachPushPage(function(t, n) {
            t.ping().then(function(i) {}, function() {
                e.onPushPageLost(n)
            })
        })
    },
    getControlParams: function(e, t) {
        this.reqPhase++;
        var n = {
            LS_subId: t
        };
        return Ke.extendObj(e, n),
        {
            add: Ke.extendObj(e, {
                LS_op: "add",
                LS_reqId: Ke.nextRequestId()
            }),
            remove: Ke.extendObj(n, {
                LS_op: "delete",
                LS_reqId: Ke.nextRequestId()
            })
        }
    },
    onServerKeepalive: function() {
        this.forEachPushPage(function(e) {
            e.onServerKeepalive()
        })
    }
};
function UN(e, t, n) {
    this.pendingSubscription = !1,
    this.sentSubscription = !1,
    this.pendingChange = !1,
    this.pendingChangePhase = 0,
    this.pendingUnsubscription = !1,
    this.deleteBody = n,
    this.addBody = t,
    this.pageNum = e
}
jo.prototype.onPushPageLost = jo.prototype.onPushPageLost;
jo.prototype.onNewPushPage = jo.prototype.onNewPushPage;
jo.prototype.unloadEvent = jo.prototype.unloadEvent;
jo.prototype.preUnloadEvent = jo.prototype.preUnloadEvent;
var qb = mi.isProbablyFX(1.5, !0) ? 10 : 50
  , a3 = qb
  , Su = 0
  , Oc = 0
  , Rl = 0
  , Eg = null
  , c3 = null
  , Tg = null
  , HN = m.getLoggerProxy(G.SESSION)
  , As = {
    init: function() {
        a3 = qb,
        Su = 0,
        Oc = 0,
        Rl = 0,
        Eg = null,
        c3 = null,
        Tg = null
    },
    incMadTest: function() {
        Eg = Su,
        c3 = Oc,
        Tg = Rl;
        var e = Et.getTimeStamp();
        Rl || (Rl = e),
        e - Rl >= 6e4 && (Su = 0,
        Rl = e),
        Oc && e - Oc < 1e3 && Su++,
        Oc = e
    },
    rollbackLastMadTest: function() {
        c3 != Oc && (Su = Eg,
        Oc = c3,
        Rl = Tg)
    },
    canMakeRequest: function() {
        if (Oc == 0)
            return !0;
        if (a3) {
            if (Su >= a3)
                return HN.logError(m.resolve(556)),
                a3 = 0,
                !1
        } else
            return !1;
        return !0
    }
}
  , n1 = {
    encodeRequest: "encodeRequest",
    encodeUnqRequest: "encodeUnqRequest"
};
n1 = Ke.getReverse(n1);
var Cu = function(e) {
    this.wsConnection = e
};
Cu.prototype = {
    toString: function() {
        return "[WSEncoder]"
    },
    getFixedOverhead: function(e) {
        return e.length + 2
    },
    getExt: function() {
        return ""
    },
    encodeRequest: function(e, t, n) {
        return t = this.expandWithSessionId(t, n),
        this._callSuperMethod(Cu, n1.encodeRequest, [e, t, n])
    },
    encodeUnqRequest: function(e, t, n, i) {
        return t = this.expandWithSessionId(t, i),
        this._callSuperMethod(Cu, n1.encodeUnqRequest, [e, t, n, i])
    },
    encodeDestroyRequest: function(e, t, n, i) {
        return this._callSuperMethod(Cu, n1.encodeRequest, [e, i, n])
    },
    expandWithSessionId: function(e, t) {
        var n = this.wsConnection.getDefaultSessionId();
        return n == null ? e = Ke.extendObj(e, {
            LS_session: t
        }) : jt.verifyValue(n, t, "Unexpected session ID"),
        e
    }
};
ot(Cu, t7);
var Og = m.getLoggerProxy(G.SESSION)
  , Wn = m.getLoggerProxy(G.STREAM)
  , E3 = null;
vt.isNodeJS() && (E3 = k3.NodeWS);
var Mg = G.TLCP_VERSION + ".lightstreamer.com"
  , GN = 1;
function qn(e) {
    this._callSuperConstructor(qn),
    this.objectId = GN++,
    Wn.isDebugLogEnabled() && Wn.logDebug(m.resolve(557), this.objectId),
    this.isOpen = !1,
    this.exePhase = null,
    this.openPhase = null,
    this.openRequest = null,
    this.webSocketInstance = null,
    this.openEvent = !1,
    this.openFailure = !1,
    this.serverInUse = null,
    this.openEventFired = !1,
    this.defaultSessionId = null,
    this.wsSession = e,
    this.constr = qn,
    this.wsEncoder = new Cu(this)
}
qn.name == null && (qn.name = "WebSocketConnection");
var Mu = !1
  , r1 = {};
qn.disableClass = function(e) {
    e ? r1[e] = !0 : Mu = !0
}
;
qn.restoreClass = function(e) {
    e ? delete r1[e] : (Mu = !1,
    r1 = {})
}
;
qn.isDisabledClass = function() {
    for (var e in r1)
        return !0;
    return Mu
}
;
function VN(e) {
    if (e.indexOf("http://") == 0 ? e = e.replace("http://", "ws://") : e = e.replace("https://", "wss://"),
    E3) {
        var t = ""
          , n = Cn.getGlobalCookiesForNode(e);
        n.forEach(function(r, s, o) {
            t !== "" && (t += "; "),
            t += r.name + "=" + r.value
        });
        var i = {};
        return t.length > 0 && (i.headers = {
            Cookie: t
        }),
        new E3(e,Mg,i)
    } else {
        if (typeof WebSocket < "u")
            return new WebSocket(e,Mg);
        if (typeof MozWebSocket < "u")
            return new MozWebSocket(e,Mg)
    }
    return qn.disableClass(),
    null
}
Cn.attachPublicStaticMethods(qn, {
    isAvailable: function(e) {
        if (Mu)
            return !1;
        if (e && r1[e])
            return !1;
        var t = null;
        return typeof WebSocket < "u" ? t = WebSocket : typeof MozWebSocket < "u" && (t = MozWebSocket),
        t && t.prototype.CLOSED == 2 ? !1 : E3 || t
    },
    isCrossSite: !0,
    isCrossProtocol: function() {
        return !vt.isBrowser() || location.protocol != "https:"
    },
    areCookiesGuaranteed: function() {
        return !0
    },
    attachEngineId: !1,
    isStreamEnabled: !0,
    canUseCustomHeaders: !1
});
qn.prototype = {
    toString: function() {
        return ["[", "WebSocketConnection", this.isOpen, this.openPhase, this.exePhase, this.isReadyToSend(), "]"].join("|")
    },
    _close: function() {
        if (this.webSocketInstance) {
            if (Wn.logDebug(m.resolve(558)),
            this.openPhase = null,
            this.webSocketInstance)
                try {
                    this.webSocketInstance.close(1e3)
                } catch (e) {
                    Wn.logDebug(m.resolve(559), e)
                }
            this.off()
        }
    },
    openSocket: function(e, t, n, i, r) {
        if (this.isOpen)
            Wn.logError(m.resolve(560));
        else if (Mu)
            return !1;
        this.openFailure = !1,
        this.serverInUse = e.getPath(),
        this.openPhase = t;
        try {
            this.webSocketInstance = VN(this.serverInUse)
        } catch (o) {
            return Wn.logDebug(m.resolve(561), o),
            !1
        }
        Og.isDebugLogEnabled() && Og.debug("Status timeout in " + this.wsSession.getCurrentConnectTimeout() + " [currentConnectTimeoutWS]"),
        be.addTimedTask(this.openWSTimeout, this.wsSession.getCurrentConnectTimeout(), this, [this.openPhase]);
        var s = this;
        return this.webSocketInstance.onmessage = function(o) {
            s.onPartialResponse(o, t, n)
        }
        ,
        this.webSocketInstance.onerror = function() {
            s.onErrorResponse(t, i)
        }
        ,
        this.webSocketInstance.onclose = function(o) {
            s.onCloseResponse(o, t, r, i)
        }
        ,
        this.webSocketInstance.onopen = function() {
            if (vt.isNodeJS()) {
                var o = s.webSocketInstance.headers;
                if (o["set-cookie"]) {
                    var a = Ke.parseSetCookieHeader(o["set-cookie"]);
                    Cn.addGlobalCookiesForNode(e.getUrl(), a)
                }
            }
            s.onOpenEvent(t)
        }
        ,
        !0
    },
    openWSTimeout: function(e) {
        if (e == this.openPhase && this.webSocketInstance && !this.openEventFired)
            try {
                Og.logDebug(m.resolve(562)),
                this.wsSession.policyBean.increaseConnectTimeout(),
                this.webSocketInstance.close(1e3)
            } catch {
                Wn.logDebug(m.resolve(563))
            }
    },
    _load: function(e, t) {
        return this.isOpen ? (Wn.logError(m.resolve(564)),
        null) : Mu ? !1 : (this.openRequest = e,
        this.exePhase = t,
        Wn.logDebug(m.resolve(565), e.getUrl()),
        this.isReadyToSend() && this.sendFirstRequest(t),
        !0)
    },
    isConnectedToServer: function(e) {
        return ut.verifyOk(this.serverInUse) ? this.serverInUse.indexOf(e) == 0 : (Wn.logError(m.resolve(566)),
        !1)
    },
    isReadyToSend: function() {
        return this.webSocketInstance != null && this.webSocketInstance.readyState == 1
    },
    _send: function(e, t) {
        if (!this.isReadyToSend())
            return null;
        t && this.updatePhase(t),
        Wn.isDebugLogEnabled() && Wn.logDebug(m.resolve(567), this.objectId, e.getFile(), e.getData());
        try {
            this.webSocketInstance.send(e.getFile() + `\r
` + e.getData())
        } catch (n) {
            return Wn.logError(m.resolve(568), n),
            !1
        }
        return !0
    },
    sendFirstRequest: function(e) {
        var t = this._send(this.openRequest, e);
        ut.verifyOk(t !== null) || Wn.logError(m.resolve(569), e),
        t && (this.isOpen = !0,
        this.wsSession.firstSentNotification(this.openPhase))
    },
    updatePhase: function(e) {
        this.exePhase = e
    },
    onPartialResponse: function(e, t, n) {
        this.openPhase != t || Bt.isUnloaded() || (Wn.isDebugLogEnabled() && Wn.logDebug(m.resolve(570), this.objectId, e.data),
        this.openEvent = !0,
        be.executeTask(n, [e.data, this.exePhase]))
    },
    onErrorResponse: function(e, t) {
        this.openPhase != e || Bt.isUnloaded() || (Wn.logError(m.resolve(571), this.objectId),
        this.openFailure |= !this.openEvent,
        be.executeTask(t, ["wsc.unknown", this.openPhase, !0, this.openFailure, !1]))
    },
    onOpenEvent: function(e, t) {
        this.openPhase != e || Bt.isUnloaded() || (this.openEventFired = !0,
        Wn.logDebug(m.resolve(572)),
        this.openRequest && this.sendFirstRequest())
    },
    onCloseResponse: function(e, t, n, i) {
        if (!(this.openPhase != t || Bt.isUnloaded())) {
            var r = e ? e.code : -1;
            if (Wn.logDebug(m.resolve(573), r, this.openEvent),
            r == 1e3 || r == 1001)
                be.modifyAllTaskParams(n, [this.openPhase, !0]),
                be.addPackedTimedTask(n, 300),
                this.off();
            else if (r == 1011) {
                this.openFailure |= !this.openEvent;
                var s = this.openPhase;
                this.off(),
                be.executeTask(i, ["wsc.server", s, !0, this.openFailure, !0])
            } else {
                this.openFailure |= !this.openEvent;
                var s = this.openPhase;
                this.off(),
                be.executeTask(i, ["wsc." + r, s, !0, this.openFailure, !1])
            }
        }
    },
    off: function() {
        this.isOpen = !1,
        this.openEventFired = !1,
        this.openPhase = null,
        this.openRequest = null,
        this.openEvent = !1,
        this.webSocketInstance = null,
        this.serverInUse = null
    },
    getEncoder: function() {
        return this.wsEncoder
    },
    setDefaultSessionId: function(e) {
        Wn.isDebugLogEnabled() && Wn.logDebug(m.resolve(574), e + " on WS connection oid=" + this.objectId),
        this.defaultSessionId = e
    },
    getDefaultSessionId: function() {
        return this.defaultSessionId
    }
};
ot(qn, Cn);
var D3 = function(e, t, n, i) {
    this._callSuperConstructor(D3, [i]),
    this._cause = e,
    this._phase = n,
    this.session = t
};
D3.prototype = {
    verifySuccess: function() {
        return !this.session.checkSessionPhase(this._phase)
    },
    doRecovery: function() {
        this.session.forceRebind(this._cause)
    },
    getFixedTimeout: function() {
        return this.connOptions.forceBindTimeout
    },
    notifyAborted: function() {}
};
ot(D3, zl);
var jg = function() {
    arguments.length == 0 ? this.ctor0() : (jt.assert(arguments.length == 2, "Recovery error (1)"),
    this.ctor2(arguments[0], arguments[1])),
    jt.assert(this.invariant(), "Recovery error (2)")
};
jg.prototype = {
    invariant: function() {
        return this.recovery ? this.recoveryTimestampMs != -1 : this.recoveryTimestampMs == -1
    },
    ctor0: function() {
        this.recovery = !1,
        this.recoveryTimestampMs = -1
    },
    ctor2: function(e, t) {
        t.recovery ? e ? (this.recovery = !0,
        this.recoveryTimestampMs = t.recoveryTimestampMs) : (this.recovery = !1,
        this.recoveryTimestampMs = -1) : e ? (this.recovery = !0,
        this.recoveryTimestampMs = Date.now()) : (jt.assert(t.recoveryTimestampMs == -1, "Recovery error (4)"),
        this.recovery = !1,
        this.recoveryTimestampMs = -1)
    },
    restoreTimeLeft: function() {
        this.recovery = !1,
        this.recoveryTimestampMs = -1
    },
    isRecovery: function() {
        return this.recovery
    },
    timeLeftMs: function(e) {
        return this.recovery ? (jt.assert(this.recoveryTimestampMs != -1, "Recovery error (5)"),
        e - (Date.now() - this.recoveryTimestampMs)) : e
    }
};
var Hi = 1
  , jr = 2
  , gs = 3
  , Is = 4
  , Oa = 5
  , Uo = 6
  , Ac = 7
  , Ho = 8
  , Ma = 9
  , Go = 10
  , Mi = 11
  , Cr = [];
Cr[Hi] = "OFF";
Cr[jr] = "CREATING";
Cr[gs] = "CREATED";
Cr[Is] = "FIRST_PAUSE";
Cr[Oa] = "FIRST_BINDING";
Cr[Uo] = "PAUSE";
Cr[Ac] = "BINDING";
Cr[Ho] = "RECEIVING";
Cr[Ma] = "STALLING";
Cr[Go] = "STALLED";
Cr[Mi] = "SLEEP";
var Jd = !0
  , Hd = !1
  , l3 = !0
  , Zd = !1
  , st = m.getLoggerProxy(G.SESSION)
  , Oi = m.getLoggerProxy(G.PROTOCOL)
  , $N = 1
  , WN = 1
  , Nt = function(e, t, n, i, r, s, o, a) {
    if (this.objectId = WN++,
    st.isDebugLogEnabled() && st.logDebug(m.resolve(575), "oid=" + this.objectId),
    this.cbOk = be.packTask(this.onStreamResponse, this),
    this.cbErr = be.packTask(this.onStreamError, this),
    this.cbEnd = be.packTask(this.onStreamEnd, this),
    this.isPolling = e,
    this.forced = t,
    this.dataNotificationCount = 0,
    this.phase = Hi,
    this.phaseCount = 0,
    this.push_phase = Et.randomG(100) * 100,
    this.handler = n,
    this.handlerPhase = i,
    this.slowing = n.getSlowing(),
    this.policyBean = n.getPolicyBean(),
    this.connectionBean = n.getConnectionBean(),
    this.evalQueue = null,
    this.controlHandler = n.getControlConnectionHandler(),
    this.engineId = n.getEngineId(),
    this.serverSentBW = 0,
    this.workedBefore = 0,
    this.lastKATO = 0,
    this.lastKATask = null,
    this.reconnectTimeout = null,
    this.sentTime = null,
    this.reset(),
    this.preparingRecovery = !1,
    this.isRecoveryDisabled = !1,
    this.serverBusy = !1,
    r ? (this.bindCount = r.bindCount,
    this.dataNotificationCount = r.dataNotificationCount,
    st.logDebug(m.resolve(576), this.dataNotificationCount),
    this.sessionId = r.sessionId,
    this.sessionServerAddress = r.sessionServerAddress,
    this.push_phase = r.push_phase,
    this.serverSentBW = r.serverSentBW,
    this.serverAddressCache = r.serverAddressCache,
    this.ignoreServerAddressCache = r.ignoreServerAddressCache,
    this.recoveryBean = new jg(o,r.recoveryBean)) : (jt.assert(!o, "Recovery unexpected"),
    this.recoveryBean = new jg),
    this.mpnManager = a,
    vt.isBrowser()) {
        var c = this;
        this.onlineHandler = function(l) {
            var u = c.recoveryBean.timeLeftMs(c.policyBean.sessionRecoveryTimeout);
            u <= 0 && c.closeSession("recovery.timeout.elapsed", Jd, Zd),
            c.launchTimeout("online.again", 0)
        }
        ;
        try {
            window.addEventListener("online", this.onlineHandler, !1)
        } catch {}
    }
};
Nt._OFF = Hi;
Nt.CREATING = jr;
Nt.CREATED = gs;
Nt.FIRST_PAUSE = Is;
Nt.FIRST_BINDING = Oa;
Nt.BINDING = Ac;
Nt.RECEIVING = Ho;
Nt.STALLING = Ma;
Nt._STALLED = Go;
Nt.PAUSE = Uo;
Nt.SLEEP = Mi;
Nt.prototype = {
    reset: function() {
        st.isDebugLogEnabled() && st.logDebug(m.resolve(577), this.objectId),
        this.bindCount = 0,
        this.sessionServerAddress = null,
        this.sessionId = null,
        this.dataNotificationCount = 0,
        this.serverSentBW = 0,
        this.cachedRequiredBW = !1,
        this.switchRequired = !1,
        this.switchForced = !1,
        this.switchCause = "",
        this.slowRequired = !1,
        this.preparingRecovery = !1
    },
    resetConnectionList: function(e) {},
    changePhaseType: function(e) {
        st.isDebugLogEnabled() && st.logDebug(m.resolve(578), this.objectId, Cr[this.phase], "->", Cr[e]),
        this.phase = e,
        this.phaseCount++;
        var t = this.phaseCount;
        return this.handler.statusChanged(this.handlerPhase),
        t == this.phaseCount
    },
    incPushPhase: function() {
        this.push_phase++
    },
    checkSessionPhase: function(e) {
        return this.push_phase == e
    },
    getHighLevelStatus: function() {
        var e = this.phase;
        return e == Hi ? G.DISCONNECTED : e == Mi ? this.preparingRecovery ? G.TRYING_RECOVERY : G.WILL_RETRY : e == jr ? this.recoveryBean.isRecovery() ? G.TRYING_RECOVERY : G.CONNECTING : e == gs || e == Is || e == Oa ? G.CONNECTED + this.getFirstConnectedStatus() : e == Go ? G.STALLED : G.CONNECTED + this.getConnectedHighLevelStatus()
    },
    isOpen: function() {
        return this.phase != Hi && this.phase != jr && this.phase != Mi
    },
    isWaitingOKFromNet: function() {
        return this.phase == jr || this.phase == Ac || this.phase == Oa
    },
    isReceivingAnswer: function() {
        return this.phase == gs || this.phase == Ho || this.phase == Ma || this.phase == Go
    },
    isRecovering: function() {
        return this.recoveryBean.isRecovery()
    },
    isStreamingSession: function() {
        return !this.isPolling
    },
    getPushServerAddress: function() {
        return this.sessionServerAddress == null ? this.serverAddressCache : this.sessionServerAddress
    },
    getSessionId: function() {
        return this.sessionId
    },
    getSessionHost: function() {
        return this.sessionServerAddress
    },
    createSession: function(e, t, n) {
        this.serverBusy = n;
        var i = this.phase != Hi && this.phase != Mi ? Hd : Jd;
        return As.canMakeRequest() ? (i == Hd && (st.logDebug(m.resolve(580), this),
        this.closeSession("new." + (t || ""), Hd, Zd)),
        st.logInfo(m.resolve(581), this),
        this.reset(),
        this.prepareSlowing(),
        this.connectionBean.simpleSetter("sessionId", null),
        this.connectionBean.simpleSetter("serverSocketName", null),
        this.connectionBean.simpleSetter("serverInstanceAddress", null),
        this.serverAddressCache = this.connectionBean.serverAddress,
        this.ignoreServerAddressCache = this.policyBean.serverInstanceAddressIgnored,
        this.incPushPhase(),
        !0) : (st.logDebug(m.resolve(579), this),
        this.closeSession("mad", i, l3),
        !1)
    },
    bindSession: function(e) {
        if (!As.canMakeRequest())
            return this.closeSession("madb", Hd, l3),
            !1;
        if (this.bindCount++,
        ut.verifyOk(this.phase == Uo || this.phase == Is || this.phase == Hi) || st.logError(m.resolve(582)),
        this.phase == Hi) {
            if (!this.changePhaseType(Is))
                return !1;
            this.prepareSlowing()
        }
        return this.handleReverseHeartbeat(!0),
        this.incPushPhase(),
        this.isPolling ? st.logDebug(m.resolve(583), this) : st.logInfo(m.resolve(584), this),
        !0
    },
    isActive: function() {
        return this.phase == gs || this.phase == Oa || this.phase == Ac || this.phase == Ho || this.phase == Ma || this.phase == Go
    },
    requestSwitch: function(e, t, n) {
        this.handlerPhase = e,
        !this.switchRequired && (st.logDebug(m.resolve(585), this),
        this.slowRequired = !1,
        this.phase == jr || this.phase == Mi || this.phase == Hi ? (st.logError(m.resolve(586)),
        this.handler.createMachine(this.handlerPhase, t, n)) : this.phase == Uo || this.phase == Is ? this.handler.switchMachine(this.handlerPhase, t, n) : (this.switchRequired = !0,
        this.switchForced = n,
        this.switchCause = t,
        this.forceRebind(t)))
    },
    requestSlow: function(e) {
        this.handlerPhase = e,
        !this.slowRequired && (st.logDebug(m.resolve(587), this),
        ut.verifyOk(this.phase != jr && this.phase != Mi && this.phase != Hi) || st.logError(m.resolve(588)),
        this.phase == Uo || this.phase == Is ? this.handler.slowMachine(this.handlerPhase) : (this.slowRequired = !0,
        this.forceRebind("slow")))
    },
    prepareSlowing: function() {
        (this.phase == Hi || this.phase == Mi) && this.slowing.prepareForSync(),
        this.isPolling && this.forced && this.slowing.resetSync()
    },
    handleReverseHeartbeat: function(e) {
        this.phase == Nt._OFF || this.phase == Nt.CREATING || this.phase == Nt.SLEEP || (this.policyBean.reverseHeartbeatInterval > 0 ? this.controlHandler.startReverseHeartbeats(this.policyBean.reverseHeartbeatInterval, e) : this.controlHandler.stopReverseHeartbeats(e))
    },
    closeSession: function(e, t, n) {
        st.logInfo(m.resolve(589), this, e),
        this.phase != Hi && this.phase != jr && this.phase != Mi ? (this.handler.onObsoleteControlLink(this.getPushServerAddress()),
        t || this.sendDestroySession(e),
        this.handlerPhase = this.handler.onSessionClose(this.handlerPhase, n),
        this.connectionBean.simpleSetter("sessionId", null),
        this.connectionBean.simpleSetter("serverSocketName", null),
        this.connectionBean.simpleSetter("serverInstanceAddress", null)) : this.handlerPhase = this.handler.onSessionClose(this.handlerPhase, n),
        this.shutdown(!n)
    },
    resetTimers: function() {
        this.policyBean.resetRetryDelay(this.policyBean.retryDelay),
        this.policyBean.resetConnectTimeout(this.policyBean.retryDelay)
    },
    shutdown: function(e) {
        if (this.incPushPhase(),
        this.reset(),
        this.changePhaseType(e ? Mi : Hi),
        this.phase == Hi && this.onlineHandler)
            try {
                window.removeEventListener("online", this.onlineHandler)
            } catch {}
        st.logDebug(m.resolve(590), this)
    },
    doPause: function(e) {
        if (this.changePhaseType(this.phase == gs ? Is : Uo)) {
            this.incPushPhase();
            var t = e;
            this.isPolling && (e >= this.policyBean.pollingInterval || this.policyBean.simpleSetter("pollingInterval", e),
            t = this.getRealPollingInterval()),
            this.phase != Is && t && t > 0 ? (st.logDebug(m.resolve(591)),
            this.launchTimeout("pause", t)) : this.onTimeout("noPause", this.phaseCount)
        }
    },
    onTimeout: function(e, t, n, i) {
        if (t == this.phaseCount) {
            st.isDebugLogEnabled() && st.logDebug(m.resolve(592), e, Cr[this.phase], "sid", this.sessionId, "cause=", i, "preparingRecovery=", this.preparingRecovery);
            var r = "timeout." + this.phase + "." + this.bindCount;
            if (this.phase == Mi && i && (r = i),
            this.phase == jr) {
                var s = this.recoveryBean.timeLeftMs(this.policyBean.sessionRecoveryTimeout);
                if (this.recoveryBean.isRecovery() && s > 0)
                    st.isDebugLogEnabled() && st.logDebug(m.resolve(593), s),
                    this.policyBean.increaseConnectTimeout(),
                    this.handler.recoverSession(this.handlerPhase, r, this.forced);
                else {
                    st.logDebug(m.resolve(594));
                    var o = "create.timeout";
                    this.closeSession(o, Jd, Zd),
                    this.policyBean.increaseConnectTimeout(),
                    this.launchTimeout("zeroDelay", 0, o)
                }
            } else
                this.phase == gs || this.phase == Ac || this.phase == Go || this.phase == Mi ? this.slowRequired || this.switchRequired ? (st.logDebug(m.resolve(595)),
                this.handler.createMachine(this.handlerPhase, r + ".switch", this.switchForced)) : !this.isPolling || this.forced ? this.preparingRecovery ? (st.logDebug(m.resolve(596)),
                this.handler.recoverSession(this.handlerPhase, r, this.forced)) : (st.logDebug(m.resolve(597)),
                this.handler.retry(this.handlerPhase, r, this.forced, this.serverBusy)) : (st.logDebug(this.preparingRecovery ? "Timeout: switch transport from polling (ignore recovery)" : "Timeout: switch transport from polling"),
                this.handler.createMachine(this.handlerPhase, r, !1)) : this.phase == Oa ? (this.workedBefore--,
                this.slowRequired || this.switchRequired ? this.handler.createMachine(this.handlerPhase, r + ".switch", this.switchForced) : this.workedBefore > 0 || this.forced ? this.handler.retry(this.handlerPhase, r, this.forced, this.serverBusy) : this.createNewOnFirstBindTimeout() ? this.handler.createMachine(this.handlerPhase, r + ".switch", this.switchForced) : this.onSessionGivesUp(this.handlerPhase, r)) : this.phase == Uo ? (this.isPolling && this.slowing.testPollSync(n),
                this.bindSession("loop")) : this.phase == Is ? this.bindSession("loop1") : this.phase == Ho ? this.timeoutForStalled() : this.phase == Ma ? this.timeoutForReconnect() : st.logWarn(m.resolve(598), this)
        }
    },
    createNewOnFirstBindTimeout: function() {
        return this.isPolling
    },
    shouldGiveUpTrying: function() {
        return this.forced || this.handler.shouldGiveUpTrying()
    },
    onSessionGivesUp: function(e, t) {
        var n = this.shouldGiveUpTrying();
        if (n) {
            var i = this.phase != Hi && this.phase != Mi ? Hd : Jd;
            this.closeSession("giveup", i, l3)
        }
        this.handler.onSessionGivesUp(e, t, n)
    },
    formatArgs: function(e) {
        var t = "";
        for (var n in e)
            t += n + "=" + e[n] + " ";
        return t
    },
    onErrorEvent: function(e, t) {
        t = t || {};
        var n = t.closedOnServer
          , i = t.fromWS
          , r = t.unableToOpen
          , s = t.noImplAvailable
          , o = t.possibleLoop
          , a = t.tryRecovery
          , c = t.serverBusyError
          , l = t.reconnectMaxDelay
          , u = this.recoveryBean.timeLeftMs(this.policyBean.sessionRecoveryTimeout);
        st.isDebugLogEnabled() && st.logDebug(m.resolve(599), Cr[this.phase], "reason=" + e, "sid=" + this.sessionId, "timeLeft=" + u, "isRecoveryDisabled=" + this.isRecoveryDisabled, this.formatArgs(t));
        var h = a && u > 0;
        if (this.phase == Ho || this.phase == Go || this.phase == Ma || this.phase == Ac || this.phase == Uo)
            h && !this.isRecoveryDisabled ? (st.logDebug(m.resolve(600)),
            this.preparingRecovery = !0,
            this.changePhaseType(Mi),
            this.launchTimeout("firstRetryMaxDelay", Et.randomG(this.policyBean.firstRetryMaxDelay), e)) : (st.logDebug(m.resolve(601)),
            this.closeSession(e, n, Zd),
            o ? this.launchTimeout("currentRetryDelay", this.calculateRetryDelay(), e) : l ? this.launchTimeout("reconnectMaxDelay", Math.ceil(Math.random() * l), e) : this.launchTimeout("firstRetryMaxDelay", Et.randomG(this.policyBean.firstRetryMaxDelay), e));
        else if (this.phase == jr || this.phase == gs || this.phase == Oa)
            if (this.recoveryBean.isRecovery() && u > 0 && !n)
                st.logDebug(m.resolve(602)),
                this.preparingRecovery = !0,
                this.changePhaseType(Mi),
                this.launchTimeout("currentRetryDelay", this.calculateRetryDelay(), e),
                this.policyBean.increaseRetryDelay();
            else if (this.switchRequired && !this.forced || mi.isProbablyAndroidBrowser())
                st.logDebug(m.resolve(603)),
                this.handler.createMachine(this.handlerPhase, this.switchCause + ".error", this.switchForced);
            else {
                var d = n ? "closed on server" : "socket error";
                st.logDebug(m.resolve(604), d),
                this.closeSession(e, n, Zd),
                c ? (this.launchTimeout("zeroDelay", 0, e),
                this.policyBean.increaseConnectTimeoutToMax()) : n ? l ? this.launchTimeout("reconnectMaxDelay", Math.ceil(Math.random() * l), e) : this.launchTimeout("zeroDelay", 0, e) : this.recoveryBean.isRecovery() && u <= 0 ? this.launchTimeout("zeroDelay", 0, e) : (this.launchTimeout("currentRetryDelay", this.calculateRetryDelay(), e),
                this.policyBean.increaseRetryDelay())
            }
    },
    onLoop: function(e) {
        this.evalQueue && this.evalQueue.garbageCollection && this.evalQueue.garbageCollection(),
        this.phase == Ho || this.phase == Ma || this.phase == Go || this.phase == gs ? this.switchRequired ? this.handler.switchMachine(this.handlerPhase, this.switchCause, this.switchForced) : this.slowRequired ? this.handler.slowMachine(this.handlerPhase) : this.doPause(e) : (ut.fail(),
        st.logError(m.resolve(605), this))
    },
    onEvent: function() {
        if (this.phase == jr) {
            if (!this.changePhaseType(gs))
                return;
            this.timeoutForExecution()
        } else if (this.phase != gs)
            if (this.phase == Ac || this.phase == Oa || this.phase == Ma || this.phase == Go || this.phase == Ho) {
                if (!this.changePhaseType(Ho))
                    return;
                this.timeoutForStalling()
            } else
                ut.fail(),
                st.logError(m.resolve(606), this)
    },
    createSent: function() {
        if (As.incMadTest(),
        this.sentTime = Et.getTimeStamp(),
        ut.verifyOk(this.phase == Hi || this.phase == Mi) || st.logError(m.resolve(607)),
        !this.changePhaseType(jr))
            return !1;
        this.launchTimeout("currentConnectTimeout", this.getCurrentConnectTimeout()),
        this.evalQueue = this.handler.getEvalQueue()
    },
    bindSent: function() {
        if (this.sentTime = Et.getTimeStamp(),
        ut.verifyOk(this.phase == Uo || this.phase == Is) || st.logError(m.resolve(608), this),
        !this.changePhaseType(this.phase == Uo ? Ac : Oa))
            return !1;
        this.serverBusy = !1,
        this.launchTimeout("bindTimeout", this.getBindTimeout()),
        this.evalQueue = this.handler.getEvalQueue()
    },
    launchTimeout: function(e, t, n) {
        return st.isDebugLogEnabled() && st.logDebug(m.resolve(609), t, e),
        be.addTimedTask(this.onTimeout, t, this, [e, this.phaseCount, t, n])
    },
    timeoutForStalling: function() {
        if (this.policyBean.keepaliveInterval > 0) {
            var e = Et.getTimeStamp();
            e - this.lastKATO < 50 && this.lastKATask ? be.modifyTaskParam(this.lastKATask, 1, this.phaseCount) : (this.lastKATO = e,
            this.lastKATask = this.launchTimeout("keepaliveInterval", this.policyBean.keepaliveInterval))
        }
    },
    timeoutForStalled: function() {
        this.changePhaseType(Ma) && this.launchTimeout("stalledTimeout", this.policyBean.stalledTimeout)
    },
    timeoutForReconnect: function() {
        if (this.changePhaseType(Go)) {
            var e = this.recoveryBean.timeLeftMs(this.policyBean.sessionRecoveryTimeout);
            this.preparingRecovery = e > 0 && !this.isRecoveryDisabled,
            this.launchTimeout("reconnectTimeout", this.policyBean.reconnectTimeout)
        }
    },
    timeoutForExecution: function() {
        ut.verifyValue(this.phase, gs) || st.logError(m.resolve(610)),
        this.launchTimeout("stalledTimeout", this.policyBean.stalledTimeout)
    },
    getBindTimeout: function() {
        return this.isPolling ? this.getCurrentConnectTimeout() + this.policyBean.idleTimeout : this.workedBefore > 0 && this.reconnectTimeout != null ? this.reconnectTimeout : this.getCurrentConnectTimeout()
    },
    getRealPollingInterval: function() {
        if (this.phase == Is)
            return this.policyBean.pollingInterval;
        var e = this.policyBean.pollingInterval;
        if (this.sentTime) {
            var t = Et.getTimeStamp()
              , n = t - this.sentTime;
            e > n ? e -= n : e = 0
        }
        return e
    },
    calculateRetryDelay: function() {
        var e = Et.getTimeStamp() - this.sentTime
          , t = this.getCurrentRetryDelay();
        return e > t ? 0 : t - e
    },
    calculateReconnectTimeout: function() {
        this.sentTime || (ut.fail(),
        st.logError(m.resolve(611), this),
        this.reconnectTimeout = null);
        var e = Et.getTimeStamp() - this.sentTime
          , t = this.getCurrentConnectTimeout();
        this.reconnectTimeout = (e > t ? t : e) + t
    },
    onStreamResponse: function(e, t) {
        if (!(Bt.isUnloaded() || !this.checkSessionPhase(t)) && e !== "") {
            if (e == null) {
                As.rollbackLastMadTest(),
                this.onErrorEvent("nullresp");
                return
            }
            this.evalQueue._enqueue(t, e)
        }
    },
    onStreamError: function(e, t, n, i, r) {
        Bt.isUnloaded() || !this.checkSessionPhase(t) || (As.rollbackLastMadTest(),
        this.onErrorEvent("failure." + e, {
            fromWS: n,
            unableToOpen: i,
            possibleLoop: r,
            tryRecovery: !0
        }))
    },
    onStreamEnd: function(e, t) {
        this.sessionRecovery && this.phase == Mi || this.checkSessionPhase(e) && (As.rollbackLastMadTest(),
        this.onErrorEvent("wrongend", {
            fromWS: t,
            tryRecovery: !0
        }))
    },
    evaluationError: function() {
        this.onErrorEvent("eval")
    },
    onSlowRequested: function() {
        this.switchRequired || this.slowRequired || this.handler.onSlowRequired(this.handlerPhase)
    },
    onSynchOk: function() {
        Oi.isDebugLogEnabled() && Oi.logDebug(m.resolve(612)),
        this.onEvent(),
        this.phase == Ho && (this.workedBefore = $N)
    },
    onServerSentBandwidth: function(e) {
        Oi.isDebugLogEnabled() && Oi.logDebug(m.resolve(613), e),
        this.serverSentBW = e,
        this.policyBean.simpleSetter("realMaxBandwidth", e == "unmanaged" ? "unlimited" : e)
    },
    onError41: function() {
        Oi.isDebugLogEnabled() && Oi.logDebug(m.resolve(614)),
        this.onErrorEvent("error41", {
            closedOnServer: !0
        })
    },
    onKeepalive: function() {
        Oi.isDebugLogEnabled() && Oi.logDebug(m.resolve(615)),
        this.onEvent(),
        this.handler.onServerKeepalive()
    },
    onOKReceived: function(e, t, n, i) {
        Oi.isDebugLogEnabled() && Oi.logDebug(m.resolve(616));
        var r = this.getPushServerAddress()
          , s = r;
        t != null && !this.ignoreServerAddressCache && (t = no.completeControlLink(s, t),
        s = t),
        this.sessionServerAddress = s,
        r != this.sessionServerAddress && (this.handler.onObsoleteControlLink(r),
        this.handler.onNewControlLink(this.sessionServerAddress)),
        i && (this.isPolling ? this.policyBean.simpleSetter("idleTimeout", i) : this.policyBean.simpleSetter("keepaliveInterval", i)),
        this.phase == jr ? (this.sessionId != null && this.sessionId != e && (st.logInfo(m.resolve(617), e, this.sessionId),
        this.reset()),
        this.sessionId = e) : (ut.verifyValue(this.sessionId, e) || st.logError(m.resolve(618)),
        this.calculateReconnectTimeout()),
        this.slowing.startSync(this.isPolling),
        this.connectionBean.simpleSetter("sessionId", e),
        this.connectionBean.simpleSetter("serverInstanceAddress", this.sessionServerAddress),
        this.onEvent(),
        this.phase == gs ? this.recoveryBean.isRecovery() ? this.recoveryBean.restoreTimeLeft() : (this.handler.onSessionStart(n),
        this.cachedRequiredBW && (this.changeBandwidth(),
        this.cachedRequiredBW = !1)) : (this.handler.onChangeRequestLimitLength(n),
        this.handler.onSessionBound(),
        this.onSessionBound())
    },
    onIPReceived: function(e) {
        e && (this.handler.onIPReceived(e),
        this.connectionBean.simpleSetter("clientIp", e))
    },
    onSyncReceived: function(e) {
        Oi.isDebugLogEnabled() && Oi.logDebug(m.resolve(619)),
        this.slowing.syncCheck(e),
        this.onEvent()
    },
    onLoopReceived: function(e) {
        Oi.isDebugLogEnabled() && Oi.logDebug(m.resolve(620)),
        this.onLoop(e)
    },
    onSyncError: function(e) {
        this.onSessionError(e)
    },
    forwardError: function(e, t) {
        if (e === this.policyBean.remoteAdapterStatusObserver.metadataErrorCode) {
            this.onMetadataAdapterError();
            return
        }
        switch (e) {
        case 20:
            this.onSyncError("syncerror");
            break;
        case 4:
            this.onSyncError("recovery.error");
            break;
        case 5:
            this.onFatalError(e, t);
            break;
        case 40:
        case 41:
        case 48:
            this.onSessionError("error" + e);
            break;
        default:
            this.onFatalError(e, t)
        }
    },
    forwardREQERR: function(e, t, n) {
        if (e == 20)
            this.onSyncError("syncerror");
        else if (e == 11 || e == 65 || e == 67)
            e == 11 ? this.onFatalError(21, t) : this.onFatalError(e, t);
        else if (n != null)
            try {
                n()
            } catch (i) {
                this.handler.onFatalError(i)
            }
        else
            Oi.isWarnLogEnabled() && Oi.logWarn(m.resolve(621), e, t)
    },
    forwardERROR: function(e, t) {
        this.onFatalError(e, t)
    },
    onMetadataAdapterError: function() {
        As.rollbackLastMadTest(),
        this.onErrorEvent("metadata.adapter.disconnected", {
            closedOnServer: !0,
            reconnectMaxDelay: this.policyBean.remoteAdapterStatusObserver.reconnectMaxDelay
        })
    },
    onSessionError: function(e) {
        As.rollbackLastMadTest(),
        this.onErrorEvent(e, {
            closedOnServer: !0
        })
    },
    disconnectAndReconnect: function() {
        As.rollbackLastMadTest(),
        this.onErrorEvent("remote.adapter.disconnected", {
            reconnectMaxDelay: this.policyBean.remoteAdapterStatusObserver.reconnectMaxDelay
        })
    },
    onServerBusy: function() {
        As.rollbackLastMadTest(),
        this.serverBusy = !0,
        this.onErrorEvent("server.busy", {
            closedOnServer: !0,
            serverBusyError: !0
        })
    },
    onFatalError: function(e, t) {
        this.onServerError(e, t)
    },
    onEnd: function(e) {
        Oi.isDebugLogEnabled() && Oi.logDebug(m.resolve(622), e),
        this.closeSession("end", Jd, l3)
    },
    onPROGCounterMismatch: function() {
        this.isRecoveryDisabled = !0
    },
    onUpdateReceived: function(e, t) {
        this.onEvent(),
        this.handler.onUpdateReceived(e, t)
    },
    onEndOfSnapshotEvent: function(e) {
        this.onEvent(),
        this.handler.onEndOfSnapshotEvent(e)
    },
    onClearSnapshotEvent: function(e) {
        this.onEvent(),
        this.handler.onClearSnapshotEvent(e)
    },
    onLostUpdatesEvent: function(e) {
        this.onEvent(),
        this.handler.onLostUpdatesEvent(e)
    },
    onMessageAck: function(e, t) {
        this.onEvent(),
        this.handler.onMessageAck(e, t)
    },
    onMessageOk: function(e, t) {
        this.onEvent(),
        this.handler.onMessageOk(e, t)
    },
    onMessageDeny: function(e, t, n, i) {
        this.onEvent(),
        this.handler.onMessageDeny(e, t, i, n)
    },
    onMessageDiscarded: function(e, t) {
        this.onEvent(),
        this.handler.onMessageDiscarded(e, t)
    },
    onMessageError: function(e, t, n, i) {
        this.onEvent(),
        this.handler.onMessageError(e, t, i, n)
    },
    onTableError: function(e, t, n) {
        this.onEvent(),
        this.handler.onTableError(e, t, n)
    },
    onServerError: function(e, t) {
        this.onEnd(t),
        this.handler.onServerError(e, t)
    },
    onUnsubscription: function(e) {
        this.onEvent(),
        this.handler.onUnsubscription(e)
    },
    onSubscription: function(e, t, n, i, r) {
        this.onEvent(),
        this.handler.onSubscription(e, t, n, i, r)
    },
    onSubscriptionReconf: function(e, t, n) {
        this.onEvent(),
        this.handler.onSubscriptionReconf(e, t, n)
    },
    getDataNotificationProg: function() {
        return this.dataNotificationCount
    },
    onDataNotification: function() {
        this.dataNotificationCount++
    },
    forceRebind: function(e) {
        st.logInfo(m.resolve(623), this);
        var t = no.getForceRebindParams(e, this.slowing.getDelay())
          , n = new D3(e,this,this.push_phase,this.policyBean)
          , i = {
            onREQOK: function(r) {},
            onREQERR: function(r, s, o, a) {
                n.discard(),
                st.logError(m.resolve(624) + o + " " + a + " - The error will be silently ignored.")
            }
        };
        this.controlHandler.addRequest(this.sessionId, t, je.FORCE_REBIND, n, null, i)
    },
    sendDestroySession: function(e) {
        st.logInfo(m.resolve(625), this);
        var t = no.getDestroyParams(this.sessionId, e)
          , n = {
            onREQOK: function(i) {},
            onREQERR: function(i, r, s, o) {
                st.logError(m.resolve(626) + s + " " + o + " - The error will be silently ignored.")
            }
        };
        this.forwardDestroyRequestToTransport(this.sessionId, t, je.DESTROY, null, this.getPushServerAddress(), n)
    },
    changeBandwidth: function() {
        if (!(this.phase == Hi || this.phase == Mi)) {
            if (this.phase == jr) {
                this.cachedRequiredBW = !0;
                return
            } else if (this.serverSentBW == "unmanaged")
                return;
            var e = no.getConstraintParams(this.policyBean)
              , t = {
                onREQOK: function(n) {},
                onREQERR: function(n, i, r, s) {
                    st.logError(m.resolve(627) + jN(e) + " caused the error: ", r, s)
                }
            };
            this.controlHandler.addRequest(null, e, je.CONSTRAINT, null, null, t)
        }
    },
    onServerName: function(e) {
        this.connectionBean.simpleSetter("serverSocketName", e)
    },
    onSessionBound: function() {
        this.resetTimers()
    },
    forwardDestroyRequestToTransport: function(e, t, n, i, r, s) {
        throw new Error("abstract method")
    },
    onMpnRegisterOK: function(e, t) {
        this.mpnManager.eventManager.onRegisterOK(e, t)
    },
    onMpnRegisterError: function(e, t) {
        this.mpnManager.eventManager.onRegisterError(e, t)
    },
    onMpnSubscribeOK: function(e, t) {
        this.mpnManager.eventManager.onSubscribeOK(e, t)
    },
    onMpnSubscribeError: function(e, t, n) {
        this.mpnManager.eventManager.onSubscribeError(e, t, n)
    },
    onMpnUnsubscribeOK: function(e) {
        this.mpnManager.eventManager.onUnsubscribeOK(e)
    },
    onMpnUnsubscribeError: function(e, t, n) {
        this.mpnManager.eventManager.onUnsubscribeError(e, t, n)
    },
    getCurrentConnectTimeout: function() {
        return this.policyBean.currentConnectTimeout
    },
    getCurrentRetryDelay: function() {
        return this.policyBean.currentRetryDelay
    }
};
function jN(e) {
    var t = "{";
    for (var n in e)
        t += n + "=" + e[n] + " ";
    return t += "}",
    t
}
var N3 = function() {
    this.progress = 0
};
N3.prototype = {
    extractNewData: function(e, t) {
        var n = -1;
        if (t)
            n = e.length;
        else {
            if (n = e.lastIndexOf(`\r
`),
            n < 0)
                return null;
            n += 2
        }
        var i = e.substring(this.progress, n);
        return this.progress = n,
        i
    },
    streamProgress: function(e) {
        return this.extractNewData(e, !1)
    },
    streamComplete: function(e) {
        return this.extractNewData(e, !0)
    }
};
var wr = m.getLoggerProxy(G.STREAM), qN = vt.isBrowser() ? 2 : 3, Pg = !0, T3;
vt.isNodeJS() && (T3 = k3.NodeXHR);
var zN = 1;
function _s() {
    this._callSuperConstructor(_s),
    this.objectId = zN++,
    wr.isDebugLogEnabled() && wr.logDebug(m.resolve(628), this.objectId),
    this.isOpen = !1,
    this.sendPhase = null,
    this.cachedSenderStatus = null,
    this.xhrInstance = null,
    this.parser = null,
    this.status0Disabled = !1,
    this.constr = _s
}
_s.name == null && (_s.name = "XSXHRConnection");
var Ca = null;
Cn.attachPublicStaticMethods(_s, {
    isAvailable: function() {
        if (Ca !== null)
            return Ca;
        if (mi.isProbablyIE(9, !0))
            Ca = !1;
        else if (typeof XMLHttpRequest < "u") {
            var e = new XMLHttpRequest;
            (typeof e.withCredentials < "u" || vt.isOther()) && (Ca = !0)
        } else
            !vt.isBrowser() && T3 && (Ca = !0);
        return Ca === null && (Ca = !1),
        Ca
    },
    isStreamEnabled: function() {
        return !mi.isProbablyOldOpera() && !mi.isProbablyPlaystation()
    },
    isCrossSite: !0,
    isCrossProtocol: !0,
    areCookiesGuaranteed: function() {
        return vt.isNodeJS() || G.PAGE_PROTOCOL != "file:" ? !0 : !vt.isBrowserDocument()
    },
    attachEngineId: !1,
    canUseCustomHeaders: !0
});
function XN(e) {
    return function() {
        be.executeTask(e)
    }
}
_s.prototype = {
    toString: function() {
        return ["[", "XSXHRConnection", this.isOpen, this.sendPhase, this.cachedSenderStatus, "]"].join("|")
    },
    _close: function() {
        if (this.isOpen) {
            if (wr.isDebugLogEnabled() && wr.logDebug(m.resolve(629), this.objectId),
            this.sendPhase = null,
            this.xhrInstance)
                try {
                    this.xhrInstance.abort()
                } catch {
                    wr.logDebug(m.resolve(630))
                }
            this.off()
        }
    },
    _load: function(e, t, n, i, r) {
        if (this.isOpen)
            return null;
        T3 ? this.xhrInstance = new T3 : this.xhrInstance = new XMLHttpRequest,
        this.parser = new N3;
        var s = be.packTask(this.onPartialResponse, this, [t, n, r, i]);
        this.xhrInstance.onreadystatechange = XN(s),
        this.sendPhase = t,
        this.cachedSenderStatus = null,
        wr.isDebugLogEnabled() && wr.logDebug(m.resolve(631), this.objectId, e.getFile(), e.getData());
        try {
            this.xhrInstance.open(e.getMethod(), e.getUrl(), !0),
            this.xhrInstance.withCredentials = e.getCookieFlag();
            var o = e.getExtraHeaders();
            if (o)
                for (var a in o)
                    this.xhrInstance.setRequestHeader(a, o[a]);
            this.xhrInstance.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"),
            this.xhrInstance.send(e.getData()),
            this.isOpen = !0
        } catch (c) {
            return wr.logError(m.resolve(632), this.objectId, c),
            !1
        }
        return !0
    },
    onPartialResponse: function(e, t, n, i) {
        if (!(this.sendPhase != e || Bt.isUnloaded())) {
            var r = null;
            this.isHttpStatusOk() && t && (this.xhrInstance.readyState == 3 ? r = this.parser.streamProgress(this.xhrInstance.responseText) : this.xhrInstance.readyState == 4 && (r = this.parser.streamComplete(this.xhrInstance.responseText)),
            wr.isDebugLogEnabled() && r && wr.logDebug(m.resolve(633), this.objectId, r),
            r != null && be.executeTask(t, [r, this.sendPhase])),
            this.xhrInstance.readyState == 4 && (this.isHttpStatusOk() || (this.status0Disabled ? (i && (wr.isDebugLogEnabled && wr.logDebug(m.resolve(634), this.objectId),
            be.executeTask(i, ["status0", this.sendPhase, !1, Pg, !1])),
            Pg = !Pg,
            this.status0Disabled = !1) : t && be.executeTask(t, [null, this.sendPhase])),
            wr.isDebugLogEnabled && wr.logDebug(m.resolve(635), this.objectId),
            (this.xhrInstance.readyState == 4 || r == "") && n && be.addTimedTask(this.notifyEnd, 100, this, [this.sendPhase, n]),
            this.off())
        }
    },
    notifyEnd: function(e, t) {
        be.executeTask(t, [e])
    },
    off: function() {
        this.isOpen = !1,
        this.sendPhase = null,
        this.xhrInstance && (delete this.xhrInstance.onreadystatechange,
        delete this.xhrInstance)
    },
    isHttpStatusOk: function() {
        try {
            if (this.cachedSenderStatus === null) {
                if (this.xhrInstance.readyState < qN)
                    return !1;
                this.cachedSenderStatus = this.xhrInstance.status >= 200 && this.xhrInstance.status <= 299,
                this.xhrInstance.status == 0 && (this.status0Disabled = !0)
            }
            return this.cachedSenderStatus
        } catch (e) {
            return wr.logDebug(m.resolve(636), this.objectId, e),
            !1
        }
    }
};
ot(_s, Cn);
var Ea = m.getLoggerProxy(G.STREAM)
  , Kr = function() {
    this._callSuperConstructor(Kr),
    this.isOpen = !1,
    this.sendPhase = null,
    this.parser = null,
    this.xDomainReqInstance = null,
    this.progresses = 0,
    this.constr = Kr
};
Kr.name == null && (Kr.name = "IEXSXHRConnection");
var Gd = null;
Cn.attachPublicStaticMethods(Kr, {
    isAvailable: function() {
        return Gd !== null || (typeof XDomainRequest < "u" ? Gd = !0 : Gd = !1),
        Gd
    },
    isStreamEnabled: !0,
    isCrossSite: !0,
    isCrossProtocol: !1,
    areCookiesGuaranteed: !1,
    attachEngineId: !1,
    canUseCustomHeaders: !1
});
function u3(e) {
    return function() {
        be.executeTask(e)
    }
}
Kr.prototype = {
    toString: function() {
        return ["[", "IEXSXHRConnection", this.isOpen, this.sendPhase, "]"].join("|")
    },
    _close: function() {
        if (this.isOpen) {
            if (Ea.logDebug(m.resolve(637)),
            this.sendPhase = null,
            this.xDomainReqInstance)
                try {
                    this.xDomainReqInstance.abort()
                } catch {
                    Ea.logDebug(m.resolve(638))
                }
            this.off()
        }
    },
    _load: function(e, t, n, i, r) {
        if (this.isOpen)
            return null;
        this.progresses = 0,
        this.xDomainReqInstance = new XDomainRequest,
        this.parser = new N3;
        var s = be.packTask(this.respCompleteEvent, this, [t, n, r])
          , o = be.packTask(this.asyncError, this, [t, i, "xdr.err"])
          , a = be.packTask(this.asyncError, this, [t, i, "xdr.timeout"])
          , c = be.packTask(this.progressEvent, this, [t, n, !1]);
        this.xDomainReqInstance.onload = u3(s),
        this.xDomainReqInstance.onerror = u3(o),
        this.xDomainReqInstance.ontimeout = u3(a),
        this.xDomainReqInstance.onprogress = u3(c),
        this.sendPhase = t,
        Ea.isDebugLogEnabled() && Ea.logDebug(m.resolve(639), e.getFile(), e.getData());
        try {
            this.xDomainReqInstance.open(e.getMethod(), e.getUrl()),
            this.xDomainReqInstance.send(e.getData()),
            this.isOpen = !0
        } catch (l) {
            return Ea.logError(m.resolve(640), l),
            !1
        }
        return !0
    },
    asyncError: function(e, t, n) {
        this.sendPhase != e || Bt.isUnloaded() || (Ea.logDebug(m.resolve(641)),
        be.executeTask(t, [n, e, !1, this.progresses == 0, !1]))
    },
    progressEvent: function(e, t, n) {
        if (!(this.sendPhase != e || Bt.isUnloaded()) && (this.progresses++,
        t)) {
            var i;
            n ? i = this.parser.streamComplete(String(this.xDomainReqInstance.responseText)) : i = this.parser.streamProgress(String(this.xDomainReqInstance.responseText)),
            Ea.isDebugLogEnabled() && Ea.logDebug(m.resolve(642), i),
            i != null && be.executeTask(t, [i, this.sendPhase])
        }
    },
    respCompleteEvent: function(e, t, n) {
        this.sendPhase != e || Bt.isUnloaded() || (this.progressEvent(e, t, !0),
        this.off(),
        Ea.logDebug(m.resolve(643)),
        n && be.addTimedTask(this.notifyEnd, 100, this, [n, e]))
    },
    notifyEnd: function(e, t) {
        be.executeTask(e, [t])
    },
    off: function() {
        this.isOpen = !1,
        this.sendPhase = null,
        this.parser = null,
        this.progresses = 0,
        this.xDomainReqInstance && (this.xDomainReqInstance.onload = null,
        this.xDomainReqInstance.onerror = null,
        this.xDomainReqInstance.ontimeout = null,
        this.xDomainReqInstance.onprogress = null,
        this.xDomainReqInstance = null)
    }
};
ot(Kr, Cn);
var Xl = function() {
    this._callSuperConstructor(Xl)
};
Cn.attachPublicStaticMethods(Xl, {
    isAvailable: !1,
    isCrossSite: !1,
    isCrossProtocol: !1,
    areCookiesGuaranteed: !1,
    attachEngineId: !1,
    canUseCustomHeaders: !1
});
Xl.prototype = {
    _load: function(e, t, n, i, r) {
        return n && be.addTimedTask(this.notifySender, 1e3, this, [n, t]),
        !0
    },
    notifySender: function(e, t) {
        be.executeTask(e, ["", t])
    }
};
ot(Xl, Cn);
var Dc = function() {
    var e = mi.isProbablyAWebkit() && mi.isProbablyChrome(32, !0) ? null : "about:blank"
      , t = {}
      , n = {
        createFrame: function(i, r) {
            if (!vt.isBrowserDocument())
                return null;
            var s = document.getElementsByTagName("BODY")[0];
            if (!s)
                return null;
            r = r || e;
            var o = document.createElement("iframe");
            o.style.visibility = "hidden",
            o.style.height = "0px",
            o.style.width = "0px",
            o.style.display = "none",
            o.name = i,
            o.id = i,
            mi.isProbablyIE() || mi.isProbablyOldOpera() ? (o.src = r,
            s.appendChild(o)) : (s.appendChild(o),
            o.src = r);
            try {
                if (o.contentWindow) {
                    try {
                        o.contentWindow.name = i
                    } catch {}
                    return t[i] = o.contentWindow,
                    t[i]
                } else
                    return document.frames && document.frames[i] ? (t[i] = document.frames[i],
                    t[i]) : null
            } catch {
                return null
            }
        },
        getFrameWindow: function(i, r, s) {
            return r && !t[i] && this.createFrame(i, s),
            t[i] || null
        },
        disposeFrame: function(i) {
            if (t[i]) {
                try {
                    document.getElementsByTagName("BODY")[0].removeChild(document.getElementById(i))
                } catch {}
                delete t[i]
            }
        },
        removeFrames: function() {
            for (var i in t)
                try {
                    document.getElementsByTagName("BODY")[0].removeChild(document.getElementById(i))
                } catch {}
            t = {}
        }
    };
    return n.createFrame = n.createFrame,
    n.getFrameWindow = n.getFrameWindow,
    n.disposeFrame = n.disposeFrame,
    n.removeFrames = n.removeFrames,
    Bt.addUnloadHandler(n.removeFrames),
    n
}()
  , ab = "LS_querystring="
  , n7 = function() {};
n7.prototype = {
    getFixedOverhead: function(e) {
        return ab.length
    },
    getInvisibleOverhead: function(e) {
        return e ? encodeURIComponent(e).length - e.length : 0
    },
    wrapUp: function(e) {
        return ab + encodeURIComponent(e)
    }
};
ot(n7, Pa);
var F3 = function() {};
F3.prototype = {
    toString: function() {
        return "[LegacyEncoder]"
    },
    getExt: function() {
        return ".html"
    },
    wrapUp: function(e) {
        return e
    }
};
ot(F3, n7);
var KN = new F3
  , h3 = m.getLoggerProxy(G.STREAM)
  , YN = 1e3
  , Gl = function(e) {
    this._callSuperConstructor(Gl),
    e && (this.target = Ke.sanitizeIFrameName(e),
    Dc.getFrameWindow(e, !0)),
    this.isOpen = !1,
    this.constr = Gl,
    this.loadPhase = 0
};
Cn.attachPublicStaticMethods(Gl, {
    isAvailable: function() {
        return vt.isBrowserDocument()
    },
    isCrossSite: !0,
    isCrossProtocol: !0,
    areCookiesGuaranteed: !0,
    attachEngineId: !0,
    canUseCustomHeaders: !1
});
Gl.prototype = {
    toString: function() {
        return ["[", "FormConnection", this.target, "]"].join("|")
    },
    _close: function() {
        h3.logDebug(m.resolve(644)),
        this.isOpen = !1,
        this.loadPhase++
    },
    _load: function(e, t, n, i, r) {
        if (this.isOpen)
            return null;
        this._callSuperMethod(Gl, this._loadName, [e, t, n, i]);
        try {
            this.loadPhase++;
            var s = this.generateForm();
            if (!s)
                return !1;
            h3.isDebugLogEnabled() && h3.logDebug(m.resolve(645), e.getFile(), e.getData()),
            s.formEl.method = e.getMethod(),
            s.formEl.target = this.target,
            s.formEl.action = e.getUrl(),
            s.queryString.value = e.getData(),
            s.formEl.submit();
            var o = this.loadPhase;
            be.addTimedTask(this.deleteForm, YN, this, [s.formEl, o]),
            this.isOpen = !0
        } catch (a) {
            return h3.logError(m.resolve(646), a),
            !1
        }
        return !0
    },
    generateForm: function() {
        var e = document.getElementsByTagName("BODY")[0];
        if (!e)
            return null;
        var t = {};
        t.formEl = document.createElement("FORM");
        try {
            t.formEl.acceptCharset = "utf-8"
        } catch {}
        return t.formEl.style.display = "none",
        t.queryString = document.createElement("INPUT"),
        t.queryString.type = "hidden",
        t.queryString.name = "LS_querystring",
        t.formEl.appendChild(t.queryString),
        e.appendChild(t.formEl),
        t
    },
    deleteForm: function(e, t) {
        e.parentNode.removeChild(e),
        t == this.loadPhase && (this.isOpen = !1)
    },
    getEncoder: function() {
        return KN
    }
};
ot(Gl, Xl);
var QN = new F3
  , Vd = m.getLoggerProxy(G.STREAM)
  , Nc = function(e) {
    this._callSuperConstructor(Nc),
    this.target = Ke.sanitizeIFrameName(e),
    this.callPhase = 0,
    this.isOpen = !1,
    this.formConnection = null,
    this._frame = Dc.getFrameWindow(this.target, !0),
    this.constr = Nc
};
Cn.attachPublicStaticMethods(Nc, {
    isAvailable: function() {
        return vt.isBrowserDocument()
    },
    isCrossSite: !1,
    isCrossProtocol: !1,
    areCookiesGuaranteed: !0,
    attachEngineId: !0,
    isStreamEnabled: !0,
    canUseCustomHeaders: !1
});
Nc.prototype = {
    toString: function() {
        return ["[", "FrameConnection", this.isOpen, this.target, this.callPhase, this.formConnection, "]"].join("|")
    },
    _closeImpl: function(e) {
        e == this.callPhase && (this.callPhase++,
        this.isOpen && (this._loadImpl(this.callPhase, or.aboutBlank),
        this.isOpen = !1))
    },
    _close: function() {
        Vd.logDebug(m.resolve(647));
        var e = ++this.callPhase;
        be.addTimedTask(this._closeImpl, 0, this, [e])
    },
    _loadImpl: function(e, t, n, i, r) {
        if (!(e != this.callPhase || Bt.isUnloading())) {
            this._callSuperMethod(Nc, this._loadName, [t, n, i, r]),
            this.callPhase++,
            Vd.isDebugLogEnabled() && Vd.logDebug(m.resolve(648), t.getFile(), t.getData());
            try {
                var s = Dc.getFrameWindow(this.target);
                if (s == null)
                    return Vd.logError(m.resolve(649)),
                    !1;
                var o = t.getUrlWithParams();
                s.location.replace(o),
                this.isOpen = !0
            } catch (a) {
                return Vd.logError(m.resolve(650), a),
                !1
            }
            return !0
        }
    },
    loadByForm: function(e, t, n, i) {
        this.formConnection || (this.formConnection = new Gl(this.target)),
        this.callPhase++;
        var r = this.formConnection._load(e, t, n, i);
        return r && (this.isOpen = !0),
        r
    },
    _load: function(e, t, n, i, r) {
        if (e.method == or._POST)
            return this.loadByForm(e, t, n, i);
        var s = ++this.callPhase;
        return be.addTimedTask(this._loadImpl, 0, this, [s, e, t, n, i]),
        !0
    },
    getEncoder: function() {
        return QN
    }
};
ot(Nc, Xl);
var zb = function() {
    var e = 5e3
      , t = function() {
        this.initTouches()
    };
    return t.prototype = {
        clean: function() {},
        initTouches: function(n) {
            this.inUse = 0,
            this.touchPhase = 0,
            this.timeout = n || e
        },
        verifyTouches: function(n) {
            n == this.touchPhase && this.inUse <= 0 && this.clean()
        },
        dismiss: function() {
            this.inUse--,
            this.inUse <= 0 && be.addTimedTask(this.verifyTouches, this.timeout, this, [this.touchPhase])
        },
        touch: function() {
            this.touchPhase++,
            this.inUse < 0 && (this.inUse = 0),
            this.inUse++
        }
    },
    t.prototype.touch = t.prototype.touch,
    t.prototype.dismiss = t.prototype.dismiss,
    t.prototype.clean = t.prototype.clean,
    t.prototype.initTouches = t.prototype.initTouches,
    t
}()
  , Ll = -1
  , JN = 0
  , d3 = 1
  , ZN = 2
  , cb = 3
  , lb = 4
  , Dl = m.getLoggerProxy(G.STREAM)
  , eF = 2e3
  , tF = 1e4
  , nF = 0
  , Eu = {}
  , s1 = function(e) {
    this.path = e,
    this.ajaxTimeoutPhase = Et.randomG(),
    this.status = vt.isBrowserDocument() && (window.ActiveXObject || typeof XMLHttpRequest < "u") ? ZN : Ll,
    this.aframeId = ++nF,
    this.frameName = "LS_AJAXFRAME_" + this.aframeId,
    this.initTouches(),
    this.attachToGlobal()
};
s1.getAjaxFrame = function(e) {
    return Eu[e] || (Eu[e] = new s1(e),
    Eu[e]._load(!1)),
    Eu[e]
}
;
function iF(e) {
    Eu[e] && delete Eu[e]
}
s1.prototype = {
    toString: function() {
        return ["[", "AjaxFrameHandler", this.status, "]"].join("|")
    },
    attachToGlobal: function() {
        var e = this;
        Ut.exportGlobal(this.aframeId, "LS_a", function(t) {
            e.onAjaxFrameReady(t)
        }, "A")
    },
    clean: function(e) {
        this.status = Ll,
        Ut.cleanGlobal(this.aframeId, "LS_a", "A"),
        iF(this.path),
        Dc.disposeFrame(this.frameName)
    },
    init: function(e) {
        this.ajaxTimeoutPhase++,
        this.status = e ? cb : JN
    },
    _load: function(e) {
        if (this.status != Ll && (Dl.logDebug(m.resolve(651)),
        !this.isReady())) {
            this.init(e);
            var t = this.ajaxTimeoutPhase;
            Ke.isOffline() && Dl.logDebug(m.resolve(652));
            var n = "id=" + this.aframeId + "&";
            Ke.hasDefaultDomain() || (n += "domain=" + Ke.getDomain() + "&");
            var i = new or(this.path,"xhr.html",n)
              , r = new Nc(this.frameName);
            r._load(i),
            be.addTimedTask(this.frameTimeout, tF, this, [t]),
            be.addTimedTask(this.giveUp, eF, this, [t])
        }
    },
    onAjaxFrameReady: function() {
        Bt.isUnloaded() || this.status != d3 && (Dl.logDebug(m.resolve(653)),
        this.status = d3)
    },
    frameTimeout: function(e) {
        this.status != Ll && this.ajaxTimeoutPhase == e && !this.isReady() && (Dl.logDebug(m.resolve(654)),
        this._load(!0))
    },
    giveUp: function(e) {
        this.status != Ll && this.ajaxTimeoutPhase == e && !this.isReady() && (Dl.logDebug(m.resolve(655)),
        this.status = lb)
    },
    disable: function() {
        this.status = Ll,
        this.ajaxTimeoutPhase++
    },
    isReady: function() {
        return this.status === d3
    },
    isDisabled: function() {
        return this.status === Ll || this.status === cb || this.status === lb
    },
    sendXHR: function(e, t, n, i) {
        if (this.isDisabled())
            return !1;
        if (this.status !== d3)
            return null;
        Dl.logDebug(m.resolve(656), e);
        var r;
        try {
            r = Dc.getFrameWindow(this.frameName).sendRequest(e, t, n, i) !== !1
        } catch (s) {
            r = !1,
            Dl.logDebug(m.resolve(657), s)
        }
        return r === !1 && this.disable(),
        r
    }
};
ot(s1, zb, !0, !0);
var Lo = m.getLoggerProxy(G.STREAM)
  , rF = "/*"
  , ro = function() {
    this._callSuperConstructor(ro),
    this.sendPhase = null,
    this.sender = null,
    this.cachedSenderStatus = null,
    this.response = null,
    this.error = null,
    this.isOpen = !1,
    this.phase = 0,
    this.LS_x = this.onErrorImpl,
    this.myFrameHandler = null,
    this.constr = ro
};
ro.name == null && (ro.name = "XHRConnection");
Cn.attachPublicStaticMethods(ro, {
    isAvailable: function() {
        return vt.isBrowserDocument() && (window.ActiveXObject || typeof XMLHttpRequest < "u")
    },
    isCrossSite: !1,
    isCrossProtocol: !1,
    areCookiesGuaranteed: !0,
    attachEngineId: !1,
    canUseCustomHeaders: !0
});
ro.prototype = {
    toString: function() {
        return ["[", "XHRConnection", this.isOpen, this.phase, this.sendPhase, "]"].join("|")
    },
    _load: function(e, t, n, i, r) {
        if (this.myFrameHandler = s1.getAjaxFrame(e.getPath()),
        this.myFrameHandler.isDisabled())
            return this.myFrameHandler.dismiss(),
            !1;
        if (this.myFrameHandler.isReady()) {
            if (this.isOpen)
                return null
        } else
            return null;
        this.myFrameHandler.touch(),
        this.sendPhase = t,
        this.cachedSenderStatus = null,
        this.response = n,
        this.error = i,
        this.connectionEndCallback = r,
        this.phase++;
        var s = this
          , o = this.phase;
        return this.LS_h = function() {
            s.onReadyStateChangeImpl(o)
        }
        ,
        this.isOpen = !0,
        Lo.isDebugLogEnabled() && Lo.logDebug(m.resolve(658), e.getFile(), e.getData()),
        this.myFrameHandler.sendXHR(e.getUrl(), e.getData(), this, e.getExtraHeaders())
    },
    _close: function() {
        if (this.isOpen) {
            this.off(),
            Lo.logDebug(m.resolve(659));
            try {
                this.sender && this.sender.abort && this.sender.abort()
            } catch (e) {
                Lo.logError(m.resolve(660), e)
            }
            this.cleanRef()
        }
    },
    isHttpStatusOk: function() {
        try {
            if (this.cachedSenderStatus === null) {
                if (this.sender.readyState < 2)
                    return !1;
                this.cachedSenderStatus = this.sender.status >= 200 && this.sender.status <= 299
            }
            return this.cachedSenderStatus
        } catch (e) {
            return Lo.logDebug(m.resolve(661), e),
            !1
        }
    },
    onReadyStateChangeImpl: function(e) {
        if (!(Bt.isUnloaded() || e != this.phase || !this.sender) && (this.sender.readyState == 4 || this.sender.readyState == "complete")) {
            var t = null;
            this.isHttpStatusOk() && (t = this.sender.responseText,
            t = t.toString(),
            t.substring(0, 2) == rF && (t = t.substring(2, t.length - 2))),
            Lo.isDebugLogEnabled() && Lo.logDebug(m.resolve(662), t),
            this.response && be.executeTask(this.response, [t, this.sendPhase]),
            be.addTimedTask(this.notifyEnd, 100, this, [this.sendPhase]),
            this.off(),
            this.cleanRef()
        }
    },
    notifyEnd: function(e) {
        be.executeTask(this.connectionEndCallback, [e])
    },
    onErrorImpl: function(e) {
        Bt.isUnloaded() || (this.myFrameHandler.disable(),
        Lo.logDebug(m.resolve(663)),
        this.off(),
        this.error && be.executeTask(this.error, ["xhr.unknown", this.sendPhase, !1, !1, !1]),
        this.cleanRef())
    },
    cleanRef: function() {
        try {
            delete this.sender.onreadystatechange
        } catch (e) {
            Lo.logDebug(m.resolve(664), e)
        }
        try {
            delete this.sender
        } catch (e) {
            Lo.logDebug(m.resolve(665), e)
        }
        this.error = null,
        this.response = null,
        this.myFrameHandler && this.myFrameHandler.dismiss()
    },
    off: function() {
        this.isOpen = !1,
        this.phase++
    }
};
ot(ro, Cn);
var $d = m.getLoggerProxy(G.STREAM)
  , qo = function() {
    this._callSuperConstructor(qo),
    this.parser = null,
    this.constr = qo
};
qo.name == null && (qo.name = "XHRStreamingConnection");
var Nl = null;
Cn.attachPublicStaticMethods(qo, {
    isAvailable: function() {
        return Nl !== null || (vt.isBrowserDocument() ? mi.isProbablyIE() ? Nl = !1 : typeof XMLHttpRequest < "u" ? Nl = typeof new XMLHttpRequest().addEventListener < "u" : Nl = !1 : Nl = !1),
        Nl
    },
    isStreamEnabled: function() {
        return !mi.isProbablyOldOpera()
    },
    isCrossSite: !1,
    isCrossProtocol: !1,
    areCookiesGuaranteed: !0,
    attachEngineId: !1,
    canUseCustomHeaders: !0
});
qo.prototype = {
    toString: function() {
        return ["[", "XHRStreamingConnection", this.isOpen, this.phase, this.sendPhase, "]"].join("|")
    },
    _load: function(e, t, n, i, r) {
        var s = this._callSuperMethod(qo, this._loadName, [e, t, n, i, r]);
        return $d.logDebug(m.resolve(666)),
        s && (this.parser = new N3),
        s
    },
    onReadyStateChangeImpl: function(e) {
        if (!(Bt.isUnloaded() || e != this.phase || !this.sender)) {
            var t = null;
            this.isHttpStatusOk() && this.response && (this.sender.readyState == 3 ? t = this.parser.streamProgress(this.sender.responseText) : this.sender.readyState == 4 && (t = this.parser.streamComplete(this.sender.responseText)),
            $d.isDebugLogEnabled() && $d.logDebug(m.resolve(667), t),
            t != null && be.executeTask(this.response, [t, this.sendPhase])),
            this.sender.readyState == 4 && (!this.isHttpStatusOk() && this.response && be.executeTask(this.response, [null, this.sendPhase]),
            $d.isDebugLogEnabled() && $d.logDebug(m.resolve(668)),
            (this.sender.readyState == 4 || t == "") && this.connectionEndCallback && be.addTimedTask(this.notifyEnd, 100, this, [this.sendPhase]),
            this.off(),
            this.cleanRef())
        }
    }
};
ot(qo, ro);
function e1() {
    return !1
}
var vs = m.getLoggerProxy(G.STREAM)
  , gi = function(e, t, n) {
    this.localList = e,
    this.blockXDomainRequest = t,
    this.blockCORS = n,
    this.point = -1
};
gi.disableWS = function() {
    qn.isAvailable = e1
}
;
gi.disableXHRs = function() {
    _s.isAvailable = e1,
    Kr.isAvailable = e1,
    qo.isAvailable = e1,
    ro.isAvailable = e1
}
;
gi.STREAMING_LIST = [];
var kg = [_s, Kr, qo];
for (Wd = 0; Wd < kg.length; Wd++)
    kg[Wd].isStreamEnabled() && gi.STREAMING_LIST.push(kg[Wd]);
var Wd;
gi.CONTROL_LIST = [_s, Kr, ro];
gi.POLL_LIST = [_s, Kr, ro];
gi.useRealCallbacks = function(e) {
    return e.constr.prototype.notifySender != Xl.prototype.notifySender
}
;
gi.isGood = function(e, t, n, i, r, s, o) {
    return vs.isDebugLogEnabled() && vs.logDebug(m.resolve(669), ub(t)),
    t.isAvailable(e) ? n && !t.isCrossSite() ? (vs.logDebug(m.resolve(671)),
    !1) : i && !t.areCookiesGuaranteed() ? (vs.logDebug(m.resolve(672)),
    !1) : r && !t.isCrossProtocol() ? (vs.logDebug(m.resolve(673)),
    !1) : s && !t.canUseCustomHeaders() ? (vs.logDebug(m.resolve(674)),
    !1) : o && !sF(t, o) ? (vs.logDebug(m.resolve(675)),
    !1) : (vs.isDebugLogEnabled() && vs.logDebug(m.resolve(676), ub(t)),
    !0) : (vs.logDebug(m.resolve(670)),
    !1)
}
;
function sF(e, t) {
    for (var n = 0; n < t.length; n++)
        if (t[n] == e)
            return !0;
    return !1
}
gi.prototype = {
    hasNext: function() {
        return this.point < this.localList.length - 1
    },
    getNext: function(e, t, n, i, r) {
        for (vs.isDebugLogEnabled() && vs.logDebug(m.resolve(677), "serverToUse", e, "isCrossSite", t, "areCookiesRequired", n, "isCrossProtocol", i, "hasExtraHeaders", r); this.hasNext(); ) {
            this.point++;
            var s = this.localList[this.point];
            if (!((this.blockCORS || this.blockXDomainRequest) && s === Kr) && !(this.blockCORS && s === _s) && this.isGood(e, s, t, n, i, r))
                return s
        }
        return null
    },
    isGood: function(e, t, n, i, r, s) {
        return gi.isGood(e, t, n, i, r, s, this.localList)
    },
    _reset: function() {
        vs.logDebug(m.resolve(678)),
        this.point = -1
    }
};
function ub(e) {
    return e.name
}
var hb = "LS6__HOURGLASS"
  , oF = 900
  , Xb = function() {
    this.needStopHourGlass = !1,
    this.hgFrame = null
};
Xb.prototype = {
    prepare: function(e) {
        this.needStopHourGlass = e === Nc,
        this.needStopHourGlass && (this.hgFrame = Dc.getFrameWindow(hb, !0))
    },
    stopHourGlass: function() {
        be.addTimedTask(this.stopHourGlassExe, oF, this)
    },
    stopHourGlassExe: function() {
        if (this.needStopHourGlass && (this.needStopHourGlass = !1,
        !mi.isProbablyAKhtml() && !(mi.isProbablyIE(6, !0) || mi.isProbablyIE(9, !1))))
            try {
                window.open("about:blank", hb, null, !0)
            } catch {}
    }
};
var Ic = {
    createSession: "createSession",
    bindSession: "bindSession",
    shutdown: "shutdown",
    bindSent: "bindSent",
    onEvent: "onEvent",
    onErrorEvent: "onErrorEvent"
};
Ic = Ke.getReverse(Ic);
var aF = 2e4
  , cF = 1
  , x3 = 1
  , qg = 1;
function db(e) {
    e && e != qg || (qg++,
    x3 = cF)
}
var jd = m.getLoggerProxy(G.SESSION)
  , Nle = m.getLoggerProxy(G.PROTOCOL)
  , to = function(e, t, n, i, r, s, o) {
    this._callSuperConstructor(to, arguments),
    this.createList = null,
    this.chosenConnection = null,
    this.connectionList = null,
    this.myGlass = null,
    this.activeConnection = null,
    this.resetConnectionList(s)
};
to.prototype = {
    resetConnectionList: function(e) {
        e = e || !this.policyBean.corsXHREnabled,
        this.createList = new gi(gi.POLL_LIST,!1,e),
        this.isPolling ? this.connectionList = new gi(gi.POLL_LIST,!1,e) : this.connectionList = new gi(gi.STREAMING_LIST,!this.policyBean.xDomainStreamingEnabled,e),
        this.chosenConnection = null
    },
    getConnectedHighLevelStatus: function() {
        return this.isPolling ? G.HTTP_POLLING : G.HTTP_STREAMING
    },
    getFirstConnectedStatus: function() {
        return this.isPolling ? G.HTTP_POLLING : G.SENSE
    },
    toString: function() {
        return ["[", "SessionHTTP", "oid=" + this.objectId, this.isPolling, this.forced, this.phase, this.phaseCount, this.push_phase, this.workedBefore, this.sessionId, this.dataNotificationCount, this.switchRequired, this.slowRequired, "]"].join("|")
    },
    createSession: function(e, t, n) {
        return this._callSuperMethod(to, Ic.createSession, [e, t, n]) ? (this.createSessionExecution(this.phaseCount, t, e),
        !0) : !1
    },
    createSessionExecution: function(e, t, n) {
        if (e == this.phaseCount) {
            if (this.handler.disableCorsCheck(),
            Ke.isOffline())
                if (x3 <= 0) {
                    jd.logDebug(m.resolve(679)),
                    be.addTimedTask(this.createSessionExecution, 3e3, this, [e, n, "offline"]);
                    return
                } else
                    x3--,
                    x3 == 0 && be.addTimedTask(db, aF, null, [qg]);
            var i = this.executeConnection(n, this.createSessionExecution, t, !1);
            i !== null && (i ? this.createSent() : i === !1 && (jd.logWarn(m.resolve(680)),
            this.onErrorEvent("no_impl_available", {
                closedOnServer: !0,
                noImplAvailable: !0
            })))
        }
    },
    bindSession: function(e) {
        return this._callSuperMethod(to, Ic.bindSession, [e]) ? (this.activeConnection && this.activeConnection._close(),
        this.fixSpin(),
        this.bindSessionExecution(this.phaseCount, e),
        !0) : !1
    },
    fixSpin: function() {
        if (!Bt.isLoaded() && (this.policyBean.spinFixEnabled === null && (mi.isProbablyAndroidBrowser() || mi.isProbablyApple()) || this.policyBean.spinFixEnabled === !0)) {
            var e = this.bindCount
              , t = this;
            Bt.addOnloadHandler(function() {
                be.addTimedTask(function() {
                    e == t.bindCount && t.phase == Nt.RECEIVING && t.forceRebind("spinfix")
                }, t.policyBean.spinFixTimeout)
            })
        }
    },
    bindSessionExecution: function(e, t) {
        if (e == this.phaseCount) {
            !this.myGlass && !this.isPolling && (this.myGlass = new Xb);
            var n = this.executeConnection(null, this.bindSessionExecution, t, !1);
            if (n !== null) {
                if (n)
                    this.bindSent();
                else if (n === !1 && !this.isPolling) {
                    this.onSessionGivesUp(this.handlerPhase, "streaming.unavailable");
                    return
                }
            }
        }
    },
    recoverSession: function() {
        this.incPushPhase();
        var e = this.executeConnection(null, this.recoverSession, "network.error", !0);
        e !== null && (e ? this.createSent() : e === !1 && (jd.logError(m.resolve(681)),
        this.onErrorEvent("no_impl_available", {
            closedOnServer: !0,
            noImplAvailable: !0
        })))
    },
    shutdown: function(e) {
        this._callSuperMethod(to, Ic.shutdown, [e]),
        this.activeConnection && this.activeConnection._close()
    },
    generateRequest: function(e, t, n, i) {
        var r = this.phase == Nt._OFF || this.phase == Nt.SLEEP
          , s = this.getPushServerAddress()
          , o = new or(s + G.LIGHTSTREAMER_PATH);
        o.setCookieFlag(this.policyBean.isCookieHandlingRequired()),
        o.setExtraHeaders(this.policyBean.extractHttpExtraHeaders(r));
        var a = !o.isCrossProtocol() && !o.isCrossSite(), c;
        return i ? c = no.getRecoveryCommand(this.push_phase, this.sessionId, this.policyBean, t, this.slowing.getDelay(), a, this.dataNotificationCount) : c = no.getPushCommand(this.push_phase, this.sessionId, this.policyBean, this.connectionBean, r, this.isPolling, e, t, this.slowing.getDelay(), n, a, this.serverBusy),
        o.setData(c),
        o
    },
    executeConnection: function(e, t, n, i) {
        var r = this.phase == Nt._OFF || this.phase == Nt.SLEEP
          , s = this.generateRequest(e, n, !0, i)
          , o = this.getPushServerAddress();
        this.controlHandler.assignWS(null),
        this.chosenConnection && this.chosenConnection.constr == Kr && (this.chosenConnection = null);
        var a = r ? this.createList : this.connectionList;
        this.chosenConnection && (a.isGood(o, this.chosenConnection.constr, s.isCrossSite(), this.policyBean.isCookieHandlingRequired(), s.isCrossProtocol(), this.policyBean.hasHttpExtraHeaders(r)) || (a._reset(),
        this.chosenConnection = null));
        for (var c = !1, l = (this.isPolling ? "LS6__POLLFRAME" : "LS6__PUSHFRAME") + "_" + this.engineId; (this.chosenConnection || a.hasNext()) && c === !1; ) {
            if (!this.chosenConnection) {
                var u = a.getNext(o, s.isCrossSite(), this.policyBean.isCookieHandlingRequired(), s.isCrossProtocol(), this.policyBean.hasHttpExtraHeaders(r));
                if (!u)
                    return a._reset(),
                    !1;
                this.chosenConnection = new u(l)
            }
            s.setMethod(or._POST),
            i ? s.setFile(no.getRecoveryPath(this.chosenConnection.getEncoder().getExt())) : s.setFile(no.getPushPath(r, this.isPolling, this.chosenConnection.getEncoder().getExt()));
            var h = this.push_phase;
            if (c = this.chosenConnection.sessionLoad(s, h, this.cbOk, this.cbErr, this.cbEnd, this.engineId),
            c === null)
                return jd.logDebug(m.resolve(683)),
                be.addTimedTask(t, 50, this, [this.phaseCount, n, e]),
                null;
            c === !1 ? this.chosenConnection = null : (jd.logDebug(m.resolve(684)),
            a._reset(),
            this.activeConnection = this.chosenConnection)
        }
        return c
    },
    bindSent: function() {
        this._callSuperMethod(to, Ic.bindSent),
        this.needsHourglassTrick() && this.myGlass.prepare(this.activeConnection.constr)
    },
    needsHourglassTrick: function() {
        return !this.isPolling
    },
    onErrorEvent: function(e, t) {
        t = t || {};
        var n = t.closedOnServer
          , i = t.fromWS
          , r = t.unableToOpen
          , s = t.noImplAvailable
          , o = t.possibleLoop
          , a = t.tryRecovery
          , c = t.serverBusyError;
        r && (this.chosenConnection.constr == _s || this.chosenConnection.constr == Kr) && (a || this.handler.onCorsError(this.handlerPhase)),
        this._callSuperMethod(to, Ic.onErrorEvent, arguments)
    },
    onEvent: function() {
        this.phase == Nt.FIRST_BINDING && db(),
        this.needsHourglassTrick() && (this.phase == Nt.BINDING || this.phase == Nt.FIRST_BINDING) && this.myGlass.stopHourGlass(),
        this._callSuperMethod(to, Ic.onEvent)
    },
    forwardDestroyRequestToTransport: function(e, t, n, i, r, s) {
        this.controlHandler.addRequest(e, t, n, i, r, s)
    }
};
ot(to, Nt);
var wu = 1
  , Ag = 2
  , fb = 3
  , pb = 4
  , gb = 5
  , mb = 6
  , qr = {
    createSent: "createSent",
    onTimeout: "onTimeout",
    onLoop: "onLoop",
    onStreamError: "onStreamError",
    onStreamEnd: "onStreamEnd",
    onErrorEvent: "onErrorEvent",
    shutdown: "shutdown",
    onSessionGivesUp: "onSessionGivesUp",
    onSessionBound: "onSessionBound"
};
qr = Ke.getReverse(qr);
var Wr = m.getLoggerProxy(G.SESSION)
  , lF = !1
  , sr = function(e, t, n, i, r, s, o) {
    this._callSuperConstructor(sr, arguments),
    this.wsConn = null,
    this.wsPhase = wu,
    this.openWSPhase = null,
    this.forceEarlyWSOff = !1
};
sr.prototype = {
    toString: function() {
        return ["[", "SessionWS", "oid=" + this.objectId, this.isPolling, this.forced, this.phase, this.phaseCount, this.push_phase, this.wsPhase, this.workedBefore, this.sessionId, this.dataNotificationCount, this.wsConn, this.switchRequired, this.slowRequired, "]"].join("|")
    },
    changeWSPhase: function(e) {
        this.wsPhase = e
    },
    getConnectedHighLevelStatus: function() {
        return this.isPolling ? G.WS_POLLING : G.WS_STREAMING
    },
    getFirstConnectedStatus: function() {
        return G.SENSE
    },
    openWS: function() {
        ut.verifyValue(this.wsPhase, wu) || Wr.logError(m.resolve(685)),
        this.openWSPhase = this.push_phase,
        this.wsConn = new qn(this);
        var e = this.getPushServerAddress()
          , t = new or(e + G.LIGHTSTREAMER_PATH);
        return t.setCookieFlag(this.policyBean.isCookieHandlingRequired()),
        t.setExtraHeaders(this.policyBean.extractHttpExtraHeaders(!1)),
        gi.isGood(e, qn, t.isCrossSite(), this.policyBean.isCookieHandlingRequired(), t.isCrossProtocol(), this.policyBean.hasHttpExtraHeaders(!1)) && (Wr.logDebug(m.resolve(686)),
        this.wsConn.openSocket(t, this.openWSPhase, this.cbOk, this.cbErr, this.cbEnd)) ? (this.controlHandler.assignWS(this.wsConn),
        this.changeWSPhase(Ag),
        !0) : (this.changeWSPhase(gb),
        !1)
    },
    createSent: function() {
        this._callSuperMethod(sr, qr.createSent),
        this.policyBean.earlyWSOpenEnabled && !this.forceEarlyWSOff && this.openWS()
    },
    bindSessionExecution: function(e, t) {
        if (e == this.phaseCount) {
            if (this.forceEarlyWSOff = !1,
            this.wsPhase == wu ? this.openWS() : this.wsPhase == Ag && (this.wsConn.isConnectedToServer(this.getPushServerAddress()) || (Wr.logWarn(m.resolve(687)),
            this.wsConn._close(),
            this.changeWSPhase(wu),
            this.openWS())),
            this.wsPhase == mb) {
                this.onSessionGivesUp(this.handlerPhase, "ws.early.closed");
                return
            } else if (this.wsPhase == gb) {
                this.onSessionGivesUp(this.handlerPhase, "ws.notgood");
                return
            } else if (this.wsPhase == fb) {
                qn.disableClass(this.getPushServerAddress()),
                this.onSessionGivesUp(this.handlerPhase, "ws.early.openfail");
                return
            }
            var n = this.generateRequest(null, t, !1, !1)
              , i = !1;
            n.setFile(no.getPushPath(!1, this.isPolling, this.wsConn.getEncoder().getExt()));
            var r = !1;
            this.wsPhase == Ag ? (i = this.wsConn.sessionLoad(n, this.push_phase, this.cbOk, this.cbErr, this.cbEnd, this.engineId),
            r = !0) : this.wsPhase == pb ? i = this.wsConn._send(n, this.push_phase) : (ut.fail(),
            Wr.logError(m.resolve(688), this)),
            i === null ? (Wr.logDebug(m.resolve(689)),
            be.addTimedTask(this.bindSessionExecution, 50, this, [e, t])) : i === !1 ? (Wr.logWarn(m.resolve(690)),
            this.onSessionGivesUp(this.handlerPhase, "ws.false")) : r || (Wr.logDebug(m.resolve(691)),
            this.bindSent())
        }
    },
    firstSentNotification: function(e) {
        this.openWSPhase == e && (Wr.logDebug(m.resolve(692)),
        this.bindSent(),
        this.changeWSPhase(pb))
    },
    onTimeout: function(e, t, n, i, r) {
        t == this.phaseCount && (this.phase == Nt.CREATING && (this.forceEarlyWSOff = !0),
        this._callSuperMethod(sr, qr.onTimeout, [e, t, n, i, r]))
    },
    onLoop: function(e) {
        this._callSuperMethod(sr, qr.onLoop, [e]),
        this.wsConn && this.wsConn.updatePhase(this.push_phase)
    },
    onStreamError: function(e, t, n, i, r) {
        n ? t == this.openWSPhase && this._callSuperMethod(sr, qr.onStreamError, [e, this.push_phase, n, i, r]) : (this.phase == Nt.CREATING && (this.forceEarlyWSOff = !0),
        this._callSuperMethod(sr, qr.onStreamError, arguments))
    },
    onStreamEnd: function(e, t) {
        t ? e == this.openWSPhase && (this.phase == Nt.OFF || this.phase == Nt.CREATING || this.phase == Nt.CREATED ? this.onErrorEvent("ws.early.end", {
            fromWS: !0
        }) : (ut.verifyDiffValue(this.phase, Nt.FIRST_PAUSE) || Wr.logError(m.resolve(693), this),
        this._callSuperMethod(sr, qr.onStreamEnd, [this.push_phase, t]))) : (this.phase == Nt.CREATING && (this.forceEarlyWSOff = !0),
        this._callSuperMethod(sr, qr.onStreamEnd, arguments))
    },
    onErrorEvent: function(e, t) {
        t = t || {};
        var n = t.closedOnServer
          , i = t.fromWS
          , r = t.unableToOpen
          , s = t.noImplAvailable
          , o = t.possibleLoop
          , a = t.tryRecovery
          , c = t.serverBusyError;
        i ? (ut.verifyDiffValue(this.wsPhase, wu) || Wr.logError(m.resolve(694), this),
        r ? this.changeWSPhase(fb) : this.changeWSPhase(mb),
        this.phase == Nt.OFF || this.phase == Nt.CREATING || this.phase == Nt.CREATED ? Wr.logDebug(m.resolve(695), this) : this.phase == Nt.FIRST_PAUSE ? (Wr.logDebug(m.resolve(696), this),
        r && qn.disableClass(this.getPushServerAddress()),
        this.onSessionGivesUp(this.handlerPhase, "ws.error." + e)) : this.isPolling && this.phase == Nt.PAUSE ? (ut.verifyNotOk(r) || Wr.logError(m.resolve(697), this),
        Wr.logDebug(m.resolve(698), this),
        this.closeSession(e, n, lF),
        this.onTimeout("zeroDelay", this.phaseCount, 0, "ws.broken.wait")) : this._callSuperMethod(sr, qr.onErrorEvent, arguments)) : (this.phase == Nt.CREATING && (this.forceEarlyWSOff = !0),
        this._callSuperMethod(sr, qr.onErrorEvent, arguments))
    },
    shutdown: function(e) {
        this._callSuperMethod(sr, qr.shutdown, [e]),
        this.wsConn && (this.openWSPhase = null,
        this.wsConn._close(),
        this.wsConn = null,
        this.controlHandler.assignWS(null)),
        this.changeWSPhase(wu)
    },
    needsHourglassTrick: function() {
        return !1
    },
    onSessionGivesUp: function(e, t) {
        qn.disableClass(this.getPushServerAddress()),
        this._callSuperMethod(sr, qr.onSessionGivesUp, [e, t])
    },
    onSessionBound: function() {
        this._callSuperMethod(sr, qr.onSessionBound),
        this.wsConn.setDefaultSessionId(this.sessionId)
    },
    forwardDestroyRequestToTransport: function(e, t, n, i, r, s) {
        this.controlHandler.addSyncRequest(e, t, n, i, r, s)
    }
};
ot(sr, to);
var Ig = 5 / 10
  , Rg = 7e3
  , uF = 2e4
  , hF = m.getLoggerProxy(G.PROTOCOL)
  , qd = m.getLoggerProxy(G.SESSION)
  , Kb = function(e, t) {
    this.refTime = 0,
    this.meanElaborationDelay = null,
    this.hugeFlag = !1,
    this.policyBean = e,
    this.session = null
};
Kb.prototype = {
    toString: function() {
        return ["[", "SlowingHandler", this.meanElaborationDelay, this.refTime, Ig, Rg, "]"].join("|")
    },
    isLate: function(e) {
        return this.meanElaborationDelay != null && this.meanElaborationDelay > e
    },
    changeSession: function(e) {
        this.session = e
    },
    getDelay: function() {
        return this.meanElaborationDelay != null && this.meanElaborationDelay > 0 ? Math.round(this.meanElaborationDelay) : null
    },
    resetSync: function() {
        this.meanElaborationDelay = null,
        this.hugeFlag = !1
    },
    prepareForSync: function() {
        this.hugeFlag = !1
    },
    testPollSync: function(e) {
        this.testSync(e)
    },
    syncCheck: function(e) {
        if (ut.verifyOk(this.session.isReceivingAnswer()) || hF.logError(m.resolve(699)),
        this.session.isStreamingSession()) {
            var t = this.testSync(e * 1e3);
            t ? this.policyBean.slowingEnabled && this.session.onSlowRequested() : this.session.onSynchOk()
        }
    },
    startSync: function(e) {
        e || this.resetSync(),
        this.refTime = Et.getTimeStamp()
    },
    testSync: function(e) {
        var t = Et.getTimeStamp();
        if (!this.refTime)
            return !0;
        var n = t - this.refTime - e;
        return this.meanElaborationDelay == null ? (this.meanElaborationDelay = n,
        qd.logDebug(m.resolve(700)),
        !1) : n > uF && n > this.meanElaborationDelay * 2 && (this.hugeFlag = !this.hugeFlag,
        this.hugeFlag) ? (qd.logInfo(m.resolve(701)),
        this.meanElaborationDelay > Rg) : (this.meanElaborationDelay = this.meanElaborationDelay * Ig + n * (1 - Ig),
        this.meanElaborationDelay < 60 ? (this.meanElaborationDelay = 0,
        qd.logDebug(m.resolve(702)),
        !1) : this.isLate(Rg) ? (qd.logInfo(m.resolve(703)),
        !0) : (qd.logDebug(m.resolve(704)),
        !1))
    }
};
var Ui = m.getLoggerProxy(G.REQUESTS);
function Rc(e) {
    this.queue = [],
    this.keys = {},
    this.batchType = e,
    this.messageNextKey = 0
}
var dF = "C"
  , fF = "F"
  , pF = "X"
  , gF = "H"
  , mF = "M";
Rc.prototype = {
    toString: function() {
        return ["[", "ControlRequestBatch", this.batchType, this.queue.length, "]"].join("|")
    },
    addRequestInternal: function(e, t) {
        this.keys[e] = t,
        this.queue.push(e),
        function(n) {
            if (n.batchType == je.MESSAGE) {
                var i = t.LS_sequence
                  , r = t.LS_msg_prog;
                if (i != null && r != null)
                    for (var s = 0, o = n.queue.length - 1; s < o; s++) {
                        var a = n.queue[s]
                          , c = a.LS_sequence
                          , l = a.LS_msg_prog;
                        i == c && r == l && (Ui.isDebugLogEnabled() && Ui.logErrorExc(new Error("backtrace"), "Duplicated message", "seq=", i, "prog=", r, "ptr=", t === a),
                        Ui.logError(m.resolve(705), "seq=", i, "prog=", r))
                    }
            }
        }(this)
    },
    addUniqueRequestInternal: function(e, t) {
        this.keys[e] ? this.keys[e] = t : this.addRequestInternal(e, t)
    },
    addRequestToBatch: function(e, t) {
        var n = e.getType();
        if (n == je.MESSAGE || n == je.LOG || n == je.HEARTBEAT)
            return this.batchType != n ? (ut.fail(),
            Ui.logError(m.resolve(706), this),
            !1) : (n == je.HEARTBEAT ? this.addUniqueRequestInternal(gF, e) : this.addRequestInternal(this.messageNextKey++, e),
            !0);
        if (!(this.batchType == je.ADD || this.batchType == je.MPN))
            return ut.fail(),
            Ui.logError(m.resolve(707), this),
            !1;
        var i;
        switch (n) {
        case je.CONSTRAINT:
            i = dF;
            break;
        case je.FORCE_REBIND:
            i = fF;
            break;
        case je.CHANGE_SUB:
            i = pF + e.getKey();
            break;
        case je.MPN:
            i = mF + e.getKey();
            break;
        default:
            i = e.getKey();
            break
        }
        var r = this.keys[i];
        if (Ui.logDebug(m.resolve(708), this, i, e),
        r)
            if (n == je.CONSTRAINT || n == je.FORCE_REBIND || n == je.MPN) {
                t || (Ui.logDebug(m.resolve(709)),
                this.substituteRequest(i, e));
                return
            } else if (n == je.REMOVE) {
                r.retryingOrHost ? (Ui.logDebug(m.resolve(710)),
                t || this.substituteRequest(i, e)) : r.getType() == je.REMOVE ? Ui.logDebug(m.resolve(711)) : (Ui.logDebug(m.resolve(712)),
                ut.verifyNotOk(t) || Ui.logError(m.resolve(713), this),
                t || this.removeRequestByKey(i));
                return
            } else if (n == je.DESTROY) {
                for (; r && e.retryingOrHost != r.retryingOrHost; )
                    Ui.logDebug(m.resolve(714)),
                    i += "_",
                    r = this.keys[i];
                if (r) {
                    Ui.logDebug(m.resolve(715));
                    return
                }
            } else {
                t || (Ui.logDebug(m.resolve(716)),
                this.substituteRequest(i, e));
                return
            }
        Ui.logDebug(m.resolve(717)),
        this.addRequestInternal(i, e)
    },
    getLength: function() {
        return this.queue.length
    },
    substituteRequest: function(e, t) {
        this.keys[e] = t
    },
    removeRequestByIndex: function(e) {
        if (this.queue.length <= e)
            return Ui.logError(m.resolve(718)),
            null;
        var t = this.queue[e];
        this.queue.splice(e, 1);
        var n = this.keys[t];
        return delete this.keys[t],
        n
    },
    removeRequestByKey: function(e) {
        if (!this.keys[e])
            return Ui.logError(m.resolve(719)),
            null;
        for (var t = 0; t < this.queue.length; t++)
            if (this.queue[t] == e)
                return this.removeRequestByIndex(t)
    },
    shift: function() {
        return this.removeRequestByIndex(0)
    },
    pop: function() {
        return this.removeRequestByIndex(this.queue.length - 1)
    },
    last: function() {
        return this.getRequestObject(this.queue.length - 1)
    },
    firstRequest: function() {
        return this.getRequestObject(0)
    },
    getRequestObject: function(e) {
        if (this.queue.length <= 0)
            return null;
        var t = this.queue[e];
        return this.keys[t]
    },
    getBatchType: function() {
        return this.batchType
    }
};
var dt = m.getLoggerProxy(G.REQUESTS)
  , vb = m.getLoggerProxy(G.STREAM)
  , ms = 1
  , Yb = 2
  , zg = 3
  , Pu = {};
Pu[ms] = "IDLE";
Pu[Yb] = "STAND BY";
Pu[zg] = "WAITING RESP";
var vF = !0
  , bu = !1
  , _F = 200
  , yF = 4e3
  , f3 = 1
  , Dg = 2
  , p3 = 3
  , _b = 4
  , yb = 5
  , SF = 1;
function bF(e) {
    return Pu[e]
}
function xF(e, t, n, i) {
    var r = e.firstRequest();
    if (!r)
        return null;
    var s = new or((r.retryingOrHost && r.retryingOrHost !== !0 ? r.retryingOrHost : t) + G.LIGHTSTREAMER_PATH);
    return s.setCookieFlag(n),
    s.setExtraHeaders(i),
    s
}
var Qb = function(e, t, n, i) {
    this.corsDisabled = !1,
    this.connectionList = null,
    this.conn = null,
    this.messageQueue = null,
    this.controlQueue = null,
    this.logQueue = null,
    this.destroyQueue = null,
    this.hbQueue = null,
    this.mpnQueue = null,
    this.currentReverseHeartbeatInterval = 0,
    this.grantedReverseHeartbeatInterval = 0,
    this.requestLimit = 0,
    this.statusPhase = 1,
    this.status = ms,
    this.phase = 1,
    this.typeFlag = 0,
    this.lastBatch = null,
    this.fakeSyncError = !1,
    this._owner = e,
    this.policyBean = t,
    this.engId = n,
    this.wsConn = null,
    this.requestListenerMap = {},
    this.resetConnectionList(i),
    this._reset()
};
Qb.prototype = {
    toString: function() {
        return ["[", "ControlConnectionHandler", bF(this.status), this.lastBatch, this.requestLimit, this.currentReverseHeartbeatInterval, "]"].join("|")
    },
    setRequestLimit: function(e) {
        this.requestLimit = e,
        dt.logDebug(m.resolve(720), this)
    },
    startReverseHeartbeats: function(e, t) {
        t ? (this.currentReverseHeartbeatInterval = e,
        this.grantedReverseHeartbeatInterval = e,
        dt.logInfo(m.resolve(721), this)) : this.grantedReverseHeartbeatInterval == 0 || e < this.grantedReverseHeartbeatInterval ? (this.currentReverseHeartbeatInterval = e,
        dt.logInfo(m.resolve(722), this)) : (this.currentReverseHeartbeatInterval = this.grantedReverseHeartbeatInterval,
        dt.logInfo(m.resolve(723), this)),
        this.status == ms && this.sendReverseHeartbeat(this.statusPhase)
    },
    sendReverseHeartbeat: function(e) {
        this.status != ms || this.statusPhase != e || this.currentReverseHeartbeatInterval == 0 || (dt.logDebug(m.resolve(724), this),
        this.addRequest(null, "", je.HEARTBEAT))
    },
    stopReverseHeartbeats: function(e) {
        e ? (dt.logInfo(m.resolve(725), this),
        this.currentReverseHeartbeatInterval = 0,
        this.grantedReverseHeartbeatInterval = 0) : this.grantedReverseHeartbeatInterval == 0 ? (dt.logInfo(m.resolve(726), this),
        this.currentReverseHeartbeatInterval = 0) : (dt.logInfo(m.resolve(727), this),
        this.currentReverseHeartbeatInterval = this.grantedReverseHeartbeatInterval)
    },
    resetConnectionList: function(e) {
        this.connectionList = new gi(gi.CONTROL_LIST,!1,!this.policyBean.corsXHREnabled || e),
        this.conn = null
    },
    _close: function() {
        dt.logDebug(m.resolve(728)),
        this.conn && this.conn._close()
    },
    changeStatus: function(e, t) {
        this.statusPhase++,
        e == ms && this.currentReverseHeartbeatInterval > 0 && be.addTimedTask(this.sendReverseHeartbeat, this.currentReverseHeartbeatInterval, this, [this.statusPhase]),
        dt.isDebugLogEnabled() && dt.logDebug(m.resolve(729), t + Pu[this.status] + " -> " + Pu[e]),
        this.status = e
    },
    _reset: function() {
        dt.logDebug(m.resolve(730), this),
        this.requestLimit = 0,
        this.messageQueue = new Rc(je.MESSAGE),
        this.controlQueue = new Rc(je.ADD),
        this.hbQueue = new Rc(je.HEARTBEAT),
        this.mpnQueue = new Rc(je.MPN),
        this.wsConn = null,
        this.currentReverseHeartbeatInterval = 0,
        this.grantedReverseHeartbeatInterval = 0,
        this.logQueue || (this.logQueue = new Rc(je.LOG)),
        this.destroyQueue || (this.destroyQueue = new Rc(je.ADD)),
        this.reqQueues = [this.messageQueue, this.controlQueue, this.logQueue, this.destroyQueue, this.hbQueue, this.mpnQueue],
        this.phase++;
        var e = this.lastBatch ? this.lastBatch.getBatchType() : null;
        e !== null && e !== je.DESTROY && e !== je.LOG ? (ut.verifyDiffValue(this.status, ms) || dt.logError(m.resolve(731)),
        this._close(),
        this.lastBatch = null,
        this.changeStatus(ms, "_reset"),
        this.dequeue(bu, "reset1")) : e === null && (ut.verifyValue(this.status, ms) || dt.logError(m.resolve(732)),
        ut.verifyValue(this.lastBatch, null) || dt.logError(m.resolve(733)),
        this.dequeue(bu, "reset2"))
    },
    assignWS: function(e) {
        e ? dt.logDebug(m.resolve(734), this) : this.wsConn && dt.logDebug(m.resolve(735), this),
        this.wsConn = e
    },
    addRequest: function(e, t, n, i, r, s) {
        this.addRequestListener(t, s),
        be.addTimedTask(this.addRequestExe, 0, this, [this.phase, e, t, n, i, r])
    },
    addSyncRequest: function(e, t, n, i, r) {
        this.addRequestExe(this.phase, e, t, n, i, r)
    },
    checkPhase: function(e, t) {
        return t == je.DESTROY || t == je.LOG ? !0 : this.phase === e
    },
    addToProperBatch: function(e, t) {
        e == je.MESSAGE ? this.messageQueue.addRequestToBatch(t) : e == je.LOG ? this.logQueue.addRequestToBatch(t) : e == je.DESTROY ? this.destroyQueue.addRequestToBatch(t) : e == je.HEARTBEAT ? this.hbQueue.addRequestToBatch(t) : e == je.MPN ? this.mpnQueue.addRequestToBatch(t) : this.controlQueue.addRequestToBatch(t)
    },
    addRequestExe: function(e, t, n, i, r, s) {
        if (this.checkPhase(e, i)) {
            dt.logInfo(m.resolve(736), this, n);
            var o = new je(n,r,i,t,s);
            this.addToProperBatch(i, o),
            this.status == ms ? this.dequeue(vF, "add") : dt.logDebug(m.resolve(737), this)
        }
    },
    dequeue: function(e, t) {
        if (e === !0)
            dt.logDebug(m.resolve(738), e, this),
            this.dequeueControlRequests(this.statusPhase, t);
        else {
            dt.logDebug(m.resolve(739), e, this);
            var n = e === !1 ? 0 : e;
            be.addTimedTask(this.dequeueControlRequests, n, this, [this.statusPhase, "async." + t])
        }
    },
    dequeueControlRequests: function(e, t) {
        if (e == this.statusPhase) {
            for (var n = 0; n < SF; ) {
                n++,
                this.changeStatus(Yb, "dequeueControlRequests"),
                dt.logDebug(m.resolve(740), t, this);
                var i = null;
                if (this.lastBatch != null ? (dt.logDebug(m.resolve(741)),
                i = this.sendBatch(this.lastBatch)) : (dt.logDebug(m.resolve(742)),
                i = this.selectAndSendBatch()),
                i == f3)
                    dt.logInfo(m.resolve(743)),
                    this.lastBatch = null;
                else if (i == Dg) {
                    dt.logInfo(m.resolve(744)),
                    this.dequeue(_F, "later");
                    return
                } else if (i == p3) {
                    dt.logWarn(m.resolve(745)),
                    this.lastBatch && this.lastBatch.notifySenders(!0),
                    this.lastBatch = null,
                    this.dequeue(bu, "no");
                    return
                } else if (i == _b) {
                    dt.logInfo(m.resolve(746)),
                    this.changeStatus(zg, "dequeueControlRequests"),
                    this.lastBatch && this.lastBatch.notifySenders(),
                    this.dequeue(yF, "http");
                    return
                } else if (i == yb)
                    dt.logInfo(m.resolve(747)),
                    this.changeStatus(zg, "dequeueControlRequests"),
                    this.lastBatch && this.lastBatch.notifySenders(),
                    this.lastBatch = null,
                    this.changeStatus(ms, "dequeueControlRequests");
                else {
                    dt.logInfo(m.resolve(748)),
                    this._close(),
                    this.changeStatus(ms, "dequeueControlRequests");
                    return
                }
            }
            this.dequeue(bu, "limit")
        }
    },
    selectAndSendBatch: function() {
        for (var e = 0; e < this.reqQueues.length; ) {
            if (this.typeFlag = this.typeFlag < this.reqQueues.length - 1 ? this.typeFlag + 1 : 0,
            this.reqQueues[this.typeFlag].getLength() > 0)
                return this.sendBatch(this.reqQueues[this.typeFlag]);
            e++
        }
        return null
    },
    sendBatch: function(e) {
        (function() {
            if (e.batchType == je.MESSAGE)
                for (var a = 0, c = e.queue.length; a < c; a++) {
                    var l = e.queue[a]
                      , u = l.LS_sequence
                      , h = l.LS_msg_prog;
                    if (u != null && h != null)
                        for (var d = a + 1, f = e.queue.length; d < f; d++) {
                            var g = e.queue[d]
                              , p = g.LS_sequence
                              , v = g.LS_msg_prog;
                            u == p && h == v && (dt.isDebugLogEnabled() && dt.logErrorExc(new Error("backtrace"), "Duplicated message", "seq=", u, "prog=", h, "ptr=", l === g),
                            dt.logError(m.resolve(749), "seq=", u, "prog=", h))
                        }
                }
        }
        )();
        var t = this._owner.getPushServerAddress()
          , n = xF(e, t, this.policyBean.isCookieHandlingRequired(), this.policyBean.extractHttpExtraHeaders(!1));
        if (n == null)
            return dt.logDebug(m.resolve(750)),
            f3;
        dt.logDebug(m.resolve(751));
        var i = !1;
        if (this.wsConn) {
            dt.logDebug(m.resolve(752));
            var r = this.customizeRequest(e, this.wsConn);
            if (r == null)
                return dt.logDebug(m.resolve(753)),
                f3;
            if (n.setFile(r.getFile()),
            n.setData(r.getData()),
            i = this.wsConn._send(n),
            i === !1)
                this.wsConn = null;
            else
                return i === null ? Dg : yb
        }
        this.conn && (this.connectionList.isGood(t, this.conn.constr, n.isCrossSite(), this.policyBean.isCookieHandlingRequired(), n.isCrossProtocol(), this.policyBean.hasHttpExtraHeaders(!1)) || (this.connectionList._reset(),
        this.conn = null));
        for (var s = !1; (this.conn || this.connectionList.hasNext()) && s === !1; ) {
            if (!this.conn) {
                var o = this.connectionList.getNext(t, n.isCrossSite(), this.policyBean.isCookieHandlingRequired(), n.isCrossProtocol(), this.policyBean.hasHttpExtraHeaders(!1));
                if (!o)
                    return dt.logWarn(m.resolve(754), this.conn),
                    this.connectionList._reset(),
                    p3;
                this.conn = new o("LS6__CONTROLFRAME"),
                dt.logDebug(m.resolve(755), this.conn)
            }
            var r = this.customizeRequest(e, this.conn);
            if (r == null)
                return dt.logDebug(m.resolve(756)),
                f3;
            if (n.setFile(r.getFile()),
            n.setData(r.getData()),
            n.setMethod(r.getMethod()),
            this.lastBatch.setPhase(this.statusPhase),
            this.conn._close(),
            this.fakeSyncError && (n._data = n._data.replace(/LS_session=.*&/g, "LS_session=FAKE&")),
            i = this.conn._load(n, this.lastBatch.getPhase(), be.packTask(this.onReadyForNextRequest, this), be.packTask(this.onErrorEvent, this)),
            i === !1)
                dt.logDebug(m.resolve(757)),
                this.conn = null;
            else
                return i === null ? (dt.logDebug(m.resolve(758)),
                Dg) : (this.connectionList._reset(),
                _b)
        }
        return i === !1 || (ut.fail(),
        dt.logError(m.resolve(759))),
        p3
    },
    customizeRequest: function(e, t) {
        var n = t.getEncoder();
        if (this.lastBatch == null)
            this.lastBatch = new Jb,
            this.lastBatch.setEncoder(n),
            this.lastBatch.fill(e, this.requestLimit, this._owner.getSessionId(), this.policyBean.isCookieHandlingRequired(), this.policyBean.extractHttpExtraHeaders(!1));
        else if (this.lastBatch.needsNewEncode(n)) {
            this.lastBatch.setEncoder(n);
            var i = this.lastBatch.refill(this.requestLimit, this._owner.getSessionId(), this.policyBean.isCookieHandlingRequired(), this.policyBean.extractHttpExtraHeaders(!1));
            if (i)
                for (var r = i.getBatchType(); i.getLength() > 0; )
                    this.addToProperBatch(r, i.shift())
        }
        return this.lastBatch.isEmpty() ? (this.lastBatch = null,
        null) : this.lastBatch.getRequest()
    },
    onReadyForNextRequest: function(e, t) {
        if (!(!this.lastBatch || t != this.lastBatch.getPhase())) {
            vb.isDebugLogEnabled() && vb.logDebug(m.resolve(760), t, e),
            dt.logInfo(m.resolve(761), t),
            this.changeStatus(ms, "onReadyForNextRequest");
            var n = this.lastBatch.firstRequest().getType();
            this.lastBatch = null,
            this._owner.enqueueControlResponse(e),
            this.dequeue(bu, "ready4next")
        }
    },
    onErrorEvent: function(e, t) {
        !this.lastBatch || t != this.lastBatch.getPhase() || (dt.logInfo(m.resolve(762), this, e),
        this.changeStatus(ms, "onErrorEvent"),
        this.lastBatch = null,
        this.dequeue(bu, "error"))
    },
    addRequestListener: function(e, t) {
        var n = e.LS_reqId;
        n != null && t != null && (this.requestListenerMap[n] = t)
    },
    getAndRemoveRequestListener: function(e) {
        var t = this.requestListenerMap[e];
        return delete this.requestListenerMap[e],
        t
    }
};
var Jb = function() {
    this.batch = null,
    this.encoder = null,
    this.request = null,
    this.phase = null
};
Jb.prototype = {
    toString: function() {
        return this.batch ? this.batch.toString() : null
    },
    getBatchType: function() {
        return this.batch ? this.batch.getBatchType() : null
    },
    firstRequest: function() {
        return this.batch ? this.batch.firstRequest() : null
    },
    getLength: function() {
        return this.batch ? this.batch.getLength() : 0
    },
    shift: function() {
        return this.batch ? this.batch.shift() : null
    },
    getRequest: function() {
        return this.request
    },
    needsNewEncode: function(e) {
        return e != this.encoder
    },
    setEncoder: function(e) {
        this.encoder = e
    },
    fill: function(e, t, n, i, r) {
        if (!(e.getLength() <= 0)) {
            this.batch = new Rc(e.getBatchType()),
            this.request = this.encoder.initRequest(e, i, r);
            var s = ""
              , o = this.encoder.encode(e, n, !0);
            if (o === null) {
                this.batch = null,
                this.request = null;
                return
            }
            var a = this.encoder.getFixedOverhead(this.request.getFile())
              , c = this.encoder.getInvisibleOverhead(o) + o.length;
            t > 0 && c + a > t && dt.logWarn(m.resolve(763), s);
            do
                s += o,
                this.batch.addRequestToBatch(e.shift()),
                a += c,
                e.getLength() > 0 && (o = this.encoder.encode(e, n),
                o && (c = this.encoder.getInvisibleOverhead(o) + o.length));
            while (o && (t == 0 || a + c < t) && e.getLength() > 0);
            this.request.setData(this.encoder.wrapUp(s))
        }
    },
    refill: function(e, t, n, i) {
        var r = this.batch;
        return this.batch = null,
        this.fill(r, e, t, n, i),
        r.getLength() > 0 ? r : null
    },
    getPhase: function() {
        return this.phase
    },
    setPhase: function(e) {
        this.phase = e
    },
    isEmpty: function() {
        return this.getLength() <= 0
    },
    notifySenders: function(e) {
        for (var t = 0, n = null; n = this.batch.getRequestObject(t); ) {
            var i = n.getBridge();
            i && be.addTimedTask(i.notifySender, 0, i, [e]),
            t++
        }
    }
};
var Zb;
for (Sb in {
    notifySender: !0
})
    Zb = Sb;
var Sb, ku = function(e, t, n, i, r, s, o) {
    this._callSuperConstructor(ku, [t]),
    this.seqData = i,
    this.num = r,
    this.sequence = s,
    this.phase = n,
    this._owner = e,
    this.waitingAck = o
};
ku.prototype = {
    notifySender: function(e) {
        if (this._callSuperMethod(ku, Zb, [e]),
        !e && (this._owner.sentOnNetwork(this.sequence, this.num),
        !this.waitingAck)) {
            this._owner.noAckMessageSent(this.sequence, this.num);
            return
        }
    },
    verifySuccess: function() {
        return !(this._owner.checkMessagePhase(this.phase) && this.seqData.messages[this.num] && this.seqData.messages[this.num].query != null)
    },
    doRecovery: function() {
        this._owner.resend(this.num, this)
    },
    notifyAborted: function() {},
    getProg: function() {
        return this.num
    },
    getOwner: function() {
        return this._owner
    }
};
ot(ku, zl);
var br = m.getLoggerProxy(G.MESSAGES)
  , ex = function(e, t, n) {
    this.active = !1,
    this.messagePhase = 0,
    this.sequences = {},
    this.unorderedMap = {},
    this.unorderedSeqNum = 0,
    this.controlHandler = e,
    this.pushPagesHandler = t,
    this.connOptions = n
};
ex.prototype = {
    _close: function() {
        this.active = !1,
        this.sequences = {},
        this.unorderedSeqNum = 0,
        this.unorderedMap = {},
        this.messagePhase++,
        br.logDebug(m.resolve(764))
    },
    activate: function() {
        if (br.logDebug(m.resolve(765)),
        !this.active) {
            for (var e in this.sequences) {
                var t = this.sequences[e];
                for (var n in t.messages) {
                    var i = t.messages[n].query;
                    if (i != null) {
                        var r = new ku(this,this.connOptions,this.messagePhase,t,n);
                        this.sendExe(n, i, r)
                    }
                }
            }
            this.active = !0
        }
    },
    _send: function(e, t, n, i) {
        br.logDebug(m.resolve(766));
        var r = this.sequences[t];
        r == null && (r = {},
        r.messageNum = 0,
        r.messages = {},
        this.sequences[t] = r),
        r.messageNum++;
        var s = {
            LS_message: e,
            LS_reqId: Ke.nextRequestId()
        }
          , o = !1;
        n ? o = !0 : s.LS_outcome = "false",
        t != G._UNORDERED_MESSAGES && (s.LS_sequence = encodeURIComponent(t),
        o = !0,
        i && (s.LS_max_wait = i)),
        o ? s.LS_msg_prog = t == G._UNORDERED_MESSAGES ? this.mapUnordered(r.messageNum) : r.messageNum : n == null && (s.LS_ack = "false");
        var a = {};
        if (a.query = s,
        a.listener = n,
        r.messages[r.messageNum] = a,
        this.active) {
            br.logInfo(m.resolve(767), s);
            var c = new ku(this,this.connOptions,this.messagePhase,r,r.messageNum,t,o);
            this.sendExe(r.messageNum, s, c)
        }
    },
    mapUnordered: function(e) {
        var t = ++this.unorderedSeqNum;
        return this.unorderedMap[t] = e,
        t
    },
    resolveUnorderedNum: function(e) {
        return this.unorderedMap[e] ? this.unorderedMap[e] : e
    },
    removeFromUnorderedMap: function(e) {
        for (var t in this.unorderedMap)
            if (this.unorderedMap[t] == e) {
                delete this.unorderedMap[t];
                return
            }
    },
    extractMappedUnordered: function(e) {
        for (var t in this.unorderedMap)
            if (this.unorderedMap[t] == e)
                return t
    },
    checkMessagePhase: function(e) {
        return e == this.messagePhase
    },
    resend: function(e, t) {
        var n = t.seqData.messages[e].query;
        br.logDebug(m.resolve(768), n),
        this.sendExe(e, n, t)
    },
    sendExe: function(e, t, n) {
        var i = t.LS_sequence == null ? G._UNORDERED_MESSAGES : t.LS_sequence
          , r = t.LS_ack != "false"
          , s = {
            onREQOK: function(o) {
                r && o.LS_w(4, e, i, 0, 0)
            },
            onREQERR: function(o, a, c, l) {
                o.LS_l(c, e, "MSG" + i, l, !0)
            }
        };
        this.controlHandler.addRequest(e, t, je.MESSAGE, n, null, s)
    },
    ack: function(e, t) {
        t = e == G._UNORDERED_MESSAGES ? this.resolveUnorderedNum(t) : t,
        br.logInfo(m.resolve(769), e, t);
        var n = this.sequences[e];
        n.messages[t] && (n.messages[t].query != null && (br.logDebug(m.resolve(770)),
        n.messages[t].query = null),
        n.messages[t].listener == null && (br.logDebug(m.resolve(771)),
        this._clear(e, t)))
    },
    noAckMessageSent: function(e, t) {
        br.logDebug(m.resolve(772), e, t),
        this._clear(e, t)
    },
    _clear: function(e, t) {
        br.logDebug(m.resolve(773));
        var n = this.sequences[e];
        n && n.messages[t] && (delete n.messages[t],
        e == G._UNORDERED_MESSAGES && this.removeFromUnorderedMap(t))
    },
    getListener: function(e, t) {
        var n = this.sequences[e];
        return n && n.messages[t] && n.messages[t].listener ? n.messages[t].listener : null
    },
    sentOnNetwork: function(e, t) {
        br.logDebug(m.resolve(774), e, t);
        var n = this.getListener(e, t);
        if (n) {
            var i = this.pushPagesHandler.getPushPageHandler(n.pageNum);
            i && i.onMessageOnNetwork(n.prog)
        }
    },
    _complete: function(e, t) {
        t = e == G._UNORDERED_MESSAGES ? this.resolveUnorderedNum(t) : t,
        br.logInfo(m.resolve(775), e, t);
        var n = this.getListener(e, t);
        if (n) {
            var i = this.pushPagesHandler.getPushPageHandler(n.pageNum);
            i && i.onMessageComplete(n.prog)
        }
        this._clear(e, t)
    },
    notifyDiscarded: function(e, t) {
        t = e == G._UNORDERED_MESSAGES ? this.resolveUnorderedNum(t) : t,
        br.logInfo(m.resolve(776), e, t);
        var n = this.getListener(e, t);
        if (n) {
            var i = this.pushPagesHandler.getPushPageHandler(n.pageNum);
            i && i.onMessageDiscarded(n.prog)
        }
        this._clear(e, t)
    },
    notifyDenied: function(e, t, n, i) {
        i = e == G._UNORDERED_MESSAGES ? this.resolveUnorderedNum(i) : i,
        br.logInfo(m.resolve(777), e, i);
        var r = this.getListener(e, i);
        if (r) {
            var s = this.pushPagesHandler.getPushPageHandler(r.pageNum);
            s && s.onMessageDenied(r.prog, t, n)
        }
        this._clear(e, i)
    },
    notifyError: function(e, t, n, i) {
        i = e == G._UNORDERED_MESSAGES ? this.resolveUnorderedNum(i) : i,
        br.logInfo(m.resolve(778), e, i);
        var r = this.getListener(e, i);
        if (r) {
            var s = this.pushPagesHandler.getPushPageHandler(r.pageNum);
            s && s.onMessageError(r.prog, t, n)
        }
        this._clear(e, i)
    }
};
var tx = {
    unquote: decodeURIComponent
}
  , nx = function(e) {
    this.msg = e,
    this.fields = e.split(",")
};
nx.prototype = {
    getField: function(e) {
        if (e >= this.fields.length)
            throw new Error("Field " + e + " does not exist");
        return this.fields[e]
    },
    getFieldUnquoted: function(e) {
        return tx.unquote(this.getField(e))
    },
    getFieldAsInt: function(e) {
        var t = this.getField(e)
          , n = parseInt(t, 10);
        if (isNaN(n))
            throw new Error("Not an integer field");
        return n
    },
    getFieldAsFloat: function(e) {
        var t = this.getField(e)
          , n = parseFloat(t);
        if (isNaN(n))
            throw new Error("Not a float field");
        return n
    },
    getRawMsg: function() {
        return this.msg
    }
};
var Mc = m.getLoggerProxy(G.STREAM)
  , ix = function(e) {
    this.engId = e,
    this.equeue = [],
    this.hasFailed = !1,
    this.lsc = {},
    this.lsc.LS_window = Ut["_" + e],
    this.lsc.window = this.lsc.LS_window,
    this.LS_window = this.lsc.LS_window,
    this.LS_l = this.LS_window.LS_l,
    this.LS_u = this.LS_window.LS_u,
    this.LS_w = this.LS_window.LS_w,
    this.LS_e = this.LS_window.LS_e,
    this.LS_svrname = this.LS_window.LS_svrname,
    this.LS_n = this.LS_window.LS_n,
    this.LS_s = this.LS_window.LS_s,
    this.LS_o = this.LS_window.LS_o,
    this.LS_l = this.LS_window.LS_l,
    this.LS_MPNREG = this.LS_window.LS_MPNREG,
    this.LS_MPNOK = this.LS_window.LS_MPNOK,
    this.LS_MPNDEL = this.LS_window.LS_MPNDEL,
    this.dequeueAction = this.generateClosure(this.lsc)
};
ix.prototype = {
    toString: function() {
        return "[EvalQueue|" + this.equeue.length + "]"
    },
    generateClosure: function() {
        var e = this;
        return function(t) {
            try {
                e.parseText(t)
            } catch {
                e.LS_l(61, null, null, "Malformed message received")
            }
        }
    },
    _enqueue: function(e, t) {
        this.stillValid() && (this.equeue.push({
            p: e,
            d: t
        }),
        Mc.isDebugLogEnabled() && Mc.logDebug(m.resolve(779)),
        be.addTimedTask(this.dequeueAll, 0, this))
    },
    changeSession: function(e) {
        this.session = e
    },
    dequeueAll: function() {
        for (Mc.isDebugLogEnabled() && Mc.logDebug(m.resolve(780), this.equeue.length); this.equeue.length > 0; ) {
            var e = this.equeue.shift();
            if (!this.session || !this.session.checkSessionPhase(e.p)) {
                Mc.logWarn(m.resolve(781), e.p, e.d, this.session);
                continue
            }
            try {
                this.dequeueAction(e.d)
            } catch (t) {
                this.hasFailed = !0,
                this.equeue = [],
                console.log(t),
                Mc.logError(m.resolve(782), t, e.d),
                this.session.evaluationError()
            }
        }
    },
    stillValid: function() {
        return !this.hasFailed
    },
    dispose: function() {},
    parseText: function(e) {
        for (var t = e.split(`\r
`), n = 0; n < t.length; n++) {
            var i = t[n];
            if (i != "")
                try {
                    var r = new nx(i);
                    switch (r.getField(0)) {
                    case "U":
                        this.processUpdate(r);
                        break;
                    case "REQOK":
                        this.processREQOK(r);
                        break;
                    case "SUBOK":
                        this.processSUBOK(r);
                        break;
                    case "SUBCMD":
                        this.processSUBCMD(r);
                        break;
                    case "UNSUB":
                        this.processUNSUB(r);
                        break;
                    case "CONOK":
                        this.processCONOK(r);
                        break;
                    case "SERVNAME":
                        this.processSERVNAME(r);
                        break;
                    case "CLIENTIP":
                        this.processCLIENTIP(r);
                        break;
                    case "CONS":
                        this.processCONS(r);
                        break;
                    case "LOOP":
                        this.processLOOP(r);
                        break;
                    case "PROG":
                        this.processPROG(r);
                        break;
                    case "CONERR":
                        this.processCONERR(r);
                        break;
                    case "REQERR":
                        this.processREQERR(r);
                        break;
                    case "ERROR":
                        this.processERROR(r);
                        break;
                    case "MSGDONE":
                        this.processMSGDONE(r);
                        break;
                    case "MSGFAIL":
                        this.processMSGFAIL(r);
                        break;
                    case "EOS":
                        this.processEOS(r);
                        break;
                    case "CS":
                        this.processCS(r);
                        break;
                    case "OV":
                        this.processOV(r);
                        break;
                    case "CONF":
                        this.processCONF(r);
                        break;
                    case "PROBE":
                        this.processPROBE(r);
                        break;
                    case "SYNC":
                        this.processSYNC(r);
                        break;
                    case "NOOP":
                        break;
                    case "END":
                        this.processEND(r);
                        break;
                    case "MPNREG":
                        this.processMPNREG(r);
                        break;
                    case "MPNOK":
                        this.processMPNOK(r);
                        break;
                    case "MPNDEL":
                        this.processMPNDEL(r);
                        break;
                    default:
                        throw new Error("Unknown message: " + i)
                    }
                } catch (s) {
                    throw Mc.logError(m.resolve(783), i, s),
                    new Error("Malformed message: " + i)
                }
        }
    },
    processUpdate: function(e) {
        var t = null
          , n = e.getFieldAsInt(1)
          , i = e.getFieldAsInt(2)
          , r = this.parseUpdates(e.getRawMsg());
        try {
            this.LS_u(t, [n, i].concat(r))
        } catch (s) {
            Mc.logError(m.resolve(784), s)
        }
    },
    processSUBOK: function(e) {
        var t = null
          , n = e.getFieldAsInt(1)
          , i = e.getFieldAsInt(2)
          , r = e.getFieldAsInt(3);
        this.LS_w(6, t, n, i, r, -1, -1)
    },
    processSUBCMD: function(e) {
        var t = null
          , n = e.getFieldAsInt(1)
          , i = e.getFieldAsInt(2)
          , r = e.getFieldAsInt(3)
          , s = e.getFieldAsInt(4)
          , o = e.getFieldAsInt(5);
        this.LS_w(6, t, n, i, r, s - 1, o - 1)
    },
    processUNSUB: function(e) {
        var t = null
          , n = e.getFieldAsInt(1);
        this.LS_w(8, t, n)
    },
    processCONOK: function(e) {
        var t = null
          , n = e.getField(1)
          , i = e.getFieldAsInt(2)
          , r = e.getFieldAsInt(3)
          , s = e.getField(4) == "*" ? null : e.getField(4);
        this.LS_e(1, t, n, s, r, i)
    },
    processSERVNAME: function(e) {
        var t = e.getField(1);
        this.LS_svrname(t)
    },
    processCLIENTIP: function(e) {
        var t = e.getField(1);
        this.session != null && this.session.onIPReceived(t)
    },
    processCONS: function(e) {
        var t = null, n, i = e.getField(1);
        i == "unlimited" || i == "unmanaged" ? n = i : n = e.getFieldAsFloat(1),
        this.LS_e(5, t, n)
    },
    processLOOP: function(e) {
        var t = null
          , n = e.getFieldAsInt(1);
        this.LS_e(2, t, n)
    },
    processCONERR: function(e) {
        var t = null
          , n = e.getFieldAsInt(1)
          , i = e.getFieldUnquoted(2);
        this.LS_l(n, t, null, i)
    },
    processREQOK: function(e) {
        if (e.getRawMsg() != "REQOK") {
            var t = e.getFieldAsInt(1)
              , n = this.getRequestListener(t);
            n?.onREQOK(this)
        }
    },
    processREQERR: function(e) {
        var t = null
          , n = e.getFieldAsInt(1)
          , i = e.getFieldAsInt(2)
          , r = e.getFieldUnquoted(3)
          , s = this.getRequestListener(n)
          , o = null;
        if (s != null) {
            var a = this;
            o = function() {
                s.onREQERR(a, t, i, r)
            }
        }
        this.session != null && this.session.forwardREQERR(i, r, o)
    },
    processERROR: function(e) {
        var t = e.getFieldAsInt(1)
          , n = e.getFieldUnquoted(2);
        this.session != null && this.session.forwardERROR(t, n)
    },
    processEOS: function(e) {
        var t = null
          , n = e.getFieldAsInt(1)
          , i = e.getFieldAsInt(2);
        this.LS_n(t, [n, i])
    },
    processCS: function(e) {
        var t = null
          , n = e.getFieldAsInt(1)
          , i = e.getFieldAsInt(2);
        this.LS_s(t, [n, i])
    },
    processMSGDONE: function(e) {
        var t = e.getField(1);
        t == "*" && (t = G._UNORDERED_MESSAGES);
        var n = e.getFieldAsInt(2);
        this.LS_w(5, n, t, 0, 0)
    },
    processMSGFAIL: function(e) {
        var t = e.getField(1);
        t == "*" && (t = G._UNORDERED_MESSAGES);
        var n = e.getFieldAsInt(2)
          , i = e.getFieldAsInt(3)
          , r = e.getFieldUnquoted(4);
        this.LS_l(i, n, "MSG" + t, r)
    },
    processOV: function(e) {
        var t = null
          , n = e.getFieldAsInt(1)
          , i = e.getFieldAsInt(2)
          , r = e.getFieldAsInt(3);
        this.LS_o(t, [n, i, r])
    },
    processCONF: function(e) {
        var t = null, n = e.getFieldAsInt(1), i, r = e.getField(2), s = e.getField(3);
        if (s != "filtered" && s != "unfiltered")
            throw new Error("Unknown mode");
        r == "unlimited" ? i = r : i = e.getFieldAsFloat(2),
        this.LS_w(9, t, n, i)
    },
    processPROG: function(e) {
        var t = null
          , n = e.getFieldAsInt(1);
        this.LS_e(7, t, n)
    },
    processPROBE: function(e) {
        var t = null;
        this.LS_u(t, [])
    },
    processEND: function(e) {
        var t = null
          , n = e.getFieldAsInt(1)
          , i = e.getFieldUnquoted(2);
        this.LS_e(4, t, n, i)
    },
    processSYNC: function(e) {
        var t = null
          , n = e.getFieldAsInt(1);
        this.LS_s(t, n)
    },
    processMPNREG: function(e) {
        var t = e.getField(1)
          , n = e.getField(2);
        this.LS_MPNREG(t, n)
    },
    processMPNOK: function(e) {
        var t = e.getField(1)
          , n = e.getField(2);
        this.LS_MPNOK(t, n)
    },
    processMPNDEL: function(e) {
        var t = e.getField(1);
        this.LS_MPNDEL(t)
    },
    parseUpdates: function(e) {
        var t = e.indexOf(",") + 1;
        ut.verifyOk(t == 2);
        var n = e.indexOf(",", t) + 1;
        if (n <= 0)
            throw new Error("Missing subscription field");
        var i = e.indexOf(",", n) + 1;
        if (i <= 0)
            throw new Error("Missing item field");
        ut.verifyOk(e.substring(0, t) == "U,");
        var r = Ng(e.substring(t, n - 1), "Invalid subscription")
          , s = Ng(e.substring(n, i - 1), "Invalid item")
          , o = {};
        o.length = -1;
        var a = []
          , c = i - 1;
        for (ut.verifyOk(e.charAt(c) == ","); c < e.length; ) {
            var l = e.indexOf("|", c + 1);
            l == -1 && (l = e.length);
            var u = e.substring(c + 1, l);
            if (u == "")
                a.push(o);
            else if (u.charAt(0) == "#") {
                if (u.length != 1)
                    throw new Error("Wrong field quoting");
                a.push(null)
            } else if (u.charAt(0) == "$") {
                if (u.length != 1)
                    throw new Error("Wrong field quoting");
                a.push("")
            } else if (u.charAt(0) == "^")
                for (var h = Ng(u.substring(1), "Invalid field count"); h-- > 0; )
                    a.push(o);
            else {
                var d = tx.unquote(u);
                a.push(d)
            }
            c = l
        }
        return a
    },
    getRequestListener: function(e) {
        e: {
            if (this.session == null)
                break e;
            var t = this.session.controlHandler.getAndRemoveRequestListener(e);
            if (t == null)
                break e;
            return t
        }
        return null
    }
};
function Ng(e, t) {
    var n = parseInt(e, 10);
    if (isNaN(n))
        throw new Error(t);
    return n
}
var eo = 1
  , Rs = 2
  , jn = 3
  , Wo = 4
  , $o = 5
  , io = 6
  , zr = 7
  , ka = 8
  , Er = 9
  , kc = 10
  , Xr = "_"
  , Xg = "";
function Zs(e) {
    switch (e) {
    case eo:
        return "No session";
    case Rs:
        return "WS Streaming";
    case jn:
        return "prepare WS Streaming";
    case Wo:
        return "WS Polling";
    case $o:
        return "prepare WS Polling";
    case io:
        return "HTTP Streaming";
    case zr:
        return "prepare HTTP Streaming";
    case ka:
        return "HTTP Polling";
    case Er:
        return "prepare HTTP Polling";
    case kc:
        return "Shutting down"
    }
}
var Ra = {};
Ra[Rs] = zr;
Ra[io] = Er;
Ra[Wo] = jn;
Ra[ka] = jn;
Ra[Xr + Rs] = jn;
Ra[Xr + io] = Er;
Ra[Xr + Wo] = jn;
Ra[Xr + ka] = zr;
var zo = {};
zo[Rs] = zr;
zo[io] = Er;
zo[Wo] = jn;
zo[ka] = jn;
zo[Xr + Rs] = jn;
zo[Xr + io] = Er;
zo[Xr + Wo] = jn;
zo[Xr + ka] = Er;
var Au = {};
Au[Rs] = jn;
Au[io] = zr;
Au[Wo] = $o;
Au[ka] = Er;
var l1 = {};
l1[Rs] = $o;
l1[io] = Er;
l1[zr] = Er;
l1[Er] = Er;
var Iu = {};
Iu[jn] = !0;
Iu[$o] = !0;
Iu[zr] = !0;
Iu[Er] = !0;
var zd = !1
  , Xd = !0
  , Kd = !1
  , Yd = !0
  , bb = !0
  , wF = !0
  , CF = !1
  , Dt = m.getLoggerProxy(G.PROTOCOL)
  , kn = m.getLoggerProxy(G.SESSION)
  , EF = 1
  , O3 = function(e, t, n) {
    this.objectId = EF++,
    kn.isDebugLogEnabled() && kn.logDebug(m.resolve(785), this.objectId),
    this.status = eo,
    this.statusPhase = 0,
    this.session = null,
    this.clientIP = null,
    this.frozen = Xg,
    this.owner = e,
    this.pushPagesHandler = t,
    this.policyBean = e._policy,
    this.connectionBean = e._connection,
    this.engineId = e.getEngineId(),
    this.slowing = new Kb(this.policyBean,this.engineId),
    this.pEvents = new A3(this.engineId,t),
    Bt.addUnloadHandler(this),
    this.exportForceReload(),
    this.disableXSXHRTime = null,
    this.controlHandler = new Qb(this,e._policy,this.engineId,!1),
    this.sendMessageHandler = new ex(this.controlHandler,this.pushPagesHandler,this.policyBean),
    this.mpnManager = n,
    this.nBindAfterCreate = 0
};
O3.prototype = {
    exportForceReload: function() {
        var e = this;
        Ut.exportGlobal(this.engineId, "LS_forceReload", function() {
            e.session && e.session.onErrorEvent("server.exit", {
                closedOnServer: !0
            })
        })
    },
    changeStatus: function(e) {
        kn.isDebugLogEnabled() && kn.logDebug(m.resolve(786), Zs(this.status), "->", Zs(e)),
        this.status = e,
        this.statusPhase++
    },
    closeSession: function(e, t, n) {
        this.status == eo || this.status == kc || this.session && this.session.closeSession(e ? "api" : t, !1, n)
    },
    disconnectAndReconnect: function() {
        this.status == eo || this.status == kc || this.session && this.session.disconnectAndReconnect()
    },
    syncErrorOnControl: function() {
        this.status == eo || this.status == kc || this.session && this.session.onSyncError("control.syncerror")
    },
    isAlive: function() {
        return this.status != eo && this.status != kc
    },
    changeTransport: function(e, t, n, i, r) {
        if (this.session != null && this.session.isActive())
            this.createOrSwitchSession(e, t, n, i, r);
        else {
            var s = i ? r ? Er : $o : r ? zr : jn;
            this.status = s,
            this.session.switchRequired = !0
        }
    },
    retry: function(e, t, n, i) {
        if (e == this.statusPhase) {
            var r = this.status === Rs || this.status === io ? zd : Xd
              , s = this.status === Rs || this.status === Wo ? Kd : Yd;
            this.createSession(!1, this.frozen, n, r, s, t, i)
        }
    },
    createOrSwitchSession: function(e, t, n, i, r, s, o) {
        !o && this.isAlive() ? this.switchSession(e, t, n, i, r, s) : this.createSession(e, t, n, i, r, s, !1)
    },
    switchSession: function(e, t, n, i, r, s) {
        e && As.init(),
        this.disableCorsCheck();
        var o = e ? "api" : s;
        this.frozen = t ? Xr : Xg;
        var a = i ? r ? Er : $o : r ? zr : jn;
        this.changeStatus(a),
        this.startSwitchTimeout(o),
        this.session.requestSwitch(this.statusPhase, o, n)
    },
    createSession: function(e, t, n, i, r, s, o) {
        e && As.init(),
        this.disableCorsCheck();
        var a = e ? "api" : s;
        this.frozen = t ? Xr : Xg,
        this.resetControlHandlers();
        var c = this.session ? this.session.getSessionId() : null;
        a = "new." + a,
        this.closeSession(!1, a, CF);
        var l = i ? r ? ka : Wo : r ? io : Rs;
        this.changeStatus(l),
        this.session != null && this.session.shutdown(!1),
        this.prepareNewSessionInstance(i, n, r),
        this.session.createSession(c, a, o)
    },
    prepareNewSessionInstance: function(e, t, n, i, r) {
        var s = this.disableXSXHRTime !== null
          , o = n ? to : sr;
        r && (s = !1),
        this.session = new o(e,t,this,this.statusPhase,i,s,r,this.mpnManager),
        i && i.shutdown(),
        this.slowing.changeSession(this.session),
        this.evalQueue && this.evalQueue.changeSession(this.session),
        this.pEvents.changeSession(this.session)
    },
    bindSession: function(e, t, n, i) {
        var r = t ? n ? ka : Wo : n ? io : Rs;
        this.changeStatus(r),
        this.prepareNewSessionInstance(t, e, n, this.session),
        this.session.bindSession(i)
    },
    recoverSession: function(e, t, n) {
        if (kn.logDebug(m.resolve(787), t),
        e != this.statusPhase) {
            kn.logDebug(m.resolve(788));
            return
        }
        var i = Au[this.status] || this.status
          , r = i == jn || i == zr ? zd : Xd
          , s = i == jn || i == $o ? Kd : Yd
          , o = r ? s ? ka : Wo : s ? io : Rs;
        this.changeStatus(o),
        this.prepareNewSessionInstance(r, n, s, this.session, !0),
        this.session.recoverSession()
    },
    shouldGiveUpTrying: function() {
        return this.frozen == Xr && Au[this.status] == zo[this.frozen + this.status]
    },
    onSessionGivesUp: function(e, t, n) {
        if (e == this.statusPhase) {
            if (n) {
                kn.logInfo(m.resolve(789)),
                this.changeStatus(eo);
                return
            }
            var i = zo[this.status] || this.status;
            if (i == zr && mi.isProbablyEdge() && (i = Er),
            kn.logInfo(m.resolve(790), Zs(this.status), Zs(i)),
            i == eo || i == kc) {
                ut.fail(),
                kn.logError(m.resolve(791));
                return
            }
            this.changeStatus(i),
            this.startSwitchTimeout(t),
            this.session.requestSwitch(this.statusPhase, t, !1)
        }
    },
    onSlowRequired: function(e) {
        if (e == this.statusPhase) {
            var t = l1[this.status];
            if (kn.logInfo(m.resolve(792), Zs(this.status), Zs(t)),
            !t) {
                ut.fail(),
                kn.logError(m.resolve(793), Zs(this.status), this.session);
                return
            }
            this.changeStatus(t),
            this.startSwitchTimeout("slow"),
            this.session.requestSlow(this.statusPhase)
        }
    },
    createMachine: function(e, t, n) {
        if (e == this.statusPhase) {
            var i = Ra[this.frozen + this.status] || this.status;
            if (kn.logInfo(m.resolve(794), Zs(this.status), Zs(i)),
            i == eo || i == kc) {
                ut.fail(),
                kn.logError(m.resolve(795));
                return
            }
            var r = i == jn || i == zr ? zd : Xd
              , s = i == jn || i == $o ? Kd : Yd;
            this.createOrSwitchSession(!1, this.frozen == Xr, n, r, s, t, bb)
        }
    },
    switchMachine: function(e, t, n) {
        if (e == this.statusPhase) {
            var i = this.status;
            if (kn.logInfo(m.resolve(796), Zs(this.status)),
            !Iu[i]) {
                ut.fail(),
                kn.logError(m.resolve(797));
                return
            }
            var r = i == jn || i == zr ? zd : Xd
              , s = i == jn || i == $o ? Kd : Yd;
            this.bindSession(n, r, s, t)
        }
    },
    slowMachine: function(e) {
        kn.logInfo(m.resolve(798)),
        this.switchMachine(e, "slow", !1)
    },
    switchTimeout: function(e, t) {
        if (e == this.statusPhase) {
            var n = this.status;
            if (kn.logInfo(m.resolve(799), Zs(this.status)),
            !Iu[n]) {
                ut.fail(),
                kn.logError(m.resolve(800));
                return
            }
            t = "switch.timeout." + t;
            var i = n == jn || n == zr ? zd : Xd
              , r = n == jn || n == $o ? Kd : Yd;
            this.createOrSwitchSession(!1, this.frozen == Xr, !1, i, r, t, bb)
        }
    },
    startSwitchTimeout: function(e) {
        var t = this.policyBean.switchCheckTimeout + (this.slowing.getDelay() || 0);
        be.addTimedTask(this.switchTimeout, t, this, [this.statusPhase, e])
    },
    resetControlHandlers: function() {
        this.controlHandler._reset(),
        this.sendMessageHandler._close()
    },
    connectionsEnableFlagsChanged: function() {
        var e = this.disableXSXHRTime !== null;
        this.session && this.session.resetConnectionList(e),
        this.controlHandler && this.controlHandler.resetConnectionList(e)
    },
    onCorsError: function(e) {
        e == this.statusPhase && this.connectionsEnableFlagsChanged()
    },
    disableCorsCheck: function() {
        if (this.disableXSXHRTime !== null) {
            var e = Et.getTimeStamp() - this.disableXSXHRTime;
            e > 1e3 && (this.disableXSXHRTime = null,
            this.connectionsEnableFlagsChanged())
        }
    },
    isSessionOpen: function() {
        return this.session ? this.session.isOpen() : null
    },
    isSessionOpenOrRecovering: function() {
        return this.session ? this.session.isOpen() || this.session.isRecovering() : null
    },
    getHighLevelStatus: function() {
        return this.session ? this.session.getHighLevelStatus() : G.DISCONNECTED
    },
    getSessionHost: function() {
        return this.session ? this.session.getSessionHost() : null
    },
    getPushServerAddress: function() {
        return this.session ? this.session.getPushServerAddress() : this.connectionBean.serverAddress
    },
    getSessionId: function() {
        return this.session ? this.session.getSessionId() : null
    },
    getPolicyBean: function() {
        return this.policyBean
    },
    getConnectionBean: function() {
        return this.connectionBean
    },
    getSlowing: function() {
        return this.slowing
    },
    getEvalQueue: function() {
        return (!this.evalQueue || !this.evalQueue.stillValid()) && (this.evalQueue = new ix(this.engineId),
        this.evalQueue.changeSession(this.session)),
        this.evalQueue
    },
    dispose: function() {
        this.evalQueue && this.evalQueue.dispose(),
        Bt.removeUnloadHandler(this)
    },
    unloadEvent: function() {
        this.closeSession(!1, "unload", wF),
        this.changeStatus(kc)
    },
    getControlConnectionHandler: function() {
        return this.controlHandler
    },
    getEngineId: function() {
        return this.engineId
    },
    statusChanged: function(e) {
        e == this.statusPhase && this.owner.notifyLSStatus()
    },
    onSessionStart: function(e) {
        kn.logInfo(m.resolve(801), this.session),
        this.onChangeRequestLimitLength(e),
        this.sendMessageHandler.activate(),
        this.owner.onSessionStart(),
        this.handleReverseHeartbeat(!1),
        this.nBindAfterCreate = 0
    },
    onChangeRequestLimitLength: function(e) {
        e && this.controlHandler.setRequestLimit(e)
    },
    onSessionBound: function() {
        this.nBindAfterCreate == 0 && this.mpnManager.eventManager.onSessionStart(),
        this.nBindAfterCreate++
    },
    onSessionClose: function(e, t) {
        return e != this.statusPhase ? null : (kn.logDebug(m.resolve(802), this.session),
        this.resetControlHandlers(),
        this.owner.onSessionEnd(),
        t ? this.changeStatus(eo) : this.changeStatus(this.status),
        this.mpnManager.eventManager.onSessionClose(!t),
        this.statusPhase)
    },
    onUpdateReceived: function(e, t) {
        this.pushPagesHandler.onSubscriptionEvent(e[0]);
        var n = this.pushPagesHandler.getPushPageHandlerFromTableNumber(e[0]);
        if (!n) {
            Dt.logDebug(m.resolve(803), this);
            return
        }
        Dt.isDebugLogEnabled() && Dt.logDebug(m.resolve(804), e),
        n.onUpdate(e, t)
    },
    onLostUpdatesEvent: function(e) {
        this.pushPagesHandler.onSubscriptionEvent(e[0]);
        var t = this.pushPagesHandler.getPushPageHandlerFromTableNumber(e[0]);
        if (!t) {
            Dt.logDebug(m.resolve(805), this);
            return
        }
        Dt.isDebugLogEnabled() && Dt.logDebug(m.resolve(806), e),
        t.onLostUpdates(e[0], e[1], e[2])
    },
    onEndOfSnapshotEvent: function(e) {
        this.pushPagesHandler.onSubscriptionEvent(e[0]);
        var t = this.pushPagesHandler.getPushPageHandlerFromTableNumber(e[0]);
        if (!t) {
            Dt.logDebug(m.resolve(807), this);
            return
        }
        Dt.isDebugLogEnabled() && Dt.logDebug(m.resolve(808), e),
        t.onEndOfSnapshot(e[0], e[1])
    },
    onClearSnapshotEvent: function(e) {
        this.pushPagesHandler.onSubscriptionEvent(e[0]);
        var t = this.pushPagesHandler.getPushPageHandlerFromTableNumber(e[0]);
        if (!t) {
            Dt.logDebug(m.resolve(809), this);
            return
        }
        Dt.isDebugLogEnabled() && Dt.logDebug(m.resolve(810), e),
        t.onClearSnapshot(e[0], e[1])
    },
    onServerError: function(e, t) {
        Dt.isDebugLogEnabled() && Dt.logDebug(m.resolve(811), e, t),
        this.changeStatus(eo),
        this.pushPagesHandler.notifyServerError(e, t)
    },
    onTableError: function(e, t, n) {
        var i = this.pushPagesHandler.getPushPageHandlerFromTableNumber(e);
        i ? (Dt.isDebugLogEnabled() && Dt.logDebug(m.resolve(812), e, t, n),
        i.onSubscriptionError(e, t, n)) : Dt.logDebug(m.resolve(813), this),
        this.pushPagesHandler.onSubscriptionError(e)
    },
    onUnsubscription: function(e) {
        var t = this.pushPagesHandler.getPushPageHandlerFromTableNumber(e);
        t ? (Dt.isDebugLogEnabled() && Dt.logDebug(m.resolve(814), e),
        t.onUnsubscription(e)) : Dt.logDebug(m.resolve(815), this),
        this.pushPagesHandler.onUnsubscription(e)
    },
    onSubscriptionReconf: function(e, t, n) {
        Dt.isDebugLogEnabled() && Dt.logDebug(m.resolve(816), e, t, n),
        this.pushPagesHandler.onSubscriptionReconfEvent(e, t);
        var i = this.pushPagesHandler.getPushPageHandlerFromTableNumber(e);
        i != null ? i.onSubscriptionReconf(e, n) : Dt.logWarn(m.resolve(817), e)
    },
    onSubscription: function(e, t, n, i, r) {
        this.pushPagesHandler.onSubscription(e);
        var s = this.pushPagesHandler.getPushPageHandlerFromTableNumber(e);
        if (!s) {
            Dt.logDebug(m.resolve(818), this);
            return
        }
        Dt.isDebugLogEnabled() && Dt.logDebug(m.resolve(819), e, t, n, i, r),
        s.onSubscription(e, i, r, t, n)
    },
    onMessageAck: function(e, t) {
        Dt.isDebugLogEnabled() && Dt.logDebug(m.resolve(820), e, t),
        this.sendMessageHandler.ack(e, t)
    },
    onMessageOk: function(e, t) {
        Dt.isDebugLogEnabled() && Dt.logDebug(m.resolve(821), e, t),
        this.sendMessageHandler._complete(e, t)
    },
    onMessageDeny: function(e, t, n, i) {
        Dt.isDebugLogEnabled() && Dt.logDebug(m.resolve(822), e, i, t, n),
        this.sendMessageHandler.notifyDenied(e, t, i, n)
    },
    onMessageDiscarded: function(e, t) {
        Dt.isDebugLogEnabled() && Dt.logDebug(m.resolve(823), e, t),
        this.sendMessageHandler.notifyDiscarded(e, t)
    },
    onMessageError: function(e, t, n, i) {
        Dt.isDebugLogEnabled() && Dt.logDebug(m.resolve(824), e, i, t, n),
        this.sendMessageHandler.notifyError(e, t, i, n)
    },
    onObsoleteControlLink: function(e) {
        this.owner.onObsoleteControlLink(e)
    },
    onNewControlLink: function(e) {
        Dt.isDebugLogEnabled() && Dt.logDebug(m.resolve(825), e),
        this.owner.onNewControlLink(e)
    },
    onIPReceived: function(e) {
        this.clientIP && e != this.clientIP && qn.isDisabledClass() && (qn.restoreClass(),
        this.createOrSwitchSession(!1, this.frozen == Xr, !1, !1, !1, "ip", !1)),
        this.clientIP = e
    },
    onServerKeepalive: function() {
        this.owner.onServerKeepalive()
    },
    sendAMessage: function(e, t, n, i) {
        this.sendMessageHandler._send(e, t, n, i)
    },
    sendLog: function(e, t) {
        var n = no.getLogRequestParams(this.statusPhase, e, t);
        this.controlHandler.addRequest(null, n, je.LOG, null)
    },
    changeBandwidth: function(e) {
        this.session && this.session.changeBandwidth()
    },
    sendSubscription: function(e, t, n, i, r) {
        var s = {
            onREQOK: function(o) {},
            onREQERR: function(o, a, c, l) {
                o.LS_l(c, a, e, l)
            }
        };
        this.controlHandler.addRequest(e, t, je.ADD, r, i, s)
    },
    sendUnsubscription: function(e, t, n, i, r) {
        var s = {
            onREQOK: function(o) {},
            onREQERR: function(o, a, c, l) {
                c != 19 && r.discard(),
                kn.logError(m.resolve(826) + xb(t) + " caused the error: ", c, l)
            }
        };
        this.controlHandler.addRequest(e, t, je.REMOVE, r, i, s)
    },
    sendSubscriptionChange: function(e, t, n) {
        var i = {
            onREQOK: function(r) {},
            onREQERR: function(r, s, o, a) {
                n.discard(),
                kn.logError(m.resolve(827) + xb(t) + "] caused the error: " + o + " " + a)
            }
        };
        this.controlHandler.addRequest(e, t, je.CHANGE_SUB, n, null, i)
    },
    handleReverseHeartbeat: function(e) {
        this.session && this.session.handleReverseHeartbeat(e)
    },
    enqueueControlResponse: function(e) {
        var t = this.session == null ? null : this.session.push_phase;
        this.getEvalQueue()._enqueue(t, e)
    },
    sendRegisterForMpn: function(e, t) {
        var n = this
          , i = {
            onREQOK: function(o) {
                t.onResponse()
            },
            onREQERR: function(o, a, c, l) {
                t.onResponse(),
                n.session != null && n.session.onMpnRegisterError(c, l)
            }
        }
          , r = e.reqId
          , s = null;
        this.controlHandler.addRequest(r, e.query, je.MPN, t, s, i)
    },
    sendMpnSubscription: function(e, t) {
        var n = this
          , i = {
            onREQOK: function(o) {
                t.onResponse()
            },
            onREQERR: function(o, a, c, l) {
                t.onResponse(),
                n.session != null && n.session.onMpnSubscribeError(e.subscriptionId, c, l)
            }
        }
          , r = e.reqId
          , s = null;
        this.controlHandler.addRequest(r, e.query, je.MPN, t, s, i)
    },
    sendMpnUnsubscription: function(e, t) {
        var n = this
          , i = {
            onREQOK: function(o) {
                t.onResponse()
            },
            onREQERR: function(o, a, c, l) {
                t.onResponse(),
                n.session != null && n.session.onMpnUnsubscribeError(e.subscriptionId, c, l)
            }
        }
          , r = e.reqId
          , s = null;
        this.controlHandler.addRequest(r, e.query, je.MPN, t, s, i)
    },
    sendMpnFilteredUnsubscription: function(e, t) {
        var n = {
            onREQOK: function(s) {
                t.onResponse()
            },
            onREQERR: function(s, o, a, c) {
                t.onResponse()
            }
        }
          , i = e.reqId
          , r = null;
        this.controlHandler.addRequest(i, e.query, je.MPN, t, r, n)
    },
    onFatalError: function(e) {
        kn.logError(m.resolve(828), e.stack || e),
        this.session && this.session.onFatalError(61, "Internal error: " + e)
    }
};
function xb(e) {
    var t = "{";
    for (var n in e)
        t += n + "=" + e[n] + " ";
    return t += "}",
    t
}
O3.prototype.unloadEvent = O3.prototype.unloadEvent;
var $n = Pi.simple
  , TF = Pi.simpleWithResponseAndTimeout
  , Kg = {
    onEngineConfigurationChange: $n,
    onEngineDeath: $n,
    onStatusChange: $n,
    onSessionStart: $n,
    onSessionEnd: $n,
    onEngineDying: $n,
    onServerError: $n,
    onServerKeepalive: $n,
    ping: TF,
    onSubscription: $n,
    onUnsubscription: $n,
    onEndOfSnapshot: $n,
    onUpdate: $n,
    onLostUpdates: $n,
    onClearSnapshot: $n,
    onSubscriptionError: $n,
    onMessageDiscarded: $n,
    onMessageDenied: $n,
    onMessageError: $n,
    onMessageComplete: $n,
    onMessageOnNetwork: $n,
    onSubscriptionReconf: $n
};
function Du(e, t) {
    this.engine = e,
    this.id = t
}
Du.methods = Kg;
Du.prototype = {
    setEngineHandler: function(e) {
        this.target = e
    },
    onClientConfigurationChange: function(e, t, n) {
        var i = e == "ConnectionDetails" ? this.engine._connection : e == "ConnectionOptions" ? this.engine._policy : this.engine._configuration;
        i.simpleSetter(t, n)
    },
    callConnect: function(e) {
        e == this.engine.getSessionPhase() && this.engine.doConnect()
    },
    callDisconnect: function(e) {
        e == this.engine.getSessionPhase() && this.engine.doDisconnect()
    },
    callDisconnectAndReconnect: function(e) {
        e == this.engine.getSessionPhase() && this.engine.doDisconnectAndReconnect()
    },
    pong: function() {
        if (this.engine === null)
            throw "net";
        return !0
    },
    clientDeath: function() {
        be.addTimedTask(this.engine.checkClientHealth, 0, this.engine),
        be.addTimedTask(this.engine.checkClientHealth, 1e3, this.engine)
    },
    subscribeTable: function(e, t) {
        return e != this.engine.getSessionPhase() ? null : this.engine.subscribe(this.id, t)
    },
    unsubscribeTable: function(e, t) {
        return e != this.engine.getSessionPhase() ? null : this.engine.unsubscribe(t)
    },
    updateSubscriptionParams: function(e, t, n) {
        return e != this.engine.getSessionPhase() ? null : this.engine.updateSubscriptionParams(t, n)
    },
    forwardMessage: function(e, t, n, i, r) {
        if (e != this.engine.getSessionPhase())
            return null;
        var s = i == null ? null : {
            prog: i,
            pageNum: this.id
        };
        this.engine.sendAMessage(t, n, s, r)
    },
    forwardLog: function(e) {
        this.engine.sendLog(e)
    },
    dispose: function() {
        this.engine = null
    }
};
for (g3 in Kg)
    Du.prototype[g3] = Hb.createCaller(g3, Kg[g3]);
var g3, rx = Et.randomG(), Yg = G.BUILD;
isNaN(Yg) && (Yg = 0);
var Fg = m.getLoggerProxy(G.SESSION)
  , sx = function(e, t, n, i, r, s, o) {
    if (this._configuration = new c1(e),
    this._configuration.setBroadcaster(this, !0),
    this._connection = new cn(n),
    this._connection.setBroadcaster(this, !0),
    this._policy = new ae(t),
    this._policy.setBroadcaster(this, !0),
    this.lastStatus = null,
    this.pushPages = new jo(this,this._configuration,this._connection,this._policy),
    i && i.isPossible()) {
        this.sharedStatus = i.createSharedStatus(this, be.packTask(this.dispose, this), s);
        var a = this.sharedStatus.getBridge();
        a != null && (this.channels = i.createChannelsManager(this, a),
        this.channels.addListener(this.pushPages)),
        this.id = this.sharedStatus.getId()
    } else {
        this.sharedStatus = null;
        do
            this.id = "NS" + rx++;
        while (Ut.hasGlobal(this.id, "lsEngine"))
    }
    Ut.exportGlobal(this.id, "lsEngine", this),
    this.sessionHandler = new O3(this,this.pushPages,o),
    this.bindLocalClient(r, G.MAIN_CLIENT),
    this._configuration.connectionRequested && this.doConnect()
};
sx.prototype = {
    toString: function() {
        return "[LightstreamerEngine " + this.id + "]"
    },
    bindLocalClient: function(e, t) {
        t || (t = "LOCAL" + rx++);
        var n = new Du(this,t);
        n.setEngineHandler(e),
        e.setPushPageHandler(n),
        this.pushPages.onNewPushPage(t, n)
    },
    getEngineId: function() {
        return this.id
    },
    isSessionOpen: function() {
        return this.sessionHandler.isSessionOpen()
    },
    isSessionOpenOrRecovering: function() {
        return this.sessionHandler.isSessionOpenOrRecovering()
    },
    getSharedStatus: function() {
        return this.sharedStatus
    },
    getSessionPhase: function() {
        return this.pushPages.getSessionPhase()
    },
    onSessionEnd: function() {
        this.pushPages.onSessionEnd()
    },
    onSessionStart: function() {
        this.pushPages.onSessionStart()
    },
    dispose: function() {
        this.sessionHandler.closeSession(!1, "suicide", !0),
        this.sessionHandler.dispose(),
        Ut.cleanAllGlobals(this.id),
        this.sharedStatus && this.sharedStatus.dispose(),
        this.pushPages.notifyEngineDeath(!0),
        this.pushPages.dispose(),
        this.channels && this.channels.dispose()
    },
    doDisconnect: function() {
        Fg.logInfo(m.resolve(829)),
        this._configuration.simpleSetter("connectionRequested", !1),
        this.sessionHandler.closeSession(!0, "api", !0)
    },
    doDisconnectAndReconnect: function() {
        this._configuration.simpleSetter("connectionRequested", !1),
        this.sessionHandler.disconnectAndReconnect()
    },
    doChangeTransport: function() {
        var e = this._policy.forcedTransport;
        if (Fg.logInfo(m.resolve(830), e),
        e === null) {
            var t = !0
              , n = !1
              , i = !1
              , r = !1
              , s = !1;
            this.sessionHandler.changeTransport(t, n, i, r, s)
        } else {
            var t = !0
              , n = e == G.WS_ALL || e == G.HTTP_ALL
              , i = !n
              , r = e == G.WS_POLLING || e == G.HTTP_POLLING
              , s = e == G.HTTP_POLLING || e == G.HTTP_STREAMING || e == G.HTTP_ALL;
            this.sessionHandler.changeTransport(t, n, i, r, s)
        }
    },
    doConnect: function() {
        Fg.logInfo(m.resolve(831)),
        this._configuration.simpleSetter("connectionRequested", !0);
        var e = this._policy.forcedTransport;
        e === null ? this.sessionHandler.createOrSwitchSession(!0, !1, !1, !1, !1) : this.doConnectForced(e)
    },
    doConnectForced: function(e) {
        var t = e == G.WS_POLLING || e == G.HTTP_POLLING
          , n = e == G.HTTP_POLLING || e == G.HTTP_STREAMING || e == G.HTTP_ALL
          , i = e == G.WS_ALL || e == G.HTTP_ALL
          , r = !i;
        this.sessionHandler.createOrSwitchSession(!0, i, r, t, n)
    },
    broadcastSetting: function(e, t, n) {
        return this.pushPages.forEachPushPage(function(i) {
            i.onEngineConfigurationChange(e, t, n)
        }),
        t == "requestedMaxBandwidth" ? this.sessionHandler.changeBandwidth(n) : t == "forcedTransport" ? this._configuration.connectionRequested && this.doChangeTransport() : t == "reverseHeartbeatInterval" ? this.sessionHandler.handleReverseHeartbeat(!1) : (t == "corsXHREnabled" || t == "xDomainStreamingEnabled") && this.sessionHandler.connectionsEnableFlagsChanged(),
        !0
    },
    onObsoleteControlLink: function(e) {
        this.sharedStatus && this.sharedStatus.removeConnectionToServerFlag(e)
    },
    onNewControlLink: function(e) {
        this.sharedStatus && this.sharedStatus.addConnectionToServerFlag(e)
    },
    getStatus: function() {
        return this.sessionHandler.getHighLevelStatus()
    },
    notifyLSStatus: function() {
        var e = this.getStatus();
        if (this.lastStatus != e) {
            var t = this.lastStatus;
            this.lastStatus = e,
            this.pushPages.notifyNewStatus(e, t),
            this.onStatusChange && this.onStatusChange(e)
        }
    },
    sendAMessage: function(e, t, n, i) {
        var r = this.getStatus();
        return r == G.DISCONNECTED || r == G.WILL_RETRY ? !1 : (this.sessionHandler.sendAMessage(e, t, n, i),
        !0)
    },
    sendLog: function(e) {
        return this.sessionHandler.sendLog(e, Yg),
        !0
    },
    subscribe: function(e, t) {
        return this.pushPages.handleTable(e, t)
    },
    unsubscribe: function(e) {
        this.pushPages.removeTable(e)
    },
    updateSubscriptionParams: function(e, t) {
        this.pushPages.updateSubscriptionParams(e, t)
    },
    checkClientHealth: function() {
        this.pushPages.cleanThread()
    },
    onServerKeepalive: function() {
        this.pushPages.onServerKeepalive()
    },
    sendRegisterForMpn: function(e, t) {
        this.sessionHandler.sendRegisterForMpn(e, t)
    },
    sendMpnSubscription: function(e, t) {
        this.sessionHandler.sendMpnSubscription(e, t)
    },
    sendMpnUnsubscription: function(e, t) {
        this.sessionHandler.sendMpnUnsubscription(e, t)
    },
    sendMpnFilteredUnsubscription: function(e, t) {
        this.sessionHandler.sendMpnFilteredUnsubscription(e, t)
    },
    onFatalError: function(e) {
        this.sessionHandler.onFatalError(e)
    }
};
var Bo = "|";
function ox(e, t, n) {
    this.id = e,
    this.shareName = t,
    this.status = n
}
ox.prototype = {
    getStatus: function() {
        return this.status
    }
};
var i7 = {
    readSharedStatus: function(e, t) {
        return this.readComposedValue(t + "_" + e)
    },
    writeSharedStatus: function(e, t, n) {
        n = n.join(Bo);
        var i = G.STORAGE_PREFIX + t + "_" + e;
        this.write(i, n)
    },
    cleanSharedStatus: function(e, t) {
        var n = G.STORAGE_PREFIX + t + "_" + e;
        this.clean(n)
    },
    readIds: function(e) {
        return this.readComposedValue(e)
    },
    readIdsObjects: function(e) {
        var t = this.readComposedValue(e);
        if (!t)
            return null;
        for (var n = [], i = 0; i < t.length; i++) {
            var r = t[i].split("_");
            if (r.length == 2) {
                var s = this.readSharedStatus(r[1], r[0]);
                s != null && n.push(new ox(r[0],r[1],s))
            }
        }
        return n
    },
    addId: function(e, t, n) {
        e = G.STORAGE_PREFIX + e,
        t = t + (n ? "_" + n : "");
        var i = this.read(e);
        if (!i)
            i = Bo;
        else if (i.indexOf(Bo + t + Bo) > -1)
            return !1;
        return i += t + Bo,
        this.write(e, i),
        !0
    },
    removeId: function(e, t, n) {
        e = G.STORAGE_PREFIX + e,
        t = t + (n ? "_" + n : "");
        var i = this.read(e);
        if (i) {
            var r = Bo + t + Bo;
            i.indexOf(r) > -1 && (i = i.replace(r, Bo),
            i == Bo ? this.clean(e) : this.write(e, i))
        }
    },
    getAllKeys: function() {
        for (var e = this.keys(), t = [], n = 0; n < e.length; n++)
            e[n].indexOf(G.STORAGE_PREFIX) == 0 && (e[n] = e[n].substring(G.STORAGE_PREFIX.length),
            t.push(e[n]));
        return t
    },
    readComposedValue: function(e) {
        e = G.STORAGE_PREFIX + e;
        var t = this.read(e);
        if (!t)
            return null;
        var n = t.split(Bo);
        return n[0] == "" && n.shift(),
        n[n.length - 1] == "" && n.pop(),
        n.length > 0 ? n : null
    }
}
  , ax = Ke.extendObj({
    read: function(e) {
        return localStorage.getItem(e)
    },
    write: function(e, t) {
        localStorage.setItem(e, t)
    },
    clean: function(e) {
        localStorage.removeItem(e)
    },
    keys: function() {
        for (var e = [], t = 0; t < localStorage.length; t++)
            e.push(localStorage.key(t));
        return e
    }
}, i7)
  , m3 = function() {
    var e = null
      , t = {
        areCookiesEnabled: function() {
            return e === null && t.checkCookiesFunctionality(),
            e
        },
        getAllCookiesAsSingleString: function() {
            return this.areCookiesEnabled() ? document.cookie.toString() : null
        },
        writeCookie: function(n, i) {
            this.writeCookieExe(n, i, "")
        },
        writeCookieExe: function(n, i, r) {
            if (this.areCookiesEnabled()) {
                var s = ""
                  , o = encodeURIComponent(n) + "=" + i + "; "
                  , a = o + s + r + "path=/;";
                document.cookie = a
            }
        },
        readCookie: function(n) {
            if (!this.areCookiesEnabled())
                return null;
            n = encodeURIComponent(n) + "=";
            var i = this.getAllCookiesAsSingleString();
            i = i.split(";");
            for (var r = 0; r < i.length; r++)
                if (i[r] = Et.trim(i[r]),
                i[r].indexOf(n) == 0)
                    return i[r].substring(n.length, i[r].length);
            return null
        },
        removeCookie: function(n) {
            if (this.areCookiesEnabled()) {
                var i = new Date;
                i.setTime(i.getTime() - 864e5);
                var r = "expires=" + i.toUTCString() + "; ";
                this.writeCookieExe(n, "deleting", r)
            }
        },
        checkCookiesFunctionality: function() {
            if (e = !1,
            !!vt.isBrowserDocument() && !(document.location.protocol != "http:" && document.location.protocol != "https:")) {
                e = !0;
                var n = Et.randomG()
                  , i = "LS__cookie_test" + n;
                this.writeCookie(i, "testing");
                var r = this.readCookie(i);
                r == "testing" && (this.removeCookie(i),
                r = this.readCookie(i),
                r == null) || (e = !1)
            }
        }
    };
    return t.areCookiesEnabled = t.areCookiesEnabled,
    t.getAllCookiesAsSingleString = t.getAllCookiesAsSingleString,
    t.writeCookie = t.writeCookie,
    t.removeCookie = t.removeCookie,
    t.readCookie = t.readCookie,
    t
}()
  , L3 = Ke.extendObj({
    read: function(e) {
        return m3.readCookie(e)
    },
    write: function(e, t) {
        m3.writeCookie(e, t)
    },
    clean: function(e) {
        m3.removeCookie(e)
    },
    keys: function() {
        var e = []
          , t = m3.getAllCookiesAsSingleString();
        e = t.split(";");
        for (var n = 0; n < e.length; n++)
            e[n] = Et.trim(e[n]),
            e[n] = e[n].substring(0, e[n].indexOf("=")),
            e[n] = decodeURIComponent(e[n]);
        return e
    }
}, i7)
  , Vo = []
  , OF = G.REFRESH_STATUS_INTERVAL + G.REFRESH_STATUS_INTERVAL_TOLERANCE
  , cx = 6e4
  , u1 = function(e) {
    this._callSuperConstructor(u1),
    this.manager = e,
    this.task = null
};
u1.prototype = {
    start: function() {
        this.task && be.stopRepetitiveTask(this.task),
        this.task = be.addRepetitiveTask(this.collect, cx, this),
        be.addTimedTask(this.collect, 0, this)
    },
    clean: function() {
        be.stopRepetitiveTask(this.task);
        for (var e = 0; e < Vo.length; e++)
            if (Vo[e] == this) {
                Vo.splice(e, 1);
                return
            }
    },
    collect: function() {
        for (var e = Et.getTimeStamp(), t = this.manager.getAllKeys(), n = 0; n < t.length; n++)
            t[n].indexOf("_") > 0 && this.checkEngine(t[n], null, e);
        for (var n = 0; n < t.length; n++)
            t[n].indexOf("_") <= -1 && this.checkList(t[n])
    },
    checkEngine: function(e, t, n) {
        if (!t) {
            var i = e.split("_");
            if (i.length != 2)
                return !1;
            e = i[0],
            t = i[1]
        }
        var r = this.manager.readSharedStatus(t, e);
        if (!r)
            return !1;
        if (!n)
            return !0;
        var s = n - r[G.TIMESTAMP_INDEX];
        return s > OF ? (this.manager.cleanSharedStatus(t, e),
        !1) : !0
    },
    checkList: function(e) {
        for (var t = this.manager.readIds(e), n = 0; n < t.length; n++)
            t[n].indexOf("_") > 0 ? this.checkEngine(t[n]) || this.manager.removeId(e, t[n]) : this.checkEngine(t[n], e) || this.manager.removeId(e, t[n])
    }
};
ot(u1, zb, !1, !0);
var MF = new u1(ax)
  , Qg = new u1(L3)
  , wb = Ke.canUseLocalStorage() ? MF : Qg
  , Lg = {
    start: function(e) {
        for (var t = e ? Qg : wb, n = 0; n < Vo.length; n++)
            if (Vo[n] == t) {
                t.touch();
                return
            }
        Vo.push(t),
        t.touch(),
        t.start()
    },
    stop: function(e) {
        for (var t = e ? Qg : wb, n = 0; n < Vo.length; n++)
            Vo[n] == t && t.dismiss()
    },
    changeInterval: function(e) {
        cx = e;
        for (var t = 0; t < Vo.length; t++)
            Vo[t].start()
    }
}
  , v3 = {}
  , PF = Ke.extendObj({
    read: function(e) {
        return v3[e]
    },
    write: function(e, t) {
        v3[e] = t
    },
    clean: function(e) {
        delete v3[e]
    },
    keys: function() {
        var e = [];
        for (var t in v3)
            e.push(t);
        return e
    }
}, i7)
  , w3 = {
    canGenerate: function() {
        return vt.isBrowserDocument() && typeof SharedWorker < "u" && typeof Blob < "u" && window.URL
    },
    createWorker: function(e) {
        var t = new Blob([e])
          , n = window.URL.createObjectURL(t);
        return n
    },
    removeWorker: function(e) {
        window.URL.revokeObjectURL(e)
    }
}
  , kF = G.MASTER
  , AF = "REMOTE"
  , IF = "INITIALIZATION"
  , RF = "REMOVE"
  , DF = "FAILED"
  , NF = "KILL"
  , Fl = m.getLoggerProxy(G.SHARING);
function Vl() {
    this._callSuperConstructor(Vl),
    this.worker = null,
    this.senderId = null
}
Vl.WORKER_CODE = 'var listeners={},nextId=0,MASTER="MASTER",REMOTE="REMOTE",INITIALIZATION="INITIALIZATION",REMOVE="REMOVE",ALL="ALL",FAILED="FAILED",KILL="KILL";onconnect=function(a){var b=a.ports[0];a=nextId++;listeners[MASTER]||(a=MASTER);listeners[a]=b;b.addEventListener("message",function(a){a=a.data;if(a.type==REMOVE)delete listeners[a.target];else if(a.type==KILL)terminate();else if(a.target===ALL)for(var c in listeners)listeners[c]!=b&&sendMessage(c,a,b);else sendMessage(a.target,a,b)});b.start();b.postMessage({type:INITIALIZATION,id:a});a!==MASTER&&listeners[MASTER].postMessage({type:REMOTE,id:a})};function sendMessage(a,b,d){(a=listeners[a])?a.postMessage(b):(b.type=FAILED,d.postMessage(b))}function terminate(){self.close();for(var a in listeners)listeners[a].close()};';
Vl.prototype = {
    isReady: function() {
        return this.senderId !== null
    },
    getBridgeId: function() {
        return this.senderId
    },
    start: function(e) {
        var t = new SharedWorker(e)
          , n = new Promise(function(r, s) {
            t.onerror = function() {
                Fl.logInfo(m.resolve(833)),
                s("SharedWorker broken")
            }
        }
        );
        this.worker = t.port;
        var i = this;
        return this.worker.onmessage = function(r) {
            i.onMessageReceived(r.data)
        }
        ,
        this.worker.start(),
        n
    },
    dispose: function() {
        try {
            this.senderId == kF && this.worker.postMessage({
                type: NF
            }),
            this.worker.close()
        } catch {}
        this.worker = null
    },
    onMessageReceived: function(e) {
        try {
            if (Fl.isDebugLogEnabled()) {
                var t = "RECEIVED";
                for (var n in e)
                    t += " " + n.toString() + ":" + e[n];
                Fl.logDebug(t)
            }
            e.type == IF ? (this.senderId = e.id,
            this.dispatchEvent("onReady")) : e.type == AF ? this.dispatchEvent("onRemote", [e.id]) : e.type == DF ? this.dispatchEvent("onMessageFail", [e.target, e.messageId]) : this.dispatchEvent("onMessage", [e])
        } catch (i) {
            Fl.logError(m.resolve(836), i)
        }
    },
    removeTarget: function(e) {
        e || (e = this.senderId);
        try {
            this.worker.postMessage({
                type: RF,
                target: e
            })
        } catch {}
    },
    sendMessage: function(e, t, n, i) {
        if (!this.isReady())
            return !1;
        var r = this.senderId
          , s = {
            type: t,
            sender: r,
            target: e,
            messageId: n,
            params: i
        };
        if (Fl.isDebugLogEnabled()) {
            var o = "SENDING";
            for (var a in s)
                o += " " + a.toString() + ":" + s[a];
            Fl.logDebug(o)
        }
        try {
            this.worker.postMessage(s)
        } catch (c) {
            Fl.logError(m.resolve(837), c),
            this.dispatchEvent("onMessageFail", [e, n])
        }
        return !0
    }
};
ot(Vl, Ru);
var Bg = m.getLoggerProxy(G.SHARING)
  , Cb = "INITIALIZATION"
  , Eb = G.MASTER;
function h1() {
    this._callSuperConstructor(h1),
    this.connections = {},
    this.senderId = null,
    this.othersIds = 1
}
h1.prototype = {
    isReady: function() {
        return this.senderId !== null
    },
    start: function(e) {
        if (this.ready = !0,
        e) {
            this.connections[Eb] = e;
            var t = this;
            be.addTimedTask(function() {
                try {
                    e.connect(t)
                } catch (n) {
                    n.number == -2147467260 || Bg.logError(m.resolve(838), n)
                }
            }, 0)
        } else
            this.senderId = Eb,
            this.dispatchEvent("onReady")
    },
    dispose: function() {},
    connect: function(e) {
        be.addTimedTask(this._connect, 0, this, [e])
    },
    _connect: function(e) {
        var t = this.othersIds++;
        this.connections[t] = e,
        this.dispatchEvent("onRemote", [t]),
        this.sendMessage(t, Cb, -1, [t])
    },
    removeTarget: function(e) {
        delete this.connections[e]
    },
    sendMessage: function(e, t, n, i) {
        if (!this.isReady())
            return !1;
        if (e == "ALL")
            for (var r in this.connections)
                this._sendOneMessage(r, t, n, i);
        else
            this._sendOneMessage(e, t, n, i);
        return !0
    },
    _sendOneMessage: function(e, t, n, i) {
        try {
            if (!this.connections[e] || !this.connections[e].onMessageReceived)
                this.dispatchEvent("onMessageFail", [e, n]);
            else {
                var r = this;
                be.addTimedTask(function() {
                    try {
                        r.connections[e].onMessageReceived(e, r.senderId, t, n, i)
                    } catch (s) {
                        s.number == -2147467260 || (Bg.logError(m.resolve(839), s),
                        r.dispatchEvent("onMessageFail", [e, n]))
                    }
                }, 0)
            }
        } catch {
            this.dispatchEvent("onMessageFail", [e, n])
        }
    },
    onMessageReceived: function(e, t, n, i, r) {
        var s = {
            target: Ke.copyByValue(e),
            type: Ke.copyByValue(n),
            messageId: Ke.copyByValue(i),
            sender: Ke.copyByValue(t)
        };
        if (r) {
            s.params = [];
            for (var o = 0; o < r.length; o++)
                s.params[o] = Ke.copyByValue(r[o])
        }
        this._onMessageReceived(s)
    },
    _onMessageReceived: function(e) {
        try {
            e.type == Cb ? (this.senderId = e.params[0],
            this.dispatchEvent("onReady")) : this.dispatchEvent("onMessage", [e])
        } catch (t) {
            t.number == -2147467260 || Bg.logError(m.resolve(840), t)
        }
    }
};
ot(h1, Ru, !1, !0);
var xr = m.getLoggerProxy(G.SHARING)
  , lx = Ke.canUseLocalStorage() ? ax : L3
  , FF = Et.randomG()
  , Tb = 500
  , Ia = function(e, t) {
    this.shareName = e,
    this.engine = t,
    this.id = null,
    this.bridge = null,
    this.manager = PF
}
  , _3 = G.TIMESTAMP_INDEX;
Ia.getManager = function(e) {
    return e ? L3 : lx
}
;
Ia.prototype = {
    toString: function() {
        return ["[SharedStatus", this.id, this.shareName, "]"].join("|")
    },
    getBridge: function() {
        return this.bridge
    },
    _start: function() {
        this.running = !0,
        Bt.addBeforeUnloadHandler(this),
        Bt.addUnloadHandler(this)
    },
    setupCrossTabSharing: function(e, t, n, i) {
        return this.running ? !1 : (this.dontDieFor = t || {},
        this.lastTimestamp = null,
        this.shareFrameTimeout = Tb,
        this.suicideNotification = e,
        this.currentServer = null,
        this.host = location.host,
        this.frameName = G.NULL_VALUE,
        this.blobId = G.NULL_VALUE,
        this.preClean = !1,
        this.foolOffset = 0,
        n ? (this.manager = L3,
        Lg.start(!0)) : (this.manager = lx,
        Lg.start()),
        this.forceCookies = n,
        this.startupThread = null,
        this.thread = null,
        this._initId(),
        this._setupLocalSharing(),
        this.bridge = null,
        i || !w3.canGenerate() ? this.frameName = this.generateFrame() : this.blobId = this.generateWorker(),
        this.newerEngines = {},
        xr.logInfo(m.resolve(841)),
        this._start(),
        !0)
    },
    setupLocalSharing: function() {
        return this.running ? !1 : (this._initId(!0),
        this._setupLocalSharing(),
        xr.logInfo(m.resolve(842)),
        this._start(),
        !0)
    },
    _setupLocalSharing: function() {
        Ut.addSharableEngine(this.shareName, this.engine)
    },
    _initId: function(e) {
        do
            this.id = FF++;
        while (Ut.hasGlobal(this.id, "lsEngine"));
        if (!e) {
            if (!this.manager.addId(this.shareName, this.id)) {
                this._initId();
                return
            }
            if (this.manager.readSharedStatus(this.shareName, this.id)) {
                this._initId();
                return
            }
        }
    },
    _startRefreshThread: function() {
        this.thread = be.addRepetitiveTask(this.refreshStatusThread, G.REFRESH_STATUS_INTERVAL, this),
        xr.logInfo(m.resolve(843), this)
    },
    generateFrame: function() {
        var e = this.frameName;
        return e == G.NULL_VALUE && (e = Ke.sanitizeIFrameName("LSF__" + Ke.getDomain() + "_" + this.id + "_" + this.shareName),
        this.bridge = new h1,
        Ut.exportGlobal(this.id, G.FRAME_BRIDGE_GLOBAL, this.bridge)),
        Dc.getFrameWindow(e, !0) ? (this.shareFrameTimeout = Tb,
        this._startBridge()) : (this.startupThread = be.addTimedTask(this.generateFrame, this.shareFrameTimeout, this),
        this.shareFrameTimeout *= 2),
        e
    },
    generateWorker: function() {
        var e = w3.createWorker(Vl.WORKER_CODE);
        return this.bridge = new Vl,
        this._startBridge(e),
        Ut.exportGlobal(this.id, G.WORKER_BRIDGE_GLOBAL, e),
        e
    },
    _startBridge: function(e) {
        var t = this;
        this.bridge.addListener({
            onReady: function() {
                t.refreshStatus(),
                t.startupThread = be.addTimedTask(t._startRefreshThread, 0, t),
                t.bridge.removeListener(this)
            }
        }),
        this.bridge.start(e)
    },
    getId: function() {
        return this.id
    },
    addConnectionToServerFlag: function(e) {
        e != this.currentServer && (this.currentServer = e,
        this.manager.addId(e, this.id, this.shareName))
    },
    removeConnectionToServerFlag: function(e) {
        this.currentServer != e ? this.currentServer == null ? xr.logWarn(m.resolve(844), e) : xr.logError(m.resolve(845), this.currentServer, e) : this.currentServer = null,
        this.manager.removeId(e, this.id, this.shareName)
    },
    getNumberOfConnectionsToServer: function(e) {
        var t = this.manager.readIdsObjects(e);
        if (!t)
            return 0;
        for (var n = 0, i = 0; i < t.length; i++) {
            var r = Et.getTimeStamp() - t[i].getStatus()[_3];
            r > G.REFRESH_STATUS_INTERVAL || n++
        }
        return n
    },
    refreshStatus: function() {
        this.lastTimestamp = Et.getTimeStamp() + this.foolOffset;
        var e = [this.lastTimestamp, this.frameName, this.host, G.BUILD, G.PAGE_PROTOCOL, this.blobId];
        this.manager.writeSharedStatus(this.shareName, this.id, e)
    },
    refreshStatusThread: function() {
        if (this.preClean) {
            xr.logDebug(m.resolve(846)),
            this.preClean = !1;
            return
        }
        var e = !1;
        if (this.suicideNotification) {
            xr.logDebug(m.resolve(847), this);
            var t = this.manager.readIds(this.shareName);
            if (!t)
                xr.logDebug(m.resolve(848), this);
            else {
                xr.logDebug(m.resolve(849), this.shareName);
                for (var n = 0; n < t.length; n++)
                    if (t[n] != this.id) {
                        var i = this.manager.readSharedStatus(this.shareName, t[n]);
                        if (!i) {
                            xr.logDebug(m.resolve(850), t[n]);
                            continue
                        }
                        if (i[G.BUILD_INDEX] != G.BUILD || i[G.PROTOCOL_INDEX] != G.PAGE_PROTOCOL) {
                            xr.logDebug(m.resolve(851), t[n]);
                            continue
                        }
                        i[_3] == this.lastTimestamp && (this.foolOffset = Et.randomG(5)),
                        i[_3] > this.lastTimestamp ? e |= this.newerEngineFound(t[n], i[_3]) : this.newerEngines[t[n]] && delete this.newerEngines[t[n]]
                    }
            }
        }
        e || (xr.logDebug(m.resolve(852)),
        this.manager.addId(this.shareName, this.id),
        this.refreshStatus())
    },
    newerEngineFound: function(e, t) {
        if (xr.logDebug(m.resolve(853), e + " with a newer status"),
        this.newerEngines[e])
            if (this.newerEngines[e] != t && !this.dontDieFor[e])
                xr.logInfo(m.resolve(854), this.id),
                this.executeSuicide();
            else
                return !1;
        return this.newerEngines[e] = t,
        !0
    },
    executeSuicide: function() {
        this.clean(),
        this.suicideNotification && be.executeTask(this.suicideNotification)
    },
    lightClean: function() {
        this.manager.cleanSharedStatus(this.shareName, this.id),
        this.manager.removeId(this.shareName, this.id),
        this.preClean = !0
    },
    clean: function() {
        xr.logInfo(m.resolve(855), this),
        be.stopRepetitiveTask(this.thread),
        be.stopRepetitiveTask(this.startupThread),
        this.thread = null,
        this.startupThread = null,
        this.frameName != G.NULL_VALUE ? Dc.disposeFrame(this.frameName) : this.blobId != G.NULL_VALUE && w3.removeWorker(this.blobId),
        this.frameName = G.NULL_VALUE,
        this.blobId = G.NULL_VALUE,
        this.removeConnectionToServerFlag(this.currentServer),
        this.shareName && Ut.removeSharableEngine(this.shareName, this.engine),
        this.bridge && (Ut.cleanGlobal(this.id, G.FRAME_BRIDGE_GLOBAL),
        Ut.cleanGlobal(this.id, G.WORKER_BRIDGE_GLOBAL)),
        this.bridge = null,
        this.lightClean()
    },
    unloadEvent: function() {
        this.clean()
    },
    preUnloadEvent: function() {
        this.lightClean()
    },
    dispose: function() {
        this.clean(),
        Bt.removeBeforeUnloadHandler(this),
        Bt.removeUnloadHandler(this),
        Lg.stop(this.forceCookies)
    }
};
Ia.prototype.unloadEvent = Ia.prototype.unloadEvent;
Ia.prototype.preUnloadEvent = Ia.prototype.preUnloadEvent;
var LF = 0
  , Ob = "RESPONSE";
function Xo(e, t, n) {
    this.receiver = e,
    this.target = n,
    this.id = LF++,
    this.buffer = [],
    this.ready = !1,
    this.pendingRequests = {},
    this.nextMessageId = 0,
    t && this.setBridge(t)
}
Xo.prototype = {
    setBridge: function(e) {
        this.bridge = e,
        e.addListener(this),
        e.isReady() && this.onReady()
    },
    dispose: function(e) {
        this.bridge && !e && this.bridge.dispose()
    },
    onListenStart: function() {
        this.bridge.isReady() && this.onReady()
    },
    onReady: function() {
        if (!this.ready) {
            this.ready = !0;
            for (var e = 0; e < this.buffer.length; e++) {
                var t = this.buffer[e]
                  , n = this.call(t.method, t.params, t.expectResponse);
                t.expectResponse && t.promised(n)
            }
            this.buffer = []
        }
    },
    onMessage: function(e) {
        this._onMessage(e.sender, e.messageId, e.type, e.params)
    },
    _onMessage: function(e, t, n, i) {
        if (n == Ob)
            this.pendingRequests[t] && (this.pendingRequests[t].ok(i[0]),
            delete this.pendingRequests[t]);
        else if (e === this.target) {
            var r = this.receiver[n].apply(this.receiver, i);
            typeof r < "u" && this.sendResponse(e, t, r)
        }
    },
    onMessageFail: function(e, t) {
        this.pendingRequests[t] && (this.pendingRequests[t].no(G.PROMISE_FAILURE),
        delete this.pendingRequests[t])
    },
    sendResponse: function(e, t, n) {
        this.bridge.sendMessage(e, Ob, t, [n])
    },
    call: function(e, t, n, i) {
        if (t = Ke.argumentsToArray(t),
        this.ready) {
            var s = this.id + "_" + this.nextMessageId++;
            if (this.bridge.sendMessage(this.target, e, s, t),
            n) {
                var o = this
                  , a = new Promise(function(c, l) {
                    o.pendingRequests[s] = {
                        ok: c,
                        no: l
                    },
                    i && be.addTimedTask(function() {
                        o.pendingRequests[s] && l(G.PROMISE_TIMEOUT)
                    }, i)
                }
                );
                return a
            }
        } else {
            var r = {
                target: this.target,
                method: e,
                params: t,
                expectResponse: n,
                callTimeout: i
            };
            if (this.buffer.push(r),
            n)
                return new Promise(function(c) {
                    r.promised = c
                }
                )
        }
    }
};
Xo.prototype.onReady = Xo.prototype.onReady;
Xo.prototype.onMessageFail = Xo.prototype.onMessageFail;
Xo.prototype.onMessage = Xo.prototype.onMessage;
Xo.prototype.onListenStart = Xo.prototype.onListenStart;
function Nu(e, t) {
    this.initChannel(e, t)
}
Nu.createCaller = function(e, t) {
    return t.addSessionPhase ? function() {
        return this.channel.call(e, [this.sessionPhase].concat(Ke.argumentsToArray(arguments)), t.wantsResponse, t.responseTimeout)
    }
    : function() {
        return this.channel.call(e, arguments, t.wantsResponse, t.responseTimeout)
    }
}
;
Nu.prototype = {
    initChannel: function(e, t) {
        this.channel = new Xo(this,e,t)
    },
    terminateChannel: function(e) {
        this.channel.dispose(e)
    }
};
var ux;
for (Ul in {
    dispose: !0
})
    ux = Ul;
var Ul;
function $l(e, t, n) {
    this._callSuperConstructor($l, [e, n]),
    this.initChannel(t, n)
}
$l.prototype = {
    dispose: function() {
        this._callSuperMethod($l, ux),
        this.terminateChannel(!0)
    }
};
var Mb = Du.methods;
for (Ul in Mb)
    $l.prototype[Ul] = Nu.createCaller(Ul, Mb[Ul]);
var Ul;
ot($l, Du);
ot($l, Nu, !0);
function Fc(e, t) {
    this._callSuperConstructor(Fc),
    this.bridge = t,
    this.engine = e,
    this.bridge.addListener(this)
}
Fc.prototype = {
    onRemote: function(e) {
        var t = new $l(this.engine,this.bridge,e);
        this.dispatchEvent("onNewPushPage", [e, t])
    },
    onMessageFail: function(e) {
        this.bridge.removeTarget(e),
        this.dispatchEvent("onPushPageLost", [e])
    },
    dispose: function() {
        this.bridge.dispose()
    }
};
Fc.prototype.onRemote = Fc.prototype.onRemote;
Fc.prototype.onMessageFail = Fc.prototype.onMessageFail;
ot(Fc, Ru);
var xn = {
    ATTACH: "ATTACH",
    FAST: "ATTACH:FAST",
    IGNORE: "IGNORE",
    ABORT: "ABORT",
    CREATE: "CREATE",
    WAIT: "WAIT"
}, hx;
for (Hl in {
    dispose: !0
})
    hx = Hl;
var Hl, BF = m.getLoggerProxy(G.SHARING), Pb = 2e3, Wl = function(e, t) {
    this._callSuperConstructor(Wl, [e]),
    this.engineType = "remote",
    this.initChannel(t, G.MASTER),
    this.verifyBridge(t)
};
Wl.prototype = {
    verifyBridge: function(e) {
        var t = this;
        e.isReady() ? this.remoteReady(e) : (e.addListener({
            onReady: function() {
                t.remoteReady(e)
            }
        }),
        be.addTimedTask(this.verifyRemoteReady, Pb, this))
    },
    verifyRemoteReady: function(e) {
        e.isReady() || (Pb *= 2,
        this.onEngineDeath())
    },
    remoteReady: function(e) {
        e.getBridgeId() == G.MASTER && (BF.logInfo(m.resolve(856), this.engineId + " is a master but should be a slave: engine must die"),
        be.addTimedTask(this.onEngineDeath, 0, this, [!1, !0]))
    },
    dispose: function() {
        this._callSuperMethod(Wl, hx),
        this.terminateChannel()
    }
};
var kb = ql.methods;
for (Hl in kb)
    Wl.prototype[Hl] = Nu.createCaller(Hl, kb[Hl]);
var Hl;
ot(Wl, ql);
ot(Wl, Nu, !0);
var UF = function() {
    var e = 0
      , t = 0
      , n = !1
      , i = !1
      , r = m.getLoggerProxy(G.SHARING)
      , s = [];
    function o(d, f) {
        var g = function(v, S) {
            window.name == v && window == top && !(window.Lightstreamer && window.Lightstreamer.wstatus) && (window.name = S,
            window.close())
        }
          , p = "callFun";
        return "var " + p + " = " + g.toString() + "; " + p + "('" + d + "', '" + f + "');"
    }
    function a(d, f, g) {
        d.name != f && d.name != g || d.close()
    }
    function c(d, f) {
        var g = null;
        if (r.logDebug(m.resolve(857)),
        i)
            return !1;
        try {
            g = u(d, f)
        } catch (p) {
            return r.logDebug(m.resolve(858), p),
            !1
        }
        if (g)
            try {
                t++
            } catch {
                i = !0
            }
        return g
    }
    function l(d, f) {
        var g = !0;
        return t - e < -5 && (g = !1),
        window.SymRealWinOpen && g ? (e++,
        window.SymRealWinOpen(d, f, "height=100,width=100", !0)) : (n || (n = !0,
        r.logWarn(m.resolve(859))),
        e = 0,
        null)
    }
    function u(d, f) {
        try {
            return window.SymError ? l(d, f) : window.open(d, f, "height=100,width=100", !0)
        } catch {
            return null
        }
    }
    var h = function() {
        this.refPage = null
    };
    return h.prototype = {
        getWindowRef: function() {
            return this.refPage
        },
        linkLSPage: function(d, f) {
            var g = null;
            try {
                s[d] && (g = s[d])
            } catch {
                g = null
            }
            if (g && (delete s[d],
            this.linkedLSPageVerify(g, d, f)))
                return !0;
            var p = d + "__TRASH"
              , v = o(d, p)
              , S = 'eval("' + v + '; ")';
            return g = c("javascript:" + S, d),
            g === !1 ? (r.logDebug(m.resolve(860)),
            !1) : g ? (r.logDebug(m.resolve(862)),
            this.linkedLSPageVerify(g, d, f),
            !0) : (r.logDebug(m.resolve(861)),
            !0)
        },
        linkedLSPageVerify: function(d, f, g) {
            try {
                if (r.logDebug(m.resolve(863)),
                d.closed)
                    return r.logDebug(m.resolve(864)),
                    !1;
                var p = d;
                if (g) {
                    if (d == d.top && !d.Lightstreamer) {
                        r.logDebug(m.resolve(865));
                        var v = f + "__TRASH";
                        try {
                            a(d, f, v)
                        } catch (S) {
                            r.logDebug(m.resolve(866), S)
                        }
                        return !1
                    }
                    if (p = d.parent,
                    p == null)
                        return r.logDebug(m.resolve(867)),
                        !1
                }
                if (!p.Lightstreamer)
                    return r.logDebug(m.resolve(868)),
                    !1;
                if (!p.Lightstreamer.wstatus)
                    return r.logDebug(m.resolve(869)),
                    !1;
                r.logDebug(m.resolve(870)),
                this.refPage = p,
                this.pageName = f,
                s[f] = d
            } catch (S) {
                return r.logDebug(m.resolve(871), S),
                !1
            }
            return !0
        }
    },
    h
}()
  , Ab = {};
function dx(e) {
    this.frameName = e
}
dx.prototype = {
    getRemotePageReference: function() {
        if (Ab[this.frameName])
            return Promise.resolve(null);
        var e = new UF
          , t = e.linkLSPage(this.frameName, !0);
        if (t) {
            var n = e.getWindowRef();
            return n == null ? (Ab[this.frameName] = !0,
            Promise.resolve(null)) : Promise.resolve(n)
        } else
            return Promise.resolve(null)
    }
};
var pn = m.getLoggerProxy(G.SHARING)
  , Ib = 1e3
  , HF = 1
  , Rb = 2
  , Db = 3;
function Nb(e, t) {
    var n = Ia.getManager();
    n.cleanSharedStatus(t, e),
    n.removeId(t, e)
}
function Aa(e, t, n, i, r, s, o) {
    this.shareName = t,
    this.localOnly = r,
    this.policyOnFound = n,
    this.policyOnNotFound = i,
    this.shareRef = s,
    this.getNextPhase = 0,
    this.checkedEngines = {},
    this.searchPhase = 0,
    this.client = e,
    this.resolved = !1,
    this.aloneTimeout = o || G.ALONE_CHECK_TIMEOUT,
    this.ok = null,
    this.no = null,
    this.noHope = !1
}
Aa.activeSearches = 0;
Aa.prototype = {
    stop: function() {
        pn.logInfo(m.resolve(873)),
        this.searchPhase++,
        this.resolved || this._callNo()
    },
    find: function(e) {
        this.checkedEngines = e || {};
        var t = this._makePromise();
        return this._find(this.searchPhase, !1),
        t
    },
    getCheckedEngineList: function() {
        return this.checkedEngines
    },
    _callOk: function(e) {
        this.resolved = !0,
        this.ok(e),
        this.stop()
    },
    _callNo: function() {
        this.resolved = !0,
        this.no(),
        this.stop()
    },
    _noHope: function() {
        this.noHope = !0
    },
    _onEngineNotFound: function() {
        this.policyOnNotFound == xn.CREATE ? (pn.logInfo(m.resolve(874)),
        this._callOk(null)) : this.policyOnNotFound == xn.WAIT ? (pn.logInfo(m.resolve(875), Ib),
        be.addTimedTask(this._find, Ib, this, [this.searchPhase, !1])) : (pn.logInfo(m.resolve(876)),
        this._callNo())
    },
    _onEngineFound: function(e, t, n) {
        if (this.policyOnFound == xn.ABORT)
            pn.logInfo(m.resolve(877)),
            this._callNo();
        else if (this.policyOnFound != xn.IGNORE) {
            pn.logInfo(m.resolve(878), n);
            var i;
            if (e == HF)
                i = new ql(this.client),
                t.bindLocalClient(i);
            else {
                var r;
                e == Rb ? r = new h1 : r = new Vl;
                var s = r.start(t);
                i = new Wl(this.client,r),
                s.then(null, function() {
                    pn.logInfo(m.resolve(879), n + " must die"),
                    i.onEngineDeath(!1, !0)
                })
            }
            i.setEngineId(n),
            this._callOk(i)
        } else
            pn.logInfo(m.resolve(880)),
            this.stop()
    },
    _find: function(e, t) {
        if (this.searchPhase == e)
            if (e = ++this.searchPhase,
            pn.logDebug(m.resolve(881)),
            this.localOnly)
                pn.logDebug(m.resolve(883)),
                this._onEngineNotFound();
            else if (this.shareRef) {
                pn.logDebug(m.resolve(884));
                try {
                    var n = this.shareRef.Lightstreamer
                      , i = n.getSharableEngine(this.shareName);
                    if (pn.logDebug(m.resolve(885), i + " (" + this.shareName + ")."),
                    i != null) {
                        var r = i.getEngineId();
                        if (n.hasGlobal(r, G.WORKER_BRIDGE_GLOBAL)) {
                            var s = n.getGlobal(r, G.WORKER_BRIDGE_GLOBAL);
                            this._onEngineFound(Db, s, r);
                            return
                        } else if (n.hasGlobal(r, G.FRAME_BRIDGE_GLOBAL)) {
                            var o = n.getGlobal(r, G.FRAME_BRIDGE_GLOBAL);
                            this._onEngineFound(Rb, o, r);
                            return
                        }
                    } else
                        t == !0 && this._noHope()
                } catch (l) {
                    pn.logDebug(m.resolve(886), l)
                }
                this.shareRef = null,
                this._find(this.searchPhase, !1)
            } else {
                pn.logDebug(m.resolve(887));
                var a = this
                  , c = ++this.getNextPhase;
                be.addTimedTask(function() {
                    c == a.getNextPhase && a.getNextPhase++
                }, G.STOP_SEARCH_TIMEOUT),
                Aa.activeSearches++,
                this._getNextEngineValues(this.getNextPhase).then(function(l) {
                    if (Aa.activeSearches--,
                    e == a.searchPhase)
                        if (pn.logDebug(m.resolve(888)),
                        l == null)
                            pn.logDebug(m.resolve(889)),
                            a._onEngineNotFound();
                        else {
                            pn.logInfo(m.resolve(890), l.id);
                            var u = l.values
                              , h = u[G.BLOB_INDEX]
                              , d = u[G.FRAME_NAME_INDEX];
                            if (h !== G.NULL_VALUE)
                                try {
                                    pn.logDebug(m.resolve(891), l.id + " shares through shared worker", h),
                                    a._onEngineFound(Db, h, l.id)
                                } catch {
                                    a._find(e, !1)
                                }
                            else if (d !== G.NULL_VALUE) {
                                pn.logDebug(m.resolve(892), l.id + " shares through direct communication", d);
                                var f = new dx(d)
                                  , g = f.getRemotePageReference();
                                g != null ? g.then(function(p) {
                                    a.shareRef = p,
                                    p || a._noHope(),
                                    a._find(e, !0)
                                }) : a._find(e, !1)
                            } else
                                pn.logInfo(m.resolve(893), u),
                                a._find(e, !1)
                        }
                })
            }
    },
    _makePromise: function() {
        var e = this;
        return new Promise(function(t, n) {
            e.ok = t,
            e.no = n
        }
        )
    },
    _getNextEngineValues: function(e, t) {
        if (this.getNextPhase != e)
            return Promise.resolve(null);
        var n = this
          , i = G.REFRESH_STATUS_INTERVAL
          , r = G.REFRESH_STATUS_INTERVAL + G.REFRESH_STATUS_INTERVAL_TOLERANCE
          , s = Ia.getManager();
        return new Promise(function(o) {
            if (t)
                for (var a in t) {
                    var c = s.readSharedStatus(n.shareName, a);
                    if (c && c[G.TIMESTAMP_INDEX] != t[a]) {
                        n.checkedEngines[a] = !0,
                        o({
                            id: a,
                            values: c
                        });
                        return
                    }
                }
            var l = {}
              , u = s.readIds(n.shareName);
            if (u) {
                for (var h = !1, d = 0; d < u.length; d++)
                    if (!n.checkedEngines[u[d]]) {
                        var c = s.readSharedStatus(n.shareName, u[d]);
                        if (!c || c.length < 5) {
                            Nb(u[d], n.shareName),
                            pn.logDebug(m.resolve(894), u[d]);
                            continue
                        }
                        if (c[G.BUILD_INDEX] != G.BUILD || c[G.PROTOCOL_INDEX] != G.PAGE_PROTOCOL) {
                            pn.logDebug(m.resolve(895), c);
                            continue
                        }
                        var f = Et.getTimeStamp()
                          , g = parseInt(c[G.TIMESTAMP_INDEX])
                          , p = f - g
                          , v = c[G.BLOB_INDEX] != G.NULL_VALUE || n.policyOnFound == xn.FAST
                          , S = v ? i : r;
                        if (p <= S)
                            if (v) {
                                n.checkedEngines[u[d]] = !0,
                                o({
                                    id: u[d],
                                    values: c
                                });
                                return
                            } else
                                h = !0,
                                l[u[d]] = g;
                        else if (v && p <= r)
                            h = !0,
                            l[u[d]] = g;
                        else if (p > 6e4) {
                            pn.logInfo(m.resolve(896)),
                            Nb(u[d], n.shareName);
                            continue
                        }
                    }
            }
            h ? (pn.logDebug(m.resolve(897)),
            be.addTimedTask(function() {
                n._getNextEngineValues(e, l).then(function(x) {
                    o(x)
                })
            }, G.REFRESH_STATUS_INTERVAL)) : t ? (pn.logDebug(m.resolve(898)),
            o(null)) : (pn.logDebug(m.resolve(899), n.aloneTimeout),
            be.addTimedTask(function() {
                n._getNextEngineValues(e, {}).then(function(x) {
                    o(x)
                })
            }, n.aloneTimeout))
        }
        )
    }
};
Aa.failSearch = {
    stop: function() {},
    find: function() {
        return Promise.resolve(null)
    },
    getCheckedEngineList: function() {
        return {}
    }
};
Aa.abortSearch = {
    stop: function() {},
    find: function() {
        return Promise.reject(null)
    },
    getCheckedEngineList: function() {
        return {}
    }
};
var GF = function() {
    var e = new RegExp("^[a-zA-Z0-9]*$")
      , t = {};
    t[xn.ATTACH] = !0,
    t[xn.FAST] = !0,
    t[xn.IGNORE] = !0,
    t[xn.ABORT] = !0;
    var n = {};
    n[xn.CREATE] = !0,
    n[xn.ABORT] = !0,
    n[xn.WAIT] = !0;
    var i = {};
    i[xn.ATTACH] = !0,
    i[xn.FAST] = !0;
    var r = "The share name is missing"
      , s = "The given share name is not valid, use only alphanumeric characters"
      , o = "sharePolicyOnFound must be one of: ATTACH, ATTACH:FAST, IGNORE, ABORT"
      , a = "ATTACH* can only be used if the LightstreamerClient is loaded inside a browser document"
      , c = "sharePolicyOnNotFound must be one of: CREATE, ABORT, WAIT"
      , l = m.getLoggerProxy(G.SHARING)
      , u = function(h, d, f, g, p) {
        if (!h)
            throw new ct(r);
        if (!e.test(h))
            throw new ct(s);
        if (!n[f])
            throw new ct(c);
        if (!t[d])
            throw new ct(o);
        if (this.preventCrossWindowShare = this.checkBool(g, !0),
        !vt.isBrowserDocument()) {
            if (i[d])
                throw new ct(a);
            this.preventCrossWindowShare = !0
        }
        G.PAGE_PROTOCOL == "file:" && !g && (l.logWarn(m.resolve(900)),
        g = !0),
        this.checkEngineTimeout = 5e3,
        this.disposing = !1,
        this.preventCrossWindowShare = g,
        this.shareName = h,
        this.sharePolicyOnFound = d,
        this.sharePolicyOnNotFound = f,
        this.shareRef = p,
        this.aloneTimeout = null,
        this.noHopeToAttach = !1,
        l.isDebugLogEnabled() && l.logDebug(m.resolve(901), "shareName=" + this.shareName, "sharePolicyOnFound=" + this.sharePolicyOnFound, "sharePolicyOnNotFound=" + this.sharePolicyOnNotFound, "preventCrossWindowShare=" + this.preventCrossWindowShare, "shareRef=" + this.shareRef)
    };
    return u.prototype = {
        createSharedStatus: function(h, d, f) {
            var g = new Ia(this.shareName,h);
            return this.preventCrossWindowShare ? g.setupLocalSharing() : (d = this.avoidSuicide() ? null : d,
            g.setupCrossTabSharing(d, f)),
            g
        },
        createChannelsManager: function(h, d) {
            return new Fc(h,d)
        },
        avoidSuicide: function() {
            return this.sharePolicyOnFound === xn.IGNORE || this.noHopeToAttach
        },
        noHope: function() {
            this.noHopeToAttach = !0
        },
        convertToElectionVersion: function(h, d) {
            var f = d ? xn.IGNORE : this.sharePolicyOnFound
              , g = this.sharePolicyOnFound == xn.ATTACH || this.sharePolicyOnFound == xn.FAST ? xn.CREATE : this.sharePolicyOnNotFound
              , p = new u(this.shareName,f,g,this.preventCrossWindowShare,this.shareRef);
            return p.aloneTimeout = h,
            p
        },
        findEngine: function(h) {
            return this.sharePolicyOnFound == xn.IGNORE && this.sharePolicyOnNotFound == xn.CREATE ? (l.logInfo(m.resolve(902)),
            Aa.failSearch) : (this.sharePolicyOnFound == xn.IGNORE || this.sharePolicyOnFound == xn.ABORT) && this.sharePolicyOnNotFound == xn.ABORT ? (l.logInfo(m.resolve(903)),
            Aa.abortSearch) : (l.logInfo(m.resolve(904)),
            new Aa(h,this.shareName,this.sharePolicyOnFound,this.sharePolicyOnNotFound,this.preventCrossWindowShare,this.shareRef,this.aloneTimeout))
        },
        getShareName: function() {
            return this.shareName
        },
        isPossible: function() {
            return this.preventCrossWindowShare || w3.canGenerate()
        }
    },
    u.prototype.getShareName = u.prototype.getShareName,
    ot(u, M3, !0, !0),
    u
}();
function VF(e) {
    return {
        enableSharing: function(t, n, i, r, s) {
            n == i && n == "ABORT" ? e.enableSharing(null) : e.enableSharing(new GF(t,n,i,r,s))
        },
        isMaster: function() {
            return e.isMaster()
        }
    }
}
var Lc = function(e, t, n) {
    this.parentTable = e,
    this.itemReference = t,
    this.relKey = n
};
Lc.prototype = {
    onItemLostUpdates: function(e, t, n) {
        this.shouldDispatch() && (jt.verifyValue(t, 1, "Unexpected item position"),
        this.parentTable.sonLostUpdates(this.relKey, n))
    },
    onSubscriptionError: function(e, t) {
        this.shouldDispatch() && this.parentTable.sonServerDeny(e, t, this.relKey)
    },
    onItemUpdate: function(e) {
        if (this.shouldDispatch()) {
            jt.verifyValue(e.getItemPos(), 1, "Unexpected item position");
            var t = e.extract();
            return this.parentTable.setSecondLevelSchemaSize(t.length - 2),
            t = this.convertMultiSonUpdate(t),
            this.parentTable.update(t, !1, !0)
        }
    },
    shouldDispatch: function() {
        return this.parentTable.hasSubTable(this.itemReference, this.relKey)
    },
    convertMultiSonUpdate: function(e) {
        var t = this.parentTable
          , n = this.itemReference
          , i = [];
        i[0] = t.getTableNumber(),
        i[1] = n,
        i.changedFields = [];
        for (var r = t.getFullSchemaSize() + 2, s = 2, o = 2; o < r; o++)
            o == t.getKeyPos() + 1 ? i[o] = this.relKey : o == t.getCommandPos() + 1 ? i[o] = "UPDATE" : o <= t.getMainSchemaSize() + 1 ? i[o] = G.UNCHANGED : (i[o] = e[s],
            e.unchangedMap[s] ? i[o] = G.UNCHANGED : i.changedFields.push(o - 1),
            s++);
        return i
    }
};
Lc.prototype.onSubscriptionError = Lc.prototype.onSubscriptionError;
Lc.prototype.onItemUpdate = Lc.prototype.onItemUpdate;
Lc.prototype.onItemLostUpdates = Lc.prototype.onItemLostUpdates;
var Fb = m.getLoggerProxy(G.ACTIONS)
  , ar = function() {
    this.itemPos = arguments[1],
    this.itemName = arguments[0],
    this._isSnapshot = arguments[3],
    this.fieldDescriptor = arguments[2],
    this.updateValues = arguments[4]
};
ar.prototype = {
    getItemName: function() {
        return this.itemName
    },
    getItemPos: function() {
        return this.itemPos
    },
    getValue: function(e) {
        var t = this.toPos(e)
          , n = this.updateValues[t];
        return n && n.isUnchanged ? n.value : n
    },
    isValueChanged: function(e) {
        var t = this.toPos(e);
        return !this.updateValues.unchangedMap[t]
    },
    isSnapshot: function() {
        return this._isSnapshot
    },
    forEachChangedField: function(e) {
        for (var t = this.updateValues.changedFields, n = 0; n < t.length; n++) {
            var i = this.fieldDescriptor.getName(t[n])
              , r = this.updateValues[t[n] + 1];
            try {
                e(i, t[n], r)
            } catch (s) {
                Fb.logErrorExc(s, m.resolve(905))
            }
        }
    },
    forEachField: function(e) {
        for (var t = 2; t < this.updateValues.length; t++) {
            var n = t - 1
              , i = this.fieldDescriptor.getName(n)
              , r = this.updateValues[t];
            try {
                e(i, n, r)
            } catch (s) {
                Fb.logErrorExc(s, m.resolve(906))
            }
        }
    },
    toPos: function(e) {
        var t = isNaN(e) ? this.fieldDescriptor.getPos(e) : e;
        if (t == null)
            throw new ct("the specified field does not exist");
        if (t <= 0 || t > this.fieldDescriptor.getFullSize() + 1)
            throw new ct("the specified field position is out of bounds");
        return t + 1
    },
    extract: function() {
        return this.updateValues
    },
    getNumFields: function() {
        return this.updateValues.length - 2
    },
    getFieldName: function(e) {
        return this.fieldDescriptor.getName(e)
    }
};
ar.prototype.getItemName = ar.prototype.getItemName;
ar.prototype.getItemPos = ar.prototype.getItemPos;
ar.prototype.getValue = ar.prototype.getValue;
ar.prototype.isValueChanged = ar.prototype.isValueChanged;
ar.prototype.isSnapshot = ar.prototype.isSnapshot;
ar.prototype.forEachChangedField = ar.prototype.forEachChangedField;
ar.prototype.forEachField = ar.prototype.forEachField;
var r7 = function() {
    this.subDescriptor = null,
    this.len = 0
};
r7.prototype = {
    setSubDescriptor: function(e) {
        this.subDescriptor = e
    },
    getSubDescriptor: function() {
        return this.subDescriptor
    },
    getSize: function() {
        return this.len
    },
    getFullSize: function() {
        return this.subDescriptor ? this.getSize() + this.subDescriptor.getSize() : this.getSize()
    },
    setSize: function(e) {
        this.len = e
    }
};
function $F(e) {
    for (var t = {}, n = 0; n < e.length; n++)
        t[e[n]] = n + 1;
    return t
}
var Tu = function(e) {
    this._callSuperConstructor(Tu),
    this.list = e,
    this.reverseList = $F(e),
    this.len = e.length
};
Tu.prototype = {
    setSize: function(e) {},
    getComposedString: function() {
        return this.list.join(" ")
    },
    getPos: function(e) {
        if (this.reverseList[e])
            return this.reverseList[e];
        if (this.subDescriptor) {
            var t = this.subDescriptor.getPos(e);
            return t !== null ? t + this.len : null
        }
        return null
    },
    getName: function(e) {
        return e > this.len && this.subDescriptor ? this.subDescriptor.getName(e - this.len) : this.list[e - 1] || null
    },
    getOriginal: function() {
        return this.list
    },
    isList: function() {
        return !0
    }
};
ot(Tu, r7);
var Ou = function(e) {
    this._callSuperConstructor(Ou),
    this.name = e
};
Ou.prototype = {
    getComposedString: function() {
        return this.name
    },
    getPos: function(e) {
        if (this.subDescriptor) {
            var t = this.subDescriptor.getPos(e);
            return t !== null ? t + this.len : null
        }
        return null
    },
    getName: function(e) {
        return this.subDescriptor ? this.subDescriptor.getName(e - this.len) : null
    },
    getOriginal: function() {
        return this.name
    },
    isList: function() {
        return !1
    }
};
ot(Ou, r7);
var Pc = function() {
    var e = function(t) {
        this.matrix = t || {}
    };
    return e.prototype = {
        insert: function(t, n, i) {
            n in this.matrix || (this.matrix[n] = {}),
            this.matrix[n][i] = t
        },
        get: function(t, n) {
            return t in this.matrix && n in this.matrix[t] ? this.matrix[t][n] : null
        },
        del: function(t, n) {
            if (!(!t in this.matrix)) {
                n in this.matrix[t] && delete this.matrix[t][n];
                for (var i in this.matrix[t])
                    return;
                delete this.matrix[t]
            }
        },
        insertRow: function(t, n) {
            this.matrix[n] = t
        },
        getRow: function(t) {
            return t in this.matrix ? this.matrix[t] : null
        },
        delRow: function(t) {
            t in this.matrix && delete this.matrix[t]
        },
        getEntireMatrix: function() {
            return this.matrix
        },
        isEmpty: function() {
            for (var t in this.matrix)
                return !1;
            return !0
        },
        forEachElement: function(t) {
            for (var n in this.matrix)
                this.forEachElementInRow(n, t)
        },
        forEachRow: function(t) {
            for (var n in this.matrix)
                t(n)
        },
        forEachElementInRow: function(t, n) {
            var i = this.matrix[t];
            for (var r in i)
                n(i[r], t, r)
        }
    },
    e.prototype.insert = e.prototype.insert,
    e.prototype.get = e.prototype.get,
    e.prototype.del = e.prototype.del,
    e.prototype.insertRow = e.prototype.insertRow,
    e.prototype.getRow = e.prototype.getRow,
    e.prototype.delRow = e.prototype.delRow,
    e.prototype.getEntireMatrix = e.prototype.getEntireMatrix,
    e.prototype.forEachElement = e.prototype.forEachElement,
    e.prototype.forEachElementInRow = e.prototype.forEachElementInRow,
    e.prototype.forEachRow = e.prototype.forEachRow,
    e.prototype.isEmpty = e.prototype.isEmpty,
    e
}()
  , Fu = function(e) {
    this.frequency = e
};
Fu.prototype = {
    isGTE: function(e) {
        return this.frequency == "unlimited" ? !0 : e.frequency == "unlimited" ? !1 : this.frequency > e.frequency
    },
    equals: function(e) {
        return this.frequency == e.frequency
    }
};
var fx = function(e) {
    this.subscription = e
};
fx.prototype = {
    configure: function(e) {
        var t = this.subscription.realMaxFrequency;
        this.subscription.realMaxFrequency = new Fu(e),
        t.equals(this.subscription.realMaxFrequency) || this.subscription.dispatchEvent("onRealMaxFrequency", [this.subscription.realMaxFrequency.frequency])
    }
};
var px = function(e) {
    this.subscription = e,
    this.multiMetaPushRealMaxFrequency = new Fu(null)
};
px.prototype = {
    configure: function(e) {
        this.subscription.realMaxFrequency = new Fu(e),
        this.configureMultiMetaPushRealMaxFrequency()
    },
    configureMultiMetaPushRealMaxFrequency: function() {
        var e = this.subscription.realMaxFrequency;
        this.subscription.subTables.forEachElement(function(t) {
            t.realMaxFrequency.isGTE(e) && (e = t.realMaxFrequency)
        }),
        e.equals(this.multiMetaPushRealMaxFrequency) || (this.multiMetaPushRealMaxFrequency = e,
        this.subscription.dispatchEvent("onRealMaxFrequency", [this.multiMetaPushRealMaxFrequency.frequency]))
    },
    onDeleteSecondLevelSubscription: function() {
        this.configureMultiMetaPushRealMaxFrequency()
    }
};
var gx = function(e, t) {
    this.subscription = e,
    this.firstLevelSubscription = t
};
gx.prototype = {
    configure: function(e) {
        this.subscription.realMaxFrequency = new Fu(e),
        this.firstLevelSubscription.realMaxFrequencyManager.configureMultiMetaPushRealMaxFrequency()
    }
};
var y3 = {
    Frequency: Fu,
    FlatPushRealMaxFrequencyManager: fx,
    FirstLevelMultiMetaPushRealMaxFrequencyManager: px,
    SecondLevelMultiMetaPushRealMaxFrequencyManager: gx
}
  , mx = "Please specifiy a valid array"
  , vx = " name cannot be empty"
  , _x = " name cannot contain spaces"
  , WF = " name cannot be a number";
function jF(e, t) {
    if (!Et.isArray(e))
        throw new ct(mx);
    for (var n = 0; n < e.length; n++)
        if (e[n]) {
            if (e[n].indexOf(" ") > -1)
                throw new ct(t + _x);
            if (!isNaN(e[n]))
                throw new ct(t + WF)
        } else
            throw new ct(t + vx)
}
function qF(e, t) {
    if (!Et.isArray(e))
        throw new ct(mx);
    for (var n = 0; n < e.length; n++)
        if (e[n]) {
            if (e[n].indexOf(" ") > -1)
                throw new ct(t + _x)
        } else
            throw new ct(t + vx)
}
var wn = {
    checkItemNames: jF,
    checkFieldNames: qF,
    NO_SCHEMA_NOR_LIST: "The field list/field schema of this Subscription was not initiated",
    NO_GROUP_NOR_LIST: "The item list/item group of this Subscription was not initiated",
    USE_GET_ITEM_GROUP: "This Subscription was initiated using an item group, use getItemGroup instead of using getItems",
    USE_GET_ITEMS: "This Subscription was initiated using an item list, use getItems instead of using getItemGroup",
    USE_GET_FIELD_SCHEMA: "This Subscription was initiated using a field schema, use getFieldSchema instead of using getFields",
    USE_GET_FIELDS: "This Subscription was initiated using a field list, use getFields instead of using getFieldSchema",
    MAX_BUF_EXC: "The given value is not valid for this setting; use null, 'unlimited' or a positive number instead",
    MAX_FREQ_EXC: "The given value is not valid for this setting; use null, 'unlimited', 'unfiltered' or a positive number instead",
    YES_FIELDS_NO_ITEMS: "Please specify a valid item or item list",
    NO_VALID_FIELDS: "Please specify a valid field list"
}
  , Bc = function() {
    var e = 1
      , t = 2
      , n = 3
      , i = 4
      , r = 5
      , s = {
        COMMAND: !0,
        RAW: !0,
        MERGE: !0,
        DISTINCT: !0
    }
      , o = 1
      , a = 2
      , c = 3
      , l = G.UNCHANGED
      , u = m.getLoggerProxy(G.SUBSCRIPTIONS)
      , h = "The given value is not a valid subscription mode. Admitted values are MERGE, DISTINCT, RAW, COMMAND"
      , d = "The received key value is not a valid name for an Item"
      , f = "Invalid Subscription, please specify an item list or item group"
      , g = "Invalid Subscription, please specify a field list or field schema"
      , p = "Cannot modify an active Subscription, please unsubscribe before applying any change"
      , v = "Subscription is not active"
      , S = "Can't change the frequency from/to 'unfiltered' or to null while the Subscription is active"
      , x = "Numeric values are only allowed when the subscription mode is DISTINCT"
      , w = "Snapshot is not permitted if RAW was specified as mode"
      , k = "The given value is not valid for this setting; use null, 'yes', 'no' or a positive number instead"
      , B = "The second level of this Subscription was not initiated"
      , N = "Second level field list is only available on COMMAND Subscriptions"
      , E = "This method can only be used on COMMAND subscriptions";
    function F(b, j) {
        return b - j
    }
    var O = function(b, j, de) {
        if (this._callSuperConstructor(O),
        b = new String(b).toUpperCase(),
        !b || !s[b])
            throw new ct(h);
        if (this._mode = b,
        this.itemList = null,
        this.itemGroup = null,
        this.itemDescriptor = null,
        this.fieldList = null,
        this.fieldSchema = null,
        this.fieldDescriptor = null,
        this.isRequiredSnapshot = b === "RAW" ? null : "yes",
        this.requestedMaxFrequency = null,
        this.requestedBufferSize = null,
        this._start = null,
        this._end = null,
        this._selector = null,
        this.dataAdapter = null,
        this.tableNumber = null,
        this.requestParams = null,
        this.realMaxFrequency = new y3.Frequency(null),
        this.realMaxFrequencyManager = null,
        this.oldValuesByItem = new Pc,
        this.oldValuesByKey = new Pc,
        this.handler = null,
        this.tablePhaseType = e,
        this.tablePhase = 0,
        this._id = null,
        this.onCount = 0,
        this.sCount = 0,
        this.setBehavior(this._mode == G.COMMAND ? a : o),
        this.commandCode = null,
        this.keyCode = null,
        this.underDataAdapter = null,
        this.subTables = new Pc,
        this.subFieldList = null,
        this.subFieldSchema = null,
        this.subFieldDescriptor = null,
        this.subMode = G.MERGE,
        j) {
            if (!de || !Et.isArray(de))
                throw new ct(wn.NO_VALID_FIELDS);
            Et.isArray(j) ? this.setItems(j) : this.setItems([j]),
            this.setFields(de)
        } else if (de)
            throw new ct(wn.YES_FIELDS_NO_ITEMS)
    };
    O.prototype = {
        toString: function() {
            return ["[", "Subscription", this.tablePhaseType, this.tablePhase, this._id, this.tableNumber, "]"].join("|")
        },
        cleanData: function() {
            this.tableNumber = null,
            this.oldValuesByItem = new Pc,
            this.oldValuesByKey = new Pc,
            this.snapshotByItem = null,
            this.fieldDescriptor.setSize(0),
            this.itemDescriptor.setSize(0),
            this.behavior == c && (this.fieldDescriptor.setSubDescriptor(null),
            this.subTables = new Pc),
            u.logDebug(m.resolve(907), this)
        },
        onAdd: function(b, j, de) {
            if (this.notAliveCheck(),
            !this.itemDescriptor)
                throw new ct(f);
            if (!this.fieldDescriptor)
                throw new ct(g);
            return this.tablePhaseType = r,
            this._id = b,
            this.handler = de,
            this.onCount++,
            jt.verifyValue(this.onCount, 1, "Wrong count while adding"),
            u.logInfo(m.resolve(908), this),
            !0
        },
        onSubmission: function() {
            this.tablePhaseType = t,
            u.logDebug(m.resolve(909), this)
        },
        onTableNumber: function(b) {
            this.tableNumber = b,
            this.tablePhaseType = n,
            u.logDebug(m.resolve(910), this)
        },
        onPause: function() {
            var b = this.isPushing();
            this.tablePhaseType = r,
            this.cleanData(),
            b && this.onEndPush(),
            u.logDebug(m.resolve(911), this)
        },
        onRemove: function() {
            this.isAliveCheck();
            var b = this.isPushing();
            this.tablePhaseType = e,
            this._id = null,
            delete this.requestParams,
            this.behavior == c && this.removeSubTables(),
            this.cleanData(),
            this.onCount--,
            jt.verifyValue(this.onCount, 0, "Wrong count while removing"),
            b && this.onEndPush(),
            this.handler = null,
            u.logDebug(m.resolve(912), this)
        },
        onStartPush: function(b, j, de, he) {
            this.tablePhaseType = i,
            this.sCount++,
            jt.verifyValue(this.sCount, 1, "Wrong count starting push"),
            u.logInfo(m.resolve(913), this),
            this.behavior == c && this.fieldDescriptor.setSubDescriptor(this.subFieldDescriptor),
            this.fieldSchema && this.behavior != o && this.setServerSentMetapushFields(j, b),
            this.itemDescriptor.setSize(de),
            this.fieldDescriptor.setSize(he),
            this.snapshotByItem = [];
            for (var Re = 1; Re <= de; Re++)
                this.snapshotByItem[Re] = new V(this);
            this.dispatchEvent("onSubscription")
        },
        onStopPush: function() {},
        onEndPush: function() {
            this.sCount--,
            jt.verifyValue(this.sCount, 0, "Wrong count ending push"),
            u.logInfo(m.resolve(914), this),
            this.dispatchEvent("onUnsubscription")
        },
        removeSubTables: function() {
            var b = this;
            this.subTables.forEachElement(function(j, de, he) {
                b.removeSubTable(de, he)
            })
        },
        removeItemSubTables: function(b) {
            var j = this;
            this.subTables.forEachElementInRow(function(de, he, Re) {
                j.removeSubTable(he, Re)
            })
        },
        getTableNumber: function() {
            return this.tableNumber
        },
        getTablePhase: function() {
            return this.tablePhase
        },
        getRequestParams: function() {
            return this.generateRequest(),
            this.requestParams
        },
        generateMaxFrequencyParam: function() {
            if (this.requestedMaxFrequency != null) {
                var b = this.requestedMaxFrequency;
                return {
                    LS_requested_max_frequency: b
                }
            }
            return {}
        },
        generateRequest: function() {
            var b = {
                LS_mode: this._mode,
                LS_group: encodeURIComponent(this.itemDescriptor.getComposedString()),
                LS_schema: encodeURIComponent(this.fieldDescriptor.getComposedString())
            };
            if (this.dataAdapter != null && (b.LS_data_adapter = encodeURIComponent(this.dataAdapter)),
            this._selector != null && (b.LS_selector = encodeURIComponent(this._selector)),
            this._start != null && (b.LS_start = this._start),
            this._end != null && (b.LS_end = this._end),
            this.isRequiredSnapshot != null && (b.LS_snapshot = this.isRequiredSnapshot === "yes" ? "true" : this.isRequiredSnapshot === "no" ? "false" : this.isRequiredSnapshot),
            Ke.extendObj(b, this.generateMaxFrequencyParam()),
            this.requestedBufferSize != null) {
                var j = this.requestedBufferSize;
                (j == "unlimited" || j > 0) && (b.LS_requested_buffer_size = j)
            }
            return u.logDebug(m.resolve(915), this),
            this.requestParams = b,
            this.requestParams
        },
        setSchemaReadMetapushFields: function() {
            if (!(this._mode != G.COMMAND || this.fieldList == null) && (this.commandCode = this.fieldList.getPos("command"),
            this.keyCode = this.fieldList.getPos("key"),
            !this.commandCode || !this.keyCode))
                throw new ct("A field list for a COMMAND subscription must contain the key and command fields")
        },
        setServerSentMetapushFields: function(b, j) {
            u.logDebug(m.resolve(916), this, b, j),
            this.commandCode = b,
            this.keyCode = j
        },
        getSubscriptionId: function() {
            return this._id
        },
        notAliveCheck: function() {
            if (this.isActive())
                throw new bt(p)
        },
        isAliveCheck: function() {
            if (!this.isActive())
                throw new bt(v)
        },
        secondLevelCheck: function() {
            if (this._mode != G.COMMAND)
                throw new bt(N)
        },
        commandCheck: function() {
            if (this._mode != G.COMMAND)
                throw new bt(E)
        },
        isOff: function() {
            return this.tablePhaseType == e
        },
        isWaiting: function() {
            return this.tablePhaseType == t
        },
        isSubscribing: function() {
            return this.tablePhaseType == n
        },
        isPushing: function() {
            return this.tablePhaseType == i
        },
        isPaused: function() {
            return this.tablePhaseType == r
        },
        isActive: function() {
            return this.tablePhaseType != e
        },
        isSubscribed: function() {
            return this.isPushing()
        },
        setItems: function(b) {
            this.notAliveCheck(),
            wn.checkItemNames(b, "An item"),
            this.itemList = b == null ? null : new Tu(b),
            this.itemGroup = null,
            this.itemDescriptor = this.itemList
        },
        getItems: function() {
            if (!this.itemList)
                throw this.itemGroup ? new bt(wn.USE_GET_ITEM_GROUP) : new bt(wn.NO_GROUP_NOR_LIST);
            return this.itemList.getOriginal()
        },
        setItemGroup: function(b) {
            this.notAliveCheck(),
            this.itemList = null,
            this.itemGroup = b == null ? null : new Ou(b),
            this.itemDescriptor = this.itemGroup
        },
        getItemGroup: function() {
            if (!this.itemGroup)
                throw this.itemList ? new bt(wn.USE_GET_ITEMS) : new bt(wn.NO_GROUP_NOR_LIST);
            return this.itemGroup.getOriginal()
        },
        setFields: function(b) {
            this.notAliveCheck(),
            wn.checkFieldNames(b, "A field"),
            this.fieldList = b == null ? null : new Tu(b),
            this.fieldSchema = null,
            this.fieldDescriptor = this.fieldList,
            this.setSchemaReadMetapushFields()
        },
        getFields: function() {
            if (!this.fieldList)
                throw this.fieldSchema ? new bt(wn.USE_GET_FIELD_SCHEMA) : new bt(wn.NO_SCHEMA_NOR_LIST);
            return this.fieldList.getOriginal()
        },
        setFieldSchema: function(b) {
            this.notAliveCheck(),
            this.fieldList = null,
            this.fieldSchema = b == null ? null : new Ou(b),
            this.fieldDescriptor = this.fieldSchema
        },
        getFieldSchema: function() {
            if (!this.fieldSchema)
                throw this.fieldList ? new bt(wn.USE_GET_FIELDS) : new bt(wn.NO_SCHEMA_NOR_LIST);
            return this.fieldSchema.getOriginal()
        },
        getMode: function() {
            return this._mode
        },
        setDataAdapter: function(b) {
            this.notAliveCheck(),
            this.dataAdapter = b,
            u.logDebug(m.resolve(917), this, b)
        },
        getDataAdapter: function() {
            return this.dataAdapter
        },
        setSelector: function(b) {
            this.notAliveCheck(),
            this._selector = b,
            u.logDebug(m.resolve(918), this, b)
        },
        getSelector: function() {
            return this._selector
        },
        setRequestedMaxFrequency: function(b) {
            b && (b = new String(b),
            b = b.toLowerCase());
            var j = this.requestedMaxFrequency;
            if (this.isActive()) {
                if (!b && b != 0)
                    throw new bt(S);
                if (b == "unfiltered" || this.requestedMaxFrequency == "unfiltered")
                    throw new bt(S)
            }
            if (!b && b != 0)
                this.requestedMaxFrequency = null;
            else if (b == "unfiltered" || b == "unlimited")
                this.requestedMaxFrequency = b;
            else
                try {
                    this.requestedMaxFrequency = this.checkPositiveNumber(b, !1, !0)
                } catch {
                    throw new ct(wn.MAX_FREQ_EXC)
                }
            if ((this.isWaiting() || this.isSubscribing() || this.isPushing()) && String(j) != String(this.requestedMaxFrequency) && (this.handler.updateSubscriptionParams(this, this.generateMaxFrequencyParam()),
            this.behavior == c)) {
                var de = this;
                this.subTables.forEachElement(function(he, Re, Xe) {
                    jt.verifyOk(de.isPushing(), "Table not pushing"),
                    he.setRequestedMaxFrequency(de.requestedMaxFrequency)
                })
            }
            u.logDebug(m.resolve(919), this, this.requestedMaxFrequency)
        },
        getRequestedMaxFrequency: function() {
            return this.requestedMaxFrequency == null ? null : String(this.requestedMaxFrequency)
        },
        setRequestedBufferSize: function(b) {
            if (this.notAliveCheck(),
            !b && b != 0)
                this.requestedBufferSize = null;
            else if (b = new String(b),
            b = b.toLowerCase(),
            b == "unlimited")
                this.requestedBufferSize = b;
            else
                try {
                    this.requestedBufferSize = this.checkPositiveNumber(b)
                } catch {
                    throw new ct(wn.MAX_BUF_EXC)
                }
            u.logDebug(m.resolve(920), this, this.requestedBufferSize)
        },
        getRequestedBufferSize: function() {
            return this.requestedBufferSize == null ? null : String(this.requestedBufferSize)
        },
        setRequestedSnapshot: function(b) {
            if (this.notAliveCheck(),
            !b && b != 0)
                this.isRequiredSnapshot = null;
            else if (b = new String(b),
            b = b.toLowerCase(),
            b == "no")
                this.isRequiredSnapshot = b;
            else {
                if (this._mode == G.RAW)
                    throw new bt(w);
                if (b == "yes")
                    this.isRequiredSnapshot = b;
                else {
                    if (isNaN(b))
                        throw new ct(k);
                    if (this._mode != G.DISTINCT)
                        throw new bt(x);
                    try {
                        this.isRequiredSnapshot = this.checkPositiveNumber(b)
                    } catch {
                        throw new ct(k)
                    }
                }
            }
            u.logDebug(m.resolve(921), this, this.isRequiredSnapshot)
        },
        getRequestedSnapshot: function() {
            return this.isRequiredSnapshot
        },
        setCommandSecondLevelFields: function(b) {
            this.notAliveCheck(),
            this.secondLevelCheck(),
            wn.checkFieldNames(b, "A field"),
            this.subFieldList = b == null ? null : new Tu(b),
            this.subFieldSchema = null,
            this.subFieldDescriptor = this.subFieldList,
            this.prepareSecondLevel()
        },
        getCommandSecondLevelFields: function() {
            if (!this.subFieldList)
                throw this.subFieldSchema ? new bt("The second level of this Subscription was initiated using a field schema, use getCommandSecondLevelFieldSchema instead of using getCommandSecondLevelFields") : new bt(B);
            return this.subFieldList.getOriginal()
        },
        setCommandSecondLevelFieldSchema: function(b) {
            this.notAliveCheck(),
            this.secondLevelCheck(),
            this.subFieldList = null,
            this.subFieldSchema = b == null ? null : new Ou(b),
            this.subFieldDescriptor = this.subFieldSchema,
            this.prepareSecondLevel()
        },
        getCommandSecondLevelFieldSchema: function() {
            if (!this.subFieldSchema)
                throw this.subFieldList ? new bt("The second level of this Subscription was initiated using a field list, use getCommandSecondLevelFields instead of using getCommandSecondLevelFieldSchema") : new bt(B);
            return this.subFieldSchema.getOriginal()
        },
        setCommandSecondLevelDataAdapter: function(b) {
            this.notAliveCheck(),
            this.secondLevelCheck(),
            this.underDataAdapter = b,
            u.logDebug(m.resolve(922), this, b)
        },
        getCommandSecondLevelDataAdapter: function() {
            return this.underDataAdapter
        },
        getValue: function(b, j) {
            return this.oldValuesByItem.get(this.toItemPos(b), this.toFieldPos(j))
        },
        getCommandValue: function(b, j, de) {
            return this.commandCheck(),
            this.oldValuesByKey.get(this.toItemPos(b) + " " + j, this.toFieldPos(de, !0))
        },
        getKeyPosition: function() {
            if (this.commandCheck(),
            !this.fieldSchema && this.fieldList)
                throw new bt("This Subscription was initiated using a field list, key field is always 'key'");
            if (this.keyCode == null)
                throw new bt("The position of the key field is currently unknown");
            return this.keyCode
        },
        getCommandPosition: function() {
            if (this.commandCheck(),
            !this.fieldSchema && this.fieldList)
                throw new bt("This Subscription was initiated using a field list, command field is always 'command'");
            if (this.commandCode == null)
                throw new bt("The position of the command field is currently unknown");
            return this.commandCode
        },
        toFieldPos: function(b, j) {
            var de = this.toPos(b, this.fieldDescriptor, j);
            if (de === null)
                throw new ct("the specified field does not exist");
            if (de === !1)
                throw new ct("the specified field position is out of bounds");
            return de
        },
        toItemPos: function(b) {
            var j = this.toPos(b, this.itemDescriptor);
            if (j === null)
                throw new ct("the specified item does not exist");
            if (j === !1)
                throw new ct("the specified item position is out of bounds");
            return j
        },
        toPos: function(b, j, de) {
            var he = isNaN(b) ? j.getPos(b) : b;
            return he == null ? null : he <= 0 || he > (de ? j.getFullSize() : j.getSize()) ? !1 : he
        },
        prepareSecondLevel: function() {
            this.subFieldDescriptor == null ? this.setBehavior(a) : this.setBehavior(c)
        },
        endOfSnapshot: function(b) {
            var j = this.itemDescriptor.getName(b);
            jt.assertNotNull(this.snapshotByItem[b], "Item index out of range"),
            this.snapshotByItem[b].endOfSnapshot(),
            this.dispatchEvent("onEndOfSnapshot", [j, b])
        },
        clearSnapshot: function(b) {
            var j = this.itemDescriptor.getName(b);
            this.behavior == a ? this.oldValuesByKey = new Pc : this.behavior == c && (this.oldValuesByKey = new Pc,
            this.removeItemSubTables(b)),
            this.dispatchEvent("onClearSnapshot", [j, b])
        },
        lostUpdates: function(b, j, de) {
            var he = this.itemDescriptor.getName(b);
            this.dispatchEvent("onItemLostUpdates", [he, b, j])
        },
        sonLostUpdates: function(b, j) {
            this.dispatchEvent("onCommandSecondLevelItemLostUpdates", [j, b])
        },
        serverDeny: function(b, j) {
            this.dispatchEvent("onSubscriptionError", [b, j])
        },
        sonServerDeny: function(b, j, de) {
            this.dispatchEvent("onCommandSecondLevelSubscriptionError", [b, j, de])
        },
        update: function(b, j, de) {
            jt.verifyValue(i, this.tablePhaseType, "Wrong table phase");
            var he = b[1];
            jt.assertNotNull(this.snapshotByItem[he], "Item index out of range"),
            this.snapshotByItem[he].update();
            var Re = this.snapshotByItem[he].isSnapshot()
              , Xe = new String(he);
            this.behavior != o && (Xe = this.organizeMPUpdate(b, he, de)),
            this.behavior == c && !de && this.handleMultiTableSubscriptions(b),
            this.behavior == o ? this.updateStructure(this.oldValuesByItem, he, b, !0) : this.updateStructure(this.oldValuesByKey, Xe, b, !0);
            var pt = new ar(this.itemDescriptor.getName(he),he,this.fieldDescriptor,Re,b);
            this.dispatchEvent("onItemUpdate", [pt]),
            this.oldValuesByKey.get(Xe, this.commandCode) == "DELETE" && this.oldValuesByKey.delRow(Xe)
        },
        updateStructure: function(b, j, de, he) {
            var Re = de.length - 2
              , Xe = 1
              , pt = 2;
            for (de.unchangedMap = {}; Xe <= Re; Xe++,
            pt++)
                de[pt] !== l ? b.insert(de[pt], j, Xe) : he && (de[pt] = b.get(j, Xe),
                de.unchangedMap[pt] = !0)
        },
        organizeMPUpdate: function(b, j, de) {
            var he;
            if (typeof b[this.keyCode + 1] > "u" || typeof b[this.commandCode + 1] > "u")
                return u.logWarn(m.resolve(923)),
                null;
            if (b[this.keyCode + 1] == l ? he = j + " " + this.oldValuesByItem.get(j, this.keyCode) : he = j + " " + b[this.keyCode + 1],
            de)
                b[this.keyCode + 1] = l,
                b[this.commandCode + 1] == this.oldValuesByKey.get(he, this.commandCode) ? b[this.commandCode + 1] = l : (b.changedFields.push(this.commandCode),
                b.changedFields.sort(F));
            else {
                b.changedFields = [];
                for (var Re = 2; Re < b.length; Re++)
                    b[Re] && b[Re] == l ? b[Re] = this.oldValuesByItem.get(j, Re - 1) : this.oldValuesByItem.insert(b[Re], j, Re - 1),
                    b[Re] == this.oldValuesByKey.get(he, Re - 1) ? b[Re] = l : b.changedFields.push(Re - 1);
                if (this.behavior == c) {
                    var Xe = this.getFullSchemaSize() + 2;
                    if (Xe > b.length)
                        for (var Re = b.length; Re < Xe; Re++)
                            b[Re] = l
                }
            }
            return he
        },
        handleMultiTableSubscriptions: function(b) {
            var j = b[1]
              , de = b[this.keyCode + 1] == l ? this.oldValuesByItem.get(j, this.keyCode) : b[this.keyCode + 1]
              , he = b[this.commandCode + 1]
              , Re = this.hasSubTable(j, de);
            he == "DELETE" ? Re && this.removeSubTable(j, de) : Re || this.addSubTable(j, de)
        },
        makeSubTable: function(b) {
            this.subTableFlag = !0,
            this.realMaxFrequencyManager = new y3.SecondLevelMultiMetaPushRealMaxFrequencyManager(this,b)
        },
        isSubTable: function() {
            return this.subTableFlag
        },
        hasSubTable: function(b, j) {
            return this.subTables.get(b, j) !== null
        },
        removeSubTable: function(b, j) {
            this.handler.removeATable(this.subTables.get(b, j)),
            this.subTables.del(b, j),
            this.realMaxFrequencyManager.onDeleteSecondLevelSubscription()
        },
        addSubTable: function(b, j) {
            var de = new O(this.subMode);
            de.makeSubTable(this);
            try {
                de.setItems([j]),
                this.subTables.insert(de, b, j)
            } catch {
                this.dispatchEvent("onCommandSecondLevelSubscriptionError", [14, d, j]);
                return
            }
            this.subFieldList ? de.setFields(this.subFieldList.getOriginal()) : de.setFieldSchema(this.subFieldSchema.getOriginal()),
            de.setDataAdapter(this.underDataAdapter),
            de.setRequestedSnapshot("yes"),
            de.requestedMaxFrequency = this.requestedMaxFrequency;
            var he = new Lc(this,b,j);
            de.addListener(he),
            this.handler.addATable(de)
        },
        setSecondLevelSchemaSize: function(b) {
            this.subFieldDescriptor.setSize(b)
        },
        getMainSchemaSize: function() {
            return this.fieldDescriptor.getSize()
        },
        getFullSchemaSize: function() {
            return this.fieldDescriptor.getFullSize()
        },
        getKeyPos: function() {
            return this.keyCode
        },
        getCommandPos: function() {
            return this.commandCode
        },
        addListener: function(b) {
            this._callSuperMethod(O, "addListener", [b])
        },
        removeListener: function(b) {
            this._callSuperMethod(O, "removeListener", [b])
        },
        getListeners: function() {
            return this._callSuperMethod(O, "getListeners")
        },
        setBehavior: function(b) {
            switch (this.behavior = b,
            b) {
            case o:
            case a:
                this.realMaxFrequencyManager = new y3.FlatPushRealMaxFrequencyManager(this);
                break;
            case c:
                this.realMaxFrequencyManager = new y3.FirstLevelMultiMetaPushRealMaxFrequencyManager(this);
                break;
            default:
                ut.verifyOk(!1)
            }
        },
        configure: function(b) {
            this.realMaxFrequencyManager.configure(b)
        }
    };
    function V(b) {
        this.firstUpdate = !0,
        this.eosReceived = !1,
        this.state = X.NO_UPDATE_RECEIVED,
        this.subscription = b
    }
    V.prototype.update = function() {
        this.state == X.NO_UPDATE_RECEIVED ? this.state = X.ONE_UPDATE_RECEIVED : this.state == X.ONE_UPDATE_RECEIVED && (this.state = X.MORE_THAN_ONE_UPDATE_RECEIVED,
        this.firstUpdate = !1)
    }
    ,
    V.prototype.endOfSnapshot = function() {
        this.eosReceived = !0
    }
    ,
    V.prototype.snapshotRequested = function() {
        return this.subscription.isRequiredSnapshot != null && this.subscription.isRequiredSnapshot != "no"
    }
    ,
    V.prototype.isSnapshot = function() {
        return this.snapshotRequested() ? G.MERGE == this.subscription._mode ? this.firstUpdate : G.COMMAND == this.subscription._mode || G.DISTINCT == this.subscription._mode ? !this.eosReceived : !1 : !1
    }
    ;
    var X = {
        NO_UPDATE_RECEIVED: 0,
        ONE_UPDATE_RECEIVED: 1,
        MORE_THAN_ONE_UPDATE_RECEIVED: 2
    };
    return O.prototype.isActive = O.prototype.isActive,
    O.prototype.isSubscribed = O.prototype.isSubscribed,
    O.prototype.setItems = O.prototype.setItems,
    O.prototype.getItems = O.prototype.getItems,
    O.prototype.setItemGroup = O.prototype.setItemGroup,
    O.prototype.getItemGroup = O.prototype.getItemGroup,
    O.prototype.setFields = O.prototype.setFields,
    O.prototype.getFields = O.prototype.getFields,
    O.prototype.setFieldSchema = O.prototype.setFieldSchema,
    O.prototype.getFieldSchema = O.prototype.getFieldSchema,
    O.prototype.getMode = O.prototype.getMode,
    O.prototype.setDataAdapter = O.prototype.setDataAdapter,
    O.prototype.getDataAdapter = O.prototype.getDataAdapter,
    O.prototype.setSelector = O.prototype.setSelector,
    O.prototype.getSelector = O.prototype.getSelector,
    O.prototype.setRequestedMaxFrequency = O.prototype.setRequestedMaxFrequency,
    O.prototype.getRequestedMaxFrequency = O.prototype.getRequestedMaxFrequency,
    O.prototype.setRequestedBufferSize = O.prototype.setRequestedBufferSize,
    O.prototype.getRequestedBufferSize = O.prototype.getRequestedBufferSize,
    O.prototype.setRequestedSnapshot = O.prototype.setRequestedSnapshot,
    O.prototype.getRequestedSnapshot = O.prototype.getRequestedSnapshot,
    O.prototype.setCommandSecondLevelFields = O.prototype.setCommandSecondLevelFields,
    O.prototype.getCommandSecondLevelFields = O.prototype.getCommandSecondLevelFields,
    O.prototype.setCommandSecondLevelFieldSchema = O.prototype.setCommandSecondLevelFieldSchema,
    O.prototype.getCommandSecondLevelFieldSchema = O.prototype.getCommandSecondLevelFieldSchema,
    O.prototype.setCommandSecondLevelDataAdapter = O.prototype.setCommandSecondLevelDataAdapter,
    O.prototype.getCommandSecondLevelDataAdapter = O.prototype.getCommandSecondLevelDataAdapter,
    O.prototype.getValue = O.prototype.getValue,
    O.prototype.getCommandValue = O.prototype.getCommandValue,
    O.prototype.getKeyPosition = O.prototype.getKeyPosition,
    O.prototype.getCommandPosition = O.prototype.getCommandPosition,
    O.prototype.addListener = O.prototype.addListener,
    O.prototype.removeListener = O.prototype.removeListener,
    O.prototype.getListeners = O.prototype.getListeners,
    ot(O, Ru, !1, !0),
    ot(O, M3, !0, !0),
    O
}()
  , zF = m.getLoggerProxy(G.MPN)
  , yx = function(e) {
    this.subscription = e
};
yx.prototype = {
    onSubscribe: function(e) {
        this.subscription.coalescing = e,
        this.subscription.stateMachine.subscribe()
    },
    onUnsubscribe: function() {
        this.subscription.stateMachine.unsubscribe()
    },
    setSubscriptionId: function(e) {
        this.subscription.PN_subscriptionId = e
    },
    onSubscribeOK: function(e) {
        this.setSubscriptionId(e)
    },
    onStatusChange: function(e, t) {
        switch (this.subscription.statusTimestamp = t,
        e) {
        case "ACTIVE":
            this.subscription.stateMachine.activate();
            break;
        case "TRIGGERED":
            this.subscription.stateMachine.trigger();
            break;
        default:
            var n = "Unknown status " + e + " (" + this.subscription.PN_subscriptionId + ")";
            throw zF.logError(n),
            new Error(n)
        }
    },
    onSubscribeError: function(e, t) {
        this.subscription.stateMachine.onSubscribeError(e, t)
    },
    onUnsubscribeError: function(e, t) {
        this.subscription.stateMachine.onUnsubscribeError(e, t)
    },
    simulateSubscribe: function(e, t) {
        this.subscription.statusTimestamp = t,
        e == "ACTIVE" ? this.subscription.stateMachine.onAddSubscribed() : this.subscription.stateMachine.onAddTriggered()
    },
    simulateUnsubscribe: function() {
        this.subscription.stateMachine.onDelete()
    },
    cancelSubscription: function() {
        this.subscription.stateMachine.cancelSubscription()
    },
    onChangeMode: function(e) {
        this.subscription.mode != e && (this.subscription.mode = e,
        this.onPropertyChange("mode"))
    },
    onChangeGroup: function(e) {
        this.subscription.items != e && (this.subscription.items = e,
        this.onPropertyChange("group"))
    },
    onChangeSchema: function(e) {
        this.subscription.fields != e && (this.subscription.fields = e,
        this.onPropertyChange("schema"))
    },
    onChangeFormat: function(e) {
        this.subscription.format != e && (this.subscription.format = e,
        this.onPropertyChange("notification_format"))
    },
    onChangeTrigger: function(e) {
        this.subscription.trigger != e && (this.subscription.trigger = e,
        this.onPropertyChange("trigger"))
    },
    onChangeAdapter: function(e) {
        this.subscription.adapter != e && (this.subscription.adapter = e,
        this.onPropertyChange("adapter"))
    },
    onChangeRequestedBufferSize: function(e) {
        e = this.subscription._convertBufferSize(e),
        this.subscription.requestedBufferSize != e && (this.subscription.requestedBufferSize = e,
        this.onPropertyChange("requested_buffer_size"))
    },
    onChangeRequestedMaxFrequency: function(e) {
        e = this.subscription._convertFrequency(e),
        this.subscription.requestedMaxFrequency != e && (this.subscription.requestedMaxFrequency = e,
        this.onPropertyChange("requested_max_frequency"))
    },
    onChangeTimestamp: function(e) {
        this.subscription.statusTimestamp != e && (this.subscription.statusTimestamp = e,
        this.onPropertyChange("status_timestamp"))
    },
    onPropertyChange: function(e) {
        this.subscription.dispatchEvent("onPropertyChanged", [e])
    }
};
var XF = function() {
    var e = m.getLoggerProxy(G.MPN)
      , t = function() {
        this.initDispatcher(),
        this.mode = null,
        this.format = null,
        this.trigger = null,
        this.items = null,
        this.fields = null,
        this.adapter = null,
        this.PN_subscriptionId = null,
        this.statusTimestamp = 0,
        this.requestedBufferSize = -1,
        this.requestedMaxFrequency = -2,
        this.coalescing = !1,
        this.needsInitialization = !0,
        this.eventManager = new yx(this),
        this.stateMachine = new i(this);
        var r = arguments[0];
        if (typeof r == "string" || r instanceof String)
            this._init0(r, arguments[1], arguments[2]);
        else if (r instanceof t)
            this._initFromMpnSubscription(r);
        else if (r instanceof Bc)
            this._initFromSubscription(r);
        else
            throw new Error("Wrong arguments for MpnSubscription constructor")
    };
    t.prototype = {
        _init0: function(r, s, o) {
            if (r = new String(r).toUpperCase(),
            r != "MERGE" && r != "DISTINCT")
                throw new ct("Only MERGE and DISTINCT modes are allowed for MPN subscriptions");
            if (this.mode = r,
            s != null) {
                if (o == null)
                    throw new ct(wn.NO_VALID_FIELDS);
                Et.isArray(s) ? this.setItems(s) : this.setItems([s]),
                this.setFields(o)
            } else if (o != null)
                throw new ct(wn.YES_FIELDS_NO_ITEMS)
        },
        _initFromSubscription: function(r) {
            this.mode = r._mode,
            this.items = r.itemDescriptor.getComposedString(),
            this.fields = r.fieldDescriptor.getComposedString(),
            this.adapter = r.dataAdapter
        },
        _initFromMpnSubscription: function(r) {
            this.mode = r.mode,
            this.items = r.items,
            this.fields = r.fields,
            this.format = r.format,
            this.trigger = r.trigger,
            this.adapter = r.adapter,
            this.PN_subscriptionId = r.PN_subscriptionId,
            this.requestedBufferSize = r.requestedBufferSize,
            this.requestedMaxFrequency = r.requestedMaxFrequency
        },
        addListener: function(r) {
            this._callSuperMethod(t, "addListener", [r])
        },
        removeListener: function(r) {
            this._callSuperMethod(t, "removeListener", [r])
        },
        getListeners: function() {
            return this._callSuperMethod(t, "getListeners")
        },
        getNotificationFormat: function() {
            return this.format
        },
        setNotificationFormat: function(r) {
            this.throwErrorIfActive(),
            this.format = r
        },
        getTriggerExpression: function() {
            return this.trigger
        },
        setTriggerExpression: function(r) {
            this.throwErrorIfActive(),
            this.trigger = r
        },
        isActive: function() {
            return this.stateMachine.state.isActive
        },
        isSubscribed: function() {
            return this.stateMachine.state.isSubscribed
        },
        isTriggered: function() {
            return this.stateMachine.state.isTriggered
        },
        getStatus: function() {
            return this.stateMachine.state.status
        },
        getStatusTimestamp: function() {
            return this.statusTimestamp
        },
        setItems: function(r) {
            this.throwErrorIfActive(),
            wn.checkItemNames(r, "An item"),
            this.items = r.join(" ")
        },
        getItems: function() {
            if (this.items == null)
                throw new bt(wn.NO_GROUP_NOR_LIST);
            return this.items.split(" ")
        },
        setItemGroup: function(r) {
            this.throwErrorIfActive(),
            this.items = r == null ? null : String(r)
        },
        getItemGroup: function() {
            if (this.items == null)
                throw new bt(wn.NO_GROUP_NOR_LIST);
            return this.items
        },
        setFields: function(r) {
            this.throwErrorIfActive(),
            wn.checkFieldNames(r, "A field"),
            this.fields = r.join(" ")
        },
        getFields: function() {
            if (this.fields == null)
                throw new bt(wn.NO_SCHEMA_NOR_LIST);
            return this.fields.split(" ")
        },
        setFieldSchema: function(r) {
            this.throwErrorIfActive(),
            this.fields = r == null ? null : String(r)
        },
        getFieldSchema: function() {
            if (this.fields == null)
                throw new bt(wn.NO_SCHEMA_NOR_LIST);
            return this.fields
        },
        setDataAdapter: function(r) {
            this.throwErrorIfActive(),
            this.adapter = r
        },
        getDataAdapter: function() {
            return this.adapter
        },
        setRequestedBufferSize: function(r) {
            this.throwErrorIfActive();
            var s = this._convertBufferSize(r);
            if (isNaN(s))
                throw new ct(wn.MAX_BUF_EXC);
            this.requestedBufferSize = s
        },
        _convertBufferSize: function(r) {
            if (r == null)
                return -1;
            if (new String(r).toLowerCase() == "unlimited")
                return 0;
            var s = parseInt(r, 10);
            return s > 0 ? s : NaN
        },
        getRequestedBufferSize: function() {
            return this.requestedBufferSize == -1 ? null : this.requestedBufferSize == 0 ? "unlimited" : String(this.requestedBufferSize)
        },
        setRequestedMaxFrequency: function(r) {
            this.throwErrorIfActive();
            var s = this._convertFrequency(r);
            if (isNaN(s))
                throw new ct("The given value is not valid for this setting; use null, 'unlimited' or a positive number instead");
            this.requestedMaxFrequency = s
        },
        _convertFrequency: function(r) {
            if (r == null)
                return -2;
            var s = String(r).toLowerCase();
            if (s == "unlimited")
                return 0;
            var o = parseFloat(r);
            return o > 0 ? o : NaN
        },
        getRequestedMaxFrequency: function() {
            return this.requestedMaxFrequency == -2 ? null : this.requestedMaxFrequency == 0 ? "unlimited" : String(this.requestedMaxFrequency)
        },
        getMode: function() {
            return this.mode
        },
        getSubscriptionId: function() {
            return this.PN_subscriptionId
        },
        throwErrorIfActive: function() {
            if (this.stateMachine.state.isActive)
                throw new bt("Cannot modify an active subscription, please unsubscribe before applying any change")
        },
        throwErrorIfInactiveOrUnsubscribing: function() {
            if (this.stateMachine.state == n.INACTIVE || this.stateMachine.state == n.UNSUBSCRIBING)
                throw new bt("MpnSubscription is not active")
        }
    };
    function n(r, s, o, a, c) {
        this.isActive = r,
        this.isSubscribed = s,
        this.isTriggered = o,
        this.status = a,
        this.internalName = c
    }
    n.INACTIVE = new n(!1,!1,!1,"UNKNOWN","INACTIVE"),
    n.SUBSCRIBING = new n(!0,!1,!1,"ACTIVE","SUBSCRIBING"),
    n.SUBSCRIBED = new n(!0,!0,!1,"SUBSCRIBED","SUBSCRIBED"),
    n.TRIGGERED = new n(!0,!0,!0,"TRIGGERED","TRIGGERED"),
    n.UNSUBSCRIBING = new n(!0,!1,!1,"UNKNOWN","UNSUBSCRIBING");
    var i = function(r) {
        this.subscription = r,
        this.state = n.INACTIVE
    };
    return i.prototype = {
        subscribe: function() {
            var r = "subscribe";
            switch (this.state) {
            case n.INACTIVE:
                this.next(n.SUBSCRIBING, r);
                break;
            default:
                this.throwError(r)
            }
        },
        unsubscribe: function() {
            var r = "unsubscribe";
            switch (this.state) {
            case n.SUBSCRIBING:
            case n.SUBSCRIBED:
            case n.TRIGGERED:
                this.next(n.UNSUBSCRIBING, r);
                break;
            default:
                this.throwError(r)
            }
        },
        cancelSubscription: function() {
            var r = "cancelSubscription";
            switch (this.state) {
            case n.UNSUBSCRIBING:
                this.next(n.INACTIVE, r),
                this.subscription.dispatchEvent("onUnsubscription");
                break;
            default:
                this.throwError(r)
            }
        },
        activate: function() {
            var r = "activate";
            switch (this.state) {
            case n.SUBSCRIBING:
            case n.TRIGGERED:
                this.next(n.SUBSCRIBED, r),
                this.subscription.dispatchEvent("onSubscription");
                break;
            case n.UNSUBSCRIBING:
                this.next(n.UNSUBSCRIBING, r),
                this.subscription.dispatchEvent("onSubscription");
                break;
            case n.SUBSCRIBED:
                break;
            default:
                this.throwError(r)
            }
        },
        trigger: function() {
            var r = "trigger";
            switch (this.state) {
            case n.SUBSCRIBING:
            case n.SUBSCRIBED:
                this.next(n.TRIGGERED, r),
                this.subscription.dispatchEvent("onTriggered");
                break;
            case n.UNSUBSCRIBING:
                this.next(n.UNSUBSCRIBING, r),
                this.subscription.dispatchEvent("onSubscription");
                break;
            case n.TRIGGERED:
                break;
            default:
                this.throwError(r)
            }
        },
        onDelete: function() {
            var r = "onDelete";
            switch (this.state) {
            case n.SUBSCRIBED:
            case n.TRIGGERED:
            case n.UNSUBSCRIBING:
                this.subscription.dispatchEvent("onUnsubscription"),
                this.next(n.INACTIVE, r);
                break;
            default:
                this.throwError(r)
            }
        },
        onSubscribeError: function(r, s) {
            var o = "onREQERR";
            switch (this.state) {
            case n.SUBSCRIBING:
            case n.UNSUBSCRIBING:
                this.subscription.dispatchEvent("onSubscriptionError", [r, s]),
                this.next(n.INACTIVE, o);
                break;
            default:
                this.throwError(o)
            }
        },
        onUnsubscribeError: function(r, s) {
            var o = "onREQERR";
            switch (this.state) {
            case n.UNSUBSCRIBING:
                this.subscription.dispatchEvent("onUnsubscriptionError", [r, s]),
                this.next(n.INACTIVE, o);
                break;
            default:
                this.throwError(o)
            }
        },
        onAddSubscribed: function() {
            this.state != n.INACTIVE && this.throwError("onAddAsSubscribed"),
            this.next(n.SUBSCRIBED, "onAddAsSubscribed"),
            this.subscription.dispatchEvent("onSubscription")
        },
        onAddTriggered: function() {
            this.state != n.INACTIVE && this.throwError("onAddAsTriggered"),
            this.next(n.TRIGGERED, "onAddAsTriggered"),
            this.subscription.dispatchEvent("onTriggered")
        },
        next: function(r, s) {
            if (e.isDebugLogEnabled()) {
                var o = this.state.internalName
                  , a = r.internalName;
                e.logDebug(m.resolve(924), this.subscription.PN_subscriptionId + " on '" + s + "': " + o + " -> " + a)
            }
            var c = this.state;
            this.state = r,
            c.status != r.status && this.subscription.dispatchEvent("onStatusChanged", [this.state.status, this.subscription.statusTimestamp])
        },
        throwError: function(r) {
            var s = "Unexpected event '" + r + "' in state " + this.state.internalName + " (" + this.subscription.PN_subscriptionId + ")";
            throw e.logError(s),
            new Error(s)
        }
    },
    t.prototype.getNotificationFormat = t.prototype.getNotificationFormat,
    t.prototype.setNotificationFormat = t.prototype.setNotificationFormat,
    t.prototype.getTriggerExpression = t.prototype.getTriggerExpression,
    t.prototype.setTriggerExpression = t.prototype.setTriggerExpression,
    t.prototype.isActive = t.prototype.isActive,
    t.prototype.isSubscribed = t.prototype.isSubscribed,
    t.prototype.isTriggered = t.prototype.isTriggered,
    t.prototype.getStatus = t.prototype.getStatus,
    t.prototype.getStatusTimestamp = t.prototype.getStatusTimestamp,
    t.prototype.setItems = t.prototype.setItems,
    t.prototype.getItems = t.prototype.getItems,
    t.prototype.setItemGroup = t.prototype.setItemGroup,
    t.prototype.getItemGroup = t.prototype.getItemGroup,
    t.prototype.setFields = t.prototype.setFields,
    t.prototype.getFields = t.prototype.getFields,
    t.prototype.setFieldSchema = t.prototype.setFieldSchema,
    t.prototype.getFieldSchema = t.prototype.getFieldSchema,
    t.prototype.setDataAdapter = t.prototype.setDataAdapter,
    t.prototype.getDataAdapter = t.prototype.getDataAdapter,
    t.prototype.setRequestedBufferSize = t.prototype.setRequestedBufferSize,
    t.prototype.getRequestedBufferSize = t.prototype.getRequestedBufferSize,
    t.prototype.setRequestedMaxFrequency = t.prototype.setRequestedMaxFrequency,
    t.prototype.getRequestedMaxFrequency = t.prototype.getRequestedMaxFrequency,
    t.prototype.getMode = t.prototype.getMode,
    t.prototype.getSubscriptionId = t.prototype.getSubscriptionId,
    t.prototype.addListener = t.prototype.addListener,
    t.prototype.removeListener = t.prototype.removeListener,
    t.prototype.getListeners = t.prototype.getListeners,
    ot(t, Ru),
    t
}()
  , Sx = function(e) {
    this.mpnManager = e
};
Sx.prototype = {
    onSessionStart: function() {
        try {
            this.mpnManager.stateMachine.onSessionStart()
        } catch (e) {
            this.mpnManager.onFatalError(e)
        }
    },
    onSessionClose: function(e) {
        try {
            this.mpnManager.stateMachine.onSessionClose(e)
        } catch (t) {
            this.mpnManager.onFatalError(t)
        }
    },
    onRegisterOK: function(e, t) {
        try {
            this.mpnManager.stateMachine.onRegisterOK(e, t)
        } catch (n) {
            this.mpnManager.onFatalError(n)
        }
    },
    onRegisterError: function(e, t) {
        this.mpnManager.stateMachine.onRegisterError(e, t)
    },
    onSubscribeOK: function(e, t) {
        this.mpnManager.subscribeManager.onUserSubscribeOK(e, t)
    },
    onSubscribeError: function(e, t, n) {
        this.mpnManager.subscribeManager.onSubscribeError(e, t, n)
    },
    onUnsubscribeOK: function(e) {
        this.mpnManager.subscribeManager.onUnsubscribeOK(e)
    },
    onUnsubscribeError: function(e, t, n) {
        this.mpnManager.unsubscribeManager.onUnsubscribeError(e, t, n)
    }
};
var bx = function() {
    this.dismissed = !1
}
  , Kl = function(e, t, n) {
    this._callSuperConstructor(Kl, [n.lsClient.connectionOptions, e]),
    this.responseReceived = !1,
    this.tutorContext = t,
    this.mpnManager = n
};
Kl.prototype = {
    onResponse: function() {
        this.responseReceived = !0
    },
    verifySuccess: function() {
        return this.responseReceived || this.tutorContext.dismissed
    },
    notifyAbort: function() {
        this.responseReceived = !0
    }
};
ot(Kl, zl);
var B3 = function(e, t, n) {
    this._callSuperConstructor(B3, [e, n, t])
};
B3.prototype = {
    doRecovery: function() {
        this.mpnManager.requestManager.sendRegisterRequest(this.timeoutMs)
    }
};
ot(B3, Kl);
var d1 = function() {
    this.query = {},
    this.reqId = Ke.nextRequestId(),
    this.addParam("LS_reqId", this.reqId)
};
d1.prototype = {
    addParam: function(e, t) {
        this.query[e] = encodeURIComponent(t)
    }
};
var s7 = function(e) {
    this._callSuperConstructor(s7),
    this.addParam("LS_op", "register"),
    this.addParam("PN_type", e.platform),
    this.addParam("PN_appId", e.appId),
    e.prevDeviceToken == null ? this.addParam("PN_deviceToken", e.deviceToken) : (this.addParam("PN_deviceToken", e.prevDeviceToken),
    this.addParam("PN_newDeviceToken", e.deviceToken))
};
ot(s7, d1);
var o7 = function(e, t, n) {
    this._callSuperConstructor(o7),
    this.subscriptionId = e,
    this.addParam("LS_subId", e),
    this.addParam("LS_op", "activate"),
    this.addParam("LS_group", n.items),
    this.addParam("LS_schema", n.fields),
    this.addParam("LS_mode", n.getMode()),
    this.addParam("PN_deviceId", t),
    n.getDataAdapter() != null && this.addParam("LS_data_adapter", n.getDataAdapter()),
    n.getSubscriptionId() != null && this.addParam("PN_subscriptionId", n.getSubscriptionId()),
    n.getNotificationFormat() != null && this.addParam("PN_notificationFormat", n.getNotificationFormat()),
    n.getTriggerExpression() != null && this.addParam("PN_trigger", n.getTriggerExpression()),
    n.coalescing && this.addParam("PN_coalescing", "true"),
    n.getRequestedBufferSize() != null && this.addParam("LS_requested_buffer_size", n.getRequestedBufferSize()),
    n.getRequestedMaxFrequency() != null && this.addParam("LS_requested_max_frequency", n.getRequestedMaxFrequency())
};
ot(o7, d1);
var U3 = function(e, t, n, i, r) {
    this._callSuperConstructor(U3, [e, r, i]),
    this.ephemeralSubId = t,
    this.subscription = n
};
U3.prototype = {
    doRecovery: function() {
        this.mpnManager.requestManager.sendSubscribeRequest(this.timeoutMs, this.ephemeralSubId, this.subscription)
    }
};
ot(U3, Kl);
var a7 = function(e, t) {
    this._callSuperConstructor(a7),
    this.addParam("LS_op", "deactivate"),
    this.addParam("PN_deviceId", e),
    t != "ALL" && this.addParam("PN_subscriptionStatus", t)
};
ot(a7, d1);
var o1 = function(e, t, n, i) {
    this._callSuperConstructor(o1, [e, i, n]),
    this.filter = t
};
o1.prototype = {
    doRecovery: function() {
        this.mpnManager.requestManager.sendUnsubscribeFilteredRequest(this.timeoutMs, this.filter)
    },
    onResponse: function() {
        this._callSuperMethod(o1, "onResponse"),
        this.mpnManager.requestManager.onUnsubscriptionFilterResponse(this.filter)
    }
};
ot(o1, Kl);
var c7 = function(e, t) {
    this._callSuperConstructor(c7),
    this.subscriptionId = t.getSubscriptionId(),
    this.addParam("LS_op", "deactivate"),
    this.addParam("PN_deviceId", e),
    this.addParam("PN_subscriptionId", this.subscriptionId)
};
ot(c7, d1);
var H3 = function(e, t, n, i) {
    this._callSuperConstructor(H3, [e, i, n]),
    this.subscription = t
};
H3.prototype = {
    doRecovery: function() {
        this.mpnManager.requestManager.sendUnsubscribeRequest(this.timeoutMs, this.subscription)
    }
};
ot(H3, Kl);
var xx = function(e) {
    this.mpnManager = e,
    this.tutorContext = new bx
};
xx.prototype = {
    createTutorContext: function() {
        this.tutorContext.dismissed = !0,
        this.tutorContext = new bx
    },
    sendRegisterRequest: function(e) {
        var t = new s7(this.mpnManager.mpnDevice)
          , n = new B3(e,this.mpnManager,this.tutorContext);
        this.mpnManager.lsClient.getLsEngine().then(function(i) {
            i.sendRegisterForMpn(t, n)
        })
    },
    sendSubscribeRequest: function(e, t, n) {
        var i = new o7(t,this.mpnManager.mpnDevice.getDeviceId(),n)
          , r = new U3(e,t,n,this.mpnManager,this.tutorContext);
        this.mpnManager.lsClient.getLsEngine().then(function(s) {
            s.sendMpnSubscription(i, r)
        })
    },
    sendUnsubscribeRequest: function(e, t) {
        var n = new c7(this.mpnManager.mpnDevice.getDeviceId(),t)
          , i = new H3(e,t,this.mpnManager,this.tutorContext);
        this.mpnManager.lsClient.getLsEngine().then(function(r) {
            r.sendMpnUnsubscription(n, i)
        })
    },
    sendUnsubscribeFilteredRequest: function(e, t) {
        var n = new a7(this.mpnManager.mpnDevice.getDeviceId(),t.filter)
          , i = new o1(e,t,this.mpnManager,this.tutorContext);
        this.mpnManager.lsClient.getLsEngine().then(function(r) {
            r.sendMpnFilteredUnsubscription(n, i)
        })
    },
    sendWaitings: function() {
        this.mpnManager.subscribeManager.subscribeWaitings(),
        this.mpnManager.unsubscribeManager.unsubscribeWaitings(),
        this.mpnManager.unsubscribeFilterManager.unsubscribeWaitings()
    },
    onUnsubscriptionFilterResponse: function(e) {
        this.mpnManager.unsubscribeFilterManager.onUnsubscribeRepsone(e)
    }
};
var wx = function(e) {
    this.mpnManager = e
};
wx.prototype = {
    subscribeToDEVAdapter: function() {
        var e = this;
        this.listener = {
            dismissed: !1,
            onItemUpdate: function(t) {
                if (!this.dismissed)
                    try {
                        var n = t.getValue("status")
                          , i = parseInt(t.getValue("status_timestamp"), 10);
                        e.mpnManager.mpnDevice.eventManager.onStatusChange(n, i)
                    } catch (r) {
                        e.mpnManager.onFatalError(r)
                    }
            }
        },
        this.subscription = new Bc("MERGE","DEV-" + this.mpnManager.mpnDevice.deviceId,["status", "status_timestamp"]),
        this.subscription.setDataAdapter(this.mpnManager.mpnDevice.adapterName),
        this.subscription.setRequestedMaxFrequency("unfiltered"),
        this.subscription.addListener(this.listener),
        this.mpnManager.lsClient.subscribe(this.subscription)
    },
    unsubscribeFromDEVAdapter: function() {
        this.subscription != null && (this.mpnManager.lsClient.unsubscribe(this.subscription),
        this.subscription.removeListener(this.listener),
        this.listener.dismissed = !0,
        this.subscription = null,
        this.listener = null)
    }
};
var Cx = function(e) {
    this.mpnManager = e
};
Cx.prototype = {
    subscribeToSUBSAdapter: function(e) {
        var t = this;
        this.listener = {
            dismissed: !1,
            onItemUpdate: function(n) {
                if (!this.dismissed)
                    try {
                        var i = n.getValue("command");
                        switch (i) {
                        case "UPDATE":
                            t.onUpdate(n);
                            break;
                        case "ADD":
                            t.onAdd(n);
                            break;
                        case "DELETE":
                            t.onDelete(n);
                            break
                        }
                    } catch (r) {
                        t.mpnManager.onFatalError(r)
                    }
            },
            onEndOfSnapshot: function(n, i) {
                if (!this.dismissed)
                    try {
                        t.mpnManager.subscribeManager.onEndOfSnapshot()
                    } catch (r) {
                        t.mpnManager.onFatalError(r)
                    }
            }
        },
        this.subscription = new Bc("COMMAND","SUBS-" + this.mpnManager.mpnDevice.deviceId,["key", "command"]),
        this.subscription.setDataAdapter(this.mpnManager.mpnDevice.adapterName),
        this.subscription.setRequestedMaxFrequency("unfiltered"),
        this.subscription.setCommandSecondLevelFields(["status", "status_timestamp", "notification_format", "trigger", "group", "schema", "adapter", "mode", "requested_buffer_size", "requested_max_frequency"]),
        this.subscription.setCommandSecondLevelDataAdapter(this.mpnManager.mpnDevice.adapterName),
        this.subscription.addListener(this.listener),
        this.mpnManager.lsClient.subscribe(this.subscription)
    },
    unsubscribeFromSUBSAdapter: function() {
        this.subscription != null && (this.mpnManager.lsClient.unsubscribe(this.subscription),
        this.subscription.removeListener(this.listener),
        this.listener.dismissed = !0,
        this.subscription = null,
        this.listener = null)
    },
    onUpdate: function(e) {
        var t = this
          , n = this.getSubId(e);
        this.mpnManager.subscriptions.forEachWithSubId(n, {
            onEmpty: function() {
                t.doCreateNewSubscription(n, e)
            },
            visit: function(i) {
                t.doUpdateExistingSubscription(i, e)
            }
        })
    },
    doUpdateExistingSubscription: function(e, t) {
        var n = e.needsInitialization;
        if (n || t.isValueChanged("mode")) {
            var i = t.getValue("mode");
            e.eventManager.onChangeMode(i)
        }
        if (n || t.isValueChanged("group")) {
            var r = t.getValue("group");
            e.eventManager.onChangeGroup(r)
        }
        if (n || t.isValueChanged("schema")) {
            var s = t.getValue("schema");
            e.eventManager.onChangeSchema(s)
        }
        if (n || t.isValueChanged("adapter")) {
            var o = t.getValue("adapter");
            e.eventManager.onChangeAdapter(o)
        }
        if (n || t.isValueChanged("notification_format")) {
            var a = t.getValue("notification_format");
            e.eventManager.onChangeFormat(a)
        }
        if (n || t.isValueChanged("trigger")) {
            var c = t.getValue("trigger");
            e.eventManager.onChangeTrigger(c)
        }
        if (n || t.isValueChanged("requested_buffer_size")) {
            var l = t.getValue("requested_buffer_size");
            e.eventManager.onChangeRequestedBufferSize(l)
        }
        if (n || t.isValueChanged("requested_max_frequency")) {
            var u = t.getValue("requested_max_frequency");
            e.eventManager.onChangeRequestedMaxFrequency(u)
        }
        if (n || t.isValueChanged("status_timestamp")) {
            var h = t.getValue("status_timestamp")
              , d = h == null ? 0 : parseInt(h, 10);
            e.eventManager.onChangeTimestamp(d)
        }
        if (n || t.isValueChanged("status")) {
            var f = t.getValue("status")
              , h = t.getValue("status_timestamp")
              , d = h == null ? 0 : parseInt(h, 10);
            e.eventManager.onStatusChange(f, d)
        }
        n && (e.needsInitialization = !1)
    },
    doCreateNewSubscription: function(e, t) {
        var n = t.getValue("mode")
          , i = t.getValue("group")
          , r = t.getValue("schema")
          , s = t.getValue("adapter")
          , o = t.getValue("notification_format")
          , a = t.getValue("trigger")
          , c = t.getValue("requested_buffer_size")
          , l = t.getValue("requested_max_frequency")
          , u = t.getValue("status")
          , h = parseInt(t.getValue("status_timestamp"), 10)
          , d = new XF(n);
        d.eventManager.onChangeGroup(i),
        d.eventManager.onChangeSchema(r),
        d.eventManager.onChangeAdapter(s),
        d.eventManager.onChangeFormat(o),
        d.eventManager.onChangeTrigger(a),
        d.eventManager.onChangeRequestedBufferSize(c),
        d.eventManager.onChangeRequestedMaxFrequency(l),
        d.eventManager.setSubscriptionId(e),
        d.eventManager.simulateSubscribe(u, h),
        d.needsInitialization = !1,
        this.mpnManager.subscribeManager.onServerSubscribeOK(e, d)
    },
    onDelete: function(e) {
        var t = this.getSubId(e);
        this.mpnManager.subscribeManager.onDelete(t)
    },
    onAdd: function(e) {
        var t = this.getSubId(e);
        this.mpnManager.subscribeManager.onAddedSubscription(t)
    },
    getSubId: function(e) {
        var t = e.getValue("key");
        return t.substring(4)
    }
};
function l7() {
    this.ls = []
}
l7.prototype = {
    add: function(e) {
        this.ls.push(e)
    },
    addAll: function(e) {
        for (var t = 0, n = e.size(); t < n; t++)
            this.add(e.get(t))
    },
    remove: function(e) {
        for (var t = 0, n = this.ls.length; t < n; t++)
            if (this.ls[t] == e)
                return this.ls.splice(t, 1),
                !0;
        return !1
    },
    contains: function(e) {
        for (var t = 0, n = this.ls.length; t < n; t++)
            if (this.ls[t] == e)
                return !0;
        return !1
    },
    clear: function() {
        this.ls.splice(0)
    },
    get: function(e) {
        return this.ls[e]
    },
    getLast: function() {
        return this.ls.length == 0 ? null : this.ls[this.ls.length - 1]
    },
    size: function() {
        return this.ls.length
    },
    isEmpty: function() {
        return this.ls.length == 0
    },
    toArray: function() {
        return this.ls
    }
};
function Ex() {
    this.map = {}
}
Ex.prototype = {
    get: function(e) {
        return this.map[e]
    },
    put: function(e, t) {
        this.map[e] = t
    },
    remove: function(e) {
        var t = this.map[e];
        return delete this.map[e],
        t
    },
    clear: function() {
        for (var e in this.map)
            delete this.map[e]
    },
    containsKey: function(e) {
        return this.get(e) != null
    },
    values: function() {
        var e = new l7;
        for (var t in this.map)
            e.add(this.map[t]);
        return e
    }
};
function Tx() {
    this.set = {},
    this.size = 0
}
Tx.prototype = {
    add: function(e) {
        this.set[e] || (this.set[e] = !0,
        this.size++)
    },
    remove: function(e) {
        var t = !!this.set[e];
        return t && (delete this.set[e],
        this.size--),
        t
    },
    contains: function(e) {
        return !!this.set[e]
    },
    clear: function() {
        for (var e in this.set)
            delete this.set[e];
        this.size = 0
    },
    isEmpty: function() {
        return this.size == 0
    }
};
var so = {
    MyList: l7,
    MyMap: Ex,
    MySet: Tx
}
  , Ox = function() {
    this.pendings = new so.MyMap
};
Ox.prototype = {
    put: function(e, t) {
        this.pendings.put(e, new Mx(t))
    },
    remove: function(e) {
        var t = this.pendings.remove(e);
        return t
    },
    values: function() {
        for (var e = new so.MyList, t = this.pendings.values(), n = 0, i = t.size(); n < i; n++) {
            var r = t.get(n);
            e.add(r.subscription)
        }
        return e
    },
    clear: function() {
        this.pendings.clear()
    },
    getPendingRequest: function(e) {
        for (var t = this.pendings.values(), n = 0, i = t.size(); n < i; n++) {
            var r = t.get(n);
            if (r.subscription == e)
                return r
        }
        return null
    }
};
var Mx = function(e) {
    this.subscription = e,
    this.handler = null
};
Mx.prototype = {
    setOnCompleteHandler: function(e) {
        jt.assert(this.handler == null),
        this.handler = e
    },
    onComplete: function(e) {
        this.handler != null && (this.handler.onComplete(e),
        this.handler = null)
    }
};
var Ta = m.getLoggerProxy(G.MPN)
  , Px = function(e) {
    this.mpnManager = e,
    this.state = C3,
    this.expectedSubIds = new so.MySet
};
Px.prototype = {
    reset: function() {
        this.next(C3, "reset"),
        this.expectedSubIds.clear()
    },
    onNewServerSubscription: function(e) {
        switch (Ta.isDebugLogEnabled() && Ta.debug("Server subscription added subId=" + e),
        this.state) {
        case C3:
            this.expectedSubIds.add(e),
            this.next(S3, "ADD");
            break;
        case S3:
            this.expectedSubIds.add(e);
            break;
        case Qd:
        case b3:
            break;
        default:
            this.throwError("onNewServerSubscription (subId=" + e + ")")
        }
    },
    onEndOfSnapshot: function() {
        switch (this.state) {
        case C3:
            this.fireOnSubscriptionsUpdated("empty EOS"),
            this.next(b3, "EOS");
            break;
        case S3:
            this.expectedSubIds.isEmpty() ? (this.next(Qd, "EOS"),
            this.onEmpty()) : this.next(Qd, "EOS");
            break;
        default:
            this.throwError("onEndOfSnapshot")
        }
    },
    onSeverSubscriptionOK: function(e) {
        switch (Ta.isDebugLogEnabled() && Ta.debug("Server subscription subscribed subId=" + e),
        this.state) {
        case S3:
            this.expectedSubIds.remove(e);
            break;
        case Qd:
            this.expectedSubIds.remove(e),
            this.expectedSubIds.isEmpty() && this.onEmpty();
            break;
        case b3:
            this.fireOnSubscriptionsUpdated("UPD");
            break;
        default:
            this.throwError("onSeverSubscriptionOK (subId=" + e + ")")
        }
    },
    onEmpty: function() {
        switch (this.state) {
        case Qd:
            this.fireOnSubscriptionsUpdated("EOS"),
            this.next(b3, "EMPTY");
            break;
        default:
            this.throwError("onEmpty")
        }
    },
    fireOnSubscriptionsUpdated: function(e) {
        Ta.isDebugLogEnabled() && Ta.debug("onSubscriptionsUpdated (" + this.mpnManager.getDeviceId() + ") fired event=" + e),
        this.mpnManager.mpnDevice != null && this.mpnManager.mpnDevice.eventManager.onSubscriptionsUpdated()
    },
    next: function(e, t) {
        Ta.isDebugLogEnabled() && Ta.debug("OnSubscriptionsUpdated state change (" + this.mpnManager.getDeviceId() + ") on '" + t + "': " + this.state.name + " -> " + e.name),
        this.state = e
    },
    throwError: function(e) {
        var t = "Unexpected event '" + e + "' in state " + this.state.name + " (" + this.mpnManager.getDeviceId() + ")";
        throw Ta.logError(t),
        new Error(t)
    }
};
function G3(e) {
    this.name = e
}
var C3 = new G3("INIT")
  , S3 = new G3("NOT_EMPTY")
  , Qd = new G3("EOS")
  , b3 = new G3("DONE")
  , xu = m.getLoggerProxy(G.MPN)
  , kx = function(e) {
    this.mpnManager = e,
    this.pendings = new Ox,
    this.waitings = new so.MyList,
    this.onSubUpdEventManager = new Px(e)
};
kx.prototype = {
    reset: function() {
        this.mpnManager.subscriptions.clear(),
        this.pendings.clear(),
        this.waitings.clear(),
        this.onSubUpdEventManager.reset()
    },
    addWaiting: function(e) {
        this.waitings.add(e)
    },
    removeWaiting: function(e) {
        return this.waitings.remove(e)
    },
    subscribeWaitings: function() {
        for (var e = this.waitings.size(), t = 0; t < e; t++) {
            var n = this.waitings.get(t);
            this.subscribe(n)
        }
        this.waitings.clear()
    },
    getPendingRequest: function(e) {
        return this.pendings.getPendingRequest(e)
    },
    subscribe: function(e) {
        var t = Ke.nextSubscriptionId();
        this.pendings.put(t, e),
        this.mpnManager.requestManager.sendSubscribeRequest(0, t, e)
    },
    onEndOfSnapshot: function() {
        this.onSubUpdEventManager.onEndOfSnapshot()
    },
    onSubscribeError: function(e, t, n) {
        var i = this.pendings.remove(e);
        if (i == null) {
            xu.warn("Discarded unexpected subscription error subId=" + e);
            return
        }
        var r = i.subscription;
        r.eventManager.onSubscribeError(t, n),
        i.onComplete(!1)
    },
    onUserSubscribeOK: function(e, t) {
        var n = this.pendings.remove(e);
        if (n == null) {
            xu.warn("Discarded unexpected subscription: subId=" + e);
            return
        }
        var i = n.subscription;
        this.mpnManager.subscriptions.add(t, i),
        i.eventManager.onSubscribeOK(t),
        this.onSubUpdEventManager.fireOnSubscriptionsUpdated("MPNOK"),
        n.onComplete(!0)
    },
    onServerSubscribeOK: function(e, t) {
        this.mpnManager.subscriptions.add(e, t),
        this.onSubUpdEventManager.onSeverSubscriptionOK(e)
    },
    onAddedSubscription: function(e) {
        this.mpnManager.subscriptions.isSubscribed(e) || this.onSubUpdEventManager.onNewServerSubscription(e)
    },
    onUnsubscribeOK: function(e) {
        xu.isDebugLogEnabled() && xu.debug("MPNDEL subId=" + e),
        this.mpnManager.unsubscribeManager.onUnsubscribeOK(e)
    },
    onDelete: function(e) {
        var t = this;
        this.mpnManager.subscriptions.remove(e, {
            onEmpty: function() {
                xu.warn("MpnSubscription not found subId=" + e)
            },
            visit: function(n) {
                n.eventManager.simulateUnsubscribe()
            },
            afterVisit: function() {
                t.onSubUpdEventManager.fireOnSubscriptionsUpdated("DELETE")
            }
        })
    },
    onUnsubscribeError: function(e, t, n) {
        var i = this;
        this.mpnManager.subscriptions.remove(e, {
            onEmpty: function() {
                xu.warn("MPN subscription not found subId=" + e)
            },
            visit: function(r) {
                r.eventManager.onUnsubscribeError(t, n)
            },
            afterVisit: function() {
                i.onSubUpdEventManager.fireOnSubscriptionsUpdated("REQERR")
            }
        })
    },
    onSessionClose: function(e) {
        e ? (this.waitings.addAll(this.pendings.values()),
        this.pendings.clear()) : (this.waitings.clear(),
        this.pendings.clear(),
        this.mpnManager.subscriptions.clear(),
        this.onSubUpdEventManager.fireOnSubscriptionsUpdated("Session close")),
        this.onSubUpdEventManager.reset()
    }
};
var Ax = function() {
    this.subscriptions = new so.MyMap
};
Ax.prototype = {
    getSubscriptions: function(e) {
        for (var t = new so.MyList, n = e == null || e == "ALL", i = this.subscriptions.values(), r = 0, s = i.size(); r < s; r++) {
            var o = i.get(r)
              , a = o.getLast();
            (n || a.getStatus() == e) && t.add(a)
        }
        return t
    },
    findSubscription: function(e) {
        var t = this.subscriptions.get(e);
        return t == null ? null : t.getLast()
    },
    isSubscribed: function(e) {
        return this.subscriptions.containsKey(e)
    },
    add: function(e, t) {
        var n = this.subscriptions.get(e);
        n == null && (n = new so.MyList,
        this.subscriptions.put(e, n)),
        n.add(t)
    },
    remove: function(e, t) {
        var n = this.subscriptions.remove(e);
        this.forEach(n, t)
    },
    clear: function() {
        this.subscriptions.clear()
    },
    forEachWithSubId: function(e, t) {
        var n = this.subscriptions.get(e);
        this.forEach(n, t)
    },
    forEach: function(e, t) {
        if (e != null && !e.isEmpty()) {
            if (t.visit != null)
                for (var n = 0, i = e.size(); n < i; n++) {
                    var r = e.get(n);
                    t.visit(r)
                }
            t.afterVisit != null && t.afterVisit()
        } else
            t.onEmpty != null && t.onEmpty()
    }
};
function Ix(e) {
    e != null && (e = e.toUpperCase()),
    e == null ? e = "ALL" : e == "SUBSCRIBED" && (e = "ACTIVE"),
    this.filter = e
}
var Rx = function(e) {
    this.mpnManager = e,
    this.pendings = new so.MyList,
    this.waitings = new so.MyList
};
Rx.prototype = {
    reset: function() {
        this.pendings.clear(),
        this.waitings.clear()
    },
    addWaiting: function(e) {
        this.waitings.add(new Ix(e))
    },
    unsubscribeWaitings: function() {
        for (var e = 0, t = this.waitings.size(); e < t; e++) {
            var n = this.waitings.get(e);
            this.unsubscribe(n)
        }
        this.waitings.clear()
    },
    unsubscribe: function(e) {
        jt.assert(!this.pendings.contains(e)),
        this.pendings.add(e),
        this.mpnManager.requestManager.sendUnsubscribeFilteredRequest(0, e)
    },
    onUnsubscribeRepsone: function(e) {
        var t = this.pendings.remove(e);
        jt.assert(t)
    },
    onSessionClose: function(e) {
        e ? (this.waitings.addAll(this.pendings),
        this.pendings.clear()) : (this.waitings.clear(),
        this.pendings.clear())
    }
};
var KF = m.getLoggerProxy(G.MPN)
  , Dx = function(e) {
    this.mpnManager = e,
    this.pendings = new so.MyMap,
    this.waitings = new so.MyList
};
Dx.prototype = {
    reset: function() {
        this.pendings.clear(),
        this.waitings.clear()
    },
    addWaiting: function(e) {
        this.waitings.add(e)
    },
    unsubscribeWaitings: function() {
        for (var e = 0, t = this.waitings.size(); e < t; e++) {
            var n = this.waitings.get(e);
            this.unsubscribe(n)
        }
        this.waitings.clear()
    },
    unsubscribe: function(e) {
        var t = e.getSubscriptionId();
        jt.assert(t != null),
        jt.assert(!this.pendings.containsKey(t)),
        this.pendings.put(t, e),
        this.mpnManager.requestManager.sendUnsubscribeRequest(0, e)
    },
    onUnsubscribeOK: function(e) {
        this.pendings.remove(e)
    },
    onUnsubscribeError: function(e, t, n) {
        var i = this.pendings.remove(e);
        if (i == null) {
            KF.warn("Discarded unexpected unsubscription error subId=" + e);
            return
        }
        this.mpnManager.subscribeManager.onUnsubscribeError(e, t, n)
    },
    onSessionClose: function(e) {
        e ? (this.waitings.addAll(this.pendings.values()),
        this.pendings.clear()) : (this.waitings.clear(),
        this.pendings.clear())
    }
};
var Ug = m.getLoggerProxy(G.MPN);
function Nx(e) {
    this.lsClient = e,
    this.stateMachine = new rt(this),
    this.requestManager = new xx(this),
    this.eventManager = new Sx(this),
    this.dev_manager = new wx(this),
    this.subs_manager = new Cx(this),
    this.subscribeManager = new kx(this),
    this.subscriptions = new Ax,
    this.unsubscribeManager = new Dx(this),
    this.unsubscribeFilterManager = new Rx(this)
}
Nx.prototype = {
    registerForMpn: function(e) {
        this.stateMachine.register(e)
    },
    subscribe: function(e, t) {
        try {
            e.eventManager.onSubscribe(t),
            this.stateMachine.subscribe(e)
        } catch (n) {
            this.onFatalError(n)
        }
    },
    unsubscribe: function(e) {
        e.throwErrorIfInactiveOrUnsubscribing();
        try {
            e.eventManager.onUnsubscribe(),
            this.stateMachine.unsubscribe(e)
        } catch (t) {
            this.onFatalError(t)
        }
    },
    unsubscribeFilter: function(e) {
        this.stateMachine.unsubscribeFilter(e)
    },
    getSubscriptions: function(e) {
        return this.subscriptions.getSubscriptions(e)
    },
    findSubscription: function(e) {
        return this.subscriptions.findSubscription(e)
    },
    getDeviceId: function() {
        return this.mpnDevice == null ? null : this.mpnDevice.deviceId
    },
    onFatalError: function(e) {
        this.lsClient.getLsEngine().then(function(t) {
            t.onFatalError(e)
        })
    }
};
var rt = function(e) {
    this.mpnManager = e,
    this.state = 0
};
rt.NO_SESSION = 0;
rt.SESSION_OK = 1;
rt.READY = 2;
rt.REGISTERING = 3;
rt.REGISTERED = 4;
rt.NAMES = [];
rt.NAMES[rt.NO_SESSION] = "NO_SESSION";
rt.NAMES[rt.SESSION_OK] = "SESSION_OK";
rt.NAMES[rt.READY] = "READY";
rt.NAMES[rt.REGISTERING] = "REGISTERING";
rt.NAMES[rt.REGISTERED] = "REGISTERED";
rt.prototype = {
    onSessionStart: function() {
        var e = "onSessionStart";
        switch (this.state) {
        case rt.NO_SESSION:
            this.next(rt.SESSION_OK, e);
            break;
        case rt.READY:
            this.mpnManager.requestManager.sendRegisterRequest(0),
            this.next(rt.REGISTERING, e);
            break;
        default:
            this.throwError(e)
        }
    },
    onSessionClose: function(e) {
        var t = "onSessionClose";
        switch (this.mpnManager.dev_manager.unsubscribeFromDEVAdapter(),
        this.mpnManager.subs_manager.unsubscribeFromSUBSAdapter(),
        this.mpnManager.requestManager.createTutorContext(),
        this.mpnManager.subscribeManager.onSessionClose(e),
        this.mpnManager.unsubscribeManager.onSessionClose(e),
        this.mpnManager.unsubscribeFilterManager.onSessionClose(e),
        this.mpnManager.mpnDevice != null && this.mpnManager.mpnDevice.eventManager.onSessionClose(e),
        this.state) {
        case rt.NO_SESSION:
            this.next(rt.NO_SESSION, t);
            break;
        case rt.SESSION_OK:
            this.next(rt.NO_SESSION, t);
            break;
        case rt.READY:
            this.next(rt.READY, t);
            break;
        case rt.REGISTERING:
            this.next(rt.READY, t);
            break;
        case rt.REGISTERED:
            this.next(rt.READY, t);
            break
        }
    },
    register: function(e) {
        var t = "register";
        switch (this.state) {
        case rt.NO_SESSION:
            this.resetDevice(e),
            this.next(rt.READY, t);
            break;
        case rt.SESSION_OK:
            this.resetDevice(e),
            this.mpnManager.requestManager.sendRegisterRequest(0),
            this.next(rt.REGISTERING, t);
            break;
        case rt.READY:
            this.resetDevice(e),
            this.next(rt.READY, t);
            break;
        case rt.REGISTERING:
            this.resetDevice(e),
            this.mpnManager.requestManager.sendRegisterRequest(0),
            this.next(rt.REGISTERING, t);
            break;
        case rt.REGISTERED:
            this.resetDevice(e),
            this.mpnManager.requestManager.sendRegisterRequest(0),
            this.next(rt.REGISTERING, t);
            break
        }
    },
    onRegisterOK: function(e, t) {
        var n = "onRegisterOK";
        switch (this.state) {
        case rt.REGISTERING:
            this.mpnManager.mpnDevice.eventManager.onRegisterOK(e, t),
            this.mpnManager.requestManager.sendWaitings(),
            this.mpnManager.dev_manager.subscribeToDEVAdapter(),
            this.mpnManager.subs_manager.subscribeToSUBSAdapter(),
            this.next(rt.REGISTERED, n);
            break;
        case rt.REGISTERED:
            break;
        default:
            this.throwError(n)
        }
    },
    onRegisterError: function(e, t) {
        var n = "onRegisterError";
        switch (this.state) {
        case rt.REGISTERING:
            this.mpnManager.mpnDevice.eventManager.onRegisterError(e, t),
            this.next(rt.SESSION_OK, n);
            break;
        default:
            this.throwError(n)
        }
    },
    subscribe: function(e) {
        switch (this.state) {
        case rt.REGISTERED:
            this.mpnManager.subscribeManager.subscribe(e);
            break;
        default:
            this.mpnManager.subscribeManager.addWaiting(e)
        }
    },
    unsubscribe: function(e) {
        switch (this.state) {
        case rt.REGISTERED:
            var t = this.mpnManager.subscribeManager.getPendingRequest(e);
            if (t == null)
                this.mpnManager.unsubscribeManager.unsubscribe(e);
            else {
                var n = this;
                t.setOnCompleteHandler({
                    onComplete: function(r) {
                        r && n.mpnManager.unsubscribeManager.unsubscribe(e)
                    }
                })
            }
            break;
        default:
            var i = this.mpnManager.subscribeManager.removeWaiting(e);
            i ? e.eventManager.cancelSubscription() : this.mpnManager.unsubscribeManager.addWaiting(e)
        }
    },
    unsubscribeFilter: function(e) {
        switch (this.state) {
        case rt.REGISTERED:
            this.mpnManager.unsubscribeFilterManager.unsubscribe(new Ix(e));
            break;
        default:
            this.mpnManager.unsubscribeFilterManager.addWaiting(e)
        }
    },
    resetDevice: function(e) {
        this.mpnManager.dev_manager.unsubscribeFromDEVAdapter(),
        this.mpnManager.subs_manager.unsubscribeFromSUBSAdapter(),
        this.mpnManager.requestManager.createTutorContext(),
        this.mpnManager.subscribeManager.reset(),
        this.mpnManager.unsubscribeManager.reset(),
        this.mpnManager.unsubscribeFilterManager.reset(),
        this.mpnManager.mpnDevice = e
    },
    next: function(e, t) {
        if (Ug.isDebugLogEnabled()) {
            var n = rt.NAMES[this.state]
              , i = rt.NAMES[e];
            Ug.logDebug(m.resolve(925), this.mpnManager.getDeviceId(), "on '" + t + "': " + n + " -> " + i)
        }
        this.state = e
    },
    throwError: function(e) {
        var t = "Unexpected event '" + e + "' in state " + rt.NAMES[this.state] + " (" + this.mpnManager.getDeviceId() + ")";
        throw Ug.logError(t),
        new Error(t)
    }
};
var V3 = function() {
    var e = m.getLoggerProxy(G.ACTIONS)
      , t = m.getLoggerProxy(G.SHARING)
      , n = 0
      , i = new RegExp("^[a-zA-Z0-9_]*$")
      , r = "The given sequence name is not valid, use only alphanumeric characters plus underscore, or null"
      , s = "Configure the server address before trying to connect"
      , o = function(a, c) {
        this.C = o,
        this._callSuperConstructor(o),
        this.connectionOptions = new ae,
        this.connectionDetails = new cn,
        this.connectionOptions = this.connectionOptions,
        this.connectionDetails = this.connectionDetails,
        this.connectionSharing = VF(this),
        this._configuration = new c1,
        this._policy = this.connectionOptions,
        this._connection = this.connectionDetails,
        a && this._connection.setServerAddress(a),
        c && this._connection.setAdapterSet(c),
        this._configuration.setBroadcaster(this),
        this._policy.setBroadcaster(this),
        this._connection.setBroadcaster(this),
        this.tables = new $b(this._policy),
        this.engineHandler = null,
        this.sharing = null,
        this.sharingPhase = 0,
        this.enableSharingPhase = 0,
        this.uID = ++n,
        this.messages = new Vb,
        this.lastEngineStatus = G.DISCONNECTED,
        this.checkEngineTask = null,
        this.usedEngines = {},
        Bt.addUnloadHandler(this),
        this.mpnManager = new Nx(this)
    };
    return o.addCookies = function(a, c) {
        vt.isNodeJS() && Cn.addGlobalCookiesForNode(a, c)
    }
    ,
    o.getCookies = function(a) {
        if (vt.isNodeJS()) {
            var c = Cn.getGlobalCookiesForNode(a)
              , l = [];
            return c.forEach(function(u, h, d) {
                l.push(u.toString())
            }),
            l
        }
    }
    ,
    o.setLoggerProvider = function(a) {
        m.setLoggerProvider(a)
    }
    ,
    o.LIB_NAME = G.LIBRARY_TAG,
    o.LIB_VERSION = G.LIBRARY_VERSION + " build " + G.BUILD,
    o.simulateSilence = function(a) {
        A3.simulateSilence(a)
    }
    ,
    o.prototype = {
        toString: function() {
            return ["[", "LightstreamerClient", this.uID, this.statusPhase, this.initPhase, "]"].join("|")
        },
        getTablesHandler: function() {
            return this.tables
        },
        getMessageProxy: function() {
            return this.messages
        },
        getEngineHandler: function() {
            return this.engineHandler
        },
        setEngineHandler: function(a) {
            this.engineHandler = a,
            this.tables.switchEngineHandler(a),
            this.messages.switchEngineHandler(a),
            this.setEnginePhase = this.enableSharingPhase,
            this.checkEngineTask = be.addRepetitiveTask(a.checkDeath, 5e3, a)
        },
        clearEngineHandler: function() {
            this.engineHandler && (this.usedEngines[this.engineHandler.getEngineId()] = !0,
            this.tables.switchEngineHandler(null),
            this.messages.switchEngineHandler(null),
            this.checkEngineTask && (be.stopRepetitiveTask(this.checkEngineTask),
            this.checkEngineTask = null),
            this.engineHandler.dispose(),
            this.engineHandler = null,
            this.master && (this.master.dispose(),
            this.master = null),
            this._configuration.connectionRequested ? this.cacheEngineStatus(G.WILL_RETRY) : this.cacheEngineStatus(G.DISCONNECTED)),
            this.search && (this.search.stop(),
            this.search = null)
        },
        broadcastSetting: function(a, c, l) {
            return this.engineHandler && this.engineHandler.onClientConfigurationChange(a, c, l),
            !0
        },
        notifyOptionChange: function(a, c) {
            c != this._configuration && this.dispatchEvent("onPropertyChange", [a])
        },
        enableSharing: function(a) {
            if (this.mpnRequested)
                throw new bt("Sharing is not available when MPN is enabled");
            var c = vt.isBrowser() ? navigator.userAgent.toLowerCase() : null;
            if (c != null && (c.indexOf("ucbrowser") != -1 || c.indexOf("ubrowser") != -1)) {
                t.logInfo(m.resolve(926));
                return
            }
            this.enableSharingPhase++,
            be.addTimedTask(this.enableSharingExec, 0, this, [a, this.enableSharingPhase]),
            this.sharingRequested = a != null
        },
        enableSharingExec: function(a, c) {
            if (c == this.enableSharingPhase)
                if (this.sharingPhase++,
                this.clearEngineHandler(),
                this.sharing = a,
                a && !a.isPossible() && t.logInfo(m.resolve(927)),
                a && a.isPossible()) {
                    var c = this.sharingPhase
                      , l = this
                      , u = a.findEngine(this);
                    this.search = u,
                    this.search.find(this.usedEngines).then(function(d) {
                        c == l.sharingPhase && (l.search.noHope == !0 && l.sharing.noHope(),
                        d === null ? l.setupOwnEngine(c, u.getCheckedEngineList()) : l.setEngineHandler(d))
                    }, function() {
                        c == l.sharingPhase && l.dispatchEvent("onShareAbort")
                    })
                } else
                    a == null && this._configuration.connectionRequested && this.setupOwnEngine()
        },
        engineMourningRoom: function(a, c) {
            if (this.setEnginePhase == this.enableSharingPhase) {
                if (this.clearEngineHandler(),
                Bt.isUnloading() || Bt.isUnloaded()) {
                    e.logInfo(m.resolve(928));
                    return
                }
                if (!this.sharing) {
                    ut.fail(),
                    e.logError(m.resolve(929));
                    return
                }
                e.logInfo(m.resolve(930));
                var l = null;
                this._configuration.clientsCount <= 2 || (a ? l = 1e4 : (l = 200 + Et.randomG(this._configuration.clientsCount) * 500,
                l > 5e3 && (l = 5e3)));
                var u = this.sharing.convertToElectionVersion(l, c);
                this.enableSharingExec(u, this.setEnginePhase)
            }
        },
        unloadEvent: function() {
            this.disconnect(),
            this.engineHandler && this.engineHandler.clientDeath()
        },
        setupOwnEngine: function(a, c) {
            if (!(a && a != this.sharingPhase))
                return this.setEngineHandler(new ql(this)),
                this.master = new sx(this._configuration,this._policy,this._connection,this.sharing,this.engineHandler,c,this.mpnManager),
                this.engineHandler.setEngineId(this.master.getEngineId()),
                this.engineHandler.setSessionPhase(this.master.getSessionPhase()),
                this.engineHandler
        },
        isMaster: function() {
            return this.master != null
        },
        connect: function() {
            if (!this._connection.serverAddress)
                throw new bt(s);
            e.logInfo(m.resolve(931)),
            be.addTimedTask(this.asynchConnect, 0, this)
        },
        asynchConnect: function() {
            if (!(this.lastEngineStatus && this.lastEngineStatus != G.DISCONNECTED)) {
                (this.sharing == null || !this.sharing.isPossible()) && !this.master && this.setupOwnEngine(),
                e.logDebug(m.resolve(932)),
                this._configuration.simpleSetter("connectionRequested", !0);
                var a = this.getEngineHandler();
                a && a.callConnect()
            }
        },
        disconnect: function() {
            e.logInfo(m.resolve(933)),
            be.addTimedTask(this.asynchDisconnect, 0, this)
        },
        asynchDisconnect: function() {
            e.logDebug(m.resolve(934)),
            this._configuration.simpleSetter("connectionRequested", !1);
            var a = this.getEngineHandler();
            a && a.callDisconnect()
        },
        getStatus: function() {
            return this.lastEngineStatus
        },
        sendMessage: function(a, c, l, u, h) {
            if (!c)
                c = G._UNORDERED_MESSAGES;
            else if (!i.test(c))
                throw new ct(r);
            l || l == 0 ? l = this.checkPositiveNumber(l, !0) : l = null,
            h = this.checkBool(h, !0),
            be.addTimedTask(this.asyncSendMessage, 0, this, [a, c, u, l, h])
        },
        asyncSendMessage: function(a, c, l, u, h) {
            this.engineHandler && this.engineHandler.isSessionAlive() ? this.messages.forwardMessage(a, c, l, u) : h ? this.messages.enqueueMessage(a, c, l, u) : l && this.messages.fireEvent("onAbort", l, [a, !1])
        },
        serverError: function(a, c) {
            this.dispatchEvent("onServerError", [a, c])
        },
        sessionEnd: function() {
            this.getTablesHandler().pauseAllTables(),
            this.getMessageProxy().cleanMessageListeners()
        },
        sessionStart: function() {
            this.getTablesHandler().handleAllWaitingTables(),
            this.getMessageProxy().handleAllWaitingMessages(),
            this.getLsEngine().resolve(this.master)
        },
        cacheEngineStatus: function(a) {
            a != this.lastEngineStatus && (this.lastEngineStatus = a,
            this.dispatchEvent("onStatusChange", [a]))
        },
        sendLog: function(a) {
            return this.engineHandler && this.engineHandler.isSessionAlive() ? (this.engineHandler.forwardLog(a),
            !0) : !1
        },
        onServerKeepalive: function() {
            this.dispatchEvent("onServerKeepalive")
        },
        getSubscriptions: function() {
            var a = []
              , c = this.tables.getAllTables();
            for (var l in c)
                c[l].isSubTable() || a.push(c[l]);
            return a
        },
        subscribe: function(a) {
            this.tables.addATable(a)
        },
        unsubscribe: function(a) {
            this.tables.removeATable(a)
        },
        addListener: function(a) {
            this._callSuperMethod(o, "addListener", [a])
        },
        removeListener: function(a) {
            this._callSuperMethod(o, "removeListener", [a])
        },
        getListeners: function() {
            return this._callSuperMethod(o, "getListeners")
        },
        getLsEngine: function() {
            return this.lsEnginePromise == null && (this.lsEnginePromise = Ke.defer()),
            this.lsEnginePromise
        },
        registerForMpn: function(a) {
            if (this.sharingRequested)
                throw new bt("MPN is not available when sharing is enabled");
            if (a == null)
                throw new ct("Device cannot be null");
            this.mpnDevice = a,
            this.mpnManager.registerForMpn(a),
            this.mpnRequested = !0
        },
        subscribeMpn: function(a, c) {
            if (a == null)
                throw new ct("MpnSubscription is null");
            if (a.fields == null)
                throw new ct("Invalid MpnSubscription, please specify a field list or field schema");
            if (a.items == null)
                throw new ct("Invalid MpnSubscription, please specify an item list or item group");
            if (a.getNotificationFormat() == null)
                throw new ct("Invalid MpnSubscription, please specify a notification format");
            if (a.isActive())
                throw new bt("MpnSubscription is already active");
            if (this.mpnDevice == null)
                throw new bt("No MPN device registered");
            c = !!c,
            this.mpnManager.subscribe(a, c)
        },
        unsubscribeMpn: function(a) {
            if (!a.isActive())
                throw new bt("MpnSubscription is not active");
            if (this.mpnDevice == null)
                throw new bt("No MPN device registered");
            this.mpnManager.unsubscribe(a)
        },
        unsubscribeMpnSubscriptions: function(a) {
            if (!(a == null || a == "ALL" || a == "SUBSCRIBED" || a == "TRIGGERED"))
                throw new ct("The given value is not valid for this setting. Use null, ALL, TRIGGERED or SUBSCRIBED instead");
            if (this.mpnDevice == null)
                throw new bt("No MPN device registered");
            this.mpnManager.unsubscribeFilter(a)
        },
        getMpnSubscriptions: function(a) {
            if (!(a == null || a == "ALL" || a == "SUBSCRIBED" || a == "TRIGGERED"))
                throw new ct("The given value is not valid for this setting. Use null, ALL, TRIGGERED or SUBSCRIBED instead");
            if (this.mpnDevice == null)
                throw new bt("No MPN device registered");
            var c = this.mpnManager.getSubscriptions(a);
            return c.toArray()
        },
        findMpnSubscription: function(a) {
            if (a == null)
                throw new ct("Subscription id must be not null");
            return this.mpnManager.findSubscription(a)
        },
        handleRemoteAdapterStatus: function(a, c, l, u) {
            this.connectionOptions.installRemoteAdapterStatusObserver(a, c, l, u);
            var h = new Bc("MERGE",l,["status"]);
            h.setDataAdapter(c),
            h.setRequestedSnapshot("yes");
            var d = this;
            h.addListener({
                onItemUpdate: function(f) {
                    var g = f.getValue("status");
                    if (console.log("STATUS", g),
                    g && g != "connected") {
                        var p = d.getEngineHandler();
                        p && p.callDisconnectAndReconnect()
                    }
                }
            }),
            be.addTimedTask(this.subscribe, 0, this, [h])
        }
    },
    o.__restoreWs = qn.restoreClass,
    o.__disableWs = qn.disableClass,
    o.__handleError5 = G.handleError5,
    o.addCookies = o.addCookies,
    o.getCookies = o.getCookies,
    o.setLoggerProvider = o.setLoggerProvider,
    o.LIB_NAME = o.LIB_NAME,
    o.LIB_VERSION = o.LIB_VERSION,
    o.prototype.connect = o.prototype.connect,
    o.prototype.disconnect = o.prototype.disconnect,
    o.prototype.getStatus = o.prototype.getStatus,
    o.prototype.sendMessage = o.prototype.sendMessage,
    o.prototype.getSubscriptions = o.prototype.getSubscriptions,
    o.prototype.subscribe = o.prototype.subscribe,
    o.prototype.unsubscribe = o.prototype.unsubscribe,
    o.prototype.addListener = o.prototype.addListener,
    o.prototype.removeListener = o.prototype.removeListener,
    o.prototype.getListeners = o.prototype.getListeners,
    o.prototype.registerForMpn = o.prototype.registerForMpn,
    o.prototype.subscribeMpn = o.prototype.subscribeMpn,
    o.prototype.unsubscribeMpn = o.prototype.unsubscribeMpn,
    o.prototype.unsubscribeMpnSubscriptions = o.prototype.unsubscribeMpnSubscriptions,
    o.prototype.findMpnSubscription = o.prototype.findMpnSubscription,
    o.prototype.getMpnSubscriptions = o.prototype.getMpnSubscriptions,
    o.prototype.handleRemoteAdapterStatus = o.prototype.handleRemoteAdapterStatus,
    o.prototype.enableSharing = o.prototype.enableSharing,
    o.prototype.isMaster = o.prototype.isMaster,
    o.prototype.unloadEvent = o.prototype.unloadEvent,
    o.prototype.preUnloadEvent = o.prototype.unloadEvent,
    ot(o, Ru, !1, !0),
    ot(o, M3, !0, !0),
    o
}();
var YF = function(e) {
    this.device = e
};
YF.prototype = {
    onSessionClose: function(e) {
        e || (this.device.stateMachine.onSessionClose(),
        this.device.deviceId = null,
        this.device.adapterName = null,
        this.device.statusTimestamp = 0)
    },
    onRegisterOK: function(e, t) {
        this.device.deviceId = e,
        this.device.adapterName = t
    },
    onRegisterError: function(e, t) {
        this.device.stateMachine.error(e, t)
    },
    onStatusChange: function(e, t) {
        switch (e) {
        case "ACTIVE":
            this.device.stateMachine.activate(t);
            break;
        case "SUSPENDED":
            this.device.stateMachine.suspend(t);
            break
        }
    },
    onSubscriptionsUpdated: function() {
        this.device.dispatchEvent("onSubscriptionsUpdated")
    }
};
var oo = function(e) {
    this._descriptor = e || {}
};
oo.prototype = {
    putAll: function(e, t) {
        var n = this.getMap(e);
        for (var i in t)
            n[i] = t[i]
    },
    setValue: function(e, t, n) {
        return n != null ? this.getMap(e)[t] = n : delete this.getMap(e)[t],
        this
    },
    getValue: function(e, t) {
        return this.getMap(e)[t]
    },
    getMap: function(e) {
        for (var t = this._descriptor, n = e.split("."), i = 0, r = n.length; i < r; i++) {
            var s = n[i]
              , o = t[s];
            o == null && (o = {},
            t[s] = o),
            t = o
        }
        return t
    },
    build: function() {
        return this._descriptor
    }
};
oo.prototype.putAll = oo.prototype.putAll;
oo.prototype.setValue = oo.prototype.setValue;
oo.prototype.getValue = oo.prototype.getValue;
oo.prototype.getMap = oo.prototype.getMap;
oo.prototype.build = oo.prototype.build;
var Fx = [];
Fx = ["New value for setting received from internal settings", "New value for setting received from API", "Broadcasting setting to shared LightstreamerClient instances", "Setting changed, firing notification", "Wong length!", "Missing from first array", "Missing from second array", "Wrong  element", "Not expecting a NULL", "Expecting a different value", "Expecting 2 different values", "Expecting a valid value", "Expecting a not valid value", "ASSERT failed", "Unexpected", "Unexpectedly missing session id", "Bind request generated", "Create request generated", "Recovery request generated", "Destroy request generated", "Force rebind request generated", "New engine created", "Engine", "Subscribing subscription", "Unsubscribing subscription", "Enqueueing subscription update", "Resuming subscription update", "Executing subscription update", "sending Subscription to the engine", "Overriding old promise for table ", "Delaying subscription completion", "Resuming subscription completion", "Ignored old promise triggered for table ", "Ignored old promise failed for table ", "Restoring all pending Subscriptions", "Pausing active Subscription", "Pausing all active Subscriptions", "Delaying subscription action", "Resuming subscription action", "Executing subscription action", "Delaying subscription action", "Resuming subscription action", "Subscription action had to be delayed on multiple instances", "An error occurred while executing an event on a listener", "Dispatching event on listeners", "Changing reference session", "Command phase check", "Adding notification", "Unexpected progressive", "Skipping replicated progressive", "Unexpected progressive", "Received event prog higher than expected", "Received event prog different than expected", "Received event prog different than actual", "Unexpected message outcome sequence", "Unexpected command received, ignoring", "There is probably another web application connected to the same Lightstreamer Server within this browser instance. That could prevent the current application from connecting to the Server. Please close the other application to unblock the current one", "New client attached to engine", "Dismissing client", "Can't find subscription anymore", "Can't find page anymore", "Client or session unexpectedly disappeared while handling subscription", "Notify back to the client that the subscription was handled", "It has been detected that the JavaScript engine of this browser is not respecting the timeouts in setTimeout method calls. The Client has been disconnected from the Server in order to avoid reconnection loops. To try again, just refresh the page.", "New WS connection oid=", "Closing WebSocket connection", "Error closing WebSocket connection", "Unexpected openSocket call", "Error opening WebSocket connection", "Timeout event [currentConnectTimeoutWS]", "error on closing a timed out WS", "Unexpected WebSocket _load call", "Preparing to bind on WebSocket connection", "Open path is disappeared", "WebSocket transport sending oid=", "Error sending data over WebSocket", "Unexpected send outcome while websocket is ready-to-send", "WebSocket transport receiving oid=", "Error on WebSocket connection oid=", "WebSocket connection ready", "WebSocket connection close event received", "New sessionId", "New session", "Copying prog ", "Resetting session oid=", "Session state change", "Mad timeouts? Avoid connection", "Opening on server, send destroy", "Opening new session", "Unexpected phase during binding of session", "Binding session", "Binding session", "Switch requested", "Unexpected creation of a session while another one is still creating", "Slow requested", "Unexpected phase during slow handling", "Closing session", "Session shutdown", "Make pause before next bind", "Timeout event", "Start session recovery. Cause: no response timeLeft=", "Start new session. Cause: no response", "Timeout: switch transport", "Timeout: recover session", "Timeout: new session", "Unexpected timeout event while session is _OFF", "Error event", "Start session recovery. Cause: socket failure while receiving", "Start new session. Cause: socket failure while receiving", "Start session recovery. Cause: socket failure while recovering", "Switching transport", "Start new session. Cause: ", "Unexpected loop event while session is an non-active status", "Unexpected push event while session is an non-active status", "Unexpected phase after create request sent", "Unexpected phase after bind request sent", "Status timeout in ", "Unexpected phase during OK execution", "Unexpected empty start time", "Synch event received", "Available bandwidth event received", "Error41 event received", "Keepalive event received", "OK event received", "Initializing session", "Unexpected session id received on bind OK", "Sync event received", "Loop event received", "Ignore error", "End event received", "Sending request to the server to force a rebind on the current connection", "force_rebind request caused the error: ", "Sending request to the server to destroy the current session", "destroy request caused the error: ", "constrain request ", "New CORS-XHR connection oid=", "CORS-XHR connection closed oid=", "Error non closing connection opened using CORS-XHR", "CORS-XHR transport sending oid=", "Error opening CORS-XHR connection oid=", "CORS-XHR transport receiving oid=", "CORS-XHR connection error oid=", "CORS-XHR request completed oid=", "Error reading CORS-XHR status oid=", "Closing connection opened using IEXSXHR", "Error non closing connection opened using IEXSXHR", "IEXSXHR transport sending", "Error opening connection using IEXSXHR", "Error on connection opened using IEXSXHR", "IEXSXHR transport receiving", "Connection opened using IEXSXHR completed", "Closing connection opened using html form; actually doing nothing", "Html form transport sending", "Error while sending request using html form", "Closing connection opened using replace on forever-frame", "Replace on forever-frame transport sending", "Replace on forever-frame not available", "Error while sending request using  replace on forever-frame", "Loading XHR frame to perform non-cross-origin requests", "Client is offline, will retry later to load XHR frame", "XHR frame loaded", "XHR frame loading timeout expired, try to reload", "XHR frame loading timeout expired again, will not try again", "Passing request to the XHR frame", "Error passing request to the XHR frame", "XHR transport sending", "Closing connection opened using XHR", "Error closing connection opened using XHR", "Error reading XHR status", "XHR transport receiving", "Error on connection opened using XHR", "Error on disposing XHR's callback", "Error on disposing XHR", "Streaming enabled on XHR", "XHR transport receiving", "XHR transport receiving", "Verify connection class", "This class is not available on the current environment", "Cross-origin request is needed, this class is not able to make cross-origin requests", "Cookies on request are required, this class can't guarantee that cookies will be actually sent", "Cross-protocol request is needed, this class is not able to make cross-protocol requests", "Extra headers are given, this class is not able to send requests containing extra headers", "This class can't be used in the current context", "Connection class is good", "Searching for an appropriate connection class", "Restart connection selector", "Client is offline, delaying connection to server", "Unable to use available connections to connect to server", "Unable to use available connections to connect to server", "Connection request generated", "Connection currently unavailable, delaying connection", "Connection open to the server", "Unexpected ws phase while opening connection", "Open WebSocket to server", "A control link was received while earlyWSOpenEnabled is set to true, a WebSocket was wasted.", "Unexpected ws phase during binding", "WebSockets currently unavailable, delaying connection", "Unexpected WebSocket failure", "Connection to server bound upon WebSocket", "Connection to server open upon WebSocket", "Unexpected phase for an clean end of a WS", "Unexpected connection error on a connection that was not yet open", "WebSocket was broken before it was used", "WebSocket was broken while we were waiting the first bind", "can't be unable-to-open since the connection is already open", "WebSocket was broken while we were waiting", "Sync message received while session wasn't in receiving status", "First sync message, check not performed", "Huge delay detected by sync signals. Restored from standby/hibernation?", "No delay detected by sync signals", "Delay detected by sync signals", "No delay detected by sync signals", "Duplicated message", "Unexpected request type was given to this batch", "Unexpected request type was given to this batch; expecting ADD REMOVE DESTROY CONSTRAIN or MPN", "Storing request", "Substituting CONSTRAINT/FORCE_REBIND/MPN request", "Replacing 'second' ADD request with a REMOVE request for the same subscription", "REMOVE request already stored, skipping", "ADD request for the involved subscription was not yet sent; there is no need to send the related REMOVE request or the original ADD one, removing both", "ADD after REMOVE?", "Same session id on different servers, store two different DESTROY requests", "Verified duplicated DESTROY request, skipping", "Duplicated ADD or CHANGE_SUB request, substitute the old one with the new one", "Storing confirmed", "Trying to remove by index non-existent request", "Trying to remove by key non-existent request", "Batch length limit changed", "Start sending reverse heartbeat to the server", "Start sending reverse heartbeat to the server", "Keep sending reverse heartbeat to the server", "Preparing reverse heartbeat", "Stop sending reverse heartbeat to the server", "Stop sending reverse heartbeat to the server", "Keep sending reverse heartbeat to the server", "Close current connection if any and applicable", "ControlConnectionHandler state change '", "Reset Controls handler status", "Batch handler unexpectedly idle; a batch was waiting", "Batch handler unexpectedly not idle; nothing ready to be sent was found", "Batch object not null", "Enabling control requests over WebSocket now", "Disabling control requests over WebSocket now", "New request to be sent", "Still waiting previous batch", "Ready to dequeue", "Waiting for dequeue", "starting dequeuing", "Send previous batch", "Send new batch", "Some requests don't need to be sent anymore, keep on dequeing", "Delaying requests; waiting for a connection", "Can't find a connection to send batch", "Request sent through HTTP connection", "Request sent through WebSocket, keep on dequeuing", "Request queue is now empty", "Duplicated message", "Empty batch, exit", "Ready to send batch, choosing connection", "WebSocket should be available, try to send through it", "Empty request was generated, exit", "Unable to find a connection for control requests, will try again later", "Connection for control batch chosen", "Empty request for HTTP was generated, exit", "Connection failed, will try a different connection", "Connection temporarily unavailable, will try later", "Unexpected sending outcome", "Control request got answer", "Control request got answer", "Error from network", "A single request size exceeds the <request_limit> configuration setting for the Server. Trying to send it anyway although it will be refused", "Closing message handler", "Activating message handler", "Preparing message request", "Forward prepared message to control handler", "No ack was received for a message; forwarding it again to the control handler", "Ack received for message", "Ack received, stopping automatic retransmissions", "Ack received, no outcome expected, clean structures", "Not waiting for ack, purging", "Message handled, clean structures", "Message on the net notification", "OK outcome received", "DISCARDED outcome received", "DENIED outcome received", "ERROR outcome received", "Enqueuing received data", "Dequeuing received data", "Data can't be handled", "Unexpected error occurred while executing server-sent commands!", "Malformed message: ", "Unexpected update", "New session handler oid=", "SessionManager state change:", "Session recovery", "Session recovery: cancelled", "Can't initiate session, giving up, disabling automatic reconnections", "Unable to establish session of the current type. Switching session type", "Unexpected fallback type; switching because the current session type cannot be established", "Slow session detected. Switching session type", "Unexpected fallback type; switching because of a slow connection was detected", "Setting up new session type", "Unexpected fallback type switching with new session", "Switching current session type", "Unexpected fallback type switching with a force rebind", "Slow session switching", "Failed to switch session type. Starting new session", "Unexpected fallback type switching because of a failed force rebind", "Session started", "Session closed", "Discarding update for dismissed page", "Received new update", "Discarding lost updates notification for dismissed page", "Received lost updates event", "Discarding end of snapshot notification for dismissed page", "Received end of snapshot event", "Discarding snapshot clearing notification for dismissed page", "Received snapshot clearing event", "Received server error event", "Received subscription error event", "Discarding subscription error notification for dismissed page", "Received unsubscription event", "Discarding unsubscription notification for dismissed page", "Received reconfiguration OK event", "Table of reconfiguration not found", "Discarding subscription notification for dismissed page", "Received subscription event", "Received message ack", "Received message-ok notification", "Received message-deny notification", "Received message-discarded notification", "Received message-error notification", "New control link received", "unsubscription request ", "configuration request [", "Fatal error: ", "Dismissing current session and stopping automatic reconnections.", "Transport change requested", "Opening a new session and starting automatic reconnections.", "RUNNING EXECUTOR AT ", "Shared worker is broken", "RESUMED TO ", "DELAYED TO ", "SharedWorker receiving error", "SharedWorker sending error", "Unexpected sharing error", "Unexpected dispatching error", "Unexpected error on dispatching", "SharedStatus remote sharing is ready", "SharedStatus local sharing is ready", "Started refresh thread", "Address already removed?", "Removing wrong address?", "Engine is probably dying, skip one cookie refresh", "Checking status", "No engines", "Checking shared status to verify if there are similar engines alive", "Engine found, no values though", "Engine found, not compatible though", "Write engine shared status", "Found engine", "There is a concurrent engine. Close engine ", "Stopped refresh thread", "Remote engine", "Trying to attach to a cross-page engine", "Exception while trying to attach to a cross-page engine", `You have Norton Internet Security or Norton
Personal Firewall installed on this computer.
If no real-time data show up, then you need
to disable Ad Blocking in Norton Internet
Security and then refresh this page`, "Cross-page engine not found", "Probably blocked popup detected: firefox-safari case", "Cross-page engine attached", "Verify if the found cross-page engine can be used", "can't use found cross-page engine: page is now closed", "can't use found cross-page engine: uneffective popup detected, chrome case", "problem closing the generated popup", "Probably blocked popup detected: opera common case", "can't use found cross-page engine: Lightstreamer singleton not available", "can't use found cross-page engine: Lightstreamer singleton content unavailable", "Ready to use found cross-page engine: looks ok", "can't use found cross-page engine: exception throw while accessing it", "Skipping already-used cookie", "Stop search for an engine", "No sharing was found, a new sharing will be created", "No sharing was found, will keep on searching after a pause", "No sharing was found, no sharing will be created, this client will fail", "A sharing was found but attaching is disabled, this client will fail", "A sharing was found, this will attach to", "Engine", "A sharing was found, but accordingly with the configuration it will be ignored", "Searching for available sharing", "Local engine found", "Local engine not found. Can't search on other pages because of the current sharing configuration", "Search remote engine in other page", "RemoteEngine =", "Can't access reference ", "Search remote engine in shared storage", "Storage inspection complete", "No valid engine found", "Valid engine found: ", "Engine ", "Engine ", "invalid values", "Unexpected missing values in sharing cookie", "Skipping not compatible engine", "Found a likely dead engine", "Valid engine values found. Wait for popup-protection timeout", "No compatible sharing detected", "No valid engine values found. Check again in ", "Forcing preventCrossWindowShare because page is on file:///", "New connection sharing", "A new sharing will be immediately created", "No way to obtain a sharing, this client will fail immediately", "A sharing will now be searched", "An exception was thrown while executing the Function passed to the forEachChangedField method", "An exception was thrown while executing the Function passed to the forEachField method", "Subscription reset", "Subscription entered the active state", "Subscription waiting to be sent to server", "Subscription queued to be sent to server", "Subscription is now on hold", "Subscription exits the active status; it can now be modified", "Subscription is now subscribed to", "Subscription is not subscribed to anymore", "Subscription request generated", "Received position of COMMAND and KEY fields from server", "Adapter Set assigned", "Selector assigned", "Requested Max Frequency assigned", "Requested Buffer Size assigned", "Snapshot Required assigned", "Second level Data Adapter Set assigned", "key and/or command position not correctly configured", "MpnSubscription state change", "MpnManager state change", "Sharing is not available on UCBrowser", "Connection sharing is not available", "Page is closing, won't search a new engine", "no sharing on mourning room?", "Sharing lost, trying to obtain a new one", "Connect requested", "Executing connect", "Disconnect requested", "Executing disconnect", "MpnDevice state change", "Can't remove row that does not exist", "Removing row", "Postpone new update until the current update/remove is completed", "Postpone new remove until the current update/remove is completed", "Inserting new row", "Updating row", "Cleaning the model", "New ChartLine", "Clearing ChartLine", "Repainting ChartLine", "ChartLine re-painted", "Calculated Y unit", "Y labels generated", "Y labels cleared", "Y labels now configured", "Line style configured", "Y axis is now positioned", "Painter configured", "Chart is now ready to be used", "A DOM element must be provided as an anchor for the chart", "Creating a new label for the chart", "Drawing line on the chart", "New line coordinates", "New line was drawn", "Repaint All", "Calculated X unit", "X labels generated", "X labels cleared", "Got double nulls, clear line", "Got a null, ignore point", "Cannot create line. Please declare the Y axis", "Line removed", "Cleaned all", "Parse html for Chart", "X axis is now configured on field", "Configuring multiple Y axis", "Y axis is now configured on field", "removing multiple Y axis", "Y axis is now removed", "X axis is now positioned", "X labels now configured", "Merging this update values with the values of the current update", "Filling formatted values in cell", "Scroll direction is ignored if sort is enabled", "Exception thrown while executing the iterator Function", "Cannot find the scroll element", "Perform auto-scroll", "Can't find value for sort key field", "Calculate number of pages", "Unexpected position of row to be wiped", "New value for setting received from internal settings", "New value for setting received from API", "Broadcasting setting to shared LightstreamerClient instances", "Setting changed, firing notification", "Wong length!", "Missing from first array", "Missing from second array", "Wrong  element", "Not expecting a NULL", "Expecting a different value", "Expecting 2 different values", "Expecting a valid value", "Expecting a not valid value", "ASSERT failed", "Unexpected", "Unexpectedly missing session id", "Bind request generated", "Create request generated", "Recovery request generated", "Destroy request generated", "Force rebind request generated", "New engine created", "Engine", "Subscribing subscription", "Unsubscribing subscription", "Enqueueing subscription update", "Resuming subscription update", "Executing subscription update", "sending Subscription to the engine", "Overriding old promise for table ", "Delaying subscription completion", "Resuming subscription completion", "Ignored old promise triggered for table ", "Ignored old promise failed for table ", "Restoring all pending Subscriptions", "Pausing active Subscription", "Pausing all active Subscriptions", "Delaying subscription action", "Resuming subscription action", "Executing subscription action", "Delaying subscription action", "Resuming subscription action", "Subscription action had to be delayed on multiple instances", "An error occurred while executing an event on a listener", "Dispatching event on listeners", "Changing reference session", "Command phase check", "Adding notification", "Unexpected progressive", "Skipping replicated progressive", "Unexpected progressive", "Received event prog higher than expected", "Received event prog different than expected", "Received event prog different than actual", "Unexpected message outcome sequence", "Unexpected command received, ignoring", "There is probably another web application connected to the same Lightstreamer Server within this browser instance. That could prevent the current application from connecting to the Server. Please close the other application to unblock the current one", "New client attached to engine", "Dismissing client", "Can't find subscription anymore", "Can't find page anymore", "Client or session unexpectedly disappeared while handling subscription", "Notify back to the client that the subscription was handled", "It has been detected that the JavaScript engine of this browser is not respecting the timeouts in setTimeout method calls. The Client has been disconnected from the Server in order to avoid reconnection loops. To try again, just refresh the page.", "New WS connection oid=", "Closing WebSocket connection", "Error closing WebSocket connection", "Unexpected openSocket call", "Error opening WebSocket connection", "Timeout event [currentConnectTimeoutWS]", "error on closing a timed out WS", "Unexpected WebSocket _load call", "Preparing to bind on WebSocket connection", "Open path is disappeared", "WebSocket transport sending oid=", "Error sending data over WebSocket", "Unexpected send outcome while websocket is ready-to-send", "WebSocket transport receiving oid=", "Error on WebSocket connection oid=", "WebSocket connection ready", "WebSocket connection close event received", "New sessionId", "New session", "Copying prog ", "Resetting session oid=", "Session state change", "Mad timeouts? Avoid connection", "Opening on server, send destroy", "Opening new session", "Unexpected phase during binding of session", "Binding session", "Binding session", "Switch requested", "Unexpected creation of a session while another one is still creating", "Slow requested", "Unexpected phase during slow handling", "Closing session", "Session shutdown", "Make pause before next bind", "Timeout event", "Start session recovery. Cause: no response timeLeft=", "Start new session. Cause: no response", "Timeout: switch transport", "Timeout: recover session", "Timeout: new session", "Unexpected timeout event while session is _OFF", "Error event", "Start session recovery. Cause: socket failure while receiving", "Start new session. Cause: socket failure while receiving", "Start session recovery. Cause: socket failure while recovering", "Switching transport", "Start new session. Cause: ", "Unexpected loop event while session is an non-active status", "Unexpected push event while session is an non-active status", "Unexpected phase after create request sent", "Unexpected phase after bind request sent", "Status timeout in ", "Unexpected phase during OK execution", "Unexpected empty start time", "Synch event received", "Available bandwidth event received", "Error41 event received", "Keepalive event received", "OK event received", "Initializing session", "Unexpected session id received on bind OK", "Sync event received", "Loop event received", "Ignore error", "End event received", "Sending request to the server to force a rebind on the current connection", "force_rebind request caused the error: ", "Sending request to the server to destroy the current session", "destroy request caused the error: ", "constrain request ", "New CORS-XHR connection oid=", "CORS-XHR connection closed oid=", "Error non closing connection opened using CORS-XHR", "CORS-XHR transport sending oid=", "Error opening CORS-XHR connection oid=", "CORS-XHR transport receiving oid=", "CORS-XHR connection error oid=", "CORS-XHR request completed oid=", "Error reading CORS-XHR status oid=", "Closing connection opened using IEXSXHR", "Error non closing connection opened using IEXSXHR", "IEXSXHR transport sending", "Error opening connection using IEXSXHR", "Error on connection opened using IEXSXHR", "IEXSXHR transport receiving", "Connection opened using IEXSXHR completed", "Closing connection opened using html form; actually doing nothing", "Html form transport sending", "Error while sending request using html form", "Closing connection opened using replace on forever-frame", "Replace on forever-frame transport sending", "Replace on forever-frame not available", "Error while sending request using  replace on forever-frame", "Loading XHR frame to perform non-cross-origin requests", "Client is offline, will retry later to load XHR frame", "XHR frame loaded", "XHR frame loading timeout expired, try to reload", "XHR frame loading timeout expired again, will not try again", "Passing request to the XHR frame", "Error passing request to the XHR frame", "XHR transport sending", "Closing connection opened using XHR", "Error closing connection opened using XHR", "Error reading XHR status", "XHR transport receiving", "Error on connection opened using XHR", "Error on disposing XHR's callback", "Error on disposing XHR", "Streaming enabled on XHR", "XHR transport receiving", "XHR transport receiving", "Verify connection class", "This class is not available on the current environment", "Cross-origin request is needed, this class is not able to make cross-origin requests", "Cookies on request are required, this class can't guarantee that cookies will be actually sent", "Cross-protocol request is needed, this class is not able to make cross-protocol requests", "Extra headers are given, this class is not able to send requests containing extra headers", "This class can't be used in the current context", "Connection class is good", "Searching for an appropriate connection class", "Restart connection selector", "Client is offline, delaying connection to server", "Unable to use available connections to connect to server", "Unable to use available connections to connect to server", "Connection request generated", "Connection currently unavailable, delaying connection", "Connection open to the server", "Unexpected ws phase while opening connection", "Open WebSocket to server", "A control link was received while earlyWSOpenEnabled is set to true, a WebSocket was wasted.", "Unexpected ws phase during binding", "WebSockets currently unavailable, delaying connection", "Unexpected WebSocket failure", "Connection to server bound upon WebSocket", "Connection to server open upon WebSocket", "Unexpected phase for an clean end of a WS", "Unexpected connection error on a connection that was not yet open", "WebSocket was broken before it was used", "WebSocket was broken while we were waiting the first bind", "can't be unable-to-open since the connection is already open", "WebSocket was broken while we were waiting", "Sync message received while session wasn't in receiving status", "First sync message, check not performed", "Huge delay detected by sync signals. Restored from standby/hibernation?", "No delay detected by sync signals", "Delay detected by sync signals", "No delay detected by sync signals", "Duplicated message", "Unexpected request type was given to this batch", "Unexpected request type was given to this batch; expecting ADD REMOVE DESTROY CONSTRAIN or MPN", "Storing request", "Substituting CONSTRAINT/FORCE_REBIND/MPN request", "Replacing 'second' ADD request with a REMOVE request for the same subscription", "REMOVE request already stored, skipping", "ADD request for the involved subscription was not yet sent; there is no need to send the related REMOVE request or the original ADD one, removing both", "ADD after REMOVE?", "Same session id on different servers, store two different DESTROY requests", "Verified duplicated DESTROY request, skipping", "Duplicated ADD or CHANGE_SUB request, substitute the old one with the new one", "Storing confirmed", "Trying to remove by index non-existent request", "Trying to remove by key non-existent request", "Batch length limit changed", "Start sending reverse heartbeat to the server", "Start sending reverse heartbeat to the server", "Keep sending reverse heartbeat to the server", "Preparing reverse heartbeat", "Stop sending reverse heartbeat to the server", "Stop sending reverse heartbeat to the server", "Keep sending reverse heartbeat to the server", "Close current connection if any and applicable", "ControlConnectionHandler state change '", "Reset Controls handler status", "Batch handler unexpectedly idle; a batch was waiting", "Batch handler unexpectedly not idle; nothing ready to be sent was found", "Batch object not null", "Enabling control requests over WebSocket now", "Disabling control requests over WebSocket now", "New request to be sent", "Still waiting previous batch", "Ready to dequeue", "Waiting for dequeue", "starting dequeuing", "Send previous batch", "Send new batch", "Some requests don't need to be sent anymore, keep on dequeing", "Delaying requests; waiting for a connection", "Can't find a connection to send batch", "Request sent through HTTP connection", "Request sent through WebSocket, keep on dequeuing", "Request queue is now empty", "Duplicated message", "Empty batch, exit", "Ready to send batch, choosing connection", "WebSocket should be available, try to send through it", "Empty request was generated, exit", "Unable to find a connection for control requests, will try again later", "Connection for control batch chosen", "Empty request for HTTP was generated, exit", "Connection failed, will try a different connection", "Connection temporarily unavailable, will try later", "Unexpected sending outcome", "Control request got answer", "Control request got answer", "Error from network", "A single request size exceeds the <request_limit> configuration setting for the Server. Trying to send it anyway although it will be refused", "Closing message handler", "Activating message handler", "Preparing message request", "Forward prepared message to control handler", "No ack was received for a message; forwarding it again to the control handler", "Ack received for message", "Ack received, stopping automatic retransmissions", "Ack received, no outcome expected, clean structures", "Not waiting for ack, purging", "Message handled, clean structures", "Message on the net notification", "OK outcome received", "DISCARDED outcome received", "DENIED outcome received", "ERROR outcome received", "Enqueuing received data", "Dequeuing received data", "Data can't be handled", "Unexpected error occurred while executing server-sent commands!", "Malformed message: ", "Unexpected update", "New session handler oid=", "SessionManager state change:", "Session recovery", "Session recovery: cancelled", "Can't initiate session, giving up, disabling automatic reconnections", "Unable to establish session of the current type. Switching session type", "Unexpected fallback type; switching because the current session type cannot be established", "Slow session detected. Switching session type", "Unexpected fallback type; switching because of a slow connection was detected", "Setting up new session type", "Unexpected fallback type switching with new session", "Switching current session type", "Unexpected fallback type switching with a force rebind", "Slow session switching", "Failed to switch session type. Starting new session", "Unexpected fallback type switching because of a failed force rebind", "Session started", "Session closed", "Discarding update for dismissed page", "Received new update", "Discarding lost updates notification for dismissed page", "Received lost updates event", "Discarding end of snapshot notification for dismissed page", "Received end of snapshot event", "Discarding snapshot clearing notification for dismissed page", "Received snapshot clearing event", "Received server error event", "Received subscription error event", "Discarding subscription error notification for dismissed page", "Received unsubscription event", "Discarding unsubscription notification for dismissed page", "Received reconfiguration OK event", "Table of reconfiguration not found", "Discarding subscription notification for dismissed page", "Received subscription event", "Received message ack", "Received message-ok notification", "Received message-deny notification", "Received message-discarded notification", "Received message-error notification", "New control link received", "unsubscription request ", "configuration request [", "Fatal error: ", "Dismissing current session and stopping automatic reconnections.", "Transport change requested", "Opening a new session and starting automatic reconnections.", "RUNNING EXECUTOR AT ", "Shared worker is broken", "RESUMED TO ", "DELAYED TO ", "SharedWorker receiving error", "SharedWorker sending error", "Unexpected sharing error", "Unexpected dispatching error", "Unexpected error on dispatching", "SharedStatus remote sharing is ready", "SharedStatus local sharing is ready", "Started refresh thread", "Address already removed?", "Removing wrong address?", "Engine is probably dying, skip one cookie refresh", "Checking status", "No engines", "Checking shared status to verify if there are similar engines alive", "Engine found, no values though", "Engine found, not compatible though", "Write engine shared status", "Found engine", "There is a concurrent engine. Close engine ", "Stopped refresh thread", "Remote engine", "Trying to attach to a cross-page engine", "Exception while trying to attach to a cross-page engine", `You have Norton Internet Security or Norton
Personal Firewall installed on this computer.
If no real-time data show up, then you need
to disable Ad Blocking in Norton Internet
Security and then refresh this page`, "Cross-page engine not found", "Probably blocked popup detected: firefox-safari case", "Cross-page engine attached", "Verify if the found cross-page engine can be used", "can't use found cross-page engine: page is now closed", "can't use found cross-page engine: uneffective popup detected, chrome case", "problem closing the generated popup", "Probably blocked popup detected: opera common case", "can't use found cross-page engine: Lightstreamer singleton not available", "can't use found cross-page engine: Lightstreamer singleton content unavailable", "Ready to use found cross-page engine: looks ok", "can't use found cross-page engine: exception throw while accessing it", "Skipping already-used cookie", "Stop search for an engine", "No sharing was found, a new sharing will be created", "No sharing was found, will keep on searching after a pause", "No sharing was found, no sharing will be created, this client will fail", "A sharing was found but attaching is disabled, this client will fail", "A sharing was found, this will attach to", "Engine", "A sharing was found, but accordingly with the configuration it will be ignored", "Searching for available sharing", "Local engine found", "Local engine not found. Can't search on other pages because of the current sharing configuration", "Search remote engine in other page", "RemoteEngine =", "Can't access reference ", "Search remote engine in shared storage", "Storage inspection complete", "No valid engine found", "Valid engine found: ", "Engine ", "Engine ", "invalid values", "Unexpected missing values in sharing cookie", "Skipping not compatible engine", "Found a likely dead engine", "Valid engine values found. Wait for popup-protection timeout", "No compatible sharing detected", "No valid engine values found. Check again in ", "Forcing preventCrossWindowShare because page is on file:///", "New connection sharing", "A new sharing will be immediately created", "No way to obtain a sharing, this client will fail immediately", "A sharing will now be searched", "An exception was thrown while executing the Function passed to the forEachChangedField method", "An exception was thrown while executing the Function passed to the forEachField method", "Subscription reset", "Subscription entered the active state", "Subscription waiting to be sent to server", "Subscription queued to be sent to server", "Subscription is now on hold", "Subscription exits the active status; it can now be modified", "Subscription is now subscribed to", "Subscription is not subscribed to anymore", "Subscription request generated", "Received position of COMMAND and KEY fields from server", "Adapter Set assigned", "Selector assigned", "Requested Max Frequency assigned", "Requested Buffer Size assigned", "Snapshot Required assigned", "Second level Data Adapter Set assigned", "key and/or command position not correctly configured", "MpnSubscription state change", "MpnManager state change", "Sharing is not available on UCBrowser", "Connection sharing is not available", "Page is closing, won't search a new engine", "no sharing on mourning room?", "Sharing lost, trying to obtain a new one", "Connect requested", "Executing connect", "Disconnect requested", "Executing disconnect", "MpnDevice state change", "Can't remove row that does not exist", "Removing row", "Postpone new update until the current update/remove is completed", "Postpone new remove until the current update/remove is completed", "Inserting new row", "Updating row", "Cleaning the model", "New ChartLine", "Clearing ChartLine", "Repainting ChartLine", "ChartLine re-painted", "Calculated Y unit", "Y labels generated", "Y labels cleared", "Y labels now configured", "Line style configured", "Y axis is now positioned", "Painter configured", "Chart is now ready to be used", "A DOM element must be provided as an anchor for the chart", "Creating a new label for the chart", "Drawing line on the chart", "New line coordinates", "New line was drawn", "Repaint All", "Calculated X unit", "X labels generated", "X labels cleared", "Got double nulls, clear line", "Got a null, ignore point", "Cannot create line. Please declare the Y axis", "Line removed", "Cleaned all", "Parse html for Chart", "X axis is now configured on field", "Configuring multiple Y axis", "Y axis is now configured on field", "removing multiple Y axis", "Y axis is now removed", "X axis is now positioned", "X labels now configured", "Merging this update values with the values of the current update", "Filling formatted values in cell", "Scroll direction is ignored if sort is enabled", "Exception thrown while executing the iterator Function", "Cannot find the scroll element", "Perform auto-scroll", "Can't find value for sort key field", "Calculate number of pages", "Unexpected position of row to be wiped"];
m.resolve = function(e) {
    return e + "] " + Fx[e]
}
;
var Jg = function() {};
Jg.getMessage = function(e) {
    return m.resolve(e)
}
;
m.resolve = m.resolve;
Jg.getMessage = Jg.getMessage;
var QF = 0
  , Yl = class {
    constructor(t, n, i) {
        this.pScope = t,
        this.pId = QF++,
        this.command = n,
        this.listenUntil = i
    }
}
;
var Ql = ( () => {
    let t = class t {
        get webWorkerEnabled() {
            return this.webWorkerFeatureToggle && this.easyWorker?.isWebWorkerSupported
        }
        constructor() {
            this.subs = [],
            this.listenUntilSubjects = {},
            this.webWorkerFeatureToggle = null,
            this.connectionState = Rt.Disconnected,
            this.connectionStateSubject = new Ne(this.connectionState),
            this.connectionState$ = this.connectionStateSubject.asObservable(),
            this.lsStableState$ = this.connectionState$.pipe(Qn(i => i === Rt.Connected)),
            this.resetLsManuallySubject = new Ne(!1),
            this.resetLsManually$ = this.resetLsManuallySubject.asObservable(),
            this.lsConnectedSubject = new Ne(!1),
            this.lsConnected$ = this.lsConnectedSubject.asObservable(),
            this.customerIsin = "",
            this.lsUrl = "",
            this.EASY_WORKER_NOT_PROVIDED = "Easy web worker not provided!",
            this.connectionFinalState$ = this.connectionState$.pipe(mt(i => [Rt.Connected, Rt.Disconnected].includes(i)), R0())
        }
        setConfig(i) {
            this.lsUrl = i.lsUrl,
            this.customerIsin = i.customerIsin ?? "",
            this.webWorkerFeatureToggle = i.webWorkerFeatureToggle === !0,
            this.easyWorker = i.workerService
        }
        start() {
            let i = {
                onServerError: () => {
                    this.changeConnectionState(Rt.NotConnected)
                }
                ,
                onStatusChange: s => {
                    try {
                        let o = s.split(":");
                        o.length > 0 && (o[0] === "CONNECTED" ? this.changeConnectionState(Rt.Connected) : o[0] === "CONNECTING" ? this.changeConnectionState(Rt.Connecting) : o[0] === "DISCONNECTED" ? this.changeConnectionState(Rt.Disconnected) : this.changeConnectionState(Rt.Unknown))
                    } catch {
                        this.changeConnectionState(Rt.Unknown)
                    }
                }
            }
              , r = "lsadapter-conf";
            if (!this.webWorkerEnabled)
                this.lsClient = new V3(this.lsUrl,r),
                this.lsClient.connectionDetails.setUser(this.customerIsin),
                this.lsClient.connectionOptions.setCookieHandlingRequired(!0),
                this.lsClient.connectionOptions.setEarlyWSOpenEnabled(!1),
                this.lsClient.connect(),
                this.lsClient.addListener(i);
            else {
                if (!this.easyWorker)
                    throw new Error(this.EASY_WORKER_NOT_PROVIDED);
                this.easyWorker.isWorkerAvailable("ls-worker") || this.easyWorker.initializeWorker("ls-worker", new Worker(new URL("worker-4VVFA4CG.js",import.meta.url),{
                    type: "module"
                }));
                let s = new Yl("ls-worker",new Ol("init",{
                    lsUrl: this.lsUrl,
                    lsAdapterSet: r,
                    customerIsin: this.customerIsin
                }, ({lsEventType: o, eventData: a}) => {
                    typeof i[o] == "function" && i[o](a)
                }
                ));
                this.easyWorker.startProcess(s)
            }
        }
        changeConnectionState(i) {
            this.connectionState = i,
            this.connectionStateSubject.next(i),
            i === Rt.Connected ? this.lsConnectedSubject.next(!0) : this.lsConnectedSubject.next(!1)
        }
        onDestroy() {
            this.disconnect()
        }
        unsubscribeAllAndDisconnect() {
            try {
                this.unsubscribeAll(),
                this.disconnect()
            } catch {}
        }
        disconnect() {
            this.lsConnectedSubject.next(!1),
            this.resetLsManuallySubject.next(!0),
            this.webWorkerEnabled ? this.easyWorker?.startProcess(new Yl("ls-worker",new Ol("disconnect"))) : this.lsClient?.disconnect()
        }
        resetLsConnection() {
            this.disconnect(),
            this.start()
        }
        subscribeToLsBySchema(i) {
            let r = this.getSubscriptionModelBySchema({
                schemaType: i.schemaType,
                elementId: i.elementId,
                schema: i.schema,
                needSnapShot: i.needSnapShot
            });
            return this.subscriptionToItems(r, i.elementId, i.schemaType)
        }
        getSubscriptionModelBySchema(i) {
            let r = Zn.LsSchemasTopic.find(o => o.schema === i.schemaType)?.topic
              , s = {
                mode: Zn.RawModeSchemas.indexOf(i.schemaType) > -1 ? Tl.Raw : Tl.Merge,
                adapterName: Zn.LsAdapterName.find(o => o.topic === Zn.LsSchemasTopic.find(a => a.schema === i.schemaType)?.topic)?.value,
                schema: i.schema || this.getSchema(Zn.LsSchemas.find(o => o.type === i.schemaType)?.schema),
                isSnapshot: Zn.SnapshotSchemas.indexOf(i.schemaType) > -1 ? xa.Yes : xa.No,
                items: [r + (i.elementId ? ":" + i.elementId : "")],
                changeType: Zn.FullModeChangeSchemas.indexOf(i.schemaType) > -1 ? ba.Full : ba.Field
            };
            return i.needSnapShot !== null && i.needSnapShot !== void 0 && (s.isSnapshot = i.needSnapShot ? xa.Yes : xa.No),
            s
        }
        getSchema(i) {
            return Object.keys(i).map(r => i[r])
        }
        unsubscribeAll() {
            try {
                this.subs.forEach(i => {
                    this.lsClient?.unsubscribe(i.subscription)
                }
                ),
                this.subs = []
            } catch {}
        }
        subscriptionToItems(i, r, s) {
            if (!i.mode || !i.adapterName || !i.isSnapshot)
                throw new Error("wrong subscription model!");
            let o = new Bc(i.mode,i.items,i.schema);
            o.setDataAdapter(i.adapterName),
            o.setRequestedSnapshot(i.isSnapshot);
            let a = new lt
              , c = a.asObservable()
              , l = Ml();
            if (o.addListener({
                onItemUpdate: u => {
                    try {
                        if (i.changeType === ba.Field)
                            u.forEachChangedField( (h, d, f) => {
                                let g = {
                                    inst: r ?? "",
                                    name: h,
                                    pos: d,
                                    val: f,
                                    subId: l
                                };
                                (g.val || g.val == 0) && a.next(g)
                            }
                            );
                        else {
                            let h = {};
                            i.schema?.forEach(f => {
                                h[f] = u.getValue(f)
                            }
                            );
                            let d = {
                                inst: r ?? "",
                                name: "",
                                pos: 0,
                                val: h,
                                subId: l
                            };
                            a.next(d)
                        }
                    } catch {}
                }
            }),
            !this.webWorkerEnabled)
                this.lsClient?.subscribe(o);
            else {
                let u = new lt;
                this.listenUntilSubjects[l] = u;
                let h = new Yl("ls-worker",new Ol("subscribe",{
                    subscriptionModel: i,
                    subId: l,
                    elementId: r ?? ""
                }, ({eventData: d}) => {
                    a.next(d)
                }
                ),u);
                this.easyWorker?.startProcess(h)
            }
            return this.subs.push({
                elementId: r,
                schemaType: s,
                subscription: o,
                subId: l
            }),
            c
        }
        getListOfSubscriptions() {
            let i = this.lsClient?.getSubscriptions()
        }
        unsubscribeFromWebWorkerLs(i) {
            this.listenUntilSubjects[i.subId] && (this.listenUntilSubjects[i.subId].next(),
            delete this.listenUntilSubjects[i.subId]),
            this.easyWorker?.startProcess(new Yl("ls-worker",new Ol("unSubscribe",{
                subId: i.subId
            })))
        }
        unsubscribeSchema(i, r) {
            let s = this.subs.filter(o => o.schemaType === i && o.elementId === (r ?? o.elementId));
            s && (s.forEach(o => {
                this.webWorkerEnabled ? this.unsubscribeFromWebWorkerLs(o) : this.lsClient?.unsubscribe(o.subscription)
            }
            ),
            this.subs = this.subs.filter(o => !(o.schemaType === i && o.elementId === (r ?? o.elementId))))
        }
        isSubscriptionAvailable(i, r) {
            return this.subs.some(s => s.schemaType === i && s.elementId === (r ?? s.elementId))
        }
        unsubscribeSchemaTypeExceptSelectedItems(i, r) {
            let s = this.subs.filter(o => o.schemaType === i && !r.includes(o.elementId ?? ""));
            s?.length && (s.forEach(o => {
                this.webWorkerEnabled ? this.unsubscribeFromWebWorkerLs(o) : this.lsClient?.unsubscribe(o.subscription)
            }
            ),
            this.subs = this.subs.filter(o => !s.map(a => a.subId).includes(o.subId)))
        }
        unsubscribeSchemaTypeAndIds(i, r) {
            let s = this.subs.filter(o => o.schemaType === i && r.includes(o.elementId ?? ""));
            s?.length && (s.forEach(o => {
                this.webWorkerEnabled ? this.unsubscribeFromWebWorkerLs(o) : this.lsClient?.unsubscribe(o.subscription)
            }
            ),
            this.subs = this.subs.filter(o => !s.map(a => a.subId).includes(o.subId)))
        }
        unsubscribeSchemaById(i) {
            let r = this.subs.find(s => s.subId === i);
            r && (this.webWorkerEnabled ? this.unsubscribeFromWebWorkerLs(r) : this.lsClient?.unsubscribe(r.subscription),
            this.subs = this.subs.filter(s => s.subId !== i))
        }
        unsubscribeSchemaByIds(i) {
            i?.forEach(r => this.unsubscribeSchemaById(r))
        }
        waitForStableConnection() {
            return this.lsConnectedSubject.pipe(Qn(i => i))
        }
        subscribeToLs(i, r, s=null) {
            return this.lsConnectedSubject.pipe(Qn(o => o), li( () => this.subscribeToLsBySchema({
                schemaType: i,
                elementId: r,
                needSnapShot: s
            })))
        }
        subscribeToLsIfNotAvailable(i, r, s) {
            r.forEach(o => {
                this.isSubscriptionAvailable(i, o) || this.subscribeToLs(i, o).subscribe(a => {
                    s(a)
                }
                )
            }
            )
        }
        subscribeToLsWithDynamicSchema(i, r, s) {
            return this.lsConnectedSubject.pipe(Qn(o => o), li( () => this.subscribeToLsBySchema({
                schemaType: i,
                elementId: s,
                schema: r
            })))
        }
        createDynamicSchema(...i) {
            return [...i]
        }
        subscribeToLs2(i, r, s, o) {
            this.getObservableWithCondition(r, s, o).subscribe(c => i(c)),
            this.resetLsManually$.pipe(mt(c => c)).subscribe( () => {
                this.getObservableWithCondition(r, s, o).subscribe(l => i(l))
            }
            )
        }
        getObservableWithCondition(i, r, s) {
            let o = this.subscribeToLs(i, r);
            return s && (o = o.pipe(m5.apply(s))),
            o
        }
        testLS() {
            wc( () => {
                this.changeConnectionState(Rt.Disconnected)
            }
            , 1e4),
            wc( () => {
                this.changeConnectionState(Rt.Connected)
            }
            , 25e3),
            wc( () => {
                this.changeConnectionState(Rt.Disconnected)
            }
            , 3e4),
            wc( () => {
                this.changeConnectionState(Rt.Connected)
            }
            , 4e4)
        }
        callFunctionUntilDestroy(i) {
            let {func: r, startDue: s, intervalDuration: o, count: a} = new f1(i)
              , c = a ? Lt(a) : He();
            return ci(s, o).pipe(c, He( () => r && r()))
        }
        callFunctionUntilLsDataReceived(i) {
            let {func: r, startDue: s, intervalDuration: o, count: a} = new f1(i)
              , c = a ? Lt(a) : He();
            return ci(s, o).pipe(c, He( () => r && r()))
        }
        callFunctionWhenLsIsNotConnected(i, r) {
            let {func: s, startDue: o, intervalDuration: a, count: c} = new f1(r ?? {})
              , l = c ? Lt(c) : In(this.lsStableState$)
              , u = Vt( () => i ? i() : Ur);
            return this.lsConnected$.pipe(R0(), mt(h => !h), Vt( () => ci(o, a).pipe(l, He( () => typeof s == "function" && s()), u)))
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)()
  , f1 = class {
    constructor(t) {
        typeof t.func == "function" && (this.func = t.func),
        this.startDue = t?.startDue ?? 0,
        this.intervalDuration = t?.intervalDuration ?? 7e3,
        this.count = t.count ?? 0
    }
}
;
var Lx = ["symbolIsin", "stateCode", "lastTradedPrice", "closingPrice", "totalTradeValue", "totalNumberOfTrades", "feeOfPreviousDaysClosingPrice"]
  , JF = ["totalNumberOfSharesTraded", "priceVar", "stateCode", "lastTradedPrice", "symbolIsin"]
  , ZF = ["symbolIsin", "stateCode", "closingPrice", "lastTradedPrice", "feeOfPreviousDaysClosingPrice", "totalNumberOfSharesTraded", "priceVar"]
  , eL = ["symbolIsin", "stateCode", "bestBuyPrice", "bestBuyQuantity", "bestSellPrice", "bestSellQuantity", "closingPrice", "feeOfPreviousDaysClosingPrice", "firstTradedPrice", "highAllowedPrice", "lastTradedPrice", "lowAllowedPrice", "priceVar", "symbolName", "totalNumberOfSharesTraded", "totalNumberOfTrades", "totalTradeValue", "lowPrice", "highPrice"]
  , tL = ["symbolIsin", "totalTradeValue", "totalNumberOfSharesTraded", "closingPrice", "feeOfPreviousDaysClosingPrice", "lastTradedPrice", "bestBuyQuantity", "bestSellQuantity", "bestBuyPrice", "bestSellPrice", "priceVar"]
  , nL = ["bestBuyPrice", "bestBuyQuantity", "bestSellPrice", "bestSellQuantity", "closingPrice", "feeOfPreviousDaysClosingPrice", "firstTradedPrice", "highAllowedPrice", "lastTradedPrice", "lowAllowedPrice", "priceVar", "stateCode", "symbolIsin", "symbolName", "totalNumberOfSharesTraded", "totalNumberOfTrades", "totalTradeValue", "lowPrice", "highPrice"]
  , iL = ["priceVar", "totalTradeValue", "lastTradedPrice", "symbolIsin", "totalNumberOfSharesTraded", "closingPrice"]
  , rL = ["symbolIsin", "stateCode", "lastTradedPrice", "priceVar", "closingPrice", "totalNumberOfSharesTraded", "feeOfPreviousDaysClosingPrice", "lowAllowedPrice", "highAllowedPrice"]
  , sL = ["minValidBuyVolume", "maxValidBuyVolume", "minValidSellVolume", "maxValidSellVolume", "lowAllowedPrice", "highAllowedPrice", "bidPrice", "askPrice", "priceTickSize"]
  , oL = ["symbolIsin", "stateCode", "bestBuyPrice", "bestBuyQuantity", "bestSellPrice", "bestSellQuantity", "closingPrice", "feeOfPreviousDaysClosingPrice", "firstTradedPrice", "highAllowedPrice", "lastTradedPrice", "lowAllowedPrice", "priceVar", "symbolName", "totalNumberOfSharesTraded", "totalNumberOfTrades", "totalTradeValue", "lowPrice", "highPrice"]
  , aL = [...Lx, "priceVar", "buyRatio", "sellRatio", "highPrice", "lowPrice", "bestBuyPrice", "bestBuyQuantity", "bestSellPrice", "bestSellQuantity", "firstTradedPrice", "lowAllowedPrice", "highAllowedPrice", "totalNumberOfSharesTraded"]
  , Bx = {
    0: aL,
    1: Lx,
    2: JF,
    3: iL,
    4: ZF,
    5: nL,
    6: eL,
    7: tL,
    8: sL,
    9: rL,
    10: oL
};
var zle = e => e.slice(-1) === "1" ? e.slice(0, -1) : e
  , Xle = e => {
    let t = e;
    return t = t.replace(/ /g, ""),
    t = t.replace(/‌/g, ""),
    t = t.replace(/آ/g, "\u0627"),
    t = t.replace(new RegExp("\u064A","g"), "\u06CC"),
    t = t.replace(new RegExp("\u0643","g"), "\u06A9"),
    t = t.replace(new RegExp("\u0637","g"), "\u062A"),
    t = t.replace(new RegExp("\u0647","g"), "\u062D"),
    t = t.replace(new RegExp("\u0630","g"), "\u0632"),
    t = t.replace(new RegExp("\u0638","g"), "\u0632"),
    t = t.replace(new RegExp("\u0636","g"), "\u0632"),
    t = t.replace(new RegExp("\u0635","g"), "\u0633"),
    t = t.replace(new RegExp("\u062B","g"), "\u0633"),
    t = t.replace(new RegExp("\u063A","g"), "\u0642"),
    t = t.replace(new RegExp("\u0621","g"), "\u0639"),
    t = t.replace(new RegExp("\u0626","g"), "\u0639"),
    t
}
  , Kle = e => {
    let t = e;
    return t = t.replace(/آ/g, "\u0627"),
    t = t.replace(new RegExp("\u064A","g"), "\u06CC"),
    t = t.replace(new RegExp("\u0643","g"), "\u06A9"),
    t = t.replace(new RegExp("\u0637","g"), "\u062A"),
    t = t.replace(new RegExp("\u0647","g"), "\u062D"),
    t = t.replace(new RegExp("\u0630","g"), "\u0632"),
    t = t.replace(new RegExp("\u0638","g"), "\u0632"),
    t = t.replace(new RegExp("\u0636","g"), "\u0632"),
    t = t.replace(new RegExp("\u0635","g"), "\u0633"),
    t = t.replace(new RegExp("\u062B","g"), "\u0633"),
    t = t.replace(new RegExp("\u063A","g"), "\u0642"),
    t = t.replace(new RegExp("\u0621","g"), "\u0639"),
    t = t.replace(new RegExp("\u0626","g"), "\u0639"),
    t
}
;
var x1 = {};
x1.version = "0.18.5";
var Zl = 1200
  , zu = 1252
  , cL = [874, 932, 936, 949, 950, 1250, 1251, 1252, 1253, 1254, 1255, 1256, 1257, 1258, 1e4]
  , lL = {
    0: 1252,
    1: 65001,
    2: 65001,
    77: 1e4,
    128: 932,
    129: 949,
    130: 1361,
    134: 936,
    136: 950,
    161: 1253,
    162: 1254,
    163: 1258,
    177: 1255,
    178: 1256,
    186: 1257,
    204: 1251,
    222: 874,
    238: 1250,
    255: 1252,
    69: 6969
}
  , Ew = function(e) {
    cL.indexOf(e) != -1 && (zu = lL[0] = e)
};
function uL() {
    Ew(1252)
}
var w1 = function(e) {
    Zl = e,
    Ew(e)
};
function hL() {
    w1(1200),
    uL()
}
function dL(e) {
    for (var t = [], n = 0; n < e.length >> 1; ++n)
        t[n] = String.fromCharCode(e.charCodeAt(2 * n + 1) + (e.charCodeAt(2 * n) << 8));
    return t.join("")
}
var $3 = function(t) {
    return String.fromCharCode(t)
}, Ux = function(t) {
    return String.fromCharCode(t)
}, ln;
var Qo = null
  , p1 = !0
  , Hc = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
function C1(e) {
    for (var t = "", n = 0, i = 0, r = 0, s = 0, o = 0, a = 0, c = 0, l = 0; l < e.length; )
        n = e.charCodeAt(l++),
        s = n >> 2,
        i = e.charCodeAt(l++),
        o = (n & 3) << 4 | i >> 4,
        r = e.charCodeAt(l++),
        a = (i & 15) << 2 | r >> 6,
        c = r & 63,
        isNaN(i) ? a = c = 64 : isNaN(r) && (c = 64),
        t += Hc.charAt(s) + Hc.charAt(o) + Hc.charAt(a) + Hc.charAt(c);
    return t
}
function Ba(e) {
    var t = ""
      , n = 0
      , i = 0
      , r = 0
      , s = 0
      , o = 0
      , a = 0
      , c = 0;
    e = e.replace(/[^\w\+\/\=]/g, "");
    for (var l = 0; l < e.length; )
        s = Hc.indexOf(e.charAt(l++)),
        o = Hc.indexOf(e.charAt(l++)),
        n = s << 2 | o >> 4,
        t += String.fromCharCode(n),
        a = Hc.indexOf(e.charAt(l++)),
        i = (o & 15) << 4 | a >> 2,
        a !== 64 && (t += String.fromCharCode(i)),
        c = Hc.indexOf(e.charAt(l++)),
        r = (a & 3) << 6 | c,
        c !== 64 && (t += String.fromCharCode(r));
    return t
}
var zt = function() {
    return typeof Buffer < "u" && typeof process < "u" && typeof process.versions < "u" && !!process.versions.node
}()
  , Ha = function() {
    if (typeof Buffer < "u") {
        var e = !Buffer.from;
        if (!e)
            try {
                Buffer.from("foo", "utf8")
            } catch {
                e = !0
            }
        return e ? function(t, n) {
            return n ? new Buffer(t,n) : new Buffer(t)
        }
        : Buffer.from.bind(Buffer)
    }
    return function() {}
}();
function t0(e) {
    return zt ? Buffer.alloc ? Buffer.alloc(e) : new Buffer(e) : typeof Uint8Array < "u" ? new Uint8Array(e) : new Array(e)
}
function Hx(e) {
    return zt ? Buffer.allocUnsafe ? Buffer.allocUnsafe(e) : new Buffer(e) : typeof Uint8Array < "u" ? new Uint8Array(e) : new Array(e)
}
var lo = function(t) {
    return zt ? Ha(t, "binary") : t.split("").map(function(n) {
        return n.charCodeAt(0) & 255
    })
};
function h2(e) {
    if (typeof ArrayBuffer > "u")
        return lo(e);
    for (var t = new ArrayBuffer(e.length), n = new Uint8Array(t), i = 0; i != e.length; ++i)
        n[i] = e.charCodeAt(i) & 255;
    return t
}
function P1(e) {
    if (Array.isArray(e))
        return e.map(function(i) {
            return String.fromCharCode(i)
        }).join("");
    for (var t = [], n = 0; n < e.length; ++n)
        t[n] = String.fromCharCode(e[n]);
    return t.join("")
}
function fL(e) {
    if (typeof Uint8Array > "u")
        throw new Error("Unsupported");
    return new Uint8Array(e)
}
var $i = zt ? function(e) {
    return Buffer.concat(e.map(function(t) {
        return Buffer.isBuffer(t) ? t : Ha(t)
    }))
}
: function(e) {
    if (typeof Uint8Array < "u") {
        var t = 0
          , n = 0;
        for (t = 0; t < e.length; ++t)
            n += e[t].length;
        var i = new Uint8Array(n)
          , r = 0;
        for (t = 0,
        n = 0; t < e.length; n += r,
        ++t)
            if (r = e[t].length,
            e[t]instanceof Uint8Array)
                i.set(e[t], n);
            else {
                if (typeof e[t] == "string")
                    throw "wtf";
                i.set(new Uint8Array(e[t]), n)
            }
        return i
    }
    return [].concat.apply([], e.map(function(s) {
        return Array.isArray(s) ? s : [].slice.call(s)
    }))
}
;
function pL(e) {
    for (var t = [], n = 0, i = e.length + 250, r = t0(e.length + 255), s = 0; s < e.length; ++s) {
        var o = e.charCodeAt(s);
        if (o < 128)
            r[n++] = o;
        else if (o < 2048)
            r[n++] = 192 | o >> 6 & 31,
            r[n++] = 128 | o & 63;
        else if (o >= 55296 && o < 57344) {
            o = (o & 1023) + 64;
            var a = e.charCodeAt(++s) & 1023;
            r[n++] = 240 | o >> 8 & 7,
            r[n++] = 128 | o >> 2 & 63,
            r[n++] = 128 | a >> 6 & 15 | (o & 3) << 4,
            r[n++] = 128 | a & 63
        } else
            r[n++] = 224 | o >> 12 & 15,
            r[n++] = 128 | o >> 6 & 63,
            r[n++] = 128 | o & 63;
        n > i && (t.push(r.slice(0, n)),
        n = 0,
        r = t0(65535),
        i = 65530)
    }
    return t.push(r.slice(0, n)),
    $i(t)
}
var Vu = /\u0000/g
  , W3 = /[\u0001-\u0006]/g;
function $u(e) {
    for (var t = "", n = e.length - 1; n >= 0; )
        t += e.charAt(n--);
    return t
}
function uo(e, t) {
    var n = "" + e;
    return n.length >= t ? n : Ln("0", t - n.length) + n
}
function x7(e, t) {
    var n = "" + e;
    return n.length >= t ? n : Ln(" ", t - n.length) + n
}
function J3(e, t) {
    var n = "" + e;
    return n.length >= t ? n : n + Ln(" ", t - n.length)
}
function gL(e, t) {
    var n = "" + Math.round(e);
    return n.length >= t ? n : Ln("0", t - n.length) + n
}
function mL(e, t) {
    var n = "" + e;
    return n.length >= t ? n : Ln("0", t - n.length) + n
}
var Gx = Math.pow(2, 32);
function Lu(e, t) {
    if (e > Gx || e < -Gx)
        return gL(e, t);
    var n = Math.round(e);
    return mL(n, t)
}
function Z3(e, t) {
    return t = t || 0,
    e.length >= 7 + t && (e.charCodeAt(t) | 32) === 103 && (e.charCodeAt(t + 1) | 32) === 101 && (e.charCodeAt(t + 2) | 32) === 110 && (e.charCodeAt(t + 3) | 32) === 101 && (e.charCodeAt(t + 4) | 32) === 114 && (e.charCodeAt(t + 5) | 32) === 97 && (e.charCodeAt(t + 6) | 32) === 108
}
var Vx = [["Sun", "Sunday"], ["Mon", "Monday"], ["Tue", "Tuesday"], ["Wed", "Wednesday"], ["Thu", "Thursday"], ["Fri", "Friday"], ["Sat", "Saturday"]]
  , u7 = [["J", "Jan", "January"], ["F", "Feb", "February"], ["M", "Mar", "March"], ["A", "Apr", "April"], ["M", "May", "May"], ["J", "Jun", "June"], ["J", "Jul", "July"], ["A", "Aug", "August"], ["S", "Sep", "September"], ["O", "Oct", "October"], ["N", "Nov", "November"], ["D", "Dec", "December"]];
function vL(e) {
    return e || (e = {}),
    e[0] = "General",
    e[1] = "0",
    e[2] = "0.00",
    e[3] = "#,##0",
    e[4] = "#,##0.00",
    e[9] = "0%",
    e[10] = "0.00%",
    e[11] = "0.00E+00",
    e[12] = "# ?/?",
    e[13] = "# ??/??",
    e[14] = "m/d/yy",
    e[15] = "d-mmm-yy",
    e[16] = "d-mmm",
    e[17] = "mmm-yy",
    e[18] = "h:mm AM/PM",
    e[19] = "h:mm:ss AM/PM",
    e[20] = "h:mm",
    e[21] = "h:mm:ss",
    e[22] = "m/d/yy h:mm",
    e[37] = "#,##0 ;(#,##0)",
    e[38] = "#,##0 ;[Red](#,##0)",
    e[39] = "#,##0.00;(#,##0.00)",
    e[40] = "#,##0.00;[Red](#,##0.00)",
    e[45] = "mm:ss",
    e[46] = "[h]:mm:ss",
    e[47] = "mmss.0",
    e[48] = "##0.0E+0",
    e[49] = "@",
    e[56] = '"\u4E0A\u5348/\u4E0B\u5348 "hh"\u6642"mm"\u5206"ss"\u79D2 "',
    e
}
var Bn = {
    0: "General",
    1: "0",
    2: "0.00",
    3: "#,##0",
    4: "#,##0.00",
    9: "0%",
    10: "0.00%",
    11: "0.00E+00",
    12: "# ?/?",
    13: "# ??/??",
    14: "m/d/yy",
    15: "d-mmm-yy",
    16: "d-mmm",
    17: "mmm-yy",
    18: "h:mm AM/PM",
    19: "h:mm:ss AM/PM",
    20: "h:mm",
    21: "h:mm:ss",
    22: "m/d/yy h:mm",
    37: "#,##0 ;(#,##0)",
    38: "#,##0 ;[Red](#,##0)",
    39: "#,##0.00;(#,##0.00)",
    40: "#,##0.00;[Red](#,##0.00)",
    45: "mm:ss",
    46: "[h]:mm:ss",
    47: "mmss.0",
    48: "##0.0E+0",
    49: "@",
    56: '"\u4E0A\u5348/\u4E0B\u5348 "hh"\u6642"mm"\u5206"ss"\u79D2 "'
}
  , $x = {
    5: 37,
    6: 38,
    7: 39,
    8: 40,
    23: 0,
    24: 0,
    25: 0,
    26: 0,
    27: 14,
    28: 14,
    29: 14,
    30: 14,
    31: 14,
    50: 14,
    51: 14,
    52: 14,
    53: 14,
    54: 14,
    55: 14,
    56: 14,
    57: 14,
    58: 14,
    59: 1,
    60: 2,
    61: 3,
    62: 4,
    67: 9,
    68: 10,
    69: 12,
    70: 13,
    71: 14,
    72: 14,
    73: 15,
    74: 16,
    75: 17,
    76: 20,
    77: 21,
    78: 22,
    79: 45,
    80: 46,
    81: 47,
    82: 0
}
  , _L = {
    5: '"$"#,##0_);\\("$"#,##0\\)',
    63: '"$"#,##0_);\\("$"#,##0\\)',
    6: '"$"#,##0_);[Red]\\("$"#,##0\\)',
    64: '"$"#,##0_);[Red]\\("$"#,##0\\)',
    7: '"$"#,##0.00_);\\("$"#,##0.00\\)',
    65: '"$"#,##0.00_);\\("$"#,##0.00\\)',
    8: '"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',
    66: '"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',
    41: '_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',
    42: '_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',
    43: '_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',
    44: '_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'
};
function e2(e, t, n) {
    for (var i = e < 0 ? -1 : 1, r = e * i, s = 0, o = 1, a = 0, c = 1, l = 0, u = 0, h = Math.floor(r); l < t && (h = Math.floor(r),
    a = h * o + s,
    u = h * l + c,
    !(r - h < 5e-8)); )
        r = 1 / (r - h),
        s = o,
        o = a,
        c = l,
        l = u;
    if (u > t && (l > t ? (u = c,
    a = s) : (u = l,
    a = o)),
    !n)
        return [0, i * a, u];
    var d = Math.floor(i * a / u);
    return [d, i * a - d * u, u]
}
function j3(e, t, n) {
    if (e > 2958465 || e < 0)
        return null;
    var i = e | 0
      , r = Math.floor(86400 * (e - i))
      , s = 0
      , o = []
      , a = {
        D: i,
        T: r,
        u: 86400 * (e - i) - r,
        y: 0,
        m: 0,
        d: 0,
        H: 0,
        M: 0,
        S: 0,
        q: 0
    };
    if (Math.abs(a.u) < 1e-6 && (a.u = 0),
    t && t.date1904 && (i += 1462),
    a.u > .9999 && (a.u = 0,
    ++r == 86400 && (a.T = r = 0,
    ++i,
    ++a.D)),
    i === 60)
        o = n ? [1317, 10, 29] : [1900, 2, 29],
        s = 3;
    else if (i === 0)
        o = n ? [1317, 8, 29] : [1900, 1, 0],
        s = 6;
    else {
        i > 60 && --i;
        var c = new Date(1900,0,1);
        c.setDate(c.getDate() + i - 1),
        o = [c.getFullYear(), c.getMonth() + 1, c.getDate()],
        s = c.getDay(),
        i < 60 && (s = (s + 6) % 7),
        n && (s = EL(c, o))
    }
    return a.y = o[0],
    a.m = o[1],
    a.d = o[2],
    a.S = r % 60,
    r = Math.floor(r / 60),
    a.M = r % 60,
    r = Math.floor(r / 60),
    a.H = r,
    a.q = s,
    a
}
var Tw = new Date(1899,11,31,0,0,0)
  , yL = Tw.getTime()
  , SL = new Date(1900,2,1,0,0,0);
function Ow(e, t) {
    var n = e.getTime();
    return t ? n -= 1461 * 24 * 60 * 60 * 1e3 : e >= SL && (n += 24 * 60 * 60 * 1e3),
    (n - (yL + (e.getTimezoneOffset() - Tw.getTimezoneOffset()) * 6e4)) / (24 * 60 * 60 * 1e3)
}
function w7(e) {
    return e.indexOf(".") == -1 ? e : e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/, "$1")
}
function bL(e) {
    return e.indexOf("E") == -1 ? e : e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/, "$1E").replace(/(E[+-])(\d)$/, "$10$2")
}
function xL(e) {
    var t = e < 0 ? 12 : 11
      , n = w7(e.toFixed(12));
    return n.length <= t || (n = e.toPrecision(10),
    n.length <= t) ? n : e.toExponential(5)
}
function wL(e) {
    var t = w7(e.toFixed(11));
    return t.length > (e < 0 ? 12 : 11) || t === "0" || t === "-0" ? e.toPrecision(6) : t
}
function CL(e) {
    var t = Math.floor(Math.log(Math.abs(e)) * Math.LOG10E), n;
    return t >= -4 && t <= -1 ? n = e.toPrecision(10 + t) : Math.abs(t) <= 9 ? n = xL(e) : t === 10 ? n = e.toFixed(10).substr(0, 12) : n = wL(e),
    w7(bL(n.toUpperCase()))
}
function _7(e, t) {
    switch (typeof e) {
    case "string":
        return e;
    case "boolean":
        return e ? "TRUE" : "FALSE";
    case "number":
        return (e | 0) === e ? e.toString(10) : CL(e);
    case "undefined":
        return "";
    case "object":
        if (e == null)
            return "";
        if (e instanceof Date)
            return Vc(14, Ow(e, t && t.date1904), t)
    }
    throw new Error("unsupported value in General format: " + e)
}
function EL(e, t) {
    t[0] -= 581;
    var n = e.getDay();
    return e < 60 && (n = (n + 6) % 7),
    n
}
function TL(e, t, n, i) {
    var r = "", s = 0, o = 0, a = n.y, c, l = 0;
    switch (e) {
    case 98:
        a = n.y + 543;
    case 121:
        switch (t.length) {
        case 1:
        case 2:
            c = a % 100,
            l = 2;
            break;
        default:
            c = a % 1e4,
            l = 4;
            break
        }
        break;
    case 109:
        switch (t.length) {
        case 1:
        case 2:
            c = n.m,
            l = t.length;
            break;
        case 3:
            return u7[n.m - 1][1];
        case 5:
            return u7[n.m - 1][0];
        default:
            return u7[n.m - 1][2]
        }
        break;
    case 100:
        switch (t.length) {
        case 1:
        case 2:
            c = n.d,
            l = t.length;
            break;
        case 3:
            return Vx[n.q][0];
        default:
            return Vx[n.q][1]
        }
        break;
    case 104:
        switch (t.length) {
        case 1:
        case 2:
            c = 1 + (n.H + 11) % 12,
            l = t.length;
            break;
        default:
            throw "bad hour format: " + t
        }
        break;
    case 72:
        switch (t.length) {
        case 1:
        case 2:
            c = n.H,
            l = t.length;
            break;
        default:
            throw "bad hour format: " + t
        }
        break;
    case 77:
        switch (t.length) {
        case 1:
        case 2:
            c = n.M,
            l = t.length;
            break;
        default:
            throw "bad minute format: " + t
        }
        break;
    case 115:
        if (t != "s" && t != "ss" && t != ".0" && t != ".00" && t != ".000")
            throw "bad second format: " + t;
        return n.u === 0 && (t == "s" || t == "ss") ? uo(n.S, t.length) : (i >= 2 ? o = i === 3 ? 1e3 : 100 : o = i === 1 ? 10 : 1,
        s = Math.round(o * (n.S + n.u)),
        s >= 60 * o && (s = 0),
        t === "s" ? s === 0 ? "0" : "" + s / o : (r = uo(s, 2 + i),
        t === "ss" ? r.substr(0, 2) : "." + r.substr(2, t.length - 1)));
    case 90:
        switch (t) {
        case "[h]":
        case "[hh]":
            c = n.D * 24 + n.H;
            break;
        case "[m]":
        case "[mm]":
            c = (n.D * 24 + n.H) * 60 + n.M;
            break;
        case "[s]":
        case "[ss]":
            c = ((n.D * 24 + n.H) * 60 + n.M) * 60 + Math.round(n.S + n.u);
            break;
        default:
            throw "bad abstime format: " + t
        }
        l = t.length === 3 ? 1 : 2;
        break;
    case 101:
        c = a,
        l = 1;
        break
    }
    var u = l > 0 ? uo(c, l) : "";
    return u
}
function Gc(e) {
    var t = 3;
    if (e.length <= t)
        return e;
    for (var n = e.length % t, i = e.substr(0, n); n != e.length; n += t)
        i += (i.length > 0 ? "," : "") + e.substr(n, t);
    return i
}
var Mw = /%/g;
function OL(e, t, n) {
    var i = t.replace(Mw, "")
      , r = t.length - i.length;
    return Na(e, i, n * Math.pow(10, 2 * r)) + Ln("%", r)
}
function ML(e, t, n) {
    for (var i = t.length - 1; t.charCodeAt(i - 1) === 44; )
        --i;
    return Na(e, t.substr(0, i), n / Math.pow(10, 3 * (t.length - i)))
}
function Pw(e, t) {
    var n, i = e.indexOf("E") - e.indexOf(".") - 1;
    if (e.match(/^#+0.0E\+0$/)) {
        if (t == 0)
            return "0.0E+0";
        if (t < 0)
            return "-" + Pw(e, -t);
        var r = e.indexOf(".");
        r === -1 && (r = e.indexOf("E"));
        var s = Math.floor(Math.log(t) * Math.LOG10E) % r;
        if (s < 0 && (s += r),
        n = (t / Math.pow(10, s)).toPrecision(i + 1 + (r + s) % r),
        n.indexOf("e") === -1) {
            var o = Math.floor(Math.log(t) * Math.LOG10E);
            for (n.indexOf(".") === -1 ? n = n.charAt(0) + "." + n.substr(1) + "E+" + (o - n.length + s) : n += "E+" + (o - s); n.substr(0, 2) === "0."; )
                n = n.charAt(0) + n.substr(2, r) + "." + n.substr(2 + r),
                n = n.replace(/^0+([1-9])/, "$1").replace(/^0+\./, "0.");
            n = n.replace(/\+-/, "-")
        }
        n = n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/, function(a, c, l, u) {
            return c + l + u.substr(0, (r + s) % r) + "." + u.substr(s) + "E"
        })
    } else
        n = t.toExponential(i);
    return e.match(/E\+00$/) && n.match(/e[+-]\d$/) && (n = n.substr(0, n.length - 1) + "0" + n.charAt(n.length - 1)),
    e.match(/E\-/) && n.match(/e\+/) && (n = n.replace(/e\+/, "e")),
    n.replace("e", "E")
}
var kw = /# (\?+)( ?)\/( ?)(\d+)/;
function PL(e, t, n) {
    var i = parseInt(e[4], 10)
      , r = Math.round(t * i)
      , s = Math.floor(r / i)
      , o = r - s * i
      , a = i;
    return n + (s === 0 ? "" : "" + s) + " " + (o === 0 ? Ln(" ", e[1].length + 1 + e[4].length) : x7(o, e[1].length) + e[2] + "/" + e[3] + uo(a, e[4].length))
}
function kL(e, t, n) {
    return n + (t === 0 ? "" : "" + t) + Ln(" ", e[1].length + 2 + e[4].length)
}
var Aw = /^#*0*\.([0#]+)/
  , Iw = /\).*[0#]/
  , Rw = /\(###\) ###\\?-####/;
function Tr(e) {
    for (var t = "", n, i = 0; i != e.length; ++i)
        switch (n = e.charCodeAt(i)) {
        case 35:
            break;
        case 63:
            t += " ";
            break;
        case 48:
            t += "0";
            break;
        default:
            t += String.fromCharCode(n)
        }
    return t
}
function Wx(e, t) {
    var n = Math.pow(10, t);
    return "" + Math.round(e * n) / n
}
function jx(e, t) {
    var n = e - Math.floor(e)
      , i = Math.pow(10, t);
    return t < ("" + Math.round(n * i)).length ? 0 : Math.round(n * i)
}
function AL(e, t) {
    return t < ("" + Math.round((e - Math.floor(e)) * Math.pow(10, t))).length ? 1 : 0
}
function IL(e) {
    return e < 2147483647 && e > -2147483648 ? "" + (e >= 0 ? e | 0 : e - 1 | 0) : "" + Math.floor(e)
}
function Ds(e, t, n) {
    if (e.charCodeAt(0) === 40 && !t.match(Iw)) {
        var i = t.replace(/\( */, "").replace(/ \)/, "").replace(/\)/, "");
        return n >= 0 ? Ds("n", i, n) : "(" + Ds("n", i, -n) + ")"
    }
    if (t.charCodeAt(t.length - 1) === 44)
        return ML(e, t, n);
    if (t.indexOf("%") !== -1)
        return OL(e, t, n);
    if (t.indexOf("E") !== -1)
        return Pw(t, n);
    if (t.charCodeAt(0) === 36)
        return "$" + Ds(e, t.substr(t.charAt(1) == " " ? 2 : 1), n);
    var r, s, o, a, c = Math.abs(n), l = n < 0 ? "-" : "";
    if (t.match(/^00+$/))
        return l + Lu(c, t.length);
    if (t.match(/^[#?]+$/))
        return r = Lu(n, 0),
        r === "0" && (r = ""),
        r.length > t.length ? r : Tr(t.substr(0, t.length - r.length)) + r;
    if (s = t.match(kw))
        return PL(s, c, l);
    if (t.match(/^#+0+$/))
        return l + Lu(c, t.length - t.indexOf("0"));
    if (s = t.match(Aw))
        return r = Wx(n, s[1].length).replace(/^([^\.]+)$/, "$1." + Tr(s[1])).replace(/\.$/, "." + Tr(s[1])).replace(/\.(\d*)$/, function(g, p) {
            return "." + p + Ln("0", Tr(s[1]).length - p.length)
        }),
        t.indexOf("0.") !== -1 ? r : r.replace(/^0\./, ".");
    if (t = t.replace(/^#+([0.])/, "$1"),
    s = t.match(/^(0*)\.(#*)$/))
        return l + Wx(c, s[2].length).replace(/\.(\d*[1-9])0*$/, ".$1").replace(/^(-?\d*)$/, "$1.").replace(/^0\./, s[1].length ? "0." : ".");
    if (s = t.match(/^#{1,3},##0(\.?)$/))
        return l + Gc(Lu(c, 0));
    if (s = t.match(/^#,##0\.([#0]*0)$/))
        return n < 0 ? "-" + Ds(e, t, -n) : Gc("" + (Math.floor(n) + AL(n, s[1].length))) + "." + uo(jx(n, s[1].length), s[1].length);
    if (s = t.match(/^#,#*,#0/))
        return Ds(e, t.replace(/^#,#*,/, ""), n);
    if (s = t.match(/^([0#]+)(\\?-([0#]+))+$/))
        return r = $u(Ds(e, t.replace(/[\\-]/g, ""), n)),
        o = 0,
        $u($u(t.replace(/\\/g, "")).replace(/[0#]/g, function(g) {
            return o < r.length ? r.charAt(o++) : g === "0" ? "0" : ""
        }));
    if (t.match(Rw))
        return r = Ds(e, "##########", n),
        "(" + r.substr(0, 3) + ") " + r.substr(3, 3) + "-" + r.substr(6);
    var u = "";
    if (s = t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))
        return o = Math.min(s[4].length, 7),
        a = e2(c, Math.pow(10, o) - 1, !1),
        r = "" + l,
        u = Na("n", s[1], a[1]),
        u.charAt(u.length - 1) == " " && (u = u.substr(0, u.length - 1) + "0"),
        r += u + s[2] + "/" + s[3],
        u = J3(a[2], o),
        u.length < s[4].length && (u = Tr(s[4].substr(s[4].length - u.length)) + u),
        r += u,
        r;
    if (s = t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))
        return o = Math.min(Math.max(s[1].length, s[4].length), 7),
        a = e2(c, Math.pow(10, o) - 1, !0),
        l + (a[0] || (a[1] ? "" : "0")) + " " + (a[1] ? x7(a[1], o) + s[2] + "/" + s[3] + J3(a[2], o) : Ln(" ", 2 * o + 1 + s[2].length + s[3].length));
    if (s = t.match(/^[#0?]+$/))
        return r = Lu(n, 0),
        t.length <= r.length ? r : Tr(t.substr(0, t.length - r.length)) + r;
    if (s = t.match(/^([#0?]+)\.([#0]+)$/)) {
        r = "" + n.toFixed(Math.min(s[2].length, 10)).replace(/([^0])0+$/, "$1"),
        o = r.indexOf(".");
        var h = t.indexOf(".") - o
          , d = t.length - r.length - h;
        return Tr(t.substr(0, h) + r + t.substr(t.length - d))
    }
    if (s = t.match(/^00,000\.([#0]*0)$/))
        return o = jx(n, s[1].length),
        n < 0 ? "-" + Ds(e, t, -n) : Gc(IL(n)).replace(/^\d,\d{3}$/, "0$&").replace(/^\d*$/, function(g) {
            return "00," + (g.length < 3 ? uo(0, 3 - g.length) : "") + g
        }) + "." + uo(o, s[1].length);
    switch (t) {
    case "###,##0.00":
        return Ds(e, "#,##0.00", n);
    case "###,###":
    case "##,###":
    case "#,###":
        var f = Gc(Lu(c, 0));
        return f !== "0" ? l + f : "";
    case "###,###.00":
        return Ds(e, "###,##0.00", n).replace(/^0\./, ".");
    case "#,###.00":
        return Ds(e, "#,##0.00", n).replace(/^0\./, ".");
    default:
    }
    throw new Error("unsupported format |" + t + "|")
}
function RL(e, t, n) {
    for (var i = t.length - 1; t.charCodeAt(i - 1) === 44; )
        --i;
    return Na(e, t.substr(0, i), n / Math.pow(10, 3 * (t.length - i)))
}
function DL(e, t, n) {
    var i = t.replace(Mw, "")
      , r = t.length - i.length;
    return Na(e, i, n * Math.pow(10, 2 * r)) + Ln("%", r)
}
function Dw(e, t) {
    var n, i = e.indexOf("E") - e.indexOf(".") - 1;
    if (e.match(/^#+0.0E\+0$/)) {
        if (t == 0)
            return "0.0E+0";
        if (t < 0)
            return "-" + Dw(e, -t);
        var r = e.indexOf(".");
        r === -1 && (r = e.indexOf("E"));
        var s = Math.floor(Math.log(t) * Math.LOG10E) % r;
        if (s < 0 && (s += r),
        n = (t / Math.pow(10, s)).toPrecision(i + 1 + (r + s) % r),
        !n.match(/[Ee]/)) {
            var o = Math.floor(Math.log(t) * Math.LOG10E);
            n.indexOf(".") === -1 ? n = n.charAt(0) + "." + n.substr(1) + "E+" + (o - n.length + s) : n += "E+" + (o - s),
            n = n.replace(/\+-/, "-")
        }
        n = n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/, function(a, c, l, u) {
            return c + l + u.substr(0, (r + s) % r) + "." + u.substr(s) + "E"
        })
    } else
        n = t.toExponential(i);
    return e.match(/E\+00$/) && n.match(/e[+-]\d$/) && (n = n.substr(0, n.length - 1) + "0" + n.charAt(n.length - 1)),
    e.match(/E\-/) && n.match(/e\+/) && (n = n.replace(/e\+/, "e")),
    n.replace("e", "E")
}
function Ko(e, t, n) {
    if (e.charCodeAt(0) === 40 && !t.match(Iw)) {
        var i = t.replace(/\( */, "").replace(/ \)/, "").replace(/\)/, "");
        return n >= 0 ? Ko("n", i, n) : "(" + Ko("n", i, -n) + ")"
    }
    if (t.charCodeAt(t.length - 1) === 44)
        return RL(e, t, n);
    if (t.indexOf("%") !== -1)
        return DL(e, t, n);
    if (t.indexOf("E") !== -1)
        return Dw(t, n);
    if (t.charCodeAt(0) === 36)
        return "$" + Ko(e, t.substr(t.charAt(1) == " " ? 2 : 1), n);
    var r, s, o, a, c = Math.abs(n), l = n < 0 ? "-" : "";
    if (t.match(/^00+$/))
        return l + uo(c, t.length);
    if (t.match(/^[#?]+$/))
        return r = "" + n,
        n === 0 && (r = ""),
        r.length > t.length ? r : Tr(t.substr(0, t.length - r.length)) + r;
    if (s = t.match(kw))
        return kL(s, c, l);
    if (t.match(/^#+0+$/))
        return l + uo(c, t.length - t.indexOf("0"));
    if (s = t.match(Aw))
        return r = ("" + n).replace(/^([^\.]+)$/, "$1." + Tr(s[1])).replace(/\.$/, "." + Tr(s[1])),
        r = r.replace(/\.(\d*)$/, function(g, p) {
            return "." + p + Ln("0", Tr(s[1]).length - p.length)
        }),
        t.indexOf("0.") !== -1 ? r : r.replace(/^0\./, ".");
    if (t = t.replace(/^#+([0.])/, "$1"),
    s = t.match(/^(0*)\.(#*)$/))
        return l + ("" + c).replace(/\.(\d*[1-9])0*$/, ".$1").replace(/^(-?\d*)$/, "$1.").replace(/^0\./, s[1].length ? "0." : ".");
    if (s = t.match(/^#{1,3},##0(\.?)$/))
        return l + Gc("" + c);
    if (s = t.match(/^#,##0\.([#0]*0)$/))
        return n < 0 ? "-" + Ko(e, t, -n) : Gc("" + n) + "." + Ln("0", s[1].length);
    if (s = t.match(/^#,#*,#0/))
        return Ko(e, t.replace(/^#,#*,/, ""), n);
    if (s = t.match(/^([0#]+)(\\?-([0#]+))+$/))
        return r = $u(Ko(e, t.replace(/[\\-]/g, ""), n)),
        o = 0,
        $u($u(t.replace(/\\/g, "")).replace(/[0#]/g, function(g) {
            return o < r.length ? r.charAt(o++) : g === "0" ? "0" : ""
        }));
    if (t.match(Rw))
        return r = Ko(e, "##########", n),
        "(" + r.substr(0, 3) + ") " + r.substr(3, 3) + "-" + r.substr(6);
    var u = "";
    if (s = t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))
        return o = Math.min(s[4].length, 7),
        a = e2(c, Math.pow(10, o) - 1, !1),
        r = "" + l,
        u = Na("n", s[1], a[1]),
        u.charAt(u.length - 1) == " " && (u = u.substr(0, u.length - 1) + "0"),
        r += u + s[2] + "/" + s[3],
        u = J3(a[2], o),
        u.length < s[4].length && (u = Tr(s[4].substr(s[4].length - u.length)) + u),
        r += u,
        r;
    if (s = t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))
        return o = Math.min(Math.max(s[1].length, s[4].length), 7),
        a = e2(c, Math.pow(10, o) - 1, !0),
        l + (a[0] || (a[1] ? "" : "0")) + " " + (a[1] ? x7(a[1], o) + s[2] + "/" + s[3] + J3(a[2], o) : Ln(" ", 2 * o + 1 + s[2].length + s[3].length));
    if (s = t.match(/^[#0?]+$/))
        return r = "" + n,
        t.length <= r.length ? r : Tr(t.substr(0, t.length - r.length)) + r;
    if (s = t.match(/^([#0]+)\.([#0]+)$/)) {
        r = "" + n.toFixed(Math.min(s[2].length, 10)).replace(/([^0])0+$/, "$1"),
        o = r.indexOf(".");
        var h = t.indexOf(".") - o
          , d = t.length - r.length - h;
        return Tr(t.substr(0, h) + r + t.substr(t.length - d))
    }
    if (s = t.match(/^00,000\.([#0]*0)$/))
        return n < 0 ? "-" + Ko(e, t, -n) : Gc("" + n).replace(/^\d,\d{3}$/, "0$&").replace(/^\d*$/, function(g) {
            return "00," + (g.length < 3 ? uo(0, 3 - g.length) : "") + g
        }) + "." + uo(0, s[1].length);
    switch (t) {
    case "###,###":
    case "##,###":
    case "#,###":
        var f = Gc("" + c);
        return f !== "0" ? l + f : "";
    default:
        if (t.match(/\.[0#?]*$/))
            return Ko(e, t.slice(0, t.lastIndexOf(".")), n) + Tr(t.slice(t.lastIndexOf(".")))
    }
    throw new Error("unsupported format |" + t + "|")
}
function Na(e, t, n) {
    return (n | 0) === n ? Ko(e, t, n) : Ds(e, t, n)
}
function NL(e) {
    for (var t = [], n = !1, i = 0, r = 0; i < e.length; ++i)
        switch (e.charCodeAt(i)) {
        case 34:
            n = !n;
            break;
        case 95:
        case 42:
        case 92:
            ++i;
            break;
        case 59:
            t[t.length] = e.substr(r, i - r),
            r = i + 1
        }
    if (t[t.length] = e.substr(r),
    n === !0)
        throw new Error("Format |" + e + "| unterminated string ");
    return t
}
var Nw = /\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;
function Fw(e) {
    for (var t = 0, n = "", i = ""; t < e.length; )
        switch (n = e.charAt(t)) {
        case "G":
            Z3(e, t) && (t += 6),
            t++;
            break;
        case '"':
            for (; e.charCodeAt(++t) !== 34 && t < e.length; )
                ;
            ++t;
            break;
        case "\\":
            t += 2;
            break;
        case "_":
            t += 2;
            break;
        case "@":
            ++t;
            break;
        case "B":
        case "b":
            if (e.charAt(t + 1) === "1" || e.charAt(t + 1) === "2")
                return !0;
        case "M":
        case "D":
        case "Y":
        case "H":
        case "S":
        case "E":
        case "m":
        case "d":
        case "y":
        case "h":
        case "s":
        case "e":
        case "g":
            return !0;
        case "A":
        case "a":
        case "\u4E0A":
            if (e.substr(t, 3).toUpperCase() === "A/P" || e.substr(t, 5).toUpperCase() === "AM/PM" || e.substr(t, 5).toUpperCase() === "\u4E0A\u5348/\u4E0B\u5348")
                return !0;
            ++t;
            break;
        case "[":
            for (i = n; e.charAt(t++) !== "]" && t < e.length; )
                i += e.charAt(t);
            if (i.match(Nw))
                return !0;
            break;
        case ".":
        case "0":
        case "#":
            for (; t < e.length && ("0#?.,E+-%".indexOf(n = e.charAt(++t)) > -1 || n == "\\" && e.charAt(t + 1) == "-" && "0#".indexOf(e.charAt(t + 2)) > -1); )
                ;
            break;
        case "?":
            for (; e.charAt(++t) === n; )
                ;
            break;
        case "*":
            ++t,
            (e.charAt(t) == " " || e.charAt(t) == "*") && ++t;
            break;
        case "(":
        case ")":
            ++t;
            break;
        case "1":
        case "2":
        case "3":
        case "4":
        case "5":
        case "6":
        case "7":
        case "8":
        case "9":
            for (; t < e.length && "0123456789".indexOf(e.charAt(++t)) > -1; )
                ;
            break;
        case " ":
            ++t;
            break;
        default:
            ++t;
            break
        }
    return !1
}
function FL(e, t, n, i) {
    for (var r = [], s = "", o = 0, a = "", c = "t", l, u, h, d = "H"; o < e.length; )
        switch (a = e.charAt(o)) {
        case "G":
            if (!Z3(e, o))
                throw new Error("unrecognized character " + a + " in " + e);
            r[r.length] = {
                t: "G",
                v: "General"
            },
            o += 7;
            break;
        case '"':
            for (s = ""; (h = e.charCodeAt(++o)) !== 34 && o < e.length; )
                s += String.fromCharCode(h);
            r[r.length] = {
                t: "t",
                v: s
            },
            ++o;
            break;
        case "\\":
            var f = e.charAt(++o)
              , g = f === "(" || f === ")" ? f : "t";
            r[r.length] = {
                t: g,
                v: f
            },
            ++o;
            break;
        case "_":
            r[r.length] = {
                t: "t",
                v: " "
            },
            o += 2;
            break;
        case "@":
            r[r.length] = {
                t: "T",
                v: t
            },
            ++o;
            break;
        case "B":
        case "b":
            if (e.charAt(o + 1) === "1" || e.charAt(o + 1) === "2") {
                if (l == null && (l = j3(t, n, e.charAt(o + 1) === "2"),
                l == null))
                    return "";
                r[r.length] = {
                    t: "X",
                    v: e.substr(o, 2)
                },
                c = a,
                o += 2;
                break
            }
        case "M":
        case "D":
        case "Y":
        case "H":
        case "S":
        case "E":
            a = a.toLowerCase();
        case "m":
        case "d":
        case "y":
        case "h":
        case "s":
        case "e":
        case "g":
            if (t < 0 || l == null && (l = j3(t, n),
            l == null))
                return "";
            for (s = a; ++o < e.length && e.charAt(o).toLowerCase() === a; )
                s += a;
            a === "m" && c.toLowerCase() === "h" && (a = "M"),
            a === "h" && (a = d),
            r[r.length] = {
                t: a,
                v: s
            },
            c = a;
            break;
        case "A":
        case "a":
        case "\u4E0A":
            var p = {
                t: a,
                v: a
            };
            if (l == null && (l = j3(t, n)),
            e.substr(o, 3).toUpperCase() === "A/P" ? (l != null && (p.v = l.H >= 12 ? "P" : "A"),
            p.t = "T",
            d = "h",
            o += 3) : e.substr(o, 5).toUpperCase() === "AM/PM" ? (l != null && (p.v = l.H >= 12 ? "PM" : "AM"),
            p.t = "T",
            o += 5,
            d = "h") : e.substr(o, 5).toUpperCase() === "\u4E0A\u5348/\u4E0B\u5348" ? (l != null && (p.v = l.H >= 12 ? "\u4E0B\u5348" : "\u4E0A\u5348"),
            p.t = "T",
            o += 5,
            d = "h") : (p.t = "t",
            ++o),
            l == null && p.t === "T")
                return "";
            r[r.length] = p,
            c = a;
            break;
        case "[":
            for (s = a; e.charAt(o++) !== "]" && o < e.length; )
                s += e.charAt(o);
            if (s.slice(-1) !== "]")
                throw 'unterminated "[" block: |' + s + "|";
            if (s.match(Nw)) {
                if (l == null && (l = j3(t, n),
                l == null))
                    return "";
                r[r.length] = {
                    t: "Z",
                    v: s.toLowerCase()
                },
                c = s.charAt(1)
            } else
                s.indexOf("$") > -1 && (s = (s.match(/\$([^-\[\]]*)/) || [])[1] || "$",
                Fw(e) || (r[r.length] = {
                    t: "t",
                    v: s
                }));
            break;
        case ".":
            if (l != null) {
                for (s = a; ++o < e.length && (a = e.charAt(o)) === "0"; )
                    s += a;
                r[r.length] = {
                    t: "s",
                    v: s
                };
                break
            }
        case "0":
        case "#":
            for (s = a; ++o < e.length && "0#?.,E+-%".indexOf(a = e.charAt(o)) > -1; )
                s += a;
            r[r.length] = {
                t: "n",
                v: s
            };
            break;
        case "?":
            for (s = a; e.charAt(++o) === a; )
                s += a;
            r[r.length] = {
                t: a,
                v: s
            },
            c = a;
            break;
        case "*":
            ++o,
            (e.charAt(o) == " " || e.charAt(o) == "*") && ++o;
            break;
        case "(":
        case ")":
            r[r.length] = {
                t: i === 1 ? "t" : a,
                v: a
            },
            ++o;
            break;
        case "1":
        case "2":
        case "3":
        case "4":
        case "5":
        case "6":
        case "7":
        case "8":
        case "9":
            for (s = a; o < e.length && "0123456789".indexOf(e.charAt(++o)) > -1; )
                s += e.charAt(o);
            r[r.length] = {
                t: "D",
                v: s
            };
            break;
        case " ":
            r[r.length] = {
                t: a,
                v: a
            },
            ++o;
            break;
        case "$":
            r[r.length] = {
                t: "t",
                v: "$"
            },
            ++o;
            break;
        default:
            if (",$-+/():!^&'~{}<>=\u20ACacfijklopqrtuvwxzP".indexOf(a) === -1)
                throw new Error("unrecognized character " + a + " in " + e);
            r[r.length] = {
                t: "t",
                v: a
            },
            ++o;
            break
        }
    var v = 0, S = 0, x;
    for (o = r.length - 1,
    c = "t"; o >= 0; --o)
        switch (r[o].t) {
        case "h":
        case "H":
            r[o].t = d,
            c = "h",
            v < 1 && (v = 1);
            break;
        case "s":
            (x = r[o].v.match(/\.0+$/)) && (S = Math.max(S, x[0].length - 1)),
            v < 3 && (v = 3);
        case "d":
        case "y":
        case "M":
        case "e":
            c = r[o].t;
            break;
        case "m":
            c === "s" && (r[o].t = "M",
            v < 2 && (v = 2));
            break;
        case "X":
            break;
        case "Z":
            v < 1 && r[o].v.match(/[Hh]/) && (v = 1),
            v < 2 && r[o].v.match(/[Mm]/) && (v = 2),
            v < 3 && r[o].v.match(/[Ss]/) && (v = 3)
        }
    switch (v) {
    case 0:
        break;
    case 1:
        l.u >= .5 && (l.u = 0,
        ++l.S),
        l.S >= 60 && (l.S = 0,
        ++l.M),
        l.M >= 60 && (l.M = 0,
        ++l.H);
        break;
    case 2:
        l.u >= .5 && (l.u = 0,
        ++l.S),
        l.S >= 60 && (l.S = 0,
        ++l.M);
        break
    }
    var w = "", k;
    for (o = 0; o < r.length; ++o)
        switch (r[o].t) {
        case "t":
        case "T":
        case " ":
        case "D":
            break;
        case "X":
            r[o].v = "",
            r[o].t = ";";
            break;
        case "d":
        case "m":
        case "y":
        case "h":
        case "H":
        case "M":
        case "s":
        case "e":
        case "b":
        case "Z":
            r[o].v = TL(r[o].t.charCodeAt(0), r[o].v, l, S),
            r[o].t = "t";
            break;
        case "n":
        case "?":
            for (k = o + 1; r[k] != null && ((a = r[k].t) === "?" || a === "D" || (a === " " || a === "t") && r[k + 1] != null && (r[k + 1].t === "?" || r[k + 1].t === "t" && r[k + 1].v === "/") || r[o].t === "(" && (a === " " || a === "n" || a === ")") || a === "t" && (r[k].v === "/" || r[k].v === " " && r[k + 1] != null && r[k + 1].t == "?")); )
                r[o].v += r[k].v,
                r[k] = {
                    v: "",
                    t: ";"
                },
                ++k;
            w += r[o].v,
            o = k - 1;
            break;
        case "G":
            r[o].t = "t",
            r[o].v = _7(t, n);
            break
        }
    var B = "", N, E;
    if (w.length > 0) {
        w.charCodeAt(0) == 40 ? (N = t < 0 && w.charCodeAt(0) === 45 ? -t : t,
        E = Na("n", w, N)) : (N = t < 0 && i > 1 ? -t : t,
        E = Na("n", w, N),
        N < 0 && r[0] && r[0].t == "t" && (E = E.substr(1),
        r[0].v = "-" + r[0].v)),
        k = E.length - 1;
        var F = r.length;
        for (o = 0; o < r.length; ++o)
            if (r[o] != null && r[o].t != "t" && r[o].v.indexOf(".") > -1) {
                F = o;
                break
            }
        var O = r.length;
        if (F === r.length && E.indexOf("E") === -1) {
            for (o = r.length - 1; o >= 0; --o)
                r[o] == null || "n?".indexOf(r[o].t) === -1 || (k >= r[o].v.length - 1 ? (k -= r[o].v.length,
                r[o].v = E.substr(k + 1, r[o].v.length)) : k < 0 ? r[o].v = "" : (r[o].v = E.substr(0, k + 1),
                k = -1),
                r[o].t = "t",
                O = o);
            k >= 0 && O < r.length && (r[O].v = E.substr(0, k + 1) + r[O].v)
        } else if (F !== r.length && E.indexOf("E") === -1) {
            for (k = E.indexOf(".") - 1,
            o = F; o >= 0; --o)
                if (!(r[o] == null || "n?".indexOf(r[o].t) === -1)) {
                    for (u = r[o].v.indexOf(".") > -1 && o === F ? r[o].v.indexOf(".") - 1 : r[o].v.length - 1,
                    B = r[o].v.substr(u + 1); u >= 0; --u)
                        k >= 0 && (r[o].v.charAt(u) === "0" || r[o].v.charAt(u) === "#") && (B = E.charAt(k--) + B);
                    r[o].v = B,
                    r[o].t = "t",
                    O = o
                }
            for (k >= 0 && O < r.length && (r[O].v = E.substr(0, k + 1) + r[O].v),
            k = E.indexOf(".") + 1,
            o = F; o < r.length; ++o)
                if (!(r[o] == null || "n?(".indexOf(r[o].t) === -1 && o !== F)) {
                    for (u = r[o].v.indexOf(".") > -1 && o === F ? r[o].v.indexOf(".") + 1 : 0,
                    B = r[o].v.substr(0, u); u < r[o].v.length; ++u)
                        k < E.length && (B += E.charAt(k++));
                    r[o].v = B,
                    r[o].t = "t",
                    O = o
                }
        }
    }
    for (o = 0; o < r.length; ++o)
        r[o] != null && "n?".indexOf(r[o].t) > -1 && (N = i > 1 && t < 0 && o > 0 && r[o - 1].v === "-" ? -t : t,
        r[o].v = Na(r[o].t, r[o].v, N),
        r[o].t = "t");
    var V = "";
    for (o = 0; o !== r.length; ++o)
        r[o] != null && (V += r[o].v);
    return V
}
var qx = /\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;
function zx(e, t) {
    if (t == null)
        return !1;
    var n = parseFloat(t[2]);
    switch (t[1]) {
    case "=":
        if (e == n)
            return !0;
        break;
    case ">":
        if (e > n)
            return !0;
        break;
    case "<":
        if (e < n)
            return !0;
        break;
    case "<>":
        if (e != n)
            return !0;
        break;
    case ">=":
        if (e >= n)
            return !0;
        break;
    case "<=":
        if (e <= n)
            return !0;
        break
    }
    return !1
}
function LL(e, t) {
    var n = NL(e)
      , i = n.length
      , r = n[i - 1].indexOf("@");
    if (i < 4 && r > -1 && --i,
    n.length > 4)
        throw new Error("cannot find right format for |" + n.join("|") + "|");
    if (typeof t != "number")
        return [4, n.length === 4 || r > -1 ? n[n.length - 1] : "@"];
    switch (n.length) {
    case 1:
        n = r > -1 ? ["General", "General", "General", n[0]] : [n[0], n[0], n[0], "@"];
        break;
    case 2:
        n = r > -1 ? [n[0], n[0], n[0], n[1]] : [n[0], n[1], n[0], "@"];
        break;
    case 3:
        n = r > -1 ? [n[0], n[1], n[0], n[2]] : [n[0], n[1], n[2], "@"];
        break;
    case 4:
        break
    }
    var s = t > 0 ? n[0] : t < 0 ? n[1] : n[2];
    if (n[0].indexOf("[") === -1 && n[1].indexOf("[") === -1)
        return [i, s];
    if (n[0].match(/\[[=<>]/) != null || n[1].match(/\[[=<>]/) != null) {
        var o = n[0].match(qx)
          , a = n[1].match(qx);
        return zx(t, o) ? [i, n[0]] : zx(t, a) ? [i, n[1]] : [i, n[o != null && a != null ? 2 : 1]]
    }
    return [i, s]
}
function Vc(e, t, n) {
    n == null && (n = {});
    var i = "";
    switch (typeof e) {
    case "string":
        e == "m/d/yy" && n.dateNF ? i = n.dateNF : i = e;
        break;
    case "number":
        e == 14 && n.dateNF ? i = n.dateNF : i = (n.table != null ? n.table : Bn)[e],
        i == null && (i = n.table && n.table[$x[e]] || Bn[$x[e]]),
        i == null && (i = _L[e] || "General");
        break
    }
    if (Z3(i, 0))
        return _7(t, n);
    t instanceof Date && (t = Ow(t, n.date1904));
    var r = LL(i, t);
    if (Z3(r[1]))
        return _7(t, n);
    if (t === !0)
        t = "TRUE";
    else if (t === !1)
        t = "FALSE";
    else if (t === "" || t == null)
        return "";
    return FL(r[1], t, n, r[0])
}
function Lw(e, t) {
    if (typeof t != "number") {
        t = +t || -1;
        for (var n = 0; n < 392; ++n) {
            if (Bn[n] == null) {
                t < 0 && (t = n);
                continue
            }
            if (Bn[n] == e) {
                t = n;
                break
            }
        }
        t < 0 && (t = 391)
    }
    return Bn[t] = e,
    t
}
function d2(e) {
    for (var t = 0; t != 392; ++t)
        e[t] !== void 0 && Lw(e[t], t)
}
function f2() {
    Bn = vL()
}
var Bw = /[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;
function BL(e) {
    var t = typeof e == "number" ? Bn[e] : e;
    return t = t.replace(Bw, "(\\d+)"),
    new RegExp("^" + t + "$")
}
function UL(e, t, n) {
    var i = -1
      , r = -1
      , s = -1
      , o = -1
      , a = -1
      , c = -1;
    (t.match(Bw) || []).forEach(function(h, d) {
        var f = parseInt(n[d + 1], 10);
        switch (h.toLowerCase().charAt(0)) {
        case "y":
            i = f;
            break;
        case "d":
            s = f;
            break;
        case "h":
            o = f;
            break;
        case "s":
            c = f;
            break;
        case "m":
            o >= 0 ? a = f : r = f;
            break
        }
    }),
    c >= 0 && a == -1 && r >= 0 && (a = r,
    r = -1);
    var l = ("" + (i >= 0 ? i : new Date().getFullYear())).slice(-4) + "-" + ("00" + (r >= 1 ? r : 1)).slice(-2) + "-" + ("00" + (s >= 1 ? s : 1)).slice(-2);
    l.length == 7 && (l = "0" + l),
    l.length == 8 && (l = "20" + l);
    var u = ("00" + (o >= 0 ? o : 0)).slice(-2) + ":" + ("00" + (a >= 0 ? a : 0)).slice(-2) + ":" + ("00" + (c >= 0 ? c : 0)).slice(-2);
    return o == -1 && a == -1 && c == -1 ? l : i == -1 && r == -1 && s == -1 ? u : l + "T" + u
}
var HL = function() {
    var e = {};
    e.version = "1.2.0";
    function t() {
        for (var E = 0, F = new Array(256), O = 0; O != 256; ++O)
            E = O,
            E = E & 1 ? -306674912 ^ E >>> 1 : E >>> 1,
            E = E & 1 ? -306674912 ^ E >>> 1 : E >>> 1,
            E = E & 1 ? -306674912 ^ E >>> 1 : E >>> 1,
            E = E & 1 ? -306674912 ^ E >>> 1 : E >>> 1,
            E = E & 1 ? -306674912 ^ E >>> 1 : E >>> 1,
            E = E & 1 ? -306674912 ^ E >>> 1 : E >>> 1,
            E = E & 1 ? -306674912 ^ E >>> 1 : E >>> 1,
            E = E & 1 ? -306674912 ^ E >>> 1 : E >>> 1,
            F[O] = E;
        return typeof Int32Array < "u" ? new Int32Array(F) : F
    }
    var n = t();
    function i(E) {
        var F = 0
          , O = 0
          , V = 0
          , X = typeof Int32Array < "u" ? new Int32Array(4096) : new Array(4096);
        for (V = 0; V != 256; ++V)
            X[V] = E[V];
        for (V = 0; V != 256; ++V)
            for (O = E[V],
            F = 256 + V; F < 4096; F += 256)
                O = X[F] = O >>> 8 ^ E[O & 255];
        var b = [];
        for (V = 1; V != 16; ++V)
            b[V - 1] = typeof Int32Array < "u" ? X.subarray(V * 256, V * 256 + 256) : X.slice(V * 256, V * 256 + 256);
        return b
    }
    var r = i(n)
      , s = r[0]
      , o = r[1]
      , a = r[2]
      , c = r[3]
      , l = r[4]
      , u = r[5]
      , h = r[6]
      , d = r[7]
      , f = r[8]
      , g = r[9]
      , p = r[10]
      , v = r[11]
      , S = r[12]
      , x = r[13]
      , w = r[14];
    function k(E, F) {
        for (var O = F ^ -1, V = 0, X = E.length; V < X; )
            O = O >>> 8 ^ n[(O ^ E.charCodeAt(V++)) & 255];
        return ~O
    }
    function B(E, F) {
        for (var O = F ^ -1, V = E.length - 15, X = 0; X < V; )
            O = w[E[X++] ^ O & 255] ^ x[E[X++] ^ O >> 8 & 255] ^ S[E[X++] ^ O >> 16 & 255] ^ v[E[X++] ^ O >>> 24] ^ p[E[X++]] ^ g[E[X++]] ^ f[E[X++]] ^ d[E[X++]] ^ h[E[X++]] ^ u[E[X++]] ^ l[E[X++]] ^ c[E[X++]] ^ a[E[X++]] ^ o[E[X++]] ^ s[E[X++]] ^ n[E[X++]];
        for (V += 15; X < V; )
            O = O >>> 8 ^ n[(O ^ E[X++]) & 255];
        return ~O
    }
    function N(E, F) {
        for (var O = F ^ -1, V = 0, X = E.length, b = 0, j = 0; V < X; )
            b = E.charCodeAt(V++),
            b < 128 ? O = O >>> 8 ^ n[(O ^ b) & 255] : b < 2048 ? (O = O >>> 8 ^ n[(O ^ (192 | b >> 6 & 31)) & 255],
            O = O >>> 8 ^ n[(O ^ (128 | b & 63)) & 255]) : b >= 55296 && b < 57344 ? (b = (b & 1023) + 64,
            j = E.charCodeAt(V++) & 1023,
            O = O >>> 8 ^ n[(O ^ (240 | b >> 8 & 7)) & 255],
            O = O >>> 8 ^ n[(O ^ (128 | b >> 2 & 63)) & 255],
            O = O >>> 8 ^ n[(O ^ (128 | j >> 6 & 15 | (b & 3) << 4)) & 255],
            O = O >>> 8 ^ n[(O ^ (128 | j & 63)) & 255]) : (O = O >>> 8 ^ n[(O ^ (224 | b >> 12 & 15)) & 255],
            O = O >>> 8 ^ n[(O ^ (128 | b >> 6 & 63)) & 255],
            O = O >>> 8 ^ n[(O ^ (128 | b & 63)) & 255]);
        return ~O
    }
    return e.table = n,
    e.bstr = k,
    e.buf = B,
    e.str = N,
    e
}(), nn = function() {
    var t = {};
    t.version = "1.2.1";
    function n(_, I) {
        for (var T = _.split("/"), M = I.split("/"), R = 0, D = 0, J = Math.min(T.length, M.length); R < J; ++R) {
            if (D = T[R].length - M[R].length)
                return D;
            if (T[R] != M[R])
                return T[R] < M[R] ? -1 : 1
        }
        return T.length - M.length
    }
    function i(_) {
        if (_.charAt(_.length - 1) == "/")
            return _.slice(0, -1).indexOf("/") === -1 ? _ : i(_.slice(0, -1));
        var I = _.lastIndexOf("/");
        return I === -1 ? _ : _.slice(0, I + 1)
    }
    function r(_) {
        if (_.charAt(_.length - 1) == "/")
            return r(_.slice(0, -1));
        var I = _.lastIndexOf("/");
        return I === -1 ? _ : _.slice(I + 1)
    }
    function s(_, I) {
        typeof I == "string" && (I = new Date(I));
        var T = I.getHours();
        T = T << 6 | I.getMinutes(),
        T = T << 5 | I.getSeconds() >>> 1,
        _.write_shift(2, T);
        var M = I.getFullYear() - 1980;
        M = M << 4 | I.getMonth() + 1,
        M = M << 5 | I.getDate(),
        _.write_shift(2, M)
    }
    function o(_) {
        var I = _.read_shift(2) & 65535
          , T = _.read_shift(2) & 65535
          , M = new Date
          , R = T & 31;
        T >>>= 5;
        var D = T & 15;
        T >>>= 4,
        M.setMilliseconds(0),
        M.setFullYear(T + 1980),
        M.setMonth(D - 1),
        M.setDate(R);
        var J = I & 31;
        I >>>= 5;
        var le = I & 63;
        return I >>>= 6,
        M.setHours(I),
        M.setMinutes(le),
        M.setSeconds(J << 1),
        M
    }
    function a(_) {
        Ss(_, 0);
        for (var I = {}, T = 0; _.l <= _.length - 4; ) {
            var M = _.read_shift(2)
              , R = _.read_shift(2)
              , D = _.l + R
              , J = {};
            switch (M) {
            case 21589:
                T = _.read_shift(1),
                T & 1 && (J.mtime = _.read_shift(4)),
                R > 5 && (T & 2 && (J.atime = _.read_shift(4)),
                T & 4 && (J.ctime = _.read_shift(4))),
                J.mtime && (J.mt = new Date(J.mtime * 1e3));
                break
            }
            _.l = D,
            I[M] = J
        }
        return I
    }
    var c;
    function l() {
        return c || (c = {})
    }
    function u(_, I) {
        if (_[0] == 80 && _[1] == 75)
            return W8(_, I);
        if ((_[0] | 32) == 109 && (_[1] | 32) == 105)
            return PP(_, I);
        if (_.length < 512)
            throw new Error("CFB file size " + _.length + " < 512");
        var T = 3
          , M = 512
          , R = 0
          , D = 0
          , J = 0
          , le = 0
          , ee = 0
          , Z = []
          , ie = _.slice(0, 512);
        Ss(ie, 0);
        var Se = h(ie);
        switch (T = Se[0],
        T) {
        case 3:
            M = 512;
            break;
        case 4:
            M = 4096;
            break;
        case 0:
            if (Se[1] == 0)
                return W8(_, I);
        default:
            throw new Error("Major Version: Expected 3 or 4 saw " + T)
        }
        M !== 512 && (ie = _.slice(0, M),
        Ss(ie, 28));
        var ke = _.slice(0, M);
        d(ie, T);
        var ze = ie.read_shift(4, "i");
        if (T === 3 && ze !== 0)
            throw new Error("# Directory Sectors: Expected 0 saw " + ze);
        ie.l += 4,
        J = ie.read_shift(4, "i"),
        ie.l += 4,
        ie.chk("00100000", "Mini Stream Cutoff Size: "),
        le = ie.read_shift(4, "i"),
        R = ie.read_shift(4, "i"),
        ee = ie.read_shift(4, "i"),
        D = ie.read_shift(4, "i");
        for (var Ae = -1, Le = 0; Le < 109 && (Ae = ie.read_shift(4, "i"),
        !(Ae < 0)); ++Le)
            Z[Le] = Ae;
        var gt = f(_, M);
        v(ee, D, gt, M, Z);
        var vn = x(gt, J, Z, M);
        vn[J].name = "!Directory",
        R > 0 && le !== j && (vn[le].name = "!MiniFAT"),
        vn[Z[0]].name = "!FAT",
        vn.fat_addrs = Z,
        vn.ssz = M;
        var Br = {}
          , Kn = []
          , rs = []
          , Eh = [];
        w(J, vn, gt, Kn, R, Br, rs, le),
        g(rs, Eh, Kn),
        Kn.shift();
        var Th = {
            FileIndex: rs,
            FullPaths: Eh
        };
        return I && I.raw && (Th.raw = {
            header: ke,
            sectors: gt
        }),
        Th
    }
    function h(_) {
        if (_[_.l] == 80 && _[_.l + 1] == 75)
            return [0, 0];
        _.chk(de, "Header Signature: "),
        _.l += 16;
        var I = _.read_shift(2, "u");
        return [_.read_shift(2, "u"), I]
    }
    function d(_, I) {
        var T = 9;
        switch (_.l += 2,
        T = _.read_shift(2)) {
        case 9:
            if (I != 3)
                throw new Error("Sector Shift: Expected 9 saw " + T);
            break;
        case 12:
            if (I != 4)
                throw new Error("Sector Shift: Expected 12 saw " + T);
            break;
        default:
            throw new Error("Sector Shift: Expected 9 or 12 saw " + T)
        }
        _.chk("0600", "Mini Sector Shift: "),
        _.chk("000000000000", "Reserved: ")
    }
    function f(_, I) {
        for (var T = Math.ceil(_.length / I) - 1, M = [], R = 1; R < T; ++R)
            M[R - 1] = _.slice(R * I, (R + 1) * I);
        return M[T - 1] = _.slice(T * I),
        M
    }
    function g(_, I, T) {
        for (var M = 0, R = 0, D = 0, J = 0, le = 0, ee = T.length, Z = [], ie = []; M < ee; ++M)
            Z[M] = ie[M] = M,
            I[M] = T[M];
        for (; le < ie.length; ++le)
            M = ie[le],
            R = _[M].L,
            D = _[M].R,
            J = _[M].C,
            Z[M] === M && (R !== -1 && Z[R] !== R && (Z[M] = Z[R]),
            D !== -1 && Z[D] !== D && (Z[M] = Z[D])),
            J !== -1 && (Z[J] = M),
            R !== -1 && M != Z[M] && (Z[R] = Z[M],
            ie.lastIndexOf(R) < le && ie.push(R)),
            D !== -1 && M != Z[M] && (Z[D] = Z[M],
            ie.lastIndexOf(D) < le && ie.push(D));
        for (M = 1; M < ee; ++M)
            Z[M] === M && (D !== -1 && Z[D] !== D ? Z[M] = Z[D] : R !== -1 && Z[R] !== R && (Z[M] = Z[R]));
        for (M = 1; M < ee; ++M)
            if (_[M].type !== 0) {
                if (le = M,
                le != Z[le])
                    do
                        le = Z[le],
                        I[M] = I[le] + "/" + I[M];
                    while (le !== 0 && Z[le] !== -1 && le != Z[le]);
                Z[M] = -1
            }
        for (I[0] += "/",
        M = 1; M < ee; ++M)
            _[M].type !== 2 && (I[M] += "/")
    }
    function p(_, I, T) {
        for (var M = _.start, R = _.size, D = [], J = M; T && R > 0 && J >= 0; )
            D.push(I.slice(J * b, J * b + b)),
            R -= b,
            J = Jl(T, J * 4);
        return D.length === 0 ? ce(0) : $i(D).slice(0, _.size)
    }
    function v(_, I, T, M, R) {
        var D = j;
        if (_ === j) {
            if (I !== 0)
                throw new Error("DIFAT chain shorter than expected")
        } else if (_ !== -1) {
            var J = T[_]
              , le = (M >>> 2) - 1;
            if (!J)
                return;
            for (var ee = 0; ee < le && (D = Jl(J, ee * 4)) !== j; ++ee)
                R.push(D);
            v(Jl(J, M - 4), I - 1, T, M, R)
        }
    }
    function S(_, I, T, M, R) {
        var D = []
          , J = [];
        R || (R = []);
        var le = M - 1
          , ee = 0
          , Z = 0;
        for (ee = I; ee >= 0; ) {
            R[ee] = !0,
            D[D.length] = ee,
            J.push(_[ee]);
            var ie = T[Math.floor(ee * 4 / M)];
            if (Z = ee * 4 & le,
            M < 4 + Z)
                throw new Error("FAT boundary crossed: " + ee + " 4 " + M);
            if (!_[ie])
                break;
            ee = Jl(_[ie], Z)
        }
        return {
            nodes: D,
            data: tw([J])
        }
    }
    function x(_, I, T, M) {
        var R = _.length
          , D = []
          , J = []
          , le = []
          , ee = []
          , Z = M - 1
          , ie = 0
          , Se = 0
          , ke = 0
          , ze = 0;
        for (ie = 0; ie < R; ++ie)
            if (le = [],
            ke = ie + I,
            ke >= R && (ke -= R),
            !J[ke]) {
                ee = [];
                var Ae = [];
                for (Se = ke; Se >= 0; ) {
                    Ae[Se] = !0,
                    J[Se] = !0,
                    le[le.length] = Se,
                    ee.push(_[Se]);
                    var Le = T[Math.floor(Se * 4 / M)];
                    if (ze = Se * 4 & Z,
                    M < 4 + ze)
                        throw new Error("FAT boundary crossed: " + Se + " 4 " + M);
                    if (!_[Le] || (Se = Jl(_[Le], ze),
                    Ae[Se]))
                        break
                }
                D[ke] = {
                    nodes: le,
                    data: tw([ee])
                }
            }
        return D
    }
    function w(_, I, T, M, R, D, J, le) {
        for (var ee = 0, Z = M.length ? 2 : 0, ie = I[_].data, Se = 0, ke = 0, ze; Se < ie.length; Se += 128) {
            var Ae = ie.slice(Se, Se + 128);
            Ss(Ae, 64),
            ke = Ae.read_shift(2),
            ze = m2(Ae, 0, ke - Z),
            M.push(ze);
            var Le = {
                name: ze,
                type: Ae.read_shift(1),
                color: Ae.read_shift(1),
                L: Ae.read_shift(4, "i"),
                R: Ae.read_shift(4, "i"),
                C: Ae.read_shift(4, "i"),
                clsid: Ae.read_shift(16),
                state: Ae.read_shift(4, "i"),
                start: 0,
                size: 0
            }
              , gt = Ae.read_shift(2) + Ae.read_shift(2) + Ae.read_shift(2) + Ae.read_shift(2);
            gt !== 0 && (Le.ct = k(Ae, Ae.l - 8));
            var vn = Ae.read_shift(2) + Ae.read_shift(2) + Ae.read_shift(2) + Ae.read_shift(2);
            vn !== 0 && (Le.mt = k(Ae, Ae.l - 8)),
            Le.start = Ae.read_shift(4, "i"),
            Le.size = Ae.read_shift(4, "i"),
            Le.size < 0 && Le.start < 0 && (Le.size = Le.type = 0,
            Le.start = j,
            Le.name = ""),
            Le.type === 5 ? (ee = Le.start,
            R > 0 && ee !== j && (I[ee].name = "!StreamData")) : Le.size >= 4096 ? (Le.storage = "fat",
            I[Le.start] === void 0 && (I[Le.start] = S(T, Le.start, I.fat_addrs, I.ssz)),
            I[Le.start].name = Le.name,
            Le.content = I[Le.start].data.slice(0, Le.size)) : (Le.storage = "minifat",
            Le.size < 0 ? Le.size = 0 : ee !== j && Le.start !== j && I[ee] && (Le.content = p(Le, I[ee].data, (I[le] || {}).data))),
            Le.content && Ss(Le.content, 0),
            D[ze] = Le,
            J.push(Le)
        }
    }
    function k(_, I) {
        return new Date((ki(_, I + 4) / 1e7 * Math.pow(2, 32) + ki(_, I) / 1e7 - 11644473600) * 1e3)
    }
    function B(_, I) {
        return l(),
        u(c.readFileSync(_), I)
    }
    function N(_, I) {
        var T = I && I.type;
        switch (T || zt && Buffer.isBuffer(_) && (T = "buffer"),
        T || "base64") {
        case "file":
            return B(_, I);
        case "base64":
            return u(lo(Ba(_)), I);
        case "binary":
            return u(lo(_), I)
        }
        return u(_, I)
    }
    function E(_, I) {
        var T = I || {}
          , M = T.root || "Root Entry";
        if (_.FullPaths || (_.FullPaths = []),
        _.FileIndex || (_.FileIndex = []),
        _.FullPaths.length !== _.FileIndex.length)
            throw new Error("inconsistent CFB structure");
        _.FullPaths.length === 0 && (_.FullPaths[0] = M + "/",
        _.FileIndex[0] = {
            name: M,
            type: 5
        }),
        T.CLSID && (_.FileIndex[0].clsid = T.CLSID),
        F(_)
    }
    function F(_) {
        var I = "Sh33tJ5";
        if (!nn.find(_, "/" + I)) {
            var T = ce(4);
            T[0] = 55,
            T[1] = T[3] = 50,
            T[2] = 54,
            _.FileIndex.push({
                name: I,
                type: 2,
                content: T,
                size: 4,
                L: 69,
                R: 69,
                C: 69
            }),
            _.FullPaths.push(_.FullPaths[0] + I),
            O(_)
        }
    }
    function O(_, I) {
        E(_);
        for (var T = !1, M = !1, R = _.FullPaths.length - 1; R >= 0; --R) {
            var D = _.FileIndex[R];
            switch (D.type) {
            case 0:
                M ? T = !0 : (_.FileIndex.pop(),
                _.FullPaths.pop());
                break;
            case 1:
            case 2:
            case 5:
                M = !0,
                isNaN(D.R * D.L * D.C) && (T = !0),
                D.R > -1 && D.L > -1 && D.R == D.L && (T = !0);
                break;
            default:
                T = !0;
                break
            }
        }
        if (!(!T && !I)) {
            var J = new Date(1987,1,19)
              , le = 0
              , ee = Object.create ? Object.create(null) : {}
              , Z = [];
            for (R = 0; R < _.FullPaths.length; ++R)
                ee[_.FullPaths[R]] = !0,
                _.FileIndex[R].type !== 0 && Z.push([_.FullPaths[R], _.FileIndex[R]]);
            for (R = 0; R < Z.length; ++R) {
                var ie = i(Z[R][0]);
                M = ee[ie],
                M || (Z.push([ie, {
                    name: r(ie).replace("/", ""),
                    type: 1,
                    clsid: Re,
                    ct: J,
                    mt: J,
                    content: null
                }]),
                ee[ie] = !0)
            }
            for (Z.sort(function(ze, Ae) {
                return n(ze[0], Ae[0])
            }),
            _.FullPaths = [],
            _.FileIndex = [],
            R = 0; R < Z.length; ++R)
                _.FullPaths[R] = Z[R][0],
                _.FileIndex[R] = Z[R][1];
            for (R = 0; R < Z.length; ++R) {
                var Se = _.FileIndex[R]
                  , ke = _.FullPaths[R];
                if (Se.name = r(ke).replace("/", ""),
                Se.L = Se.R = Se.C = -(Se.color = 1),
                Se.size = Se.content ? Se.content.length : 0,
                Se.start = 0,
                Se.clsid = Se.clsid || Re,
                R === 0)
                    Se.C = Z.length > 1 ? 1 : -1,
                    Se.size = 0,
                    Se.type = 5;
                else if (ke.slice(-1) == "/") {
                    for (le = R + 1; le < Z.length && i(_.FullPaths[le]) != ke; ++le)
                        ;
                    for (Se.C = le >= Z.length ? -1 : le,
                    le = R + 1; le < Z.length && i(_.FullPaths[le]) != i(ke); ++le)
                        ;
                    Se.R = le >= Z.length ? -1 : le,
                    Se.type = 1
                } else
                    i(_.FullPaths[R + 1] || "") == i(ke) && (Se.R = R + 1),
                    Se.type = 2
            }
        }
    }
    function V(_, I) {
        var T = I || {};
        if (T.fileType == "mad")
            return kP(_, T);
        switch (O(_),
        T.fileType) {
        case "zip":
            return wP(_, T)
        }
        var M = function(ze) {
            for (var Ae = 0, Le = 0, gt = 0; gt < ze.FileIndex.length; ++gt) {
                var vn = ze.FileIndex[gt];
                if (vn.content) {
                    var Br = vn.content.length;
                    Br > 0 && (Br < 4096 ? Ae += Br + 63 >> 6 : Le += Br + 511 >> 9)
                }
            }
            for (var Kn = ze.FullPaths.length + 3 >> 2, rs = Ae + 7 >> 3, Eh = Ae + 127 >> 7, Th = rs + Le + Kn + Eh, al = Th + 127 >> 7, jp = al <= 109 ? 0 : Math.ceil((al - 109) / 127); Th + al + jp + 127 >> 7 > al; )
                jp = ++al <= 109 ? 0 : Math.ceil((al - 109) / 127);
            var la = [1, jp, al, Eh, Kn, Le, Ae, 0];
            return ze.FileIndex[0].size = Ae << 6,
            la[7] = (ze.FileIndex[0].start = la[0] + la[1] + la[2] + la[3] + la[4] + la[5]) + (la[6] + 7 >> 3),
            la
        }(_)
          , R = ce(M[7] << 9)
          , D = 0
          , J = 0;
        {
            for (D = 0; D < 8; ++D)
                R.write_shift(1, he[D]);
            for (D = 0; D < 8; ++D)
                R.write_shift(2, 0);
            for (R.write_shift(2, 62),
            R.write_shift(2, 3),
            R.write_shift(2, 65534),
            R.write_shift(2, 9),
            R.write_shift(2, 6),
            D = 0; D < 3; ++D)
                R.write_shift(2, 0);
            for (R.write_shift(4, 0),
            R.write_shift(4, M[2]),
            R.write_shift(4, M[0] + M[1] + M[2] + M[3] - 1),
            R.write_shift(4, 0),
            R.write_shift(4, 4096),
            R.write_shift(4, M[3] ? M[0] + M[1] + M[2] - 1 : j),
            R.write_shift(4, M[3]),
            R.write_shift(-4, M[1] ? M[0] - 1 : j),
            R.write_shift(4, M[1]),
            D = 0; D < 109; ++D)
                R.write_shift(-4, D < M[2] ? M[1] + D : -1)
        }
        if (M[1])
            for (J = 0; J < M[1]; ++J) {
                for (; D < 236 + J * 127; ++D)
                    R.write_shift(-4, D < M[2] ? M[1] + D : -1);
                R.write_shift(-4, J === M[1] - 1 ? j : J + 1)
            }
        var le = function(ze) {
            for (J += ze; D < J - 1; ++D)
                R.write_shift(-4, D + 1);
            ze && (++D,
            R.write_shift(-4, j))
        };
        for (J = D = 0,
        J += M[1]; D < J; ++D)
            R.write_shift(-4, Xe.DIFSECT);
        for (J += M[2]; D < J; ++D)
            R.write_shift(-4, Xe.FATSECT);
        le(M[3]),
        le(M[4]);
        for (var ee = 0, Z = 0, ie = _.FileIndex[0]; ee < _.FileIndex.length; ++ee)
            ie = _.FileIndex[ee],
            ie.content && (Z = ie.content.length,
            !(Z < 4096) && (ie.start = J,
            le(Z + 511 >> 9)));
        for (le(M[6] + 7 >> 3); R.l & 511; )
            R.write_shift(-4, Xe.ENDOFCHAIN);
        for (J = D = 0,
        ee = 0; ee < _.FileIndex.length; ++ee)
            ie = _.FileIndex[ee],
            ie.content && (Z = ie.content.length,
            !(!Z || Z >= 4096) && (ie.start = J,
            le(Z + 63 >> 6)));
        for (; R.l & 511; )
            R.write_shift(-4, Xe.ENDOFCHAIN);
        for (D = 0; D < M[4] << 2; ++D) {
            var Se = _.FullPaths[D];
            if (!Se || Se.length === 0) {
                for (ee = 0; ee < 17; ++ee)
                    R.write_shift(4, 0);
                for (ee = 0; ee < 3; ++ee)
                    R.write_shift(4, -1);
                for (ee = 0; ee < 12; ++ee)
                    R.write_shift(4, 0);
                continue
            }
            ie = _.FileIndex[D],
            D === 0 && (ie.start = ie.size ? ie.start - 1 : j);
            var ke = D === 0 && T.root || ie.name;
            if (Z = 2 * (ke.length + 1),
            R.write_shift(64, ke, "utf16le"),
            R.write_shift(2, Z),
            R.write_shift(1, ie.type),
            R.write_shift(1, ie.color),
            R.write_shift(-4, ie.L),
            R.write_shift(-4, ie.R),
            R.write_shift(-4, ie.C),
            ie.clsid)
                R.write_shift(16, ie.clsid, "hex");
            else
                for (ee = 0; ee < 4; ++ee)
                    R.write_shift(4, 0);
            R.write_shift(4, ie.state || 0),
            R.write_shift(4, 0),
            R.write_shift(4, 0),
            R.write_shift(4, 0),
            R.write_shift(4, 0),
            R.write_shift(4, ie.start),
            R.write_shift(4, ie.size),
            R.write_shift(4, 0)
        }
        for (D = 1; D < _.FileIndex.length; ++D)
            if (ie = _.FileIndex[D],
            ie.size >= 4096)
                if (R.l = ie.start + 1 << 9,
                zt && Buffer.isBuffer(ie.content))
                    ie.content.copy(R, R.l, 0, ie.size),
                    R.l += ie.size + 511 & -512;
                else {
                    for (ee = 0; ee < ie.size; ++ee)
                        R.write_shift(1, ie.content[ee]);
                    for (; ee & 511; ++ee)
                        R.write_shift(1, 0)
                }
        for (D = 1; D < _.FileIndex.length; ++D)
            if (ie = _.FileIndex[D],
            ie.size > 0 && ie.size < 4096)
                if (zt && Buffer.isBuffer(ie.content))
                    ie.content.copy(R, R.l, 0, ie.size),
                    R.l += ie.size + 63 & -64;
                else {
                    for (ee = 0; ee < ie.size; ++ee)
                        R.write_shift(1, ie.content[ee]);
                    for (; ee & 63; ++ee)
                        R.write_shift(1, 0)
                }
        if (zt)
            R.l = R.length;
        else
            for (; R.l < R.length; )
                R.write_shift(1, 0);
        return R
    }
    function X(_, I) {
        var T = _.FullPaths.map(function(ee) {
            return ee.toUpperCase()
        })
          , M = T.map(function(ee) {
            var Z = ee.split("/");
            return Z[Z.length - (ee.slice(-1) == "/" ? 2 : 1)]
        })
          , R = !1;
        I.charCodeAt(0) === 47 ? (R = !0,
        I = T[0].slice(0, -1) + I) : R = I.indexOf("/") !== -1;
        var D = I.toUpperCase()
          , J = R === !0 ? T.indexOf(D) : M.indexOf(D);
        if (J !== -1)
            return _.FileIndex[J];
        var le = !D.match(W3);
        for (D = D.replace(Vu, ""),
        le && (D = D.replace(W3, "!")),
        J = 0; J < T.length; ++J)
            if ((le ? T[J].replace(W3, "!") : T[J]).replace(Vu, "") == D || (le ? M[J].replace(W3, "!") : M[J]).replace(Vu, "") == D)
                return _.FileIndex[J];
        return null
    }
    var b = 64
      , j = -2
      , de = "d0cf11e0a1b11ae1"
      , he = [208, 207, 17, 224, 161, 177, 26, 225]
      , Re = "00000000000000000000000000000000"
      , Xe = {
        MAXREGSECT: -6,
        DIFSECT: -4,
        FATSECT: -3,
        ENDOFCHAIN: j,
        FREESECT: -1,
        HEADER_SIGNATURE: de,
        HEADER_MINOR_VERSION: "3e00",
        MAXREGSID: -6,
        NOSTREAM: -1,
        HEADER_CLSID: Re,
        EntryTypes: ["unknown", "storage", "stream", "lockbytes", "property", "root"]
    };
    function pt(_, I, T) {
        l();
        var M = V(_, T);
        c.writeFileSync(I, M)
    }
    function it(_) {
        for (var I = new Array(_.length), T = 0; T < _.length; ++T)
            I[T] = String.fromCharCode(_[T]);
        return I.join("")
    }
    function fe(_, I) {
        var T = V(_, I);
        switch (I && I.type || "buffer") {
        case "file":
            return l(),
            c.writeFileSync(I.filename, T),
            T;
        case "binary":
            return typeof T == "string" ? T : it(T);
        case "base64":
            return C1(typeof T == "string" ? T : it(T));
        case "buffer":
            if (zt)
                return Buffer.isBuffer(T) ? T : Ha(T);
        case "array":
            return typeof T == "string" ? lo(T) : T
        }
        return T
    }
    var Ge;
    function A(_) {
        try {
            var I = _.InflateRaw
              , T = new I;
            if (T._processChunk(new Uint8Array([3, 0]), T._finishFlushFlag),
            T.bytesRead)
                Ge = _;
            else
                throw new Error("zlib does not expose bytesRead")
        } catch (M) {
            console.error("cannot use native zlib: " + (M.message || M))
        }
    }
    function q(_, I) {
        if (!Ge)
            return V8(_, I);
        var T = Ge.InflateRaw
          , M = new T
          , R = M._processChunk(_.slice(_.l), M._finishFlushFlag);
        return _.l += M.bytesRead,
        R
    }
    function L(_) {
        return Ge ? Ge.deflateRawSync(_) : ht(_)
    }
    var U = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]
      , te = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258]
      , Ce = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577];
    function Ve(_) {
        var I = (_ << 1 | _ << 11) & 139536 | (_ << 5 | _ << 15) & 558144;
        return (I >> 16 | I >> 8 | I) & 255
    }
    for (var De = typeof Uint8Array < "u", ge = De ? new Uint8Array(256) : [], kt = 0; kt < 256; ++kt)
        ge[kt] = Ve(kt);
    function xt(_, I) {
        var T = ge[_ & 255];
        return I <= 8 ? T >>> 8 - I : (T = T << 8 | ge[_ >> 8 & 255],
        I <= 16 ? T >>> 16 - I : (T = T << 8 | ge[_ >> 16 & 255],
        T >>> 24 - I))
    }
    function hn(_, I) {
        var T = I & 7
          , M = I >>> 3;
        return (_[M] | (T <= 6 ? 0 : _[M + 1] << 8)) >>> T & 3
    }
    function Ot(_, I) {
        var T = I & 7
          , M = I >>> 3;
        return (_[M] | (T <= 5 ? 0 : _[M + 1] << 8)) >>> T & 7
    }
    function bi(_, I) {
        var T = I & 7
          , M = I >>> 3;
        return (_[M] | (T <= 4 ? 0 : _[M + 1] << 8)) >>> T & 15
    }
    function Xt(_, I) {
        var T = I & 7
          , M = I >>> 3;
        return (_[M] | (T <= 3 ? 0 : _[M + 1] << 8)) >>> T & 31
    }
    function Ue(_, I) {
        var T = I & 7
          , M = I >>> 3;
        return (_[M] | (T <= 1 ? 0 : _[M + 1] << 8)) >>> T & 127
    }
    function Zi(_, I, T) {
        var M = I & 7
          , R = I >>> 3
          , D = (1 << T) - 1
          , J = _[R] >>> M;
        return T < 8 - M || (J |= _[R + 1] << 8 - M,
        T < 16 - M) || (J |= _[R + 2] << 16 - M,
        T < 24 - M) || (J |= _[R + 3] << 24 - M),
        J & D
    }
    function ns(_, I, T) {
        var M = I & 7
          , R = I >>> 3;
        return M <= 5 ? _[R] |= (T & 7) << M : (_[R] |= T << M & 255,
        _[R + 1] = (T & 7) >> 8 - M),
        I + 3
    }
    function Bi(_, I, T) {
        var M = I & 7
          , R = I >>> 3;
        return T = (T & 1) << M,
        _[R] |= T,
        I + 1
    }
    function is(_, I, T) {
        var M = I & 7
          , R = I >>> 3;
        return T <<= M,
        _[R] |= T & 255,
        T >>>= 8,
        _[R + 1] = T,
        I + 8
    }
    function ol(_, I, T) {
        var M = I & 7
          , R = I >>> 3;
        return T <<= M,
        _[R] |= T & 255,
        T >>>= 8,
        _[R + 1] = T & 255,
        _[R + 2] = T >>> 8,
        I + 16
    }
    function Xn(_, I) {
        var T = _.length
          , M = 2 * T > I ? 2 * T : I + 5
          , R = 0;
        if (T >= I)
            return _;
        if (zt) {
            var D = Hx(M);
            if (_.copy)
                _.copy(D);
            else
                for (; R < _.length; ++R)
                    D[R] = _[R];
            return D
        } else if (De) {
            var J = new Uint8Array(M);
            if (J.set)
                J.set(_);
            else
                for (; R < T; ++R)
                    J[R] = _[R];
            return J
        }
        return _.length = M,
        _
    }
    function dn(_) {
        for (var I = new Array(_), T = 0; T < _; ++T)
            I[T] = 0;
        return I
    }
    function ca(_, I, T) {
        var M = 1
          , R = 0
          , D = 0
          , J = 0
          , le = 0
          , ee = _.length
          , Z = De ? new Uint16Array(32) : dn(32);
        for (D = 0; D < 32; ++D)
            Z[D] = 0;
        for (D = ee; D < T; ++D)
            _[D] = 0;
        ee = _.length;
        var ie = De ? new Uint16Array(ee) : dn(ee);
        for (D = 0; D < ee; ++D)
            Z[R = _[D]]++,
            M < R && (M = R),
            ie[D] = 0;
        for (Z[0] = 0,
        D = 1; D <= M; ++D)
            Z[D + 16] = le = le + Z[D - 1] << 1;
        for (D = 0; D < ee; ++D)
            le = _[D],
            le != 0 && (ie[D] = Z[le + 16]++);
        var Se = 0;
        for (D = 0; D < ee; ++D)
            if (Se = _[D],
            Se != 0)
                for (le = xt(ie[D], M) >> M - Se,
                J = (1 << M + 4 - Se) - 1; J >= 0; --J)
                    I[le | J << Se] = Se & 15 | D << 4;
        return M
    }
    var tc = De ? new Uint16Array(512) : dn(512)
      , ne = De ? new Uint16Array(32) : dn(32);
    if (!De) {
        for (var _e = 0; _e < 512; ++_e)
            tc[_e] = 0;
        for (_e = 0; _e < 32; ++_e)
            ne[_e] = 0
    }
    (function() {
        for (var _ = [], I = 0; I < 32; I++)
            _.push(5);
        ca(_, ne, 32);
        var T = [];
        for (I = 0; I <= 143; I++)
            T.push(8);
        for (; I <= 255; I++)
            T.push(9);
        for (; I <= 279; I++)
            T.push(7);
        for (; I <= 287; I++)
            T.push(8);
        ca(T, tc, 288)
    }
    )();
    var Oe = function() {
        for (var I = De ? new Uint8Array(32768) : [], T = 0, M = 0; T < Ce.length - 1; ++T)
            for (; M < Ce[T + 1]; ++M)
                I[M] = T;
        for (; M < 32768; ++M)
            I[M] = 29;
        var R = De ? new Uint8Array(259) : [];
        for (T = 0,
        M = 0; T < te.length - 1; ++T)
            for (; M < te[T + 1]; ++M)
                R[M] = T;
        function D(le, ee) {
            for (var Z = 0; Z < le.length; ) {
                var ie = Math.min(65535, le.length - Z)
                  , Se = Z + ie == le.length;
                for (ee.write_shift(1, +Se),
                ee.write_shift(2, ie),
                ee.write_shift(2, ~ie & 65535); ie-- > 0; )
                    ee[ee.l++] = le[Z++]
            }
            return ee.l
        }
        function J(le, ee) {
            for (var Z = 0, ie = 0, Se = De ? new Uint16Array(32768) : []; ie < le.length; ) {
                var ke = Math.min(65535, le.length - ie);
                if (ke < 10) {
                    for (Z = ns(ee, Z, +(ie + ke == le.length)),
                    Z & 7 && (Z += 8 - (Z & 7)),
                    ee.l = Z / 8 | 0,
                    ee.write_shift(2, ke),
                    ee.write_shift(2, ~ke & 65535); ke-- > 0; )
                        ee[ee.l++] = le[ie++];
                    Z = ee.l * 8;
                    continue
                }
                Z = ns(ee, Z, +(ie + ke == le.length) + 2);
                for (var ze = 0; ke-- > 0; ) {
                    var Ae = le[ie];
                    ze = (ze << 5 ^ Ae) & 32767;
                    var Le = -1
                      , gt = 0;
                    if ((Le = Se[ze]) && (Le |= ie & -32768,
                    Le > ie && (Le -= 32768),
                    Le < ie))
                        for (; le[Le + gt] == le[ie + gt] && gt < 250; )
                            ++gt;
                    if (gt > 2) {
                        Ae = R[gt],
                        Ae <= 22 ? Z = is(ee, Z, ge[Ae + 1] >> 1) - 1 : (is(ee, Z, 3),
                        Z += 5,
                        is(ee, Z, ge[Ae - 23] >> 5),
                        Z += 3);
                        var vn = Ae < 8 ? 0 : Ae - 4 >> 2;
                        vn > 0 && (ol(ee, Z, gt - te[Ae]),
                        Z += vn),
                        Ae = I[ie - Le],
                        Z = is(ee, Z, ge[Ae] >> 3),
                        Z -= 3;
                        var Br = Ae < 4 ? 0 : Ae - 2 >> 1;
                        Br > 0 && (ol(ee, Z, ie - Le - Ce[Ae]),
                        Z += Br);
                        for (var Kn = 0; Kn < gt; ++Kn)
                            Se[ze] = ie & 32767,
                            ze = (ze << 5 ^ le[ie]) & 32767,
                            ++ie;
                        ke -= gt - 1
                    } else
                        Ae <= 143 ? Ae = Ae + 48 : Z = Bi(ee, Z, 1),
                        Z = is(ee, Z, ge[Ae]),
                        Se[ze] = ie & 32767,
                        ++ie
                }
                Z = is(ee, Z, 0) - 1
            }
            return ee.l = (Z + 7) / 8 | 0,
            ee.l
        }
        return function(ee, Z) {
            return ee.length < 8 ? D(ee, Z) : J(ee, Z)
        }
    }();
    function ht(_) {
        var I = ce(50 + Math.floor(_.length * 1.1))
          , T = Oe(_, I);
        return I.slice(0, T)
    }
    var At = De ? new Uint16Array(32768) : dn(32768)
      , rn = De ? new Uint16Array(32768) : dn(32768)
      , An = De ? new Uint16Array(128) : dn(128)
      , _o = 1
      , Ch = 1;
    function SP(_, I) {
        var T = Xt(_, I) + 257;
        I += 5;
        var M = Xt(_, I) + 1;
        I += 5;
        var R = bi(_, I) + 4;
        I += 4;
        for (var D = 0, J = De ? new Uint8Array(19) : dn(19), le = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], ee = 1, Z = De ? new Uint8Array(8) : dn(8), ie = De ? new Uint8Array(8) : dn(8), Se = J.length, ke = 0; ke < R; ++ke)
            J[U[ke]] = D = Ot(_, I),
            ee < D && (ee = D),
            Z[D]++,
            I += 3;
        var ze = 0;
        for (Z[0] = 0,
        ke = 1; ke <= ee; ++ke)
            ie[ke] = ze = ze + Z[ke - 1] << 1;
        for (ke = 0; ke < Se; ++ke)
            (ze = J[ke]) != 0 && (le[ke] = ie[ze]++);
        var Ae = 0;
        for (ke = 0; ke < Se; ++ke)
            if (Ae = J[ke],
            Ae != 0) {
                ze = ge[le[ke]] >> 8 - Ae;
                for (var Le = (1 << 7 - Ae) - 1; Le >= 0; --Le)
                    An[ze | Le << Ae] = Ae & 7 | ke << 3
            }
        var gt = [];
        for (ee = 1; gt.length < T + M; )
            switch (ze = An[Ue(_, I)],
            I += ze & 7,
            ze >>>= 3) {
            case 16:
                for (D = 3 + hn(_, I),
                I += 2,
                ze = gt[gt.length - 1]; D-- > 0; )
                    gt.push(ze);
                break;
            case 17:
                for (D = 3 + Ot(_, I),
                I += 3; D-- > 0; )
                    gt.push(0);
                break;
            case 18:
                for (D = 11 + Ue(_, I),
                I += 7; D-- > 0; )
                    gt.push(0);
                break;
            default:
                gt.push(ze),
                ee < ze && (ee = ze);
                break
            }
        var vn = gt.slice(0, T)
          , Br = gt.slice(T);
        for (ke = T; ke < 286; ++ke)
            vn[ke] = 0;
        for (ke = M; ke < 30; ++ke)
            Br[ke] = 0;
        return _o = ca(vn, At, 286),
        Ch = ca(Br, rn, 30),
        I
    }
    function bP(_, I) {
        if (_[0] == 3 && !(_[1] & 3))
            return [t0(I), 2];
        for (var T = 0, M = 0, R = Hx(I || 1 << 18), D = 0, J = R.length >>> 0, le = 0, ee = 0; !(M & 1); ) {
            if (M = Ot(_, T),
            T += 3,
            M >>> 1)
                M >> 1 == 1 ? (le = 9,
                ee = 5) : (T = SP(_, T),
                le = _o,
                ee = Ch);
            else {
                T & 7 && (T += 8 - (T & 7));
                var Z = _[T >>> 3] | _[(T >>> 3) + 1] << 8;
                if (T += 32,
                Z > 0)
                    for (!I && J < D + Z && (R = Xn(R, D + Z),
                    J = R.length); Z-- > 0; )
                        R[D++] = _[T >>> 3],
                        T += 8;
                continue
            }
            for (; ; ) {
                !I && J < D + 32767 && (R = Xn(R, D + 32767),
                J = R.length);
                var ie = Zi(_, T, le)
                  , Se = M >>> 1 == 1 ? tc[ie] : At[ie];
                if (T += Se & 15,
                Se >>>= 4,
                !(Se >>> 8 & 255))
                    R[D++] = Se;
                else {
                    if (Se == 256)
                        break;
                    Se -= 257;
                    var ke = Se < 8 ? 0 : Se - 4 >> 2;
                    ke > 5 && (ke = 0);
                    var ze = D + te[Se];
                    ke > 0 && (ze += Zi(_, T, ke),
                    T += ke),
                    ie = Zi(_, T, ee),
                    Se = M >>> 1 == 1 ? ne[ie] : rn[ie],
                    T += Se & 15,
                    Se >>>= 4;
                    var Ae = Se < 4 ? 0 : Se - 2 >> 1
                      , Le = Ce[Se];
                    for (Ae > 0 && (Le += Zi(_, T, Ae),
                    T += Ae),
                    !I && J < ze && (R = Xn(R, ze + 100),
                    J = R.length); D < ze; )
                        R[D] = R[D - Le],
                        ++D
                }
            }
        }
        return I ? [R, T + 7 >>> 3] : [R.slice(0, D), T + 7 >>> 3]
    }
    function V8(_, I) {
        var T = _.slice(_.l || 0)
          , M = bP(T, I);
        return _.l += M[1],
        M[0]
    }
    function $8(_, I) {
        if (_)
            typeof console < "u" && console.error(I);
        else
            throw new Error(I)
    }
    function W8(_, I) {
        var T = _;
        Ss(T, 0);
        var M = []
          , R = []
          , D = {
            FileIndex: M,
            FullPaths: R
        };
        E(D, {
            root: I.root
        });
        for (var J = T.length - 4; (T[J] != 80 || T[J + 1] != 75 || T[J + 2] != 5 || T[J + 3] != 6) && J >= 0; )
            --J;
        T.l = J + 4,
        T.l += 4;
        var le = T.read_shift(2);
        T.l += 6;
        var ee = T.read_shift(4);
        for (T.l = ee,
        J = 0; J < le; ++J) {
            T.l += 20;
            var Z = T.read_shift(4)
              , ie = T.read_shift(4)
              , Se = T.read_shift(2)
              , ke = T.read_shift(2)
              , ze = T.read_shift(2);
            T.l += 8;
            var Ae = T.read_shift(4)
              , Le = a(T.slice(T.l + Se, T.l + Se + ke));
            T.l += Se + ke + ze;
            var gt = T.l;
            T.l = Ae + 4,
            xP(T, Z, ie, D, Le),
            T.l = gt
        }
        return D
    }
    function xP(_, I, T, M, R) {
        _.l += 2;
        var D = _.read_shift(2)
          , J = _.read_shift(2)
          , le = o(_);
        if (D & 8257)
            throw new Error("Unsupported ZIP encryption");
        for (var ee = _.read_shift(4), Z = _.read_shift(4), ie = _.read_shift(4), Se = _.read_shift(2), ke = _.read_shift(2), ze = "", Ae = 0; Ae < Se; ++Ae)
            ze += String.fromCharCode(_[_.l++]);
        if (ke) {
            var Le = a(_.slice(_.l, _.l + ke));
            (Le[21589] || {}).mt && (le = Le[21589].mt),
            ((R || {})[21589] || {}).mt && (le = R[21589].mt)
        }
        _.l += ke;
        var gt = _.slice(_.l, _.l + Z);
        switch (J) {
        case 8:
            gt = q(_, ie);
            break;
        case 0:
            break;
        default:
            throw new Error("Unsupported ZIP Compression method " + J)
        }
        var vn = !1;
        D & 8 && (ee = _.read_shift(4),
        ee == 134695760 && (ee = _.read_shift(4),
        vn = !0),
        Z = _.read_shift(4),
        ie = _.read_shift(4)),
        Z != I && $8(vn, "Bad compressed size: " + I + " != " + Z),
        ie != T && $8(vn, "Bad uncompressed size: " + T + " != " + ie),
        Wp(M, ze, gt, {
            unsafe: !0,
            mt: le
        })
    }
    function wP(_, I) {
        var T = I || {}
          , M = []
          , R = []
          , D = ce(1)
          , J = T.compression ? 8 : 0
          , le = 0
          , ee = !1;
        ee && (le |= 8);
        var Z = 0
          , ie = 0
          , Se = 0
          , ke = 0
          , ze = _.FullPaths[0]
          , Ae = ze
          , Le = _.FileIndex[0]
          , gt = []
          , vn = 0;
        for (Z = 1; Z < _.FullPaths.length; ++Z)
            if (Ae = _.FullPaths[Z].slice(ze.length),
            Le = _.FileIndex[Z],
            !(!Le.size || !Le.content || Ae == "Sh33tJ5")) {
                var Br = Se
                  , Kn = ce(Ae.length);
                for (ie = 0; ie < Ae.length; ++ie)
                    Kn.write_shift(1, Ae.charCodeAt(ie) & 127);
                Kn = Kn.slice(0, Kn.l),
                gt[ke] = HL.buf(Le.content, 0);
                var rs = Le.content;
                J == 8 && (rs = L(rs)),
                D = ce(30),
                D.write_shift(4, 67324752),
                D.write_shift(2, 20),
                D.write_shift(2, le),
                D.write_shift(2, J),
                Le.mt ? s(D, Le.mt) : D.write_shift(4, 0),
                D.write_shift(-4, le & 8 ? 0 : gt[ke]),
                D.write_shift(4, le & 8 ? 0 : rs.length),
                D.write_shift(4, le & 8 ? 0 : Le.content.length),
                D.write_shift(2, Kn.length),
                D.write_shift(2, 0),
                Se += D.length,
                M.push(D),
                Se += Kn.length,
                M.push(Kn),
                Se += rs.length,
                M.push(rs),
                le & 8 && (D = ce(12),
                D.write_shift(-4, gt[ke]),
                D.write_shift(4, rs.length),
                D.write_shift(4, Le.content.length),
                Se += D.l,
                M.push(D)),
                D = ce(46),
                D.write_shift(4, 33639248),
                D.write_shift(2, 0),
                D.write_shift(2, 20),
                D.write_shift(2, le),
                D.write_shift(2, J),
                D.write_shift(4, 0),
                D.write_shift(-4, gt[ke]),
                D.write_shift(4, rs.length),
                D.write_shift(4, Le.content.length),
                D.write_shift(2, Kn.length),
                D.write_shift(2, 0),
                D.write_shift(2, 0),
                D.write_shift(2, 0),
                D.write_shift(2, 0),
                D.write_shift(4, 0),
                D.write_shift(4, Br),
                vn += D.l,
                R.push(D),
                vn += Kn.length,
                R.push(Kn),
                ++ke
            }
        return D = ce(22),
        D.write_shift(4, 101010256),
        D.write_shift(2, 0),
        D.write_shift(2, 0),
        D.write_shift(2, ke),
        D.write_shift(2, ke),
        D.write_shift(4, vn),
        D.write_shift(4, Se),
        D.write_shift(2, 0),
        $i([$i(M), $i(R), D])
    }
    var p5 = {
        htm: "text/html",
        xml: "text/xml",
        gif: "image/gif",
        jpg: "image/jpeg",
        png: "image/png",
        mso: "application/x-mso",
        thmx: "application/vnd.ms-officetheme",
        sh33tj5: "application/octet-stream"
    };
    function CP(_, I) {
        if (_.ctype)
            return _.ctype;
        var T = _.name || ""
          , M = T.match(/\.([^\.]+)$/);
        return M && p5[M[1]] || I && (M = (T = I).match(/[\.\\]([^\.\\])+$/),
        M && p5[M[1]]) ? p5[M[1]] : "application/octet-stream"
    }
    function EP(_) {
        for (var I = C1(_), T = [], M = 0; M < I.length; M += 76)
            T.push(I.slice(M, M + 76));
        return T.join(`\r
`) + `\r
`
    }
    function TP(_) {
        var I = _.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g, function(Z) {
            var ie = Z.charCodeAt(0).toString(16).toUpperCase();
            return "=" + (ie.length == 1 ? "0" + ie : ie)
        });
        I = I.replace(/ $/mg, "=20").replace(/\t$/mg, "=09"),
        I.charAt(0) == `
` && (I = "=0D" + I.slice(1)),
        I = I.replace(/\r(?!\n)/mg, "=0D").replace(/\n\n/mg, `
=0A`).replace(/([^\r\n])\n/mg, "$1=0A");
        for (var T = [], M = I.split(`\r
`), R = 0; R < M.length; ++R) {
            var D = M[R];
            if (D.length == 0) {
                T.push("");
                continue
            }
            for (var J = 0; J < D.length; ) {
                var le = 76
                  , ee = D.slice(J, J + le);
                ee.charAt(le - 1) == "=" ? le-- : ee.charAt(le - 2) == "=" ? le -= 2 : ee.charAt(le - 3) == "=" && (le -= 3),
                ee = D.slice(J, J + le),
                J += le,
                J < D.length && (ee += "="),
                T.push(ee)
            }
        }
        return T.join(`\r
`)
    }
    function OP(_) {
        for (var I = [], T = 0; T < _.length; ++T) {
            for (var M = _[T]; T <= _.length && M.charAt(M.length - 1) == "="; )
                M = M.slice(0, M.length - 1) + _[++T];
            I.push(M)
        }
        for (var R = 0; R < I.length; ++R)
            I[R] = I[R].replace(/[=][0-9A-Fa-f]{2}/g, function(D) {
                return String.fromCharCode(parseInt(D.slice(1), 16))
            });
        return lo(I.join(`\r
`))
    }
    function MP(_, I, T) {
        for (var M = "", R = "", D = "", J, le = 0; le < 10; ++le) {
            var ee = I[le];
            if (!ee || ee.match(/^\s*$/))
                break;
            var Z = ee.match(/^(.*?):\s*([^\s].*)$/);
            if (Z)
                switch (Z[1].toLowerCase()) {
                case "content-location":
                    M = Z[2].trim();
                    break;
                case "content-type":
                    D = Z[2].trim();
                    break;
                case "content-transfer-encoding":
                    R = Z[2].trim();
                    break
                }
        }
        switch (++le,
        R.toLowerCase()) {
        case "base64":
            J = lo(Ba(I.slice(le).join("")));
            break;
        case "quoted-printable":
            J = OP(I.slice(le));
            break;
        default:
            throw new Error("Unsupported Content-Transfer-Encoding " + R)
        }
        var ie = Wp(_, M.slice(T.length), J, {
            unsafe: !0
        });
        D && (ie.ctype = D)
    }
    function PP(_, I) {
        if (it(_.slice(0, 13)).toLowerCase() != "mime-version:")
            throw new Error("Unsupported MAD header");
        var T = I && I.root || ""
          , M = (zt && Buffer.isBuffer(_) ? _.toString("binary") : it(_)).split(`\r
`)
          , R = 0
          , D = "";
        for (R = 0; R < M.length; ++R)
            if (D = M[R],
            !!/^Content-Location:/i.test(D) && (D = D.slice(D.indexOf("file")),
            T || (T = D.slice(0, D.lastIndexOf("/") + 1)),
            D.slice(0, T.length) != T))
                for (; T.length > 0 && (T = T.slice(0, T.length - 1),
                T = T.slice(0, T.lastIndexOf("/") + 1),
                D.slice(0, T.length) != T); )
                    ;
        var J = (M[1] || "").match(/boundary="(.*?)"/);
        if (!J)
            throw new Error("MAD cannot find boundary");
        var le = "--" + (J[1] || "")
          , ee = []
          , Z = []
          , ie = {
            FileIndex: ee,
            FullPaths: Z
        };
        E(ie);
        var Se, ke = 0;
        for (R = 0; R < M.length; ++R) {
            var ze = M[R];
            ze !== le && ze !== le + "--" || (ke++ && MP(ie, M.slice(Se, R), T),
            Se = R)
        }
        return ie
    }
    function kP(_, I) {
        var T = I || {}
          , M = T.boundary || "SheetJS";
        M = "------=" + M;
        for (var R = ["MIME-Version: 1.0", 'Content-Type: multipart/related; boundary="' + M.slice(2) + '"', "", "", ""], D = _.FullPaths[0], J = D, le = _.FileIndex[0], ee = 1; ee < _.FullPaths.length; ++ee)
            if (J = _.FullPaths[ee].slice(D.length),
            le = _.FileIndex[ee],
            !(!le.size || !le.content || J == "Sh33tJ5")) {
                J = J.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g, function(gt) {
                    return "_x" + gt.charCodeAt(0).toString(16) + "_"
                }).replace(/[\u0080-\uFFFF]/g, function(gt) {
                    return "_u" + gt.charCodeAt(0).toString(16) + "_"
                });
                for (var Z = le.content, ie = zt && Buffer.isBuffer(Z) ? Z.toString("binary") : it(Z), Se = 0, ke = Math.min(1024, ie.length), ze = 0, Ae = 0; Ae <= ke; ++Ae)
                    (ze = ie.charCodeAt(Ae)) >= 32 && ze < 128 && ++Se;
                var Le = Se >= ke * 4 / 5;
                R.push(M),
                R.push("Content-Location: " + (T.root || "file:///C:/SheetJS/") + J),
                R.push("Content-Transfer-Encoding: " + (Le ? "quoted-printable" : "base64")),
                R.push("Content-Type: " + CP(le, J)),
                R.push(""),
                R.push(Le ? TP(ie) : EP(ie))
            }
        return R.push(M + `--\r
`),
        R.join(`\r
`)
    }
    function AP(_) {
        var I = {};
        return E(I, _),
        I
    }
    function Wp(_, I, T, M) {
        var R = M && M.unsafe;
        R || E(_);
        var D = !R && nn.find(_, I);
        if (!D) {
            var J = _.FullPaths[0];
            I.slice(0, J.length) == J ? J = I : (J.slice(-1) != "/" && (J += "/"),
            J = (J + I).replace("//", "/")),
            D = {
                name: r(I),
                type: 2
            },
            _.FileIndex.push(D),
            _.FullPaths.push(J),
            R || nn.utils.cfb_gc(_)
        }
        return D.content = T,
        D.size = T ? T.length : 0,
        M && (M.CLSID && (D.clsid = M.CLSID),
        M.mt && (D.mt = M.mt),
        M.ct && (D.ct = M.ct)),
        D
    }
    function IP(_, I) {
        E(_);
        var T = nn.find(_, I);
        if (T) {
            for (var M = 0; M < _.FileIndex.length; ++M)
                if (_.FileIndex[M] == T)
                    return _.FileIndex.splice(M, 1),
                    _.FullPaths.splice(M, 1),
                    !0
        }
        return !1
    }
    function RP(_, I, T) {
        E(_);
        var M = nn.find(_, I);
        if (M) {
            for (var R = 0; R < _.FileIndex.length; ++R)
                if (_.FileIndex[R] == M)
                    return _.FileIndex[R].name = r(T),
                    _.FullPaths[R] = T,
                    !0
        }
        return !1
    }
    function DP(_) {
        O(_, !0)
    }
    return t.find = X,
    t.read = N,
    t.parse = u,
    t.write = fe,
    t.writeFile = pt,
    t.utils = {
        cfb_new: AP,
        cfb_add: Wp,
        cfb_del: IP,
        cfb_mov: RP,
        cfb_gc: DP,
        ReadShift: _1,
        CheckField: Qw,
        prep_blob: Ss,
        bconcat: $i,
        use_zlib: A,
        _deflateRaw: ht,
        _inflateRaw: V8,
        consts: Xe
    },
    t
}(), q3;
function GL(e) {
    return typeof e == "string" ? h2(e) : Array.isArray(e) ? fL(e) : e
}
function k1(e, t, n) {
    if (typeof q3 < "u" && q3.writeFileSync)
        return n ? q3.writeFileSync(e, t, n) : q3.writeFileSync(e, t);
    if (typeof Deno < "u") {
        if (n && typeof t == "string")
            switch (n) {
            case "utf8":
                t = new TextEncoder(n).encode(t);
                break;
            case "binary":
                t = h2(t);
                break;
            default:
                throw new Error("Unsupported encoding " + n)
            }
        return Deno.writeFileSync(e, t)
    }
    var i = n == "utf8" ? Da(t) : t;
    if (typeof IE_SaveFile < "u")
        return IE_SaveFile(i, e);
    if (typeof Blob < "u") {
        var r = new Blob([GL(i)],{
            type: "application/octet-stream"
        });
        if (typeof navigator < "u" && navigator.msSaveBlob)
            return navigator.msSaveBlob(r, e);
        if (typeof saveAs < "u")
            return saveAs(r, e);
        if (typeof URL < "u" && typeof document < "u" && document.createElement && URL.createObjectURL) {
            var s = URL.createObjectURL(r);
            if (typeof chrome == "object" && typeof (chrome.downloads || {}).download == "function")
                return URL.revokeObjectURL && typeof setTimeout < "u" && setTimeout(function() {
                    URL.revokeObjectURL(s)
                }, 6e4),
                chrome.downloads.download({
                    url: s,
                    filename: e,
                    saveAs: !0
                });
            var o = document.createElement("a");
            if (o.download != null)
                return o.download = e,
                o.href = s,
                document.body.appendChild(o),
                o.click(),
                document.body.removeChild(o),
                URL.revokeObjectURL && typeof setTimeout < "u" && setTimeout(function() {
                    URL.revokeObjectURL(s)
                }, 6e4),
                s
        }
    }
    if (typeof $ < "u" && typeof File < "u" && typeof Folder < "u")
        try {
            var a = File(e);
            return a.open("w"),
            a.encoding = "binary",
            Array.isArray(t) && (t = P1(t)),
            a.write(t),
            a.close(),
            t
        } catch (c) {
            if (!c.message || !c.message.match(/onstruct/))
                throw c
        }
    throw new Error("cannot save file " + e)
}
function qi(e) {
    for (var t = Object.keys(e), n = [], i = 0; i < t.length; ++i)
        Object.prototype.hasOwnProperty.call(e, t[i]) && n.push(t[i]);
    return n
}
function Xx(e, t) {
    for (var n = [], i = qi(e), r = 0; r !== i.length; ++r)
        n[e[i[r]][t]] == null && (n[e[i[r]][t]] = i[r]);
    return n
}
function C7(e) {
    for (var t = [], n = qi(e), i = 0; i !== n.length; ++i)
        t[e[n[i]]] = n[i];
    return t
}
function p2(e) {
    for (var t = [], n = qi(e), i = 0; i !== n.length; ++i)
        t[e[n[i]]] = parseInt(n[i], 10);
    return t
}
function VL(e) {
    for (var t = [], n = qi(e), i = 0; i !== n.length; ++i)
        t[e[n[i]]] == null && (t[e[n[i]]] = []),
        t[e[n[i]]].push(n[i]);
    return t
}
var t2 = new Date(1899,11,30,0,0,0);
function Qr(e, t) {
    var n = e.getTime();
    t && (n -= 1462 * 24 * 60 * 60 * 1e3);
    var i = t2.getTime() + (e.getTimezoneOffset() - t2.getTimezoneOffset()) * 6e4;
    return (n - i) / (24 * 60 * 60 * 1e3)
}
var Uw = new Date
  , $L = t2.getTime() + (Uw.getTimezoneOffset() - t2.getTimezoneOffset()) * 6e4
  , Kx = Uw.getTimezoneOffset();
function Hw(e) {
    var t = new Date;
    return t.setTime(e * 24 * 60 * 60 * 1e3 + $L),
    t.getTimezoneOffset() !== Kx && t.setTime(t.getTime() + (t.getTimezoneOffset() - Kx) * 6e4),
    t
}
var Yx = new Date("2017-02-19T19:06:09.000Z")
  , Gw = isNaN(Yx.getFullYear()) ? new Date("2/19/17") : Yx
  , WL = Gw.getFullYear() == 2017;
function Mr(e, t) {
    var n = new Date(e);
    if (WL)
        return t > 0 ? n.setTime(n.getTime() + n.getTimezoneOffset() * 60 * 1e3) : t < 0 && n.setTime(n.getTime() - n.getTimezoneOffset() * 60 * 1e3),
        n;
    if (e instanceof Date)
        return e;
    if (Gw.getFullYear() == 1917 && !isNaN(n.getFullYear())) {
        var i = n.getFullYear();
        return e.indexOf("" + i) > -1 || n.setFullYear(n.getFullYear() + 100),
        n
    }
    var r = e.match(/\d+/g) || ["2017", "2", "19", "0", "0", "0"]
      , s = new Date(+r[0],+r[1] - 1,+r[2],+r[3] || 0,+r[4] || 0,+r[5] || 0);
    return e.indexOf("Z") > -1 && (s = new Date(s.getTime() - s.getTimezoneOffset() * 60 * 1e3)),
    s
}
function g2(e, t) {
    if (zt && Buffer.isBuffer(e)) {
        if (t) {
            if (e[0] == 255 && e[1] == 254)
                return Da(e.slice(2).toString("utf16le"));
            if (e[1] == 254 && e[2] == 255)
                return Da(dL(e.slice(2).toString("binary")))
        }
        return e.toString("binary")
    }
    if (typeof TextDecoder < "u")
        try {
            if (t) {
                if (e[0] == 255 && e[1] == 254)
                    return Da(new TextDecoder("utf-16le").decode(e.slice(2)));
                if (e[0] == 254 && e[1] == 255)
                    return Da(new TextDecoder("utf-16be").decode(e.slice(2)))
            }
            var n = {
                "\u20AC": "\x80",
                "\u201A": "\x82",
                \u0192: "\x83",
                "\u201E": "\x84",
                "\u2026": "\x85",
                "\u2020": "\x86",
                "\u2021": "\x87",
                "\u02C6": "\x88",
                "\u2030": "\x89",
                \u0160: "\x8A",
                "\u2039": "\x8B",
                \u0152: "\x8C",
                \u017D: "\x8E",
                "\u2018": "\x91",
                "\u2019": "\x92",
                "\u201C": "\x93",
                "\u201D": "\x94",
                "\u2022": "\x95",
                "\u2013": "\x96",
                "\u2014": "\x97",
                "\u02DC": "\x98",
                "\u2122": "\x99",
                \u0161: "\x9A",
                "\u203A": "\x9B",
                \u0153: "\x9C",
                \u017E: "\x9E",
                \u0178: "\x9F"
            };
            return Array.isArray(e) && (e = new Uint8Array(e)),
            new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g, function(s) {
                return n[s] || s
            })
        } catch {}
    for (var i = [], r = 0; r != e.length; ++r)
        i.push(String.fromCharCode(e[r]));
    return i.join("")
}
function Jr(e) {
    if (typeof JSON < "u" && !Array.isArray(e))
        return JSON.parse(JSON.stringify(e));
    if (typeof e != "object" || e == null)
        return e;
    if (e instanceof Date)
        return new Date(e.getTime());
    var t = {};
    for (var n in e)
        Object.prototype.hasOwnProperty.call(e, n) && (t[n] = Jr(e[n]));
    return t
}
function Ln(e, t) {
    for (var n = ""; n.length < t; )
        n += e;
    return n
}
function Fa(e) {
    var t = Number(e);
    if (!isNaN(t))
        return isFinite(t) ? t : NaN;
    if (!/\d/.test(e))
        return t;
    var n = 1
      , i = e.replace(/([\d]),([\d])/g, "$1$2").replace(/[$]/g, "").replace(/[%]/g, function() {
        return n *= 100,
        ""
    });
    return !isNaN(t = Number(i)) || (i = i.replace(/[(](.*)[)]/, function(r, s) {
        return n = -n,
        s
    }),
    !isNaN(t = Number(i))) ? t / n : t
}
var jL = ["january", "february", "march", "april", "may", "june", "july", "august", "september", "october", "november", "december"];
function E1(e) {
    var t = new Date(e)
      , n = new Date(NaN)
      , i = t.getYear()
      , r = t.getMonth()
      , s = t.getDate();
    if (isNaN(s))
        return n;
    var o = e.toLowerCase();
    if (o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)) {
        if (o = o.replace(/[^a-z]/g, "").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/, ""),
        o.length > 3 && jL.indexOf(o) == -1)
            return n
    } else if (o.match(/[a-z]/))
        return n;
    return i < 0 || i > 8099 ? n : (r > 0 || s > 1) && i != 101 ? t : e.match(/[^-0-9:,\/\\]/) ? n : t
}
function Tt(e, t, n) {
    if (e.FullPaths) {
        if (typeof n == "string") {
            var i;
            return zt ? i = Ha(n) : i = pL(n),
            nn.utils.cfb_add(e, t, i)
        }
        nn.utils.cfb_add(e, t, n)
    } else
        e.file(t, n)
}
function E7() {
    return nn.utils.cfb_new()
}
var ri = `<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`;
var qL = {
    "&quot;": '"',
    "&apos;": "'",
    "&gt;": ">",
    "&lt;": "<",
    "&amp;": "&"
}
  , T7 = C7(qL);
var O7 = /[&<>'"]/g
  , zL = /[\u0000-\u0008\u000b-\u001f]/g;
function en(e) {
    var t = e + "";
    return t.replace(O7, function(n) {
        return T7[n]
    }).replace(zL, function(n) {
        return "_x" + ("000" + n.charCodeAt(0).toString(16)).slice(-4) + "_"
    })
}
function Qx(e) {
    return en(e).replace(/ /g, "_x0020_")
}
var Vw = /[\u0000-\u001f]/g;
function XL(e) {
    var t = e + "";
    return t.replace(O7, function(n) {
        return T7[n]
    }).replace(/\n/g, "<br/>").replace(Vw, function(n) {
        return "&#x" + ("000" + n.charCodeAt(0).toString(16)).slice(-4) + ";"
    })
}
function KL(e) {
    var t = e + "";
    return t.replace(O7, function(n) {
        return T7[n]
    }).replace(Vw, function(n) {
        return "&#x" + n.charCodeAt(0).toString(16).toUpperCase() + ";"
    })
}
function YL(e) {
    return e.replace(/(\r\n|[\r\n])/g, "&#10;")
}
function QL(e) {
    switch (e) {
    case 1:
    case !0:
    case "1":
    case "true":
    case "TRUE":
        return !0;
    default:
        return !1
    }
}
function h7(e) {
    for (var t = "", n = 0, i = 0, r = 0, s = 0, o = 0, a = 0; n < e.length; ) {
        if (i = e.charCodeAt(n++),
        i < 128) {
            t += String.fromCharCode(i);
            continue
        }
        if (r = e.charCodeAt(n++),
        i > 191 && i < 224) {
            o = (i & 31) << 6,
            o |= r & 63,
            t += String.fromCharCode(o);
            continue
        }
        if (s = e.charCodeAt(n++),
        i < 240) {
            t += String.fromCharCode((i & 15) << 12 | (r & 63) << 6 | s & 63);
            continue
        }
        o = e.charCodeAt(n++),
        a = ((i & 7) << 18 | (r & 63) << 12 | (s & 63) << 6 | o & 63) - 65536,
        t += String.fromCharCode(55296 + (a >>> 10 & 1023)),
        t += String.fromCharCode(56320 + (a & 1023))
    }
    return t
}
function Jx(e) {
    var t = t0(2 * e.length), n, i, r = 1, s = 0, o = 0, a;
    for (i = 0; i < e.length; i += r)
        r = 1,
        (a = e.charCodeAt(i)) < 128 ? n = a : a < 224 ? (n = (a & 31) * 64 + (e.charCodeAt(i + 1) & 63),
        r = 2) : a < 240 ? (n = (a & 15) * 4096 + (e.charCodeAt(i + 1) & 63) * 64 + (e.charCodeAt(i + 2) & 63),
        r = 3) : (r = 4,
        n = (a & 7) * 262144 + (e.charCodeAt(i + 1) & 63) * 4096 + (e.charCodeAt(i + 2) & 63) * 64 + (e.charCodeAt(i + 3) & 63),
        n -= 65536,
        o = 55296 + (n >>> 10 & 1023),
        n = 56320 + (n & 1023)),
        o !== 0 && (t[s++] = o & 255,
        t[s++] = o >>> 8,
        o = 0),
        t[s++] = n % 256,
        t[s++] = n >>> 8;
    return t.slice(0, s).toString("ucs2")
}
function Zx(e) {
    return Ha(e, "binary").toString("utf8")
}
var z3 = "foo bar baz\xE2\x98\x83\xF0\x9F\x8D\xA3"
  , v1 = zt && (Zx(z3) == h7(z3) && Zx || Jx(z3) == h7(z3) && Jx) || h7
  , Da = zt ? function(e) {
    return Ha(e, "utf8").toString("binary")
}
: function(e) {
    for (var t = [], n = 0, i = 0, r = 0; n < e.length; )
        switch (i = e.charCodeAt(n++),
        !0) {
        case i < 128:
            t.push(String.fromCharCode(i));
            break;
        case i < 2048:
            t.push(String.fromCharCode(192 + (i >> 6))),
            t.push(String.fromCharCode(128 + (i & 63)));
            break;
        case (i >= 55296 && i < 57344):
            i -= 55296,
            r = e.charCodeAt(n++) - 56320 + (i << 10),
            t.push(String.fromCharCode(240 + (r >> 18 & 7))),
            t.push(String.fromCharCode(144 + (r >> 12 & 63))),
            t.push(String.fromCharCode(128 + (r >> 6 & 63))),
            t.push(String.fromCharCode(128 + (r & 63)));
            break;
        default:
            t.push(String.fromCharCode(224 + (i >> 12))),
            t.push(String.fromCharCode(128 + (i >> 6 & 63))),
            t.push(String.fromCharCode(128 + (i & 63)))
        }
    return t.join("")
}
;
var JL = function() {
    var e = [["nbsp", " "], ["middot", "\xB7"], ["quot", '"'], ["apos", "'"], ["gt", ">"], ["lt", "<"], ["amp", "&"]].map(function(t) {
        return [new RegExp("&" + t[0] + ";","ig"), t[1]]
    });
    return function(n) {
        for (var i = n.replace(/^[\t\n\r ]+/, "").replace(/[\t\n\r ]+$/, "").replace(/>\s+/g, ">").replace(/\s+</g, "<").replace(/[\t\n\r ]+/g, " ").replace(/<\s*[bB][rR]\s*\/?>/g, `
`).replace(/<[^>]*>/g, ""), r = 0; r < e.length; ++r)
            i = i.replace(e[r][0], e[r][1]);
        return i
    }
}();
var $w = /(^\s|\s$|\n)/;
function Wi(e, t) {
    return "<" + e + (t.match($w) ? ' xml:space="preserve"' : "") + ">" + t + "</" + e + ">"
}
function T1(e) {
    return qi(e).map(function(t) {
        return " " + t + '="' + e[t] + '"'
    }).join("")
}
function Me(e, t, n) {
    return "<" + e + (n != null ? T1(n) : "") + (t != null ? (t.match($w) ? ' xml:space="preserve"' : "") + ">" + t + "</" + e : "/") + ">"
}
function y7(e, t) {
    try {
        return e.toISOString().replace(/\.\d*/, "")
    } catch (n) {
        if (t)
            throw n
    }
    return ""
}
function ZL(e, t) {
    switch (typeof e) {
    case "string":
        var n = Me("vt:lpwstr", en(e));
        return t && (n = n.replace(/&quot;/g, "_x0022_")),
        n;
    case "number":
        return Me((e | 0) == e ? "vt:i4" : "vt:r8", en(String(e)));
    case "boolean":
        return Me("vt:bool", e ? "true" : "false")
    }
    if (e instanceof Date)
        return Me("vt:filetime", y7(e));
    throw new Error("Unable to serialize " + e)
}
var Ai = {
    CORE_PROPS: "http://schemas.openxmlformats.org/package/2006/metadata/core-properties",
    CUST_PROPS: "http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",
    EXT_PROPS: "http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",
    CT: "http://schemas.openxmlformats.org/package/2006/content-types",
    RELS: "http://schemas.openxmlformats.org/package/2006/relationships",
    TCMNT: "http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",
    dc: "http://purl.org/dc/elements/1.1/",
    dcterms: "http://purl.org/dc/terms/",
    dcmitype: "http://purl.org/dc/dcmitype/",
    mx: "http://schemas.microsoft.com/office/mac/excel/2008/main",
    r: "http://schemas.openxmlformats.org/officeDocument/2006/relationships",
    sjs: "http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",
    vt: "http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",
    xsi: "http://www.w3.org/2001/XMLSchema-instance",
    xsd: "http://www.w3.org/2001/XMLSchema"
}
  , Ku = ["http://schemas.openxmlformats.org/spreadsheetml/2006/main", "http://purl.oclc.org/ooxml/spreadsheetml/main", "http://schemas.microsoft.com/office/excel/2006/main", "http://schemas.microsoft.com/office/excel/2006/2"]
  , bs = {
    o: "urn:schemas-microsoft-com:office:office",
    x: "urn:schemas-microsoft-com:office:excel",
    ss: "urn:schemas-microsoft-com:office:spreadsheet",
    dt: "uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",
    mv: "http://macVmlSchemaUri",
    v: "urn:schemas-microsoft-com:vml",
    html: "http://www.w3.org/TR/REC-html40"
};
function eB(e, t) {
    for (var n = 1 - 2 * (e[t + 7] >>> 7), i = ((e[t + 7] & 127) << 4) + (e[t + 6] >>> 4 & 15), r = e[t + 6] & 15, s = 5; s >= 0; --s)
        r = r * 256 + e[t + s];
    return i == 2047 ? r == 0 ? n * (1 / 0) : NaN : (i == 0 ? i = -1022 : (i -= 1023,
    r += Math.pow(2, 52)),
    n * Math.pow(2, i - 52) * r)
}
function tB(e, t, n) {
    var i = (t < 0 || 1 / t == -1 / 0 ? 1 : 0) << 7
      , r = 0
      , s = 0
      , o = i ? -t : t;
    isFinite(o) ? o == 0 ? r = s = 0 : (r = Math.floor(Math.log(o) / Math.LN2),
    s = o * Math.pow(2, 52 - r),
    r <= -1023 && (!isFinite(s) || s < Math.pow(2, 52)) ? r = -1022 : (s -= Math.pow(2, 52),
    r += 1023)) : (r = 2047,
    s = isNaN(t) ? 26985 : 0);
    for (var a = 0; a <= 5; ++a,
    s /= 256)
        e[n + a] = s & 255;
    e[n + 6] = (r & 15) << 4 | s & 15,
    e[n + 7] = r >> 4 | i
}
var ew = function(e) {
    for (var t = [], n = 10240, i = 0; i < e[0].length; ++i)
        if (e[0][i])
            for (var r = 0, s = e[0][i].length; r < s; r += n)
                t.push.apply(t, e[0][i].slice(r, r + n));
    return t
}
  , tw = zt ? function(e) {
    return e[0].length > 0 && Buffer.isBuffer(e[0][0]) ? Buffer.concat(e[0].map(function(t) {
        return Buffer.isBuffer(t) ? t : Ha(t)
    })) : ew(e)
}
: ew
  , nw = function(e, t, n) {
    for (var i = [], r = t; r < n; r += 2)
        i.push(String.fromCharCode(m1(e, r)));
    return i.join("").replace(Vu, "")
}
  , m2 = zt ? function(e, t, n) {
    return Buffer.isBuffer(e) ? e.toString("utf16le", t, n).replace(Vu, "") : nw(e, t, n)
}
: nw
  , iw = function(e, t, n) {
    for (var i = [], r = t; r < t + n; ++r)
        i.push(("0" + e[r].toString(16)).slice(-2));
    return i.join("")
}
  , Ww = zt ? function(e, t, n) {
    return Buffer.isBuffer(e) ? e.toString("hex", t, t + n) : iw(e, t, n)
}
: iw
  , rw = function(e, t, n) {
    for (var i = [], r = t; r < n; r++)
        i.push(String.fromCharCode(Hu(e, r)));
    return i.join("")
}
  , Yu = zt ? function(t, n, i) {
    return Buffer.isBuffer(t) ? t.toString("utf8", n, i) : rw(t, n, i)
}
: rw
  , jw = function(e, t) {
    var n = ki(e, t);
    return n > 0 ? Yu(e, t + 4, t + 4 + n - 1) : ""
}
  , M7 = jw
  , qw = function(e, t) {
    var n = ki(e, t);
    return n > 0 ? Yu(e, t + 4, t + 4 + n - 1) : ""
}
  , P7 = qw
  , zw = function(e, t) {
    var n = 2 * ki(e, t);
    return n > 0 ? Yu(e, t + 4, t + 4 + n - 1) : ""
}
  , k7 = zw
  , Xw = function(t, n) {
    var i = ki(t, n);
    return i > 0 ? m2(t, n + 4, n + 4 + i) : ""
}
  , A7 = Xw
  , Kw = function(e, t) {
    var n = ki(e, t);
    return n > 0 ? Yu(e, t + 4, t + 4 + n) : ""
}
  , I7 = Kw
  , Yw = function(e, t) {
    return eB(e, t)
}
  , n2 = Yw
  , R7 = function(t) {
    return Array.isArray(t) || typeof Uint8Array < "u" && t instanceof Uint8Array
};
zt && (M7 = function(t, n) {
    if (!Buffer.isBuffer(t))
        return jw(t, n);
    var i = t.readUInt32LE(n);
    return i > 0 ? t.toString("utf8", n + 4, n + 4 + i - 1) : ""
}
,
P7 = function(t, n) {
    if (!Buffer.isBuffer(t))
        return qw(t, n);
    var i = t.readUInt32LE(n);
    return i > 0 ? t.toString("utf8", n + 4, n + 4 + i - 1) : ""
}
,
k7 = function(t, n) {
    if (!Buffer.isBuffer(t))
        return zw(t, n);
    var i = 2 * t.readUInt32LE(n);
    return t.toString("utf16le", n + 4, n + 4 + i - 1)
}
,
A7 = function(t, n) {
    if (!Buffer.isBuffer(t))
        return Xw(t, n);
    var i = t.readUInt32LE(n);
    return t.toString("utf16le", n + 4, n + 4 + i)
}
,
I7 = function(t, n) {
    if (!Buffer.isBuffer(t))
        return Kw(t, n);
    var i = t.readUInt32LE(n);
    return t.toString("utf8", n + 4, n + 4 + i)
}
,
n2 = function(t, n) {
    return Buffer.isBuffer(t) ? t.readDoubleLE(n) : Yw(t, n)
}
,
R7 = function(t) {
    return Buffer.isBuffer(t) || Array.isArray(t) || typeof Uint8Array < "u" && t instanceof Uint8Array
}
);
function nB() {
    m2 = function(e, t, n) {
        return ln.utils.decode(1200, e.slice(t, n)).replace(Vu, "")
    }
    ,
    Yu = function(e, t, n) {
        return ln.utils.decode(65001, e.slice(t, n))
    }
    ,
    M7 = function(e, t) {
        var n = ki(e, t);
        return n > 0 ? ln.utils.decode(zu, e.slice(t + 4, t + 4 + n - 1)) : ""
    }
    ,
    P7 = function(e, t) {
        var n = ki(e, t);
        return n > 0 ? ln.utils.decode(Zl, e.slice(t + 4, t + 4 + n - 1)) : ""
    }
    ,
    k7 = function(e, t) {
        var n = 2 * ki(e, t);
        return n > 0 ? ln.utils.decode(1200, e.slice(t + 4, t + 4 + n - 1)) : ""
    }
    ,
    A7 = function(e, t) {
        var n = ki(e, t);
        return n > 0 ? ln.utils.decode(1200, e.slice(t + 4, t + 4 + n)) : ""
    }
    ,
    I7 = function(e, t) {
        var n = ki(e, t);
        return n > 0 ? ln.utils.decode(65001, e.slice(t + 4, t + 4 + n)) : ""
    }
}
typeof ln < "u" && nB();
var Hu = function(e, t) {
    return e[t]
}
  , m1 = function(e, t) {
    return e[t + 1] * 256 + e[t]
}
  , iB = function(e, t) {
    var n = e[t + 1] * 256 + e[t];
    return n < 32768 ? n : (65535 - n + 1) * -1
}
  , ki = function(e, t) {
    return e[t + 3] * (1 << 24) + (e[t + 2] << 16) + (e[t + 1] << 8) + e[t]
}
  , Jl = function(e, t) {
    return e[t + 3] << 24 | e[t + 2] << 16 | e[t + 1] << 8 | e[t]
}
  , rB = function(e, t) {
    return e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3]
};
function _1(e, t) {
    var n = "", i, r, s = [], o, a, c, l;
    switch (t) {
    case "dbcs":
        if (l = this.l,
        zt && Buffer.isBuffer(this))
            n = this.slice(this.l, this.l + 2 * e).toString("utf16le");
        else
            for (c = 0; c < e; ++c)
                n += String.fromCharCode(m1(this, l)),
                l += 2;
        e *= 2;
        break;
    case "utf8":
        n = Yu(this, this.l, this.l + e);
        break;
    case "utf16le":
        e *= 2,
        n = m2(this, this.l, this.l + e);
        break;
    case "wstr":
        if (typeof ln < "u")
            n = ln.utils.decode(Zl, this.slice(this.l, this.l + 2 * e));
        else
            return _1.call(this, e, "dbcs");
        e = 2 * e;
        break;
    case "lpstr-ansi":
        n = M7(this, this.l),
        e = 4 + ki(this, this.l);
        break;
    case "lpstr-cp":
        n = P7(this, this.l),
        e = 4 + ki(this, this.l);
        break;
    case "lpwstr":
        n = k7(this, this.l),
        e = 4 + 2 * ki(this, this.l);
        break;
    case "lpp4":
        e = 4 + ki(this, this.l),
        n = A7(this, this.l),
        e & 2 && (e += 2);
        break;
    case "8lpp4":
        e = 4 + ki(this, this.l),
        n = I7(this, this.l),
        e & 3 && (e += 4 - (e & 3));
        break;
    case "cstr":
        for (e = 0,
        n = ""; (o = Hu(this, this.l + e++)) !== 0; )
            s.push($3(o));
        n = s.join("");
        break;
    case "_wstr":
        for (e = 0,
        n = ""; (o = m1(this, this.l + e)) !== 0; )
            s.push($3(o)),
            e += 2;
        e += 2,
        n = s.join("");
        break;
    case "dbcs-cont":
        for (n = "",
        l = this.l,
        c = 0; c < e; ++c) {
            if (this.lens && this.lens.indexOf(l) !== -1)
                return o = Hu(this, l),
                this.l = l + 1,
                a = _1.call(this, e - c, o ? "dbcs-cont" : "sbcs-cont"),
                s.join("") + a;
            s.push($3(m1(this, l))),
            l += 2
        }
        n = s.join(""),
        e *= 2;
        break;
    case "cpstr":
        if (typeof ln < "u") {
            n = ln.utils.decode(Zl, this.slice(this.l, this.l + e));
            break
        }
    case "sbcs-cont":
        for (n = "",
        l = this.l,
        c = 0; c != e; ++c) {
            if (this.lens && this.lens.indexOf(l) !== -1)
                return o = Hu(this, l),
                this.l = l + 1,
                a = _1.call(this, e - c, o ? "dbcs-cont" : "sbcs-cont"),
                s.join("") + a;
            s.push($3(Hu(this, l))),
            l += 1
        }
        n = s.join("");
        break;
    default:
        switch (e) {
        case 1:
            return i = Hu(this, this.l),
            this.l++,
            i;
        case 2:
            return i = (t === "i" ? iB : m1)(this, this.l),
            this.l += 2,
            i;
        case 4:
        case -4:
            return t === "i" || !(this[this.l + 3] & 128) ? (i = (e > 0 ? Jl : rB)(this, this.l),
            this.l += 4,
            i) : (r = ki(this, this.l),
            this.l += 4,
            r);
        case 8:
        case -8:
            if (t === "f")
                return e == 8 ? r = n2(this, this.l) : r = n2([this[this.l + 7], this[this.l + 6], this[this.l + 5], this[this.l + 4], this[this.l + 3], this[this.l + 2], this[this.l + 1], this[this.l + 0]], 0),
                this.l += 8,
                r;
            e = 8;
        case 16:
            n = Ww(this, this.l, e);
            break
        }
    }
    return this.l += e,
    n
}
var sB = function(e, t, n) {
    e[n] = t & 255,
    e[n + 1] = t >>> 8 & 255,
    e[n + 2] = t >>> 16 & 255,
    e[n + 3] = t >>> 24 & 255
}
  , oB = function(e, t, n) {
    e[n] = t & 255,
    e[n + 1] = t >> 8 & 255,
    e[n + 2] = t >> 16 & 255,
    e[n + 3] = t >> 24 & 255
}
  , aB = function(e, t, n) {
    e[n] = t & 255,
    e[n + 1] = t >>> 8 & 255
};
function cB(e, t, n) {
    var i = 0
      , r = 0;
    if (n === "dbcs") {
        for (r = 0; r != t.length; ++r)
            aB(this, t.charCodeAt(r), this.l + 2 * r);
        i = 2 * t.length
    } else if (n === "sbcs") {
        if (typeof ln < "u" && zu == 874)
            for (r = 0; r != t.length; ++r) {
                var s = ln.utils.encode(zu, t.charAt(r));
                this[this.l + r] = s[0]
            }
        else
            for (t = t.replace(/[^\x00-\x7F]/g, "_"),
            r = 0; r != t.length; ++r)
                this[this.l + r] = t.charCodeAt(r) & 255;
        i = t.length
    } else if (n === "hex") {
        for (; r < e; ++r)
            this[this.l++] = parseInt(t.slice(2 * r, 2 * r + 2), 16) || 0;
        return this
    } else if (n === "utf16le") {
        var o = Math.min(this.l + e, this.length);
        for (r = 0; r < Math.min(t.length, e); ++r) {
            var a = t.charCodeAt(r);
            this[this.l++] = a & 255,
            this[this.l++] = a >> 8
        }
        for (; this.l < o; )
            this[this.l++] = 0;
        return this
    } else
        switch (e) {
        case 1:
            i = 1,
            this[this.l] = t & 255;
            break;
        case 2:
            i = 2,
            this[this.l] = t & 255,
            t >>>= 8,
            this[this.l + 1] = t & 255;
            break;
        case 3:
            i = 3,
            this[this.l] = t & 255,
            t >>>= 8,
            this[this.l + 1] = t & 255,
            t >>>= 8,
            this[this.l + 2] = t & 255;
            break;
        case 4:
            i = 4,
            sB(this, t, this.l);
            break;
        case 8:
            if (i = 8,
            n === "f") {
                tB(this, t, this.l);
                break
            }
        case 16:
            break;
        case -4:
            i = 4,
            oB(this, t, this.l);
            break
        }
    return this.l += i,
    this
}
function Qw(e, t) {
    var n = Ww(this, this.l, e.length >> 1);
    if (n !== e)
        throw new Error(t + "Expected " + e + " saw " + n);
    this.l += e.length >> 1
}
function Ss(e, t) {
    e.l = t,
    e.read_shift = _1,
    e.chk = Qw,
    e.write_shift = cB
}
function Jo(e, t) {
    e.l += t
}
function ce(e) {
    var t = t0(e);
    return Ss(t, 0),
    t
}
function Yr() {
    var e = []
      , t = zt ? 256 : 2048
      , n = function(l) {
        var u = ce(l);
        return Ss(u, 0),
        u
    }
      , i = n(t)
      , r = function() {
        i && (i.length > i.l && (i = i.slice(0, i.l),
        i.l = i.length),
        i.length > 0 && e.push(i),
        i = null)
    }
      , s = function(l) {
        return i && l < i.length - i.l ? i : (r(),
        i = n(Math.max(l + 1, t)))
    }
      , o = function() {
        return r(),
        $i(e)
    }
      , a = function(l) {
        r(),
        i = l,
        i.l == null && (i.l = i.length),
        s(t)
    };
    return {
        next: s,
        push: a,
        end: o,
        _bufs: e
    }
}
function pe(e, t, n, i) {
    var r = +t, s;
    if (!isNaN(r)) {
        i || (i = tW[r].p || (n || []).length || 0),
        s = 1 + (r >= 128 ? 1 : 0) + 1,
        i >= 128 && ++s,
        i >= 16384 && ++s,
        i >= 2097152 && ++s;
        var o = e.next(s);
        r <= 127 ? o.write_shift(1, r) : (o.write_shift(1, (r & 127) + 128),
        o.write_shift(1, r >> 7));
        for (var a = 0; a != 4; ++a)
            if (i >= 128)
                o.write_shift(1, (i & 127) + 128),
                i >>= 7;
            else {
                o.write_shift(1, i);
                break
            }
        i > 0 && R7(n) && e.push(n)
    }
}
function y1(e, t, n) {
    var i = Jr(e);
    if (t.s ? (i.cRel && (i.c += t.s.c),
    i.rRel && (i.r += t.s.r)) : (i.cRel && (i.c += t.c),
    i.rRel && (i.r += t.r)),
    !n || n.biff < 12) {
        for (; i.c >= 256; )
            i.c -= 256;
        for (; i.r >= 65536; )
            i.r -= 65536
    }
    return i
}
function sw(e, t, n) {
    var i = Jr(e);
    return i.s = y1(i.s, t.s, n),
    i.e = y1(i.e, t.s, n),
    i
}
function S1(e, t) {
    if (e.cRel && e.c < 0)
        for (e = Jr(e); e.c < 0; )
            e.c += t > 8 ? 16384 : 256;
    if (e.rRel && e.r < 0)
        for (e = Jr(e); e.r < 0; )
            e.r += t > 8 ? 1048576 : t > 5 ? 65536 : 16384;
    var n = tn(e);
    return !e.cRel && e.cRel != null && (n = hB(n)),
    !e.rRel && e.rRel != null && (n = lB(n)),
    n
}
function d7(e, t) {
    return e.s.r == 0 && !e.s.rRel && e.e.r == (t.biff >= 12 ? 1048575 : t.biff >= 8 ? 65536 : 16384) && !e.e.rRel ? (e.s.cRel ? "" : "$") + cr(e.s.c) + ":" + (e.e.cRel ? "" : "$") + cr(e.e.c) : e.s.c == 0 && !e.s.cRel && e.e.c == (t.biff >= 12 ? 16383 : 255) && !e.e.cRel ? (e.s.rRel ? "" : "$") + ji(e.s.r) + ":" + (e.e.rRel ? "" : "$") + ji(e.e.r) : S1(e.s, t.biff) + ":" + S1(e.e, t.biff)
}
function D7(e) {
    return parseInt(uB(e), 10) - 1
}
function ji(e) {
    return "" + (e + 1)
}
function lB(e) {
    return e.replace(/([A-Z]|^)(\d+)$/, "$1$$$2")
}
function uB(e) {
    return e.replace(/\$(\d+)$/, "$1")
}
function N7(e) {
    for (var t = dB(e), n = 0, i = 0; i !== t.length; ++i)
        n = 26 * n + t.charCodeAt(i) - 64;
    return n - 1
}
function cr(e) {
    if (e < 0)
        throw new Error("invalid column " + e);
    var t = "";
    for (++e; e; e = Math.floor((e - 1) / 26))
        t = String.fromCharCode((e - 1) % 26 + 65) + t;
    return t
}
function hB(e) {
    return e.replace(/^([A-Z])/, "$$$1")
}
function dB(e) {
    return e.replace(/^\$([A-Z])/, "$1")
}
function fB(e) {
    return e.replace(/(\$?[A-Z]*)(\$?\d*)/, "$1,$2").split(",")
}
function Ii(e) {
    for (var t = 0, n = 0, i = 0; i < e.length; ++i) {
        var r = e.charCodeAt(i);
        r >= 48 && r <= 57 ? t = 10 * t + (r - 48) : r >= 65 && r <= 90 && (n = 26 * n + (r - 64))
    }
    return {
        c: n - 1,
        r: t - 1
    }
}
function tn(e) {
    for (var t = e.c + 1, n = ""; t; t = (t - 1) / 26 | 0)
        n = String.fromCharCode((t - 1) % 26 + 65) + n;
    return n + (e.r + 1)
}
function xs(e) {
    var t = e.indexOf(":");
    return t == -1 ? {
        s: Ii(e),
        e: Ii(e)
    } : {
        s: Ii(e.slice(0, t)),
        e: Ii(e.slice(t + 1))
    }
}
function ii(e, t) {
    return typeof t > "u" || typeof t == "number" ? ii(e.s, e.e) : (typeof e != "string" && (e = tn(e)),
    typeof t != "string" && (t = tn(t)),
    e == t ? e : e + ":" + t)
}
function yn(e) {
    var t = {
        s: {
            c: 0,
            r: 0
        },
        e: {
            c: 0,
            r: 0
        }
    }
      , n = 0
      , i = 0
      , r = 0
      , s = e.length;
    for (n = 0; i < s && !((r = e.charCodeAt(i) - 64) < 1 || r > 26); ++i)
        n = 26 * n + r;
    for (t.s.c = --n,
    n = 0; i < s && !((r = e.charCodeAt(i) - 48) < 0 || r > 9); ++i)
        n = 10 * n + r;
    if (t.s.r = --n,
    i === s || r != 10)
        return t.e.c = t.s.c,
        t.e.r = t.s.r,
        t;
    for (++i,
    n = 0; i != s && !((r = e.charCodeAt(i) - 64) < 1 || r > 26); ++i)
        n = 26 * n + r;
    for (t.e.c = --n,
    n = 0; i != s && !((r = e.charCodeAt(i) - 48) < 0 || r > 9); ++i)
        n = 10 * n + r;
    return t.e.r = --n,
    t
}
function ow(e, t) {
    var n = e.t == "d" && t instanceof Date;
    if (e.z != null)
        try {
            return e.w = Vc(e.z, n ? Qr(t) : t)
        } catch {}
    try {
        return e.w = Vc((e.XF || {}).numFmtId || (n ? 14 : 0), n ? Qr(t) : t)
    } catch {
        return "" + t
    }
}
function Ua(e, t, n) {
    return e == null || e.t == null || e.t == "z" ? "" : e.w !== void 0 ? e.w : (e.t == "d" && !e.z && n && n.dateNF && (e.z = n.dateNF),
    e.t == "e" ? A1[e.v] || e.v : t == null ? ow(e, e.v) : ow(e, t))
}
function r0(e, t) {
    var n = t && t.sheet ? t.sheet : "Sheet1"
      , i = {};
    return i[n] = e,
    {
        SheetNames: [n],
        Sheets: i
    }
}
function Jw(e, t, n) {
    var i = n || {}
      , r = e ? Array.isArray(e) : i.dense;
    Qo != null && r == null && (r = Qo);
    var s = e || (r ? [] : {})
      , o = 0
      , a = 0;
    if (s && i.origin != null) {
        if (typeof i.origin == "number")
            o = i.origin;
        else {
            var c = typeof i.origin == "string" ? Ii(i.origin) : i.origin;
            o = c.r,
            a = c.c
        }
        s["!ref"] || (s["!ref"] = "A1:A1")
    }
    var l = {
        s: {
            c: 1e7,
            r: 1e7
        },
        e: {
            c: 0,
            r: 0
        }
    };
    if (s["!ref"]) {
        var u = yn(s["!ref"]);
        l.s.c = u.s.c,
        l.s.r = u.s.r,
        l.e.c = Math.max(l.e.c, u.e.c),
        l.e.r = Math.max(l.e.r, u.e.r),
        o == -1 && (l.e.r = o = u.e.r + 1)
    }
    for (var h = 0; h != t.length; ++h)
        if (t[h]) {
            if (!Array.isArray(t[h]))
                throw new Error("aoa_to_sheet expects an array of arrays");
            for (var d = 0; d != t[h].length; ++d)
                if (!(typeof t[h][d] > "u")) {
                    var f = {
                        v: t[h][d]
                    }
                      , g = o + h
                      , p = a + d;
                    if (l.s.r > g && (l.s.r = g),
                    l.s.c > p && (l.s.c = p),
                    l.e.r < g && (l.e.r = g),
                    l.e.c < p && (l.e.c = p),
                    t[h][d] && typeof t[h][d] == "object" && !Array.isArray(t[h][d]) && !(t[h][d]instanceof Date))
                        f = t[h][d];
                    else if (Array.isArray(f.v) && (f.f = t[h][d][1],
                    f.v = f.v[0]),
                    f.v === null)
                        if (f.f)
                            f.t = "n";
                        else if (i.nullError)
                            f.t = "e",
                            f.v = 0;
                        else if (i.sheetStubs)
                            f.t = "z";
                        else
                            continue;
                    else
                        typeof f.v == "number" ? f.t = "n" : typeof f.v == "boolean" ? f.t = "b" : f.v instanceof Date ? (f.z = i.dateNF || Bn[14],
                        i.cellDates ? (f.t = "d",
                        f.w = Vc(f.z, Qr(f.v))) : (f.t = "n",
                        f.v = Qr(f.v),
                        f.w = Vc(f.z, f.v))) : f.t = "s";
                    if (r)
                        s[g] || (s[g] = []),
                        s[g][p] && s[g][p].z && (f.z = s[g][p].z),
                        s[g][p] = f;
                    else {
                        var v = tn({
                            c: p,
                            r: g
                        });
                        s[v] && s[v].z && (f.z = s[v].z),
                        s[v] = f
                    }
                }
        }
    return l.s.c < 1e7 && (s["!ref"] = ii(l)),
    s
}
function Qu(e, t) {
    return Jw(null, e, t)
}
function pB(e) {
    return e.read_shift(4, "i")
}
function ho(e, t) {
    return t || (t = ce(4)),
    t.write_shift(4, e),
    t
}
function lr(e) {
    var t = e.read_shift(4);
    return t === 0 ? "" : e.read_shift(t, "dbcs")
}
function Ri(e, t) {
    var n = !1;
    return t == null && (n = !0,
    t = ce(4 + 2 * e.length)),
    t.write_shift(4, e.length),
    e.length > 0 && t.write_shift(0, e, "dbcs"),
    n ? t.slice(0, t.l) : t
}
function gB(e) {
    return {
        ich: e.read_shift(2),
        ifnt: e.read_shift(2)
    }
}
function mB(e, t) {
    return t || (t = ce(4)),
    t.write_shift(2, e.ich || 0),
    t.write_shift(2, e.ifnt || 0),
    t
}
function F7(e, t) {
    var n = e.l
      , i = e.read_shift(1)
      , r = lr(e)
      , s = []
      , o = {
        t: r,
        h: r
    };
    if (i & 1) {
        for (var a = e.read_shift(4), c = 0; c != a; ++c)
            s.push(gB(e));
        o.r = s
    } else
        o.r = [{
            ich: 0,
            ifnt: 0
        }];
    return e.l = n + t,
    o
}
function vB(e, t) {
    var n = !1;
    return t == null && (n = !0,
    t = ce(15 + 4 * e.t.length)),
    t.write_shift(1, 0),
    Ri(e.t, t),
    n ? t.slice(0, t.l) : t
}
var _B = F7;
function yB(e, t) {
    var n = !1;
    return t == null && (n = !0,
    t = ce(23 + 4 * e.t.length)),
    t.write_shift(1, 1),
    Ri(e.t, t),
    t.write_shift(4, 1),
    mB({
        ich: 0,
        ifnt: 0
    }, t),
    n ? t.slice(0, t.l) : t
}
function Fs(e) {
    var t = e.read_shift(4)
      , n = e.read_shift(2);
    return n += e.read_shift(1) << 16,
    e.l++,
    {
        c: t,
        iStyleRef: n
    }
}
function s0(e, t) {
    return t == null && (t = ce(8)),
    t.write_shift(-4, e.c),
    t.write_shift(3, e.iStyleRef || e.s),
    t.write_shift(1, 0),
    t
}
function o0(e) {
    var t = e.read_shift(2);
    return t += e.read_shift(1) << 16,
    e.l++,
    {
        c: -1,
        iStyleRef: t
    }
}
function a0(e, t) {
    return t == null && (t = ce(4)),
    t.write_shift(3, e.iStyleRef || e.s),
    t.write_shift(1, 0),
    t
}
var SB = lr
  , Zw = Ri;
function L7(e) {
    var t = e.read_shift(4);
    return t === 0 || t === 4294967295 ? "" : e.read_shift(t, "dbcs")
}
function i2(e, t) {
    var n = !1;
    return t == null && (n = !0,
    t = ce(127)),
    t.write_shift(4, e.length > 0 ? e.length : 4294967295),
    e.length > 0 && t.write_shift(0, e, "dbcs"),
    n ? t.slice(0, t.l) : t
}
var bB = lr
  , S7 = L7
  , B7 = i2;
function eC(e) {
    var t = e.slice(e.l, e.l + 4)
      , n = t[0] & 1
      , i = t[0] & 2;
    e.l += 4;
    var r = i === 0 ? n2([0, 0, 0, 0, t[0] & 252, t[1], t[2], t[3]], 0) : Jl(t, 0) >> 2;
    return n ? r / 100 : r
}
function tC(e, t) {
    t == null && (t = ce(4));
    var n = 0
      , i = 0
      , r = e * 100;
    if (e == (e | 0) && e >= -(1 << 29) && e < 1 << 29 ? i = 1 : r == (r | 0) && r >= -(1 << 29) && r < 1 << 29 && (i = 1,
    n = 1),
    i)
        t.write_shift(-4, ((n ? r : e) << 2) + (n + 2));
    else
        throw new Error("unsupported RkNumber " + e)
}
function nC(e) {
    var t = {
        s: {},
        e: {}
    };
    return t.s.r = e.read_shift(4),
    t.e.r = e.read_shift(4),
    t.s.c = e.read_shift(4),
    t.e.c = e.read_shift(4),
    t
}
function xB(e, t) {
    return t || (t = ce(16)),
    t.write_shift(4, e.s.r),
    t.write_shift(4, e.e.r),
    t.write_shift(4, e.s.c),
    t.write_shift(4, e.e.c),
    t
}
var c0 = nC
  , Ju = xB;
function Zu(e) {
    if (e.length - e.l < 8)
        throw "XLS Xnum Buffer underflow";
    return e.read_shift(8, "f")
}
function n0(e, t) {
    return (t || ce(8)).write_shift(8, e, "f")
}
function wB(e) {
    var t = {}
      , n = e.read_shift(1)
      , i = n >>> 1
      , r = e.read_shift(1)
      , s = e.read_shift(2, "i")
      , o = e.read_shift(1)
      , a = e.read_shift(1)
      , c = e.read_shift(1);
    switch (e.l++,
    i) {
    case 0:
        t.auto = 1;
        break;
    case 1:
        t.index = r;
        var l = IB[r];
        l && (t.rgb = vw(l));
        break;
    case 2:
        t.rgb = vw([o, a, c]);
        break;
    case 3:
        t.theme = r;
        break
    }
    return s != 0 && (t.tint = s > 0 ? s / 32767 : s / 32768),
    t
}
function r2(e, t) {
    if (t || (t = ce(8)),
    !e || e.auto)
        return t.write_shift(4, 0),
        t.write_shift(4, 0),
        t;
    e.index != null ? (t.write_shift(1, 2),
    t.write_shift(1, e.index)) : e.theme != null ? (t.write_shift(1, 6),
    t.write_shift(1, e.theme)) : (t.write_shift(1, 5),
    t.write_shift(1, 0));
    var n = e.tint || 0;
    if (n > 0 ? n *= 32767 : n < 0 && (n *= 32768),
    t.write_shift(2, n),
    !e.rgb || e.theme != null)
        t.write_shift(2, 0),
        t.write_shift(1, 0),
        t.write_shift(1, 0);
    else {
        var i = e.rgb || "FFFFFF";
        typeof i == "number" && (i = ("000000" + i.toString(16)).slice(-6)),
        t.write_shift(1, parseInt(i.slice(0, 2), 16)),
        t.write_shift(1, parseInt(i.slice(2, 4), 16)),
        t.write_shift(1, parseInt(i.slice(4, 6), 16)),
        t.write_shift(1, 255)
    }
    return t
}
function CB(e) {
    var t = e.read_shift(1);
    e.l++;
    var n = {
        fBold: t & 1,
        fItalic: t & 2,
        fUnderline: t & 4,
        fStrikeout: t & 8,
        fOutline: t & 16,
        fShadow: t & 32,
        fCondense: t & 64,
        fExtend: t & 128
    };
    return n
}
function EB(e, t) {
    t || (t = ce(2));
    var n = (e.italic ? 2 : 0) | (e.strike ? 8 : 0) | (e.outline ? 16 : 0) | (e.shadow ? 32 : 0) | (e.condense ? 64 : 0) | (e.extend ? 128 : 0);
    return t.write_shift(1, n),
    t.write_shift(1, 0),
    t
}
var iC = 2
  , ys = 3
  , X3 = 11;
var s2 = 19;
var K3 = 64
  , TB = 65
  , OB = 71;
var MB = 4108
  , PB = 4126
  , Vi = 80;
var aw = {
    1: {
        n: "CodePage",
        t: iC
    },
    2: {
        n: "Category",
        t: Vi
    },
    3: {
        n: "PresentationFormat",
        t: Vi
    },
    4: {
        n: "ByteCount",
        t: ys
    },
    5: {
        n: "LineCount",
        t: ys
    },
    6: {
        n: "ParagraphCount",
        t: ys
    },
    7: {
        n: "SlideCount",
        t: ys
    },
    8: {
        n: "NoteCount",
        t: ys
    },
    9: {
        n: "HiddenCount",
        t: ys
    },
    10: {
        n: "MultimediaClipCount",
        t: ys
    },
    11: {
        n: "ScaleCrop",
        t: X3
    },
    12: {
        n: "HeadingPairs",
        t: MB
    },
    13: {
        n: "TitlesOfParts",
        t: PB
    },
    14: {
        n: "Manager",
        t: Vi
    },
    15: {
        n: "Company",
        t: Vi
    },
    16: {
        n: "LinksUpToDate",
        t: X3
    },
    17: {
        n: "CharacterCount",
        t: ys
    },
    19: {
        n: "SharedDoc",
        t: X3
    },
    22: {
        n: "HyperlinksChanged",
        t: X3
    },
    23: {
        n: "AppVersion",
        t: ys,
        p: "version"
    },
    24: {
        n: "DigSig",
        t: TB
    },
    26: {
        n: "ContentType",
        t: Vi
    },
    27: {
        n: "ContentStatus",
        t: Vi
    },
    28: {
        n: "Language",
        t: Vi
    },
    29: {
        n: "Version",
        t: Vi
    },
    255: {},
    2147483648: {
        n: "Locale",
        t: s2
    },
    2147483651: {
        n: "Behavior",
        t: s2
    },
    1919054434: {}
}
  , cw = {
    1: {
        n: "CodePage",
        t: iC
    },
    2: {
        n: "Title",
        t: Vi
    },
    3: {
        n: "Subject",
        t: Vi
    },
    4: {
        n: "Author",
        t: Vi
    },
    5: {
        n: "Keywords",
        t: Vi
    },
    6: {
        n: "Comments",
        t: Vi
    },
    7: {
        n: "Template",
        t: Vi
    },
    8: {
        n: "LastAuthor",
        t: Vi
    },
    9: {
        n: "RevNumber",
        t: Vi
    },
    10: {
        n: "EditTime",
        t: K3
    },
    11: {
        n: "LastPrinted",
        t: K3
    },
    12: {
        n: "CreatedDate",
        t: K3
    },
    13: {
        n: "ModifiedDate",
        t: K3
    },
    14: {
        n: "PageCount",
        t: ys
    },
    15: {
        n: "WordCount",
        t: ys
    },
    16: {
        n: "CharCount",
        t: ys
    },
    17: {
        n: "Thumbnail",
        t: OB
    },
    18: {
        n: "Application",
        t: Vi
    },
    19: {
        n: "DocSecurity",
        t: ys
    },
    255: {},
    2147483648: {
        n: "Locale",
        t: s2
    },
    2147483651: {
        n: "Behavior",
        t: s2
    },
    1919054434: {}
};
function kB(e) {
    return e.map(function(t) {
        return [t >> 16 & 255, t >> 8 & 255, t & 255]
    })
}
var AB = kB([0, 16777215, 16711680, 65280, 255, 16776960, 16711935, 65535, 0, 16777215, 16711680, 65280, 255, 16776960, 16711935, 65535, 8388608, 32768, 128, 8421376, 8388736, 32896, 12632256, 8421504, 10066431, 10040166, 16777164, 13434879, 6684774, 16744576, 26316, 13421823, 128, 16711935, 16776960, 65535, 8388736, 8388608, 32896, 255, 52479, 13434879, 13434828, 16777113, 10079487, 16751052, 13408767, 16764057, 3368703, 3394764, 10079232, 16763904, 16750848, 16737792, 6710937, 9868950, 13158, 3381606, 13056, 3355392, 10040064, 10040166, 3355545, 3355443, 16777215, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])
  , IB = Jr(AB)
  , A1 = {
    0: "#NULL!",
    7: "#DIV/0!",
    15: "#VALUE!",
    23: "#REF!",
    29: "#NAME?",
    36: "#NUM!",
    42: "#N/A",
    43: "#GETTING_DATA",
    255: "#WTF?"
};
var RB = {
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml": "workbooks",
    "application/vnd.ms-excel.sheet.macroEnabled.main+xml": "workbooks",
    "application/vnd.ms-excel.sheet.binary.macroEnabled.main": "workbooks",
    "application/vnd.ms-excel.addin.macroEnabled.main+xml": "workbooks",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml": "workbooks",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml": "sheets",
    "application/vnd.ms-excel.worksheet": "sheets",
    "application/vnd.ms-excel.binIndexWs": "TODO",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml": "charts",
    "application/vnd.ms-excel.chartsheet": "charts",
    "application/vnd.ms-excel.macrosheet+xml": "macros",
    "application/vnd.ms-excel.macrosheet": "macros",
    "application/vnd.ms-excel.intlmacrosheet": "TODO",
    "application/vnd.ms-excel.binIndexMs": "TODO",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml": "dialogs",
    "application/vnd.ms-excel.dialogsheet": "dialogs",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml": "strs",
    "application/vnd.ms-excel.sharedStrings": "strs",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml": "styles",
    "application/vnd.ms-excel.styles": "styles",
    "application/vnd.openxmlformats-package.core-properties+xml": "coreprops",
    "application/vnd.openxmlformats-officedocument.custom-properties+xml": "custprops",
    "application/vnd.openxmlformats-officedocument.extended-properties+xml": "extprops",
    "application/vnd.openxmlformats-officedocument.customXmlProperties+xml": "TODO",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty": "TODO",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml": "comments",
    "application/vnd.ms-excel.comments": "comments",
    "application/vnd.ms-excel.threadedcomments+xml": "threadedcomments",
    "application/vnd.ms-excel.person+xml": "people",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml": "metadata",
    "application/vnd.ms-excel.sheetMetadata": "metadata",
    "application/vnd.ms-excel.pivotTable": "TODO",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml": "TODO",
    "application/vnd.openxmlformats-officedocument.drawingml.chart+xml": "TODO",
    "application/vnd.ms-office.chartcolorstyle+xml": "TODO",
    "application/vnd.ms-office.chartstyle+xml": "TODO",
    "application/vnd.ms-office.chartex+xml": "TODO",
    "application/vnd.ms-excel.calcChain": "calcchains",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml": "calcchains",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings": "TODO",
    "application/vnd.ms-office.activeX": "TODO",
    "application/vnd.ms-office.activeX+xml": "TODO",
    "application/vnd.ms-excel.attachedToolbars": "TODO",
    "application/vnd.ms-excel.connections": "TODO",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml": "TODO",
    "application/vnd.ms-excel.externalLink": "links",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml": "links",
    "application/vnd.ms-excel.pivotCacheDefinition": "TODO",
    "application/vnd.ms-excel.pivotCacheRecords": "TODO",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml": "TODO",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml": "TODO",
    "application/vnd.ms-excel.queryTable": "TODO",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml": "TODO",
    "application/vnd.ms-excel.userNames": "TODO",
    "application/vnd.ms-excel.revisionHeaders": "TODO",
    "application/vnd.ms-excel.revisionLog": "TODO",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml": "TODO",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml": "TODO",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml": "TODO",
    "application/vnd.ms-excel.tableSingleCells": "TODO",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml": "TODO",
    "application/vnd.ms-excel.slicer": "TODO",
    "application/vnd.ms-excel.slicerCache": "TODO",
    "application/vnd.ms-excel.slicer+xml": "TODO",
    "application/vnd.ms-excel.slicerCache+xml": "TODO",
    "application/vnd.ms-excel.wsSortMap": "TODO",
    "application/vnd.ms-excel.table": "TODO",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml": "TODO",
    "application/vnd.openxmlformats-officedocument.theme+xml": "themes",
    "application/vnd.openxmlformats-officedocument.themeOverride+xml": "TODO",
    "application/vnd.ms-excel.Timeline+xml": "TODO",
    "application/vnd.ms-excel.TimelineCache+xml": "TODO",
    "application/vnd.ms-office.vbaProject": "vba",
    "application/vnd.ms-office.vbaProjectSignature": "TODO",
    "application/vnd.ms-office.volatileDependencies": "TODO",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml": "TODO",
    "application/vnd.ms-excel.controlproperties+xml": "TODO",
    "application/vnd.openxmlformats-officedocument.model+data": "TODO",
    "application/vnd.ms-excel.Survey+xml": "TODO",
    "application/vnd.openxmlformats-officedocument.drawing+xml": "drawings",
    "application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml": "TODO",
    "application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml": "TODO",
    "application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml": "TODO",
    "application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml": "TODO",
    "application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml": "TODO",
    "application/vnd.openxmlformats-officedocument.vmlDrawing": "TODO",
    "application/vnd.openxmlformats-package.relationships+xml": "rels",
    "application/vnd.openxmlformats-officedocument.oleObject": "TODO",
    "image/png": "TODO",
    sheet: "js"
}
  , Y3 = {
    workbooks: {
        xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",
        xlsm: "application/vnd.ms-excel.sheet.macroEnabled.main+xml",
        xlsb: "application/vnd.ms-excel.sheet.binary.macroEnabled.main",
        xlam: "application/vnd.ms-excel.addin.macroEnabled.main+xml",
        xltx: "application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"
    },
    strs: {
        xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",
        xlsb: "application/vnd.ms-excel.sharedStrings"
    },
    comments: {
        xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",
        xlsb: "application/vnd.ms-excel.comments"
    },
    sheets: {
        xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",
        xlsb: "application/vnd.ms-excel.worksheet"
    },
    charts: {
        xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",
        xlsb: "application/vnd.ms-excel.chartsheet"
    },
    dialogs: {
        xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",
        xlsb: "application/vnd.ms-excel.dialogsheet"
    },
    macros: {
        xlsx: "application/vnd.ms-excel.macrosheet+xml",
        xlsb: "application/vnd.ms-excel.macrosheet"
    },
    metadata: {
        xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",
        xlsb: "application/vnd.ms-excel.sheetMetadata"
    },
    styles: {
        xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",
        xlsb: "application/vnd.ms-excel.styles"
    }
};
function rC() {
    return {
        workbooks: [],
        sheets: [],
        charts: [],
        dialogs: [],
        macros: [],
        rels: [],
        strs: [],
        comments: [],
        threadedcomments: [],
        links: [],
        coreprops: [],
        extprops: [],
        custprops: [],
        themes: [],
        styles: [],
        calcchains: [],
        vba: [],
        drawings: [],
        metadata: [],
        people: [],
        TODO: [],
        xmlns: ""
    }
}
function sC(e, t) {
    var n = VL(RB), i = [], r;
    i[i.length] = ri,
    i[i.length] = Me("Types", null, {
        xmlns: Ai.CT,
        "xmlns:xsd": Ai.xsd,
        "xmlns:xsi": Ai.xsi
    }),
    i = i.concat([["xml", "application/xml"], ["bin", "application/vnd.ms-excel.sheet.binary.macroEnabled.main"], ["vml", "application/vnd.openxmlformats-officedocument.vmlDrawing"], ["data", "application/vnd.openxmlformats-officedocument.model+data"], ["bmp", "image/bmp"], ["png", "image/png"], ["gif", "image/gif"], ["emf", "image/x-emf"], ["wmf", "image/x-wmf"], ["jpg", "image/jpeg"], ["jpeg", "image/jpeg"], ["tif", "image/tiff"], ["tiff", "image/tiff"], ["pdf", "application/pdf"], ["rels", "application/vnd.openxmlformats-package.relationships+xml"]].map(function(c) {
        return Me("Default", null, {
            Extension: c[0],
            ContentType: c[1]
        })
    }));
    var s = function(c) {
        e[c] && e[c].length > 0 && (r = e[c][0],
        i[i.length] = Me("Override", null, {
            PartName: (r[0] == "/" ? "" : "/") + r,
            ContentType: Y3[c][t.bookType] || Y3[c].xlsx
        }))
    }
      , o = function(c) {
        (e[c] || []).forEach(function(l) {
            i[i.length] = Me("Override", null, {
                PartName: (l[0] == "/" ? "" : "/") + l,
                ContentType: Y3[c][t.bookType] || Y3[c].xlsx
            })
        })
    }
      , a = function(c) {
        (e[c] || []).forEach(function(l) {
            i[i.length] = Me("Override", null, {
                PartName: (l[0] == "/" ? "" : "/") + l,
                ContentType: n[c][0]
            })
        })
    };
    return s("workbooks"),
    o("sheets"),
    o("charts"),
    a("themes"),
    ["strs", "styles"].forEach(s),
    ["coreprops", "extprops", "custprops"].forEach(a),
    a("vba"),
    a("comments"),
    a("threadedcomments"),
    a("drawings"),
    o("metadata"),
    a("people"),
    i.length > 2 && (i[i.length] = "</Types>",
    i[1] = i[1].replace("/>", ">")),
    i.join("")
}
var qt = {
    WB: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",
    SHEET: "http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",
    HLINK: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",
    VML: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",
    XPATH: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",
    XMISS: "http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",
    XLINK: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",
    CXML: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",
    CXMLP: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",
    CMNT: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",
    CORE_PROPS: "http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",
    EXT_PROPS: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",
    CUST_PROPS: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",
    SST: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",
    STY: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",
    THEME: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",
    CHART: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",
    CHARTEX: "http://schemas.microsoft.com/office/2014/relationships/chartEx",
    CS: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",
    WS: ["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet", "http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],
    DS: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",
    MS: "http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",
    IMG: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",
    DRAW: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",
    XLMETA: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",
    TCMNT: "http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",
    PEOPLE: "http://schemas.microsoft.com/office/2017/10/relationships/person",
    VBA: "http://schemas.microsoft.com/office/2006/relationships/vbaProject"
};
function oC(e) {
    var t = e.lastIndexOf("/");
    return e.slice(0, t + 1) + "_rels/" + e.slice(t + 1) + ".rels"
}
function Wu(e) {
    var t = [ri, Me("Relationships", null, {
        xmlns: Ai.RELS
    })];
    return qi(e["!id"]).forEach(function(n) {
        t[t.length] = Me("Relationship", null, e["!id"][n])
    }),
    t.length > 2 && (t[t.length] = "</Relationships>",
    t[1] = t[1].replace("/>", ">")),
    t.join("")
}
function Zt(e, t, n, i, r, s) {
    if (r || (r = {}),
    e["!id"] || (e["!id"] = {}),
    e["!idx"] || (e["!idx"] = 1),
    t < 0)
        for (t = e["!idx"]; e["!id"]["rId" + t]; ++t)
            ;
    if (e["!idx"] = t + 1,
    r.Id = "rId" + t,
    r.Type = i,
    r.Target = n,
    s ? r.TargetMode = s : [qt.HLINK, qt.XPATH, qt.XMISS].indexOf(r.Type) > -1 && (r.TargetMode = "External"),
    e["!id"][r.Id])
        throw new Error("Cannot rewrite rId " + t);
    return e["!id"][r.Id] = r,
    e[("/" + r.Target).replace("//", "/")] = r,
    t
}
function DB(e) {
    var t = [ri];
    t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),
    t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);
    for (var n = 0; n < e.length; ++n)
        t.push('  <manifest:file-entry manifest:full-path="' + e[n][0] + '" manifest:media-type="' + e[n][1] + `"/>
`);
    return t.push("</manifest:manifest>"),
    t.join("")
}
function lw(e, t, n) {
    return ['  <rdf:Description rdf:about="' + e + `">
`, '    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/' + (n || "odf") + "#" + t + `"/>
`, `  </rdf:Description>
`].join("")
}
function NB(e, t) {
    return ['  <rdf:Description rdf:about="' + e + `">
`, '    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="' + t + `"/>
`, `  </rdf:Description>
`].join("")
}
function FB(e) {
    var t = [ri];
    t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);
    for (var n = 0; n != e.length; ++n)
        t.push(lw(e[n][0], e[n][1])),
        t.push(NB("", e[n][0]));
    return t.push(lw("", "Document", "pkg")),
    t.push("</rdf:RDF>"),
    t.join("")
}
function aC() {
    return '<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS ' + x1.version + "</meta:generator></office:meta></office:document-meta>"
}
var e0 = [["cp:category", "Category"], ["cp:contentStatus", "ContentStatus"], ["cp:keywords", "Keywords"], ["cp:lastModifiedBy", "LastAuthor"], ["cp:lastPrinted", "LastPrinted"], ["cp:revision", "RevNumber"], ["cp:version", "Version"], ["dc:creator", "Author"], ["dc:description", "Comments"], ["dc:identifier", "Identifier"], ["dc:language", "Language"], ["dc:subject", "Subject"], ["dc:title", "Title"], ["dcterms:created", "CreatedDate", "date"], ["dcterms:modified", "ModifiedDate", "date"]];
function f7(e, t, n, i, r) {
    r[e] != null || t == null || t === "" || (r[e] = t,
    t = en(t),
    i[i.length] = n ? Me(e, t, n) : Wi(e, t))
}
function cC(e, t) {
    var n = t || {}
      , i = [ri, Me("cp:coreProperties", null, {
        "xmlns:cp": Ai.CORE_PROPS,
        "xmlns:dc": Ai.dc,
        "xmlns:dcterms": Ai.dcterms,
        "xmlns:dcmitype": Ai.dcmitype,
        "xmlns:xsi": Ai.xsi
    })]
      , r = {};
    if (!e && !n.Props)
        return i.join("");
    e && (e.CreatedDate != null && f7("dcterms:created", typeof e.CreatedDate == "string" ? e.CreatedDate : y7(e.CreatedDate, n.WTF), {
        "xsi:type": "dcterms:W3CDTF"
    }, i, r),
    e.ModifiedDate != null && f7("dcterms:modified", typeof e.ModifiedDate == "string" ? e.ModifiedDate : y7(e.ModifiedDate, n.WTF), {
        "xsi:type": "dcterms:W3CDTF"
    }, i, r));
    for (var s = 0; s != e0.length; ++s) {
        var o = e0[s]
          , a = n.Props && n.Props[o[1]] != null ? n.Props[o[1]] : e ? e[o[1]] : null;
        a === !0 ? a = "1" : a === !1 ? a = "0" : typeof a == "number" && (a = String(a)),
        a != null && f7(o[0], a, null, i, r)
    }
    return i.length > 2 && (i[i.length] = "</cp:coreProperties>",
    i[1] = i[1].replace("/>", ">")),
    i.join("")
}
var ju = [["Application", "Application", "string"], ["AppVersion", "AppVersion", "string"], ["Company", "Company", "string"], ["DocSecurity", "DocSecurity", "string"], ["Manager", "Manager", "string"], ["HyperlinksChanged", "HyperlinksChanged", "bool"], ["SharedDoc", "SharedDoc", "bool"], ["LinksUpToDate", "LinksUpToDate", "bool"], ["ScaleCrop", "ScaleCrop", "bool"], ["HeadingPairs", "HeadingPairs", "raw"], ["TitlesOfParts", "TitlesOfParts", "raw"]]
  , lC = ["Worksheets", "SheetNames", "NamedRanges", "DefinedNames", "Chartsheets", "ChartNames"];
function uC(e) {
    var t = []
      , n = Me;
    return e || (e = {}),
    e.Application = "SheetJS",
    t[t.length] = ri,
    t[t.length] = Me("Properties", null, {
        xmlns: Ai.EXT_PROPS,
        "xmlns:vt": Ai.vt
    }),
    ju.forEach(function(i) {
        if (e[i[1]] !== void 0) {
            var r;
            switch (i[2]) {
            case "string":
                r = en(String(e[i[1]]));
                break;
            case "bool":
                r = e[i[1]] ? "true" : "false";
                break
            }
            r !== void 0 && (t[t.length] = n(i[0], r))
        }
    }),
    t[t.length] = n("HeadingPairs", n("vt:vector", n("vt:variant", "<vt:lpstr>Worksheets</vt:lpstr>") + n("vt:variant", n("vt:i4", String(e.Worksheets))), {
        size: 2,
        baseType: "variant"
    })),
    t[t.length] = n("TitlesOfParts", n("vt:vector", e.SheetNames.map(function(i) {
        return "<vt:lpstr>" + en(i) + "</vt:lpstr>"
    }).join(""), {
        size: e.Worksheets,
        baseType: "lpstr"
    })),
    t.length > 2 && (t[t.length] = "</Properties>",
    t[1] = t[1].replace("/>", ">")),
    t.join("")
}
function hC(e) {
    var t = [ri, Me("Properties", null, {
        xmlns: Ai.CUST_PROPS,
        "xmlns:vt": Ai.vt
    })];
    if (!e)
        return t.join("");
    var n = 1;
    return qi(e).forEach(function(r) {
        ++n,
        t[t.length] = Me("property", ZL(e[r], !0), {
            fmtid: "{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",
            pid: n,
            name: en(r)
        })
    }),
    t.length > 2 && (t[t.length] = "</Properties>",
    t[1] = t[1].replace("/>", ">")),
    t.join("")
}
var uw = {
    Title: "Title",
    Subject: "Subject",
    Author: "Author",
    Keywords: "Keywords",
    Comments: "Description",
    LastAuthor: "LastAuthor",
    RevNumber: "Revision",
    Application: "AppName",
    LastPrinted: "LastPrinted",
    CreatedDate: "Created",
    ModifiedDate: "LastSaved",
    Category: "Category",
    Manager: "Manager",
    Company: "Company",
    AppVersion: "Version",
    ContentStatus: "ContentStatus",
    Identifier: "Identifier",
    Language: "Language"
};
function LB(e, t) {
    var n = [];
    return qi(uw).map(function(i) {
        for (var r = 0; r < e0.length; ++r)
            if (e0[r][1] == i)
                return e0[r];
        for (r = 0; r < ju.length; ++r)
            if (ju[r][1] == i)
                return ju[r];
        throw i
    }).forEach(function(i) {
        if (e[i[1]] != null) {
            var r = t && t.Props && t.Props[i[1]] != null ? t.Props[i[1]] : e[i[1]];
            switch (i[2]) {
            case "date":
                r = new Date(r).toISOString().replace(/\.\d*Z/, "Z");
                break
            }
            typeof r == "number" ? r = String(r) : r === !0 || r === !1 ? r = r ? "1" : "0" : r instanceof Date && (r = new Date(r).toISOString().replace(/\.\d*Z/, "")),
            n.push(Wi(uw[i[1]] || i[1], r))
        }
    }),
    Me("DocumentProperties", n.join(""), {
        xmlns: bs.o
    })
}
function BB(e, t) {
    var n = ["Worksheets", "SheetNames"]
      , i = "CustomDocumentProperties"
      , r = [];
    return e && qi(e).forEach(function(s) {
        if (Object.prototype.hasOwnProperty.call(e, s)) {
            for (var o = 0; o < e0.length; ++o)
                if (s == e0[o][1])
                    return;
            for (o = 0; o < ju.length; ++o)
                if (s == ju[o][1])
                    return;
            for (o = 0; o < n.length; ++o)
                if (s == n[o])
                    return;
            var a = e[s]
              , c = "string";
            typeof a == "number" ? (c = "float",
            a = String(a)) : a === !0 || a === !1 ? (c = "boolean",
            a = a ? "1" : "0") : a = String(a),
            r.push(Me(Qx(s), a, {
                "dt:dt": c
            }))
        }
    }),
    t && qi(t).forEach(function(s) {
        if (Object.prototype.hasOwnProperty.call(t, s) && !(e && Object.prototype.hasOwnProperty.call(e, s))) {
            var o = t[s]
              , a = "string";
            typeof o == "number" ? (a = "float",
            o = String(o)) : o === !0 || o === !1 ? (a = "boolean",
            o = o ? "1" : "0") : o instanceof Date ? (a = "dateTime.tz",
            o = o.toISOString()) : o = String(o),
            r.push(Me(Qx(s), o, {
                "dt:dt": a
            }))
        }
    }),
    "<" + i + ' xmlns="' + bs.o + '">' + r.join("") + "</" + i + ">"
}
function UB(e) {
    var t = typeof e == "string" ? new Date(Date.parse(e)) : e
      , n = t.getTime() / 1e3 + 11644473600
      , i = n % Math.pow(2, 32)
      , r = (n - i) / Math.pow(2, 32);
    i *= 1e7,
    r *= 1e7;
    var s = i / Math.pow(2, 32) | 0;
    s > 0 && (i = i % Math.pow(2, 32),
    r += s);
    var o = ce(8);
    return o.write_shift(4, i),
    o.write_shift(4, r),
    o
}
function hw(e, t) {
    var n = ce(4)
      , i = ce(4);
    switch (n.write_shift(4, e == 80 ? 31 : e),
    e) {
    case 3:
        i.write_shift(-4, t);
        break;
    case 5:
        i = ce(8),
        i.write_shift(8, t, "f");
        break;
    case 11:
        i.write_shift(4, t ? 1 : 0);
        break;
    case 64:
        i = UB(t);
        break;
    case 31:
    case 80:
        for (i = ce(4 + 2 * (t.length + 1) + (t.length % 2 ? 0 : 2)),
        i.write_shift(4, t.length + 1),
        i.write_shift(0, t, "dbcs"); i.l != i.length; )
            i.write_shift(1, 0);
        break;
    default:
        throw new Error("TypedPropertyValue unrecognized type " + e + " " + t)
    }
    return $i([n, i])
}
var dC = ["CodePage", "Thumbnail", "_PID_LINKBASE", "_PID_HLINKS", "SystemIdentifier", "FMTID"];
function HB(e) {
    switch (typeof e) {
    case "boolean":
        return 11;
    case "number":
        return (e | 0) == e ? 3 : 5;
    case "string":
        return 31;
    case "object":
        if (e instanceof Date)
            return 64;
        break
    }
    return -1
}
function dw(e, t, n) {
    var i = ce(8)
      , r = []
      , s = []
      , o = 8
      , a = 0
      , c = ce(8)
      , l = ce(8);
    if (c.write_shift(4, 2),
    c.write_shift(4, 1200),
    l.write_shift(4, 1),
    s.push(c),
    r.push(l),
    o += 8 + c.length,
    !t) {
        l = ce(8),
        l.write_shift(4, 0),
        r.unshift(l);
        var u = [ce(4)];
        for (u[0].write_shift(4, e.length),
        a = 0; a < e.length; ++a) {
            var h = e[a][0];
            for (c = ce(8 + 2 * (h.length + 1) + (h.length % 2 ? 0 : 2)),
            c.write_shift(4, a + 2),
            c.write_shift(4, h.length + 1),
            c.write_shift(0, h, "dbcs"); c.l != c.length; )
                c.write_shift(1, 0);
            u.push(c)
        }
        c = $i(u),
        s.unshift(c),
        o += 8 + c.length
    }
    for (a = 0; a < e.length; ++a)
        if (!(t && !t[e[a][0]]) && !(dC.indexOf(e[a][0]) > -1 || lC.indexOf(e[a][0]) > -1) && e[a][1] != null) {
            var d = e[a][1]
              , f = 0;
            if (t) {
                f = +t[e[a][0]];
                var g = n[f];
                if (g.p == "version" && typeof d == "string") {
                    var p = d.split(".");
                    d = (+p[0] << 16) + (+p[1] || 0)
                }
                c = hw(g.t, d)
            } else {
                var v = HB(d);
                v == -1 && (v = 31,
                d = String(d)),
                c = hw(v, d)
            }
            s.push(c),
            l = ce(8),
            l.write_shift(4, t ? f : 2 + a),
            r.push(l),
            o += 8 + c.length
        }
    var S = 8 * (s.length + 1);
    for (a = 0; a < s.length; ++a)
        r[a].write_shift(4, S),
        S += s[a].length;
    return i.write_shift(4, o),
    i.write_shift(4, s.length),
    $i([i].concat(r).concat(s))
}
function fw(e, t, n, i, r, s) {
    var o = ce(r ? 68 : 48)
      , a = [o];
    o.write_shift(2, 65534),
    o.write_shift(2, 0),
    o.write_shift(4, 842412599),
    o.write_shift(16, nn.utils.consts.HEADER_CLSID, "hex"),
    o.write_shift(4, r ? 2 : 1),
    o.write_shift(16, t, "hex"),
    o.write_shift(4, r ? 68 : 48);
    var c = dw(e, n, i);
    if (a.push(c),
    r) {
        var l = dw(r, null, null);
        o.write_shift(16, s, "hex"),
        o.write_shift(4, 68 + c.length),
        a.push(l)
    }
    return $i(a)
}
function GB(e, t) {
    t || (t = ce(e));
    for (var n = 0; n < e; ++n)
        t.write_shift(1, 0);
    return t
}
function VB(e, t) {
    return e.read_shift(t) === 1
}
function Or(e, t) {
    return t || (t = ce(2)),
    t.write_shift(2, +!!e),
    t
}
function fC(e) {
    return e.read_shift(2, "u")
}
function Ns(e, t) {
    return t || (t = ce(2)),
    t.write_shift(2, e),
    t
}
function pC(e, t, n) {
    return n || (n = ce(2)),
    n.write_shift(1, t == "e" ? +e : +!!e),
    n.write_shift(1, t == "e" ? 1 : 0),
    n
}
function gC(e, t, n) {
    var i = e.read_shift(n && n.biff >= 12 ? 2 : 1)
      , r = "sbcs-cont"
      , s = Zl;
    if (n && n.biff >= 8 && (Zl = 1200),
    !n || n.biff == 8) {
        var o = e.read_shift(1);
        o && (r = "dbcs-cont")
    } else
        n.biff == 12 && (r = "wstr");
    n.biff >= 2 && n.biff <= 5 && (r = "cpstr");
    var a = i ? e.read_shift(i, r) : "";
    return Zl = s,
    a
}
function $B(e) {
    var t = e.t || ""
      , n = 1
      , i = ce(3 + (n > 1 ? 2 : 0));
    i.write_shift(2, t.length),
    i.write_shift(1, (n > 1 ? 8 : 0) | 1),
    n > 1 && i.write_shift(2, n);
    var r = ce(2 * t.length);
    r.write_shift(2 * t.length, t, "utf16le");
    var s = [i, r];
    return $i(s)
}
function WB(e, t, n) {
    var i;
    if (n) {
        if (n.biff >= 2 && n.biff <= 5)
            return e.read_shift(t, "cpstr");
        if (n.biff >= 12)
            return e.read_shift(t, "dbcs-cont")
    }
    var r = e.read_shift(1);
    return r === 0 ? i = e.read_shift(t, "sbcs-cont") : i = e.read_shift(t, "dbcs-cont"),
    i
}
function jB(e, t, n) {
    var i = e.read_shift(n && n.biff == 2 ? 1 : 2);
    return i === 0 ? (e.l++,
    "") : WB(e, i, n)
}
function qB(e, t, n) {
    if (n.biff > 5)
        return jB(e, t, n);
    var i = e.read_shift(1);
    return i === 0 ? (e.l++,
    "") : e.read_shift(i, n.biff <= 4 || !e.lens ? "cpstr" : "sbcs-cont")
}
function mC(e, t, n) {
    return n || (n = ce(3 + 2 * e.length)),
    n.write_shift(2, e.length),
    n.write_shift(1, 1),
    n.write_shift(31, e, "utf16le"),
    n
}
function pw(e, t) {
    t || (t = ce(6 + e.length * 2)),
    t.write_shift(4, 1 + e.length);
    for (var n = 0; n < e.length; ++n)
        t.write_shift(2, e.charCodeAt(n));
    return t.write_shift(2, 0),
    t
}
function zB(e) {
    var t = ce(512)
      , n = 0
      , i = e.Target;
    i.slice(0, 7) == "file://" && (i = i.slice(7));
    var r = i.indexOf("#")
      , s = r > -1 ? 31 : 23;
    switch (i.charAt(0)) {
    case "#":
        s = 28;
        break;
    case ".":
        s &= -3;
        break
    }
    t.write_shift(4, 2),
    t.write_shift(4, s);
    var o = [8, 6815827, 6619237, 4849780, 83];
    for (n = 0; n < o.length; ++n)
        t.write_shift(4, o[n]);
    if (s == 28)
        i = i.slice(1),
        pw(i, t);
    else if (s & 2) {
        for (o = "e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),
        n = 0; n < o.length; ++n)
            t.write_shift(1, parseInt(o[n], 16));
        var a = r > -1 ? i.slice(0, r) : i;
        for (t.write_shift(4, 2 * (a.length + 1)),
        n = 0; n < a.length; ++n)
            t.write_shift(2, a.charCodeAt(n));
        t.write_shift(2, 0),
        s & 8 && pw(r > -1 ? i.slice(r + 1) : "", t)
    } else {
        for (o = "03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),
        n = 0; n < o.length; ++n)
            t.write_shift(1, parseInt(o[n], 16));
        for (var c = 0; i.slice(c * 3, c * 3 + 3) == "../" || i.slice(c * 3, c * 3 + 3) == "..\\"; )
            ++c;
        for (t.write_shift(2, c),
        t.write_shift(4, i.length - 3 * c + 1),
        n = 0; n < i.length - 3 * c; ++n)
            t.write_shift(1, i.charCodeAt(n + 3 * c) & 255);
        for (t.write_shift(1, 0),
        t.write_shift(2, 65535),
        t.write_shift(2, 57005),
        n = 0; n < 6; ++n)
            t.write_shift(4, 0)
    }
    return t.slice(0, t.l)
}
function i0(e, t, n, i) {
    return i || (i = ce(6)),
    i.write_shift(2, e),
    i.write_shift(2, t),
    i.write_shift(2, n || 0),
    i
}
function XB(e, t, n) {
    var i = n.biff > 8 ? 4 : 2
      , r = e.read_shift(i)
      , s = e.read_shift(i, "i")
      , o = e.read_shift(i, "i");
    return [r, s, o]
}
function KB(e) {
    var t = e.read_shift(2)
      , n = e.read_shift(2)
      , i = e.read_shift(2)
      , r = e.read_shift(2);
    return {
        s: {
            c: i,
            r: t
        },
        e: {
            c: r,
            r: n
        }
    }
}
function vC(e, t) {
    return t || (t = ce(8)),
    t.write_shift(2, e.s.r),
    t.write_shift(2, e.e.r),
    t.write_shift(2, e.s.c),
    t.write_shift(2, e.e.c),
    t
}
function U7(e, t, n) {
    var i = 1536
      , r = 16;
    switch (n.bookType) {
    case "biff8":
        break;
    case "biff5":
        i = 1280,
        r = 8;
        break;
    case "biff4":
        i = 4,
        r = 6;
        break;
    case "biff3":
        i = 3,
        r = 6;
        break;
    case "biff2":
        i = 2,
        r = 4;
        break;
    case "xla":
        break;
    default:
        throw new Error("unsupported BIFF version")
    }
    var s = ce(r);
    return s.write_shift(2, i),
    s.write_shift(2, t),
    r > 4 && s.write_shift(2, 29282),
    r > 6 && s.write_shift(2, 1997),
    r > 8 && (s.write_shift(2, 49161),
    s.write_shift(2, 1),
    s.write_shift(2, 1798),
    s.write_shift(2, 0)),
    s
}
function YB(e, t) {
    var n = !t || t.biff == 8
      , i = ce(n ? 112 : 54);
    for (i.write_shift(t.biff == 8 ? 2 : 1, 7),
    n && i.write_shift(1, 0),
    i.write_shift(4, 859007059),
    i.write_shift(4, 5458548 | (n ? 0 : 536870912)); i.l < i.length; )
        i.write_shift(1, n ? 0 : 32);
    return i
}
function QB(e, t) {
    var n = !t || t.biff >= 8 ? 2 : 1
      , i = ce(8 + n * e.name.length);
    i.write_shift(4, e.pos),
    i.write_shift(1, e.hs || 0),
    i.write_shift(1, e.dt),
    i.write_shift(1, e.name.length),
    t.biff >= 8 && i.write_shift(1, 1),
    i.write_shift(n * e.name.length, e.name, t.biff < 8 ? "sbcs" : "utf16le");
    var r = i.slice(0, i.l);
    return r.l = i.l,
    r
}
function JB(e, t) {
    var n = ce(8);
    n.write_shift(4, e.Count),
    n.write_shift(4, e.Unique);
    for (var i = [], r = 0; r < e.length; ++r)
        i[r] = $B(e[r], t);
    var s = $i([n].concat(i));
    return s.parts = [n.length].concat(i.map(function(o) {
        return o.length
    })),
    s
}
function ZB() {
    var e = ce(18);
    return e.write_shift(2, 0),
    e.write_shift(2, 0),
    e.write_shift(2, 29280),
    e.write_shift(2, 17600),
    e.write_shift(2, 56),
    e.write_shift(2, 0),
    e.write_shift(2, 0),
    e.write_shift(2, 1),
    e.write_shift(2, 500),
    e
}
function eU(e) {
    var t = ce(18)
      , n = 1718;
    return e && e.RTL && (n |= 64),
    t.write_shift(2, n),
    t.write_shift(4, 0),
    t.write_shift(4, 64),
    t.write_shift(4, 0),
    t.write_shift(4, 0),
    t
}
function tU(e, t) {
    var n = e.name || "Arial"
      , i = t && t.biff == 5
      , r = i ? 15 + n.length : 16 + 2 * n.length
      , s = ce(r);
    return s.write_shift(2, (e.sz || 12) * 20),
    s.write_shift(4, 0),
    s.write_shift(2, 400),
    s.write_shift(4, 0),
    s.write_shift(2, 0),
    s.write_shift(1, n.length),
    i || s.write_shift(1, 1),
    s.write_shift((i ? 1 : 2) * n.length, n, i ? "sbcs" : "utf16le"),
    s
}
function nU(e, t, n, i) {
    var r = ce(10);
    return i0(e, t, i, r),
    r.write_shift(4, n),
    r
}
function iU(e, t, n, i, r) {
    var s = !r || r.biff == 8
      , o = ce(8 + +s + (1 + s) * n.length);
    return i0(e, t, i, o),
    o.write_shift(2, n.length),
    s && o.write_shift(1, 1),
    o.write_shift((1 + s) * n.length, n, s ? "utf16le" : "sbcs"),
    o
}
function rU(e, t, n, i) {
    var r = n && n.biff == 5;
    i || (i = ce(r ? 3 + t.length : 5 + 2 * t.length)),
    i.write_shift(2, e),
    i.write_shift(r ? 1 : 2, t.length),
    r || i.write_shift(1, 1),
    i.write_shift((r ? 1 : 2) * t.length, t, r ? "sbcs" : "utf16le");
    var s = i.length > i.l ? i.slice(0, i.l) : i;
    return s.l == null && (s.l = s.length),
    s
}
function sU(e, t) {
    var n = t.biff == 8 || !t.biff ? 4 : 2
      , i = ce(2 * n + 6);
    return i.write_shift(n, e.s.r),
    i.write_shift(n, e.e.r + 1),
    i.write_shift(2, e.s.c),
    i.write_shift(2, e.e.c + 1),
    i.write_shift(2, 0),
    i
}
function gw(e, t, n, i) {
    var r = n && n.biff == 5;
    i || (i = ce(r ? 16 : 20)),
    i.write_shift(2, 0),
    e.style ? (i.write_shift(2, e.numFmtId || 0),
    i.write_shift(2, 65524)) : (i.write_shift(2, e.numFmtId || 0),
    i.write_shift(2, t << 4));
    var s = 0;
    return e.numFmtId > 0 && r && (s |= 1024),
    i.write_shift(4, s),
    i.write_shift(4, 0),
    r || i.write_shift(4, 0),
    i.write_shift(2, 0),
    i
}
function oU(e) {
    var t = ce(8);
    return t.write_shift(4, 0),
    t.write_shift(2, e[0] ? e[0] + 1 : 0),
    t.write_shift(2, e[1] ? e[1] + 1 : 0),
    t
}
function aU(e, t, n, i, r, s) {
    var o = ce(8);
    return i0(e, t, i, o),
    pC(n, s, o),
    o
}
function cU(e, t, n, i) {
    var r = ce(14);
    return i0(e, t, i, r),
    n0(n, r),
    r
}
function lU(e, t, n) {
    if (n.biff < 8)
        return uU(e, t, n);
    for (var i = [], r = e.l + t, s = e.read_shift(n.biff > 8 ? 4 : 2); s-- !== 0; )
        i.push(XB(e, n.biff > 8 ? 12 : 6, n));
    if (e.l != r)
        throw new Error("Bad ExternSheet: " + e.l + " != " + r);
    return i
}
function uU(e, t, n) {
    e[e.l + 1] == 3 && e[e.l]++;
    var i = gC(e, t, n);
    return i.charCodeAt(0) == 3 ? i.slice(1) : i
}
function hU(e) {
    var t = ce(2 + e.length * 8);
    t.write_shift(2, e.length);
    for (var n = 0; n < e.length; ++n)
        vC(e[n], t);
    return t
}
function dU(e) {
    var t = ce(24)
      , n = Ii(e[0]);
    t.write_shift(2, n.r),
    t.write_shift(2, n.r),
    t.write_shift(2, n.c),
    t.write_shift(2, n.c);
    for (var i = "d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "), r = 0; r < 16; ++r)
        t.write_shift(1, parseInt(i[r], 16));
    return $i([t, zB(e[1])])
}
function fU(e) {
    var t = e[1].Tooltip
      , n = ce(10 + 2 * (t.length + 1));
    n.write_shift(2, 2048);
    var i = Ii(e[0]);
    n.write_shift(2, i.r),
    n.write_shift(2, i.r),
    n.write_shift(2, i.c),
    n.write_shift(2, i.c);
    for (var r = 0; r < t.length; ++r)
        n.write_shift(2, t.charCodeAt(r));
    return n.write_shift(2, 0),
    n
}
function pU(e) {
    return e || (e = ce(4)),
    e.write_shift(2, 1),
    e.write_shift(2, 1),
    e
}
function gU(e, t, n) {
    if (!n.cellStyles)
        return Jo(e, t);
    var i = n && n.biff >= 12 ? 4 : 2
      , r = e.read_shift(i)
      , s = e.read_shift(i)
      , o = e.read_shift(i)
      , a = e.read_shift(i)
      , c = e.read_shift(2);
    i == 2 && (e.l += 2);
    var l = {
        s: r,
        e: s,
        w: o,
        ixfe: a,
        flags: c
    };
    return (n.biff >= 5 || !n.biff) && (l.level = c >> 8 & 7),
    l
}
function mU(e, t) {
    var n = ce(12);
    n.write_shift(2, t),
    n.write_shift(2, t),
    n.write_shift(2, e.width * 256),
    n.write_shift(2, 0);
    var i = 0;
    return e.hidden && (i |= 1),
    n.write_shift(1, i),
    i = e.level || 0,
    n.write_shift(1, i),
    n.write_shift(2, 0),
    n
}
function vU(e) {
    for (var t = ce(2 * e), n = 0; n < e; ++n)
        t.write_shift(2, n + 1);
    return t
}
function _U(e, t, n) {
    var i = ce(15);
    return R1(i, e, t),
    i.write_shift(8, n, "f"),
    i
}
function yU(e, t, n) {
    var i = ce(9);
    return R1(i, e, t),
    i.write_shift(2, n),
    i
}
var SU = function() {
    var e = {
        1: 437,
        2: 850,
        3: 1252,
        4: 1e4,
        100: 852,
        101: 866,
        102: 865,
        103: 861,
        104: 895,
        105: 620,
        106: 737,
        107: 857,
        120: 950,
        121: 949,
        122: 936,
        123: 932,
        124: 874,
        125: 1255,
        126: 1256,
        150: 10007,
        151: 10029,
        152: 10006,
        200: 1250,
        201: 1251,
        202: 1254,
        203: 1253,
        0: 20127,
        8: 865,
        9: 437,
        10: 850,
        11: 437,
        13: 437,
        14: 850,
        15: 437,
        16: 850,
        17: 437,
        18: 850,
        19: 932,
        20: 850,
        21: 437,
        22: 850,
        23: 865,
        24: 437,
        25: 437,
        26: 850,
        27: 437,
        28: 863,
        29: 850,
        31: 852,
        34: 852,
        35: 852,
        36: 860,
        37: 850,
        38: 866,
        55: 850,
        64: 852,
        77: 936,
        78: 949,
        79: 950,
        80: 874,
        87: 1252,
        88: 1252,
        89: 1252,
        108: 863,
        134: 737,
        135: 852,
        136: 857,
        204: 1257,
        255: 16969
    }
      , t = C7({
        1: 437,
        2: 850,
        3: 1252,
        4: 1e4,
        100: 852,
        101: 866,
        102: 865,
        103: 861,
        104: 895,
        105: 620,
        106: 737,
        107: 857,
        120: 950,
        121: 949,
        122: 936,
        123: 932,
        124: 874,
        125: 1255,
        126: 1256,
        150: 10007,
        151: 10029,
        152: 10006,
        200: 1250,
        201: 1251,
        202: 1254,
        203: 1253,
        0: 20127
    });
    function n(a, c) {
        var l = []
          , u = t0(1);
        switch (c.type) {
        case "base64":
            u = lo(Ba(a));
            break;
        case "binary":
            u = lo(a);
            break;
        case "buffer":
        case "array":
            u = a;
            break
        }
        Ss(u, 0);
        var h = u.read_shift(1)
          , d = !!(h & 136)
          , f = !1
          , g = !1;
        switch (h) {
        case 2:
            break;
        case 3:
            break;
        case 48:
            f = !0,
            d = !0;
            break;
        case 49:
            f = !0,
            d = !0;
            break;
        case 131:
            break;
        case 139:
            break;
        case 140:
            g = !0;
            break;
        case 245:
            break;
        default:
            throw new Error("DBF Unsupported Version: " + h.toString(16))
        }
        var p = 0
          , v = 521;
        h == 2 && (p = u.read_shift(2)),
        u.l += 3,
        h != 2 && (p = u.read_shift(4)),
        p > 1048576 && (p = 1e6),
        h != 2 && (v = u.read_shift(2));
        var S = u.read_shift(2)
          , x = c.codepage || 1252;
        h != 2 && (u.l += 16,
        u.read_shift(1),
        u[u.l] !== 0 && (x = e[u[u.l]]),
        u.l += 1,
        u.l += 2),
        g && (u.l += 36);
        for (var w = [], k = {}, B = Math.min(u.length, h == 2 ? 521 : v - 10 - (f ? 264 : 0)), N = g ? 32 : 11; u.l < B && u[u.l] != 13; )
            switch (k = {},
            k.name = ln.utils.decode(x, u.slice(u.l, u.l + N)).replace(/[\u0000\r\n].*$/g, ""),
            u.l += N,
            k.type = String.fromCharCode(u.read_shift(1)),
            h != 2 && !g && (k.offset = u.read_shift(4)),
            k.len = u.read_shift(1),
            h == 2 && (k.offset = u.read_shift(2)),
            k.dec = u.read_shift(1),
            k.name.length && w.push(k),
            h != 2 && (u.l += g ? 13 : 14),
            k.type) {
            case "B":
                (!f || k.len != 8) && c.WTF && console.log("Skipping " + k.name + ":" + k.type);
                break;
            case "G":
            case "P":
                c.WTF && console.log("Skipping " + k.name + ":" + k.type);
                break;
            case "+":
            case "0":
            case "@":
            case "C":
            case "D":
            case "F":
            case "I":
            case "L":
            case "M":
            case "N":
            case "O":
            case "T":
            case "Y":
                break;
            default:
                throw new Error("Unknown Field Type: " + k.type)
            }
        if (u[u.l] !== 13 && (u.l = v - 1),
        u.read_shift(1) !== 13)
            throw new Error("DBF Terminator not found " + u.l + " " + u[u.l]);
        u.l = v;
        var E = 0
          , F = 0;
        for (l[0] = [],
        F = 0; F != w.length; ++F)
            l[0][F] = w[F].name;
        for (; p-- > 0; ) {
            if (u[u.l] === 42) {
                u.l += S;
                continue
            }
            for (++u.l,
            l[++E] = [],
            F = 0,
            F = 0; F != w.length; ++F) {
                var O = u.slice(u.l, u.l + w[F].len);
                u.l += w[F].len,
                Ss(O, 0);
                var V = ln.utils.decode(x, O);
                switch (w[F].type) {
                case "C":
                    V.trim().length && (l[E][F] = V.replace(/\s+$/, ""));
                    break;
                case "D":
                    V.length === 8 ? l[E][F] = new Date(+V.slice(0, 4),+V.slice(4, 6) - 1,+V.slice(6, 8)) : l[E][F] = V;
                    break;
                case "F":
                    l[E][F] = parseFloat(V.trim());
                    break;
                case "+":
                case "I":
                    l[E][F] = g ? O.read_shift(-4, "i") ^ 2147483648 : O.read_shift(4, "i");
                    break;
                case "L":
                    switch (V.trim().toUpperCase()) {
                    case "Y":
                    case "T":
                        l[E][F] = !0;
                        break;
                    case "N":
                    case "F":
                        l[E][F] = !1;
                        break;
                    case "":
                    case "?":
                        break;
                    default:
                        throw new Error("DBF Unrecognized L:|" + V + "|")
                    }
                    break;
                case "M":
                    if (!d)
                        throw new Error("DBF Unexpected MEMO for type " + h.toString(16));
                    l[E][F] = "##MEMO##" + (g ? parseInt(V.trim(), 10) : O.read_shift(4));
                    break;
                case "N":
                    V = V.replace(/\u0000/g, "").trim(),
                    V && V != "." && (l[E][F] = +V || 0);
                    break;
                case "@":
                    l[E][F] = new Date(O.read_shift(-8, "f") - 621356832e5);
                    break;
                case "T":
                    l[E][F] = new Date((O.read_shift(4) - 2440588) * 864e5 + O.read_shift(4));
                    break;
                case "Y":
                    l[E][F] = O.read_shift(4, "i") / 1e4 + O.read_shift(4, "i") / 1e4 * Math.pow(2, 32);
                    break;
                case "O":
                    l[E][F] = -O.read_shift(-8, "f");
                    break;
                case "B":
                    if (f && w[F].len == 8) {
                        l[E][F] = O.read_shift(8, "f");
                        break
                    }
                case "G":
                case "P":
                    O.l += w[F].len;
                    break;
                case "0":
                    if (w[F].name === "_NullFlags")
                        break;
                default:
                    throw new Error("DBF Unsupported data type " + w[F].type)
                }
            }
        }
        if (h != 2 && u.l < u.length && u[u.l++] != 26)
            throw new Error("DBF EOF Marker missing " + (u.l - 1) + " of " + u.length + " " + u[u.l - 1].toString(16));
        return c && c.sheetRows && (l = l.slice(0, c.sheetRows)),
        c.DBF = w,
        l
    }
    function i(a, c) {
        var l = c || {};
        l.dateNF || (l.dateNF = "yyyymmdd");
        var u = Qu(n(a, l), l);
        return u["!cols"] = l.DBF.map(function(h) {
            return {
                wch: h.len,
                DBF: h
            }
        }),
        delete l.DBF,
        u
    }
    function r(a, c) {
        try {
            return r0(i(a, c), c)
        } catch (l) {
            if (c && c.WTF)
                throw l
        }
        return {
            SheetNames: [],
            Sheets: {}
        }
    }
    var s = {
        B: 8,
        C: 250,
        L: 1,
        D: 8,
        "?": 0,
        "": 0
    };
    function o(a, c) {
        var l = c || {};
        if (+l.codepage >= 0 && w1(+l.codepage),
        l.type == "string")
            throw new Error("Cannot write DBF to JS string");
        var u = Yr()
          , h = u2(a, {
            header: 1,
            raw: !0,
            cellDates: !0
        })
          , d = h[0]
          , f = h.slice(1)
          , g = a["!cols"] || []
          , p = 0
          , v = 0
          , S = 0
          , x = 1;
        for (p = 0; p < d.length; ++p) {
            if (((g[p] || {}).DBF || {}).name) {
                d[p] = g[p].DBF.name,
                ++S;
                continue
            }
            if (d[p] != null) {
                if (++S,
                typeof d[p] == "number" && (d[p] = d[p].toString(10)),
                typeof d[p] != "string")
                    throw new Error("DBF Invalid column name " + d[p] + " |" + typeof d[p] + "|");
                if (d.indexOf(d[p]) !== p) {
                    for (v = 0; v < 1024; ++v)
                        if (d.indexOf(d[p] + "_" + v) == -1) {
                            d[p] += "_" + v;
                            break
                        }
                }
            }
        }
        var w = yn(a["!ref"])
          , k = []
          , B = []
          , N = [];
        for (p = 0; p <= w.e.c - w.s.c; ++p) {
            var E = ""
              , F = ""
              , O = 0
              , V = [];
            for (v = 0; v < f.length; ++v)
                f[v][p] != null && V.push(f[v][p]);
            if (V.length == 0 || d[p] == null) {
                k[p] = "?";
                continue
            }
            for (v = 0; v < V.length; ++v) {
                switch (typeof V[v]) {
                case "number":
                    F = "B";
                    break;
                case "string":
                    F = "C";
                    break;
                case "boolean":
                    F = "L";
                    break;
                case "object":
                    F = V[v]instanceof Date ? "D" : "C";
                    break;
                default:
                    F = "C"
                }
                O = Math.max(O, String(V[v]).length),
                E = E && E != F ? "C" : F
            }
            O > 250 && (O = 250),
            F = ((g[p] || {}).DBF || {}).type,
            F == "C" && g[p].DBF.len > O && (O = g[p].DBF.len),
            E == "B" && F == "N" && (E = "N",
            N[p] = g[p].DBF.dec,
            O = g[p].DBF.len),
            B[p] = E == "C" || F == "N" ? O : s[E] || 0,
            x += B[p],
            k[p] = E
        }
        var X = u.next(32);
        for (X.write_shift(4, 318902576),
        X.write_shift(4, f.length),
        X.write_shift(2, 296 + 32 * S),
        X.write_shift(2, x),
        p = 0; p < 4; ++p)
            X.write_shift(4, 0);
        for (X.write_shift(4, 0 | (+t[zu] || 3) << 8),
        p = 0,
        v = 0; p < d.length; ++p)
            if (d[p] != null) {
                var b = u.next(32)
                  , j = (d[p].slice(-10) + "\0\0\0\0\0\0\0\0\0\0\0").slice(0, 11);
                b.write_shift(1, j, "sbcs"),
                b.write_shift(1, k[p] == "?" ? "C" : k[p], "sbcs"),
                b.write_shift(4, v),
                b.write_shift(1, B[p] || s[k[p]] || 0),
                b.write_shift(1, N[p] || 0),
                b.write_shift(1, 2),
                b.write_shift(4, 0),
                b.write_shift(1, 0),
                b.write_shift(4, 0),
                b.write_shift(4, 0),
                v += B[p] || s[k[p]] || 0
            }
        var de = u.next(264);
        for (de.write_shift(4, 13),
        p = 0; p < 65; ++p)
            de.write_shift(4, 0);
        for (p = 0; p < f.length; ++p) {
            var he = u.next(x);
            for (he.write_shift(1, 0),
            v = 0; v < d.length; ++v)
                if (d[v] != null)
                    switch (k[v]) {
                    case "L":
                        he.write_shift(1, f[p][v] == null ? 63 : f[p][v] ? 84 : 70);
                        break;
                    case "B":
                        he.write_shift(8, f[p][v] || 0, "f");
                        break;
                    case "N":
                        var Re = "0";
                        for (typeof f[p][v] == "number" && (Re = f[p][v].toFixed(N[v] || 0)),
                        S = 0; S < B[v] - Re.length; ++S)
                            he.write_shift(1, 32);
                        he.write_shift(1, Re, "sbcs");
                        break;
                    case "D":
                        f[p][v] ? (he.write_shift(4, ("0000" + f[p][v].getFullYear()).slice(-4), "sbcs"),
                        he.write_shift(2, ("00" + (f[p][v].getMonth() + 1)).slice(-2), "sbcs"),
                        he.write_shift(2, ("00" + f[p][v].getDate()).slice(-2), "sbcs")) : he.write_shift(8, "00000000", "sbcs");
                        break;
                    case "C":
                        var Xe = String(f[p][v] != null ? f[p][v] : "").slice(0, B[v]);
                        for (he.write_shift(1, Xe, "sbcs"),
                        S = 0; S < B[v] - Xe.length; ++S)
                            he.write_shift(1, 32);
                        break
                    }
        }
        return u.next(1).write_shift(1, 26),
        u.end()
    }
    return {
        to_workbook: r,
        to_sheet: i,
        from_sheet: o
    }
}()
  , bU = function() {
    var e = {
        AA: "\xC0",
        BA: "\xC1",
        CA: "\xC2",
        DA: 195,
        HA: "\xC4",
        JA: 197,
        AE: "\xC8",
        BE: "\xC9",
        CE: "\xCA",
        HE: "\xCB",
        AI: "\xCC",
        BI: "\xCD",
        CI: "\xCE",
        HI: "\xCF",
        AO: "\xD2",
        BO: "\xD3",
        CO: "\xD4",
        DO: 213,
        HO: "\xD6",
        AU: "\xD9",
        BU: "\xDA",
        CU: "\xDB",
        HU: "\xDC",
        Aa: "\xE0",
        Ba: "\xE1",
        Ca: "\xE2",
        Da: 227,
        Ha: "\xE4",
        Ja: 229,
        Ae: "\xE8",
        Be: "\xE9",
        Ce: "\xEA",
        He: "\xEB",
        Ai: "\xEC",
        Bi: "\xED",
        Ci: "\xEE",
        Hi: "\xEF",
        Ao: "\xF2",
        Bo: "\xF3",
        Co: "\xF4",
        Do: 245,
        Ho: "\xF6",
        Au: "\xF9",
        Bu: "\xFA",
        Cu: "\xFB",
        Hu: "\xFC",
        KC: "\xC7",
        Kc: "\xE7",
        q: "\xE6",
        z: "\u0153",
        a: "\xC6",
        j: "\u0152",
        DN: 209,
        Dn: 241,
        Hy: 255,
        S: 169,
        c: 170,
        R: 174,
        "B ": 180,
        0: 176,
        1: 177,
        2: 178,
        3: 179,
        5: 181,
        6: 182,
        7: 183,
        Q: 185,
        k: 186,
        b: 208,
        i: 216,
        l: 222,
        s: 240,
        y: 248,
        "!": 161,
        '"': 162,
        "#": 163,
        "(": 164,
        "%": 165,
        "'": 167,
        "H ": 168,
        "+": 171,
        ";": 187,
        "<": 188,
        "=": 189,
        ">": 190,
        "?": 191,
        "{": 223
    }
      , t = new RegExp("\x1BN(" + qi(e).join("|").replace(/\|\|\|/, "|\\||").replace(/([?()+])/g, "\\$1") + "|\\|)","gm")
      , n = function(d, f) {
        var g = e[f];
        return typeof g == "number" ? Ux(g) : g
    }
      , i = function(d, f, g) {
        var p = f.charCodeAt(0) - 32 << 4 | g.charCodeAt(0) - 48;
        return p == 59 ? d : Ux(p)
    };
    e["|"] = 254;
    function r(d, f) {
        switch (f.type) {
        case "base64":
            return s(Ba(d), f);
        case "binary":
            return s(d, f);
        case "buffer":
            return s(zt && Buffer.isBuffer(d) ? d.toString("binary") : P1(d), f);
        case "array":
            return s(g2(d), f)
        }
        throw new Error("Unrecognized type " + f.type)
    }
    function s(d, f) {
        var g = d.split(/[\n\r]+/), p = -1, v = -1, S = 0, x = 0, w = [], k = [], B = null, N = {}, E = [], F = [], O = [], V = 0, X;
        for (+f.codepage >= 0 && w1(+f.codepage); S !== g.length; ++S) {
            V = 0;
            var b = g[S].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g, i).replace(t, n), j = b.replace(/;;/g, "\0").split(";").map(function(U) {
                return U.replace(/\u0000/g, ";")
            }), de = j[0], he;
            if (b.length > 0)
                switch (de) {
                case "ID":
                    break;
                case "E":
                    break;
                case "B":
                    break;
                case "O":
                    break;
                case "W":
                    break;
                case "P":
                    j[1].charAt(0) == "P" && k.push(b.slice(3).replace(/;;/g, ";"));
                    break;
                case "C":
                    var Re = !1
                      , Xe = !1
                      , pt = !1
                      , it = !1
                      , fe = -1
                      , Ge = -1;
                    for (x = 1; x < j.length; ++x)
                        switch (j[x].charAt(0)) {
                        case "A":
                            break;
                        case "X":
                            v = parseInt(j[x].slice(1)) - 1,
                            Xe = !0;
                            break;
                        case "Y":
                            for (p = parseInt(j[x].slice(1)) - 1,
                            Xe || (v = 0),
                            X = w.length; X <= p; ++X)
                                w[X] = [];
                            break;
                        case "K":
                            he = j[x].slice(1),
                            he.charAt(0) === '"' ? he = he.slice(1, he.length - 1) : he === "TRUE" ? he = !0 : he === "FALSE" ? he = !1 : isNaN(Fa(he)) ? isNaN(E1(he).getDate()) || (he = Mr(he)) : (he = Fa(he),
                            B !== null && Fw(B) && (he = Hw(he))),
                            typeof ln < "u" && typeof he == "string" && (f || {}).type != "string" && (f || {}).codepage && (he = ln.utils.decode(f.codepage, he)),
                            Re = !0;
                            break;
                        case "E":
                            it = !0;
                            var A = yH(j[x].slice(1), {
                                r: p,
                                c: v
                            });
                            w[p][v] = [w[p][v], A];
                            break;
                        case "S":
                            pt = !0,
                            w[p][v] = [w[p][v], "S5S"];
                            break;
                        case "G":
                            break;
                        case "R":
                            fe = parseInt(j[x].slice(1)) - 1;
                            break;
                        case "C":
                            Ge = parseInt(j[x].slice(1)) - 1;
                            break;
                        default:
                            if (f && f.WTF)
                                throw new Error("SYLK bad record " + b)
                        }
                    if (Re && (w[p][v] && w[p][v].length == 2 ? w[p][v][0] = he : w[p][v] = he,
                    B = null),
                    pt) {
                        if (it)
                            throw new Error("SYLK shared formula cannot have own formula");
                        var q = fe > -1 && w[fe][Ge];
                        if (!q || !q[1])
                            throw new Error("SYLK shared formula cannot find base");
                        w[p][v][1] = SH(q[1], {
                            r: p - fe,
                            c: v - Ge
                        })
                    }
                    break;
                case "F":
                    var L = 0;
                    for (x = 1; x < j.length; ++x)
                        switch (j[x].charAt(0)) {
                        case "X":
                            v = parseInt(j[x].slice(1)) - 1,
                            ++L;
                            break;
                        case "Y":
                            for (p = parseInt(j[x].slice(1)) - 1,
                            X = w.length; X <= p; ++X)
                                w[X] = [];
                            break;
                        case "M":
                            V = parseInt(j[x].slice(1)) / 20;
                            break;
                        case "F":
                            break;
                        case "G":
                            break;
                        case "P":
                            B = k[parseInt(j[x].slice(1))];
                            break;
                        case "S":
                            break;
                        case "D":
                            break;
                        case "N":
                            break;
                        case "W":
                            for (O = j[x].slice(1).split(" "),
                            X = parseInt(O[0], 10); X <= parseInt(O[1], 10); ++X)
                                V = parseInt(O[2], 10),
                                F[X - 1] = V === 0 ? {
                                    hidden: !0
                                } : {
                                    wch: V
                                },
                                H7(F[X - 1]);
                            break;
                        case "C":
                            v = parseInt(j[x].slice(1)) - 1,
                            F[v] || (F[v] = {});
                            break;
                        case "R":
                            p = parseInt(j[x].slice(1)) - 1,
                            E[p] || (E[p] = {}),
                            V > 0 ? (E[p].hpt = V,
                            E[p].hpx = xC(V)) : V === 0 && (E[p].hidden = !0);
                            break;
                        default:
                            if (f && f.WTF)
                                throw new Error("SYLK bad record " + b)
                        }
                    L < 1 && (B = null);
                    break;
                default:
                    if (f && f.WTF)
                        throw new Error("SYLK bad record " + b)
                }
        }
        return E.length > 0 && (N["!rows"] = E),
        F.length > 0 && (N["!cols"] = F),
        f && f.sheetRows && (w = w.slice(0, f.sheetRows)),
        [w, N]
    }
    function o(d, f) {
        var g = r(d, f)
          , p = g[0]
          , v = g[1]
          , S = Qu(p, f);
        return qi(v).forEach(function(x) {
            S[x] = v[x]
        }),
        S
    }
    function a(d, f) {
        return r0(o(d, f), f)
    }
    function c(d, f, g, p) {
        var v = "C;Y" + (g + 1) + ";X" + (p + 1) + ";K";
        switch (d.t) {
        case "n":
            v += d.v || 0,
            d.f && !d.F && (v += ";E" + V7(d.f, {
                r: g,
                c: p
            }));
            break;
        case "b":
            v += d.v ? "TRUE" : "FALSE";
            break;
        case "e":
            v += d.w || d.v;
            break;
        case "d":
            v += '"' + (d.w || d.v) + '"';
            break;
        case "s":
            v += '"' + d.v.replace(/"/g, "").replace(/;/g, ";;") + '"';
            break
        }
        return v
    }
    function l(d, f) {
        f.forEach(function(g, p) {
            var v = "F;W" + (p + 1) + " " + (p + 1) + " ";
            g.hidden ? v += "0" : (typeof g.width == "number" && !g.wpx && (g.wpx = o2(g.width)),
            typeof g.wpx == "number" && !g.wch && (g.wch = a2(g.wpx)),
            typeof g.wch == "number" && (v += Math.round(g.wch))),
            v.charAt(v.length - 1) != " " && d.push(v)
        })
    }
    function u(d, f) {
        f.forEach(function(g, p) {
            var v = "F;";
            g.hidden ? v += "M0;" : g.hpt ? v += "M" + 20 * g.hpt + ";" : g.hpx && (v += "M" + 20 * c2(g.hpx) + ";"),
            v.length > 2 && d.push(v + "R" + (p + 1))
        })
    }
    function h(d, f) {
        var g = ["ID;PWXL;N;E"], p = [], v = yn(d["!ref"]), S, x = Array.isArray(d), w = `\r
`;
        g.push("P;PGeneral"),
        g.push("F;P0;DG0G8;M255"),
        d["!cols"] && l(g, d["!cols"]),
        d["!rows"] && u(g, d["!rows"]),
        g.push("B;Y" + (v.e.r - v.s.r + 1) + ";X" + (v.e.c - v.s.c + 1) + ";D" + [v.s.c, v.s.r, v.e.c, v.e.r].join(" "));
        for (var k = v.s.r; k <= v.e.r; ++k)
            for (var B = v.s.c; B <= v.e.c; ++B) {
                var N = tn({
                    r: k,
                    c: B
                });
                S = x ? (d[k] || [])[B] : d[N],
                !(!S || S.v == null && (!S.f || S.F)) && p.push(c(S, d, k, B, f))
            }
        return g.join(w) + w + p.join(w) + w + "E" + w
    }
    return {
        to_workbook: a,
        to_sheet: o,
        from_sheet: h
    }
}()
  , xU = function() {
    function e(s, o) {
        switch (o.type) {
        case "base64":
            return t(Ba(s), o);
        case "binary":
            return t(s, o);
        case "buffer":
            return t(zt && Buffer.isBuffer(s) ? s.toString("binary") : P1(s), o);
        case "array":
            return t(g2(s), o)
        }
        throw new Error("Unrecognized type " + o.type)
    }
    function t(s, o) {
        for (var a = s.split(`
`), c = -1, l = -1, u = 0, h = []; u !== a.length; ++u) {
            if (a[u].trim() === "BOT") {
                h[++c] = [],
                l = 0;
                continue
            }
            if (!(c < 0)) {
                var d = a[u].trim().split(",")
                  , f = d[0]
                  , g = d[1];
                ++u;
                for (var p = a[u] || ""; (p.match(/["]/g) || []).length & 1 && u < a.length - 1; )
                    p += `
` + a[++u];
                switch (p = p.trim(),
                +f) {
                case -1:
                    if (p === "BOT") {
                        h[++c] = [],
                        l = 0;
                        continue
                    } else if (p !== "EOD")
                        throw new Error("Unrecognized DIF special command " + p);
                    break;
                case 0:
                    p === "TRUE" ? h[c][l] = !0 : p === "FALSE" ? h[c][l] = !1 : isNaN(Fa(g)) ? isNaN(E1(g).getDate()) ? h[c][l] = g : h[c][l] = Mr(g) : h[c][l] = Fa(g),
                    ++l;
                    break;
                case 1:
                    p = p.slice(1, p.length - 1),
                    p = p.replace(/""/g, '"'),
                    p1 && p && p.match(/^=".*"$/) && (p = p.slice(2, -1)),
                    h[c][l++] = p !== "" ? p : null;
                    break
                }
                if (p === "EOD")
                    break
            }
        }
        return o && o.sheetRows && (h = h.slice(0, o.sheetRows)),
        h
    }
    function n(s, o) {
        return Qu(e(s, o), o)
    }
    function i(s, o) {
        return r0(n(s, o), o)
    }
    var r = function() {
        var s = function(c, l, u, h, d) {
            c.push(l),
            c.push(u + "," + h),
            c.push('"' + d.replace(/"/g, '""') + '"')
        }
          , o = function(c, l, u, h) {
            c.push(l + "," + u),
            c.push(l == 1 ? '"' + h.replace(/"/g, '""') + '"' : h)
        };
        return function(c) {
            var l = [], u = yn(c["!ref"]), h, d = Array.isArray(c);
            s(l, "TABLE", 0, 1, "sheetjs"),
            s(l, "VECTORS", 0, u.e.r - u.s.r + 1, ""),
            s(l, "TUPLES", 0, u.e.c - u.s.c + 1, ""),
            s(l, "DATA", 0, 0, "");
            for (var f = u.s.r; f <= u.e.r; ++f) {
                o(l, -1, 0, "BOT");
                for (var g = u.s.c; g <= u.e.c; ++g) {
                    var p = tn({
                        r: f,
                        c: g
                    });
                    if (h = d ? (c[f] || [])[g] : c[p],
                    !h) {
                        o(l, 1, 0, "");
                        continue
                    }
                    switch (h.t) {
                    case "n":
                        var v = p1 ? h.w : h.v;
                        !v && h.v != null && (v = h.v),
                        v == null ? p1 && h.f && !h.F ? o(l, 1, 0, "=" + h.f) : o(l, 1, 0, "") : o(l, 0, v, "V");
                        break;
                    case "b":
                        o(l, 0, h.v ? 1 : 0, h.v ? "TRUE" : "FALSE");
                        break;
                    case "s":
                        o(l, 1, 0, !p1 || isNaN(h.v) ? h.v : '="' + h.v + '"');
                        break;
                    case "d":
                        h.w || (h.w = Vc(h.z || Bn[14], Qr(Mr(h.v)))),
                        p1 ? o(l, 0, h.w, "V") : o(l, 1, 0, h.w);
                        break;
                    default:
                        o(l, 1, 0, "")
                    }
                }
            }
            o(l, -1, 0, "EOD");
            var S = `\r
`
              , x = l.join(S);
            return x
        }
    }();
    return {
        to_workbook: i,
        to_sheet: n,
        from_sheet: r
    }
}()
  , _C = function() {
    function e(h) {
        return h.replace(/\\b/g, "\\").replace(/\\c/g, ":").replace(/\\n/g, `
`)
    }
    function t(h) {
        return h.replace(/\\/g, "\\b").replace(/:/g, "\\c").replace(/\n/g, "\\n")
    }
    function n(h, d) {
        for (var f = h.split(`
`), g = -1, p = -1, v = 0, S = []; v !== f.length; ++v) {
            var x = f[v].trim().split(":");
            if (x[0] === "cell") {
                var w = Ii(x[1]);
                if (S.length <= w.r)
                    for (g = S.length; g <= w.r; ++g)
                        S[g] || (S[g] = []);
                switch (g = w.r,
                p = w.c,
                x[2]) {
                case "t":
                    S[g][p] = e(x[3]);
                    break;
                case "v":
                    S[g][p] = +x[3];
                    break;
                case "vtf":
                    var k = x[x.length - 1];
                case "vtc":
                    switch (x[3]) {
                    case "nl":
                        S[g][p] = !!+x[4];
                        break;
                    default:
                        S[g][p] = +x[4];
                        break
                    }
                    x[2] == "vtf" && (S[g][p] = [S[g][p], k])
                }
            }
        }
        return d && d.sheetRows && (S = S.slice(0, d.sheetRows)),
        S
    }
    function i(h, d) {
        return Qu(n(h, d), d)
    }
    function r(h, d) {
        return r0(i(h, d), d)
    }
    var s = ["socialcalc:version:1.5", "MIME-Version: 1.0", "Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`)
      , o = ["--SocialCalcSpreadsheetControlSave", "Content-type: text/plain; charset=UTF-8"].join(`
`) + `
`
      , a = ["# SocialCalc Spreadsheet Control Save", "part:sheet"].join(`
`)
      , c = "--SocialCalcSpreadsheetControlSave--";
    function l(h) {
        if (!h || !h["!ref"])
            return "";
        for (var d = [], f = [], g, p = "", v = xs(h["!ref"]), S = Array.isArray(h), x = v.s.r; x <= v.e.r; ++x)
            for (var w = v.s.c; w <= v.e.c; ++w)
                if (p = tn({
                    r: x,
                    c: w
                }),
                g = S ? (h[x] || [])[w] : h[p],
                !(!g || g.v == null || g.t === "z")) {
                    switch (f = ["cell", p, "t"],
                    g.t) {
                    case "s":
                    case "str":
                        f.push(t(g.v));
                        break;
                    case "n":
                        g.f ? (f[2] = "vtf",
                        f[3] = "n",
                        f[4] = g.v,
                        f[5] = t(g.f)) : (f[2] = "v",
                        f[3] = g.v);
                        break;
                    case "b":
                        f[2] = "vt" + (g.f ? "f" : "c"),
                        f[3] = "nl",
                        f[4] = g.v ? "1" : "0",
                        f[5] = t(g.f || (g.v ? "TRUE" : "FALSE"));
                        break;
                    case "d":
                        var k = Qr(Mr(g.v));
                        f[2] = "vtc",
                        f[3] = "nd",
                        f[4] = "" + k,
                        f[5] = g.w || Vc(g.z || Bn[14], k);
                        break;
                    case "e":
                        continue
                    }
                    d.push(f.join(":"))
                }
        return d.push("sheet:c:" + (v.e.c - v.s.c + 1) + ":r:" + (v.e.r - v.s.r + 1) + ":tvf:1"),
        d.push("valueformat:1:text-wiki"),
        d.join(`
`)
    }
    function u(h) {
        return [s, o, a, o, l(h), c].join(`
`)
    }
    return {
        to_workbook: r,
        to_sheet: i,
        from_sheet: u
    }
}()
  , wU = function() {
    function e(u, h, d, f, g) {
        g.raw ? h[d][f] = u : u === "" || (u === "TRUE" ? h[d][f] = !0 : u === "FALSE" ? h[d][f] = !1 : isNaN(Fa(u)) ? isNaN(E1(u).getDate()) ? h[d][f] = u : h[d][f] = Mr(u) : h[d][f] = Fa(u))
    }
    function t(u, h) {
        var d = h || {}
          , f = [];
        if (!u || u.length === 0)
            return f;
        for (var g = u.split(/[\r\n]/), p = g.length - 1; p >= 0 && g[p].length === 0; )
            --p;
        for (var v = 10, S = 0, x = 0; x <= p; ++x)
            S = g[x].indexOf(" "),
            S == -1 ? S = g[x].length : S++,
            v = Math.max(v, S);
        for (x = 0; x <= p; ++x) {
            f[x] = [];
            var w = 0;
            for (e(g[x].slice(0, v).trim(), f, x, w, d),
            w = 1; w <= (g[x].length - v) / 10 + 1; ++w)
                e(g[x].slice(v + (w - 1) * 10, v + w * 10).trim(), f, x, w, d)
        }
        return d.sheetRows && (f = f.slice(0, d.sheetRows)),
        f
    }
    var n = {
        44: ",",
        9: "	",
        59: ";",
        124: "|"
    }
      , i = {
        44: 3,
        9: 2,
        59: 1,
        124: 0
    };
    function r(u) {
        for (var h = {}, d = !1, f = 0, g = 0; f < u.length; ++f)
            (g = u.charCodeAt(f)) == 34 ? d = !d : !d && g in n && (h[g] = (h[g] || 0) + 1);
        g = [];
        for (f in h)
            Object.prototype.hasOwnProperty.call(h, f) && g.push([h[f], f]);
        if (!g.length) {
            h = i;
            for (f in h)
                Object.prototype.hasOwnProperty.call(h, f) && g.push([h[f], f])
        }
        return g.sort(function(p, v) {
            return p[0] - v[0] || i[p[1]] - i[v[1]]
        }),
        n[g.pop()[1]] || 44
    }
    function s(u, h) {
        var d = h || {}
          , f = "";
        Qo != null && d.dense == null && (d.dense = Qo);
        var g = d.dense ? [] : {}
          , p = {
            s: {
                c: 0,
                r: 0
            },
            e: {
                c: 0,
                r: 0
            }
        };
        u.slice(0, 4) == "sep=" ? u.charCodeAt(5) == 13 && u.charCodeAt(6) == 10 ? (f = u.charAt(4),
        u = u.slice(7)) : u.charCodeAt(5) == 13 || u.charCodeAt(5) == 10 ? (f = u.charAt(4),
        u = u.slice(6)) : f = r(u.slice(0, 1024)) : d && d.FS ? f = d.FS : f = r(u.slice(0, 1024));
        var v = 0
          , S = 0
          , x = 0
          , w = 0
          , k = 0
          , B = f.charCodeAt(0)
          , N = !1
          , E = 0
          , F = u.charCodeAt(0);
        u = u.replace(/\r\n/mg, `
`);
        var O = d.dateNF != null ? BL(d.dateNF) : null;
        function V() {
            var X = u.slice(w, k)
              , b = {};
            if (X.charAt(0) == '"' && X.charAt(X.length - 1) == '"' && (X = X.slice(1, -1).replace(/""/g, '"')),
            X.length === 0)
                b.t = "z";
            else if (d.raw)
                b.t = "s",
                b.v = X;
            else if (X.trim().length === 0)
                b.t = "s",
                b.v = X;
            else if (X.charCodeAt(0) == 61)
                X.charCodeAt(1) == 34 && X.charCodeAt(X.length - 1) == 34 ? (b.t = "s",
                b.v = X.slice(2, -1).replace(/""/g, '"')) : bH(X) ? (b.t = "n",
                b.f = X.slice(1)) : (b.t = "s",
                b.v = X);
            else if (X == "TRUE")
                b.t = "b",
                b.v = !0;
            else if (X == "FALSE")
                b.t = "b",
                b.v = !1;
            else if (!isNaN(x = Fa(X)))
                b.t = "n",
                d.cellText !== !1 && (b.w = X),
                b.v = x;
            else if (!isNaN(E1(X).getDate()) || O && X.match(O)) {
                b.z = d.dateNF || Bn[14];
                var j = 0;
                O && X.match(O) && (X = UL(X, d.dateNF, X.match(O) || []),
                j = 1),
                d.cellDates ? (b.t = "d",
                b.v = Mr(X, j)) : (b.t = "n",
                b.v = Qr(Mr(X, j))),
                d.cellText !== !1 && (b.w = Vc(b.z, b.v instanceof Date ? Qr(b.v) : b.v)),
                d.cellNF || delete b.z
            } else
                b.t = "s",
                b.v = X;
            if (b.t == "z" || (d.dense ? (g[v] || (g[v] = []),
            g[v][S] = b) : g[tn({
                c: S,
                r: v
            })] = b),
            w = k + 1,
            F = u.charCodeAt(w),
            p.e.c < S && (p.e.c = S),
            p.e.r < v && (p.e.r = v),
            E == B)
                ++S;
            else if (S = 0,
            ++v,
            d.sheetRows && d.sheetRows <= v)
                return !0
        }
        e: for (; k < u.length; ++k)
            switch (E = u.charCodeAt(k)) {
            case 34:
                F === 34 && (N = !N);
                break;
            case B:
            case 10:
            case 13:
                if (!N && V())
                    break e;
                break;
            default:
                break
            }
        return k - w > 0 && V(),
        g["!ref"] = ii(p),
        g
    }
    function o(u, h) {
        return !(h && h.PRN) || h.FS || u.slice(0, 4) == "sep=" || u.indexOf("	") >= 0 || u.indexOf(",") >= 0 || u.indexOf(";") >= 0 ? s(u, h) : Qu(t(u, h), h)
    }
    function a(u, h) {
        var d = ""
          , f = h.type == "string" ? [0, 0, 0, 0] : NW(u, h);
        switch (h.type) {
        case "base64":
            d = Ba(u);
            break;
        case "binary":
            d = u;
            break;
        case "buffer":
            h.codepage == 65001 ? d = u.toString("utf8") : h.codepage && typeof ln < "u" ? d = ln.utils.decode(h.codepage, u) : d = zt && Buffer.isBuffer(u) ? u.toString("binary") : P1(u);
            break;
        case "array":
            d = g2(u);
            break;
        case "string":
            d = u;
            break;
        default:
            throw new Error("Unrecognized type " + h.type)
        }
        return f[0] == 239 && f[1] == 187 && f[2] == 191 ? d = v1(d.slice(3)) : h.type != "string" && h.type != "buffer" && h.codepage == 65001 ? d = v1(d) : h.type == "binary" && typeof ln < "u" && h.codepage && (d = ln.utils.decode(h.codepage, ln.utils.encode(28591, d))),
        d.slice(0, 19) == "socialcalc:version:" ? _C.to_sheet(h.type == "string" ? d : v1(d), h) : o(d, h)
    }
    function c(u, h) {
        return r0(a(u, h), h)
    }
    function l(u) {
        for (var h = [], d = yn(u["!ref"]), f, g = Array.isArray(u), p = d.s.r; p <= d.e.r; ++p) {
            for (var v = [], S = d.s.c; S <= d.e.c; ++S) {
                var x = tn({
                    r: p,
                    c: S
                });
                if (f = g ? (u[p] || [])[S] : u[x],
                !f || f.v == null) {
                    v.push("          ");
                    continue
                }
                for (var w = (f.w || (Ua(f),
                f.w) || "").slice(0, 10); w.length < 10; )
                    w += " ";
                v.push(w + (S === 0 ? " " : ""))
            }
            h.push(v.join(""))
        }
        return h.join(`
`)
    }
    return {
        to_workbook: c,
        to_sheet: a,
        from_sheet: l
    }
}();
var mw = function() {
    function e(A, q, L) {
        if (A) {
            Ss(A, A.l || 0);
            for (var U = L.Enum || fe; A.l < A.length; ) {
                var te = A.read_shift(2)
                  , Ce = U[te] || U[65535]
                  , Ve = A.read_shift(2)
                  , De = A.l + Ve
                  , ge = Ce.f && Ce.f(A, Ve, L);
                if (A.l = De,
                q(ge, Ce, te))
                    return
            }
        }
    }
    function t(A, q) {
        switch (q.type) {
        case "base64":
            return n(lo(Ba(A)), q);
        case "binary":
            return n(lo(A), q);
        case "buffer":
        case "array":
            return n(A, q)
        }
        throw "Unsupported type " + q.type
    }
    function n(A, q) {
        if (!A)
            return A;
        var L = q || {};
        Qo != null && L.dense == null && (L.dense = Qo);
        var U = L.dense ? [] : {}
          , te = "Sheet1"
          , Ce = ""
          , Ve = 0
          , De = {}
          , ge = []
          , kt = []
          , xt = {
            s: {
                r: 0,
                c: 0
            },
            e: {
                r: 0,
                c: 0
            }
        }
          , hn = L.sheetRows || 0;
        if (A[2] == 0 && (A[3] == 8 || A[3] == 9) && A.length >= 16 && A[14] == 5 && A[15] === 108)
            throw new Error("Unsupported Works 3 for Mac file");
        if (A[2] == 2)
            L.Enum = fe,
            e(A, function(Ue, Zi, ns) {
                switch (ns) {
                case 0:
                    L.vers = Ue,
                    Ue >= 4096 && (L.qpro = !0);
                    break;
                case 6:
                    xt = Ue;
                    break;
                case 204:
                    Ue && (Ce = Ue);
                    break;
                case 222:
                    Ce = Ue;
                    break;
                case 15:
                case 51:
                    L.qpro || (Ue[1].v = Ue[1].v.slice(1));
                case 13:
                case 14:
                case 16:
                    ns == 14 && (Ue[2] & 112) == 112 && (Ue[2] & 15) > 1 && (Ue[2] & 15) < 15 && (Ue[1].z = L.dateNF || Bn[14],
                    L.cellDates && (Ue[1].t = "d",
                    Ue[1].v = Hw(Ue[1].v))),
                    L.qpro && Ue[3] > Ve && (U["!ref"] = ii(xt),
                    De[te] = U,
                    ge.push(te),
                    U = L.dense ? [] : {},
                    xt = {
                        s: {
                            r: 0,
                            c: 0
                        },
                        e: {
                            r: 0,
                            c: 0
                        }
                    },
                    Ve = Ue[3],
                    te = Ce || "Sheet" + (Ve + 1),
                    Ce = "");
                    var Bi = L.dense ? (U[Ue[0].r] || [])[Ue[0].c] : U[tn(Ue[0])];
                    if (Bi) {
                        Bi.t = Ue[1].t,
                        Bi.v = Ue[1].v,
                        Ue[1].z != null && (Bi.z = Ue[1].z),
                        Ue[1].f != null && (Bi.f = Ue[1].f);
                        break
                    }
                    L.dense ? (U[Ue[0].r] || (U[Ue[0].r] = []),
                    U[Ue[0].r][Ue[0].c] = Ue[1]) : U[tn(Ue[0])] = Ue[1];
                    break;
                default:
                }
            }, L);
        else if (A[2] == 26 || A[2] == 14)
            L.Enum = Ge,
            A[2] == 14 && (L.qpro = !0,
            A.l = 0),
            e(A, function(Ue, Zi, ns) {
                switch (ns) {
                case 204:
                    te = Ue;
                    break;
                case 22:
                    Ue[1].v = Ue[1].v.slice(1);
                case 23:
                case 24:
                case 25:
                case 37:
                case 39:
                case 40:
                    if (Ue[3] > Ve && (U["!ref"] = ii(xt),
                    De[te] = U,
                    ge.push(te),
                    U = L.dense ? [] : {},
                    xt = {
                        s: {
                            r: 0,
                            c: 0
                        },
                        e: {
                            r: 0,
                            c: 0
                        }
                    },
                    Ve = Ue[3],
                    te = "Sheet" + (Ve + 1)),
                    hn > 0 && Ue[0].r >= hn)
                        break;
                    L.dense ? (U[Ue[0].r] || (U[Ue[0].r] = []),
                    U[Ue[0].r][Ue[0].c] = Ue[1]) : U[tn(Ue[0])] = Ue[1],
                    xt.e.c < Ue[0].c && (xt.e.c = Ue[0].c),
                    xt.e.r < Ue[0].r && (xt.e.r = Ue[0].r);
                    break;
                case 27:
                    Ue[14e3] && (kt[Ue[14e3][0]] = Ue[14e3][1]);
                    break;
                case 1537:
                    kt[Ue[0]] = Ue[1],
                    Ue[0] == Ve && (te = Ue[1]);
                    break;
                default:
                    break
                }
            }, L);
        else
            throw new Error("Unrecognized LOTUS BOF " + A[2]);
        if (U["!ref"] = ii(xt),
        De[Ce || te] = U,
        ge.push(Ce || te),
        !kt.length)
            return {
                SheetNames: ge,
                Sheets: De
            };
        for (var Ot = {}, bi = [], Xt = 0; Xt < kt.length; ++Xt)
            De[ge[Xt]] ? (bi.push(kt[Xt] || ge[Xt]),
            Ot[kt[Xt]] = De[kt[Xt]] || De[ge[Xt]]) : (bi.push(kt[Xt]),
            Ot[kt[Xt]] = {
                "!ref": "A1"
            });
        return {
            SheetNames: bi,
            Sheets: Ot
        }
    }
    function i(A, q) {
        var L = q || {};
        if (+L.codepage >= 0 && w1(+L.codepage),
        L.type == "string")
            throw new Error("Cannot write WK1 to JS string");
        var U = Yr()
          , te = yn(A["!ref"])
          , Ce = Array.isArray(A)
          , Ve = [];
        Pe(U, 0, s(1030)),
        Pe(U, 6, c(te));
        for (var De = Math.min(te.e.r, 8191), ge = te.s.r; ge <= De; ++ge)
            for (var kt = ji(ge), xt = te.s.c; xt <= te.e.c; ++xt) {
                ge === te.s.r && (Ve[xt] = cr(xt));
                var hn = Ve[xt] + kt
                  , Ot = Ce ? (A[ge] || [])[xt] : A[hn];
                if (!(!Ot || Ot.t == "z"))
                    if (Ot.t == "n")
                        (Ot.v | 0) == Ot.v && Ot.v >= -32768 && Ot.v <= 32767 ? Pe(U, 13, f(ge, xt, Ot.v)) : Pe(U, 14, p(ge, xt, Ot.v));
                    else {
                        var bi = Ua(Ot);
                        Pe(U, 15, h(ge, xt, bi.slice(0, 239)))
                    }
            }
        return Pe(U, 1),
        U.end()
    }
    function r(A, q) {
        var L = q || {};
        if (+L.codepage >= 0 && w1(+L.codepage),
        L.type == "string")
            throw new Error("Cannot write WK3 to JS string");
        var U = Yr();
        Pe(U, 0, o(A));
        for (var te = 0, Ce = 0; te < A.SheetNames.length; ++te)
            (A.Sheets[A.SheetNames[te]] || {})["!ref"] && Pe(U, 27, it(A.SheetNames[te], Ce++));
        var Ve = 0;
        for (te = 0; te < A.SheetNames.length; ++te) {
            var De = A.Sheets[A.SheetNames[te]];
            if (!(!De || !De["!ref"])) {
                for (var ge = yn(De["!ref"]), kt = Array.isArray(De), xt = [], hn = Math.min(ge.e.r, 8191), Ot = ge.s.r; Ot <= hn; ++Ot)
                    for (var bi = ji(Ot), Xt = ge.s.c; Xt <= ge.e.c; ++Xt) {
                        Ot === ge.s.r && (xt[Xt] = cr(Xt));
                        var Ue = xt[Xt] + bi
                          , Zi = kt ? (De[Ot] || [])[Xt] : De[Ue];
                        if (!(!Zi || Zi.t == "z"))
                            if (Zi.t == "n")
                                Pe(U, 23, V(Ot, Xt, Ve, Zi.v));
                            else {
                                var ns = Ua(Zi);
                                Pe(U, 22, E(Ot, Xt, Ve, ns.slice(0, 239)))
                            }
                    }
                ++Ve
            }
        }
        return Pe(U, 1),
        U.end()
    }
    function s(A) {
        var q = ce(2);
        return q.write_shift(2, A),
        q
    }
    function o(A) {
        var q = ce(26);
        q.write_shift(2, 4096),
        q.write_shift(2, 4),
        q.write_shift(4, 0);
        for (var L = 0, U = 0, te = 0, Ce = 0; Ce < A.SheetNames.length; ++Ce) {
            var Ve = A.SheetNames[Ce]
              , De = A.Sheets[Ve];
            if (!(!De || !De["!ref"])) {
                ++te;
                var ge = xs(De["!ref"]);
                L < ge.e.r && (L = ge.e.r),
                U < ge.e.c && (U = ge.e.c)
            }
        }
        return L > 8191 && (L = 8191),
        q.write_shift(2, L),
        q.write_shift(1, te),
        q.write_shift(1, U),
        q.write_shift(2, 0),
        q.write_shift(2, 0),
        q.write_shift(1, 1),
        q.write_shift(1, 2),
        q.write_shift(4, 0),
        q.write_shift(4, 0),
        q
    }
    function a(A, q, L) {
        var U = {
            s: {
                c: 0,
                r: 0
            },
            e: {
                c: 0,
                r: 0
            }
        };
        return q == 8 && L.qpro ? (U.s.c = A.read_shift(1),
        A.l++,
        U.s.r = A.read_shift(2),
        U.e.c = A.read_shift(1),
        A.l++,
        U.e.r = A.read_shift(2),
        U) : (U.s.c = A.read_shift(2),
        U.s.r = A.read_shift(2),
        q == 12 && L.qpro && (A.l += 2),
        U.e.c = A.read_shift(2),
        U.e.r = A.read_shift(2),
        q == 12 && L.qpro && (A.l += 2),
        U.s.c == 65535 && (U.s.c = U.e.c = U.s.r = U.e.r = 0),
        U)
    }
    function c(A) {
        var q = ce(8);
        return q.write_shift(2, A.s.c),
        q.write_shift(2, A.s.r),
        q.write_shift(2, A.e.c),
        q.write_shift(2, A.e.r),
        q
    }
    function l(A, q, L) {
        var U = [{
            c: 0,
            r: 0
        }, {
            t: "n",
            v: 0
        }, 0, 0];
        return L.qpro && L.vers != 20768 ? (U[0].c = A.read_shift(1),
        U[3] = A.read_shift(1),
        U[0].r = A.read_shift(2),
        A.l += 2) : (U[2] = A.read_shift(1),
        U[0].c = A.read_shift(2),
        U[0].r = A.read_shift(2)),
        U
    }
    function u(A, q, L) {
        var U = A.l + q
          , te = l(A, q, L);
        if (te[1].t = "s",
        L.vers == 20768) {
            A.l++;
            var Ce = A.read_shift(1);
            return te[1].v = A.read_shift(Ce, "utf8"),
            te
        }
        return L.qpro && A.l++,
        te[1].v = A.read_shift(U - A.l, "cstr"),
        te
    }
    function h(A, q, L) {
        var U = ce(7 + L.length);
        U.write_shift(1, 255),
        U.write_shift(2, q),
        U.write_shift(2, A),
        U.write_shift(1, 39);
        for (var te = 0; te < U.length; ++te) {
            var Ce = L.charCodeAt(te);
            U.write_shift(1, Ce >= 128 ? 95 : Ce)
        }
        return U.write_shift(1, 0),
        U
    }
    function d(A, q, L) {
        var U = l(A, q, L);
        return U[1].v = A.read_shift(2, "i"),
        U
    }
    function f(A, q, L) {
        var U = ce(7);
        return U.write_shift(1, 255),
        U.write_shift(2, q),
        U.write_shift(2, A),
        U.write_shift(2, L, "i"),
        U
    }
    function g(A, q, L) {
        var U = l(A, q, L);
        return U[1].v = A.read_shift(8, "f"),
        U
    }
    function p(A, q, L) {
        var U = ce(13);
        return U.write_shift(1, 255),
        U.write_shift(2, q),
        U.write_shift(2, A),
        U.write_shift(8, L, "f"),
        U
    }
    function v(A, q, L) {
        var U = A.l + q
          , te = l(A, q, L);
        if (te[1].v = A.read_shift(8, "f"),
        L.qpro)
            A.l = U;
        else {
            var Ce = A.read_shift(2);
            k(A.slice(A.l, A.l + Ce), te),
            A.l += Ce
        }
        return te
    }
    function S(A, q, L) {
        var U = q & 32768;
        return q &= -32769,
        q = (U ? A : 0) + (q >= 8192 ? q - 16384 : q),
        (U ? "" : "$") + (L ? cr(q) : ji(q))
    }
    var x = {
        51: ["FALSE", 0],
        52: ["TRUE", 0],
        70: ["LEN", 1],
        80: ["SUM", 69],
        81: ["AVERAGEA", 69],
        82: ["COUNTA", 69],
        83: ["MINA", 69],
        84: ["MAXA", 69],
        111: ["T", 1]
    }
      , w = ["", "", "", "", "", "", "", "", "", "+", "-", "*", "/", "^", "=", "<>", "<=", ">=", "<", ">", "", "", "", "", "&", "", "", "", "", "", "", ""];
    function k(A, q) {
        Ss(A, 0);
        for (var L = [], U = 0, te = "", Ce = "", Ve = "", De = ""; A.l < A.length; ) {
            var ge = A[A.l++];
            switch (ge) {
            case 0:
                L.push(A.read_shift(8, "f"));
                break;
            case 1:
                Ce = S(q[0].c, A.read_shift(2), !0),
                te = S(q[0].r, A.read_shift(2), !1),
                L.push(Ce + te);
                break;
            case 2:
                {
                    var kt = S(q[0].c, A.read_shift(2), !0)
                      , xt = S(q[0].r, A.read_shift(2), !1);
                    Ce = S(q[0].c, A.read_shift(2), !0),
                    te = S(q[0].r, A.read_shift(2), !1),
                    L.push(kt + xt + ":" + Ce + te)
                }
                break;
            case 3:
                if (A.l < A.length) {
                    console.error("WK1 premature formula end");
                    return
                }
                break;
            case 4:
                L.push("(" + L.pop() + ")");
                break;
            case 5:
                L.push(A.read_shift(2));
                break;
            case 6:
                {
                    for (var hn = ""; ge = A[A.l++]; )
                        hn += String.fromCharCode(ge);
                    L.push('"' + hn.replace(/"/g, '""') + '"')
                }
                break;
            case 8:
                L.push("-" + L.pop());
                break;
            case 23:
                L.push("+" + L.pop());
                break;
            case 22:
                L.push("NOT(" + L.pop() + ")");
                break;
            case 20:
            case 21:
                De = L.pop(),
                Ve = L.pop(),
                L.push(["AND", "OR"][ge - 20] + "(" + Ve + "," + De + ")");
                break;
            default:
                if (ge < 32 && w[ge])
                    De = L.pop(),
                    Ve = L.pop(),
                    L.push(Ve + w[ge] + De);
                else if (x[ge]) {
                    if (U = x[ge][1],
                    U == 69 && (U = A[A.l++]),
                    U > L.length) {
                        console.error("WK1 bad formula parse 0x" + ge.toString(16) + ":|" + L.join("|") + "|");
                        return
                    }
                    var Ot = L.slice(-U);
                    L.length -= U,
                    L.push(x[ge][0] + "(" + Ot.join(",") + ")")
                } else
                    return ge <= 7 ? console.error("WK1 invalid opcode " + ge.toString(16)) : ge <= 24 ? console.error("WK1 unsupported op " + ge.toString(16)) : ge <= 30 ? console.error("WK1 invalid opcode " + ge.toString(16)) : ge <= 115 ? console.error("WK1 unsupported function opcode " + ge.toString(16)) : console.error("WK1 unrecognized opcode " + ge.toString(16))
            }
        }
        L.length == 1 ? q[1].f = "" + L[0] : console.error("WK1 bad formula parse |" + L.join("|") + "|")
    }
    function B(A) {
        var q = [{
            c: 0,
            r: 0
        }, {
            t: "n",
            v: 0
        }, 0];
        return q[0].r = A.read_shift(2),
        q[3] = A[A.l++],
        q[0].c = A[A.l++],
        q
    }
    function N(A, q) {
        var L = B(A, q);
        return L[1].t = "s",
        L[1].v = A.read_shift(q - 4, "cstr"),
        L
    }
    function E(A, q, L, U) {
        var te = ce(6 + U.length);
        te.write_shift(2, A),
        te.write_shift(1, L),
        te.write_shift(1, q),
        te.write_shift(1, 39);
        for (var Ce = 0; Ce < U.length; ++Ce) {
            var Ve = U.charCodeAt(Ce);
            te.write_shift(1, Ve >= 128 ? 95 : Ve)
        }
        return te.write_shift(1, 0),
        te
    }
    function F(A, q) {
        var L = B(A, q);
        L[1].v = A.read_shift(2);
        var U = L[1].v >> 1;
        if (L[1].v & 1)
            switch (U & 7) {
            case 0:
                U = (U >> 3) * 5e3;
                break;
            case 1:
                U = (U >> 3) * 500;
                break;
            case 2:
                U = (U >> 3) / 20;
                break;
            case 3:
                U = (U >> 3) / 200;
                break;
            case 4:
                U = (U >> 3) / 2e3;
                break;
            case 5:
                U = (U >> 3) / 2e4;
                break;
            case 6:
                U = (U >> 3) / 16;
                break;
            case 7:
                U = (U >> 3) / 64;
                break
            }
        return L[1].v = U,
        L
    }
    function O(A, q) {
        var L = B(A, q)
          , U = A.read_shift(4)
          , te = A.read_shift(4)
          , Ce = A.read_shift(2);
        if (Ce == 65535)
            return U === 0 && te === 3221225472 ? (L[1].t = "e",
            L[1].v = 15) : U === 0 && te === 3489660928 ? (L[1].t = "e",
            L[1].v = 42) : L[1].v = 0,
            L;
        var Ve = Ce & 32768;
        return Ce = (Ce & 32767) - 16446,
        L[1].v = (1 - Ve * 2) * (te * Math.pow(2, Ce + 32) + U * Math.pow(2, Ce)),
        L
    }
    function V(A, q, L, U) {
        var te = ce(14);
        if (te.write_shift(2, A),
        te.write_shift(1, L),
        te.write_shift(1, q),
        U == 0)
            return te.write_shift(4, 0),
            te.write_shift(4, 0),
            te.write_shift(2, 65535),
            te;
        var Ce = 0
          , Ve = 0
          , De = 0
          , ge = 0;
        return U < 0 && (Ce = 1,
        U = -U),
        Ve = Math.log2(U) | 0,
        U /= Math.pow(2, Ve - 31),
        ge = U >>> 0,
        ge & 2147483648 || (U /= 2,
        ++Ve,
        ge = U >>> 0),
        U -= ge,
        ge |= 2147483648,
        ge >>>= 0,
        U *= Math.pow(2, 32),
        De = U >>> 0,
        te.write_shift(4, De),
        te.write_shift(4, ge),
        Ve += 16383 + (Ce ? 32768 : 0),
        te.write_shift(2, Ve),
        te
    }
    function X(A, q) {
        var L = O(A, 14);
        return A.l += q - 14,
        L
    }
    function b(A, q) {
        var L = B(A, q)
          , U = A.read_shift(4);
        return L[1].v = U >> 6,
        L
    }
    function j(A, q) {
        var L = B(A, q)
          , U = A.read_shift(8, "f");
        return L[1].v = U,
        L
    }
    function de(A, q) {
        var L = j(A, 14);
        return A.l += q - 10,
        L
    }
    function he(A, q) {
        return A[A.l + q - 1] == 0 ? A.read_shift(q, "cstr") : ""
    }
    function Re(A, q) {
        var L = A[A.l++];
        L > q - 1 && (L = q - 1);
        for (var U = ""; U.length < L; )
            U += String.fromCharCode(A[A.l++]);
        return U
    }
    function Xe(A, q, L) {
        if (!(!L.qpro || q < 21)) {
            var U = A.read_shift(1);
            A.l += 17,
            A.l += 1,
            A.l += 2;
            var te = A.read_shift(q - 21, "cstr");
            return [U, te]
        }
    }
    function pt(A, q) {
        for (var L = {}, U = A.l + q; A.l < U; ) {
            var te = A.read_shift(2);
            if (te == 14e3) {
                for (L[te] = [0, ""],
                L[te][0] = A.read_shift(2); A[A.l]; )
                    L[te][1] += String.fromCharCode(A[A.l]),
                    A.l++;
                A.l++
            }
        }
        return L
    }
    function it(A, q) {
        var L = ce(5 + A.length);
        L.write_shift(2, 14e3),
        L.write_shift(2, q);
        for (var U = 0; U < A.length; ++U) {
            var te = A.charCodeAt(U);
            L[L.l++] = te > 127 ? 95 : te
        }
        return L[L.l++] = 0,
        L
    }
    var fe = {
        0: {
            n: "BOF",
            f: fC
        },
        1: {
            n: "EOF"
        },
        2: {
            n: "CALCMODE"
        },
        3: {
            n: "CALCORDER"
        },
        4: {
            n: "SPLIT"
        },
        5: {
            n: "SYNC"
        },
        6: {
            n: "RANGE",
            f: a
        },
        7: {
            n: "WINDOW1"
        },
        8: {
            n: "COLW1"
        },
        9: {
            n: "WINTWO"
        },
        10: {
            n: "COLW2"
        },
        11: {
            n: "NAME"
        },
        12: {
            n: "BLANK"
        },
        13: {
            n: "INTEGER",
            f: d
        },
        14: {
            n: "NUMBER",
            f: g
        },
        15: {
            n: "LABEL",
            f: u
        },
        16: {
            n: "FORMULA",
            f: v
        },
        24: {
            n: "TABLE"
        },
        25: {
            n: "ORANGE"
        },
        26: {
            n: "PRANGE"
        },
        27: {
            n: "SRANGE"
        },
        28: {
            n: "FRANGE"
        },
        29: {
            n: "KRANGE1"
        },
        32: {
            n: "HRANGE"
        },
        35: {
            n: "KRANGE2"
        },
        36: {
            n: "PROTEC"
        },
        37: {
            n: "FOOTER"
        },
        38: {
            n: "HEADER"
        },
        39: {
            n: "SETUP"
        },
        40: {
            n: "MARGINS"
        },
        41: {
            n: "LABELFMT"
        },
        42: {
            n: "TITLES"
        },
        43: {
            n: "SHEETJS"
        },
        45: {
            n: "GRAPH"
        },
        46: {
            n: "NGRAPH"
        },
        47: {
            n: "CALCCOUNT"
        },
        48: {
            n: "UNFORMATTED"
        },
        49: {
            n: "CURSORW12"
        },
        50: {
            n: "WINDOW"
        },
        51: {
            n: "STRING",
            f: u
        },
        55: {
            n: "PASSWORD"
        },
        56: {
            n: "LOCKED"
        },
        60: {
            n: "QUERY"
        },
        61: {
            n: "QUERYNAME"
        },
        62: {
            n: "PRINT"
        },
        63: {
            n: "PRINTNAME"
        },
        64: {
            n: "GRAPH2"
        },
        65: {
            n: "GRAPHNAME"
        },
        66: {
            n: "ZOOM"
        },
        67: {
            n: "SYMSPLIT"
        },
        68: {
            n: "NSROWS"
        },
        69: {
            n: "NSCOLS"
        },
        70: {
            n: "RULER"
        },
        71: {
            n: "NNAME"
        },
        72: {
            n: "ACOMM"
        },
        73: {
            n: "AMACRO"
        },
        74: {
            n: "PARSE"
        },
        102: {
            n: "PRANGES??"
        },
        103: {
            n: "RRANGES??"
        },
        104: {
            n: "FNAME??"
        },
        105: {
            n: "MRANGES??"
        },
        204: {
            n: "SHEETNAMECS",
            f: he
        },
        222: {
            n: "SHEETNAMELP",
            f: Re
        },
        65535: {
            n: ""
        }
    }
      , Ge = {
        0: {
            n: "BOF"
        },
        1: {
            n: "EOF"
        },
        2: {
            n: "PASSWORD"
        },
        3: {
            n: "CALCSET"
        },
        4: {
            n: "WINDOWSET"
        },
        5: {
            n: "SHEETCELLPTR"
        },
        6: {
            n: "SHEETLAYOUT"
        },
        7: {
            n: "COLUMNWIDTH"
        },
        8: {
            n: "HIDDENCOLUMN"
        },
        9: {
            n: "USERRANGE"
        },
        10: {
            n: "SYSTEMRANGE"
        },
        11: {
            n: "ZEROFORCE"
        },
        12: {
            n: "SORTKEYDIR"
        },
        13: {
            n: "FILESEAL"
        },
        14: {
            n: "DATAFILLNUMS"
        },
        15: {
            n: "PRINTMAIN"
        },
        16: {
            n: "PRINTSTRING"
        },
        17: {
            n: "GRAPHMAIN"
        },
        18: {
            n: "GRAPHSTRING"
        },
        19: {
            n: "??"
        },
        20: {
            n: "ERRCELL"
        },
        21: {
            n: "NACELL"
        },
        22: {
            n: "LABEL16",
            f: N
        },
        23: {
            n: "NUMBER17",
            f: O
        },
        24: {
            n: "NUMBER18",
            f: F
        },
        25: {
            n: "FORMULA19",
            f: X
        },
        26: {
            n: "FORMULA1A"
        },
        27: {
            n: "XFORMAT",
            f: pt
        },
        28: {
            n: "DTLABELMISC"
        },
        29: {
            n: "DTLABELCELL"
        },
        30: {
            n: "GRAPHWINDOW"
        },
        31: {
            n: "CPA"
        },
        32: {
            n: "LPLAUTO"
        },
        33: {
            n: "QUERY"
        },
        34: {
            n: "HIDDENSHEET"
        },
        35: {
            n: "??"
        },
        37: {
            n: "NUMBER25",
            f: b
        },
        38: {
            n: "??"
        },
        39: {
            n: "NUMBER27",
            f: j
        },
        40: {
            n: "FORMULA28",
            f: de
        },
        142: {
            n: "??"
        },
        147: {
            n: "??"
        },
        150: {
            n: "??"
        },
        151: {
            n: "??"
        },
        152: {
            n: "??"
        },
        153: {
            n: "??"
        },
        154: {
            n: "??"
        },
        155: {
            n: "??"
        },
        156: {
            n: "??"
        },
        163: {
            n: "??"
        },
        174: {
            n: "??"
        },
        175: {
            n: "??"
        },
        176: {
            n: "??"
        },
        177: {
            n: "??"
        },
        184: {
            n: "??"
        },
        185: {
            n: "??"
        },
        186: {
            n: "??"
        },
        187: {
            n: "??"
        },
        188: {
            n: "??"
        },
        195: {
            n: "??"
        },
        201: {
            n: "??"
        },
        204: {
            n: "SHEETNAMECS",
            f: he
        },
        205: {
            n: "??"
        },
        206: {
            n: "??"
        },
        207: {
            n: "??"
        },
        208: {
            n: "??"
        },
        256: {
            n: "??"
        },
        259: {
            n: "??"
        },
        260: {
            n: "??"
        },
        261: {
            n: "??"
        },
        262: {
            n: "??"
        },
        263: {
            n: "??"
        },
        265: {
            n: "??"
        },
        266: {
            n: "??"
        },
        267: {
            n: "??"
        },
        268: {
            n: "??"
        },
        270: {
            n: "??"
        },
        271: {
            n: "??"
        },
        384: {
            n: "??"
        },
        389: {
            n: "??"
        },
        390: {
            n: "??"
        },
        393: {
            n: "??"
        },
        396: {
            n: "??"
        },
        512: {
            n: "??"
        },
        514: {
            n: "??"
        },
        513: {
            n: "??"
        },
        516: {
            n: "??"
        },
        517: {
            n: "??"
        },
        640: {
            n: "??"
        },
        641: {
            n: "??"
        },
        642: {
            n: "??"
        },
        643: {
            n: "??"
        },
        644: {
            n: "??"
        },
        645: {
            n: "??"
        },
        646: {
            n: "??"
        },
        647: {
            n: "??"
        },
        648: {
            n: "??"
        },
        658: {
            n: "??"
        },
        659: {
            n: "??"
        },
        660: {
            n: "??"
        },
        661: {
            n: "??"
        },
        662: {
            n: "??"
        },
        665: {
            n: "??"
        },
        666: {
            n: "??"
        },
        768: {
            n: "??"
        },
        772: {
            n: "??"
        },
        1537: {
            n: "SHEETINFOQP",
            f: Xe
        },
        1600: {
            n: "??"
        },
        1602: {
            n: "??"
        },
        1793: {
            n: "??"
        },
        1794: {
            n: "??"
        },
        1795: {
            n: "??"
        },
        1796: {
            n: "??"
        },
        1920: {
            n: "??"
        },
        2048: {
            n: "??"
        },
        2049: {
            n: "??"
        },
        2052: {
            n: "??"
        },
        2688: {
            n: "??"
        },
        10998: {
            n: "??"
        },
        12849: {
            n: "??"
        },
        28233: {
            n: "??"
        },
        28484: {
            n: "??"
        },
        65535: {
            n: ""
        }
    };
    return {
        sheet_to_wk1: i,
        book_to_wk3: r,
        to_workbook: t
    }
}();
var CU = /^\s|\s$|[\t\n\r]/;
function yC(e, t) {
    if (!t.bookSST)
        return "";
    var n = [ri];
    n[n.length] = Me("sst", null, {
        xmlns: Ku[0],
        count: e.Count,
        uniqueCount: e.Unique
    });
    for (var i = 0; i != e.length; ++i)
        if (e[i] != null) {
            var r = e[i]
              , s = "<si>";
            r.r ? s += r.r : (s += "<t",
            r.t || (r.t = ""),
            r.t.match(CU) && (s += ' xml:space="preserve"'),
            s += ">" + en(r.t) + "</t>"),
            s += "</si>",
            n[n.length] = s
        }
    return n.length > 2 && (n[n.length] = "</sst>",
    n[1] = n[1].replace("/>", ">")),
    n.join("")
}
function EU(e) {
    return [e.read_shift(4), e.read_shift(4)]
}
function TU(e, t) {
    return t || (t = ce(8)),
    t.write_shift(4, e.Count),
    t.write_shift(4, e.Unique),
    t
}
var OU = vB;
function MU(e) {
    var t = Yr();
    pe(t, 159, TU(e));
    for (var n = 0; n < e.length; ++n)
        pe(t, 19, OU(e[n]));
    return pe(t, 160),
    t.end()
}
function PU(e) {
    if (typeof ln < "u")
        return ln.utils.encode(zu, e);
    for (var t = [], n = e.split(""), i = 0; i < n.length; ++i)
        t[i] = n[i].charCodeAt(0);
    return t
}
function SC(e) {
    var t = 0, n, i = PU(e), r = i.length + 1, s, o, a, c, l;
    for (n = t0(r),
    n[0] = i.length,
    s = 1; s != r; ++s)
        n[s] = i[s - 1];
    for (s = r - 1; s >= 0; --s)
        o = n[s],
        a = t & 16384 ? 1 : 0,
        c = t << 1 & 32767,
        l = a | c,
        t = l ^ o;
    return t ^ 52811
}
var kU = function() {
    function e(r, s) {
        switch (s.type) {
        case "base64":
            return t(Ba(r), s);
        case "binary":
            return t(r, s);
        case "buffer":
            return t(zt && Buffer.isBuffer(r) ? r.toString("binary") : P1(r), s);
        case "array":
            return t(g2(r), s)
        }
        throw new Error("Unrecognized type " + s.type)
    }
    function t(r, s) {
        var o = s || {}
          , a = o.dense ? [] : {}
          , c = r.match(/\\trowd.*?\\row\b/g);
        if (!c.length)
            throw new Error("RTF missing table");
        var l = {
            s: {
                c: 0,
                r: 0
            },
            e: {
                c: 0,
                r: c.length - 1
            }
        };
        return c.forEach(function(u, h) {
            Array.isArray(a) && (a[h] = []);
            for (var d = /\\\w+\b/g, f = 0, g, p = -1; g = d.exec(u); ) {
                switch (g[0]) {
                case "\\cell":
                    var v = u.slice(f, d.lastIndex - g[0].length);
                    if (v[0] == " " && (v = v.slice(1)),
                    ++p,
                    v.length) {
                        var S = {
                            v,
                            t: "s"
                        };
                        Array.isArray(a) ? a[h][p] = S : a[tn({
                            r: h,
                            c: p
                        })] = S
                    }
                    break
                }
                f = d.lastIndex
            }
            p > l.e.c && (l.e.c = p)
        }),
        a["!ref"] = ii(l),
        a
    }
    function n(r, s) {
        return r0(e(r, s), s)
    }
    function i(r) {
        for (var s = ["{\\rtf1\\ansi"], o = yn(r["!ref"]), a, c = Array.isArray(r), l = o.s.r; l <= o.e.r; ++l) {
            s.push("\\trowd\\trautofit1");
            for (var u = o.s.c; u <= o.e.c; ++u)
                s.push("\\cellx" + (u + 1));
            for (s.push("\\pard\\intbl"),
            u = o.s.c; u <= o.e.c; ++u) {
                var h = tn({
                    r: l,
                    c: u
                });
                a = c ? (r[l] || [])[u] : r[h],
                !(!a || a.v == null && (!a.f || a.F)) && (s.push(" " + (a.w || (Ua(a),
                a.w))),
                s.push("\\cell"))
            }
            s.push("\\pard\\intbl\\row")
        }
        return s.join("") + "}"
    }
    return {
        to_workbook: n,
        to_sheet: e,
        from_sheet: i
    }
}();
function vw(e) {
    for (var t = 0, n = 1; t != 3; ++t)
        n = n * 256 + (e[t] > 255 ? 255 : e[t] < 0 ? 0 : e[t]);
    return n.toString(16).toUpperCase().slice(1)
}
var AU = 6;
var La = AU;
function o2(e) {
    return Math.floor((e + Math.round(128 / La) / 256) * La)
}
function a2(e) {
    return Math.floor((e - 5) / La * 100 + .5) / 100
}
function b7(e) {
    return Math.round((e * La + 5) / La * 256) / 256
}
function H7(e) {
    e.width ? (e.wpx = o2(e.width),
    e.wch = a2(e.wpx),
    e.MDW = La) : e.wpx ? (e.wch = a2(e.wpx),
    e.width = b7(e.wch),
    e.MDW = La) : typeof e.wch == "number" && (e.width = b7(e.wch),
    e.wpx = o2(e.width),
    e.MDW = La),
    e.customWidth && delete e.customWidth
}
var IU = 96
  , bC = IU;
function c2(e) {
    return e * 96 / bC
}
function xC(e) {
    return e * bC / 96
}
function RU(e) {
    var t = ["<numFmts>"];
    return [[5, 8], [23, 26], [41, 44], [50, 392]].forEach(function(n) {
        for (var i = n[0]; i <= n[1]; ++i)
            e[i] != null && (t[t.length] = Me("numFmt", null, {
                numFmtId: i,
                formatCode: en(e[i])
            }))
    }),
    t.length === 1 ? "" : (t[t.length] = "</numFmts>",
    t[0] = Me("numFmts", null, {
        count: t.length - 2
    }).replace("/>", ">"),
    t.join(""))
}
function DU(e) {
    var t = [];
    return t[t.length] = Me("cellXfs", null),
    e.forEach(function(n) {
        t[t.length] = Me("xf", null, n)
    }),
    t[t.length] = "</cellXfs>",
    t.length === 2 ? "" : (t[0] = Me("cellXfs", null, {
        count: t.length - 2
    }).replace("/>", ">"),
    t.join(""))
}
function wC(e, t) {
    var n = [ri, Me("styleSheet", null, {
        xmlns: Ku[0],
        "xmlns:vt": Ai.vt
    })], i;
    return e.SSF && (i = RU(e.SSF)) != null && (n[n.length] = i),
    n[n.length] = '<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',
    n[n.length] = '<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',
    n[n.length] = '<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',
    n[n.length] = '<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',
    (i = DU(t.cellXfs)) && (n[n.length] = i),
    n[n.length] = '<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',
    n[n.length] = '<dxfs count="0"/>',
    n[n.length] = '<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',
    n.length > 2 && (n[n.length] = "</styleSheet>",
    n[1] = n[1].replace("/>", ">")),
    n.join("")
}
function NU(e, t) {
    var n = e.read_shift(2)
      , i = lr(e, t - 2);
    return [n, i]
}
function FU(e, t, n) {
    n || (n = ce(6 + 4 * t.length)),
    n.write_shift(2, e),
    Ri(t, n);
    var i = n.length > n.l ? n.slice(0, n.l) : n;
    return n.l == null && (n.l = n.length),
    i
}
function LU(e, t, n) {
    var i = {};
    i.sz = e.read_shift(2) / 20;
    var r = CB(e, 2, n);
    r.fItalic && (i.italic = 1),
    r.fCondense && (i.condense = 1),
    r.fExtend && (i.extend = 1),
    r.fShadow && (i.shadow = 1),
    r.fOutline && (i.outline = 1),
    r.fStrikeout && (i.strike = 1);
    var s = e.read_shift(2);
    switch (s === 700 && (i.bold = 1),
    e.read_shift(2)) {
    case 1:
        i.vertAlign = "superscript";
        break;
    case 2:
        i.vertAlign = "subscript";
        break
    }
    var o = e.read_shift(1);
    o != 0 && (i.underline = o);
    var a = e.read_shift(1);
    a > 0 && (i.family = a);
    var c = e.read_shift(1);
    switch (c > 0 && (i.charset = c),
    e.l++,
    i.color = wB(e, 8),
    e.read_shift(1)) {
    case 1:
        i.scheme = "major";
        break;
    case 2:
        i.scheme = "minor";
        break
    }
    return i.name = lr(e, t - 21),
    i
}
function BU(e, t) {
    t || (t = ce(25 + 4 * 32)),
    t.write_shift(2, e.sz * 20),
    EB(e, t),
    t.write_shift(2, e.bold ? 700 : 400);
    var n = 0;
    e.vertAlign == "superscript" ? n = 1 : e.vertAlign == "subscript" && (n = 2),
    t.write_shift(2, n),
    t.write_shift(1, e.underline || 0),
    t.write_shift(1, e.family || 0),
    t.write_shift(1, e.charset || 0),
    t.write_shift(1, 0),
    r2(e.color, t);
    var i = 0;
    return e.scheme == "major" && (i = 1),
    e.scheme == "minor" && (i = 2),
    t.write_shift(1, i),
    Ri(e.name, t),
    t.length > t.l ? t.slice(0, t.l) : t
}
var UU = ["none", "solid", "mediumGray", "darkGray", "lightGray", "darkHorizontal", "darkVertical", "darkDown", "darkUp", "darkGrid", "darkTrellis", "lightHorizontal", "lightVertical", "lightDown", "lightUp", "lightGrid", "lightTrellis", "gray125", "gray0625"], p7, HU = Jo;
function _w(e, t) {
    t || (t = ce(4 * 3 + 8 * 7 + 16 * 1)),
    p7 || (p7 = C7(UU));
    var n = p7[e.patternType];
    n == null && (n = 40),
    t.write_shift(4, n);
    var i = 0;
    if (n != 40)
        for (r2({
            auto: 1
        }, t),
        r2({
            auto: 1
        }, t); i < 12; ++i)
            t.write_shift(4, 0);
    else {
        for (; i < 4; ++i)
            t.write_shift(4, 0);
        for (; i < 12; ++i)
            t.write_shift(4, 0)
    }
    return t.length > t.l ? t.slice(0, t.l) : t
}
function GU(e, t) {
    var n = e.l + t
      , i = e.read_shift(2)
      , r = e.read_shift(2);
    return e.l = n,
    {
        ixfe: i,
        numFmtId: r
    }
}
function CC(e, t, n) {
    n || (n = ce(16)),
    n.write_shift(2, t || 0),
    n.write_shift(2, e.numFmtId || 0),
    n.write_shift(2, 0),
    n.write_shift(2, 0),
    n.write_shift(2, 0),
    n.write_shift(1, 0),
    n.write_shift(1, 0);
    var i = 0;
    return n.write_shift(1, i),
    n.write_shift(1, 0),
    n.write_shift(1, 0),
    n.write_shift(1, 0),
    n
}
function g1(e, t) {
    return t || (t = ce(10)),
    t.write_shift(1, 0),
    t.write_shift(1, 0),
    t.write_shift(4, 0),
    t.write_shift(4, 0),
    t
}
var VU = Jo;
function $U(e, t) {
    return t || (t = ce(51)),
    t.write_shift(1, 0),
    g1(null, t),
    g1(null, t),
    g1(null, t),
    g1(null, t),
    g1(null, t),
    t.length > t.l ? t.slice(0, t.l) : t
}
function WU(e, t) {
    return t || (t = ce(12 + 4 * 10)),
    t.write_shift(4, e.xfId),
    t.write_shift(2, 1),
    t.write_shift(1, +e.builtinId),
    t.write_shift(1, 0),
    i2(e.name || "", t),
    t.length > t.l ? t.slice(0, t.l) : t
}
function jU(e, t, n) {
    var i = ce(2052);
    return i.write_shift(4, e),
    i2(t, i),
    i2(n, i),
    i.length > i.l ? i.slice(0, i.l) : i
}
function qU(e, t) {
    if (t) {
        var n = 0;
        [[5, 8], [23, 26], [41, 44], [50, 392]].forEach(function(i) {
            for (var r = i[0]; r <= i[1]; ++r)
                t[r] != null && ++n
        }),
        n != 0 && (pe(e, 615, ho(n)),
        [[5, 8], [23, 26], [41, 44], [50, 392]].forEach(function(i) {
            for (var r = i[0]; r <= i[1]; ++r)
                t[r] != null && pe(e, 44, FU(r, t[r]))
        }),
        pe(e, 616))
    }
}
function zU(e) {
    var t = 1;
    t != 0 && (pe(e, 611, ho(t)),
    pe(e, 43, BU({
        sz: 12,
        color: {
            theme: 1
        },
        name: "Calibri",
        family: 2,
        scheme: "minor"
    })),
    pe(e, 612))
}
function XU(e) {
    var t = 2;
    t != 0 && (pe(e, 603, ho(t)),
    pe(e, 45, _w({
        patternType: "none"
    })),
    pe(e, 45, _w({
        patternType: "gray125"
    })),
    pe(e, 604))
}
function KU(e) {
    var t = 1;
    t != 0 && (pe(e, 613, ho(t)),
    pe(e, 46, $U({})),
    pe(e, 614))
}
function YU(e) {
    var t = 1;
    pe(e, 626, ho(t)),
    pe(e, 47, CC({
        numFmtId: 0,
        fontId: 0,
        fillId: 0,
        borderId: 0
    }, 65535)),
    pe(e, 627)
}
function QU(e, t) {
    pe(e, 617, ho(t.length)),
    t.forEach(function(n) {
        pe(e, 47, CC(n, 0))
    }),
    pe(e, 618)
}
function JU(e) {
    var t = 1;
    pe(e, 619, ho(t)),
    pe(e, 48, WU({
        xfId: 0,
        builtinId: 0,
        name: "Normal"
    })),
    pe(e, 620)
}
function ZU(e) {
    var t = 0;
    pe(e, 505, ho(t)),
    pe(e, 506)
}
function eH(e) {
    var t = 0;
    pe(e, 508, jU(t, "TableStyleMedium9", "PivotStyleMedium4")),
    pe(e, 509)
}
function tH(e, t) {
    var n = Yr();
    return pe(n, 278),
    qU(n, e.SSF),
    zU(n, e),
    XU(n, e),
    KU(n, e),
    YU(n, e),
    QU(n, t.cellXfs),
    JU(n, e),
    ZU(n, e),
    eH(n, e),
    pe(n, 279),
    n.end()
}
function EC(e, t) {
    if (t && t.themeXLSX)
        return t.themeXLSX;
    if (e && typeof e.raw == "string")
        return e.raw;
    var n = [ri];
    return n[n.length] = '<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',
    n[n.length] = "<a:themeElements>",
    n[n.length] = '<a:clrScheme name="Office">',
    n[n.length] = '<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',
    n[n.length] = '<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',
    n[n.length] = '<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',
    n[n.length] = '<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',
    n[n.length] = '<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',
    n[n.length] = '<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',
    n[n.length] = '<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',
    n[n.length] = '<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',
    n[n.length] = '<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',
    n[n.length] = '<a:accent6><a:srgbClr val="F79646"/></a:accent6>',
    n[n.length] = '<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',
    n[n.length] = '<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',
    n[n.length] = "</a:clrScheme>",
    n[n.length] = '<a:fontScheme name="Office">',
    n[n.length] = "<a:majorFont>",
    n[n.length] = '<a:latin typeface="Cambria"/>',
    n[n.length] = '<a:ea typeface=""/>',
    n[n.length] = '<a:cs typeface=""/>',
    n[n.length] = '<a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/>',
    n[n.length] = '<a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/>',
    n[n.length] = '<a:font script="Hans" typeface="\u5B8B\u4F53"/>',
    n[n.length] = '<a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/>',
    n[n.length] = '<a:font script="Arab" typeface="Times New Roman"/>',
    n[n.length] = '<a:font script="Hebr" typeface="Times New Roman"/>',
    n[n.length] = '<a:font script="Thai" typeface="Tahoma"/>',
    n[n.length] = '<a:font script="Ethi" typeface="Nyala"/>',
    n[n.length] = '<a:font script="Beng" typeface="Vrinda"/>',
    n[n.length] = '<a:font script="Gujr" typeface="Shruti"/>',
    n[n.length] = '<a:font script="Khmr" typeface="MoolBoran"/>',
    n[n.length] = '<a:font script="Knda" typeface="Tunga"/>',
    n[n.length] = '<a:font script="Guru" typeface="Raavi"/>',
    n[n.length] = '<a:font script="Cans" typeface="Euphemia"/>',
    n[n.length] = '<a:font script="Cher" typeface="Plantagenet Cherokee"/>',
    n[n.length] = '<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',
    n[n.length] = '<a:font script="Tibt" typeface="Microsoft Himalaya"/>',
    n[n.length] = '<a:font script="Thaa" typeface="MV Boli"/>',
    n[n.length] = '<a:font script="Deva" typeface="Mangal"/>',
    n[n.length] = '<a:font script="Telu" typeface="Gautami"/>',
    n[n.length] = '<a:font script="Taml" typeface="Latha"/>',
    n[n.length] = '<a:font script="Syrc" typeface="Estrangelo Edessa"/>',
    n[n.length] = '<a:font script="Orya" typeface="Kalinga"/>',
    n[n.length] = '<a:font script="Mlym" typeface="Kartika"/>',
    n[n.length] = '<a:font script="Laoo" typeface="DokChampa"/>',
    n[n.length] = '<a:font script="Sinh" typeface="Iskoola Pota"/>',
    n[n.length] = '<a:font script="Mong" typeface="Mongolian Baiti"/>',
    n[n.length] = '<a:font script="Viet" typeface="Times New Roman"/>',
    n[n.length] = '<a:font script="Uigh" typeface="Microsoft Uighur"/>',
    n[n.length] = '<a:font script="Geor" typeface="Sylfaen"/>',
    n[n.length] = "</a:majorFont>",
    n[n.length] = "<a:minorFont>",
    n[n.length] = '<a:latin typeface="Calibri"/>',
    n[n.length] = '<a:ea typeface=""/>',
    n[n.length] = '<a:cs typeface=""/>',
    n[n.length] = '<a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/>',
    n[n.length] = '<a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/>',
    n[n.length] = '<a:font script="Hans" typeface="\u5B8B\u4F53"/>',
    n[n.length] = '<a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/>',
    n[n.length] = '<a:font script="Arab" typeface="Arial"/>',
    n[n.length] = '<a:font script="Hebr" typeface="Arial"/>',
    n[n.length] = '<a:font script="Thai" typeface="Tahoma"/>',
    n[n.length] = '<a:font script="Ethi" typeface="Nyala"/>',
    n[n.length] = '<a:font script="Beng" typeface="Vrinda"/>',
    n[n.length] = '<a:font script="Gujr" typeface="Shruti"/>',
    n[n.length] = '<a:font script="Khmr" typeface="DaunPenh"/>',
    n[n.length] = '<a:font script="Knda" typeface="Tunga"/>',
    n[n.length] = '<a:font script="Guru" typeface="Raavi"/>',
    n[n.length] = '<a:font script="Cans" typeface="Euphemia"/>',
    n[n.length] = '<a:font script="Cher" typeface="Plantagenet Cherokee"/>',
    n[n.length] = '<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',
    n[n.length] = '<a:font script="Tibt" typeface="Microsoft Himalaya"/>',
    n[n.length] = '<a:font script="Thaa" typeface="MV Boli"/>',
    n[n.length] = '<a:font script="Deva" typeface="Mangal"/>',
    n[n.length] = '<a:font script="Telu" typeface="Gautami"/>',
    n[n.length] = '<a:font script="Taml" typeface="Latha"/>',
    n[n.length] = '<a:font script="Syrc" typeface="Estrangelo Edessa"/>',
    n[n.length] = '<a:font script="Orya" typeface="Kalinga"/>',
    n[n.length] = '<a:font script="Mlym" typeface="Kartika"/>',
    n[n.length] = '<a:font script="Laoo" typeface="DokChampa"/>',
    n[n.length] = '<a:font script="Sinh" typeface="Iskoola Pota"/>',
    n[n.length] = '<a:font script="Mong" typeface="Mongolian Baiti"/>',
    n[n.length] = '<a:font script="Viet" typeface="Arial"/>',
    n[n.length] = '<a:font script="Uigh" typeface="Microsoft Uighur"/>',
    n[n.length] = '<a:font script="Geor" typeface="Sylfaen"/>',
    n[n.length] = "</a:minorFont>",
    n[n.length] = "</a:fontScheme>",
    n[n.length] = '<a:fmtScheme name="Office">',
    n[n.length] = "<a:fillStyleLst>",
    n[n.length] = '<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',
    n[n.length] = '<a:gradFill rotWithShape="1">',
    n[n.length] = "<a:gsLst>",
    n[n.length] = '<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',
    n[n.length] = '<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',
    n[n.length] = '<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',
    n[n.length] = "</a:gsLst>",
    n[n.length] = '<a:lin ang="16200000" scaled="1"/>',
    n[n.length] = "</a:gradFill>",
    n[n.length] = '<a:gradFill rotWithShape="1">',
    n[n.length] = "<a:gsLst>",
    n[n.length] = '<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',
    n[n.length] = '<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',
    n[n.length] = "</a:gsLst>",
    n[n.length] = '<a:lin ang="16200000" scaled="0"/>',
    n[n.length] = "</a:gradFill>",
    n[n.length] = "</a:fillStyleLst>",
    n[n.length] = "<a:lnStyleLst>",
    n[n.length] = '<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',
    n[n.length] = '<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',
    n[n.length] = '<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',
    n[n.length] = "</a:lnStyleLst>",
    n[n.length] = "<a:effectStyleLst>",
    n[n.length] = "<a:effectStyle>",
    n[n.length] = "<a:effectLst>",
    n[n.length] = '<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',
    n[n.length] = "</a:effectLst>",
    n[n.length] = "</a:effectStyle>",
    n[n.length] = "<a:effectStyle>",
    n[n.length] = "<a:effectLst>",
    n[n.length] = '<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',
    n[n.length] = "</a:effectLst>",
    n[n.length] = "</a:effectStyle>",
    n[n.length] = "<a:effectStyle>",
    n[n.length] = "<a:effectLst>",
    n[n.length] = '<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',
    n[n.length] = "</a:effectLst>",
    n[n.length] = '<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',
    n[n.length] = '<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',
    n[n.length] = "</a:effectStyle>",
    n[n.length] = "</a:effectStyleLst>",
    n[n.length] = "<a:bgFillStyleLst>",
    n[n.length] = '<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',
    n[n.length] = '<a:gradFill rotWithShape="1">',
    n[n.length] = "<a:gsLst>",
    n[n.length] = '<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',
    n[n.length] = '<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',
    n[n.length] = '<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',
    n[n.length] = "</a:gsLst>",
    n[n.length] = '<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',
    n[n.length] = "</a:gradFill>",
    n[n.length] = '<a:gradFill rotWithShape="1">',
    n[n.length] = "<a:gsLst>",
    n[n.length] = '<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',
    n[n.length] = '<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',
    n[n.length] = "</a:gsLst>",
    n[n.length] = '<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',
    n[n.length] = "</a:gradFill>",
    n[n.length] = "</a:bgFillStyleLst>",
    n[n.length] = "</a:fmtScheme>",
    n[n.length] = "</a:themeElements>",
    n[n.length] = "<a:objectDefaults>",
    n[n.length] = "<a:spDef>",
    n[n.length] = '<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',
    n[n.length] = "</a:spDef>",
    n[n.length] = "<a:lnDef>",
    n[n.length] = '<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',
    n[n.length] = "</a:lnDef>",
    n[n.length] = "</a:objectDefaults>",
    n[n.length] = "<a:extraClrSchemeLst/>",
    n[n.length] = "</a:theme>",
    n.join("")
}
function nH(e, t) {
    return {
        flags: e.read_shift(4),
        version: e.read_shift(4),
        name: lr(e, t - 8)
    }
}
function iH(e) {
    var t = ce(12 + 2 * e.name.length);
    return t.write_shift(4, e.flags),
    t.write_shift(4, e.version),
    Ri(e.name, t),
    t.slice(0, t.l)
}
function rH(e) {
    for (var t = [], n = e.read_shift(4); n-- > 0; )
        t.push([e.read_shift(4), e.read_shift(4)]);
    return t
}
function sH(e) {
    var t = ce(4 + 8 * e.length);
    t.write_shift(4, e.length);
    for (var n = 0; n < e.length; ++n)
        t.write_shift(4, e[n][0]),
        t.write_shift(4, e[n][1]);
    return t
}
function oH(e, t) {
    var n = ce(8 + 2 * t.length);
    return n.write_shift(4, e),
    Ri(t, n),
    n.slice(0, n.l)
}
function aH(e) {
    return e.l += 4,
    e.read_shift(4) != 0
}
function cH(e, t) {
    var n = ce(8);
    return n.write_shift(4, e),
    n.write_shift(4, t ? 1 : 0),
    n
}
function lH() {
    var e = Yr();
    return pe(e, 332),
    pe(e, 334, ho(1)),
    pe(e, 335, iH({
        name: "XLDAPR",
        version: 12e4,
        flags: 3496657072
    })),
    pe(e, 336),
    pe(e, 339, oH(1, "XLDAPR")),
    pe(e, 52),
    pe(e, 35, ho(514)),
    pe(e, 4096, ho(0)),
    pe(e, 4097, Ns(1)),
    pe(e, 36),
    pe(e, 53),
    pe(e, 340),
    pe(e, 337, cH(1, !0)),
    pe(e, 51, sH([[1, 0]])),
    pe(e, 338),
    pe(e, 333),
    e.end()
}
function TC() {
    var e = [ri];
    return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),
    e.join("")
}
function uH(e) {
    var t = {};
    t.i = e.read_shift(4);
    var n = {};
    n.r = e.read_shift(4),
    n.c = e.read_shift(4),
    t.r = tn(n);
    var i = e.read_shift(1);
    return i & 2 && (t.l = "1"),
    i & 8 && (t.a = "1"),
    t
}
var Gu = 1024;
function OC(e, t) {
    for (var n = [21600, 21600], i = ["m0,0l0", n[1], n[0], n[1], n[0], "0xe"].join(","), r = [Me("xml", null, {
        "xmlns:v": bs.v,
        "xmlns:o": bs.o,
        "xmlns:x": bs.x,
        "xmlns:mv": bs.mv
    }).replace(/\/>/, ">"), Me("o:shapelayout", Me("o:idmap", null, {
        "v:ext": "edit",
        data: e
    }), {
        "v:ext": "edit"
    }), Me("v:shapetype", [Me("v:stroke", null, {
        joinstyle: "miter"
    }), Me("v:path", null, {
        gradientshapeok: "t",
        "o:connecttype": "rect"
    })].join(""), {
        id: "_x0000_t202",
        "o:spt": 202,
        coordsize: n.join(","),
        path: i
    })]; Gu < e * 1e3; )
        Gu += 1e3;
    return t.forEach(function(s) {
        var o = Ii(s[0])
          , a = {
            color2: "#BEFF82",
            type: "gradient"
        };
        a.type == "gradient" && (a.angle = "-180");
        var c = a.type == "gradient" ? Me("o:fill", null, {
            type: "gradientUnscaled",
            "v:ext": "view"
        }) : null
          , l = Me("v:fill", c, a)
          , u = {
            on: "t",
            obscured: "t"
        };
        ++Gu,
        r = r.concat(["<v:shape" + T1({
            id: "_x0000_s" + Gu,
            type: "#_x0000_t202",
            style: "position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10" + (s[1].hidden ? ";visibility:hidden" : ""),
            fillcolor: "#ECFAD4",
            strokecolor: "#edeaa1"
        }) + ">", l, Me("v:shadow", null, u), Me("v:path", null, {
            "o:connecttype": "none"
        }), '<v:textbox><div style="text-align:left"></div></v:textbox>', '<x:ClientData ObjectType="Note">', "<x:MoveWithCells/>", "<x:SizeWithCells/>", Wi("x:Anchor", [o.c + 1, 0, o.r + 1, 0, o.c + 3, 20, o.r + 5, 20].join(",")), Wi("x:AutoFill", "False"), Wi("x:Row", String(o.r)), Wi("x:Column", String(o.c)), s[1].hidden ? "" : "<x:Visible/>", "</x:ClientData>", "</v:shape>"])
    }),
    r.push("</xml>"),
    r.join("")
}
function MC(e) {
    var t = [ri, Me("comments", null, {
        xmlns: Ku[0]
    })]
      , n = [];
    return t.push("<authors>"),
    e.forEach(function(i) {
        i[1].forEach(function(r) {
            var s = en(r.a);
            n.indexOf(s) == -1 && (n.push(s),
            t.push("<author>" + s + "</author>")),
            r.T && r.ID && n.indexOf("tc=" + r.ID) == -1 && (n.push("tc=" + r.ID),
            t.push("<author>tc=" + r.ID + "</author>"))
        })
    }),
    n.length == 0 && (n.push("SheetJ5"),
    t.push("<author>SheetJ5</author>")),
    t.push("</authors>"),
    t.push("<commentList>"),
    e.forEach(function(i) {
        var r = 0
          , s = [];
        if (i[1][0] && i[1][0].T && i[1][0].ID ? r = n.indexOf("tc=" + i[1][0].ID) : i[1].forEach(function(c) {
            c.a && (r = n.indexOf(en(c.a))),
            s.push(c.t || "")
        }),
        t.push('<comment ref="' + i[0] + '" authorId="' + r + '"><text>'),
        s.length <= 1)
            t.push(Wi("t", en(s[0] || "")));
        else {
            for (var o = `Comment:
    ` + s[0] + `
`, a = 1; a < s.length; ++a)
                o += `Reply:
    ` + s[a] + `
`;
            t.push(Wi("t", en(o)))
        }
        t.push("</text></comment>")
    }),
    t.push("</commentList>"),
    t.length > 2 && (t[t.length] = "</comments>",
    t[1] = t[1].replace("/>", ">")),
    t.join("")
}
function hH(e, t, n) {
    var i = [ri, Me("ThreadedComments", null, {
        xmlns: Ai.TCMNT
    }).replace(/[\/]>/, ">")];
    return e.forEach(function(r) {
        var s = "";
        (r[1] || []).forEach(function(o, a) {
            if (!o.T) {
                delete o.ID;
                return
            }
            o.a && t.indexOf(o.a) == -1 && t.push(o.a);
            var c = {
                ref: r[0],
                id: "{54EE7951-7262-4200-6969-" + ("000000000000" + n.tcid++).slice(-12) + "}"
            };
            a == 0 ? s = c.id : c.parentId = s,
            o.ID = c.id,
            o.a && (c.personId = "{54EE7950-7262-4200-6969-" + ("000000000000" + t.indexOf(o.a)).slice(-12) + "}"),
            i.push(Me("threadedComment", Wi("text", o.t || ""), c))
        })
    }),
    i.push("</ThreadedComments>"),
    i.join("")
}
function dH(e) {
    var t = [ri, Me("personList", null, {
        xmlns: Ai.TCMNT,
        "xmlns:x": Ku[0]
    }).replace(/[\/]>/, ">")];
    return e.forEach(function(n, i) {
        t.push(Me("person", null, {
            displayName: n,
            id: "{54EE7950-7262-4200-6969-" + ("000000000000" + i).slice(-12) + "}",
            userId: n,
            providerId: "None"
        }))
    }),
    t.push("</personList>"),
    t.join("")
}
function fH(e) {
    var t = {};
    t.iauthor = e.read_shift(4);
    var n = c0(e, 16);
    return t.rfx = n.s,
    t.ref = tn(n.s),
    e.l += 16,
    t
}
function pH(e, t) {
    return t == null && (t = ce(36)),
    t.write_shift(4, e[1].iauthor),
    Ju(e[0], t),
    t.write_shift(4, 0),
    t.write_shift(4, 0),
    t.write_shift(4, 0),
    t.write_shift(4, 0),
    t
}
var gH = lr;
function mH(e) {
    return Ri(e.slice(0, 54))
}
function vH(e) {
    var t = Yr()
      , n = [];
    return pe(t, 628),
    pe(t, 630),
    e.forEach(function(i) {
        i[1].forEach(function(r) {
            n.indexOf(r.a) > -1 || (n.push(r.a.slice(0, 54)),
            pe(t, 632, mH(r.a)))
        })
    }),
    pe(t, 631),
    pe(t, 633),
    e.forEach(function(i) {
        i[1].forEach(function(r) {
            r.iauthor = n.indexOf(r.a);
            var s = {
                s: Ii(i[0]),
                e: Ii(i[0])
            };
            pe(t, 635, pH([s, r])),
            r.t && r.t.length > 0 && pe(t, 637, yB(r)),
            pe(t, 636),
            delete r.iauthor
        })
    }),
    pe(t, 634),
    pe(t, 629),
    t.end()
}
function _H(e, t) {
    t.FullPaths.forEach(function(n, i) {
        if (i != 0) {
            var r = n.replace(/[^\/]*[\/]/, "/_VBA_PROJECT_CUR/");
            r.slice(-1) !== "/" && nn.utils.cfb_add(e, r, t.FileIndex[i].content)
        }
    })
}
var PC = ["xlsb", "xlsm", "xlam", "biff8", "xla"];
var yH = function() {
    var e = /(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g
      , t = {
        r: 0,
        c: 0
    };
    function n(i, r, s, o) {
        var a = !1
          , c = !1;
        s.length == 0 ? c = !0 : s.charAt(0) == "[" && (c = !0,
        s = s.slice(1, -1)),
        o.length == 0 ? a = !0 : o.charAt(0) == "[" && (a = !0,
        o = o.slice(1, -1));
        var l = s.length > 0 ? parseInt(s, 10) | 0 : 0
          , u = o.length > 0 ? parseInt(o, 10) | 0 : 0;
        return a ? u += t.c : --u,
        c ? l += t.r : --l,
        r + (a ? "" : "$") + cr(u) + (c ? "" : "$") + ji(l)
    }
    return function(r, s) {
        return t = s,
        r.replace(e, n)
    }
}()
  , G7 = /(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g
  , V7 = function() {
    return function(t, n) {
        return t.replace(G7, function(i, r, s, o, a, c) {
            var l = N7(o) - (s ? 0 : n.c)
              , u = D7(c) - (a ? 0 : n.r)
              , h = u == 0 ? "" : a ? u + 1 : "[" + u + "]"
              , d = l == 0 ? "" : s ? l + 1 : "[" + l + "]";
            return r + "R" + h + "C" + d
        })
    }
}();
function SH(e, t) {
    return e.replace(G7, function(n, i, r, s, o, a) {
        return i + (r == "$" ? r + s : cr(N7(s) + t.c)) + (o == "$" ? o + a : ji(D7(a) + t.r))
    })
}
function bH(e) {
    return e.length != 1
}
function ni(e) {
    e.l += 1
}
function $c(e, t) {
    var n = e.read_shift(t == 1 ? 1 : 2);
    return [n & 16383, n >> 14 & 1, n >> 15 & 1]
}
function kC(e, t, n) {
    var i = 2;
    if (n) {
        if (n.biff >= 2 && n.biff <= 5)
            return AC(e, t, n);
        n.biff == 12 && (i = 4)
    }
    var r = e.read_shift(i)
      , s = e.read_shift(i)
      , o = $c(e, 2)
      , a = $c(e, 2);
    return {
        s: {
            r,
            c: o[0],
            cRel: o[1],
            rRel: o[2]
        },
        e: {
            r: s,
            c: a[0],
            cRel: a[1],
            rRel: a[2]
        }
    }
}
function AC(e) {
    var t = $c(e, 2)
      , n = $c(e, 2)
      , i = e.read_shift(1)
      , r = e.read_shift(1);
    return {
        s: {
            r: t[0],
            c: i,
            cRel: t[1],
            rRel: t[2]
        },
        e: {
            r: n[0],
            c: r,
            cRel: n[1],
            rRel: n[2]
        }
    }
}
function xH(e, t, n) {
    if (n.biff < 8)
        return AC(e, t, n);
    var i = e.read_shift(n.biff == 12 ? 4 : 2)
      , r = e.read_shift(n.biff == 12 ? 4 : 2)
      , s = $c(e, 2)
      , o = $c(e, 2);
    return {
        s: {
            r: i,
            c: s[0],
            cRel: s[1],
            rRel: s[2]
        },
        e: {
            r,
            c: o[0],
            cRel: o[1],
            rRel: o[2]
        }
    }
}
function IC(e, t, n) {
    if (n && n.biff >= 2 && n.biff <= 5)
        return wH(e, t, n);
    var i = e.read_shift(n && n.biff == 12 ? 4 : 2)
      , r = $c(e, 2);
    return {
        r: i,
        c: r[0],
        cRel: r[1],
        rRel: r[2]
    }
}
function wH(e) {
    var t = $c(e, 2)
      , n = e.read_shift(1);
    return {
        r: t[0],
        c: n,
        cRel: t[1],
        rRel: t[2]
    }
}
function CH(e) {
    var t = e.read_shift(2)
      , n = e.read_shift(2);
    return {
        r: t,
        c: n & 255,
        fQuoted: !!(n & 16384),
        cRel: n >> 15,
        rRel: n >> 15
    }
}
function EH(e, t, n) {
    var i = n && n.biff ? n.biff : 8;
    if (i >= 2 && i <= 5)
        return TH(e, t, n);
    var r = e.read_shift(i >= 12 ? 4 : 2)
      , s = e.read_shift(2)
      , o = (s & 16384) >> 14
      , a = (s & 32768) >> 15;
    if (s &= 16383,
    a == 1)
        for (; r > 524287; )
            r -= 1048576;
    if (o == 1)
        for (; s > 8191; )
            s = s - 16384;
    return {
        r,
        c: s,
        cRel: o,
        rRel: a
    }
}
function TH(e) {
    var t = e.read_shift(2)
      , n = e.read_shift(1)
      , i = (t & 32768) >> 15
      , r = (t & 16384) >> 14;
    return t &= 16383,
    i == 1 && t >= 8192 && (t = t - 16384),
    r == 1 && n >= 128 && (n = n - 256),
    {
        r: t,
        c: n,
        cRel: r,
        rRel: i
    }
}
function OH(e, t, n) {
    var i = (e[e.l++] & 96) >> 5
      , r = kC(e, n.biff >= 2 && n.biff <= 5 ? 6 : 8, n);
    return [i, r]
}
function MH(e, t, n) {
    var i = (e[e.l++] & 96) >> 5
      , r = e.read_shift(2, "i")
      , s = 8;
    if (n)
        switch (n.biff) {
        case 5:
            e.l += 12,
            s = 6;
            break;
        case 12:
            s = 12;
            break
        }
    var o = kC(e, s, n);
    return [i, r, o]
}
function PH(e, t, n) {
    var i = (e[e.l++] & 96) >> 5;
    return e.l += n && n.biff > 8 ? 12 : n.biff < 8 ? 6 : 8,
    [i]
}
function kH(e, t, n) {
    var i = (e[e.l++] & 96) >> 5
      , r = e.read_shift(2)
      , s = 8;
    if (n)
        switch (n.biff) {
        case 5:
            e.l += 12,
            s = 6;
            break;
        case 12:
            s = 12;
            break
        }
    return e.l += s,
    [i, r]
}
function AH(e, t, n) {
    var i = (e[e.l++] & 96) >> 5
      , r = xH(e, t - 1, n);
    return [i, r]
}
function IH(e, t, n) {
    var i = (e[e.l++] & 96) >> 5;
    return e.l += n.biff == 2 ? 6 : n.biff == 12 ? 14 : 7,
    [i]
}
function yw(e) {
    var t = e[e.l + 1] & 1
      , n = 1;
    return e.l += 4,
    [t, n]
}
function RH(e, t, n) {
    e.l += 2;
    for (var i = e.read_shift(n && n.biff == 2 ? 1 : 2), r = [], s = 0; s <= i; ++s)
        r.push(e.read_shift(n && n.biff == 2 ? 1 : 2));
    return r
}
function DH(e, t, n) {
    var i = e[e.l + 1] & 255 ? 1 : 0;
    return e.l += 2,
    [i, e.read_shift(n && n.biff == 2 ? 1 : 2)]
}
function NH(e, t, n) {
    var i = e[e.l + 1] & 255 ? 1 : 0;
    return e.l += 2,
    [i, e.read_shift(n && n.biff == 2 ? 1 : 2)]
}
function FH(e) {
    var t = e[e.l + 1] & 255 ? 1 : 0;
    return e.l += 2,
    [t, e.read_shift(2)]
}
function LH(e, t, n) {
    var i = e[e.l + 1] & 255 ? 1 : 0;
    return e.l += n && n.biff == 2 ? 3 : 4,
    [i]
}
function RC(e) {
    var t = e.read_shift(1)
      , n = e.read_shift(1);
    return [t, n]
}
function BH(e) {
    return e.read_shift(2),
    RC(e, 2)
}
function UH(e) {
    return e.read_shift(2),
    RC(e, 2)
}
function HH(e, t, n) {
    var i = (e[e.l] & 96) >> 5;
    e.l += 1;
    var r = IC(e, 0, n);
    return [i, r]
}
function GH(e, t, n) {
    var i = (e[e.l] & 96) >> 5;
    e.l += 1;
    var r = EH(e, 0, n);
    return [i, r]
}
function VH(e, t, n) {
    var i = (e[e.l] & 96) >> 5;
    e.l += 1;
    var r = e.read_shift(2);
    n && n.biff == 5 && (e.l += 12);
    var s = IC(e, 0, n);
    return [i, r, s]
}
function $H(e, t, n) {
    var i = (e[e.l] & 96) >> 5;
    e.l += 1;
    var r = e.read_shift(n && n.biff <= 3 ? 1 : 2);
    return [$G[r], FC[r], i]
}
function WH(e, t, n) {
    var i = e[e.l++]
      , r = e.read_shift(1)
      , s = n && n.biff <= 3 ? [i == 88 ? -1 : 0, e.read_shift(1)] : jH(e);
    return [r, (s[0] === 0 ? FC : VG)[s[1]]]
}
function jH(e) {
    return [e[e.l + 1] >> 7, e.read_shift(2) & 32767]
}
function qH(e, t, n) {
    e.l += n && n.biff == 2 ? 3 : 4
}
function zH(e, t, n) {
    if (e.l++,
    n && n.biff == 12)
        return [e.read_shift(4, "i"), 0];
    var i = e.read_shift(2)
      , r = e.read_shift(n && n.biff == 2 ? 1 : 2);
    return [i, r]
}
function XH(e) {
    return e.l++,
    A1[e.read_shift(1)]
}
function KH(e) {
    return e.l++,
    e.read_shift(2)
}
function YH(e) {
    return e.l++,
    e.read_shift(1) !== 0
}
function QH(e) {
    return e.l++,
    Zu(e, 8)
}
function JH(e, t, n) {
    return e.l++,
    gC(e, t - 1, n)
}
function ZH(e, t) {
    var n = [e.read_shift(1)];
    if (t == 12)
        switch (n[0]) {
        case 2:
            n[0] = 4;
            break;
        case 4:
            n[0] = 16;
            break;
        case 0:
            n[0] = 1;
            break;
        case 1:
            n[0] = 2;
            break
        }
    switch (n[0]) {
    case 4:
        n[1] = VB(e, 1) ? "TRUE" : "FALSE",
        t != 12 && (e.l += 7);
        break;
    case 37:
    case 16:
        n[1] = A1[e[e.l]],
        e.l += t == 12 ? 4 : 8;
        break;
    case 0:
        e.l += 8;
        break;
    case 1:
        n[1] = Zu(e, 8);
        break;
    case 2:
        n[1] = qB(e, 0, {
            biff: t > 0 && t < 8 ? 2 : t
        });
        break;
    default:
        throw new Error("Bad SerAr: " + n[0])
    }
    return n
}
function eG(e, t, n) {
    for (var i = e.read_shift(n.biff == 12 ? 4 : 2), r = [], s = 0; s != i; ++s)
        r.push((n.biff == 12 ? c0 : KB)(e, 8));
    return r
}
function tG(e, t, n) {
    var i = 0
      , r = 0;
    n.biff == 12 ? (i = e.read_shift(4),
    r = e.read_shift(4)) : (r = 1 + e.read_shift(1),
    i = 1 + e.read_shift(2)),
    n.biff >= 2 && n.biff < 8 && (--i,
    --r == 0 && (r = 256));
    for (var s = 0, o = []; s != i && (o[s] = []); ++s)
        for (var a = 0; a != r; ++a)
            o[s][a] = ZH(e, n.biff);
    return o
}
function nG(e, t, n) {
    var i = e.read_shift(1) >>> 5 & 3
      , r = !n || n.biff >= 8 ? 4 : 2
      , s = e.read_shift(r);
    switch (n.biff) {
    case 2:
        e.l += 5;
        break;
    case 3:
    case 4:
        e.l += 8;
        break;
    case 5:
        e.l += 12;
        break
    }
    return [i, 0, s]
}
function iG(e, t, n) {
    if (n.biff == 5)
        return rG(e, t, n);
    var i = e.read_shift(1) >>> 5 & 3
      , r = e.read_shift(2)
      , s = e.read_shift(4);
    return [i, r, s]
}
function rG(e) {
    var t = e.read_shift(1) >>> 5 & 3
      , n = e.read_shift(2, "i");
    e.l += 8;
    var i = e.read_shift(2);
    return e.l += 12,
    [t, n, i]
}
function sG(e, t, n) {
    var i = e.read_shift(1) >>> 5 & 3;
    e.l += n && n.biff == 2 ? 3 : 4;
    var r = e.read_shift(n && n.biff == 2 ? 1 : 2);
    return [i, r]
}
function oG(e, t, n) {
    var i = e.read_shift(1) >>> 5 & 3
      , r = e.read_shift(n && n.biff == 2 ? 1 : 2);
    return [i, r]
}
function aG(e, t, n) {
    var i = e.read_shift(1) >>> 5 & 3;
    return e.l += 4,
    n.biff < 8 && e.l--,
    n.biff == 12 && (e.l += 2),
    [i]
}
function cG(e, t, n) {
    var i = (e[e.l++] & 96) >> 5
      , r = e.read_shift(2)
      , s = 4;
    if (n)
        switch (n.biff) {
        case 5:
            s = 15;
            break;
        case 12:
            s = 6;
            break
        }
    return e.l += s,
    [i, r]
}
var lG = Jo
  , uG = Jo
  , hG = Jo;
function I1(e, t, n) {
    return e.l += 2,
    [CH(e, 4, n)]
}
function $7(e) {
    return e.l += 6,
    []
}
var dG = I1
  , fG = $7
  , pG = $7
  , gG = I1;
function DC(e) {
    return e.l += 2,
    [fC(e), e.read_shift(2) & 1]
}
var mG = I1
  , vG = DC
  , _G = $7
  , yG = I1
  , SG = I1
  , bG = ["Data", "All", "Headers", "??", "?Data2", "??", "?DataHeaders", "??", "Totals", "??", "??", "??", "?DataTotals", "??", "??", "??", "?Current"];
function xG(e) {
    e.l += 2;
    var t = e.read_shift(2)
      , n = e.read_shift(2)
      , i = e.read_shift(4)
      , r = e.read_shift(2)
      , s = e.read_shift(2)
      , o = bG[n >> 2 & 31];
    return {
        ixti: t,
        coltype: n & 3,
        rt: o,
        idx: i,
        c: r,
        C: s
    }
}
function wG(e) {
    return e.l += 2,
    [e.read_shift(4)]
}
function CG(e, t, n) {
    return e.l += 5,
    e.l += 2,
    e.l += n.biff == 2 ? 1 : 4,
    ["PTGSHEET"]
}
function EG(e, t, n) {
    return e.l += n.biff == 2 ? 4 : 5,
    ["PTGENDSHEET"]
}
function TG(e) {
    var t = e.read_shift(1) >>> 5 & 3
      , n = e.read_shift(2);
    return [t, n]
}
function OG(e) {
    var t = e.read_shift(1) >>> 5 & 3
      , n = e.read_shift(2);
    return [t, n]
}
function MG(e) {
    return e.l += 4,
    [0, 0]
}
var Sw = {
    1: {
        n: "PtgExp",
        f: zH
    },
    2: {
        n: "PtgTbl",
        f: hG
    },
    3: {
        n: "PtgAdd",
        f: ni
    },
    4: {
        n: "PtgSub",
        f: ni
    },
    5: {
        n: "PtgMul",
        f: ni
    },
    6: {
        n: "PtgDiv",
        f: ni
    },
    7: {
        n: "PtgPower",
        f: ni
    },
    8: {
        n: "PtgConcat",
        f: ni
    },
    9: {
        n: "PtgLt",
        f: ni
    },
    10: {
        n: "PtgLe",
        f: ni
    },
    11: {
        n: "PtgEq",
        f: ni
    },
    12: {
        n: "PtgGe",
        f: ni
    },
    13: {
        n: "PtgGt",
        f: ni
    },
    14: {
        n: "PtgNe",
        f: ni
    },
    15: {
        n: "PtgIsect",
        f: ni
    },
    16: {
        n: "PtgUnion",
        f: ni
    },
    17: {
        n: "PtgRange",
        f: ni
    },
    18: {
        n: "PtgUplus",
        f: ni
    },
    19: {
        n: "PtgUminus",
        f: ni
    },
    20: {
        n: "PtgPercent",
        f: ni
    },
    21: {
        n: "PtgParen",
        f: ni
    },
    22: {
        n: "PtgMissArg",
        f: ni
    },
    23: {
        n: "PtgStr",
        f: JH
    },
    26: {
        n: "PtgSheet",
        f: CG
    },
    27: {
        n: "PtgEndSheet",
        f: EG
    },
    28: {
        n: "PtgErr",
        f: XH
    },
    29: {
        n: "PtgBool",
        f: YH
    },
    30: {
        n: "PtgInt",
        f: KH
    },
    31: {
        n: "PtgNum",
        f: QH
    },
    32: {
        n: "PtgArray",
        f: IH
    },
    33: {
        n: "PtgFunc",
        f: $H
    },
    34: {
        n: "PtgFuncVar",
        f: WH
    },
    35: {
        n: "PtgName",
        f: nG
    },
    36: {
        n: "PtgRef",
        f: HH
    },
    37: {
        n: "PtgArea",
        f: OH
    },
    38: {
        n: "PtgMemArea",
        f: sG
    },
    39: {
        n: "PtgMemErr",
        f: lG
    },
    40: {
        n: "PtgMemNoMem",
        f: uG
    },
    41: {
        n: "PtgMemFunc",
        f: oG
    },
    42: {
        n: "PtgRefErr",
        f: aG
    },
    43: {
        n: "PtgAreaErr",
        f: PH
    },
    44: {
        n: "PtgRefN",
        f: GH
    },
    45: {
        n: "PtgAreaN",
        f: AH
    },
    46: {
        n: "PtgMemAreaN",
        f: TG
    },
    47: {
        n: "PtgMemNoMemN",
        f: OG
    },
    57: {
        n: "PtgNameX",
        f: iG
    },
    58: {
        n: "PtgRef3d",
        f: VH
    },
    59: {
        n: "PtgArea3d",
        f: MH
    },
    60: {
        n: "PtgRefErr3d",
        f: cG
    },
    61: {
        n: "PtgAreaErr3d",
        f: kH
    },
    255: {}
}
  , PG = {
    64: 32,
    96: 32,
    65: 33,
    97: 33,
    66: 34,
    98: 34,
    67: 35,
    99: 35,
    68: 36,
    100: 36,
    69: 37,
    101: 37,
    70: 38,
    102: 38,
    71: 39,
    103: 39,
    72: 40,
    104: 40,
    73: 41,
    105: 41,
    74: 42,
    106: 42,
    75: 43,
    107: 43,
    76: 44,
    108: 44,
    77: 45,
    109: 45,
    78: 46,
    110: 46,
    79: 47,
    111: 47,
    88: 34,
    120: 34,
    89: 57,
    121: 57,
    90: 58,
    122: 58,
    91: 59,
    123: 59,
    92: 60,
    124: 60,
    93: 61,
    125: 61
}
  , kG = {
    1: {
        n: "PtgElfLel",
        f: DC
    },
    2: {
        n: "PtgElfRw",
        f: yG
    },
    3: {
        n: "PtgElfCol",
        f: dG
    },
    6: {
        n: "PtgElfRwV",
        f: SG
    },
    7: {
        n: "PtgElfColV",
        f: gG
    },
    10: {
        n: "PtgElfRadical",
        f: mG
    },
    11: {
        n: "PtgElfRadicalS",
        f: _G
    },
    13: {
        n: "PtgElfColS",
        f: fG
    },
    15: {
        n: "PtgElfColSV",
        f: pG
    },
    16: {
        n: "PtgElfRadicalLel",
        f: vG
    },
    25: {
        n: "PtgList",
        f: xG
    },
    29: {
        n: "PtgSxName",
        f: wG
    },
    255: {}
}
  , AG = {
    0: {
        n: "PtgAttrNoop",
        f: MG
    },
    1: {
        n: "PtgAttrSemi",
        f: LH
    },
    2: {
        n: "PtgAttrIf",
        f: NH
    },
    4: {
        n: "PtgAttrChoose",
        f: RH
    },
    8: {
        n: "PtgAttrGoto",
        f: DH
    },
    16: {
        n: "PtgAttrSum",
        f: qH
    },
    32: {
        n: "PtgAttrBaxcel",
        f: yw
    },
    33: {
        n: "PtgAttrBaxcel",
        f: yw
    },
    64: {
        n: "PtgAttrSpace",
        f: BH
    },
    65: {
        n: "PtgAttrSpaceSemi",
        f: UH
    },
    128: {
        n: "PtgAttrIfError",
        f: FH
    },
    255: {}
};
function IG(e, t, n, i) {
    if (i.biff < 8)
        return Jo(e, t);
    for (var r = e.l + t, s = [], o = 0; o !== n.length; ++o)
        switch (n[o][0]) {
        case "PtgArray":
            n[o][1] = tG(e, 0, i),
            s.push(n[o][1]);
            break;
        case "PtgMemArea":
            n[o][2] = eG(e, n[o][1], i),
            s.push(n[o][2]);
            break;
        case "PtgExp":
            i && i.biff == 12 && (n[o][1][1] = e.read_shift(4),
            s.push(n[o][1]));
            break;
        case "PtgList":
        case "PtgElfRadicalS":
        case "PtgElfColS":
        case "PtgElfColSV":
            throw "Unsupported " + n[o][0];
        default:
            break
        }
    return t = r - e.l,
    t !== 0 && s.push(Jo(e, t)),
    s
}
function RG(e, t, n) {
    for (var i = e.l + t, r, s, o = []; i != e.l; )
        t = i - e.l,
        s = e[e.l],
        r = Sw[s] || Sw[PG[s]],
        (s === 24 || s === 25) && (r = (s === 24 ? kG : AG)[e[e.l + 1]]),
        !r || !r.f ? Jo(e, t) : o.push([r.n, r.f(e, t, n)]);
    return o
}
function DG(e) {
    for (var t = [], n = 0; n < e.length; ++n) {
        for (var i = e[n], r = [], s = 0; s < i.length; ++s) {
            var o = i[s];
            if (o)
                switch (o[0]) {
                case 2:
                    r.push('"' + o[1].replace(/"/g, '""') + '"');
                    break;
                default:
                    r.push(o[1])
                }
            else
                r.push("")
        }
        t.push(r.join(","))
    }
    return t.join(";")
}
var NG = {
    PtgAdd: "+",
    PtgConcat: "&",
    PtgDiv: "/",
    PtgEq: "=",
    PtgGe: ">=",
    PtgGt: ">",
    PtgLe: "<=",
    PtgLt: "<",
    PtgMul: "*",
    PtgNe: "<>",
    PtgPower: "^",
    PtgSub: "-"
};
function FG(e, t) {
    if (!e && !(t && t.biff <= 5 && t.biff >= 2))
        throw new Error("empty sheet name");
    return /[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e) ? "'" + e + "'" : e
}
function NC(e, t, n) {
    if (!e)
        return "SH33TJSERR0";
    if (n.biff > 8 && (!e.XTI || !e.XTI[t]))
        return e.SheetNames[t];
    if (!e.XTI)
        return "SH33TJSERR6";
    var i = e.XTI[t];
    if (n.biff < 8)
        return t > 1e4 && (t -= 65536),
        t < 0 && (t = -t),
        t == 0 ? "" : e.XTI[t - 1];
    if (!i)
        return "SH33TJSERR1";
    var r = "";
    if (n.biff > 8)
        switch (e[i[0]][0]) {
        case 357:
            return r = i[1] == -1 ? "#REF" : e.SheetNames[i[1]],
            i[1] == i[2] ? r : r + ":" + e.SheetNames[i[2]];
        case 358:
            return n.SID != null ? e.SheetNames[n.SID] : "SH33TJSSAME" + e[i[0]][0];
        case 355:
        default:
            return "SH33TJSSRC" + e[i[0]][0]
        }
    switch (e[i[0]][0][0]) {
    case 1025:
        return r = i[1] == -1 ? "#REF" : e.SheetNames[i[1]] || "SH33TJSERR3",
        i[1] == i[2] ? r : r + ":" + e.SheetNames[i[2]];
    case 14849:
        return e[i[0]].slice(1).map(function(s) {
            return s.Name
        }).join(";;");
    default:
        return e[i[0]][0][3] ? (r = i[1] == -1 ? "#REF" : e[i[0]][0][3][i[1]] || "SH33TJSERR4",
        i[1] == i[2] ? r : r + ":" + e[i[0]][0][3][i[2]]) : "SH33TJSERR2"
    }
}
function bw(e, t, n) {
    var i = NC(e, t, n);
    return i == "#REF" ? i : FG(i, n)
}
function Xu(e, t, n, i, r) {
    var s = r && r.biff || 8, o = {
        s: {
            c: 0,
            r: 0
        },
        e: {
            c: 0,
            r: 0
        }
    }, a = [], c, l, u, h = 0, d = 0, f, g = "";
    if (!e[0] || !e[0][0])
        return "";
    for (var p = -1, v = "", S = 0, x = e[0].length; S < x; ++S) {
        var w = e[0][S];
        switch (w[0]) {
        case "PtgUminus":
            a.push("-" + a.pop());
            break;
        case "PtgUplus":
            a.push("+" + a.pop());
            break;
        case "PtgPercent":
            a.push(a.pop() + "%");
            break;
        case "PtgAdd":
        case "PtgConcat":
        case "PtgDiv":
        case "PtgEq":
        case "PtgGe":
        case "PtgGt":
        case "PtgLe":
        case "PtgLt":
        case "PtgMul":
        case "PtgNe":
        case "PtgPower":
        case "PtgSub":
            if (c = a.pop(),
            l = a.pop(),
            p >= 0) {
                switch (e[0][p][1][0]) {
                case 0:
                    v = Ln(" ", e[0][p][1][1]);
                    break;
                case 1:
                    v = Ln("\r", e[0][p][1][1]);
                    break;
                default:
                    if (v = "",
                    r.WTF)
                        throw new Error("Unexpected PtgAttrSpaceType " + e[0][p][1][0])
                }
                l = l + v,
                p = -1
            }
            a.push(l + NG[w[0]] + c);
            break;
        case "PtgIsect":
            c = a.pop(),
            l = a.pop(),
            a.push(l + " " + c);
            break;
        case "PtgUnion":
            c = a.pop(),
            l = a.pop(),
            a.push(l + "," + c);
            break;
        case "PtgRange":
            c = a.pop(),
            l = a.pop(),
            a.push(l + ":" + c);
            break;
        case "PtgAttrChoose":
            break;
        case "PtgAttrGoto":
            break;
        case "PtgAttrIf":
            break;
        case "PtgAttrIfError":
            break;
        case "PtgRef":
            u = y1(w[1][1], o, r),
            a.push(S1(u, s));
            break;
        case "PtgRefN":
            u = n ? y1(w[1][1], n, r) : w[1][1],
            a.push(S1(u, s));
            break;
        case "PtgRef3d":
            h = w[1][1],
            u = y1(w[1][2], o, r),
            g = bw(i, h, r);
            var k = g;
            a.push(g + "!" + S1(u, s));
            break;
        case "PtgFunc":
        case "PtgFuncVar":
            var B = w[1][0]
              , N = w[1][1];
            B || (B = 0),
            B &= 127;
            var E = B == 0 ? [] : a.slice(-B);
            a.length -= B,
            N === "User" && (N = E.shift()),
            a.push(N + "(" + E.join(",") + ")");
            break;
        case "PtgBool":
            a.push(w[1] ? "TRUE" : "FALSE");
            break;
        case "PtgInt":
            a.push(w[1]);
            break;
        case "PtgNum":
            a.push(String(w[1]));
            break;
        case "PtgStr":
            a.push('"' + w[1].replace(/"/g, '""') + '"');
            break;
        case "PtgErr":
            a.push(w[1]);
            break;
        case "PtgAreaN":
            f = sw(w[1][1], n ? {
                s: n
            } : o, r),
            a.push(d7(f, r));
            break;
        case "PtgArea":
            f = sw(w[1][1], o, r),
            a.push(d7(f, r));
            break;
        case "PtgArea3d":
            h = w[1][1],
            f = w[1][2],
            g = bw(i, h, r),
            a.push(g + "!" + d7(f, r));
            break;
        case "PtgAttrSum":
            a.push("SUM(" + a.pop() + ")");
            break;
        case "PtgAttrBaxcel":
        case "PtgAttrSemi":
            break;
        case "PtgName":
            d = w[1][2];
            var F = (i.names || [])[d - 1] || (i[0] || [])[d]
              , O = F ? F.Name : "SH33TJSNAME" + String(d);
            O && O.slice(0, 6) == "_xlfn." && !r.xlfn && (O = O.slice(6)),
            a.push(O);
            break;
        case "PtgNameX":
            var V = w[1][1];
            d = w[1][2];
            var X;
            if (r.biff <= 5)
                V < 0 && (V = -V),
                i[V] && (X = i[V][d]);
            else {
                var b = "";
                if (((i[V] || [])[0] || [])[0] == 14849 || (((i[V] || [])[0] || [])[0] == 1025 ? i[V][d] && i[V][d].itab > 0 && (b = i.SheetNames[i[V][d].itab - 1] + "!") : b = i.SheetNames[d - 1] + "!"),
                i[V] && i[V][d])
                    b += i[V][d].Name;
                else if (i[0] && i[0][d])
                    b += i[0][d].Name;
                else {
                    var j = (NC(i, V, r) || "").split(";;");
                    j[d - 1] ? b = j[d - 1] : b += "SH33TJSERRX"
                }
                a.push(b);
                break
            }
            X || (X = {
                Name: "SH33TJSERRY"
            }),
            a.push(X.Name);
            break;
        case "PtgParen":
            var de = "("
              , he = ")";
            if (p >= 0) {
                switch (v = "",
                e[0][p][1][0]) {
                case 2:
                    de = Ln(" ", e[0][p][1][1]) + de;
                    break;
                case 3:
                    de = Ln("\r", e[0][p][1][1]) + de;
                    break;
                case 4:
                    he = Ln(" ", e[0][p][1][1]) + he;
                    break;
                case 5:
                    he = Ln("\r", e[0][p][1][1]) + he;
                    break;
                default:
                    if (r.WTF)
                        throw new Error("Unexpected PtgAttrSpaceType " + e[0][p][1][0])
                }
                p = -1
            }
            a.push(de + a.pop() + he);
            break;
        case "PtgRefErr":
            a.push("#REF!");
            break;
        case "PtgRefErr3d":
            a.push("#REF!");
            break;
        case "PtgExp":
            u = {
                c: w[1][1],
                r: w[1][0]
            };
            var Re = {
                c: n.c,
                r: n.r
            };
            if (i.sharedf[tn(u)]) {
                var Xe = i.sharedf[tn(u)];
                a.push(Xu(Xe, o, Re, i, r))
            } else {
                var pt = !1;
                for (c = 0; c != i.arrayf.length; ++c)
                    if (l = i.arrayf[c],
                    !(u.c < l[0].s.c || u.c > l[0].e.c) && !(u.r < l[0].s.r || u.r > l[0].e.r)) {
                        a.push(Xu(l[1], o, Re, i, r)),
                        pt = !0;
                        break
                    }
                pt || a.push(w[1])
            }
            break;
        case "PtgArray":
            a.push("{" + DG(w[1]) + "}");
            break;
        case "PtgMemArea":
            break;
        case "PtgAttrSpace":
        case "PtgAttrSpaceSemi":
            p = S;
            break;
        case "PtgTbl":
            break;
        case "PtgMemErr":
            break;
        case "PtgMissArg":
            a.push("");
            break;
        case "PtgAreaErr":
            a.push("#REF!");
            break;
        case "PtgAreaErr3d":
            a.push("#REF!");
            break;
        case "PtgList":
            a.push("Table" + w[1].idx + "[#" + w[1].rt + "]");
            break;
        case "PtgMemAreaN":
        case "PtgMemNoMemN":
        case "PtgAttrNoop":
        case "PtgSheet":
        case "PtgEndSheet":
            break;
        case "PtgMemFunc":
            break;
        case "PtgMemNoMem":
            break;
        case "PtgElfCol":
        case "PtgElfColS":
        case "PtgElfColSV":
        case "PtgElfColV":
        case "PtgElfLel":
        case "PtgElfRadical":
        case "PtgElfRadicalLel":
        case "PtgElfRadicalS":
        case "PtgElfRw":
        case "PtgElfRwV":
            throw new Error("Unsupported ELFs");
        case "PtgSxName":
            throw new Error("Unrecognized Formula Token: " + String(w));
        default:
            throw new Error("Unrecognized Formula Token: " + String(w))
        }
        var it = ["PtgAttrSpace", "PtgAttrSpaceSemi", "PtgAttrGoto"];
        if (r.biff != 3 && p >= 0 && it.indexOf(e[0][S][0]) == -1) {
            w = e[0][p];
            var fe = !0;
            switch (w[1][0]) {
            case 4:
                fe = !1;
            case 0:
                v = Ln(" ", w[1][1]);
                break;
            case 5:
                fe = !1;
            case 1:
                v = Ln("\r", w[1][1]);
                break;
            default:
                if (v = "",
                r.WTF)
                    throw new Error("Unexpected PtgAttrSpaceType " + w[1][0])
            }
            a.push((fe ? v : "") + a.pop() + (fe ? "" : v)),
            p = -1
        }
    }
    if (a.length > 1 && r.WTF)
        throw new Error("bad formula stack");
    return a[0]
}
function LG(e) {
    if (e == null) {
        var t = ce(8);
        return t.write_shift(1, 3),
        t.write_shift(1, 0),
        t.write_shift(2, 0),
        t.write_shift(2, 0),
        t.write_shift(2, 65535),
        t
    } else if (typeof e == "number")
        return n0(e);
    return n0(0)
}
function BG(e, t, n, i, r) {
    var s = i0(t, n, r)
      , o = LG(e.v)
      , a = ce(6)
      , c = 33;
    a.write_shift(2, c),
    a.write_shift(4, 0);
    for (var l = ce(e.bf.length), u = 0; u < e.bf.length; ++u)
        l[u] = e.bf[u];
    var h = $i([s, o, a, l]);
    return h
}
function v2(e, t, n) {
    var i = e.read_shift(4)
      , r = RG(e, i, n)
      , s = e.read_shift(4)
      , o = s > 0 ? IG(e, s, r, n) : null;
    return [r, o]
}
var UG = v2
  , _2 = v2
  , HG = v2
  , GG = v2
  , VG = {
    0: "BEEP",
    1: "OPEN",
    2: "OPEN.LINKS",
    3: "CLOSE.ALL",
    4: "SAVE",
    5: "SAVE.AS",
    6: "FILE.DELETE",
    7: "PAGE.SETUP",
    8: "PRINT",
    9: "PRINTER.SETUP",
    10: "QUIT",
    11: "NEW.WINDOW",
    12: "ARRANGE.ALL",
    13: "WINDOW.SIZE",
    14: "WINDOW.MOVE",
    15: "FULL",
    16: "CLOSE",
    17: "RUN",
    22: "SET.PRINT.AREA",
    23: "SET.PRINT.TITLES",
    24: "SET.PAGE.BREAK",
    25: "REMOVE.PAGE.BREAK",
    26: "FONT",
    27: "DISPLAY",
    28: "PROTECT.DOCUMENT",
    29: "PRECISION",
    30: "A1.R1C1",
    31: "CALCULATE.NOW",
    32: "CALCULATION",
    34: "DATA.FIND",
    35: "EXTRACT",
    36: "DATA.DELETE",
    37: "SET.DATABASE",
    38: "SET.CRITERIA",
    39: "SORT",
    40: "DATA.SERIES",
    41: "TABLE",
    42: "FORMAT.NUMBER",
    43: "ALIGNMENT",
    44: "STYLE",
    45: "BORDER",
    46: "CELL.PROTECTION",
    47: "COLUMN.WIDTH",
    48: "UNDO",
    49: "CUT",
    50: "COPY",
    51: "PASTE",
    52: "CLEAR",
    53: "PASTE.SPECIAL",
    54: "EDIT.DELETE",
    55: "INSERT",
    56: "FILL.RIGHT",
    57: "FILL.DOWN",
    61: "DEFINE.NAME",
    62: "CREATE.NAMES",
    63: "FORMULA.GOTO",
    64: "FORMULA.FIND",
    65: "SELECT.LAST.CELL",
    66: "SHOW.ACTIVE.CELL",
    67: "GALLERY.AREA",
    68: "GALLERY.BAR",
    69: "GALLERY.COLUMN",
    70: "GALLERY.LINE",
    71: "GALLERY.PIE",
    72: "GALLERY.SCATTER",
    73: "COMBINATION",
    74: "PREFERRED",
    75: "ADD.OVERLAY",
    76: "GRIDLINES",
    77: "SET.PREFERRED",
    78: "AXES",
    79: "LEGEND",
    80: "ATTACH.TEXT",
    81: "ADD.ARROW",
    82: "SELECT.CHART",
    83: "SELECT.PLOT.AREA",
    84: "PATTERNS",
    85: "MAIN.CHART",
    86: "OVERLAY",
    87: "SCALE",
    88: "FORMAT.LEGEND",
    89: "FORMAT.TEXT",
    90: "EDIT.REPEAT",
    91: "PARSE",
    92: "JUSTIFY",
    93: "HIDE",
    94: "UNHIDE",
    95: "WORKSPACE",
    96: "FORMULA",
    97: "FORMULA.FILL",
    98: "FORMULA.ARRAY",
    99: "DATA.FIND.NEXT",
    100: "DATA.FIND.PREV",
    101: "FORMULA.FIND.NEXT",
    102: "FORMULA.FIND.PREV",
    103: "ACTIVATE",
    104: "ACTIVATE.NEXT",
    105: "ACTIVATE.PREV",
    106: "UNLOCKED.NEXT",
    107: "UNLOCKED.PREV",
    108: "COPY.PICTURE",
    109: "SELECT",
    110: "DELETE.NAME",
    111: "DELETE.FORMAT",
    112: "VLINE",
    113: "HLINE",
    114: "VPAGE",
    115: "HPAGE",
    116: "VSCROLL",
    117: "HSCROLL",
    118: "ALERT",
    119: "NEW",
    120: "CANCEL.COPY",
    121: "SHOW.CLIPBOARD",
    122: "MESSAGE",
    124: "PASTE.LINK",
    125: "APP.ACTIVATE",
    126: "DELETE.ARROW",
    127: "ROW.HEIGHT",
    128: "FORMAT.MOVE",
    129: "FORMAT.SIZE",
    130: "FORMULA.REPLACE",
    131: "SEND.KEYS",
    132: "SELECT.SPECIAL",
    133: "APPLY.NAMES",
    134: "REPLACE.FONT",
    135: "FREEZE.PANES",
    136: "SHOW.INFO",
    137: "SPLIT",
    138: "ON.WINDOW",
    139: "ON.DATA",
    140: "DISABLE.INPUT",
    142: "OUTLINE",
    143: "LIST.NAMES",
    144: "FILE.CLOSE",
    145: "SAVE.WORKBOOK",
    146: "DATA.FORM",
    147: "COPY.CHART",
    148: "ON.TIME",
    149: "WAIT",
    150: "FORMAT.FONT",
    151: "FILL.UP",
    152: "FILL.LEFT",
    153: "DELETE.OVERLAY",
    155: "SHORT.MENUS",
    159: "SET.UPDATE.STATUS",
    161: "COLOR.PALETTE",
    162: "DELETE.STYLE",
    163: "WINDOW.RESTORE",
    164: "WINDOW.MAXIMIZE",
    166: "CHANGE.LINK",
    167: "CALCULATE.DOCUMENT",
    168: "ON.KEY",
    169: "APP.RESTORE",
    170: "APP.MOVE",
    171: "APP.SIZE",
    172: "APP.MINIMIZE",
    173: "APP.MAXIMIZE",
    174: "BRING.TO.FRONT",
    175: "SEND.TO.BACK",
    185: "MAIN.CHART.TYPE",
    186: "OVERLAY.CHART.TYPE",
    187: "SELECT.END",
    188: "OPEN.MAIL",
    189: "SEND.MAIL",
    190: "STANDARD.FONT",
    191: "CONSOLIDATE",
    192: "SORT.SPECIAL",
    193: "GALLERY.3D.AREA",
    194: "GALLERY.3D.COLUMN",
    195: "GALLERY.3D.LINE",
    196: "GALLERY.3D.PIE",
    197: "VIEW.3D",
    198: "GOAL.SEEK",
    199: "WORKGROUP",
    200: "FILL.GROUP",
    201: "UPDATE.LINK",
    202: "PROMOTE",
    203: "DEMOTE",
    204: "SHOW.DETAIL",
    206: "UNGROUP",
    207: "OBJECT.PROPERTIES",
    208: "SAVE.NEW.OBJECT",
    209: "SHARE",
    210: "SHARE.NAME",
    211: "DUPLICATE",
    212: "APPLY.STYLE",
    213: "ASSIGN.TO.OBJECT",
    214: "OBJECT.PROTECTION",
    215: "HIDE.OBJECT",
    216: "SET.EXTRACT",
    217: "CREATE.PUBLISHER",
    218: "SUBSCRIBE.TO",
    219: "ATTRIBUTES",
    220: "SHOW.TOOLBAR",
    222: "PRINT.PREVIEW",
    223: "EDIT.COLOR",
    224: "SHOW.LEVELS",
    225: "FORMAT.MAIN",
    226: "FORMAT.OVERLAY",
    227: "ON.RECALC",
    228: "EDIT.SERIES",
    229: "DEFINE.STYLE",
    240: "LINE.PRINT",
    243: "ENTER.DATA",
    249: "GALLERY.RADAR",
    250: "MERGE.STYLES",
    251: "EDITION.OPTIONS",
    252: "PASTE.PICTURE",
    253: "PASTE.PICTURE.LINK",
    254: "SPELLING",
    256: "ZOOM",
    259: "INSERT.OBJECT",
    260: "WINDOW.MINIMIZE",
    265: "SOUND.NOTE",
    266: "SOUND.PLAY",
    267: "FORMAT.SHAPE",
    268: "EXTEND.POLYGON",
    269: "FORMAT.AUTO",
    272: "GALLERY.3D.BAR",
    273: "GALLERY.3D.SURFACE",
    274: "FILL.AUTO",
    276: "CUSTOMIZE.TOOLBAR",
    277: "ADD.TOOL",
    278: "EDIT.OBJECT",
    279: "ON.DOUBLECLICK",
    280: "ON.ENTRY",
    281: "WORKBOOK.ADD",
    282: "WORKBOOK.MOVE",
    283: "WORKBOOK.COPY",
    284: "WORKBOOK.OPTIONS",
    285: "SAVE.WORKSPACE",
    288: "CHART.WIZARD",
    289: "DELETE.TOOL",
    290: "MOVE.TOOL",
    291: "WORKBOOK.SELECT",
    292: "WORKBOOK.ACTIVATE",
    293: "ASSIGN.TO.TOOL",
    295: "COPY.TOOL",
    296: "RESET.TOOL",
    297: "CONSTRAIN.NUMERIC",
    298: "PASTE.TOOL",
    302: "WORKBOOK.NEW",
    305: "SCENARIO.CELLS",
    306: "SCENARIO.DELETE",
    307: "SCENARIO.ADD",
    308: "SCENARIO.EDIT",
    309: "SCENARIO.SHOW",
    310: "SCENARIO.SHOW.NEXT",
    311: "SCENARIO.SUMMARY",
    312: "PIVOT.TABLE.WIZARD",
    313: "PIVOT.FIELD.PROPERTIES",
    314: "PIVOT.FIELD",
    315: "PIVOT.ITEM",
    316: "PIVOT.ADD.FIELDS",
    318: "OPTIONS.CALCULATION",
    319: "OPTIONS.EDIT",
    320: "OPTIONS.VIEW",
    321: "ADDIN.MANAGER",
    322: "MENU.EDITOR",
    323: "ATTACH.TOOLBARS",
    324: "VBAActivate",
    325: "OPTIONS.CHART",
    328: "VBA.INSERT.FILE",
    330: "VBA.PROCEDURE.DEFINITION",
    336: "ROUTING.SLIP",
    338: "ROUTE.DOCUMENT",
    339: "MAIL.LOGON",
    342: "INSERT.PICTURE",
    343: "EDIT.TOOL",
    344: "GALLERY.DOUGHNUT",
    350: "CHART.TREND",
    352: "PIVOT.ITEM.PROPERTIES",
    354: "WORKBOOK.INSERT",
    355: "OPTIONS.TRANSITION",
    356: "OPTIONS.GENERAL",
    370: "FILTER.ADVANCED",
    373: "MAIL.ADD.MAILER",
    374: "MAIL.DELETE.MAILER",
    375: "MAIL.REPLY",
    376: "MAIL.REPLY.ALL",
    377: "MAIL.FORWARD",
    378: "MAIL.NEXT.LETTER",
    379: "DATA.LABEL",
    380: "INSERT.TITLE",
    381: "FONT.PROPERTIES",
    382: "MACRO.OPTIONS",
    383: "WORKBOOK.HIDE",
    384: "WORKBOOK.UNHIDE",
    385: "WORKBOOK.DELETE",
    386: "WORKBOOK.NAME",
    388: "GALLERY.CUSTOM",
    390: "ADD.CHART.AUTOFORMAT",
    391: "DELETE.CHART.AUTOFORMAT",
    392: "CHART.ADD.DATA",
    393: "AUTO.OUTLINE",
    394: "TAB.ORDER",
    395: "SHOW.DIALOG",
    396: "SELECT.ALL",
    397: "UNGROUP.SHEETS",
    398: "SUBTOTAL.CREATE",
    399: "SUBTOTAL.REMOVE",
    400: "RENAME.OBJECT",
    412: "WORKBOOK.SCROLL",
    413: "WORKBOOK.NEXT",
    414: "WORKBOOK.PREV",
    415: "WORKBOOK.TAB.SPLIT",
    416: "FULL.SCREEN",
    417: "WORKBOOK.PROTECT",
    420: "SCROLLBAR.PROPERTIES",
    421: "PIVOT.SHOW.PAGES",
    422: "TEXT.TO.COLUMNS",
    423: "FORMAT.CHARTTYPE",
    424: "LINK.FORMAT",
    425: "TRACER.DISPLAY",
    430: "TRACER.NAVIGATE",
    431: "TRACER.CLEAR",
    432: "TRACER.ERROR",
    433: "PIVOT.FIELD.GROUP",
    434: "PIVOT.FIELD.UNGROUP",
    435: "CHECKBOX.PROPERTIES",
    436: "LABEL.PROPERTIES",
    437: "LISTBOX.PROPERTIES",
    438: "EDITBOX.PROPERTIES",
    439: "PIVOT.REFRESH",
    440: "LINK.COMBO",
    441: "OPEN.TEXT",
    442: "HIDE.DIALOG",
    443: "SET.DIALOG.FOCUS",
    444: "ENABLE.OBJECT",
    445: "PUSHBUTTON.PROPERTIES",
    446: "SET.DIALOG.DEFAULT",
    447: "FILTER",
    448: "FILTER.SHOW.ALL",
    449: "CLEAR.OUTLINE",
    450: "FUNCTION.WIZARD",
    451: "ADD.LIST.ITEM",
    452: "SET.LIST.ITEM",
    453: "REMOVE.LIST.ITEM",
    454: "SELECT.LIST.ITEM",
    455: "SET.CONTROL.VALUE",
    456: "SAVE.COPY.AS",
    458: "OPTIONS.LISTS.ADD",
    459: "OPTIONS.LISTS.DELETE",
    460: "SERIES.AXES",
    461: "SERIES.X",
    462: "SERIES.Y",
    463: "ERRORBAR.X",
    464: "ERRORBAR.Y",
    465: "FORMAT.CHART",
    466: "SERIES.ORDER",
    467: "MAIL.LOGOFF",
    468: "CLEAR.ROUTING.SLIP",
    469: "APP.ACTIVATE.MICROSOFT",
    470: "MAIL.EDIT.MAILER",
    471: "ON.SHEET",
    472: "STANDARD.WIDTH",
    473: "SCENARIO.MERGE",
    474: "SUMMARY.INFO",
    475: "FIND.FILE",
    476: "ACTIVE.CELL.FONT",
    477: "ENABLE.TIPWIZARD",
    478: "VBA.MAKE.ADDIN",
    480: "INSERTDATATABLE",
    481: "WORKGROUP.OPTIONS",
    482: "MAIL.SEND.MAILER",
    485: "AUTOCORRECT",
    489: "POST.DOCUMENT",
    491: "PICKLIST",
    493: "VIEW.SHOW",
    494: "VIEW.DEFINE",
    495: "VIEW.DELETE",
    509: "SHEET.BACKGROUND",
    510: "INSERT.MAP.OBJECT",
    511: "OPTIONS.MENONO",
    517: "MSOCHECKS",
    518: "NORMAL",
    519: "LAYOUT",
    520: "RM.PRINT.AREA",
    521: "CLEAR.PRINT.AREA",
    522: "ADD.PRINT.AREA",
    523: "MOVE.BRK",
    545: "HIDECURR.NOTE",
    546: "HIDEALL.NOTES",
    547: "DELETE.NOTE",
    548: "TRAVERSE.NOTES",
    549: "ACTIVATE.NOTES",
    620: "PROTECT.REVISIONS",
    621: "UNPROTECT.REVISIONS",
    647: "OPTIONS.ME",
    653: "WEB.PUBLISH",
    667: "NEWWEBQUERY",
    673: "PIVOT.TABLE.CHART",
    753: "OPTIONS.SAVE",
    755: "OPTIONS.SPELL",
    808: "HIDEALL.INKANNOTS"
}
  , FC = {
    0: "COUNT",
    1: "IF",
    2: "ISNA",
    3: "ISERROR",
    4: "SUM",
    5: "AVERAGE",
    6: "MIN",
    7: "MAX",
    8: "ROW",
    9: "COLUMN",
    10: "NA",
    11: "NPV",
    12: "STDEV",
    13: "DOLLAR",
    14: "FIXED",
    15: "SIN",
    16: "COS",
    17: "TAN",
    18: "ATAN",
    19: "PI",
    20: "SQRT",
    21: "EXP",
    22: "LN",
    23: "LOG10",
    24: "ABS",
    25: "INT",
    26: "SIGN",
    27: "ROUND",
    28: "LOOKUP",
    29: "INDEX",
    30: "REPT",
    31: "MID",
    32: "LEN",
    33: "VALUE",
    34: "TRUE",
    35: "FALSE",
    36: "AND",
    37: "OR",
    38: "NOT",
    39: "MOD",
    40: "DCOUNT",
    41: "DSUM",
    42: "DAVERAGE",
    43: "DMIN",
    44: "DMAX",
    45: "DSTDEV",
    46: "VAR",
    47: "DVAR",
    48: "TEXT",
    49: "LINEST",
    50: "TREND",
    51: "LOGEST",
    52: "GROWTH",
    53: "GOTO",
    54: "HALT",
    55: "RETURN",
    56: "PV",
    57: "FV",
    58: "NPER",
    59: "PMT",
    60: "RATE",
    61: "MIRR",
    62: "IRR",
    63: "RAND",
    64: "MATCH",
    65: "DATE",
    66: "TIME",
    67: "DAY",
    68: "MONTH",
    69: "YEAR",
    70: "WEEKDAY",
    71: "HOUR",
    72: "MINUTE",
    73: "SECOND",
    74: "NOW",
    75: "AREAS",
    76: "ROWS",
    77: "COLUMNS",
    78: "OFFSET",
    79: "ABSREF",
    80: "RELREF",
    81: "ARGUMENT",
    82: "SEARCH",
    83: "TRANSPOSE",
    84: "ERROR",
    85: "STEP",
    86: "TYPE",
    87: "ECHO",
    88: "SET.NAME",
    89: "CALLER",
    90: "DEREF",
    91: "WINDOWS",
    92: "SERIES",
    93: "DOCUMENTS",
    94: "ACTIVE.CELL",
    95: "SELECTION",
    96: "RESULT",
    97: "ATAN2",
    98: "ASIN",
    99: "ACOS",
    100: "CHOOSE",
    101: "HLOOKUP",
    102: "VLOOKUP",
    103: "LINKS",
    104: "INPUT",
    105: "ISREF",
    106: "GET.FORMULA",
    107: "GET.NAME",
    108: "SET.VALUE",
    109: "LOG",
    110: "EXEC",
    111: "CHAR",
    112: "LOWER",
    113: "UPPER",
    114: "PROPER",
    115: "LEFT",
    116: "RIGHT",
    117: "EXACT",
    118: "TRIM",
    119: "REPLACE",
    120: "SUBSTITUTE",
    121: "CODE",
    122: "NAMES",
    123: "DIRECTORY",
    124: "FIND",
    125: "CELL",
    126: "ISERR",
    127: "ISTEXT",
    128: "ISNUMBER",
    129: "ISBLANK",
    130: "T",
    131: "N",
    132: "FOPEN",
    133: "FCLOSE",
    134: "FSIZE",
    135: "FREADLN",
    136: "FREAD",
    137: "FWRITELN",
    138: "FWRITE",
    139: "FPOS",
    140: "DATEVALUE",
    141: "TIMEVALUE",
    142: "SLN",
    143: "SYD",
    144: "DDB",
    145: "GET.DEF",
    146: "REFTEXT",
    147: "TEXTREF",
    148: "INDIRECT",
    149: "REGISTER",
    150: "CALL",
    151: "ADD.BAR",
    152: "ADD.MENU",
    153: "ADD.COMMAND",
    154: "ENABLE.COMMAND",
    155: "CHECK.COMMAND",
    156: "RENAME.COMMAND",
    157: "SHOW.BAR",
    158: "DELETE.MENU",
    159: "DELETE.COMMAND",
    160: "GET.CHART.ITEM",
    161: "DIALOG.BOX",
    162: "CLEAN",
    163: "MDETERM",
    164: "MINVERSE",
    165: "MMULT",
    166: "FILES",
    167: "IPMT",
    168: "PPMT",
    169: "COUNTA",
    170: "CANCEL.KEY",
    171: "FOR",
    172: "WHILE",
    173: "BREAK",
    174: "NEXT",
    175: "INITIATE",
    176: "REQUEST",
    177: "POKE",
    178: "EXECUTE",
    179: "TERMINATE",
    180: "RESTART",
    181: "HELP",
    182: "GET.BAR",
    183: "PRODUCT",
    184: "FACT",
    185: "GET.CELL",
    186: "GET.WORKSPACE",
    187: "GET.WINDOW",
    188: "GET.DOCUMENT",
    189: "DPRODUCT",
    190: "ISNONTEXT",
    191: "GET.NOTE",
    192: "NOTE",
    193: "STDEVP",
    194: "VARP",
    195: "DSTDEVP",
    196: "DVARP",
    197: "TRUNC",
    198: "ISLOGICAL",
    199: "DCOUNTA",
    200: "DELETE.BAR",
    201: "UNREGISTER",
    204: "USDOLLAR",
    205: "FINDB",
    206: "SEARCHB",
    207: "REPLACEB",
    208: "LEFTB",
    209: "RIGHTB",
    210: "MIDB",
    211: "LENB",
    212: "ROUNDUP",
    213: "ROUNDDOWN",
    214: "ASC",
    215: "DBCS",
    216: "RANK",
    219: "ADDRESS",
    220: "DAYS360",
    221: "TODAY",
    222: "VDB",
    223: "ELSE",
    224: "ELSE.IF",
    225: "END.IF",
    226: "FOR.CELL",
    227: "MEDIAN",
    228: "SUMPRODUCT",
    229: "SINH",
    230: "COSH",
    231: "TANH",
    232: "ASINH",
    233: "ACOSH",
    234: "ATANH",
    235: "DGET",
    236: "CREATE.OBJECT",
    237: "VOLATILE",
    238: "LAST.ERROR",
    239: "CUSTOM.UNDO",
    240: "CUSTOM.REPEAT",
    241: "FORMULA.CONVERT",
    242: "GET.LINK.INFO",
    243: "TEXT.BOX",
    244: "INFO",
    245: "GROUP",
    246: "GET.OBJECT",
    247: "DB",
    248: "PAUSE",
    251: "RESUME",
    252: "FREQUENCY",
    253: "ADD.TOOLBAR",
    254: "DELETE.TOOLBAR",
    255: "User",
    256: "RESET.TOOLBAR",
    257: "EVALUATE",
    258: "GET.TOOLBAR",
    259: "GET.TOOL",
    260: "SPELLING.CHECK",
    261: "ERROR.TYPE",
    262: "APP.TITLE",
    263: "WINDOW.TITLE",
    264: "SAVE.TOOLBAR",
    265: "ENABLE.TOOL",
    266: "PRESS.TOOL",
    267: "REGISTER.ID",
    268: "GET.WORKBOOK",
    269: "AVEDEV",
    270: "BETADIST",
    271: "GAMMALN",
    272: "BETAINV",
    273: "BINOMDIST",
    274: "CHIDIST",
    275: "CHIINV",
    276: "COMBIN",
    277: "CONFIDENCE",
    278: "CRITBINOM",
    279: "EVEN",
    280: "EXPONDIST",
    281: "FDIST",
    282: "FINV",
    283: "FISHER",
    284: "FISHERINV",
    285: "FLOOR",
    286: "GAMMADIST",
    287: "GAMMAINV",
    288: "CEILING",
    289: "HYPGEOMDIST",
    290: "LOGNORMDIST",
    291: "LOGINV",
    292: "NEGBINOMDIST",
    293: "NORMDIST",
    294: "NORMSDIST",
    295: "NORMINV",
    296: "NORMSINV",
    297: "STANDARDIZE",
    298: "ODD",
    299: "PERMUT",
    300: "POISSON",
    301: "TDIST",
    302: "WEIBULL",
    303: "SUMXMY2",
    304: "SUMX2MY2",
    305: "SUMX2PY2",
    306: "CHITEST",
    307: "CORREL",
    308: "COVAR",
    309: "FORECAST",
    310: "FTEST",
    311: "INTERCEPT",
    312: "PEARSON",
    313: "RSQ",
    314: "STEYX",
    315: "SLOPE",
    316: "TTEST",
    317: "PROB",
    318: "DEVSQ",
    319: "GEOMEAN",
    320: "HARMEAN",
    321: "SUMSQ",
    322: "KURT",
    323: "SKEW",
    324: "ZTEST",
    325: "LARGE",
    326: "SMALL",
    327: "QUARTILE",
    328: "PERCENTILE",
    329: "PERCENTRANK",
    330: "MODE",
    331: "TRIMMEAN",
    332: "TINV",
    334: "MOVIE.COMMAND",
    335: "GET.MOVIE",
    336: "CONCATENATE",
    337: "POWER",
    338: "PIVOT.ADD.DATA",
    339: "GET.PIVOT.TABLE",
    340: "GET.PIVOT.FIELD",
    341: "GET.PIVOT.ITEM",
    342: "RADIANS",
    343: "DEGREES",
    344: "SUBTOTAL",
    345: "SUMIF",
    346: "COUNTIF",
    347: "COUNTBLANK",
    348: "SCENARIO.GET",
    349: "OPTIONS.LISTS.GET",
    350: "ISPMT",
    351: "DATEDIF",
    352: "DATESTRING",
    353: "NUMBERSTRING",
    354: "ROMAN",
    355: "OPEN.DIALOG",
    356: "SAVE.DIALOG",
    357: "VIEW.GET",
    358: "GETPIVOTDATA",
    359: "HYPERLINK",
    360: "PHONETIC",
    361: "AVERAGEA",
    362: "MAXA",
    363: "MINA",
    364: "STDEVPA",
    365: "VARPA",
    366: "STDEVA",
    367: "VARA",
    368: "BAHTTEXT",
    369: "THAIDAYOFWEEK",
    370: "THAIDIGIT",
    371: "THAIMONTHOFYEAR",
    372: "THAINUMSOUND",
    373: "THAINUMSTRING",
    374: "THAISTRINGLENGTH",
    375: "ISTHAIDIGIT",
    376: "ROUNDBAHTDOWN",
    377: "ROUNDBAHTUP",
    378: "THAIYEAR",
    379: "RTD",
    380: "CUBEVALUE",
    381: "CUBEMEMBER",
    382: "CUBEMEMBERPROPERTY",
    383: "CUBERANKEDMEMBER",
    384: "HEX2BIN",
    385: "HEX2DEC",
    386: "HEX2OCT",
    387: "DEC2BIN",
    388: "DEC2HEX",
    389: "DEC2OCT",
    390: "OCT2BIN",
    391: "OCT2HEX",
    392: "OCT2DEC",
    393: "BIN2DEC",
    394: "BIN2OCT",
    395: "BIN2HEX",
    396: "IMSUB",
    397: "IMDIV",
    398: "IMPOWER",
    399: "IMABS",
    400: "IMSQRT",
    401: "IMLN",
    402: "IMLOG2",
    403: "IMLOG10",
    404: "IMSIN",
    405: "IMCOS",
    406: "IMEXP",
    407: "IMARGUMENT",
    408: "IMCONJUGATE",
    409: "IMAGINARY",
    410: "IMREAL",
    411: "COMPLEX",
    412: "IMSUM",
    413: "IMPRODUCT",
    414: "SERIESSUM",
    415: "FACTDOUBLE",
    416: "SQRTPI",
    417: "QUOTIENT",
    418: "DELTA",
    419: "GESTEP",
    420: "ISEVEN",
    421: "ISODD",
    422: "MROUND",
    423: "ERF",
    424: "ERFC",
    425: "BESSELJ",
    426: "BESSELK",
    427: "BESSELY",
    428: "BESSELI",
    429: "XIRR",
    430: "XNPV",
    431: "PRICEMAT",
    432: "YIELDMAT",
    433: "INTRATE",
    434: "RECEIVED",
    435: "DISC",
    436: "PRICEDISC",
    437: "YIELDDISC",
    438: "TBILLEQ",
    439: "TBILLPRICE",
    440: "TBILLYIELD",
    441: "PRICE",
    442: "YIELD",
    443: "DOLLARDE",
    444: "DOLLARFR",
    445: "NOMINAL",
    446: "EFFECT",
    447: "CUMPRINC",
    448: "CUMIPMT",
    449: "EDATE",
    450: "EOMONTH",
    451: "YEARFRAC",
    452: "COUPDAYBS",
    453: "COUPDAYS",
    454: "COUPDAYSNC",
    455: "COUPNCD",
    456: "COUPNUM",
    457: "COUPPCD",
    458: "DURATION",
    459: "MDURATION",
    460: "ODDLPRICE",
    461: "ODDLYIELD",
    462: "ODDFPRICE",
    463: "ODDFYIELD",
    464: "RANDBETWEEN",
    465: "WEEKNUM",
    466: "AMORDEGRC",
    467: "AMORLINC",
    468: "CONVERT",
    724: "SHEETJS",
    469: "ACCRINT",
    470: "ACCRINTM",
    471: "WORKDAY",
    472: "NETWORKDAYS",
    473: "GCD",
    474: "MULTINOMIAL",
    475: "LCM",
    476: "FVSCHEDULE",
    477: "CUBEKPIMEMBER",
    478: "CUBESET",
    479: "CUBESETCOUNT",
    480: "IFERROR",
    481: "COUNTIFS",
    482: "SUMIFS",
    483: "AVERAGEIF",
    484: "AVERAGEIFS"
}
  , $G = {
    2: 1,
    3: 1,
    10: 0,
    15: 1,
    16: 1,
    17: 1,
    18: 1,
    19: 0,
    20: 1,
    21: 1,
    22: 1,
    23: 1,
    24: 1,
    25: 1,
    26: 1,
    27: 2,
    30: 2,
    31: 3,
    32: 1,
    33: 1,
    34: 0,
    35: 0,
    38: 1,
    39: 2,
    40: 3,
    41: 3,
    42: 3,
    43: 3,
    44: 3,
    45: 3,
    47: 3,
    48: 2,
    53: 1,
    61: 3,
    63: 0,
    65: 3,
    66: 3,
    67: 1,
    68: 1,
    69: 1,
    70: 1,
    71: 1,
    72: 1,
    73: 1,
    74: 0,
    75: 1,
    76: 1,
    77: 1,
    79: 2,
    80: 2,
    83: 1,
    85: 0,
    86: 1,
    89: 0,
    90: 1,
    94: 0,
    95: 0,
    97: 2,
    98: 1,
    99: 1,
    101: 3,
    102: 3,
    105: 1,
    106: 1,
    108: 2,
    111: 1,
    112: 1,
    113: 1,
    114: 1,
    117: 2,
    118: 1,
    119: 4,
    121: 1,
    126: 1,
    127: 1,
    128: 1,
    129: 1,
    130: 1,
    131: 1,
    133: 1,
    134: 1,
    135: 1,
    136: 2,
    137: 2,
    138: 2,
    140: 1,
    141: 1,
    142: 3,
    143: 4,
    144: 4,
    161: 1,
    162: 1,
    163: 1,
    164: 1,
    165: 2,
    172: 1,
    175: 2,
    176: 2,
    177: 3,
    178: 2,
    179: 1,
    184: 1,
    186: 1,
    189: 3,
    190: 1,
    195: 3,
    196: 3,
    197: 1,
    198: 1,
    199: 3,
    201: 1,
    207: 4,
    210: 3,
    211: 1,
    212: 2,
    213: 2,
    214: 1,
    215: 1,
    225: 0,
    229: 1,
    230: 1,
    231: 1,
    232: 1,
    233: 1,
    234: 1,
    235: 3,
    244: 1,
    247: 4,
    252: 2,
    257: 1,
    261: 1,
    271: 1,
    273: 4,
    274: 2,
    275: 2,
    276: 2,
    277: 3,
    278: 3,
    279: 1,
    280: 3,
    281: 3,
    282: 3,
    283: 1,
    284: 1,
    285: 2,
    286: 4,
    287: 3,
    288: 2,
    289: 4,
    290: 3,
    291: 3,
    292: 3,
    293: 4,
    294: 1,
    295: 3,
    296: 1,
    297: 3,
    298: 1,
    299: 2,
    300: 3,
    301: 3,
    302: 4,
    303: 2,
    304: 2,
    305: 2,
    306: 2,
    307: 2,
    308: 2,
    309: 3,
    310: 2,
    311: 2,
    312: 2,
    313: 2,
    314: 2,
    315: 2,
    316: 4,
    325: 2,
    326: 2,
    327: 2,
    328: 2,
    331: 2,
    332: 2,
    337: 2,
    342: 1,
    343: 1,
    346: 2,
    347: 1,
    350: 4,
    351: 3,
    352: 1,
    353: 2,
    360: 1,
    368: 1,
    369: 1,
    370: 1,
    371: 1,
    372: 1,
    373: 1,
    374: 1,
    375: 1,
    376: 1,
    377: 1,
    378: 1,
    382: 3,
    385: 1,
    392: 1,
    393: 1,
    396: 2,
    397: 2,
    398: 2,
    399: 1,
    400: 1,
    401: 1,
    402: 1,
    403: 1,
    404: 1,
    405: 1,
    406: 1,
    407: 1,
    408: 1,
    409: 1,
    410: 1,
    414: 4,
    415: 1,
    416: 1,
    417: 2,
    420: 1,
    421: 1,
    422: 2,
    424: 1,
    425: 2,
    426: 2,
    427: 2,
    428: 2,
    430: 3,
    438: 3,
    439: 3,
    440: 3,
    443: 2,
    444: 2,
    445: 2,
    446: 2,
    447: 6,
    448: 6,
    449: 2,
    450: 2,
    464: 2,
    468: 3,
    476: 2,
    479: 1,
    480: 2,
    65535: 0
};
function WG(e) {
    var t = "of:=" + e.replace(G7, "$1[.$2$3$4$5]").replace(/\]:\[/g, ":");
    return t.replace(/;/g, "|").replace(/,/g, ";")
}
function jG(e) {
    return e.replace(/\./, "!")
}
var b1 = typeof Map < "u";
function W7(e, t, n) {
    var i = 0
      , r = e.length;
    if (n) {
        if (b1 ? n.has(t) : Object.prototype.hasOwnProperty.call(n, t)) {
            for (var s = b1 ? n.get(t) : n[t]; i < s.length; ++i)
                if (e[s[i]].t === t)
                    return e.Count++,
                    s[i]
        }
    } else
        for (; i < r; ++i)
            if (e[i].t === t)
                return e.Count++,
                i;
    return e[r] = {
        t
    },
    e.Count++,
    e.Unique++,
    n && (b1 ? (n.has(t) || n.set(t, []),
    n.get(t).push(r)) : (Object.prototype.hasOwnProperty.call(n, t) || (n[t] = []),
    n[t].push(r))),
    r
}
function y2(e, t) {
    var n = {
        min: e + 1,
        max: e + 1
    }
      , i = -1;
    return t.MDW && (La = t.MDW),
    t.width != null ? n.customWidth = 1 : t.wpx != null ? i = a2(t.wpx) : t.wch != null && (i = t.wch),
    i > -1 ? (n.width = b7(i),
    n.customWidth = 1) : t.width != null && (n.width = t.width),
    t.hidden && (n.hidden = !0),
    t.level != null && (n.outlineLevel = n.level = t.level),
    n
}
function LC(e, t) {
    if (e) {
        var n = [.7, .7, .75, .75, .3, .3];
        t == "xlml" && (n = [1, 1, 1, 1, .5, .5]),
        e.left == null && (e.left = n[0]),
        e.right == null && (e.right = n[1]),
        e.top == null && (e.top = n[2]),
        e.bottom == null && (e.bottom = n[3]),
        e.header == null && (e.header = n[4]),
        e.footer == null && (e.footer = n[5])
    }
}
function jc(e, t, n) {
    var i = n.revssf[t.z != null ? t.z : "General"]
      , r = 60
      , s = e.length;
    if (i == null && n.ssf) {
        for (; r < 392; ++r)
            if (n.ssf[r] == null) {
                Lw(t.z, r),
                n.ssf[r] = t.z,
                n.revssf[t.z] = i = r;
                break
            }
    }
    for (r = 0; r != s; ++r)
        if (e[r].numFmtId === i)
            return r;
    return e[s] = {
        numFmtId: i,
        fontId: 0,
        fillId: 0,
        borderId: 0,
        xfId: 0,
        applyNumberFormat: 1
    },
    s
}
function qG(e, t, n) {
    if (e && e["!ref"]) {
        var i = yn(e["!ref"]);
        if (i.e.c < i.s.c || i.e.r < i.s.r)
            throw new Error("Bad range (" + n + "): " + e["!ref"])
    }
}
function zG(e) {
    if (e.length === 0)
        return "";
    for (var t = '<mergeCells count="' + e.length + '">', n = 0; n != e.length; ++n)
        t += '<mergeCell ref="' + ii(e[n]) + '"/>';
    return t + "</mergeCells>"
}
function XG(e, t, n, i, r) {
    var s = !1
      , o = {}
      , a = null;
    if (i.bookType !== "xlsx" && t.vbaraw) {
        var c = t.SheetNames[n];
        try {
            t.Workbook && (c = t.Workbook.Sheets[n].CodeName || c)
        } catch {}
        s = !0,
        o.codeName = Da(en(c))
    }
    if (e && e["!outline"]) {
        var l = {
            summaryBelow: 1,
            summaryRight: 1
        };
        e["!outline"].above && (l.summaryBelow = 0),
        e["!outline"].left && (l.summaryRight = 0),
        a = (a || "") + Me("outlinePr", null, l)
    }
    !s && !a || (r[r.length] = Me("sheetPr", a, o))
}
var KG = ["objects", "scenarios", "selectLockedCells", "selectUnlockedCells"]
  , YG = ["formatColumns", "formatRows", "formatCells", "insertColumns", "insertRows", "insertHyperlinks", "deleteColumns", "deleteRows", "sort", "autoFilter", "pivotTables"];
function QG(e) {
    var t = {
        sheet: 1
    };
    return KG.forEach(function(n) {
        e[n] != null && e[n] && (t[n] = "1")
    }),
    YG.forEach(function(n) {
        e[n] != null && !e[n] && (t[n] = "0")
    }),
    e.password && (t.password = SC(e.password).toString(16).toUpperCase()),
    Me("sheetProtection", null, t)
}
function JG(e) {
    return LC(e),
    Me("pageMargins", null, e)
}
function ZG(e, t) {
    for (var n = ["<cols>"], i, r = 0; r != t.length; ++r)
        (i = t[r]) && (n[n.length] = Me("col", null, y2(r, i)));
    return n[n.length] = "</cols>",
    n.join("")
}
function eV(e, t, n, i) {
    var r = typeof e.ref == "string" ? e.ref : ii(e.ref);
    n.Workbook || (n.Workbook = {
        Sheets: []
    }),
    n.Workbook.Names || (n.Workbook.Names = []);
    var s = n.Workbook.Names
      , o = xs(r);
    o.s.r == o.e.r && (o.e.r = xs(t["!ref"]).e.r,
    r = ii(o));
    for (var a = 0; a < s.length; ++a) {
        var c = s[a];
        if (c.Name == "_xlnm._FilterDatabase" && c.Sheet == i) {
            c.Ref = "'" + n.SheetNames[i] + "'!" + r;
            break
        }
    }
    return a == s.length && s.push({
        Name: "_xlnm._FilterDatabase",
        Sheet: i,
        Ref: "'" + n.SheetNames[i] + "'!" + r
    }),
    Me("autoFilter", null, {
        ref: r
    })
}
function tV(e, t, n, i) {
    var r = {
        workbookViewId: "0"
    };
    return (((i || {}).Workbook || {}).Views || [])[0] && (r.rightToLeft = i.Workbook.Views[0].RTL ? "1" : "0"),
    Me("sheetViews", Me("sheetView", null, r), {})
}
function nV(e, t, n, i) {
    if (e.c && n["!comments"].push([t, e.c]),
    e.v === void 0 && typeof e.f != "string" || e.t === "z" && !e.f)
        return "";
    var r = ""
      , s = e.t
      , o = e.v;
    if (e.t !== "z")
        switch (e.t) {
        case "b":
            r = e.v ? "1" : "0";
            break;
        case "n":
            r = "" + e.v;
            break;
        case "e":
            r = A1[e.v];
            break;
        case "d":
            i && i.cellDates ? r = Mr(e.v, -1).toISOString() : (e = Jr(e),
            e.t = "n",
            r = "" + (e.v = Qr(Mr(e.v)))),
            typeof e.z > "u" && (e.z = Bn[14]);
            break;
        default:
            r = e.v;
            break
        }
    var a = Wi("v", en(r))
      , c = {
        r: t
    }
      , l = jc(i.cellXfs, e, i);
    switch (l !== 0 && (c.s = l),
    e.t) {
    case "n":
        break;
    case "d":
        c.t = "d";
        break;
    case "b":
        c.t = "b";
        break;
    case "e":
        c.t = "e";
        break;
    case "z":
        break;
    default:
        if (e.v == null) {
            delete e.t;
            break
        }
        if (e.v.length > 32767)
            throw new Error("Text length must not exceed 32767 characters");
        if (i && i.bookSST) {
            a = Wi("v", "" + W7(i.Strings, e.v, i.revStrings)),
            c.t = "s";
            break
        }
        c.t = "str";
        break
    }
    if (e.t != s && (e.t = s,
    e.v = o),
    typeof e.f == "string" && e.f) {
        var u = e.F && e.F.slice(0, t.length) == t ? {
            t: "array",
            ref: e.F
        } : null;
        a = Me("f", en(e.f), u) + (e.v != null ? a : "")
    }
    return e.l && n["!links"].push([t, e.l]),
    e.D && (c.cm = 1),
    Me("c", a, c)
}
function iV(e, t, n, i) {
    var r = [], s = [], o = yn(e["!ref"]), a = "", c, l = "", u = [], h = 0, d = 0, f = e["!rows"], g = Array.isArray(e), p = {
        r: l
    }, v, S = -1;
    for (d = o.s.c; d <= o.e.c; ++d)
        u[d] = cr(d);
    for (h = o.s.r; h <= o.e.r; ++h) {
        for (s = [],
        l = ji(h),
        d = o.s.c; d <= o.e.c; ++d) {
            c = u[d] + l;
            var x = g ? (e[h] || [])[d] : e[c];
            x !== void 0 && (a = nV(x, c, e, t, n, i)) != null && s.push(a)
        }
        (s.length > 0 || f && f[h]) && (p = {
            r: l
        },
        f && f[h] && (v = f[h],
        v.hidden && (p.hidden = 1),
        S = -1,
        v.hpx ? S = c2(v.hpx) : v.hpt && (S = v.hpt),
        S > -1 && (p.ht = S,
        p.customHeight = 1),
        v.level && (p.outlineLevel = v.level)),
        r[r.length] = Me("row", s.join(""), p))
    }
    if (f)
        for (; h < f.length; ++h)
            f && f[h] && (p = {
                r: h + 1
            },
            v = f[h],
            v.hidden && (p.hidden = 1),
            S = -1,
            v.hpx ? S = c2(v.hpx) : v.hpt && (S = v.hpt),
            S > -1 && (p.ht = S,
            p.customHeight = 1),
            v.level && (p.outlineLevel = v.level),
            r[r.length] = Me("row", "", p));
    return r.join("")
}
function BC(e, t, n, i) {
    var r = [ri, Me("worksheet", null, {
        xmlns: Ku[0],
        "xmlns:r": Ai.r
    })]
      , s = n.SheetNames[e]
      , o = 0
      , a = ""
      , c = n.Sheets[s];
    c == null && (c = {});
    var l = c["!ref"] || "A1"
      , u = yn(l);
    if (u.e.c > 16383 || u.e.r > 1048575) {
        if (t.WTF)
            throw new Error("Range " + l + " exceeds format limit A1:XFD1048576");
        u.e.c = Math.min(u.e.c, 16383),
        u.e.r = Math.min(u.e.c, 1048575),
        l = ii(u)
    }
    i || (i = {}),
    c["!comments"] = [];
    var h = [];
    XG(c, n, e, t, r),
    r[r.length] = Me("dimension", null, {
        ref: l
    }),
    r[r.length] = tV(c, t, e, n),
    t.sheetFormat && (r[r.length] = Me("sheetFormatPr", null, {
        defaultRowHeight: t.sheetFormat.defaultRowHeight || "16",
        baseColWidth: t.sheetFormat.baseColWidth || "10",
        outlineLevelRow: t.sheetFormat.outlineLevelRow || "7"
    })),
    c["!cols"] != null && c["!cols"].length > 0 && (r[r.length] = ZG(c, c["!cols"])),
    r[o = r.length] = "<sheetData/>",
    c["!links"] = [],
    c["!ref"] != null && (a = iV(c, t, e, n, i),
    a.length > 0 && (r[r.length] = a)),
    r.length > o + 1 && (r[r.length] = "</sheetData>",
    r[o] = r[o].replace("/>", ">")),
    c["!protect"] && (r[r.length] = QG(c["!protect"])),
    c["!autofilter"] != null && (r[r.length] = eV(c["!autofilter"], c, n, e)),
    c["!merges"] != null && c["!merges"].length > 0 && (r[r.length] = zG(c["!merges"]));
    var d = -1, f, g = -1;
    return c["!links"].length > 0 && (r[r.length] = "<hyperlinks>",
    c["!links"].forEach(function(p) {
        p[1].Target && (f = {
            ref: p[0]
        },
        p[1].Target.charAt(0) != "#" && (g = Zt(i, -1, en(p[1].Target).replace(/#.*$/, ""), qt.HLINK),
        f["r:id"] = "rId" + g),
        (d = p[1].Target.indexOf("#")) > -1 && (f.location = en(p[1].Target.slice(d + 1))),
        p[1].Tooltip && (f.tooltip = en(p[1].Tooltip)),
        r[r.length] = Me("hyperlink", null, f))
    }),
    r[r.length] = "</hyperlinks>"),
    delete c["!links"],
    c["!margins"] != null && (r[r.length] = JG(c["!margins"])),
    (!t || t.ignoreEC || t.ignoreEC == null) && (r[r.length] = Wi("ignoredErrors", Me("ignoredError", null, {
        numberStoredAsText: 1,
        sqref: l
    }))),
    h.length > 0 && (g = Zt(i, -1, "../drawings/drawing" + (e + 1) + ".xml", qt.DRAW),
    r[r.length] = Me("drawing", null, {
        "r:id": "rId" + g
    }),
    c["!drawing"] = h),
    c["!comments"].length > 0 && (g = Zt(i, -1, "../drawings/vmlDrawing" + (e + 1) + ".vml", qt.VML),
    r[r.length] = Me("legacyDrawing", null, {
        "r:id": "rId" + g
    }),
    c["!legacy"] = g),
    r.length > 1 && (r[r.length] = "</worksheet>",
    r[1] = r[1].replace("/>", ">")),
    r.join("")
}
function rV(e, t) {
    var n = {}
      , i = e.l + t;
    n.r = e.read_shift(4),
    e.l += 4;
    var r = e.read_shift(2);
    e.l += 1;
    var s = e.read_shift(1);
    return e.l = i,
    s & 7 && (n.level = s & 7),
    s & 16 && (n.hidden = !0),
    s & 32 && (n.hpt = r / 20),
    n
}
function sV(e, t, n) {
    var i = ce(145)
      , r = (n["!rows"] || [])[e] || {};
    i.write_shift(4, e),
    i.write_shift(4, 0);
    var s = 320;
    r.hpx ? s = c2(r.hpx) * 20 : r.hpt && (s = r.hpt * 20),
    i.write_shift(2, s),
    i.write_shift(1, 0);
    var o = 0;
    r.level && (o |= r.level),
    r.hidden && (o |= 16),
    (r.hpx || r.hpt) && (o |= 32),
    i.write_shift(1, o),
    i.write_shift(1, 0);
    var a = 0
      , c = i.l;
    i.l += 4;
    for (var l = {
        r: e,
        c: 0
    }, u = 0; u < 16; ++u)
        if (!(t.s.c > u + 1 << 10 || t.e.c < u << 10)) {
            for (var h = -1, d = -1, f = u << 10; f < u + 1 << 10; ++f) {
                l.c = f;
                var g = Array.isArray(n) ? (n[l.r] || [])[l.c] : n[tn(l)];
                g && (h < 0 && (h = f),
                d = f)
            }
            h < 0 || (++a,
            i.write_shift(4, h),
            i.write_shift(4, d))
        }
    var p = i.l;
    return i.l = c,
    i.write_shift(4, a),
    i.l = p,
    i.length > i.l ? i.slice(0, i.l) : i
}
function oV(e, t, n, i) {
    var r = sV(i, n, t);
    (r.length > 17 || (t["!rows"] || [])[i]) && pe(e, 0, r)
}
var aV = c0
  , cV = Ju;
function lV() {}
function uV(e, t) {
    var n = {}
      , i = e[e.l];
    return ++e.l,
    n.above = !(i & 64),
    n.left = !(i & 128),
    e.l += 18,
    n.name = SB(e, t - 19),
    n
}
function hV(e, t, n) {
    n == null && (n = ce(84 + 4 * e.length));
    var i = 192;
    t && (t.above && (i &= -65),
    t.left && (i &= -129)),
    n.write_shift(1, i);
    for (var r = 1; r < 3; ++r)
        n.write_shift(1, 0);
    return r2({
        auto: 1
    }, n),
    n.write_shift(-4, -1),
    n.write_shift(-4, -1),
    Zw(e, n),
    n.slice(0, n.l)
}
function dV(e) {
    var t = Fs(e);
    return [t]
}
function fV(e, t, n) {
    return n == null && (n = ce(8)),
    s0(t, n)
}
function pV(e) {
    var t = o0(e);
    return [t]
}
function gV(e, t, n) {
    return n == null && (n = ce(4)),
    a0(t, n)
}
function mV(e) {
    var t = Fs(e)
      , n = e.read_shift(1);
    return [t, n, "b"]
}
function vV(e, t, n) {
    return n == null && (n = ce(9)),
    s0(t, n),
    n.write_shift(1, e.v ? 1 : 0),
    n
}
function _V(e) {
    var t = o0(e)
      , n = e.read_shift(1);
    return [t, n, "b"]
}
function yV(e, t, n) {
    return n == null && (n = ce(5)),
    a0(t, n),
    n.write_shift(1, e.v ? 1 : 0),
    n
}
function SV(e) {
    var t = Fs(e)
      , n = e.read_shift(1);
    return [t, n, "e"]
}
function bV(e, t, n) {
    return n == null && (n = ce(9)),
    s0(t, n),
    n.write_shift(1, e.v),
    n
}
function xV(e) {
    var t = o0(e)
      , n = e.read_shift(1);
    return [t, n, "e"]
}
function wV(e, t, n) {
    return n == null && (n = ce(8)),
    a0(t, n),
    n.write_shift(1, e.v),
    n.write_shift(2, 0),
    n.write_shift(1, 0),
    n
}
function CV(e) {
    var t = Fs(e)
      , n = e.read_shift(4);
    return [t, n, "s"]
}
function EV(e, t, n) {
    return n == null && (n = ce(12)),
    s0(t, n),
    n.write_shift(4, t.v),
    n
}
function TV(e) {
    var t = o0(e)
      , n = e.read_shift(4);
    return [t, n, "s"]
}
function OV(e, t, n) {
    return n == null && (n = ce(8)),
    a0(t, n),
    n.write_shift(4, t.v),
    n
}
function MV(e) {
    var t = Fs(e)
      , n = Zu(e);
    return [t, n, "n"]
}
function PV(e, t, n) {
    return n == null && (n = ce(16)),
    s0(t, n),
    n0(e.v, n),
    n
}
function kV(e) {
    var t = o0(e)
      , n = Zu(e);
    return [t, n, "n"]
}
function AV(e, t, n) {
    return n == null && (n = ce(12)),
    a0(t, n),
    n0(e.v, n),
    n
}
function IV(e) {
    var t = Fs(e)
      , n = eC(e);
    return [t, n, "n"]
}
function RV(e, t, n) {
    return n == null && (n = ce(12)),
    s0(t, n),
    tC(e.v, n),
    n
}
function DV(e) {
    var t = o0(e)
      , n = eC(e);
    return [t, n, "n"]
}
function NV(e, t, n) {
    return n == null && (n = ce(8)),
    a0(t, n),
    tC(e.v, n),
    n
}
function FV(e) {
    var t = Fs(e)
      , n = F7(e);
    return [t, n, "is"]
}
function LV(e) {
    var t = Fs(e)
      , n = lr(e);
    return [t, n, "str"]
}
function BV(e, t, n) {
    return n == null && (n = ce(12 + 4 * e.v.length)),
    s0(t, n),
    Ri(e.v, n),
    n.length > n.l ? n.slice(0, n.l) : n
}
function UV(e) {
    var t = o0(e)
      , n = lr(e);
    return [t, n, "str"]
}
function HV(e, t, n) {
    return n == null && (n = ce(8 + 4 * e.v.length)),
    a0(t, n),
    Ri(e.v, n),
    n.length > n.l ? n.slice(0, n.l) : n
}
function GV(e, t, n) {
    var i = e.l + t
      , r = Fs(e);
    r.r = n["!row"];
    var s = e.read_shift(1)
      , o = [r, s, "b"];
    if (n.cellFormula) {
        e.l += 2;
        var a = _2(e, i - e.l, n);
        o[3] = Xu(a, null, r, n.supbooks, n)
    } else
        e.l = i;
    return o
}
function VV(e, t, n) {
    var i = e.l + t
      , r = Fs(e);
    r.r = n["!row"];
    var s = e.read_shift(1)
      , o = [r, s, "e"];
    if (n.cellFormula) {
        e.l += 2;
        var a = _2(e, i - e.l, n);
        o[3] = Xu(a, null, r, n.supbooks, n)
    } else
        e.l = i;
    return o
}
function $V(e, t, n) {
    var i = e.l + t
      , r = Fs(e);
    r.r = n["!row"];
    var s = Zu(e)
      , o = [r, s, "n"];
    if (n.cellFormula) {
        e.l += 2;
        var a = _2(e, i - e.l, n);
        o[3] = Xu(a, null, r, n.supbooks, n)
    } else
        e.l = i;
    return o
}
function WV(e, t, n) {
    var i = e.l + t
      , r = Fs(e);
    r.r = n["!row"];
    var s = lr(e)
      , o = [r, s, "str"];
    if (n.cellFormula) {
        e.l += 2;
        var a = _2(e, i - e.l, n);
        o[3] = Xu(a, null, r, n.supbooks, n)
    } else
        e.l = i;
    return o
}
var jV = c0
  , qV = Ju;
function zV(e, t) {
    return t == null && (t = ce(4)),
    t.write_shift(4, e),
    t
}
function XV(e, t) {
    var n = e.l + t
      , i = c0(e, 16)
      , r = L7(e)
      , s = lr(e)
      , o = lr(e)
      , a = lr(e);
    e.l = n;
    var c = {
        rfx: i,
        relId: r,
        loc: s,
        display: a
    };
    return o && (c.Tooltip = o),
    c
}
function KV(e, t) {
    var n = ce(50 + 4 * (e[1].Target.length + (e[1].Tooltip || "").length));
    Ju({
        s: Ii(e[0]),
        e: Ii(e[0])
    }, n),
    B7("rId" + t, n);
    var i = e[1].Target.indexOf("#")
      , r = i == -1 ? "" : e[1].Target.slice(i + 1);
    return Ri(r || "", n),
    Ri(e[1].Tooltip || "", n),
    Ri("", n),
    n.slice(0, n.l)
}
function YV() {}
function QV(e, t, n) {
    var i = e.l + t
      , r = nC(e, 16)
      , s = e.read_shift(1)
      , o = [r];
    if (o[2] = s,
    n.cellFormula) {
        var a = UG(e, i - e.l, n);
        o[1] = a
    } else
        e.l = i;
    return o
}
function JV(e, t, n) {
    var i = e.l + t
      , r = c0(e, 16)
      , s = [r];
    if (n.cellFormula) {
        var o = GG(e, i - e.l, n);
        s[1] = o,
        e.l = i
    } else
        e.l = i;
    return s
}
function ZV(e, t, n) {
    n == null && (n = ce(18));
    var i = y2(e, t);
    n.write_shift(-4, e),
    n.write_shift(-4, e),
    n.write_shift(4, (i.width || 10) * 256),
    n.write_shift(4, 0);
    var r = 0;
    return t.hidden && (r |= 1),
    typeof i.width == "number" && (r |= 2),
    t.level && (r |= t.level << 8),
    n.write_shift(2, r),
    n
}
var UC = ["left", "right", "top", "bottom", "header", "footer"];
function e$(e) {
    var t = {};
    return UC.forEach(function(n) {
        t[n] = Zu(e, 8)
    }),
    t
}
function t$(e, t) {
    return t == null && (t = ce(6 * 8)),
    LC(e),
    UC.forEach(function(n) {
        n0(e[n], t)
    }),
    t
}
function n$(e) {
    var t = e.read_shift(2);
    return e.l += 28,
    {
        RTL: t & 32
    }
}
function i$(e, t, n) {
    n == null && (n = ce(30));
    var i = 924;
    return (((t || {}).Views || [])[0] || {}).RTL && (i |= 32),
    n.write_shift(2, i),
    n.write_shift(4, 0),
    n.write_shift(4, 0),
    n.write_shift(4, 0),
    n.write_shift(1, 0),
    n.write_shift(1, 0),
    n.write_shift(2, 0),
    n.write_shift(2, 100),
    n.write_shift(2, 0),
    n.write_shift(2, 0),
    n.write_shift(2, 0),
    n.write_shift(4, 0),
    n
}
function r$(e) {
    var t = ce(24);
    return t.write_shift(4, 4),
    t.write_shift(4, 1),
    Ju(e, t),
    t
}
function s$(e, t) {
    return t == null && (t = ce(16 * 4 + 2)),
    t.write_shift(2, e.password ? SC(e.password) : 0),
    t.write_shift(4, 1),
    [["objects", !1], ["scenarios", !1], ["formatCells", !0], ["formatColumns", !0], ["formatRows", !0], ["insertColumns", !0], ["insertRows", !0], ["insertHyperlinks", !0], ["deleteColumns", !0], ["deleteRows", !0], ["selectLockedCells", !1], ["sort", !0], ["autoFilter", !0], ["pivotTables", !0], ["selectUnlockedCells", !1]].forEach(function(n) {
        n[1] ? t.write_shift(4, e[n[0]] != null && !e[n[0]] ? 1 : 0) : t.write_shift(4, e[n[0]] != null && e[n[0]] ? 0 : 1)
    }),
    t
}
function o$() {}
function a$() {}
function c$(e, t, n, i, r, s, o) {
    if (t.v === void 0)
        return !1;
    var a = "";
    switch (t.t) {
    case "b":
        a = t.v ? "1" : "0";
        break;
    case "d":
        t = Jr(t),
        t.z = t.z || Bn[14],
        t.v = Qr(Mr(t.v)),
        t.t = "n";
        break;
    case "n":
    case "e":
        a = "" + t.v;
        break;
    default:
        a = t.v;
        break
    }
    var c = {
        r: n,
        c: i
    };
    switch (c.s = jc(r.cellXfs, t, r),
    t.l && s["!links"].push([tn(c), t.l]),
    t.c && s["!comments"].push([tn(c), t.c]),
    t.t) {
    case "s":
    case "str":
        return r.bookSST ? (a = W7(r.Strings, t.v, r.revStrings),
        c.t = "s",
        c.v = a,
        o ? pe(e, 18, OV(t, c)) : pe(e, 7, EV(t, c))) : (c.t = "str",
        o ? pe(e, 17, HV(t, c)) : pe(e, 6, BV(t, c))),
        !0;
    case "n":
        return t.v == (t.v | 0) && t.v > -1e3 && t.v < 1e3 ? o ? pe(e, 13, NV(t, c)) : pe(e, 2, RV(t, c)) : o ? pe(e, 16, AV(t, c)) : pe(e, 5, PV(t, c)),
        !0;
    case "b":
        return c.t = "b",
        o ? pe(e, 15, yV(t, c)) : pe(e, 4, vV(t, c)),
        !0;
    case "e":
        return c.t = "e",
        o ? pe(e, 14, wV(t, c)) : pe(e, 3, bV(t, c)),
        !0
    }
    return o ? pe(e, 12, gV(t, c)) : pe(e, 1, fV(t, c)),
    !0
}
function l$(e, t, n, i) {
    var r = yn(t["!ref"] || "A1"), s, o = "", a = [];
    pe(e, 145);
    var c = Array.isArray(t)
      , l = r.e.r;
    t["!rows"] && (l = Math.max(r.e.r, t["!rows"].length - 1));
    for (var u = r.s.r; u <= l; ++u) {
        o = ji(u),
        oV(e, t, r, u);
        var h = !1;
        if (u <= r.e.r)
            for (var d = r.s.c; d <= r.e.c; ++d) {
                u === r.s.r && (a[d] = cr(d)),
                s = a[d] + o;
                var f = c ? (t[u] || [])[d] : t[s];
                if (!f) {
                    h = !1;
                    continue
                }
                h = c$(e, f, u, d, i, t, h)
            }
    }
    pe(e, 146)
}
function u$(e, t) {
    !t || !t["!merges"] || (pe(e, 177, zV(t["!merges"].length)),
    t["!merges"].forEach(function(n) {
        pe(e, 176, qV(n))
    }),
    pe(e, 178))
}
function h$(e, t) {
    !t || !t["!cols"] || (pe(e, 390),
    t["!cols"].forEach(function(n, i) {
        n && pe(e, 60, ZV(i, n))
    }),
    pe(e, 391))
}
function d$(e, t) {
    !t || !t["!ref"] || (pe(e, 648),
    pe(e, 649, r$(yn(t["!ref"]))),
    pe(e, 650))
}
function f$(e, t, n) {
    t["!links"].forEach(function(i) {
        if (i[1].Target) {
            var r = Zt(n, -1, i[1].Target.replace(/#.*$/, ""), qt.HLINK);
            pe(e, 494, KV(i, r))
        }
    }),
    delete t["!links"]
}
function p$(e, t, n, i) {
    if (t["!comments"].length > 0) {
        var r = Zt(i, -1, "../drawings/vmlDrawing" + (n + 1) + ".vml", qt.VML);
        pe(e, 551, B7("rId" + r)),
        t["!legacy"] = r
    }
}
function g$(e, t, n, i) {
    if (t["!autofilter"]) {
        var r = t["!autofilter"]
          , s = typeof r.ref == "string" ? r.ref : ii(r.ref);
        n.Workbook || (n.Workbook = {
            Sheets: []
        }),
        n.Workbook.Names || (n.Workbook.Names = []);
        var o = n.Workbook.Names
          , a = xs(s);
        a.s.r == a.e.r && (a.e.r = xs(t["!ref"]).e.r,
        s = ii(a));
        for (var c = 0; c < o.length; ++c) {
            var l = o[c];
            if (l.Name == "_xlnm._FilterDatabase" && l.Sheet == i) {
                l.Ref = "'" + n.SheetNames[i] + "'!" + s;
                break
            }
        }
        c == o.length && o.push({
            Name: "_xlnm._FilterDatabase",
            Sheet: i,
            Ref: "'" + n.SheetNames[i] + "'!" + s
        }),
        pe(e, 161, Ju(yn(s))),
        pe(e, 162)
    }
}
function m$(e, t, n) {
    pe(e, 133),
    pe(e, 137, i$(t, n)),
    pe(e, 138),
    pe(e, 134)
}
function v$(e, t) {
    t["!protect"] && pe(e, 535, s$(t["!protect"]))
}
function _$(e, t, n, i) {
    var r = Yr()
      , s = n.SheetNames[e]
      , o = n.Sheets[s] || {}
      , a = s;
    try {
        n && n.Workbook && (a = n.Workbook.Sheets[e].CodeName || a)
    } catch {}
    var c = yn(o["!ref"] || "A1");
    if (c.e.c > 16383 || c.e.r > 1048575) {
        if (t.WTF)
            throw new Error("Range " + (o["!ref"] || "A1") + " exceeds format limit A1:XFD1048576");
        c.e.c = Math.min(c.e.c, 16383),
        c.e.r = Math.min(c.e.c, 1048575)
    }
    return o["!links"] = [],
    o["!comments"] = [],
    pe(r, 129),
    (n.vbaraw || o["!outline"]) && pe(r, 147, hV(a, o["!outline"])),
    pe(r, 148, cV(c)),
    m$(r, o, n.Workbook),
    h$(r, o, e, t, n),
    l$(r, o, e, t, n),
    v$(r, o),
    g$(r, o, n, e),
    u$(r, o),
    f$(r, o, i),
    o["!margins"] && pe(r, 476, t$(o["!margins"])),
    (!t || t.ignoreEC || t.ignoreEC == null) && d$(r, o),
    p$(r, o, e, i),
    pe(r, 130),
    r.end()
}
function y$(e, t) {
    e.l += 10;
    var n = lr(e, t - 10);
    return {
        name: n
    }
}
var S$ = [["allowRefreshQuery", !1, "bool"], ["autoCompressPictures", !0, "bool"], ["backupFile", !1, "bool"], ["checkCompatibility", !1, "bool"], ["CodeName", ""], ["date1904", !1, "bool"], ["defaultThemeVersion", 0, "int"], ["filterPrivacy", !1, "bool"], ["hidePivotFieldList", !1, "bool"], ["promptedSolutions", !1, "bool"], ["publishItems", !1, "bool"], ["refreshAllConnections", !1, "bool"], ["saveExternalLinkValues", !0, "bool"], ["showBorderUnselectedTables", !0, "bool"], ["showInkAnnotation", !0, "bool"], ["showObjects", "all"], ["showPivotChartFilter", !1, "bool"], ["updateLinks", "userSet"]];
function b$(e) {
    return !e.Workbook || !e.Workbook.WBProps ? "false" : QL(e.Workbook.WBProps.date1904) ? "true" : "false"
}
var x$ = "][*?/\\".split("");
function HC(e, t) {
    if (e.length > 31) {
        if (t)
            return !1;
        throw new Error("Sheet names cannot exceed 31 chars")
    }
    var n = !0;
    return x$.forEach(function(i) {
        if (e.indexOf(i) != -1) {
            if (!t)
                throw new Error("Sheet name cannot contain : \\ / ? * [ ]");
            n = !1
        }
    }),
    n
}
function w$(e, t, n) {
    e.forEach(function(i, r) {
        HC(i);
        for (var s = 0; s < r; ++s)
            if (i == e[s])
                throw new Error("Duplicate Sheet Name: " + i);
        if (n) {
            var o = t && t[r] && t[r].CodeName || i;
            if (o.charCodeAt(0) == 95 && o.length > 22)
                throw new Error("Bad Code Name: Worksheet" + o)
        }
    })
}
function C$(e) {
    if (!e || !e.SheetNames || !e.Sheets)
        throw new Error("Invalid Workbook");
    if (!e.SheetNames.length)
        throw new Error("Workbook is empty");
    var t = e.Workbook && e.Workbook.Sheets || [];
    w$(e.SheetNames, t, !!e.vbaraw);
    for (var n = 0; n < e.SheetNames.length; ++n)
        qG(e.Sheets[e.SheetNames[n]], e.SheetNames[n], n)
}
function GC(e) {
    var t = [ri];
    t[t.length] = Me("workbook", null, {
        xmlns: Ku[0],
        "xmlns:r": Ai.r
    });
    var n = e.Workbook && (e.Workbook.Names || []).length > 0
      , i = {
        codeName: "ThisWorkbook"
    };
    e.Workbook && e.Workbook.WBProps && (S$.forEach(function(a) {
        e.Workbook.WBProps[a[0]] != null && e.Workbook.WBProps[a[0]] != a[1] && (i[a[0]] = e.Workbook.WBProps[a[0]])
    }),
    e.Workbook.WBProps.CodeName && (i.codeName = e.Workbook.WBProps.CodeName,
    delete i.CodeName)),
    t[t.length] = Me("workbookPr", null, i);
    var r = e.Workbook && e.Workbook.Sheets || []
      , s = 0;
    if (r && r[0] && r[0].Hidden) {
        for (t[t.length] = "<bookViews>",
        s = 0; s != e.SheetNames.length && !(!r[s] || !r[s].Hidden); ++s)
            ;
        s == e.SheetNames.length && (s = 0),
        t[t.length] = '<workbookView firstSheet="' + s + '" activeTab="' + s + '"/>',
        t[t.length] = "</bookViews>"
    }
    for (t[t.length] = "<sheets>",
    s = 0; s != e.SheetNames.length; ++s) {
        var o = {
            name: en(e.SheetNames[s].slice(0, 31))
        };
        if (o.sheetId = "" + (s + 1),
        o["r:id"] = "rId" + (s + 1),
        r[s])
            switch (r[s].Hidden) {
            case 1:
                o.state = "hidden";
                break;
            case 2:
                o.state = "veryHidden";
                break
            }
        t[t.length] = Me("sheet", null, o)
    }
    return t[t.length] = "</sheets>",
    n && (t[t.length] = "<definedNames>",
    e.Workbook && e.Workbook.Names && e.Workbook.Names.forEach(function(a) {
        var c = {
            name: a.Name
        };
        a.Comment && (c.comment = a.Comment),
        a.Sheet != null && (c.localSheetId = "" + a.Sheet),
        a.Hidden && (c.hidden = "1"),
        a.Ref && (t[t.length] = Me("definedName", en(a.Ref), c))
    }),
    t[t.length] = "</definedNames>"),
    t.length > 2 && (t[t.length] = "</workbook>",
    t[1] = t[1].replace("/>", ">")),
    t.join("")
}
function E$(e, t) {
    var n = {};
    return n.Hidden = e.read_shift(4),
    n.iTabID = e.read_shift(4),
    n.strRelID = S7(e, t - 8),
    n.name = lr(e),
    n
}
function T$(e, t) {
    return t || (t = ce(127)),
    t.write_shift(4, e.Hidden),
    t.write_shift(4, e.iTabID),
    B7(e.strRelID, t),
    Ri(e.name.slice(0, 31), t),
    t.length > t.l ? t.slice(0, t.l) : t
}
function O$(e, t) {
    var n = {}
      , i = e.read_shift(4);
    n.defaultThemeVersion = e.read_shift(4);
    var r = t > 8 ? lr(e) : "";
    return r.length > 0 && (n.CodeName = r),
    n.autoCompressPictures = !!(i & 65536),
    n.backupFile = !!(i & 64),
    n.checkCompatibility = !!(i & 4096),
    n.date1904 = !!(i & 1),
    n.filterPrivacy = !!(i & 8),
    n.hidePivotFieldList = !!(i & 1024),
    n.promptedSolutions = !!(i & 16),
    n.publishItems = !!(i & 2048),
    n.refreshAllConnections = !!(i & 262144),
    n.saveExternalLinkValues = !!(i & 128),
    n.showBorderUnselectedTables = !!(i & 4),
    n.showInkAnnotation = !!(i & 32),
    n.showObjects = ["all", "placeholders", "none"][i >> 13 & 3],
    n.showPivotChartFilter = !!(i & 32768),
    n.updateLinks = ["userSet", "never", "always"][i >> 8 & 3],
    n
}
function M$(e, t) {
    t || (t = ce(72));
    var n = 0;
    return e && e.filterPrivacy && (n |= 8),
    t.write_shift(4, n),
    t.write_shift(4, 0),
    Zw(e && e.CodeName || "ThisWorkbook", t),
    t.slice(0, t.l)
}
function P$(e, t, n) {
    var i = e.l + t;
    e.l += 4,
    e.l += 1;
    var r = e.read_shift(4)
      , s = bB(e)
      , o = HG(e, 0, n)
      , a = L7(e);
    e.l = i;
    var c = {
        Name: s,
        Ptg: o
    };
    return r < 268435455 && (c.Sheet = r),
    a && (c.Comment = a),
    c
}
function k$(e, t) {
    pe(e, 143);
    for (var n = 0; n != t.SheetNames.length; ++n) {
        var i = t.Workbook && t.Workbook.Sheets && t.Workbook.Sheets[n] && t.Workbook.Sheets[n].Hidden || 0
          , r = {
            Hidden: i,
            iTabID: n + 1,
            strRelID: "rId" + (n + 1),
            name: t.SheetNames[n]
        };
        pe(e, 156, T$(r))
    }
    pe(e, 144)
}
function A$(e, t) {
    t || (t = ce(127));
    for (var n = 0; n != 4; ++n)
        t.write_shift(4, 0);
    return Ri("SheetJS", t),
    Ri(x1.version, t),
    Ri(x1.version, t),
    Ri("7262", t),
    t.length > t.l ? t.slice(0, t.l) : t
}
function I$(e, t) {
    t || (t = ce(29)),
    t.write_shift(-4, 0),
    t.write_shift(-4, 460),
    t.write_shift(4, 28800),
    t.write_shift(4, 17600),
    t.write_shift(4, 500),
    t.write_shift(4, e),
    t.write_shift(4, e);
    var n = 120;
    return t.write_shift(1, n),
    t.length > t.l ? t.slice(0, t.l) : t
}
function R$(e, t) {
    if (!(!t.Workbook || !t.Workbook.Sheets)) {
        for (var n = t.Workbook.Sheets, i = 0, r = -1, s = -1; i < n.length; ++i)
            !n[i] || !n[i].Hidden && r == -1 ? r = i : n[i].Hidden == 1 && s == -1 && (s = i);
        s > r || (pe(e, 135),
        pe(e, 158, I$(r)),
        pe(e, 136))
    }
}
function D$(e, t) {
    var n = Yr();
    return pe(n, 131),
    pe(n, 128, A$()),
    pe(n, 153, M$(e.Workbook && e.Workbook.WBProps || null)),
    R$(n, e, t),
    k$(n, e, t),
    pe(n, 132),
    n.end()
}
function N$(e, t, n) {
    return (t.slice(-4) === ".bin" ? D$ : GC)(e, n)
}
function F$(e, t, n, i, r) {
    return (t.slice(-4) === ".bin" ? _$ : BC)(e, n, i, r)
}
function L$(e, t, n) {
    return (t.slice(-4) === ".bin" ? tH : wC)(e, n)
}
function B$(e, t, n) {
    return (t.slice(-4) === ".bin" ? MU : yC)(e, n)
}
function U$(e, t, n) {
    return (t.slice(-4) === ".bin" ? vH : MC)(e, n)
}
function H$(e) {
    return (e.slice(-4) === ".bin" ? lH : TC)()
}
function G$(e, t) {
    var n = [];
    return e.Props && n.push(LB(e.Props, t)),
    e.Custprops && n.push(BB(e.Props, e.Custprops, t)),
    n.join("")
}
function V$() {
    return ""
}
function $$(e, t) {
    var n = ['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];
    return t.cellXfs.forEach(function(i, r) {
        var s = [];
        s.push(Me("NumberFormat", null, {
            "ss:Format": en(Bn[i.numFmtId])
        }));
        var o = {
            "ss:ID": "s" + (21 + r)
        };
        n.push(Me("Style", s.join(""), o))
    }),
    Me("Styles", n.join(""))
}
function VC(e) {
    return Me("NamedRange", null, {
        "ss:Name": e.Name,
        "ss:RefersTo": "=" + V7(e.Ref, {
            r: 0,
            c: 0
        })
    })
}
function W$(e) {
    if (!((e || {}).Workbook || {}).Names)
        return "";
    for (var t = e.Workbook.Names, n = [], i = 0; i < t.length; ++i) {
        var r = t[i];
        r.Sheet == null && (r.Name.match(/^_xlfn\./) || n.push(VC(r)))
    }
    return Me("Names", n.join(""))
}
function j$(e, t, n, i) {
    if (!e || !((i || {}).Workbook || {}).Names)
        return "";
    for (var r = i.Workbook.Names, s = [], o = 0; o < r.length; ++o) {
        var a = r[o];
        a.Sheet == n && (a.Name.match(/^_xlfn\./) || s.push(VC(a)))
    }
    return s.join("")
}
function q$(e, t, n, i) {
    if (!e)
        return "";
    var r = [];
    if (e["!margins"] && (r.push("<PageSetup>"),
    e["!margins"].header && r.push(Me("Header", null, {
        "x:Margin": e["!margins"].header
    })),
    e["!margins"].footer && r.push(Me("Footer", null, {
        "x:Margin": e["!margins"].footer
    })),
    r.push(Me("PageMargins", null, {
        "x:Bottom": e["!margins"].bottom || "0.75",
        "x:Left": e["!margins"].left || "0.7",
        "x:Right": e["!margins"].right || "0.7",
        "x:Top": e["!margins"].top || "0.75"
    })),
    r.push("</PageSetup>")),
    i && i.Workbook && i.Workbook.Sheets && i.Workbook.Sheets[n])
        if (i.Workbook.Sheets[n].Hidden)
            r.push(Me("Visible", i.Workbook.Sheets[n].Hidden == 1 ? "SheetHidden" : "SheetVeryHidden", {}));
        else {
            for (var s = 0; s < n && !(i.Workbook.Sheets[s] && !i.Workbook.Sheets[s].Hidden); ++s)
                ;
            s == n && r.push("<Selected/>")
        }
    return ((((i || {}).Workbook || {}).Views || [])[0] || {}).RTL && r.push("<DisplayRightToLeft/>"),
    e["!protect"] && (r.push(Wi("ProtectContents", "True")),
    e["!protect"].objects && r.push(Wi("ProtectObjects", "True")),
    e["!protect"].scenarios && r.push(Wi("ProtectScenarios", "True")),
    e["!protect"].selectLockedCells != null && !e["!protect"].selectLockedCells ? r.push(Wi("EnableSelection", "NoSelection")) : e["!protect"].selectUnlockedCells != null && !e["!protect"].selectUnlockedCells && r.push(Wi("EnableSelection", "UnlockedCells")),
    [["formatCells", "AllowFormatCells"], ["formatColumns", "AllowSizeCols"], ["formatRows", "AllowSizeRows"], ["insertColumns", "AllowInsertCols"], ["insertRows", "AllowInsertRows"], ["insertHyperlinks", "AllowInsertHyperlinks"], ["deleteColumns", "AllowDeleteCols"], ["deleteRows", "AllowDeleteRows"], ["sort", "AllowSort"], ["autoFilter", "AllowFilter"], ["pivotTables", "AllowUsePivotTables"]].forEach(function(o) {
        e["!protect"][o[0]] && r.push("<" + o[1] + "/>")
    })),
    r.length == 0 ? "" : Me("WorksheetOptions", r.join(""), {
        xmlns: bs.x
    })
}
function z$(e) {
    return e.map(function(t) {
        var n = YL(t.t || "")
          , i = Me("ss:Data", n, {
            xmlns: "http://www.w3.org/TR/REC-html40"
        });
        return Me("Comment", i, {
            "ss:Author": t.a
        })
    }).join("")
}
function X$(e, t, n, i, r, s, o) {
    if (!e || e.v == null && e.f == null)
        return "";
    var a = {};
    if (e.f && (a["ss:Formula"] = "=" + en(V7(e.f, o))),
    e.F && e.F.slice(0, t.length) == t) {
        var c = Ii(e.F.slice(t.length + 1));
        a["ss:ArrayRange"] = "RC:R" + (c.r == o.r ? "" : "[" + (c.r - o.r) + "]") + "C" + (c.c == o.c ? "" : "[" + (c.c - o.c) + "]")
    }
    if (e.l && e.l.Target && (a["ss:HRef"] = en(e.l.Target),
    e.l.Tooltip && (a["x:HRefScreenTip"] = en(e.l.Tooltip))),
    n["!merges"])
        for (var l = n["!merges"], u = 0; u != l.length; ++u)
            l[u].s.c != o.c || l[u].s.r != o.r || (l[u].e.c > l[u].s.c && (a["ss:MergeAcross"] = l[u].e.c - l[u].s.c),
            l[u].e.r > l[u].s.r && (a["ss:MergeDown"] = l[u].e.r - l[u].s.r));
    var h = ""
      , d = "";
    switch (e.t) {
    case "z":
        if (!i.sheetStubs)
            return "";
        break;
    case "n":
        h = "Number",
        d = String(e.v);
        break;
    case "b":
        h = "Boolean",
        d = e.v ? "1" : "0";
        break;
    case "e":
        h = "Error",
        d = A1[e.v];
        break;
    case "d":
        h = "DateTime",
        d = new Date(e.v).toISOString(),
        e.z == null && (e.z = e.z || Bn[14]);
        break;
    case "s":
        h = "String",
        d = KL(e.v || "");
        break
    }
    var f = jc(i.cellXfs, e, i);
    a["ss:StyleID"] = "s" + (21 + f),
    a["ss:Index"] = o.c + 1;
    var g = e.v != null ? d : ""
      , p = e.t == "z" ? "" : '<Data ss:Type="' + h + '">' + g + "</Data>";
    return (e.c || []).length > 0 && (p += z$(e.c)),
    Me("Cell", p, a)
}
function K$(e, t) {
    var n = '<Row ss:Index="' + (e + 1) + '"';
    return t && (t.hpt && !t.hpx && (t.hpx = xC(t.hpt)),
    t.hpx && (n += ' ss:AutoFitHeight="0" ss:Height="' + t.hpx + '"'),
    t.hidden && (n += ' ss:Hidden="1"')),
    n + ">"
}
function Y$(e, t, n, i) {
    if (!e["!ref"])
        return "";
    var r = yn(e["!ref"])
      , s = e["!merges"] || []
      , o = 0
      , a = [];
    e["!cols"] && e["!cols"].forEach(function(v, S) {
        H7(v);
        var x = !!v.width
          , w = y2(S, v)
          , k = {
            "ss:Index": S + 1
        };
        x && (k["ss:Width"] = o2(w.width)),
        v.hidden && (k["ss:Hidden"] = "1"),
        a.push(Me("Column", null, k))
    });
    for (var c = Array.isArray(e), l = r.s.r; l <= r.e.r; ++l) {
        for (var u = [K$(l, (e["!rows"] || [])[l])], h = r.s.c; h <= r.e.c; ++h) {
            var d = !1;
            for (o = 0; o != s.length; ++o)
                if (!(s[o].s.c > h) && !(s[o].s.r > l) && !(s[o].e.c < h) && !(s[o].e.r < l)) {
                    (s[o].s.c != h || s[o].s.r != l) && (d = !0);
                    break
                }
            if (!d) {
                var f = {
                    r: l,
                    c: h
                }
                  , g = tn(f)
                  , p = c ? (e[l] || [])[h] : e[g];
                u.push(X$(p, g, e, t, n, i, f))
            }
        }
        u.push("</Row>"),
        u.length > 2 && a.push(u.join(""))
    }
    return a.join("")
}
function Q$(e, t, n) {
    var i = []
      , r = n.SheetNames[e]
      , s = n.Sheets[r]
      , o = s ? j$(s, t, e, n) : "";
    return o.length > 0 && i.push("<Names>" + o + "</Names>"),
    o = s ? Y$(s, t, e, n) : "",
    o.length > 0 && i.push("<Table>" + o + "</Table>"),
    i.push(q$(s, t, e, n)),
    i.join("")
}
function J$(e, t) {
    t || (t = {}),
    e.SSF || (e.SSF = Jr(Bn)),
    e.SSF && (f2(),
    d2(e.SSF),
    t.revssf = p2(e.SSF),
    t.revssf[e.SSF[65535]] = 0,
    t.ssf = e.SSF,
    t.cellXfs = [],
    jc(t.cellXfs, {}, {
        revssf: {
            General: 0
        }
    }));
    var n = [];
    n.push(G$(e, t)),
    n.push(V$(e, t)),
    n.push(""),
    n.push("");
    for (var i = 0; i < e.SheetNames.length; ++i)
        n.push(Me("Worksheet", Q$(i, t, e), {
            "ss:Name": en(e.SheetNames[i])
        }));
    return n[2] = $$(e, t),
    n[3] = W$(e, t),
    ri + Me("Workbook", n.join(""), {
        xmlns: bs.ss,
        "xmlns:o": bs.o,
        "xmlns:x": bs.x,
        "xmlns:ss": bs.ss,
        "xmlns:dt": bs.dt,
        "xmlns:html": bs.html
    })
}
var g7 = {
    SI: "e0859ff2f94f6810ab9108002b27b3d9",
    DSI: "02d5cdd59c2e1b10939708002b2cf9ae",
    UDI: "05d5cdd59c2e1b10939708002b2cf9ae"
};
function Z$(e, t) {
    var n = [], i = [], r = [], s = 0, o, a = Xx(aw, "n"), c = Xx(cw, "n");
    if (e.Props)
        for (o = qi(e.Props),
        s = 0; s < o.length; ++s)
            (Object.prototype.hasOwnProperty.call(a, o[s]) ? n : Object.prototype.hasOwnProperty.call(c, o[s]) ? i : r).push([o[s], e.Props[o[s]]]);
    if (e.Custprops)
        for (o = qi(e.Custprops),
        s = 0; s < o.length; ++s)
            Object.prototype.hasOwnProperty.call(e.Props || {}, o[s]) || (Object.prototype.hasOwnProperty.call(a, o[s]) ? n : Object.prototype.hasOwnProperty.call(c, o[s]) ? i : r).push([o[s], e.Custprops[o[s]]]);
    var l = [];
    for (s = 0; s < r.length; ++s)
        dC.indexOf(r[s][0]) > -1 || lC.indexOf(r[s][0]) > -1 || r[s][1] != null && l.push(r[s]);
    i.length && nn.utils.cfb_add(t, "/SummaryInformation", fw(i, g7.SI, c, cw)),
    (n.length || l.length) && nn.utils.cfb_add(t, "/DocumentSummaryInformation", fw(n, g7.DSI, a, aw, l.length ? l : null, g7.UDI))
}
function eW(e, t) {
    var n = t || {}
      , i = nn.utils.cfb_new({
        root: "R"
    })
      , r = "/Workbook";
    switch (n.bookType || "xls") {
    case "xls":
        n.bookType = "biff8";
    case "xla":
        n.bookType || (n.bookType = "xla");
    case "biff8":
        r = "/Workbook",
        n.biff = 8;
        break;
    case "biff5":
        r = "/Book",
        n.biff = 5;
        break;
    default:
        throw new Error("invalid type " + n.bookType + " for XLS CFB")
    }
    return nn.utils.cfb_add(i, r, $C(e, n)),
    n.biff == 8 && (e.Props || e.Custprops) && Z$(e, i),
    n.biff == 8 && e.vbaraw && _H(i, nn.read(e.vbaraw, {
        type: typeof e.vbaraw == "string" ? "binary" : "buffer"
    })),
    i
}
var tW = {
    0: {
        f: rV
    },
    1: {
        f: dV
    },
    2: {
        f: IV
    },
    3: {
        f: SV
    },
    4: {
        f: mV
    },
    5: {
        f: MV
    },
    6: {
        f: LV
    },
    7: {
        f: CV
    },
    8: {
        f: WV
    },
    9: {
        f: $V
    },
    10: {
        f: GV
    },
    11: {
        f: VV
    },
    12: {
        f: pV
    },
    13: {
        f: DV
    },
    14: {
        f: xV
    },
    15: {
        f: _V
    },
    16: {
        f: kV
    },
    17: {
        f: UV
    },
    18: {
        f: TV
    },
    19: {
        f: F7
    },
    20: {},
    21: {},
    22: {},
    23: {},
    24: {},
    25: {},
    26: {},
    27: {},
    28: {},
    29: {},
    30: {},
    31: {},
    32: {},
    33: {},
    34: {},
    35: {
        T: 1
    },
    36: {
        T: -1
    },
    37: {
        T: 1
    },
    38: {
        T: -1
    },
    39: {
        f: P$
    },
    40: {},
    42: {},
    43: {
        f: LU
    },
    44: {
        f: NU
    },
    45: {
        f: HU
    },
    46: {
        f: VU
    },
    47: {
        f: GU
    },
    48: {},
    49: {
        f: pB
    },
    50: {},
    51: {
        f: rH
    },
    52: {
        T: 1
    },
    53: {
        T: -1
    },
    54: {
        T: 1
    },
    55: {
        T: -1
    },
    56: {
        T: 1
    },
    57: {
        T: -1
    },
    58: {},
    59: {},
    60: {
        f: gU
    },
    62: {
        f: FV
    },
    63: {
        f: uH
    },
    64: {
        f: o$
    },
    65: {},
    66: {},
    67: {},
    68: {},
    69: {},
    70: {},
    128: {},
    129: {
        T: 1
    },
    130: {
        T: -1
    },
    131: {
        T: 1,
        f: Jo,
        p: 0
    },
    132: {
        T: -1
    },
    133: {
        T: 1
    },
    134: {
        T: -1
    },
    135: {
        T: 1
    },
    136: {
        T: -1
    },
    137: {
        T: 1,
        f: n$
    },
    138: {
        T: -1
    },
    139: {
        T: 1
    },
    140: {
        T: -1
    },
    141: {
        T: 1
    },
    142: {
        T: -1
    },
    143: {
        T: 1
    },
    144: {
        T: -1
    },
    145: {
        T: 1
    },
    146: {
        T: -1
    },
    147: {
        f: uV
    },
    148: {
        f: aV,
        p: 16
    },
    151: {
        f: YV
    },
    152: {},
    153: {
        f: O$
    },
    154: {},
    155: {},
    156: {
        f: E$
    },
    157: {},
    158: {},
    159: {
        T: 1,
        f: EU
    },
    160: {
        T: -1
    },
    161: {
        T: 1,
        f: c0
    },
    162: {
        T: -1
    },
    163: {
        T: 1
    },
    164: {
        T: -1
    },
    165: {
        T: 1
    },
    166: {
        T: -1
    },
    167: {},
    168: {},
    169: {},
    170: {},
    171: {},
    172: {
        T: 1
    },
    173: {
        T: -1
    },
    174: {},
    175: {},
    176: {
        f: jV
    },
    177: {
        T: 1
    },
    178: {
        T: -1
    },
    179: {
        T: 1
    },
    180: {
        T: -1
    },
    181: {
        T: 1
    },
    182: {
        T: -1
    },
    183: {
        T: 1
    },
    184: {
        T: -1
    },
    185: {
        T: 1
    },
    186: {
        T: -1
    },
    187: {
        T: 1
    },
    188: {
        T: -1
    },
    189: {
        T: 1
    },
    190: {
        T: -1
    },
    191: {
        T: 1
    },
    192: {
        T: -1
    },
    193: {
        T: 1
    },
    194: {
        T: -1
    },
    195: {
        T: 1
    },
    196: {
        T: -1
    },
    197: {
        T: 1
    },
    198: {
        T: -1
    },
    199: {
        T: 1
    },
    200: {
        T: -1
    },
    201: {
        T: 1
    },
    202: {
        T: -1
    },
    203: {
        T: 1
    },
    204: {
        T: -1
    },
    205: {
        T: 1
    },
    206: {
        T: -1
    },
    207: {
        T: 1
    },
    208: {
        T: -1
    },
    209: {
        T: 1
    },
    210: {
        T: -1
    },
    211: {
        T: 1
    },
    212: {
        T: -1
    },
    213: {
        T: 1
    },
    214: {
        T: -1
    },
    215: {
        T: 1
    },
    216: {
        T: -1
    },
    217: {
        T: 1
    },
    218: {
        T: -1
    },
    219: {
        T: 1
    },
    220: {
        T: -1
    },
    221: {
        T: 1
    },
    222: {
        T: -1
    },
    223: {
        T: 1
    },
    224: {
        T: -1
    },
    225: {
        T: 1
    },
    226: {
        T: -1
    },
    227: {
        T: 1
    },
    228: {
        T: -1
    },
    229: {
        T: 1
    },
    230: {
        T: -1
    },
    231: {
        T: 1
    },
    232: {
        T: -1
    },
    233: {
        T: 1
    },
    234: {
        T: -1
    },
    235: {
        T: 1
    },
    236: {
        T: -1
    },
    237: {
        T: 1
    },
    238: {
        T: -1
    },
    239: {
        T: 1
    },
    240: {
        T: -1
    },
    241: {
        T: 1
    },
    242: {
        T: -1
    },
    243: {
        T: 1
    },
    244: {
        T: -1
    },
    245: {
        T: 1
    },
    246: {
        T: -1
    },
    247: {
        T: 1
    },
    248: {
        T: -1
    },
    249: {
        T: 1
    },
    250: {
        T: -1
    },
    251: {
        T: 1
    },
    252: {
        T: -1
    },
    253: {
        T: 1
    },
    254: {
        T: -1
    },
    255: {
        T: 1
    },
    256: {
        T: -1
    },
    257: {
        T: 1
    },
    258: {
        T: -1
    },
    259: {
        T: 1
    },
    260: {
        T: -1
    },
    261: {
        T: 1
    },
    262: {
        T: -1
    },
    263: {
        T: 1
    },
    264: {
        T: -1
    },
    265: {
        T: 1
    },
    266: {
        T: -1
    },
    267: {
        T: 1
    },
    268: {
        T: -1
    },
    269: {
        T: 1
    },
    270: {
        T: -1
    },
    271: {
        T: 1
    },
    272: {
        T: -1
    },
    273: {
        T: 1
    },
    274: {
        T: -1
    },
    275: {
        T: 1
    },
    276: {
        T: -1
    },
    277: {},
    278: {
        T: 1
    },
    279: {
        T: -1
    },
    280: {
        T: 1
    },
    281: {
        T: -1
    },
    282: {
        T: 1
    },
    283: {
        T: 1
    },
    284: {
        T: -1
    },
    285: {
        T: 1
    },
    286: {
        T: -1
    },
    287: {
        T: 1
    },
    288: {
        T: -1
    },
    289: {
        T: 1
    },
    290: {
        T: -1
    },
    291: {
        T: 1
    },
    292: {
        T: -1
    },
    293: {
        T: 1
    },
    294: {
        T: -1
    },
    295: {
        T: 1
    },
    296: {
        T: -1
    },
    297: {
        T: 1
    },
    298: {
        T: -1
    },
    299: {
        T: 1
    },
    300: {
        T: -1
    },
    301: {
        T: 1
    },
    302: {
        T: -1
    },
    303: {
        T: 1
    },
    304: {
        T: -1
    },
    305: {
        T: 1
    },
    306: {
        T: -1
    },
    307: {
        T: 1
    },
    308: {
        T: -1
    },
    309: {
        T: 1
    },
    310: {
        T: -1
    },
    311: {
        T: 1
    },
    312: {
        T: -1
    },
    313: {
        T: -1
    },
    314: {
        T: 1
    },
    315: {
        T: -1
    },
    316: {
        T: 1
    },
    317: {
        T: -1
    },
    318: {
        T: 1
    },
    319: {
        T: -1
    },
    320: {
        T: 1
    },
    321: {
        T: -1
    },
    322: {
        T: 1
    },
    323: {
        T: -1
    },
    324: {
        T: 1
    },
    325: {
        T: -1
    },
    326: {
        T: 1
    },
    327: {
        T: -1
    },
    328: {
        T: 1
    },
    329: {
        T: -1
    },
    330: {
        T: 1
    },
    331: {
        T: -1
    },
    332: {
        T: 1
    },
    333: {
        T: -1
    },
    334: {
        T: 1
    },
    335: {
        f: nH
    },
    336: {
        T: -1
    },
    337: {
        f: aH,
        T: 1
    },
    338: {
        T: -1
    },
    339: {
        T: 1
    },
    340: {
        T: -1
    },
    341: {
        T: 1
    },
    342: {
        T: -1
    },
    343: {
        T: 1
    },
    344: {
        T: -1
    },
    345: {
        T: 1
    },
    346: {
        T: -1
    },
    347: {
        T: 1
    },
    348: {
        T: -1
    },
    349: {
        T: 1
    },
    350: {
        T: -1
    },
    351: {},
    352: {},
    353: {
        T: 1
    },
    354: {
        T: -1
    },
    355: {
        f: S7
    },
    357: {},
    358: {},
    359: {},
    360: {
        T: 1
    },
    361: {},
    362: {
        f: lU
    },
    363: {},
    364: {},
    366: {},
    367: {},
    368: {},
    369: {},
    370: {},
    371: {},
    372: {
        T: 1
    },
    373: {
        T: -1
    },
    374: {
        T: 1
    },
    375: {
        T: -1
    },
    376: {
        T: 1
    },
    377: {
        T: -1
    },
    378: {
        T: 1
    },
    379: {
        T: -1
    },
    380: {
        T: 1
    },
    381: {
        T: -1
    },
    382: {
        T: 1
    },
    383: {
        T: -1
    },
    384: {
        T: 1
    },
    385: {
        T: -1
    },
    386: {
        T: 1
    },
    387: {
        T: -1
    },
    388: {
        T: 1
    },
    389: {
        T: -1
    },
    390: {
        T: 1
    },
    391: {
        T: -1
    },
    392: {
        T: 1
    },
    393: {
        T: -1
    },
    394: {
        T: 1
    },
    395: {
        T: -1
    },
    396: {},
    397: {},
    398: {},
    399: {},
    400: {},
    401: {
        T: 1
    },
    403: {},
    404: {},
    405: {},
    406: {},
    407: {},
    408: {},
    409: {},
    410: {},
    411: {},
    412: {},
    413: {},
    414: {},
    415: {},
    416: {},
    417: {},
    418: {},
    419: {},
    420: {},
    421: {},
    422: {
        T: 1
    },
    423: {
        T: 1
    },
    424: {
        T: -1
    },
    425: {
        T: -1
    },
    426: {
        f: QV
    },
    427: {
        f: JV
    },
    428: {},
    429: {
        T: 1
    },
    430: {
        T: -1
    },
    431: {
        T: 1
    },
    432: {
        T: -1
    },
    433: {
        T: 1
    },
    434: {
        T: -1
    },
    435: {
        T: 1
    },
    436: {
        T: -1
    },
    437: {
        T: 1
    },
    438: {
        T: -1
    },
    439: {
        T: 1
    },
    440: {
        T: -1
    },
    441: {
        T: 1
    },
    442: {
        T: -1
    },
    443: {
        T: 1
    },
    444: {
        T: -1
    },
    445: {
        T: 1
    },
    446: {
        T: -1
    },
    447: {
        T: 1
    },
    448: {
        T: -1
    },
    449: {
        T: 1
    },
    450: {
        T: -1
    },
    451: {
        T: 1
    },
    452: {
        T: -1
    },
    453: {
        T: 1
    },
    454: {
        T: -1
    },
    455: {
        T: 1
    },
    456: {
        T: -1
    },
    457: {
        T: 1
    },
    458: {
        T: -1
    },
    459: {
        T: 1
    },
    460: {
        T: -1
    },
    461: {
        T: 1
    },
    462: {
        T: -1
    },
    463: {
        T: 1
    },
    464: {
        T: -1
    },
    465: {
        T: 1
    },
    466: {
        T: -1
    },
    467: {
        T: 1
    },
    468: {
        T: -1
    },
    469: {
        T: 1
    },
    470: {
        T: -1
    },
    471: {},
    472: {},
    473: {
        T: 1
    },
    474: {
        T: -1
    },
    475: {},
    476: {
        f: e$
    },
    477: {},
    478: {},
    479: {
        T: 1
    },
    480: {
        T: -1
    },
    481: {
        T: 1
    },
    482: {
        T: -1
    },
    483: {
        T: 1
    },
    484: {
        T: -1
    },
    485: {
        f: lV
    },
    486: {
        T: 1
    },
    487: {
        T: -1
    },
    488: {
        T: 1
    },
    489: {
        T: -1
    },
    490: {
        T: 1
    },
    491: {
        T: -1
    },
    492: {
        T: 1
    },
    493: {
        T: -1
    },
    494: {
        f: XV
    },
    495: {
        T: 1
    },
    496: {
        T: -1
    },
    497: {
        T: 1
    },
    498: {
        T: -1
    },
    499: {},
    500: {
        T: 1
    },
    501: {
        T: -1
    },
    502: {
        T: 1
    },
    503: {
        T: -1
    },
    504: {},
    505: {
        T: 1
    },
    506: {
        T: -1
    },
    507: {},
    508: {
        T: 1
    },
    509: {
        T: -1
    },
    510: {
        T: 1
    },
    511: {
        T: -1
    },
    512: {},
    513: {},
    514: {
        T: 1
    },
    515: {
        T: -1
    },
    516: {
        T: 1
    },
    517: {
        T: -1
    },
    518: {
        T: 1
    },
    519: {
        T: -1
    },
    520: {
        T: 1
    },
    521: {
        T: -1
    },
    522: {},
    523: {},
    524: {},
    525: {},
    526: {},
    527: {},
    528: {
        T: 1
    },
    529: {
        T: -1
    },
    530: {
        T: 1
    },
    531: {
        T: -1
    },
    532: {
        T: 1
    },
    533: {
        T: -1
    },
    534: {},
    535: {},
    536: {},
    537: {},
    538: {
        T: 1
    },
    539: {
        T: -1
    },
    540: {
        T: 1
    },
    541: {
        T: -1
    },
    542: {
        T: 1
    },
    548: {},
    549: {},
    550: {
        f: S7
    },
    551: {},
    552: {},
    553: {},
    554: {
        T: 1
    },
    555: {
        T: -1
    },
    556: {
        T: 1
    },
    557: {
        T: -1
    },
    558: {
        T: 1
    },
    559: {
        T: -1
    },
    560: {
        T: 1
    },
    561: {
        T: -1
    },
    562: {},
    564: {},
    565: {
        T: 1
    },
    566: {
        T: -1
    },
    569: {
        T: 1
    },
    570: {
        T: -1
    },
    572: {},
    573: {
        T: 1
    },
    574: {
        T: -1
    },
    577: {},
    578: {},
    579: {},
    580: {},
    581: {},
    582: {},
    583: {},
    584: {},
    585: {},
    586: {},
    587: {},
    588: {
        T: -1
    },
    589: {},
    590: {
        T: 1
    },
    591: {
        T: -1
    },
    592: {
        T: 1
    },
    593: {
        T: -1
    },
    594: {
        T: 1
    },
    595: {
        T: -1
    },
    596: {},
    597: {
        T: 1
    },
    598: {
        T: -1
    },
    599: {
        T: 1
    },
    600: {
        T: -1
    },
    601: {
        T: 1
    },
    602: {
        T: -1
    },
    603: {
        T: 1
    },
    604: {
        T: -1
    },
    605: {
        T: 1
    },
    606: {
        T: -1
    },
    607: {},
    608: {
        T: 1
    },
    609: {
        T: -1
    },
    610: {},
    611: {
        T: 1
    },
    612: {
        T: -1
    },
    613: {
        T: 1
    },
    614: {
        T: -1
    },
    615: {
        T: 1
    },
    616: {
        T: -1
    },
    617: {
        T: 1
    },
    618: {
        T: -1
    },
    619: {
        T: 1
    },
    620: {
        T: -1
    },
    625: {},
    626: {
        T: 1
    },
    627: {
        T: -1
    },
    628: {
        T: 1
    },
    629: {
        T: -1
    },
    630: {
        T: 1
    },
    631: {
        T: -1
    },
    632: {
        f: gH
    },
    633: {
        T: 1
    },
    634: {
        T: -1
    },
    635: {
        T: 1,
        f: fH
    },
    636: {
        T: -1
    },
    637: {
        f: _B
    },
    638: {
        T: 1
    },
    639: {},
    640: {
        T: -1
    },
    641: {
        T: 1
    },
    642: {
        T: -1
    },
    643: {
        T: 1
    },
    644: {},
    645: {
        T: -1
    },
    646: {
        T: 1
    },
    648: {
        T: 1
    },
    649: {},
    650: {
        T: -1
    },
    651: {
        f: y$
    },
    652: {},
    653: {
        T: 1
    },
    654: {
        T: -1
    },
    655: {
        T: 1
    },
    656: {
        T: -1
    },
    657: {
        T: 1
    },
    658: {
        T: -1
    },
    659: {},
    660: {
        T: 1
    },
    661: {},
    662: {
        T: -1
    },
    663: {},
    664: {
        T: 1
    },
    665: {},
    666: {
        T: -1
    },
    667: {},
    668: {},
    669: {},
    671: {
        T: 1
    },
    672: {
        T: -1
    },
    673: {
        T: 1
    },
    674: {
        T: -1
    },
    675: {},
    676: {},
    677: {},
    678: {},
    679: {},
    680: {},
    681: {},
    1024: {},
    1025: {},
    1026: {
        T: 1
    },
    1027: {
        T: -1
    },
    1028: {
        T: 1
    },
    1029: {
        T: -1
    },
    1030: {},
    1031: {
        T: 1
    },
    1032: {
        T: -1
    },
    1033: {
        T: 1
    },
    1034: {
        T: -1
    },
    1035: {},
    1036: {},
    1037: {},
    1038: {
        T: 1
    },
    1039: {
        T: -1
    },
    1040: {},
    1041: {
        T: 1
    },
    1042: {
        T: -1
    },
    1043: {},
    1044: {},
    1045: {},
    1046: {
        T: 1
    },
    1047: {
        T: -1
    },
    1048: {
        T: 1
    },
    1049: {
        T: -1
    },
    1050: {},
    1051: {
        T: 1
    },
    1052: {
        T: 1
    },
    1053: {
        f: a$
    },
    1054: {
        T: 1
    },
    1055: {},
    1056: {
        T: 1
    },
    1057: {
        T: -1
    },
    1058: {
        T: 1
    },
    1059: {
        T: -1
    },
    1061: {},
    1062: {
        T: 1
    },
    1063: {
        T: -1
    },
    1064: {
        T: 1
    },
    1065: {
        T: -1
    },
    1066: {
        T: 1
    },
    1067: {
        T: -1
    },
    1068: {
        T: 1
    },
    1069: {
        T: -1
    },
    1070: {
        T: 1
    },
    1071: {
        T: -1
    },
    1072: {
        T: 1
    },
    1073: {
        T: -1
    },
    1075: {
        T: 1
    },
    1076: {
        T: -1
    },
    1077: {
        T: 1
    },
    1078: {
        T: -1
    },
    1079: {
        T: 1
    },
    1080: {
        T: -1
    },
    1081: {
        T: 1
    },
    1082: {
        T: -1
    },
    1083: {
        T: 1
    },
    1084: {
        T: -1
    },
    1085: {},
    1086: {
        T: 1
    },
    1087: {
        T: -1
    },
    1088: {
        T: 1
    },
    1089: {
        T: -1
    },
    1090: {
        T: 1
    },
    1091: {
        T: -1
    },
    1092: {
        T: 1
    },
    1093: {
        T: -1
    },
    1094: {
        T: 1
    },
    1095: {
        T: -1
    },
    1096: {},
    1097: {
        T: 1
    },
    1098: {},
    1099: {
        T: -1
    },
    1100: {
        T: 1
    },
    1101: {
        T: -1
    },
    1102: {},
    1103: {},
    1104: {},
    1105: {},
    1111: {},
    1112: {},
    1113: {
        T: 1
    },
    1114: {
        T: -1
    },
    1115: {
        T: 1
    },
    1116: {
        T: -1
    },
    1117: {},
    1118: {
        T: 1
    },
    1119: {
        T: -1
    },
    1120: {
        T: 1
    },
    1121: {
        T: -1
    },
    1122: {
        T: 1
    },
    1123: {
        T: -1
    },
    1124: {
        T: 1
    },
    1125: {
        T: -1
    },
    1126: {},
    1128: {
        T: 1
    },
    1129: {
        T: -1
    },
    1130: {},
    1131: {
        T: 1
    },
    1132: {
        T: -1
    },
    1133: {
        T: 1
    },
    1134: {
        T: -1
    },
    1135: {
        T: 1
    },
    1136: {
        T: -1
    },
    1137: {
        T: 1
    },
    1138: {
        T: -1
    },
    1139: {
        T: 1
    },
    1140: {
        T: -1
    },
    1141: {},
    1142: {
        T: 1
    },
    1143: {
        T: -1
    },
    1144: {
        T: 1
    },
    1145: {
        T: -1
    },
    1146: {},
    1147: {
        T: 1
    },
    1148: {
        T: -1
    },
    1149: {
        T: 1
    },
    1150: {
        T: -1
    },
    1152: {
        T: 1
    },
    1153: {
        T: -1
    },
    1154: {
        T: -1
    },
    1155: {
        T: -1
    },
    1156: {
        T: -1
    },
    1157: {
        T: 1
    },
    1158: {
        T: -1
    },
    1159: {
        T: 1
    },
    1160: {
        T: -1
    },
    1161: {
        T: 1
    },
    1162: {
        T: -1
    },
    1163: {
        T: 1
    },
    1164: {
        T: -1
    },
    1165: {
        T: 1
    },
    1166: {
        T: -1
    },
    1167: {
        T: 1
    },
    1168: {
        T: -1
    },
    1169: {
        T: 1
    },
    1170: {
        T: -1
    },
    1171: {},
    1172: {
        T: 1
    },
    1173: {
        T: -1
    },
    1177: {},
    1178: {
        T: 1
    },
    1180: {},
    1181: {},
    1182: {},
    2048: {
        T: 1
    },
    2049: {
        T: -1
    },
    2050: {},
    2051: {
        T: 1
    },
    2052: {
        T: -1
    },
    2053: {},
    2054: {},
    2055: {
        T: 1
    },
    2056: {
        T: -1
    },
    2057: {
        T: 1
    },
    2058: {
        T: -1
    },
    2060: {},
    2067: {},
    2068: {
        T: 1
    },
    2069: {
        T: -1
    },
    2070: {},
    2071: {},
    2072: {
        T: 1
    },
    2073: {
        T: -1
    },
    2075: {},
    2076: {},
    2077: {
        T: 1
    },
    2078: {
        T: -1
    },
    2079: {},
    2080: {
        T: 1
    },
    2081: {
        T: -1
    },
    2082: {},
    2083: {
        T: 1
    },
    2084: {
        T: -1
    },
    2085: {
        T: 1
    },
    2086: {
        T: -1
    },
    2087: {
        T: 1
    },
    2088: {
        T: -1
    },
    2089: {
        T: 1
    },
    2090: {
        T: -1
    },
    2091: {},
    2092: {},
    2093: {
        T: 1
    },
    2094: {
        T: -1
    },
    2095: {},
    2096: {
        T: 1
    },
    2097: {
        T: -1
    },
    2098: {
        T: 1
    },
    2099: {
        T: -1
    },
    2100: {
        T: 1
    },
    2101: {
        T: -1
    },
    2102: {},
    2103: {
        T: 1
    },
    2104: {
        T: -1
    },
    2105: {},
    2106: {
        T: 1
    },
    2107: {
        T: -1
    },
    2108: {},
    2109: {
        T: 1
    },
    2110: {
        T: -1
    },
    2111: {
        T: 1
    },
    2112: {
        T: -1
    },
    2113: {
        T: 1
    },
    2114: {
        T: -1
    },
    2115: {},
    2116: {},
    2117: {},
    2118: {
        T: 1
    },
    2119: {
        T: -1
    },
    2120: {},
    2121: {
        T: 1
    },
    2122: {
        T: -1
    },
    2123: {
        T: 1
    },
    2124: {
        T: -1
    },
    2125: {},
    2126: {
        T: 1
    },
    2127: {
        T: -1
    },
    2128: {},
    2129: {
        T: 1
    },
    2130: {
        T: -1
    },
    2131: {
        T: 1
    },
    2132: {
        T: -1
    },
    2133: {
        T: 1
    },
    2134: {},
    2135: {},
    2136: {},
    2137: {
        T: 1
    },
    2138: {
        T: -1
    },
    2139: {
        T: 1
    },
    2140: {
        T: -1
    },
    2141: {},
    3072: {},
    3073: {},
    4096: {
        T: 1
    },
    4097: {
        T: -1
    },
    5002: {
        T: 1
    },
    5003: {
        T: -1
    },
    5081: {
        T: 1
    },
    5082: {
        T: -1
    },
    5083: {},
    5084: {
        T: 1
    },
    5085: {
        T: -1
    },
    5086: {
        T: 1
    },
    5087: {
        T: -1
    },
    5088: {},
    5089: {},
    5090: {},
    5092: {
        T: 1
    },
    5093: {
        T: -1
    },
    5094: {},
    5095: {
        T: 1
    },
    5096: {
        T: -1
    },
    5097: {},
    5099: {},
    65535: {
        n: ""
    }
};
function Pe(e, t, n, i) {
    var r = t;
    if (!isNaN(r)) {
        var s = i || (n || []).length || 0
          , o = e.next(4);
        o.write_shift(2, r),
        o.write_shift(2, s),
        s > 0 && R7(n) && e.push(n)
    }
}
function nW(e, t, n, i) {
    var r = i || (n || []).length || 0;
    if (r <= 8224)
        return Pe(e, t, n, r);
    var s = t;
    if (!isNaN(s)) {
        for (var o = n.parts || [], a = 0, c = 0, l = 0; l + (o[a] || 8224) <= 8224; )
            l += o[a] || 8224,
            a++;
        var u = e.next(4);
        for (u.write_shift(2, s),
        u.write_shift(2, l),
        e.push(n.slice(c, c + l)),
        c += l; c < r; ) {
            for (u = e.next(4),
            u.write_shift(2, 60),
            l = 0; l + (o[a] || 8224) <= 8224; )
                l += o[a] || 8224,
                a++;
            u.write_shift(2, l),
            e.push(n.slice(c, c + l)),
            c += l
        }
    }
}
function R1(e, t, n) {
    return e || (e = ce(7)),
    e.write_shift(2, t),
    e.write_shift(2, n),
    e.write_shift(2, 0),
    e.write_shift(1, 0),
    e
}
function iW(e, t, n, i) {
    var r = ce(9);
    return R1(r, e, t),
    pC(n, i || "b", r),
    r
}
function rW(e, t, n) {
    var i = ce(8 + 2 * n.length);
    return R1(i, e, t),
    i.write_shift(1, n.length),
    i.write_shift(n.length, n, "sbcs"),
    i.l < i.length ? i.slice(0, i.l) : i
}
function sW(e, t, n, i) {
    if (t.v != null)
        switch (t.t) {
        case "d":
        case "n":
            var r = t.t == "d" ? Qr(Mr(t.v)) : t.v;
            r == (r | 0) && r >= 0 && r < 65536 ? Pe(e, 2, yU(n, i, r)) : Pe(e, 3, _U(n, i, r));
            return;
        case "b":
        case "e":
            Pe(e, 5, iW(n, i, t.v, t.t));
            return;
        case "s":
        case "str":
            Pe(e, 4, rW(n, i, (t.v || "").slice(0, 255)));
            return
        }
    Pe(e, 1, R1(null, n, i))
}
function oW(e, t, n, i) {
    var r = Array.isArray(t), s = yn(t["!ref"] || "A1"), o, a = "", c = [];
    if (s.e.c > 255 || s.e.r > 16383) {
        if (i.WTF)
            throw new Error("Range " + (t["!ref"] || "A1") + " exceeds format limit A1:IV16384");
        s.e.c = Math.min(s.e.c, 255),
        s.e.r = Math.min(s.e.c, 16383),
        o = ii(s)
    }
    for (var l = s.s.r; l <= s.e.r; ++l) {
        a = ji(l);
        for (var u = s.s.c; u <= s.e.c; ++u) {
            l === s.s.r && (c[u] = cr(u)),
            o = c[u] + a;
            var h = r ? (t[l] || [])[u] : t[o];
            h && sW(e, h, l, u, i)
        }
    }
}
function aW(e, t) {
    var n = t || {};
    Qo != null && n.dense == null && (n.dense = Qo);
    for (var i = Yr(), r = 0, s = 0; s < e.SheetNames.length; ++s)
        e.SheetNames[s] == n.sheet && (r = s);
    if (r == 0 && n.sheet && e.SheetNames[0] != n.sheet)
        throw new Error("Sheet not found: " + n.sheet);
    return Pe(i, n.biff == 4 ? 1033 : n.biff == 3 ? 521 : 9, U7(e, 16, n)),
    oW(i, e.Sheets[e.SheetNames[r]], r, n, e),
    Pe(i, 10),
    i.end()
}
function cW(e, t, n) {
    Pe(e, 49, tU({
        sz: 12,
        color: {
            theme: 1
        },
        name: "Arial",
        family: 2,
        scheme: "minor"
    }, n))
}
function lW(e, t, n) {
    t && [[5, 8], [23, 26], [41, 44], [50, 392]].forEach(function(i) {
        for (var r = i[0]; r <= i[1]; ++r)
            t[r] != null && Pe(e, 1054, rU(r, t[r], n))
    })
}
function uW(e, t) {
    var n = ce(19);
    n.write_shift(4, 2151),
    n.write_shift(4, 0),
    n.write_shift(4, 0),
    n.write_shift(2, 3),
    n.write_shift(1, 1),
    n.write_shift(4, 0),
    Pe(e, 2151, n),
    n = ce(39),
    n.write_shift(4, 2152),
    n.write_shift(4, 0),
    n.write_shift(4, 0),
    n.write_shift(2, 3),
    n.write_shift(1, 0),
    n.write_shift(4, 0),
    n.write_shift(2, 1),
    n.write_shift(4, 4),
    n.write_shift(2, 0),
    vC(yn(t["!ref"] || "A1"), n),
    n.write_shift(4, 4),
    Pe(e, 2152, n)
}
function hW(e, t) {
    for (var n = 0; n < 16; ++n)
        Pe(e, 224, gw({
            numFmtId: 0,
            style: !0
        }, 0, t));
    t.cellXfs.forEach(function(i) {
        Pe(e, 224, gw(i, 0, t))
    })
}
function dW(e, t) {
    for (var n = 0; n < t["!links"].length; ++n) {
        var i = t["!links"][n];
        Pe(e, 440, dU(i)),
        i[1].Tooltip && Pe(e, 2048, fU(i))
    }
    delete t["!links"]
}
function fW(e, t) {
    if (t) {
        var n = 0;
        t.forEach(function(i, r) {
            ++n <= 256 && i && Pe(e, 125, mU(y2(r, i), r))
        })
    }
}
function pW(e, t, n, i, r) {
    var s = 16 + jc(r.cellXfs, t, r);
    if (t.v == null && !t.bf) {
        Pe(e, 513, i0(n, i, s));
        return
    }
    if (t.bf)
        Pe(e, 6, BG(t, n, i, r, s));
    else
        switch (t.t) {
        case "d":
        case "n":
            var o = t.t == "d" ? Qr(Mr(t.v)) : t.v;
            Pe(e, 515, cU(n, i, o, s, r));
            break;
        case "b":
        case "e":
            Pe(e, 517, aU(n, i, t.v, s, r, t.t));
            break;
        case "s":
        case "str":
            if (r.bookSST) {
                var a = W7(r.Strings, t.v, r.revStrings);
                Pe(e, 253, nU(n, i, a, s, r))
            } else
                Pe(e, 516, iU(n, i, (t.v || "").slice(0, 255), s, r));
            break;
        default:
            Pe(e, 513, i0(n, i, s))
        }
}
function gW(e, t, n) {
    var i = Yr(), r = n.SheetNames[e], s = n.Sheets[r] || {}, o = (n || {}).Workbook || {}, a = (o.Sheets || [])[e] || {}, c = Array.isArray(s), l = t.biff == 8, u, h = "", d = [], f = yn(s["!ref"] || "A1"), g = l ? 65536 : 16384;
    if (f.e.c > 255 || f.e.r >= g) {
        if (t.WTF)
            throw new Error("Range " + (s["!ref"] || "A1") + " exceeds format limit A1:IV16384");
        f.e.c = Math.min(f.e.c, 255),
        f.e.r = Math.min(f.e.c, g - 1)
    }
    Pe(i, 2057, U7(n, 16, t)),
    Pe(i, 13, Ns(1)),
    Pe(i, 12, Ns(100)),
    Pe(i, 15, Or(!0)),
    Pe(i, 17, Or(!1)),
    Pe(i, 16, n0(.001)),
    Pe(i, 95, Or(!0)),
    Pe(i, 42, Or(!1)),
    Pe(i, 43, Or(!1)),
    Pe(i, 130, Ns(1)),
    Pe(i, 128, oU([0, 0])),
    Pe(i, 131, Or(!1)),
    Pe(i, 132, Or(!1)),
    l && fW(i, s["!cols"]),
    Pe(i, 512, sU(f, t)),
    l && (s["!links"] = []);
    for (var p = f.s.r; p <= f.e.r; ++p) {
        h = ji(p);
        for (var v = f.s.c; v <= f.e.c; ++v) {
            p === f.s.r && (d[v] = cr(v)),
            u = d[v] + h;
            var S = c ? (s[p] || [])[v] : s[u];
            S && (pW(i, S, p, v, t),
            l && S.l && s["!links"].push([u, S.l]))
        }
    }
    var x = a.CodeName || a.name || r;
    return l && Pe(i, 574, eU((o.Views || [])[0])),
    l && (s["!merges"] || []).length && Pe(i, 229, hU(s["!merges"])),
    l && dW(i, s),
    Pe(i, 442, mC(x, t)),
    l && uW(i, s),
    Pe(i, 10),
    i.end()
}
function mW(e, t, n) {
    var i = Yr()
      , r = (e || {}).Workbook || {}
      , s = r.Sheets || []
      , o = r.WBProps || {}
      , a = n.biff == 8
      , c = n.biff == 5;
    if (Pe(i, 2057, U7(e, 5, n)),
    n.bookType == "xla" && Pe(i, 135),
    Pe(i, 225, a ? Ns(1200) : null),
    Pe(i, 193, GB(2)),
    c && Pe(i, 191),
    c && Pe(i, 192),
    Pe(i, 226),
    Pe(i, 92, YB("SheetJS", n)),
    Pe(i, 66, Ns(a ? 1200 : 1252)),
    a && Pe(i, 353, Ns(0)),
    a && Pe(i, 448),
    Pe(i, 317, vU(e.SheetNames.length)),
    a && e.vbaraw && Pe(i, 211),
    a && e.vbaraw) {
        var l = o.CodeName || "ThisWorkbook";
        Pe(i, 442, mC(l, n))
    }
    Pe(i, 156, Ns(17)),
    Pe(i, 25, Or(!1)),
    Pe(i, 18, Or(!1)),
    Pe(i, 19, Ns(0)),
    a && Pe(i, 431, Or(!1)),
    a && Pe(i, 444, Ns(0)),
    Pe(i, 61, ZB(n)),
    Pe(i, 64, Or(!1)),
    Pe(i, 141, Ns(0)),
    Pe(i, 34, Or(b$(e) == "true")),
    Pe(i, 14, Or(!0)),
    a && Pe(i, 439, Or(!1)),
    Pe(i, 218, Ns(0)),
    cW(i, e, n),
    lW(i, e.SSF, n),
    hW(i, n),
    a && Pe(i, 352, Or(!1));
    var u = i.end()
      , h = Yr();
    a && Pe(h, 140, pU()),
    a && n.Strings && nW(h, 252, JB(n.Strings, n)),
    Pe(h, 10);
    var d = h.end()
      , f = Yr()
      , g = 0
      , p = 0;
    for (p = 0; p < e.SheetNames.length; ++p)
        g += (a ? 12 : 11) + (a ? 2 : 1) * e.SheetNames[p].length;
    var v = u.length + g + d.length;
    for (p = 0; p < e.SheetNames.length; ++p) {
        var S = s[p] || {};
        Pe(f, 133, QB({
            pos: v,
            hs: S.Hidden || 0,
            dt: 0,
            name: e.SheetNames[p]
        }, n)),
        v += t[p].length
    }
    var x = f.end();
    if (g != x.length)
        throw new Error("BS8 " + g + " != " + x.length);
    var w = [];
    return u.length && w.push(u),
    x.length && w.push(x),
    d.length && w.push(d),
    $i(w)
}
function vW(e, t) {
    var n = t || {}
      , i = [];
    e && !e.SSF && (e.SSF = Jr(Bn)),
    e && e.SSF && (f2(),
    d2(e.SSF),
    n.revssf = p2(e.SSF),
    n.revssf[e.SSF[65535]] = 0,
    n.ssf = e.SSF),
    n.Strings = [],
    n.Strings.Count = 0,
    n.Strings.Unique = 0,
    j7(n),
    n.cellXfs = [],
    jc(n.cellXfs, {}, {
        revssf: {
            General: 0
        }
    }),
    e.Props || (e.Props = {});
    for (var r = 0; r < e.SheetNames.length; ++r)
        i[i.length] = gW(r, n, e);
    return i.unshift(mW(e, i, n)),
    $i(i)
}
function $C(e, t) {
    for (var n = 0; n <= e.SheetNames.length; ++n) {
        var i = e.Sheets[e.SheetNames[n]];
        if (!(!i || !i["!ref"])) {
            var r = xs(i["!ref"]);
            r.e.c > 255 && typeof console < "u" && console.error && console.error("Worksheet '" + e.SheetNames[n] + "' extends beyond column IV (255).  Data may be lost.")
        }
    }
    var s = t || {};
    switch (s.biff || 2) {
    case 8:
    case 5:
        return vW(e, t);
    case 4:
    case 3:
    case 2:
        return aW(e, t)
    }
    throw new Error("invalid type " + s.bookType + " for BIFF")
}
function _W(e, t, n, i) {
    for (var r = e["!merges"] || [], s = [], o = t.s.c; o <= t.e.c; ++o) {
        for (var a = 0, c = 0, l = 0; l < r.length; ++l)
            if (!(r[l].s.r > n || r[l].s.c > o) && !(r[l].e.r < n || r[l].e.c < o)) {
                if (r[l].s.r < n || r[l].s.c < o) {
                    a = -1;
                    break
                }
                a = r[l].e.r - r[l].s.r + 1,
                c = r[l].e.c - r[l].s.c + 1;
                break
            }
        if (!(a < 0)) {
            var u = tn({
                r: n,
                c: o
            })
              , h = i.dense ? (e[n] || [])[o] : e[u]
              , d = h && h.v != null && (h.h || XL(h.w || (Ua(h),
            h.w) || "")) || ""
              , f = {};
            a > 1 && (f.rowspan = a),
            c > 1 && (f.colspan = c),
            i.editable ? d = '<span contenteditable="true">' + d + "</span>" : h && (f["data-t"] = h && h.t || "z",
            h.v != null && (f["data-v"] = h.v),
            h.z != null && (f["data-z"] = h.z),
            h.l && (h.l.Target || "#").charAt(0) != "#" && (d = '<a href="' + h.l.Target + '">' + d + "</a>")),
            f.id = (i.id || "sjs") + "-" + u,
            s.push(Me("td", d, f))
        }
    }
    var g = "<tr>";
    return g + s.join("") + "</tr>"
}
var yW = '<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>'
  , SW = "</body></html>";
function bW(e, t, n) {
    var i = [];
    return i.join("") + "<table" + (n && n.id ? ' id="' + n.id + '"' : "") + ">"
}
function WC(e, t) {
    var n = t || {}
      , i = n.header != null ? n.header : yW
      , r = n.footer != null ? n.footer : SW
      , s = [i]
      , o = xs(e["!ref"]);
    n.dense = Array.isArray(e),
    s.push(bW(e, o, n));
    for (var a = o.s.r; a <= o.e.r; ++a)
        s.push(_W(e, o, a, n));
    return s.push("</table>" + r),
    s.join("")
}
function jC(e, t, n) {
    var i = n || {};
    Qo != null && (i.dense = Qo);
    var r = 0
      , s = 0;
    if (i.origin != null)
        if (typeof i.origin == "number")
            r = i.origin;
        else {
            var o = typeof i.origin == "string" ? Ii(i.origin) : i.origin;
            r = o.r,
            s = o.c
        }
    var a = t.getElementsByTagName("tr")
      , c = Math.min(i.sheetRows || 1e7, a.length)
      , l = {
        s: {
            r: 0,
            c: 0
        },
        e: {
            r,
            c: s
        }
    };
    if (e["!ref"]) {
        var u = xs(e["!ref"]);
        l.s.r = Math.min(l.s.r, u.s.r),
        l.s.c = Math.min(l.s.c, u.s.c),
        l.e.r = Math.max(l.e.r, u.e.r),
        l.e.c = Math.max(l.e.c, u.e.c),
        r == -1 && (l.e.r = r = u.e.r + 1)
    }
    var h = []
      , d = 0
      , f = e["!rows"] || (e["!rows"] = [])
      , g = 0
      , p = 0
      , v = 0
      , S = 0
      , x = 0
      , w = 0;
    for (e["!cols"] || (e["!cols"] = []); g < a.length && p < c; ++g) {
        var k = a[g];
        if (xw(k)) {
            if (i.display)
                continue;
            f[p] = {
                hidden: !0
            }
        }
        var B = k.children;
        for (v = S = 0; v < B.length; ++v) {
            var N = B[v];
            if (!(i.display && xw(N))) {
                var E = N.hasAttribute("data-v") ? N.getAttribute("data-v") : N.hasAttribute("v") ? N.getAttribute("v") : JL(N.innerHTML)
                  , F = N.getAttribute("data-z") || N.getAttribute("z");
                for (d = 0; d < h.length; ++d) {
                    var O = h[d];
                    O.s.c == S + s && O.s.r < p + r && p + r <= O.e.r && (S = O.e.c + 1 - s,
                    d = -1)
                }
                w = +N.getAttribute("colspan") || 1,
                ((x = +N.getAttribute("rowspan") || 1) > 1 || w > 1) && h.push({
                    s: {
                        r: p + r,
                        c: S + s
                    },
                    e: {
                        r: p + r + (x || 1) - 1,
                        c: S + s + (w || 1) - 1
                    }
                });
                var V = {
                    t: "s",
                    v: E
                }
                  , X = N.getAttribute("data-t") || N.getAttribute("t") || "";
                E != null && (E.length == 0 ? V.t = X || "z" : i.raw || E.trim().length == 0 || X == "s" || (E === "TRUE" ? V = {
                    t: "b",
                    v: !0
                } : E === "FALSE" ? V = {
                    t: "b",
                    v: !1
                } : isNaN(Fa(E)) ? isNaN(E1(E).getDate()) || (V = {
                    t: "d",
                    v: Mr(E)
                },
                i.cellDates || (V = {
                    t: "n",
                    v: Qr(V.v)
                }),
                V.z = i.dateNF || Bn[14]) : V = {
                    t: "n",
                    v: Fa(E)
                })),
                V.z === void 0 && F != null && (V.z = F);
                var b = ""
                  , j = N.getElementsByTagName("A");
                if (j && j.length)
                    for (var de = 0; de < j.length && !(j[de].hasAttribute("href") && (b = j[de].getAttribute("href"),
                    b.charAt(0) != "#")); ++de)
                        ;
                b && b.charAt(0) != "#" && (V.l = {
                    Target: b
                }),
                i.dense ? (e[p + r] || (e[p + r] = []),
                e[p + r][S + s] = V) : e[tn({
                    c: S + s,
                    r: p + r
                })] = V,
                l.e.c < S + s && (l.e.c = S + s),
                S += w
            }
        }
        ++p
    }
    return h.length && (e["!merges"] = (e["!merges"] || []).concat(h)),
    l.e.r = Math.max(l.e.r, p - 1 + r),
    e["!ref"] = ii(l),
    p >= c && (e["!fullref"] = ii((l.e.r = a.length - g + p - 1 + r,
    l))),
    e
}
function qC(e, t) {
    var n = t || {}
      , i = n.dense ? [] : {};
    return jC(i, e, t)
}
function xW(e, t) {
    return r0(qC(e, t), t)
}
function xw(e) {
    var t = ""
      , n = wW(e);
    return n && (t = n(e).getPropertyValue("display")),
    t || (t = e.style && e.style.display),
    t === "none"
}
function wW(e) {
    return e.ownerDocument.defaultView && typeof e.ownerDocument.defaultView.getComputedStyle == "function" ? e.ownerDocument.defaultView.getComputedStyle : typeof getComputedStyle == "function" ? getComputedStyle : null
}
var CW = function() {
    var e = ["<office:master-styles>", '<style:master-page style:name="mp1" style:page-layout-name="mp1">', "<style:header/>", '<style:header-left style:display="false"/>', "<style:footer/>", '<style:footer-left style:display="false"/>', "</style:master-page>", "</office:master-styles>"].join("")
      , t = "<office:document-styles " + T1({
        "xmlns:office": "urn:oasis:names:tc:opendocument:xmlns:office:1.0",
        "xmlns:table": "urn:oasis:names:tc:opendocument:xmlns:table:1.0",
        "xmlns:style": "urn:oasis:names:tc:opendocument:xmlns:style:1.0",
        "xmlns:text": "urn:oasis:names:tc:opendocument:xmlns:text:1.0",
        "xmlns:draw": "urn:oasis:names:tc:opendocument:xmlns:drawing:1.0",
        "xmlns:fo": "urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0",
        "xmlns:xlink": "http://www.w3.org/1999/xlink",
        "xmlns:dc": "http://purl.org/dc/elements/1.1/",
        "xmlns:number": "urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0",
        "xmlns:svg": "urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0",
        "xmlns:of": "urn:oasis:names:tc:opendocument:xmlns:of:1.2",
        "office:version": "1.2"
    }) + ">" + e + "</office:document-styles>";
    return function() {
        return ri + t
    }
}()
  , ww = function() {
    var e = function(s) {
        return en(s).replace(/  +/g, function(o) {
            return '<text:s text:c="' + o.length + '"/>'
        }).replace(/\t/g, "<text:tab/>").replace(/\n/g, "</text:p><text:p>").replace(/^ /, "<text:s/>").replace(/ $/, "<text:s/>")
    }
      , t = `          <table:table-cell />
`
      , n = `          <table:covered-table-cell/>
`
      , i = function(s, o, a) {
        var c = [];
        c.push('      <table:table table:name="' + en(o.SheetNames[a]) + `" table:style-name="ta1">
`);
        var l = 0
          , u = 0
          , h = xs(s["!ref"] || "A1")
          , d = s["!merges"] || []
          , f = 0
          , g = Array.isArray(s);
        if (s["!cols"])
            for (u = 0; u <= h.e.c; ++u)
                c.push("        <table:table-column" + (s["!cols"][u] ? ' table:style-name="co' + s["!cols"][u].ods + '"' : "") + `></table:table-column>
`);
        var p = ""
          , v = s["!rows"] || [];
        for (l = 0; l < h.s.r; ++l)
            p = v[l] ? ' table:style-name="ro' + v[l].ods + '"' : "",
            c.push("        <table:table-row" + p + `></table:table-row>
`);
        for (; l <= h.e.r; ++l) {
            for (p = v[l] ? ' table:style-name="ro' + v[l].ods + '"' : "",
            c.push("        <table:table-row" + p + `>
`),
            u = 0; u < h.s.c; ++u)
                c.push(t);
            for (; u <= h.e.c; ++u) {
                var S = !1
                  , x = {}
                  , w = "";
                for (f = 0; f != d.length; ++f)
                    if (!(d[f].s.c > u) && !(d[f].s.r > l) && !(d[f].e.c < u) && !(d[f].e.r < l)) {
                        (d[f].s.c != u || d[f].s.r != l) && (S = !0),
                        x["table:number-columns-spanned"] = d[f].e.c - d[f].s.c + 1,
                        x["table:number-rows-spanned"] = d[f].e.r - d[f].s.r + 1;
                        break
                    }
                if (S) {
                    c.push(n);
                    continue
                }
                var k = tn({
                    r: l,
                    c: u
                })
                  , B = g ? (s[l] || [])[u] : s[k];
                if (B && B.f && (x["table:formula"] = en(WG(B.f)),
                B.F && B.F.slice(0, k.length) == k)) {
                    var N = xs(B.F);
                    x["table:number-matrix-columns-spanned"] = N.e.c - N.s.c + 1,
                    x["table:number-matrix-rows-spanned"] = N.e.r - N.s.r + 1
                }
                if (!B) {
                    c.push(t);
                    continue
                }
                switch (B.t) {
                case "b":
                    w = B.v ? "TRUE" : "FALSE",
                    x["office:value-type"] = "boolean",
                    x["office:boolean-value"] = B.v ? "true" : "false";
                    break;
                case "n":
                    w = B.w || String(B.v || 0),
                    x["office:value-type"] = "float",
                    x["office:value"] = B.v || 0;
                    break;
                case "s":
                case "str":
                    w = B.v == null ? "" : B.v,
                    x["office:value-type"] = "string";
                    break;
                case "d":
                    w = B.w || Mr(B.v).toISOString(),
                    x["office:value-type"] = "date",
                    x["office:date-value"] = Mr(B.v).toISOString(),
                    x["table:style-name"] = "ce1";
                    break;
                default:
                    c.push(t);
                    continue
                }
                var E = e(w);
                if (B.l && B.l.Target) {
                    var F = B.l.Target;
                    F = F.charAt(0) == "#" ? "#" + jG(F.slice(1)) : F,
                    F.charAt(0) != "#" && !F.match(/^\w+:/) && (F = "../" + F),
                    E = Me("text:a", E, {
                        "xlink:href": F.replace(/&/g, "&amp;")
                    })
                }
                c.push("          " + Me("table:table-cell", Me("text:p", E, {}), x) + `
`)
            }
            c.push(`        </table:table-row>
`)
        }
        return c.push(`      </table:table>
`),
        c.join("")
    }
      , r = function(s, o) {
        s.push(` <office:automatic-styles>
`),
        s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),
        s.push(`   <number:month number:style="long"/>
`),
        s.push(`   <number:text>/</number:text>
`),
        s.push(`   <number:day number:style="long"/>
`),
        s.push(`   <number:text>/</number:text>
`),
        s.push(`   <number:year/>
`),
        s.push(`  </number:date-style>
`);
        var a = 0;
        o.SheetNames.map(function(l) {
            return o.Sheets[l]
        }).forEach(function(l) {
            if (l && l["!cols"]) {
                for (var u = 0; u < l["!cols"].length; ++u)
                    if (l["!cols"][u]) {
                        var h = l["!cols"][u];
                        if (h.width == null && h.wpx == null && h.wch == null)
                            continue;
                        H7(h),
                        h.ods = a;
                        var d = l["!cols"][u].wpx + "px";
                        s.push('  <style:style style:name="co' + a + `" style:family="table-column">
`),
                        s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="' + d + `"/>
`),
                        s.push(`  </style:style>
`),
                        ++a
                    }
            }
        });
        var c = 0;
        o.SheetNames.map(function(l) {
            return o.Sheets[l]
        }).forEach(function(l) {
            if (l && l["!rows"]) {
                for (var u = 0; u < l["!rows"].length; ++u)
                    if (l["!rows"][u]) {
                        l["!rows"][u].ods = c;
                        var h = l["!rows"][u].hpx + "px";
                        s.push('  <style:style style:name="ro' + c + `" style:family="table-row">
`),
                        s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="' + h + `"/>
`),
                        s.push(`  </style:style>
`),
                        ++c
                    }
            }
        }),
        s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),
        s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),
        s.push(`  </style:style>
`),
        s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),
        s.push(` </office:automatic-styles>
`)
    };
    return function(o, a) {
        var c = [ri]
          , l = T1({
            "xmlns:office": "urn:oasis:names:tc:opendocument:xmlns:office:1.0",
            "xmlns:table": "urn:oasis:names:tc:opendocument:xmlns:table:1.0",
            "xmlns:style": "urn:oasis:names:tc:opendocument:xmlns:style:1.0",
            "xmlns:text": "urn:oasis:names:tc:opendocument:xmlns:text:1.0",
            "xmlns:draw": "urn:oasis:names:tc:opendocument:xmlns:drawing:1.0",
            "xmlns:fo": "urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0",
            "xmlns:xlink": "http://www.w3.org/1999/xlink",
            "xmlns:dc": "http://purl.org/dc/elements/1.1/",
            "xmlns:meta": "urn:oasis:names:tc:opendocument:xmlns:meta:1.0",
            "xmlns:number": "urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0",
            "xmlns:presentation": "urn:oasis:names:tc:opendocument:xmlns:presentation:1.0",
            "xmlns:svg": "urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0",
            "xmlns:chart": "urn:oasis:names:tc:opendocument:xmlns:chart:1.0",
            "xmlns:dr3d": "urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0",
            "xmlns:math": "http://www.w3.org/1998/Math/MathML",
            "xmlns:form": "urn:oasis:names:tc:opendocument:xmlns:form:1.0",
            "xmlns:script": "urn:oasis:names:tc:opendocument:xmlns:script:1.0",
            "xmlns:ooo": "http://openoffice.org/2004/office",
            "xmlns:ooow": "http://openoffice.org/2004/writer",
            "xmlns:oooc": "http://openoffice.org/2004/calc",
            "xmlns:dom": "http://www.w3.org/2001/xml-events",
            "xmlns:xforms": "http://www.w3.org/2002/xforms",
            "xmlns:xsd": "http://www.w3.org/2001/XMLSchema",
            "xmlns:xsi": "http://www.w3.org/2001/XMLSchema-instance",
            "xmlns:sheet": "urn:oasis:names:tc:opendocument:sh33tjs:1.0",
            "xmlns:rpt": "http://openoffice.org/2005/report",
            "xmlns:of": "urn:oasis:names:tc:opendocument:xmlns:of:1.2",
            "xmlns:xhtml": "http://www.w3.org/1999/xhtml",
            "xmlns:grddl": "http://www.w3.org/2003/g/data-view#",
            "xmlns:tableooo": "http://openoffice.org/2009/table",
            "xmlns:drawooo": "http://openoffice.org/2010/draw",
            "xmlns:calcext": "urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0",
            "xmlns:loext": "urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0",
            "xmlns:field": "urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0",
            "xmlns:formx": "urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0",
            "xmlns:css3t": "http://www.w3.org/TR/css3-text/",
            "office:version": "1.2"
        })
          , u = T1({
            "xmlns:config": "urn:oasis:names:tc:opendocument:xmlns:config:1.0",
            "office:mimetype": "application/vnd.oasis.opendocument.spreadsheet"
        });
        a.bookType == "fods" ? (c.push("<office:document" + l + u + `>
`),
        c.push(aC().replace(/office:document-meta/g, "office:meta"))) : c.push("<office:document-content" + l + `>
`),
        r(c, o),
        c.push(`  <office:body>
`),
        c.push(`    <office:spreadsheet>
`);
        for (var h = 0; h != o.SheetNames.length; ++h)
            c.push(i(o.Sheets[o.SheetNames[h]], o, h, a));
        return c.push(`    </office:spreadsheet>
`),
        c.push(`  </office:body>
`),
        a.bookType == "fods" ? c.push("</office:document>") : c.push("</office:document-content>"),
        c.join("")
    }
}();
function zC(e, t) {
    if (t.bookType == "fods")
        return ww(e, t);
    var n = E7()
      , i = ""
      , r = []
      , s = [];
    return i = "mimetype",
    Tt(n, i, "application/vnd.oasis.opendocument.spreadsheet"),
    i = "content.xml",
    Tt(n, i, ww(e, t)),
    r.push([i, "text/xml"]),
    s.push([i, "ContentFile"]),
    i = "styles.xml",
    Tt(n, i, CW(e, t)),
    r.push([i, "text/xml"]),
    s.push([i, "StylesFile"]),
    i = "meta.xml",
    Tt(n, i, ri + aC()),
    r.push([i, "text/xml"]),
    s.push([i, "MetadataFile"]),
    i = "manifest.rdf",
    Tt(n, i, FB(s)),
    r.push([i, "application/rdf+xml"]),
    i = "META-INF/manifest.xml",
    Tt(n, i, DB(r)),
    n
}
function l2(e) {
    return new DataView(e.buffer,e.byteOffset,e.byteLength)
}
function EW(e) {
    return typeof TextEncoder < "u" ? new TextEncoder().encode(e) : lo(Da(e))
}
function TW(e, t) {
    e: for (var n = 0; n <= e.length - t.length; ++n) {
        for (var i = 0; i < t.length; ++i)
            if (e[n + i] != t[i])
                continue e;
        return !0
    }
    return !1
}
function Wc(e) {
    var t = e.reduce(function(r, s) {
        return r + s.length
    }, 0)
      , n = new Uint8Array(t)
      , i = 0;
    return e.forEach(function(r) {
        n.set(r, i),
        i += r.length
    }),
    n
}
function OW(e, t, n) {
    var i = Math.floor(n == 0 ? 0 : Math.LOG10E * Math.log(Math.abs(n))) + 6176 - 20
      , r = n / Math.pow(10, i - 6176);
    e[t + 15] |= i >> 7,
    e[t + 14] |= (i & 127) << 1;
    for (var s = 0; r >= 1; ++s,
    r /= 256)
        e[t + s] = r & 255;
    e[t + 15] |= n >= 0 ? 0 : 128
}
function O1(e, t) {
    var n = t ? t[0] : 0
      , i = e[n] & 127;
    e: if (e[n++] >= 128 && (i |= (e[n] & 127) << 7,
    e[n++] < 128 || (i |= (e[n] & 127) << 14,
    e[n++] < 128) || (i |= (e[n] & 127) << 21,
    e[n++] < 128) || (i += (e[n] & 127) * Math.pow(2, 28),
    ++n,
    e[n++] < 128) || (i += (e[n] & 127) * Math.pow(2, 35),
    ++n,
    e[n++] < 128) || (i += (e[n] & 127) * Math.pow(2, 42),
    ++n,
    e[n++] < 128)))
        break e;
    return t && (t[0] = n),
    i
}
function Jt(e) {
    var t = new Uint8Array(7);
    t[0] = e & 127;
    var n = 1;
    e: if (e > 127) {
        if (t[n - 1] |= 128,
        t[n] = e >> 7 & 127,
        ++n,
        e <= 16383 || (t[n - 1] |= 128,
        t[n] = e >> 14 & 127,
        ++n,
        e <= 2097151) || (t[n - 1] |= 128,
        t[n] = e >> 21 & 127,
        ++n,
        e <= 268435455) || (t[n - 1] |= 128,
        t[n] = e / 256 >>> 21 & 127,
        ++n,
        e <= 34359738367) || (t[n - 1] |= 128,
        t[n] = e / 65536 >>> 21 & 127,
        ++n,
        e <= 4398046511103))
            break e;
        t[n - 1] |= 128,
        t[n] = e / 16777216 >>> 21 & 127,
        ++n
    }
    return t.slice(0, n)
}
function qu(e) {
    var t = 0
      , n = e[t] & 127;
    e: if (e[t++] >= 128) {
        if (n |= (e[t] & 127) << 7,
        e[t++] < 128 || (n |= (e[t] & 127) << 14,
        e[t++] < 128) || (n |= (e[t] & 127) << 21,
        e[t++] < 128))
            break e;
        n |= (e[t] & 127) << 28
    }
    return n
}
function vi(e) {
    for (var t = [], n = [0]; n[0] < e.length; ) {
        var i = n[0]
          , r = O1(e, n)
          , s = r & 7;
        r = Math.floor(r / 8);
        var o = 0, a;
        if (r == 0)
            break;
        switch (s) {
        case 0:
            {
                for (var c = n[0]; e[n[0]++] >= 128; )
                    ;
                a = e.slice(c, n[0])
            }
            break;
        case 5:
            o = 4,
            a = e.slice(n[0], n[0] + o),
            n[0] += o;
            break;
        case 1:
            o = 8,
            a = e.slice(n[0], n[0] + o),
            n[0] += o;
            break;
        case 2:
            o = O1(e, n),
            a = e.slice(n[0], n[0] + o),
            n[0] += o;
            break;
        case 3:
        case 4:
        default:
            throw new Error("PB Type ".concat(s, " for Field ").concat(r, " at offset ").concat(i))
        }
        var l = {
            data: a,
            type: s
        };
        t[r] == null ? t[r] = [l] : t[r].push(l)
    }
    return t
}
function Gi(e) {
    var t = [];
    return e.forEach(function(n, i) {
        n.forEach(function(r) {
            r.data && (t.push(Jt(i * 8 + r.type)),
            r.type == 2 && t.push(Jt(r.data.length)),
            t.push(r.data))
        })
    }),
    Wc(t)
}
function ao(e) {
    for (var t, n = [], i = [0]; i[0] < e.length; ) {
        var r = O1(e, i)
          , s = vi(e.slice(i[0], i[0] + r));
        i[0] += r;
        var o = {
            id: qu(s[1][0].data),
            messages: []
        };
        s[2].forEach(function(a) {
            var c = vi(a.data)
              , l = qu(c[3][0].data);
            o.messages.push({
                meta: c,
                data: e.slice(i[0], i[0] + l)
            }),
            i[0] += l
        }),
        (t = s[3]) != null && t[0] && (o.merge = qu(s[3][0].data) >>> 0 > 0),
        n.push(o)
    }
    return n
}
function Bu(e) {
    var t = [];
    return e.forEach(function(n) {
        var i = [];
        i[1] = [{
            data: Jt(n.id),
            type: 0
        }],
        i[2] = [],
        n.merge != null && (i[3] = [{
            data: Jt(+!!n.merge),
            type: 0
        }]);
        var r = [];
        n.messages.forEach(function(o) {
            r.push(o.data),
            o.meta[3] = [{
                type: 0,
                data: Jt(o.data.length)
            }],
            i[2].push({
                data: Gi(o.meta),
                type: 2
            })
        });
        var s = Gi(i);
        t.push(Jt(s.length)),
        t.push(s),
        r.forEach(function(o) {
            return t.push(o)
        })
    }),
    Wc(t)
}
function MW(e, t) {
    if (e != 0)
        throw new Error("Unexpected Snappy chunk type ".concat(e));
    for (var n = [0], i = O1(t, n), r = []; n[0] < t.length; ) {
        var s = t[n[0]] & 3;
        if (s == 0) {
            var o = t[n[0]++] >> 2;
            if (o < 60)
                ++o;
            else {
                var a = o - 59;
                o = t[n[0]],
                a > 1 && (o |= t[n[0] + 1] << 8),
                a > 2 && (o |= t[n[0] + 2] << 16),
                a > 3 && (o |= t[n[0] + 3] << 24),
                o >>>= 0,
                o++,
                n[0] += a
            }
            r.push(t.slice(n[0], n[0] + o)),
            n[0] += o;
            continue
        } else {
            var c = 0
              , l = 0;
            if (s == 1 ? (l = (t[n[0]] >> 2 & 7) + 4,
            c = (t[n[0]++] & 224) << 3,
            c |= t[n[0]++]) : (l = (t[n[0]++] >> 2) + 1,
            s == 2 ? (c = t[n[0]] | t[n[0] + 1] << 8,
            n[0] += 2) : (c = (t[n[0]] | t[n[0] + 1] << 8 | t[n[0] + 2] << 16 | t[n[0] + 3] << 24) >>> 0,
            n[0] += 4)),
            r = [Wc(r)],
            c == 0)
                throw new Error("Invalid offset 0");
            if (c > r[0].length)
                throw new Error("Invalid offset beyond length");
            if (l >= c)
                for (r.push(r[0].slice(-c)),
                l -= c; l >= r[r.length - 1].length; )
                    r.push(r[r.length - 1]),
                    l -= r[r.length - 1].length;
            r.push(r[0].slice(-c, -c + l))
        }
    }
    var u = Wc(r);
    if (u.length != i)
        throw new Error("Unexpected length: ".concat(u.length, " != ").concat(i));
    return u
}
function co(e) {
    for (var t = [], n = 0; n < e.length; ) {
        var i = e[n++]
          , r = e[n] | e[n + 1] << 8 | e[n + 2] << 16;
        n += 3,
        t.push(MW(i, e.slice(n, n + r))),
        n += r
    }
    if (n !== e.length)
        throw new Error("data is not a valid framed stream!");
    return Wc(t)
}
function Uu(e) {
    for (var t = [], n = 0; n < e.length; ) {
        var i = Math.min(e.length - n, 268435455)
          , r = new Uint8Array(4);
        t.push(r);
        var s = Jt(i)
          , o = s.length;
        t.push(s),
        i <= 60 ? (o++,
        t.push(new Uint8Array([i - 1 << 2]))) : i <= 256 ? (o += 2,
        t.push(new Uint8Array([240, i - 1 & 255]))) : i <= 65536 ? (o += 3,
        t.push(new Uint8Array([244, i - 1 & 255, i - 1 >> 8 & 255]))) : i <= 16777216 ? (o += 4,
        t.push(new Uint8Array([248, i - 1 & 255, i - 1 >> 8 & 255, i - 1 >> 16 & 255]))) : i <= 4294967296 && (o += 5,
        t.push(new Uint8Array([252, i - 1 & 255, i - 1 >> 8 & 255, i - 1 >> 16 & 255, i - 1 >>> 24 & 255]))),
        t.push(e.slice(n, n + i)),
        o += i,
        r[0] = 0,
        r[1] = o & 255,
        r[2] = o >> 8 & 255,
        r[3] = o >> 16 & 255,
        n += i
    }
    return Wc(t)
}
function m7(e, t) {
    var n = new Uint8Array(32)
      , i = l2(n)
      , r = 12
      , s = 0;
    switch (n[0] = 5,
    e.t) {
    case "n":
        n[1] = 2,
        OW(n, r, e.v),
        s |= 1,
        r += 16;
        break;
    case "b":
        n[1] = 6,
        i.setFloat64(r, e.v ? 1 : 0, !0),
        s |= 2,
        r += 8;
        break;
    case "s":
        if (t.indexOf(e.v) == -1)
            throw new Error("Value ".concat(e.v, " missing from SST!"));
        n[1] = 3,
        i.setUint32(r, t.indexOf(e.v), !0),
        s |= 8,
        r += 4;
        break;
    default:
        throw "unsupported cell type " + e.t
    }
    return i.setUint32(8, s, !0),
    n.slice(0, r)
}
function v7(e, t) {
    var n = new Uint8Array(32)
      , i = l2(n)
      , r = 12
      , s = 0;
    switch (n[0] = 3,
    e.t) {
    case "n":
        n[2] = 2,
        i.setFloat64(r, e.v, !0),
        s |= 32,
        r += 8;
        break;
    case "b":
        n[2] = 6,
        i.setFloat64(r, e.v ? 1 : 0, !0),
        s |= 32,
        r += 8;
        break;
    case "s":
        if (t.indexOf(e.v) == -1)
            throw new Error("Value ".concat(e.v, " missing from SST!"));
        n[2] = 3,
        i.setUint32(r, t.indexOf(e.v), !0),
        s |= 16,
        r += 4;
        break;
    default:
        throw "unsupported cell type " + e.t
    }
    return i.setUint32(4, s, !0),
    n.slice(0, r)
}
function Uc(e) {
    var t = vi(e);
    return O1(t[1][0].data)
}
function PW(e, t, n) {
    var i, r, s, o;
    if (!((i = e[6]) != null && i[0]) || !((r = e[7]) != null && r[0]))
        throw "Mutation only works on post-BNC storages!";
    var a = ((o = (s = e[8]) == null ? void 0 : s[0]) == null ? void 0 : o.data) && qu(e[8][0].data) > 0 || !1;
    if (a)
        throw "Math only works with normal offsets";
    for (var c = 0, l = l2(e[7][0].data), u = 0, h = [], d = l2(e[4][0].data), f = 0, g = [], p = 0; p < t.length; ++p) {
        if (t[p] == null) {
            l.setUint16(p * 2, 65535, !0),
            d.setUint16(p * 2, 65535);
            continue
        }
        l.setUint16(p * 2, u, !0),
        d.setUint16(p * 2, f, !0);
        var v, S;
        switch (typeof t[p]) {
        case "string":
            v = m7({
                t: "s",
                v: t[p]
            }, n),
            S = v7({
                t: "s",
                v: t[p]
            }, n);
            break;
        case "number":
            v = m7({
                t: "n",
                v: t[p]
            }, n),
            S = v7({
                t: "n",
                v: t[p]
            }, n);
            break;
        case "boolean":
            v = m7({
                t: "b",
                v: t[p]
            }, n),
            S = v7({
                t: "b",
                v: t[p]
            }, n);
            break;
        default:
            throw new Error("Unsupported value " + t[p])
        }
        h.push(v),
        u += v.length,
        g.push(S),
        f += S.length,
        ++c
    }
    for (e[2][0].data = Jt(c); p < e[7][0].data.length / 2; ++p)
        l.setUint16(p * 2, 65535, !0),
        d.setUint16(p * 2, 65535, !0);
    return e[6][0].data = Wc(h),
    e[3][0].data = Wc(g),
    c
}
function kW(e, t) {
    if (!t || !t.numbers)
        throw new Error("Must pass a `numbers` option -- check the README");
    var n = e.Sheets[e.SheetNames[0]];
    e.SheetNames.length > 1 && console.error("The Numbers writer currently writes only the first table");
    var i = xs(n["!ref"]);
    i.s.r = i.s.c = 0;
    var r = !1;
    i.e.c > 9 && (r = !0,
    i.e.c = 9),
    i.e.r > 49 && (r = !0,
    i.e.r = 49),
    r && console.error("The Numbers writer is currently limited to ".concat(ii(i)));
    var s = u2(n, {
        range: i,
        header: 1
    })
      , o = ["~Sh33tJ5~"];
    s.forEach(function(L) {
        return L.forEach(function(U) {
            typeof U == "string" && o.push(U)
        })
    });
    var a = {}
      , c = []
      , l = nn.read(t.numbers, {
        type: "base64"
    });
    l.FileIndex.map(function(L, U) {
        return [L, l.FullPaths[U]]
    }).forEach(function(L) {
        var U = L[0]
          , te = L[1];
        if (U.type == 2 && U.name.match(/\.iwa/)) {
            var Ce = U.content
              , Ve = co(Ce)
              , De = ao(Ve);
            De.forEach(function(ge) {
                c.push(ge.id),
                a[ge.id] = {
                    deps: [],
                    location: te,
                    type: qu(ge.messages[0].meta[1][0].data)
                }
            })
        }
    }),
    c.sort(function(L, U) {
        return L - U
    });
    var u = c.filter(function(L) {
        return L > 1
    }).map(function(L) {
        return [L, Jt(L)]
    });
    l.FileIndex.map(function(L, U) {
        return [L, l.FullPaths[U]]
    }).forEach(function(L) {
        var U = L[0]
          , te = L[1];
        if (U.name.match(/\.iwa/)) {
            var Ce = ao(co(U.content));
            Ce.forEach(function(Ve) {
                Ve.messages.forEach(function(De) {
                    u.forEach(function(ge) {
                        Ve.messages.some(function(kt) {
                            return qu(kt.meta[1][0].data) != 11006 && TW(kt.data, ge[1])
                        }) && a[ge[0]].deps.push(Ve.id)
                    })
                })
            })
        }
    });
    function h() {
        for (var L = 927262; L < 2e6; ++L)
            if (!a[L])
                return L;
        throw new Error("Too many messages")
    }
    for (var d = nn.find(l, a[1].location), f = ao(co(d.content)), g, p = 0; p < f.length; ++p) {
        var v = f[p];
        v.id == 1 && (g = v)
    }
    var S = Uc(vi(g.messages[0].data)[1][0].data);
    for (d = nn.find(l, a[S].location),
    f = ao(co(d.content)),
    p = 0; p < f.length; ++p)
        v = f[p],
        v.id == S && (g = v);
    for (S = Uc(vi(g.messages[0].data)[2][0].data),
    d = nn.find(l, a[S].location),
    f = ao(co(d.content)),
    p = 0; p < f.length; ++p)
        v = f[p],
        v.id == S && (g = v);
    for (S = Uc(vi(g.messages[0].data)[2][0].data),
    d = nn.find(l, a[S].location),
    f = ao(co(d.content)),
    p = 0; p < f.length; ++p)
        v = f[p],
        v.id == S && (g = v);
    var x = vi(g.messages[0].data);
    {
        x[6][0].data = Jt(i.e.r + 1),
        x[7][0].data = Jt(i.e.c + 1);
        var w = Uc(x[46][0].data)
          , k = nn.find(l, a[w].location)
          , B = ao(co(k.content));
        {
            for (var N = 0; N < B.length && B[N].id != w; ++N)
                ;
            if (B[N].id != w)
                throw "Bad ColumnRowUIDMapArchive";
            var E = vi(B[N].messages[0].data);
            E[1] = [],
            E[2] = [],
            E[3] = [];
            for (var F = 0; F <= i.e.c; ++F) {
                var O = [];
                O[1] = O[2] = [{
                    type: 0,
                    data: Jt(F + 420690)
                }],
                E[1].push({
                    type: 2,
                    data: Gi(O)
                }),
                E[2].push({
                    type: 0,
                    data: Jt(F)
                }),
                E[3].push({
                    type: 0,
                    data: Jt(F)
                })
            }
            E[4] = [],
            E[5] = [],
            E[6] = [];
            for (var V = 0; V <= i.e.r; ++V)
                O = [],
                O[1] = O[2] = [{
                    type: 0,
                    data: Jt(V + 726270)
                }],
                E[4].push({
                    type: 2,
                    data: Gi(O)
                }),
                E[5].push({
                    type: 0,
                    data: Jt(V)
                }),
                E[6].push({
                    type: 0,
                    data: Jt(V)
                });
            B[N].messages[0].data = Gi(E)
        }
        k.content = Uu(Bu(B)),
        k.size = k.content.length,
        delete x[46];
        var X = vi(x[4][0].data);
        {
            X[7][0].data = Jt(i.e.r + 1);
            var b = vi(X[1][0].data)
              , j = Uc(b[2][0].data);
            k = nn.find(l, a[j].location),
            B = ao(co(k.content));
            {
                if (B[0].id != j)
                    throw "Bad HeaderStorageBucket";
                var de = vi(B[0].messages[0].data);
                for (V = 0; V < s.length; ++V) {
                    var he = vi(de[2][0].data);
                    he[1][0].data = Jt(V),
                    he[4][0].data = Jt(s[V].length),
                    de[2][V] = {
                        type: de[2][0].type,
                        data: Gi(he)
                    }
                }
                B[0].messages[0].data = Gi(de)
            }
            k.content = Uu(Bu(B)),
            k.size = k.content.length;
            var Re = Uc(X[2][0].data);
            k = nn.find(l, a[Re].location),
            B = ao(co(k.content));
            {
                if (B[0].id != Re)
                    throw "Bad HeaderStorageBucket";
                for (de = vi(B[0].messages[0].data),
                F = 0; F <= i.e.c; ++F)
                    he = vi(de[2][0].data),
                    he[1][0].data = Jt(F),
                    he[4][0].data = Jt(i.e.r + 1),
                    de[2][F] = {
                        type: de[2][0].type,
                        data: Gi(he)
                    };
                B[0].messages[0].data = Gi(de)
            }
            k.content = Uu(Bu(B)),
            k.size = k.content.length;
            var Xe = Uc(X[4][0].data);
            (function() {
                for (var L = nn.find(l, a[Xe].location), U = ao(co(L.content)), te, Ce = 0; Ce < U.length; ++Ce) {
                    var Ve = U[Ce];
                    Ve.id == Xe && (te = Ve)
                }
                var De = vi(te.messages[0].data);
                {
                    De[3] = [];
                    var ge = [];
                    o.forEach(function(hn, Ot) {
                        ge[1] = [{
                            type: 0,
                            data: Jt(Ot)
                        }],
                        ge[2] = [{
                            type: 0,
                            data: Jt(1)
                        }],
                        ge[3] = [{
                            type: 2,
                            data: EW(hn)
                        }],
                        De[3].push({
                            type: 2,
                            data: Gi(ge)
                        })
                    })
                }
                te.messages[0].data = Gi(De);
                var kt = Bu(U)
                  , xt = Uu(kt);
                L.content = xt,
                L.size = L.content.length
            }
            )();
            var pt = vi(X[3][0].data);
            {
                var it = pt[1][0];
                delete pt[2];
                var fe = vi(it.data);
                {
                    var Ge = Uc(fe[2][0].data);
                    (function() {
                        for (var L = nn.find(l, a[Ge].location), U = ao(co(L.content)), te, Ce = 0; Ce < U.length; ++Ce) {
                            var Ve = U[Ce];
                            Ve.id == Ge && (te = Ve)
                        }
                        var De = vi(te.messages[0].data);
                        {
                            delete De[6],
                            delete pt[7];
                            var ge = new Uint8Array(De[5][0].data);
                            De[5] = [];
                            for (var kt = 0, xt = 0; xt <= i.e.r; ++xt) {
                                var hn = vi(ge);
                                kt += PW(hn, s[xt], o),
                                hn[1][0].data = Jt(xt),
                                De[5].push({
                                    data: Gi(hn),
                                    type: 2
                                })
                            }
                            De[1] = [{
                                type: 0,
                                data: Jt(i.e.c + 1)
                            }],
                            De[2] = [{
                                type: 0,
                                data: Jt(i.e.r + 1)
                            }],
                            De[3] = [{
                                type: 0,
                                data: Jt(kt)
                            }],
                            De[4] = [{
                                type: 0,
                                data: Jt(i.e.r + 1)
                            }]
                        }
                        te.messages[0].data = Gi(De);
                        var Ot = Bu(U)
                          , bi = Uu(Ot);
                        L.content = bi,
                        L.size = L.content.length
                    }
                    )()
                }
                it.data = Gi(fe)
            }
            X[3][0].data = Gi(pt)
        }
        x[4][0].data = Gi(X)
    }
    g.messages[0].data = Gi(x);
    var A = Bu(f)
      , q = Uu(A);
    return d.content = q,
    d.size = d.content.length,
    l
}
function AW(e) {
    return function(n) {
        for (var i = 0; i != e.length; ++i) {
            var r = e[i];
            n[r[0]] === void 0 && (n[r[0]] = r[1]),
            r[2] === "n" && (n[r[0]] = Number(n[r[0]]))
        }
    }
}
function j7(e) {
    AW([["cellDates", !1], ["bookSST", !1], ["bookType", "xlsx"], ["compression", !1], ["WTF", !1]])(e)
}
function IW(e, t) {
    return t.bookType == "ods" ? zC(e, t) : t.bookType == "numbers" ? kW(e, t) : t.bookType == "xlsb" ? RW(e, t) : DW(e, t)
}
function RW(e, t) {
    Gu = 1024,
    e && !e.SSF && (e.SSF = Jr(Bn)),
    e && e.SSF && (f2(),
    d2(e.SSF),
    t.revssf = p2(e.SSF),
    t.revssf[e.SSF[65535]] = 0,
    t.ssf = e.SSF),
    t.rels = {},
    t.wbrels = {},
    t.Strings = [],
    t.Strings.Count = 0,
    t.Strings.Unique = 0,
    b1 ? t.revStrings = new Map : (t.revStrings = {},
    t.revStrings.foo = [],
    delete t.revStrings.foo);
    var n = t.bookType == "xlsb" ? "bin" : "xml"
      , i = PC.indexOf(t.bookType) > -1
      , r = rC();
    j7(t = t || {});
    var s = E7()
      , o = ""
      , a = 0;
    if (t.cellXfs = [],
    jc(t.cellXfs, {}, {
        revssf: {
            General: 0
        }
    }),
    e.Props || (e.Props = {}),
    o = "docProps/core.xml",
    Tt(s, o, cC(e.Props, t)),
    r.coreprops.push(o),
    Zt(t.rels, 2, o, qt.CORE_PROPS),
    o = "docProps/app.xml",
    !(e.Props && e.Props.SheetNames))
        if (!e.Workbook || !e.Workbook.Sheets)
            e.Props.SheetNames = e.SheetNames;
        else {
            for (var c = [], l = 0; l < e.SheetNames.length; ++l)
                (e.Workbook.Sheets[l] || {}).Hidden != 2 && c.push(e.SheetNames[l]);
            e.Props.SheetNames = c
        }
    for (e.Props.Worksheets = e.Props.SheetNames.length,
    Tt(s, o, uC(e.Props, t)),
    r.extprops.push(o),
    Zt(t.rels, 3, o, qt.EXT_PROPS),
    e.Custprops !== e.Props && qi(e.Custprops || {}).length > 0 && (o = "docProps/custom.xml",
    Tt(s, o, hC(e.Custprops, t)),
    r.custprops.push(o),
    Zt(t.rels, 4, o, qt.CUST_PROPS)),
    a = 1; a <= e.SheetNames.length; ++a) {
        var u = {
            "!id": {}
        }
          , h = e.Sheets[e.SheetNames[a - 1]]
          , d = (h || {})["!type"] || "sheet";
        switch (d) {
        case "chart":
        default:
            o = "xl/worksheets/sheet" + a + "." + n,
            Tt(s, o, F$(a - 1, o, t, e, u)),
            r.sheets.push(o),
            Zt(t.wbrels, -1, "worksheets/sheet" + a + "." + n, qt.WS[0])
        }
        if (h) {
            var f = h["!comments"]
              , g = !1
              , p = "";
            f && f.length > 0 && (p = "xl/comments" + a + "." + n,
            Tt(s, p, U$(f, p, t)),
            r.comments.push(p),
            Zt(u, -1, "../comments" + a + "." + n, qt.CMNT),
            g = !0),
            h["!legacy"] && g && Tt(s, "xl/drawings/vmlDrawing" + a + ".vml", OC(a, h["!comments"])),
            delete h["!comments"],
            delete h["!legacy"]
        }
        u["!id"].rId1 && Tt(s, oC(o), Wu(u))
    }
    return t.Strings != null && t.Strings.length > 0 && (o = "xl/sharedStrings." + n,
    Tt(s, o, B$(t.Strings, o, t)),
    r.strs.push(o),
    Zt(t.wbrels, -1, "sharedStrings." + n, qt.SST)),
    o = "xl/workbook." + n,
    Tt(s, o, N$(e, o, t)),
    r.workbooks.push(o),
    Zt(t.rels, 1, o, qt.WB),
    o = "xl/theme/theme1.xml",
    Tt(s, o, EC(e.Themes, t)),
    r.themes.push(o),
    Zt(t.wbrels, -1, "theme/theme1.xml", qt.THEME),
    o = "xl/styles." + n,
    Tt(s, o, L$(e, o, t)),
    r.styles.push(o),
    Zt(t.wbrels, -1, "styles." + n, qt.STY),
    e.vbaraw && i && (o = "xl/vbaProject.bin",
    Tt(s, o, e.vbaraw),
    r.vba.push(o),
    Zt(t.wbrels, -1, "vbaProject.bin", qt.VBA)),
    o = "xl/metadata." + n,
    Tt(s, o, H$(o)),
    r.metadata.push(o),
    Zt(t.wbrels, -1, "metadata." + n, qt.XLMETA),
    Tt(s, "[Content_Types].xml", sC(r, t)),
    Tt(s, "_rels/.rels", Wu(t.rels)),
    Tt(s, "xl/_rels/workbook." + n + ".rels", Wu(t.wbrels)),
    delete t.revssf,
    delete t.ssf,
    s
}
function DW(e, t) {
    Gu = 1024,
    e && !e.SSF && (e.SSF = Jr(Bn)),
    e && e.SSF && (f2(),
    d2(e.SSF),
    t.revssf = p2(e.SSF),
    t.revssf[e.SSF[65535]] = 0,
    t.ssf = e.SSF),
    t.rels = {},
    t.wbrels = {},
    t.Strings = [],
    t.Strings.Count = 0,
    t.Strings.Unique = 0,
    b1 ? t.revStrings = new Map : (t.revStrings = {},
    t.revStrings.foo = [],
    delete t.revStrings.foo);
    var n = "xml"
      , i = PC.indexOf(t.bookType) > -1
      , r = rC();
    j7(t = t || {});
    var s = E7()
      , o = ""
      , a = 0;
    if (t.cellXfs = [],
    jc(t.cellXfs, {}, {
        revssf: {
            General: 0
        }
    }),
    e.Props || (e.Props = {}),
    o = "docProps/core.xml",
    Tt(s, o, cC(e.Props, t)),
    r.coreprops.push(o),
    Zt(t.rels, 2, o, qt.CORE_PROPS),
    o = "docProps/app.xml",
    !(e.Props && e.Props.SheetNames))
        if (!e.Workbook || !e.Workbook.Sheets)
            e.Props.SheetNames = e.SheetNames;
        else {
            for (var c = [], l = 0; l < e.SheetNames.length; ++l)
                (e.Workbook.Sheets[l] || {}).Hidden != 2 && c.push(e.SheetNames[l]);
            e.Props.SheetNames = c
        }
    e.Props.Worksheets = e.Props.SheetNames.length,
    Tt(s, o, uC(e.Props, t)),
    r.extprops.push(o),
    Zt(t.rels, 3, o, qt.EXT_PROPS),
    e.Custprops !== e.Props && qi(e.Custprops || {}).length > 0 && (o = "docProps/custom.xml",
    Tt(s, o, hC(e.Custprops, t)),
    r.custprops.push(o),
    Zt(t.rels, 4, o, qt.CUST_PROPS));
    var u = ["SheetJ5"];
    for (t.tcid = 0,
    a = 1; a <= e.SheetNames.length; ++a) {
        var h = {
            "!id": {}
        }
          , d = e.Sheets[e.SheetNames[a - 1]]
          , f = (d || {})["!type"] || "sheet";
        switch (f) {
        case "chart":
        default:
            o = "xl/worksheets/sheet" + a + "." + n,
            Tt(s, o, BC(a - 1, t, e, h)),
            r.sheets.push(o),
            Zt(t.wbrels, -1, "worksheets/sheet" + a + "." + n, qt.WS[0])
        }
        if (d) {
            var g = d["!comments"]
              , p = !1
              , v = "";
            if (g && g.length > 0) {
                var S = !1;
                g.forEach(function(x) {
                    x[1].forEach(function(w) {
                        w.T == !0 && (S = !0)
                    })
                }),
                S && (v = "xl/threadedComments/threadedComment" + a + "." + n,
                Tt(s, v, hH(g, u, t)),
                r.threadedcomments.push(v),
                Zt(h, -1, "../threadedComments/threadedComment" + a + "." + n, qt.TCMNT)),
                v = "xl/comments" + a + "." + n,
                Tt(s, v, MC(g, t)),
                r.comments.push(v),
                Zt(h, -1, "../comments" + a + "." + n, qt.CMNT),
                p = !0
            }
            d["!legacy"] && p && Tt(s, "xl/drawings/vmlDrawing" + a + ".vml", OC(a, d["!comments"])),
            delete d["!comments"],
            delete d["!legacy"]
        }
        h["!id"].rId1 && Tt(s, oC(o), Wu(h))
    }
    return t.Strings != null && t.Strings.length > 0 && (o = "xl/sharedStrings." + n,
    Tt(s, o, yC(t.Strings, t)),
    r.strs.push(o),
    Zt(t.wbrels, -1, "sharedStrings." + n, qt.SST)),
    o = "xl/workbook." + n,
    Tt(s, o, GC(e, t)),
    r.workbooks.push(o),
    Zt(t.rels, 1, o, qt.WB),
    o = "xl/theme/theme1.xml",
    Tt(s, o, EC(e.Themes, t)),
    r.themes.push(o),
    Zt(t.wbrels, -1, "theme/theme1.xml", qt.THEME),
    o = "xl/styles." + n,
    Tt(s, o, wC(e, t)),
    r.styles.push(o),
    Zt(t.wbrels, -1, "styles." + n, qt.STY),
    e.vbaraw && i && (o = "xl/vbaProject.bin",
    Tt(s, o, e.vbaraw),
    r.vba.push(o),
    Zt(t.wbrels, -1, "vbaProject.bin", qt.VBA)),
    o = "xl/metadata." + n,
    Tt(s, o, TC()),
    r.metadata.push(o),
    Zt(t.wbrels, -1, "metadata." + n, qt.XLMETA),
    u.length > 1 && (o = "xl/persons/person.xml",
    Tt(s, o, dH(u, t)),
    r.people.push(o),
    Zt(t.wbrels, -1, "persons/person.xml", qt.PEOPLE)),
    Tt(s, "[Content_Types].xml", sC(r, t)),
    Tt(s, "_rels/.rels", Wu(t.rels)),
    Tt(s, "xl/_rels/workbook." + n + ".rels", Wu(t.wbrels)),
    delete t.revssf,
    delete t.ssf,
    s
}
function NW(e, t) {
    var n = "";
    switch ((t || {}).type || "base64") {
    case "buffer":
        return [e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7]];
    case "base64":
        n = Ba(e.slice(0, 12));
        break;
    case "binary":
        n = e;
        break;
    case "array":
        return [e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7]];
    default:
        throw new Error("Unrecognized type " + (t && t.type || "undefined"))
    }
    return [n.charCodeAt(0), n.charCodeAt(1), n.charCodeAt(2), n.charCodeAt(3), n.charCodeAt(4), n.charCodeAt(5), n.charCodeAt(6), n.charCodeAt(7)]
}
function XC(e, t) {
    switch (t.type) {
    case "base64":
    case "binary":
        break;
    case "buffer":
    case "array":
        t.type = "";
        break;
    case "file":
        return k1(t.file, nn.write(e, {
            type: zt ? "buffer" : ""
        }));
    case "string":
        throw new Error("'string' output type invalid for '" + t.bookType + "' files");
    default:
        throw new Error("Unrecognized type " + t.type)
    }
    return nn.write(e, t)
}
function FW(e, t) {
    var n = Jr(t || {})
      , i = IW(e, n);
    return LW(i, n)
}
function LW(e, t) {
    var n = {}
      , i = zt ? "nodebuffer" : typeof Uint8Array < "u" ? "array" : "string";
    if (t.compression && (n.compression = "DEFLATE"),
    t.password)
        n.type = i;
    else
        switch (t.type) {
        case "base64":
            n.type = "base64";
            break;
        case "binary":
            n.type = "string";
            break;
        case "string":
            throw new Error("'string' output type invalid for '" + t.bookType + "' files");
        case "buffer":
        case "file":
            n.type = i;
            break;
        default:
            throw new Error("Unrecognized type " + t.type)
        }
    var r = e.FullPaths ? nn.write(e, {
        fileType: "zip",
        type: {
            nodebuffer: "buffer",
            string: "binary"
        }[n.type] || n.type,
        compression: !!t.compression
    }) : e.generate(n);
    if (typeof Deno < "u" && typeof r == "string") {
        if (t.type == "binary" || t.type == "base64")
            return r;
        r = new Uint8Array(h2(r))
    }
    return t.password && typeof encrypt_agile < "u" ? XC(encrypt_agile(r, t.password), t) : t.type === "file" ? k1(t.file, r) : t.type == "string" ? v1(r) : r
}
function BW(e, t) {
    var n = t || {}
      , i = eW(e, n);
    return XC(i, n)
}
function Yo(e, t, n) {
    n || (n = "");
    var i = n + e;
    switch (t.type) {
    case "base64":
        return C1(Da(i));
    case "binary":
        return Da(i);
    case "string":
        return e;
    case "file":
        return k1(t.file, i, "utf8");
    case "buffer":
        return zt ? Ha(i, "utf8") : typeof TextEncoder < "u" ? new TextEncoder().encode(i) : Yo(i, {
            type: "binary"
        }).split("").map(function(r) {
            return r.charCodeAt(0)
        })
    }
    throw new Error("Unrecognized type " + t.type)
}
function UW(e, t) {
    switch (t.type) {
    case "base64":
        return C1(e);
    case "binary":
        return e;
    case "string":
        return e;
    case "file":
        return k1(t.file, e, "binary");
    case "buffer":
        return zt ? Ha(e, "binary") : e.split("").map(function(n) {
            return n.charCodeAt(0)
        })
    }
    throw new Error("Unrecognized type " + t.type)
}
function Q3(e, t) {
    switch (t.type) {
    case "string":
    case "base64":
    case "binary":
        for (var n = "", i = 0; i < e.length; ++i)
            n += String.fromCharCode(e[i]);
        return t.type == "base64" ? C1(n) : t.type == "string" ? v1(n) : n;
    case "file":
        return k1(t.file, e);
    case "buffer":
        return e;
    default:
        throw new Error("Unrecognized type " + t.type)
    }
}
function KC(e, t) {
    hL(),
    C$(e);
    var n = Jr(t || {});
    if (n.cellStyles && (n.cellNF = !0,
    n.sheetStubs = !0),
    n.type == "array") {
        n.type = "binary";
        var i = KC(e, n);
        return n.type = "array",
        h2(i)
    }
    var r = 0;
    if (n.sheet && (typeof n.sheet == "number" ? r = n.sheet : r = e.SheetNames.indexOf(n.sheet),
    !e.SheetNames[r]))
        throw new Error("Sheet not found: " + n.sheet + " : " + typeof n.sheet);
    switch (n.bookType || "xlsb") {
    case "xml":
    case "xlml":
        return Yo(J$(e, n), n);
    case "slk":
    case "sylk":
        return Yo(bU.from_sheet(e.Sheets[e.SheetNames[r]], n), n);
    case "htm":
    case "html":
        return Yo(WC(e.Sheets[e.SheetNames[r]], n), n);
    case "txt":
        return UW(QC(e.Sheets[e.SheetNames[r]], n), n);
    case "csv":
        return Yo(q7(e.Sheets[e.SheetNames[r]], n), n, "\uFEFF");
    case "dif":
        return Yo(xU.from_sheet(e.Sheets[e.SheetNames[r]], n), n);
    case "dbf":
        return Q3(SU.from_sheet(e.Sheets[e.SheetNames[r]], n), n);
    case "prn":
        return Yo(wU.from_sheet(e.Sheets[e.SheetNames[r]], n), n);
    case "rtf":
        return Yo(kU.from_sheet(e.Sheets[e.SheetNames[r]], n), n);
    case "eth":
        return Yo(_C.from_sheet(e.Sheets[e.SheetNames[r]], n), n);
    case "fods":
        return Yo(zC(e, n), n);
    case "wk1":
        return Q3(mw.sheet_to_wk1(e.Sheets[e.SheetNames[r]], n), n);
    case "wk3":
        return Q3(mw.book_to_wk3(e, n), n);
    case "biff2":
        n.biff || (n.biff = 2);
    case "biff3":
        n.biff || (n.biff = 3);
    case "biff4":
        return n.biff || (n.biff = 4),
        Q3($C(e, n), n);
    case "biff5":
        n.biff || (n.biff = 5);
    case "biff8":
    case "xla":
    case "xls":
        return n.biff || (n.biff = 8),
        BW(e, n);
    case "xlsx":
    case "xlsm":
    case "xlam":
    case "xlsb":
    case "numbers":
    case "ods":
        return FW(e, n);
    default:
        throw new Error("Unrecognized bookType |" + n.bookType + "|")
    }
}
function HW(e) {
    if (!e.bookType) {
        var t = {
            xls: "biff8",
            htm: "html",
            slk: "sylk",
            socialcalc: "eth",
            Sh33tJS: "WTF"
        }
          , n = e.file.slice(e.file.lastIndexOf(".")).toLowerCase();
        n.match(/^\.[a-z]+$/) && (e.bookType = n.slice(1)),
        e.bookType = t[e.bookType] || e.bookType
    }
}
function YC(e, t, n) {
    var i = n || {};
    return i.type = "file",
    i.file = t,
    HW(i),
    KC(e, i)
}
function GW(e, t, n, i, r, s, o, a) {
    var c = ji(n)
      , l = a.defval
      , u = a.raw || !Object.prototype.hasOwnProperty.call(a, "raw")
      , h = !0
      , d = r === 1 ? [] : {};
    if (r !== 1)
        if (Object.defineProperty)
            try {
                Object.defineProperty(d, "__rowNum__", {
                    value: n,
                    enumerable: !1
                })
            } catch {
                d.__rowNum__ = n
            }
        else
            d.__rowNum__ = n;
    if (!o || e[n])
        for (var f = t.s.c; f <= t.e.c; ++f) {
            var g = o ? e[n][f] : e[i[f] + c];
            if (g === void 0 || g.t === void 0) {
                if (l === void 0)
                    continue;
                s[f] != null && (d[s[f]] = l);
                continue
            }
            var p = g.v;
            switch (g.t) {
            case "z":
                if (p == null)
                    break;
                continue;
            case "e":
                p = p == 0 ? null : void 0;
                break;
            case "s":
            case "d":
            case "b":
            case "n":
                break;
            default:
                throw new Error("unrecognized type " + g.t)
            }
            if (s[f] != null) {
                if (p == null)
                    if (g.t == "e" && p === null)
                        d[s[f]] = null;
                    else if (l !== void 0)
                        d[s[f]] = l;
                    else if (u && p === null)
                        d[s[f]] = null;
                    else
                        continue;
                else
                    d[s[f]] = u && (g.t !== "n" || g.t === "n" && a.rawNumbers !== !1) ? p : Ua(g, p, a);
                p != null && (h = !1)
            }
        }
    return {
        row: d,
        isempty: h
    }
}
function u2(e, t) {
    if (e == null || e["!ref"] == null)
        return [];
    var n = {
        t: "n",
        v: 0
    }
      , i = 0
      , r = 1
      , s = []
      , o = 0
      , a = ""
      , c = {
        s: {
            r: 0,
            c: 0
        },
        e: {
            r: 0,
            c: 0
        }
    }
      , l = t || {}
      , u = l.range != null ? l.range : e["!ref"];
    switch (l.header === 1 ? i = 1 : l.header === "A" ? i = 2 : Array.isArray(l.header) ? i = 3 : l.header == null && (i = 0),
    typeof u) {
    case "string":
        c = yn(u);
        break;
    case "number":
        c = yn(e["!ref"]),
        c.s.r = u;
        break;
    default:
        c = u
    }
    i > 0 && (r = 0);
    var h = ji(c.s.r)
      , d = []
      , f = []
      , g = 0
      , p = 0
      , v = Array.isArray(e)
      , S = c.s.r
      , x = 0
      , w = {};
    v && !e[S] && (e[S] = []);
    var k = l.skipHidden && e["!cols"] || []
      , B = l.skipHidden && e["!rows"] || [];
    for (x = c.s.c; x <= c.e.c; ++x)
        if (!(k[x] || {}).hidden)
            switch (d[x] = cr(x),
            n = v ? e[S][x] : e[d[x] + h],
            i) {
            case 1:
                s[x] = x - c.s.c;
                break;
            case 2:
                s[x] = d[x];
                break;
            case 3:
                s[x] = l.header[x - c.s.c];
                break;
            default:
                if (n == null && (n = {
                    w: "__EMPTY",
                    t: "s"
                }),
                a = o = Ua(n, null, l),
                p = w[o] || 0,
                !p)
                    w[o] = 1;
                else {
                    do
                        a = o + "_" + p++;
                    while (w[a]);
                    w[o] = p,
                    w[a] = 1
                }
                s[x] = a
            }
    for (S = c.s.r + r; S <= c.e.r; ++S)
        if (!(B[S] || {}).hidden) {
            var N = GW(e, c, S, d, i, s, v, l);
            (N.isempty === !1 || (i === 1 ? l.blankrows !== !1 : l.blankrows)) && (f[g++] = N.row)
        }
    return f.length = g,
    f
}
var Cw = /"/g;
function VW(e, t, n, i, r, s, o, a) {
    for (var c = !0, l = [], u = "", h = ji(n), d = t.s.c; d <= t.e.c; ++d)
        if (i[d]) {
            var f = a.dense ? (e[n] || [])[d] : e[i[d] + h];
            if (f == null)
                u = "";
            else if (f.v != null) {
                c = !1,
                u = "" + (a.rawNumbers && f.t == "n" ? f.v : Ua(f, null, a));
                for (var g = 0, p = 0; g !== u.length; ++g)
                    if ((p = u.charCodeAt(g)) === r || p === s || p === 34 || a.forceQuotes) {
                        u = '"' + u.replace(Cw, '""') + '"';
                        break
                    }
                u == "ID" && (u = '"ID"')
            } else
                f.f != null && !f.F ? (c = !1,
                u = "=" + f.f,
                u.indexOf(",") >= 0 && (u = '"' + u.replace(Cw, '""') + '"')) : u = "";
            l.push(u)
        }
    return a.blankrows === !1 && c ? null : l.join(o)
}
function q7(e, t) {
    var n = []
      , i = t ?? {};
    if (e == null || e["!ref"] == null)
        return "";
    var r = yn(e["!ref"])
      , s = i.FS !== void 0 ? i.FS : ","
      , o = s.charCodeAt(0)
      , a = i.RS !== void 0 ? i.RS : `
`
      , c = a.charCodeAt(0)
      , l = new RegExp((s == "|" ? "\\|" : s) + "+$")
      , u = ""
      , h = [];
    i.dense = Array.isArray(e);
    for (var d = i.skipHidden && e["!cols"] || [], f = i.skipHidden && e["!rows"] || [], g = r.s.c; g <= r.e.c; ++g)
        (d[g] || {}).hidden || (h[g] = cr(g));
    for (var p = 0, v = r.s.r; v <= r.e.r; ++v)
        (f[v] || {}).hidden || (u = VW(e, r, v, h, o, c, s, i),
        u != null && (i.strip && (u = u.replace(l, "")),
        (u || i.blankrows !== !1) && n.push((p++ ? a : "") + u)));
    return delete i.dense,
    n.join("")
}
function QC(e, t) {
    t || (t = {}),
    t.FS = "	",
    t.RS = `
`;
    var n = q7(e, t);
    if (typeof ln > "u" || t.type == "string")
        return n;
    var i = ln.utils.encode(1200, n, "str");
    return "\xFF\xFE" + i
}
function $W(e) {
    var t = "", n, i = "";
    if (e == null || e["!ref"] == null)
        return [];
    var r = yn(e["!ref"]), s = "", o = [], a, c = [], l = Array.isArray(e);
    for (a = r.s.c; a <= r.e.c; ++a)
        o[a] = cr(a);
    for (var u = r.s.r; u <= r.e.r; ++u)
        for (s = ji(u),
        a = r.s.c; a <= r.e.c; ++a)
            if (t = o[a] + s,
            n = l ? (e[u] || [])[a] : e[t],
            i = "",
            n !== void 0) {
                if (n.F != null) {
                    if (t = n.F,
                    !n.f)
                        continue;
                    i = n.f,
                    t.indexOf(":") == -1 && (t = t + ":" + t)
                }
                if (n.f != null)
                    i = n.f;
                else {
                    if (n.t == "z")
                        continue;
                    if (n.t == "n" && n.v != null)
                        i = "" + n.v;
                    else if (n.t == "b")
                        i = n.v ? "TRUE" : "FALSE";
                    else if (n.w !== void 0)
                        i = "'" + n.w;
                    else {
                        if (n.v === void 0)
                            continue;
                        n.t == "s" ? i = "'" + n.v : i = "" + n.v
                    }
                }
                c[c.length] = t + "=" + i
            }
    return c
}
function JC(e, t, n) {
    var i = n || {}
      , r = +!i.skipHeader
      , s = e || {}
      , o = 0
      , a = 0;
    if (s && i.origin != null)
        if (typeof i.origin == "number")
            o = i.origin;
        else {
            var c = typeof i.origin == "string" ? Ii(i.origin) : i.origin;
            o = c.r,
            a = c.c
        }
    var l, u = {
        s: {
            c: 0,
            r: 0
        },
        e: {
            c: a,
            r: o + t.length - 1 + r
        }
    };
    if (s["!ref"]) {
        var h = yn(s["!ref"]);
        u.e.c = Math.max(u.e.c, h.e.c),
        u.e.r = Math.max(u.e.r, h.e.r),
        o == -1 && (o = h.e.r + 1,
        u.e.r = o + t.length - 1 + r)
    } else
        o == -1 && (o = 0,
        u.e.r = t.length - 1 + r);
    var d = i.header || []
      , f = 0;
    t.forEach(function(p, v) {
        qi(p).forEach(function(S) {
            (f = d.indexOf(S)) == -1 && (d[f = d.length] = S);
            var x = p[S]
              , w = "z"
              , k = ""
              , B = tn({
                c: a + f,
                r: o + v + r
            });
            l = M1(s, B),
            x && typeof x == "object" && !(x instanceof Date) ? s[B] = x : (typeof x == "number" ? w = "n" : typeof x == "boolean" ? w = "b" : typeof x == "string" ? w = "s" : x instanceof Date ? (w = "d",
            i.cellDates || (w = "n",
            x = Qr(x)),
            k = i.dateNF || Bn[14]) : x === null && i.nullError && (w = "e",
            x = 0),
            l ? (l.t = w,
            l.v = x,
            delete l.w,
            delete l.R,
            k && (l.z = k)) : s[B] = l = {
                t: w,
                v: x
            },
            k && (l.z = k))
        })
    }),
    u.e.c = Math.max(u.e.c, a + d.length - 1);
    var g = ji(o);
    if (r)
        for (f = 0; f < d.length; ++f)
            s[cr(f + a) + g] = {
                t: "s",
                v: d[f]
            };
    return s["!ref"] = ii(u),
    s
}
function WW(e, t) {
    return JC(null, e, t)
}
function M1(e, t, n) {
    if (typeof t == "string") {
        if (Array.isArray(e)) {
            var i = Ii(t);
            return e[i.r] || (e[i.r] = []),
            e[i.r][i.c] || (e[i.r][i.c] = {
                t: "z"
            })
        }
        return e[t] || (e[t] = {
            t: "z"
        })
    }
    return typeof t != "number" ? M1(e, tn(t)) : M1(e, tn({
        r: t,
        c: n || 0
    }))
}
function jW(e, t) {
    if (typeof t == "number") {
        if (t >= 0 && e.SheetNames.length > t)
            return t;
        throw new Error("Cannot find sheet # " + t)
    } else if (typeof t == "string") {
        var n = e.SheetNames.indexOf(t);
        if (n > -1)
            return n;
        throw new Error("Cannot find sheet name |" + t + "|")
    } else
        throw new Error("Cannot find sheet |" + t + "|")
}
function qW() {
    return {
        SheetNames: [],
        Sheets: {}
    }
}
function zW(e, t, n, i) {
    var r = 1;
    if (!n)
        for (; r <= 65535 && e.SheetNames.indexOf(n = "Sheet" + r) != -1; ++r,
        n = void 0)
            ;
    if (!n || e.SheetNames.length >= 65535)
        throw new Error("Too many worksheets");
    if (i && e.SheetNames.indexOf(n) >= 0) {
        var s = n.match(/(^.*?)(\d+)$/);
        r = s && +s[2] || 0;
        var o = s && s[1] || n;
        for (++r; r <= 65535 && e.SheetNames.indexOf(n = o + r) != -1; ++r)
            ;
    }
    if (HC(n),
    e.SheetNames.indexOf(n) >= 0)
        throw new Error("Worksheet with name |" + n + "| already exists!");
    return e.SheetNames.push(n),
    e.Sheets[n] = t,
    n
}
function XW(e, t, n) {
    e.Workbook || (e.Workbook = {}),
    e.Workbook.Sheets || (e.Workbook.Sheets = []);
    var i = jW(e, t);
    switch (e.Workbook.Sheets[i] || (e.Workbook.Sheets[i] = {}),
    n) {
    case 0:
    case 1:
    case 2:
        break;
    default:
        throw new Error("Bad sheet visibility setting " + n)
    }
    e.Workbook.Sheets[i].Hidden = n
}
function KW(e, t) {
    return e.z = t,
    e
}
function ZC(e, t, n) {
    return t ? (e.l = {
        Target: t
    },
    n && (e.l.Tooltip = n)) : delete e.l,
    e
}
function YW(e, t, n) {
    return ZC(e, "#" + t, n)
}
function QW(e, t, n) {
    e.c || (e.c = []),
    e.c.push({
        t,
        a: n || "SheetJS"
    })
}
function JW(e, t, n, i) {
    for (var r = typeof t != "string" ? t : yn(t), s = typeof t == "string" ? t : ii(t), o = r.s.r; o <= r.e.r; ++o)
        for (var a = r.s.c; a <= r.e.c; ++a) {
            var c = M1(e, o, a);
            c.t = "n",
            c.F = s,
            delete c.v,
            o == r.s.r && a == r.s.c && (c.f = n,
            i && (c.D = !0))
        }
    return e
}
var D1 = {
    encode_col: cr,
    encode_row: ji,
    encode_cell: tn,
    encode_range: ii,
    decode_col: N7,
    decode_row: D7,
    split_cell: fB,
    decode_cell: Ii,
    decode_range: xs,
    format_cell: Ua,
    sheet_add_aoa: Jw,
    sheet_add_json: JC,
    sheet_add_dom: jC,
    aoa_to_sheet: Qu,
    json_to_sheet: WW,
    table_to_sheet: qC,
    table_to_book: xW,
    sheet_to_csv: q7,
    sheet_to_txt: QC,
    sheet_to_json: u2,
    sheet_to_html: WC,
    sheet_to_formulae: $W,
    sheet_to_row_object_array: u2,
    sheet_get_cell: M1,
    book_new: qW,
    book_append_sheet: zW,
    book_set_sheet_visibility: XW,
    cell_set_number_format: KW,
    cell_set_hyperlink: ZC,
    cell_set_internal_link: YW,
    cell_add_comment: QW,
    sheet_set_array_formula: JW,
    consts: {
        SHEET_VISIBLE: 0,
        SHEET_HIDDEN: 1,
        SHEET_VERY_HIDDEN: 2
    }
};
var Qle = x1.version;
var Jle = (e, t, n) => {
    let i = e.map(o => ({
        wch: o.width ?? o.title.length
    }))
      , r = D1.json_to_sheet(t);
    r["!cols"] = i,
    D1.sheet_add_aoa(r, [e.map(o => o.title)], {
        origin: "A1"
    });
    let s = D1.book_new();
    D1.book_append_sheet(s, r, "Sheet1"),
    YC(s, `${n}.xlsx`)
}
;
function ej(e) {
    return new Promise( (t, n) => {
        let i = new FileReader;
        i.readAsDataURL(e),
        i.onloadend = () => t(i.result)
    }
    )
}
function eE(e) {
    return Yn(ej(e))
}
Boolean.prototype.toPersian = function() {
    return this ? "\u0628\u0644\u06CC" : "\u062E\u06CC\u0631"
}
;
function i0e(e, t) {
    for (let n of t)
        Reflect.deleteProperty(e, n);
    return e
}
Array.prototype.first = function() {
    return this[0] ?? void 0
}
;
Array.prototype.update = function(e, t, n=!1) {
    let i = this.findIndex(r => r[t ?? "id"] === e[t ?? "id"]);
    return i >= 0 ? [...this.slice(0, i), C(C({}, this[i]), e), ...this.slice(i + 1)] : n ? [...this, e] : [...this]
}
;
Array.prototype.toSort = function(e) {
    return Array.prototype.toSorted ? this.toSorted(e) : [...[...this].sort(e)]
}
;
Array.prototype.replaceByIndex = function(e, t) {
    return Array.prototype.with ? this.with(e, t) : (this[e] = t,
    [...this])
}
;
Array.prototype.groupBy = function(e) {
    return this.reduce(function(t, n) {
        return (t[n[e]] = t[n[e]] || []).push(n),
        t
    }, {})
}
;
function o0e(e, t) {
    return e ? new URL(e).searchParams.get(t) : null
}
var c0e = e => !((e?.value || "").trim().length === 0) ? null : {
    whitespace: !0
}
  , l0e = e => isNaN(e.value) ? {
    nan: {
        value: e.value
    }
} : null;
var tE = class {
    static noWhitespace(t) {
        let n = t?.value || ""
          , i = n.trim().length === 0;
        return n.length > 0 && i ? {
            noWhitespace: !0
        } : null
    }
}
;
function d0e(e, t) {
    let n = t.map(r => ({
        title: r.title,
        width: r.width
    }))
      , i = e.map(r => {
        let s = {};
        return t.forEach(o => {
            typeof r[o.fieldName] == "boolean" ? s[o.fieldName] = (!!+r[o.fieldName]).toPersian() : s[o.fieldName] = r[o.fieldName]
        }
        ),
        s
    }
    );
    return {
        headers: n,
        values: i
    }
}
var S2 = function(e) {
    return e[e.none = 1] = "none",
    e[e.asc = 2] = "asc",
    e[e.decs = -1] = "decs",
    e
}(S2 || {})
  , m0e = new Map().set(S2.none, "opacity-3").set(S2.asc, "text-global").set(S2.decs, "text-global")
  , nE = class {
    constructor(t) {
        this.sortStrategy = t
    }
    compareFunction(t, n) {
        return this.sortStrategy.compareFunction(t, n)
    }
}
;
var iE = class {
    compareFunction(t, n) {
        return (i, r) => No(i[t]) < No(r[t]) ? 1 * n : No(i[t]) > No(r[t]) ? -1 * n : 0
    }
}
  , rE = class {
    compareFunction(t, n) {
        return (i, r) => (r[t] - i[t]) * +n
    }
}
;
function H0e(e) {
    let {[se.SymbolSchema.lastTradedPrice]: t, [se.SymbolSchema.feeOfPreviousDaysClosingPrice]: n, [se.SymbolSchema.closingPrice]: i, [se.SymbolSchema.stateCode]: r, [se.SymbolSchema.totalNumberOfSharesTraded]: s, [se.SymbolSchema.lastTradedPriceVarPercent]: o} = e
      , a = {
        lastTradedPrice: +t || 0,
        lastTradedPriceVarPercent: +o || 0,
        closingPrice: +i || 0,
        totalNumberOfSharesTraded: +s || 0,
        feeOfPreviousDaysClosingPrice: +n || 0,
        stateCode: r && r.trim() || ""
    };
    return ve(C({}, a), {
        stateColor: du(a.stateCode),
        lastTradedPriceVar: t - n
    })
}
function sE(e) {
    let {[se.SymbolSchema.lastTradedPrice]: t, [se.SymbolSchema.lastTradedPriceVarPercent]: n, [se.SymbolSchema.firstPrice]: i, [se.SymbolSchema.closingPrice]: r, [se.SymbolSchema.totalNumberOfSharesTraded]: s, [se.SymbolSchema.totalNumberOfTrades]: o, [se.SymbolSchema.totalTradeValue]: a, [se.SymbolSchema.bestBuyLimitVolume]: c, [se.SymbolSchema.bestBuyLimitPrice]: l, [se.SymbolSchema.bestSellLimitVolume]: u, [se.SymbolSchema.bestSellLimitPrice]: h, [se.SymbolSchema.feeOfPreviousDaysClosingPrice]: d, [se.SymbolSchema.minDailyPrice]: f, [se.SymbolSchema.maxDailyPrice]: g, [se.SymbolSchema.minDailyTradedPrice]: p, [se.SymbolSchema.maxDailyTradedPrice]: v, [se.SymbolSchema.stateCode]: S, [se.SymbolSchema.tradeDate]: x, [se.SymbolSchema.navDate]: w, [se.SymbolSchema.navSubscription]: k, [se.SymbolSchema.navRedemption]: B, [se.SymbolSchema.priceTickSize]: N, [se.SymbolSchema.minValidBuyVolume]: E, [se.SymbolSchema.minValidSellVolume]: F, [se.SymbolSchema.maxValidBuyVolume]: O, [se.SymbolSchema.maxValidSellVolume]: V, [se.SymbolSchema.bestSellLimitPrice]: X, [se.SymbolSchema.bestBuyLimitPrice]: b} = e
      , j = {
        lastTradedPrice: +t || 0,
        firstTradedPrice: +i || 0,
        lastTradedPriceVarPercent: +n || 0,
        closingPrice: +r || 0,
        totalNumberOfSharesTraded: +s || 0,
        feeOfPreviousDaysClosingPrice: +d || 0,
        totalNumberOfTrades: +o || 0,
        totalTradeValue: +a || 0,
        bestBuyLimitVolume: +c || 0,
        bestBuyLimitPrice: +l || 0,
        bestSellLimitVolume: +u || 0,
        bestSellLimitPrice: +h || 0,
        minDailyPrice: +f || 0,
        maxDailyPrice: +g || 0,
        minDailyTradedPrice: +p || 0,
        maxDailyTradedPrice: +v || 0,
        stateCode: S && S.trim() || "",
        tradeDate: x || "",
        navDate: w || "",
        navSubscription: +k || 0,
        navRedemption: +B || 0,
        priceTickSize: +N || 0,
        minValidBuyVolume: +E || 0,
        minValidSellVolume: +F || 0,
        maxValidBuyVolume: +O || 0,
        maxValidSellVolume: +V || 0,
        bidPrice: +X || 0,
        askPrice: +b || 0
    };
    return ve(C({}, j), {
        stateColor: du(j.stateCode),
        lastTradedPriceVar: t - d
    })
}
function G0e(e) {
    let {[se.SameGroupSchema.lastTradedPrice]: t, [se.SameGroupSchema.totalNumberOfSharesTraded]: n, [se.SameGroupSchema.feeOfPreviousDaysClosingPrice]: i, [se.SameGroupSchema.minDailyPrice]: r, [se.SameGroupSchema.maxDailyPrice]: s, [se.SameGroupSchema.minDailyTradedPrice]: o, [se.SameGroupSchema.maxDailyTradedPrice]: a, [se.SameGroupSchema.stateCode]: c, [se.SameGroupSchema.lastTradedPriceVarPercent]: l} = e.val
      , u = {
        lastTradedPrice: +t || 0,
        totalNumberOfSharesTraded: +n || 0,
        feeOfPreviousDaysClosingPrice: +i || 0,
        minDailyPrice: +r || 0,
        maxDailyPrice: +s || 0,
        minDailyTradedPrice: +o || 0,
        maxDailyTradedPrice: +a || 0,
        stateCode: c && c.trim() || "",
        lastTradedPriceVarPercent: +l || 0
    };
    return ve(C({}, u), {
        stateColor: du(u.stateCode),
        lastTradedPriceVar: t - i
    })
}
function V0e(e) {
    let {[se.MobilePortfolioSchema.closingPrice]: t, [se.MobilePortfolioSchema.lastTradedPrice]: n, [se.MobilePortfolioSchema.lastTradedPriceVarPercent]: i, [se.MobilePortfolioSchema.feeOfPreviousDaysClosingPrice]: r, [se.MobilePortfolioSchema.totalNumberOfSharesTraded]: s, [se.MobilePortfolioSchema.stateCode]: o} = e;
    return {
        lastTradedPrice: +n || 0,
        priceVar: +i || 0,
        closingPrice: +t || 0,
        totalNumberOfSharesTraded: +s || 0,
        feeOfPreviousDaysClosingPrice: +r || 0,
        stateCode: o && o.trim() || "",
        closingPriceVar: 0,
        symbolISIN: ""
    }
}
function $0e(e) {
    let {[se.DPortfolioSchema.closingPrice]: t, [se.DPortfolioSchema.lastTradedPrice]: n, [se.DPortfolioSchema.lastTradedPriceVarPercent]: i, [se.DPortfolioSchema.feeOfPreviousDaysClosingPrice]: r, [se.DPortfolioSchema.totalNumberOfSharesTraded]: s, [se.DPortfolioSchema.stateCode]: o, [se.DPortfolioSchema.bestBuyLimitPrice]: a, [se.DPortfolioSchema.bestBuyLimitVolume]: c, [se.DPortfolioSchema.bestSellLimitPrice]: l, [se.DPortfolioSchema.bestSellLimitVolume]: u, [se.DPortfolioSchema.firstTradedPrice]: h, [se.DPortfolioSchema.totalNumberOfTrades]: d, [se.DPortfolioSchema.totalTradeValue]: f} = e;
    return {
        lastTradedPrice: +n || 0,
        priceVar: +i || 0,
        closingPrice: +t || 0,
        totalNumberOfSharesTraded: +s || 0,
        feeOfPreviousDaysClosingPrice: +r || 0,
        stateCode: o && o.trim() || "",
        closingPriceVar: 0,
        symbolISIN: "",
        bestBuyPrice: +a || 0,
        bestBuyQuantity: +c || 0,
        bestSellPrice: +l || 0,
        bestSellQuantity: +u || 0,
        firstTradedPrice: +h || 0,
        totalNumberOfTrades: +d || 0,
        totalTradeValue: +f || 0
    }
}
var rue = ( () => {
    let t = class t extends fn {
        constructor() {
            super(),
            this.lsService = z(Ql),
            this.marketViewUrl = `${this.mtsPath + this.apiUrls.easy}MarketView`,
            this.indexes = [],
            this.indexesSubject = new Ne(this.indexes),
            this.indexes$ = this.indexesSubject.asObservable(),
            this.lsDataReceivedIntervalSubs = {},
            this.lsDataReceived = new Map([]),
            this.subscribeToLsIndex(),
            this.lsService.resetLsManually$.pipe(mt(i => i)).subscribe( () => {
                this.subscribeToLsIndex()
            }
            )
        }
        getTseIndex() {
            return this.httpService.get(`${this.mtsPath + this.apiUrls.symbol}MarketData/tse-index`).pipe(He(i => {
                this.indexes = i,
                this.indexesSubject.next(i)
            }
            ))
        }
        GetMarketData(i, r) {
            let s = Bx[i]
              , o = `query {marketData(request: { isins: ${JSON.stringify(r)}}) {${s.join(" ")}}}`;
            return this.httpService.post(`${this.mtsPath + this.apiUrls.symbol}marketdata`, {
                body: {
                    query: o
                }
            }).pipe(We(a => this.mapMarketData(a?.marketData, r)))
        }
        mapMarketData(i, r) {
            let s = o => ve(C({}, o), {
                symbolISIN: o?.symbolIsin,
                bestBuyLimitVolume: o?.bestBuyQuantity,
                bestSellLimitVolume: o?.bestSellQuantity,
                minDailyTradedPrice: o?.lowPrice,
                maxDailyTradedPrice: o?.highPrice
            });
            return Array.isArray(r) ? i.map(s) : s(i?.[0])
        }
        GetStockInfo(i) {
            return this.httpService.post(`${this.mtsPath + this.apiUrls.symbol}MarketData/symbol-info-data`, {
                body: {
                    isin: i
                }
            })
        }
        getReturnChartData(i) {
            return this.httpService.post(`${this.mtsPath + this.apiUrls.symbol}MarketData/return-chart-data`, {
                body: {
                    isin: i
                }
            })
        }
        GetSymbolDetailsMarketDepth(i) {
            return this.httpService.post(`${this.mtsPath + this.apiUrls.symbol}MarketData/market-depth`, {
                body: {
                    isin: i
                }
            })
        }
        GetSymbolDetailsIndInstTrade(i) {
            return this.httpService.post(`${this.mtsPath + this.apiUrls.symbol}MarketData/indInstTrade`, {
                body: {
                    isin: i
                }
            })
        }
        getMarketMapData(i) {
            let r = this.httpService.get(`${this.mtsPath + this.apiUrls.symbol}MarketData/market-map`);
            return i ? ll(i).pipe(Mh(0)).pipe(ai( () => r)) : r
        }
        subscribeToLsIndex() {
            this.lsService.subscribeToLs(K.Index, gu.code.TEDPIX).subscribe(i => {
                this.setIndexParameters(i)
            }
            )
        }
        getOtherIndexes() {
            let i = `${this.marketViewUrl}/otherIndexes`;
            return this.httpService.get(i)
        }
        setIndexParameters(i) {
            let r = -1;
            switch (i.inst == gu.code.TEDPIX ? r = this.indexes.findIndex(s => s.symbolIsin.toUpperCase() === gu.code.TEDPIX) : i.inst == gu.code.IFX && (r = this.indexes.findIndex(s => s.symbolIsin.toUpperCase() === gu.code.IFX)),
            r < 0 && (this.indexes.push({
                symbolIsin: i.inst,
                dayOfEvent: new Date,
                indexChanges: 0,
                lastIndexValue: 0,
                symbolTitle: "",
                percentVariation: 0,
                yesterdayPrice: 0
            }),
            r = this.indexes.length - 1),
            i.name) {
            case se.IndexSchema.YesterdayPrice:
                this.indexes[r].yesterdayPrice = parseFloat(i.val),
                this.indexes[r].indexChanges = this.indexes[r].lastIndexValue - this.indexes[r].yesterdayPrice;
                break;
            case se.IndexSchema.LastIndexValue:
                this.indexes[r].lastIndexValue = parseFloat(i.val),
                this.indexes[r].indexChanges = this.indexes[r].lastIndexValue - this.indexes[r].yesterdayPrice;
                break;
            case se.IndexSchema.PercentVariation:
                this.indexes[r].percentVariation = parseFloat(i.val) / 100;
                break;
            case se.IndexSchema.DayOfEvent:
                this.indexes[r].dayOfEvent = new Date(i.val.trim().substring(0, 4),i.val.trim().substring(4, 6) - 1,i.val.trim().substring(6, 8));
                break
            }
            this.indexesSubject.next(this.indexes)
        }
        getMethodName(i) {
            return i.toString().replace(/[^a-zA-Z]/gm, "").replace("this", "").replace("function", "").replace("return", "")
        }
        callMarketDataIfLsNotConnected(i, r=2e3) {
            let s = this.getMethodName(i);
            this.lsDataReceived.set(s, !1),
            this.lsDataReceivedIntervalSubs[s] && this.lsDataReceivedIntervalSubs[s].unsubscribe(),
            this.lsDataReceivedIntervalSubs[s] = ll(r).pipe(Lt(1), He( () => {
                this.lsDataReceived.get(s) || i()
            }
            )).subscribe()
        }
        lsDataIsReceived(i) {
            let r = this.getMethodName(i);
            for (let[s] of this.lsDataReceived.entries())
                (s.includes(r) || r.includes(s)) && (r = s);
            this.lsDataReceived.set(r, !0)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)()
  , oE = class {
    constructor(t, n, i) {
        this.marketData = new Ne(C({}, wg)),
        this.marketData$ = this.marketData.asObservable(),
        this.marketDataService = t,
        this.lsService = n,
        this.symbolIsin = i
    }
    initFlow() {
        this.marketDataService.callMarketDataIfLsNotConnected( () => this.getStockDetailsMarketData()),
        this.lsService.subscribeToLs(K.ActiveStock, this.symbolIsin).subscribe(t => {
            if (t.inst === this.symbolIsin) {
                this.subId || (this.subId = t.subId),
                this.marketDataService.lsDataIsReceived(this.getStockDetailsMarketData.name);
                let n = sE(t.val);
                n.closingPriceVarPercent = this.calculateClosingPriceVarPercent(n.closingPrice, n.feeOfPreviousDaysClosingPrice, n.totalNumberOfSharesTraded) || 0,
                this.marketData.next(n)
            }
        }
        )
    }
    getStockDetailsMarketData() {
        let t = this.marketDataService.GetMarketData(9, this.symbolIsin).pipe(He(n => {
            let i = this.marketData.value ?? wg;
            i.lastTradedPrice = n.lastTradedPrice,
            i.feeOfPreviousDaysClosingPrice = n.feeOfPreviousDaysClosingPrice,
            i.lastTradedPriceVar = this.calculateLastTradedPriceVar(n.lastTradedPrice, n.feeOfPreviousDaysClosingPrice),
            i.lastTradedPriceVarPercent = n.priceVar,
            i.stateColor = du(n.stateCode),
            i.closingPrice = n.closingPrice,
            i.closingPriceVarPercent = this.calculateClosingPriceVarPercent(n.closingPrice, n.feeOfPreviousDaysClosingPrice, n.totalNumberOfSharesTraded),
            i.totalNumberOfSharesTraded = n.totalNumberOfSharesTraded,
            i.stateCode = n.stateCode,
            this.marketData.next(i)
        }
        ), on( (n, i) => i), dr( () => t.unsubscribe())).subscribe()
    }
    calculateLastTradedPriceVar(t, n) {
        return t - (n ?? 0)
    }
    calculateClosingPriceVarPercent(t, n, i) {
        return n === 0 || !n || !i || i === 0 ? 0 : t > 0 && n > 0 ? Math.round((t - n) / n * 1e4) / 100 : 0
    }
    destroy() {
        this.lsService.unsubscribeSchemaById(this.subId)
    }
}
;
var Ls = ( () => {
    let t = class t {
        constructor() {
            this.subject = new lt,
            this.notify$ = this.subject.asObservable(),
            this.notifyOrderFormSubject = new Ne(!1),
            this.notifyOrderForm$ = this.notifyOrderFormSubject.asObservable(),
            this.isStockDetailsAvailable = new Ne(!1),
            this.isStockDetailsAvailable$ = this.isStockDetailsAvailable.asObservable(),
            this.isActive = !0,
            this.canShowNotification = wt(null),
            this.getNotifyActions = i => ({
                action: i.action,
                title: i.title
            }),
            this.getNotifyActionClick = i => ({
                [i.action]: {
                    operation: "openWindow",
                    url: i.url
                }
            }),
            this.getDefaultActionClick = i => ({
                default: i ? {
                    operation: "navigateLastFocusedOrOpen",
                    url: i
                } : {
                    operation: "navigateLastFocusedOrOpen"
                }
            }),
            window.addEventListener("focus", () => {
                this.isActive = !0
            }
            ),
            window.addEventListener("blur", () => {
                this.isActive = !1
            }
            )
        }
        alertNotification(i, r=!1, s, o) {
            this.alert(i.text, i.type, r, s, o)
        }
        alert(i, r, s=!1, o, a) {
            switch (r) {
            case ti.danger:
                this.danger(i, s, o);
                break;
            case ti.info:
                this.info(i, s, o);
                break;
            case ti.success:
                this.success(i, s, o);
                break;
            case ti.warning:
                this.warning(i, s, o, a);
                break;
            case ti.secondary:
                this.secondary(i, s, o);
                break;
            case ti.pinkRose:
                this.pinkRose(i, s, o);
                break;
            case ti.globalSecondary:
                this.globalSecondary(i, s, o);
                break;
            default:
                break
            }
        }
        alertError(i) {
            this.danger(i)
        }
        alertWarning(i) {
            this.warning(i)
        }
        alertSuccess(i) {
            this.success(i)
        }
        notif(i) {
            if (this.canShowNotification() && !this.isActive && this.checkPermission()) {
                let r = {}
                  , s = [];
                i.actions && i.actions.map(a => {
                    s.push(this.getNotifyActions(a)),
                    r = Object.assign(r, this.getNotifyActionClick(a))
                }
                ),
                r = Object.assign(r, this.getDefaultActionClick(i.defaultUrl));
                let o = {
                    body: i.body ? i.body : "",
                    icon: "../assets/images/mofid-logo.png",
                    badge: "../assets/images/mofid-logo.png",
                    data: {
                        defaultUrl: i.defaultUrl,
                        onActionClick: r
                    }
                };
                try {
                    this.pwaNotif(i.title, o)
                } catch {
                    try {
                        this.html5notif(i.title, o)
                    } catch {
                        return null
                    }
                }
            }
        }
        changeNotifyOrderFormState(i) {
            this.notifyOrderFormSubject.next(i)
        }
        danger(i, r=!1, s, o) {
            let a = {
                class: "bg-danger-400",
                text: i,
                icon: "close-box",
                showCount: r,
                extra: s,
                detailText: o
            };
            this.subject.next(a)
        }
        success(i, r=!1, s, o) {
            let a = {
                class: "bg-success-400",
                text: i,
                icon: "check",
                showCount: r,
                extra: s,
                detailText: o
            };
            this.subject.next(a)
        }
        secondary(i, r=!1, s, o) {
            let a = {
                class: "bg-secondary",
                text: i,
                icon: "check",
                showCount: r,
                extra: s,
                detailText: o
            };
            this.subject.next(a)
        }
        info(i, r=!1, s, o) {
            let a = {
                class: "bg-global-400",
                text: i,
                icon: "info-box",
                showCount: r,
                extra: s,
                detailText: o
            };
            this.subject.next(a)
        }
        pinkRose(i, r=!1, s, o) {
            let a = {
                class: "bg-pink_rose",
                text: i,
                icon: "info-box",
                showCount: r,
                extra: s,
                detailText: o
            };
            this.subject.next(a)
        }
        globalSecondary(i, r=!1, s, o) {
            let a = {
                class: "bg-global-700 text-body",
                text: i,
                icon: "info-box",
                showCount: r,
                extra: s,
                detailText: o
            };
            this.subject.next(a)
        }
        warning(i, r=!1, s, o) {
            let a = {
                class: "bg-warning-400",
                text: i,
                icon: "alert",
                showCount: r,
                extra: s,
                detailText: o
            };
            this.subject.next(a)
        }
        checkPermission() {
            if ("Notification"in window) {
                if (Notification.permission === "granted")
                    return !0;
                Notification.permission !== "denied" && Notification.requestPermission().then(function(i) {
                    return i === "granted"
                })
            } else
                return !1;
            return !1
        }
        html5notif(i, r) {
            try {
                let s = new Notification(i,r);
                s.onclick = () => {
                    this.success("\u{1F463}\u{1F463}")
                }
            } catch (s) {
                alert(s)
            }
        }
        pwaNotif(i, r) {
            try {
                navigator.serviceWorker.ready.then(s => {
                    s.showNotification(i, r)
                }
                )
            } catch {
                return null
            }
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var due = ( () => {
    let t = class t extends fn {
        get(i) {
            return this.httpService.post(this.mtsPath + this.apiUrls.easy + "transaction/transactions", {
                body: i
            })
        }
        convertToShortDescription(i) {
            if (i.startsWith("\u0634\u0627\u0631\u0698 \u0645\u0641\u06CC\u062F \u06A9\u0627\u0631\u062A"))
                return "\u0634\u0627\u0631\u0698 \u0645\u0641\u06CC\u062F \u06A9\u0627\u0631\u062A";
            if (i.startsWith("\u067E\u0631\u062F\u0627\u062E\u062A \u0648\u062C\u0647"))
                return i.includes("\u0635\u0646\u062F\u0648\u0642") ? `\u067E\u0631\u062F\u0627\u062E\u062A \u0648\u062C\u0647 (\u062C\u0647\u062A \u0627\u0628\u0637\u0627\u0644 \u0635\u0646\u062F\u0648\u0642 ${i.split("\u0635\u0646\u062F\u0648\u0642")[1]})` : "\u067E\u0631\u062F\u0627\u062E\u062A \u0648\u062C\u0647";
            if (i.startsWith("\u062F\u0631\u06CC\u0627\u0641\u062A \u0648\u062C\u0647"))
                return i.includes("\u0635\u0646\u062F\u0648\u0642") ? `\u062F\u0631\u06CC\u0627\u0641\u062A \u0648\u062C\u0647 (\u062C\u0647\u062A \u062E\u0631\u06CC\u062F \u0635\u0646\u062F\u0648\u0642 ${i.split("\u0635\u0646\u062F\u0648\u0642")[1].split(" ")[1]})` : "\u062F\u0631\u06CC\u0627\u0641\u062A \u0648\u062C\u0647";
            if (i.startsWith("\u062E\u0631\u06CC\u062F") || i.startsWith("\u062E\u0631\u06CC\u062F") || i.indexOf("\u0641\u0631\u0648\u0634") >= 0) {
                if (i.indexOf(")") <= 0 || i.indexOf(")") - i.indexOf("(") === 1 || i.indexOf("(") - i.indexOf(")") === 1) {
                    let r = i.indexOf("\u0637\u06CC")
                      , s = i.indexOf("\u0628\u0647 \u0634\u0645\u0627\u0631\u0647")
                      , o = r > 0 ? r : s;
                    return o < 0 ? i : i.substr(0, o).replace(")", "").replace("(", "")
                } else if (i.indexOf(")") - i.indexOf("(") > 1) {
                    if (i = i.slice(0, i.indexOf(")") - 1) + i.slice(i.indexOf(")")),
                    i.indexOf("\u0633\u0647\u0645") >= 0) {
                        let r = i.indexOf("\u0633\u0647\u0645") + 3
                          , s = i.indexOf("(")
                          , o = i.indexOf("\u0637\u06CC")
                          , a = i.indexOf("\u0628\u0647 \u0634\u0645\u0627\u0631\u0647")
                          , c = o > 0 ? o : a;
                        return c < 0 ? i : i.substr(0, r) + " " + i.substr(s, c - s).replace(")", "").replace("(", "")
                    }
                    if (i.indexOf("\u0648\u0627\u062D\u062F") >= 0) {
                        let r = i.indexOf("\u0648\u0627\u062D\u062F") + 4
                          , s = i.indexOf("(")
                          , o = i.indexOf("\u0637\u06CC")
                          , a = i.indexOf("\u0628\u0647 \u0634\u0645\u0627\u0631\u0647")
                          , c = o > 0 ? o : a;
                        return c < 0 ? i : i.substr(0, r) + " " + i.substr(s, c - s).replace(")", "").replace("(", "")
                    }
                    if (i.indexOf("\u062D\u0642 \u062A\u0642\u062F\u0645") >= 0) {
                        let r = i.indexOf("\u062D\u0642 \u062A\u0642\u062F\u0645")
                          , s = i.indexOf("(")
                          , o = i.indexOf("\u0637\u06CC")
                          , a = i.indexOf("\u0628\u0647 \u0634\u0645\u0627\u0631\u0647")
                          , c = o > 0 ? o : a;
                        return c < 0 ? i : i.substr(0, r) + " \u0633\u0647\u0645 " + i.substr(s, c - s).replace(")", "").replace("(", "")
                    }
                }
            }
            return i
        }
    }
    ;
    t.\u0275fac = ( () => {
        let i;
        return function(s) {
            return (i || (i = Tn(t)))(s || t)
        }
    }
    )(),
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var cE = ( () => {
    let t = class t {
        constructor() {
            this.openSidePanelWithDataSubject = new Ne(null),
            this.openSidePanelWithData$ = this.openSidePanelWithDataSubject.asObservable(),
            this.closeSidePanelSubject = new lt,
            this.closeSidePanel$ = this.closeSidePanelSubject.asObservable(),
            this.closeSidePanel = (i=!0) => this.closeSidePanelSubject.next(i)
        }
        openSidePanelFromRoute(i) {
            this.openSidePanelWithDataSubject.next(i)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var si = "top"
  , zi = "bottom"
  , Di = "right"
  , _i = "left"
  , b2 = "auto"
  , qc = [si, zi, Di, _i]
  , Ga = "start"
  , l0 = "end"
  , lE = "clippingParents"
  , x2 = "viewport"
  , eh = "popper"
  , uE = "reference"
  , z7 = qc.reduce(function(e, t) {
    return e.concat([t + "-" + Ga, t + "-" + l0])
}, [])
  , w2 = [].concat(qc, [b2]).reduce(function(e, t) {
    return e.concat([t, t + "-" + Ga, t + "-" + l0])
}, [])
  , tj = "beforeRead"
  , nj = "read"
  , ij = "afterRead"
  , rj = "beforeMain"
  , sj = "main"
  , oj = "afterMain"
  , aj = "beforeWrite"
  , cj = "write"
  , lj = "afterWrite"
  , hE = [tj, nj, ij, rj, sj, oj, aj, cj, lj];
function Ni(e) {
    return e ? (e.nodeName || "").toLowerCase() : null
}
function En(e) {
    if (e == null)
        return window;
    if (e.toString() !== "[object Window]") {
        var t = e.ownerDocument;
        return t && t.defaultView || window
    }
    return e
}
function Bs(e) {
    var t = En(e).Element;
    return e instanceof t || e instanceof Element
}
function yi(e) {
    var t = En(e).HTMLElement;
    return e instanceof t || e instanceof HTMLElement
}
function th(e) {
    if (typeof ShadowRoot > "u")
        return !1;
    var t = En(e).ShadowRoot;
    return e instanceof t || e instanceof ShadowRoot
}
function uj(e) {
    var t = e.state;
    Object.keys(t.elements).forEach(function(n) {
        var i = t.styles[n] || {}
          , r = t.attributes[n] || {}
          , s = t.elements[n];
        !yi(s) || !Ni(s) || (Object.assign(s.style, i),
        Object.keys(r).forEach(function(o) {
            var a = r[o];
            a === !1 ? s.removeAttribute(o) : s.setAttribute(o, a === !0 ? "" : a)
        }))
    })
}
function hj(e) {
    var t = e.state
      , n = {
        popper: {
            position: t.options.strategy,
            left: "0",
            top: "0",
            margin: "0"
        },
        arrow: {
            position: "absolute"
        },
        reference: {}
    };
    return Object.assign(t.elements.popper.style, n.popper),
    t.styles = n,
    t.elements.arrow && Object.assign(t.elements.arrow.style, n.arrow),
    function() {
        Object.keys(t.elements).forEach(function(i) {
            var r = t.elements[i]
              , s = t.attributes[i] || {}
              , o = Object.keys(t.styles.hasOwnProperty(i) ? t.styles[i] : n[i])
              , a = o.reduce(function(c, l) {
                return c[l] = "",
                c
            }, {});
            !yi(r) || !Ni(r) || (Object.assign(r.style, a),
            Object.keys(s).forEach(function(c) {
                r.removeAttribute(c)
            }))
        })
    }
}
var dE = {
    name: "applyStyles",
    enabled: !0,
    phase: "write",
    fn: uj,
    effect: hj,
    requires: ["computeStyles"]
};
function Fi(e) {
    return e.split("-")[0]
}
var fo = Math.max
  , u0 = Math.min
  , Va = Math.round;
function nh() {
    var e = navigator.userAgentData;
    return e != null && e.brands && Array.isArray(e.brands) ? e.brands.map(function(t) {
        return t.brand + "/" + t.version
    }).join(" ") : navigator.userAgent
}
function N1() {
    return !/^((?!chrome|android).)*safari/i.test(nh())
}
function Us(e, t, n) {
    t === void 0 && (t = !1),
    n === void 0 && (n = !1);
    var i = e.getBoundingClientRect()
      , r = 1
      , s = 1;
    t && yi(e) && (r = e.offsetWidth > 0 && Va(i.width) / e.offsetWidth || 1,
    s = e.offsetHeight > 0 && Va(i.height) / e.offsetHeight || 1);
    var o = Bs(e) ? En(e) : window
      , a = o.visualViewport
      , c = !N1() && n
      , l = (i.left + (c && a ? a.offsetLeft : 0)) / r
      , u = (i.top + (c && a ? a.offsetTop : 0)) / s
      , h = i.width / r
      , d = i.height / s;
    return {
        width: h,
        height: d,
        top: u,
        right: l + h,
        bottom: u + d,
        left: l,
        x: l,
        y: u
    }
}
function h0(e) {
    var t = Us(e)
      , n = e.offsetWidth
      , i = e.offsetHeight;
    return Math.abs(t.width - n) <= 1 && (n = t.width),
    Math.abs(t.height - i) <= 1 && (i = t.height),
    {
        x: e.offsetLeft,
        y: e.offsetTop,
        width: n,
        height: i
    }
}
function F1(e, t) {
    var n = t.getRootNode && t.getRootNode();
    if (e.contains(t))
        return !0;
    if (n && th(n)) {
        var i = t;
        do {
            if (i && e.isSameNode(i))
                return !0;
            i = i.parentNode || i.host
        } while (i)
    }
    return !1
}
function Pr(e) {
    return En(e).getComputedStyle(e)
}
function X7(e) {
    return ["table", "td", "th"].indexOf(Ni(e)) >= 0
}
function Xi(e) {
    return ((Bs(e) ? e.ownerDocument : e.document) || window.document).documentElement
}
function $a(e) {
    return Ni(e) === "html" ? e : e.assignedSlot || e.parentNode || (th(e) ? e.host : null) || Xi(e)
}
function fE(e) {
    return !yi(e) || Pr(e).position === "fixed" ? null : e.offsetParent
}
function dj(e) {
    var t = /firefox/i.test(nh())
      , n = /Trident/i.test(nh());
    if (n && yi(e)) {
        var i = Pr(e);
        if (i.position === "fixed")
            return null
    }
    var r = $a(e);
    for (th(r) && (r = r.host); yi(r) && ["html", "body"].indexOf(Ni(r)) < 0; ) {
        var s = Pr(r);
        if (s.transform !== "none" || s.perspective !== "none" || s.contain === "paint" || ["transform", "perspective"].indexOf(s.willChange) !== -1 || t && s.willChange === "filter" || t && s.filter && s.filter !== "none")
            return r;
        r = r.parentNode
    }
    return null
}
function po(e) {
    for (var t = En(e), n = fE(e); n && X7(n) && Pr(n).position === "static"; )
        n = fE(n);
    return n && (Ni(n) === "html" || Ni(n) === "body" && Pr(n).position === "static") ? t : n || dj(e) || t
}
function d0(e) {
    return ["top", "bottom"].indexOf(e) >= 0 ? "x" : "y"
}
function f0(e, t, n) {
    return fo(e, u0(t, n))
}
function pE(e, t, n) {
    var i = f0(e, t, n);
    return i > n ? n : i
}
function L1() {
    return {
        top: 0,
        right: 0,
        bottom: 0,
        left: 0
    }
}
function B1(e) {
    return Object.assign({}, L1(), e)
}
function U1(e, t) {
    return t.reduce(function(n, i) {
        return n[i] = e,
        n
    }, {})
}
var fj = function(t, n) {
    return t = typeof t == "function" ? t(Object.assign({}, n.rects, {
        placement: n.placement
    })) : t,
    B1(typeof t != "number" ? t : U1(t, qc))
};
function pj(e) {
    var t, n = e.state, i = e.name, r = e.options, s = n.elements.arrow, o = n.modifiersData.popperOffsets, a = Fi(n.placement), c = d0(a), l = [_i, Di].indexOf(a) >= 0, u = l ? "height" : "width";
    if (!(!s || !o)) {
        var h = fj(r.padding, n)
          , d = h0(s)
          , f = c === "y" ? si : _i
          , g = c === "y" ? zi : Di
          , p = n.rects.reference[u] + n.rects.reference[c] - o[c] - n.rects.popper[u]
          , v = o[c] - n.rects.reference[c]
          , S = po(s)
          , x = S ? c === "y" ? S.clientHeight || 0 : S.clientWidth || 0 : 0
          , w = p / 2 - v / 2
          , k = h[f]
          , B = x - d[u] - h[g]
          , N = x / 2 - d[u] / 2 + w
          , E = f0(k, N, B)
          , F = c;
        n.modifiersData[i] = (t = {},
        t[F] = E,
        t.centerOffset = E - N,
        t)
    }
}
function gj(e) {
    var t = e.state
      , n = e.options
      , i = n.element
      , r = i === void 0 ? "[data-popper-arrow]" : i;
    r != null && (typeof r == "string" && (r = t.elements.popper.querySelector(r),
    !r) || F1(t.elements.popper, r) && (t.elements.arrow = r))
}
var K7 = {
    name: "arrow",
    enabled: !0,
    phase: "main",
    fn: pj,
    effect: gj,
    requires: ["popperOffsets"],
    requiresIfExists: ["preventOverflow"]
};
function Hs(e) {
    return e.split("-")[1]
}
var mj = {
    top: "auto",
    right: "auto",
    bottom: "auto",
    left: "auto"
};
function vj(e, t) {
    var n = e.x
      , i = e.y
      , r = t.devicePixelRatio || 1;
    return {
        x: Va(n * r) / r || 0,
        y: Va(i * r) / r || 0
    }
}
function gE(e) {
    var t, n = e.popper, i = e.popperRect, r = e.placement, s = e.variation, o = e.offsets, a = e.position, c = e.gpuAcceleration, l = e.adaptive, u = e.roundOffsets, h = e.isFixed, d = o.x, f = d === void 0 ? 0 : d, g = o.y, p = g === void 0 ? 0 : g, v = typeof u == "function" ? u({
        x: f,
        y: p
    }) : {
        x: f,
        y: p
    };
    f = v.x,
    p = v.y;
    var S = o.hasOwnProperty("x")
      , x = o.hasOwnProperty("y")
      , w = _i
      , k = si
      , B = window;
    if (l) {
        var N = po(n)
          , E = "clientHeight"
          , F = "clientWidth";
        if (N === En(n) && (N = Xi(n),
        Pr(N).position !== "static" && a === "absolute" && (E = "scrollHeight",
        F = "scrollWidth")),
        N = N,
        r === si || (r === _i || r === Di) && s === l0) {
            k = zi;
            var O = h && N === B && B.visualViewport ? B.visualViewport.height : N[E];
            p -= O - i.height,
            p *= c ? 1 : -1
        }
        if (r === _i || (r === si || r === zi) && s === l0) {
            w = Di;
            var V = h && N === B && B.visualViewport ? B.visualViewport.width : N[F];
            f -= V - i.width,
            f *= c ? 1 : -1
        }
    }
    var X = Object.assign({
        position: a
    }, l && mj)
      , b = u === !0 ? vj({
        x: f,
        y: p
    }, En(n)) : {
        x: f,
        y: p
    };
    if (f = b.x,
    p = b.y,
    c) {
        var j;
        return Object.assign({}, X, (j = {},
        j[k] = x ? "0" : "",
        j[w] = S ? "0" : "",
        j.transform = (B.devicePixelRatio || 1) <= 1 ? "translate(" + f + "px, " + p + "px)" : "translate3d(" + f + "px, " + p + "px, 0)",
        j))
    }
    return Object.assign({}, X, (t = {},
    t[k] = x ? p + "px" : "",
    t[w] = S ? f + "px" : "",
    t.transform = "",
    t))
}
function _j(e) {
    var t = e.state
      , n = e.options
      , i = n.gpuAcceleration
      , r = i === void 0 ? !0 : i
      , s = n.adaptive
      , o = s === void 0 ? !0 : s
      , a = n.roundOffsets
      , c = a === void 0 ? !0 : a
      , l = {
        placement: Fi(t.placement),
        variation: Hs(t.placement),
        popper: t.elements.popper,
        popperRect: t.rects.popper,
        gpuAcceleration: r,
        isFixed: t.options.strategy === "fixed"
    };
    t.modifiersData.popperOffsets != null && (t.styles.popper = Object.assign({}, t.styles.popper, gE(Object.assign({}, l, {
        offsets: t.modifiersData.popperOffsets,
        position: t.options.strategy,
        adaptive: o,
        roundOffsets: c
    })))),
    t.modifiersData.arrow != null && (t.styles.arrow = Object.assign({}, t.styles.arrow, gE(Object.assign({}, l, {
        offsets: t.modifiersData.arrow,
        position: "absolute",
        adaptive: !1,
        roundOffsets: c
    })))),
    t.attributes.popper = Object.assign({}, t.attributes.popper, {
        "data-popper-placement": t.placement
    })
}
var mE = {
    name: "computeStyles",
    enabled: !0,
    phase: "beforeWrite",
    fn: _j,
    data: {}
};
var C2 = {
    passive: !0
};
function yj(e) {
    var t = e.state
      , n = e.instance
      , i = e.options
      , r = i.scroll
      , s = r === void 0 ? !0 : r
      , o = i.resize
      , a = o === void 0 ? !0 : o
      , c = En(t.elements.popper)
      , l = [].concat(t.scrollParents.reference, t.scrollParents.popper);
    return s && l.forEach(function(u) {
        u.addEventListener("scroll", n.update, C2)
    }),
    a && c.addEventListener("resize", n.update, C2),
    function() {
        s && l.forEach(function(u) {
            u.removeEventListener("scroll", n.update, C2)
        }),
        a && c.removeEventListener("resize", n.update, C2)
    }
}
var vE = {
    name: "eventListeners",
    enabled: !0,
    phase: "write",
    fn: function() {},
    effect: yj,
    data: {}
};
var Sj = {
    left: "right",
    right: "left",
    bottom: "top",
    top: "bottom"
};
function ih(e) {
    return e.replace(/left|right|bottom|top/g, function(t) {
        return Sj[t]
    })
}
var bj = {
    start: "end",
    end: "start"
};
function E2(e) {
    return e.replace(/start|end/g, function(t) {
        return bj[t]
    })
}
function p0(e) {
    var t = En(e)
      , n = t.pageXOffset
      , i = t.pageYOffset;
    return {
        scrollLeft: n,
        scrollTop: i
    }
}
function g0(e) {
    return Us(Xi(e)).left + p0(e).scrollLeft
}
function Y7(e, t) {
    var n = En(e)
      , i = Xi(e)
      , r = n.visualViewport
      , s = i.clientWidth
      , o = i.clientHeight
      , a = 0
      , c = 0;
    if (r) {
        s = r.width,
        o = r.height;
        var l = N1();
        (l || !l && t === "fixed") && (a = r.offsetLeft,
        c = r.offsetTop)
    }
    return {
        width: s,
        height: o,
        x: a + g0(e),
        y: c
    }
}
function Q7(e) {
    var t, n = Xi(e), i = p0(e), r = (t = e.ownerDocument) == null ? void 0 : t.body, s = fo(n.scrollWidth, n.clientWidth, r ? r.scrollWidth : 0, r ? r.clientWidth : 0), o = fo(n.scrollHeight, n.clientHeight, r ? r.scrollHeight : 0, r ? r.clientHeight : 0), a = -i.scrollLeft + g0(e), c = -i.scrollTop;
    return Pr(r || n).direction === "rtl" && (a += fo(n.clientWidth, r ? r.clientWidth : 0) - s),
    {
        width: s,
        height: o,
        x: a,
        y: c
    }
}
function m0(e) {
    var t = Pr(e)
      , n = t.overflow
      , i = t.overflowX
      , r = t.overflowY;
    return /auto|scroll|overlay|hidden/.test(n + r + i)
}
function T2(e) {
    return ["html", "body", "#document"].indexOf(Ni(e)) >= 0 ? e.ownerDocument.body : yi(e) && m0(e) ? e : T2($a(e))
}
function zc(e, t) {
    var n;
    t === void 0 && (t = []);
    var i = T2(e)
      , r = i === ((n = e.ownerDocument) == null ? void 0 : n.body)
      , s = En(i)
      , o = r ? [s].concat(s.visualViewport || [], m0(i) ? i : []) : i
      , a = t.concat(o);
    return r ? a : a.concat(zc($a(o)))
}
function rh(e) {
    return Object.assign({}, e, {
        left: e.x,
        top: e.y,
        right: e.x + e.width,
        bottom: e.y + e.height
    })
}
function xj(e, t) {
    var n = Us(e, !1, t === "fixed");
    return n.top = n.top + e.clientTop,
    n.left = n.left + e.clientLeft,
    n.bottom = n.top + e.clientHeight,
    n.right = n.left + e.clientWidth,
    n.width = e.clientWidth,
    n.height = e.clientHeight,
    n.x = n.left,
    n.y = n.top,
    n
}
function _E(e, t, n) {
    return t === x2 ? rh(Y7(e, n)) : Bs(t) ? xj(t, n) : rh(Q7(Xi(e)))
}
function wj(e) {
    var t = zc($a(e))
      , n = ["absolute", "fixed"].indexOf(Pr(e).position) >= 0
      , i = n && yi(e) ? po(e) : e;
    return Bs(i) ? t.filter(function(r) {
        return Bs(r) && F1(r, i) && Ni(r) !== "body"
    }) : []
}
function J7(e, t, n, i) {
    var r = t === "clippingParents" ? wj(e) : [].concat(t)
      , s = [].concat(r, [n])
      , o = s[0]
      , a = s.reduce(function(c, l) {
        var u = _E(e, l, i);
        return c.top = fo(u.top, c.top),
        c.right = u0(u.right, c.right),
        c.bottom = u0(u.bottom, c.bottom),
        c.left = fo(u.left, c.left),
        c
    }, _E(e, o, i));
    return a.width = a.right - a.left,
    a.height = a.bottom - a.top,
    a.x = a.left,
    a.y = a.top,
    a
}
function H1(e) {
    var t = e.reference, n = e.element, i = e.placement, r = i ? Fi(i) : null, s = i ? Hs(i) : null, o = t.x + t.width / 2 - n.width / 2, a = t.y + t.height / 2 - n.height / 2, c;
    switch (r) {
    case si:
        c = {
            x: o,
            y: t.y - n.height
        };
        break;
    case zi:
        c = {
            x: o,
            y: t.y + t.height
        };
        break;
    case Di:
        c = {
            x: t.x + t.width,
            y: a
        };
        break;
    case _i:
        c = {
            x: t.x - n.width,
            y: a
        };
        break;
    default:
        c = {
            x: t.x,
            y: t.y
        }
    }
    var l = r ? d0(r) : null;
    if (l != null) {
        var u = l === "y" ? "height" : "width";
        switch (s) {
        case Ga:
            c[l] = c[l] - (t[u] / 2 - n[u] / 2);
            break;
        case l0:
            c[l] = c[l] + (t[u] / 2 - n[u] / 2);
            break;
        default:
        }
    }
    return c
}
function Xc(e, t) {
    t === void 0 && (t = {});
    var n = t
      , i = n.placement
      , r = i === void 0 ? e.placement : i
      , s = n.strategy
      , o = s === void 0 ? e.strategy : s
      , a = n.boundary
      , c = a === void 0 ? lE : a
      , l = n.rootBoundary
      , u = l === void 0 ? x2 : l
      , h = n.elementContext
      , d = h === void 0 ? eh : h
      , f = n.altBoundary
      , g = f === void 0 ? !1 : f
      , p = n.padding
      , v = p === void 0 ? 0 : p
      , S = B1(typeof v != "number" ? v : U1(v, qc))
      , x = d === eh ? uE : eh
      , w = e.rects.popper
      , k = e.elements[g ? x : d]
      , B = J7(Bs(k) ? k : k.contextElement || Xi(e.elements.popper), c, u, o)
      , N = Us(e.elements.reference)
      , E = H1({
        reference: N,
        element: w,
        strategy: "absolute",
        placement: r
    })
      , F = rh(Object.assign({}, w, E))
      , O = d === eh ? F : N
      , V = {
        top: B.top - O.top + S.top,
        bottom: O.bottom - B.bottom + S.bottom,
        left: B.left - O.left + S.left,
        right: O.right - B.right + S.right
    }
      , X = e.modifiersData.offset;
    if (d === eh && X) {
        var b = X[r];
        Object.keys(V).forEach(function(j) {
            var de = [Di, zi].indexOf(j) >= 0 ? 1 : -1
              , he = [si, zi].indexOf(j) >= 0 ? "y" : "x";
            V[j] += b[he] * de
        })
    }
    return V
}
function Z7(e, t) {
    t === void 0 && (t = {});
    var n = t
      , i = n.placement
      , r = n.boundary
      , s = n.rootBoundary
      , o = n.padding
      , a = n.flipVariations
      , c = n.allowedAutoPlacements
      , l = c === void 0 ? w2 : c
      , u = Hs(i)
      , h = u ? a ? z7 : z7.filter(function(g) {
        return Hs(g) === u
    }) : qc
      , d = h.filter(function(g) {
        return l.indexOf(g) >= 0
    });
    d.length === 0 && (d = h);
    var f = d.reduce(function(g, p) {
        return g[p] = Xc(e, {
            placement: p,
            boundary: r,
            rootBoundary: s,
            padding: o
        })[Fi(p)],
        g
    }, {});
    return Object.keys(f).sort(function(g, p) {
        return f[g] - f[p]
    })
}
function Cj(e) {
    if (Fi(e) === b2)
        return [];
    var t = ih(e);
    return [E2(e), t, E2(t)]
}
function Ej(e) {
    var t = e.state
      , n = e.options
      , i = e.name;
    if (!t.modifiersData[i]._skip) {
        for (var r = n.mainAxis, s = r === void 0 ? !0 : r, o = n.altAxis, a = o === void 0 ? !0 : o, c = n.fallbackPlacements, l = n.padding, u = n.boundary, h = n.rootBoundary, d = n.altBoundary, f = n.flipVariations, g = f === void 0 ? !0 : f, p = n.allowedAutoPlacements, v = t.options.placement, S = Fi(v), x = S === v, w = c || (x || !g ? [ih(v)] : Cj(v)), k = [v].concat(w).reduce(function(L, U) {
            return L.concat(Fi(U) === b2 ? Z7(t, {
                placement: U,
                boundary: u,
                rootBoundary: h,
                padding: l,
                flipVariations: g,
                allowedAutoPlacements: p
            }) : U)
        }, []), B = t.rects.reference, N = t.rects.popper, E = new Map, F = !0, O = k[0], V = 0; V < k.length; V++) {
            var X = k[V]
              , b = Fi(X)
              , j = Hs(X) === Ga
              , de = [si, zi].indexOf(b) >= 0
              , he = de ? "width" : "height"
              , Re = Xc(t, {
                placement: X,
                boundary: u,
                rootBoundary: h,
                altBoundary: d,
                padding: l
            })
              , Xe = de ? j ? Di : _i : j ? zi : si;
            B[he] > N[he] && (Xe = ih(Xe));
            var pt = ih(Xe)
              , it = [];
            if (s && it.push(Re[b] <= 0),
            a && it.push(Re[Xe] <= 0, Re[pt] <= 0),
            it.every(function(L) {
                return L
            })) {
                O = X,
                F = !1;
                break
            }
            E.set(X, it)
        }
        if (F)
            for (var fe = g ? 3 : 1, Ge = function(U) {
                var te = k.find(function(Ce) {
                    var Ve = E.get(Ce);
                    if (Ve)
                        return Ve.slice(0, U).every(function(De) {
                            return De
                        })
                });
                if (te)
                    return O = te,
                    "break"
            }, A = fe; A > 0; A--) {
                var q = Ge(A);
                if (q === "break")
                    break
            }
        t.placement !== O && (t.modifiersData[i]._skip = !0,
        t.placement = O,
        t.reset = !0)
    }
}
var e9 = {
    name: "flip",
    enabled: !0,
    phase: "main",
    fn: Ej,
    requiresIfExists: ["offset"],
    data: {
        _skip: !1
    }
};
function Tj(e, t, n) {
    var i = Fi(e)
      , r = [_i, si].indexOf(i) >= 0 ? -1 : 1
      , s = typeof n == "function" ? n(Object.assign({}, t, {
        placement: e
    })) : n
      , o = s[0]
      , a = s[1];
    return o = o || 0,
    a = (a || 0) * r,
    [_i, Di].indexOf(i) >= 0 ? {
        x: a,
        y: o
    } : {
        x: o,
        y: a
    }
}
function Oj(e) {
    var t = e.state
      , n = e.options
      , i = e.name
      , r = n.offset
      , s = r === void 0 ? [0, 0] : r
      , o = w2.reduce(function(u, h) {
        return u[h] = Tj(h, t.rects, s),
        u
    }, {})
      , a = o[t.placement]
      , c = a.x
      , l = a.y;
    t.modifiersData.popperOffsets != null && (t.modifiersData.popperOffsets.x += c,
    t.modifiersData.popperOffsets.y += l),
    t.modifiersData[i] = o
}
var t9 = {
    name: "offset",
    enabled: !0,
    phase: "main",
    requires: ["popperOffsets"],
    fn: Oj
};
function Mj(e) {
    var t = e.state
      , n = e.name;
    t.modifiersData[n] = H1({
        reference: t.rects.reference,
        element: t.rects.popper,
        strategy: "absolute",
        placement: t.placement
    })
}
var yE = {
    name: "popperOffsets",
    enabled: !0,
    phase: "read",
    fn: Mj,
    data: {}
};
function n9(e) {
    return e === "x" ? "y" : "x"
}
function Pj(e) {
    var t = e.state
      , n = e.options
      , i = e.name
      , r = n.mainAxis
      , s = r === void 0 ? !0 : r
      , o = n.altAxis
      , a = o === void 0 ? !1 : o
      , c = n.boundary
      , l = n.rootBoundary
      , u = n.altBoundary
      , h = n.padding
      , d = n.tether
      , f = d === void 0 ? !0 : d
      , g = n.tetherOffset
      , p = g === void 0 ? 0 : g
      , v = Xc(t, {
        boundary: c,
        rootBoundary: l,
        padding: h,
        altBoundary: u
    })
      , S = Fi(t.placement)
      , x = Hs(t.placement)
      , w = !x
      , k = d0(S)
      , B = n9(k)
      , N = t.modifiersData.popperOffsets
      , E = t.rects.reference
      , F = t.rects.popper
      , O = typeof p == "function" ? p(Object.assign({}, t.rects, {
        placement: t.placement
    })) : p
      , V = typeof O == "number" ? {
        mainAxis: O,
        altAxis: O
    } : Object.assign({
        mainAxis: 0,
        altAxis: 0
    }, O)
      , X = t.modifiersData.offset ? t.modifiersData.offset[t.placement] : null
      , b = {
        x: 0,
        y: 0
    };
    if (N) {
        if (s) {
            var j, de = k === "y" ? si : _i, he = k === "y" ? zi : Di, Re = k === "y" ? "height" : "width", Xe = N[k], pt = Xe + v[de], it = Xe - v[he], fe = f ? -F[Re] / 2 : 0, Ge = x === Ga ? E[Re] : F[Re], A = x === Ga ? -F[Re] : -E[Re], q = t.elements.arrow, L = f && q ? h0(q) : {
                width: 0,
                height: 0
            }, U = t.modifiersData["arrow#persistent"] ? t.modifiersData["arrow#persistent"].padding : L1(), te = U[de], Ce = U[he], Ve = f0(0, E[Re], L[Re]), De = w ? E[Re] / 2 - fe - Ve - te - V.mainAxis : Ge - Ve - te - V.mainAxis, ge = w ? -E[Re] / 2 + fe + Ve + Ce + V.mainAxis : A + Ve + Ce + V.mainAxis, kt = t.elements.arrow && po(t.elements.arrow), xt = kt ? k === "y" ? kt.clientTop || 0 : kt.clientLeft || 0 : 0, hn = (j = X?.[k]) != null ? j : 0, Ot = Xe + De - hn - xt, bi = Xe + ge - hn, Xt = f0(f ? u0(pt, Ot) : pt, Xe, f ? fo(it, bi) : it);
            N[k] = Xt,
            b[k] = Xt - Xe
        }
        if (a) {
            var Ue, Zi = k === "x" ? si : _i, ns = k === "x" ? zi : Di, Bi = N[B], is = B === "y" ? "height" : "width", ol = Bi + v[Zi], Xn = Bi - v[ns], dn = [si, _i].indexOf(S) !== -1, ca = (Ue = X?.[B]) != null ? Ue : 0, tc = dn ? ol : Bi - E[is] - F[is] - ca + V.altAxis, ne = dn ? Bi + E[is] + F[is] - ca - V.altAxis : Xn, _e = f && dn ? pE(tc, Bi, ne) : f0(f ? tc : ol, Bi, f ? ne : Xn);
            N[B] = _e,
            b[B] = _e - Bi
        }
        t.modifiersData[i] = b
    }
}
var i9 = {
    name: "preventOverflow",
    enabled: !0,
    phase: "main",
    fn: Pj,
    requiresIfExists: ["offset"]
};
function r9(e) {
    return {
        scrollLeft: e.scrollLeft,
        scrollTop: e.scrollTop
    }
}
function s9(e) {
    return e === En(e) || !yi(e) ? p0(e) : r9(e)
}
function kj(e) {
    var t = e.getBoundingClientRect()
      , n = Va(t.width) / e.offsetWidth || 1
      , i = Va(t.height) / e.offsetHeight || 1;
    return n !== 1 || i !== 1
}
function o9(e, t, n) {
    n === void 0 && (n = !1);
    var i = yi(t)
      , r = yi(t) && kj(t)
      , s = Xi(t)
      , o = Us(e, r, n)
      , a = {
        scrollLeft: 0,
        scrollTop: 0
    }
      , c = {
        x: 0,
        y: 0
    };
    return (i || !i && !n) && ((Ni(t) !== "body" || m0(s)) && (a = s9(t)),
    yi(t) ? (c = Us(t, !0),
    c.x += t.clientLeft,
    c.y += t.clientTop) : s && (c.x = g0(s))),
    {
        x: o.left + a.scrollLeft - c.x,
        y: o.top + a.scrollTop - c.y,
        width: o.width,
        height: o.height
    }
}
function Aj(e) {
    var t = new Map
      , n = new Set
      , i = [];
    e.forEach(function(s) {
        t.set(s.name, s)
    });
    function r(s) {
        n.add(s.name);
        var o = [].concat(s.requires || [], s.requiresIfExists || []);
        o.forEach(function(a) {
            if (!n.has(a)) {
                var c = t.get(a);
                c && r(c)
            }
        }),
        i.push(s)
    }
    return e.forEach(function(s) {
        n.has(s.name) || r(s)
    }),
    i
}
function a9(e) {
    var t = Aj(e);
    return hE.reduce(function(n, i) {
        return n.concat(t.filter(function(r) {
            return r.phase === i
        }))
    }, [])
}
function c9(e) {
    var t;
    return function() {
        return t || (t = new Promise(function(n) {
            Promise.resolve().then(function() {
                t = void 0,
                n(e())
            })
        }
        )),
        t
    }
}
function l9(e) {
    var t = e.reduce(function(n, i) {
        var r = n[i.name];
        return n[i.name] = r ? Object.assign({}, r, i, {
            options: Object.assign({}, r.options, i.options),
            data: Object.assign({}, r.data, i.data)
        }) : i,
        n
    }, {});
    return Object.keys(t).map(function(n) {
        return t[n]
    })
}
var SE = {
    placement: "bottom",
    modifiers: [],
    strategy: "absolute"
};
function bE() {
    for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)
        t[n] = arguments[n];
    return !t.some(function(i) {
        return !(i && typeof i.getBoundingClientRect == "function")
    })
}
function xE(e) {
    e === void 0 && (e = {});
    var t = e
      , n = t.defaultModifiers
      , i = n === void 0 ? [] : n
      , r = t.defaultOptions
      , s = r === void 0 ? SE : r;
    return function(a, c, l) {
        l === void 0 && (l = s);
        var u = {
            placement: "bottom",
            orderedModifiers: [],
            options: Object.assign({}, SE, s),
            modifiersData: {},
            elements: {
                reference: a,
                popper: c
            },
            attributes: {},
            styles: {}
        }
          , h = []
          , d = !1
          , f = {
            state: u,
            setOptions: function(S) {
                var x = typeof S == "function" ? S(u.options) : S;
                p(),
                u.options = Object.assign({}, s, u.options, x),
                u.scrollParents = {
                    reference: Bs(a) ? zc(a) : a.contextElement ? zc(a.contextElement) : [],
                    popper: zc(c)
                };
                var w = a9(l9([].concat(i, u.options.modifiers)));
                return u.orderedModifiers = w.filter(function(k) {
                    return k.enabled
                }),
                g(),
                f.update()
            },
            forceUpdate: function() {
                if (!d) {
                    var S = u.elements
                      , x = S.reference
                      , w = S.popper;
                    if (bE(x, w)) {
                        u.rects = {
                            reference: o9(x, po(w), u.options.strategy === "fixed"),
                            popper: h0(w)
                        },
                        u.reset = !1,
                        u.placement = u.options.placement,
                        u.orderedModifiers.forEach(function(V) {
                            return u.modifiersData[V.name] = Object.assign({}, V.data)
                        });
                        for (var k = 0; k < u.orderedModifiers.length; k++) {
                            if (u.reset === !0) {
                                u.reset = !1,
                                k = -1;
                                continue
                            }
                            var B = u.orderedModifiers[k]
                              , N = B.fn
                              , E = B.options
                              , F = E === void 0 ? {} : E
                              , O = B.name;
                            typeof N == "function" && (u = N({
                                state: u,
                                options: F,
                                name: O,
                                instance: f
                            }) || u)
                        }
                    }
                }
            },
            update: c9(function() {
                return new Promise(function(v) {
                    f.forceUpdate(),
                    v(u)
                }
                )
            }),
            destroy: function() {
                p(),
                d = !0
            }
        };
        if (!bE(a, c))
            return f;
        f.setOptions(l).then(function(v) {
            !d && l.onFirstUpdate && l.onFirstUpdate(v)
        });
        function g() {
            u.orderedModifiers.forEach(function(v) {
                var S = v.name
                  , x = v.options
                  , w = x === void 0 ? {} : x
                  , k = v.effect;
                if (typeof k == "function") {
                    var B = k({
                        state: u,
                        name: S,
                        instance: f,
                        options: w
                    })
                      , N = function() {};
                    h.push(B || N)
                }
            })
        }
        function p() {
            h.forEach(function(v) {
                return v()
            }),
            h = []
        }
        return f
    }
}
var Ij = [vE, yE, mE, dE]
  , u9 = xE({
    defaultModifiers: Ij
});
var g9 = ["*"];
var Rj = ["dialog"];
function Dj(e, t) {
    if (e & 1 && oe(0),
    e & 2) {
        let n = Te(2);
        Mn(n.title)
    }
}
function Nj(e, t) {}
function Fj(e, t) {
    if (e & 1 && (H(0, "h3", 2),
    at(1, Dj, 1, 1, "ng-template", null, 0, hc)(3, Nj, 0, 0, "ng-template", 4),
    W()),
    e & 2) {
        let n = uc(2)
          , i = Te();
        Q(3),
        ye("ngTemplateOutlet", i.isTitleTemplate() ? i.title : n)("ngTemplateOutletContext", i.context)
    }
}
var TE = {
    animation: !0,
    transitionTimerDelayMs: 5
}
  , m9 = ( () => {
    let t = class t {
        constructor() {
            this.animation = TE.animation
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
function Lj(e) {
    let {transitionDelay: t, transitionDuration: n} = window.getComputedStyle(e)
      , i = parseFloat(t)
      , r = parseFloat(n);
    return (i + r) * 1e3
}
function A2(e) {
    return typeof e == "string"
}
function h9(e) {
    return e != null
}
function Bj(e) {
    return e && e.then
}
function Uj(e, t) {
    return !t || typeof e.closest > "u" ? null : e.closest(t)
}
function OE(e) {
    return (e || document.body).getBoundingClientRect()
}
function Hj(e) {
    return t => new yo(n => {
        let i = o => e.run( () => n.next(o))
          , r = o => e.run( () => n.error(o))
          , s = () => e.run( () => n.complete());
        return t.subscribe({
            next: i,
            error: r,
            complete: s
        })
    }
    )
}
function ME(e=document) {
    let t = e?.activeElement;
    return t ? t.shadowRoot ? ME(t.shadowRoot) : t : null
}
var Gj = () => {}
  , {transitionTimerDelayMs: Vj} = TE
  , O2 = new Map
  , Wa = (e, t, n, i) => {
    let r = i.context || {}
      , s = O2.get(t);
    if (s)
        switch (i.runningTransition) {
        case "continue":
            return Ur;
        case "stop":
            e.run( () => s.transition$.complete()),
            r = Object.assign(s.context, r),
            O2.delete(t)
        }
    let o = n(t, i.animation, r) || Gj;
    if (!i.animation || window.getComputedStyle(t).transitionProperty === "none")
        return e.run( () => o()),
        Be(void 0).pipe(Hj(e));
    let a = new lt
      , c = new lt
      , l = a.pipe(tv(!0));
    O2.set(t, {
        transition$: a,
        complete: () => {
            c.next(),
            c.complete()
        }
        ,
        context: r
    });
    let u = Lj(t);
    return e.runOutsideAngular( () => {
        let h = sn(t, "transitionend").pipe(In(l), mt( ({target: f}) => f === t))
          , d = ci(u + Vj).pipe(In(l));
        Kp(d, h, c).pipe(In(l)).subscribe( () => {
            O2.delete(t),
            e.run( () => {
                o(),
                a.next(),
                a.complete()
            }
            )
        }
        )
    }
    ),
    a.asObservable()
}
;
var M2 = (e, t) => t ? t.some(n => n.contains(e)) : !1
  , wE = (e, t) => !t || Uj(e, t) != null
  , $j = ( () => {
    let e = () => /iPad|iPhone|iPod/.test(navigator.userAgent) || /Macintosh/.test(navigator.userAgent) && navigator.maxTouchPoints && navigator.maxTouchPoints > 2
      , t = () => /Android/.test(navigator.userAgent);
    return typeof navigator < "u" ? !!navigator.userAgent && (e() || t()) : !1
}
)()
  , Wj = e => $j ? () => setTimeout( () => e(), 100) : e;
function v9(e, t, n, i, r, s, o, a) {
    n && e.runOutsideAngular(Wj( () => {
        let c = d => {
            let f = d.target;
            return d.button === 2 || M2(f, o) ? !1 : n === "inside" ? M2(f, s) && wE(f, a) : n === "outside" ? !M2(f, s) : wE(f, a) || !M2(f, s)
        }
          , l = sn(t, "keydown").pipe(In(r), mt(d => d.key === "Escape"), He(d => d.preventDefault()))
          , u = sn(t, "mousedown").pipe(We(c), In(r))
          , h = sn(t, "mouseup").pipe(F0(u), mt( ([d,f]) => f), ss(0), In(r));
        Kp([l.pipe(We(d => 0)), h.pipe(We(d => 1))]).subscribe(d => e.run( () => i(d)))
    }
    ))
}
var PE = ["a[href]", "button:not([disabled])", 'input:not([disabled]):not([type="hidden"])', "select:not([disabled])", "textarea:not([disabled])", "[contenteditable]", '[tabindex]:not([tabindex="-1"])'].join(", ");
function kE(e) {
    let t = Array.from(e.querySelectorAll(PE)).filter(n => n.tabIndex !== -1);
    return [t[0], t[t.length - 1]]
}
var jj = (e, t, n, i=!1) => {
    e.runOutsideAngular( () => {
        let r = sn(t, "focusin").pipe(In(n), We(s => s.target));
        sn(t, "keydown").pipe(In(n), mt(s => s.key === "Tab"), F0(r)).subscribe( ([s,o]) => {
            let[a,c] = kE(t);
            (o === a || o === t) && s.shiftKey && (c.focus(),
            s.preventDefault()),
            o === c && !s.shiftKey && (a.focus(),
            s.preventDefault())
        }
        ),
        i && sn(t, "click").pipe(In(n), F0(r), We(s => s[1])).subscribe(s => s.focus())
    }
    )
}
  , qj = ( () => {
    let t = class t {
        constructor() {
            this._element = z(Nn).documentElement
        }
        isRTL() {
            return (this._element.getAttribute("dir") || "").toLowerCase() === "rtl"
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)()
  , zj = /\s+/
  , Xj = /  +/gi
  , Kj = {
    top: ["top"],
    bottom: ["bottom"],
    start: ["left", "right"],
    left: ["left"],
    end: ["right", "left"],
    right: ["right"],
    "top-start": ["top-start", "top-end"],
    "top-left": ["top-start"],
    "top-end": ["top-end", "top-start"],
    "top-right": ["top-end"],
    "bottom-start": ["bottom-start", "bottom-end"],
    "bottom-left": ["bottom-start"],
    "bottom-end": ["bottom-end", "bottom-start"],
    "bottom-right": ["bottom-end"],
    "start-top": ["left-start", "right-start"],
    "left-top": ["left-start"],
    "start-bottom": ["left-end", "right-end"],
    "left-bottom": ["left-end"],
    "end-top": ["right-start", "left-start"],
    "right-top": ["right-start"],
    "end-bottom": ["right-end", "left-end"],
    "right-bottom": ["right-end"]
};
function Yj(e, t) {
    let[n,i] = Kj[e];
    return t && i || n
}
var Qj = /^left/
  , Jj = /^right/
  , Zj = /^start/
  , eq = /^end/;
function tq(e, t) {
    let[n,i] = t.split("-")
      , r = n.replace(Qj, "start").replace(Jj, "end")
      , s = [r];
    if (i) {
        let o = i;
        (n === "left" || n === "right") && (o = o.replace(Zj, "top").replace(eq, "bottom")),
        s.push(`${r}-${o}`)
    }
    return e && (s = s.map(o => `${e}-${o}`)),
    s.join(" ")
}
function CE({placement: e, baseClass: t}, n) {
    let i = Array.isArray(e) ? e : e.split(zj)
      , r = ["top", "bottom", "start", "end", "top-start", "top-end", "bottom-start", "bottom-end", "start-top", "start-bottom", "end-top", "end-bottom"]
      , s = i.findIndex(l => l === "auto");
    s >= 0 && r.forEach(function(l) {
        i.find(u => u.search("^" + l) !== -1) == null && i.splice(s++, 1, l)
    });
    let o = i.map(l => Yj(l, n.isRTL()));
    return {
        placement: o.shift(),
        modifiers: [{
            name: "bootstrapClasses",
            enabled: !!t,
            phase: "write",
            fn({state: l}) {
                let u = new RegExp(t + "(-[a-z]+)*","gi")
                  , h = l.elements.popper
                  , d = l.placement
                  , f = h.className;
                f = f.replace(u, ""),
                f += ` ${tq(t, d)}`,
                f = f.trim().replace(Xj, " "),
                h.className = f
            }
        }, e9, i9, K7, {
            enabled: !0,
            name: "flip",
            options: {
                fallbackPlacements: o
            }
        }]
    }
}
function EE(e) {
    return e
}
function _9() {
    let e = z(qj)
      , t = null;
    return {
        createPopper(n) {
            if (!t) {
                let r = (n.updatePopperOptions || EE)(CE(n, e));
                t = u9(n.hostElement, n.targetElement, r)
            }
        },
        update() {
            t && t.update()
        },
        setOptions(n) {
            if (t) {
                let r = (n.updatePopperOptions || EE)(CE(n, e));
                t.setOptions(r)
            }
        },
        destroy() {
            t && (t.destroy(),
            t = null)
        }
    }
}
function y9(e) {
    return t => (t.modifiers.push(t9, {
        name: "offset",
        options: {
            offset: () => e
        }
    }),
    t)
}
var L5e = new Date(1882,10,12)
  , B5e = new Date(2174,10,25);
var U5e = 1e3 * 60 * 60 * 24;
var S9 = 1080
  , nq = 24 * S9
  , iq = 12 * S9 + 793
  , H5e = 29 * nq + iq
  , G5e = 11 * S9 + 204;
var rq = ( () => {
    let t = class t {
        constructor() {
            this.autoClose = !0,
            this.placement = ["bottom-start", "bottom-end", "top-start", "top-end"],
            this.popperOptions = i => i,
            this.container = null
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)()
  , AE = ( () => {
    let t = class t {
        constructor() {
            this._disabled = !1,
            this.nativeElement = z(Es).nativeElement,
            this.tabindex = 0
        }
        set disabled(i) {
            this._disabled = i === "" || i === !0
        }
        get disabled() {
            return this._disabled
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275dir = as({
        type: t,
        selectors: [["", "ngbDropdownItem", ""]],
        hostAttrs: [1, "dropdown-item"],
        hostVars: 3,
        hostBindings: function(r, s) {
            r & 2 && (Ih("tabIndex", s.disabled ? -1 : s.tabindex),
            xo("disabled", s.disabled))
        },
        inputs: {
            tabindex: "tabindex",
            disabled: "disabled"
        }
    });
    let e = t;
    return e
}
)()
  , V5e = ( () => {
    let t = class t {
        constructor() {
            this.item = z(AE)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275dir = as({
        type: t,
        selectors: [["button", "ngbDropdownItem", ""]],
        hostVars: 1,
        hostBindings: function(r, s) {
            r & 2 && Ih("disabled", s.item.disabled)
        }
    });
    let e = t;
    return e
}
)()
  , sq = ( () => {
    let t = class t {
        constructor() {
            this.dropdown = z(IE),
            this.nativeElement = z(Es).nativeElement
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275dir = as({
        type: t,
        selectors: [["", "ngbDropdownMenu", ""]],
        contentQueries: function(r, s, o) {
            if (r & 1 && Rh(o, AE, 4),
            r & 2) {
                let a;
                G0(a = V0()) && (s.menuItems = a)
            }
        },
        hostAttrs: [1, "dropdown-menu"],
        hostVars: 2,
        hostBindings: function(r, s) {
            r & 1 && Qe("keydown.ArrowUp", function(a) {
                return s.dropdown.onKeyDown(a)
            })("keydown.ArrowDown", function(a) {
                return s.dropdown.onKeyDown(a)
            })("keydown.Home", function(a) {
                return s.dropdown.onKeyDown(a)
            })("keydown.End", function(a) {
                return s.dropdown.onKeyDown(a)
            })("keydown.Enter", function(a) {
                return s.dropdown.onKeyDown(a)
            })("keydown.Space", function(a) {
                return s.dropdown.onKeyDown(a)
            })("keydown.Tab", function(a) {
                return s.dropdown.onKeyDown(a)
            })("keydown.Shift.Tab", function(a) {
                return s.dropdown.onKeyDown(a)
            }),
            r & 2 && xo("show", s.dropdown.isOpen())
        }
    });
    let e = t;
    return e
}
)()
  , d9 = ( () => {
    let t = class t {
        constructor() {
            this.dropdown = z(IE),
            this.nativeElement = z(Es).nativeElement
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275dir = as({
        type: t,
        selectors: [["", "ngbDropdownAnchor", ""]],
        hostAttrs: [1, "dropdown-toggle"],
        hostVars: 3,
        hostBindings: function(r, s) {
            r & 2 && (U0("aria-expanded", s.dropdown.isOpen()),
            xo("show", s.dropdown.isOpen()))
        }
    });
    let e = t;
    return e
}
)()
  , $5e = ( () => {
    let t = class t extends d9 {
    }
    ;
    t.\u0275fac = ( () => {
        let i;
        return function(s) {
            return (i || (i = Tn(t)))(s || t)
        }
    }
    )(),
    t.\u0275dir = as({
        type: t,
        selectors: [["", "ngbDropdownToggle", ""]],
        hostAttrs: [1, "dropdown-toggle"],
        hostVars: 3,
        hostBindings: function(r, s) {
            r & 1 && Qe("click", function() {
                return s.dropdown.toggle()
            })("keydown.ArrowUp", function(a) {
                return s.dropdown.onKeyDown(a)
            })("keydown.ArrowDown", function(a) {
                return s.dropdown.onKeyDown(a)
            })("keydown.Home", function(a) {
                return s.dropdown.onKeyDown(a)
            })("keydown.End", function(a) {
                return s.dropdown.onKeyDown(a)
            })("keydown.Tab", function(a) {
                return s.dropdown.onKeyDown(a)
            })("keydown.Shift.Tab", function(a) {
                return s.dropdown.onKeyDown(a)
            }),
            r & 2 && (U0("aria-expanded", s.dropdown.isOpen()),
            xo("show", s.dropdown.isOpen()))
        },
        features: [l4([{
            provide: d9,
            useExisting: ov( () => t)
        }]), bo]
    });
    let e = t;
    return e
}
)()
  , IE = ( () => {
    let t = class t {
        constructor() {
            this._changeDetector = z(dc),
            this._config = z(rq),
            this._document = z(Nn),
            this._injector = z(On),
            this._ngZone = z(Rn),
            this._nativeElement = z(Es).nativeElement,
            this._destroyCloseHandlers$ = new lt,
            this._bodyContainer = null,
            this._positioning = _9(),
            this.autoClose = this._config.autoClose,
            this._open = !1,
            this.placement = this._config.placement,
            this.popperOptions = this._config.popperOptions,
            this.container = this._config.container,
            this.openChange = new os
        }
        ngOnInit() {
            this.display || (this.display = this._nativeElement.closest(".navbar") ? "static" : "dynamic")
        }
        ngAfterContentInit() {
            dl({
                write: () => {
                    this._applyPlacementClasses(),
                    this._open && this._setCloseHandlers()
                }
            }, {
                injector: this._injector
            })
        }
        ngOnChanges(i) {
            if (i.container && this._open && this._applyContainer(this.container),
            i.placement && !i.placement.firstChange && (this._positioning.setOptions({
                hostElement: this._anchor.nativeElement,
                targetElement: this._bodyContainer || this._menu.nativeElement,
                placement: this.placement
            }),
            this._applyPlacementClasses()),
            i.dropdownClass) {
                let {currentValue: r, previousValue: s} = i.dropdownClass;
                this._applyCustomDropdownClass(r, s)
            }
            i.autoClose && this._open && (this.autoClose = i.autoClose.currentValue,
            this._setCloseHandlers())
        }
        isOpen() {
            return this._open
        }
        open() {
            this._open || (this._open = !0,
            this._applyContainer(this.container),
            this.openChange.emit(!0),
            this._setCloseHandlers(),
            this._anchor && (this._anchor.nativeElement.focus(),
            this.display === "dynamic" && this._ngZone.runOutsideAngular( () => {
                this._positioning.createPopper({
                    hostElement: this._anchor.nativeElement,
                    targetElement: this._bodyContainer || this._menu.nativeElement,
                    placement: this.placement,
                    updatePopperOptions: i => this.popperOptions(y9([0, 2])(i))
                }),
                this._applyPlacementClasses(),
                this._afterRenderRef = y5({
                    write: () => {
                        this._positionMenu()
                    }
                }, {
                    injector: this._injector
                })
            }
            )))
        }
        _setCloseHandlers() {
            this._destroyCloseHandlers$.next(),
            v9(this._ngZone, this._document, this.autoClose, i => {
                this.close(),
                i === 0 && this._anchor.nativeElement.focus()
            }
            , this._destroyCloseHandlers$, this._menu ? [this._menu.nativeElement] : [], this._anchor ? [this._anchor.nativeElement] : [], ".dropdown-item,.dropdown-divider")
        }
        close() {
            this._open && (this._open = !1,
            this._resetContainer(),
            this._positioning.destroy(),
            this._afterRenderRef?.destroy(),
            this._destroyCloseHandlers$.next(),
            this.openChange.emit(!1),
            this._changeDetector.markForCheck())
        }
        toggle() {
            this.isOpen() ? this.close() : this.open()
        }
        ngOnDestroy() {
            this.close()
        }
        onKeyDown(i) {
            let {key: r} = i
              , s = this._getMenuElements()
              , o = -1
              , a = null
              , c = this._isEventFromToggle(i);
            if (!c && s.length && s.forEach( (l, u) => {
                l.contains(i.target) && (a = l),
                l === ME(this._document) && (o = u)
            }
            ),
            r === " " || r === "Enter") {
                a && (this.autoClose === !0 || this.autoClose === "inside") && sn(a, "click").pipe(Lt(1)).subscribe( () => this.close());
                return
            }
            if (r === "Tab") {
                if (i.target && this.isOpen() && this.autoClose)
                    if (this._anchor.nativeElement === i.target) {
                        this.container === "body" && !i.shiftKey ? (this._menu.nativeElement.setAttribute("tabindex", "0"),
                        this._menu.nativeElement.focus(),
                        this._menu.nativeElement.removeAttribute("tabindex")) : i.shiftKey && this.close();
                        return
                    } else if (this.container === "body") {
                        let l = this._menu.nativeElement.querySelectorAll(PE);
                        i.shiftKey && i.target === l[0] ? (this._anchor.nativeElement.focus(),
                        i.preventDefault()) : !i.shiftKey && i.target === l[l.length - 1] && (this._anchor.nativeElement.focus(),
                        this.close())
                    } else
                        sn(i.target, "focusout").pipe(Lt(1)).subscribe( ({relatedTarget: l}) => {
                            this._nativeElement.contains(l) || this.close()
                        }
                        );
                return
            }
            if (c || a) {
                if (this.open(),
                s.length) {
                    switch (r) {
                    case "ArrowDown":
                        o = Math.min(o + 1, s.length - 1);
                        break;
                    case "ArrowUp":
                        if (this._isDropup() && o === -1) {
                            o = s.length - 1;
                            break
                        }
                        o = Math.max(o - 1, 0);
                        break;
                    case "Home":
                        o = 0;
                        break;
                    case "End":
                        o = s.length - 1;
                        break
                    }
                    s[o].focus()
                }
                i.preventDefault()
            }
        }
        _isDropup() {
            return this._nativeElement.classList.contains("dropup")
        }
        _isEventFromToggle(i) {
            return this._anchor.nativeElement.contains(i.target)
        }
        _getMenuElements() {
            return this._menu ? this._menu.menuItems.filter( ({disabled: i}) => !i).map( ({nativeElement: i}) => i) : []
        }
        _positionMenu() {
            let i = this._menu;
            this.isOpen() && i && (this.display === "dynamic" ? (this._positioning.update(),
            this._applyPlacementClasses()) : this._applyPlacementClasses(this._getFirstPlacement(this.placement)))
        }
        _getFirstPlacement(i) {
            return Array.isArray(i) ? i[0] : i.split(" ")[0]
        }
        _resetContainer() {
            this._menu && this._nativeElement.appendChild(this._menu.nativeElement),
            this._bodyContainer && (this._document.body.removeChild(this._bodyContainer),
            this._bodyContainer = null)
        }
        _applyContainer(i=null) {
            if (this._resetContainer(),
            i === "body") {
                let r = this._menu.nativeElement
                  , s = this._bodyContainer = this._bodyContainer || this._document.createElement("div");
                s.style.position = "absolute",
                r.style.position = "static",
                s.style.zIndex = "1055",
                s.appendChild(r),
                this._document.body.appendChild(s)
            }
            this._applyCustomDropdownClass(this.dropdownClass)
        }
        _applyCustomDropdownClass(i, r) {
            let s = this.container === "body" ? this._bodyContainer : this._nativeElement;
            s && (r && s.classList.remove(r),
            i && s.classList.add(i))
        }
        _applyPlacementClasses(i) {
            if (this._menu) {
                i || (i = this._getFirstPlacement(this.placement)),
                this._nativeElement.classList.remove("dropup", "dropdown"),
                this.display === "static" ? this._menu.nativeElement.setAttribute("data-bs-popper", "static") : this._menu.nativeElement.removeAttribute("data-bs-popper");
                let r = i.search("^top") !== -1 ? "dropup" : "dropdown";
                this._nativeElement.classList.add(r),
                this._bodyContainer && (this._bodyContainer.classList.remove("dropup", "dropdown"),
                this._bodyContainer.classList.add(r))
            }
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275dir = as({
        type: t,
        selectors: [["", "ngbDropdown", ""]],
        contentQueries: function(r, s, o) {
            if (r & 1 && (Rh(o, sq, 5),
            Rh(o, d9, 5)),
            r & 2) {
                let a;
                G0(a = V0()) && (s._menu = a.first),
                G0(a = V0()) && (s._anchor = a.first)
            }
        },
        hostVars: 2,
        hostBindings: function(r, s) {
            r & 2 && xo("show", s.isOpen())
        },
        inputs: {
            autoClose: "autoClose",
            dropdownClass: "dropdownClass",
            _open: [0, "open", "_open"],
            placement: "placement",
            popperOptions: "popperOptions",
            container: "container",
            display: "display"
        },
        outputs: {
            openChange: "openChange"
        },
        exportAs: ["ngbDropdown"],
        features: [js]
    });
    let e = t;
    return e
}
)();
var W5e = ( () => {
    let t = class t {
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275mod = nr({
        type: t
    }),
    t.\u0275inj = tr({});
    let e = t;
    return e
}
)()
  , oq = ( () => {
    let t = class t {
        constructor() {
            this._ngbConfig = z(m9),
            this.backdrop = !0,
            this.fullscreen = !1,
            this.keyboard = !0,
            this.role = "dialog"
        }
        get animation() {
            return this._animation ?? this._ngbConfig.animation
        }
        set animation(i) {
            this._animation = i
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)()
  , ja = class {
    constructor(t, n, i) {
        this.nodes = t,
        this.viewRef = n,
        this.componentRef = i
    }
}
  , P2 = class {
    constructor(t) {
        this._componentType = t,
        this._windowRef = null,
        this._contentRef = null,
        this._document = z(Nn),
        this._applicationRef = z(ua),
        this._injector = z(On),
        this._viewContainerRef = z(b5),
        this._ngZone = z(Rn)
    }
    open(t, n, i=!1) {
        this._windowRef || (this._contentRef = this._getContentRef(t, n),
        this._windowRef = this._viewContainerRef.createComponent(this._componentType, {
            injector: this._injector,
            projectableNodes: this._contentRef.nodes
        }));
        let {nativeElement: r} = this._windowRef.location
          , s = new lt;
        dl({
            mixedReadWrite: () => {
                s.next(),
                s.complete()
            }
        }, {
            injector: this._injector
        });
        let o = s.pipe(ai( () => Wa(this._ngZone, r, ({classList: a}) => a.add("show"), {
            animation: i,
            runningTransition: "continue"
        })));
        return {
            windowRef: this._windowRef,
            transition$: o
        }
    }
    close(t=!1) {
        return this._windowRef ? Wa(this._ngZone, this._windowRef.location.nativeElement, ({classList: n}) => n.remove("show"), {
            animation: t,
            runningTransition: "stop"
        }).pipe(He( () => {
            this._windowRef?.destroy(),
            this._contentRef?.viewRef?.destroy(),
            this._windowRef = null,
            this._contentRef = null
        }
        )) : Be(void 0)
    }
    _getContentRef(t, n) {
        if (t)
            if (t instanceof S5) {
                let i = t.createEmbeddedView(n);
                return this._applicationRef.attachView(i),
                new ja([i.rootNodes],i)
            } else
                return new ja([[this._document.createTextNode(`${t}`)]]);
        else
            return new ja([])
    }
}
  , aq = ( () => {
    let t = class t {
        constructor() {
            this._document = z(Nn)
        }
        hide() {
            let i = Math.abs(window.innerWidth - this._document.documentElement.clientWidth)
              , r = this._document.body
              , s = r.style
              , {overflow: o, paddingRight: a} = s;
            if (i > 0) {
                let c = parseFloat(window.getComputedStyle(r).paddingRight);
                s.paddingRight = `${c + i}px`
            }
            return s.overflow = "hidden",
            () => {
                i > 0 && (s.paddingRight = a),
                s.overflow = o
            }
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)()
  , cq = ( () => {
    let t = class t {
        constructor() {
            this._nativeElement = z(Es).nativeElement,
            this._zone = z(Rn),
            this._injector = z(On)
        }
        ngOnInit() {
            dl({
                mixedReadWrite: () => Wa(this._zone, this._nativeElement, (i, r) => {
                    r && OE(i),
                    i.classList.add("show")
                }
                , {
                    animation: this.animation,
                    runningTransition: "continue"
                })
            }, {
                injector: this._injector
            })
        }
        hide() {
            return Wa(this._zone, this._nativeElement, ({classList: i}) => i.remove("show"), {
                animation: this.animation,
                runningTransition: "stop"
            })
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["ngb-modal-backdrop"]],
        hostAttrs: [2, "z-index", "1055"],
        hostVars: 6,
        hostBindings: function(r, s) {
            r & 2 && (fr("modal-backdrop" + (s.backdropClass ? " " + s.backdropClass : "")),
            xo("show", !s.animation)("fade", s.animation))
        },
        inputs: {
            animation: "animation",
            backdropClass: "backdropClass"
        },
        decls: 0,
        vars: 0,
        template: function(r, s) {},
        encapsulation: 2
    });
    let e = t;
    return e
}
)()
  , k2 = class {
    update(t) {}
    close(t) {}
    dismiss(t) {}
}
  , lq = ["animation", "ariaLabelledBy", "ariaDescribedBy", "backdrop", "centered", "fullscreen", "keyboard", "role", "scrollable", "size", "windowClass", "modalDialogClass"]
  , uq = ["animation", "backdropClass"]
  , f9 = class {
    _applyWindowOptions(t, n) {
        lq.forEach(i => {
            h9(n[i]) && (t[i] = n[i])
        }
        )
    }
    _applyBackdropOptions(t, n) {
        uq.forEach(i => {
            h9(n[i]) && (t[i] = n[i])
        }
        )
    }
    update(t) {
        this._applyWindowOptions(this._windowCmptRef.instance, t),
        this._backdropCmptRef && this._backdropCmptRef.instance && this._applyBackdropOptions(this._backdropCmptRef.instance, t)
    }
    get componentInstance() {
        if (this._contentRef && this._contentRef.componentRef)
            return this._contentRef.componentRef.instance
    }
    get closed() {
        return this._closed.asObservable().pipe(In(this._hidden))
    }
    get dismissed() {
        return this._dismissed.asObservable().pipe(In(this._hidden))
    }
    get hidden() {
        return this._hidden.asObservable()
    }
    get shown() {
        return this._windowCmptRef.instance.shown.asObservable()
    }
    constructor(t, n, i, r) {
        this._windowCmptRef = t,
        this._contentRef = n,
        this._backdropCmptRef = i,
        this._beforeDismiss = r,
        this._closed = new lt,
        this._dismissed = new lt,
        this._hidden = new lt,
        t.instance.dismissEvent.subscribe(s => {
            this.dismiss(s)
        }
        ),
        this.result = new Promise( (s, o) => {
            this._resolve = s,
            this._reject = o
        }
        ),
        this.result.then(null, () => {}
        )
    }
    close(t) {
        this._windowCmptRef && (this._closed.next(t),
        this._resolve(t),
        this._removeModalElements())
    }
    _dismiss(t) {
        this._dismissed.next(t),
        this._reject(t),
        this._removeModalElements()
    }
    dismiss(t) {
        if (this._windowCmptRef)
            if (!this._beforeDismiss)
                this._dismiss(t);
            else {
                let n = this._beforeDismiss();
                Bj(n) ? n.then(i => {
                    i !== !1 && this._dismiss(t)
                }
                , () => {}
                ) : n !== !1 && this._dismiss(t)
            }
    }
    _removeModalElements() {
        let t = this._windowCmptRef.instance.hide()
          , n = this._backdropCmptRef ? this._backdropCmptRef.instance.hide() : Be(void 0);
        t.subscribe( () => {
            let {nativeElement: i} = this._windowCmptRef.location;
            i.parentNode.removeChild(i),
            this._windowCmptRef.destroy(),
            this._contentRef?.viewRef?.destroy(),
            this._windowCmptRef = null,
            this._contentRef = null
        }
        ),
        n.subscribe( () => {
            if (this._backdropCmptRef) {
                let {nativeElement: i} = this._backdropCmptRef.location;
                i.parentNode.removeChild(i),
                this._backdropCmptRef.destroy(),
                this._backdropCmptRef = null
            }
        }
        ),
        v5(t, n).subscribe( () => {
            this._hidden.next(),
            this._hidden.complete()
        }
        )
    }
}
  , p9 = function(e) {
    return e[e.BACKDROP_CLICK = 0] = "BACKDROP_CLICK",
    e[e.ESC = 1] = "ESC",
    e
}(p9 || {})
  , hq = ( () => {
    let t = class t {
        constructor() {
            this._document = z(Nn),
            this._elRef = z(Es),
            this._zone = z(Rn),
            this._injector = z(On),
            this._closed$ = new lt,
            this._elWithFocus = null,
            this.backdrop = !0,
            this.keyboard = !0,
            this.role = "dialog",
            this.dismissEvent = new os,
            this.shown = new lt,
            this.hidden = new lt
        }
        get fullscreenClass() {
            return this.fullscreen === !0 ? " modal-fullscreen" : A2(this.fullscreen) ? ` modal-fullscreen-${this.fullscreen}-down` : ""
        }
        dismiss(i) {
            this.dismissEvent.emit(i)
        }
        ngOnInit() {
            this._elWithFocus = this._document.activeElement,
            dl({
                mixedReadWrite: () => this._show()
            }, {
                injector: this._injector
            })
        }
        ngOnDestroy() {
            this._disableEventHandling()
        }
        hide() {
            let {nativeElement: i} = this._elRef
              , r = {
                animation: this.animation,
                runningTransition: "stop"
            }
              , s = Wa(this._zone, i, () => i.classList.remove("show"), r)
              , o = Wa(this._zone, this._dialogEl.nativeElement, () => {}
            , r)
              , a = v5(s, o);
            return a.subscribe( () => {
                this.hidden.next(),
                this.hidden.complete()
            }
            ),
            this._disableEventHandling(),
            this._restoreFocus(),
            a
        }
        _show() {
            let i = {
                animation: this.animation,
                runningTransition: "continue"
            }
              , r = Wa(this._zone, this._elRef.nativeElement, (o, a) => {
                a && OE(o),
                o.classList.add("show")
            }
            , i)
              , s = Wa(this._zone, this._dialogEl.nativeElement, () => {}
            , i);
            v5(r, s).subscribe( () => {
                this.shown.next(),
                this.shown.complete()
            }
            ),
            this._enableEventHandling(),
            this._setFocus()
        }
        _enableEventHandling() {
            let {nativeElement: i} = this._elRef;
            this._zone.runOutsideAngular( () => {
                sn(i, "keydown").pipe(In(this._closed$), mt(s => s.key === "Escape")).subscribe(s => {
                    this.keyboard ? requestAnimationFrame( () => {
                        s.defaultPrevented || this._zone.run( () => this.dismiss(p9.ESC))
                    }
                    ) : this.backdrop === "static" && this._bumpBackdrop()
                }
                );
                let r = !1;
                sn(this._dialogEl.nativeElement, "mousedown").pipe(In(this._closed$), He( () => r = !1), Vt( () => sn(i, "mouseup").pipe(In(this._closed$), Lt(1))), mt( ({target: s}) => i === s)).subscribe( () => {
                    r = !0
                }
                ),
                sn(i, "click").pipe(In(this._closed$)).subscribe( ({target: s}) => {
                    i === s && (this.backdrop === "static" ? this._bumpBackdrop() : this.backdrop === !0 && !r && this._zone.run( () => this.dismiss(p9.BACKDROP_CLICK))),
                    r = !1
                }
                )
            }
            )
        }
        _disableEventHandling() {
            this._closed$.next()
        }
        _setFocus() {
            let {nativeElement: i} = this._elRef;
            if (!i.contains(document.activeElement)) {
                let r = i.querySelector("[ngbAutofocus]")
                  , s = kE(i)[0];
                (r || s || i).focus()
            }
        }
        _restoreFocus() {
            let i = this._document.body, r = this._elWithFocus, s;
            r && r.focus && i.contains(r) ? s = r : s = i,
            this._zone.runOutsideAngular( () => {
                setTimeout( () => s.focus()),
                this._elWithFocus = null
            }
            )
        }
        _bumpBackdrop() {
            this.backdrop === "static" && Wa(this._zone, this._elRef.nativeElement, ({classList: i}) => (i.add("modal-static"),
            () => i.remove("modal-static")), {
                animation: this.animation,
                runningTransition: "continue"
            })
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["ngb-modal-window"]],
        viewQuery: function(r, s) {
            if (r & 1 && xv(Rj, 7),
            r & 2) {
                let o;
                G0(o = V0()) && (s._dialogEl = o.first)
            }
        },
        hostAttrs: ["tabindex", "-1"],
        hostVars: 8,
        hostBindings: function(r, s) {
            r & 2 && (U0("aria-modal", !0)("aria-labelledby", s.ariaLabelledBy)("aria-describedby", s.ariaDescribedBy)("role", s.role),
            fr("modal d-block" + (s.windowClass ? " " + s.windowClass : "")),
            xo("fade", s.animation))
        },
        inputs: {
            animation: "animation",
            ariaLabelledBy: "ariaLabelledBy",
            ariaDescribedBy: "ariaDescribedBy",
            backdrop: "backdrop",
            centered: "centered",
            fullscreen: "fullscreen",
            keyboard: "keyboard",
            role: "role",
            scrollable: "scrollable",
            size: "size",
            windowClass: "windowClass",
            modalDialogClass: "modalDialogClass"
        },
        outputs: {
            dismissEvent: "dismiss"
        },
        ngContentSelectors: g9,
        decls: 4,
        vars: 2,
        consts: [["dialog", ""], ["role", "document"], [1, "modal-content"]],
        template: function(r, s) {
            r & 1 && (E5(),
            H(0, "div", 1, 0)(2, "div", 2),
            T5(3),
            W()()),
            r & 2 && fr("modal-dialog" + (s.size ? " modal-" + s.size : "") + (s.centered ? " modal-dialog-centered" : "") + s.fullscreenClass + (s.scrollable ? " modal-dialog-scrollable" : "") + (s.modalDialogClass ? " " + s.modalDialogClass : ""))
        },
        styles: [`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],
        encapsulation: 2
    });
    let e = t;
    return e
}
)()
  , dq = ( () => {
    let t = class t {
        constructor() {
            this._applicationRef = z(ua),
            this._injector = z(On),
            this._environmentInjector = z(rc),
            this._document = z(Nn),
            this._scrollBar = z(aq),
            this._activeWindowCmptHasChanged = new lt,
            this._ariaHiddenValues = new Map,
            this._scrollBarRestoreFn = null,
            this._modalRefs = [],
            this._windowCmpts = [],
            this._activeInstances = new os;
            let i = z(Rn);
            this._activeWindowCmptHasChanged.subscribe( () => {
                if (this._windowCmpts.length) {
                    let r = this._windowCmpts[this._windowCmpts.length - 1];
                    jj(i, r.location.nativeElement, this._activeWindowCmptHasChanged),
                    this._revertAriaHidden(),
                    this._setAriaHidden(r.location.nativeElement)
                }
            }
            )
        }
        _restoreScrollBar() {
            let i = this._scrollBarRestoreFn;
            i && (this._scrollBarRestoreFn = null,
            i())
        }
        _hideScrollBar() {
            this._scrollBarRestoreFn || (this._scrollBarRestoreFn = this._scrollBar.hide())
        }
        open(i, r, s) {
            let o = s.container instanceof HTMLElement ? s.container : h9(s.container) ? this._document.querySelector(s.container) : this._document.body;
            if (!o)
                throw new Error(`The specified modal container "${s.container || "body"}" was not found in the DOM.`);
            this._hideScrollBar();
            let a = new k2;
            i = s.injector || i;
            let c = i.get(rc, null) || this._environmentInjector
              , l = this._getContentRef(i, c, r, a, s)
              , u = s.backdrop !== !1 ? this._attachBackdrop(o) : void 0
              , h = this._attachWindowComponent(o, l.nodes)
              , d = new f9(h,l,u,s.beforeDismiss);
            return this._registerModalRef(d),
            this._registerWindowCmpt(h),
            d.hidden.pipe(Lt(1)).subscribe( () => Promise.resolve(!0).then( () => {
                this._modalRefs.length || (this._document.body.classList.remove("modal-open"),
                this._restoreScrollBar(),
                this._revertAriaHidden())
            }
            )),
            a.close = f => {
                d.close(f)
            }
            ,
            a.dismiss = f => {
                d.dismiss(f)
            }
            ,
            a.update = f => {
                d.update(f)
            }
            ,
            d.update(s),
            this._modalRefs.length === 1 && this._document.body.classList.add("modal-open"),
            u && u.instance && u.changeDetectorRef.detectChanges(),
            h.changeDetectorRef.detectChanges(),
            d
        }
        get activeInstances() {
            return this._activeInstances
        }
        dismissAll(i) {
            this._modalRefs.forEach(r => r.dismiss(i))
        }
        hasOpenModals() {
            return this._modalRefs.length > 0
        }
        _attachBackdrop(i) {
            let r = A5(cq, {
                environmentInjector: this._applicationRef.injector,
                elementInjector: this._injector
            });
            return this._applicationRef.attachView(r.hostView),
            i.appendChild(r.location.nativeElement),
            r
        }
        _attachWindowComponent(i, r) {
            let s = A5(hq, {
                environmentInjector: this._applicationRef.injector,
                elementInjector: this._injector,
                projectableNodes: r
            });
            return this._applicationRef.attachView(s.hostView),
            i.appendChild(s.location.nativeElement),
            s
        }
        _getContentRef(i, r, s, o, a) {
            return s ? s instanceof S5 ? this._createFromTemplateRef(s, o) : A2(s) ? this._createFromString(s) : this._createFromComponent(i, r, s, o, a) : new ja([])
        }
        _createFromTemplateRef(i, r) {
            let s = {
                $implicit: r,
                close(a) {
                    r.close(a)
                },
                dismiss(a) {
                    r.dismiss(a)
                }
            }
              , o = i.createEmbeddedView(s);
            return this._applicationRef.attachView(o),
            new ja([o.rootNodes],o)
        }
        _createFromString(i) {
            let r = this._document.createTextNode(`${i}`);
            return new ja([[r]])
        }
        _createFromComponent(i, r, s, o, a) {
            let c = On.create({
                providers: [{
                    provide: k2,
                    useValue: o
                }],
                parent: i
            })
              , l = A5(s, {
                environmentInjector: r,
                elementInjector: c
            })
              , u = l.location.nativeElement;
            return a.scrollable && u.classList.add("component-host-scrollable"),
            this._applicationRef.attachView(l.hostView),
            new ja([[u]],l.hostView,l)
        }
        _setAriaHidden(i) {
            let r = i.parentElement;
            r && i !== this._document.body && (Array.from(r.children).forEach(s => {
                s !== i && s.nodeName !== "SCRIPT" && (this._ariaHiddenValues.set(s, s.getAttribute("aria-hidden")),
                s.setAttribute("aria-hidden", "true"))
            }
            ),
            this._setAriaHidden(r))
        }
        _revertAriaHidden() {
            this._ariaHiddenValues.forEach( (i, r) => {
                i ? r.setAttribute("aria-hidden", i) : r.removeAttribute("aria-hidden")
            }
            ),
            this._ariaHiddenValues.clear()
        }
        _registerModalRef(i) {
            let r = () => {
                let s = this._modalRefs.indexOf(i);
                s > -1 && (this._modalRefs.splice(s, 1),
                this._activeInstances.emit(this._modalRefs))
            }
            ;
            this._modalRefs.push(i),
            this._activeInstances.emit(this._modalRefs),
            i.result.then(r, r)
        }
        _registerWindowCmpt(i) {
            this._windowCmpts.push(i),
            this._activeWindowCmptHasChanged.next(),
            i.onDestroy( () => {
                let r = this._windowCmpts.indexOf(i);
                r > -1 && (this._windowCmpts.splice(r, 1),
                this._activeWindowCmptHasChanged.next())
            }
            )
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)()
  , RE = ( () => {
    let t = class t {
        constructor() {
            this._injector = z(On),
            this._modalStack = z(dq),
            this._config = z(oq)
        }
        open(i, r={}) {
            let s = C(ve(C({}, this._config), {
                animation: this._config.animation
            }), r);
            return this._modalStack.open(this._injector, i, s)
        }
        get activeInstances() {
            return this._modalStack.activeInstances
        }
        dismissAll(i) {
            this._modalStack.dismissAll(i)
        }
        hasOpenModals() {
            return this._modalStack.hasOpenModals()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var fq = {
    hover: ["mouseenter", "mouseleave"],
    focus: ["focusin", "focusout"]
};
function pq(e) {
    let t = (e || "").trim();
    if (t.length === 0)
        return [];
    let n = t.split(/\s+/).map(r => r.split(":")).map(r => fq[r[0]] || r)
      , i = n.filter(r => r.includes("manual"));
    if (i.length > 1)
        throw "Triggers parse error: only one manual trigger is allowed";
    if (i.length === 1 && n.length > 1)
        throw "Triggers parse error: manual trigger can't be mixed with other triggers";
    return i.length ? [] : n
}
function DE(e, t, n, i, r, s=0, o=0) {
    let a = pq(t);
    if (a.length === 0)
        return () => {}
        ;
    let c = new Set, l = [], u;
    function h(f, g) {
        e.addEventListener(f, g),
        l.push( () => e.removeEventListener(f, g))
    }
    function d(f, g) {
        clearTimeout(u),
        g > 0 ? u = setTimeout(f, g) : f()
    }
    for (let[f,g] of a)
        g ? (h(f, () => {
            c.add(f),
            d( () => c.size > 0 && i(), s)
        }
        ),
        h(g, () => {
            c.delete(f),
            d( () => c.size === 0 && r(), o)
        }
        )) : h(f, () => n() ? d(r, o) : d(i, s));
    return () => l.forEach(f => f())
}
var gq = ( () => {
    let t = class t {
        constructor() {
            this._ngbConfig = z(m9),
            this.autoClose = !0,
            this.placement = "auto",
            this.popperOptions = i => i,
            this.triggers = "click",
            this.disablePopover = !1,
            this.openDelay = 0,
            this.closeDelay = 0
        }
        get animation() {
            return this._animation ?? this._ngbConfig.animation
        }
        set animation(i) {
            this._animation = i
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)()
  , mq = 0
  , vq = ( () => {
    let t = class t {
        isTitleTemplate() {
            return this.title instanceof S5
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["ngb-popover-window"]],
        hostAttrs: ["role", "tooltip", 2, "position", "absolute"],
        hostVars: 5,
        hostBindings: function(r, s) {
            r & 2 && (Ih("id", s.id),
            fr("popover" + (s.popoverClass ? " " + s.popoverClass : "")),
            xo("fade", s.animation))
        },
        inputs: {
            animation: "animation",
            title: "title",
            id: "id",
            popoverClass: "popoverClass",
            context: "context"
        },
        ngContentSelectors: g9,
        decls: 4,
        vars: 1,
        consts: [["simpleTitle", ""], ["data-popper-arrow", "", 1, "popover-arrow"], [1, "popover-header"], [1, "popover-body"], [3, "ngTemplateOutlet", "ngTemplateOutletContext"]],
        template: function(r, s) {
            r & 1 && (E5(),
            me(0, "div", 1),
            at(1, Fj, 4, 2, "h3", 2),
            H(2, "div", 3),
            T5(3),
            W()),
            r & 2 && (Q(),
            et(s.title ? 1 : -1))
        },
        dependencies: [Nv],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)()
  , NE = ( () => {
    let t = class t {
        constructor() {
            this._config = z(gq),
            this.animation = this._config.animation,
            this.autoClose = this._config.autoClose,
            this.placement = this._config.placement,
            this.popperOptions = this._config.popperOptions,
            this.triggers = this._config.triggers,
            this.container = this._config.container,
            this.disablePopover = this._config.disablePopover,
            this.popoverClass = this._config.popoverClass,
            this.openDelay = this._config.openDelay,
            this.closeDelay = this._config.closeDelay,
            this.shown = new os,
            this.hidden = new os,
            this._nativeElement = z(Es).nativeElement,
            this._ngZone = z(Rn),
            this._document = z(Nn),
            this._changeDetector = z(dc),
            this._injector = z(On),
            this._ngbPopoverWindowId = `ngb-popover-${mq++}`,
            this._popupService = new P2(vq),
            this._windowRef = null,
            this._positioning = _9()
        }
        open(i) {
            if (!this._windowRef && !this._isDisabled()) {
                let {windowRef: r, transition$: s} = this._popupService.open(this.ngbPopover, i ?? this.popoverContext, this.animation);
                this._windowRef = r,
                this._windowRef.setInput("animation", this.animation),
                this._windowRef.setInput("title", this.popoverTitle),
                this._windowRef.setInput("context", i ?? this.popoverContext),
                this._windowRef.setInput("popoverClass", this.popoverClass),
                this._windowRef.setInput("id", this._ngbPopoverWindowId),
                this._getPositionTargetElement().setAttribute("aria-describedby", this._ngbPopoverWindowId),
                this.container === "body" && this._document.body.appendChild(this._windowRef.location.nativeElement),
                this._windowRef.changeDetectorRef.detectChanges(),
                this._windowRef.changeDetectorRef.markForCheck(),
                this._ngZone.runOutsideAngular( () => {
                    this._positioning.createPopper({
                        hostElement: this._getPositionTargetElement(),
                        targetElement: this._windowRef.location.nativeElement,
                        placement: this.placement,
                        baseClass: "bs-popover",
                        updatePopperOptions: o => this.popperOptions(y9([0, 8])(o))
                    }),
                    Promise.resolve().then( () => {
                        this._positioning.update()
                    }
                    ),
                    this._afterRenderRef = y5({
                        mixedReadWrite: () => {
                            this._positioning.update()
                        }
                    }, {
                        injector: this._injector
                    })
                }
                ),
                v9(this._ngZone, this._document, this.autoClose, () => this.close(), this.hidden, [this._windowRef.location.nativeElement]),
                s.subscribe( () => this.shown.emit())
            }
        }
        close(i=this.animation) {
            this._windowRef && (this._getPositionTargetElement().removeAttribute("aria-describedby"),
            this._popupService.close(i).subscribe( () => {
                this._windowRef = null,
                this._positioning.destroy(),
                this._afterRenderRef?.destroy(),
                this.hidden.emit(),
                this._changeDetector.markForCheck()
            }
            ))
        }
        toggle() {
            this._windowRef ? this.close() : this.open()
        }
        isOpen() {
            return this._windowRef != null
        }
        ngOnInit() {
            this._unregisterListenersFn = DE(this._nativeElement, this.triggers, this.isOpen.bind(this), this.open.bind(this), this.close.bind(this), +this.openDelay, +this.closeDelay)
        }
        ngOnChanges({ngbPopover: i, popoverTitle: r, disablePopover: s, popoverClass: o}) {
            o && this.isOpen() && this._windowRef.setInput("popoverClass", o.currentValue),
            (i || r || s) && this._isDisabled() && this.close()
        }
        ngOnDestroy() {
            this.close(!1),
            this._unregisterListenersFn?.()
        }
        _isDisabled() {
            return this.disablePopover ? !0 : !this.ngbPopover && !this.popoverTitle
        }
        _getPositionTargetElement() {
            return (A2(this.positionTarget) ? this._document.querySelector(this.positionTarget) : this.positionTarget) || this._nativeElement
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275dir = as({
        type: t,
        selectors: [["", "ngbPopover", ""]],
        inputs: {
            animation: "animation",
            autoClose: "autoClose",
            ngbPopover: "ngbPopover",
            popoverTitle: "popoverTitle",
            placement: "placement",
            popperOptions: "popperOptions",
            triggers: "triggers",
            positionTarget: "positionTarget",
            container: "container",
            disablePopover: "disablePopover",
            popoverClass: "popoverClass",
            popoverContext: "popoverContext",
            openDelay: "openDelay",
            closeDelay: "closeDelay"
        },
        outputs: {
            shown: "shown",
            hidden: "hidden"
        },
        exportAs: ["ngbPopover"],
        features: [js]
    });
    let e = t;
    return e
}
)()
  , j5e = ( () => {
    let t = class t {
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275mod = nr({
        type: t
    }),
    t.\u0275inj = tr({});
    let e = t;
    return e
}
)();
var _q = ( () => {
    let t = class t {
        constructor() {
            this._ngbConfig = z(m9),
            this.autoClose = !0,
            this.placement = "auto",
            this.popperOptions = i => i,
            this.triggers = "hover focus",
            this.disableTooltip = !1,
            this.openDelay = 0,
            this.closeDelay = 0
        }
        get animation() {
            return this._animation ?? this._ngbConfig.animation
        }
        set animation(i) {
            this._animation = i
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)()
  , yq = 0
  , Sq = ( () => {
    let t = class t {
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["ngb-tooltip-window"]],
        hostAttrs: ["role", "tooltip"],
        hostVars: 5,
        hostBindings: function(r, s) {
            r & 2 && (Ih("id", s.id),
            fr("tooltip" + (s.tooltipClass ? " " + s.tooltipClass : "")),
            xo("fade", s.animation))
        },
        inputs: {
            animation: "animation",
            id: "id",
            tooltipClass: "tooltipClass"
        },
        ngContentSelectors: g9,
        decls: 3,
        vars: 0,
        consts: [["data-popper-arrow", "", 1, "tooltip-arrow"], [1, "tooltip-inner"]],
        template: function(r, s) {
            r & 1 && (E5(),
            me(0, "div", 0),
            H(1, "div", 1),
            T5(2),
            W())
        },
        styles: [`ngb-tooltip-window{pointer-events:none;position:absolute}ngb-tooltip-window .tooltip-inner{pointer-events:auto}ngb-tooltip-window.bs-tooltip-top,ngb-tooltip-window.bs-tooltip-bottom{padding-left:0;padding-right:0}ngb-tooltip-window.bs-tooltip-start,ngb-tooltip-window.bs-tooltip-end{padding-top:0;padding-bottom:0}
`],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)()
  , q5e = ( () => {
    let t = class t {
        constructor() {
            this._config = z(_q),
            this.animation = this._config.animation,
            this.autoClose = this._config.autoClose,
            this.placement = this._config.placement,
            this.popperOptions = this._config.popperOptions,
            this.triggers = this._config.triggers,
            this.container = this._config.container,
            this.disableTooltip = this._config.disableTooltip,
            this.tooltipClass = this._config.tooltipClass,
            this.openDelay = this._config.openDelay,
            this.closeDelay = this._config.closeDelay,
            this.shown = new os,
            this.hidden = new os,
            this._nativeElement = z(Es).nativeElement,
            this._ngZone = z(Rn),
            this._document = z(Nn),
            this._changeDetector = z(dc),
            this._injector = z(On),
            this._ngbTooltipWindowId = `ngb-tooltip-${yq++}`,
            this._popupService = new P2(Sq),
            this._windowRef = null,
            this._positioning = _9()
        }
        set ngbTooltip(i) {
            this._ngbTooltip = i,
            !i && this._windowRef && this.close()
        }
        get ngbTooltip() {
            return this._ngbTooltip
        }
        open(i) {
            if (!this._windowRef && this._ngbTooltip && !this.disableTooltip) {
                let {windowRef: r, transition$: s} = this._popupService.open(this._ngbTooltip, i ?? this.tooltipContext, this.animation);
                this._windowRef = r,
                this._windowRef.setInput("animation", this.animation),
                this._windowRef.setInput("tooltipClass", this.tooltipClass),
                this._windowRef.setInput("id", this._ngbTooltipWindowId),
                this._getPositionTargetElement().setAttribute("aria-describedby", this._ngbTooltipWindowId),
                this.container === "body" && this._document.body.appendChild(this._windowRef.location.nativeElement),
                this._windowRef.changeDetectorRef.detectChanges(),
                this._windowRef.changeDetectorRef.markForCheck(),
                this._ngZone.runOutsideAngular( () => {
                    this._positioning.createPopper({
                        hostElement: this._getPositionTargetElement(),
                        targetElement: this._windowRef.location.nativeElement,
                        placement: this.placement,
                        baseClass: "bs-tooltip",
                        updatePopperOptions: o => this.popperOptions(y9([0, 6])(o))
                    }),
                    Promise.resolve().then( () => {
                        this._positioning.update()
                    }
                    ),
                    this._afterRenderRef = y5({
                        mixedReadWrite: () => {
                            this._positioning.update()
                        }
                    }, {
                        injector: this._injector
                    })
                }
                ),
                v9(this._ngZone, this._document, this.autoClose, () => this.close(), this.hidden, [this._windowRef.location.nativeElement], [this._nativeElement]),
                s.subscribe( () => this.shown.emit())
            }
        }
        close(i=this.animation) {
            this._windowRef != null && (this._getPositionTargetElement().removeAttribute("aria-describedby"),
            this._popupService.close(i).subscribe( () => {
                this._windowRef = null,
                this._positioning.destroy(),
                this._afterRenderRef?.destroy(),
                this.hidden.emit(),
                this._changeDetector.markForCheck()
            }
            ))
        }
        toggle() {
            this._windowRef ? this.close() : this.open()
        }
        isOpen() {
            return this._windowRef != null
        }
        ngOnInit() {
            this._unregisterListenersFn = DE(this._nativeElement, this.triggers, this.isOpen.bind(this), this.open.bind(this), this.close.bind(this), +this.openDelay, +this.closeDelay)
        }
        ngOnChanges({tooltipClass: i}) {
            i && this.isOpen() && this._windowRef.setInput("tooltipClass", i.currentValue)
        }
        ngOnDestroy() {
            this.close(!1),
            this._unregisterListenersFn?.()
        }
        _getPositionTargetElement() {
            return (A2(this.positionTarget) ? this._document.querySelector(this.positionTarget) : this.positionTarget) || this._nativeElement
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275dir = as({
        type: t,
        selectors: [["", "ngbTooltip", ""]],
        inputs: {
            animation: "animation",
            autoClose: "autoClose",
            placement: "placement",
            popperOptions: "popperOptions",
            triggers: "triggers",
            positionTarget: "positionTarget",
            container: "container",
            disableTooltip: "disableTooltip",
            tooltipClass: "tooltipClass",
            tooltipContext: "tooltipContext",
            openDelay: "openDelay",
            closeDelay: "closeDelay",
            ngbTooltip: "ngbTooltip"
        },
        outputs: {
            shown: "shown",
            hidden: "hidden"
        },
        exportAs: ["ngbTooltip"],
        features: [js]
    });
    let e = t;
    return e
}
)();
var z5e = new Je("live announcer delay",{
    providedIn: "root",
    factory: () => 100
});
var x9 = function(e, t) {
    return x9 = Object.setPrototypeOf || {
        __proto__: []
    }instanceof Array && function(n, i) {
        n.__proto__ = i
    }
    || function(n, i) {
        for (var r in i)
            Object.prototype.hasOwnProperty.call(i, r) && (n[r] = i[r])
    }
    ,
    x9(e, t)
}
  , Un = function() {
    return Un = Object.assign || function(e) {
        for (var t, n = 1, i = arguments.length; n < i; n++)
            for (var r in t = arguments[n])
                Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
        return e
    }
    ,
    Un.apply(this, arguments)
};
function kr(e, t, n, i) {
    return new (n || (n = Promise))(function(r, s) {
        function o(l) {
            try {
                c(i.next(l))
            } catch (u) {
                s(u)
            }
        }
        function a(l) {
            try {
                c(i.throw(l))
            } catch (u) {
                s(u)
            }
        }
        function c(l) {
            var u;
            l.done ? r(l.value) : (u = l.value,
            u instanceof n ? u : new n(function(h) {
                h(u)
            }
            )).then(o, a)
        }
        c((i = i.apply(e, t || [])).next())
    }
    )
}
function Ar(e, t) {
    var n, i, r, s = {
        label: 0,
        sent: function() {
            if (1 & r[0])
                throw r[1];
            return r[1]
        },
        trys: [],
        ops: []
    }, o = Object.create((typeof Iterator == "function" ? Iterator : Object).prototype);
    return o.next = a(0),
    o.throw = a(1),
    o.return = a(2),
    typeof Symbol == "function" && (o[Symbol.iterator] = function() {
        return this
    }
    ),
    o;
    function a(c) {
        return function(l) {
            return function(u) {
                if (n)
                    throw new TypeError("Generator is already executing.");
                for (; o && (o = 0,
                u[0] && (s = 0)),
                s; )
                    try {
                        if (n = 1,
                        i && (r = 2 & u[0] ? i.return : u[0] ? i.throw || ((r = i.return) && r.call(i),
                        0) : i.next) && !(r = r.call(i, u[1])).done)
                            return r;
                        switch (i = 0,
                        r && (u = [2 & u[0], r.value]),
                        u[0]) {
                        case 0:
                        case 1:
                            r = u;
                            break;
                        case 4:
                            return s.label++,
                            {
                                value: u[1],
                                done: !1
                            };
                        case 5:
                            s.label++,
                            i = u[1],
                            u = [0];
                            continue;
                        case 7:
                            u = s.ops.pop(),
                            s.trys.pop();
                            continue;
                        default:
                            if (r = s.trys,
                            !((r = r.length > 0 && r[r.length - 1]) || u[0] !== 6 && u[0] !== 2)) {
                                s = 0;
                                continue
                            }
                            if (u[0] === 3 && (!r || u[1] > r[0] && u[1] < r[3])) {
                                s.label = u[1];
                                break
                            }
                            if (u[0] === 6 && s.label < r[1]) {
                                s.label = r[1],
                                r = u;
                                break
                            }
                            if (r && s.label < r[2]) {
                                s.label = r[2],
                                s.ops.push(u);
                                break
                            }
                            r[2] && s.ops.pop(),
                            s.trys.pop();
                            continue
                        }
                        u = t.call(e, s)
                    } catch (h) {
                        u = [6, h],
                        i = 0
                    } finally {
                        n = r = 0
                    }
                if (5 & u[0])
                    throw u[1];
                return {
                    value: u[0] ? u[1] : void 0,
                    done: !0
                }
            }([c, l])
        }
    }
}
var HE = {
    exports: {}
};
function w9() {}
w9.prototype = {
    on: function(e, t, n) {
        var i = this.e || (this.e = {});
        return (i[e] || (i[e] = [])).push({
            fn: t,
            ctx: n
        }),
        this
    },
    once: function(e, t, n) {
        var i = this;
        function r() {
            i.off(e, r),
            t.apply(n, arguments)
        }
        return r._ = t,
        this.on(e, r, n)
    },
    emit: function(e) {
        for (var t = [].slice.call(arguments, 1), n = ((this.e || (this.e = {}))[e] || []).slice(), i = 0, r = n.length; i < r; i++)
            n[i].fn.apply(n[i].ctx, t);
        return this
    },
    off: function(e, t) {
        var n = this.e || (this.e = {})
          , i = n[e]
          , r = [];
        if (i && t)
            for (var s = 0, o = i.length; s < o; s++)
                i[s].fn !== t && i[s].fn._ !== t && r.push(i[s]);
        return r.length ? n[e] = r : delete n[e],
        this
    }
},
HE.exports = w9;
var xq = HE.exports.TinyEmitter = w9, R2 = function(e) {
    var t = e[1];
    return t != null
}, wq = function(e) {
    var t = e.properties
      , n = t === void 0 ? {} : t
      , i = function(s, o) {
        var a = {};
        for (var c in s)
            Object.prototype.hasOwnProperty.call(s, c) && o.indexOf(c) < 0 && (a[c] = s[c]);
        if (s != null && typeof Object.getOwnPropertySymbols == "function") {
            var l = 0;
            for (c = Object.getOwnPropertySymbols(s); l < c.length; l++)
                o.indexOf(c[l]) < 0 && Object.prototype.propertyIsEnumerable.call(s, c[l]) && (a[c[l]] = s[c[l]])
        }
        return a
    }(e, ["properties"])
      , r = function(s) {
        return Object.entries(s).sort(function(o, a) {
            var c = o[0]
              , l = a[0];
            return c.localeCompare(l, void 0)
        })
    };
    return JSON.stringify([r(i), r(n)])
}, FE = function(e) {
    return kr(void 0, void 0, void 0, function() {
        var t;
        return Ar(this, function(n) {
            switch (n.label) {
            case 0:
                t = wq(e),
                n.label = 1;
            case 1:
                return n.trys.push([1, 3, , 4]),
                [4, (i = t,
                kr(void 0, void 0, void 0, function() {
                    var r, s, o, a, c;
                    return Ar(this, function(l) {
                        switch (l.label) {
                        case 0:
                            if (r = typeof globalThis < "u" && (!((a = globalThis.crypto) === null || a === void 0) && a.subtle) ? (c = globalThis.crypto) === null || c === void 0 ? void 0 : c.subtle : void 0,
                            typeof TextEncoder > "u" || !r?.digest || typeof Uint8Array > "u")
                                throw new Error("Hashing function not available");
                            return s = new TextEncoder().encode(i),
                            [4, r.digest("SHA-256", s)];
                        case 1:
                            return o = l.sent(),
                            [2, Array.from(new Uint8Array(o)).map(function(u) {
                                return u.toString(16).padStart(2, "0")
                            }).join("")]
                        }
                    })
                }))];
            case 2:
                return [2, n.sent()];
            case 3:
                return n.sent(),
                [2, t];
            case 4:
                return [2]
            }
            var i
        })
    })
}, Cq = function() {}, Eq = function() {
    function e(t) {
        var n = t.onError
          , i = t.onSent
          , r = t.appName
          , s = t.metricsInterval
          , o = t.disableMetrics
          , a = o !== void 0 && o
          , c = t.url
          , l = t.clientKey
          , u = t.fetch
          , h = t.headerName
          , d = t.customHeaders
          , f = d === void 0 ? {} : d
          , g = t.metricsIntervalInitial;
        this.onError = n,
        this.onSent = i || Cq,
        this.disabled = a,
        this.metricsInterval = 1e3 * s,
        this.metricsIntervalInitial = 1e3 * g,
        this.appName = r,
        this.url = c instanceof URL ? c : new URL(c),
        this.clientKey = l,
        this.bucket = this.createEmptyBucket(),
        this.fetch = u,
        this.headerName = h,
        this.customHeaders = f
    }
    return e.prototype.start = function() {
        var t = this;
        if (this.disabled)
            return !1;
        typeof this.metricsInterval == "number" && this.metricsInterval > 0 && (this.metricsIntervalInitial > 0 ? setTimeout(function() {
            t.startTimer(),
            t.sendMetrics()
        }, this.metricsIntervalInitial) : this.startTimer())
    }
    ,
    e.prototype.stop = function() {
        this.timer && (clearTimeout(this.timer),
        delete this.timer)
    }
    ,
    e.prototype.createEmptyBucket = function() {
        return {
            start: new Date,
            stop: null,
            toggles: {}
        }
    }
    ,
    e.prototype.getHeaders = function() {
        var t, n = ((t = {})[this.headerName] = this.clientKey,
        t.Accept = "application/json",
        t["Content-Type"] = "application/json",
        t);
        return Object.entries(this.customHeaders).filter(R2).forEach(function(i) {
            var r = i[0]
              , s = i[1];
            return n[r] = s
        }),
        n
    }
    ,
    e.prototype.sendMetrics = function() {
        return kr(this, void 0, void 0, function() {
            var t, n, i;
            return Ar(this, function(r) {
                switch (r.label) {
                case 0:
                    if (t = "".concat(this.url, "/client/metrics"),
                    n = this.getPayload(),
                    this.bucketIsEmpty(n))
                        return [2];
                    r.label = 1;
                case 1:
                    return r.trys.push([1, 3, , 4]),
                    [4, this.fetch(t, {
                        cache: "no-cache",
                        method: "POST",
                        headers: this.getHeaders(),
                        body: JSON.stringify(n)
                    })];
                case 2:
                    return r.sent(),
                    this.onSent(n),
                    [3, 4];
                case 3:
                    return i = r.sent(),
                    console.error("Unleash: unable to send feature metrics", i),
                    this.onError(i),
                    [3, 4];
                case 4:
                    return [2]
                }
            })
        })
    }
    ,
    e.prototype.count = function(t, n) {
        return !(this.disabled || !this.bucket) && (this.assertBucket(t),
        this.bucket.toggles[t][n ? "yes" : "no"]++,
        !0)
    }
    ,
    e.prototype.countVariant = function(t, n) {
        return !(this.disabled || !this.bucket) && (this.assertBucket(t),
        this.bucket.toggles[t].variants[n] ? this.bucket.toggles[t].variants[n] += 1 : this.bucket.toggles[t].variants[n] = 1,
        !0)
    }
    ,
    e.prototype.assertBucket = function(t) {
        if (this.disabled || !this.bucket)
            return !1;
        this.bucket.toggles[t] || (this.bucket.toggles[t] = {
            yes: 0,
            no: 0,
            variants: {}
        })
    }
    ,
    e.prototype.startTimer = function() {
        var t = this;
        this.timer = setInterval(function() {
            t.sendMetrics()
        }, this.metricsInterval)
    }
    ,
    e.prototype.bucketIsEmpty = function(t) {
        return Object.keys(t.bucket.toggles).length === 0
    }
    ,
    e.prototype.getPayload = function() {
        var t = Un(Un({}, this.bucket), {
            stop: new Date
        });
        return this.bucket = this.createEmptyBucket(),
        {
            bucket: t,
            appName: this.appName,
            instanceId: "browser"
        }
    }
    ,
    e
}(), Tq = function() {
    function e() {
        this.store = new Map
    }
    return e.prototype.save = function(t, n) {
        return kr(this, void 0, void 0, function() {
            return Ar(this, function(i) {
                return this.store.set(t, n),
                [2]
            })
        })
    }
    ,
    e.prototype.get = function(t) {
        return kr(this, void 0, void 0, function() {
            return Ar(this, function(n) {
                return [2, this.store.get(t)]
            })
        })
    }
    ,
    e
}(), Oq = function() {
    function e(t) {
        t === void 0 && (t = "unleash:repository"),
        this.prefix = t
    }
    return e.prototype.save = function(t, n) {
        return kr(this, void 0, void 0, function() {
            var i, r;
            return Ar(this, function(s) {
                i = JSON.stringify(n),
                r = "".concat(this.prefix, ":").concat(t);
                try {
                    window.localStorage.setItem(r, i)
                } catch (o) {
                    console.error(o)
                }
                return [2]
            })
        })
    }
    ,
    e.prototype.get = function(t) {
        try {
            var n = "".concat(this.prefix, ":").concat(t)
              , i = window.localStorage.getItem(n);
            return i ? JSON.parse(i) : void 0
        } catch (r) {
            console.error(r)
        }
    }
    ,
    e
}(), I2, Mq = new Uint8Array(16);
function Pq() {
    if (!I2 && (I2 = typeof crypto < "u" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto),
    !I2))
        throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    return I2(Mq)
}
var Ki = [];
for (let e = 0; e < 256; ++e)
    Ki.push((e + 256).toString(16).slice(1));
var LE = {
    randomUUID: typeof crypto < "u" && crypto.randomUUID && crypto.randomUUID.bind(crypto)
};
function kq(e, t, n) {
    if (LE.randomUUID && !t && !e)
        return LE.randomUUID();
    let i = (e = e || {}).random || (e.rng || Pq)();
    if (i[6] = 15 & i[6] | 64,
    i[8] = 63 & i[8] | 128,
    t) {
        n = n || 0;
        for (let r = 0; r < 16; ++r)
            t[n + r] = i[r];
        return t
    }
    return function(r, s=0) {
        return Ki[r[s + 0]] + Ki[r[s + 1]] + Ki[r[s + 2]] + Ki[r[s + 3]] + "-" + Ki[r[s + 4]] + Ki[r[s + 5]] + "-" + Ki[r[s + 6]] + Ki[r[s + 7]] + "-" + Ki[r[s + 8]] + Ki[r[s + 9]] + "-" + Ki[r[s + 10]] + Ki[r[s + 11]] + Ki[r[s + 12]] + Ki[r[s + 13]] + Ki[r[s + 14]] + Ki[r[s + 15]]
    }(i)
}
var Aq = function() {
    function e() {}
    return e.prototype.generateEventId = function() {
        return kq()
    }
    ,
    e.prototype.createImpressionEvent = function(t, n, i, r, s, o) {
        var a = this.createBaseEvent(t, n, i, r, s);
        return o ? Un(Un({}, a), {
            variant: o
        }) : a
    }
    ,
    e.prototype.createBaseEvent = function(t, n, i, r, s) {
        return {
            eventType: r,
            eventId: this.generateEventId(),
            context: t,
            enabled: n,
            featureName: i,
            impressionData: s
        }
    }
    ,
    e
}()
  , Iq = ["userId", "sessionId", "remoteAddress", "currentTime"]
  , BE = function(e) {
    return Iq.includes(e)
}
  , ws = {
    INIT: "initialized",
    ERROR: "error",
    READY: "ready",
    UPDATE: "update",
    IMPRESSION: "impression",
    SENT: "sent",
    RECOVERED: "recovered"
}
  , Rq = "isEnabled"
  , Dq = "getVariant"
  , Nq = {
    name: "disabled",
    enabled: !1,
    feature_enabled: !1
}
  , b9 = "repo"
  , UE = "repoLastUpdateTimestamp"
  , Fq = function() {
    try {
        if (typeof window < "u" && "fetch"in window)
            return fetch.bind(window);
        if ("fetch"in globalThis)
            return fetch.bind(globalThis)
    } catch (e) {
        console.error('Unleash failed to resolve "fetch"', e)
    }
}
  , GE = function(e) {
    function t(n) {
        var i = n.storageProvider
          , r = n.url
          , s = n.clientKey
          , o = n.disableRefresh
          , a = o !== void 0 && o
          , c = n.refreshInterval
          , l = c === void 0 ? 30 : c
          , u = n.metricsInterval
          , h = u === void 0 ? 30 : u
          , d = n.metricsIntervalInitial
          , f = d === void 0 ? 2 : d
          , g = n.disableMetrics
          , p = g !== void 0 && g
          , v = n.appName
          , S = n.environment
          , x = S === void 0 ? "default" : S
          , w = n.context
          , k = n.fetch
          , B = k === void 0 ? Fq() : k
          , N = n.createAbortController
          , E = N === void 0 ? function() {
            try {
                if (typeof window < "u" && "AbortController"in window)
                    return function() {
                        return new window.AbortController
                    }
                    ;
                if ("fetch"in globalThis)
                    return function() {
                        return new globalThis.AbortController
                    }
            } catch (Ge) {
                console.error('Unleash failed to resolve "AbortController" factory', Ge)
            }
        }() : N
          , F = n.bootstrap
          , O = n.bootstrapOverride
          , V = O === void 0 || O
          , X = n.headerName
          , b = X === void 0 ? "Authorization" : X
          , j = n.customHeaders
          , de = j === void 0 ? {} : j
          , he = n.impressionDataAll
          , Re = he !== void 0 && he
          , Xe = n.usePOSTrequests
          , pt = Xe !== void 0 && Xe
          , it = n.experimental
          , fe = e.call(this) || this;
        if (fe.toggles = [],
        fe.etag = "",
        fe.readyEventEmitted = !1,
        fe.fetchedFromServer = !1,
        fe.usePOSTrequests = !1,
        fe.started = !1,
        !r)
            throw new Error("url is required");
        if (!s)
            throw new Error("clientKey is required");
        if (!v)
            throw new Error("appName is required.");
        return fe.eventsHandler = new Aq,
        fe.impressionDataAll = Re,
        fe.toggles = F && F.length > 0 ? F : [],
        fe.url = r instanceof URL ? r : new URL(r),
        fe.clientKey = s,
        fe.headerName = b,
        fe.customHeaders = de,
        fe.storage = i || (typeof window < "u" ? new Oq : new Tq),
        fe.refreshInterval = a ? 0 : 1e3 * l,
        fe.context = Un({
            appName: v,
            environment: x
        }, w),
        fe.usePOSTrequests = pt,
        fe.sdkState = "initializing",
        fe.experimental = Un({}, it),
        it?.togglesStorageTTL && it?.togglesStorageTTL > 0 && (fe.experimental.togglesStorageTTL = 1e3 * it.togglesStorageTTL),
        fe.lastRefreshTimestamp = 0,
        fe.ready = new Promise(function(Ge) {
            fe.init().then(Ge).catch(function(A) {
                console.error(A),
                fe.sdkState = "error",
                fe.emit(ws.ERROR, A),
                fe.lastError = A,
                Ge()
            })
        }
        ),
        B || console.error('Unleash: You must either provide your own "fetch" implementation or run in an environment where "fetch" is available.'),
        E || console.error('Unleash: You must either provide your own "AbortController" implementation or run in an environment where "AbortController" is available.'),
        fe.fetch = B,
        fe.createAbortController = E,
        fe.bootstrap = F && F.length > 0 ? F : void 0,
        fe.bootstrapOverride = V,
        fe.metrics = new Eq({
            onError: fe.emit.bind(fe, ws.ERROR),
            onSent: fe.emit.bind(fe, ws.SENT),
            appName: v,
            metricsInterval: h,
            disableMetrics: p,
            url: fe.url,
            clientKey: s,
            fetch: B,
            headerName: b,
            customHeaders: de,
            metricsIntervalInitial: f
        }),
        fe
    }
    return function(n, i) {
        if (typeof i != "function" && i !== null)
            throw new TypeError("Class extends value " + String(i) + " is not a constructor or null");
        function r() {
            this.constructor = n
        }
        x9(n, i),
        n.prototype = i === null ? Object.create(i) : (r.prototype = i.prototype,
        new r)
    }(t, e),
    t.prototype.getAllToggles = function() {
        return function(n, i, r) {
            if (r || arguments.length === 2)
                for (var s, o = 0, a = i.length; o < a; o++)
                    !s && o in i || (s || (s = Array.prototype.slice.call(i, 0, o)),
                    s[o] = i[o]);
            return n.concat(s || Array.prototype.slice.call(i))
        }([], this.toggles, !0)
    }
    ,
    t.prototype.isEnabled = function(n) {
        var i, r = this.toggles.find(function(a) {
            return a.name === n
        }), s = !!r && r.enabled;
        if (this.metrics.count(n, s),
        r?.impressionData || this.impressionDataAll) {
            var o = this.eventsHandler.createImpressionEvent(this.context, s, n, Rq, (i = r?.impressionData) !== null && i !== void 0 ? i : void 0);
            this.emit(ws.IMPRESSION, o)
        }
        return s
    }
    ,
    t.prototype.getVariant = function(n) {
        var i, r = this.toggles.find(function(c) {
            return c.name === n
        }), s = r?.enabled || !1, o = r ? r.variant : Nq;
        if (o.name && this.metrics.countVariant(n, o.name),
        this.metrics.count(n, s),
        r?.impressionData || this.impressionDataAll) {
            var a = this.eventsHandler.createImpressionEvent(this.context, s, n, Dq, (i = r?.impressionData) !== null && i !== void 0 ? i : void 0, o.name);
            this.emit(ws.IMPRESSION, a)
        }
        return Un(Un({}, o), {
            feature_enabled: s
        })
    }
    ,
    t.prototype.updateToggles = function() {
        return kr(this, void 0, void 0, function() {
            var n = this;
            return Ar(this, function(i) {
                switch (i.label) {
                case 0:
                    return this.timerRef || this.fetchedFromServer ? [4, this.fetchToggles()] : [3, 2];
                case 1:
                    return i.sent(),
                    [3, 4];
                case 2:
                    return this.started ? [4, new Promise(function(r) {
                        var s = function() {
                            n.fetchToggles().then(function() {
                                n.off(ws.READY, s),
                                r()
                            })
                        };
                        n.once(ws.READY, s)
                    }
                    )] : [3, 4];
                case 3:
                    i.sent(),
                    i.label = 4;
                case 4:
                    return [2]
                }
            })
        })
    }
    ,
    t.prototype.updateContext = function(n) {
        return kr(this, void 0, void 0, function() {
            var i;
            return Ar(this, function(r) {
                switch (r.label) {
                case 0:
                    return (n.appName || n.environment) && console.warn("appName and environment are static. They can't be updated with updateContext."),
                    i = {
                        environment: this.context.environment,
                        appName: this.context.appName,
                        sessionId: this.context.sessionId
                    },
                    this.context = Un(Un({}, i), n),
                    [4, this.updateToggles()];
                case 1:
                    return r.sent(),
                    [2]
                }
            })
        })
    }
    ,
    t.prototype.getContext = function() {
        return Un({}, this.context)
    }
    ,
    t.prototype.setContextField = function(n, i) {
        var r, s;
        if (BE(n))
            this.context = Un(Un({}, this.context), ((r = {})[n] = i,
            r));
        else {
            var o = Un(Un({}, this.context.properties), ((s = {})[n] = i,
            s));
            this.context = Un(Un({}, this.context), {
                properties: o
            })
        }
        this.updateToggles()
    }
    ,
    t.prototype.removeContextField = function(n) {
        var i;
        BE(n) ? this.context = Un(Un({}, this.context), ((i = {})[n] = void 0,
        i)) : typeof this.context.properties == "object" && delete this.context.properties[n],
        this.updateToggles()
    }
    ,
    t.prototype.setReady = function() {
        this.readyEventEmitted = !0,
        this.emit(ws.READY)
    }
    ,
    t.prototype.init = function() {
        return kr(this, void 0, void 0, function() {
            var n, i, r;
            return Ar(this, function(s) {
                switch (s.label) {
                case 0:
                    return [4, this.resolveSessionId()];
                case 1:
                    return n = s.sent(),
                    this.context = Un({
                        sessionId: n
                    }, this.context),
                    i = this,
                    [4, this.storage.get(b9)];
                case 2:
                    return i.toggles = s.sent() || [],
                    r = this,
                    [4, this.getLastRefreshTimestamp()];
                case 3:
                    return r.lastRefreshTimestamp = s.sent(),
                    !this.bootstrap || !this.bootstrapOverride && this.toggles.length !== 0 ? [3, 6] : [4, this.storage.save(b9, this.bootstrap)];
                case 4:
                    return s.sent(),
                    this.toggles = this.bootstrap,
                    this.sdkState = "healthy",
                    [4, this.storeLastRefreshTimestamp()];
                case 5:
                    s.sent(),
                    this.setReady(),
                    s.label = 6;
                case 6:
                    return this.sdkState = "healthy",
                    this.emit(ws.INIT),
                    [2]
                }
            })
        })
    }
    ,
    t.prototype.start = function() {
        return kr(this, void 0, void 0, function() {
            var n, i = this;
            return Ar(this, function(r) {
                switch (r.label) {
                case 0:
                    return this.started = !0,
                    this.timerRef ? (console.error("Unleash SDK has already started, if you want to restart the SDK you should call client.stop() before starting again."),
                    [2]) : [4, this.ready];
                case 1:
                    return r.sent(),
                    this.metrics.start(),
                    n = this.refreshInterval,
                    [4, this.initialFetchToggles()];
                case 2:
                    return r.sent(),
                    n > 0 && (this.timerRef = setInterval(function() {
                        return i.fetchToggles()
                    }, n)),
                    [2]
                }
            })
        })
    }
    ,
    t.prototype.stop = function() {
        this.timerRef && (clearInterval(this.timerRef),
        this.timerRef = void 0),
        this.metrics.stop()
    }
    ,
    t.prototype.isReady = function() {
        return this.readyEventEmitted
    }
    ,
    t.prototype.getError = function() {
        return this.sdkState === "error" ? this.lastError : void 0
    }
    ,
    t.prototype.sendMetrics = function() {
        return this.metrics.sendMetrics()
    }
    ,
    t.prototype.resolveSessionId = function() {
        return kr(this, void 0, void 0, function() {
            var n;
            return Ar(this, function(i) {
                switch (i.label) {
                case 0:
                    return this.context.sessionId ? [2, this.context.sessionId] : [4, this.storage.get("sessionId")];
                case 1:
                    return (n = i.sent()) ? [3, 3] : (n = Math.floor(1e9 * Math.random()),
                    [4, this.storage.save("sessionId", n.toString(10))]);
                case 2:
                    i.sent(),
                    i.label = 3;
                case 3:
                    return [2, n.toString(10)]
                }
            })
        })
    }
    ,
    t.prototype.getHeaders = function() {
        var n, i = this.usePOSTrequests, r = ((n = {})[this.headerName] = this.clientKey,
        n.Accept = "application/json",
        n);
        return i && (r["Content-Type"] = "application/json"),
        this.etag && (r["If-None-Match"] = this.etag),
        Object.entries(this.customHeaders).filter(R2).forEach(function(s) {
            var o = s[0]
              , a = s[1];
            return r[o] = a
        }),
        r
    }
    ,
    t.prototype.storeToggles = function(n) {
        return kr(this, void 0, void 0, function() {
            return Ar(this, function(i) {
                switch (i.label) {
                case 0:
                    return this.toggles = n,
                    this.emit(ws.UPDATE),
                    [4, this.storage.save(b9, n)];
                case 1:
                    return i.sent(),
                    [2]
                }
            })
        })
    }
    ,
    t.prototype.isTogglesStorageTTLEnabled = function() {
        var n;
        return !!(!((n = this.experimental) === null || n === void 0) && n.togglesStorageTTL && this.experimental.togglesStorageTTL > 0)
    }
    ,
    t.prototype.isUpToDate = function() {
        var n;
        if (!this.isTogglesStorageTTLEnabled())
            return !1;
        var i = Date.now()
          , r = ((n = this.experimental) === null || n === void 0 ? void 0 : n.togglesStorageTTL) || 0;
        return this.lastRefreshTimestamp > 0 && this.lastRefreshTimestamp <= i && i - this.lastRefreshTimestamp <= r
    }
    ,
    t.prototype.getLastRefreshTimestamp = function() {
        return kr(this, void 0, void 0, function() {
            var n, i;
            return Ar(this, function(r) {
                switch (r.label) {
                case 0:
                    return this.isTogglesStorageTTLEnabled() ? [4, this.storage.get(UE)] : [3, 3];
                case 1:
                    return n = r.sent(),
                    [4, FE(this.context)];
                case 2:
                    return i = r.sent(),
                    [2, n?.key === i ? n.timestamp : 0];
                case 3:
                    return [2, 0]
                }
            })
        })
    }
    ,
    t.prototype.storeLastRefreshTimestamp = function() {
        return kr(this, void 0, void 0, function() {
            var n, i;
            return Ar(this, function(r) {
                switch (r.label) {
                case 0:
                    return this.isTogglesStorageTTLEnabled() ? (this.lastRefreshTimestamp = Date.now(),
                    i = {},
                    [4, FE(this.context)]) : [3, 3];
                case 1:
                    return i.key = r.sent(),
                    i.timestamp = this.lastRefreshTimestamp,
                    n = i,
                    [4, this.storage.save(UE, n)];
                case 2:
                    r.sent(),
                    r.label = 3;
                case 3:
                    return [2]
                }
            })
        })
    }
    ,
    t.prototype.initialFetchToggles = function() {
        if (!this.isUpToDate())
            return this.fetchToggles();
        this.fetchedFromServer || (this.fetchedFromServer = !0,
        this.setReady())
    }
    ,
    t.prototype.fetchToggles = function() {
        return kr(this, void 0, void 0, function() {
            var n, i, r, s, o, a, c, l, u;
            return Ar(this, function(h) {
                switch (h.label) {
                case 0:
                    if (!this.fetch)
                        return [3, 9];
                    this.abortController && this.abortController.abort(),
                    this.abortController = (u = this.createAbortController) === null || u === void 0 ? void 0 : u.call(this),
                    n = this.abortController ? this.abortController.signal : void 0,
                    h.label = 1;
                case 1:
                    return h.trys.push([1, 7, 8, 9]),
                    i = this.usePOSTrequests,
                    r = i ? this.url : function(d, f) {
                        var g = new URL(d.toString());
                        return Object.entries(f).filter(R2).forEach(function(p) {
                            var v = p[0]
                              , S = p[1];
                            v === "properties" && S ? Object.entries(S).filter(R2).forEach(function(x) {
                                var w = x[0]
                                  , k = x[1];
                                return g.searchParams.append("properties[".concat(w, "]"), k)
                            }) : g.searchParams.append(v, S)
                        }),
                        g
                    }(this.url, this.context),
                    s = i ? "POST" : "GET",
                    o = i ? JSON.stringify({
                        context: this.context
                    }) : void 0,
                    [4, this.fetch(r.toString(), {
                        method: s,
                        cache: "no-cache",
                        headers: this.getHeaders(),
                        body: o,
                        signal: n
                    })];
                case 2:
                    return a = h.sent(),
                    this.sdkState === "error" && a.status < 400 && (this.sdkState = "healthy",
                    this.emit(ws.RECOVERED)),
                    a.ok ? (this.etag = a.headers.get("ETag") || "",
                    [4, a.json()]) : [3, 5];
                case 3:
                    return c = h.sent(),
                    [4, this.storeToggles(c.toggles)];
                case 4:
                    return h.sent(),
                    this.sdkState !== "healthy" && (this.sdkState = "healthy"),
                    this.fetchedFromServer || (this.fetchedFromServer = !0,
                    this.setReady()),
                    this.storeLastRefreshTimestamp(),
                    [3, 6];
                case 5:
                    a.status === 304 ? this.storeLastRefreshTimestamp() : (console.error("Unleash: Fetching feature toggles did not have an ok response"),
                    this.sdkState = "error",
                    this.emit(ws.ERROR, {
                        type: "HttpError",
                        code: a.status
                    }),
                    this.lastError = {
                        type: "HttpError",
                        code: a.status
                    }),
                    h.label = 6;
                case 6:
                    return [3, 9];
                case 7:
                    return typeof (l = h.sent()) == "object" && l !== null && "name"in l && l.name === "AbortError" || (console.error("Unleash: unable to fetch feature toggles", l),
                    this.sdkState = "error",
                    this.emit(ws.ERROR, l),
                    this.lastError = l),
                    [3, 9];
                case 8:
                    return this.abortController = null,
                    [7];
                case 9:
                    return [2]
                }
            })
        })
    }
    ,
    t
}(xq);
var oh = {
    UKNOWN: "Unknown"
}
  , P9 = {
    CHROME: "Chrome",
    FIREFOX: "Firefox",
    SAFARI: "Safari",
    OPERA: "Opera",
    IE: "IE",
    MS_EDGE: "MS-Edge",
    MS_EDGE_CHROMIUM: "MS-Edge-Chromium",
    FB_MESSANGER: "FB-Messanger",
    SAMSUNG: "Samsung",
    UCBROWSER: "UC-Browser",
    UNKNOWN: oh.UKNOWN
}
  , D2 = {
    HTC: /HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\bEVO\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel/,
    NEXUS_PHONE: /Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6/,
    DELL: /Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\b001DL\b|\b101DL\b|\bGS01\b/,
    MOTOROLA: new RegExp(`Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|
      A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|
      MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|
      ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|
      WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|
      XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|
      XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052`),
    SAMSUNG: new RegExp(`\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|
      GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|
      GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|
      GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|
      GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|
      GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|
      GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|
      GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|
      GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|
      GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|
      GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|
      GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|
      GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|
      GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|
      GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|
      GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|
      GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|
      GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|
      SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|
      SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|
      SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|
      SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|
      SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|
      SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|
      SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|
      SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|
      SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|
      SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|
      SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|
      SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|
      SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|
      SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|
      SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|
      SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|
      SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|
      SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|
      SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|
      SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|
      SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|
      SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|
      SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|
      SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|
      SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|
      SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|
      SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|
      SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|
      SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|
      SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|
      SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|
      GT-N7105|SCH-I535|SM-N900A|SM-N900T|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|
      GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|
      GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|
      SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|
      SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|
      SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F`),
    LG: new RegExp(`\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|
      LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|
      C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|
      LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|
      VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|
      MS323|M257)`),
    SONY: /SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533/,
    ASUS: /Asus.*Galaxy|PadFone.*Mobile/,
    NOKIA_LUMIA: /Lumia [0-9]{3,4}/,
    MICROMAX: /Micromax.*\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\b/,
    PALM: /PalmSource|Palm/,
    VERTU: /Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature/,
    PANTECH: new RegExp(`PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|
        IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|
        IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|
        CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|
        P2000|P7040|P7000|C790`),
    FLY: /IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250/,
    WIKO: new RegExp(`KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|
        SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|
        CINK KING|CINK PEAX|CINK SLIM|SUBLIM`),
    I_MOBILE: /i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)/,
    SIMVALLEY: /\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\b/,
    WOLFGANG: /AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q/,
    ALCATEL: /Alcatel|Mobile; rv:49.0|Mobile; ALCATEL 4052R; rv:48.0/,
    NINTENDO: /Nintendo (3DS|Switch)/,
    AMOI: /Amoi/,
    INQ: /INQ/,
    VITA: /\bVita\b/,
    BLACKBERRY: /\bBlackBerry\b|\bBB10\b|rim[0-9]+/,
    FIREFOX_OS: /\bFirefox-OS\b/,
    IPHONE: /\biPhone\b/,
    iPod: /\biPod\b/,
    ANDROID: /\bAndroid\b/,
    WINDOWS_PHONE: /\bWindows-Phone\b/,
    GENERIC_PHONE: new RegExp(`Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|
        up.link|vodafone|\\bwap\\b|nokia|Nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser`)
}
  , sh = {
    iPad: /iPad|iPad.*Mobile/,
    NexusTablet: /Android.*Nexus[\s]+(7|9|10)/,
    GoogleTablet: /Android.*Pixel C/,
    SamsungTablet: new RegExp(`SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|
        GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|
        SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|
        GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|
        SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|
        GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|
        SHV-E230S|SHW-M180K|SHW-M180L|SM-T865|SM-T290|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|
        SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|
        GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T385M|SM-P585M|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|
        SM-P601|SM-P605|SM-P615|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|
        GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|
        SM-T510|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|
        SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T500|SM-T330|
        SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|
        SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|
        SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|
        SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|
        SM-T719|SM-T725|SM-T813|SM-T819|SM-T580|SM-T590|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|
        SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-P585Y|SM-X200|SM-T970`),
    Kindle: new RegExp(`Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|
        KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome        /[0-9.]+ (?!Mobile)`),
    SurfaceTablet: /Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)/,
    HPTablet: /HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10/,
    AsusTablet: new RegExp(`^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|
        TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|
        Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|
        ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|
        ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b`),
    BlackBerryTablet: /PlayBook|RIM Tablet/,
    HTCtablet: /HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410/,
    MotorolaTablet: /xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617/,
    NookTablet: /Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2/,
    AcerTablet: new RegExp(`Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|
        W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|
        \\bA3-A20\\b|\\bA3-A30`),
    ToshibaTablet: /Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO/,
    LGTablet: /\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\b/,
    FujitsuTablet: /Android.*\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\b/,
    PrestigioTablet: new RegExp(`PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|
        PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|
        PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|
        PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|
        PMT5887|PMT5001|PMT5002`),
    LenovoTablet: new RegExp(`Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|
        YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|
        B8000|B8080)(-|)(FL|F|HV|H|)|TB-X606F|TB-X103F|TB-X304F|TB-X304L|TB-X704F|TB-8703F|Tab2A7-10F|TB2-X30L|TB-8504F`),
    DellTablet: /Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7/,
    YarvikTablet: new RegExp(`Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|
        TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|
        TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|
        TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|
        TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b`),
    MedionTablet: /Android.*\bOYO\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB/,
    ArnovaTablet: /97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2/,
    IntensoTablet: /INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004/,
    IRUTablet: /M702pro/,
    MegafonTablet: /MegaFon V9|\bZTE V9\b|Android.*\bMT7A\b/,
    EbodaTablet: /E-Boda (Supreme|Impresspeed|Izzycomm|Essential)/,
    AllViewTablet: /Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)/,
    ArchosTablet: new RegExp(`\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10|
         Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b`),
    AinolTablet: /NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark/,
    NokiaLumiaTablet: /Lumia 2520/,
    SonyTablet: new RegExp(`Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|
        SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|
        EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|
        SGP612|SGP712`),
    PhilipsTablet: /\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\b/,
    CubeTablet: /Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT/,
    CobyTablet: new RegExp(`MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|
        MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010`),
    MIDTablet: new RegExp(`M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|
        MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|
        MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10`),
    MSITablet: new RegExp(`MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|
        Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b`),
    SMiTTablet: /Android.*(\bMID\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)/,
    RockChipTablet: /Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A/,
    FlyTablet: /IQ310|Fly Vision/,
    bqTablet: new RegExp(`Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|
        Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))|Maxwell.*Lite|Maxwell.*Plus`),
    HuaweiTablet: new RegExp(`MediaPad|MediaPad 7 Youth|MediaPad T3 10|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|
        S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-W09|AGS-L09`),
    NecTablet: /\bN-06D|\bN-08D/,
    PantechTablet: /Pantech.*P4100/,
    BronchoTablet: /Broncho.*(N701|N708|N802|a710)/,
    VersusTablet: /TOUCHPAD.*[78910]|\bTOUCHTAB\b/,
    ZyncTablet: /z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900/,
    PositivoTablet: /TB07STA|TB10STA|TB07FTA|TB10FTA/,
    NabiTablet: /Android.*\bNabi/,
    KoboTablet: /Kobo Touch|\bK080\b|\bVox\b Build|\bArc\b Build/,
    DanewTablet: /DSlide.*\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\b/,
    TexetTablet: new RegExp(`NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|
        TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|
        TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|
        TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|
        TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|
        TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|
        TB-436|TB-416|TB-146SE|TB-126SE`),
    PlaystationTablet: /Playstation.*(Portable|Vita)/,
    TrekstorTablet: /ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab/,
    PyleAudioTablet: /\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\b/,
    AdvanTablet: new RegExp(`Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|
        T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b`),
    DanyTechTablet: `Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|
        Genius TAB GII|Genius TAB GIII|Genius Tab S1`,
    GalapadTablet: /Android.*\bG1\b(?!\))/,
    MicromaxTablet: /Funbook|Micromax.*\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\b/,
    KarbonnTablet: /Android.*\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\b/,
    AllFineTablet: /Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide/,
    PROSCANTablet: new RegExp(`\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|
        PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|
        PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|
        PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b`),
    YONESTablet: /BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026/,
    ChangJiaTablet: new RegExp(`TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|
        TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|
        TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|
        TPC10111|TPC10203|TPC10205|TPC10503`),
    GUTablet: /TX-A1301|TX-M9002|Q702|kf026/,
    PointOfViewTablet: new RegExp(`TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|
        TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|
        TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|
        TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10`),
    OvermaxTablet: new RegExp(`OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|
        MagicTab|Stream|TB-08|TB-09)|Qualcore 1027`),
    HCLTablet: /HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync/,
    DPSTablet: /DPS Dream 9|DPS Dual 7/,
    VistureTablet: /V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10/,
    CrestaTablet: /CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989/,
    MediatekTablet: /\bMT8125|MT8389|MT8135|MT8377\b/,
    ConcordeTablet: /Concorde([ ]+)?Tab|ConCorde ReadMan/,
    GoCleverTablet: new RegExp(`GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|
        TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|
        GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|
        TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|
        TAB R104|TAB R83.3|TAB A1042`),
    ModecomTablet: new RegExp(`FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|
        FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|
        FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003`),
    VoninoTablet: new RegExp(`\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|
        Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|
        Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b`),
    ECSTablet: /V07OT2|TM105A|S10OT1|TR10CS1/,
    StorexTablet: /eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab/,
    VodafoneTablet: /SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497/,
    EssentielBTablet: /Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2/,
    RossMoorTablet: /RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711/,
    iMobileTablet: /i-mobile i-note/,
    TolinoTablet: /tolino tab [0-9.]+|tolino shine/,
    AudioSonicTablet: /\bC-22Q|T7-QC|T-17B|T-17P\b/,
    AMPETablet: /Android.* A78 /,
    SkkTablet: /Android.* (SKYPAD|PHOENIX|CYCLOPS)/,
    TecnoTablet: /TECNO P9|TECNO DP8D/,
    JXDTablet: new RegExp(`Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|
        S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|
        P1000|P300|S18|S6600|S9100)\\b`),
    iJoyTablet: new RegExp(`Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|
        Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|
        Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|
        Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|
        Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)`),
    FX2Tablet: /FX2 PAD7|FX2 PAD10/,
    XoroTablet: new RegExp(`KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|
        PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|
        PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|
        TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151`),
    ViewsonicTablet: /ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a/,
    VerizonTablet: /QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1/,
    OdysTablet: /LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\bXELIO\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10/,
    CaptivaTablet: /CAPTIVA PAD/,
    IconbitTablet: new RegExp(`NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|
        NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S`),
    TeclastTablet: new RegExp(`T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|
        \\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|
        \\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|
        \\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|
        \\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|
        \\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|
        \\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|
        \\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|
        \\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi`),
    OndaTablet: new RegExp(`\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|
        V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|
        V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|
        Vi40)\\b[s]+|V10 \\b4G\\b`),
    JaytechTablet: /TPC-PA762/,
    BlaupunktTablet: /Endeavour 800NG|Endeavour 1010/,
    DigmaTablet: /\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\b/,
    EvolioTablet: /ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\bEvotab\b|\bNeura\b/,
    LavaTablet: /QPAD E704|\bIvoryS\b|E-TAB IVORY|\bE-TAB\b/,
    AocTablet: /MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712/,
    MpmanTablet: new RegExp(`MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|
        \\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|
        MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010`),
    CelkonTablet: /CT695|CT888|CT[\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\bCT-1\b/,
    WolderTablet: new RegExp(`miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|
        POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|
        FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b`),
    MediacomTablet: "M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",
    MiTablet: /\bMI PAD\b|\bHM NOTE 1W\b/,
    NibiruTablet: /Nibiru M1|Nibiru Jupiter One/,
    NexoTablet: /NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI/,
    LeaderTablet: new RegExp(`TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|
        TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100`),
    UbislateTablet: /UbiSlate[\s]?7C/,
    PocketBookTablet: /Pocketbook/,
    KocasoTablet: /\b(TB-1207)\b/,
    HisenseTablet: /\b(F5281|E2371)\b/,
    Hudl: /Hudl HT7S3|Hudl 2/,
    TelstraTablet: /T-Hub2/,
    Honeywell: /RT10A/,
    GenericTablet: new RegExp(`Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|
        A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|
        Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107`)
}
  , Kc = {
    BLACKBERRY: "Blackberry",
    FIREFOX_OS: "Firefox-OS",
    CHROME_BOOK: "Chrome-Book",
    WINDOWS_PHONE: "Windows-Phone",
    VITA: "Vita",
    PS4: "PS4",
    MAC: "Macintosh",
    CHROMECAST: "Chromecast",
    APPLE_TV: "Apple-TV",
    GOOGLE_TV: "Google-TV",
    ANDROID: "Android",
    Tesla: "Tesla",
    iPad: "iPad",
    IPHONE: "iPhone",
    iPod: "iPod",
    UNKNOWN: oh.UKNOWN,
    HTC: "HTC",
    NEXUS_PHONE: "Nexus Phone",
    NexusTablet: "Nexus Tablet",
    DELL: "Dell",
    MOTOROLA: "Motorola",
    SAMSUNG: "Samsung",
    LG: "LG",
    SONY: "Sony",
    ASUS: "Asus",
    NOKIA_LUMIA: "Nokia Lumia",
    MICROMAX: "Micromax",
    PALM: "Palm",
    VERTU: "Vertu",
    PANTECH: "PANTECH",
    FLY: "Fly",
    WIKO: "WIKO",
    I_MOBILE: "i-mobile",
    SIMVALLEY: "Simvalley",
    WOLFGANG: "Wolfgang",
    ALCATEL: "Alcatel",
    HONEYWELL: "Honeywell",
    NINTENDO: "Nintendo",
    AMOI: "Amoi",
    INQ: "INQ",
    GENERIC_PHONE: "Generic Phone",
    MI_SE_9: "Mi SE 9"
}
  , VE = [Kc.PS4, Kc.CHROME_BOOK, Kc.MAC, Kc.DELL, Kc.ASUS, Kc.UNKNOWN]
  , Lq = {
    WINDOWS: "Windows",
    MAC: "Mac",
    IOS: "iOS",
    ANDROID: "Android",
    LINUX: "Linux",
    UNIX: "Unix",
    FIREFOX_OS: "Firefox-OS",
    CHROME_OS: "Chrome-OS",
    WINDOWS_PHONE: "Windows-Phone",
    UNKNOWN: oh.UKNOWN
}
  , Bq = {
    WINDOWS_3_11: "windows-3-11",
    WINDOWS_95: "windows-95",
    WINDOWS_ME: "windows-me",
    WINDOWS_98: "windows-98",
    WINDOWS_CE: "windows-ce",
    WINDOWS_2000: "windows-2000",
    WINDOWS_XP: "windows-xp",
    WINDOWS_SERVER_2003: "windows-server-2003",
    WINDOWS_VISTA: "windows-vista",
    WINDOWS_7: "windows-7",
    WINDOWS_8_1: "windows-8-1",
    WINDOWS_8: "windows-8",
    WINDOWS_10: "windows-10",
    WINDOWS_PHONE_7_5: "windows-phone-7-5",
    WINDOWS_PHONE_8_1: "windows-phone-8-1",
    WINDOWS_PHONE_10: "windows-phone-10",
    WINDOWS_NT_4_0: "windows-nt-4-0",
    MACOSX_11_0: "mac-os-x-11-0",
    MACOSX_16: "mac-os-x-16",
    MACOSX_15: "mac-os-x-15",
    MACOSX_14: "mac-os-x-14",
    MACOSX_13: "mac-os-x-13",
    MACOSX_12: "mac-os-x-12",
    MACOSX_11: "mac-os-x-11",
    MACOSX_10: "mac-os-x-10",
    MACOSX_9: "mac-os-x-9",
    MACOSX_8: "mac-os-x-8",
    MACOSX_7: "mac-os-x-7",
    MACOSX_6: "mac-os-x-6",
    MACOSX_5: "mac-os-x-5",
    MACOSX_4: "mac-os-x-4",
    MACOSX_3: "mac-os-x-3",
    MACOSX_2: "mac-os-x-2",
    MACOSX: "mac-os-x",
    iOS: "iOS",
    ANDROID_9: "android-9",
    UNKNOWN: oh.UKNOWN.toLowerCase()
}
  , $E = {
    WINDOWS: {
        and: [{
            or: [/\bWindows|(Win\d\d)\b/, /\bWin 9x\b/]
        }, {
            not: /\bWindows Phone\b/
        }]
    },
    MAC: {
        and: [/\bMac OS\b/, {
            not: {
                or: [/\biPhone\b/, /\biPad\b/, /\biPod\b/, /\bWindows Phone\b/]
            }
        }]
    },
    IOS: {
        and: [{
            or: [/\biPad\b/, /\biPhone\b/, /\biPod\b/]
        }, {
            not: /\bWindows Phone\b/
        }]
    },
    ANDROID: {
        and: [/\bAndroid\b/, {
            not: /\bWindows Phone\b/
        }]
    },
    LINUX: /\bLinux\b/,
    UNIX: /\bUNIX\b/,
    FIREFOX_OS: {
        and: [/\bFirefox\b/, /Mobile\b/]
    },
    CHROME_OS: /\bCrOS\b/,
    WINDOWS_PHONE: {
        or: [/\bIEMobile\b/, /\bWindows Phone\b/]
    },
    PS4: /\bMozilla\/5.0 \(PlayStation 4\b/,
    VITA: /\bMozilla\/5.0 \(Play(S|s)tation Vita\b/
}
  , Uq = {
    CHROME: {
        and: [{
            or: [/\bChrome\b/, /\bCriOS\b/, /\bHeadlessChrome\b/]
        }, {
            not: {
                or: [/\bOPR\b/, /\bEdg(e|A|iOS)\b/, /\bEdg\/\b/, /\bSamsungBrowser\b/, /\bUCBrowser\b/]
            }
        }]
    },
    FIREFOX: {
        or: [/\bFirefox\b/, /\bFxiOS\b/]
    },
    SAFARI: {
        and: [/^((?!CriOS).)*\Safari\b.*$/, {
            not: {
                or: [/\bOPR\b/, /\bEdg(e|A|iOS)\b/, /\bEdg\/\b/, /\bWindows Phone\b/, /\bSamsungBrowser\b/, /\bUCBrowser\b/]
            }
        }]
    },
    OPERA: {
        or: [/Opera\b/, /\bOPR\b/]
    },
    IE: {
        or: [/\bMSIE\b/, /\bTrident\b/, /^Mozilla\/5\.0 \(Windows NT 10\.0; Win64; x64\)$/]
    },
    MS_EDGE: {
        or: [/\bEdg(e|A|iOS)\b/]
    },
    MS_EDGE_CHROMIUM: /\bEdg\/\b/,
    PS4: /\bMozilla\/5.0 \(PlayStation 4\b/,
    VITA: /\bMozilla\/5.0 \(Play(S|s)tation Vita\b/,
    FB_MESSANGER: /\bFBAN\/MessengerForiOS\b/,
    SAMSUNG: /\bSamsungBrowser\b/,
    UCBROWSER: /\bUCBrowser\b/
}
  , Hq = ve(C(C(C({}, D2), sh), $E), {
    FIREFOX_OS: {
        and: [/\bFirefox\b/, /\bMobile\b/]
    },
    CHROME_BOOK: /\bCrOS\b/,
    PS4: /\bMozilla\/5.0 \(PlayStation 4\b/,
    CHROMECAST: /\bCrKey\b/,
    APPLE_TV: /^iTunes-AppleTV\/4.1$/,
    GOOGLE_TV: /\bGoogleTV\b/,
    Tesla: /Tesla\/([0-9]{4}.[0-9]{1,2}.?[0-9]{0,2}.?[0-9]{0,2})-(.{7})/,
    MI_SE_9: /\bXiaomi\b/,
    MAC: {
        and: [/\bMac OS\b/, {
            not: {
                or: [/\biPhone\b/, /\biPad\b/, /\biPod\b/, /\bWindows Phone\b/]
            }
        }]
    }
})
  , E9 = {
    WINDOWS_3_11: /Win16/,
    WINDOWS_95: /(Windows 95|Win95|Windows_95)/,
    WINDOWS_ME: /(Win 9x 4.90|Windows ME)/,
    WINDOWS_98: /(Windows 98|Win98)/,
    WINDOWS_CE: /Windows CE/,
    WINDOWS_2000: /(Windows NT 5.0|Windows 2000)/,
    WINDOWS_XP: /(Windows NT 5.1|Windows XP)/,
    WINDOWS_SERVER_2003: /Windows NT 5.2/,
    WINDOWS_VISTA: /Windows NT 6.0/,
    WINDOWS_7: /(Windows 7|Windows NT 6.1)/,
    WINDOWS_8_1: /(Windows 8.1|Windows NT 6.3)/,
    WINDOWS_8: /(Windows 8|Windows NT 6.2)/,
    WINDOWS_10: /(Windows NT 10.0)/,
    WINDOWS_PHONE_7_5: /(Windows Phone OS 7.5)/,
    WINDOWS_PHONE_8_1: /(Windows Phone 8.1)/,
    WINDOWS_PHONE_10: /(Windows Phone 10)/,
    WINDOWS_NT_4_0: {
        and: [/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/, {
            not: /Windows NT 10.0/
        }]
    },
    MACOSX: /(MAC OS X\s*[^ 0-9])/,
    MACOSX_3: /(Darwin 10.3|Mac OS X 10.3)/,
    MACOSX_4: /(Darwin 10.4|Mac OS X 10.4)/,
    MACOSX_5: /(Mac OS X 10.5)/,
    MACOSX_6: /(Mac OS X 10.6)/,
    MACOSX_7: /(Mac OS X 10.7)/,
    MACOSX_8: /(Mac OS X 10.8)/,
    MACOSX_9: /(Mac OS X 10.9)/,
    MACOSX_10: /(Mac OS X 10.10)/,
    MACOSX_11: /(Mac OS X 10.11)/,
    MACOSX_12: /(Mac OS X 10.12)/,
    MACOSX_13: /(Mac OS X 10.13)/,
    MACOSX_14: /(Mac OS X 10.14)/,
    MACOSX_15: /(Mac OS X 10.15)/,
    MACOSX_16: /(Mac OS X 10.16)/,
    MACOSX_11_0: {
        or: [/11_0 like Mac OS X/, /Mac OS X 11/]
    },
    iOS: /(iPhone OS\s*[0-9_]+)/,
    ANDROID_9: /(Android 9)/
}
  , T9 = {
    CHROME: [/\bChrome\/([\d\.]+)\b/, /\bCriOS\/([\d\.]+)\b/, /\bHeadlessChrome\/([\d\.]+)\b/],
    FIREFOX: [/\bFirefox\/([\d\.]+)\b/, /\bFxiOS\/([\d\.]+)\b/],
    SAFARI: [/\bVersion\/([\d\.]+)\b/, /\bSafari\/([\d\.]+)\b/],
    OPERA: [/\bVersion\/([\d\.]+)\b/, /\bOPR\/([\d\.]+)\b/],
    IE: [/\bMSIE ([\d\.]+\w?)\b/, /\brv:([\d\.]+\w?)\b/],
    MS_EDGE: /\bEdg(?:e|A|iOS)\/([\d\.]+)\b/,
    MS_EDGE_CHROMIUM: /\bEdg\/([\d\.]+)\b/,
    SAMSUNG: /\bSamsungBrowser\/([\d\.]+)\b/,
    UCBROWSER: /\bUCBrowser\/([\d\.]+)\b/
}
  , Gq = Object.keys(E9).reduce( (e, t) => (e[t] = E9[t],
e), {})
  , WE = Object.keys(T9).reduce( (e, t) => (e[P9[t]] = T9[t],
e), {})
  , Zo = Object.freeze({
    __proto__: null,
    BROWSERS: P9,
    BROWSERS_RE: Uq,
    BROWSER_VERSIONS_RE: WE,
    BROWSER_VERSIONS_RE_MAP: T9,
    DESKTOP_DEVICES: VE,
    DEVICES: Kc,
    DEVICES_RE: Hq,
    GENERAL: oh,
    MOBILES_RE: D2,
    OS: Lq,
    OS_RE: $E,
    OS_VERSIONS: Bq,
    OS_VERSIONS_RE: Gq,
    OS_VERSIONS_RE_MAP: E9,
    TABLETS_RE: sh
})
  , O9 = class {
    constructor() {}
    test(t, n) {
        return typeof n == "string" && (n = new RegExp(n)),
        n instanceof RegExp ? n.test(t) : n && Array.isArray(n.and) ? n.and.every(i => this.test(t, i)) : n && Array.isArray(n.or) ? n.or.some(i => this.test(t, i)) : n && n.not ? !this.test(t, n.not) : !1
    }
    exec(t, n) {
        return typeof n == "string" && (n = new RegExp(n)),
        n instanceof RegExp ? n.exec(t) : n && Array.isArray(n) ? n.reduce( (i, r) => i || this.exec(t, r), null) : null
    }
}
  , G1 = function(e) {
    return e.Mobile = "mobile",
    e.Tablet = "tablet",
    e.Desktop = "desktop",
    e.Unknown = "unknown",
    e
}(G1 || {})
  , M9 = function(e) {
    return e.Portrait = "portrait",
    e.Landscape = "landscape",
    e
}(M9 || {})
  , C9 = "iPad"
  , N2 = ( () => {
    let t = class t {
        constructor(i) {
            this.platformId = i,
            this.ua = "",
            this.userAgent = "",
            this.os = "",
            this.browser = "",
            this.device = "",
            this.os_version = "",
            this.browser_version = "",
            this.reTree = new O9,
            this.deviceType = "",
            this.orientation = "",
            pc(this.platformId) && typeof window < "u" && (this.userAgent = window.navigator.userAgent),
            this.setDeviceInfo(this.userAgent)
        }
        setDeviceInfo(i=this.userAgent) {
            i !== this.userAgent && (this.userAgent = i);
            let r = [{
                const: "OS",
                prop: "os"
            }, {
                const: "BROWSERS",
                prop: "browser"
            }, {
                const: "DEVICES",
                prop: "device"
            }, {
                const: "OS_VERSIONS",
                prop: "os_version"
            }];
            if (r.forEach(s => {
                this[s.prop] = Object.keys(Zo[s.const]).reduce( (o, a) => Zo[s.const][a] === "device" && pc(this.platformId) && (this.reTree.test(this.userAgent, sh[C9]) || navigator.platform === "MacIntel" && navigator.maxTouchPoints > 1) ? (o[Zo[s.const][a]] = C9,
                Object) : (o[Zo[s.const][a]] = this.reTree.test(i, Zo[`${s.const}_RE`][a]),
                o), {})
            }
            ),
            r.forEach(s => {
                this[s.prop] = Object.keys(Zo[s.const]).map(o => Zo[s.const][o]).reduce( (o, a) => s.prop === "device" && o === Zo[s.const].ANDROID ? this[s.prop][a] ? a : o : o === Zo[s.const].UNKNOWN && this[s.prop][a] ? a : o, Zo[s.const].UNKNOWN)
            }
            ),
            this.browser_version = "0",
            this.browser !== P9.UNKNOWN) {
                let s = WE[this.browser]
                  , o = this.reTree.exec(i, s);
                o && (this.browser_version = o[1])
            }
            typeof window < "u" && window.matchMedia ? this.orientation = window.matchMedia("(orientation: landscape)").matches ? M9.Landscape : M9.Portrait : this.orientation = oh.UKNOWN,
            this.deviceType = this.isTablet() ? G1.Tablet : this.isMobile(this.userAgent) ? G1.Mobile : this.isDesktop(this.userAgent) ? G1.Desktop : G1.Unknown
        }
        getDeviceInfo() {
            return {
                userAgent: this.userAgent,
                os: this.os,
                browser: this.browser,
                device: this.device,
                os_version: this.os_version,
                browser_version: this.browser_version,
                deviceType: this.deviceType,
                orientation: this.orientation
            }
        }
        isMobile(i=this.userAgent) {
            return this.isTablet(i) ? !1 : !!Object.keys(D2).find(s => this.reTree.test(i, D2[s]))
        }
        isTablet(i=this.userAgent) {
            return pc(this.platformId) && (this.reTree.test(this.userAgent, sh[C9]) || typeof navigator < "u" && navigator.platform === "MacIntel" && navigator.maxTouchPoints > 1) ? !0 : !!Object.keys(sh).find(s => !!this.reTree.test(i, sh[s]))
        }
        isDesktop(i=this.userAgent) {
            return this.device === Kc.UNKNOWN && (this.isMobile(i) || this.isTablet(i)) ? !1 : VE.indexOf(this.device) > -1
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(qs))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var jE = ( () => {
    let t = class t {
        setDimensions(i, r) {
            this.width = i,
            this.height = r
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var ur = ( () => {
    let t = class t extends fn {
        get url() {
            return `${this.mtsPath + this.apiUrls.easy}UserDevice`
        }
        constructor() {
            super(),
            this.dimensionsService = z(jE),
            this.deviceService = z(N2),
            this.isIOSSub = new Ne(void 0),
            this.isIOSObs$ = this.isIOSSub.asObservable().pipe(mt(i => i !== void 0)),
            this.UserDeviceInfoSubject = new Ne(null),
            this.UserDeviceInfo$ = this.UserDeviceInfoSubject.asObservable(),
            this.deviceTypeSub = new Ne(_n.Unknown),
            this.deviceType$ = this.deviceTypeSub.asObservable(),
            this.getDeviceMenuRoot = () => `${this.deviceType == _n.Mobile ? "/" + mg.MENU_ROUTE : ""}`,
            this.setKeyboardTiming(),
            this.isIOSSub.next(/iOS/.test(this.deviceService.os))
        }
        get browser() {
            return this.deviceService.browser.toLowerCase()
        }
        get browserVersion() {
            return this.deviceService.browser_version.toLowerCase().split(".")?.[0] + "." + (this.deviceService.browser_version.toLowerCase().split(".")?.[1] ?? 0)
        }
        get userDeviceInfo() {
            return this.deviceService
        }
        isValidBrowserVersion(i) {
            if (i !== _n.Unknown) {
                for (let r of Sg.keys())
                    if (this.browser.includes(r) || r.includes(this.browser))
                        return Sg.get(r).isValid(i === _n.Mobile, this.browserVersion)
            }
            return !0
        }
        get isAppropriateBrowserForAndroid() {
            return this.deviceService.browser.toLowerCase() === "chrome"
        }
        get userDevice() {
            return /Android/i.test(this.deviceService?.os) ? Zf : /iOS/.test(this.deviceService?.os) ? _g : jS
        }
        get isiOS() {
            return this.userDevice === _g
        }
        get isAndroid() {
            return this.userDevice === Zf
        }
        get isiOS_13_Or_Above() {
            return this.isiOS && /OS 13|OS 14|OS 15|OS 16|OS 17|OS 18|OS 19|OS 20/.test(this.deviceService.userAgent)
        }
        get is_iOS_Older_Version() {
            let i = navigator.userAgent || navigator.vendor;
            return this.isiOS && /OS 10|OS 11|OS 12|OS 13|OS 14/.test(i)
        }
        setKeyboardTiming() {
            this.userDevice === Zf ? (this.delayToActiveKeyboardAfterOpening = Dd.delayToActiveAfterOpen,
            this.delayToRemoveKeyboardAfterClosing = Dd.delayToRemoveAfterClose) : (this.delayToActiveKeyboardAfterOpening = Dd.delayToActiveAfterOpen,
            this.delayToRemoveKeyboardAfterClosing = Dd.delayToRemoveAfterClose)
        }
        sendUserDeviceInfo() {
            let i = {
                appBuildNo: this.environment.build,
                width: this.dimensionsService.width,
                height: this.dimensionsService.height,
                devicePlatform: this.userDevice ?? "Mobile",
                platformInfo: this.deviceService.userAgent
            };
            this.UserDeviceInfoSubject.next(i)
        }
        sendUserDesktopDeviceInfo() {
            let i = {
                appBuildNo: this.environment.build,
                width: this.dimensionsService.width,
                height: this.dimensionsService.height,
                devicePlatform: qS,
                platformInfo: this.deviceService.userAgent
            };
            this.UserDeviceInfoSubject.next(i)
        }
        setUserDevice(i) {
            this.deviceType = i,
            this.deviceTypeSub.next(i)
        }
        checkInfrastructure() {
            this.environment.env === Yt.PROD && (this.httpService.get("https://api-mts.orbis.easytrader.ir/orbis/perf").subscribe(),
            this.httpService.get("https://api-mts.orbis.easytrader.ir/orbis/perfWAF").subscribe(),
            this.httpService.get("https://api-mts.orbis.easytrader.ir/health").subscribe(),
            this.httpService.get("https://api-mts.orbis.easytrader.ir/easy").subscribe())
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var go = ( () => {
    let t = class t extends fn {
        constructor() {
            super(...arguments),
            this.userAccountInfo = new Ne(null),
            this.userAccountInfo$ = this.userAccountInfo.asObservable(),
            this.accountActivitySeenSub = new Ne(!0),
            this.accountActivitySeen$ = this.accountActivitySeenSub.asObservable(),
            this.userDeviceService = z(ur),
            this.userService = z($r),
            this.deviceDetectorService = z(N2)
        }
        get deviceType() {
            return this.userDeviceService.deviceType
        }
        get customerIsin() {
            return this.userAccountInfo.value?.customerIsin
        }
        removeSession(i) {
            return this.httpService.post(`${this.mtsPath + this.apiUrls.easy}account/remove-sessions`, {
                body: {
                    ids: i
                }
            })
        }
        setUserAccountInfo(i) {
            this.userService.isGuestUser ? this.userAccountInfo.next({
                customerTitle: "\u06A9\u0627\u0631\u0628\u0631 \u0645\u06CC\u0647\u0645\u0627\u0646"
            }) : i && this.userAccountInfo.next({
                customerTitle: i?.display_name ?? "",
                customerIsin: i?.customer_isin ?? "",
                email: i?.email ?? "",
                nationalId: i?.national_id ?? "",
                phoneNumber: i?.phone_number ?? "",
                firstName: i?.firstname ?? "",
                lastName: i?.lastname ?? "",
                bourseCode: i?.bourse_code ?? null,
                userFullName: i?.display_name ?? "",
                pk: i?.pk ?? "",
                loginDate: new Date
            })
        }
        getUserAccountActivities() {
            return this.httpService.get(`${this.mtsPath + this.apiUrls.easy}UserActivity/user-activity`).pipe(We(i => i.map(r => (this.deviceDetectorService.setDeviceInfo(r.userAgent),
            r.deviceType = this.deviceDetectorService.isMobile() ? _n.Mobile : _n.Desktop,
            r.isExpired = !r.logoutDate && new Date(Date.now()) > new Date(r.expiryDate),
            r.deviceInfo = this.deviceDetectorService.getDeviceInfo(),
            r))), on( () => Be([])))
        }
        getUserInfo() {
            this.userAccountInfo?.value?.bourseCode || this.httpService.get(`${this.mtsPath + this.apiUrls.easy}account/user-info`).pipe(He(i => {
                this.userAccountInfo.next(ve(C({}, this.userAccountInfo.value), {
                    bourseCode: i.bourseCode
                }))
            }
            )).subscribe()
        }
        accountActivitySeen(i) {
            this.accountActivitySeenSub.next(i)
        }
        isIndUser(i) {
            return i.endsWith("1129")
        }
    }
    ;
    t.\u0275fac = ( () => {
        let i;
        return function(s) {
            return (i || (i = Tn(t)))(s || t)
        }
    }
    )(),
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var zE = ( () => {
    let t = class t extends fn {
        constructor() {
            super(),
            this.accountService = z(go),
            this.unleashReady = new Ne(null),
            this.unleashReady$ = this.unleashReady.asObservable(),
            this.unleash = new GE({
                url: this.environment.unleash.url,
                appName: this.environment.unleash.appName,
                clientKey: this.environment.unleash.server,
                refreshInterval: this.environment.unleash.refreshInterval,
                environment: this.environment.unleash.environment
            }),
            this.setUnleashStatus()
        }
        init() {
            this.accountService.userAccountInfo$.pipe(mt(i => !!i?.customerIsin), Lt(1)).subscribe(i => {
                this.unleash.setContextField("userId", i.customerIsin),
                this.unleash.start()
            }
            )
        }
        isFeatureEnabled$(i) {
            return this.unleashReady$.pipe(We(r => {
                if (r === !0)
                    return this.unleash.isEnabled(i);
                if (r === !1)
                    return !1
            }
            ), mt(r => [!1, !0].includes(r)))
        }
        isFeatureEnabledStartsWithServerResponse$(i) {
            return this.unleashReady$.pipe(mt(r => r === !0), We(r => this.unleash.isEnabled(i)), mt(r => typeof r == "boolean"))
        }
        isFeatureEnabled(i) {
            return xi(this.isFeatureEnabled$(i))
        }
        setUnleashStatus() {
            this.unleash.on("update", () => {
                this.unleashReady.next(!0)
            }
            ),
            this.unleash.on("error", () => {
                this.unleashReady.next(!1)
            }
            )
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var v0 = class extends Error {
}
;
v0.prototype.name = "InvalidTokenError";
function $q(e) {
    return decodeURIComponent(atob(e).replace(/(.)/g, (t, n) => {
        let i = n.charCodeAt(0).toString(16).toUpperCase();
        return i.length < 2 && (i = "0" + i),
        "%" + i
    }
    ))
}
function Wq(e) {
    let t = e.replace(/-/g, "+").replace(/_/g, "/");
    switch (t.length % 4) {
    case 0:
        break;
    case 2:
        t += "==";
        break;
    case 3:
        t += "=";
        break;
    default:
        throw new Error("base64 string is not of the correct length")
    }
    try {
        return $q(t)
    } catch {
        return atob(t)
    }
}
function F2(e, t) {
    if (typeof e != "string")
        throw new v0("Invalid token specified: must be a string");
    t || (t = {});
    let n = t.header === !0 ? 0 : 1
      , i = e.split(".")[n];
    if (typeof i != "string")
        throw new v0(`Invalid token specified: missing part #${n + 1}`);
    let r;
    try {
        r = Wq(i)
    } catch (s) {
        throw new v0(`Invalid token specified: invalid base64 for part #${n + 1} (${s.message})`)
    }
    try {
        return JSON.parse(r)
    } catch (s) {
        throw new v0(`Invalid token specified: invalid json for part #${n + 1} (${s.message})`)
    }
}
var jq = {
    debug: () => {}
    ,
    info: () => {}
    ,
    warn: () => {}
    ,
    error: () => {}
}, na, ia, B2 = (e => (e[e.NONE = 0] = "NONE",
e[e.ERROR = 1] = "ERROR",
e[e.WARN = 2] = "WARN",
e[e.INFO = 3] = "INFO",
e[e.DEBUG = 4] = "DEBUG",
e))(B2 || {});
(e => {
    function t() {
        na = 3,
        ia = jq
    }
    e.reset = t;
    function n(r) {
        if (!(0 <= r && r <= 4))
            throw new Error("Invalid log level");
        na = r
    }
    e.setLevel = n;
    function i(r) {
        ia = r
    }
    e.setLogger = i
}
)(B2 || (B2 = {}));
var Ht = class ea {
    constructor(t) {
        this._name = t
    }
    debug(...t) {
        na >= 4 && ia.debug(ea._format(this._name, this._method), ...t)
    }
    info(...t) {
        na >= 3 && ia.info(ea._format(this._name, this._method), ...t)
    }
    warn(...t) {
        na >= 2 && ia.warn(ea._format(this._name, this._method), ...t)
    }
    error(...t) {
        na >= 1 && ia.error(ea._format(this._name, this._method), ...t)
    }
    throw(t) {
        throw this.error(t),
        t
    }
    create(t) {
        let n = Object.create(this);
        return n._method = t,
        n.debug("begin"),
        n
    }
    static createStatic(t, n) {
        let i = new ea(`${t}.${n}`);
        return i.debug("begin"),
        i
    }
    static _format(t, n) {
        let i = `[${t}]`;
        return n ? `${i} ${n}:` : i
    }
    static debug(t, ...n) {
        na >= 4 && ia.debug(ea._format(t), ...n)
    }
    static info(t, ...n) {
        na >= 3 && ia.info(ea._format(t), ...n)
    }
    static warn(t, ...n) {
        na >= 2 && ia.warn(ea._format(t), ...n)
    }
    static error(t, ...n) {
        na >= 1 && ia.error(ea._format(t), ...n)
    }
}
;
B2.reset();
var U2 = class {
    static decode(e) {
        try {
            return F2(e)
        } catch (t) {
            throw Ht.error("JwtUtils.decode", t),
            t
        }
    }
    static generateSignedJwt(e, t, n) {
        return ue(this, null, function*() {
            let i = Zr.encodeBase64Url(new TextEncoder().encode(JSON.stringify(e)))
              , r = Zr.encodeBase64Url(new TextEncoder().encode(JSON.stringify(t)))
              , s = `${i}.${r}`
              , o = yield window.crypto.subtle.sign({
                name: "ECDSA",
                hash: {
                    name: "SHA-256"
                }
            }, n, new TextEncoder().encode(s))
              , a = Zr.encodeBase64Url(new Uint8Array(o));
            return `${s}.${a}`
        })
    }
}
  , qq = "10000000-1000-4000-8000-100000000000"
  , k9 = e => btoa([...new Uint8Array(e)].map(t => String.fromCharCode(t)).join(""))
  , zq = ( () => {
    let e = class ta {
        static _randomWord() {
            let n = new Uint32Array(1);
            return crypto.getRandomValues(n),
            n[0]
        }
        static generateUUIDv4() {
            return qq.replace(/[018]/g, i => (+i ^ ta._randomWord() & 15 >> +i / 4).toString(16)).replace(/-/g, "")
        }
        static generateCodeVerifier() {
            return ta.generateUUIDv4() + ta.generateUUIDv4() + ta.generateUUIDv4()
        }
        static generateCodeChallenge(n) {
            return ue(this, null, function*() {
                if (!crypto.subtle)
                    throw new Error("Crypto.subtle is available only in secure contexts (HTTPS).");
                try {
                    let r = new TextEncoder().encode(n)
                      , s = yield crypto.subtle.digest("SHA-256", r);
                    return k9(s).replace(/\+/g, "-").replace(/\//g, "_").replace(/=+$/, "")
                } catch (i) {
                    throw Ht.error("CryptoUtils.generateCodeChallenge", i),
                    i
                }
            })
        }
        static generateBasicAuth(n, i) {
            let s = new TextEncoder().encode([n, i].join(":"));
            return k9(s)
        }
        static hash(n, i) {
            return ue(this, null, function*() {
                let r = new TextEncoder().encode(i)
                  , s = yield crypto.subtle.digest(n, r);
                return new Uint8Array(s)
            })
        }
        static customCalculateJwkThumbprint(n) {
            return ue(this, null, function*() {
                let i;
                switch (n.kty) {
                case "RSA":
                    i = {
                        e: n.e,
                        kty: n.kty,
                        n: n.n
                    };
                    break;
                case "EC":
                    i = {
                        crv: n.crv,
                        kty: n.kty,
                        x: n.x,
                        y: n.y
                    };
                    break;
                case "OKP":
                    i = {
                        crv: n.crv,
                        kty: n.kty,
                        x: n.x
                    };
                    break;
                case "oct":
                    i = {
                        crv: n.k,
                        kty: n.kty
                    };
                    break;
                default:
                    throw new Error("Unknown jwk type")
                }
                let r = yield ta.hash("SHA-256", JSON.stringify(i));
                return ta.encodeBase64Url(r)
            })
        }
        static generateDPoPProof(a) {
            return ue(this, arguments, function*({url: n, accessToken: i, httpMethod: r, keyPair: s, nonce: o}) {
                let c, l, u = {
                    jti: window.crypto.randomUUID(),
                    htm: r ?? "GET",
                    htu: n,
                    iat: Math.floor(Date.now() / 1e3)
                };
                i && (c = yield ta.hash("SHA-256", i),
                l = ta.encodeBase64Url(c),
                u.ath = l),
                o && (u.nonce = o);
                try {
                    let h = yield crypto.subtle.exportKey("jwk", s.publicKey)
                      , d = {
                        alg: "ES256",
                        typ: "dpop+jwt",
                        jwk: {
                            crv: h.crv,
                            kty: h.kty,
                            x: h.x,
                            y: h.y
                        }
                    };
                    return yield U2.generateSignedJwt(d, u, s.privateKey)
                } catch (h) {
                    throw h instanceof TypeError ? new Error(`Error exporting dpop public key: ${h.message}`) : h
                }
            })
        }
        static generateDPoPJkt(n) {
            return ue(this, null, function*() {
                try {
                    let i = yield crypto.subtle.exportKey("jwk", n.publicKey);
                    return yield ta.customCalculateJwkThumbprint(i)
                } catch (i) {
                    throw i instanceof TypeError ? new Error(`Could not retrieve dpop keys from storage: ${i.message}`) : i
                }
            })
        }
        static generateDPoPKeys() {
            return ue(this, null, function*() {
                return yield window.crypto.subtle.generateKey({
                    name: "ECDSA",
                    namedCurve: "P-256"
                }, !1, ["sign", "verify"])
            })
        }
    }
    ;
    return e.encodeBase64Url = t => k9(t).replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_"),
    e
}
)()
  , Zr = zq
  , Yc = class {
    constructor(e) {
        this._name = e,
        this._callbacks = [],
        this._logger = new Ht(`Event('${this._name}')`)
    }
    addHandler(e) {
        return this._callbacks.push(e),
        () => this.removeHandler(e)
    }
    removeHandler(e) {
        let t = this._callbacks.lastIndexOf(e);
        t >= 0 && this._callbacks.splice(t, 1)
    }
    raise(...e) {
        return ue(this, null, function*() {
            this._logger.debug("raise:", ...e);
            for (let t of this._callbacks)
                yield t(...e)
        })
    }
}
  , XE = class {
    static center(t) {
        var e = er(t, []);
        var n, i, r;
        return e.width == null && (e.width = (n = [800, 720, 600, 480].find(s => s <= window.outerWidth / 1.618)) != null ? n : 360),
        (i = e.left) != null || (e.left = Math.max(0, Math.round(window.screenX + (window.outerWidth - e.width) / 2))),
        e.height != null && ((r = e.top) != null || (e.top = Math.max(0, Math.round(window.screenY + (window.outerHeight - e.height) / 2)))),
        e
    }
    static serialize(e) {
        return Object.entries(e).filter( ([,t]) => t != null).map( ([t,n]) => `${t}=${typeof n != "boolean" ? n : n ? "yes" : "no"}`).join(",")
    }
}
  , qa = class L2 extends Yc {
    constructor() {
        super(...arguments),
        this._logger = new Ht(`Timer('${this._name}')`),
        this._timerHandle = null,
        this._expiration = 0,
        this._callback = () => {
            let t = this._expiration - L2.getEpochTime();
            this._logger.debug("timer completes in", t),
            this._expiration <= L2.getEpochTime() && (this.cancel(),
            super.raise())
        }
    }
    static getEpochTime() {
        return Math.floor(Date.now() / 1e3)
    }
    init(t) {
        let n = this._logger.create("init");
        t = Math.max(Math.floor(t), 1);
        let i = L2.getEpochTime() + t;
        if (this.expiration === i && this._timerHandle) {
            n.debug("skipping since already initialized for expiration at", this.expiration);
            return
        }
        this.cancel(),
        n.debug("using duration", t),
        this._expiration = i;
        let r = Math.min(t, 5);
        this._timerHandle = setInterval(this._callback, r * 1e3)
    }
    get expiration() {
        return this._expiration
    }
    cancel() {
        this._logger.create("cancel"),
        this._timerHandle && (clearInterval(this._timerHandle),
        this._timerHandle = null)
    }
}
  , R9 = class {
    static readParams(e, t="query") {
        if (!e)
            throw new TypeError("Invalid URL");
        let i = new URL(e,"http://127.0.0.1")[t === "fragment" ? "hash" : "search"];
        return new URLSearchParams(i.slice(1))
    }
}
  , D9 = ";"
  , _0 = class extends Error {
    constructor(e, t) {
        var n, i, r;
        if (super(e.error_description || e.error || ""),
        this.form = t,
        this.name = "ErrorResponse",
        !e.error)
            throw Ht.error("ErrorResponse", "No error passed"),
            new Error("No error passed");
        this.error = e.error,
        this.error_description = (n = e.error_description) != null ? n : null,
        this.error_uri = (i = e.error_uri) != null ? i : null,
        this.state = e.userState,
        this.session_state = (r = e.session_state) != null ? r : null,
        this.url_state = e.url_state
    }
}
  , H9 = class extends Error {
    constructor(e) {
        super(e),
        this.name = "ErrorTimeout"
    }
}
  , Xq = class {
    constructor(e) {
        this._logger = new Ht("AccessTokenEvents"),
        this._expiringTimer = new qa("Access token expiring"),
        this._expiredTimer = new qa("Access token expired"),
        this._expiringNotificationTimeInSeconds = e.expiringNotificationTimeInSeconds
    }
    load(e) {
        let t = this._logger.create("load");
        if (e.access_token && e.expires_in !== void 0) {
            let n = e.expires_in;
            if (t.debug("access token present, remaining duration:", n),
            n > 0) {
                let r = n - this._expiringNotificationTimeInSeconds;
                r <= 0 && (r = 1),
                t.debug("registering expiring timer, raising in", r, "seconds"),
                this._expiringTimer.init(r)
            } else
                t.debug("canceling existing expiring timer because we're past expiration."),
                this._expiringTimer.cancel();
            let i = n + 1;
            t.debug("registering expired timer, raising in", i, "seconds"),
            this._expiredTimer.init(i)
        } else
            this._expiringTimer.cancel(),
            this._expiredTimer.cancel()
    }
    unload() {
        this._logger.debug("unload: canceling existing access token timers"),
        this._expiringTimer.cancel(),
        this._expiredTimer.cancel()
    }
    addAccessTokenExpiring(e) {
        return this._expiringTimer.addHandler(e)
    }
    removeAccessTokenExpiring(e) {
        this._expiringTimer.removeHandler(e)
    }
    addAccessTokenExpired(e) {
        return this._expiredTimer.addHandler(e)
    }
    removeAccessTokenExpired(e) {
        this._expiredTimer.removeHandler(e)
    }
}
  , Kq = class {
    constructor(e, t, n, i, r) {
        this._callback = e,
        this._client_id = t,
        this._intervalInSeconds = i,
        this._stopOnError = r,
        this._logger = new Ht("CheckSessionIFrame"),
        this._timer = null,
        this._session_state = null,
        this._message = o => {
            o.origin === this._frame_origin && o.source === this._frame.contentWindow && (o.data === "error" ? (this._logger.error("error message from check session op iframe"),
            this._stopOnError && this.stop()) : o.data === "changed" ? (this._logger.debug("changed message from check session op iframe"),
            this.stop(),
            this._callback()) : this._logger.debug(o.data + " message from check session op iframe"))
        }
        ;
        let s = new URL(n);
        this._frame_origin = s.origin,
        this._frame = window.document.createElement("iframe"),
        this._frame.style.visibility = "hidden",
        this._frame.style.position = "fixed",
        this._frame.style.left = "-1000px",
        this._frame.style.top = "0",
        this._frame.width = "0",
        this._frame.height = "0",
        this._frame.src = s.href
    }
    load() {
        return new Promise(e => {
            this._frame.onload = () => {
                e()
            }
            ,
            window.document.body.appendChild(this._frame),
            window.addEventListener("message", this._message, !1)
        }
        )
    }
    start(e) {
        if (this._session_state === e)
            return;
        this._logger.create("start"),
        this.stop(),
        this._session_state = e;
        let t = () => {
            !this._frame.contentWindow || !this._session_state || this._frame.contentWindow.postMessage(this._client_id + " " + this._session_state, this._frame_origin)
        }
        ;
        t(),
        this._timer = setInterval(t, this._intervalInSeconds * 1e3)
    }
    stop() {
        this._logger.create("stop"),
        this._session_state = null,
        this._timer && (clearInterval(this._timer),
        this._timer = null)
    }
}
  , JE = class {
    constructor() {
        this._logger = new Ht("InMemoryWebStorage"),
        this._data = {}
    }
    clear() {
        this._logger.create("clear"),
        this._data = {}
    }
    getItem(e) {
        return this._logger.create(`getItem('${e}')`),
        this._data[e]
    }
    setItem(e, t) {
        this._logger.create(`setItem('${e}')`),
        this._data[e] = t
    }
    removeItem(e) {
        this._logger.create(`removeItem('${e}')`),
        delete this._data[e]
    }
    get length() {
        return Object.getOwnPropertyNames(this._data).length
    }
    key(e) {
        return Object.getOwnPropertyNames(this._data)[e]
    }
}
  , N9 = class extends Error {
    constructor(e, t) {
        super(t),
        this.name = "ErrorDPoPNonce",
        this.nonce = e
    }
}
  , G9 = class {
    constructor(e=[], t=null, n={}) {
        this._jwtHandler = t,
        this._extraHeaders = n,
        this._logger = new Ht("JsonService"),
        this._contentTypes = [],
        this._contentTypes.push(...e, "application/json"),
        t && this._contentTypes.push("application/jwt")
    }
    fetchWithTimeout(n) {
        return ue(this, arguments, function*(e, t={}) {
            let a = t
              , {timeoutInSeconds: i} = a
              , r = er(a, ["timeoutInSeconds"]);
            if (!i)
                return yield fetch(e, r);
            let s = new AbortController
              , o = setTimeout( () => s.abort(), i * 1e3);
            try {
                return yield fetch(e, ve(C({}, t), {
                    signal: s.signal
                }))
            } catch (c) {
                throw c instanceof DOMException && c.name === "AbortError" ? new H9("Network timed out") : c
            } finally {
                clearTimeout(o)
            }
        })
    }
    getJson(r) {
        return ue(this, arguments, function*(e, {token: t, credentials: n, timeoutInSeconds: i}={}) {
            let s = this._logger.create("getJson")
              , o = {
                Accept: this._contentTypes.join(", ")
            };
            t && (s.debug("token passed, setting Authorization header"),
            o.Authorization = "Bearer " + t),
            this.appendExtraHeaders(o);
            let a;
            try {
                s.debug("url:", e),
                a = yield this.fetchWithTimeout(e, {
                    method: "GET",
                    headers: o,
                    timeoutInSeconds: i,
                    credentials: n
                })
            } catch (u) {
                throw s.error("Network Error"),
                u
            }
            s.debug("HTTP response received, status", a.status);
            let c = a.headers.get("Content-Type");
            if (c && !this._contentTypes.find(u => c.startsWith(u)) && s.throw(new Error(`Invalid response Content-Type: ${c ?? "undefined"}, from URL: ${e}`)),
            a.ok && this._jwtHandler && c?.startsWith("application/jwt"))
                return yield this._jwtHandler(yield a.text());
            let l;
            try {
                l = yield a.json()
            } catch (u) {
                throw s.error("Error parsing JSON response", u),
                a.ok ? u : new Error(`${a.statusText} (${a.status})`)
            }
            if (!a.ok)
                throw s.error("Error from server:", l),
                l.error ? new _0(l) : new Error(`${a.statusText} (${a.status}): ${JSON.stringify(l)}`);
            return l
        })
    }
    postForm(o, a) {
        return ue(this, arguments, function*(e, {body: t, basicAuth: n, timeoutInSeconds: i, initCredentials: r, extraHeaders: s}) {
            let c = this._logger.create("postForm")
              , l = C({
                Accept: this._contentTypes.join(", "),
                "Content-Type": "application/x-www-form-urlencoded"
            }, s);
            n !== void 0 && (l.Authorization = "Basic " + n),
            this.appendExtraHeaders(l);
            let u;
            try {
                c.debug("url:", e),
                u = yield this.fetchWithTimeout(e, {
                    method: "POST",
                    headers: l,
                    body: t,
                    timeoutInSeconds: i,
                    credentials: r
                })
            } catch (g) {
                throw c.error("Network error"),
                g
            }
            c.debug("HTTP response received, status", u.status);
            let h = u.headers.get("Content-Type");
            if (h && !this._contentTypes.find(g => h.startsWith(g)))
                throw new Error(`Invalid response Content-Type: ${h ?? "undefined"}, from URL: ${e}`);
            let d = yield u.text()
              , f = {};
            if (d)
                try {
                    f = JSON.parse(d)
                } catch (g) {
                    throw c.error("Error parsing JSON response", g),
                    u.ok ? g : new Error(`${u.statusText} (${u.status})`)
                }
            if (!u.ok) {
                if (c.error("Error from server:", f),
                u.headers.has("dpop-nonce")) {
                    let g = u.headers.get("dpop-nonce");
                    throw new N9(g,`${JSON.stringify(f)}`)
                }
                throw f.error ? new _0(f,t) : new Error(`${u.statusText} (${u.status}): ${JSON.stringify(f)}`)
            }
            return f
        })
    }
    appendExtraHeaders(e) {
        let t = this._logger.create("appendExtraHeaders")
          , n = Object.keys(this._extraHeaders)
          , i = ["authorization", "accept", "content-type"];
        n.length !== 0 && n.forEach(r => {
            if (i.includes(r.toLocaleLowerCase())) {
                t.warn("Protected header could not be overridden", r, i);
                return
            }
            let s = typeof this._extraHeaders[r] == "function" ? this._extraHeaders[r]() : this._extraHeaders[r];
            s && s !== "" && (e[r] = s)
        }
        )
    }
}
  , Yq = class {
    constructor(e) {
        this._settings = e,
        this._logger = new Ht("MetadataService"),
        this._signingKeys = null,
        this._metadata = null,
        this._metadataUrl = this._settings.metadataUrl,
        this._jsonService = new G9(["application/jwk-set+json"],null,this._settings.extraHeaders),
        this._settings.signingKeys && (this._logger.debug("using signingKeys from settings"),
        this._signingKeys = this._settings.signingKeys),
        this._settings.metadata && (this._logger.debug("using metadata from settings"),
        this._metadata = this._settings.metadata),
        this._settings.fetchRequestCredentials && (this._logger.debug("using fetchRequestCredentials from settings"),
        this._fetchRequestCredentials = this._settings.fetchRequestCredentials)
    }
    resetSigningKeys() {
        this._signingKeys = null
    }
    getMetadata() {
        return ue(this, null, function*() {
            let e = this._logger.create("getMetadata");
            if (this._metadata)
                return e.debug("using cached values"),
                this._metadata;
            if (!this._metadataUrl)
                throw e.throw(new Error("No authority or metadataUrl configured on settings")),
                null;
            e.debug("getting metadata from", this._metadataUrl);
            let t = yield this._jsonService.getJson(this._metadataUrl, {
                credentials: this._fetchRequestCredentials,
                timeoutInSeconds: this._settings.requestTimeoutInSeconds
            });
            return e.debug("merging remote JSON with seed metadata"),
            this._metadata = Object.assign({}, this._settings.metadataSeed, t),
            this._metadata
        })
    }
    getIssuer() {
        return this._getMetadataProperty("issuer")
    }
    getAuthorizationEndpoint() {
        return this._getMetadataProperty("authorization_endpoint")
    }
    getUserInfoEndpoint() {
        return this._getMetadataProperty("userinfo_endpoint")
    }
    getTokenEndpoint(e=!0) {
        return this._getMetadataProperty("token_endpoint", e)
    }
    getCheckSessionIframe() {
        return this._getMetadataProperty("check_session_iframe", !0)
    }
    getEndSessionEndpoint() {
        return this._getMetadataProperty("end_session_endpoint", !0)
    }
    getRevocationEndpoint(e=!0) {
        return this._getMetadataProperty("revocation_endpoint", e)
    }
    getKeysEndpoint(e=!0) {
        return this._getMetadataProperty("jwks_uri", e)
    }
    _getMetadataProperty(e, t=!1) {
        return ue(this, null, function*() {
            let n = this._logger.create(`_getMetadataProperty('${e}')`)
              , i = yield this.getMetadata();
            if (n.debug("resolved"),
            i[e] === void 0) {
                if (t === !0) {
                    n.warn("Metadata does not contain optional property");
                    return
                }
                n.throw(new Error("Metadata does not contain property " + e))
            }
            return i[e]
        })
    }
    getSigningKeys() {
        return ue(this, null, function*() {
            let e = this._logger.create("getSigningKeys");
            if (this._signingKeys)
                return e.debug("returning signingKeys from cache"),
                this._signingKeys;
            let t = yield this.getKeysEndpoint(!1);
            e.debug("got jwks_uri", t);
            let n = yield this._jsonService.getJson(t, {
                timeoutInSeconds: this._settings.requestTimeoutInSeconds
            });
            if (e.debug("got key set", n),
            !Array.isArray(n.keys))
                throw e.throw(new Error("Missing keys on keyset")),
                null;
            return this._signingKeys = n.keys,
            this._signingKeys
        })
    }
}
  , G2 = class {
    constructor({prefix: e="oidc.", store: t=localStorage}={}) {
        this._logger = new Ht("WebStorageStateStore"),
        this._store = t,
        this._prefix = e
    }
    set(e, t) {
        return ue(this, null, function*() {
            this._logger.create(`set('${e}')`),
            e = this._prefix + e,
            yield this._store.setItem(e, t)
        })
    }
    get(e) {
        return ue(this, null, function*() {
            return this._logger.create(`get('${e}')`),
            e = this._prefix + e,
            yield this._store.getItem(e)
        })
    }
    remove(e) {
        return ue(this, null, function*() {
            this._logger.create(`remove('${e}')`),
            e = this._prefix + e;
            let t = yield this._store.getItem(e);
            return yield this._store.removeItem(e),
            t
        })
    }
    getAllKeys() {
        return ue(this, null, function*() {
            this._logger.create("getAllKeys");
            let e = yield this._store.length
              , t = [];
            for (let n = 0; n < e; n++) {
                let i = yield this._store.key(n);
                i && i.indexOf(this._prefix) === 0 && t.push(i.substr(this._prefix.length))
            }
            return t
        })
    }
}
  , Qq = "code"
  , Jq = "openid"
  , Zq = "client_secret_post"
  , ez = 60 * 15
  , F9 = class {
    constructor({authority: e, metadataUrl: t, metadata: n, signingKeys: i, metadataSeed: r, client_id: s, client_secret: o, response_type: a=Qq, scope: c=Jq, redirect_uri: l, post_logout_redirect_uri: u, client_authentication: h=Zq, prompt: d, display: f, max_age: g, ui_locales: p, acr_values: v, resource: S, response_mode: x, filterProtocolClaims: w=!0, loadUserInfo: k=!1, requestTimeoutInSeconds: B, staleStateAgeInSeconds: N=ez, mergeClaimsStrategy: E={
        array: "replace"
    }, disablePKCE: F=!1, stateStore: O, revokeTokenAdditionalContentTypes: V, fetchRequestCredentials: X, refreshTokenAllowedScope: b, extraQueryParams: j={}, extraTokenParams: de={}, extraHeaders: he={}, dpop: Re, omitScopeWhenRequesting: Xe=!1}) {
        var pt;
        if (this.authority = e,
        t ? this.metadataUrl = t : (this.metadataUrl = e,
        e && (this.metadataUrl.endsWith("/") || (this.metadataUrl += "/"),
        this.metadataUrl += ".well-known/openid-configuration")),
        this.metadata = n,
        this.metadataSeed = r,
        this.signingKeys = i,
        this.client_id = s,
        this.client_secret = o,
        this.response_type = a,
        this.scope = c,
        this.redirect_uri = l,
        this.post_logout_redirect_uri = u,
        this.client_authentication = h,
        this.prompt = d,
        this.display = f,
        this.max_age = g,
        this.ui_locales = p,
        this.acr_values = v,
        this.resource = S,
        this.response_mode = x,
        this.filterProtocolClaims = w ?? !0,
        this.loadUserInfo = !!k,
        this.staleStateAgeInSeconds = N,
        this.mergeClaimsStrategy = E,
        this.omitScopeWhenRequesting = Xe,
        this.disablePKCE = !!F,
        this.revokeTokenAdditionalContentTypes = V,
        this.fetchRequestCredentials = X || "same-origin",
        this.requestTimeoutInSeconds = B,
        O)
            this.stateStore = O;
        else {
            let it = typeof window < "u" ? window.localStorage : new JE;
            this.stateStore = new G2({
                store: it
            })
        }
        if (this.refreshTokenAllowedScope = b,
        this.extraQueryParams = j,
        this.extraTokenParams = de,
        this.extraHeaders = he,
        this.dpop = Re,
        this.dpop && !((pt = this.dpop) != null && pt.store))
            throw new Error("A DPoPStore is required when dpop is enabled")
    }
}
  , tz = class {
    constructor(e, t) {
        this._settings = e,
        this._metadataService = t,
        this._logger = new Ht("UserInfoService"),
        this._getClaimsFromJwt = n => ue(this, null, function*() {
            let i = this._logger.create("_getClaimsFromJwt");
            try {
                let r = U2.decode(n);
                return i.debug("JWT decoding successful"),
                r
            } catch (r) {
                throw i.error("Error parsing JWT response"),
                r
            }
        }),
        this._jsonService = new G9(void 0,this._getClaimsFromJwt,this._settings.extraHeaders)
    }
    getClaims(e) {
        return ue(this, null, function*() {
            let t = this._logger.create("getClaims");
            e || this._logger.throw(new Error("No token passed"));
            let n = yield this._metadataService.getUserInfoEndpoint();
            t.debug("got userinfo url", n);
            let i = yield this._jsonService.getJson(n, {
                token: e,
                credentials: this._settings.fetchRequestCredentials,
                timeoutInSeconds: this._settings.requestTimeoutInSeconds
            });
            return t.debug("got claims", i),
            i
        })
    }
}
  , ZE = class {
    constructor(e, t) {
        this._settings = e,
        this._metadataService = t,
        this._logger = new Ht("TokenClient"),
        this._jsonService = new G9(this._settings.revokeTokenAdditionalContentTypes,null,this._settings.extraHeaders)
    }
    exchangeCode(o) {
        return ue(this, null, function*() {
            var a = o
              , {grant_type: e="authorization_code", redirect_uri: t=this._settings.redirect_uri, client_id: n=this._settings.client_id, client_secret: i=this._settings.client_secret, extraHeaders: r} = a
              , s = er(a, ["grant_type", "redirect_uri", "client_id", "client_secret", "extraHeaders"]);
            let c = this._logger.create("exchangeCode");
            n || c.throw(new Error("A client_id is required")),
            t || c.throw(new Error("A redirect_uri is required")),
            s.code || c.throw(new Error("A code is required"));
            let l = new URLSearchParams({
                grant_type: e,
                redirect_uri: t
            });
            for (let[f,g] of Object.entries(s))
                g != null && l.set(f, g);
            let u;
            switch (this._settings.client_authentication) {
            case "client_secret_basic":
                if (!i)
                    throw c.throw(new Error("A client_secret is required")),
                    null;
                u = Zr.generateBasicAuth(n, i);
                break;
            case "client_secret_post":
                l.append("client_id", n),
                i && l.append("client_secret", i);
                break
            }
            let h = yield this._metadataService.getTokenEndpoint(!1);
            c.debug("got token endpoint");
            let d = yield this._jsonService.postForm(h, {
                body: l,
                basicAuth: u,
                timeoutInSeconds: this._settings.requestTimeoutInSeconds,
                initCredentials: this._settings.fetchRequestCredentials,
                extraHeaders: r
            });
            return c.debug("got response"),
            d
        })
    }
    exchangeCredentials(s) {
        return ue(this, null, function*() {
            var o = s
              , {grant_type: e="password", client_id: t=this._settings.client_id, client_secret: n=this._settings.client_secret, scope: i=this._settings.scope} = o
              , r = er(o, ["grant_type", "client_id", "client_secret", "scope"]);
            let a = this._logger.create("exchangeCredentials");
            t || a.throw(new Error("A client_id is required"));
            let c = new URLSearchParams({
                grant_type: e
            });
            this._settings.omitScopeWhenRequesting || c.set("scope", i);
            for (let[d,f] of Object.entries(r))
                f != null && c.set(d, f);
            let l;
            switch (this._settings.client_authentication) {
            case "client_secret_basic":
                if (!n)
                    throw a.throw(new Error("A client_secret is required")),
                    null;
                l = Zr.generateBasicAuth(t, n);
                break;
            case "client_secret_post":
                c.append("client_id", t),
                n && c.append("client_secret", n);
                break
            }
            let u = yield this._metadataService.getTokenEndpoint(!1);
            a.debug("got token endpoint");
            let h = yield this._jsonService.postForm(u, {
                body: c,
                basicAuth: l,
                timeoutInSeconds: this._settings.requestTimeoutInSeconds,
                initCredentials: this._settings.fetchRequestCredentials
            });
            return a.debug("got response"),
            h
        })
    }
    exchangeRefreshToken(o) {
        return ue(this, null, function*() {
            var a = o
              , {grant_type: e="refresh_token", client_id: t=this._settings.client_id, client_secret: n=this._settings.client_secret, timeoutInSeconds: i, extraHeaders: r} = a
              , s = er(a, ["grant_type", "client_id", "client_secret", "timeoutInSeconds", "extraHeaders"]);
            let c = this._logger.create("exchangeRefreshToken");
            t || c.throw(new Error("A client_id is required")),
            s.refresh_token || c.throw(new Error("A refresh_token is required"));
            let l = new URLSearchParams({
                grant_type: e
            });
            for (let[f,g] of Object.entries(s))
                Array.isArray(g) ? g.forEach(p => l.append(f, p)) : g != null && l.set(f, g);
            let u;
            switch (this._settings.client_authentication) {
            case "client_secret_basic":
                if (!n)
                    throw c.throw(new Error("A client_secret is required")),
                    null;
                u = Zr.generateBasicAuth(t, n);
                break;
            case "client_secret_post":
                l.append("client_id", t),
                n && l.append("client_secret", n);
                break
            }
            let h = yield this._metadataService.getTokenEndpoint(!1);
            c.debug("got token endpoint");
            let d = yield this._jsonService.postForm(h, {
                body: l,
                basicAuth: u,
                timeoutInSeconds: i,
                initCredentials: this._settings.fetchRequestCredentials,
                extraHeaders: r
            });
            return c.debug("got response"),
            d
        })
    }
    revoke(e) {
        return ue(this, null, function*() {
            var t;
            let n = this._logger.create("revoke");
            e.token || n.throw(new Error("A token is required"));
            let i = yield this._metadataService.getRevocationEndpoint(!1);
            n.debug(`got revocation endpoint, revoking ${(t = e.token_type_hint) != null ? t : "default token type"}`);
            let r = new URLSearchParams;
            for (let[s,o] of Object.entries(e))
                o != null && r.set(s, o);
            r.set("client_id", this._settings.client_id),
            this._settings.client_secret && r.set("client_secret", this._settings.client_secret),
            yield this._jsonService.postForm(i, {
                body: r,
                timeoutInSeconds: this._settings.requestTimeoutInSeconds
            }),
            n.debug("got response")
        })
    }
}
  , nz = class {
    constructor(e, t, n) {
        this._settings = e,
        this._metadataService = t,
        this._claimsService = n,
        this._logger = new Ht("ResponseValidator"),
        this._userInfoService = new tz(this._settings,this._metadataService),
        this._tokenClient = new ZE(this._settings,this._metadataService)
    }
    validateSigninResponse(e, t, n) {
        return ue(this, null, function*() {
            let i = this._logger.create("validateSigninResponse");
            this._processSigninState(e, t),
            i.debug("state processed"),
            yield this._processCode(e, t, n),
            i.debug("code processed"),
            e.isOpenId && this._validateIdTokenAttributes(e),
            i.debug("tokens validated"),
            yield this._processClaims(e, t?.skipUserInfo, e.isOpenId),
            i.debug("claims processed")
        })
    }
    validateCredentialsResponse(e, t) {
        return ue(this, null, function*() {
            let n = this._logger.create("validateCredentialsResponse");
            e.isOpenId && e.id_token && this._validateIdTokenAttributes(e),
            n.debug("tokens validated"),
            yield this._processClaims(e, t, e.isOpenId),
            n.debug("claims processed")
        })
    }
    validateRefreshResponse(e, t) {
        return ue(this, null, function*() {
            var n, i;
            let r = this._logger.create("validateRefreshResponse");
            e.userState = t.data,
            (n = e.session_state) != null || (e.session_state = t.session_state),
            (i = e.scope) != null || (e.scope = t.scope),
            e.isOpenId && e.id_token && (this._validateIdTokenAttributes(e, t.id_token),
            r.debug("ID Token validated")),
            e.id_token || (e.id_token = t.id_token,
            e.profile = t.profile);
            let s = e.isOpenId && !!e.id_token;
            yield this._processClaims(e, !1, s),
            r.debug("claims processed")
        })
    }
    validateSignoutResponse(e, t) {
        let n = this._logger.create("validateSignoutResponse");
        if (t.id !== e.state && n.throw(new Error("State does not match")),
        n.debug("state validated"),
        e.userState = t.data,
        e.error)
            throw n.warn("Response was error", e.error),
            new _0(e)
    }
    _processSigninState(e, t) {
        var n;
        let i = this._logger.create("_processSigninState");
        if (t.id !== e.state && i.throw(new Error("State does not match")),
        t.client_id || i.throw(new Error("No client_id on state")),
        t.authority || i.throw(new Error("No authority on state")),
        this._settings.authority !== t.authority && i.throw(new Error("authority mismatch on settings vs. signin state")),
        this._settings.client_id && this._settings.client_id !== t.client_id && i.throw(new Error("client_id mismatch on settings vs. signin state")),
        i.debug("state validated"),
        e.userState = t.data,
        e.url_state = t.url_state,
        (n = e.scope) != null || (e.scope = t.scope),
        e.error)
            throw i.warn("Response was error", e.error),
            new _0(e);
        t.code_verifier && !e.code && i.throw(new Error("Expected code in response"))
    }
    _processClaims(e, t=!1, n=!0) {
        return ue(this, null, function*() {
            let i = this._logger.create("_processClaims");
            if (e.profile = this._claimsService.filterProtocolClaims(e.profile),
            t || !this._settings.loadUserInfo || !e.access_token) {
                i.debug("not loading user info");
                return
            }
            i.debug("loading user info");
            let r = yield this._userInfoService.getClaims(e.access_token);
            i.debug("user info claims received from user info endpoint"),
            n && r.sub !== e.profile.sub && i.throw(new Error("subject from UserInfo response does not match subject in ID Token")),
            e.profile = this._claimsService.mergeClaims(e.profile, this._claimsService.filterProtocolClaims(r)),
            i.debug("user info claims received, updated profile:", e.profile)
        })
    }
    _processCode(e, t, n) {
        return ue(this, null, function*() {
            let i = this._logger.create("_processCode");
            if (e.code) {
                i.debug("Validating code");
                let r = yield this._tokenClient.exchangeCode(C({
                    client_id: t.client_id,
                    client_secret: t.client_secret,
                    code: e.code,
                    redirect_uri: t.redirect_uri,
                    code_verifier: t.code_verifier,
                    extraHeaders: n
                }, t.extraTokenParams));
                Object.assign(e, r)
            } else
                i.debug("No code to process")
        })
    }
    _validateIdTokenAttributes(e, t) {
        var n;
        let i = this._logger.create("_validateIdTokenAttributes");
        i.debug("decoding ID Token JWT");
        let r = U2.decode((n = e.id_token) != null ? n : "");
        if (r.sub || i.throw(new Error("ID Token is missing a subject claim")),
        t) {
            let s = U2.decode(t);
            r.sub !== s.sub && i.throw(new Error("sub in id_token does not match current sub")),
            r.auth_time && r.auth_time !== s.auth_time && i.throw(new Error("auth_time in id_token does not match original auth_time")),
            r.azp && r.azp !== s.azp && i.throw(new Error("azp in id_token does not match original azp")),
            !r.azp && s.azp && i.throw(new Error("azp not in id_token, but present in original id_token"))
        }
        e.profile = r
    }
}
  , H2 = class L9 {
    constructor(t) {
        this.id = t.id || Zr.generateUUIDv4(),
        this.data = t.data,
        t.created && t.created > 0 ? this.created = t.created : this.created = qa.getEpochTime(),
        this.request_type = t.request_type,
        this.url_state = t.url_state
    }
    toStorageString() {
        return new Ht("State").create("toStorageString"),
        JSON.stringify({
            id: this.id,
            data: this.data,
            created: this.created,
            request_type: this.request_type,
            url_state: this.url_state
        })
    }
    static fromStorageString(t) {
        return Ht.createStatic("State", "fromStorageString"),
        Promise.resolve(new L9(JSON.parse(t)))
    }
    static clearStaleState(t, n) {
        return ue(this, null, function*() {
            let i = Ht.createStatic("State", "clearStaleState")
              , r = qa.getEpochTime() - n
              , s = yield t.getAllKeys();
            i.debug("got keys", s);
            for (let o = 0; o < s.length; o++) {
                let a = s[o]
                  , c = yield t.get(a)
                  , l = !1;
                if (c)
                    try {
                        let u = yield L9.fromStorageString(c);
                        i.debug("got item from key:", a, u.created),
                        u.created <= r && (l = !0)
                    } catch (u) {
                        i.error("Error parsing state for key:", a, u),
                        l = !0
                    }
                else
                    i.debug("no item in storage for key:", a),
                    l = !0;
                l && (i.debug("removed item for key:", a),
                t.remove(a))
            }
        })
    }
}
  , eT = class B9 extends H2 {
    constructor(t) {
        super(t),
        this.code_verifier = t.code_verifier,
        this.code_challenge = t.code_challenge,
        this.authority = t.authority,
        this.client_id = t.client_id,
        this.redirect_uri = t.redirect_uri,
        this.scope = t.scope,
        this.client_secret = t.client_secret,
        this.extraTokenParams = t.extraTokenParams,
        this.response_mode = t.response_mode,
        this.skipUserInfo = t.skipUserInfo
    }
    static create(t) {
        return ue(this, null, function*() {
            let n = t.code_verifier === !0 ? Zr.generateCodeVerifier() : t.code_verifier || void 0
              , i = n ? yield Zr.generateCodeChallenge(n) : void 0;
            return new B9(ve(C({}, t), {
                code_verifier: n,
                code_challenge: i
            }))
        })
    }
    toStorageString() {
        return new Ht("SigninState").create("toStorageString"),
        JSON.stringify({
            id: this.id,
            data: this.data,
            created: this.created,
            request_type: this.request_type,
            url_state: this.url_state,
            code_verifier: this.code_verifier,
            authority: this.authority,
            client_id: this.client_id,
            redirect_uri: this.redirect_uri,
            scope: this.scope,
            client_secret: this.client_secret,
            extraTokenParams: this.extraTokenParams,
            response_mode: this.response_mode,
            skipUserInfo: this.skipUserInfo
        })
    }
    static fromStorageString(t) {
        Ht.createStatic("SigninState", "fromStorageString");
        let n = JSON.parse(t);
        return B9.create(n)
    }
}
  , tT = class nT {
    constructor(t) {
        this.url = t.url,
        this.state = t.state
    }
    static create(B) {
        return ue(this, null, function*() {
            var N = B
              , {url: t, authority: n, client_id: i, redirect_uri: r, response_type: s, scope: o, state_data: a, response_mode: c, request_type: l, client_secret: u, nonce: h, url_state: d, resource: f, skipUserInfo: g, extraQueryParams: p, extraTokenParams: v, disablePKCE: S, dpopJkt: x, omitScopeWhenRequesting: w} = N
              , k = er(N, ["url", "authority", "client_id", "redirect_uri", "response_type", "scope", "state_data", "response_mode", "request_type", "client_secret", "nonce", "url_state", "resource", "skipUserInfo", "extraQueryParams", "extraTokenParams", "disablePKCE", "dpopJkt", "omitScopeWhenRequesting"]);
            if (!t)
                throw this._logger.error("create: No url passed"),
                new Error("url");
            if (!i)
                throw this._logger.error("create: No client_id passed"),
                new Error("client_id");
            if (!r)
                throw this._logger.error("create: No redirect_uri passed"),
                new Error("redirect_uri");
            if (!s)
                throw this._logger.error("create: No response_type passed"),
                new Error("response_type");
            if (!o)
                throw this._logger.error("create: No scope passed"),
                new Error("scope");
            if (!n)
                throw this._logger.error("create: No authority passed"),
                new Error("authority");
            let E = yield eT.create({
                data: a,
                request_type: l,
                url_state: d,
                code_verifier: !S,
                client_id: i,
                authority: n,
                redirect_uri: r,
                response_mode: c,
                client_secret: u,
                scope: o,
                extraTokenParams: v,
                skipUserInfo: g
            })
              , F = new URL(t);
            F.searchParams.append("client_id", i),
            F.searchParams.append("redirect_uri", r),
            F.searchParams.append("response_type", s),
            w || F.searchParams.append("scope", o),
            h && F.searchParams.append("nonce", h),
            x && F.searchParams.append("dpop_jkt", x);
            let O = E.id;
            d && (O = `${O}${D9}${d}`),
            F.searchParams.append("state", O),
            E.code_challenge && (F.searchParams.append("code_challenge", E.code_challenge),
            F.searchParams.append("code_challenge_method", "S256")),
            f && (Array.isArray(f) ? f : [f]).forEach(X => F.searchParams.append("resource", X));
            for (let[V,X] of Object.entries(C(C({
                response_mode: c
            }, k), p)))
                X != null && F.searchParams.append(V, X.toString());
            return new nT({
                url: F.href,
                state: E
            })
        })
    }
}
;
tT._logger = new Ht("SigninRequest");
var iz = tT
  , rz = "openid"
  , A9 = class {
    constructor(e) {
        if (this.access_token = "",
        this.token_type = "",
        this.profile = {},
        this.state = e.get("state"),
        this.session_state = e.get("session_state"),
        this.state) {
            let t = decodeURIComponent(this.state).split(D9);
            this.state = t[0],
            t.length > 1 && (this.url_state = t.slice(1).join(D9))
        }
        this.error = e.get("error"),
        this.error_description = e.get("error_description"),
        this.error_uri = e.get("error_uri"),
        this.code = e.get("code")
    }
    get expires_in() {
        if (this.expires_at !== void 0)
            return this.expires_at - qa.getEpochTime()
    }
    set expires_in(e) {
        typeof e == "string" && (e = Number(e)),
        e !== void 0 && e >= 0 && (this.expires_at = Math.floor(e) + qa.getEpochTime())
    }
    get isOpenId() {
        var e;
        return ((e = this.scope) == null ? void 0 : e.split(" ").includes(rz)) || !!this.id_token
    }
}
  , sz = class {
    constructor({url: e, state_data: t, id_token_hint: n, post_logout_redirect_uri: i, extraQueryParams: r, request_type: s, client_id: o}) {
        if (this._logger = new Ht("SignoutRequest"),
        !e)
            throw this._logger.error("ctor: No url passed"),
            new Error("url");
        let a = new URL(e);
        n && a.searchParams.append("id_token_hint", n),
        o && a.searchParams.append("client_id", o),
        i && (a.searchParams.append("post_logout_redirect_uri", i),
        t && (this.state = new H2({
            data: t,
            request_type: s
        }),
        a.searchParams.append("state", this.state.id)));
        for (let[c,l] of Object.entries(C({}, r)))
            l != null && a.searchParams.append(c, l.toString());
        this.url = a.href
    }
}
  , oz = class {
    constructor(e) {
        this.state = e.get("state"),
        this.error = e.get("error"),
        this.error_description = e.get("error_description"),
        this.error_uri = e.get("error_uri")
    }
}
  , az = ["nbf", "jti", "auth_time", "nonce", "acr", "amr", "azp", "at_hash"]
  , cz = ["sub", "iss", "aud", "exp", "iat"]
  , lz = class {
    constructor(e) {
        this._settings = e,
        this._logger = new Ht("ClaimsService")
    }
    filterProtocolClaims(e) {
        let t = C({}, e);
        if (this._settings.filterProtocolClaims) {
            let n;
            Array.isArray(this._settings.filterProtocolClaims) ? n = this._settings.filterProtocolClaims : n = az;
            for (let i of n)
                cz.includes(i) || delete t[i]
        }
        return t
    }
    mergeClaims(e, t) {
        let n = C({}, e);
        for (let[i,r] of Object.entries(t))
            if (n[i] !== r)
                if (Array.isArray(n[i]) || Array.isArray(r))
                    if (this._settings.mergeClaimsStrategy.array == "replace")
                        n[i] = r;
                    else {
                        let s = Array.isArray(n[i]) ? n[i] : [n[i]];
                        for (let o of Array.isArray(r) ? r : [r])
                            s.includes(o) || s.push(o);
                        n[i] = s
                    }
                else
                    typeof n[i] == "object" && typeof r == "object" ? n[i] = this.mergeClaims(n[i], r) : n[i] = r;
        return n
    }
}
  , iT = class {
    constructor(e, t) {
        this.keys = e,
        this.nonce = t
    }
}
  , uz = class {
    constructor(e, t) {
        this._logger = new Ht("OidcClient"),
        this.settings = e instanceof F9 ? e : new F9(e),
        this.metadataService = t ?? new Yq(this.settings),
        this._claimsService = new lz(this.settings),
        this._validator = new nz(this.settings,this.metadataService,this._claimsService),
        this._tokenClient = new ZE(this.settings,this.metadataService)
    }
    createSigninRequest(E) {
        return ue(this, arguments, function*({state: e, request: t, request_uri: n, request_type: i, id_token_hint: r, login_hint: s, skipUserInfo: o, nonce: a, url_state: c, response_type: l=this.settings.response_type, scope: u=this.settings.scope, redirect_uri: h=this.settings.redirect_uri, prompt: d=this.settings.prompt, display: f=this.settings.display, max_age: g=this.settings.max_age, ui_locales: p=this.settings.ui_locales, acr_values: v=this.settings.acr_values, resource: S=this.settings.resource, response_mode: x=this.settings.response_mode, extraQueryParams: w=this.settings.extraQueryParams, extraTokenParams: k=this.settings.extraTokenParams, dpopJkt: B, omitScopeWhenRequesting: N=this.settings.omitScopeWhenRequesting}) {
            let F = this._logger.create("createSigninRequest");
            if (l !== "code")
                throw new Error("Only the Authorization Code flow (with PKCE) is supported");
            let O = yield this.metadataService.getAuthorizationEndpoint();
            F.debug("Received authorization endpoint", O);
            let V = yield iz.create({
                url: O,
                authority: this.settings.authority,
                client_id: this.settings.client_id,
                redirect_uri: h,
                response_type: l,
                scope: u,
                state_data: e,
                url_state: c,
                prompt: d,
                display: f,
                max_age: g,
                ui_locales: p,
                id_token_hint: r,
                login_hint: s,
                acr_values: v,
                dpopJkt: B,
                resource: S,
                request: t,
                request_uri: n,
                extraQueryParams: w,
                extraTokenParams: k,
                request_type: i,
                response_mode: x,
                client_secret: this.settings.client_secret,
                skipUserInfo: o,
                nonce: a,
                disablePKCE: this.settings.disablePKCE,
                omitScopeWhenRequesting: N
            });
            yield this.clearStaleState();
            let X = V.state;
            return yield this.settings.stateStore.set(X.id, X.toStorageString()),
            V
        })
    }
    readSigninResponseState(e, t=!1) {
        return ue(this, null, function*() {
            let n = this._logger.create("readSigninResponseState")
              , i = new A9(R9.readParams(e, this.settings.response_mode));
            if (!i.state)
                throw n.throw(new Error("No state in response")),
                null;
            let r = yield this.settings.stateStore[t ? "remove" : "get"](i.state);
            if (!r)
                throw n.throw(new Error("No matching state found in storage")),
                null;
            return {
                state: yield eT.fromStorageString(r),
                response: i
            }
        })
    }
    processSigninResponse(e, t) {
        return ue(this, null, function*() {
            let n = this._logger.create("processSigninResponse")
              , {state: i, response: r} = yield this.readSigninResponseState(e, !0);
            if (n.debug("received state from storage; validating response"),
            this.settings.dpop && this.settings.dpop.store) {
                let s = yield this.getDpopProof(this.settings.dpop.store);
                t = ve(C({}, t), {
                    DPoP: s
                })
            }
            try {
                yield this._validator.validateSigninResponse(r, i, t)
            } catch (s) {
                if (s instanceof N9 && this.settings.dpop) {
                    let o = yield this.getDpopProof(this.settings.dpop.store, s.nonce);
                    t.DPoP = o,
                    yield this._validator.validateSigninResponse(r, i, t)
                } else
                    throw s
            }
            return r
        })
    }
    getDpopProof(e, t) {
        return ue(this, null, function*() {
            let n, i;
            return (yield e.getAllKeys()).includes(this.settings.client_id) ? (i = yield e.get(this.settings.client_id),
            i.nonce !== t && t && (i.nonce = t,
            yield e.set(this.settings.client_id, i))) : (n = yield Zr.generateDPoPKeys(),
            i = new iT(n,t),
            yield e.set(this.settings.client_id, i)),
            yield Zr.generateDPoPProof({
                url: yield this.metadataService.getTokenEndpoint(!1),
                httpMethod: "POST",
                keyPair: i.keys,
                nonce: i.nonce
            })
        })
    }
    processResourceOwnerPasswordCredentials(r) {
        return ue(this, arguments, function*({username: e, password: t, skipUserInfo: n=!1, extraTokenParams: i={}}) {
            let s = yield this._tokenClient.exchangeCredentials(C({
                username: e,
                password: t
            }, i))
              , o = new A9(new URLSearchParams);
            return Object.assign(o, s),
            yield this._validator.validateCredentialsResponse(o, n),
            o
        })
    }
    useRefreshToken(o) {
        return ue(this, arguments, function*({state: e, redirect_uri: t, resource: n, timeoutInSeconds: i, extraHeaders: r, extraTokenParams: s}) {
            var a;
            let c = this._logger.create("useRefreshToken"), l;
            if (this.settings.refreshTokenAllowedScope === void 0)
                l = e.scope;
            else {
                let d = this.settings.refreshTokenAllowedScope.split(" ");
                l = (((a = e.scope) == null ? void 0 : a.split(" ")) || []).filter(g => d.includes(g)).join(" ")
            }
            if (this.settings.dpop && this.settings.dpop.store) {
                let d = yield this.getDpopProof(this.settings.dpop.store);
                r = ve(C({}, r), {
                    DPoP: d
                })
            }
            let u;
            try {
                u = yield this._tokenClient.exchangeRefreshToken(C({
                    refresh_token: e.refresh_token,
                    scope: l,
                    redirect_uri: t,
                    resource: n,
                    timeoutInSeconds: i,
                    extraHeaders: r
                }, s))
            } catch (d) {
                if (d instanceof N9 && this.settings.dpop)
                    r.DPoP = yield this.getDpopProof(this.settings.dpop.store, d.nonce),
                    u = yield this._tokenClient.exchangeRefreshToken(C({
                        refresh_token: e.refresh_token,
                        scope: l,
                        redirect_uri: t,
                        resource: n,
                        timeoutInSeconds: i,
                        extraHeaders: r
                    }, s));
                else
                    throw d
            }
            let h = new A9(new URLSearchParams);
            return Object.assign(h, u),
            c.debug("validating response", h),
            yield this._validator.validateRefreshResponse(h, ve(C({}, e), {
                scope: l
            })),
            h
        })
    }
    createSignoutRequest() {
        return ue(this, arguments, function*({state: e, id_token_hint: t, client_id: n, request_type: i, post_logout_redirect_uri: r=this.settings.post_logout_redirect_uri, extraQueryParams: s=this.settings.extraQueryParams}={}) {
            let o = this._logger.create("createSignoutRequest")
              , a = yield this.metadataService.getEndSessionEndpoint();
            if (!a)
                throw o.throw(new Error("No end session endpoint")),
                null;
            o.debug("Received end session endpoint", a),
            !n && r && !t && (n = this.settings.client_id);
            let c = new sz({
                url: a,
                id_token_hint: t,
                client_id: n,
                post_logout_redirect_uri: r,
                state_data: e,
                extraQueryParams: s,
                request_type: i
            });
            yield this.clearStaleState();
            let l = c.state;
            return l && (o.debug("Signout request has state to persist"),
            yield this.settings.stateStore.set(l.id, l.toStorageString())),
            c
        })
    }
    readSignoutResponseState(e, t=!1) {
        return ue(this, null, function*() {
            let n = this._logger.create("readSignoutResponseState")
              , i = new oz(R9.readParams(e, this.settings.response_mode));
            if (!i.state) {
                if (n.debug("No state in response"),
                i.error)
                    throw n.warn("Response was error:", i.error),
                    new _0(i);
                return {
                    state: void 0,
                    response: i
                }
            }
            let r = yield this.settings.stateStore[t ? "remove" : "get"](i.state);
            if (!r)
                throw n.throw(new Error("No matching state found in storage")),
                null;
            return {
                state: yield H2.fromStorageString(r),
                response: i
            }
        })
    }
    processSignoutResponse(e) {
        return ue(this, null, function*() {
            let t = this._logger.create("processSignoutResponse")
              , {state: n, response: i} = yield this.readSignoutResponseState(e, !0);
            return n ? (t.debug("Received state from storage; validating response"),
            this._validator.validateSignoutResponse(i, n)) : t.debug("No state from storage; skipping response validation"),
            i
        })
    }
    clearStaleState() {
        return this._logger.create("clearStaleState"),
        H2.clearStaleState(this.settings.stateStore, this.settings.staleStateAgeInSeconds)
    }
    revokeToken(e, t) {
        return ue(this, null, function*() {
            return this._logger.create("revokeToken"),
            yield this._tokenClient.revoke({
                token: e,
                token_type_hint: t
            })
        })
    }
}
  , hz = class {
    constructor(e) {
        this._userManager = e,
        this._logger = new Ht("SessionMonitor"),
        this._start = t => ue(this, null, function*() {
            let n = t.session_state;
            if (!n)
                return;
            let i = this._logger.create("_start");
            if (t.profile ? (this._sub = t.profile.sub,
            i.debug("session_state", n, ", sub", this._sub)) : (this._sub = void 0,
            i.debug("session_state", n, ", anonymous user")),
            this._checkSessionIFrame) {
                this._checkSessionIFrame.start(n);
                return
            }
            try {
                let r = yield this._userManager.metadataService.getCheckSessionIframe();
                if (r) {
                    i.debug("initializing check session iframe");
                    let s = this._userManager.settings.client_id
                      , o = this._userManager.settings.checkSessionIntervalInSeconds
                      , a = this._userManager.settings.stopCheckSessionOnError
                      , c = new Kq(this._callback,s,r,o,a);
                    yield c.load(),
                    this._checkSessionIFrame = c,
                    c.start(n)
                } else
                    i.warn("no check session iframe found in the metadata")
            } catch (r) {
                i.error("Error from getCheckSessionIframe:", r instanceof Error ? r.message : r)
            }
        }),
        this._stop = () => {
            let t = this._logger.create("_stop");
            if (this._sub = void 0,
            this._checkSessionIFrame && this._checkSessionIFrame.stop(),
            this._userManager.settings.monitorAnonymousSession) {
                let n = setInterval( () => ue(this, null, function*() {
                    clearInterval(n);
                    try {
                        let i = yield this._userManager.querySessionStatus();
                        if (i) {
                            let r = {
                                session_state: i.session_state,
                                profile: i.sub ? {
                                    sub: i.sub
                                } : null
                            };
                            this._start(r)
                        }
                    } catch (i) {
                        t.error("error from querySessionStatus", i instanceof Error ? i.message : i)
                    }
                }), 1e3)
            }
        }
        ,
        this._callback = () => ue(this, null, function*() {
            let t = this._logger.create("_callback");
            try {
                let n = yield this._userManager.querySessionStatus()
                  , i = !0;
                n && this._checkSessionIFrame ? n.sub === this._sub ? (i = !1,
                this._checkSessionIFrame.start(n.session_state),
                t.debug("same sub still logged in at OP, session state has changed, restarting check session iframe; session_state", n.session_state),
                yield this._userManager.events._raiseUserSessionChanged()) : t.debug("different subject signed into OP", n.sub) : t.debug("subject no longer signed into OP"),
                i ? this._sub ? yield this._userManager.events._raiseUserSignedOut() : yield this._userManager.events._raiseUserSignedIn() : t.debug("no change in session detected, no event to raise")
            } catch (n) {
                this._sub && (t.debug("Error calling queryCurrentSigninSession; raising signed out event", n),
                yield this._userManager.events._raiseUserSignedOut())
            }
        }),
        e || this._logger.throw(new Error("No user manager passed")),
        this._userManager.events.addUserLoaded(this._start),
        this._userManager.events.addUserUnloaded(this._stop),
        this._init().catch(t => {
            this._logger.error(t)
        }
        )
    }
    _init() {
        return ue(this, null, function*() {
            this._logger.create("_init");
            let e = yield this._userManager.getUser();
            if (e)
                this._start(e);
            else if (this._userManager.settings.monitorAnonymousSession) {
                let t = yield this._userManager.querySessionStatus();
                if (t) {
                    let n = {
                        session_state: t.session_state,
                        profile: t.sub ? {
                            sub: t.sub
                        } : null
                    };
                    this._start(n)
                }
            }
        })
    }
}
  , I9 = class rT {
    constructor(t) {
        var n;
        this.id_token = t.id_token,
        this.session_state = (n = t.session_state) != null ? n : null,
        this.access_token = t.access_token,
        this.refresh_token = t.refresh_token,
        this.token_type = t.token_type,
        this.scope = t.scope,
        this.profile = t.profile,
        this.expires_at = t.expires_at,
        this.state = t.userState,
        this.url_state = t.url_state
    }
    get expires_in() {
        if (this.expires_at !== void 0)
            return this.expires_at - qa.getEpochTime()
    }
    set expires_in(t) {
        t !== void 0 && (this.expires_at = Math.floor(t) + qa.getEpochTime())
    }
    get expired() {
        let t = this.expires_in;
        if (t !== void 0)
            return t <= 0
    }
    get scopes() {
        var t, n;
        return (n = (t = this.scope) == null ? void 0 : t.split(" ")) != null ? n : []
    }
    toStorageString() {
        return new Ht("User").create("toStorageString"),
        JSON.stringify({
            id_token: this.id_token,
            session_state: this.session_state,
            access_token: this.access_token,
            refresh_token: this.refresh_token,
            token_type: this.token_type,
            scope: this.scope,
            profile: this.profile,
            expires_at: this.expires_at
        })
    }
    static fromStorageString(t) {
        return Ht.createStatic("User", "fromStorageString"),
        new rT(JSON.parse(t))
    }
}
  , KE = "oidc-client"
  , sT = class {
    constructor() {
        this._abort = new Yc("Window navigation aborted"),
        this._disposeHandlers = new Set,
        this._window = null
    }
    navigate(e) {
        return ue(this, null, function*() {
            let t = this._logger.create("navigate");
            if (!this._window)
                throw new Error("Attempted to navigate on a disposed window");
            t.debug("setting URL in window"),
            this._window.location.replace(e.url);
            let {url: n, keepOpen: i} = yield new Promise( (r, s) => {
                let o = a => {
                    var c;
                    let l = a.data
                      , u = (c = e.scriptOrigin) != null ? c : window.location.origin;
                    if (!(a.origin !== u || l?.source !== KE)) {
                        try {
                            let h = R9.readParams(l.url, e.response_mode).get("state");
                            if (h || t.warn("no state found in response url"),
                            a.source !== this._window && h !== e.state)
                                return
                        } catch {
                            this._dispose(),
                            s(new Error("Invalid response from window"))
                        }
                        r(l)
                    }
                }
                ;
                window.addEventListener("message", o, !1),
                this._disposeHandlers.add( () => window.removeEventListener("message", o, !1)),
                this._disposeHandlers.add(this._abort.addHandler(a => {
                    this._dispose(),
                    s(a)
                }
                ))
            }
            );
            return t.debug("got response from window"),
            this._dispose(),
            i || this.close(),
            {
                url: n
            }
        })
    }
    _dispose() {
        this._logger.create("_dispose");
        for (let e of this._disposeHandlers)
            e();
        this._disposeHandlers.clear()
    }
    static _notifyParent(e, t, n=!1, i=window.location.origin) {
        e.postMessage({
            source: KE,
            url: t,
            keepOpen: n
        }, i)
    }
}
  , oT = {
    location: !1,
    toolbar: !1,
    height: 640,
    closePopupWindowAfterInSeconds: -1
}
  , aT = "_blank"
  , dz = 60
  , fz = 2
  , cT = 10
  , pz = class extends F9 {
    constructor(e) {
        let {popup_redirect_uri: t=e.redirect_uri, popup_post_logout_redirect_uri: n=e.post_logout_redirect_uri, popupWindowFeatures: i=oT, popupWindowTarget: r=aT, redirectMethod: s="assign", redirectTarget: o="self", iframeNotifyParentOrigin: a=e.iframeNotifyParentOrigin, iframeScriptOrigin: c=e.iframeScriptOrigin, requestTimeoutInSeconds: l, silent_redirect_uri: u=e.redirect_uri, silentRequestTimeoutInSeconds: h, automaticSilentRenew: d=!0, validateSubOnSilentRenew: f=!0, includeIdTokenInSilentRenew: g=!1, monitorSession: p=!1, monitorAnonymousSession: v=!1, checkSessionIntervalInSeconds: S=fz, query_status_response_type: x="code", stopCheckSessionOnError: w=!0, revokeTokenTypes: k=["access_token", "refresh_token"], revokeTokensOnSignout: B=!1, includeIdTokenInSilentSignout: N=!1, accessTokenExpiringNotificationTimeInSeconds: E=dz, userStore: F} = e;
        if (super(e),
        this.popup_redirect_uri = t,
        this.popup_post_logout_redirect_uri = n,
        this.popupWindowFeatures = i,
        this.popupWindowTarget = r,
        this.redirectMethod = s,
        this.redirectTarget = o,
        this.iframeNotifyParentOrigin = a,
        this.iframeScriptOrigin = c,
        this.silent_redirect_uri = u,
        this.silentRequestTimeoutInSeconds = h || l || cT,
        this.automaticSilentRenew = d,
        this.validateSubOnSilentRenew = f,
        this.includeIdTokenInSilentRenew = g,
        this.monitorSession = p,
        this.monitorAnonymousSession = v,
        this.checkSessionIntervalInSeconds = S,
        this.stopCheckSessionOnError = w,
        this.query_status_response_type = x,
        this.revokeTokenTypes = k,
        this.revokeTokensOnSignout = B,
        this.includeIdTokenInSilentSignout = N,
        this.accessTokenExpiringNotificationTimeInSeconds = E,
        F)
            this.userStore = F;
        else {
            let O = typeof window < "u" ? window.sessionStorage : new JE;
            this.userStore = new G2({
                store: O
            })
        }
    }
}
  , YE = class U9 extends sT {
    constructor({silentRequestTimeoutInSeconds: t=cT}) {
        super(),
        this._logger = new Ht("IFrameWindow"),
        this._timeoutInSeconds = t,
        this._frame = U9.createHiddenIframe(),
        this._window = this._frame.contentWindow
    }
    static createHiddenIframe() {
        let t = window.document.createElement("iframe");
        return t.style.visibility = "hidden",
        t.style.position = "fixed",
        t.style.left = "-1000px",
        t.style.top = "0",
        t.width = "0",
        t.height = "0",
        window.document.body.appendChild(t),
        t
    }
    navigate(t) {
        return ue(this, null, function*() {
            this._logger.debug("navigate: Using timeout of:", this._timeoutInSeconds);
            let n = setTimeout( () => void this._abort.raise(new H9("IFrame timed out without a response")), this._timeoutInSeconds * 1e3);
            return this._disposeHandlers.add( () => clearTimeout(n)),
            yield Oh(U9.prototype, this, "navigate").call(this, t)
        })
    }
    close() {
        var t;
        this._frame && (this._frame.parentNode && (this._frame.addEventListener("load", n => {
            var i;
            let r = n.target;
            (i = r.parentNode) == null || i.removeChild(r),
            this._abort.raise(new Error("IFrame removed from DOM"))
        }
        , !0),
        (t = this._frame.contentWindow) == null || t.location.replace("about:blank")),
        this._frame = null),
        this._window = null
    }
    static notifyParent(t, n) {
        return super._notifyParent(window.parent, t, !1, n)
    }
}
  , gz = class {
    constructor(e) {
        this._settings = e,
        this._logger = new Ht("IFrameNavigator")
    }
    prepare(t) {
        return ue(this, arguments, function*({silentRequestTimeoutInSeconds: e=this._settings.silentRequestTimeoutInSeconds}) {
            return new YE({
                silentRequestTimeoutInSeconds: e
            })
        })
    }
    callback(e) {
        return ue(this, null, function*() {
            this._logger.create("callback"),
            YE.notifyParent(e, this._settings.iframeNotifyParentOrigin)
        })
    }
}
  , mz = 500
  , vz = 1e3
  , QE = class e extends sT {
    constructor({popupWindowTarget: t=aT, popupWindowFeatures: n={}, popupSignal: i}) {
        super(),
        this._logger = new Ht("PopupWindow");
        let r = XE.center(C(C({}, oT), n));
        this._window = window.open(void 0, t, XE.serialize(r)),
        i && i.addEventListener("abort", () => {
            var s;
            this._abort.raise(new Error((s = i.reason) != null ? s : "Popup aborted"))
        }
        ),
        n.closePopupWindowAfterInSeconds && n.closePopupWindowAfterInSeconds > 0 && setTimeout( () => {
            if (!this._window || typeof this._window.closed != "boolean" || this._window.closed) {
                this._abort.raise(new Error("Popup blocked by user"));
                return
            }
            this.close()
        }
        , n.closePopupWindowAfterInSeconds * vz)
    }
    navigate(t) {
        return ue(this, null, function*() {
            var n;
            (n = this._window) == null || n.focus();
            let i = setInterval( () => {
                (!this._window || this._window.closed) && this._abort.raise(new Error("Popup closed by user"))
            }
            , mz);
            return this._disposeHandlers.add( () => clearInterval(i)),
            yield Oh(e.prototype, this, "navigate").call(this, t)
        })
    }
    close() {
        this._window && (this._window.closed || (this._window.close(),
        this._abort.raise(new Error("Popup closed")))),
        this._window = null
    }
    static notifyOpener(t, n) {
        if (!window.opener)
            throw new Error("No window.opener. Can't complete notification.");
        return super._notifyParent(window.opener, t, n)
    }
}
  , _z = class {
    constructor(e) {
        this._settings = e,
        this._logger = new Ht("PopupNavigator")
    }
    prepare(i) {
        return ue(this, arguments, function*({popupWindowFeatures: e=this._settings.popupWindowFeatures, popupWindowTarget: t=this._settings.popupWindowTarget, popupSignal: n}) {
            return new QE({
                popupWindowFeatures: e,
                popupWindowTarget: t,
                popupSignal: n
            })
        })
    }
    callback(n, i) {
        return ue(this, arguments, function*(e, {keepOpen: t=!1}) {
            this._logger.create("callback"),
            QE.notifyOpener(e, t)
        })
    }
}
  , yz = class {
    constructor(e) {
        this._settings = e,
        this._logger = new Ht("RedirectNavigator")
    }
    prepare(n) {
        return ue(this, arguments, function*({redirectMethod: e=this._settings.redirectMethod, redirectTarget: t=this._settings.redirectTarget}) {
            var i;
            this._logger.create("prepare");
            let r = window.self;
            t === "top" && (r = (i = window.top) != null ? i : window.self);
            let s = r.location[e].bind(r.location), o;
            return {
                navigate: a => ue(this, null, function*() {
                    this._logger.create("navigate");
                    let c = new Promise( (l, u) => {
                        o = u
                    }
                    );
                    return s(a.url),
                    yield c
                }),
                close: () => {
                    this._logger.create("close"),
                    o?.(new Error("Redirect aborted")),
                    r.stop()
                }
            }
        })
    }
    callback() {
        return ue(this, null, function*() {})
    }
}
  , Sz = class e extends Xq {
    constructor(t) {
        super({
            expiringNotificationTimeInSeconds: t.accessTokenExpiringNotificationTimeInSeconds
        }),
        this._logger = new Ht("UserManagerEvents"),
        this._userLoaded = new Yc("User loaded"),
        this._userUnloaded = new Yc("User unloaded"),
        this._silentRenewError = new Yc("Silent renew error"),
        this._userSignedIn = new Yc("User signed in"),
        this._userSignedOut = new Yc("User signed out"),
        this._userSessionChanged = new Yc("User session changed")
    }
    load(t, n=!0) {
        return ue(this, null, function*() {
            Oh(e.prototype, this, "load").call(this, t),
            n && (yield this._userLoaded.raise(t))
        })
    }
    unload() {
        return ue(this, null, function*() {
            Oh(e.prototype, this, "unload").call(this),
            yield this._userUnloaded.raise()
        })
    }
    addUserLoaded(t) {
        return this._userLoaded.addHandler(t)
    }
    removeUserLoaded(t) {
        return this._userLoaded.removeHandler(t)
    }
    addUserUnloaded(t) {
        return this._userUnloaded.addHandler(t)
    }
    removeUserUnloaded(t) {
        return this._userUnloaded.removeHandler(t)
    }
    addSilentRenewError(t) {
        return this._silentRenewError.addHandler(t)
    }
    removeSilentRenewError(t) {
        return this._silentRenewError.removeHandler(t)
    }
    _raiseSilentRenewError(t) {
        return ue(this, null, function*() {
            yield this._silentRenewError.raise(t)
        })
    }
    addUserSignedIn(t) {
        return this._userSignedIn.addHandler(t)
    }
    removeUserSignedIn(t) {
        this._userSignedIn.removeHandler(t)
    }
    _raiseUserSignedIn() {
        return ue(this, null, function*() {
            yield this._userSignedIn.raise()
        })
    }
    addUserSignedOut(t) {
        return this._userSignedOut.addHandler(t)
    }
    removeUserSignedOut(t) {
        this._userSignedOut.removeHandler(t)
    }
    _raiseUserSignedOut() {
        return ue(this, null, function*() {
            yield this._userSignedOut.raise()
        })
    }
    addUserSessionChanged(t) {
        return this._userSessionChanged.addHandler(t)
    }
    removeUserSessionChanged(t) {
        this._userSessionChanged.removeHandler(t)
    }
    _raiseUserSessionChanged() {
        return ue(this, null, function*() {
            yield this._userSessionChanged.raise()
        })
    }
}
  , bz = class {
    constructor(e) {
        this._userManager = e,
        this._logger = new Ht("SilentRenewService"),
        this._isStarted = !1,
        this._retryTimer = new qa("Retry Silent Renew"),
        this._tokenExpiring = () => ue(this, null, function*() {
            let t = this._logger.create("_tokenExpiring");
            try {
                yield this._userManager.signinSilent(),
                t.debug("silent token renewal successful")
            } catch (n) {
                if (n instanceof H9) {
                    t.warn("ErrorTimeout from signinSilent:", n, "retry in 5s"),
                    this._retryTimer.init(5);
                    return
                }
                t.error("Error from signinSilent:", n),
                yield this._userManager.events._raiseSilentRenewError(n)
            }
        })
    }
    start() {
        return ue(this, null, function*() {
            let e = this._logger.create("start");
            if (!this._isStarted) {
                this._isStarted = !0,
                this._userManager.events.addAccessTokenExpiring(this._tokenExpiring),
                this._retryTimer.addHandler(this._tokenExpiring);
                try {
                    yield this._userManager.getUser()
                } catch (t) {
                    e.error("getUser error", t)
                }
            }
        })
    }
    stop() {
        this._isStarted && (this._retryTimer.cancel(),
        this._retryTimer.removeHandler(this._tokenExpiring),
        this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring),
        this._isStarted = !1)
    }
}
  , xz = class {
    constructor(e) {
        this.refresh_token = e.refresh_token,
        this.id_token = e.id_token,
        this.session_state = e.session_state,
        this.scope = e.scope,
        this.profile = e.profile,
        this.data = e.state
    }
}
  , lT = class {
    constructor(e, t, n, i) {
        this._logger = new Ht("UserManager"),
        this.settings = new pz(e),
        this._client = new uz(e),
        this._redirectNavigator = t ?? new yz(this.settings),
        this._popupNavigator = n ?? new _z(this.settings),
        this._iframeNavigator = i ?? new gz(this.settings),
        this._events = new Sz(this.settings),
        this._silentRenewService = new bz(this),
        this.settings.automaticSilentRenew && this.startSilentRenew(),
        this._sessionMonitor = null,
        this.settings.monitorSession && (this._sessionMonitor = new hz(this))
    }
    get events() {
        return this._events
    }
    get metadataService() {
        return this._client.metadataService
    }
    getUser() {
        return ue(this, null, function*() {
            let e = this._logger.create("getUser")
              , t = yield this._loadUser();
            return t ? (e.info("user loaded"),
            yield this._events.load(t, !1),
            t) : (e.info("user not found in storage"),
            null)
        })
    }
    removeUser() {
        return ue(this, null, function*() {
            let e = this._logger.create("removeUser");
            yield this.storeUser(null),
            e.info("user removed from storage"),
            yield this._events.unload()
        })
    }
    signinRedirect() {
        return ue(this, arguments, function*(e={}) {
            var t;
            this._logger.create("signinRedirect");
            let o = e, {redirectMethod: n} = o, i = er(o, ["redirectMethod"]), r;
            (t = this.settings.dpop) != null && t.bind_authorization_code && (r = yield this.generateDPoPJkt(this.settings.dpop));
            let s = yield this._redirectNavigator.prepare({
                redirectMethod: n
            });
            yield this._signinStart(C({
                request_type: "si:r",
                dpopJkt: r
            }, i), s)
        })
    }
    signinRedirectCallback() {
        return ue(this, arguments, function*(e=window.location.href) {
            let t = this._logger.create("signinRedirectCallback")
              , n = yield this._signinEnd(e);
            return n.profile && n.profile.sub ? t.info("success, signed in subject", n.profile.sub) : t.info("no subject"),
            n
        })
    }
    signinResourceOwnerCredentials(i) {
        return ue(this, arguments, function*({username: e, password: t, skipUserInfo: n=!1}) {
            let r = this._logger.create("signinResourceOwnerCredential")
              , s = yield this._client.processResourceOwnerPasswordCredentials({
                username: e,
                password: t,
                skipUserInfo: n,
                extraTokenParams: this.settings.extraTokenParams
            });
            r.debug("got signin response");
            let o = yield this._buildUser(s);
            return o.profile && o.profile.sub ? r.info("success, signed in subject", o.profile.sub) : r.info("no subject"),
            o
        })
    }
    signinPopup() {
        return ue(this, arguments, function*(e={}) {
            var t;
            let n = this._logger.create("signinPopup"), i;
            (t = this.settings.dpop) != null && t.bind_authorization_code && (i = yield this.generateDPoPJkt(this.settings.dpop));
            let h = e
              , {popupWindowFeatures: r, popupWindowTarget: s, popupSignal: o} = h
              , a = er(h, ["popupWindowFeatures", "popupWindowTarget", "popupSignal"])
              , c = this.settings.popup_redirect_uri;
            c || n.throw(new Error("No popup_redirect_uri configured"));
            let l = yield this._popupNavigator.prepare({
                popupWindowFeatures: r,
                popupWindowTarget: s,
                popupSignal: o
            })
              , u = yield this._signin(C({
                request_type: "si:p",
                redirect_uri: c,
                display: "popup",
                dpopJkt: i
            }, a), l);
            return u && (u.profile && u.profile.sub ? n.info("success, signed in subject", u.profile.sub) : n.info("no subject")),
            u
        })
    }
    signinPopupCallback() {
        return ue(this, arguments, function*(e=window.location.href, t=!1) {
            let n = this._logger.create("signinPopupCallback");
            yield this._popupNavigator.callback(e, {
                keepOpen: t
            }),
            n.info("success")
        })
    }
    signinSilent() {
        return ue(this, arguments, function*(e={}) {
            var t, n;
            let i = this._logger.create("signinSilent")
              , h = e
              , {silentRequestTimeoutInSeconds: r} = h
              , s = er(h, ["silentRequestTimeoutInSeconds"])
              , o = yield this._loadUser();
            if (o?.refresh_token) {
                i.debug("using refresh token");
                let d = new xz(o);
                return yield this._useRefreshToken({
                    state: d,
                    redirect_uri: s.redirect_uri,
                    resource: s.resource,
                    extraTokenParams: s.extraTokenParams,
                    timeoutInSeconds: r
                })
            }
            let a;
            (t = this.settings.dpop) != null && t.bind_authorization_code && (a = yield this.generateDPoPJkt(this.settings.dpop));
            let c = this.settings.silent_redirect_uri;
            c || i.throw(new Error("No silent_redirect_uri configured"));
            let l;
            o && this.settings.validateSubOnSilentRenew && (i.debug("subject prior to silent renew:", o.profile.sub),
            l = o.profile.sub);
            let u = yield this._iframeNavigator.prepare({
                silentRequestTimeoutInSeconds: r
            });
            return o = yield this._signin(C({
                request_type: "si:s",
                redirect_uri: c,
                prompt: "none",
                id_token_hint: this.settings.includeIdTokenInSilentRenew ? o?.id_token : void 0,
                dpopJkt: a
            }, s), u, l),
            o && ((n = o.profile) != null && n.sub ? i.info("success, signed in subject", o.profile.sub) : i.info("no subject")),
            o
        })
    }
    _useRefreshToken(e) {
        return ue(this, null, function*() {
            let t = yield this._client.useRefreshToken(C({
                timeoutInSeconds: this.settings.silentRequestTimeoutInSeconds
            }, e))
              , n = new I9(C(C({}, e.state), t));
            return yield this.storeUser(n),
            yield this._events.load(n),
            n
        })
    }
    signinSilentCallback() {
        return ue(this, arguments, function*(e=window.location.href) {
            let t = this._logger.create("signinSilentCallback");
            yield this._iframeNavigator.callback(e),
            t.info("success")
        })
    }
    signinCallback() {
        return ue(this, arguments, function*(e=window.location.href) {
            let {state: t} = yield this._client.readSigninResponseState(e);
            switch (t.request_type) {
            case "si:r":
                return yield this.signinRedirectCallback(e);
            case "si:p":
                yield this.signinPopupCallback(e);
                break;
            case "si:s":
                yield this.signinSilentCallback(e);
                break;
            default:
                throw new Error("invalid response_type in state")
            }
        })
    }
    signoutCallback() {
        return ue(this, arguments, function*(e=window.location.href, t=!1) {
            let {state: n} = yield this._client.readSignoutResponseState(e);
            if (n)
                switch (n.request_type) {
                case "so:r":
                    return yield this.signoutRedirectCallback(e);
                case "so:p":
                    yield this.signoutPopupCallback(e, t);
                    break;
                case "so:s":
                    yield this.signoutSilentCallback(e);
                    break;
                default:
                    throw new Error("invalid response_type in state")
                }
        })
    }
    querySessionStatus() {
        return ue(this, arguments, function*(e={}) {
            let t = this._logger.create("querySessionStatus")
              , c = e
              , {silentRequestTimeoutInSeconds: n} = c
              , i = er(c, ["silentRequestTimeoutInSeconds"])
              , r = this.settings.silent_redirect_uri;
            r || t.throw(new Error("No silent_redirect_uri configured"));
            let s = yield this._loadUser()
              , o = yield this._iframeNavigator.prepare({
                silentRequestTimeoutInSeconds: n
            })
              , a = yield this._signinStart(C({
                request_type: "si:s",
                redirect_uri: r,
                prompt: "none",
                id_token_hint: this.settings.includeIdTokenInSilentRenew ? s?.id_token : void 0,
                response_type: this.settings.query_status_response_type,
                scope: "openid",
                skipUserInfo: !0
            }, i), o);
            try {
                let l = {}
                  , u = yield this._client.processSigninResponse(a.url, l);
                return t.debug("got signin response"),
                u.session_state && u.profile.sub ? (t.info("success for subject", u.profile.sub),
                {
                    session_state: u.session_state,
                    sub: u.profile.sub
                }) : (t.info("success, user not authenticated"),
                null)
            } catch (l) {
                if (this.settings.monitorAnonymousSession && l instanceof _0)
                    switch (l.error) {
                    case "login_required":
                    case "consent_required":
                    case "interaction_required":
                    case "account_selection_required":
                        return t.info("success for anonymous user"),
                        {
                            session_state: l.session_state
                        }
                    }
                throw l
            }
        })
    }
    _signin(e, t, n) {
        return ue(this, null, function*() {
            let i = yield this._signinStart(e, t);
            return yield this._signinEnd(i.url, n)
        })
    }
    _signinStart(e, t) {
        return ue(this, null, function*() {
            let n = this._logger.create("_signinStart");
            try {
                let i = yield this._client.createSigninRequest(e);
                return n.debug("got signin request"),
                yield t.navigate({
                    url: i.url,
                    state: i.state.id,
                    response_mode: i.state.response_mode,
                    scriptOrigin: this.settings.iframeScriptOrigin
                })
            } catch (i) {
                throw n.debug("error after preparing navigator, closing navigator window"),
                t.close(),
                i
            }
        })
    }
    _signinEnd(e, t) {
        return ue(this, null, function*() {
            let n = this._logger.create("_signinEnd")
              , i = {}
              , r = yield this._client.processSigninResponse(e, i);
            return n.debug("got signin response"),
            yield this._buildUser(r, t)
        })
    }
    _buildUser(e, t) {
        return ue(this, null, function*() {
            let n = this._logger.create("_buildUser")
              , i = new I9(e);
            if (t) {
                if (t !== i.profile.sub)
                    throw n.debug("current user does not match user returned from signin. sub from signin:", i.profile.sub),
                    new _0(ve(C({}, e), {
                        error: "login_required"
                    }));
                n.debug("current user matches user returned from signin")
            }
            return yield this.storeUser(i),
            n.debug("user stored"),
            yield this._events.load(i),
            i
        })
    }
    signoutRedirect() {
        return ue(this, arguments, function*(e={}) {
            let t = this._logger.create("signoutRedirect")
              , s = e
              , {redirectMethod: n} = s
              , i = er(s, ["redirectMethod"])
              , r = yield this._redirectNavigator.prepare({
                redirectMethod: n
            });
            yield this._signoutStart(C({
                request_type: "so:r",
                post_logout_redirect_uri: this.settings.post_logout_redirect_uri
            }, i), r),
            t.info("success")
        })
    }
    signoutRedirectCallback() {
        return ue(this, arguments, function*(e=window.location.href) {
            let t = this._logger.create("signoutRedirectCallback")
              , n = yield this._signoutEnd(e);
            return t.info("success"),
            n
        })
    }
    signoutPopup() {
        return ue(this, arguments, function*(e={}) {
            let t = this._logger.create("signoutPopup")
              , c = e
              , {popupWindowFeatures: n, popupWindowTarget: i, popupSignal: r} = c
              , s = er(c, ["popupWindowFeatures", "popupWindowTarget", "popupSignal"])
              , o = this.settings.popup_post_logout_redirect_uri
              , a = yield this._popupNavigator.prepare({
                popupWindowFeatures: n,
                popupWindowTarget: i,
                popupSignal: r
            });
            yield this._signout(C({
                request_type: "so:p",
                post_logout_redirect_uri: o,
                state: o == null ? void 0 : {}
            }, s), a),
            t.info("success")
        })
    }
    signoutPopupCallback() {
        return ue(this, arguments, function*(e=window.location.href, t=!1) {
            let n = this._logger.create("signoutPopupCallback");
            yield this._popupNavigator.callback(e, {
                keepOpen: t
            }),
            n.info("success")
        })
    }
    _signout(e, t) {
        return ue(this, null, function*() {
            let n = yield this._signoutStart(e, t);
            return yield this._signoutEnd(n.url)
        })
    }
    _signoutStart() {
        return ue(this, arguments, function*(e={}, t) {
            var n;
            let i = this._logger.create("_signoutStart");
            try {
                let r = yield this._loadUser();
                i.debug("loaded current user from storage"),
                this.settings.revokeTokensOnSignout && (yield this._revokeInternal(r));
                let s = e.id_token_hint || r && r.id_token;
                s && (i.debug("setting id_token_hint in signout request"),
                e.id_token_hint = s),
                yield this.removeUser(),
                i.debug("user removed, creating signout request");
                let o = yield this._client.createSignoutRequest(e);
                return i.debug("got signout request"),
                yield t.navigate({
                    url: o.url,
                    state: (n = o.state) == null ? void 0 : n.id,
                    scriptOrigin: this.settings.iframeScriptOrigin
                })
            } catch (r) {
                throw i.debug("error after preparing navigator, closing navigator window"),
                t.close(),
                r
            }
        })
    }
    _signoutEnd(e) {
        return ue(this, null, function*() {
            let t = this._logger.create("_signoutEnd")
              , n = yield this._client.processSignoutResponse(e);
            return t.debug("got signout response"),
            n
        })
    }
    signoutSilent() {
        return ue(this, arguments, function*(e={}) {
            var t;
            let n = this._logger.create("signoutSilent")
              , c = e
              , {silentRequestTimeoutInSeconds: i} = c
              , r = er(c, ["silentRequestTimeoutInSeconds"])
              , s = this.settings.includeIdTokenInSilentSignout ? (t = yield this._loadUser()) == null ? void 0 : t.id_token : void 0
              , o = this.settings.popup_post_logout_redirect_uri
              , a = yield this._iframeNavigator.prepare({
                silentRequestTimeoutInSeconds: i
            });
            yield this._signout(C({
                request_type: "so:s",
                post_logout_redirect_uri: o,
                id_token_hint: s
            }, r), a),
            n.info("success")
        })
    }
    signoutSilentCallback() {
        return ue(this, arguments, function*(e=window.location.href) {
            let t = this._logger.create("signoutSilentCallback");
            yield this._iframeNavigator.callback(e),
            t.info("success")
        })
    }
    revokeTokens(e) {
        return ue(this, null, function*() {
            let t = yield this._loadUser();
            yield this._revokeInternal(t, e)
        })
    }
    _revokeInternal(n) {
        return ue(this, arguments, function*(e, t=this.settings.revokeTokenTypes) {
            let i = this._logger.create("_revokeInternal");
            if (!e)
                return;
            let r = t.filter(s => typeof e[s] == "string");
            if (!r.length) {
                i.debug("no need to revoke due to no token(s)");
                return
            }
            for (let s of r)
                yield this._client.revokeToken(e[s], s),
                i.info(`${s} revoked successfully`),
                s !== "access_token" && (e[s] = null);
            yield this.storeUser(e),
            i.debug("user stored"),
            yield this._events.load(e)
        })
    }
    startSilentRenew() {
        this._logger.create("startSilentRenew"),
        this._silentRenewService.start()
    }
    stopSilentRenew() {
        this._silentRenewService.stop()
    }
    get _userStoreKey() {
        return `user:${this.settings.authority}:${this.settings.client_id}`
    }
    _loadUser() {
        return ue(this, null, function*() {
            let e = this._logger.create("_loadUser")
              , t = yield this.settings.userStore.get(this._userStoreKey);
            return t ? (e.debug("user storageString loaded"),
            I9.fromStorageString(t)) : (e.debug("no user storageString"),
            null)
        })
    }
    storeUser(e) {
        return ue(this, null, function*() {
            let t = this._logger.create("storeUser");
            if (e) {
                t.debug("storing user");
                let n = e.toStorageString();
                yield this.settings.userStore.set(this._userStoreKey, n)
            } else
                this._logger.debug("removing user"),
                yield this.settings.userStore.remove(this._userStoreKey),
                this.settings.dpop && (yield this.settings.dpop.store.remove(this.settings.client_id))
        })
    }
    clearStaleState() {
        return ue(this, null, function*() {
            yield this._client.clearStaleState()
        })
    }
    dpopProof(e, t, n, i) {
        return ue(this, null, function*() {
            var r, s;
            let o = yield(s = (r = this.settings.dpop) == null ? void 0 : r.store) == null ? void 0 : s.get(this.settings.client_id);
            if (o)
                return yield Zr.generateDPoPProof({
                    url: e,
                    accessToken: t?.access_token,
                    httpMethod: n,
                    keyPair: o.keys,
                    nonce: i
                })
        })
    }
    generateDPoPJkt(e) {
        return ue(this, null, function*() {
            let t = yield e.store.get(this.settings.client_id);
            if (!t) {
                let n = yield Zr.generateDPoPKeys();
                t = new iT(n),
                yield e.store.set(this.settings.client_id, t)
            }
            return yield Zr.generateDPoPJkt(t.keys)
        })
    }
}
;
var uT = e => ({
    authority: e.oidcSettings.authority,
    client_id: e.oidcSettings.client_id,
    redirect_uri: e.oidcSettings.redirect_uri,
    post_logout_redirect_uri: e.oidcSettings.post_logout_redirect_uri,
    response_type: e.oidcSettings.response_type,
    scope: e.oidcSettings.scope,
    loadUserInfo: e.oidcSettings.loadUserInfo,
    automaticSilentRenew: !1,
    monitorSession: !1,
    userStore: new G2({
        store: window.sessionStorage
    })
});
var V9 = "crisp";
var ah = "rocket";
var hT = [{
    name: ah,
    src: "/assets/js/rocket-chat.js"
}];
var wz = function(e) {
    return e.Ascending = "sort-down",
    e.Descending = "sort-up",
    e
}(wz || {});
var dT = class {
    constructor(t, n) {
        this.state = t,
        this.controlId = n
    }
}
;
var V1 = function(e) {
    return e[e.Default = 0] = "Default",
    e[e.Fund = 1] = "Fund",
    e
}(V1 || {})
  , b3e = {
    line: "line",
    candle: "candle"
}
  , y0 = function(e) {
    return e.daily = "daily",
    e.weekly = "weekly",
    e.monthly = "monthly",
    e.tripleMonth = "3monthly",
    e.semiyearly = "6monthly",
    e.yearly = "yearly",
    e.tripleYear = "3yearly",
    e
}(y0 || {})
  , x3e = {
    line: "line",
    candle: "candle"
};
var V2 = function(e) {
    return e[e.Logout = 0] = "Logout",
    e
}(V2 || {});
var fT = ( () => {
    let t = class t {
        constructor(i, r) {
            this.storage = i,
            this.key = "build_no",
            this.currentBuildNumber = r.build
        }
        isNewVersion() {
            let i = this.storage.getItem(this.key);
            return this.currentBuildNumber != i
        }
        setCurrentVersion() {
            this.storage.setItem(this.key, this.currentBuildNumber)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(Tc),xe(bn))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var y2e = ( () => {
    let t = class t {
        constructor() {
            this.defaultTitle = "EasyTrader",
            this.defaultRoute = Ei.MAIN_ROUTE,
            this.titleSubject = new Ne({
                route: this.defaultRoute,
                title: this.defaultTitle
            }),
            this.titleObservable$ = this.titleSubject.asObservable(),
            this.updateTitle = (i, r) => this.titleSubject.next({
                route: i,
                title: r
            }),
            this.resetTitle = () => this.titleSubject.next({
                route: this.defaultRoute,
                title: this.defaultTitle
            }),
            this.titleObservable$.pipe().subscribe({
                next: i => {
                    this.setTitle(i.route, i.title)
                }
            })
        }
        setTitle(i, r) {
            window.document.location.pathname.split("/")[1] === i.toString() && (document.title = r)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var $2 = ( () => {
    let t = class t {
        constructor() {
            this.checkNetworkStatus()
        }
        checkNetworkStatus() {
            this.networkStatus$ = nc(Be(null), sn(window, "online"), sn(window, "offline")).pipe(We( () => navigator.onLine))
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var $9 = ( () => {
    let t = class t {
        constructor() {
            this.scripts = {},
            this.crispLoadedSub = new Ne(!1),
            this.crispLoaded$ = this.crispLoadedSub.asObservable(),
            this.rocketLoadedSub = new Ne(!1),
            this.rocketLoaded$ = this.rocketLoadedSub.asObservable()
        }
        load(...i) {
            i.forEach(s => {
                this.scripts[s.name] || (this.scripts[s.name] = {
                    loaded: !1,
                    src: s.src
                })
            }
            );
            let r = [];
            return i.forEach(s => r.push(this.loadScript(s.name))),
            Promise.all(r)
        }
        loadScript(i) {
            return new Promise(r => {
                if (this.scripts[i].loaded)
                    r({
                        script: i,
                        loaded: !0,
                        status: "Already Loaded"
                    });
                else {
                    let s = document.createElement("script");
                    s.type = "text/javascript",
                    s.src = this.scripts[i].src,
                    s.async = !0,
                    s.onload = () => {
                        this.scripts[i].loaded = !0,
                        this.checkIfCrispScriptLoaded(),
                        this.checkIfRocketScriptLoaded(),
                        r({
                            script: i,
                            loaded: !0,
                            status: "Loaded"
                        })
                    }
                    ,
                    s.onerror = () => r({
                        script: i,
                        loaded: !1,
                        status: "Loaded"
                    }),
                    document.getElementsByTagName("head")[0].appendChild(s)
                }
            }
            )
        }
        scriptIsLoaded(i) {
            return this.scripts[i] && this.scripts[i].loaded
        }
        checkIfRocketScriptLoaded() {
            this.scriptIsLoaded(ah) && this.rocketLoadedSub.next(!0)
        }
        checkIfCrispScriptLoaded() {
            this.scriptIsLoaded(V9) && this.crispLoadedSub.next(!0)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var I2e = ( () => {
    let t = class t {
        constructor() {
            this.enable = !1,
            this.easyKeyboardSubject = new Ne(this.enable),
            this.easyKeyboardState$ = this.easyKeyboardSubject.asObservable(),
            this.keyEventSubject = new lt,
            this.keyEvent$ = this.keyEventSubject.pipe(mt(Boolean)),
            this.updateKeyEvent = i => this.keyEventSubject.next(i)
        }
        changeState(i, r=100) {
            i ? setTimeout( () => {
                this.enable = i,
                this.easyKeyboardSubject.next(i)
            }
            , r) : (this.enable = i,
            this.easyKeyboardSubject.next(i))
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var j2 = g5(pT(), 1);
var Qc = class e {
    static symbolize(t) {
        let n = {
            command: "\u2318",
            shift: "\u21E7",
            left: "\u2190",
            right: "\u2192",
            up: "\u2191",
            down: "\u2193",
            return: "\u23CE",
            backspace: "\u232B"
        }
          , i = t.split("+");
        for (let r = 0; r < i.length; r++)
            i[r] === "mod" && (window.navigator && window.navigator.platform.indexOf("Mac") >= 0 ? i[r] = "command" : i[r] = "ctrl"),
            i[r] = n[i[r]] || i[r];
        return i.join(" + ")
    }
    constructor(t, n, i, r, s, o) {
        this.combo = t,
        this.callback = n,
        this.allowIn = i,
        this.description = r,
        this.action = s,
        this.persistent = o,
        this.combo = Array.isArray(t) ? t : [t],
        this.allowIn = i || [],
        this.description = r || ""
    }
    get formatted() {
        if (!this.formattedHotkey) {
            let t = [...this.combo];
            for (let n = 0; n < t.length; n++)
                t[n] = e.symbolize(t[n]);
            this.formattedHotkey = t
        }
        return this.formattedHotkey
    }
}
  , gT = new Je("HotkeyOptions")
  , W9 = ( () => {
    let t = class t {
        constructor(i) {
            this.options = i,
            this.hotkeys = [],
            this.pausedHotkeys = [],
            this.cheatSheetToggle = new lt,
            this.preventIn = ["INPUT", "SELECT", "TEXTAREA"],
            j2.prototype.stopCallback = (r, s, o, a) => (" " + s.className + " ").indexOf(" mousetrap ") > -1 ? !1 : s.contentEditable && s.contentEditable === "true",
            this.mousetrap = new j2.default,
            this.initCheatSheet()
        }
        initCheatSheet() {
            this.options.disableCheatSheet || this.add(new Qc(this.options.cheatSheetHotkey || "?",(function(i) {
                this.cheatSheetToggle.next()
            }
            ).bind(this),[],this.options.cheatSheetDescription || "Show / hide this help menu")),
            this.options.cheatSheetCloseEsc && this.add(new Qc("esc",(function(i) {
                this.cheatSheetToggle.next(!1)
            }
            ).bind(this),["HOTKEYS-CHEATSHEET"],this.options.cheatSheetCloseEscDescription || "Hide this help menu"))
        }
        add(i, r) {
            if (Array.isArray(i)) {
                let s = [];
                for (let o of i)
                    s.push(this.add(o, r));
                return s
            }
            return this.remove(i),
            this.hotkeys.push(i),
            this.mousetrap.bind(i.combo, (s, o) => {
                let a = !0;
                if (s) {
                    let c = s.target || s.srcElement
                      , l = c.nodeName.toUpperCase();
                    (" " + c.className + " ").indexOf(" mousetrap ") > -1 ? a = !0 : this.preventIn.indexOf(l) > -1 && i.allowIn.map(u => u.toUpperCase()).indexOf(l) === -1 && (a = !1)
                }
                if (a)
                    return i.callback.apply(this, [s, o])
            }
            , r),
            i
        }
        remove(i, r) {
            let s = [];
            if (!i) {
                for (let a of this.hotkeys)
                    s.push(this.remove(a, r));
                return s
            }
            if (Array.isArray(i)) {
                for (let a of i)
                    s.push(this.remove(a));
                return s
            }
            let o = this.findHotkey(i);
            return o > -1 ? (this.hotkeys.splice(o, 1),
            this.mousetrap.unbind(i.combo, r),
            i) : null
        }
        get(i) {
            if (!i)
                return this.hotkeys;
            if (Array.isArray(i)) {
                let r = [];
                for (let s of i)
                    r.push(this.get(s));
                return r
            }
            for (let r of this.hotkeys)
                if (r.combo.indexOf(i) > -1)
                    return r;
            return null
        }
        pause(i) {
            if (!i)
                return this.pause(this.hotkeys);
            if (Array.isArray(i)) {
                let r = [];
                for (let s of i.slice())
                    r.push(this.pause(s));
                return r
            }
            return this.remove(i),
            this.pausedHotkeys.push(i),
            i
        }
        unpause(i) {
            if (!i)
                return this.unpause(this.pausedHotkeys);
            if (Array.isArray(i)) {
                let s = [];
                for (let o of i.slice())
                    s.push(this.unpause(o));
                return s
            }
            let r = this.pausedHotkeys.indexOf(i);
            return r > -1 ? (this.add(i),
            this.pausedHotkeys.splice(r, 1)) : null
        }
        reset() {
            this.mousetrap.reset(),
            this.hotkeys = [],
            this.pausedHotkeys = [],
            this.initCheatSheet()
        }
        findHotkey(i) {
            return this.hotkeys.indexOf(i)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(gT))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var W2e = ( () => {
    let t = class t {
        static forRoot(i={}) {
            return {
                ngModule: t,
                providers: [W9, {
                    provide: gT,
                    useValue: i
                }]
            }
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275mod = nr({
        type: t
    }),
    t.\u0275inj = tr({
        imports: [fc]
    });
    let e = t;
    return e
}
)();
var X2e = ( () => {
    let t = class t {
        constructor(i) {
            this.hotkeysService = i,
            this.hotkeysSubject = new lt,
            this.hotkeys$ = this.hotkeysSubject.asObservable()
        }
        initHotkeys() {
            this.hotkeys = this.hotkeysService.add([new Qc(Fd.Escape, () => (this.hotkeysSubject.next(Ld.Escape),
            !1)), new Qc(Fd.Plus, () => (this.hotkeysSubject.next(Ld.Plus),
            !1)), new Qc(Fd.Minus, () => (this.hotkeysSubject.next(Ld.Minus),
            !1))])
        }
        removeHotKeys() {
            this.hotkeysService.remove(this.hotkeys)
        }
        resetHotkeys() {
            this.removeHotKeys(),
            this.initHotkeys()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(W9))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var Oz = ["#BA4A00", "#1C2833", "#21618C", "#34495E", "#B7950B", "#186A3B", "#5B2C6F", "#B03A2E"]
  , mT = (e, t) => (e = Math.ceil(e),
t = Math.floor(t),
Math.floor(Math.random() * (t - e)) + e);
var Mz = () => String.fromCharCode(mT(48, 57))
  , Pz = e => {
    let t = ""
      , n = 0;
    for (; n < e; )
        t += Mz(),
        n++;
    return t
}
  , vT = (e="35px Arial", t="center", n="middle", i=150, r=50, s="transparent", o, a=4) => {
    let c = document.createElement("canvas")
      , l = Pz(a)
      , u = c.getContext("2d");
    u.canvas.width = i,
    u.canvas.height = r,
    u.font = e,
    u.textAlign = t,
    u.textBaseline = n,
    u.fillStyle = s;
    let h = new Image;
    return h.src = "../assets/images/captcha-bg1.jpg",
    h.onload = function() {
        u.drawImage(h, 0, 0),
        u.fillRect(0, 0, i, r),
        u.fillStyle = o ?? Oz[mT(0, 8)] + "75",
        u.fillText(l, i / 2, r / 2)
    }
    ,
    {
        canvas: u.canvas,
        word: l
    }
}
;
var j9 = e => ({
    "is-invalid": e
});
function Az(e, t) {
    e & 1 && (H(0, "div")(1, "small", 47),
    oe(2, " \u0634\u0645\u0627\u0631\u0647 \u0647\u0645\u0631\u0627\u0647 / \u06A9\u062F \u0645\u0644\u06CC / \u0646\u0627\u0645 \u06A9\u0627\u0631\u0628\u0631\u06CC \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F. "),
    W()())
}
function Iz(e, t) {
    if (e & 1 && (H(0, "div", 11),
    at(1, Az, 3, 0, "div"),
    W()),
    e & 2) {
        let n = Te();
        Q(),
        et(n.username.errors.required ? 1 : -1)
    }
}
function Rz(e, t) {
    e & 1 && (H(0, "div")(1, "small", 47),
    oe(2, " \u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F. "),
    W()())
}
function Dz(e, t) {
    if (e & 1 && (H(0, "div", 19),
    at(1, Rz, 3, 0, "div"),
    W()),
    e & 2) {
        let n = Te();
        Q(),
        et(n.password.errors.required ? 1 : -1)
    }
}
function Nz(e, t) {
    e & 1 && (H(0, "small", 47),
    oe(1, " \u06A9\u062F \u0627\u0645\u0646\u06CC\u062A\u06CC \u062F\u0631\u0633\u062A \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F. "),
    W())
}
function Fz(e, t) {
    if (e & 1 && (H(0, "div", 33),
    at(1, Nz, 2, 0, "small", 47),
    W()),
    e & 2) {
        let n = Te();
        Q(),
        et(n.captcha.errors.required ? 1 : -1)
    }
}
var upe = ( () => {
    let t = class t {
        constructor() {
            this.userDeviceService = z(ur),
            this.environment = z(bn),
            this.IsMobile = xi(this.userDeviceService.deviceType$.pipe(We(i => i === _n.Mobile))),
            this.icons = Wt,
            this.captchaWord = "",
            this.showPassWord = wt(!1),
            this.inProgress = wt(!1),
            this.isFormInValid = wt(!1),
            this.isCaptchaInValid = wt(!1),
            this.authService = z(Ir),
            this.formBuilder = z(qv)
        }
        get username() {
            return this.loginForm.get("username")
        }
        get password() {
            return this.loginForm.get("password")
        }
        get captcha() {
            return this.loginForm.get("captcha")
        }
        ngOnInit() {
            this.loginForm = this.formBuilder.group({
                username: ["", [fl.required, fl.maxLength(40)]],
                password: ["", [fl.required, fl.maxLength(40)]],
                captcha: ["", [fl.required, fl.maxLength(4)]]
            }),
            this.createCaptcha()
        }
        onFormSubmit() {
            if (this.inProgress() || (this.isFormInValid.set(!this.loginForm.valid),
            this.isFormInValid()))
                return;
            let i = this.loginForm.value;
            this.isCaptchaInValid.set(i.captcha !== this.captchaWord),
            !this.isCaptchaInValid() && (this.inProgress.set(!0),
            this.authService.loginForPasswordGrantType(i).pipe(dr( () => this.createCaptcha()), on( () => (this.inProgress.set(!1),
            Ur))).subscribe())
        }
        createCaptcha() {
            let i = document.getElementsByTagName("canvas")[0];
            i && i.parentNode.removeChild(i);
            let r = vT();
            document.getElementById("div-captcha")?.appendChild(r.canvas),
            this.captchaWord = r.word
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["app-login"]],
        decls: 100,
        vars: 43,
        consts: [[1, "BG", "text-dark"], [1, "organizer"], [1, "main-section", "d-flex"], [1, "sections"], ["height", "45", "srcset", "../../assets/images/bull-Only-color.png"], [1, "title"], [3, "submit", "formGroup"], [1, "form-group", "mb-2"], ["for", "username", 1, "label"], [1, "passwordField", "position-relative"], ["id", "username", "name", "username", "formControlName", "username", "tabindex", "1", "autofocus", "", "data-val-regex", "\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0648\u0627\u0631\u062F \u0634\u062F\u0647 \u0642\u0627\u0628\u0644 \u0642\u0628\u0648\u0644 \u0646\u06CC\u0633\u062A.", "data-val-regex-pattern", "[a-zA-Z0-9.\\-_@]{6,32}", "data-val-required", "\u0634\u0645\u0627\u0631\u0647 \u0647\u0645\u0631\u0627\u0647 / \u06A9\u062F \u0645\u0644\u06CC / \u0646\u0627\u0645 \u06A9\u0627\u0631\u0628\u0631\u06CC \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F.", "aria-describedby", "username-error", "aria-invalid", "false", 2, "padding-left", "40px", 3, "ngClass"], [1, "text-warning", "mt-2", "position-absolute", 2, "bottom", "-20px"], ["data-valmsg-for", "username", "data-valmsg-replace", "true", 1, "field-validation-valid"], ["id", "input_vk_1_con", 1, "vr-keyboard-section"], [1, "simple-keyboard-con"], [1, "simple-keyboard"], ["for", "password", 1, "label"], [1, "passwordField"], ["autocomplete", "new-password", "id", "password", "name", "password", "formControlName", "password", "tabindex", "2", "data-val", "true", "data-val-required", "\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F.", "aria-describedby", "Password-error", "aria-invalid", "false", 2, "padding-left", "60px", 3, "type", "ngClass"], [1, "text-warning", "mt-2", "position-absolute", 2, "bottom", "-21px"], [1, "align-items-center", "d-flex", "eye-icon", "h-100", "justify-content-center"], ["width", "18", "height", "18", 1, "hand", "text-secondary", 3, "click", "iconName"], ["data-valmsg-for", "password", "data-valmsg-replace", "true", 1, "field-validation-valid"], ["id", "input_vk_2_con", 1, "vr-keyboard-section"], [1, "text-end", "mt-1"], [1, "footer-link", 3, "href"], [1, "form-group"], [1, "label"], ["id", "captcha", "name", "captcha", "formControlName", "captcha", "tabindex", "3", "autofocus", "", "aria-describedby", "captcha-error", "aria-invalid", "false", 1, "placeHolder", "form-control", "ltr", "bg-transparent", 2, "padding-left", "40px", 3, "ngClass"], ["id", "div-captcha", 1, "border-end", "d-flex", "flex-grow-1", "justify-content-center"], [1, "cup", "d-flex", "align-items-center", 3, "click"], ["width", "24", "height", "24", 1, "px-2", "text-secondary", 3, "iconName"], [1, "actions"], [1, "text-warning", "position-absolute", "bottom-0"], [1, "btn-class"], ["type", "hidden", "name", "button", "id", "button"], ["type", "submit", "tabindex", "4", "id", "submit_btn", 1, "btn-primary", 3, "disabled"], [1, "loading", 2, "display", "none"], [1, "btn-class", "py-4", "m-0"], [1, "btn-secondary", 3, "href"], [1, "security-rules", "d-block", "d-lg-none"], [1, "text-start"], [1, "h6", "mb-2"], ["href", "https://learning.emofid.com/%d8%b1%d9%88%db%8c%d9%87-%d8%a7%d8%b1%d8%a7%d8%a6%d9%87-%d8%ae%d8%af%d9%85%d8%a7%d8%aa-%d9%88-%d8%a7%d9%86%d8%ac%d8%a7%d9%85-%d9%85%d8%b9%d8%a7%d9%85%d9%84%d8%a7%d8%aa-%d8%a8%d8%b1%d8%ae%d8%b7/"], [1, "BG-in", "align-items-end"], [1, "security-rules"], ["srcset", "../../assets/images/steadyProgress.png", "alt", "\u06A9\u0627\u0631\u06AF\u0632\u0627\u0631\u06CC \u0645\u0641\u06CC\u062F"], [1, "form-text", "text-danger"]],
        template: function(r, s) {
            r & 1 && (H(0, "div", 0)(1, "div")(2, "div", 1)(3, "div")(4, "div")(5, "div", 2)(6, "div", 3)(7, "div"),
            me(8, "img", 4),
            H(9, "h6", 5),
            oe(10, " \u0648\u0631\u0648\u062F "),
            H(11, "span"),
            oe(12, "\u0628\u0647 \u0627\u06CC\u0632\u06CC\u200C\u062A\u0631\u06CC\u062F\u0631"),
            W()()(),
            H(13, "form", 6),
            Qe("submit", function() {
                return s.onFormSubmit()
            }),
            H(14, "fieldset")(15, "div", 7)(16, "label", 8),
            oe(17, "\u0634\u0645\u0627\u0631\u0647 \u0647\u0645\u0631\u0627\u0647 / \u06A9\u062F \u0645\u0644\u06CC / \u0646\u0627\u0645 \u06A9\u0627\u0631\u0628\u0631\u06CC"),
            W(),
            H(18, "div", 9),
            me(19, "input", 10),
            at(20, Iz, 2, 1, "div", 11),
            W(),
            me(21, "span", 12),
            H(22, "div", 13)(23, "div", 14),
            me(24, "div", 15),
            W()()(),
            H(25, "div", 7)(26, "label", 16),
            oe(27, "\u0631\u0645\u0632 \u0639\u0628\u0648\u0631"),
            W(),
            H(28, "div", 17),
            me(29, "input", 18),
            at(30, Dz, 2, 1, "div", 19),
            H(31, "span", 20)(32, "svg-icon", 21),
            Qe("click", function() {
                return s.showPassWord.set(!s.showPassWord())
            }),
            W()()(),
            me(33, "span", 22)(34, "div", 23),
            H(35, "div", 24)(36, "a", 25),
            oe(37, " \u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u062E\u0648\u062F \u0631\u0627 \u0641\u0631\u0627\u0645\u0648\u0634 \u06A9\u0631\u062F\u0647\u200C\u0627\u0645 "),
            W()()(),
            H(38, "div", 26)(39, "label", 27),
            oe(40, "\u06A9\u062F \u0627\u0645\u0646\u06CC\u062A\u06CC"),
            W(),
            H(41, "div"),
            me(42, "input", 28)(43, "div", 29),
            H(44, "div", 30),
            Qe("click", function() {
                return s.createCaptcha()
            }),
            me(45, "svg-icon", 31),
            W()(),
            H(46, "div", 32),
            at(47, Fz, 2, 1, "div", 33),
            W()(),
            H(48, "div", 34),
            me(49, "input", 35),
            H(50, "button", 36),
            oe(51, " \u0648\u0631\u0648\u062F "),
            me(52, "div", 37),
            W()()()()()(),
            H(53, "div", 38)(54, "a", 39),
            oe(55, " \u0627\u06CC\u062C\u0627\u062F \u062D\u0633\u0627\u0628 "),
            me(56, "div", 37),
            W()(),
            H(57, "div", 40)(58, "div", 41)(59, "p", 42),
            oe(60, "\u0646\u06A9\u0627\u062A \u0627\u0645\u0646\u06CC\u062A\u06CC"),
            W(),
            H(61, "ul")(62, "li"),
            oe(63, " \u0633\u0627\u06CC\u062A \u06A9\u0627\u0631\u06AF\u0632\u0627\u0631\u06CC \u0645\u0641\u06CC\u062F \u0628\u0627 \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0627\u0632 \u067E\u0631\u0648\u062A\u06A9\u0644 \u0627\u0645\u0646 SSL \u0628\u0647 \u0645\u0634\u062A\u0631\u06CC\u0627\u0646 \u062E\u0648\u062F \u0627\u0631\u0627\u0626\u0647 \u062E\u062F\u0645\u062A \u0646\u0645\u0648\u062F\u0647 \u0648 \u0628\u0627 \u0622\u062F\u0631\u0633 https://account.emofid.com \u0634\u0631\u0648\u0639 \u0645\u06CC \u0634\u0648\u062F. "),
            W(),
            H(64, "li"),
            oe(65, " \u0644\u0637\u0641\u0627 \u067E\u06CC\u0634 \u0627\u0632 \u0648\u0631\u0648\u062F \u0647\u0631\u06AF\u0648\u0646\u0647 \u0627\u0637\u0644\u0627\u0639\u0627\u062A\u060C \u0622\u062F\u0631\u0633 \u0645\u0648\u062C\u0648\u062F \u062F\u0631 \u0628\u062E\u0634 \u0645\u0631\u0648\u0631\u06AF\u0631 \u0648\u0628 \u062E\u0648\u062F \u0631\u0627 \u0628\u0627 \u0622\u062F\u0631\u0633 \u0641\u0648\u0642 \u0645\u0642\u0627\u06CC\u0633\u0647 \u0646\u0645\u0627\u06CC\u06CC\u062F \u0648 \u062F\u0631\u0635\u0648\u0631\u062A \u0645\u0634\u0627\u0647\u062F\u0647 \u0647\u0631 \u0646\u0648\u0639 \u0645\u063A\u0627\u06CC\u0631\u062A \u0627\u062D\u062A\u0645\u0627\u0644\u06CC\u060C \u0627\u0632 \u0627\u062F\u0627\u0645\u0647 \u06A9\u0627\u0631 \u0645\u0646\u0635\u0631\u0641 \u0634\u062F\u0647 \u0648 \u0645\u0648\u0636\u0648\u0639 \u0631\u0627 \u0628\u0627 \u0645\u0627 \u062F\u0631 \u0645\u06CC\u0627\u0646 \u0628\u06AF\u0630\u0627\u0631\u06CC\u062F. "),
            W(),
            H(66, "li"),
            oe(67, " \u0628\u0631\u0627\u06CC \u062D\u0641\u0627\u0638\u062A \u0627\u0632 \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC \u062E\u0648\u062F\u060C \u062D\u062A\u06CC \u0627\u0644\u0645\u0642\u062F\u0648\u0631 \u0627\u0632 \u0635\u0641\u062D\u0647 \u06A9\u0644\u06CC\u062F \u0645\u062C\u0627\u0632\u06CC \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0646\u0645\u0627\u06CC\u06CC\u062F. "),
            W(),
            H(68, "li"),
            oe(69, " \u0647\u0631\u06AF\u0632 \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC (\u0646\u0627\u0645 \u06A9\u0627\u0631\u0628\u0631\u06CC \u0648 \u0631\u0645\u0632 \u0639\u0628\u0648\u0631) \u062E\u0648\u062F \u0631\u0627 \u062F\u0631 \u0627\u062E\u062A\u06CC\u0627\u0631 \u062F\u06CC\u06AF\u0631\u0627\u0646 \u0642\u0631\u0627\u0631 \u0646\u062F\u0647\u06CC\u062F. "),
            W(),
            H(70, "li"),
            oe(71, "\u067E\u0633 \u0627\u0632 \u0627\u062A\u0645\u0627\u0645 \u06A9\u0627\u0631 \u0628\u0627 \u0633\u0627\u0645\u0627\u0646\u0647\u060C \u062D\u062A\u0645\u0627 \u0628\u0631 \u0631\u0648\u06CC \u062F\u06A9\u0645\u0647 \u062E\u0631\u0648\u062C \u0627\u0632 \u0633\u0627\u0645\u0627\u0646\u0647 \u06A9\u0644\u06CC\u06A9 \u0646\u0645\u0627\u06CC\u06CC\u062F."),
            W(),
            H(72, "li")(73, "a", 43)(74, "u"),
            oe(75, " \u0631\u0648\u06CC\u0647 \u0627\u0631\u0627\u0626\u0647 \u062E\u062F\u0645\u0627\u062A \u0648 \u0627\u0646\u062C\u0627\u0645 \u0645\u0639\u0627\u0645\u0644\u0627\u062A \u0628\u0631\u062E\u0637 "),
            W()(),
            oe(76, " \u06A9\u0627\u0631\u06AF\u0632\u0627\u0631\u06CC \u0645\u0641\u06CC\u062F \u0631\u0627 \u0645\u0637\u0627\u0644\u0639\u0647 \u0646\u0645\u0627\u06CC\u06CC\u062F. "),
            W()()()()(),
            H(77, "div")(78, "div", 44)(79, "div", 45),
            me(80, "img", 46),
            H(81, "div", 41)(82, "p", 42),
            oe(83, "\u0646\u06A9\u0627\u062A \u0627\u0645\u0646\u06CC\u062A\u06CC"),
            W(),
            H(84, "ul")(85, "li"),
            oe(86, " \u0633\u0627\u06CC\u062A \u06A9\u0627\u0631\u06AF\u0632\u0627\u0631\u06CC \u0645\u0641\u06CC\u062F \u0628\u0627 \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0627\u0632 \u067E\u0631\u0648\u062A\u06A9\u0644 \u0627\u0645\u0646 SSL \u0628\u0647 \u0645\u0634\u062A\u0631\u06CC\u0627\u0646 \u062E\u0648\u062F \u0627\u0631\u0627\u0626\u0647 \u062E\u062F\u0645\u062A \u0646\u0645\u0648\u062F\u0647 \u0648 \u0628\u0627 \u0622\u062F\u0631\u0633 https://account.emofid.com \u0634\u0631\u0648\u0639 \u0645\u06CC \u0634\u0648\u062F. "),
            W(),
            H(87, "li"),
            oe(88, " \u0644\u0637\u0641\u0627 \u067E\u06CC\u0634 \u0627\u0632 \u0648\u0631\u0648\u062F \u0647\u0631\u06AF\u0648\u0646\u0647 \u0627\u0637\u0644\u0627\u0639\u0627\u062A\u060C \u0622\u062F\u0631\u0633 \u0645\u0648\u062C\u0648\u062F \u062F\u0631 \u0628\u062E\u0634 \u0645\u0631\u0648\u0631\u06AF\u0631 \u0648\u0628 \u062E\u0648\u062F \u0631\u0627 \u0628\u0627 \u0622\u062F\u0631\u0633 \u0641\u0648\u0642 \u0645\u0642\u0627\u06CC\u0633\u0647 \u0646\u0645\u0627\u06CC\u06CC\u062F \u0648 \u062F\u0631\u0635\u0648\u0631\u062A \u0645\u0634\u0627\u0647\u062F\u0647 \u0647\u0631 \u0646\u0648\u0639 \u0645\u063A\u0627\u06CC\u0631\u062A \u0627\u062D\u062A\u0645\u0627\u0644\u06CC\u060C \u0627\u0632 \u0627\u062F\u0627\u0645\u0647 \u06A9\u0627\u0631 \u0645\u0646\u0635\u0631\u0641 \u0634\u062F\u0647 \u0648 \u0645\u0648\u0636\u0648\u0639 \u0631\u0627 \u0628\u0627 \u0645\u0627 \u062F\u0631 \u0645\u06CC\u0627\u0646 \u0628\u06AF\u0630\u0627\u0631\u06CC\u062F. "),
            W(),
            H(89, "li"),
            oe(90, " \u0628\u0631\u0627\u06CC \u062D\u0641\u0627\u0638\u062A \u0627\u0632 \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC \u062E\u0648\u062F\u060C \u062D\u062A\u06CC \u0627\u0644\u0645\u0642\u062F\u0648\u0631 \u0627\u0632 \u0635\u0641\u062D\u0647 \u06A9\u0644\u06CC\u062F \u0645\u062C\u0627\u0632\u06CC \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0646\u0645\u0627\u06CC\u06CC\u062F. "),
            W(),
            H(91, "li"),
            oe(92, " \u0647\u0631\u06AF\u0632 \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC (\u0646\u0627\u0645 \u06A9\u0627\u0631\u0628\u0631\u06CC \u0648 \u0631\u0645\u0632 \u0639\u0628\u0648\u0631) \u062E\u0648\u062F \u0631\u0627 \u062F\u0631 \u0627\u062E\u062A\u06CC\u0627\u0631 \u062F\u06CC\u06AF\u0631\u0627\u0646 \u0642\u0631\u0627\u0631 \u0646\u062F\u0647\u06CC\u062F. "),
            W(),
            H(93, "li"),
            oe(94, "\u067E\u0633 \u0627\u0632 \u0627\u062A\u0645\u0627\u0645 \u06A9\u0627\u0631 \u0628\u0627 \u0633\u0627\u0645\u0627\u0646\u0647\u060C \u062D\u062A\u0645\u0627 \u0628\u0631 \u0631\u0648\u06CC \u062F\u06A9\u0645\u0647 \u062E\u0631\u0648\u062C \u0627\u0632 \u0633\u0627\u0645\u0627\u0646\u0647 \u06A9\u0644\u06CC\u06A9 \u0646\u0645\u0627\u06CC\u06CC\u062F."),
            W(),
            H(95, "li")(96, "a", 43)(97, "u"),
            oe(98, " \u0631\u0648\u06CC\u0647 \u0627\u0631\u0627\u0626\u0647 \u062E\u062F\u0645\u0627\u062A \u0648 \u0627\u0646\u062C\u0627\u0645 \u0645\u0639\u0627\u0645\u0644\u0627\u062A \u0628\u0631\u062E\u0637 "),
            W()(),
            oe(99, " \u06A9\u0627\u0631\u06AF\u0632\u0627\u0631\u06CC \u0645\u0641\u06CC\u062F \u0631\u0627 \u0645\u0637\u0627\u0644\u0639\u0647 \u0646\u0645\u0627\u06CC\u06CC\u062F. "),
            W()()()()()()()()()()),
            r & 2 && (Q(),
            cs("container", s.IsMobile() ? "p-0" : "", ""),
            Q(2),
            cs("main-form bg-white text-black  d-flex rounded align-items-center  ", s.IsMobile() ? "flex-column overflow-auto h-100" : "w-100   py-4 px-2 ", ""),
            Q(),
            cs("   ", s.IsMobile() ? "w-100 px-2 " : "w-50 justify-content-center px-5 ", ""),
            Q(3),
            cs("header border-bottom ", s.IsMobile() ? "m-0 header-background" : "", ""),
            Q(6),
            ye("formGroup", s.loginForm),
            Q(6),
            cs("input-box placeHolder ltr bg-transparent ", s.username.errors && (s.username.dirty || s.username.touched) ? "border-danger" : "", ""),
            ye("ngClass", Dn(37, j9, s.username.errors && s.isFormInValid())),
            Q(),
            et(s.username.errors && (s.username.dirty || s.username.touched) ? 20 : -1),
            Q(9),
            cs("input-box  ltr input_vk_2 valid bg-transparent ", s.password.errors && (s.password.dirty || s.password.touched) ? "border-danger" : "", ""),
            ye("type", s.showPassWord() ? "text" : "password")("ngClass", Dn(39, j9, s.password.errors && s.isFormInValid())),
            Q(),
            et(s.password.errors && (s.password.dirty || s.password.touched) ? 30 : -1),
            Q(2),
            ye("iconName", s.showPassWord() ? s.icons.Eye : s.icons.EyeOff),
            Q(4),
            ye("href", (s.environment == null || s.environment.oidcSettings == null ? null : s.environment.oidcSettings.authority) + "/ForgotPassword", s4),
            Q(5),
            cs("captcha-style d-flex   ", s.captcha.errors && (s.captcha.dirty || s.captcha.touched) ? " border-danger" : "", ""),
            Q(),
            ye("ngClass", Dn(41, j9, s.captcha.errors && s.isFormInValid() || s.isCaptchaInValid())),
            Q(3),
            ye("iconName", s.icons.refresh),
            Q(2),
            et(s.captcha.errors && (s.captcha.dirty || s.captcha.touched) ? 47 : -1),
            Q(3),
            ye("disabled", s.inProgress()),
            Q(4),
            ye("href", s.environment.oidcSettings.authority + "/Register", s4),
            Q(23),
            cs("w-50 right-col ", s.IsMobile() ? "d-none" : "", ""))
        },
        dependencies: [U5, Wv, R5, D5, N5, F5, L5, B5, ir, Fn],
        styles: [`ul[_ngcontent-%COMP%], ol[_ngcontent-%COMP%]{padding:0;text-align:right}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}h1[_ngcontent-%COMP%], .h1[_ngcontent-%COMP%]{font-size:2.2rem}h2[_ngcontent-%COMP%], .h2[_ngcontent-%COMP%]{font-size:1.4rem}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], .h1[_ngcontent-%COMP%], .h2[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%], .h4[_ngcontent-%COMP%], .h5[_ngcontent-%COMP%], .h6[_ngcontent-%COMP%]{line-height:1.5;font-weight:700}h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], .h4[_ngcontent-%COMP%], .h5[_ngcontent-%COMP%], .h6[_ngcontent-%COMP%]{font-weight:500}a[_ngcontent-%COMP%]{color:#004d6b;text-decoration:none!important}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[_ngcontent-%COMP%]:-webkit-autofill, input[_ngcontent-%COMP%]:-webkit-autofill:hover, input[_ngcontent-%COMP%]:-webkit-autofill:focus, input[_ngcontent-%COMP%]:-webkit-autofill:active{-webkit-box-shadow:0 0 0 30px white inset!important}input[type=tel][_ngcontent-%COMP%]{-moz-appearance:textfield}input[_ngcontent-%COMP%]:-webkit-autofill{-webkit-box-shadow:inset 0 0 0 9999px white}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, button[_ngcontent-%COMP%]:focus{outline:0!important;background-color:#fff}.filled[_ngcontent-%COMP%]{opacity:1!important}.btn-primary[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-primary[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-primary.dropdown-toggle[_ngcontent-%COMP%]{color:#fff;background-color:#004d6b;border:0}.btn-primary[_ngcontent-%COMP%]:focus, .btn-primary.focus[_ngcontent-%COMP%]{box-shadow:none}.btn-primary[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-primary[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-primary.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:none}.form-control[_ngcontent-%COMP%]:focus{color:none;background-color:none;border-color:none;outline:0;box-shadow:none}.show[_ngcontent-%COMP%]{opacity:1}.fade[_ngcontent-%COMP%]{transition:opacity .15s linear}.ltr[_ngcontent-%COMP%]{direction:ltr}.rtl[_ngcontent-%COMP%]{direction:rtl}.border[_ngcontent-%COMP%]{border-color:#e6e8ed!important;border-radius:4px;background-color:#fff}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e6e8ed!important}.shadow[_ngcontent-%COMP%]{box-shadow:0 0 4px #00000026!important;border-radius:4px;overflow:hidden}.hover[_ngcontent-%COMP%]{transition:all .1s ease-in-out}.hover[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;color:#00374d!important}.btn-hover[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.btn-hover[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 3px 6px 2px #172c4a40}.tooltip.bs-tooltip-right[_ngcontent-%COMP%]   .tooltip-inner[_ngcontent-%COMP%], .tooltip.bs-tooltip-left[_ngcontent-%COMP%]   .tooltip-inner[_ngcontent-%COMP%]{max-width:200px;padding:.5rem;color:inherit;text-align:center;background-color:#fff;border-radius:4px}.tooltip.bs-tooltip-right[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%], .tooltip.bs-tooltip-left[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{display:none}.tooltip.tooltip-danger.bs-tooltip-right[_ngcontent-%COMP%]   .tooltip-inner[_ngcontent-%COMP%], .tooltip.tooltip-danger.bs-tooltip-left[_ngcontent-%COMP%]   .tooltip-inner[_ngcontent-%COMP%]{color:#dc3545;border:1px solid #dc3545}.tooltip.tooltip-info.bs-tooltip-right[_ngcontent-%COMP%]   .tooltip-inner[_ngcontent-%COMP%], .tooltip.tooltip-info.bs-tooltip-left[_ngcontent-%COMP%]   .tooltip-inner[_ngcontent-%COMP%]{color:#17a2b8;border:1px solid #17a2b8}.blur[_ngcontent-%COMP%]{filter:blur(2px)}html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{direction:rtl;font-family:IRANSans2!important;font-weight:300;color:#4b5157;font-size:14px;border-radius:4px;background-color:#fff;position:relative;min-height:100vh}p[_ngcontent-%COMP%]{font-family:IRANSans2!important;font-weight:300}.BG[_ngcontent-%COMP%]{background-color:#edf0f2;background-size:cover;position:absolute;inset:0;display:flex;justify-content:center;align-items:inherit}.BG-in[_ngcontent-%COMP%]{background-image:url("./media/left-BG-UIYRICPC.svg");background-position:top left;background-repeat:no-repeat;background-size:contain;background-color:#fff;position:absolute;inset:0;display:flex;align-items:center;justify-content:center}.BG-in[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;height:auto}.main-width[_ngcontent-%COMP%]{max-width:960px;margin:auto}.right-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;text-align:center;min-height:100%;background-color:#fff;position:relative;background-size:contain}.right-col[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:200px;background-repeat:no-repeat;background-image:url("./media/left-BG-UIYRICPC.svg");background-position:top center}.left-col[_ngcontent-%COMP%]{display:none}.row-styled[_ngcontent-%COMP%]{box-shadow:none;border-radius:0;min-height:100%}.form[_ngcontent-%COMP%]{text-align:right}.tip[_ngcontent-%COMP%]{font-size:10px;text-align:right;margin-right:5px}.form-group[_ngcontent-%COMP%]{position:relative;padding:.5rem 1rem;margin-bottom:0;text-align:right;z-index:5}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:IRANSans2!important}.form-group[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{width:100%;height:40px;padding:5px 15px;text-align:right;color:#4b5157;border:1px solid #e1e5e9;border-radius:4px;transition:all .2s linear}.form-group[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]:hover, .form-group[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]:active, .form-group[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]:focus{border-color:#4b5157}.form-group[_ngcontent-%COMP%]   .input-box.placeHolder[_ngcontent-%COMP%]{font-size:14px}.form-group[_ngcontent-%COMP%]   .input-box.placeHolder[_ngcontent-%COMP%]::-webkit-input-placeholder{opacity:.5}.form-group[_ngcontent-%COMP%]   .input-box.placeHolder[_ngcontent-%COMP%]::-moz-placeholder{opacity:.5}.form-group[_ngcontent-%COMP%]   .input-box.placeHolder[_ngcontent-%COMP%]:-ms-input-placeholder{opacity:.5}.form-group[_ngcontent-%COMP%]   .input-box.placeHolder[_ngcontent-%COMP%]:-moz-placeholder{opacity:.5}.form-group[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;margin-bottom:4px;color:#4b5157}.form-group[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]{top:6px;padding-right:25px;color:#172c4ab3}.form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;margin-bottom:0}.form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]:focus-within{outline:0}.form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]:focus-within   input[_ngcontent-%COMP%] + .checkbox[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke-dashoffset:0}.form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .checkbox[_ngcontent-%COMP%]{border-color:#004d6b}.form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .checkbox[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#004d6b}.form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .checkbox[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke-dashoffset:0}.form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover + .checkbox[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .checkbox[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke-dashoffset:0}.form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#172c4ab3;font-size:12px;line-height:2}.form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%], .form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]:focus   span[_ngcontent-%COMP%]{color:#004d6b}.form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{position:relative;top:6px;float:right;margin-left:8px;width:15px;height:15px;border:1px solid #c8ccd4;border-radius:2px}.form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]:focus{outline:0}.form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;inset:-1px -1px 0 0}.form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:none;stroke:#004d6b;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:71px;stroke-dashoffset:71px;transition:all .6s ease-in-out}.form-group.checkmark[_ngcontent-%COMP%]   .label-cbx[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{fill:none;stroke:#fff;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:18px;stroke-dashoffset:18px;transition:all .3s ease-in-out}.form-group.checkmark[_ngcontent-%COMP%]   .invisible[_ngcontent-%COMP%]{position:absolute;z-index:-1;width:0;height:0;opacity:0}.form-group[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;line-height:1.5!important;margin-bottom:0;margin-top:5px}.passwordField[_ngcontent-%COMP%]{position:relative}.passwordField[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]{position:absolute;left:1px;top:1px;z-index:10;padding:5px 15px 5px 10px;display:flex}.passwordField[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]   .mdi[_ngcontent-%COMP%]{padding:0 3px}.btn-class[_ngcontent-%COMP%]{width:100%;padding:.5rem 1rem;margin-top:1rem;text-align:left}.btn-primary[_ngcontent-%COMP%]{cursor:pointer;width:100%;color:#fff;text-align:center;border-radius:4px;border:0;height:40px;font-size:14px;display:flex;align-items:center;justify-content:center;font-weight:300;background-color:#004d6b;transition:all .2s ease-in-out;position:relative}.btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:focus{background-color:#00374d}.btn-primary[_ngcontent-%COMP%]:disabled{border:0;background-color:#172c4ab3;cursor:default}.btn-secondary[_ngcontent-%COMP%]{cursor:pointer;width:100%;color:#76808a;text-align:center;border-radius:4px;height:36px;font-size:14px;display:flex;align-items:center;justify-content:center;font-weight:300;background-color:#fff;position:relative;border:1px solid #e1e5e9;transition:all .2s ease-in-out}.btn-secondary[_ngcontent-%COMP%]:hover, .btn-secondary[_ngcontent-%COMP%]:focus{color:#76808a;background-color:#e1e5e9;border:1px solid #e1e5e9;box-shadow:none;outline:0}.btn-secondary[_ngcontent-%COMP%]:disabled{border:0;background-color:#172c4ab3;cursor:default}.btn-danger[_ngcontent-%COMP%]{cursor:pointer;width:100%;color:#dc3545!important;text-align:center;border-radius:4px;border:1px solid #dc3545;height:40px;font-size:14px;display:flex;align-items:center;justify-content:center;font-weight:300;background-color:#fff;transition:all .2s ease-in-out}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff!important}.btn-cancel[_ngcontent-%COMP%]{cursor:pointer;width:100%;color:#999!important;text-align:center;border-radius:4px;border:1px solid #999;height:40px;font-size:14px;display:flex;align-items:center;justify-content:center;font-weight:300;background-color:#fff;transition:all .2s ease-in-out}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#999;color:#fff!important}.btn-warning[_ngcontent-%COMP%]{cursor:pointer;width:100%;color:#004d6b!important;text-align:center;border-radius:4px;height:40px;font-size:14px;display:flex;align-items:center;justify-content:center;font-weight:300;background-color:#f7af3e;transition:all .2s ease-in-out}.btn-warning[_ngcontent-%COMP%]:hover{background-color:#fbc56f}.btn-gray[_ngcontent-%COMP%]{cursor:pointer;color:#7a8189;border-radius:4px;border:1px solid #dcdcdc;height:40px;font-size:14px;display:flex;align-items:center;justify-content:center;font-weight:300;transition:all .2s ease-in-out}.btn-gray[_ngcontent-%COMP%]:hover{color:#202020;border-color:#c7c7c7}.btn-gray[_ngcontent-%COMP%]:active, .btn-gray[_ngcontent-%COMP%]:focus{color:#202020;border-color:#c7c7c7;outline:0;box-shadow:none}.btn-green[_ngcontent-%COMP%]{color:#fff;background-color:#00a796;cursor:pointer;width:100%;text-align:center;border-radius:4px;height:40px;font-size:14px;display:flex;align-items:center;justify-content:center;font-weight:300;transition:all .2s ease-in-out}.btn-green[_ngcontent-%COMP%]:hover{color:#fff;background-color:#008e7f}.btn-small[_ngcontent-%COMP%]{height:30px;font-size:12px;min-width:75px}.organizer[_ngcontent-%COMP%]{height:100%}.main-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;text-align:center;z-index:10}.main-section[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-bottom:0}.header[_ngcontent-%COMP%]{padding:.5rem 0;margin:0 1rem 1rem}.header-background[_ngcontent-%COMP%]{background:url("./media/top-BG-4EQHEZVP.png");background-repeat:no-repeat;background-size:cover}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:1.5rem;width:90px}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#00a796}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin-bottom:0}.footer[_ngcontent-%COMP%]{margin:1rem 1rem 1.5rem;display:flex;align-items:center;justify-content:center}.field-validation-error[_ngcontent-%COMP%]{font-size:12px;line-height:1.5!important;margin-bottom:0;margin-top:5px;color:#dc3545}@keyframes _ngcontent-%COMP%_fadein{0%{opacity:0}to{opacity:1}}@-moz-keyframes fadein{0%{opacity:0}to{opacity:1}}@-webkit-keyframes _ngcontent-%COMP%_fadein{0%{opacity:0}to{opacity:1}}@-ms-keyframes fadein{0%{opacity:0}to{opacity:1}}@-o-keyframes fadein{0%{opacity:0}to{opacity:1}}.input-validation-error[_ngcontent-%COMP%]{border-color:#dc3545!important}.valError[_ngcontent-%COMP%]{padding-top:5px!important;padding-bottom:5px!important;color:#dc3545;background-color:#fde3e3;border-radius:4px;margin-top:5px;transition:all .2s ease-in-out}.valError[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:#dc3545!important}.error-place[_ngcontent-%COMP%]{margin-bottom:10px}.error[_ngcontent-%COMP%]{color:#dc3545;padding:10px 50px 10px 10px;position:relative;margin:10px 1rem;border:1px solid #fde3e3;border-radius:4px;overflow:hidden;font-size:12px;text-align:justify}.error[_ngcontent-%COMP%]   .validation-summary-errors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-bottom:0}.error[_ngcontent-%COMP%]:before{content:"\\f15a";font-family:Material Design Icons!important;font-size:18px;right:0;top:0;position:absolute;width:40px;height:100%;background-color:#fde3e3;display:flex;align-items:center;justify-content:center}.warning[_ngcontent-%COMP%]{color:#d78709;padding:10px;position:relative;margin:10px 1rem;border:1px solid #f7af3e;border-radius:4px;overflow:hidden;font-size:12px;text-align:justify}.info[_ngcontent-%COMP%]{padding:5px 50px 5px 12px;position:relative;margin:.5rem 1rem;border:1px solid #d9edf7;border-radius:4px;overflow:hidden;font-size:12px;text-align:justify}.info[_ngcontent-%COMP%]:before{content:"\\f2fd";font-family:Material Design Icons!important;font-size:18px;right:0;top:0;position:absolute;width:40px;height:100%;background-color:#d9edf7;display:flex;align-items:center;justify-content:center}.info-box[_ngcontent-%COMP%]{padding:5px 12px;position:relative;margin:.5rem 1rem;border:1px solid #278abb;border-radius:4px;overflow:hidden;text-align:justify}.alert[_ngcontent-%COMP%]{padding:10px 50px 10px 10px;position:relative;border-radius:4px;overflow:hidden;font-size:12px;text-align:justify}.alert[_ngcontent-%COMP%]:before{content:"\\f02a";font-family:Material Design Icons!important;font-size:18px;right:0;top:0;position:absolute;width:40px;height:100%;display:flex;align-items:center;justify-content:center}.alert.profile-alert[_ngcontent-%COMP%]{color:#f80;background-color:#fff;border:1px solid #f80;margin-top:1rem}.alert.profile-alert[_ngcontent-%COMP%]:before{content:"\\f005";background-color:#f80;color:#fff}.alert.alert-success[_ngcontent-%COMP%]{color:#007e33;background-color:#fff;border:1px solid #d4edda}.alert.alert-success[_ngcontent-%COMP%]:before{content:"\\f854";background-color:#d4edda}.guest-alert[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;color:#004d6b;background-color:#70d3d9;position:relative;border-radius:4px;overflow:hidden;font-weight:500;box-shadow:0 0 4px #46d6dcb3}.guest-alert[_ngcontent-%COMP%]   .mdi[_ngcontent-%COMP%]{color:#fff}.guest-alert[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:12px;background-color:#004d6b;color:#fff;margin:0 1rem;padding:.5rem 1rem;white-space:nowrap}.token[_ngcontent-%COMP%]{position:relative;transition:all .2s ease-in-out;font-size:large;z-index:5}.token[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{padding-left:115px;letter-spacing:8px}.token[_ngcontent-%COMP%]   .input-box.without-timer[_ngcontent-%COMP%]{padding-left:15px}.token[_ngcontent-%COMP%]   .send-again[_ngcontent-%COMP%]{position:absolute;left:0;top:10px;padding:0 12px;border-right:1px solid rgba(23,44,74,.7);line-height:1.5;text-align:left;font-size:14px;min-width:60px;cursor:pointer}.checkmark-an[_ngcontent-%COMP%]   .checkmark__circle[_ngcontent-%COMP%]{stroke-dasharray:166;stroke-dashoffset:166;stroke-width:2;stroke-miterlimit:10;stroke:#28a745;fill:none;animation:_ngcontent-%COMP%_stroke 1.5s cubic-bezier(.65,0,.45,1) forwards}.checkmark-an[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;display:block;stroke-width:2;stroke:#28a745;stroke-miterlimit:10;margin:10% auto;box-shadow:inset 0 0 #fff;animation:_ngcontent-%COMP%_fill .8s ease-in-out .8s forwards,_ngcontent-%COMP%_scale .6s ease-in-out 1.3s both}.checkmark-an[_ngcontent-%COMP%]   .checkmark__check[_ngcontent-%COMP%]{transform-origin:50% 50%;stroke-dasharray:48;stroke-dashoffset:48;animation:_ngcontent-%COMP%_stroke .8s cubic-bezier(.65,0,.45,1) .9s forwards}.cross-an[_ngcontent-%COMP%]   .cross__circle[_ngcontent-%COMP%]{stroke-dasharray:166;stroke-dashoffset:166;stroke-width:2;stroke-miterlimit:10;stroke:#dc3545;fill:none;animation:_ngcontent-%COMP%_stroke 1.5s cubic-bezier(.65,0,.45,1) forwards}.cross-an[_ngcontent-%COMP%]   .cross[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;display:block;stroke-width:2;stroke:#dc3545;stroke-miterlimit:10;margin:10% auto;animation:_ngcontent-%COMP%_fill .8s ease-in-out .8s forwards,_ngcontent-%COMP%_scale .6s ease-in-out 1.3s both}.cross-an[_ngcontent-%COMP%]   .cross__path[_ngcontent-%COMP%]{transform-origin:50% 50%;stroke-dasharray:48;stroke-dashoffset:48}.cross-an[_ngcontent-%COMP%]   .cross__path--right[_ngcontent-%COMP%], .cross-an[_ngcontent-%COMP%]   .cross__path--left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_stroke .8s cubic-bezier(.65,0,.45,1) .9s forwards}@keyframes _ngcontent-%COMP%_stroke{to{stroke-dashoffset:0}}@keyframes _ngcontent-%COMP%_scale{0%,to{transform:none}50%{transform:scale3d(1.1,1.1,1)}}@keyframes _ngcontent-%COMP%_fill{to{box-shadow:inset 0 0 0 30px #fff}}.navbar[_ngcontent-%COMP%]{padding:0;align-items:center;height:60px}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:transparent}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{outline:0;box-shadow:none}.btn-group[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{content:"\\f140";font-family:Material Design Icons!important;border:0;vertical-align:unset}.navbar-brand[_ngcontent-%COMP%]{margin-right:0}.profile-info[_ngcontent-%COMP%]{text-align:center}.infoField[_ngcontent-%COMP%]{margin:auto;display:flex;justify-content:space-between}.infoField[_ngcontent-%COMP%]   .h6[_ngcontent-%COMP%]{display:inline-block;position:relative;padding-left:32px}.infoField[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:inline-block;line-height:2;font-size:14px}.infoField[_ngcontent-%COMP%]   .mdi[_ngcontent-%COMP%]{position:absolute;left:0;top:-10px}.nav-two[_ngcontent-%COMP%]{display:none}.nav-two[_ngcontent-%COMP%]   .edit-profile[_ngcontent-%COMP%]{display:inline-block;margin-right:5px;opacity:.7;transition:opacity .15s linear}.nav-two[_ngcontent-%COMP%]   .edit-profile[_ngcontent-%COMP%]:hover{opacity:1}.hand[_ngcontent-%COMP%], .hand[_ngcontent-%COMP%]:hover{cursor:pointer}.loading[_ngcontent-%COMP%]{height:3px;width:100%;position:absolute;overflow:hidden;border-radius:0 0 5px 5px;bottom:0}.loading[_ngcontent-%COMP%]:before{display:block;position:absolute;content:"";right:-200px;width:200px;height:3px;background-color:#01aaa9;animation:_ngcontent-%COMP%_loading 2s linear infinite}@keyframes _ngcontent-%COMP%_loading{0%{right:-200px;width:30%}50%{width:40%}70%{width:50%}80%{right:60%}90%{right:85%}to{right:100%;border-radius:4px}}.form-group[_ngcontent-%COMP%]   .captcha-style[_ngcontent-%COMP%]{width:100%!important;border:1px solid #dcdfe4;border-radius:4px;position:relative;display:flex;justify-content:space-between;background-color:#fff}.form-group[_ngcontent-%COMP%]   captcha[_ngcontent-%COMP%]   .BDC_CaptchaDiv[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   captcha[_ngcontent-%COMP%]   .BDC_CaptchaDiv[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{outline:0!important}.form-group[_ngcontent-%COMP%]   captcha[_ngcontent-%COMP%]   .BDC_CaptchaDiv[_ngcontent-%COMP%]   .BDC_CaptchaImageDiv[_ngcontent-%COMP%]{display:inline-flex!important;align-items:center!important}.form-group[_ngcontent-%COMP%]   captcha[_ngcontent-%COMP%]   .BDC_CaptchaDiv[_ngcontent-%COMP%]   .BDC_CaptchaImageDiv[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{opacity:0!important;cursor:default;pointer-events:none;touch-action:none}.form-group[_ngcontent-%COMP%]   captcha[_ngcontent-%COMP%]   .BDC_CaptchaDiv[_ngcontent-%COMP%]   .BDC_CaptchaIconsDiv[_ngcontent-%COMP%]{position:absolute;left:0;height:100%;display:inline-flex!important;margin-left:25px!important;border-right:1px solid #dcdfe4}.form-group[_ngcontent-%COMP%]   captcha[_ngcontent-%COMP%]   .BDC_CaptchaDiv[_ngcontent-%COMP%]   .BDC_CaptchaIconsDiv[_ngcontent-%COMP%]   .BDC_ReloadLink[_ngcontent-%COMP%]{opacity:.7;transition:opacity .1s linear}.form-group[_ngcontent-%COMP%]   captcha[_ngcontent-%COMP%]   .BDC_CaptchaDiv[_ngcontent-%COMP%]   .BDC_CaptchaIconsDiv[_ngcontent-%COMP%]   .BDC_ReloadLink[_ngcontent-%COMP%]:hover{opacity:1;color:#004d6b}.form-group[_ngcontent-%COMP%]   captcha[_ngcontent-%COMP%]   .BDC_CaptchaDiv[_ngcontent-%COMP%]   .BDC_CaptchaIconsDiv[_ngcontent-%COMP%]   .BDC_ReloadLink[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none!important}.form-group[_ngcontent-%COMP%]   captcha[_ngcontent-%COMP%]   .BDC_CaptchaDiv[_ngcontent-%COMP%]   .BDC_CaptchaIconsDiv[_ngcontent-%COMP%]   .BDC_ReloadLink[_ngcontent-%COMP%]:before{content:"\\f453";font-family:Material Design Icons;position:absolute;top:16px;left:-15px;font-size:22px;padding:0 4px;border-radius:3px}.form-group[_ngcontent-%COMP%]   captcha[_ngcontent-%COMP%]   .BDC_CaptchaDiv[_ngcontent-%COMP%]   .BDC_CaptchaIconsDiv[_ngcontent-%COMP%]   .BDC_SoundLink[_ngcontent-%COMP%]{position:relative;opacity:.7;transition:opacity .1s linear}.form-group[_ngcontent-%COMP%]   captcha[_ngcontent-%COMP%]   .BDC_CaptchaDiv[_ngcontent-%COMP%]   .BDC_CaptchaIconsDiv[_ngcontent-%COMP%]   .BDC_SoundLink[_ngcontent-%COMP%]:hover{opacity:1;color:#004d6b}.form-group[_ngcontent-%COMP%]   captcha[_ngcontent-%COMP%]   .BDC_CaptchaDiv[_ngcontent-%COMP%]   .BDC_CaptchaIconsDiv[_ngcontent-%COMP%]   .BDC_SoundLink[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none!important}.form-group[_ngcontent-%COMP%]   captcha[_ngcontent-%COMP%]   .BDC_CaptchaDiv[_ngcontent-%COMP%]   .BDC_CaptchaIconsDiv[_ngcontent-%COMP%]   .BDC_SoundLink[_ngcontent-%COMP%]:before{content:"";font-family:Material Design Icons;position:absolute;bottom:-50px;left:-5px;font-size:20px;padding:0 4px;border-radius:3px}.form-group[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:40px!important;padding:5px 15px;text-align:center;background-color:#fff;border:1px solid #dcdfe4;border-radius:4px;letter-spacing:5px}.form-group[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, .form-group[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, .form-group[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#8793a1}.form-group.passRules[_ngcontent-%COMP%]   #Password_rules[_ngcontent-%COMP%], .form-group.passRules[_ngcontent-%COMP%]   #NewPassword_rules[_ngcontent-%COMP%]{-webkit-transition:all .3s linear;-moz-transition:all .3s linear;-o-transition:all .3s linear;transition:all .3s linear;opacity:0;max-height:0}.form-group.passRules[_ngcontent-%COMP%]:focus-within   #Password_rules[_ngcontent-%COMP%], .form-group.passRules[_ngcontent-%COMP%]:focus-within   #NewPassword_rules[_ngcontent-%COMP%]{max-height:150px;opacity:1}#Password_rules[_ngcontent-%COMP%], #NewPassword_rules[_ngcontent-%COMP%]{padding-right:15px;margin-top:3px;color:#dc3545}#Password_rules[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], #NewPassword_rules[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative;font-size:12px;padding-right:15px}#Password_rules[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before, #NewPassword_rules[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{content:"\\f156";font-family:Material Design Icons;position:absolute;font-size:12px;right:0}.rull-done[_ngcontent-%COMP%]{color:#006400}.rull-done[_ngcontent-%COMP%]:before{content:"\\f12c"!important}.footer-link[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;color:#76808a}.footer-link[_ngcontent-%COMP%]:hover, .footer-link[_ngcontent-%COMP%]:focus{color:#4b5157;outline:0;text-decoration-line:underline!important}.after-layout[_ngcontent-%COMP%]{padding-top:60px;height:auto;background-size:cover;background-repeat:no-repeat;background-position:center;transition:all .25s ease}.after-layout[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{height:60px}.main-container[_ngcontent-%COMP%]{height:auto}.profile-nav[_ngcontent-%COMP%]{display:flex;align-items:center}.profile-nav[_ngcontent-%COMP%]   .app-icon[_ngcontent-%COMP%]{height:30px;width:30px}.profile-nav[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{padding:0 30px}.profile-nav[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{content:none}.profile-nav[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]{font-size:13px;position:relative;color:#fff!important;display:flex;align-items:center;font-weight:400;cursor:pointer}.profile-nav[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .mdi-account[_ngcontent-%COMP%]{color:#00a796;font-size:20px}.profile-footer[_ngcontent-%COMP%]{text-align:center;position:absolute;bottom:0;right:0;left:0}.right-menu[_ngcontent-%COMP%]{background-color:#fff;position:fixed;top:60px;z-index:10}.profile-message[_ngcontent-%COMP%]{text-align:right;display:flex;align-items:center}.app-tile[_ngcontent-%COMP%]{text-align:right;display:flex;align-items:center;min-height:100px}.chevron[_ngcontent-%COMP%]{display:inline-block;line-height:0}.chevron[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{width:1rem;height:1.25rem;display:inline-block;position:relative;margin-right:.5rem}.chevron[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{top:.5rem;position:absolute;width:.6rem;height:.1rem;background-color:#fff;display:inline-block;transition:all .2s ease}.chevron[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{left:0;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.chevron[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-of-type{right:0;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.chevron[_ngcontent-%COMP%]   .arrow.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.chevron[_ngcontent-%COMP%]   .arrow.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-of-type{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.funds-section[_ngcontent-%COMP%]{position:relative;width:100%;text-align:right}.funds-section[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.funds-section[_ngcontent-%COMP%]   .chart-section[_ngcontent-%COMP%]{position:relative}.funds-section[_ngcontent-%COMP%]   .chart-number[_ngcontent-%COMP%]{z-index:100;position:absolute;inset:0;display:flex;justify-content:center;align-items:center;pointer-events:none}.funds-section[_ngcontent-%COMP%]   .chart-width[_ngcontent-%COMP%]{width:80%;min-height:50vh;margin:auto}.funds-section[_ngcontent-%COMP%]   .chart-legends[_ngcontent-%COMP%]{display:flex;justify-content:center}.funds-section[_ngcontent-%COMP%]   .chart-legends[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-bottom:0}.funds-section[_ngcontent-%COMP%]   .chart-legends[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding-right:20px;margin-bottom:10px;display:flex;justify-content:space-between}.funds-section[_ngcontent-%COMP%]   .chart-legends[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child:before{content:"";position:absolute;right:0;top:4px;background-color:#f8a91c;width:12px;height:12px;border-radius:50%}.funds-section[_ngcontent-%COMP%]   .chart-legends[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2):before{content:"";position:absolute;right:0;top:4px;background-color:#9e61f2;width:12px;height:12px;border-radius:50%}.funds-section[_ngcontent-%COMP%]   .chart-legends[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3):before{content:"";position:absolute;right:0;top:4px;background-color:#16c13b;width:12px;height:12px;border-radius:50%}.funds-section[_ngcontent-%COMP%]   .chart-legends[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4):before{content:"";position:absolute;right:0;top:4px;background-color:#7cdaff;width:12px;height:12px;border-radius:50%}.funds-section[_ngcontent-%COMP%]   .chart-legends[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5):before{content:"";position:absolute;right:0;top:4px;background-color:#cbd83c;width:12px;height:12px;border-radius:50%}.funds-section[_ngcontent-%COMP%]   .chart-legends[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6):before{content:"";position:absolute;right:0;top:4px;background-color:#8aead5;width:12px;height:12px;border-radius:50%}.feild-title[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:space-between;align-items:center;background-color:#fafafb;font-weight:500;color:#848e99}.feild-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;font-weight:500}.bg-primary[_ngcontent-%COMP%]{background-color:#004d6b!important}.nav-shortcut[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.nav-shortcut[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;font-weight:200;margin:0 10px}.nav-shortcut[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:15px;margin-left:4px}.navbar-toggler[_ngcontent-%COMP%]{border:0;color:#fff;padding:0 15px;background-color:transparent}.navbar-toggler[_ngcontent-%COMP%]:focus{background-color:transparent}.navbar-collapse[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]{position:absolute;top:0;background-color:#fff;width:75%;height:100vh;left:100%;z-index:20;transition:left .5s,box-shadow .8s}.navbar-collapse.collapse[_ngcontent-%COMP%]:not(.show){display:block}.navbar-collapse.show[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]{left:25%;box-shadow:-220px 0 #00000080}.navbar-collapse.collapsing[_ngcontent-%COMP%]{transition:none}.profile-menu-item[_ngcontent-%COMP%]{display:flex;min-height:60px;align-items:center;font-weight:400;position:relative;padding-right:1rem;color:#848e99;transition:all .2s ease-in-out;font-size:13px}.profile-menu-item.active[_ngcontent-%COMP%], .profile-menu-item[_ngcontent-%COMP%]:hover{color:#00a796;background-color:#fafafc}.profile-menu-item.active[_ngcontent-%COMP%]   .mdi[_ngcontent-%COMP%], .profile-menu-item[_ngcontent-%COMP%]:hover   .mdi[_ngcontent-%COMP%]{color:#00a796}.profile-menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:right}.profile-menu-item[_ngcontent-%COMP%]   .mdi[_ngcontent-%COMP%]{color:#9aa6b3;display:block;font-size:22px}.dropdown-menu[_ngcontent-%COMP%]{display:block;padding:0;top:.4rem;left:1.2rem;text-align:right;font-size:14px;border-radius:4px;border:0;box-shadow:0 0 5px 1px #172c4a26;opacity:0;transform:scale(0);transition:all .5s ease;transform-origin:top left}.dropdown-menu.show[_ngcontent-%COMP%]{transform:scale(1);opacity:1}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{color:#76808a!important;padding:1.5rem 2rem;transition:all .2s linear}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   .mdi[_ngcontent-%COMP%]{color:#76808a;transition:all .2s linear}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:active{color:inherit;background-color:inherit}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover, .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover   .mdi[_ngcontent-%COMP%]{color:#00a796!important}.dropdown-menu[_ngcontent-%COMP%]   .mdi[_ngcontent-%COMP%]{position:relative;line-height:24px;font-size:22px}.dropdown-menu[_ngcontent-%COMP%]   .mdi[_ngcontent-%COMP%]:before{position:absolute;top:0;right:-2px}.dropdown-menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:2rem}.edit-link[_ngcontent-%COMP%]{text-align:left}.edit-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00a796;font-size:12px;font-weight:400}.h-70[_ngcontent-%COMP%]{height:85px}.funds-tile[_ngcontent-%COMP%]{position:relative;text-align:center}.funds-tile[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.image-tile[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#dcfafa;height:100%}.image-tile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;width:auto}.account-changes[_ngcontent-%COMP%]{min-height:320px;display:flex;flex-direction:column;justify-content:space-between;padding:1rem 1rem 0}.er404[_ngcontent-%COMP%]{font-family:Myriad Pro;font-size:100px;color:#dc3545}.twoFactor-button[_ngcontent-%COMP%]{background-color:#c9c9c9;border:0;padding:6px 14px;border-radius:4px;cursor:pointer;transition:all .25s ease-in-out;font-size:12px;font-weight:400;width:90px;color:#fff}.twoFactor-button[_ngcontent-%COMP%]:hover, .twoFactor-button[_ngcontent-%COMP%]:focus{background-color:#bebec9!important}.twoFactor-button[_ngcontent-%COMP%]:hover.active, .twoFactor-button[_ngcontent-%COMP%]:focus.active{background-color:#dca03e!important}.twoFactor-button[_ngcontent-%COMP%]:active.active{background-color:#c9c9c9!important}.twoFactor-button.active[_ngcontent-%COMP%]{color:#fff;border:0;background-color:#f7af3ee6!important}.twoFactor-state[_ngcontent-%COMP%]{font-weight:400}.twoFactor-state.active[_ngcontent-%COMP%]{color:#34a853}.security-rules[_ngcontent-%COMP%]{text-align:center;padding:0 1rem .5rem;background-color:#ffffff4d}.security-rules[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-right:1rem}.security-rules[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;list-style:disc}.simple-keyboard-con[_ngcontent-%COMP%]{display:none;direction:ltr}.btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;transition:all .2s ease-in-out}.text-primary[_ngcontent-%COMP%]{color:#005568!important}.text-m2[_ngcontent-%COMP%]{color:#00a796}.btn-next[_ngcontent-%COMP%]{width:140px;position:relative;height:36px;font-size:12px}.btn-next[_ngcontent-%COMP%]:after{content:"\\f141";font-family:Material Design Icons!important;position:absolute;left:12px;font-size:18px}.btn-outline-back[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:140px;position:relative;height:36px;font-size:12px;border-color:#848e99;color:#848e99!important}.btn-outline-back[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}.btn-outline-back[_ngcontent-%COMP%]:active, .btn-outline-back[_ngcontent-%COMP%]:focus{background-color:#cecece}.link[_ngcontent-%COMP%]{color:#0085ff}.font-smaller[_ngcontent-%COMP%]{font-size:12px}.font-larger[_ngcontent-%COMP%]{font-size:16px}.font-weight-medium[_ngcontent-%COMP%]{font-weight:500}.title[_ngcontent-%COMP%]{color:#005568;font-weight:700;font-size:18px;margin:0}.mdi-information-outline[_ngcontent-%COMP%]:before{line-height:0}.modal[_ngcontent-%COMP%]{direction:rtl}#modal-password[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{min-height:400px}#modal-password[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{height:60px;justify-content:center;align-items:center;position:relative;color:#004d6b;padding:0}#modal-password[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:12px;left:-3px}#modal-password[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{position:relative}#modal-password[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-actions[_ngcontent-%COMP%]{position:absolute;left:12px;bottom:26px}#modal-password[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;background-color:transparent;padding:0}.label-ph2[_ngcontent-%COMP%]{margin-bottom:0;font-size:12px}.title-sm[_ngcontent-%COMP%]{font-weight:500;font-size:14px;margin-bottom:0}.switch-custom[_ngcontent-%COMP%]{position:relative}.switch-custom[_ngcontent-%COMP%]   .btn-switch[_ngcontent-%COMP%]{box-shadow:none!important}.switch-custom[_ngcontent-%COMP%]   .btn-switch[_ngcontent-%COMP%]   .switch-front[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:20px;height:20px;border-radius:12px;box-shadow:0 0 3px #0003!important;padding:0;position:absolute;left:3px;top:3px;background-color:#fff;transition:all .5s cubic-bezier(.42,0,.13,1.4);z-index:5}.switch-custom[_ngcontent-%COMP%]   .btn-switch[_ngcontent-%COMP%]   .switch-front[_ngcontent-%COMP%]:before{content:"\\f156";font-family:Material Design Icons!important;font-size:12px;color:#9e9e9e;font-weight:700}.switch-custom[_ngcontent-%COMP%]   .btn-switch[_ngcontent-%COMP%]   .switch-back[_ngcontent-%COMP%]{content:"";position:absolute;left:0;top:0;width:44px;height:26px;border-radius:15px;background-color:#9e9e9e;transition:all .5s cubic-bezier(.42,0,.13,1.4);overflow:hidden}.switch-custom[_ngcontent-%COMP%]   .btn-switch[_ngcontent-%COMP%]   .switch-back[_ngcontent-%COMP%]:before{transition:all .5s ease;content:"";position:absolute;background-color:#c3c3c3;width:44px;height:26px;left:0;transform:scale(1);border-radius:15px;font-weight:700}.switch-custom[_ngcontent-%COMP%]   .btn-switch.active[_ngcontent-%COMP%]   .switch-front[_ngcontent-%COMP%]{left:21px;background-color:#fff}.switch-custom[_ngcontent-%COMP%]   .btn-switch.active[_ngcontent-%COMP%]   .switch-front[_ngcontent-%COMP%]:before{content:"\\f12c";color:#00a796}.switch-custom[_ngcontent-%COMP%]   .btn-switch.active[_ngcontent-%COMP%]   .switch-back[_ngcontent-%COMP%]{background-color:#00a796}.switch-custom[_ngcontent-%COMP%]   .btn-switch.active[_ngcontent-%COMP%]   .switch-back[_ngcontent-%COMP%]:before{transform:scale(0)}.change-box[_ngcontent-%COMP%]{min-height:480px;display:flex;flex-direction:column;justify-content:space-between;padding:2rem 0 1rem}.twofa-Method[_ngcontent-%COMP%]{min-height:100px;align-items:center;padding:1rem 1rem 1.5rem}.disabled2fa[_ngcontent-%COMP%]{color:#c1c1c1!important;cursor:default!important;pointer-events:none!important}.disabled2fa[_ngcontent-%COMP%]   .btn-switch[_ngcontent-%COMP%]{opacity:.5}.disabled2fa[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:#c1c1c1!important}.G-QR[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.copy-QR[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border:1px solid #efefef;border-radius:4px;overflow:hidden}.copy-QR[_ngcontent-%COMP%]   kbd[_ngcontent-%COMP%]{text-align:left;padding:0;color:#4b5157;border:0;background-color:transparent;margin-left:5px;margin-right:5px;white-space:nowrap;overflow:auto;line-height:2.5}.copy-QR[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:3px 10px;border-top-left-radius:0;border-bottom-left-radius:0;background-color:#efefef}.copy-QR[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover, .copy-QR[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active, .copy-QR[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{background-color:#e2e2e2}.line-h2[_ngcontent-%COMP%]{line-height:2;padding:5px}.backupCodes[_ngcontent-%COMP%]{text-align:center}.backupCodes[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{letter-spacing:2px;font-size:18px;margin:1rem;color:#4b5157;line-height:2.5}.googleAuth-download[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.googleAuth-download[_ngcontent-%COMP%]:hover{filter:drop-shadow(0 0 5px rgba(0,0,0,.15))}.alert[_ngcontent-%COMP%]{padding:1rem 4rem 1rem 1rem;position:relative;font-size:14px;font-weight:400}.alert[_ngcontent-%COMP%]:before{font-family:Material Design Icons!important;font-size:24px;right:12px;top:0;position:absolute;text-align:center;height:100%;display:flex;align-items:center;justify-content:center}.alert.info[_ngcontent-%COMP%]{color:#04496b;background-color:#d9edf7;border-color:#bce8f1}.alert.info[_ngcontent-%COMP%]:before{content:"\\f2fd"}.alert.info.primary[_ngcontent-%COMP%]{background-color:#e7f4f7!important;border-color:#448a9a!important;color:#005568!important}.alert.info.secondary[_ngcontent-%COMP%]{background-color:#e6f4f4!important;border-color:#65c8c7!important;color:#00a9a7!important}.alert.success[_ngcontent-%COMP%]{background-color:#dff0d8;border-color:#d6e9c6;color:#28a745}.alert.success[_ngcontent-%COMP%]:before{content:"\\f6e8"}.alert.success.primary[_ngcontent-%COMP%]{background-color:#e7f4f7!important;border-color:#448a9a!important;color:#005568!important}.alert.success.secondary[_ngcontent-%COMP%]{background-color:#e6f4f4!important;border-color:#65c8c7!important;color:#00a9a7!important}.alert.send[_ngcontent-%COMP%]{background-color:#dff0d8;border-color:#d6e9c6;color:#28a745}.alert.send[_ngcontent-%COMP%]:before{content:"\\f180"}.alert.warning[_ngcontent-%COMP%]{background-color:#fcf8e3;border-color:#fbeed5}.alert.warning[_ngcontent-%COMP%]:before{content:"\\f02a"}.alert.warning.primary[_ngcontent-%COMP%]{background-color:#e7f4f7!important;border-color:#448a9a!important;color:#005568!important}.alert.warning.secondary[_ngcontent-%COMP%]{background-color:#e6f4f4!important;border-color:#65c8c7!important;color:#00a9a7!important}.alert.error[_ngcontent-%COMP%], .alert.danger[_ngcontent-%COMP%]{background-color:#f2dede;border-color:#eed3d7}.alert.error[_ngcontent-%COMP%]:before, .alert.danger[_ngcontent-%COMP%]:before{content:"\\f15a"}.alert.error.primary[_ngcontent-%COMP%], .alert.danger.primary[_ngcontent-%COMP%]{background-color:#e7f4f7!important;border-color:#448a9a!important;color:#005568!important}.alert.error.secondary[_ngcontent-%COMP%], .alert.danger.secondary[_ngcontent-%COMP%]{background-color:#e6f4f4!important;border-color:#65c8c7!important;color:#00a9a7!important}.ad-area[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-end;width:100%;height:220px}.ad-area[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{color:#7843a6;font-size:12px;font-weight:500;padding-right:1rem;padding-left:1rem;border-radius:20px;background-color:#fff;border:0;transition:all .3s}.ad-area[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]:hover{background-color:#e1e5e9!important}.ad-area[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]:focus, .ad-area[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]:active{color:#7843a6!important;background-color:#e1e5e9!important;border:0!important;box-shadow:none!important}@media (min-width: 575.98px){.header[_ngcontent-%COMP%]{margin:0 1rem 1.5rem;padding:1.5rem 0}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:3rem}.BG[_ngcontent-%COMP%]{align-items:center}.container[_ngcontent-%COMP%]{height:auto;max-width:1140px;background-color:transparent}.main-section[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-bottom:1.5rem}.right-col[_ngcontent-%COMP%]{padding:0 1rem;min-height:600px!important;border-radius:4px;padding:1rem}@media (max-width: 980px){.right-col[_ngcontent-%COMP%]{display:none}}.after-layout[_ngcontent-%COMP%]{padding-top:60px;height:100%;display:flex;align-items:flex-start}.profile-nav[_ngcontent-%COMP%]   .app-icon[_ngcontent-%COMP%]{height:40px;width:40px}.profile-nav[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]{transform:scale(1)}.right-menu[_ngcontent-%COMP%]{background-color:#fff;position:fixed;top:56px;z-index:10}.profile-menu-item[_ngcontent-%COMP%]{font-size:14px}.profile-menu-item[_ngcontent-%COMP%]:before{top:-4px;right:0;border-radius:0 0 5px 5px;opacity:0;transition:all .2s ease-in-out}.profile-menu-item[_ngcontent-%COMP%]:hover:before{top:1px;opacity:1}.profile-menu-item.active[_ngcontent-%COMP%]:before{top:1px;height:4px;opacity:1}.account-changes[_ngcontent-%COMP%]{padding:2.5rem 3.5rem 0}}@media (min-width: 767.98px){.right-col[_ngcontent-%COMP%]{padding:1rem;border-radius:4px;margin-top:0;margin-bottom:0}.right-menu[_ngcontent-%COMP%]{background-color:#fff;position:relative;top:auto;z-index:10}.profile-menu-item[_ngcontent-%COMP%]{font-weight:400;position:relative;padding:.5rem}.navbar-expand-md[_ngcontent-%COMP%]   .navbar-collapse[_ngcontent-%COMP%]{display:none!important}.h-70[_ngcontent-%COMP%]{height:70px}.profile-nav[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{padding:0 15px 0 0}}@media (min-width: 991.98px){.main-container[_ngcontent-%COMP%]{height:100%}.organizer[_ngcontent-%COMP%]{padding:0 1.5rem;margin:0 1.5rem}.right-col[_ngcontent-%COMP%]{padding:2rem;box-shadow:none}.right-col[_ngcontent-%COMP%]:before{content:none}.left-col[_ngcontent-%COMP%]{display:block}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none}.row-styled[_ngcontent-%COMP%]{box-shadow:0 0 20px #0000001a,0 0 4px #00000026;overflow:hidden}.funds-section[_ngcontent-%COMP%]   .chart-legends[_ngcontent-%COMP%]{justify-content:flex-start}.security-rules[_ngcontent-%COMP%]{padding:0 2rem 2rem;line-height:1.8}}@media (min-width: 1199.98px){.right-col[_ngcontent-%COMP%]{padding:2rem;box-shadow:none}.organizer[_ngcontent-%COMP%]{padding:0 3rem;margin:0 3rem}.dropdown-menu[_ngcontent-%COMP%]{top:2rem;left:0}}
/*# sourceMappingURL=login.component-RVFH4LW4.css.map */`],
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var Jc = ( () => {
    let t = class t {
        constructor(i) {
            this.modalService = i,
            this.hasPushState = !1,
            sn(window, "popstate").subscribe( () => {
                this.hasPushState = !1,
                this.hasOpenModals() && this.dismissAll()
            }
            )
        }
        get activeInstances() {
            return this.modalService.activeInstances
        }
        hasOpenModals() {
            return this.modalService.hasOpenModals()
        }
        open(i, r) {
            let s = this.modalService.open(i, r);
            return this.pushState(),
            this.listenToModal(s),
            s
        }
        dismissAll() {
            this.modalService.dismissAll()
        }
        listenToModal(i) {
            i.result.then(null, () => {
                this.popState()
            }
            ).catch(console.log)
        }
        pushState() {
            history.pushState(null, ""),
            this.hasPushState = !0
        }
        popState() {
            this.hasPushState && history.go(-1),
            this.hasPushState = !1
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(RE))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var za = ( () => {
    let t = class t {
        constructor() {
            this.injector = z(On),
            this.userDeviceService = z(ur),
            this.icons = Wt,
            this.environment = z(bn),
            this.IsMobile = xi(this.userDeviceService.deviceType$.pipe(We(i => i === _n.Mobile)))
        }
        get modalService() {
            return this._modalService || (this._modalService = this.injector.get(Jc)),
            this._modalService
        }
        get localStorageService() {
            return this._localStorageService || (this._localStorageService = this.injector.get(Tc)),
            this._localStorageService
        }
        openModal(i, r) {
            this.modalService.open(i, r)
        }
        closeModal() {
            this.modalService.dismissAll()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["ng-component"]],
        decls: 0,
        vars: 0,
        template: function(r, s) {},
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var Lz = ["logoutModalContent"]
  , z9 = e => ({
    disabled: e
});
function Bz(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div", 1)(1, "span", 2),
        oe(2, "\u062E\u0631\u0648\u062C \u0627\u0632 \u062D\u0633\u0627\u0628"),
        W(),
        H(3, "button", 3),
        Qe("click", function() {
            yt(n);
            let r = Te();
            return St(r.onCloseModal(!1))
        }),
        me(4, "span", 4),
        W()(),
        H(5, "div", 5)(6, "div")(7, "span"),
        oe(8, "\u0622\u06CC\u0627 \u0645\u0627\u06CC\u0644 \u0628\u0647 \u062E\u0631\u0648\u062C \u0627\u0632 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC \u062E\u0648\u062F \u0647\u0633\u062A\u06CC\u062F\u061F"),
        W()()(),
        H(9, "div", 6)(10, "div", 7)(11, "button", 8),
        Qe("click", function() {
            yt(n);
            let r = Te();
            return St(r.onCloseModal(!1))
        }),
        oe(12, " \u0627\u0646\u0635\u0631\u0627\u0641 "),
        W(),
        H(13, "button", 9),
        Qe("click", function() {
            yt(n);
            let r = Te();
            return St(r.onCloseModal(!0))
        }),
        me(14, "svg-icon", 10),
        oe(15, " \u062E\u0631\u0648\u062C "),
        W()()()
    }
    if (e & 2) {
        let n = Te();
        Q(3),
        ye("ngClass", Dn(6, z9, n.isLogout())),
        Q(8),
        ye("ngClass", Dn(8, z9, n.isLogout())),
        Q(2),
        ye("ngClass", Dn(10, z9, n.isLogout())),
        Q(),
        fr("spin me-1 " + (n.isLogout() ? "d-inline-block" : "d-none")),
        ye("iconName", n.icons.Loading)
    }
}
var Ape = ( () => {
    let t = class t extends za {
        constructor() {
            super(...arguments),
            this.logoutModalContent = sc("logoutModalContent"),
            this.logoutEmitter = $t(),
            this.userActivityEmitter = $t(),
            this.isLogout = wt(!1),
            this.isShowUserActivity = wt(!1)
        }
        ngOnInit() {
            this.openModalWithDelay()
        }
        openModalWithDelay() {
            setTimeout( () => {
                this.openModal()
            }
            , xg)
        }
        openModal() {
            let i = {
                backdrop: "static",
                keyboard: !1
            };
            this.modalService.open(this.logoutModalContent(), i).result.then( () => {}
            , () => {
                this.doAfterCloseOperations()
            }
            )
        }
        doAfterCloseOperations() {
            this.isShowUserActivity() ? this.userActivityEmitter.emit(this.isShowUserActivity()) : this.logoutEmitter.emit(this.isLogout())
        }
        onCloseModal(i) {
            this.isLogout() !== !0 && (this.isLogout.set(i),
            i ? this.logoutEmitter.emit(this.isLogout()) : this.modalService.dismissAll())
        }
    }
    ;
    t.\u0275fac = ( () => {
        let i;
        return function(s) {
            return (i || (i = Tn(t)))(s || t)
        }
    }
    )(),
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["logout-modal"]],
        viewQuery: function(r, s) {
            r & 1 && cc(s.logoutModalContent, Lz, 5),
            r & 2 && lc()
        },
        outputs: {
            logoutEmitter: "logoutEmitter",
            userActivityEmitter: "userActivityEmitter"
        },
        features: [bo],
        decls: 2,
        vars: 0,
        consts: [["logoutModalContent", ""], [1, "modal-header", "align-items-center", "d-flex", "justify-content-between"], [1, "modal-title"], ["type", "button", "aria-label", "Close", 1, "btn-close", "m-0", 3, "click", "ngClass"], ["aria-hidden", "true"], [1, "modal-body", "py-4"], [1, "modal-footer"], [1, "m-0", "d-flex", "gap-2"], ["type", "button", 1, "btn", "btn-outline-secondary", 3, "click", "ngClass"], ["type", "button", "data-cy", "sign-out-confirm", 1, "btn", "btn-danger", "px-5", 3, "click", "ngClass"], ["width", "18", "height", "18", 3, "iconName"]],
        template: function(r, s) {
            r & 1 && at(0, Bz, 16, 12, "ng-template", null, 0, hc)
        },
        dependencies: [Fn, ir],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var Rpe = ( () => {
    let t = class t {
        constructor(i, r) {
            this.authService = i,
            this.environment = r
        }
        ngOnInit() {
            this.authService.isLoggedIn() ? window.location.href = this.environment.appUrl : this.authService.completeAuthentication()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(Mt(Ir),Mt(bn))
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["ng-component"]],
        decls: 0,
        vars: 0,
        template: function(r, s) {},
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var Hpe = ( () => {
    let t = class t extends za {
        constructor() {
            super(...arguments),
            this.authService = z(Ir),
            this.message = wt(""),
            this.description = $0( () => `${this.message()}\u060C \u0628\u0631\u0627\u06CC \u0627\u0639\u0645\u0627\u0644 \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A\u060C \u0646\u06CC\u0627\u0632 \u0628\u0647 \u0648\u0631\u0648\u062F \u0645\u062C\u062F\u062F \u0645\u06CC \u0628\u0627\u0634\u062F.`)
        }
        updateMessage(i) {
            this.message.set(i)
        }
        onCloseModal(i) {
            i && this.exit(),
            this.modalService.dismissAll()
        }
        exit() {
            this.authService.logout()
        }
    }
    ;
    t.\u0275fac = ( () => {
        let i;
        return function(s) {
            return (i || (i = Tn(t)))(s || t)
        }
    }
    )(),
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["reload-app"]],
        features: [bo],
        decls: 15,
        vars: 1,
        consts: [[1, "modal-header", "align-items-center", "d-flex", "justify-content-between"], [1, "modal-title"], ["type", "button", "aria-label", "Close", 1, "btn-close", "m-0", 3, "click"], ["aria-hidden", "true"], [1, "modal-body", "py-4"], [1, "modal-footer"], [1, "m-0", "d-flex", "gap-2"], ["type", "button", 1, "btn", "btn-outline-secondary", 3, "click"], ["data-cy", "sign-out-confirm", "type", "button", 1, "btn", "btn-success", "px-5", 3, "click"]],
        template: function(r, s) {
            r & 1 && (H(0, "div", 0)(1, "span", 1),
            oe(2, "\u0648\u0631\u0648\u062F \u0645\u062C\u062F\u062F"),
            W(),
            H(3, "button", 2),
            Qe("click", function() {
                return s.onCloseModal(!1)
            }),
            me(4, "span", 3),
            W()(),
            H(5, "div", 4)(6, "div")(7, "span"),
            oe(8),
            W()()(),
            H(9, "div", 5)(10, "div", 6)(11, "button", 7),
            Qe("click", function() {
                return s.onCloseModal(!1)
            }),
            oe(12, "\u0627\u0646\u0635\u0631\u0627\u0641"),
            W(),
            H(13, "button", 8),
            Qe("click", function() {
                return s.onCloseModal(!0)
            }),
            oe(14, " \u0648\u0631\u0648\u062F \u0645\u062C\u062F\u062F "),
            W()()()),
            r & 2 && (Q(8),
            Mn(s.description()))
        },
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var ra, Y = typeof window < "u" ? window : void 0, ts = typeof globalThis < "u" ? globalThis : Y, _O = Array.prototype, _T = _O.forEach, yT = _O.indexOf, Cs = ts?.navigator, qe = ts?.document, es = ts?.location, om = ts?.fetch, am = ts != null && ts.XMLHttpRequest && "withCredentials"in new ts.XMLHttpRequest ? ts.XMLHttpRequest : void 0, ST = ts?.AbortController, Li = Cs?.userAgent, _t = Y ?? {}, Ja = {
    DEBUG: !1,
    LIB_VERSION: "1.203.1"
}, K9 = "$copy_autocapture", Uz = ["$snapshot", "$pageview", "$pageleave", "$set", "survey dismissed", "survey sent", "survey shown", "$identify", "$groupidentify", "$create_alias", "$$client_ingestion_warning", "$web_experiment_applied", "$feature_enrollment_update", "$feature_flag_called"];
(function(e) {
    e.GZipJS = "gzip-js",
    e.Base64 = "base64"
}
)(ra || (ra = {}));
function Ft(e, t) {
    return e.indexOf(t) !== -1
}
var Ep = function(e) {
    return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "")
}
  , cm = function(e) {
    return e.replace(/^\$/, "")
}
  , Hz = Array.isArray
  , yO = Object.prototype
  , SO = yO.hasOwnProperty
  , Tp = yO.toString
  , oi = Hz || function(e) {
    return Tp.call(e) === "[object Array]"
}
  , Gs = e => typeof e == "function"
  , zn = e => e === Object(e) && !oi(e)
  , lh = e => {
    if (zn(e)) {
        for (var t in e)
            if (SO.call(e, t))
                return !1;
        return !0
    }
    return !1
}
  , Ze = e => e === void 0
  , Qi = e => Tp.call(e) == "[object String]"
  , bT = e => Qi(e) && e.trim().length === 0
  , rl = e => e === null
  , gn = e => Ze(e) || rl(e)
  , Dr = e => Tp.call(e) == "[object Number]"
  , O0 = e => Tp.call(e) === "[object Boolean]"
  , Gz = e => e instanceof FormData
  , Vz = e => Ft(Uz, e)
  , bO = e => {
    var t = {
        _log: function(n) {
            if (Y && (Ja.DEBUG || _t.POSTHOG_DEBUG) && !Ze(Y.console) && Y.console) {
                for (var i = ("__rrweb_original__"in Y.console[n]) ? Y.console[n].__rrweb_original__ : Y.console[n], r = arguments.length, s = new Array(r > 1 ? r - 1 : 0), o = 1; o < r; o++)
                    s[o - 1] = arguments[o];
                i(e, ...s)
            }
        },
        info: function() {
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
                i[r] = arguments[r];
            t._log("log", ...i)
        },
        warn: function() {
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
                i[r] = arguments[r];
            t._log("warn", ...i)
        },
        error: function() {
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
                i[r] = arguments[r];
            t._log("error", ...i)
        },
        critical: function() {
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
                i[r] = arguments[r];
            console.error(e, ...i)
        },
        uninitializedWarning: n => {
            t.error("You must initialize PostHog before calling ".concat(n))
        }
        ,
        createLogger: n => bO("".concat(e, " ").concat(n))
    };
    return t
}
  , tt = bO("[PostHog.js]")
  , Lr = tt.createLogger
  , $z = Lr("[ExternalScriptsLoader]")
  , xT = (e, t, n) => {
    if (e.config.disable_external_dependency_loading)
        return $z.warn("".concat(t, " was requested but loading of external scripts is disabled.")),
        n("Loading of external scripts is disabled");
    var i = () => {
        if (!qe)
            return n("document not found");
        var r = qe.createElement("script");
        r.type = "text/javascript",
        r.crossOrigin = "anonymous",
        r.src = t,
        r.onload = a => n(void 0, a),
        r.onerror = a => n(a);
        var s, o = qe.querySelectorAll("body > script");
        o.length > 0 ? (s = o[0].parentNode) === null || s === void 0 || s.insertBefore(r, o[0]) : qe.body.appendChild(r)
    }
    ;
    qe != null && qe.body ? i() : qe?.addEventListener("DOMContentLoaded", i)
}
;
function wT(e, t) {
    var n = Object.keys(e);
    if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(e);
        t && (i = i.filter(function(r) {
            return Object.getOwnPropertyDescriptor(e, r).enumerable
        })),
        n.push.apply(n, i)
    }
    return n
}
function we(e) {
    for (var t = 1; t < arguments.length; t++) {
        var n = arguments[t] != null ? arguments[t] : {};
        t % 2 ? wT(Object(n), !0).forEach(function(i) {
            Ie(e, i, n[i])
        }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : wT(Object(n)).forEach(function(i) {
            Object.defineProperty(e, i, Object.getOwnPropertyDescriptor(n, i))
        })
    }
    return e
}
function Ie(e, t, n) {
    return t in e ? Object.defineProperty(e, t, {
        value: n,
        enumerable: !0,
        configurable: !0,
        writable: !0
    }) : e[t] = n,
    e
}
function xO(e, t) {
    if (e == null)
        return {};
    var n, i, r = function(o, a) {
        if (o == null)
            return {};
        var c, l, u = {}, h = Object.keys(o);
        for (l = 0; l < h.length; l++)
            c = h[l],
            a.indexOf(c) >= 0 || (u[c] = o[c]);
        return u
    }(e, t);
    if (Object.getOwnPropertySymbols) {
        var s = Object.getOwnPropertySymbols(e);
        for (i = 0; i < s.length; i++)
            n = s[i],
            t.indexOf(n) >= 0 || Object.prototype.propertyIsEnumerable.call(e, n) && (r[n] = e[n])
    }
    return r
}
_t.__PosthogExtensions__ = _t.__PosthogExtensions__ || {},
_t.__PosthogExtensions__.loadExternalDependency = (e, t, n) => {
    var i = "/static/".concat(t, ".js") + "?v=".concat(e.version);
    if (t === "remote-config" && (i = "/array/".concat(e.config.token, "/config.js")),
    t === "toolbar") {
        var r = 3e5
          , s = Math.floor(Date.now() / r) * r;
        i = "".concat(i, "&t=").concat(s)
    }
    var o = e.requestRouter.endpointFor("assets", i);
    xT(e, o, n)
}
,
_t.__PosthogExtensions__.loadSiteApp = (e, t, n) => {
    var i = e.requestRouter.endpointFor("api", t);
    xT(e, i, n)
}
;
var op = {};
function hh(e, t, n) {
    if (oi(e)) {
        if (_T && e.forEach === _T)
            e.forEach(t, n);
        else if ("length"in e && e.length === +e.length) {
            for (var i = 0, r = e.length; i < r; i++)
                if (i in e && t.call(n, e[i], i) === op)
                    return
        }
    }
}
function un(e, t, n) {
    if (!gn(e)) {
        if (oi(e))
            return hh(e, t, n);
        if (Gz(e)) {
            for (var i of e.entries())
                if (t.call(n, i[1], i[0]) === op)
                    return
        } else
            for (var r in e)
                if (SO.call(e, r) && t.call(n, e[r], r) === op)
                    return
    }
}
var Nr = function(e) {
    for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++)
        n[i - 1] = arguments[i];
    return hh(n, function(r) {
        for (var s in r)
            r[s] !== void 0 && (e[s] = r[s])
    }),
    e
};
function ip(e) {
    for (var t = Object.keys(e), n = t.length, i = new Array(n); n--; )
        i[n] = [t[n], e[t[n]]];
    return i
}
var CT = function(e) {
    try {
        return e()
    } catch {
        return
    }
}
  , Wz = function(e) {
    return function() {
        try {
            for (var t = arguments.length, n = new Array(t), i = 0; i < t; i++)
                n[i] = arguments[i];
            return e.apply(this, n)
        } catch (r) {
            tt.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),
            tt.critical(r)
        }
    }
}
  , ap = function(e) {
    var t = {};
    return un(e, function(n, i) {
        Qi(n) && n.length > 0 && (t[i] = n)
    }),
    t
};
function jz(e, t) {
    return n = e,
    i = s => Qi(s) && !rl(t) ? s.slice(0, t) : s,
    r = new Set,
    function s(o, a) {
        return o !== Object(o) ? i ? i(o, a) : o : r.has(o) ? void 0 : (r.add(o),
        oi(o) ? (c = [],
        hh(o, l => {
            c.push(s(l))
        }
        )) : (c = {},
        un(o, (l, u) => {
            r.has(l) || (c[u] = s(l, u))
        }
        )),
        c);
        var c
    }(n);
    var n, i, r
}
var Za = function() {
    function e(t) {
        return t && (t.preventDefault = e.preventDefault,
        t.stopPropagation = e.stopPropagation),
        t
    }
    return e.preventDefault = function() {
        this.returnValue = !1
    }
    ,
    e.stopPropagation = function() {
        this.cancelBubble = !0
    }
    ,
    function(t, n, i, r, s) {
        if (t)
            if (t.addEventListener && !r)
                t.addEventListener(n, i, !!s);
            else {
                var o = "on" + n
                  , a = t[o];
                t[o] = function(c, l, u) {
                    return function(h) {
                        if (h = h || e(Y?.event)) {
                            var d, f = !0;
                            Gs(u) && (d = u(h));
                            var g = l.call(c, h);
                            return d !== !1 && g !== !1 || (f = !1),
                            f
                        }
                    }
                }(t, i, a)
            }
        else
            tt.error("No valid element provided to register_event")
    }
}();
function wO(e, t) {
    for (var n = 0; n < e.length; n++)
        if (t(e[n]))
            return e[n]
}
var CO = "$people_distinct_id"
  , z1 = "__alias"
  , X1 = "__timers"
  , ET = "$autocapture_disabled_server_side"
  , lm = "$heatmaps_enabled_server_side"
  , TT = "$exception_capture_enabled_server_side"
  , OT = "$web_vitals_enabled_server_side"
  , EO = "$dead_clicks_enabled_server_side"
  , MT = "$web_vitals_allowed_metrics"
  , um = "$session_recording_enabled_server_side"
  , PT = "$console_log_recording_enabled_server_side"
  , kT = "$session_recording_network_payload_capture"
  , AT = "$session_recording_canvas_recording"
  , IT = "$replay_sample_rate"
  , RT = "$replay_minimum_duration"
  , DT = "$replay_script_config"
  , cp = "$sesid"
  , K1 = "$session_is_sampled"
  , Y9 = "$session_recording_url_trigger_activated_session"
  , Q9 = "$session_recording_event_trigger_activated_session"
  , uh = "$enabled_feature_flags"
  , rp = "$early_access_features"
  , Y1 = "$stored_person_properties"
  , E0 = "$stored_group_properties"
  , hm = "$surveys"
  , q2 = "$surveys_activated"
  , lp = "$flag_call_reported"
  , Ka = "$user_state"
  , dm = "$client_session_props"
  , fm = "$capture_rate_limit"
  , pm = "$initial_campaign_params"
  , gm = "$initial_referrer_info"
  , mm = "$initial_person_info"
  , up = "$epp"
  , TO = "__POSTHOG_TOOLBAR__"
  , NT = "$posthog_cklsh"
  , qz = [CO, z1, "__cmpns", X1, um, lm, cp, uh, Ka, rp, E0, Y1, hm, lp, dm, fm, pm, gm, up]
  , z2 = Lr("[FeatureFlags]")
  , J9 = "$active_feature_flags"
  , X2 = "$override_feature_flags"
  , FT = "$feature_flag_payloads"
  , LT = e => {
    var t = {};
    for (var [n,i] of ip(e || {}))
        i && (t[n] = i);
    return t
}
  , vm = class {
    constructor(t) {
        Ie(this, "_override_warning", !1),
        Ie(this, "_hasLoadedFlags", !1),
        Ie(this, "_requestInFlight", !1),
        Ie(this, "_reloadingDisabled", !1),
        Ie(this, "_additionalReloadRequested", !1),
        Ie(this, "_decideCalled", !1),
        Ie(this, "_flagsLoadedFromRemote", !1),
        this.instance = t,
        this.featureFlagEventHandlers = []
    }
    decide() {
        if (this.instance.config.__preview_remote_config)
            this._decideCalled = !0;
        else {
            var t = !this._reloadDebouncer && (this.instance.config.advanced_disable_feature_flags || this.instance.config.advanced_disable_feature_flags_on_first_load);
            this._callDecideEndpoint({
                disableFlags: t
            })
        }
    }
    get hasLoadedFlags() {
        return this._hasLoadedFlags
    }
    getFlags() {
        return Object.keys(this.getFlagVariants())
    }
    getFlagVariants() {
        var t = this.instance.get_property(uh)
          , n = this.instance.get_property(X2);
        if (!n)
            return t || {};
        for (var i = Nr({}, t), r = Object.keys(n), s = 0; s < r.length; s++)
            i[r[s]] = n[r[s]];
        return this._override_warning || (z2.warn(" Overriding feature flags!", {
            enabledFlags: t,
            overriddenFlags: n,
            finalFlags: i
        }),
        this._override_warning = !0),
        i
    }
    getFlagPayloads() {
        return this.instance.get_property(FT) || {}
    }
    reloadFeatureFlags() {
        this._reloadingDisabled || this.instance.config.advanced_disable_feature_flags || this._reloadDebouncer || (this._reloadDebouncer = setTimeout( () => {
            this._callDecideEndpoint()
        }
        , 5))
    }
    clearDebouncer() {
        clearTimeout(this._reloadDebouncer),
        this._reloadDebouncer = void 0
    }
    ensureFlagsLoaded() {
        this._hasLoadedFlags || this._requestInFlight || this._reloadDebouncer || this.reloadFeatureFlags()
    }
    setAnonymousDistinctId(t) {
        this.$anon_distinct_id = t
    }
    setReloadingPaused(t) {
        this._reloadingDisabled = t
    }
    _callDecideEndpoint(t) {
        if (this.clearDebouncer(),
        !this.instance.config.advanced_disable_decide)
            if (this._requestInFlight)
                this._additionalReloadRequested = !0;
            else {
                var n = {
                    token: this.instance.config.token,
                    distinct_id: this.instance.get_distinct_id(),
                    groups: this.instance.getGroups(),
                    $anon_distinct_id: this.$anon_distinct_id,
                    person_properties: this.instance.get_property(Y1),
                    group_properties: this.instance.get_property(E0)
                };
                (t != null && t.disableFlags || this.instance.config.advanced_disable_feature_flags) && (n.disable_flags = !0),
                this._requestInFlight = !0,
                this.instance._send_request({
                    method: "POST",
                    url: this.instance.requestRouter.endpointFor("api", "/decide/?v=3"),
                    data: n,
                    compression: this.instance.config.disable_compression ? void 0 : ra.Base64,
                    timeout: this.instance.config.feature_flag_request_timeout_ms,
                    callback: i => {
                        var r, s, o = !0;
                        i.statusCode === 200 && (this.$anon_distinct_id = void 0,
                        o = !1),
                        this._requestInFlight = !1,
                        this._decideCalled || (this._decideCalled = !0,
                        this.instance._onRemoteConfig((s = i.json) !== null && s !== void 0 ? s : {})),
                        n.disable_flags || (this._flagsLoadedFromRemote = !o,
                        this.receivedFeatureFlags((r = i.json) !== null && r !== void 0 ? r : {}, o),
                        this._additionalReloadRequested && (this._additionalReloadRequested = !1,
                        this._callDecideEndpoint()))
                    }
                })
            }
    }
    getFeatureFlag(t) {
        var n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
        if (this._hasLoadedFlags || this.getFlags() && this.getFlags().length > 0) {
            var i, r, s, o, a, c = this.getFlagVariants()[t], l = "".concat(c), u = this.instance.get_property(lp) || {};
            return (n.send_event || !("send_event"in n)) && (!(t in u) || !u[t].includes(l)) && (oi(u[t]) ? u[t].push(l) : u[t] = [l],
            (i = this.instance.persistence) === null || i === void 0 || i.register({
                [lp]: u
            }),
            this.instance.capture("$feature_flag_called", {
                $feature_flag: t,
                $feature_flag_response: c,
                $feature_flag_payload: this.getFeatureFlagPayload(t) || null,
                $feature_flag_bootstrapped_response: ((r = this.instance.config.bootstrap) === null || r === void 0 || (s = r.featureFlags) === null || s === void 0 ? void 0 : s[t]) || null,
                $feature_flag_bootstrapped_payload: ((o = this.instance.config.bootstrap) === null || o === void 0 || (a = o.featureFlagPayloads) === null || a === void 0 ? void 0 : a[t]) || null,
                $used_bootstrap_value: !this._flagsLoadedFromRemote
            })),
            c
        }
        z2.warn('getFeatureFlag for key "' + t + `" failed. Feature flags didn't load in time.`)
    }
    getFeatureFlagPayload(t) {
        return this.getFlagPayloads()[t]
    }
    isFeatureEnabled(t) {
        var n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
        if (this._hasLoadedFlags || this.getFlags() && this.getFlags().length > 0)
            return !!this.getFeatureFlag(t, n);
        z2.warn('isFeatureEnabled for key "' + t + `" failed. Feature flags didn't load in time.`)
    }
    addFeatureFlagsHandler(t) {
        this.featureFlagEventHandlers.push(t)
    }
    removeFeatureFlagsHandler(t) {
        this.featureFlagEventHandlers = this.featureFlagEventHandlers.filter(n => n !== t)
    }
    receivedFeatureFlags(t, n) {
        if (this.instance.persistence) {
            this._hasLoadedFlags = !0;
            var i = this.getFlagVariants()
              , r = this.getFlagPayloads();
            (function(s, o) {
                var a = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}
                  , c = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {}
                  , l = s.featureFlags
                  , u = s.featureFlagPayloads;
                if (l)
                    if (oi(l)) {
                        var h = {};
                        if (l)
                            for (var d = 0; d < l.length; d++)
                                h[l[d]] = !0;
                        o && o.register({
                            [J9]: l,
                            [uh]: h
                        })
                    } else {
                        var f = l
                          , g = u;
                        s.errorsWhileComputingFlags && (f = we(we({}, a), f),
                        g = we(we({}, c), g)),
                        o && o.register({
                            [J9]: Object.keys(LT(f)),
                            [uh]: f || {},
                            [FT]: g || {}
                        })
                    }
            }
            )(t, this.instance.persistence, i, r),
            this._fireFeatureFlagsCallbacks(n)
        }
    }
    override(t) {
        var n = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
        if (!this.instance.__loaded || !this.instance.persistence)
            return z2.uninitializedWarning("posthog.feature_flags.override");
        if (this._override_warning = n,
        t === !1)
            this.instance.persistence.unregister(X2);
        else if (oi(t)) {
            for (var i = {}, r = 0; r < t.length; r++)
                i[t[r]] = !0;
            this.instance.persistence.register({
                [X2]: i
            })
        } else
            this.instance.persistence.register({
                [X2]: t
            })
    }
    onFeatureFlags(t) {
        if (this.addFeatureFlagsHandler(t),
        this._hasLoadedFlags) {
            var {flags: n, flagVariants: i} = this._prepareFeatureFlagsForCallbacks();
            t(n, i)
        }
        return () => this.removeFeatureFlagsHandler(t)
    }
    updateEarlyAccessFeatureEnrollment(t, n) {
        var i, r = (this.instance.get_property(rp) || []).find(c => c.flagKey === t), s = {
            ["$feature_enrollment/".concat(t)]: n
        }, o = {
            $feature_flag: t,
            $feature_enrollment: n,
            $set: s
        };
        r && (o.$early_access_feature_name = r.name),
        this.instance.capture("$feature_enrollment_update", o),
        this.setPersonPropertiesForFlags(s, !1);
        var a = we(we({}, this.getFlagVariants()), {}, {
            [t]: n
        });
        (i = this.instance.persistence) === null || i === void 0 || i.register({
            [J9]: Object.keys(LT(a)),
            [uh]: a
        }),
        this._fireFeatureFlagsCallbacks()
    }
    getEarlyAccessFeatures(t) {
        var n = arguments.length > 1 && arguments[1] !== void 0 && arguments[1]
          , i = this.instance.get_property(rp);
        if (i && !n)
            return t(i);
        this.instance._send_request({
            url: this.instance.requestRouter.endpointFor("api", "/api/early_access_features/?token=".concat(this.instance.config.token)),
            method: "GET",
            callback: r => {
                var s;
                if (r.json) {
                    var o = r.json.earlyAccessFeatures;
                    return (s = this.instance.persistence) === null || s === void 0 || s.register({
                        [rp]: o
                    }),
                    t(o)
                }
            }
        })
    }
    _prepareFeatureFlagsForCallbacks() {
        var t = this.getFlags()
          , n = this.getFlagVariants();
        return {
            flags: t.filter(i => n[i]),
            flagVariants: Object.keys(n).filter(i => n[i]).reduce( (i, r) => (i[r] = n[r],
            i), {})
        }
    }
    _fireFeatureFlagsCallbacks(t) {
        var {flags: n, flagVariants: i} = this._prepareFeatureFlagsForCallbacks();
        this.featureFlagEventHandlers.forEach(r => r(n, i, {
            errorsLoading: t
        }))
    }
    setPersonPropertiesForFlags(t) {
        var n = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1]
          , i = this.instance.get_property(Y1) || {};
        this.instance.register({
            [Y1]: we(we({}, i), t)
        }),
        n && this.instance.reloadFeatureFlags()
    }
    resetPersonPropertiesForFlags() {
        this.instance.unregister(Y1)
    }
    setGroupPropertiesForFlags(t) {
        var n = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1]
          , i = this.instance.get_property(E0) || {};
        Object.keys(i).length !== 0 && Object.keys(i).forEach(r => {
            i[r] = we(we({}, i[r]), t[r]),
            delete t[r]
        }
        ),
        this.instance.register({
            [E0]: we(we({}, i), t)
        }),
        n && this.instance.reloadFeatureFlags()
    }
    resetGroupPropertiesForFlags(t) {
        if (t) {
            var n = this.instance.get_property(E0) || {};
            this.instance.register({
                [E0]: we(we({}, n), {}, {
                    [t]: {}
                })
            })
        } else
            this.instance.unregister(E0)
    }
}
;
Math.trunc || (Math.trunc = function(e) {
    return e < 0 ? Math.ceil(e) : Math.floor(e)
}
),
Number.isInteger || (Number.isInteger = function(e) {
    return Dr(e) && isFinite(e) && Math.floor(e) === e
}
);
var BT = "0123456789abcdef", _m = class e {
    constructor(t) {
        if (this.bytes = t,
        t.length !== 16)
            throw new TypeError("not 128-bit length")
    }
    static fromFieldsV7(t, n, i, r) {
        if (!Number.isInteger(t) || !Number.isInteger(n) || !Number.isInteger(i) || !Number.isInteger(r) || t < 0 || n < 0 || i < 0 || r < 0 || t > 0xffffffffffff || n > 4095 || i > 1073741823 || r > 4294967295)
            throw new RangeError("invalid field value");
        var s = new Uint8Array(16);
        return s[0] = t / Math.pow(2, 40),
        s[1] = t / Math.pow(2, 32),
        s[2] = t / Math.pow(2, 24),
        s[3] = t / Math.pow(2, 16),
        s[4] = t / Math.pow(2, 8),
        s[5] = t,
        s[6] = 112 | n >>> 8,
        s[7] = n,
        s[8] = 128 | i >>> 24,
        s[9] = i >>> 16,
        s[10] = i >>> 8,
        s[11] = i,
        s[12] = r >>> 24,
        s[13] = r >>> 16,
        s[14] = r >>> 8,
        s[15] = r,
        new e(s)
    }
    toString() {
        for (var t = "", n = 0; n < this.bytes.length; n++)
            t = t + BT.charAt(this.bytes[n] >>> 4) + BT.charAt(15 & this.bytes[n]),
            n !== 3 && n !== 5 && n !== 7 && n !== 9 || (t += "-");
        if (t.length !== 36)
            throw new Error("Invalid UUIDv7 was generated");
        return t
    }
    clone() {
        return new e(this.bytes.slice(0))
    }
    equals(t) {
        return this.compareTo(t) === 0
    }
    compareTo(t) {
        for (var n = 0; n < 16; n++) {
            var i = this.bytes[n] - t.bytes[n];
            if (i !== 0)
                return Math.sign(i)
        }
        return 0
    }
}
, ym = class {
    constructor() {
        Ie(this, "timestamp", 0),
        Ie(this, "counter", 0),
        Ie(this, "random", new Sm)
    }
    generate() {
        var t = this.generateOrAbort();
        if (Ze(t)) {
            this.timestamp = 0;
            var n = this.generateOrAbort();
            if (Ze(n))
                throw new Error("Could not generate UUID after timestamp reset");
            return n
        }
        return t
    }
    generateOrAbort() {
        var t = Date.now();
        if (t > this.timestamp)
            this.timestamp = t,
            this.resetCounter();
        else {
            if (!(t + 1e4 > this.timestamp))
                return;
            this.counter++,
            this.counter > 4398046511103 && (this.timestamp++,
            this.resetCounter())
        }
        return _m.fromFieldsV7(this.timestamp, Math.trunc(this.counter / Math.pow(2, 30)), this.counter & Math.pow(2, 30) - 1, this.random.nextUint32())
    }
    resetCounter() {
        this.counter = 1024 * this.random.nextUint32() + (1023 & this.random.nextUint32())
    }
}
, UT, OO = e => {
    if (typeof UUIDV7_DENY_WEAK_RNG < "u" && UUIDV7_DENY_WEAK_RNG)
        throw new Error("no cryptographically strong RNG available");
    for (var t = 0; t < e.length; t++)
        e[t] = 65536 * Math.trunc(65536 * Math.random()) + Math.trunc(65536 * Math.random());
    return e
}
;
Y && !Ze(Y.crypto) && crypto.getRandomValues && (OO = e => crypto.getRandomValues(e));
var Sm = class {
    constructor() {
        Ie(this, "buffer", new Uint32Array(8)),
        Ie(this, "cursor", 1 / 0)
    }
    nextUint32() {
        return this.cursor >= this.buffer.length && (OO(this.buffer),
        this.cursor = 0),
        this.buffer[this.cursor++]
    }
}
  , tl = () => zz().toString()
  , zz = () => (UT || (UT = new ym)).generate()
  , Xz = "Thu, 01 Jan 1970 00:00:00 GMT"
  , $1 = ""
  , Kz = /[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;
function Yz(e, t) {
    if (t) {
        var n = function(r) {
            var s = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : qe;
            if ($1)
                return $1;
            if (!s || ["localhost", "127.0.0.1"].includes(r))
                return "";
            for (var o = r.split("."), a = Math.min(o.length, 8), c = "dmn_chk_" + tl(), l = new RegExp("(^|;)\\s*" + c + "=1"); !$1 && a--; ) {
                var u = o.slice(a).join(".")
                  , h = c + "=1;domain=." + u;
                s.cookie = h,
                l.test(s.cookie) && (s.cookie = h + ";expires=" + Xz,
                $1 = u)
            }
            return $1
        }(e);
        if (!n) {
            var i = (r => {
                var s = r.match(Kz);
                return s ? s[0] : ""
            }
            )(e);
            i !== n && tt.info("Warning: cookie subdomain discovery mismatch", i, n),
            n = i
        }
        return n ? "; domain=." + n : ""
    }
    return ""
}
var ec = {
    is_supported: () => !!qe,
    error: function(e) {
        tt.error("cookieStore error: " + e)
    },
    get: function(e) {
        if (qe) {
            try {
                for (var t = e + "=", n = qe.cookie.split(";").filter(s => s.length), i = 0; i < n.length; i++) {
                    for (var r = n[i]; r.charAt(0) == " "; )
                        r = r.substring(1, r.length);
                    if (r.indexOf(t) === 0)
                        return decodeURIComponent(r.substring(t.length, r.length))
                }
            } catch {}
            return null
        }
    },
    parse: function(e) {
        var t;
        try {
            t = JSON.parse(ec.get(e)) || {}
        } catch {}
        return t
    },
    set: function(e, t, n, i, r) {
        if (qe)
            try {
                var s = ""
                  , o = ""
                  , a = Yz(qe.location.hostname, i);
                if (n) {
                    var c = new Date;
                    c.setTime(c.getTime() + 24 * n * 60 * 60 * 1e3),
                    s = "; expires=" + c.toUTCString()
                }
                r && (o = "; secure");
                var l = e + "=" + encodeURIComponent(JSON.stringify(t)) + s + "; SameSite=Lax; path=/" + a + o;
                return l.length > 3686.4 && tt.warn("cookieStore warning: large cookie, len=" + l.length),
                qe.cookie = l,
                l
            } catch {
                return
            }
    },
    remove: function(e, t) {
        try {
            ec.set(e, "", -1, t)
        } catch {
            return
        }
    }
}
  , Z9 = null
  , Si = {
    is_supported: function() {
        if (!rl(Z9))
            return Z9;
        var e = !0;
        if (Ze(Y))
            e = !1;
        else
            try {
                var t = "__mplssupport__";
                Si.set(t, "xyz"),
                Si.get(t) !== '"xyz"' && (e = !1),
                Si.remove(t)
            } catch {
                e = !1
            }
        return e || tt.error("localStorage unsupported; falling back to cookie store"),
        Z9 = e,
        e
    },
    error: function(e) {
        tt.error("localStorage error: " + e)
    },
    get: function(e) {
        try {
            return Y?.localStorage.getItem(e)
        } catch (t) {
            Si.error(t)
        }
        return null
    },
    parse: function(e) {
        try {
            return JSON.parse(Si.get(e)) || {}
        } catch {}
        return null
    },
    set: function(e, t) {
        try {
            Y?.localStorage.setItem(e, JSON.stringify(t))
        } catch (n) {
            Si.error(n)
        }
    },
    remove: function(e) {
        try {
            Y?.localStorage.removeItem(e)
        } catch (t) {
            Si.error(t)
        }
    }
}
  , Qz = ["distinct_id", cp, K1, up, mm]
  , K2 = we(we({}, Si), {}, {
    parse: function(e) {
        try {
            var t = {};
            try {
                t = ec.parse(e) || {}
            } catch {}
            var n = Nr(t, JSON.parse(Si.get(e) || "{}"));
            return Si.set(e, n),
            n
        } catch {}
        return null
    },
    set: function(e, t, n, i, r, s) {
        try {
            Si.set(e, t, void 0, void 0, s);
            var o = {};
            Qz.forEach(a => {
                t[a] && (o[a] = t[a])
            }
            ),
            Object.keys(o).length && ec.set(e, o, n, i, r, s)
        } catch (a) {
            Si.error(a)
        }
    },
    remove: function(e, t) {
        try {
            Y?.localStorage.removeItem(e),
            ec.remove(e, t)
        } catch (n) {
            Si.error(n)
        }
    }
})
  , Y2 = {}
  , Jz = {
    is_supported: function() {
        return !0
    },
    error: function(e) {
        tt.error("memoryStorage error: " + e)
    },
    get: function(e) {
        return Y2[e] || null
    },
    parse: function(e) {
        return Y2[e] || null
    },
    set: function(e, t) {
        Y2[e] = t
    },
    remove: function(e) {
        delete Y2[e]
    }
}
  , S0 = null
  , Yi = {
    is_supported: function() {
        if (!rl(S0))
            return S0;
        if (S0 = !0,
        Ze(Y))
            S0 = !1;
        else
            try {
                var e = "__support__";
                Yi.set(e, "xyz"),
                Yi.get(e) !== '"xyz"' && (S0 = !1),
                Yi.remove(e)
            } catch {
                S0 = !1
            }
        return S0
    },
    error: function(e) {
        tt.error("sessionStorage error: ", e)
    },
    get: function(e) {
        try {
            return Y?.sessionStorage.getItem(e)
        } catch (t) {
            Yi.error(t)
        }
        return null
    },
    parse: function(e) {
        try {
            return JSON.parse(Yi.get(e)) || null
        } catch {}
        return null
    },
    set: function(e, t) {
        try {
            Y?.sessionStorage.setItem(e, JSON.stringify(t))
        } catch (n) {
            Yi.error(n)
        }
    },
    remove: function(e) {
        try {
            Y?.sessionStorage.removeItem(e)
        } catch (t) {
            Yi.error(t)
        }
    }
}
  , Zz = ["localhost", "127.0.0.1"]
  , dh = e => {
    var t = qe?.createElement("a");
    return Ze(t) ? null : (t.href = e,
    t)
}
  , gh = function(e, t) {
    return !!function(n) {
        try {
            new RegExp(n)
        } catch {
            return !1
        }
        return !0
    }(t) && new RegExp(t).test(e)
}
  , eX = function(e) {
    var t, n, i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "&", r = [];
    return un(e, function(s, o) {
        Ze(s) || Ze(o) || o === "undefined" || (t = encodeURIComponent((a => a instanceof File)(s) ? s.name : s.toString()),
        n = encodeURIComponent(o),
        r[r.length] = n + "=" + t)
    }),
    r.join(i)
}
  , hp = function(e, t) {
    for (var n, i = ((e.split("#")[0] || "").split("?")[1] || "").split("&"), r = 0; r < i.length; r++) {
        var s = i[r].split("=");
        if (s[0] === t) {
            n = s;
            break
        }
    }
    if (!oi(n) || n.length < 2)
        return "";
    var o = n[1];
    try {
        o = decodeURIComponent(o)
    } catch {
        tt.error("Skipping decoding for malformed query param: " + o)
    }
    return o.replace(/\+/g, " ")
}
  , dp = function(e, t) {
    var n = e.match(new RegExp(t + "=([^&]*)"));
    return n ? n[1] : null
}
  , Vs = "Mobile"
  , fp = "iOS"
  , sa = "Android"
  , i5 = "Tablet"
  , MO = sa + " " + i5
  , PO = "iPad"
  , kO = "Apple"
  , AO = kO + " Watch"
  , r5 = "Safari"
  , mh = "BlackBerry"
  , IO = "Samsung"
  , RO = IO + "Browser"
  , DO = IO + " Internet"
  , P0 = "Chrome"
  , tX = P0 + " OS"
  , NO = P0 + " " + fp
  , u8 = "Internet Explorer"
  , FO = u8 + " " + Vs
  , h8 = "Opera"
  , nX = h8 + " Mini"
  , d8 = "Edge"
  , LO = "Microsoft " + d8
  , fh = "Firefox"
  , BO = fh + " " + fp
  , s5 = "Nintendo"
  , o5 = "PlayStation"
  , ph = "Xbox"
  , UO = sa + " " + Vs
  , HO = Vs + " " + r5
  , Q1 = "Windows"
  , bm = Q1 + " Phone"
  , HT = "Nokia"
  , xm = "Ouya"
  , GO = "Generic"
  , iX = GO + " " + Vs.toLowerCase()
  , VO = GO + " " + i5.toLowerCase()
  , wm = "Konqueror"
  , Rr = "(\\d+(\\.\\d+)?)"
  , em = new RegExp("Version/" + Rr)
  , rX = new RegExp(ph,"i")
  , sX = new RegExp(o5 + " \\w+","i")
  , oX = new RegExp(s5 + " \\w+","i")
  , f8 = new RegExp(mh + "|PlayBook|BB10","i")
  , aX = {
    "NT3.51": "NT 3.11",
    "NT4.0": "NT 4.0",
    "5.0": "2000",
    5.1: "XP",
    5.2: "XP",
    "6.0": "Vista",
    6.1: "7",
    6.2: "8",
    6.3: "8.1",
    6.4: "10",
    "10.0": "10"
}
  , cX = (e, t) => t && Ft(t, kO) || function(n) {
    return Ft(n, r5) && !Ft(n, P0) && !Ft(n, sa)
}(e)
  , GT = function(e, t) {
    return t = t || "",
    Ft(e, " OPR/") && Ft(e, "Mini") ? nX : Ft(e, " OPR/") ? h8 : f8.test(e) ? mh : Ft(e, "IE" + Vs) || Ft(e, "WPDesktop") ? FO : Ft(e, RO) ? DO : Ft(e, d8) || Ft(e, "Edg/") ? LO : Ft(e, "FBIOS") ? "Facebook " + Vs : Ft(e, "UCWEB") || Ft(e, "UCBrowser") ? "UC Browser" : Ft(e, "CriOS") ? NO : Ft(e, "CrMo") || Ft(e, P0) ? P0 : Ft(e, sa) && Ft(e, r5) ? UO : Ft(e, "FxiOS") ? BO : Ft(e.toLowerCase(), wm.toLowerCase()) ? wm : cX(e, t) ? Ft(e, Vs) ? HO : r5 : Ft(e, fh) ? fh : Ft(e, "MSIE") || Ft(e, "Trident/") ? u8 : Ft(e, "Gecko") ? fh : ""
}
  , lX = {
    [FO]: [new RegExp("rv:" + Rr)],
    [LO]: [new RegExp(d8 + "?\\/" + Rr)],
    [P0]: [new RegExp("(" + P0 + "|CrMo)\\/" + Rr)],
    [NO]: [new RegExp("CriOS\\/" + Rr)],
    "UC Browser": [new RegExp("(UCBrowser|UCWEB)\\/" + Rr)],
    [r5]: [em],
    [HO]: [em],
    [h8]: [new RegExp("(Opera|OPR)\\/" + Rr)],
    [fh]: [new RegExp(fh + "\\/" + Rr)],
    [BO]: [new RegExp("FxiOS\\/" + Rr)],
    [wm]: [new RegExp("Konqueror[:/]?" + Rr,"i")],
    [mh]: [new RegExp(mh + " " + Rr), em],
    [UO]: [new RegExp("android\\s" + Rr,"i")],
    [DO]: [new RegExp(RO + "\\/" + Rr)],
    [u8]: [new RegExp("(rv:|MSIE )" + Rr)],
    Mozilla: [new RegExp("rv:" + Rr)]
}
  , VT = [[new RegExp(ph + "; " + ph + " (.*?)[);]","i"), e => [ph, e && e[1] || ""]], [new RegExp(s5,"i"), [s5, ""]], [new RegExp(o5,"i"), [o5, ""]], [f8, [mh, ""]], [new RegExp(Q1,"i"), (e, t) => {
    if (/Phone/.test(t) || /WPDesktop/.test(t))
        return [bm, ""];
    if (new RegExp(Vs).test(t) && !/IEMobile\b/.test(t))
        return [Q1 + " " + Vs, ""];
    var n = /Windows NT ([0-9.]+)/i.exec(t);
    if (n && n[1]) {
        var i = n[1]
          , r = aX[i] || "";
        return /arm/i.test(t) && (r = "RT"),
        [Q1, r]
    }
    return [Q1, ""]
}
], [/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/, e => {
    if (e && e[3]) {
        var t = [e[3], e[4], e[5] || "0"];
        return [fp, t.join(".")]
    }
    return [fp, ""]
}
], [/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i, e => {
    var t = "";
    return e && e.length >= 3 && (t = Ze(e[2]) ? e[3] : e[2]),
    ["watchOS", t]
}
], [new RegExp("(" + sa + " (\\d+)\\.(\\d+)\\.?(\\d+)?|" + sa + ")","i"), e => {
    if (e && e[2]) {
        var t = [e[2], e[3], e[4] || "0"];
        return [sa, t.join(".")]
    }
    return [sa, ""]
}
], [/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i, e => {
    var t = ["Mac OS X", ""];
    if (e && e[1]) {
        var n = [e[1], e[2], e[3] || "0"];
        t[1] = n.join(".")
    }
    return t
}
], [/Mac/i, ["Mac OS X", ""]], [/CrOS/, [tX, ""]], [/Linux|debian/i, ["Linux", ""]]]
  , $T = function(e) {
    return oX.test(e) ? s5 : sX.test(e) ? o5 : rX.test(e) ? ph : new RegExp(xm,"i").test(e) ? xm : new RegExp("(" + bm + "|WPDesktop)","i").test(e) ? bm : /iPad/.test(e) ? PO : /iPod/.test(e) ? "iPod Touch" : /iPhone/.test(e) ? "iPhone" : /(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e) ? AO : f8.test(e) ? mh : /(kobo)\s(ereader|touch)/i.test(e) ? "Kobo" : new RegExp(HT,"i").test(e) ? HT : /(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e) || /(kf[a-z]+)( bui|\)).+silk\//i.test(e) ? "Kindle Fire" : /(Android|ZTE)/i.test(e) ? !new RegExp(Vs).test(e) || /(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e) ? /pixel[\daxl ]{1,6}/i.test(e) && !/pixel c/i.test(e) || /(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e) || /lmy47v/i.test(e) && !/QTAQZ3/i.test(e) ? sa : MO : sa : new RegExp("(pda|" + Vs + ")","i").test(e) ? iX : new RegExp(i5,"i").test(e) && !new RegExp(i5 + " pc","i").test(e) ? VO : ""
}
  , Q2 = "https?://(.*)"
  , uX = ["utm_source", "utm_medium", "utm_campaign", "utm_content", "utm_term", "gclid", "gad_source", "gclsrc", "dclid", "gbraid", "wbraid", "fbclid", "msclkid", "twclid", "li_fat_id", "mc_cid", "igshid", "ttclid", "rdt_cid"]
  , Hn = {
    campaignParams: function(e) {
        return qe ? this._campaignParamsFromUrl(qe.URL, e) : {}
    },
    _campaignParamsFromUrl: function(e, t) {
        var n = uX.concat(t || [])
          , i = {};
        return un(n, function(r) {
            var s = hp(e, r);
            i[r] = s || null
        }),
        i
    },
    _searchEngine: function(e) {
        return e ? e.search(Q2 + "google.([^/?]*)") === 0 ? "google" : e.search(Q2 + "bing.com") === 0 ? "bing" : e.search(Q2 + "yahoo.com") === 0 ? "yahoo" : e.search(Q2 + "duckduckgo.com") === 0 ? "duckduckgo" : null : null
    },
    _searchInfoFromReferrer: function(e) {
        var t = Hn._searchEngine(e)
          , n = t != "yahoo" ? "q" : "p"
          , i = {};
        if (!rl(t)) {
            i.$search_engine = t;
            var r = qe ? hp(qe.referrer, n) : "";
            r.length && (i.ph_keyword = r)
        }
        return i
    },
    searchInfo: function() {
        var e = qe?.referrer;
        return e ? this._searchInfoFromReferrer(e) : {}
    },
    browser: GT,
    browserVersion: function(e, t) {
        var n = GT(e, t)
          , i = lX[n];
        if (Ze(i))
            return null;
        for (var r = 0; r < i.length; r++) {
            var s = i[r]
              , o = e.match(s);
            if (o)
                return parseFloat(o[o.length - 2])
        }
        return null
    },
    browserLanguage: function() {
        return navigator.language || navigator.userLanguage
    },
    browserLanguagePrefix: function() {
        var e = this.browserLanguage();
        return typeof e == "string" ? e.split("-")[0] : void 0
    },
    os: function(e) {
        for (var t = 0; t < VT.length; t++) {
            var [n,i] = VT[t]
              , r = n.exec(e)
              , s = r && (Gs(i) ? i(r, e) : i);
            if (s)
                return s
        }
        return ["", ""]
    },
    device: $T,
    deviceType: function(e) {
        var t = $T(e);
        return t === PO || t === MO || t === "Kobo" || t === "Kindle Fire" || t === VO ? i5 : t === s5 || t === ph || t === o5 || t === xm ? "Console" : t === AO ? "Wearable" : t ? Vs : "Desktop"
    },
    referrer: function() {
        return qe?.referrer || "$direct"
    },
    referringDomain: function() {
        var e;
        return qe != null && qe.referrer && ((e = dh(qe.referrer)) === null || e === void 0 ? void 0 : e.host) || "$direct"
    },
    referrerInfo: function() {
        return {
            $referrer: this.referrer(),
            $referring_domain: this.referringDomain()
        }
    },
    initialPersonInfo: function() {
        return {
            r: this.referrer().substring(0, 1e3),
            u: es?.href.substring(0, 1e3)
        }
    },
    initialPersonPropsFromInfo: function(e) {
        var t, {r: n, u: i} = e, r = {
            $initial_referrer: n,
            $initial_referring_domain: n == null ? void 0 : n == "$direct" ? "$direct" : (t = dh(n)) === null || t === void 0 ? void 0 : t.host
        };
        if (i) {
            r.$initial_current_url = i;
            var s = dh(i);
            r.$initial_host = s?.host,
            r.$initial_pathname = s?.pathname,
            un(this._campaignParamsFromUrl(i), function(o, a) {
                r["$initial_" + cm(a)] = o
            })
        }
        return n && un(this._searchInfoFromReferrer(n), function(o, a) {
            r["$initial_" + cm(a)] = o
        }),
        r
    },
    timezone: function() {
        try {
            return Intl.DateTimeFormat().resolvedOptions().timeZone
        } catch {
            return
        }
    },
    timezoneOffset: function() {
        try {
            return new Date().getTimezoneOffset()
        } catch {
            return
        }
    },
    properties: function() {
        if (!Li)
            return {};
        var [e,t] = Hn.os(Li);
        return Nr(ap({
            $os: e,
            $os_version: t,
            $browser: Hn.browser(Li, navigator.vendor),
            $device: Hn.device(Li),
            $device_type: Hn.deviceType(Li),
            $timezone: Hn.timezone(),
            $timezone_offset: Hn.timezoneOffset()
        }), {
            $current_url: es?.href,
            $host: es?.host,
            $pathname: es?.pathname,
            $raw_user_agent: Li.length > 1e3 ? Li.substring(0, 997) + "..." : Li,
            $browser_version: Hn.browserVersion(Li, navigator.vendor),
            $browser_language: Hn.browserLanguage(),
            $browser_language_prefix: Hn.browserLanguagePrefix(),
            $screen_height: Y?.screen.height,
            $screen_width: Y?.screen.width,
            $viewport_height: Y?.innerHeight,
            $viewport_width: Y?.innerWidth,
            $lib: "web",
            $lib_version: Ja.LIB_VERSION,
            $insert_id: Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 10),
            $time: Date.now() / 1e3
        })
    },
    people_properties: function() {
        if (!Li)
            return {};
        var [e,t] = Hn.os(Li);
        return Nr(ap({
            $os: e,
            $os_version: t,
            $browser: Hn.browser(Li, navigator.vendor)
        }), {
            $browser_version: Hn.browserVersion(Li, navigator.vendor)
        })
    }
}
  , hX = ["cookie", "localstorage", "localstorage+cookie", "sessionstorage", "memory"]
  , Z1 = class {
    constructor(t) {
        this.config = t,
        this.props = {},
        this.campaign_params_saved = !1,
        this.name = (n => {
            var i = "";
            return n.token && (i = n.token.replace(/\+/g, "PL").replace(/\//g, "SL").replace(/=/g, "EQ")),
            n.persistence_name ? "ph_" + n.persistence_name : "ph_" + i + "_posthog"
        }
        )(t),
        this.storage = this.buildStorage(t),
        this.load(),
        t.debug && tt.info("Persistence loaded", t.persistence, we({}, this.props)),
        this.update_config(t, t),
        this.save()
    }
    buildStorage(t) {
        hX.indexOf(t.persistence.toLowerCase()) === -1 && (tt.critical("Unknown persistence type " + t.persistence + "; falling back to localStorage+cookie"),
        t.persistence = "localStorage+cookie");
        var n = t.persistence.toLowerCase();
        return n === "localstorage" && Si.is_supported() ? Si : n === "localstorage+cookie" && K2.is_supported() ? K2 : n === "sessionstorage" && Yi.is_supported() ? Yi : n === "memory" ? Jz : n === "cookie" ? ec : K2.is_supported() ? K2 : ec
    }
    properties() {
        var t = {};
        return un(this.props, function(n, i) {
            if (i === uh && zn(n))
                for (var r = Object.keys(n), s = 0; s < r.length; s++)
                    t["$feature/".concat(r[s])] = n[r[s]];
            else
                a = i,
                c = !1,
                (rl(o = qz) ? c : yT && o.indexOf === yT ? o.indexOf(a) != -1 : (un(o, function(l) {
                    if (c || (c = l === a))
                        return op
                }),
                c)) || (t[i] = n);
            var o, a, c
        }),
        t
    }
    load() {
        if (!this.disabled) {
            var t = this.storage.parse(this.name);
            t && (this.props = Nr({}, t))
        }
    }
    save() {
        this.disabled || this.storage.set(this.name, this.props, this.expire_days, this.cross_subdomain, this.secure, this.config.debug)
    }
    remove() {
        this.storage.remove(this.name, !1),
        this.storage.remove(this.name, !0)
    }
    clear() {
        this.remove(),
        this.props = {}
    }
    register_once(t, n, i) {
        if (zn(t)) {
            Ze(n) && (n = "None"),
            this.expire_days = Ze(i) ? this.default_expiry : i;
            var r = !1;
            if (un(t, (s, o) => {
                this.props.hasOwnProperty(o) && this.props[o] !== n || (this.props[o] = s,
                r = !0)
            }
            ),
            r)
                return this.save(),
                !0
        }
        return !1
    }
    register(t, n) {
        if (zn(t)) {
            this.expire_days = Ze(n) ? this.default_expiry : n;
            var i = !1;
            if (un(t, (r, s) => {
                t.hasOwnProperty(s) && this.props[s] !== r && (this.props[s] = r,
                i = !0)
            }
            ),
            i)
                return this.save(),
                !0
        }
        return !1
    }
    unregister(t) {
        t in this.props && (delete this.props[t],
        this.save())
    }
    update_campaign_params() {
        if (!this.campaign_params_saved) {
            var t = Hn.campaignParams(this.config.custom_campaign_params);
            lh(ap(t)) || this.register(t),
            this.campaign_params_saved = !0
        }
    }
    update_search_keyword() {
        this.register(Hn.searchInfo())
    }
    update_referrer_info() {
        this.register_once(Hn.referrerInfo(), void 0)
    }
    set_initial_person_info() {
        this.props[pm] || this.props[gm] || this.register_once({
            [mm]: Hn.initialPersonInfo()
        }, void 0)
    }
    get_referrer_info() {
        return ap({
            $referrer: this.props.$referrer,
            $referring_domain: this.props.$referring_domain
        })
    }
    get_initial_props() {
        var t = {};
        un([gm, pm], r => {
            var s = this.props[r];
            s && un(s, function(o, a) {
                t["$initial_" + cm(a)] = o
            })
        }
        );
        var n = this.props[mm];
        if (n) {
            var i = Hn.initialPersonPropsFromInfo(n);
            Nr(t, i)
        }
        return t
    }
    safe_merge(t) {
        return un(this.props, function(n, i) {
            i in t || (t[i] = n)
        }),
        t
    }
    update_config(t, n) {
        if (this.default_expiry = this.expire_days = t.cookie_expiration,
        this.set_disabled(t.disable_persistence),
        this.set_cross_subdomain(t.cross_subdomain_cookie),
        this.set_secure(t.secure_cookie),
        t.persistence !== n.persistence) {
            var i = this.buildStorage(t)
              , r = this.props;
            this.clear(),
            this.storage = i,
            this.props = r,
            this.save()
        }
    }
    set_disabled(t) {
        this.disabled = t,
        this.disabled ? this.remove() : this.save()
    }
    set_cross_subdomain(t) {
        t !== this.cross_subdomain && (this.cross_subdomain = t,
        this.remove(),
        this.save())
    }
    get_cross_subdomain() {
        return !!this.cross_subdomain
    }
    set_secure(t) {
        t !== this.secure && (this.secure = t,
        this.remove(),
        this.save())
    }
    set_event_timer(t, n) {
        var i = this.props[X1] || {};
        i[t] = n,
        this.props[X1] = i,
        this.save()
    }
    remove_event_timer(t) {
        var n = (this.props[X1] || {})[t];
        return Ze(n) || (delete this.props[X1][t],
        this.save()),
        n
    }
    get_property(t) {
        return this.props[t]
    }
    set_property(t, n) {
        this.props[t] = n,
        this.save()
    }
}
;
function pp(e) {
    var t, n;
    return ((t = JSON.stringify(e, (n = [],
    function(i, r) {
        if (zn(r)) {
            for (; n.length > 0 && n[n.length - 1] !== this; )
                n.pop();
            return n.includes(r) ? "[Circular]" : (n.push(r),
            r)
        }
        return r
    }
    ))) === null || t === void 0 ? void 0 : t.length) || 0
}
function Cm(e) {
    var t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 66060288e-1;
    if (e.size >= t && e.data.length > 1) {
        var n = Math.floor(e.data.length / 2)
          , i = e.data.slice(0, n)
          , r = e.data.slice(n);
        return [Cm({
            size: pp(i),
            data: i,
            sessionId: e.sessionId,
            windowId: e.windowId
        }), Cm({
            size: pp(r),
            data: r,
            sessionId: e.sessionId,
            windowId: e.windowId
        })].flatMap(s => s)
    }
    return [e]
}
var Ya = (e => (e[e.DomContentLoaded = 0] = "DomContentLoaded",
e[e.Load = 1] = "Load",
e[e.FullSnapshot = 2] = "FullSnapshot",
e[e.IncrementalSnapshot = 3] = "IncrementalSnapshot",
e[e.Meta = 4] = "Meta",
e[e.Custom = 5] = "Custom",
e[e.Plugin = 6] = "Plugin",
e))(Ya || {})
  , vo = (e => (e[e.Mutation = 0] = "Mutation",
e[e.MouseMove = 1] = "MouseMove",
e[e.MouseInteraction = 2] = "MouseInteraction",
e[e.Scroll = 3] = "Scroll",
e[e.ViewportResize = 4] = "ViewportResize",
e[e.Input = 5] = "Input",
e[e.TouchMove = 6] = "TouchMove",
e[e.MediaInteraction = 7] = "MediaInteraction",
e[e.StyleSheetRule = 8] = "StyleSheetRule",
e[e.CanvasMutation = 9] = "CanvasMutation",
e[e.Font = 10] = "Font",
e[e.Log = 11] = "Log",
e[e.Drag = 12] = "Drag",
e[e.StyleDeclaration = 13] = "StyleDeclaration",
e[e.Selection = 14] = "Selection",
e[e.AdoptedStyleSheet = 15] = "AdoptedStyleSheet",
e[e.CustomElement = 16] = "CustomElement",
e))(vo || {});
function WT(e) {
    var t;
    return e instanceof Element && (e.id === TO || !((t = e.closest) === null || t === void 0 || !t.call(e, ".toolbar-global-fade-container")))
}
function Op(e) {
    return !!e && e.nodeType === 1
}
function il(e, t) {
    return !!e && !!e.tagName && e.tagName.toLowerCase() === t.toLowerCase()
}
function $O(e) {
    return !!e && e.nodeType === 3
}
function WO(e) {
    return !!e && e.nodeType === 11
}
function p8(e) {
    return e ? Ep(e).split(/\s+/) : []
}
function jT(e) {
    var t = Y?.location.href;
    return !!(t && e && e.some(n => t.match(n)))
}
function gp(e) {
    var t = "";
    switch (typeof e.className) {
    case "string":
        t = e.className;
        break;
    case "object":
        t = (e.className && "baseVal"in e.className ? e.className.baseVal : null) || e.getAttribute("class") || "";
        break;
    default:
        t = ""
    }
    return p8(t)
}
function jO(e) {
    return gn(e) ? null : Ep(e).split(/(\s+)/).filter(t => vh(t)).join("").replace(/[\r\n]/g, " ").replace(/[ ]+/g, " ").substring(0, 255)
}
function Mp(e) {
    var t = "";
    return Tm(e) && !XO(e) && e.childNodes && e.childNodes.length && un(e.childNodes, function(n) {
        var i;
        $O(n) && n.textContent && (t += (i = jO(n.textContent)) !== null && i !== void 0 ? i : "")
    }),
    Ep(t)
}
function qO(e) {
    return Ze(e.target) ? e.srcElement || null : (t = e.target) !== null && t !== void 0 && t.shadowRoot ? e.composedPath()[0] || null : e.target || null;
    var t
}
var Em = ["a", "button", "form", "input", "select", "textarea", "label"];
function zO(e) {
    var t = e.parentNode;
    return !(!t || !Op(t)) && t
}
function dX(e, t) {
    var n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0
      , i = arguments.length > 3 ? arguments[3] : void 0
      , r = arguments.length > 4 ? arguments[4] : void 0;
    if (!Y || !e || il(e, "html") || !Op(e) || n != null && n.url_allowlist && !jT(n.url_allowlist) || n != null && n.url_ignorelist && jT(n.url_ignorelist))
        return !1;
    if (n != null && n.dom_event_allowlist) {
        var s = n.dom_event_allowlist;
        if (s && !s.some(f => t.type === f))
            return !1
    }
    for (var o = !1, a = [e], c = !0, l = e; l.parentNode && !il(l, "body"); )
        if (WO(l.parentNode))
            a.push(l.parentNode.host),
            l = l.parentNode.host;
        else {
            if (!(c = zO(l)))
                break;
            if (i || Em.indexOf(c.tagName.toLowerCase()) > -1)
                o = !0;
            else {
                var u = Y.getComputedStyle(c);
                u && u.getPropertyValue("cursor") === "pointer" && (o = !0)
            }
            a.push(c),
            l = c
        }
    if (!function(f, g) {
        var p = g?.element_allowlist;
        if (Ze(p))
            return !0;
        var v = function(w) {
            if (p.some(k => w.tagName.toLowerCase() === k))
                return {
                    v: !0
                }
        };
        for (var S of f) {
            var x = v(S);
            if (typeof x == "object")
                return x.v
        }
        return !1
    }(a, n) || !function(f, g) {
        var p = g?.css_selector_allowlist;
        if (Ze(p))
            return !0;
        var v = function(w) {
            if (p.some(k => w.matches(k)))
                return {
                    v: !0
                }
        };
        for (var S of f) {
            var x = v(S);
            if (typeof x == "object")
                return x.v
        }
        return !1
    }(a, n))
        return !1;
    var h = Y.getComputedStyle(e);
    if (h && h.getPropertyValue("cursor") === "pointer" && t.type === "click")
        return !0;
    var d = e.tagName.toLowerCase();
    switch (d) {
    case "html":
        return !1;
    case "form":
        return (r || ["submit"]).indexOf(t.type) >= 0;
    case "input":
    case "select":
    case "textarea":
        return (r || ["change", "click"]).indexOf(t.type) >= 0;
    default:
        return o ? (r || ["click"]).indexOf(t.type) >= 0 : (r || ["click"]).indexOf(t.type) >= 0 && (Em.indexOf(d) > -1 || e.getAttribute("contenteditable") === "true")
    }
}
function Tm(e) {
    for (var t = e; t.parentNode && !il(t, "body"); t = t.parentNode) {
        var n = gp(t);
        if (Ft(n, "ph-sensitive") || Ft(n, "ph-no-capture"))
            return !1
    }
    if (Ft(gp(e), "ph-include"))
        return !0;
    var i = e.type || "";
    if (Qi(i))
        switch (i.toLowerCase()) {
        case "hidden":
        case "password":
            return !1
        }
    var r = e.name || e.id || "";
    return !(Qi(r) && /^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g, "")))
}
function XO(e) {
    return !!(il(e, "input") && !["button", "checkbox", "submit", "reset"].includes(e.type) || il(e, "select") || il(e, "textarea") || e.getAttribute("contenteditable") === "true")
}
var KO = "(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})"
  , fX = new RegExp("^(?:".concat(KO, ")$"))
  , pX = new RegExp(KO)
  , YO = "\\d{3}-?\\d{2}-?\\d{4}"
  , gX = new RegExp("^(".concat(YO, ")$"))
  , mX = new RegExp("(".concat(YO, ")"));
function vh(e) {
    var t = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
    return !(gn(e) || Qi(e) && (e = Ep(e),
    (t ? fX : pX).test((e || "").replace(/[- ]/g, "")) || (t ? gX : mX).test(e)))
}
function QO(e) {
    var t = Mp(e);
    return vh(t = "".concat(t, " ").concat(JO(e)).trim()) ? t : ""
}
function JO(e) {
    var t = "";
    return e && e.childNodes && e.childNodes.length && un(e.childNodes, function(n) {
        var i;
        if (n && ((i = n.tagName) === null || i === void 0 ? void 0 : i.toLowerCase()) === "span")
            try {
                var r = Mp(n);
                t = "".concat(t, " ").concat(r).trim(),
                n.childNodes && n.childNodes.length && (t = "".concat(t, " ").concat(JO(n)).trim())
            } catch (s) {
                tt.error("[AutoCapture]", s)
            }
    }),
    t
}
function vX(e) {
    return function(t) {
        var n = t.map(i => {
            var r, s, o = "";
            if (i.tag_name && (o += i.tag_name),
            i.attr_class)
                for (var a of (i.attr_class.sort(),
                i.attr_class))
                    o += ".".concat(a.replace(/"/g, ""));
            var c = we(we(we(we({}, i.text ? {
                text: i.text
            } : {}), {}, {
                "nth-child": (r = i.nth_child) !== null && r !== void 0 ? r : 0,
                "nth-of-type": (s = i.nth_of_type) !== null && s !== void 0 ? s : 0
            }, i.href ? {
                href: i.href
            } : {}), i.attr_id ? {
                attr_id: i.attr_id
            } : {}), i.attributes)
              , l = {};
            return ip(c).sort( (u, h) => {
                var [d] = u
                  , [f] = h;
                return d.localeCompare(f)
            }
            ).forEach(u => {
                var [h,d] = u;
                return l[qT(h.toString())] = qT(d.toString())
            }
            ),
            o += ":",
            o += ip(c).map(u => {
                var [h,d] = u;
                return "".concat(h, '="').concat(d, '"')
            }
            ).join("")
        }
        );
        return n.join(";")
    }(function(t) {
        return t.map(n => {
            var i, r, s = {
                text: (i = n.$el_text) === null || i === void 0 ? void 0 : i.slice(0, 400),
                tag_name: n.tag_name,
                href: (r = n.attr__href) === null || r === void 0 ? void 0 : r.slice(0, 2048),
                attr_class: _X(n),
                attr_id: n.attr__id,
                nth_child: n.nth_child,
                nth_of_type: n.nth_of_type,
                attributes: {}
            };
            return ip(n).filter(o => {
                var [a] = o;
                return a.indexOf("attr__") === 0
            }
            ).forEach(o => {
                var [a,c] = o;
                return s.attributes[a] = c
            }
            ),
            s
        }
        )
    }(e))
}
function qT(e) {
    return e.replace(/"|\\"/g, '\\"')
}
function _X(e) {
    var t = e.attr__class;
    return t ? oi(t) ? t : p8(t) : void 0
}
var Om = "[SessionRecording]"
  , Mm = "redacted"
  , J2 = {
    initiatorTypes: ["audio", "beacon", "body", "css", "early-hint", "embed", "fetch", "frame", "iframe", "icon", "image", "img", "input", "link", "navigation", "object", "ping", "script", "track", "video", "xmlhttprequest"],
    maskRequestFn: e => e,
    recordHeaders: !1,
    recordBody: !1,
    recordInitialRequests: !1,
    recordPerformance: !1,
    performanceEntryTypeToObserve: ["first-input", "navigation", "paint", "resource"],
    payloadSizeLimitBytes: 1e6,
    payloadHostDenyList: [".lr-ingest.io", ".ingest.sentry.io", ".clarity.ms", "analytics.google.com"]
}
  , yX = ["authorization", "x-forwarded-for", "authorization", "cookie", "set-cookie", "x-api-key", "x-real-ip", "remote-addr", "forwarded", "proxy-authorization", "x-csrf-token", "x-csrftoken", "x-xsrf-token"]
  , SX = ["password", "secret", "passwd", "api_key", "apikey", "auth", "credentials", "mysql_pwd", "privatekey", "private_key", "token"]
  , bX = ["/s/", "/e/", "/i/"];
function zT(e, t, n, i) {
    if (gn(e))
        return e;
    var r = t?.["content-length"] || function(s) {
        return new Blob([s]).size
    }(e);
    return Qi(r) && (r = parseInt(r)),
    r > n ? Om + " ".concat(i, " body too large to record (").concat(r, " bytes)") : e
}
function XT(e, t) {
    if (gn(e))
        return e;
    var n = e;
    return vh(n, !1) || (n = Om + " " + t + " body " + Mm),
    un(SX, i => {
        var r, s;
        (r = n) !== null && r !== void 0 && r.length && ((s = n) === null || s === void 0 ? void 0 : s.indexOf(i)) !== -1 && (n = Om + " " + t + " body " + Mm + " as might contain: " + i)
    }
    ),
    n
}
var xX = (e, t) => {
    var n, i, r, s = {
        payloadSizeLimitBytes: J2.payloadSizeLimitBytes,
        performanceEntryTypeToObserve: [...J2.performanceEntryTypeToObserve],
        payloadHostDenyList: [...t.payloadHostDenyList || [], ...J2.payloadHostDenyList]
    }, o = e.session_recording.recordHeaders !== !1 && t.recordHeaders, a = e.session_recording.recordBody !== !1 && t.recordBody, c = e.capture_performance !== !1 && t.recordPerformance, l = (n = s,
    r = Math.min(1e6, (i = n.payloadSizeLimitBytes) !== null && i !== void 0 ? i : 1e6),
    d => (d != null && d.requestBody && (d.requestBody = zT(d.requestBody, d.requestHeaders, r, "Request")),
    d != null && d.responseBody && (d.responseBody = zT(d.responseBody, d.responseHeaders, r, "Response")),
    d)), u = d => {
        return l(( (p, v) => {
            var S, x = dh(p.name), w = v.indexOf("http") === 0 ? (S = dh(v)) === null || S === void 0 ? void 0 : S.pathname : v;
            w === "/" && (w = "");
            var k = x?.pathname.replace(w || "", "");
            if (!(x && k && bX.some(B => k.indexOf(B) === 0)))
                return p
        }
        )((g = (f = d).requestHeaders,
        gn(g) || un(Object.keys(g ?? {}), p => {
            yX.includes(p.toLowerCase()) && (g[p] = Mm)
        }
        ),
        f), e.api_host));
        var f, g
    }
    , h = Gs(e.session_recording.maskNetworkRequestFn);
    return h && Gs(e.session_recording.maskCapturedNetworkRequestFn) && tt.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),
    h && (e.session_recording.maskCapturedNetworkRequestFn = d => {
        var f = e.session_recording.maskNetworkRequestFn({
            url: d.name
        });
        return we(we({}, d), {}, {
            name: f?.url
        })
    }
    ),
    s.maskRequestFn = Gs(e.session_recording.maskCapturedNetworkRequestFn) ? d => {
        var f, g, p, v = u(d);
        return v && (f = (g = (p = e.session_recording).maskCapturedNetworkRequestFn) === null || g === void 0 ? void 0 : g.call(p, v)) !== null && f !== void 0 ? f : void 0
    }
    : d => function(f) {
        if (!Ze(f))
            return f.requestBody = XT(f.requestBody, "Request"),
            f.responseBody = XT(f.responseBody, "Response"),
            f
    }(u(d)),
    we(we(we({}, J2), s), {}, {
        recordHeaders: o,
        recordBody: a,
        recordPerformance: c,
        recordInitialRequests: c
    })
}
;
function oa(e, t, n, i, r) {
    return t > n && (tt.warn("min cannot be greater than max."),
    t = n),
    Dr(e) ? e > n ? (i && tt.warn(i + " cannot be  greater than max: " + n + ". Using max value instead."),
    n) : e < t ? (i && tt.warn(i + " cannot be less than min: " + t + ". Using min value instead."),
    t) : e : (i && tt.warn(i + " must be a number. using max or fallback. max: " + n + ", fallback: " + r),
    oa(r || n, t, n, i))
}
var Pm = class {
    constructor(t) {
        var n, i, r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
        Ie(this, "bucketSize", 100),
        Ie(this, "refillRate", 10),
        Ie(this, "mutationBuckets", {}),
        Ie(this, "loggedTracker", {}),
        Ie(this, "refillBuckets", () => {
            Object.keys(this.mutationBuckets).forEach(s => {
                this.mutationBuckets[s] = this.mutationBuckets[s] + this.refillRate,
                this.mutationBuckets[s] >= this.bucketSize && delete this.mutationBuckets[s]
            }
            )
        }
        ),
        Ie(this, "getNodeOrRelevantParent", s => {
            var o = this.rrweb.mirror.getNode(s);
            if (o?.nodeName !== "svg" && o instanceof Element) {
                var a = o.closest("svg");
                if (a)
                    return [this.rrweb.mirror.getId(a), a]
            }
            return [s, o]
        }
        ),
        Ie(this, "numberOfChanges", s => {
            var o, a, c, l, u, h, d, f;
            return ((o = (a = s.removes) === null || a === void 0 ? void 0 : a.length) !== null && o !== void 0 ? o : 0) + ((c = (l = s.attributes) === null || l === void 0 ? void 0 : l.length) !== null && c !== void 0 ? c : 0) + ((u = (h = s.texts) === null || h === void 0 ? void 0 : h.length) !== null && u !== void 0 ? u : 0) + ((d = (f = s.adds) === null || f === void 0 ? void 0 : f.length) !== null && d !== void 0 ? d : 0)
        }
        ),
        Ie(this, "throttleMutations", s => {
            if (s.type !== 3 || s.data.source !== 0)
                return s;
            var o = s.data
              , a = this.numberOfChanges(o);
            o.attributes && (o.attributes = o.attributes.filter(l => {
                var u, h, d, [f,g] = this.getNodeOrRelevantParent(l.id);
                return this.mutationBuckets[f] === 0 ? !1 : (this.mutationBuckets[f] = (u = this.mutationBuckets[f]) !== null && u !== void 0 ? u : this.bucketSize,
                this.mutationBuckets[f] = Math.max(this.mutationBuckets[f] - 1, 0),
                this.mutationBuckets[f] === 0 && (this.loggedTracker[f] || (this.loggedTracker[f] = !0,
                (h = (d = this.options).onBlockedNode) === null || h === void 0 || h.call(d, f, g))),
                l)
            }
            ));
            var c = this.numberOfChanges(o);
            return c !== 0 || a === c ? s : void 0
        }
        ),
        this.rrweb = t,
        this.options = r,
        this.refillRate = oa((n = this.options.refillRate) !== null && n !== void 0 ? n : this.refillRate, 0, 100, "mutation throttling refill rate"),
        this.bucketSize = oa((i = this.options.bucketSize) !== null && i !== void 0 ? i : this.bucketSize, 0, 100, "mutation throttling bucket size"),
        setInterval( () => {
            this.refillBuckets()
        }
        , 1e3)
    }
}
  , $s = Uint8Array
  , Fr = Uint16Array
  , _h = Uint32Array
  , g8 = new $s([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0])
  , m8 = new $s([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0])
  , KT = new $s([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15])
  , ZO = function(e, t) {
    for (var n = new Fr(31), i = 0; i < 31; ++i)
        n[i] = t += 1 << e[i - 1];
    var r = new _h(n[30]);
    for (i = 1; i < 30; ++i)
        for (var s = n[i]; s < n[i + 1]; ++s)
            r[s] = s - n[i] << 5 | i;
    return [n, r]
}
  , eM = ZO(g8, 2)
  , wX = eM[0]
  , km = eM[1];
wX[28] = 258,
km[258] = 28;
for (Am = ZO(m8, 0)[1],
mp = new Fr(32768),
mn = 0; mn < 32768; ++mn)
    Zc = (43690 & mn) >>> 1 | (21845 & mn) << 1,
    Zc = (61680 & (Zc = (52428 & Zc) >>> 2 | (13107 & Zc) << 2)) >>> 4 | (3855 & Zc) << 4,
    mp[mn] = ((65280 & Zc) >>> 8 | (255 & Zc) << 8) >>> 1;
var Zc, Am, mp, mn, e5 = function(e, t, n) {
    for (var i = e.length, r = 0, s = new Fr(t); r < i; ++r)
        ++s[e[r] - 1];
    var o, a = new Fr(t);
    for (r = 0; r < t; ++r)
        a[r] = a[r - 1] + s[r - 1] << 1;
    if (n) {
        o = new Fr(1 << t);
        var c = 15 - t;
        for (r = 0; r < i; ++r)
            if (e[r])
                for (var l = r << 4 | e[r], u = t - e[r], h = a[e[r] - 1]++ << u, d = h | (1 << u) - 1; h <= d; ++h)
                    o[mp[h] >>> c] = l
    } else
        for (o = new Fr(i),
        r = 0; r < i; ++r)
            o[r] = mp[a[e[r] - 1]++] >>> 15 - e[r];
    return o
}, k0 = new $s(288);
for (mn = 0; mn < 144; ++mn)
    k0[mn] = 8;
for (mn = 144; mn < 256; ++mn)
    k0[mn] = 9;
for (mn = 256; mn < 280; ++mn)
    k0[mn] = 7;
for (mn = 280; mn < 288; ++mn)
    k0[mn] = 8;
var vp = new $s(32);
for (mn = 0; mn < 32; ++mn)
    vp[mn] = 5;
var CX = e5(k0, 9, 0)
  , EX = e5(vp, 5, 0)
  , tM = function(e) {
    return (e / 8 >> 0) + (7 & e && 1)
}
  , nM = function(e, t, n) {
    (n == null || n > e.length) && (n = e.length);
    var i = new (e instanceof Fr ? Fr : e instanceof _h ? _h : $s)(n - t);
    return i.set(e.subarray(t, n)),
    i
}
  , Xa = function(e, t, n) {
    n <<= 7 & t;
    var i = t / 8 >> 0;
    e[i] |= n,
    e[i + 1] |= n >>> 8
}
  , W1 = function(e, t, n) {
    n <<= 7 & t;
    var i = t / 8 >> 0;
    e[i] |= n,
    e[i + 1] |= n >>> 8,
    e[i + 2] |= n >>> 16
}
  , tm = function(e, t) {
    for (var n = [], i = 0; i < e.length; ++i)
        e[i] && n.push({
            s: i,
            f: e[i]
        });
    var r = n.length
      , s = n.slice();
    if (!r)
        return [new $s(0), 0];
    if (r == 1) {
        var o = new $s(n[0].s + 1);
        return o[n[0].s] = 1,
        [o, 1]
    }
    n.sort(function(B, N) {
        return B.f - N.f
    }),
    n.push({
        s: -1,
        f: 25001
    });
    var a = n[0]
      , c = n[1]
      , l = 0
      , u = 1
      , h = 2;
    for (n[0] = {
        s: -1,
        f: a.f + c.f,
        l: a,
        r: c
    }; u != r - 1; )
        a = n[n[l].f < n[h].f ? l++ : h++],
        c = n[l != u && n[l].f < n[h].f ? l++ : h++],
        n[u++] = {
            s: -1,
            f: a.f + c.f,
            l: a,
            r: c
        };
    var d = s[0].s;
    for (i = 1; i < r; ++i)
        s[i].s > d && (d = s[i].s);
    var f = new Fr(d + 1)
      , g = Im(n[u - 1], f, 0);
    if (g > t) {
        i = 0;
        var p = 0
          , v = g - t
          , S = 1 << v;
        for (s.sort(function(B, N) {
            return f[N.s] - f[B.s] || B.f - N.f
        }); i < r; ++i) {
            var x = s[i].s;
            if (!(f[x] > t))
                break;
            p += S - (1 << g - f[x]),
            f[x] = t
        }
        for (p >>>= v; p > 0; ) {
            var w = s[i].s;
            f[w] < t ? p -= 1 << t - f[w]++ - 1 : ++i
        }
        for (; i >= 0 && p; --i) {
            var k = s[i].s;
            f[k] == t && (--f[k],
            ++p)
        }
        g = t
    }
    return [new $s(f), g]
}
  , Im = function(e, t, n) {
    return e.s == -1 ? Math.max(Im(e.l, t, n + 1), Im(e.r, t, n + 1)) : t[e.s] = n
}
  , YT = function(e) {
    for (var t = e.length; t && !e[--t]; )
        ;
    for (var n = new Fr(++t), i = 0, r = e[0], s = 1, o = function(c) {
        n[i++] = c
    }, a = 1; a <= t; ++a)
        if (e[a] == r && a != t)
            ++s;
        else {
            if (!r && s > 2) {
                for (; s > 138; s -= 138)
                    o(32754);
                s > 2 && (o(s > 10 ? s - 11 << 5 | 28690 : s - 3 << 5 | 12305),
                s = 0)
            } else if (s > 3) {
                for (o(r),
                --s; s > 6; s -= 6)
                    o(8304);
                s > 2 && (o(s - 3 << 5 | 8208),
                s = 0)
            }
            for (; s--; )
                o(r);
            s = 1,
            r = e[a]
        }
    return [n.subarray(0, i), t]
}
  , j1 = function(e, t) {
    for (var n = 0, i = 0; i < t.length; ++i)
        n += e[i] * t[i];
    return n
}
  , Rm = function(e, t, n) {
    var i = n.length
      , r = tM(t + 2);
    e[r] = 255 & i,
    e[r + 1] = i >>> 8,
    e[r + 2] = 255 ^ e[r],
    e[r + 3] = 255 ^ e[r + 1];
    for (var s = 0; s < i; ++s)
        e[r + s + 4] = n[s];
    return 8 * (r + 4 + i)
}
  , QT = function(e, t, n, i, r, s, o, a, c, l, u) {
    Xa(t, u++, n),
    ++r[256];
    for (var h = tm(r, 15), d = h[0], f = h[1], g = tm(s, 15), p = g[0], v = g[1], S = YT(d), x = S[0], w = S[1], k = YT(p), B = k[0], N = k[1], E = new Fr(19), F = 0; F < x.length; ++F)
        E[31 & x[F]]++;
    for (F = 0; F < B.length; ++F)
        E[31 & B[F]]++;
    for (var O = tm(E, 7), V = O[0], X = O[1], b = 19; b > 4 && !V[KT[b - 1]]; --b)
        ;
    var j, de, he, Re, Xe = l + 5 << 3, pt = j1(r, k0) + j1(s, vp) + o, it = j1(r, d) + j1(s, p) + o + 14 + 3 * b + j1(E, V) + (2 * E[16] + 3 * E[17] + 7 * E[18]);
    if (Xe <= pt && Xe <= it)
        return Rm(t, u, e.subarray(c, c + l));
    if (Xa(t, u, 1 + (it < pt)),
    u += 2,
    it < pt) {
        j = e5(d, f, 0),
        de = d,
        he = e5(p, v, 0),
        Re = p;
        var fe = e5(V, X, 0);
        for (Xa(t, u, w - 257),
        Xa(t, u + 5, N - 1),
        Xa(t, u + 10, b - 4),
        u += 14,
        F = 0; F < b; ++F)
            Xa(t, u + 3 * F, V[KT[F]]);
        u += 3 * b;
        for (var Ge = [x, B], A = 0; A < 2; ++A) {
            var q = Ge[A];
            for (F = 0; F < q.length; ++F) {
                var L = 31 & q[F];
                Xa(t, u, fe[L]),
                u += V[L],
                L > 15 && (Xa(t, u, q[F] >>> 5 & 127),
                u += q[F] >>> 12)
            }
        }
    } else
        j = CX,
        de = k0,
        he = EX,
        Re = vp;
    for (F = 0; F < a; ++F)
        if (i[F] > 255) {
            L = i[F] >>> 18 & 31,
            W1(t, u, j[L + 257]),
            u += de[L + 257],
            L > 7 && (Xa(t, u, i[F] >>> 23 & 31),
            u += g8[L]);
            var U = 31 & i[F];
            W1(t, u, he[U]),
            u += Re[U],
            U > 3 && (W1(t, u, i[F] >>> 5 & 8191),
            u += m8[U])
        } else
            W1(t, u, j[i[F]]),
            u += de[i[F]];
    return W1(t, u, j[256]),
    u + de[256]
}
  , TX = new _h([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632])
  , OX = function() {
    for (var e = new _h(256), t = 0; t < 256; ++t) {
        for (var n = t, i = 9; --i; )
            n = (1 & n && 3988292384) ^ n >>> 1;
        e[t] = n
    }
    return e
}()
  , MX = function() {
    var e = 4294967295;
    return {
        p: function(t) {
            for (var n = e, i = 0; i < t.length; ++i)
                n = OX[255 & n ^ t[i]] ^ n >>> 8;
            e = n
        },
        d: function() {
            return 4294967295 ^ e
        }
    }
}
  , PX = function(e, t, n, i, r) {
    return function(s, o, a, c, l, u) {
        var h = s.length
          , d = new $s(c + h + 5 * (1 + Math.floor(h / 7e3)) + l)
          , f = d.subarray(c, d.length - l)
          , g = 0;
        if (!o || h < 8)
            for (var p = 0; p <= h; p += 65535) {
                var v = p + 65535;
                v < h ? g = Rm(f, g, s.subarray(p, v)) : (f[p] = u,
                g = Rm(f, g, s.subarray(p, h)))
            }
        else {
            for (var S = TX[o - 1], x = S >>> 13, w = 8191 & S, k = (1 << a) - 1, B = new Fr(32768), N = new Fr(k + 1), E = Math.ceil(a / 3), F = 2 * E, O = function(Ue) {
                return (s[Ue] ^ s[Ue + 1] << E ^ s[Ue + 2] << F) & k
            }, V = new _h(25e3), X = new Fr(288), b = new Fr(32), j = 0, de = 0, he = (p = 0,
            0), Re = 0, Xe = 0; p < h; ++p) {
                var pt = O(p)
                  , it = 32767 & p
                  , fe = N[pt];
                if (B[it] = fe,
                N[pt] = it,
                Re <= p) {
                    var Ge = h - p;
                    if ((j > 7e3 || he > 24576) && Ge > 423) {
                        g = QT(s, f, 0, V, X, b, de, he, Xe, p - Xe, g),
                        he = j = de = 0,
                        Xe = p;
                        for (var A = 0; A < 286; ++A)
                            X[A] = 0;
                        for (A = 0; A < 30; ++A)
                            b[A] = 0
                    }
                    var q = 2
                      , L = 0
                      , U = w
                      , te = it - fe & 32767;
                    if (Ge > 2 && pt == O(p - te))
                        for (var Ce = Math.min(x, Ge) - 1, Ve = Math.min(32767, p), De = Math.min(258, Ge); te <= Ve && --U && it != fe; ) {
                            if (s[p + q] == s[p + q - te]) {
                                for (var ge = 0; ge < De && s[p + ge] == s[p + ge - te]; ++ge)
                                    ;
                                if (ge > q) {
                                    if (q = ge,
                                    L = te,
                                    ge > Ce)
                                        break;
                                    var kt = Math.min(te, ge - 2)
                                      , xt = 0;
                                    for (A = 0; A < kt; ++A) {
                                        var hn = p - te + A + 32768 & 32767
                                          , Ot = hn - B[hn] + 32768 & 32767;
                                        Ot > xt && (xt = Ot,
                                        fe = hn)
                                    }
                                }
                            }
                            te += (it = fe) - (fe = B[it]) + 32768 & 32767
                        }
                    if (L) {
                        V[he++] = 268435456 | km[q] << 18 | Am[L];
                        var bi = 31 & km[q]
                          , Xt = 31 & Am[L];
                        de += g8[bi] + m8[Xt],
                        ++X[257 + bi],
                        ++b[Xt],
                        Re = p + q,
                        ++j
                    } else
                        V[he++] = s[p],
                        ++X[s[p]]
                }
            }
            g = QT(s, f, u, V, X, b, de, he, Xe, p - Xe, g)
        }
        return nM(d, 0, c + tM(g) + l)
    }(e, t.level == null ? 6 : t.level, t.mem == null ? Math.ceil(1.5 * Math.max(8, Math.min(13, Math.log(e.length)))) : 12 + t.mem, n, i, !r)
}
  , Dm = function(e, t, n) {
    for (; n; ++t)
        e[t] = n,
        n >>>= 8
}
  , kX = function(e, t) {
    var n = t.filename;
    if (e[0] = 31,
    e[1] = 139,
    e[2] = 8,
    e[8] = t.level < 2 ? 4 : t.level == 9 ? 2 : 0,
    e[9] = 3,
    t.mtime != 0 && Dm(e, 4, Math.floor(new Date(t.mtime || Date.now()) / 1e3)),
    n) {
        e[3] = 8;
        for (var i = 0; i <= n.length; ++i)
            e[i + 10] = n.charCodeAt(i)
    }
}
  , AX = function(e) {
    return 10 + (e.filename && e.filename.length + 1 || 0)
};
function iM(e, t) {
    t === void 0 && (t = {});
    var n = MX()
      , i = e.length;
    n.p(e);
    var r = PX(e, t, AX(t), 8)
      , s = r.length;
    return kX(r, t),
    Dm(r, s - 8, n.d()),
    Dm(r, s - 4, i),
    r
}
function rM(e, t) {
    var n = e.length;
    if (typeof TextEncoder < "u")
        return new TextEncoder().encode(e);
    for (var i = new $s(e.length + (e.length >>> 1)), r = 0, s = function(l) {
        i[r++] = l
    }, o = 0; o < n; ++o) {
        if (r + 5 > i.length) {
            var a = new $s(r + 8 + (n - o << 1));
            a.set(i),
            i = a
        }
        var c = e.charCodeAt(o);
        c < 128 || t ? s(c) : c < 2048 ? (s(192 | c >>> 6),
        s(128 | 63 & c)) : c > 55295 && c < 57344 ? (s(240 | (c = 65536 + (1047552 & c) | 1023 & e.charCodeAt(++o)) >>> 18),
        s(128 | c >>> 12 & 63),
        s(128 | c >>> 6 & 63),
        s(128 | 63 & c)) : (s(224 | c >>> 12),
        s(128 | c >>> 6 & 63),
        s(128 | 63 & c))
    }
    return nM(i, 0, r)
}
var J1 = "[SessionRecording]"
  , hr = Lr(J1)
  , IX = 3e5
  , RX = [vo.MouseMove, vo.MouseInteraction, vo.Scroll, vo.ViewportResize, vo.Input, vo.TouchMove, vo.MediaInteraction, vo.Drag]
  , JT = e => ({
    rrwebMethod: e,
    enqueuedAt: Date.now(),
    attempt: 1
});
function b0(e) {
    return function(t, n) {
        for (var i = "", r = 0; r < t.length; ) {
            var s = t[r++];
            s < 128 || n ? i += String.fromCharCode(s) : s < 224 ? i += String.fromCharCode((31 & s) << 6 | 63 & t[r++]) : s < 240 ? i += String.fromCharCode((15 & s) << 12 | (63 & t[r++]) << 6 | 63 & t[r++]) : (s = ((15 & s) << 18 | (63 & t[r++]) << 12 | (63 & t[r++]) << 6 | 63 & t[r++]) - 65536,
            i += String.fromCharCode(55296 | s >> 10, 56320 | 1023 & s))
        }
        return i
    }(iM(rM(JSON.stringify(e))), !0)
}
function ZT(e) {
    return e.type === Ya.Custom && e.data.tag === "sessionIdle"
}
function eO(e, t) {
    return t.some(n => n.matching === "regex" && new RegExp(n.url).test(e))
}
var Nm = class {
    get sessionIdleThresholdMilliseconds() {
        return this.instance.config.session_recording.session_idle_threshold_ms || 3e5
    }
    get rrwebRecord() {
        var t, n;
        return _t == null || (t = _t.__PosthogExtensions__) === null || t === void 0 || (n = t.rrweb) === null || n === void 0 ? void 0 : n.record
    }
    get started() {
        return this._captureStarted
    }
    get sessionManager() {
        if (!this.instance.sessionManager)
            throw new Error(J1 + " must be started with a valid sessionManager.");
        return this.instance.sessionManager
    }
    get fullSnapshotIntervalMillis() {
        var t, n;
        return this.triggerStatus === "trigger_pending" ? 6e4 : (t = (n = this.instance.config.session_recording) === null || n === void 0 ? void 0 : n.full_snapshot_interval_millis) !== null && t !== void 0 ? t : IX
    }
    get isSampled() {
        var t = this.instance.get_property(K1);
        return O0(t) ? t : null
    }
    get sessionDuration() {
        var t, n, i = (t = this.buffer) === null || t === void 0 ? void 0 : t.data[((n = this.buffer) === null || n === void 0 ? void 0 : n.data.length) - 1], {sessionStartTimestamp: r} = this.sessionManager.checkAndGetSessionAndWindowId(!0);
        return i ? i.timestamp - r : null
    }
    get isRecordingEnabled() {
        var t = !!this.instance.get_property(um)
          , n = !this.instance.config.disable_session_recording;
        return Y && t && n
    }
    get isConsoleLogCaptureEnabled() {
        var t = !!this.instance.get_property(PT)
          , n = this.instance.config.enable_recording_console_log;
        return n ?? t
    }
    get canvasRecording() {
        var t, n, i, r, s, o, a = this.instance.config.session_recording.captureCanvas, c = this.instance.get_property(AT), l = (t = (n = a?.recordCanvas) !== null && n !== void 0 ? n : c?.enabled) !== null && t !== void 0 && t, u = (i = (r = a?.canvasFps) !== null && r !== void 0 ? r : c?.fps) !== null && i !== void 0 ? i : 0, h = (s = (o = a?.canvasQuality) !== null && o !== void 0 ? o : c?.quality) !== null && s !== void 0 ? s : 0;
        return {
            enabled: l,
            fps: oa(u, 0, 12, "canvas recording fps"),
            quality: oa(h, 0, 1, "canvas recording quality")
        }
    }
    get networkPayloadCapture() {
        var t, n, i = this.instance.get_property(kT), r = {
            recordHeaders: (t = this.instance.config.session_recording) === null || t === void 0 ? void 0 : t.recordHeaders,
            recordBody: (n = this.instance.config.session_recording) === null || n === void 0 ? void 0 : n.recordBody
        }, s = r?.recordHeaders || i?.recordHeaders, o = r?.recordBody || i?.recordBody, a = zn(this.instance.config.capture_performance) ? this.instance.config.capture_performance.network_timing : this.instance.config.capture_performance, c = !!(O0(a) ? a : i?.capturePerformance);
        return s || o || c ? {
            recordHeaders: s,
            recordBody: o,
            recordPerformance: c
        } : void 0
    }
    get sampleRate() {
        var t = this.instance.get_property(IT);
        return Dr(t) ? t : null
    }
    get minimumDuration() {
        var t = this.instance.get_property(RT);
        return Dr(t) ? t : null
    }
    get status() {
        return this.receivedDecide ? this.isRecordingEnabled ? this._urlBlocked ? "paused" : gn(this._linkedFlag) || this._linkedFlagSeen ? this.triggerStatus === "trigger_pending" ? "buffering" : O0(this.isSampled) ? this.isSampled ? "sampled" : "disabled" : "active" : "buffering" : "disabled" : "buffering"
    }
    get urlTriggerStatus() {
        var t;
        return this._urlTriggers.length === 0 ? "trigger_disabled" : ((t = this.instance) === null || t === void 0 ? void 0 : t.get_property(Y9)) === this.sessionId ? "trigger_activated" : "trigger_pending"
    }
    get eventTriggerStatus() {
        var t;
        return this._eventTriggers.length === 0 ? "trigger_disabled" : ((t = this.instance) === null || t === void 0 ? void 0 : t.get_property(Q9)) === this.sessionId ? "trigger_activated" : "trigger_pending"
    }
    get triggerStatus() {
        var t = this.eventTriggerStatus === "trigger_activated" || this.urlTriggerStatus === "trigger_activated"
          , n = this.eventTriggerStatus === "trigger_pending" || this.urlTriggerStatus === "trigger_pending";
        return t ? "trigger_activated" : n ? "trigger_pending" : "trigger_disabled"
    }
    constructor(t) {
        if (Ie(this, "queuedRRWebEvents", []),
        Ie(this, "isIdle", !1),
        Ie(this, "_linkedFlagSeen", !1),
        Ie(this, "_lastActivityTimestamp", Date.now()),
        Ie(this, "_linkedFlag", null),
        Ie(this, "_removePageViewCaptureHook", void 0),
        Ie(this, "_onSessionIdListener", void 0),
        Ie(this, "_persistDecideOnSessionListener", void 0),
        Ie(this, "_samplingSessionListener", void 0),
        Ie(this, "_urlTriggers", []),
        Ie(this, "_urlBlocklist", []),
        Ie(this, "_urlBlocked", !1),
        Ie(this, "_eventTriggers", []),
        Ie(this, "_removeEventTriggerCaptureHook", void 0),
        Ie(this, "_forceAllowLocalhostNetworkCapture", !1),
        Ie(this, "_onBeforeUnload", () => {
            this._flushBuffer()
        }
        ),
        Ie(this, "_onOffline", () => {
            this._tryAddCustomEvent("browser offline", {})
        }
        ),
        Ie(this, "_onOnline", () => {
            this._tryAddCustomEvent("browser online", {})
        }
        ),
        Ie(this, "_onVisibilityChange", () => {
            if (qe != null && qe.visibilityState) {
                var r = "window " + qe.visibilityState;
                this._tryAddCustomEvent(r, {})
            }
        }
        ),
        this.instance = t,
        this._captureStarted = !1,
        this._endpoint = "/s/",
        this.stopRrweb = void 0,
        this.receivedDecide = !1,
        !this.instance.sessionManager)
            throw hr.error("started without valid sessionManager"),
            new Error(J1 + " started without valid sessionManager. This is a bug.");
        if (this.instance.config.__preview_experimental_cookieless_mode)
            throw new Error(J1 + " cannot be used with __preview_experimental_cookieless_mode.");
        var {sessionId: n, windowId: i} = this.sessionManager.checkAndGetSessionAndWindowId();
        this.sessionId = n,
        this.windowId = i,
        this.buffer = this.clearBuffer(),
        this.sessionIdleThresholdMilliseconds >= this.sessionManager.sessionTimeoutMs && hr.warn("session_idle_threshold_ms (".concat(this.sessionIdleThresholdMilliseconds, ") is greater than the session timeout (").concat(this.sessionManager.sessionTimeoutMs, "). Session will never be detected as idle"))
    }
    startIfEnabledOrStop(t) {
        this.isRecordingEnabled ? (this._startCapture(t),
        Y?.addEventListener("beforeunload", this._onBeforeUnload),
        Y?.addEventListener("offline", this._onOffline),
        Y?.addEventListener("online", this._onOnline),
        Y?.addEventListener("visibilitychange", this._onVisibilityChange),
        this._setupSampling(),
        this._addEventTriggerListener(),
        gn(this._removePageViewCaptureHook) && (this._removePageViewCaptureHook = this.instance.on("eventCaptured", n => {
            try {
                if (n.event === "$pageview") {
                    var i = n != null && n.properties.$current_url ? this._maskUrl(n?.properties.$current_url) : "";
                    if (!i)
                        return;
                    this._tryAddCustomEvent("$pageview", {
                        href: i
                    })
                }
            } catch (r) {
                hr.error("Could not add $pageview to rrweb session", r)
            }
        }
        )),
        this._onSessionIdListener || (this._onSessionIdListener = this.sessionManager.onSessionId( (n, i, r) => {
            var s, o, a, c;
            r && (this._tryAddCustomEvent("$session_id_change", {
                sessionId: n,
                windowId: i,
                changeReason: r
            }),
            (s = this.instance) === null || s === void 0 || (o = s.persistence) === null || o === void 0 || o.unregister(Q9),
            (a = this.instance) === null || a === void 0 || (c = a.persistence) === null || c === void 0 || c.unregister(Y9))
        }
        ))) : this.stopRecording()
    }
    stopRecording() {
        var t, n, i, r;
        this._captureStarted && this.stopRrweb && (this.stopRrweb(),
        this.stopRrweb = void 0,
        this._captureStarted = !1,
        Y?.removeEventListener("beforeunload", this._onBeforeUnload),
        Y?.removeEventListener("offline", this._onOffline),
        Y?.removeEventListener("online", this._onOnline),
        Y?.removeEventListener("visibilitychange", this._onVisibilityChange),
        this.clearBuffer(),
        clearInterval(this._fullSnapshotTimer),
        (t = this._removePageViewCaptureHook) === null || t === void 0 || t.call(this),
        this._removePageViewCaptureHook = void 0,
        (n = this._removeEventTriggerCaptureHook) === null || n === void 0 || n.call(this),
        this._removeEventTriggerCaptureHook = void 0,
        (i = this._onSessionIdListener) === null || i === void 0 || i.call(this),
        this._onSessionIdListener = void 0,
        (r = this._samplingSessionListener) === null || r === void 0 || r.call(this),
        this._samplingSessionListener = void 0,
        hr.info("stopped"))
    }
    makeSamplingDecision(t) {
        var n, i = this.sessionId !== t, r = this.sampleRate;
        if (Dr(r)) {
            var s, o = this.isSampled, a = i || !O0(o);
            a ? s = Math.random() < r : s = o,
            a && (s ? this._reportStarted("sampled") : hr.warn("Sample rate (".concat(r, ") has determined that this sessionId (").concat(t, ") will not be sent to the server.")),
            this._tryAddCustomEvent("samplingDecisionMade", {
                sampleRate: r,
                isSampled: s
            })),
            (n = this.instance.persistence) === null || n === void 0 || n.register({
                [K1]: s
            })
        } else {
            var c;
            (c = this.instance.persistence) === null || c === void 0 || c.register({
                [K1]: null
            })
        }
    }
    onRemoteConfig(t) {
        var n, i, r, s, o, a;
        if (this._tryAddCustomEvent("$remote_config_received", t),
        this._persistRemoteConfig(t),
        this._linkedFlag = ((n = t.sessionRecording) === null || n === void 0 ? void 0 : n.linkedFlag) || null,
        (i = t.sessionRecording) !== null && i !== void 0 && i.endpoint && (this._endpoint = (a = t.sessionRecording) === null || a === void 0 ? void 0 : a.endpoint),
        this._setupSampling(),
        !gn(this._linkedFlag) && !this._linkedFlagSeen) {
            var c = Qi(this._linkedFlag) ? this._linkedFlag : this._linkedFlag.flag
              , l = Qi(this._linkedFlag) ? null : this._linkedFlag.variant;
            this.instance.onFeatureFlags( (u, h) => {
                var d = zn(h) && c in h
                  , f = l ? h[c] === l : d;
                f && this._reportStarted("linked_flag_matched", {
                    linkedFlag: c,
                    linkedVariant: l
                }),
                this._linkedFlagSeen = f
            }
            )
        }
        (r = t.sessionRecording) !== null && r !== void 0 && r.urlTriggers && (this._urlTriggers = t.sessionRecording.urlTriggers),
        (s = t.sessionRecording) !== null && s !== void 0 && s.urlBlocklist && (this._urlBlocklist = t.sessionRecording.urlBlocklist),
        (o = t.sessionRecording) !== null && o !== void 0 && o.eventTriggers && (this._eventTriggers = t.sessionRecording.eventTriggers),
        this.receivedDecide = !0,
        this.startIfEnabledOrStop()
    }
    _setupSampling() {
        Dr(this.sampleRate) && gn(this._samplingSessionListener) && (this._samplingSessionListener = this.sessionManager.onSessionId(t => {
            this.makeSamplingDecision(t)
        }
        ))
    }
    _persistRemoteConfig(t) {
        if (this.instance.persistence) {
            var n, i = this.instance.persistence, r = () => {
                var s, o, a, c, l, u, h, d, f = (s = t.sessionRecording) === null || s === void 0 ? void 0 : s.sampleRate, g = gn(f) ? null : parseFloat(f), p = (o = t.sessionRecording) === null || o === void 0 ? void 0 : o.minimumDurationMilliseconds;
                i.register({
                    [um]: !!t.sessionRecording,
                    [PT]: (a = t.sessionRecording) === null || a === void 0 ? void 0 : a.consoleLogRecordingEnabled,
                    [kT]: we({
                        capturePerformance: t.capturePerformance
                    }, (c = t.sessionRecording) === null || c === void 0 ? void 0 : c.networkPayloadCapture),
                    [AT]: {
                        enabled: (l = t.sessionRecording) === null || l === void 0 ? void 0 : l.recordCanvas,
                        fps: (u = t.sessionRecording) === null || u === void 0 ? void 0 : u.canvasFps,
                        quality: (h = t.sessionRecording) === null || h === void 0 ? void 0 : h.canvasQuality
                    },
                    [IT]: g,
                    [RT]: Ze(p) ? null : p,
                    [DT]: (d = t.sessionRecording) === null || d === void 0 ? void 0 : d.scriptConfig
                })
            }
            ;
            r(),
            (n = this._persistDecideOnSessionListener) === null || n === void 0 || n.call(this),
            this._persistDecideOnSessionListener = this.sessionManager.onSessionId(r)
        }
    }
    log(t) {
        var n, i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "log";
        (n = this.instance.sessionRecording) === null || n === void 0 || n.onRRwebEmit({
            type: 6,
            data: {
                plugin: "rrweb/console@1",
                payload: {
                    level: i,
                    trace: [],
                    payload: [JSON.stringify(t)]
                }
            },
            timestamp: Date.now()
        })
    }
    _startCapture(t) {
        if (!Ze(Object.assign) && !Ze(Array.from) && !(this._captureStarted || this.instance.config.disable_session_recording || this.instance.consent.isOptedOut())) {
            var n, i;
            this._captureStarted = !0,
            this.sessionManager.checkAndGetSessionAndWindowId(),
            this.rrwebRecord ? this._onScriptLoaded() : (n = _t.__PosthogExtensions__) === null || n === void 0 || (i = n.loadExternalDependency) === null || i === void 0 || i.call(n, this.instance, this.scriptName, r => {
                if (r)
                    return hr.error("could not load recorder", r);
                this._onScriptLoaded()
            }
            ),
            hr.info("starting"),
            this.status === "active" && this._reportStarted(t || "recording_initialized")
        }
    }
    get scriptName() {
        var t, n, i;
        return ((t = this.instance) === null || t === void 0 || (n = t.persistence) === null || n === void 0 || (i = n.get_property(DT)) === null || i === void 0 ? void 0 : i.script) || "recorder"
    }
    isInteractiveEvent(t) {
        var n;
        return t.type === 3 && RX.indexOf((n = t.data) === null || n === void 0 ? void 0 : n.source) !== -1
    }
    _updateWindowAndSessionIds(t) {
        var n = this.isInteractiveEvent(t);
        n || this.isIdle || t.timestamp - this._lastActivityTimestamp > this.sessionIdleThresholdMilliseconds && (this.isIdle = !0,
        clearInterval(this._fullSnapshotTimer),
        this._tryAddCustomEvent("sessionIdle", {
            eventTimestamp: t.timestamp,
            lastActivityTimestamp: this._lastActivityTimestamp,
            threshold: this.sessionIdleThresholdMilliseconds,
            bufferLength: this.buffer.data.length,
            bufferSize: this.buffer.size
        }),
        this._flushBuffer());
        var i = !1;
        if (n && (this._lastActivityTimestamp = t.timestamp,
        this.isIdle && (this.isIdle = !1,
        this._tryAddCustomEvent("sessionNoLongerIdle", {
            reason: "user activity",
            type: t.type
        }),
        i = !0)),
        !this.isIdle) {
            var {windowId: r, sessionId: s} = this.sessionManager.checkAndGetSessionAndWindowId(!n, t.timestamp)
              , o = this.sessionId !== s
              , a = this.windowId !== r;
            this.windowId = r,
            this.sessionId = s,
            o || a ? (this.stopRecording(),
            this.startIfEnabledOrStop("session_id_changed")) : i && this._scheduleFullSnapshot()
        }
    }
    _tryRRWebMethod(t) {
        try {
            return t.rrwebMethod(),
            !0
        } catch (n) {
            return this.queuedRRWebEvents.length < 10 ? this.queuedRRWebEvents.push({
                enqueuedAt: t.enqueuedAt || Date.now(),
                attempt: t.attempt++,
                rrwebMethod: t.rrwebMethod
            }) : hr.warn("could not emit queued rrweb event.", n, t),
            !1
        }
    }
    _tryAddCustomEvent(t, n) {
        return this._tryRRWebMethod(JT( () => this.rrwebRecord.addCustomEvent(t, n)))
    }
    _tryTakeFullSnapshot() {
        return this._tryRRWebMethod(JT( () => this.rrwebRecord.takeFullSnapshot()))
    }
    _onScriptLoaded() {
        var t, n = {
            blockClass: "ph-no-capture",
            blockSelector: void 0,
            ignoreClass: "ph-ignore-input",
            maskTextClass: "ph-mask",
            maskTextSelector: void 0,
            maskTextFn: void 0,
            maskAllInputs: !0,
            maskInputOptions: {
                password: !0
            },
            maskInputFn: void 0,
            slimDOMOptions: {},
            collectFonts: !1,
            inlineStylesheet: !0,
            recordCrossOriginIframes: !1
        }, i = this.instance.config.session_recording;
        for (var [r,s] of Object.entries(i || {}))
            r in n && (r === "maskInputOptions" ? n.maskInputOptions = we({
                password: !0
            }, s) : n[r] = s);
        if (this.canvasRecording && this.canvasRecording.enabled && (n.recordCanvas = !0,
        n.sampling = {
            canvas: this.canvasRecording.fps
        },
        n.dataURLOptions = {
            type: "image/webp",
            quality: this.canvasRecording.quality
        }),
        this.rrwebRecord) {
            this.mutationRateLimiter = (t = this.mutationRateLimiter) !== null && t !== void 0 ? t : new Pm(this.rrwebRecord,{
                refillRate: this.instance.config.session_recording.__mutationRateLimiterRefillRate,
                bucketSize: this.instance.config.session_recording.__mutationRateLimiterBucketSize,
                onBlockedNode: (a, c) => {
                    var l = "Too many mutations on node '".concat(a, "'. Rate limiting. This could be due to SVG animations or something similar");
                    hr.info(l, {
                        node: c
                    }),
                    this.log(J1 + " " + l, "warn")
                }
            });
            var o = this._gatherRRWebPlugins();
            this.stopRrweb = this.rrwebRecord(we({
                emit: a => {
                    this.onRRwebEmit(a)
                }
                ,
                plugins: o
            }, n)),
            this._lastActivityTimestamp = Date.now(),
            this.isIdle = !1,
            this._tryAddCustomEvent("$session_options", {
                sessionRecordingOptions: n,
                activePlugins: o.map(a => a?.name)
            }),
            this._tryAddCustomEvent("$posthog_config", {
                config: this.instance.config
            })
        } else
            hr.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")
    }
    _scheduleFullSnapshot() {
        if (this._fullSnapshotTimer && clearInterval(this._fullSnapshotTimer),
        !this.isIdle) {
            var t = this.fullSnapshotIntervalMillis;
            t && (this._fullSnapshotTimer = setInterval( () => {
                this._tryTakeFullSnapshot()
            }
            , t))
        }
    }
    _gatherRRWebPlugins() {
        var t, n, i, r, s = [], o = (t = _t.__PosthogExtensions__) === null || t === void 0 || (n = t.rrwebPlugins) === null || n === void 0 ? void 0 : n.getRecordConsolePlugin;
        o && this.isConsoleLogCaptureEnabled && s.push(o());
        var a = (i = _t.__PosthogExtensions__) === null || i === void 0 || (r = i.rrwebPlugins) === null || r === void 0 ? void 0 : r.getRecordNetworkPlugin;
        return this.networkPayloadCapture && Gs(a) && (!Zz.includes(location.hostname) || this._forceAllowLocalhostNetworkCapture ? s.push(a(xX(this.instance.config, this.networkPayloadCapture))) : hr.info("NetworkCapture not started because we are on localhost.")),
        s
    }
    onRRwebEmit(t) {
        var n;
        if (this._processQueuedEvents(),
        t && zn(t)) {
            if (t.type === Ya.Meta) {
                var i = this._maskUrl(t.data.href);
                if (this._lastHref = i,
                !i)
                    return;
                t.data.href = i
            } else
                this._pageViewFallBack();
            if (this._checkUrlTriggerConditions(),
            this.status !== "paused" || function(h) {
                return h.type === Ya.Custom && h.data.tag === "recording paused"
            }(t)) {
                t.type === Ya.FullSnapshot && this._scheduleFullSnapshot(),
                t.type === Ya.FullSnapshot && this.triggerStatus === "trigger_pending" && this.clearBuffer();
                var r = this.mutationRateLimiter ? this.mutationRateLimiter.throttleMutations(t) : t;
                if (r) {
                    var s = function(h) {
                        var d = h;
                        if (d && zn(d) && d.type === 6 && zn(d.data) && d.data.plugin === "rrweb/console@1") {
                            d.data.payload.payload.length > 10 && (d.data.payload.payload = d.data.payload.payload.slice(0, 10),
                            d.data.payload.payload.push("...[truncated]"));
                            for (var f = [], g = 0; g < d.data.payload.payload.length; g++)
                                d.data.payload.payload[g] && d.data.payload.payload[g].length > 2e3 ? f.push(d.data.payload.payload[g].slice(0, 2e3) + "...[truncated]") : f.push(d.data.payload.payload[g]);
                            return d.data.payload.payload = f,
                            h
                        }
                        return h
                    }(r);
                    if (this._updateWindowAndSessionIds(s),
                    !this.isIdle || ZT(s)) {
                        if (ZT(s)) {
                            var o = s.data.payload;
                            if (o) {
                                var a = o.lastActivityTimestamp
                                  , c = o.threshold;
                                s.timestamp = a + c
                            }
                        }
                        var l = (n = this.instance.config.session_recording.compress_events) === null || n === void 0 || n ? function(h) {
                            if (pp(h) < 1024)
                                return h;
                            try {
                                if (h.type === Ya.FullSnapshot)
                                    return we(we({}, h), {}, {
                                        data: b0(h.data),
                                        cv: "2024-10"
                                    });
                                if (h.type === Ya.IncrementalSnapshot && h.data.source === vo.Mutation)
                                    return we(we({}, h), {}, {
                                        cv: "2024-10",
                                        data: we(we({}, h.data), {}, {
                                            texts: b0(h.data.texts),
                                            attributes: b0(h.data.attributes),
                                            removes: b0(h.data.removes),
                                            adds: b0(h.data.adds)
                                        })
                                    });
                                if (h.type === Ya.IncrementalSnapshot && h.data.source === vo.StyleSheetRule)
                                    return we(we({}, h), {}, {
                                        cv: "2024-10",
                                        data: we(we({}, h.data), {}, {
                                            adds: b0(h.data.adds),
                                            removes: b0(h.data.removes)
                                        })
                                    })
                            } catch (d) {
                                hr.error("could not compress event - will use uncompressed event", d)
                            }
                            return h
                        }(s) : s
                          , u = {
                            $snapshot_bytes: pp(l),
                            $snapshot_data: l,
                            $session_id: this.sessionId,
                            $window_id: this.windowId
                        };
                        this.status !== "disabled" ? this._captureSnapshotBuffered(u) : this.clearBuffer()
                    }
                }
            }
        }
    }
    _pageViewFallBack() {
        if (!this.instance.config.capture_pageview && Y) {
            var t = this._maskUrl(Y.location.href);
            this._lastHref !== t && (this._tryAddCustomEvent("$url_changed", {
                href: t
            }),
            this._lastHref = t)
        }
    }
    _processQueuedEvents() {
        if (this.queuedRRWebEvents.length) {
            var t = [...this.queuedRRWebEvents];
            this.queuedRRWebEvents = [],
            t.forEach(n => {
                Date.now() - n.enqueuedAt <= 2e3 && this._tryRRWebMethod(n)
            }
            )
        }
    }
    _maskUrl(t) {
        var n = this.instance.config.session_recording;
        if (n.maskNetworkRequestFn) {
            var i, r = {
                url: t
            };
            return (i = r = n.maskNetworkRequestFn(r)) === null || i === void 0 ? void 0 : i.url
        }
        return t
    }
    clearBuffer() {
        return this.buffer = {
            size: 0,
            data: [],
            sessionId: this.sessionId,
            windowId: this.windowId
        },
        this.buffer
    }
    _flushBuffer() {
        this.flushBufferTimer && (clearTimeout(this.flushBufferTimer),
        this.flushBufferTimer = void 0);
        var t = this.minimumDuration
          , n = this.sessionDuration
          , i = Dr(n) && n >= 0
          , r = Dr(t) && i && n < t;
        return this.status === "buffering" || this.status === "paused" || r ? (this.flushBufferTimer = setTimeout( () => {
            this._flushBuffer()
        }
        , 2e3),
        this.buffer) : (this.buffer.data.length > 0 && Cm(this.buffer).forEach(s => {
            this._captureSnapshot({
                $snapshot_bytes: s.size,
                $snapshot_data: s.data,
                $session_id: s.sessionId,
                $window_id: s.windowId,
                $lib: "web",
                $lib_version: Ja.LIB_VERSION
            })
        }
        ),
        this.clearBuffer())
    }
    _captureSnapshotBuffered(t) {
        var n, i = 2 + (((n = this.buffer) === null || n === void 0 ? void 0 : n.data.length) || 0);
        !this.isIdle && (this.buffer.size + t.$snapshot_bytes + i > 943718.4 || this.buffer.sessionId !== this.sessionId) && (this.buffer = this._flushBuffer()),
        this.buffer.size += t.$snapshot_bytes,
        this.buffer.data.push(t.$snapshot_data),
        this.flushBufferTimer || this.isIdle || (this.flushBufferTimer = setTimeout( () => {
            this._flushBuffer()
        }
        , 2e3))
    }
    _captureSnapshot(t) {
        this.instance.capture("$snapshot", t, {
            _url: this.instance.requestRouter.endpointFor("api", this._endpoint),
            _noTruncate: !0,
            _batchKey: "recordings",
            skip_client_rate_limiting: !0
        })
    }
    _checkUrlTriggerConditions() {
        if (Y !== void 0 && Y.location.href) {
            var t = Y.location.href
              , n = this.status === "paused"
              , i = eO(t, this._urlBlocklist);
            i && !n ? this._pauseRecording() : !i && n && this._resumeRecording(),
            eO(t, this._urlTriggers) && this._activateTrigger("url")
        }
    }
    _activateTrigger(t) {
        var n, i;
        this.triggerStatus === "trigger_pending" && ((n = this.instance) === null || n === void 0 || (i = n.persistence) === null || i === void 0 || i.register({
            [t === "url" ? Y9 : Q9]: this.sessionId
        }),
        this._flushBuffer(),
        this._reportStarted(t + "_trigger_matched"))
    }
    _pauseRecording() {
        this.status !== "paused" && (this._urlBlocked = !0,
        clearInterval(this._fullSnapshotTimer),
        hr.info("recording paused due to URL blocker"),
        this._tryAddCustomEvent("recording paused", {
            reason: "url blocker"
        }))
    }
    _resumeRecording() {
        this.status === "paused" && (this._urlBlocked = !1,
        this._tryTakeFullSnapshot(),
        this._scheduleFullSnapshot(),
        this._tryAddCustomEvent("recording resumed", {
            reason: "left blocked url"
        }),
        hr.info("recording resumed"))
    }
    _addEventTriggerListener() {
        this._eventTriggers.length !== 0 && gn(this._removeEventTriggerCaptureHook) && (this._removeEventTriggerCaptureHook = this.instance.on("eventCaptured", t => {
            try {
                this._eventTriggers.includes(t.event) && this._activateTrigger("event")
            } catch (n) {
                hr.error("Could not activate event trigger", n)
            }
        }
        ))
    }
    overrideLinkedFlag() {
        this._linkedFlagSeen = !0,
        this._reportStarted("linked_flag_overridden")
    }
    overrideSampling() {
        var t;
        (t = this.instance.persistence) === null || t === void 0 || t.register({
            [K1]: !0
        }),
        this._reportStarted("sampling_overridden")
    }
    overrideTrigger(t) {
        this._activateTrigger(t)
    }
    _reportStarted(t, n) {
        this.instance.register_for_session({
            $session_recording_start_reason: t
        }),
        hr.info(t.replace("_", " "), n),
        Ft(["recording_initialized", "session_id_changed"], t) || this._tryAddCustomEvent(t, n)
    }
}
, x0 = Lr("[RemoteConfig]"), Fm = class {
    constructor(t) {
        this.instance = t
    }
    get remoteConfig() {
        var t, n;
        return (t = _t._POSTHOG_REMOTE_CONFIG) === null || t === void 0 || (n = t[this.instance.config.token]) === null || n === void 0 ? void 0 : n.config
    }
    _loadRemoteConfigJs(t) {
        var n, i, r;
        (n = _t.__PosthogExtensions__) !== null && n !== void 0 && n.loadExternalDependency ? (i = _t.__PosthogExtensions__) === null || i === void 0 || (r = i.loadExternalDependency) === null || r === void 0 || r.call(i, this.instance, "remote-config", () => t(this.remoteConfig)) : (x0.error("PostHog Extensions not found. Cannot load remote config."),
        t())
    }
    _loadRemoteConfigJSON(t) {
        this.instance._send_request({
            method: "GET",
            url: this.instance.requestRouter.endpointFor("assets", "/array/".concat(this.instance.config.token, "/config")),
            callback: n => {
                t(n.json)
            }
        })
    }
    load() {
        try {
            if (this.remoteConfig)
                return x0.info("Using preloaded remote config", this.remoteConfig),
                void this.onRemoteConfig(this.remoteConfig);
            if (this.instance.config.advanced_disable_decide)
                return void x0.warn("Remote config is disabled. Falling back to local config.");
            this._loadRemoteConfigJs(t => {
                if (!t)
                    return x0.info("No config found after loading remote JS config. Falling back to JSON."),
                    void this._loadRemoteConfigJSON(n => {
                        this.onRemoteConfig(n)
                    }
                    );
                this.onRemoteConfig(t)
            }
            )
        } catch (t) {
            x0.error("Error loading remote config", t)
        }
    }
    onRemoteConfig(t) {
        t ? this.instance.config.__preview_remote_config ? (this.instance._onRemoteConfig(t),
        t.hasFeatureFlags !== !1 && this.instance.featureFlags.ensureFlagsLoaded()) : x0.info("__preview_remote_config is disabled. Logging config instead", t) : x0.error("Failed to fetch remote config from PostHog.")
    }
}
, Qa, DX = Y != null && Y.location ? dp(Y.location.hash, "__posthog") || dp(location.hash, "state") : null, tO = "_postHogToolbarParams";
(function(e) {
    e[e.UNINITIALIZED = 0] = "UNINITIALIZED",
    e[e.LOADING = 1] = "LOADING",
    e[e.LOADED = 2] = "LOADED"
}
)(Qa || (Qa = {}));
var Lm = class {
    constructor(t) {
        this.instance = t
    }
    setToolbarState(t) {
        _t.ph_toolbar_state = t
    }
    getToolbarState() {
        var t;
        return (t = _t.ph_toolbar_state) !== null && t !== void 0 ? t : Qa.UNINITIALIZED
    }
    maybeLoadToolbar() {
        var t, n, i = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : void 0, r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0, s = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0;
        if (!Y || !qe)
            return !1;
        i = (t = i) !== null && t !== void 0 ? t : Y.location,
        s = (n = s) !== null && n !== void 0 ? n : Y.history;
        try {
            if (!r) {
                try {
                    Y.localStorage.setItem("test", "test"),
                    Y.localStorage.removeItem("test")
                } catch {
                    return !1
                }
                r = Y?.localStorage
            }
            var o, a = DX || dp(i.hash, "__posthog") || dp(i.hash, "state"), c = a ? CT( () => JSON.parse(atob(decodeURIComponent(a)))) || CT( () => JSON.parse(decodeURIComponent(a))) : null;
            return c && c.action === "ph_authorize" ? ((o = c).source = "url",
            o && Object.keys(o).length > 0 && (c.desiredHash ? i.hash = c.desiredHash : s ? s.replaceState(s.state, "", i.pathname + i.search) : i.hash = "")) : ((o = JSON.parse(r.getItem(tO) || "{}")).source = "localstorage",
            delete o.userIntent),
            !(!o.token || this.instance.config.token !== o.token) && (this.loadToolbar(o),
            !0)
        } catch {
            return !1
        }
    }
    _callLoadToolbar(t) {
        (_t.ph_load_toolbar || _t.ph_load_editor)(t, this.instance)
    }
    loadToolbar(t) {
        var n = !(qe == null || !qe.getElementById(TO));
        if (!Y || n)
            return !1;
        var i = this.instance.requestRouter.region === "custom" && this.instance.config.advanced_disable_toolbar_metrics
          , r = we(we({
            token: this.instance.config.token
        }, t), {}, {
            apiURL: this.instance.requestRouter.endpointFor("ui")
        }, i ? {
            instrument: !1
        } : {});
        if (Y.localStorage.setItem(tO, JSON.stringify(we(we({}, r), {}, {
            source: void 0
        }))),
        this.getToolbarState() === Qa.LOADED)
            this._callLoadToolbar(r);
        else if (this.getToolbarState() === Qa.UNINITIALIZED) {
            var s, o;
            this.setToolbarState(Qa.LOADING),
            (s = _t.__PosthogExtensions__) === null || s === void 0 || (o = s.loadExternalDependency) === null || o === void 0 || o.call(s, this.instance, "toolbar", a => {
                if (a)
                    return tt.error("[Toolbar] Failed to load", a),
                    void this.setToolbarState(Qa.UNINITIALIZED);
                this.setToolbarState(Qa.LOADED),
                this._callLoadToolbar(r)
            }
            ),
            Za(Y, "turbolinks:load", () => {
                this.setToolbarState(Qa.UNINITIALIZED),
                this.loadToolbar(r)
            }
            )
        }
        return !0
    }
    _loadEditor(t) {
        return this.loadToolbar(t)
    }
    maybeLoadEditor() {
        var t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : void 0
          , n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0
          , i = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0;
        return this.maybeLoadToolbar(t, n, i)
    }
}
  , Bm = class {
    constructor(t) {
        Ie(this, "isPaused", !0),
        Ie(this, "queue", []),
        Ie(this, "flushTimeoutMs", 3e3),
        this.sendRequest = t
    }
    enqueue(t) {
        this.queue.push(t),
        this.flushTimeout || this.setFlushTimeout()
    }
    unload() {
        this.clearFlushTimeout();
        var t = this.queue.length > 0 ? this.formatQueue() : {}
          , n = Object.values(t)
          , i = [...n.filter(r => r.url.indexOf("/e") === 0), ...n.filter(r => r.url.indexOf("/e") !== 0)];
        i.map(r => {
            this.sendRequest(we(we({}, r), {}, {
                transport: "sendBeacon"
            }))
        }
        )
    }
    enable() {
        this.isPaused = !1,
        this.setFlushTimeout()
    }
    setFlushTimeout() {
        var t = this;
        this.isPaused || (this.flushTimeout = setTimeout( () => {
            if (this.clearFlushTimeout(),
            this.queue.length > 0) {
                var n = this.formatQueue()
                  , i = function(s) {
                    var o = n[s]
                      , a = new Date().getTime();
                    o.data && oi(o.data) && un(o.data, c => {
                        c.offset = Math.abs(c.timestamp - a),
                        delete c.timestamp
                    }
                    ),
                    t.sendRequest(o)
                };
                for (var r in n)
                    i(r)
            }
        }
        , this.flushTimeoutMs))
    }
    clearFlushTimeout() {
        clearTimeout(this.flushTimeout),
        this.flushTimeout = void 0
    }
    formatQueue() {
        var t = {};
        return un(this.queue, n => {
            var i, r = n, s = (r ? r.batchKey : null) || r.url;
            Ze(t[s]) && (t[s] = we(we({}, r), {}, {
                data: []
            })),
            (i = t[s].data) === null || i === void 0 || i.push(r.data)
        }
        ),
        this.queue = [],
        t
    }
}
  , NX = function(e) {
    var t, n, i, r, s = "";
    for (t = n = 0,
    i = (e = (e + "").replace(/\r\n/g, `
`).replace(/\r/g, `
`)).length,
    r = 0; r < i; r++) {
        var o = e.charCodeAt(r)
          , a = null;
        o < 128 ? n++ : a = o > 127 && o < 2048 ? String.fromCharCode(o >> 6 | 192, 63 & o | 128) : String.fromCharCode(o >> 12 | 224, o >> 6 & 63 | 128, 63 & o | 128),
        rl(a) || (n > t && (s += e.substring(t, n)),
        s += a,
        t = n = r + 1)
    }
    return n > t && (s += e.substring(t, e.length)),
    s
}
  , FX = !!am || !!om
  , nO = "text/plain"
  , _p = (e, t) => {
    var [n,i] = e.split("?")
      , r = we({}, t);
    i?.split("&").forEach(o => {
        var [a] = o.split("=");
        delete r[a]
    }
    );
    var s = eX(r);
    return s = s ? (i ? i + "&" : "") + s : i,
    "".concat(n, "?").concat(s)
}
  , Z2 = (e, t) => JSON.stringify(e, (n, i) => typeof i == "bigint" ? i.toString() : i, t)
  , nm = e => {
    var {data: t, compression: n} = e;
    if (t) {
        if (n === ra.GZipJS) {
            var i = iM(rM(Z2(t)), {
                mtime: 0
            })
              , r = new Blob([i],{
                type: nO
            });
            return {
                contentType: nO,
                body: r,
                estimatedSize: r.size
            }
        }
        if (n === ra.Base64) {
            var s = function(c) {
                var l, u, h, d, f, g = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", p = 0, v = 0, S = "", x = [];
                if (!c)
                    return c;
                c = NX(c);
                do
                    l = (f = c.charCodeAt(p++) << 16 | c.charCodeAt(p++) << 8 | c.charCodeAt(p++)) >> 18 & 63,
                    u = f >> 12 & 63,
                    h = f >> 6 & 63,
                    d = 63 & f,
                    x[v++] = g.charAt(l) + g.charAt(u) + g.charAt(h) + g.charAt(d);
                while (p < c.length);
                switch (S = x.join(""),
                c.length % 3) {
                case 1:
                    S = S.slice(0, -2) + "==";
                    break;
                case 2:
                    S = S.slice(0, -1) + "="
                }
                return S
            }(Z2(t))
              , o = (c => "data=" + encodeURIComponent(typeof c == "string" ? c : Z2(c)))(s);
            return {
                contentType: "application/x-www-form-urlencoded",
                body: o,
                estimatedSize: new Blob([o]).size
            }
        }
        var a = Z2(t);
        return {
            contentType: "application/json",
            body: a,
            estimatedSize: new Blob([a]).size
        }
    }
}
  , t5 = [];
om && t5.push({
    transport: "fetch",
    method: e => {
        var t, n, {contentType: i, body: r, estimatedSize: s} = (t = nm(e)) !== null && t !== void 0 ? t : {}, o = new Headers;
        un(e.headers, function(u, h) {
            o.append(h, u)
        }),
        i && o.append("Content-Type", i);
        var a = e.url
          , c = null;
        if (ST) {
            var l = new ST;
            c = {
                signal: l.signal,
                timeout: setTimeout( () => l.abort(), e.timeout)
            }
        }
        om(a, we({
            method: e?.method || "GET",
            headers: o,
            keepalive: e.method === "POST" && (s || 0) < 52428.8,
            body: r,
            signal: (n = c) === null || n === void 0 ? void 0 : n.signal
        }, e.fetchOptions)).then(u => u.text().then(h => {
            var d, f = {
                statusCode: u.status,
                text: h
            };
            if (u.status === 200)
                try {
                    f.json = JSON.parse(h)
                } catch (g) {
                    tt.error(g)
                }
            (d = e.callback) === null || d === void 0 || d.call(e, f)
        }
        )).catch(u => {
            var h;
            tt.error(u),
            (h = e.callback) === null || h === void 0 || h.call(e, {
                statusCode: 0,
                text: u
            })
        }
        ).finally( () => c ? clearTimeout(c.timeout) : null)
    }
}),
am && t5.push({
    transport: "XHR",
    method: e => {
        var t, n = new am;
        n.open(e.method || "GET", e.url, !0);
        var {contentType: i, body: r} = (t = nm(e)) !== null && t !== void 0 ? t : {};
        un(e.headers, function(s, o) {
            n.setRequestHeader(o, s)
        }),
        i && n.setRequestHeader("Content-Type", i),
        e.timeout && (n.timeout = e.timeout),
        n.withCredentials = !0,
        n.onreadystatechange = () => {
            if (n.readyState === 4) {
                var s, o = {
                    statusCode: n.status,
                    text: n.responseText
                };
                if (n.status === 200)
                    try {
                        o.json = JSON.parse(n.responseText)
                    } catch {}
                (s = e.callback) === null || s === void 0 || s.call(e, o)
            }
        }
        ,
        n.send(r)
    }
}),
Cs != null && Cs.sendBeacon && t5.push({
    transport: "sendBeacon",
    method: e => {
        var t = _p(e.url, {
            beacon: "1"
        });
        try {
            var n, {contentType: i, body: r} = (n = nm(e)) !== null && n !== void 0 ? n : {}, s = typeof r == "string" ? new Blob([r],{
                type: i
            }) : r;
            Cs.sendBeacon(t, s)
        } catch {}
    }
});
var LX = ["retriesPerformedSoFar"], Um = class {
    constructor(t) {
        Ie(this, "isPolling", !1),
        Ie(this, "pollIntervalMs", 3e3),
        Ie(this, "queue", []),
        this.instance = t,
        this.queue = [],
        this.areWeOnline = !0,
        !Ze(Y) && "onLine"in Y.navigator && (this.areWeOnline = Y.navigator.onLine,
        Y.addEventListener("online", () => {
            this.areWeOnline = !0,
            this.flush()
        }
        ),
        Y.addEventListener("offline", () => {
            this.areWeOnline = !1
        }
        ))
    }
    retriableRequest(t) {
        var {retriesPerformedSoFar: n} = t
          , i = xO(t, LX);
        Dr(n) && n > 0 && (i.url = _p(i.url, {
            retry_count: n
        })),
        this.instance._send_request(we(we({}, i), {}, {
            callback: r => {
                var s;
                r.statusCode !== 200 && (r.statusCode < 400 || r.statusCode >= 500) && (n ?? 0) < 10 ? this.enqueue(we({
                    retriesPerformedSoFar: n
                }, i)) : (s = i.callback) === null || s === void 0 || s.call(i, r)
            }
        }))
    }
    enqueue(t) {
        var n = t.retriesPerformedSoFar || 0;
        t.retriesPerformedSoFar = n + 1;
        var i = function(o) {
            var a = 3e3 * Math.pow(2, o)
              , c = a / 2
              , l = Math.min(18e5, a)
              , u = (Math.random() - .5) * (l - c);
            return Math.ceil(l + u)
        }(n)
          , r = Date.now() + i;
        this.queue.push({
            retryAt: r,
            requestOptions: t
        });
        var s = "Enqueued failed request for retry in ".concat(i);
        navigator.onLine || (s += " (Browser is offline)"),
        tt.warn(s),
        this.isPolling || (this.isPolling = !0,
        this.poll())
    }
    poll() {
        this.poller && clearTimeout(this.poller),
        this.poller = setTimeout( () => {
            this.areWeOnline && this.queue.length > 0 && this.flush(),
            this.poll()
        }
        , this.pollIntervalMs)
    }
    flush() {
        var t = Date.now()
          , n = []
          , i = this.queue.filter(s => s.retryAt < t || (n.push(s),
        !1));
        if (this.queue = n,
        i.length > 0)
            for (var {requestOptions: r} of i)
                this.retriableRequest(r)
    }
    unload() {
        for (var {requestOptions: t} of (this.poller && (clearTimeout(this.poller),
        this.poller = void 0),
        this.queue))
            try {
                this.instance._send_request(we(we({}, t), {}, {
                    transport: "sendBeacon"
                }))
            } catch (n) {
                tt.error(n)
            }
        this.queue = []
    }
}
, M0, iO = Lr("[SessionId]"), Hm = class {
    constructor(t, n, i) {
        var r;
        if (Ie(this, "_sessionIdChangedHandlers", []),
        !t.persistence)
            throw new Error("SessionIdManager requires a PostHogPersistence instance");
        if (t.config.__preview_experimental_cookieless_mode)
            throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");
        this.config = t.config,
        this.persistence = t.persistence,
        this._windowId = void 0,
        this._sessionId = void 0,
        this._sessionStartTimestamp = null,
        this._sessionActivityTimestamp = null,
        this._sessionIdGenerator = n || tl,
        this._windowIdGenerator = i || tl;
        var s = this.config.persistence_name || this.config.token
          , o = this.config.session_idle_timeout_seconds || 1800;
        if (this._sessionTimeoutMs = 1e3 * oa(o, 60, 36e3, "session_idle_timeout_seconds", 1800),
        t.register({
            $configured_session_timeout_ms: this._sessionTimeoutMs
        }),
        this.resetIdleTimer(),
        this._window_id_storage_key = "ph_" + s + "_window_id",
        this._primary_window_exists_storage_key = "ph_" + s + "_primary_window_exists",
        this._canUseSessionStorage()) {
            var a = Yi.parse(this._window_id_storage_key)
              , c = Yi.parse(this._primary_window_exists_storage_key);
            a && !c ? this._windowId = a : Yi.remove(this._window_id_storage_key),
            Yi.set(this._primary_window_exists_storage_key, !0)
        }
        if ((r = this.config.bootstrap) !== null && r !== void 0 && r.sessionID)
            try {
                var l = (u => {
                    var h = u.replace(/-/g, "");
                    if (h.length !== 32)
                        throw new Error("Not a valid UUID");
                    if (h[12] !== "7")
                        throw new Error("Not a UUIDv7");
                    return parseInt(h.substring(0, 12), 16)
                }
                )(this.config.bootstrap.sessionID);
                this._setSessionId(this.config.bootstrap.sessionID, new Date().getTime(), l)
            } catch (u) {
                iO.error("Invalid sessionID in bootstrap", u)
            }
        this._listenToReloadWindow()
    }
    get sessionTimeoutMs() {
        return this._sessionTimeoutMs
    }
    onSessionId(t) {
        return Ze(this._sessionIdChangedHandlers) && (this._sessionIdChangedHandlers = []),
        this._sessionIdChangedHandlers.push(t),
        this._sessionId && t(this._sessionId, this._windowId),
        () => {
            this._sessionIdChangedHandlers = this._sessionIdChangedHandlers.filter(n => n !== t)
        }
    }
    _canUseSessionStorage() {
        return this.config.persistence !== "memory" && !this.persistence.disabled && Yi.is_supported()
    }
    _setWindowId(t) {
        t !== this._windowId && (this._windowId = t,
        this._canUseSessionStorage() && Yi.set(this._window_id_storage_key, t))
    }
    _getWindowId() {
        return this._windowId ? this._windowId : this._canUseSessionStorage() ? Yi.parse(this._window_id_storage_key) : null
    }
    _setSessionId(t, n, i) {
        t === this._sessionId && n === this._sessionActivityTimestamp && i === this._sessionStartTimestamp || (this._sessionStartTimestamp = i,
        this._sessionActivityTimestamp = n,
        this._sessionId = t,
        this.persistence.register({
            [cp]: [n, t, i]
        }))
    }
    _getSessionId() {
        if (this._sessionId && this._sessionActivityTimestamp && this._sessionStartTimestamp)
            return [this._sessionActivityTimestamp, this._sessionId, this._sessionStartTimestamp];
        var t = this.persistence.props[cp];
        return oi(t) && t.length === 2 && t.push(t[0]),
        t || [0, null, 0]
    }
    resetSessionId() {
        this._setSessionId(null, null, null)
    }
    _listenToReloadWindow() {
        Y?.addEventListener("beforeunload", () => {
            this._canUseSessionStorage() && Yi.remove(this._primary_window_exists_storage_key)
        }
        )
    }
    checkAndGetSessionAndWindowId() {
        var t = arguments.length > 0 && arguments[0] !== void 0 && arguments[0]
          , n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;
        if (this.config.__preview_experimental_cookieless_mode)
            throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");
        var i = n || new Date().getTime()
          , [r,s,o] = this._getSessionId()
          , a = this._getWindowId()
          , c = Dr(o) && o > 0 && Math.abs(i - o) > 864e5
          , l = !1
          , u = !s
          , h = !t && Math.abs(i - r) > this.sessionTimeoutMs;
        u || h || c ? (s = this._sessionIdGenerator(),
        a = this._windowIdGenerator(),
        iO.info("new session ID generated", {
            sessionId: s,
            windowId: a,
            changeReason: {
                noSessionId: u,
                activityTimeout: h,
                sessionPastMaximumLength: c
            }
        }),
        o = i,
        l = !0) : a || (a = this._windowIdGenerator(),
        l = !0);
        var d = r === 0 || !t || c ? i : r
          , f = o === 0 ? new Date().getTime() : o;
        return this._setWindowId(a),
        this._setSessionId(s, d, f),
        t || this.resetIdleTimer(),
        l && this._sessionIdChangedHandlers.forEach(g => g(s, a, l ? {
            noSessionId: u,
            activityTimeout: h,
            sessionPastMaximumLength: c
        } : void 0)),
        {
            sessionId: s,
            windowId: a,
            sessionStartTimestamp: f,
            changeReason: l ? {
                noSessionId: u,
                activityTimeout: h,
                sessionPastMaximumLength: c
            } : void 0,
            lastActivityTimestamp: r
        }
    }
    resetIdleTimer() {
        clearTimeout(this._enforceIdleTimeout),
        this._enforceIdleTimeout = setTimeout( () => {
            this.resetSessionId()
        }
        , 1.1 * this.sessionTimeoutMs)
    }
}
;
(function(e) {
    e.US = "us",
    e.EU = "eu",
    e.CUSTOM = "custom"
}
)(M0 || (M0 = {}));
var rO = "i.posthog.com"
  , Gm = class {
    constructor(t) {
        Ie(this, "_regionCache", {}),
        this.instance = t
    }
    get apiHost() {
        var t = this.instance.config.api_host.trim().replace(/\/$/, "");
        return t === "https://app.posthog.com" ? "https://us.i.posthog.com" : t
    }
    get uiHost() {
        var t, n = (t = this.instance.config.ui_host) === null || t === void 0 ? void 0 : t.replace(/\/$/, "");
        return n || (n = this.apiHost.replace(".".concat(rO), ".posthog.com")),
        n === "https://app.posthog.com" ? "https://us.posthog.com" : n
    }
    get region() {
        return this._regionCache[this.apiHost] || (/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost) ? this._regionCache[this.apiHost] = M0.US : /https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost) ? this._regionCache[this.apiHost] = M0.EU : this._regionCache[this.apiHost] = M0.CUSTOM),
        this._regionCache[this.apiHost]
    }
    endpointFor(t) {
        var n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
        if (n && (n = n[0] === "/" ? n : "/".concat(n)),
        t === "ui")
            return this.uiHost + n;
        if (this.region === M0.CUSTOM)
            return this.apiHost + n;
        var i = rO + n;
        switch (t) {
        case "assets":
            return "https://".concat(this.region, "-assets.").concat(i);
        case "api":
            return "https://".concat(this.region, ".").concat(i)
        }
    }
}
  , sM = "posthog-js";
function oM(e) {
    var {organization: t, projectId: n, prefix: i, severityAllowList: r=["error"]} = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return s => {
        var o, a, c, l, u;
        if (!(r === "*" || r.includes(s.level)) || !e.__loaded)
            return s;
        s.tags || (s.tags = {});
        var h = e.requestRouter.endpointFor("ui", "/project/".concat(e.config.token, "/person/").concat(e.get_distinct_id()));
        s.tags["PostHog Person URL"] = h,
        e.sessionRecordingStarted() && (s.tags["PostHog Recording URL"] = e.get_session_replay_url({
            withTimestamp: !0
        }));
        var d = ((o = s.exception) === null || o === void 0 ? void 0 : o.values) || [];
        d.map(g => {
            g.stacktrace && (g.stacktrace.type = "raw")
        }
        );
        var f = {
            $exception_message: ((a = d[0]) === null || a === void 0 ? void 0 : a.value) || s.message,
            $exception_type: (c = d[0]) === null || c === void 0 ? void 0 : c.type,
            $exception_personURL: h,
            $exception_level: s.level,
            $exception_list: d,
            $sentry_event_id: s.event_id,
            $sentry_exception: s.exception,
            $sentry_exception_message: ((l = d[0]) === null || l === void 0 ? void 0 : l.value) || s.message,
            $sentry_exception_type: (u = d[0]) === null || u === void 0 ? void 0 : u.type,
            $sentry_tags: s.tags
        };
        return t && n && (f.$sentry_url = (i || "https://sentry.io/organizations/") + t + "/issues/?project=" + n + "&query=" + s.event_id),
        e.exceptions.sendExceptionEvent(f),
        s
    }
}
var Vm = class {
    constructor(t, n, i, r, s) {
        this.name = sM,
        this.setupOnce = function(o) {
            o(oM(t, {
                organization: n,
                projectId: i,
                prefix: r,
                severityAllowList: s
            }))
        }
    }
}
, sO, yp, mo, im = Lr("[SegmentIntegration]");
function BX(e, t) {
    var n = e.config.segment;
    if (!n)
        return t();
    (function(i, r) {
        var s = i.config.segment;
        if (!s)
            return r();
        var o = c => {
            var l = () => c.anonymousId() || tl();
            i.config.get_device_id = l,
            c.id() && (i.register({
                distinct_id: c.id(),
                $device_id: l()
            }),
            i.persistence.set_property(Ka, "identified")),
            r()
        }
          , a = s.user();
        "then"in a && Gs(a.then) ? a.then(c => o(c)) : o(a)
    }
    )(e, () => {
        n.register((i => {
            Promise && Promise.resolve || im.warn("This browser does not have Promise support, and can not use the segment integration");
            var r = (s, o) => {
                var a;
                if (!o)
                    return s;
                s.event.userId || s.event.anonymousId === i.get_distinct_id() || (im.info("No userId set, resetting PostHog"),
                i.reset()),
                s.event.userId && s.event.userId !== i.get_distinct_id() && (im.info("UserId set, identifying with PostHog"),
                i.identify(s.event.userId));
                var c = i._calculate_event_properties(o, (a = s.event.properties) !== null && a !== void 0 ? a : {}, new Date);
                return s.event.properties = Object.assign({}, c, s.event.properties),
                s
            }
            ;
            return {
                name: "PostHog JS",
                type: "enrichment",
                version: "1.0.0",
                isLoaded: () => !0,
                load: () => Promise.resolve(),
                track: s => r(s, s.event.event),
                page: s => r(s, "$pageview"),
                identify: s => r(s, "$identify"),
                screen: s => r(s, "$screen")
            }
        }
        )(e)).then( () => {
            t()
        }
        )
    }
    )
}
var $m = class {
    constructor(t) {
        this._instance = t
    }
    doPageView(t) {
        var n, i = this._previousPageViewProperties(t);
        return this._currentPath = (n = Y?.location.pathname) !== null && n !== void 0 ? n : "",
        this._instance.scrollManager.resetContext(),
        this._prevPageviewTimestamp = t,
        i
    }
    doPageLeave(t) {
        return this._previousPageViewProperties(t)
    }
    _previousPageViewProperties(t) {
        var n = this._currentPath
          , i = this._prevPageviewTimestamp
          , r = this._instance.scrollManager.getContext();
        if (!i)
            return {};
        var s = {};
        if (r) {
            var {maxScrollHeight: o, lastScrollY: a, maxScrollY: c, maxContentHeight: l, lastContentY: u, maxContentY: h} = r;
            Ze(o) || Ze(a) || Ze(c) || Ze(l) || Ze(u) || Ze(h) || (o = Math.ceil(o),
            a = Math.ceil(a),
            c = Math.ceil(c),
            l = Math.ceil(l),
            u = Math.ceil(u),
            h = Math.ceil(h),
            s = {
                $prev_pageview_last_scroll: a,
                $prev_pageview_last_scroll_percentage: o <= 1 ? 1 : oa(a / o, 0, 1),
                $prev_pageview_max_scroll: c,
                $prev_pageview_max_scroll_percentage: o <= 1 ? 1 : oa(c / o, 0, 1),
                $prev_pageview_last_content: u,
                $prev_pageview_last_content_percentage: l <= 1 ? 1 : oa(u / l, 0, 1),
                $prev_pageview_max_content: h,
                $prev_pageview_max_content_percentage: l <= 1 ? 1 : oa(h / l, 0, 1)
            })
        }
        return n && (s.$prev_pageview_pathname = n),
        i && (s.$prev_pageview_duration = (t.getTime() - i.getTime()) / 1e3),
        s
    }
}
;
(function(e) {
    e.Popover = "popover",
    e.API = "api",
    e.Widget = "widget"
}
)(sO || (sO = {})),
function(e) {
    e.Open = "open",
    e.MultipleChoice = "multiple_choice",
    e.SingleChoice = "single_choice",
    e.Rating = "rating",
    e.Link = "link"
}(yp || (yp = {})),
function(e) {
    e.NextQuestion = "next_question",
    e.End = "end",
    e.ResponseBased = "response_based",
    e.SpecificQuestion = "specific_question"
}(mo || (mo = {}));
var Sp = class {
    constructor() {
        Ie(this, "events", {}),
        this.events = {}
    }
    on(t, n) {
        return this.events[t] || (this.events[t] = []),
        this.events[t].push(n),
        () => {
            this.events[t] = this.events[t].filter(i => i !== n)
        }
    }
    emit(t, n) {
        for (var i of this.events[t] || [])
            i(n);
        for (var r of this.events["*"] || [])
            r(t, n)
    }
}
  , Wm = class e {
    constructor(t) {
        Ie(this, "_debugEventEmitter", new Sp),
        Ie(this, "checkStep", (n, i) => this.checkStepEvent(n, i) && this.checkStepUrl(n, i) && this.checkStepElement(n, i)),
        Ie(this, "checkStepEvent", (n, i) => i == null || !i.event || n?.event === i?.event),
        this.instance = t,
        this.actionEvents = new Set,
        this.actionRegistry = new Set
    }
    init() {
        var t;
        if (!Ze((t = this.instance) === null || t === void 0 ? void 0 : t._addCaptureHook)) {
            var n;
            (n = this.instance) === null || n === void 0 || n._addCaptureHook( (i, r) => {
                this.on(i, r)
            }
            )
        }
    }
    register(t) {
        var n, i;
        if (!Ze((n = this.instance) === null || n === void 0 ? void 0 : n._addCaptureHook) && (t.forEach(o => {
            var a, c;
            (a = this.actionRegistry) === null || a === void 0 || a.add(o),
            (c = o.steps) === null || c === void 0 || c.forEach(l => {
                var u;
                (u = this.actionEvents) === null || u === void 0 || u.add(l?.event || "")
            }
            )
        }
        ),
        (i = this.instance) !== null && i !== void 0 && i.autocapture)) {
            var r, s = new Set;
            t.forEach(o => {
                var a;
                (a = o.steps) === null || a === void 0 || a.forEach(c => {
                    c != null && c.selector && s.add(c?.selector)
                }
                )
            }
            ),
            (r = this.instance) === null || r === void 0 || r.autocapture.setElementSelectors(s)
        }
    }
    on(t, n) {
        var i;
        n != null && t.length != 0 && (this.actionEvents.has(t) || this.actionEvents.has(n?.event)) && this.actionRegistry && ((i = this.actionRegistry) === null || i === void 0 ? void 0 : i.size) > 0 && this.actionRegistry.forEach(r => {
            this.checkAction(n, r) && this._debugEventEmitter.emit("actionCaptured", r.name)
        }
        )
    }
    _addActionHook(t) {
        this.onAction("actionCaptured", n => t(n))
    }
    checkAction(t, n) {
        if (n?.steps == null)
            return !1;
        for (var i of n.steps)
            if (this.checkStep(t, i))
                return !0;
        return !1
    }
    onAction(t, n) {
        return this._debugEventEmitter.on(t, n)
    }
    checkStepUrl(t, n) {
        if (n != null && n.url) {
            var i, r = t == null || (i = t.properties) === null || i === void 0 ? void 0 : i.$current_url;
            if (!r || typeof r != "string" || !e.matchString(r, n?.url, n?.url_matching || "contains"))
                return !1
        }
        return !0
    }
    static matchString(t, n, i) {
        switch (i) {
        case "regex":
            return !!Y && gh(t, n);
        case "exact":
            return n === t;
        case "contains":
            var r = e.escapeStringRegexp(n).replace(/_/g, ".").replace(/%/g, ".*");
            return gh(t, r);
        default:
            return !1
        }
    }
    static escapeStringRegexp(t) {
        return t.replace(/[|\\{}()[\]^$+*?.]/g, "\\$&").replace(/-/g, "\\x2d")
    }
    checkStepElement(t, n) {
        if ((n != null && n.href || n != null && n.tag_name || n != null && n.text) && !this.getElementsList(t).some(s => !(n != null && n.href && !e.matchString(s.href || "", n?.href, n?.href_matching || "exact")) && (n == null || !n.tag_name || s.tag_name === n?.tag_name) && !(n != null && n.text && !e.matchString(s.text || "", n?.text, n?.text_matching || "exact") && !e.matchString(s.$el_text || "", n?.text, n?.text_matching || "exact"))))
            return !1;
        if (n != null && n.selector) {
            var i, r = t == null || (i = t.properties) === null || i === void 0 ? void 0 : i.$element_selectors;
            if (!r || !r.includes(n?.selector))
                return !1
        }
        return !0
    }
    getElementsList(t) {
        return t?.properties.$elements == null ? [] : t?.properties.$elements
    }
}
  , a5 = class e {
    constructor(t) {
        this.instance = t,
        this.eventToSurveys = new Map,
        this.actionToSurveys = new Map
    }
    register(t) {
        var n;
        Ze((n = this.instance) === null || n === void 0 ? void 0 : n._addCaptureHook) || (this.setupEventBasedSurveys(t),
        this.setupActionBasedSurveys(t))
    }
    setupActionBasedSurveys(t) {
        var n = t.filter(i => {
            var r, s, o, a;
            return ((r = i.conditions) === null || r === void 0 ? void 0 : r.actions) && ((s = i.conditions) === null || s === void 0 || (o = s.actions) === null || o === void 0 || (a = o.values) === null || a === void 0 ? void 0 : a.length) > 0
        }
        );
        n.length !== 0 && (this.actionMatcher == null && (this.actionMatcher = new Wm(this.instance),
        this.actionMatcher.init(),
        this.actionMatcher._addActionHook(i => {
            this.onAction(i)
        }
        )),
        n.forEach(i => {
            var r, s, o, a, c, l, u, h, d, f;
            i.conditions && (r = i.conditions) !== null && r !== void 0 && r.actions && (s = i.conditions) !== null && s !== void 0 && (o = s.actions) !== null && o !== void 0 && o.values && ((a = i.conditions) === null || a === void 0 || (c = a.actions) === null || c === void 0 || (l = c.values) === null || l === void 0 ? void 0 : l.length) > 0 && ((u = this.actionMatcher) === null || u === void 0 || u.register(i.conditions.actions.values),
            (h = i.conditions) === null || h === void 0 || (d = h.actions) === null || d === void 0 || (f = d.values) === null || f === void 0 || f.forEach(g => {
                if (g && g.name) {
                    var p = this.actionToSurveys.get(g.name);
                    p && p.push(i.id),
                    this.actionToSurveys.set(g.name, p || [i.id])
                }
            }
            ))
        }
        ))
    }
    setupEventBasedSurveys(t) {
        var n;
        t.filter(i => {
            var r, s, o, a;
            return ((r = i.conditions) === null || r === void 0 ? void 0 : r.events) && ((s = i.conditions) === null || s === void 0 || (o = s.events) === null || o === void 0 || (a = o.values) === null || a === void 0 ? void 0 : a.length) > 0
        }
        ).length !== 0 && ((n = this.instance) === null || n === void 0 || n._addCaptureHook( (i, r) => {
            this.onEvent(i, r)
        }
        ),
        t.forEach(i => {
            var r, s, o;
            (r = i.conditions) === null || r === void 0 || (s = r.events) === null || s === void 0 || (o = s.values) === null || o === void 0 || o.forEach(a => {
                if (a && a.name) {
                    var c = this.eventToSurveys.get(a.name);
                    c && c.push(i.id),
                    this.eventToSurveys.set(a.name, c || [i.id])
                }
            }
            )
        }
        ))
    }
    onEvent(t, n) {
        var i, r, s = ((i = this.instance) === null || i === void 0 || (r = i.persistence) === null || r === void 0 ? void 0 : r.props[q2]) || [];
        if (e.SURVEY_SHOWN_EVENT_NAME == t && n && s.length > 0) {
            var o, a = n == null || (o = n.properties) === null || o === void 0 ? void 0 : o.$survey_id;
            if (a) {
                var c = s.indexOf(a);
                c >= 0 && (s.splice(c, 1),
                this._updateActivatedSurveys(s))
            }
        } else
            this.eventToSurveys.has(t) && this._updateActivatedSurveys(s.concat(this.eventToSurveys.get(t) || []))
    }
    onAction(t) {
        var n, i, r = ((n = this.instance) === null || n === void 0 || (i = n.persistence) === null || i === void 0 ? void 0 : i.props[q2]) || [];
        this.actionToSurveys.has(t) && this._updateActivatedSurveys(r.concat(this.actionToSurveys.get(t) || []))
    }
    _updateActivatedSurveys(t) {
        var n, i;
        (n = this.instance) === null || n === void 0 || (i = n.persistence) === null || i === void 0 || i.register({
            [q2]: [...new Set(t)]
        })
    }
    getSurveys() {
        var t, n, i = (t = this.instance) === null || t === void 0 || (n = t.persistence) === null || n === void 0 ? void 0 : n.props[q2];
        return i || []
    }
    getEventToSurveys() {
        return this.eventToSurveys
    }
    _getActionMatcher() {
        return this.actionMatcher
    }
}
;
Ie(a5, "SURVEY_SHOWN_EVENT_NAME", "survey shown");
var aM, Gn, cM, T0, oO, lM, jm, uM, qm = {}, hM = [], UX = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i, v8 = Array.isArray;
function nl(e, t) {
    for (var n in t)
        e[n] = t[n];
    return e
}
function dM(e) {
    var t = e.parentNode;
    t && t.removeChild(e)
}
function rm(e, t, n, i, r) {
    var s = {
        type: e,
        props: t,
        key: n,
        ref: i,
        __k: null,
        __: null,
        __b: 0,
        __e: null,
        __d: void 0,
        __c: null,
        constructor: void 0,
        __v: r ?? ++cM,
        __i: -1,
        __u: 0
    };
    return r == null && Gn.vnode != null && Gn.vnode(s),
    s
}
function _8(e) {
    return e.children
}
function sp(e, t) {
    this.props = e,
    this.context = t
}
function yh(e, t) {
    if (t == null)
        return e.__ ? yh(e.__, e.__i + 1) : null;
    for (var n; t < e.__k.length; t++)
        if ((n = e.__k[t]) != null && n.__e != null)
            return n.__e;
    return typeof e.type == "function" ? yh(e) : null
}
function fM(e) {
    var t, n;
    if ((e = e.__) != null && e.__c != null) {
        for (e.__e = e.__c.base = null,
        t = 0; t < e.__k.length; t++)
            if ((n = e.__k[t]) != null && n.__e != null) {
                e.__e = e.__c.base = n.__e;
                break
            }
        return fM(e)
    }
}
function zm(e) {
    (!e.__d && (e.__d = !0) && T0.push(e) && !bp.__r++ || oO !== Gn.debounceRendering) && ((oO = Gn.debounceRendering) || lM)(bp)
}
function bp() {
    var e, t, n, i, r, s, o, a, c;
    for (T0.sort(jm); e = T0.shift(); )
        e.__d && (t = T0.length,
        i = void 0,
        s = (r = (n = e).__v).__e,
        a = [],
        c = [],
        (o = n.__P) && ((i = nl({}, r)).__v = r.__v + 1,
        Gn.vnode && Gn.vnode(i),
        mM(o, i, r, n.__n, o.ownerSVGElement !== void 0, 32 & r.__u ? [s] : null, a, s ?? yh(r), !!(32 & r.__u), c),
        i.__.__k[i.__i] = i,
        VX(a, i, c),
        i.__e != s && fM(i)),
        T0.length > t && T0.sort(jm));
    bp.__r = 0
}
function pM(e, t, n, i, r, s, o, a, c, l, u) {
    var h, d, f, g, p, v = i && i.__k || hM, S = t.length;
    for (n.__d = c,
    HX(n, t, v),
    c = n.__d,
    h = 0; h < S; h++)
        (f = n.__k[h]) != null && typeof f != "boolean" && typeof f != "function" && (d = f.__i === -1 ? qm : v[f.__i] || qm,
        f.__i = h,
        mM(e, f, d, r, s, o, a, c, l, u),
        g = f.__e,
        f.ref && d.ref != f.ref && (d.ref && y8(d.ref, null, f),
        u.push(f.ref, f.__c || g, f)),
        p == null && g != null && (p = g),
        65536 & f.__u || d.__k === f.__k ? c = gM(f, c, e) : typeof f.type == "function" && f.__d !== void 0 ? c = f.__d : g && (c = g.nextSibling),
        f.__d = void 0,
        f.__u &= -196609);
    n.__d = c,
    n.__e = p
}
function HX(e, t, n) {
    var i, r, s, o, a, c = t.length, l = n.length, u = l, h = 0;
    for (e.__k = [],
    i = 0; i < c; i++)
        (r = e.__k[i] = (r = t[i]) == null || typeof r == "boolean" || typeof r == "function" ? null : typeof r == "string" || typeof r == "number" || typeof r == "bigint" || r.constructor == String ? rm(null, r, null, null, r) : v8(r) ? rm(_8, {
            children: r
        }, null, null, null) : r.constructor === void 0 && r.__b > 0 ? rm(r.type, r.props, r.key, r.ref ? r.ref : null, r.__v) : r) != null ? (r.__ = e,
        r.__b = e.__b + 1,
        a = GX(r, n, o = i + h, u),
        r.__i = a,
        s = null,
        a !== -1 && (u--,
        (s = n[a]) && (s.__u |= 131072)),
        s == null || s.__v === null ? (a == -1 && h--,
        typeof r.type != "function" && (r.__u |= 65536)) : a !== o && (a === o + 1 ? h++ : a > o ? u > c - o ? h += a - o : h-- : h = a < o && a == o - 1 ? a - o : 0,
        a !== i + h && (r.__u |= 65536))) : (s = n[i]) && s.key == null && s.__e && (s.__e == e.__d && (e.__d = yh(s)),
        Xm(s, s, !1),
        n[i] = null,
        u--);
    if (u)
        for (i = 0; i < l; i++)
            (s = n[i]) != null && !(131072 & s.__u) && (s.__e == e.__d && (e.__d = yh(s)),
            Xm(s, s))
}
function gM(e, t, n) {
    var i, r;
    if (typeof e.type == "function") {
        for (i = e.__k,
        r = 0; i && r < i.length; r++)
            i[r] && (i[r].__ = e,
            t = gM(i[r], t, n));
        return t
    }
    return e.__e != t && (n.insertBefore(e.__e, t || null),
    t = e.__e),
    t && t.nextSibling
}
function GX(e, t, n, i) {
    var r = e.key
      , s = e.type
      , o = n - 1
      , a = n + 1
      , c = t[n];
    if (c === null || c && r == c.key && s === c.type)
        return n;
    if (i > (c != null && !(131072 & c.__u) ? 1 : 0))
        for (; o >= 0 || a < t.length; ) {
            if (o >= 0) {
                if ((c = t[o]) && !(131072 & c.__u) && r == c.key && s === c.type)
                    return o;
                o--
            }
            if (a < t.length) {
                if ((c = t[a]) && !(131072 & c.__u) && r == c.key && s === c.type)
                    return a;
                a++
            }
        }
    return -1
}
function aO(e, t, n) {
    t[0] === "-" ? e.setProperty(t, n ?? "") : e[t] = n == null ? "" : typeof n != "number" || UX.test(t) ? n : n + "px"
}
function ep(e, t, n, i, r) {
    var s;
    e: if (t === "style")
        if (typeof n == "string")
            e.style.cssText = n;
        else {
            if (typeof i == "string" && (e.style.cssText = i = ""),
            i)
                for (t in i)
                    n && t in n || aO(e.style, t, "");
            if (n)
                for (t in n)
                    i && n[t] === i[t] || aO(e.style, t, n[t])
        }
    else if (t[0] === "o" && t[1] === "n")
        s = t !== (t = t.replace(/(PointerCapture)$|Capture$/, "$1")),
        t = t.toLowerCase()in e ? t.toLowerCase().slice(2) : t.slice(2),
        e.l || (e.l = {}),
        e.l[t + s] = n,
        n ? i ? n.u = i.u : (n.u = Date.now(),
        e.addEventListener(t, s ? lO : cO, s)) : e.removeEventListener(t, s ? lO : cO, s);
    else {
        if (r)
            t = t.replace(/xlink(H|:h)/, "h").replace(/sName$/, "s");
        else if (t !== "width" && t !== "height" && t !== "href" && t !== "list" && t !== "form" && t !== "tabIndex" && t !== "download" && t !== "rowSpan" && t !== "colSpan" && t !== "role" && t in e)
            try {
                e[t] = n ?? "";
                break e
            } catch {}
        typeof n == "function" || (n == null || n === !1 && t[4] !== "-" ? e.removeAttribute(t) : e.setAttribute(t, n))
    }
}
function cO(e) {
    var t = this.l[e.type + !1];
    if (e.t) {
        if (e.t <= t.u)
            return
    } else
        e.t = Date.now();
    return t(Gn.event ? Gn.event(e) : e)
}
function lO(e) {
    return this.l[e.type + !0](Gn.event ? Gn.event(e) : e)
}
function mM(e, t, n, i, r, s, o, a, c, l) {
    var u, h, d, f, g, p, v, S, x, w, k, B, N, E, F, O = t.type;
    if (t.constructor !== void 0)
        return null;
    128 & n.__u && (c = !!(32 & n.__u),
    s = [a = t.__e = n.__e]),
    (u = Gn.__b) && u(t);
    e: if (typeof O == "function")
        try {
            if (S = t.props,
            x = (u = O.contextType) && i[u.__c],
            w = u ? x ? x.props.value : u.__ : i,
            n.__c ? v = (h = t.__c = n.__c).__ = h.__E : ("prototype"in O && O.prototype.render ? t.__c = h = new O(S,w) : (t.__c = h = new sp(S,w),
            h.constructor = O,
            h.render = WX),
            x && x.sub(h),
            h.props = S,
            h.state || (h.state = {}),
            h.context = w,
            h.__n = i,
            d = h.__d = !0,
            h.__h = [],
            h._sb = []),
            h.__s == null && (h.__s = h.state),
            O.getDerivedStateFromProps != null && (h.__s == h.state && (h.__s = nl({}, h.__s)),
            nl(h.__s, O.getDerivedStateFromProps(S, h.__s))),
            f = h.props,
            g = h.state,
            h.__v = t,
            d)
                O.getDerivedStateFromProps == null && h.componentWillMount != null && h.componentWillMount(),
                h.componentDidMount != null && h.__h.push(h.componentDidMount);
            else {
                if (O.getDerivedStateFromProps == null && S !== f && h.componentWillReceiveProps != null && h.componentWillReceiveProps(S, w),
                !h.__e && (h.shouldComponentUpdate != null && h.shouldComponentUpdate(S, h.__s, w) === !1 || t.__v === n.__v)) {
                    for (t.__v !== n.__v && (h.props = S,
                    h.state = h.__s,
                    h.__d = !1),
                    t.__e = n.__e,
                    t.__k = n.__k,
                    t.__k.forEach(function(V) {
                        V && (V.__ = t)
                    }),
                    k = 0; k < h._sb.length; k++)
                        h.__h.push(h._sb[k]);
                    h._sb = [],
                    h.__h.length && o.push(h);
                    break e
                }
                h.componentWillUpdate != null && h.componentWillUpdate(S, h.__s, w),
                h.componentDidUpdate != null && h.__h.push(function() {
                    h.componentDidUpdate(f, g, p)
                })
            }
            if (h.context = w,
            h.props = S,
            h.__P = e,
            h.__e = !1,
            B = Gn.__r,
            N = 0,
            "prototype"in O && O.prototype.render) {
                for (h.state = h.__s,
                h.__d = !1,
                B && B(t),
                u = h.render(h.props, h.state, h.context),
                E = 0; E < h._sb.length; E++)
                    h.__h.push(h._sb[E]);
                h._sb = []
            } else
                do
                    h.__d = !1,
                    B && B(t),
                    u = h.render(h.props, h.state, h.context),
                    h.state = h.__s;
                while (h.__d && ++N < 25);
            h.state = h.__s,
            h.getChildContext != null && (i = nl(nl({}, i), h.getChildContext())),
            d || h.getSnapshotBeforeUpdate == null || (p = h.getSnapshotBeforeUpdate(f, g)),
            pM(e, v8(F = u != null && u.type === _8 && u.key == null ? u.props.children : u) ? F : [F], t, n, i, r, s, o, a, c, l),
            h.base = t.__e,
            t.__u &= -161,
            h.__h.length && o.push(h),
            v && (h.__E = h.__ = null)
        } catch (V) {
            t.__v = null,
            c || s != null ? (t.__e = a,
            t.__u |= c ? 160 : 32,
            s[s.indexOf(a)] = null) : (t.__e = n.__e,
            t.__k = n.__k),
            Gn.__e(V, t, n)
        }
    else
        s == null && t.__v === n.__v ? (t.__k = n.__k,
        t.__e = n.__e) : t.__e = $X(n.__e, t, n, i, r, s, o, c, l);
    (u = Gn.diffed) && u(t)
}
function VX(e, t, n) {
    t.__d = void 0;
    for (var i = 0; i < n.length; i++)
        y8(n[i], n[++i], n[++i]);
    Gn.__c && Gn.__c(t, e),
    e.some(function(r) {
        try {
            e = r.__h,
            r.__h = [],
            e.some(function(s) {
                s.call(r)
            })
        } catch (s) {
            Gn.__e(s, r.__v)
        }
    })
}
function $X(e, t, n, i, r, s, o, a, c) {
    var l, u, h, d, f, g, p, v = n.props, S = t.props, x = t.type;
    if (x === "svg" && (r = !0),
    s != null) {
        for (l = 0; l < s.length; l++)
            if ((f = s[l]) && "setAttribute"in f == !!x && (x ? f.localName === x : f.nodeType === 3)) {
                e = f,
                s[l] = null;
                break
            }
    }
    if (e == null) {
        if (x === null)
            return document.createTextNode(S);
        e = r ? document.createElementNS("http://www.w3.org/2000/svg", x) : document.createElement(x, S.is && S),
        s = null,
        a = !1
    }
    if (x === null)
        v === S || a && e.data === S || (e.data = S);
    else {
        if (s = s && aM.call(e.childNodes),
        v = n.props || qm,
        !a && s != null)
            for (v = {},
            l = 0; l < e.attributes.length; l++)
                v[(f = e.attributes[l]).name] = f.value;
        for (l in v)
            f = v[l],
            l == "children" || (l == "dangerouslySetInnerHTML" ? h = f : l === "key" || l in S || ep(e, l, null, f, r));
        for (l in S)
            f = S[l],
            l == "children" ? d = f : l == "dangerouslySetInnerHTML" ? u = f : l == "value" ? g = f : l == "checked" ? p = f : l === "key" || a && typeof f != "function" || v[l] === f || ep(e, l, f, v[l], r);
        if (u)
            a || h && (u.__html === h.__html || u.__html === e.innerHTML) || (e.innerHTML = u.__html),
            t.__k = [];
        else if (h && (e.innerHTML = ""),
        pM(e, v8(d) ? d : [d], t, n, i, r && x !== "foreignObject", s, o, s ? s[0] : n.__k && yh(n, 0), a, c),
        s != null)
            for (l = s.length; l--; )
                s[l] != null && dM(s[l]);
        a || (l = "value",
        g !== void 0 && (g !== e[l] || x === "progress" && !g || x === "option" && g !== v[l]) && ep(e, l, g, v[l], !1),
        l = "checked",
        p !== void 0 && p !== e[l] && ep(e, l, p, v[l], !1))
    }
    return e
}
function y8(e, t, n) {
    try {
        typeof e == "function" ? e(t) : e.current = t
    } catch (i) {
        Gn.__e(i, n)
    }
}
function Xm(e, t, n) {
    var i, r;
    if (Gn.unmount && Gn.unmount(e),
    (i = e.ref) && (i.current && i.current !== e.__e || y8(i, null, t)),
    (i = e.__c) != null) {
        if (i.componentWillUnmount)
            try {
                i.componentWillUnmount()
            } catch (s) {
                Gn.__e(s, t)
            }
        i.base = i.__P = null,
        e.__c = void 0
    }
    if (i = e.__k)
        for (r = 0; r < i.length; r++)
            i[r] && Xm(i[r], t, n || typeof e.type != "function");
    n || e.__e == null || dM(e.__e),
    e.__ = e.__e = e.__d = void 0
}
function WX(e, t, n) {
    return this.constructor(e, n)
}
aM = hM.slice,
Gn = {
    __e: function(e, t, n, i) {
        for (var r, s, o; t = t.__; )
            if ((r = t.__c) && !r.__)
                try {
                    if ((s = r.constructor) && s.getDerivedStateFromError != null && (r.setState(s.getDerivedStateFromError(e)),
                    o = r.__d),
                    r.componentDidCatch != null && (r.componentDidCatch(e, i || {}),
                    o = r.__d),
                    o)
                        return r.__E = r
                } catch (a) {
                    e = a
                }
        throw e
    }
},
cM = 0,
sp.prototype.setState = function(e, t) {
    var n;
    n = this.__s != null && this.__s !== this.state ? this.__s : this.__s = nl({}, this.state),
    typeof e == "function" && (e = e(nl({}, n), this.props)),
    e && nl(n, e),
    e != null && this.__v && (t && this._sb.push(t),
    zm(this))
}
,
sp.prototype.forceUpdate = function(e) {
    this.__v && (this.__e = !0,
    e && this.__h.push(e),
    zm(this))
}
,
sp.prototype.render = _8,
T0 = [],
lM = typeof Promise == "function" ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout,
jm = function(e, t) {
    return e.__v.__b - t.__v.__b
}
,
bp.__r = 0,
uM = 0;
(function(e, t) {
    var n = {
        __c: t = "__cC" + uM++,
        __: e,
        Consumer: function(i, r) {
            return i.children(r)
        },
        Provider: function(i) {
            var r, s;
            return this.getChildContext || (r = [],
            (s = {})[t] = this,
            this.getChildContext = function() {
                return s
            }
            ,
            this.shouldComponentUpdate = function(o) {
                this.props.value !== o.value && r.some(function(a) {
                    a.__e = !0,
                    zm(a)
                })
            }
            ,
            this.sub = function(o) {
                r.push(o);
                var a = o.componentWillUnmount;
                o.componentWillUnmount = function() {
                    r.splice(r.indexOf(o), 1),
                    a && a.call(o)
                }
            }
            ),
            i.children
        }
    };
    n.Provider.__ = n.Consumer.contextType = n
}
)({
    isPreviewMode: !1,
    previewPageIndex: 0,
    handleCloseSurveyPopup: () => {}
    ,
    isPopup: !0
});
var q1 = Lr("[Surveys]")
  , jX = {
    icontains: e => !!Y && Y.location.href.toLowerCase().indexOf(e.toLowerCase()) > -1,
    not_icontains: e => !!Y && Y.location.href.toLowerCase().indexOf(e.toLowerCase()) === -1,
    regex: e => !!Y && gh(Y.location.href, e),
    not_regex: e => !!Y && !gh(Y.location.href, e),
    exact: e => Y?.location.href === e,
    is_not: e => Y?.location.href !== e
}
  , Km = class {
    constructor(t) {
        this.instance = t,
        this._surveyEventReceiver = null
    }
    onRemoteConfig(t) {
        this._decideServerResponse = !!t.surveys,
        this.loadIfEnabled()
    }
    reset() {
        localStorage.removeItem("lastSeenSurveyDate");
        var t = ( () => {
            for (var n = [], i = 0; i < localStorage.length; i++) {
                var r = localStorage.key(i);
                r != null && r.startsWith("seenSurvey_") && n.push(r)
            }
            return n
        }
        )();
        t.forEach(n => localStorage.removeItem(n))
    }
    loadIfEnabled() {
        var t, n, i, r = _t == null || (t = _t.__PosthogExtensions__) === null || t === void 0 ? void 0 : t.generateSurveys;
        this.instance.config.disable_surveys || !this._decideServerResponse || r || (this._surveyEventReceiver == null && (this._surveyEventReceiver = new a5(this.instance)),
        (n = _t.__PosthogExtensions__) === null || n === void 0 || (i = n.loadExternalDependency) === null || i === void 0 || i.call(n, this.instance, "surveys", s => {
            var o, a;
            if (s)
                return q1.error("Could not load surveys script", s);
            this._surveyManager = (o = _t.__PosthogExtensions__) === null || o === void 0 || (a = o.generateSurveys) === null || a === void 0 ? void 0 : a.call(o, this.instance)
        }
        ))
    }
    getSurveys(t) {
        var n = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
        if (this.instance.config.disable_surveys)
            return t([]);
        this._surveyEventReceiver == null && (this._surveyEventReceiver = new a5(this.instance));
        var i = this.instance.get_property(hm);
        if (i && !n)
            return t(i);
        this.instance._send_request({
            url: this.instance.requestRouter.endpointFor("api", "/api/surveys/?token=".concat(this.instance.config.token)),
            method: "GET",
            callback: r => {
                var s;
                if (r.statusCode !== 200 || !r.json)
                    return t([]);
                var o, a = r.json.surveys || [], c = a.filter(l => {
                    var u, h, d, f, g, p, v, S, x, w, k, B;
                    return ((u = l.conditions) === null || u === void 0 ? void 0 : u.events) && ((h = l.conditions) === null || h === void 0 || (d = h.events) === null || d === void 0 ? void 0 : d.values) && ((f = l.conditions) === null || f === void 0 || (g = f.events) === null || g === void 0 || (p = g.values) === null || p === void 0 ? void 0 : p.length) > 0 || ((v = l.conditions) === null || v === void 0 ? void 0 : v.actions) && ((S = l.conditions) === null || S === void 0 || (x = S.actions) === null || x === void 0 ? void 0 : x.values) && ((w = l.conditions) === null || w === void 0 || (k = w.actions) === null || k === void 0 || (B = k.values) === null || B === void 0 ? void 0 : B.length) > 0
                }
                );
                return c.length > 0 && ((o = this._surveyEventReceiver) === null || o === void 0 || o.register(c)),
                (s = this.instance.persistence) === null || s === void 0 || s.register({
                    [hm]: a
                }),
                t(a)
            }
        })
    }
    getActiveMatchingSurveys(t) {
        var n = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
        this.getSurveys(i => {
            var r, s = i.filter(c => !(!c.start_date || c.end_date)).filter(c => {
                var l, u, h, d;
                if (!c.conditions)
                    return !0;
                var f = (l = c.conditions) === null || l === void 0 || !l.url || jX[(u = (h = c.conditions) === null || h === void 0 ? void 0 : h.urlMatchType) !== null && u !== void 0 ? u : "icontains"](c.conditions.url)
                  , g = (d = c.conditions) === null || d === void 0 || !d.selector || qe?.querySelector(c.conditions.selector);
                return f && g
            }
            ), o = (r = this._surveyEventReceiver) === null || r === void 0 ? void 0 : r.getSurveys(), a = s.filter(c => {
                var l, u, h, d, f, g, p, v, S, x, w;
                if (!(c.linked_flag_key || c.targeting_flag_key || c.internal_targeting_flag_key || (l = c.feature_flag_keys) !== null && l !== void 0 && l.length))
                    return !0;
                var k = !c.linked_flag_key || this.instance.featureFlags.isFeatureEnabled(c.linked_flag_key)
                  , B = !c.targeting_flag_key || this.instance.featureFlags.isFeatureEnabled(c.targeting_flag_key)
                  , N = ((u = c.conditions) === null || u === void 0 ? void 0 : u.events) && ((h = c.conditions) === null || h === void 0 || (d = h.events) === null || d === void 0 ? void 0 : d.values) && ((f = c.conditions) === null || f === void 0 || (g = f.events) === null || g === void 0 ? void 0 : g.values.length) > 0
                  , E = ((p = c.conditions) === null || p === void 0 ? void 0 : p.actions) && ((v = c.conditions) === null || v === void 0 || (S = v.actions) === null || S === void 0 ? void 0 : S.values) && ((x = c.conditions) === null || x === void 0 || (w = x.actions) === null || w === void 0 ? void 0 : w.values.length) > 0
                  , F = !N && !E || o?.includes(c.id)
                  , O = this._canActivateRepeatedly(c)
                  , V = !(c.internal_targeting_flag_key && !O) || this.instance.featureFlags.isFeatureEnabled(c.internal_targeting_flag_key)
                  , X = this.checkFlags(c);
                return k && B && V && F && X
            }
            );
            return t(a)
        }
        , n)
    }
    checkFlags(t) {
        var n;
        return (n = t.feature_flag_keys) === null || n === void 0 || !n.length || t.feature_flag_keys.every(i => {
            var {key: r, value: s} = i;
            return !r || !s || this.instance.featureFlags.isFeatureEnabled(s)
        }
        )
    }
    getNextSurveyStep(t, n, i) {
        var r, s = t.questions[n], o = n + 1;
        if ((r = s.branching) === null || r === void 0 || !r.type)
            return n === t.questions.length - 1 ? mo.End : o;
        if (s.branching.type === mo.End)
            return mo.End;
        if (s.branching.type === mo.SpecificQuestion) {
            if (Number.isInteger(s.branching.index))
                return s.branching.index
        } else if (s.branching.type === mo.ResponseBased) {
            if (s.type === yp.SingleChoice) {
                var a, c, l = s.choices.indexOf("".concat(i));
                if ((a = s.branching) !== null && a !== void 0 && (c = a.responseValues) !== null && c !== void 0 && c.hasOwnProperty(l)) {
                    var u = s.branching.responseValues[l];
                    return Number.isInteger(u) ? u : u === mo.End ? mo.End : o
                }
            } else if (s.type === yp.Rating) {
                var h, d;
                if (typeof i != "number" || !Number.isInteger(i))
                    throw new Error("The response type must be an integer");
                var f = function(p, v) {
                    if (v === 3) {
                        if (p < 1 || p > 3)
                            throw new Error("The response must be in range 1-3");
                        return p === 1 ? "negative" : p === 2 ? "neutral" : "positive"
                    }
                    if (v === 5) {
                        if (p < 1 || p > 5)
                            throw new Error("The response must be in range 1-5");
                        return p <= 2 ? "negative" : p === 3 ? "neutral" : "positive"
                    }
                    if (v === 7) {
                        if (p < 1 || p > 7)
                            throw new Error("The response must be in range 1-7");
                        return p <= 3 ? "negative" : p === 4 ? "neutral" : "positive"
                    }
                    if (v === 10) {
                        if (p < 0 || p > 10)
                            throw new Error("The response must be in range 0-10");
                        return p <= 6 ? "detractors" : p <= 8 ? "passives" : "promoters"
                    }
                    throw new Error("The scale must be one of: 3, 5, 7, 10")
                }(i, s.scale);
                if ((h = s.branching) !== null && h !== void 0 && (d = h.responseValues) !== null && d !== void 0 && d.hasOwnProperty(f)) {
                    var g = s.branching.responseValues[f];
                    return Number.isInteger(g) ? g : g === mo.End ? mo.End : o
                }
            }
            return o
        }
        return q1.warn("Falling back to next question index due to unexpected branching type"),
        o
    }
    _canActivateRepeatedly(t) {
        var n;
        return gn((n = _t.__PosthogExtensions__) === null || n === void 0 ? void 0 : n.canActivateRepeatedly) ? (q1.warn("init was not called"),
        !1) : _t.__PosthogExtensions__.canActivateRepeatedly(t)
    }
    canRenderSurvey(t) {
        gn(this._surveyManager) ? q1.warn("init was not called") : this.getSurveys(n => {
            var i = n.filter(r => r.id === t)[0];
            this._surveyManager.canRenderSurvey(i)
        }
        )
    }
    renderSurvey(t, n) {
        gn(this._surveyManager) ? q1.warn("init was not called") : this.getSurveys(i => {
            var r = i.filter(s => s.id === t)[0];
            this._surveyManager.renderSurvey(r, qe?.querySelector(n))
        }
        )
    }
}
  , uO = Lr("[RateLimiter]")
  , Ym = class {
    constructor(t) {
        var n, i;
        Ie(this, "serverLimits", {}),
        Ie(this, "lastEventRateLimited", !1),
        Ie(this, "checkForLimiting", r => {
            var s = r.text;
            if (s && s.length)
                try {
                    (JSON.parse(s).quota_limited || []).forEach(o => {
                        uO.info("".concat(o || "events", " is quota limited.")),
                        this.serverLimits[o] = new Date().getTime() + 6e4
                    }
                    )
                } catch (o) {
                    return void uO.warn('could not rate limit - continuing. Error: "'.concat(o?.message, '"'), {
                        text: s
                    })
                }
        }
        ),
        this.instance = t,
        this.captureEventsPerSecond = ((n = t.config.rate_limiting) === null || n === void 0 ? void 0 : n.events_per_second) || 10,
        this.captureEventsBurstLimit = Math.max(((i = t.config.rate_limiting) === null || i === void 0 ? void 0 : i.events_burst_limit) || 10 * this.captureEventsPerSecond, this.captureEventsPerSecond),
        this.lastEventRateLimited = this.clientRateLimitContext(!0).isRateLimited
    }
    clientRateLimitContext() {
        var t, n, i, r = arguments.length > 0 && arguments[0] !== void 0 && arguments[0], s = new Date().getTime(), o = (t = (n = this.instance.persistence) === null || n === void 0 ? void 0 : n.get_property(fm)) !== null && t !== void 0 ? t : {
            tokens: this.captureEventsBurstLimit,
            last: s
        };
        o.tokens += (s - o.last) / 1e3 * this.captureEventsPerSecond,
        o.last = s,
        o.tokens > this.captureEventsBurstLimit && (o.tokens = this.captureEventsBurstLimit);
        var a = o.tokens < 1;
        return a || r || (o.tokens = Math.max(0, o.tokens - 1)),
        !a || this.lastEventRateLimited || r || this.instance.capture("$$client_ingestion_warning", {
            $$client_ingestion_warning_message: "posthog-js client rate limited. Config is set to ".concat(this.captureEventsPerSecond, " events per second and ").concat(this.captureEventsBurstLimit, " events burst limit.")
        }, {
            skip_client_rate_limiting: !0
        }),
        this.lastEventRateLimited = a,
        (i = this.instance.persistence) === null || i === void 0 || i.set_property(fm, o),
        {
            isRateLimited: a,
            remainingTokens: o.tokens
        }
    }
    isServerRateLimited(t) {
        var n = this.serverLimits[t || "events"] || !1;
        return n !== !1 && new Date().getTime() < n
    }
}
  , qX = () => we({
    initialPathName: es?.pathname || "",
    referringDomain: Hn.referringDomain()
}, Hn.campaignParams())
  , Qm = class {
    constructor(t, n, i) {
        Ie(this, "_onSessionIdCallback", r => {
            var s = this._getStoredProps();
            if (!s || s.sessionId !== r) {
                var o = {
                    sessionId: r,
                    props: this._sessionSourceParamGenerator()
                };
                this._persistence.register({
                    [dm]: o
                })
            }
        }
        ),
        this._sessionIdManager = t,
        this._persistence = n,
        this._sessionSourceParamGenerator = i || qX,
        this._sessionIdManager.onSessionId(this._onSessionIdCallback)
    }
    _getStoredProps() {
        return this._persistence.props[dm]
    }
    getSessionProps() {
        var t, n = (t = this._getStoredProps()) === null || t === void 0 ? void 0 : t.props;
        return n ? {
            $client_session_initial_referring_host: n.referringDomain,
            $client_session_initial_pathname: n.initialPathName,
            $client_session_initial_utm_source: n.utm_source,
            $client_session_initial_utm_campaign: n.utm_campaign,
            $client_session_initial_utm_medium: n.utm_medium,
            $client_session_initial_utm_content: n.utm_content,
            $client_session_initial_utm_term: n.utm_term
        } : {}
    }
}
  , zX = ["ahrefsbot", "ahrefssiteaudit", "applebot", "baiduspider", "bingbot", "bingpreview", "bot.htm", "bot.php", "crawler", "deepscan", "duckduckbot", "facebookexternal", "facebookcatalog", "gptbot", "http://yandex.com/bots", "hubspot", "ia_archiver", "linkedinbot", "mj12bot", "msnbot", "nessus", "petalbot", "pinterest", "prerender", "rogerbot", "screaming frog", "semrushbot", "sitebulb", "slurp", "turnitin", "twitterbot", "vercelbot", "yahoo! slurp", "yandexbot", "headlesschrome", "cypress", "Google-HotelAdsVerifier", "adsbot-google", "apis-google", "duplexweb-google", "feedfetcher-google", "google favicon", "google web preview", "google-read-aloud", "googlebot", "googleweblight", "mediapartners-google", "storebot-google", "Bytespider;"]
  , hO = function(e, t) {
    if (!e)
        return !1;
    var n = e.toLowerCase();
    return zX.concat(t || []).some(i => {
        var r = i.toLowerCase();
        return n.indexOf(r) !== -1
    }
    )
}
  , vM = function(e, t) {
    if (!e)
        return !1;
    var n = e.userAgent;
    if (n && hO(n, t))
        return !0;
    try {
        var i = e?.userAgentData;
        if (i != null && i.brands && i.brands.some(r => hO(r?.brand, t)))
            return !0
    } catch {}
    return !!e.webdriver
}
  , xp = class {
    constructor() {
        this.clicks = []
    }
    isRageClick(t, n, i) {
        var r = this.clicks[this.clicks.length - 1];
        if (r && Math.abs(t - r.x) + Math.abs(n - r.y) < 30 && i - r.timestamp < 1e3) {
            if (this.clicks.push({
                x: t,
                y: n,
                timestamp: i
            }),
            this.clicks.length === 3)
                return !0
        } else
            this.clicks = [{
                x: t,
                y: n,
                timestamp: i
            }];
        return !1
    }
}
  , tp = Lr("[Dead Clicks]")
  , XX = () => !0
  , KX = e => {
    var t, n = !((t = e.instance.persistence) === null || t === void 0 || !t.get_property(EO)), i = e.instance.config.capture_dead_clicks;
    return O0(i) ? i : n
}
  , wp = class {
    get lazyLoadedDeadClicksAutocapture() {
        return this._lazyLoadedDeadClicksAutocapture
    }
    constructor(t, n, i) {
        this.instance = t,
        this.isEnabled = n,
        this.onCapture = i,
        this.startIfEnabled()
    }
    onRemoteConfig(t) {
        this.instance.persistence && this.instance.persistence.register({
            [EO]: t?.captureDeadClicks
        }),
        this.startIfEnabled()
    }
    startIfEnabled() {
        this.isEnabled(this) && this.loadScript( () => {
            this.start()
        }
        )
    }
    loadScript(t) {
        var n, i, r;
        (n = _t.__PosthogExtensions__) !== null && n !== void 0 && n.initDeadClicksAutocapture && t(),
        (i = _t.__PosthogExtensions__) === null || i === void 0 || (r = i.loadExternalDependency) === null || r === void 0 || r.call(i, this.instance, "dead-clicks-autocapture", s => {
            s ? tp.error("failed to load script", s) : t()
        }
        )
    }
    start() {
        var t;
        if (qe) {
            if (!this._lazyLoadedDeadClicksAutocapture && (t = _t.__PosthogExtensions__) !== null && t !== void 0 && t.initDeadClicksAutocapture) {
                var n = zn(this.instance.config.capture_dead_clicks) ? this.instance.config.capture_dead_clicks : {};
                n.__onCapture = this.onCapture,
                this._lazyLoadedDeadClicksAutocapture = _t.__PosthogExtensions__.initDeadClicksAutocapture(this.instance, n),
                this._lazyLoadedDeadClicksAutocapture.start(qe),
                tp.info("starting...")
            }
        } else
            tp.error("`document` not found. Cannot start.")
    }
    stop() {
        this._lazyLoadedDeadClicksAutocapture && (this._lazyLoadedDeadClicksAutocapture.stop(),
        this._lazyLoadedDeadClicksAutocapture = void 0,
        tp.info("stopping..."))
    }
}
  , YX = Lr("[Heatmaps]");
function dO(e) {
    return zn(e) && "clientX"in e && "clientY"in e && Dr(e.clientX) && Dr(e.clientY)
}
var Jm = class {
    constructor(t) {
        var n;
        Ie(this, "rageclicks", new xp),
        Ie(this, "_enabledServerSide", !1),
        Ie(this, "_initialized", !1),
        Ie(this, "_flushInterval", null),
        this.instance = t,
        this._enabledServerSide = !((n = this.instance.persistence) === null || n === void 0 || !n.props[lm]),
        Y?.addEventListener("beforeunload", () => {
            this.flush()
        }
        )
    }
    get flushIntervalMilliseconds() {
        var t = 5e3;
        return zn(this.instance.config.capture_heatmaps) && this.instance.config.capture_heatmaps.flush_interval_milliseconds && (t = this.instance.config.capture_heatmaps.flush_interval_milliseconds),
        t
    }
    get isEnabled() {
        return Ze(this.instance.config.capture_heatmaps) ? Ze(this.instance.config.enable_heatmaps) ? this._enabledServerSide : this.instance.config.enable_heatmaps : this.instance.config.capture_heatmaps !== !1
    }
    startIfEnabled() {
        if (this.isEnabled) {
            if (this._initialized)
                return;
            YX.info("starting..."),
            this._setupListeners(),
            this._flushInterval = setInterval(this.flush.bind(this), this.flushIntervalMilliseconds)
        } else {
            var t, n;
            clearInterval((t = this._flushInterval) !== null && t !== void 0 ? t : void 0),
            (n = this.deadClicksCapture) === null || n === void 0 || n.stop(),
            this.getAndClearBuffer()
        }
    }
    onRemoteConfig(t) {
        var n = !!t.heatmaps;
        this.instance.persistence && this.instance.persistence.register({
            [lm]: n
        }),
        this._enabledServerSide = n,
        this.startIfEnabled()
    }
    getAndClearBuffer() {
        var t = this.buffer;
        return this.buffer = void 0,
        t
    }
    _onDeadClick(t) {
        this._onClick(t.originalEvent, "deadclick")
    }
    _setupListeners() {
        Y && qe && (Za(qe, "click", t => this._onClick(t || Y?.event), !1, !0),
        Za(qe, "mousemove", t => this._onMouseMove(t || Y?.event), !1, !0),
        this.deadClicksCapture = new wp(this.instance,XX,this._onDeadClick.bind(this)),
        this.deadClicksCapture.startIfEnabled(),
        this._initialized = !0)
    }
    _getProperties(t, n) {
        var i = this.instance.scrollManager.scrollY()
          , r = this.instance.scrollManager.scrollX()
          , s = this.instance.scrollManager.scrollElement()
          , o = function(a, c, l) {
            for (var u = a; u && Op(u) && !il(u, "body"); ) {
                if (u === l)
                    return !1;
                if (Ft(c, Y?.getComputedStyle(u).position))
                    return !0;
                u = zO(u)
            }
            return !1
        }(qO(t), ["fixed", "sticky"], s);
        return {
            x: t.clientX + (o ? 0 : r),
            y: t.clientY + (o ? 0 : i),
            target_fixed: o,
            type: n
        }
    }
    _onClick(t) {
        var n, i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "click";
        if (!WT(t.target) && dO(t)) {
            var r = this._getProperties(t, i);
            (n = this.rageclicks) !== null && n !== void 0 && n.isRageClick(t.clientX, t.clientY, new Date().getTime()) && this._capture(we(we({}, r), {}, {
                type: "rageclick"
            })),
            this._capture(r)
        }
    }
    _onMouseMove(t) {
        !WT(t.target) && dO(t) && (clearTimeout(this._mouseMoveTimeout),
        this._mouseMoveTimeout = setTimeout( () => {
            this._capture(this._getProperties(t, "mousemove"))
        }
        , 500))
    }
    _capture(t) {
        if (Y) {
            var n = Y.location.href;
            this.buffer = this.buffer || {},
            this.buffer[n] || (this.buffer[n] = []),
            this.buffer[n].push(t)
        }
    }
    flush() {
        this.buffer && !lh(this.buffer) && this.instance.capture("$$heatmap", {
            $heatmap_data: this.getAndClearBuffer()
        })
    }
}
  , Zm = class {
    constructor(t) {
        Ie(this, "_updateScrollData", () => {
            var n, i, r, s;
            this.context || (this.context = {});
            var o = this.scrollElement()
              , a = this.scrollY()
              , c = o ? Math.max(0, o.scrollHeight - o.clientHeight) : 0
              , l = a + (o?.clientHeight || 0)
              , u = o?.scrollHeight || 0;
            this.context.lastScrollY = Math.ceil(a),
            this.context.maxScrollY = Math.max(a, (n = this.context.maxScrollY) !== null && n !== void 0 ? n : 0),
            this.context.maxScrollHeight = Math.max(c, (i = this.context.maxScrollHeight) !== null && i !== void 0 ? i : 0),
            this.context.lastContentY = l,
            this.context.maxContentY = Math.max(l, (r = this.context.maxContentY) !== null && r !== void 0 ? r : 0),
            this.context.maxContentHeight = Math.max(u, (s = this.context.maxContentHeight) !== null && s !== void 0 ? s : 0)
        }
        ),
        this.instance = t
    }
    getContext() {
        return this.context
    }
    resetContext() {
        var t = this.context;
        return setTimeout(this._updateScrollData, 0),
        t
    }
    startMeasuringScrollPosition() {
        Y?.addEventListener("scroll", this._updateScrollData, !0),
        Y?.addEventListener("scrollend", this._updateScrollData, !0),
        Y?.addEventListener("resize", this._updateScrollData)
    }
    scrollElement() {
        if (!this.instance.config.scroll_root_selector)
            return Y?.document.documentElement;
        var t = oi(this.instance.config.scroll_root_selector) ? this.instance.config.scroll_root_selector : [this.instance.config.scroll_root_selector];
        for (var n of t) {
            var i = Y?.document.querySelector(n);
            if (i)
                return i
        }
    }
    scrollY() {
        if (this.instance.config.scroll_root_selector) {
            var t = this.scrollElement();
            return t && t.scrollTop || 0
        }
        return Y && (Y.scrollY || Y.pageYOffset || Y.document.documentElement.scrollTop) || 0
    }
    scrollX() {
        if (this.instance.config.scroll_root_selector) {
            var t = this.scrollElement();
            return t && t.scrollLeft || 0
        }
        return Y && (Y.scrollX || Y.pageXOffset || Y.document.documentElement.scrollLeft) || 0
    }
}
  , fO = Lr("[AutoCapture]");
function sm(e, t) {
    return t.length > e ? t.slice(0, e) + "..." : t
}
function QX(e) {
    if (e.previousElementSibling)
        return e.previousElementSibling;
    var t = e;
    do
        t = t.previousSibling;
    while (t && !Op(t));
    return t
}
function JX(e, t, n, i) {
    var r = e.tagName.toLowerCase()
      , s = {
        tag_name: r
    };
    Em.indexOf(r) > -1 && !n && (r.toLowerCase() === "a" || r.toLowerCase() === "button" ? s.$el_text = sm(1024, QO(e)) : s.$el_text = sm(1024, Mp(e)));
    var o = gp(e);
    o.length > 0 && (s.classes = o.filter(function(u) {
        return u !== ""
    })),
    un(e.attributes, function(u) {
        var h;
        if ((!XO(e) || ["name", "id", "class", "aria-label"].indexOf(u.name) !== -1) && (i == null || !i.includes(u.name)) && !t && vh(u.value) && (h = u.name,
        !Qi(h) || h.substring(0, 10) !== "_ngcontent" && h.substring(0, 7) !== "_nghost")) {
            var d = u.value;
            u.name === "class" && (d = p8(d).join(" ")),
            s["attr__" + u.name] = sm(1024, d)
        }
    });
    for (var a = 1, c = 1, l = e; l = QX(l); )
        a++,
        l.tagName === e.tagName && c++;
    return s.nth_child = a,
    s.nth_of_type = c,
    s
}
function ZX(e, t) {
    for (var n, i, {e: r, maskAllElementAttributes: s, maskAllText: o, elementAttributeIgnoreList: a, elementsChainAsString: c} = t, l = [e], u = e; u.parentNode && !il(u, "body"); )
        WO(u.parentNode) ? (l.push(u.parentNode.host),
        u = u.parentNode.host) : (l.push(u.parentNode),
        u = u.parentNode);
    var h, d = [], f = {}, g = !1, p = !1;
    if (un(l, k => {
        var B = Tm(k);
        k.tagName.toLowerCase() === "a" && (g = k.getAttribute("href"),
        g = B && g && vh(g) && g),
        Ft(gp(k), "ph-no-capture") && (p = !0),
        d.push(JX(k, s, o, a));
        var N = function(E) {
            if (!Tm(E))
                return {};
            var F = {};
            return un(E.attributes, function(O) {
                if (O.name && O.name.indexOf("data-ph-capture-attribute") === 0) {
                    var V = O.name.replace("data-ph-capture-attribute-", "")
                      , X = O.value;
                    V && X && vh(X) && (F[V] = X)
                }
            }),
            F
        }(k);
        Nr(f, N)
    }
    ),
    p)
        return {
            props: {},
            explicitNoCapture: p
        };
    if (o || (e.tagName.toLowerCase() === "a" || e.tagName.toLowerCase() === "button" ? d[0].$el_text = QO(e) : d[0].$el_text = Mp(e)),
    g) {
        var v, S;
        d[0].attr__href = g;
        var x = (v = dh(g)) === null || v === void 0 ? void 0 : v.host
          , w = Y == null || (S = Y.location) === null || S === void 0 ? void 0 : S.host;
        x && w && x !== w && (h = g)
    }
    return {
        props: Nr({
            $event_type: r.type,
            $ce_version: 1
        }, c ? {} : {
            $elements: d
        }, {
            $elements_chain: vX(d)
        }, (n = d[0]) !== null && n !== void 0 && n.$el_text ? {
            $el_text: (i = d[0]) === null || i === void 0 ? void 0 : i.$el_text
        } : {}, h && r.type === "click" ? {
            $external_click_url: h
        } : {}, f)
    }
}
var e8 = class {
    constructor(t) {
        Ie(this, "_initialized", !1),
        Ie(this, "_isDisabledServerSide", null),
        Ie(this, "rageclicks", new xp),
        Ie(this, "_elementsChainAsString", !1),
        this.instance = t,
        this._elementSelectors = null
    }
    get config() {
        var t, n, i = zn(this.instance.config.autocapture) ? this.instance.config.autocapture : {};
        return i.url_allowlist = (t = i.url_allowlist) === null || t === void 0 ? void 0 : t.map(r => new RegExp(r)),
        i.url_ignorelist = (n = i.url_ignorelist) === null || n === void 0 ? void 0 : n.map(r => new RegExp(r)),
        i
    }
    _addDomEventHandlers() {
        if (this.isBrowserSupported()) {
            if (Y && qe) {
                var t = i => {
                    i = i || Y?.event;
                    try {
                        this._captureEvent(i)
                    } catch (r) {
                        fO.error("Failed to capture event", r)
                    }
                }
                  , n = i => {
                    i = i || Y?.event,
                    this._captureEvent(i, K9)
                }
                ;
                Za(qe, "submit", t, !1, !0),
                Za(qe, "change", t, !1, !0),
                Za(qe, "click", t, !1, !0),
                this.config.capture_copied_text && (Za(qe, "copy", n, !1, !0),
                Za(qe, "cut", n, !1, !0))
            }
        } else
            fO.info("Disabling Automatic Event Collection because this browser is not supported")
    }
    startIfEnabled() {
        this.isEnabled && !this._initialized && (this._addDomEventHandlers(),
        this._initialized = !0)
    }
    onRemoteConfig(t) {
        t.elementsChainAsString && (this._elementsChainAsString = t.elementsChainAsString),
        this.instance.persistence && this.instance.persistence.register({
            [ET]: !!t.autocapture_opt_out
        }),
        this._isDisabledServerSide = !!t.autocapture_opt_out,
        this.startIfEnabled()
    }
    setElementSelectors(t) {
        this._elementSelectors = t
    }
    getElementSelectors(t) {
        var n, i = [];
        return (n = this._elementSelectors) === null || n === void 0 || n.forEach(r => {
            var s = qe?.querySelectorAll(r);
            s?.forEach(o => {
                t === o && i.push(r)
            }
            )
        }
        ),
        i
    }
    get isEnabled() {
        var t, n, i = (t = this.instance.persistence) === null || t === void 0 ? void 0 : t.props[ET], r = this._isDisabledServerSide;
        if (rl(r) && !O0(i) && !this.instance.config.advanced_disable_decide)
            return !1;
        var s = (n = this._isDisabledServerSide) !== null && n !== void 0 ? n : !!i;
        return !!this.instance.config.autocapture && !s
    }
    _captureEvent(t) {
        var n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "$autocapture";
        if (this.isEnabled) {
            var i, r = qO(t);
            $O(r) && (r = r.parentNode || null),
            n === "$autocapture" && t.type === "click" && t instanceof MouseEvent && this.instance.config.rageclick && (i = this.rageclicks) !== null && i !== void 0 && i.isRageClick(t.clientX, t.clientY, new Date().getTime()) && this._captureEvent(t, "$rageclick");
            var s = n === K9;
            if (r && dX(r, t, this.config, s, s ? ["copy", "cut"] : void 0)) {
                var {props: o, explicitNoCapture: a} = ZX(r, {
                    e: t,
                    maskAllElementAttributes: this.instance.config.mask_all_element_attributes,
                    maskAllText: this.instance.config.mask_all_text,
                    elementAttributeIgnoreList: this.config.element_attribute_ignorelist,
                    elementsChainAsString: this._elementsChainAsString
                });
                if (a)
                    return !1;
                var c = this.getElementSelectors(r);
                if (c && c.length > 0 && (o.$element_selectors = c),
                n === K9) {
                    var l, u = jO(Y == null || (l = Y.getSelection()) === null || l === void 0 ? void 0 : l.toString()), h = t.type || "clipboard";
                    if (!u)
                        return !1;
                    o.$selected_content = u,
                    o.$copy_type = h
                }
                return this.instance.capture(n, o),
                !0
            }
        }
    }
    isBrowserSupported() {
        return Gs(qe?.querySelectorAll)
    }
}
, eK = Lr("[TracingHeaders]"), t8 = class {
    constructor(t) {
        Ie(this, "_restoreXHRPatch", void 0),
        Ie(this, "_restoreFetchPatch", void 0),
        Ie(this, "_startCapturing", () => {
            var n, i, r, s;
            Ze(this._restoreXHRPatch) && ((n = _t.__PosthogExtensions__) === null || n === void 0 || (i = n.tracingHeadersPatchFns) === null || i === void 0 || i._patchXHR(this.instance.sessionManager)),
            Ze(this._restoreFetchPatch) && ((r = _t.__PosthogExtensions__) === null || r === void 0 || (s = r.tracingHeadersPatchFns) === null || s === void 0 || s._patchFetch(this.instance.sessionManager))
        }
        ),
        this.instance = t
    }
    _loadScript(t) {
        var n, i, r;
        (n = _t.__PosthogExtensions__) !== null && n !== void 0 && n.tracingHeadersPatchFns && t(),
        (i = _t.__PosthogExtensions__) === null || i === void 0 || (r = i.loadExternalDependency) === null || r === void 0 || r.call(i, this.instance, "tracing-headers", s => {
            if (s)
                return eK.error("failed to load script", s);
            t()
        }
        )
    }
    startIfEnabledOrStop() {
        var t, n;
        this.instance.config.__add_tracing_headers ? this._loadScript(this._startCapturing) : ((t = this._restoreXHRPatch) === null || t === void 0 || t.call(this),
        (n = this._restoreFetchPatch) === null || n === void 0 || n.call(this),
        this._restoreXHRPatch = void 0,
        this._restoreFetchPatch = void 0)
    }
}
, el;
(function(e) {
    e[e.PENDING = -1] = "PENDING",
    e[e.DENIED = 0] = "DENIED",
    e[e.GRANTED = 1] = "GRANTED"
}
)(el || (el = {}));
var n8 = class {
    constructor(t) {
        this.instance = t
    }
    get config() {
        return this.instance.config
    }
    get consent() {
        return this.getDnt() ? el.DENIED : this.storedConsent
    }
    isOptedOut() {
        return this.consent === el.DENIED || this.consent === el.PENDING && this.config.opt_out_capturing_by_default
    }
    isOptedIn() {
        return !this.isOptedOut()
    }
    optInOut(t) {
        this.storage.set(this.storageKey, t ? 1 : 0, this.config.cookie_expiration, this.config.cross_subdomain_cookie, this.config.secure_cookie)
    }
    reset() {
        this.storage.remove(this.storageKey, this.config.cross_subdomain_cookie)
    }
    get storageKey() {
        var {token: t, opt_out_capturing_cookie_prefix: n} = this.instance.config;
        return (n || "__ph_opt_in_out_") + t
    }
    get storedConsent() {
        var t = this.storage.get(this.storageKey);
        return t === "1" ? el.GRANTED : t === "0" ? el.DENIED : el.PENDING
    }
    get storage() {
        if (!this._storage) {
            var t = this.config.opt_out_capturing_persistence_type;
            this._storage = t === "localStorage" ? Si : ec;
            var n = t === "localStorage" ? ec : Si;
            n.get(this.storageKey) && (this._storage.get(this.storageKey) || this.optInOut(n.get(this.storageKey) === "1"),
            n.remove(this.storageKey, this.config.cross_subdomain_cookie))
        }
        return this._storage
    }
    getDnt() {
        return !!this.config.respect_dnt && !!wO([Cs?.doNotTrack, Cs?.msDoNotTrack, _t.doNotTrack], t => Ft([!0, 1, "1", "yes"], t))
    }
}
  , np = Lr("[ExceptionAutocapture]")
  , i8 = class {
    constructor(t) {
        var n;
        Ie(this, "originalOnUnhandledRejectionHandler", void 0),
        Ie(this, "startCapturing", () => {
            var i, r, s, o;
            if (Y && this.isEnabled && !this.hasHandlers && !this.isCapturing) {
                var a = (i = _t.__PosthogExtensions__) === null || i === void 0 || (r = i.errorWrappingFunctions) === null || r === void 0 ? void 0 : r.wrapOnError
                  , c = (s = _t.__PosthogExtensions__) === null || s === void 0 || (o = s.errorWrappingFunctions) === null || o === void 0 ? void 0 : o.wrapUnhandledRejection;
                if (a && c)
                    try {
                        this.unwrapOnError = a(this.captureException.bind(this)),
                        this.unwrapUnhandledRejection = c(this.captureException.bind(this))
                    } catch (l) {
                        np.error("failed to start", l),
                        this.stopCapturing()
                    }
                else
                    np.error("failed to load error wrapping functions - cannot start")
            }
        }
        ),
        this.instance = t,
        this.remoteEnabled = !((n = this.instance.persistence) === null || n === void 0 || !n.props[TT]),
        this.startIfEnabled()
    }
    get isEnabled() {
        var t;
        return (t = this.remoteEnabled) !== null && t !== void 0 && t
    }
    get isCapturing() {
        var t;
        return !(Y == null || (t = Y.onerror) === null || t === void 0 || !t.__POSTHOG_INSTRUMENTED__)
    }
    get hasHandlers() {
        return this.originalOnUnhandledRejectionHandler || this.unwrapOnError
    }
    startIfEnabled() {
        this.isEnabled && !this.isCapturing && (np.info("enabled, starting..."),
        this.loadScript(this.startCapturing))
    }
    loadScript(t) {
        var n, i;
        this.hasHandlers && t(),
        (n = _t.__PosthogExtensions__) === null || n === void 0 || (i = n.loadExternalDependency) === null || i === void 0 || i.call(n, this.instance, "exception-autocapture", r => {
            if (r)
                return np.error("failed to load script", r);
            t()
        }
        )
    }
    stopCapturing() {
        var t, n;
        (t = this.unwrapOnError) === null || t === void 0 || t.call(this),
        (n = this.unwrapUnhandledRejection) === null || n === void 0 || n.call(this)
    }
    onRemoteConfig(t) {
        var n = t.autocaptureExceptions;
        this.remoteEnabled = !!n || !1,
        this.instance.persistence && this.instance.persistence.register({
            [TT]: this.remoteEnabled
        }),
        this.startIfEnabled()
    }
    captureException(t) {
        var n = this.instance.requestRouter.endpointFor("ui");
        t.$exception_personURL = "".concat(n, "/project/").concat(this.instance.config.token, "/person/").concat(this.instance.get_distinct_id()),
        this.instance.exceptions.sendExceptionEvent(t)
    }
}
  , w0 = Lr("[Web Vitals]")
  , pO = 9e5
  , r8 = class {
    constructor(t) {
        var n;
        Ie(this, "_enabledServerSide", !1),
        Ie(this, "_initialized", !1),
        Ie(this, "buffer", {
            url: void 0,
            metrics: [],
            firstMetricTimestamp: void 0
        }),
        Ie(this, "_flushToCapture", () => {
            clearTimeout(this._delayedFlushTimer),
            this.buffer.metrics.length !== 0 && (this.instance.capture("$web_vitals", this.buffer.metrics.reduce( (i, r) => we(we({}, i), {}, {
                ["$web_vitals_".concat(r.name, "_event")]: we({}, r),
                ["$web_vitals_".concat(r.name, "_value")]: r.value
            }), {})),
            this.buffer = {
                url: void 0,
                metrics: [],
                firstMetricTimestamp: void 0
            })
        }
        ),
        Ie(this, "_addToBuffer", i => {
            var r, s = (r = this.instance.sessionManager) === null || r === void 0 ? void 0 : r.checkAndGetSessionAndWindowId(!0);
            if (Ze(s))
                w0.error("Could not read session ID. Dropping metrics!");
            else {
                this.buffer = this.buffer || {
                    url: void 0,
                    metrics: [],
                    firstMetricTimestamp: void 0
                };
                var o = this._currentURL();
                Ze(o) || (gn(i?.name) || gn(i?.value) ? w0.error("Invalid metric received", i) : this._maxAllowedValue && i.value >= this._maxAllowedValue ? w0.error("Ignoring metric with value >= " + this._maxAllowedValue, i) : (this.buffer.url !== o && (this._flushToCapture(),
                this._delayedFlushTimer = setTimeout(this._flushToCapture, this.flushToCaptureTimeoutMs)),
                Ze(this.buffer.url) && (this.buffer.url = o),
                this.buffer.firstMetricTimestamp = Ze(this.buffer.firstMetricTimestamp) ? Date.now() : this.buffer.firstMetricTimestamp,
                i.attribution && i.attribution.interactionTargetElement && (i.attribution.interactionTargetElement = void 0),
                this.buffer.metrics.push(we(we({}, i), {}, {
                    $current_url: o,
                    $session_id: s.sessionId,
                    $window_id: s.windowId,
                    timestamp: Date.now()
                })),
                this.buffer.metrics.length === this.allowedMetrics.length && this._flushToCapture()))
            }
        }
        ),
        Ie(this, "_startCapturing", () => {
            var i, r, s, o, a = _t.__PosthogExtensions__;
            Ze(a) || Ze(a.postHogWebVitalsCallbacks) || ({onLCP: i, onCLS: r, onFCP: s, onINP: o} = a.postHogWebVitalsCallbacks),
            i && r && s && o ? (this.allowedMetrics.indexOf("LCP") > -1 && i(this._addToBuffer.bind(this)),
            this.allowedMetrics.indexOf("CLS") > -1 && r(this._addToBuffer.bind(this)),
            this.allowedMetrics.indexOf("FCP") > -1 && s(this._addToBuffer.bind(this)),
            this.allowedMetrics.indexOf("INP") > -1 && o(this._addToBuffer.bind(this)),
            this._initialized = !0) : w0.error("web vitals callbacks not loaded - not starting")
        }
        ),
        this.instance = t,
        this._enabledServerSide = !((n = this.instance.persistence) === null || n === void 0 || !n.props[OT]),
        this.startIfEnabled()
    }
    get allowedMetrics() {
        var t, n, i = zn(this.instance.config.capture_performance) ? (t = this.instance.config.capture_performance) === null || t === void 0 ? void 0 : t.web_vitals_allowed_metrics : void 0;
        return Ze(i) ? ((n = this.instance.persistence) === null || n === void 0 ? void 0 : n.props[MT]) || ["CLS", "FCP", "INP", "LCP"] : i
    }
    get flushToCaptureTimeoutMs() {
        return (zn(this.instance.config.capture_performance) ? this.instance.config.capture_performance.web_vitals_delayed_flush_ms : void 0) || 5e3
    }
    get _maxAllowedValue() {
        var t = zn(this.instance.config.capture_performance) && Dr(this.instance.config.capture_performance.__web_vitals_max_value) ? this.instance.config.capture_performance.__web_vitals_max_value : pO;
        return 0 < t && t <= 6e4 ? pO : t
    }
    get isEnabled() {
        var t = zn(this.instance.config.capture_performance) ? this.instance.config.capture_performance.web_vitals : void 0;
        return O0(t) ? t : this._enabledServerSide
    }
    startIfEnabled() {
        this.isEnabled && !this._initialized && (w0.info("enabled, starting..."),
        this.loadScript(this._startCapturing))
    }
    onRemoteConfig(t) {
        var n = zn(t.capturePerformance) && !!t.capturePerformance.web_vitals
          , i = zn(t.capturePerformance) ? t.capturePerformance.web_vitals_allowed_metrics : void 0;
        this.instance.persistence && (this.instance.persistence.register({
            [OT]: n
        }),
        this.instance.persistence.register({
            [MT]: i
        })),
        this._enabledServerSide = n,
        this.startIfEnabled()
    }
    loadScript(t) {
        var n, i, r;
        (n = _t.__PosthogExtensions__) !== null && n !== void 0 && n.postHogWebVitalsCallbacks && t(),
        (i = _t.__PosthogExtensions__) === null || i === void 0 || (r = i.loadExternalDependency) === null || r === void 0 || r.call(i, this.instance, "web-vitals", s => {
            s ? w0.error("failed to load script", s) : t()
        }
        )
    }
    _currentURL() {
        var t = Y ? Y.location.href : void 0;
        return t || w0.error("Could not determine current URL"),
        t
    }
}
  , tK = {
    icontains: (e, t) => !!Y && t.href.toLowerCase().indexOf(e.toLowerCase()) > -1,
    not_icontains: (e, t) => !!Y && t.href.toLowerCase().indexOf(e.toLowerCase()) === -1,
    regex: (e, t) => !!Y && gh(t.href, e),
    not_regex: (e, t) => !!Y && !gh(t.href, e),
    exact: (e, t) => t.href === e,
    is_not: (e, t) => t.href !== e
}
  , s8 = class e {
    constructor(t) {
        var n = this;
        Ie(this, "getWebExperimentsAndEvaluateDisplayLogic", function() {
            var i = arguments.length > 0 && arguments[0] !== void 0 && arguments[0];
            n.getWebExperiments(r => {
                e.logInfo("retrieved web experiments from the server"),
                n._flagToExperiments = new Map,
                r.forEach(s => {
                    if (s.feature_flag_key) {
                        var o;
                        n._flagToExperiments && (e.logInfo("setting flag key ", s.feature_flag_key, " to web experiment ", s),
                        (o = n._flagToExperiments) === null || o === void 0 || o.set(s.feature_flag_key, s));
                        var a = n.instance.getFeatureFlag(s.feature_flag_key);
                        Qi(a) && s.variants[a] && n.applyTransforms(s.name, a, s.variants[a].transforms)
                    } else if (s.variants)
                        for (var c in s.variants) {
                            var l = s.variants[c];
                            e.matchesTestVariant(l) && n.applyTransforms(s.name, c, l.transforms)
                        }
                }
                )
            }
            , i)
        }),
        this.instance = t,
        this.instance.onFeatureFlags(i => {
            this.onFeatureFlags(i)
        }
        )
    }
    onFeatureFlags(t) {
        if (this._is_bot())
            e.logInfo("Refusing to render web experiment since the viewer is a likely bot");
        else if (!this.instance.config.disable_web_experiments) {
            if (gn(this._flagToExperiments))
                return this._flagToExperiments = new Map,
                this.loadIfEnabled(),
                void this.previewWebExperiment();
            e.logInfo("applying feature flags", t),
            t.forEach(n => {
                var i;
                if (this._flagToExperiments && (i = this._flagToExperiments) !== null && i !== void 0 && i.has(n)) {
                    var r, s = this.instance.getFeatureFlag(n), o = (r = this._flagToExperiments) === null || r === void 0 ? void 0 : r.get(n);
                    s && o != null && o.variants[s] && this.applyTransforms(o.name, s, o.variants[s].transforms)
                }
            }
            )
        }
    }
    previewWebExperiment() {
        var t = e.getWindowLocation();
        if (t != null && t.search) {
            var n = hp(t?.search, "__experiment_id")
              , i = hp(t?.search, "__experiment_variant");
            n && i && (e.logInfo("previewing web experiments ".concat(n, " && ").concat(i)),
            this.getWebExperiments(r => {
                this.showPreviewWebExperiment(parseInt(n), i, r)
            }
            , !1, !0))
        }
    }
    loadIfEnabled() {
        this.instance.config.disable_web_experiments || this.getWebExperimentsAndEvaluateDisplayLogic()
    }
    getWebExperiments(t, n, i) {
        if (this.instance.config.disable_web_experiments && !i)
            return t([]);
        var r = this.instance.get_property("$web_experiments");
        if (r && !n)
            return t(r);
        this.instance._send_request({
            url: this.instance.requestRouter.endpointFor("api", "/api/web_experiments/?token=".concat(this.instance.config.token)),
            method: "GET",
            callback: s => {
                if (s.statusCode !== 200 || !s.json)
                    return t([]);
                var o = s.json.experiments || [];
                return t(o)
            }
        })
    }
    showPreviewWebExperiment(t, n, i) {
        var r = i.filter(s => s.id === t);
        r && r.length > 0 && (e.logInfo("Previewing web experiment [".concat(r[0].name, "] with variant [").concat(n, "]")),
        this.applyTransforms(r[0].name, n, r[0].variants[n].transforms, !0))
    }
    static matchesTestVariant(t) {
        return !gn(t.conditions) && e.matchUrlConditions(t) && e.matchUTMConditions(t)
    }
    static matchUrlConditions(t) {
        var n;
        if (gn(t.conditions) || gn((n = t.conditions) === null || n === void 0 ? void 0 : n.url))
            return !0;
        var i, r, s, o = e.getWindowLocation();
        return !!o && ((i = t.conditions) === null || i === void 0 || !i.url || tK[(r = (s = t.conditions) === null || s === void 0 ? void 0 : s.urlMatchType) !== null && r !== void 0 ? r : "icontains"](t.conditions.url, o))
    }
    static getWindowLocation() {
        return Y?.location
    }
    static matchUTMConditions(t) {
        var n;
        if (gn(t.conditions) || gn((n = t.conditions) === null || n === void 0 ? void 0 : n.utm))
            return !0;
        var i = Hn.campaignParams();
        if (i.utm_source) {
            var r, s, o, a, c, l, u, h, d, f, g, p, v, S, x, w, k = (r = t.conditions) === null || r === void 0 || (s = r.utm) === null || s === void 0 || !s.utm_campaign || ((o = t.conditions) === null || o === void 0 || (a = o.utm) === null || a === void 0 ? void 0 : a.utm_campaign) == i.utm_campaign, B = (c = t.conditions) === null || c === void 0 || (l = c.utm) === null || l === void 0 || !l.utm_source || ((u = t.conditions) === null || u === void 0 || (h = u.utm) === null || h === void 0 ? void 0 : h.utm_source) == i.utm_source, N = (d = t.conditions) === null || d === void 0 || (f = d.utm) === null || f === void 0 || !f.utm_medium || ((g = t.conditions) === null || g === void 0 || (p = g.utm) === null || p === void 0 ? void 0 : p.utm_medium) == i.utm_medium, E = (v = t.conditions) === null || v === void 0 || (S = v.utm) === null || S === void 0 || !S.utm_term || ((x = t.conditions) === null || x === void 0 || (w = x.utm) === null || w === void 0 ? void 0 : w.utm_term) == i.utm_term;
            return k && N && E && B
        }
        return !1
    }
    static logInfo(t) {
        for (var n = arguments.length, i = new Array(n > 1 ? n - 1 : 0), r = 1; r < n; r++)
            i[r - 1] = arguments[r];
        tt.info("[WebExperiments] ".concat(t), i)
    }
    applyTransforms(t, n, i, r) {
        var s;
        this._is_bot() ? e.logInfo("Refusing to render web experiment since the viewer is a likely bot") : n !== "control" ? i.forEach(o => {
            if (o.selector) {
                var a;
                e.logInfo("applying transform of variant ".concat(n, " for experiment ").concat(t, " "), o);
                var c, l = 0, u = (a = document) === null || a === void 0 ? void 0 : a.querySelectorAll(o.selector);
                u?.forEach(h => {
                    var d = h;
                    l += 1,
                    o.attributes && o.attributes.forEach(f => {
                        switch (f.name) {
                        case "text":
                            d.innerText = f.value;
                            break;
                        case "html":
                            d.innerHTML = f.value;
                            break;
                        case "cssClass":
                            d.className = f.value;
                            break;
                        default:
                            d.setAttribute(f.name, f.value)
                        }
                    }
                    ),
                    o.text && (d.innerText = o.text),
                    o.html && (d.parentElement ? d.parentElement.innerHTML = o.html : d.innerHTML = o.html),
                    o.css && d.setAttribute("style", o.css)
                }
                ),
                this.instance && this.instance.capture && this.instance.capture("$web_experiment_applied", {
                    $web_experiment_name: t,
                    $web_experiment_variant: n,
                    $web_experiment_preview: r,
                    $web_experiment_document_url: (c = e.getWindowLocation()) === null || c === void 0 ? void 0 : c.href,
                    $web_experiment_elements_modified: l
                })
            }
        }
        ) : (e.logInfo("Control variants leave the page unmodified."),
        this.instance && this.instance.capture && this.instance.capture("$web_experiment_applied", {
            $web_experiment_name: t,
            $web_experiment_preview: r,
            $web_experiment_variant: n,
            $web_experiment_document_url: (s = e.getWindowLocation()) === null || s === void 0 ? void 0 : s.href,
            $web_experiment_elements_modified: 0
        }))
    }
    _is_bot() {
        return Cs && this.instance ? vM(Cs, this.instance.config.custom_blocked_useragents) : void 0
    }
}
  , o8 = class {
    constructor(t) {
        this.instance = t
    }
    sendExceptionEvent(t) {
        this.instance.capture("$exception", t, {
            _noTruncate: !0,
            _batchKey: "exceptionEvent"
        })
    }
}
  , nK = ["$set_once", "$set"]
  , C0 = Lr("[SiteApps]")
  , a8 = class {
    constructor(t) {
        this.instance = t,
        this.bufferedInvocations = [],
        this.apps = {}
    }
    get isEnabled() {
        return !!this.instance.config.opt_in_site_apps
    }
    eventCollector(t, n) {
        if (n) {
            var i = this.globalsForEvent(n);
            this.bufferedInvocations.push(i),
            this.bufferedInvocations.length > 1e3 && (this.bufferedInvocations = this.bufferedInvocations.slice(10))
        }
    }
    get siteAppLoaders() {
        var t, n;
        return (t = _t._POSTHOG_REMOTE_CONFIG) === null || t === void 0 || (n = t[this.instance.config.token]) === null || n === void 0 ? void 0 : n.siteApps
    }
    init() {
        if (this.isEnabled) {
            var t = this.instance._addCaptureHook(this.eventCollector.bind(this));
            this.stopBuffering = () => {
                t(),
                this.bufferedInvocations = [],
                this.stopBuffering = void 0
            }
        }
    }
    globalsForEvent(t) {
        var n, i, r, s, o, a, c;
        if (!t)
            throw new Error("Event payload is required");
        var l = {}
          , u = this.instance.get_property("$groups") || []
          , h = this.instance.get_property("$stored_group_properties") || {};
        for (var [d,f] of Object.entries(h))
            l[d] = {
                id: u[d],
                type: d,
                properties: f
            };
        var {$set_once: g, $set: p} = t;
        return {
            event: we(we({}, xO(t, nK)), {}, {
                properties: we(we(we({}, t.properties), p ? {
                    $set: we(we({}, (n = (i = t.properties) === null || i === void 0 ? void 0 : i.$set) !== null && n !== void 0 ? n : {}), p)
                } : {}), g ? {
                    $set_once: we(we({}, (r = (s = t.properties) === null || s === void 0 ? void 0 : s.$set_once) !== null && r !== void 0 ? r : {}), g)
                } : {}),
                elements_chain: (o = (a = t.properties) === null || a === void 0 ? void 0 : a.$elements_chain) !== null && o !== void 0 ? o : "",
                distinct_id: (c = t.properties) === null || c === void 0 ? void 0 : c.distinct_id
            }),
            person: {
                properties: this.instance.get_property("$stored_person_properties")
            },
            groups: l
        }
    }
    setupSiteApp(t) {
        var n = {
            id: t.id,
            loaded: !1,
            errored: !1
        };
        this.apps[t.id] = n;
        var i = s => {
            var o;
            for (var a of (this.apps[t.id].errored = !s,
            this.apps[t.id].loaded = !0,
            C0.info("Site app with id ".concat(t.id, " ").concat(s ? "loaded" : "errored")),
            s && this.bufferedInvocations.length && (C0.info("Processing ".concat(this.bufferedInvocations.length, " events for site app with id ").concat(t.id)),
            this.bufferedInvocations.forEach(c => {
                var l;
                return (l = n.processEvent) === null || l === void 0 ? void 0 : l.call(n, c)
            }
            )),
            Object.values(this.apps)))
                if (!a.loaded)
                    return;
            (o = this.stopBuffering) === null || o === void 0 || o.call(this)
        }
        ;
        try {
            var {processEvent: r} = t.init({
                posthog: this.instance,
                callback: s => {
                    i(s)
                }
            });
            r && (n.processEvent = r)
        } catch (s) {
            C0.error("Error while initializing PostHog app with config id ".concat(t.id), s),
            i(!1)
        }
    }
    onCapturedEvent(t) {
        if (Object.keys(this.apps).length !== 0) {
            var n = this.globalsForEvent(t);
            for (var i of Object.values(this.apps))
                try {
                    var r;
                    (r = i.processEvent) === null || r === void 0 || r.call(i, n)
                } catch (s) {
                    C0.error("Error while processing event ".concat(t.event, " for site app ").concat(i.id), s)
                }
        }
    }
    onRemoteConfig(t) {
        var n, i, r, s = this;
        if ((n = this.siteAppLoaders) !== null && n !== void 0 && n.length) {
            if (!this.isEnabled)
                return void C0.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');
            for (var o of this.siteAppLoaders)
                this.setupSiteApp(o);
            this.instance.on("eventCaptured", u => this.onCapturedEvent(u))
        } else if ((i = this.stopBuffering) === null || i === void 0 || i.call(this),
        (r = t.siteApps) !== null && r !== void 0 && r.length)
            if (this.isEnabled) {
                var a = function(u, h) {
                    var d, f;
                    _t["__$$ph_site_app_".concat(u)] = s.instance,
                    (d = _t.__PosthogExtensions__) === null || d === void 0 || (f = d.loadSiteApp) === null || f === void 0 || f.call(d, s.instance, h, g => {
                        if (g)
                            return C0.error("Error while initializing PostHog app with config id ".concat(u), g)
                    }
                    )
                };
                for (var {id: c, url: l} of t.siteApps)
                    a(c, l)
            } else
                C0.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')
    }
}
  , n5 = {}
  , c8 = () => {}
  , ch = "posthog"
  , _M = !FX && Li?.indexOf("MSIE") === -1 && Li?.indexOf("Mozilla") === -1
  , gO = () => {
    var e, t, n;
    return {
        api_host: "https://us.i.posthog.com",
        ui_host: null,
        token: "",
        autocapture: !0,
        rageclick: !0,
        cross_subdomain_cookie: (t = qe?.location,
        n = t?.hostname,
        !!Qi(n) && n.split(".").slice(-2).join(".") !== "herokuapp.com"),
        persistence: "localStorage+cookie",
        persistence_name: "",
        loaded: c8,
        store_google: !0,
        custom_campaign_params: [],
        custom_blocked_useragents: [],
        save_referrer: !0,
        capture_pageview: !0,
        capture_pageleave: "if_capture_pageview",
        debug: es && Qi(es?.search) && es.search.indexOf("__posthog_debug=true") !== -1 || !1,
        verbose: !1,
        cookie_expiration: 365,
        upgrade: !1,
        disable_session_recording: !1,
        disable_persistence: !1,
        disable_web_experiments: !0,
        disable_surveys: !1,
        enable_recording_console_log: void 0,
        secure_cookie: (Y == null || (e = Y.location) === null || e === void 0 ? void 0 : e.protocol) === "https:",
        ip: !0,
        opt_out_capturing_by_default: !1,
        opt_out_persistence_by_default: !1,
        opt_out_useragent_filter: !1,
        opt_out_capturing_persistence_type: "localStorage",
        opt_out_capturing_cookie_prefix: null,
        opt_in_site_apps: !1,
        property_denylist: [],
        respect_dnt: !1,
        sanitize_properties: null,
        request_headers: {},
        inapp_protocol: "//",
        inapp_link_new_window: !1,
        request_batching: !0,
        properties_string_max_length: 65535,
        session_recording: {},
        mask_all_element_attributes: !1,
        mask_all_text: !1,
        advanced_disable_decide: !1,
        advanced_disable_feature_flags: !1,
        advanced_disable_feature_flags_on_first_load: !1,
        advanced_disable_toolbar_metrics: !1,
        feature_flag_request_timeout_ms: 3e3,
        on_request_error: i => {
            var r = "Bad HTTP status: " + i.statusCode + " " + i.text;
            tt.error(r)
        }
        ,
        get_device_id: i => i,
        _onCapture: c8,
        capture_performance: void 0,
        name: "posthog",
        bootstrap: {},
        disable_compression: !1,
        session_idle_timeout_seconds: 1800,
        person_profiles: "identified_only",
        __add_tracing_headers: !1,
        before_send: void 0
    }
}
  , mO = e => {
    var t = {};
    Ze(e.process_person) || (t.person_profiles = e.process_person),
    Ze(e.xhr_headers) || (t.request_headers = e.xhr_headers),
    Ze(e.cookie_name) || (t.persistence_name = e.cookie_name),
    Ze(e.disable_cookie) || (t.disable_persistence = e.disable_cookie);
    var n = Nr({}, t, e);
    return oi(e.property_blacklist) && (Ze(e.property_denylist) ? n.property_denylist = e.property_blacklist : oi(e.property_denylist) ? n.property_denylist = [...e.property_blacklist, ...e.property_denylist] : tt.error("Invalid value for property_denylist config: " + e.property_denylist)),
    n
}
  , l8 = class {
    constructor() {
        Ie(this, "__forceAllowLocalhost", !1)
    }
    get _forceAllowLocalhost() {
        return this.__forceAllowLocalhost
    }
    set _forceAllowLocalhost(t) {
        tt.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),
        this.__forceAllowLocalhost = t
    }
}
  , Cp = class e {
    get decideEndpointWasHit() {
        var t, n;
        return (t = (n = this.featureFlags) === null || n === void 0 ? void 0 : n.hasLoadedFlags) !== null && t !== void 0 && t
    }
    constructor() {
        Ie(this, "webPerformance", new l8),
        Ie(this, "version", Ja.LIB_VERSION),
        Ie(this, "_internalEventEmitter", new Sp),
        this.config = gO(),
        this.SentryIntegration = Vm,
        this.sentryIntegration = t => function(n, i) {
            var r = oM(n, i);
            return {
                name: sM,
                processEvent: s => r(s)
            }
        }(this, t),
        this.__request_queue = [],
        this.__loaded = !1,
        this.analyticsDefaultEndpoint = "/e/",
        this._initialPageviewCaptured = !1,
        this._initialPersonProfilesConfig = null,
        this.featureFlags = new vm(this),
        this.toolbar = new Lm(this),
        this.scrollManager = new Zm(this),
        this.pageViewManager = new $m(this),
        this.surveys = new Km(this),
        this.experiments = new s8(this),
        this.exceptions = new o8(this),
        this.rateLimiter = new Ym(this),
        this.requestRouter = new Gm(this),
        this.consent = new n8(this),
        this.people = {
            set: (t, n, i) => {
                var r = Qi(t) ? {
                    [t]: n
                } : t;
                this.setPersonProperties(r),
                i?.({})
            }
            ,
            set_once: (t, n, i) => {
                var r = Qi(t) ? {
                    [t]: n
                } : t;
                this.setPersonProperties(void 0, r),
                i?.({})
            }
        },
        this.on("eventCaptured", t => tt.info('send "'.concat(t?.event, '"'), t))
    }
    init(t, n, i) {
        if (i && i !== ch) {
            var r, s = (r = n5[i]) !== null && r !== void 0 ? r : new e;
            return s._init(t, n, i),
            n5[i] = s,
            n5[ch][i] = s,
            s
        }
        return this._init(t, n, i)
    }
    _init(t) {
        var n, i, r, s = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, o = arguments.length > 2 ? arguments[2] : void 0;
        if (Ze(t) || bT(t))
            return tt.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),
            this;
        if (this.__loaded)
            return tt.warn("You have already initialized PostHog! Re-initializing is a no-op"),
            this;
        this.__loaded = !0,
        this.config = {},
        this._triggered_notifs = [],
        s.person_profiles && (this._initialPersonProfilesConfig = s.person_profiles),
        this.set_config(Nr({}, gO(), mO(s), {
            name: o,
            token: t
        })),
        this.config.on_xhr_error && tt.error("on_xhr_error is deprecated. Use on_request_error instead"),
        this.compression = s.disable_compression ? void 0 : ra.GZipJS,
        this.persistence = new Z1(this.config),
        this.sessionPersistence = this.config.persistence === "sessionStorage" || this.config.persistence === "memory" ? this.persistence : new Z1(we(we({}, this.config), {}, {
            persistence: "sessionStorage"
        }));
        var a = we({}, this.persistence.props)
          , c = we({}, this.sessionPersistence.props);
        if (this._requestQueue = new Bm(x => this._send_retriable_request(x)),
        this._retryQueue = new Um(this),
        this.__request_queue = [],
        this.config.__preview_experimental_cookieless_mode || (this.sessionManager = new Hm(this),
        this.sessionPropsManager = new Qm(this.sessionManager,this.persistence)),
        new t8(this).startIfEnabledOrStop(),
        this.siteApps = new a8(this),
        (n = this.siteApps) === null || n === void 0 || n.init(),
        this.config.__preview_experimental_cookieless_mode || (this.sessionRecording = new Nm(this),
        this.sessionRecording.startIfEnabledOrStop()),
        this.config.disable_scroll_properties || this.scrollManager.startMeasuringScrollPosition(),
        this.autocapture = new e8(this),
        this.autocapture.startIfEnabled(),
        this.surveys.loadIfEnabled(),
        this.heatmaps = new Jm(this),
        this.heatmaps.startIfEnabled(),
        this.webVitalsAutocapture = new r8(this),
        this.exceptionObserver = new i8(this),
        this.exceptionObserver.startIfEnabled(),
        this.deadClicksAutocapture = new wp(this,KX),
        this.deadClicksAutocapture.startIfEnabled(),
        Ja.DEBUG = Ja.DEBUG || this.config.debug,
        Ja.DEBUG && tt.info("Starting in debug mode", {
            this: this,
            config: s,
            thisC: we({}, this.config),
            p: a,
            s: c
        }),
        this._sync_opt_out_with_persistence(),
        ((i = s.bootstrap) === null || i === void 0 ? void 0 : i.distinctID) !== void 0) {
            var l, u, h = this.config.get_device_id(tl()), d = (l = s.bootstrap) !== null && l !== void 0 && l.isIdentifiedID ? h : s.bootstrap.distinctID;
            this.persistence.set_property(Ka, (u = s.bootstrap) !== null && u !== void 0 && u.isIdentifiedID ? "identified" : "anonymous"),
            this.register({
                distinct_id: s.bootstrap.distinctID,
                $device_id: d
            })
        }
        if (this._hasBootstrappedFeatureFlags()) {
            var f, g, p = Object.keys(((f = s.bootstrap) === null || f === void 0 ? void 0 : f.featureFlags) || {}).filter(x => {
                var w, k;
                return !((w = s.bootstrap) === null || w === void 0 || (k = w.featureFlags) === null || k === void 0 || !k[x])
            }
            ).reduce( (x, w) => {
                var k, B;
                return x[w] = ((k = s.bootstrap) === null || k === void 0 || (B = k.featureFlags) === null || B === void 0 ? void 0 : B[w]) || !1,
                x
            }
            , {}), v = Object.keys(((g = s.bootstrap) === null || g === void 0 ? void 0 : g.featureFlagPayloads) || {}).filter(x => p[x]).reduce( (x, w) => {
                var k, B, N, E;
                return (k = s.bootstrap) !== null && k !== void 0 && (B = k.featureFlagPayloads) !== null && B !== void 0 && B[w] && (x[w] = (N = s.bootstrap) === null || N === void 0 || (E = N.featureFlagPayloads) === null || E === void 0 ? void 0 : E[w]),
                x
            }
            , {});
            this.featureFlags.receivedFeatureFlags({
                featureFlags: p,
                featureFlagPayloads: v
            })
        }
        if (this.config.__preview_experimental_cookieless_mode)
            this.register_once({
                distinct_id: NT,
                $device_id: null
            }, "");
        else if (!this.get_distinct_id()) {
            var S = this.config.get_device_id(tl());
            this.register_once({
                distinct_id: S,
                $device_id: S
            }, ""),
            this.persistence.set_property(Ka, "anonymous")
        }
        return Y == null || (r = Y.addEventListener) === null || r === void 0 || r.call(Y, "onpagehide"in self ? "pagehide" : "unload", this._handle_unload.bind(this)),
        this.toolbar.maybeLoadToolbar(),
        s.segment ? BX(this, () => this._loaded()) : this._loaded(),
        Gs(this.config._onCapture) && this.config._onCapture !== c8 && (tt.warn("onCapture is deprecated. Please use `before_send` instead"),
        this.on("eventCaptured", x => this.config._onCapture(x.event, x))),
        this
    }
    _onRemoteConfig(t) {
        var n, i, r, s, o, a, c, l, u;
        if (!qe || !qe.body)
            return tt.info("document not ready yet, trying again in 500 milliseconds..."),
            void setTimeout( () => {
                this._onRemoteConfig(t)
            }
            , 500);
        this.compression = void 0,
        t.supportedCompression && !this.config.disable_compression && (this.compression = Ft(t.supportedCompression, ra.GZipJS) ? ra.GZipJS : Ft(t.supportedCompression, ra.Base64) ? ra.Base64 : void 0),
        (n = t.analytics) !== null && n !== void 0 && n.endpoint && (this.analyticsDefaultEndpoint = t.analytics.endpoint),
        this.set_config({
            person_profiles: this._initialPersonProfilesConfig ? this._initialPersonProfilesConfig : t.defaultIdentifiedOnly ? "identified_only" : "always"
        }),
        (i = this.siteApps) === null || i === void 0 || i.onRemoteConfig(t),
        (r = this.sessionRecording) === null || r === void 0 || r.onRemoteConfig(t),
        (s = this.autocapture) === null || s === void 0 || s.onRemoteConfig(t),
        (o = this.heatmaps) === null || o === void 0 || o.onRemoteConfig(t),
        (a = this.surveys) === null || a === void 0 || a.onRemoteConfig(t),
        (c = this.webVitalsAutocapture) === null || c === void 0 || c.onRemoteConfig(t),
        (l = this.exceptionObserver) === null || l === void 0 || l.onRemoteConfig(t),
        (u = this.deadClicksAutocapture) === null || u === void 0 || u.onRemoteConfig(t)
    }
    _loaded() {
        try {
            this.config.loaded(this)
        } catch (t) {
            tt.critical("`loaded` function failed", t)
        }
        this._start_queue_if_opted_in(),
        this.config.capture_pageview && setTimeout( () => {
            this.consent.isOptedIn() && this._captureInitialPageview()
        }
        , 1),
        new Fm(this).load(),
        this.featureFlags.decide()
    }
    _start_queue_if_opted_in() {
        var t;
        this.has_opted_out_capturing() || this.config.request_batching && ((t = this._requestQueue) === null || t === void 0 || t.enable())
    }
    _dom_loaded() {
        this.has_opted_out_capturing() || hh(this.__request_queue, t => this._send_retriable_request(t)),
        this.__request_queue = [],
        this._start_queue_if_opted_in()
    }
    _handle_unload() {
        var t, n;
        this.config.request_batching ? (this._shouldCapturePageleave() && this.capture("$pageleave"),
        (t = this._requestQueue) === null || t === void 0 || t.unload(),
        (n = this._retryQueue) === null || n === void 0 || n.unload()) : this._shouldCapturePageleave() && this.capture("$pageleave", null, {
            transport: "sendBeacon"
        })
    }
    _send_request(t) {
        this.__loaded && (_M ? this.__request_queue.push(t) : this.rateLimiter.isServerRateLimited(t.batchKey) || (t.transport = t.transport || this.config.api_transport,
        t.url = _p(t.url, {
            ip: this.config.ip ? 1 : 0
        }),
        t.headers = we({}, this.config.request_headers),
        t.compression = t.compression === "best-available" ? this.compression : t.compression,
        t.fetchOptions = t.fetchOptions || this.config.fetch_options,
        (n => {
            var i, r, s, o = we({}, n);
            o.timeout = o.timeout || 6e4,
            o.url = _p(o.url, {
                _: new Date().getTime().toString(),
                ver: Ja.LIB_VERSION,
                compression: o.compression
            });
            var a = (i = o.transport) !== null && i !== void 0 ? i : "fetch"
              , c = (r = (s = wO(t5, l => l.transport === a)) === null || s === void 0 ? void 0 : s.method) !== null && r !== void 0 ? r : t5[0].method;
            if (!c)
                throw new Error("No available transport method");
            c(o)
        }
        )(we(we({}, t), {}, {
            callback: n => {
                var i, r, s;
                this.rateLimiter.checkForLimiting(n),
                n.statusCode >= 400 && ((r = (s = this.config).on_request_error) === null || r === void 0 || r.call(s, n)),
                (i = t.callback) === null || i === void 0 || i.call(t, n)
            }
        }))))
    }
    _send_retriable_request(t) {
        this._retryQueue ? this._retryQueue.retriableRequest(t) : this._send_request(t)
    }
    _execute_array(t) {
        var n, i = [], r = [], s = [];
        hh(t, a => {
            a && (n = a[0],
            oi(n) ? s.push(a) : Gs(a) ? a.call(this) : oi(a) && n === "alias" ? i.push(a) : oi(a) && n.indexOf("capture") !== -1 && Gs(this[n]) ? s.push(a) : r.push(a))
        }
        );
        var o = function(a, c) {
            hh(a, function(l) {
                if (oi(l[0])) {
                    var u = c;
                    un(l, function(h) {
                        u = u[h[0]].apply(u, h.slice(1))
                    })
                } else
                    this[l[0]].apply(this, l.slice(1))
            }, c)
        };
        o(i, this),
        o(r, this),
        o(s, this)
    }
    _hasBootstrappedFeatureFlags() {
        var t, n;
        return ((t = this.config.bootstrap) === null || t === void 0 ? void 0 : t.featureFlags) && Object.keys((n = this.config.bootstrap) === null || n === void 0 ? void 0 : n.featureFlags).length > 0 || !1
    }
    push(t) {
        this._execute_array([t])
    }
    capture(t, n, i) {
        var r;
        if (this.__loaded && this.persistence && this.sessionPersistence && this._requestQueue) {
            if (!this.consent.isOptedOut())
                if (!Ze(t) && Qi(t)) {
                    if (this.config.opt_out_useragent_filter || !this._is_bot()) {
                        var s = i != null && i.skip_client_rate_limiting ? void 0 : this.rateLimiter.clientRateLimitContext();
                        if (s == null || !s.isRateLimited) {
                            this.sessionPersistence.update_search_keyword(),
                            this.config.store_google && this.sessionPersistence.update_campaign_params(),
                            this.config.save_referrer && this.sessionPersistence.update_referrer_info(),
                            (this.config.store_google || this.config.save_referrer) && this.persistence.set_initial_person_info();
                            var o = new Date
                              , a = i?.timestamp || o
                              , c = {
                                uuid: tl(),
                                event: t,
                                properties: this._calculate_event_properties(t, n || {}, a)
                            };
                            s && (c.properties.$lib_rate_limit_remaining_tokens = s.remainingTokens),
                            i?.$set && (c.$set = i?.$set);
                            var l = this._calculate_set_once_properties(i?.$set_once);
                            l && (c.$set_once = l),
                            (c = jz(c, i != null && i._noTruncate ? null : this.config.properties_string_max_length)).timestamp = a,
                            Ze(i?.timestamp) || (c.properties.$event_time_override_provided = !0,
                            c.properties.$event_time_override_system_time = o);
                            var u = we(we({}, c.properties.$set), c.$set);
                            if (lh(u) || this.setPersonPropertiesForFlags(u),
                            !gn(this.config.before_send)) {
                                var h = this._runBeforeSend(c);
                                if (!h)
                                    return;
                                c = h
                            }
                            this._internalEventEmitter.emit("eventCaptured", c);
                            var d = {
                                method: "POST",
                                url: (r = i?._url) !== null && r !== void 0 ? r : this.requestRouter.endpointFor("api", this.analyticsDefaultEndpoint),
                                data: c,
                                compression: "best-available",
                                batchKey: i?._batchKey
                            };
                            return !this.config.request_batching || i && (i == null || !i._batchKey) || i != null && i.send_instantly ? this._send_retriable_request(d) : this._requestQueue.enqueue(d),
                            c
                        }
                        tt.critical("This capture call is ignored due to client rate limiting.")
                    }
                } else
                    tt.error("No event name provided to posthog.capture")
        } else
            tt.uninitializedWarning("posthog.capture")
    }
    _addCaptureHook(t) {
        return this.on("eventCaptured", n => t(n.event, n))
    }
    _calculate_event_properties(t, n, i) {
        if (i = i || new Date,
        !this.persistence || !this.sessionPersistence)
            return n;
        var r = this.persistence.remove_event_timer(t)
          , s = we({}, n);
        if (s.token = this.config.token,
        this.config.__preview_experimental_cookieless_mode && (s.$cklsh_mode = !0),
        t === "$snapshot") {
            var o = we(we({}, this.persistence.properties()), this.sessionPersistence.properties());
            return s.distinct_id = o.distinct_id,
            (!Qi(s.distinct_id) && !Dr(s.distinct_id) || bT(s.distinct_id)) && tt.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),
            s
        }
        var a = Hn.properties();
        if (this.sessionManager) {
            var {sessionId: c, windowId: l} = this.sessionManager.checkAndGetSessionAndWindowId();
            s.$session_id = c,
            s.$window_id = l
        }
        if (this.sessionRecording && (s.$recording_status = this.sessionRecording.status),
        this.requestRouter.region === M0.CUSTOM && (s.$lib_custom_api_host = this.config.api_host),
        this.sessionPropsManager && this.config.__preview_send_client_session_params && (t === "$pageview" || t === "$pageleave" || t === "$autocapture")) {
            var u = this.sessionPropsManager.getSessionProps();
            s = Nr(s, u)
        }
        if (!this.config.disable_scroll_properties) {
            var h = {};
            t === "$pageview" ? h = this.pageViewManager.doPageView(i) : t === "$pageleave" && (h = this.pageViewManager.doPageLeave(i)),
            s = Nr(s, h)
        }
        if (t === "$pageview" && qe && (s.title = qe.title),
        !Ze(r)) {
            var d = i.getTime() - r;
            s.$duration = parseFloat((d / 1e3).toFixed(3))
        }
        Li && this.config.opt_out_useragent_filter && (s.$browser_type = this._is_bot() ? "bot" : "browser"),
        (s = Nr({}, a, this.persistence.properties(), this.sessionPersistence.properties(), s)).$is_identified = this._isIdentified(),
        oi(this.config.property_denylist) ? un(this.config.property_denylist, function(p) {
            delete s[p]
        }) : tt.error("Invalid value for property_denylist config: " + this.config.property_denylist + " or property_blacklist config: " + this.config.property_blacklist);
        var f = this.config.sanitize_properties;
        f && (s = f(s, t));
        var g = this._hasPersonProcessing();
        return s.$process_person_profile = g,
        g && this._requirePersonProcessing("_calculate_event_properties"),
        s
    }
    _calculate_set_once_properties(t) {
        if (!this.persistence || !this._hasPersonProcessing())
            return t;
        var n = Nr({}, this.persistence.get_initial_props(), t || {})
          , i = this.config.sanitize_properties;
        return i && (n = i(n, "$set_once")),
        lh(n) ? void 0 : n
    }
    register(t, n) {
        var i;
        (i = this.persistence) === null || i === void 0 || i.register(t, n)
    }
    register_once(t, n, i) {
        var r;
        (r = this.persistence) === null || r === void 0 || r.register_once(t, n, i)
    }
    register_for_session(t) {
        var n;
        (n = this.sessionPersistence) === null || n === void 0 || n.register(t)
    }
    unregister(t) {
        var n;
        (n = this.persistence) === null || n === void 0 || n.unregister(t)
    }
    unregister_for_session(t) {
        var n;
        (n = this.sessionPersistence) === null || n === void 0 || n.unregister(t)
    }
    _register_single(t, n) {
        this.register({
            [t]: n
        })
    }
    getFeatureFlag(t, n) {
        return this.featureFlags.getFeatureFlag(t, n)
    }
    getFeatureFlagPayload(t) {
        var n = this.featureFlags.getFeatureFlagPayload(t);
        try {
            return JSON.parse(n)
        } catch {
            return n
        }
    }
    isFeatureEnabled(t, n) {
        return this.featureFlags.isFeatureEnabled(t, n)
    }
    reloadFeatureFlags() {
        this.featureFlags.reloadFeatureFlags()
    }
    updateEarlyAccessFeatureEnrollment(t, n) {
        this.featureFlags.updateEarlyAccessFeatureEnrollment(t, n)
    }
    getEarlyAccessFeatures(t) {
        var n = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
        return this.featureFlags.getEarlyAccessFeatures(t, n)
    }
    on(t, n) {
        return this._internalEventEmitter.on(t, n)
    }
    onFeatureFlags(t) {
        return this.featureFlags.onFeatureFlags(t)
    }
    onSessionId(t) {
        var n, i;
        return (n = (i = this.sessionManager) === null || i === void 0 ? void 0 : i.onSessionId(t)) !== null && n !== void 0 ? n : () => {}
    }
    getSurveys(t) {
        var n = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
        this.surveys.getSurveys(t, n)
    }
    getActiveMatchingSurveys(t) {
        var n = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
        this.surveys.getActiveMatchingSurveys(t, n)
    }
    renderSurvey(t, n) {
        this.surveys.renderSurvey(t, n)
    }
    canRenderSurvey(t) {
        this.surveys.canRenderSurvey(t)
    }
    getNextSurveyStep(t, n, i) {
        return this.surveys.getNextSurveyStep(t, n, i)
    }
    identify(t, n, i) {
        if (!this.__loaded || !this.persistence)
            return tt.uninitializedWarning("posthog.identify");
        if (Dr(t) && (t = t.toString(),
        tt.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),
        t) {
            if (["distinct_id", "distinctid"].includes(t.toLowerCase()))
                tt.critical('The string "'.concat(t, '" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));
            else if (this._requirePersonProcessing("posthog.identify")) {
                var r = this.get_distinct_id();
                if (this.register({
                    $user_id: t
                }),
                !this.get_property("$device_id")) {
                    var s = r;
                    this.register_once({
                        $had_persisted_distinct_id: !0,
                        $device_id: s
                    }, "")
                }
                t !== r && t !== this.get_property(z1) && (this.unregister(z1),
                this.register({
                    distinct_id: t
                }));
                var o = (this.persistence.get_property(Ka) || "anonymous") === "anonymous";
                t !== r && o ? (this.persistence.set_property(Ka, "identified"),
                this.setPersonPropertiesForFlags(n || {}, !1),
                this.capture("$identify", {
                    distinct_id: t,
                    $anon_distinct_id: r
                }, {
                    $set: n || {},
                    $set_once: i || {}
                }),
                this.featureFlags.setAnonymousDistinctId(r)) : (n || i) && this.setPersonProperties(n, i),
                t !== r && (this.reloadFeatureFlags(),
                this.unregister(lp))
            }
        } else
            tt.error("Unique user id has not been set in posthog.identify")
    }
    setPersonProperties(t, n) {
        (t || n) && this._requirePersonProcessing("posthog.setPersonProperties") && (this.setPersonPropertiesForFlags(t || {}),
        this.capture("$set", {
            $set: t || {},
            $set_once: n || {}
        }))
    }
    group(t, n, i) {
        if (t && n) {
            if (this._requirePersonProcessing("posthog.group")) {
                var r = this.getGroups();
                r[t] !== n && this.resetGroupPropertiesForFlags(t),
                this.register({
                    $groups: we(we({}, r), {}, {
                        [t]: n
                    })
                }),
                i && (this.capture("$groupidentify", {
                    $group_type: t,
                    $group_key: n,
                    $group_set: i
                }),
                this.setGroupPropertiesForFlags({
                    [t]: i
                })),
                r[t] === n || i || this.reloadFeatureFlags()
            }
        } else
            tt.error("posthog.group requires a group type and group key")
    }
    resetGroups() {
        this.register({
            $groups: {}
        }),
        this.resetGroupPropertiesForFlags(),
        this.reloadFeatureFlags()
    }
    setPersonPropertiesForFlags(t) {
        var n = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
        this.featureFlags.setPersonPropertiesForFlags(t, n)
    }
    resetPersonPropertiesForFlags() {
        this.featureFlags.resetPersonPropertiesForFlags()
    }
    setGroupPropertiesForFlags(t) {
        var n = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
        this._requirePersonProcessing("posthog.setGroupPropertiesForFlags") && this.featureFlags.setGroupPropertiesForFlags(t, n)
    }
    resetGroupPropertiesForFlags(t) {
        this.featureFlags.resetGroupPropertiesForFlags(t)
    }
    reset(t) {
        var n, i, r, s, o;
        if (tt.info("reset"),
        !this.__loaded)
            return tt.uninitializedWarning("posthog.reset");
        var a = this.get_property("$device_id");
        if (this.consent.reset(),
        (n = this.persistence) === null || n === void 0 || n.clear(),
        (i = this.sessionPersistence) === null || i === void 0 || i.clear(),
        (r = this.surveys) === null || r === void 0 || r.reset(),
        (s = this.persistence) === null || s === void 0 || s.set_property(Ka, "anonymous"),
        (o = this.sessionManager) === null || o === void 0 || o.resetSessionId(),
        this.config.__preview_experimental_cookieless_mode)
            this.register_once({
                distinct_id: NT,
                $device_id: null
            }, "");
        else {
            var c = this.config.get_device_id(tl());
            this.register_once({
                distinct_id: c,
                $device_id: t ? c : a
            }, "")
        }
    }
    get_distinct_id() {
        return this.get_property("distinct_id")
    }
    getGroups() {
        return this.get_property("$groups") || {}
    }
    get_session_id() {
        var t, n;
        return (t = (n = this.sessionManager) === null || n === void 0 ? void 0 : n.checkAndGetSessionAndWindowId(!0).sessionId) !== null && t !== void 0 ? t : ""
    }
    get_session_replay_url(t) {
        if (!this.sessionManager)
            return "";
        var {sessionId: n, sessionStartTimestamp: i} = this.sessionManager.checkAndGetSessionAndWindowId(!0)
          , r = this.requestRouter.endpointFor("ui", "/project/".concat(this.config.token, "/replay/").concat(n));
        if (t != null && t.withTimestamp && i) {
            var s, o = (s = t.timestampLookBack) !== null && s !== void 0 ? s : 10;
            if (!i)
                return r;
            var a = Math.max(Math.floor((new Date().getTime() - i) / 1e3) - o, 0);
            r += "?t=".concat(a)
        }
        return r
    }
    alias(t, n) {
        return t === this.get_property(CO) ? (tt.critical("Attempting to create alias for existing People user - aborting."),
        -2) : this._requirePersonProcessing("posthog.alias") ? (Ze(n) && (n = this.get_distinct_id()),
        t !== n ? (this._register_single(z1, t),
        this.capture("$create_alias", {
            alias: t,
            distinct_id: n
        })) : (tt.warn("alias matches current distinct_id - skipping api call."),
        this.identify(t),
        -1)) : void 0
    }
    set_config(t) {
        var n, i, r, s, o = we({}, this.config);
        zn(t) && (Nr(this.config, mO(t)),
        (n = this.persistence) === null || n === void 0 || n.update_config(this.config, o),
        this.sessionPersistence = this.config.persistence === "sessionStorage" || this.config.persistence === "memory" ? this.persistence : new Z1(we(we({}, this.config), {}, {
            persistence: "sessionStorage"
        })),
        Si.is_supported() && Si.get("ph_debug") === "true" && (this.config.debug = !0),
        this.config.debug && (Ja.DEBUG = !0,
        tt.info("set_config", {
            config: t,
            oldConfig: o,
            newConfig: we({}, this.config)
        })),
        (i = this.sessionRecording) === null || i === void 0 || i.startIfEnabledOrStop(),
        (r = this.autocapture) === null || r === void 0 || r.startIfEnabled(),
        (s = this.heatmaps) === null || s === void 0 || s.startIfEnabled(),
        this.surveys.loadIfEnabled(),
        this._sync_opt_out_with_persistence())
    }
    startSessionRecording(t) {
        var n = t === !0
          , i = {
            sampling: n || !(t == null || !t.sampling),
            linked_flag: n || !(t == null || !t.linked_flag),
            url_trigger: n || !(t == null || !t.url_trigger),
            event_trigger: n || !(t == null || !t.event_trigger)
        };
        if (Object.values(i).some(Boolean)) {
            var r, s, o, a, c;
            (r = this.sessionManager) === null || r === void 0 || r.checkAndGetSessionAndWindowId(),
            i.sampling && ((s = this.sessionRecording) === null || s === void 0 || s.overrideSampling()),
            i.linked_flag && ((o = this.sessionRecording) === null || o === void 0 || o.overrideLinkedFlag()),
            i.url_trigger && ((a = this.sessionRecording) === null || a === void 0 || a.overrideTrigger("url")),
            i.event_trigger && ((c = this.sessionRecording) === null || c === void 0 || c.overrideTrigger("event"))
        }
        this.set_config({
            disable_session_recording: !1
        })
    }
    stopSessionRecording() {
        this.set_config({
            disable_session_recording: !0
        })
    }
    sessionRecordingStarted() {
        var t;
        return !((t = this.sessionRecording) === null || t === void 0 || !t.started)
    }
    captureException(t, n) {
        var i, r = new Error("PostHog syntheticException"), s = Gs((i = _t.__PosthogExtensions__) === null || i === void 0 ? void 0 : i.parseErrorAsProperties) ? _t.__PosthogExtensions__.parseErrorAsProperties([t.message, void 0, void 0, void 0, t], {
            syntheticException: r
        }) : we({
            $exception_level: "error",
            $exception_list: [{
                type: t.name,
                value: t.message,
                mechanism: {
                    handled: !0,
                    synthetic: !1
                }
            }]
        }, n);
        this.exceptions.sendExceptionEvent(s)
    }
    loadToolbar(t) {
        return this.toolbar.loadToolbar(t)
    }
    get_property(t) {
        var n;
        return (n = this.persistence) === null || n === void 0 ? void 0 : n.props[t]
    }
    getSessionProperty(t) {
        var n;
        return (n = this.sessionPersistence) === null || n === void 0 ? void 0 : n.props[t]
    }
    toString() {
        var t, n = (t = this.config.name) !== null && t !== void 0 ? t : ch;
        return n !== ch && (n = ch + "." + n),
        n
    }
    _isIdentified() {
        var t, n;
        return ((t = this.persistence) === null || t === void 0 ? void 0 : t.get_property(Ka)) === "identified" || ((n = this.sessionPersistence) === null || n === void 0 ? void 0 : n.get_property(Ka)) === "identified"
    }
    _hasPersonProcessing() {
        var t, n, i, r;
        return !(this.config.person_profiles === "never" || this.config.person_profiles === "identified_only" && !this._isIdentified() && lh(this.getGroups()) && ((t = this.persistence) === null || t === void 0 || (n = t.props) === null || n === void 0 || !n[z1]) && ((i = this.persistence) === null || i === void 0 || (r = i.props) === null || r === void 0 || !r[up]))
    }
    _shouldCapturePageleave() {
        return this.config.capture_pageleave === !0 || this.config.capture_pageleave === "if_capture_pageview" && this.config.capture_pageview
    }
    createPersonProfile() {
        this._hasPersonProcessing() || this._requirePersonProcessing("posthog.createPersonProfile") && this.setPersonProperties({}, {})
    }
    _requirePersonProcessing(t) {
        return this.config.person_profiles === "never" ? (tt.error(t + ' was called, but process_person is set to "never". This call will be ignored.'),
        !1) : (this._register_single(up, !0),
        !0)
    }
    _sync_opt_out_with_persistence() {
        var t, n, i, r, s = this.consent.isOptedOut(), o = this.config.opt_out_persistence_by_default, a = this.config.disable_persistence || s && !!o;
        ((t = this.persistence) === null || t === void 0 ? void 0 : t.disabled) !== a && ((i = this.persistence) === null || i === void 0 || i.set_disabled(a)),
        ((n = this.sessionPersistence) === null || n === void 0 ? void 0 : n.disabled) !== a && ((r = this.sessionPersistence) === null || r === void 0 || r.set_disabled(a))
    }
    opt_in_capturing(t) {
        var n;
        this.consent.optInOut(!0),
        this._sync_opt_out_with_persistence(),
        (Ze(t?.captureEventName) || t != null && t.captureEventName) && this.capture((n = t?.captureEventName) !== null && n !== void 0 ? n : "$opt_in", t?.captureProperties, {
            send_instantly: !0
        }),
        this.config.capture_pageview && this._captureInitialPageview()
    }
    opt_out_capturing() {
        this.consent.optInOut(!1),
        this._sync_opt_out_with_persistence()
    }
    has_opted_in_capturing() {
        return this.consent.isOptedIn()
    }
    has_opted_out_capturing() {
        return this.consent.isOptedOut()
    }
    clear_opt_in_out_capturing() {
        this.consent.reset(),
        this._sync_opt_out_with_persistence()
    }
    _is_bot() {
        return Cs ? vM(Cs, this.config.custom_blocked_useragents) : void 0
    }
    _captureInitialPageview() {
        qe && !this._initialPageviewCaptured && (this._initialPageviewCaptured = !0,
        this.capture("$pageview", {
            title: qe.title
        }, {
            send_instantly: !0
        }))
    }
    debug(t) {
        t === !1 ? (Y?.console.log("You've disabled debug mode."),
        localStorage && localStorage.removeItem("ph_debug"),
        this.set_config({
            debug: !1
        })) : (Y?.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),
        localStorage && localStorage.setItem("ph_debug", "true"),
        this.set_config({
            debug: !0
        }))
    }
    _runBeforeSend(t) {
        if (gn(this.config.before_send))
            return t;
        var n = oi(this.config.before_send) ? this.config.before_send : [this.config.before_send]
          , i = t;
        for (var r of n) {
            if (i = r(i),
            gn(i)) {
                var s = "Event '".concat(t.event, "' was rejected in beforeSend function");
                return Vz(t.event) ? tt.warn("".concat(s, ". This can cause unexpected behavior.")) : tt.info(s),
                null
            }
            i.properties && !lh(i.properties) || tt.warn("Event '".concat(t.event, "' has no properties after beforeSend function, this is likely an error."))
        }
        return i
    }
}
;
(function(e, t) {
    for (var n = 0; n < t.length; n++)
        e.prototype[t[n]] = Wz(e.prototype[t[n]])
}
)(Cp, ["identify"]);
var vO, S8 = (vO = n5[ch] = new Cp,
function() {
    function e() {
        e.done || (e.done = !0,
        _M = !1,
        un(n5, function(t) {
            t._dom_loaded()
        }))
    }
    qe != null && qe.addEventListener && (qe.readyState === "complete" ? e() : qe.addEventListener("DOMContentLoaded", e, !1)),
    Y && Za(Y, "load", e, !0)
}(),
vO);
var sl = ( () => {
    let t = class t {
        constructor() {
            this.environment = z(bn),
            this.environment.postHog.active && S8.init(this.environment.postHog._p, {
                api_host: this.environment.postHog.url
            })
        }
        urlCategoryExtractor(i) {
            i = i.replace(this.environment.setting.mtsPath, "");
            let r, s = "", o = "", a = Object.values(Nd);
            if (a.some(c => i.includes(c))) {
                s = a.find(l => i.includes(l)),
                r = a.find(l => i.includes(l)).split("/")[0];
                let c = i.replace(s, "").split("?");
                o = c.length ? c[0] : "",
                o.includes("/IR") && (o = o.split("/IR")[0])
            }
            return (!r || !o) && (i.includes("/") ? (r = i.split("/")[0],
            o = i.split("/")[1]) : (r = i,
            o = i)),
            {
                module: r,
                requestName: o
            }
        }
        sendApiRequestType(i, r) {
            try {
                if (this.environment.env === Yt.PROD) {
                    r.latency >= 1 && (r.latency = Math.round(r.latency));
                    let s = this.urlCategoryExtractor(i);
                    if (s.requestName.includes("server-time"))
                        return;
                    gtag("event", "request", C(C({}, s), r)),
                    this.environment.postHog.active && S8.capture("request", C(C({}, s), r))
                }
            } catch (s) {
                console.log(s)
            }
        }
        sendGtagEvent(i, r, s) {
            try {
                this.environment.env === Yt.PROD && (r ? gtag("event", i, {
                    eventKey: s
                }) : gtag("event", i))
            } catch (o) {
                console.log(o)
            }
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var Jpe = ( () => {
    let t = class t {
        constructor(i, r) {
            this.authService = i,
            this.gtagService = r,
            this.startupService = z(Sh)
        }
        canActivate(i, r) {
            return this.authService.getUser.then( () => this.authService.isLoggedIn() ? !0 : (this.gtagService.sendGtagEvent("redirect-to-account"),
            localStorage.setItem("redirect-after-login", r.url),
            this.authService.startAuthentication(),
            !1))
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(Ir),xe(sl))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var l4e = ( () => {
    let t = class t {
        constructor() {
            this.indicatorStatusSubject = new lt,
            this.indicatorStatus$ = this.indicatorStatusSubject.asObservable(),
            this.closeIndicatorSubject = new lt,
            this.closeIndicator$ = this.closeIndicatorSubject.asObservable()
        }
        changeIndicatorStatus(i) {
            this.indicatorStatusSubject.next(i)
        }
        closeIndicator() {
            this.closeIndicatorSubject.next(!0)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var l5 = "Service workers are disabled or not supported by this browser";
function rK(e) {
    return I0( () => Hr(new Error(e)))
}
var bh = class {
    serviceWorker;
    worker;
    registration;
    events;
    constructor(t) {
        if (this.serviceWorker = t,
        !t)
            this.worker = this.events = this.registration = rK(l5);
        else {
            let i = sn(t, "controllerchange").pipe(We( () => t.controller))
              , r = I0( () => Be(t.controller))
              , s = A0(r, i);
            this.worker = s.pipe(mt(u => !!u)),
            this.registration = this.worker.pipe(Vt( () => t.getRegistration()));
            let l = sn(t, "message").pipe(We(u => u.data)).pipe(mt(u => u && u.type)).pipe(rv());
            l.connect(),
            this.events = l
        }
    }
    postMessage(t, n) {
        return this.worker.pipe(Lt(1), He(i => {
            i.postMessage(C({
                action: t
            }, n))
        }
        )).toPromise().then( () => {}
        )
    }
    postMessageWithOperation(t, n, i) {
        let r = this.waitForOperationCompleted(i)
          , s = this.postMessage(t, n);
        return Promise.all([s, r]).then( ([,o]) => o)
    }
    generateNonce() {
        return Math.round(Math.random() * 1e7)
    }
    eventsOfType(t) {
        let n;
        return typeof t == "string" ? n = i => i.type === t : n = i => t.includes(i.type),
        this.events.pipe(mt(n))
    }
    nextEventOfType(t) {
        return this.eventsOfType(t).pipe(Lt(1))
    }
    waitForOperationCompleted(t) {
        return this.eventsOfType("OPERATION_COMPLETED").pipe(mt(n => n.nonce === t), Lt(1), We(n => {
            if (n.result !== void 0)
                return n.result;
            throw new Error(n.error)
        }
        )).toPromise()
    }
    get isEnabled() {
        return !!this.serviceWorker
    }
}
  , Pp = ( () => {
    class e {
        sw;
        messages;
        notificationClicks;
        subscription;
        get isEnabled() {
            return this.sw.isEnabled
        }
        pushManager = null;
        subscriptionChanges = new lt;
        constructor(n) {
            if (this.sw = n,
            !n.isEnabled) {
                this.messages = ul,
                this.notificationClicks = ul,
                this.subscription = ul;
                return
            }
            this.messages = this.sw.eventsOfType("PUSH").pipe(We(r => r.data)),
            this.notificationClicks = this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(We(r => r.data)),
            this.pushManager = this.sw.registration.pipe(We(r => r.pushManager));
            let i = this.pushManager.pipe(Vt(r => r.getSubscription()));
            this.subscription = nc(i, this.subscriptionChanges)
        }
        requestSubscription(n) {
            if (!this.sw.isEnabled || this.pushManager === null)
                return Promise.reject(new Error(l5));
            let i = {
                userVisibleOnly: !0
            }
              , r = this.decodeBase64(n.serverPublicKey.replace(/_/g, "/").replace(/-/g, "+"))
              , s = new Uint8Array(new ArrayBuffer(r.length));
            for (let o = 0; o < r.length; o++)
                s[o] = r.charCodeAt(o);
            return i.applicationServerKey = s,
            this.pushManager.pipe(Vt(o => o.subscribe(i)), Lt(1)).toPromise().then(o => (this.subscriptionChanges.next(o),
            o))
        }
        unsubscribe() {
            if (!this.sw.isEnabled)
                return Promise.reject(new Error(l5));
            let n = i => {
                if (i === null)
                    throw new Error("Not subscribed to push notifications.");
                return i.unsubscribe().then(r => {
                    if (!r)
                        throw new Error("Unsubscribe failed!");
                    this.subscriptionChanges.next(null)
                }
                )
            }
            ;
            return this.subscription.pipe(Lt(1), Vt(n)).toPromise()
        }
        decodeBase64(n) {
            return atob(n)
        }
        static \u0275fac = function(i) {
            return new (i || e)(xe(bh))
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac
        })
    }
    return e
}
)()
  , kp = ( () => {
    class e {
        sw;
        versionUpdates;
        unrecoverable;
        get isEnabled() {
            return this.sw.isEnabled
        }
        constructor(n) {
            if (this.sw = n,
            !n.isEnabled) {
                this.versionUpdates = ul,
                this.unrecoverable = ul;
                return
            }
            this.versionUpdates = this.sw.eventsOfType(["VERSION_DETECTED", "VERSION_INSTALLATION_FAILED", "VERSION_READY", "NO_NEW_VERSION_DETECTED"]),
            this.unrecoverable = this.sw.eventsOfType("UNRECOVERABLE_STATE")
        }
        checkForUpdate() {
            if (!this.sw.isEnabled)
                return Promise.reject(new Error(l5));
            let n = this.sw.generateNonce();
            return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES", {
                nonce: n
            }, n)
        }
        activateUpdate() {
            if (!this.sw.isEnabled)
                return Promise.reject(new Error(l5));
            let n = this.sw.generateNonce();
            return this.sw.postMessageWithOperation("ACTIVATE_UPDATE", {
                nonce: n
            }, n)
        }
        static \u0275fac = function(i) {
            return new (i || e)(xe(bh))
        }
        ;
        static \u0275prov = re({
            token: e,
            factory: e.\u0275fac
        })
    }
    return e
}
)();
var SM = new Je("");
function sK(e, t, n, i) {
    return () => {
        if (!(pc(i) && "serviceWorker"in navigator && n.enabled !== !1))
            return;
        let r = e.get(Rn)
          , s = e.get(ua);
        r.runOutsideAngular( () => {
            let a = navigator.serviceWorker
              , c = () => a.controller?.postMessage({
                action: "INITIALIZE"
            });
            a.addEventListener("controllerchange", c),
            s.onDestroy( () => {
                a.removeEventListener("controllerchange", c)
            }
            )
        }
        );
        let o;
        if (typeof n.registrationStrategy == "function")
            o = n.registrationStrategy();
        else {
            let[a,...c] = (n.registrationStrategy || "registerWhenStable:30000").split(":");
            switch (a) {
            case "registerImmediately":
                o = Be(null);
                break;
            case "registerWithDelay":
                o = bM(+c[0] || 0);
                break;
            case "registerWhenStable":
                let l = Yn(e.get(ua).whenStable());
                o = c[0] ? nc(l, bM(+c[0])) : l;
                break;
            default:
                throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)
            }
        }
        r.runOutsideAngular( () => o.pipe(Lt(1)).subscribe( () => navigator.serviceWorker.register(t, {
            scope: n.scope
        }).catch(a => console.error("Service worker registration failed with:", a))))
    }
}
function bM(e) {
    return Be(null).pipe(ss(e))
}
function oK(e, t) {
    return new bh(pc(t) && e.enabled !== !1 ? navigator.serviceWorker : void 0)
}
var c5 = class {
    enabled;
    scope;
    registrationStrategy
}
;
function aK(e, t={}) {
    return L0([Pp, kp, {
        provide: SM,
        useValue: e
    }, {
        provide: c5,
        useValue: t
    }, {
        provide: bh,
        useFactory: oK,
        deps: [c5, qs]
    }, {
        provide: Ah,
        useFactory: sK,
        deps: [On, SM, c5, qs],
        multi: !0
    }])
}
var v4e = ( () => {
    class e {
        static register(n, i={}) {
            return {
                ngModule: e,
                providers: [aK(n, i)]
            }
        }
        static \u0275fac = function(i) {
            return new (i || e)
        }
        ;
        static \u0275mod = nr({
            type: e
        });
        static \u0275inj = tr({
            providers: [Pp, kp]
        })
    }
    return e
}
)();
var w4e = ( () => {
    let t = class t {
        constructor(i, r, s, o) {
            this.update = r,
            this.notification = s,
            this.http = o,
            this.newVersionSubject = new Ne(!1),
            this.newVersionAvailable$ = this.newVersionSubject.asObservable(),
            i.subscription.subscribe(),
            i.messages.subscribe()
        }
        subscribeToUpdateApp() {
            this.update.versionUpdates.pipe(mt(i => i.type === "VERSION_READY"), Vt(i => this.checkAppConfig(i))).subscribe()
        }
        checkAppConfig(i) {
            return this.http.get("./app-config.json").pipe(He(r => {
                r.showNewVersionNotify && (this.handleNotification(),
                this.callForNewVersion()),
                r.reloadWhenNewVersionUploaded && this.reloadApplication()
            }
            ), on( () => Be({})))
        }
        handleNotification() {
            let i = "\u0646\u0633\u062E\u0647 \u062C\u062F\u06CC\u062F \u062F\u0631 \u062F\u0633\u062A\u0631\u0633 \u0627\u0633\u062A";
            this.notification.alert(i, ti.warning, !1, () => location.reload(), "\u0628\u0647\u200C\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC"),
            this.notification.notif({
                title: "\u0627\u06CC\u0632\u06CC \u062A\u0631\u06CC\u062F\u0631",
                body: i,
                defaultUrl: `/${Ei.MENU_ROUTE}`
            })
        }
        reloadApplication() {
            window.location.reload()
        }
        callForNewVersion() {
            this.newVersionSubject.next(!0)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(Pp),xe(kp),xe(Ls),xe(r3))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var F4e = ( () => {
    let t = class t extends fn {
        constructor() {
            super(),
            this.scriptLoaderService = z($9),
            this.accountService = z(go),
            this.userService = z($r),
            this.notifyService = z(Ls),
            this.isCreatedRocketSubject = new Ne(!1)
        }
        get rocketScriptLoaded() {
            return this.scriptLoaderService.scripts[ah] ? this.scriptLoaderService.scripts[ah].loaded : !1
        }
        subscribeToLoadRocket() {
            this.environment.chatBot.isActive && (this.loadRocket(),
            this.scriptLoaderService.rocketLoaded$.pipe(He(i => {
                i && this.subscribeRocketToUserCheck()
            }
            )).subscribe())
        }
        loadRocket() {
            this.scriptLoaderService.load(...hT)
        }
        loadJquery() {}
        subscribeRocketToUserCheck() {
            this.userService.userChecked$.pipe(He(i => {
                i && this.configRocket()
            }
            )).subscribe()
        }
        configRocket() {
            this.accountService?.userAccountInfo?.value?.customerIsin && (this.userId = this.accountService?.userAccountInfo?.value?.pk,
            this.isCreatedRocketSubject.value || (this.configRocketSettings(this.environment.chatBot.url, this.userId),
            this.isCreatedRocketSubject.next(!0)))
        }
        loadRocketByRoute() {
            this.isCreatedRocketSubject.subscribe(i => {
                i && this.runInit()
            }
            )
        }
        runInit() {
            window.RocketChat(function() {
                this.restore()
            })
        }
        rocket() {
            if (!this.environment.chatBot.isActive) {
                this.notifyService.alert("\u062F\u0631 \u062D\u0627\u0644 \u062D\u0627\u0636\u0631 \u0627\u0645\u06A9\u0627\u0646 \u06AF\u0641\u062A\u06AF\u0648\u06CC \u0622\u0646\u0644\u0627\u06CC\u0646 \u0641\u0631\u0627\u0647\u0645 \u0646\u0645\u06CC\u200C\u0628\u0627\u0634\u062F\u060C \u062C\u0647\u062A \u067E\u0634\u062A\u06CC\u0628\u0627\u0646\u06CC \u0628\u0627 8700 \u062A\u0645\u0627\u0633 \u0628\u06AF\u06CC\u0631\u06CC\u062F", ti.warning);
                return
            }
            this.runInit()
        }
        configRocketSettings(i, r) {
            window.RocketChat = function(o) {
                window.RocketChat._.push(o)
            }
            ,
            window.RocketChat._ = [],
            window.RocketChat.url = i;
            let s = document.createElement("script");
            s.async = !0,
            s.src = `${i}/rocketchat-livechat.min.js?=${new Date().getTime()}`,
            document.getElementsByTagName("script")[0].parentNode.insertBefore(s, document.getElementsByTagName("script")[0]),
            window.RocketChat(function() {
                this.initialize({
                    guid: r
                })
            })
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var U4e = ( () => {
    let t = class t {
        preload(i, r) {
            return i.data && i.data.preload ? ci(5e3).pipe(Vt( () => r())) : Be(null)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var Sh = ( () => {
    let t = class t {
        get appSettingUrl() {
            return this.environment.setting.appSettingsUrl + "auth"
        }
        constructor(i) {
            this.environment = i,
            this.retryTimes = 100,
            this.previousSelectedUrls = [],
            this.authenticationType = aa.Primary
        }
        getApiEndpoints() {
            return this.getAuthenticationType().toPromise()
        }
        getAuthenticationType() {
            return this.authenticationType = aa.Primary,
            Be(null)
        }
        randomUrl(i) {
            let r = i.length;
            if (r == 0)
                return "";
            if (r == 1)
                return i[0];
            {
                let s = Math.floor(Math.random() * r);
                return i[s]
            }
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(bn))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)()
  , aa = function(e) {
    return e[e.Primary = 0] = "Primary",
    e[e.Secondary = 1] = "Secondary",
    e
}(aa || {});
var Ap = "tracker"
  , j4e = ( () => {
    let t = class t extends fn {
        get trackerUrl() {
            return this.environment.setting.appLogApiPath + "tracker"
        }
        constructor() {
            super(),
            this.readyToSave = !0,
            this.isTrackingActive = !1,
            this.timerValue = {},
            this.timeTracker = {},
            this.extraData = {},
            setInterval( () => {
                if (this.readyToSave) {
                    let i = JSON.parse(localStorage.getItem(Ap)) || [];
                    i.length > 0 && this.insertTrackData(i)
                }
            }
            , 18e4)
        }
        insertTrackData(i) {
            this.isTrackingActive && this.httpService.post(this.trackerUrl, {
                body: {
                    tracks: i
                }
            }).subscribe( () => {
                localStorage.removeItem(Ap)
            }
            )
        }
        counter(i, r, s) {
            if (!this.isTrackingActive)
                return;
            let o = {
                constantName: i,
                TrackingId: r,
                startDate: this.getDate(),
                endDate: this.getDate(),
                eventType: b8.Counter,
                value: 1,
                extraData: JSON.stringify(s)
            };
            this.setLocalStorage(o).subscribe()
        }
        startTimer(i, r, s) {
            this.isTrackingActive && (this.timerValue[i + r] = 0,
            this.extraData[i + r] = s,
            this.timeTracker[i + r] = setInterval( () => {
                this.timerValue[i + r]++
            }
            , 1e3))
        }
        endTimer(i, r) {
            if (this.readyToSave = !1,
            !this.isTrackingActive || !this.timeTracker[i + r])
                return;
            clearInterval(this.timeTracker[i + r]);
            let s = {
                constantName: i,
                TrackingId: r,
                startDate: this.getDate(),
                endDate: this.getDate(),
                eventType: b8.Timer,
                value: this.timerValue[i + r],
                extraData: JSON.stringify(this.extraData[i + r])
            };
            this.setLocalStorage(s).subscribe(),
            this.readyToSave = !0
        }
        setLocalStorage(i) {
            let r = JSON.parse(localStorage.getItem(Ap)) || []
              , s = r.findIndex(o => o.constantName == i.constantName && o.TrackingId == i.TrackingId && o.eventType == i.eventType);
            return s >= 0 ? (r[s].value += i.value,
            r[s].endDate = this.getDate()) : r.push(i),
            localStorage.setItem(Ap, JSON.stringify(r)),
            Be(!0)
        }
        getDate(i) {
            return i ? new Date(i.getMilliseconds() - i.getTimezoneOffset() * 6e4).toISOString().slice(0, -1) : new Date(Date.now() - new Date().getTimezoneOffset() * 6e4).toISOString().slice(0, -1)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)()
  , b8 = function(e) {
    return e[e.Counter = 1] = "Counter",
    e[e.Timer = 2] = "Timer",
    e
}(b8 || {})
  , lK = function(e) {
    return e.symbol = "symbol",
    e
}(lK || {});
var Ip = g5(FP());
var Rp = ( () => {
    let t = class t extends fn {
        constructor() {
            super(),
            this.initialTime = new Date().toLocaleTimeString([], {
                hour: "2-digit",
                minute: "2-digit",
                second: "2-digit",
                hour12: !1
            }),
            this.serverTime$ = new Ne(null),
            this.isMarketDaySub = new Ne(!0),
            this.serverTimeSubject = new Ne(this.initialTime),
            this.serverTimeObs$ = this.serverTimeSubject.asObservable(),
            this.isMarketOpenSub = new Ne(null),
            this.isMarketOpen$ = this.isMarketOpenSub.asObservable(),
            this.showMarketOpenTimeSub = new Ne(null),
            this.serverDateSub = new Ne(new Date),
            this.serverDateObs$ = this.serverDateSub.asObservable(),
            this.setTime()
        }
        setTime() {
            this.clockSubscription = this.addSeconds((0,
            Ip.default)()),
            this.getServerTime(),
            this.getStartSession(),
            ll(6e4).pipe(He( () => {
                this.getServerTime()
            }
            )).subscribe(),
            ll(18e5).pipe(He( () => {
                this.isMarketDaySub.value === !1 && this.getStartSession()
            }
            )).subscribe()
        }
        getServerTime() {
            let i = new Date().valueOf();
            this.httpService.get(`${this.mtsPath + this.apiUrls.easy}account/server-time/${i}`).subscribe(r => {
                let s = new Date
                  , o = s.getTimezoneOffset() * 6e4
                  , a = r.diff
                  , c = r.serverTimestamp
                  , l = s.valueOf() - c
                  , u = (a - s.valueOf() + i - l) / 2
                  , h = yr.utcToTehran(c.valueOf() + (l + u), o);
                this.clockSubscription && this.clockSubscription.unsubscribe(),
                this.serverDateSub.next(new Date(h));
                let d = (0,
                Ip.default)(h).locale("en").format("HH:mm:ss");
                this.serverTimeSubject.next(d),
                this.serverTime$.next(new Date(h)),
                this.clockSubscription = this.addSeconds((0,
                Ip.default)(h))
            }
            )
        }
        setIsMarketOpen(i) {
            let r = i.split(":")
              , s = +(r[0] + r[1])
              , o = s >= zS && s < yg
              , a = s >= XS && s < yg;
            this.isMarketDaySub.value !== null && (this.isMarketOpenSub.next(o && this.isMarketDaySub.value),
            this.showMarketOpenTimeSub.next(a && this.isMarketDaySub.value))
        }
        addSeconds(i) {
            return ll(1e3).pipe(We( () => {
                this.setIsMarketOpen(i.locale("en").format("HH:mm:ss")),
                this.serverTimeSubject.next(i.add(1, "seconds").locale("en").format("HH:mm:ss"))
            }
            )).subscribe()
        }
        getStartSession() {
            this.httpService.get(`${this.mtsPath + this.apiUrls.easy}startsession`).subscribe(i => {
                new Date(i.serverTime).setHours(0, 0, 0, 0) === new Date(i.startSessionTimeStamp).setHours(0, 0, 0, 0) ? this.isMarketDaySub.next(!0) : this.isMarketDaySub.next(!1)
            }
            )
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
function uK(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div")(1, "div", 4),
        me(2, "svg-icon", 5),
        W(),
        H(3, "div", 6)(4, "span"),
        oe(5, "\u0634\u0645\u0627 \u062F\u0633\u062A\u0631\u0633\u06CC \u0628\u0647 \u0627\u0646\u062C\u0627\u0645 \u0645\u0639\u0627\u0645\u0644\u0647 \u0627\u0632 \u0637\u0631\u06CC\u0642 \u0627\u06CC\u0632\u06CC \u062A\u0631\u06CC\u062F\u0631 \u0631\u0627 \u0646\u062F\u0627\u0631\u06CC\u062F."),
        W()(),
        H(6, "ul", 7)(7, "li", 8),
        Qe("click", function() {
            yt(n);
            let r = Te(2);
            return St(r.onRedirectToOrbis())
        }),
        me(8, "svg-icon", 9),
        H(9, "span", 3),
        oe(10, " \u0648\u0631\u0648\u062F \u0628\u0647 \u0633\u0627\u0645\u0627\u0646\u0647 \u0622\u0646\u0644\u0627\u06CC\u0646"),
        W()(),
        H(11, "li", 8),
        Qe("click", function() {
            yt(n);
            let r = Te(2);
            return St(r.onGuestUserClick())
        }),
        me(12, "svg-icon", 9),
        H(13, "span", 3),
        oe(14, " \u0648\u0631\u0648\u062F \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u06A9\u0627\u0631\u0628\u0631 \u0645\u06CC\u0647\u0645\u0627\u0646"),
        W()(),
        H(15, "li", 10),
        Qe("click", function() {
            yt(n);
            let r = Te(2);
            return St(r.onLogout())
        }),
        me(16, "svg-icon", 11),
        H(17, "span", 3),
        oe(18, "\u062E\u0631\u0648\u062C \u0627\u0632 \u0633\u0627\u0645\u0627\u0646\u0647"),
        W()()()()
    }
    if (e & 2) {
        let n = Te(2);
        Q(2),
        ye("iconName", n.icons.InfoBox),
        Q(6),
        ye("iconName", n.icons.Link),
        Q(4),
        ye("iconName", n.icons.Link),
        Q(4),
        ye("iconName", n.icons.Logout)
    }
}
function hK(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div")(1, "div", 4),
        me(2, "svg-icon", 5),
        W(),
        H(3, "div", 6)(4, "span"),
        oe(5, "\u062E\u0637\u0627\u06CC\u06CC \u062F\u0631 \u0647\u0646\u06AF\u0627\u0645 \u0648\u0631\u0648\u062F \u0631\u062E \u062F\u0627\u062F\u0647 \u0627\u0633\u062A."),
        W()(),
        H(6, "p", 12)(7, "button", 13),
        Qe("click", function() {
            yt(n);
            let r = Te(2);
            return St(r.onRedirectToLoginPage())
        }),
        oe(8, " \u0648\u0631\u0648\u062F \u0645\u062C\u062F\u062F \u0628\u0647 \u0633\u0627\u0645\u0627\u0646\u0647 "),
        W()()()
    }
    if (e & 2) {
        let n = Te(2);
        Q(2),
        ye("iconName", n.icons.InfoBox)
    }
}
function dK(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div")(1, "div", 4),
        me(2, "svg-icon", 5),
        W(),
        H(3, "div", 6)(4, "span"),
        oe(5, "\u062A\u0627\u0631\u06CC\u062E \u0633\u06CC\u0633\u062A\u0645 \u062E\u0648\u062F \u0631\u0627 \u0627\u0635\u0644\u0627\u062D \u06A9\u0646\u06CC\u062F."),
        W()(),
        H(6, "p", 12)(7, "button", 13),
        Qe("click", function() {
            yt(n);
            let r = Te(2);
            return St(r.onRedirectToLoginPage())
        }),
        oe(8, " \u0648\u0631\u0648\u062F \u0645\u062C\u062F\u062F \u0628\u0647 \u0633\u0627\u0645\u0627\u0646\u0647 "),
        W()()()
    }
    if (e & 2) {
        let n = Te(2);
        Q(2),
        ye("iconName", n.icons.InfoBox)
    }
}
function fK(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div")(1, "div", 4),
        me(2, "svg-icon", 5),
        W(),
        H(3, "div", 6)(4, "span"),
        oe(5, "\u0634\u0645\u0627 \u0627\u0632 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC \u062E\u0648\u062F \u062E\u0627\u0631\u062C \u0634\u062F\u0647\u200C\u0627\u06CC\u062F."),
        W()(),
        H(6, "p", 12)(7, "button", 13),
        Qe("click", function() {
            yt(n);
            let r = Te(2);
            return St(r.onRedirectToLoginPage())
        }),
        oe(8, " \u0648\u0631\u0648\u062F \u0645\u062C\u062F\u062F \u0628\u0647 \u0633\u0627\u0645\u0627\u0646\u0647 "),
        W()()()
    }
    if (e & 2) {
        let n = Te(2);
        Q(2),
        ye("iconName", n.icons.InfoBox)
    }
}
function pK(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div")(1, "div", 4),
        me(2, "svg-icon", 5),
        W(),
        H(3, "div", 6)(4, "span"),
        oe(5, "\u0627\u0641\u062A\u062A\u0627\u062D \u062D\u0633\u0627\u0628 \u0634\u0645\u0627 \u062A\u06A9\u0645\u06CC\u0644 \u0646\u0634\u062F\u0647 \u0627\u0633\u062A"),
        W()(),
        H(6, "a", 14),
        me(7, "svg-icon", 11),
        H(8, "span", 3),
        oe(9, " \u062A\u06A9\u0645\u06CC\u0644 \u0627\u0641\u062A\u062A\u0627\u062D \u062D\u0633\u0627\u0628"),
        W()(),
        H(10, "ul", 7)(11, "li", 8),
        Qe("click", function() {
            yt(n);
            let r = Te(2);
            return St(r.onGuestUserClick())
        }),
        me(12, "svg-icon", 9),
        H(13, "span", 3),
        oe(14, " \u0648\u0631\u0648\u062F \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u06A9\u0627\u0631\u0628\u0631 \u0645\u06CC\u0647\u0645\u0627\u0646"),
        W()(),
        H(15, "li", 10),
        Qe("click", function() {
            yt(n);
            let r = Te(2);
            return St(r.onLogout())
        }),
        me(16, "svg-icon", 11),
        H(17, "span", 3),
        oe(18, "\u062E\u0631\u0648\u062C \u0627\u0632 \u0633\u0627\u0645\u0627\u0646\u0647"),
        W()()()()
    }
    if (e & 2) {
        let n = Te(2);
        Q(2),
        ye("iconName", n.icons.InfoBox),
        Q(5),
        ye("iconName", n.icons.Link),
        Q(5),
        ye("iconName", n.icons.Link),
        Q(4),
        ye("iconName", n.icons.Logout)
    }
}
function gK(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div", 3)(1, "div", 4),
        me(2, "svg-icon", 5),
        W(),
        H(3, "div", 15),
        oe(4, "\u0627\u0637\u0644\u0627\u0639\u06CC\u0647!"),
        W(),
        H(5, "p", 16),
        oe(6, " \u0628\u0647 \u0627\u0637\u0644\u0627\u0639 \u0645\u06CC\u200C\u0631\u0633\u0627\u0646\u062F \u0628\u0631 \u0627\u0633\u0627\u0633 \u0645\u0642\u0631\u0631\u0627\u062A \u0633\u0627\u0632\u0645\u0627\u0646 \u0628\u0648\u0631\u0633 \u0648 \u0627\u0648\u0631\u0627\u0642 \u0628\u0647\u0627\u062F\u0627\u0631\u060C \u062C\u0647\u062A \u0627\u0645\u06A9\u0627\u0646 \u0627\u062F\u0627\u0645\u0647 \u0627\u0631\u0627\u0626\u0647 \u062E\u062F\u0645\u0627\u062A \u062F\u0631 \u0633\u0627\u0645\u0627\u0646\u0647\u200C\u0647\u0627\u06CC \u0645\u0639\u0627\u0645\u0644\u0627\u062A\u06CC \u0622\u0646\u0644\u0627\u06CC\u0646 \u06A9\u0627\u0631\u06AF\u0632\u0627\u0631\u06CC \u0645\u0641\u06CC\u062F\u060C \u0644\u0627\u0632\u0645 \u0627\u0633\u062A \u0646\u0633\u0628\u062A \u0628\u0647 \u0627\u0645\u0636\u0627\u06CC \u0642\u0631\u0627\u0631\u062F\u0627\u062F \u062C\u062F\u06CC\u062F \u0627\u0642\u062F\u0627\u0645 \u0646\u0645\u0627\u06CC\u06CC\u062F. "),
        W(),
        H(7, "p", 16),
        oe(8, " \u0647\u0645\u06A9\u0627\u0631\u0627\u0646 \u0645\u0627 \u0647\u0645\u0648\u0627\u0631\u0647 \u0622\u0645\u0627\u062F\u0647 \u067E\u0627\u0633\u062E\u06AF\u0648\u06CC\u06CC \u0628\u0647 \u0633\u0648\u0627\u0644\u0627\u062A \u0634\u0645\u0627 \u0647\u0633\u062A\u0646\u062F. "),
        me(9, "br"),
        oe(10, " \u062A\u0645\u0627\u0633 \u0628\u0627 \u067E\u0634\u062A\u06CC\u0628\u0627\u0646\u06CC: 0218700 "),
        W(),
        H(11, "ul", 17)(12, "li", 18)(13, "a", 19),
        me(14, "svg-icon", 11),
        H(15, "span", 3),
        oe(16, " \u0627\u0645\u0636\u0627 \u0642\u0631\u0627\u0631\u062F\u0627\u062F \u062C\u062F\u06CC\u062F (\u0628\u0647 \u0635\u0648\u0631\u062A \u0622\u0646\u0644\u0627\u06CC\u0646 \u0648 \u0631\u0627\u06CC\u06AF\u0627\u0646)"),
        W()()(),
        H(17, "li", 10),
        Qe("click", function() {
            yt(n);
            let r = Te(2);
            return St(r.onLogout())
        }),
        me(18, "svg-icon", 11),
        H(19, "span", 3),
        oe(20, "\u062E\u0631\u0648\u062C \u0627\u0632 \u0633\u0627\u0645\u0627\u0646\u0647"),
        W()()()()
    }
    if (e & 2) {
        let n = Te(2);
        Q(2),
        ye("iconName", n.icons.InfoBox),
        Q(12),
        ye("iconName", n.icons.Link),
        Q(4),
        ye("iconName", n.icons.Logout)
    }
}
function mK(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div")(1, "div", 20),
        me(2, "svg-icon", 21),
        H(3, "div", 22),
        oe(4, "\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0642\u0631\u0627\u0631\u06CC \u0627\u0631\u062A\u0628\u0627\u0637 \u0628\u0627 \u0633\u0631\u0648\u0631"),
        W(),
        H(5, "p", 23),
        oe(6, " \u062F\u0631 \u0628\u0631\u0642\u0631\u0627\u0631\u06CC \u0627\u0631\u062A\u0628\u0627\u0637 \u0628\u0627 \u0634\u0628\u06A9\u0647 \u0645\u0634\u06A9\u0644\u06CC \u067E\u06CC\u0634 \u0622\u0645\u062F\u0647\u060C "),
        me(7, "br"),
        oe(8, " \u0644\u0637\u0641\u0627 \u0627\u0632 \u0648\u062C\u0648\u062F \u062F\u0633\u062A\u0631\u0633\u06CC \u0628\u0647 \u0634\u0628\u06A9\u0647 \u0645\u0637\u0645\u0626\u0646 \u0648 \u0645\u062C\u062F\u062F\u0627\u064B \u062A\u0644\u0627\u0634 \u06A9\u0646\u06CC\u062F. "),
        W(),
        H(9, "button", 13),
        Qe("click", function() {
            yt(n);
            let r = Te(2);
            return St(r.onRedirectToLoginPage())
        }),
        oe(10, " \u062A\u0644\u0627\u0634 \u0645\u062C\u062F\u062F "),
        W()()()
    }
    if (e & 2) {
        let n = Te(2);
        Q(2),
        ye("iconName", n.icons.ConnectionOff)
    }
}
function vK(e, t) {
    if (e & 1 && (me(0, "div", 0),
    H(1, "div", 1)(2, "div", 2),
    at(3, uK, 19, 4, "div")(4, hK, 9, 1, "div")(5, dK, 9, 1, "div")(6, fK, 9, 1, "div")(7, pK, 19, 4, "div")(8, gK, 21, 3, "div", 3)(9, mK, 11, 1, "div"),
    W()()),
    e & 2) {
        let n = Te();
        Q(3),
        et(n.loginError() === n.LoginErrorEnum.Easy2User || n.loginError() === n.LoginErrorEnum.OnlineOptionUser ? 3 : -1),
        Q(),
        et(n.checkUserFailed() || n.loginError() === n.LoginErrorEnum.General ? 4 : -1),
        Q(),
        et(n.loginError() === n.LoginErrorEnum.DateError ? 5 : -1),
        Q(),
        et(n.loginError() === n.LoginErrorEnum.LoggedOutFromOtherTab ? 6 : -1),
        Q(),
        et(n.loginError() === n.LoginErrorEnum.GuestUser ? 7 : -1),
        Q(),
        et(n.loginError() === n.LoginErrorEnum.ForceContract2 ? 8 : -1),
        Q(),
        et(n.loginError() === n.LoginErrorEnum.InternetIsDisconnected ? 9 : -1)
    }
}
var c6e = ( () => {
    let t = class t {
        constructor(i, r, s, o, a) {
            this.authService = i,
            this.device = r,
            this.userService = s,
            this.modalService = o,
            this.environment = a,
            this.icons = Wt,
            this.checkUserFailed = wt(!1),
            this.loginError = wt(void 0),
            this.isMobile = Ee(!1),
            this.LoginErrorEnum = Sr
        }
        ngOnInit() {
            this.subscribeToCheckUserFailed()
        }
        subscribeToCheckUserFailed() {
            this.authService.checkUserFailed$.subscribe(i => {
                this.checkUserFailed.set(i)
            }
            ),
            this.authService.checkLoginSuccess$.pipe(sv(i => i === Sr.None)).subscribe(i => {
                this.loginError.set(i)
            }
            )
        }
        onGuestUserClick() {
            this.userService.isGuestUser = !0,
            this.loginError.set(null)
        }
        onRedirectToOrbis() {
            this.device.deviceType === _n.Mobile ? window.location.href = "https://mobile.mofidonline.com" : window.location.href = "https://mofidonline.com"
        }
        onLogout() {
            this.authService.logout()
        }
        onRedirectToLoginPage() {
            this.authService.redirectToLoginPage()
        }
        transferToOrbisConfirmHandler() {
            this.isMobile() ? window.open(this.environment.setting.easy2ReferralUrl + "/menu/agreement/200") : window.open(this.environment.setting.easy2ReferralUrl + "/agreement/200"),
            this.modalService.dismissAll()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(Mt(Ir),Mt(ur),Mt($r),Mt(Jc),Mt(bn))
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["connection-failed"]],
        inputs: {
            isMobile: [1, "isMobile"]
        },
        decls: 1,
        vars: 1,
        consts: [[1, "overlay", "active", 2, "right", "0", "z-index", "110"], [1, "position-fixed", "full-offset", "d-flex", "align-items-center", "justify-content-center", 2, "z-index", "111"], [1, "bg-principal", "m-4", "p-3", "p-lg-5", "rounded", "shadow-lg", "text-dark", "position-relative", "check-user-failed"], [1, "text-body"], [1, "text-center"], ["width", "48", "height", "48", 1, "text-global", 3, "iconName"], [1, "text-warning", "fs-6", "text-center", "fw-bold"], [1, "list-group-flush", "p-0", "mt-3"], [1, "list-group-item", "cup", "bg-transparent", "p-1", "d-flex", "align-items-center", "text-secondary", 3, "click"], ["width", "24", "height", "24", 1, "me-2", 3, "iconName"], [1, "list-group-item", "cup", "bg-transparent", "p-1", "d-flex", "align-items-center", "cup", "text-secondary", 3, "click"], ["width", "24", "height", "24", 1, "me-2", "text-secondary", 3, "iconName"], [1, "text-center", "mt-3"], ["type", "button", 1, "btn", "flex-grow-1", "btn-primary", 3, "click"], ["href", "https://reg.emofid.com/", "target", "_blank", 1, "list-group-item", "cup", "bg-transparent", "p-1", "d-flex", "align-items-center", "text-secondary"], [1, "text-global", "fs-6", "mb-2", "text-center", "fw-bold"], [1, "text-justify", "fw-medium"], [1, "list-group", "list-group-flush", "p-0", "mt-3"], [1, "list-group-item", "cup", "bg-transparent", "p-1", "d-flex", "align-items-center", "cup", "text-secondary"], ["href", "https://reg.emofid.com/", "target", "_blank", 1, "p-1", "d-flex", "align-items-center", "text-secondary"], [1, "d-flex", "flex-column", "align-items-center"], ["width", "", "height", "", 1, "display-3", "text-danger", "mb-3", 3, "iconName"], [1, "fs-5", "text-danger", "mb-2"], [1, "text-muted", "text-center"]],
        template: function(r, s) {
            r & 1 && at(0, vK, 10, 7),
            r & 2 && et(s.checkUserFailed() || s.loginError() ? 0 : -1)
        },
        dependencies: [Fn],
        styles: [`.check-user-failed[_ngcontent-%COMP%]{max-width:500px;min-width:330px}
/*# sourceMappingURL=connection-failed.component-U64YSYOL.css.map */`],
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var u5 = ( () => {
    let t = class t {
        constructor(i, r) {
            this.router = i,
            this.notificationService = r,
            this.defaultOverlay = {
                isShow: !1,
                component: null,
                option: {
                    componentName: null
                }
            },
            this.overlaySubject = new Ne(this.defaultOverlay),
            this.overlayState$ = this.overlaySubject.asObservable(),
            this.hasPushState = !1,
            this.routerObserver = xi(this.router.events.pipe(He(s => {
                (s instanceof Ro || s instanceof yc) && this.hasPushState && this.hideOverlay(!0)
            }
            ))),
            this.routerObserver$ = $v(this.routerObserver)
        }
        hideOverlay(i=!1) {
            this.notificationService.changeNotifyOrderFormState(!1),
            this.overlaySubject.next(ve(C({}, this.overlaySubject.value), {
                isShow: !1
            })),
            !i && this.hasPushState && history.go(-1),
            this.hasPushState = !1,
            wc( () => this.overlaySubject.next(this.defaultOverlay), 250)
        }
        showOverlay(i, r=!0) {
            i?.option?.overWrite && i?.option?.componentName === this.overlaySubject.value?.option?.componentName || (this.notificationService.changeNotifyOrderFormState(!0),
            this.overlaySubject.next(ve(C({}, i), {
                isShow: !0
            })),
            r && history.pushState(null, ""),
            this.hasPushState = r)
        }
        changeOverLayVisibility(i) {
            this.overlaySubject.next(ve(C({}, this.overlaySubject.value), {
                isShow: i
            }))
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(_r),xe(Ls))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var _K = ["input"]
  , C6e = ( () => {
    let t = class t {
        constructor() {
            this.inputRef = sc("input"),
            this.id = oc(""),
            this.focusInInit = Ee(!1),
            this.inputValue = Ee(""),
            this.formControlName = oc(""),
            this.step = Ee(1),
            this.roundOnStep = Ee(!1),
            this.min = Ee("0"),
            this.maxLength = Ee(),
            this.isDecimal = Ee(!1),
            this.readOnly = Ee(!1),
            this.class = Ee(""),
            this.style = Ee(""),
            this.inputMode = Ee(Dp.money),
            this.valueChangeEvent = Ee(""),
            this.placeholder = Ee(""),
            this.form = Ee(),
            this.negativeIsValid = Ee(!1),
            this.ngClass = Ee(""),
            this.valueChanged = $t(),
            this.inputChange = $t(),
            this.keyDown = $t(),
            this.focusIn = $t(),
            this.focusOut = $t(),
            this.initialized = $t(),
            this.touchEnd = $t(),
            this.mouseEvent = $t(),
            this.blurEvent = $t(),
            this.separator = wt(","),
            this.subs = wt([]),
            this.caretPosition = wt(-1),
            this.decimalPoint = ".",
            this.navigate = "-",
            this.allowKeys = ["\u06F0", "\u06F1", "\u06F2", "\u06F3", "\u06F4", "\u06F5", "\u06F6", "\u06F7", "\u06F8", "\u06F9", "1", "2", "3", "4", "5", "6", "7", "8", "9", "0", "ArrowUp", "ArrowDown", ","],
            this.ignoredKeys = ["Backspace", "Delete", "ArrowLeft", "ArrowRight", "Home", "End", "Shift", "Enter", "Escape", "Tab", "F1", "F2", "F3", "F4", "F5", "F6", "F7", "F8", "F9", "-", "."],
            this.allowKeys.push(...this.ignoredKeys)
        }
        ngOnDestroy() {
            this.subs().forEach(i => i.unsubscribe())
        }
        ngAfterViewInit() {
            this.inputElement = document.getElementById(this.id()),
            this.initialized.emit(this.inputElement),
            this.inputElement.value && this.inputElement.value !== "" && (this.inputElement.value = this.setDisplayFormat(this.inputElement.value)),
            this.focusInInit() && this.focusInput()
        }
        ngOnInit() {
            this.setSeparator(),
            this.formControlName() || this.formControlName.set(this.id()),
            this.id.set(Ml()),
            this.onValueChanges()
        }
        get input() {
            return this.form().get(this.formControlName())
        }
        focusInput() {
            this.inputElement.focus()
        }
        on_keyUp(i) {
            let r = this.setNormalValue(i);
            if (i.key === x8.ArrowUp)
                r = this.increaseValue(r),
                this.input.setValue(r),
                i.currentTarget.value = this.setDisplayFormat(r);
            else if (i.key === x8.ArrowDown)
                r = this.decreaseValue(r) ?? this.min(),
                this.input.setValue(r),
                i.currentTarget.value = this.setDisplayFormat(r);
            else if (this.ignoredKeys.includes(i.key))
                return;
            this.input.valueChanges.next(r)
        }
        on_input(i) {
            i.currentTarget.value.toLowerCase() !== "nan" && i.data && i.data.toLowerCase()
        }
        on_mousewheel(i) {
            let r = this.setNormalValue(i);
            i.wheelDelta > 0 && i.currentTarget.value !== "" ? r = this.increaseValue(r) : i.wheelDelta < 0 && i.currentTarget.value !== "" && (r = this.decreaseValue(r) ?? this.min()),
            this.input.setValue(r),
            i.currentTarget.value = this.setDisplayFormat(r),
            this.mouseEvent.emit(i)
        }
        on_focusIn(i) {
            this.focusIn.emit(i)
        }
        on_focusOut(i) {
            this.focusOut.emit(i)
        }
        on_keydown(i) {
            if (!this.allowKeys.includes(i.key)) {
                i.preventDefault();
                return
            }
            let r = this.setNormalValue(i);
            if (i.key === this.navigate) {
                i.preventDefault(),
                this.negativeIsValid() && (r = r === "0" ? "-0" : r * -1,
                this.input.setValue(r),
                i.currentTarget.value = this.setDisplayFormat(r));
                return
            }
            if (i.key === this.decimalPoint) {
                i.preventDefault(),
                this.inputMode() === Dp.decimal && !r.includes(this.decimalPoint) && (r += this.decimalPoint,
                this.input.setValue(r),
                i.currentTarget.value = this.setDisplayFormat(r));
                return
            }
            this.keyDown.emit(i)
        }
        onBlur() {
            this.blurEvent.emit()
        }
        onValueChanges() {
            let i = this.input.valueChanges.subscribe(r => {
                if (this.isEnglishOrPersianDigitOrComma(r))
                    if (r) {
                        this.caretPosition.set(this.inputElement.selectionEnd);
                        let s = this.inputElement.value.split(",").length - 1
                          , o = +r.toString().replace(/[\u0660-\u0669\u06f0-\u06f9]/g, c => c.charCodeAt(0) & 15).replace(/,/g, "");
                        this.input.setValue(o, {
                            emitEvent: !1
                        }),
                        this.valueChanged.emit({
                            value: o
                        }),
                        this.inputElement.value = this.setDisplayFormat(o);
                        let a = this.inputElement.value.split(",").length - 1;
                        this.caretPosition() !== -1 && (this.inputElement.setSelectionRange(this.caretPosition() + (a - s), this.caretPosition() + (a - s)),
                        this.caretPosition.set(-1))
                    } else
                        this.input.setValue(r, {
                            emitEvent: !1
                        }),
                        this.valueChanged.emit({
                            value: r
                        })
            }
            );
            this.subs().push(i)
        }
        isEnglishOrPersianDigitOrComma(i) {
            return /^[\u06F0-\u06F90-9,]+$/.test(i)
        }
        increaseValue(i) {
            let r = BigInt(i)
              , s = BigInt(this.step())
              , o = r + s;
            return this.roundOnStep() ? (o % s).toString() === "0" ? o.toString() : (o - o % s).toString() : o.toString()
        }
        decreaseValue(i) {
            let r = BigInt(i)
              , s = BigInt(this.step())
              , o = "0";
            return (r % s).toString() !== "0" ? (r - r % s).toString() : (this.negativeIsValid() && (o = (r - s).toString()),
            r > s ? o = (r - s).toString() : o = this.min(),
            o)
        }
        setDefaultValueForInput(i) {
            i.currentTarget.value = this.min(),
            this.input.setValue(this.min()),
            this.inputChange.emit({
                value: this.min()
            })
        }
        setDisplayFormat(i) {
            let r = i.toString();
            return this.maxLength() && r.length > this.maxLength() ? r.slice(0, this.maxLength()) : this.formatWithSeparator(r)
        }
        formatWithSeparator(i) {
            return i.replace(/\B(?=(\d{3})+(?!\d))/g, this.separator())
        }
        setNormalValue(i) {
            return i.currentTarget.value === "" ? "" : i.currentTarget.value.replace(/[\u0660-\u0669\u06f0-\u06f9]/g, r => r.charCodeAt(0) & 15).replace(/,/g, "")
        }
        setSeparator() {
            this.separator.set(this.inputMode() === Dp.money ? "," : "")
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["custom-number-box"]],
        viewQuery: function(r, s) {
            r & 1 && cc(s.inputRef, _K, 5),
            r & 2 && lc()
        },
        inputs: {
            id: [1, "id"],
            focusInInit: [1, "focusInInit"],
            inputValue: [1, "inputValue"],
            formControlName: [1, "formControlName"],
            step: [1, "step"],
            roundOnStep: [1, "roundOnStep"],
            min: [1, "min"],
            maxLength: [1, "maxLength"],
            isDecimal: [1, "isDecimal"],
            readOnly: [1, "readOnly"],
            class: [1, "class"],
            style: [1, "style"],
            inputMode: [1, "inputMode"],
            valueChangeEvent: [1, "valueChangeEvent"],
            placeholder: [1, "placeholder"],
            form: [1, "form"],
            negativeIsValid: [1, "negativeIsValid"],
            ngClass: [1, "ngClass"]
        },
        outputs: {
            id: "idChange",
            formControlName: "formControlNameChange",
            valueChanged: "valueChanged",
            inputChange: "inputChange",
            keyDown: "keyDown",
            focusIn: "focusIn",
            focusOut: "focusOut",
            initialized: "initialized",
            touchEnd: "touchEnd",
            mouseEvent: "mouseEvent",
            blurEvent: "blurEvent"
        },
        decls: 4,
        vars: 12,
        consts: [["input", ""], [1, "custome-editor-container", "flex-grow-1", 3, "formGroup"], [1, "custome-editor-input-container"], ["data-cy", "custom-number-box-input", "autocomplete", "off", "maxlength", "19", "inputmode", "decimal", "type", "text", 3, "focusin", "keydown", "keyup", "focusout", "input", "blurEvent", "mousewheel", "id", "placeholder", "formControlName", "readOnly", "ngClass", "value"]],
        template: function(r, s) {
            if (r & 1) {
                let o = an();
                H(0, "div", 1)(1, "div", 2)(2, "input", 3, 0),
                Qe("focusin", function(c) {
                    return yt(o),
                    St(s.on_focusIn(c))
                })("keydown", function(c) {
                    return yt(o),
                    St(s.on_keydown(c))
                })("keyup", function(c) {
                    return yt(o),
                    St(s.on_keyUp(c))
                })("focusout", function(c) {
                    return yt(o),
                    St(s.on_focusOut(c))
                })("input", function(c) {
                    return yt(o),
                    St(s.on_input(c))
                })("blurEvent", function() {
                    return yt(o),
                    St(s.onBlur())
                })("mousewheel", function(c) {
                    return yt(o),
                    St(s.on_mousewheel(c))
                }),
                W()()()
            }
            r & 2 && (ye("formGroup", s.form()),
            Q(2),
            bv(s.style()),
            cs("", s.class(), " text-body custom-number-box"),
            H0("id", s.id()),
            H0("placeholder", s.placeholder()),
            H0("formControlName", s.formControlName()),
            ye("readOnly", s.readOnly())("ngClass", s.ngClass())("value", s.inputValue()))
        },
        dependencies: [B5, R5, D5, N5, jv, U5, F5, L5, ir],
        styles: [`.custome-editor-input-container{margin-right:10px}  .custome-editor-input-container input{border:0px!important;padding:0!important;background-color:transparent!important;direction:ltr!important;width:100%!important}
/*# sourceMappingURL=custom-number-box.component-NMBHNGUM.css.map */`],
        changeDetection: 0
    });
    let e = t;
    return e
}
)()
  , Dp = function(e) {
    return e.money = "money",
    e.number = "number",
    e.decimal = "decimal",
    e
}(Dp || {})
  , x8 = function(e) {
    return e.ArrowDown = "ArrowDown",
    e.ArrowUp = "ArrowUp",
    e
}(x8 || {});
var yK = Kv("%H:%M")
  , SK = G5("~s")
  , I6e = ( () => {
    let t = class t {
        constructor() {
            this.selectedTrend = Ee(y0.daily),
            this.chartId = Ee("lineChart"),
            this.isMobile = Ee(!0),
            this.zoomable = Ee(!0),
            this.DoNotCallDefaultApi = Ee(!1),
            this.tooltipType = Ee(V1.Default),
            this.isChartZoomed = $t(),
            this.periodChanged = $t(),
            this.dateLabelWidth = 70,
            this.smallDeviceWidth = 345,
            this.chartData = void 0,
            this.loading = !0,
            this.data = [],
            this.dimensions = {
                mainWidth: 477,
                mainHeight: 200,
                margin: {
                    top: 20,
                    right: 25,
                    bottom: 20,
                    left: 40
                }
            },
            this.minValue = "0",
            this.maxValue = "0",
            this.range = [0, 0],
            this.mobilePadding = 0,
            this.mouseMove = i => {
                try {
                    if (this.focus.style("display", null),
                    !this.focus)
                        return;
                    if (!this.data) {
                        this.focus.style("display", "none");
                        return
                    }
                    if (this.data.length <= 0) {
                        this.focus.style("display", "none");
                        return
                    }
                    let r = d4(i)[0]
                      , s = Math.floor(r / this.dateLabelSpaceRatio)
                      , o = this.data[s];
                    if (!o)
                        return;
                    let a = this.x(o.date)
                      , c = a > this.dimensions.width - 10 ? this.dimensions.width - 10 - a : 0
                      , l = this.dimensions.margin.left - 5;
                    this.focus.select("#vertical-line").attr("transform", "translate(" + (this.x(o.date) + l) + "," + this.dimensions.height + ")"),
                    this.focus.select("#horizontal-line").attr("x2", this.dimensions.mainWidth).attr("transform", "translate(0," + (this.y(o.value) + 20) + ")"),
                    this.focus.selectAll(".circle").attr("transform", "translate(" + (this.x(o.date) + l) + "," + (this.y(o.value) + 20) + ")"),
                    this.focus.select("#vertical-text").attr("transform", "translate(" + (this.x(o.date) + l + c) + ",17)").text(o.originDate),
                    this.focus.select("#horizontal-text").attr("transform", "translate(" + l + "," + (this.y(o.value) + 22) + ")").text(this.numberWithCommas(o.value)),
                    this.focus.select("#vertical-rect").attr("x", this.x(o.date) + c - 5).attr("y", 0),
                    this.focus.select("#horizontal-rect").attr("y", this.y(o.value) + 5)
                } catch {}
            }
            ,
            this.fundMouseMove = i => {
                try {
                    if (this.focus.style("display", null),
                    !this.focus)
                        return;
                    if (!this.data) {
                        this.focus.style("display", "none");
                        return
                    }
                    if (this.data.length <= 0) {
                        this.focus.style("display", "none");
                        return
                    }
                    let s = d4(i)[0]
                      , o = Math.floor(s / this.dateLabelSpaceRatio)
                      , a = this.data[o];
                    if (!a)
                        return;
                    let c = this.x(a.date)
                      , l = 0;
                    c === 0 ? l = 20 : l = c > this.dimensions.width - 20 ? this.dimensions.width - 20 - c : 0;
                    let u = 50 > this.y(a.value) ? 50 - this.y(a.value) : 0
                      , h = this.dimensions.margin.left - 5;
                    this.focus.select("#vertical-line").attr("transform", "translate(" + (this.x(a.date) + h) + "," + (this.y(a.value) + 20) + ")").attr("y1", this.dimensions.height + this.dimensions.margin.top - this.y(a.value) - 20),
                    this.focus.selectAll(".circle").attr("transform", "translate(" + (this.x(a.date) + h) + "," + (this.y(a.value) + 20) + ")"),
                    this.focus.select("#vertical-text-issuanceNav").attr("transform", "translate(" + (this.x(a.date) + h + l) + "," + (this.y(a.value) + u - 30) + ")").text(this.numberWithCommas(a.value) + " \u0631\u06CC\u0627\u0644\u0621\u0621"),
                    this.focus.select("#vertical-text-nav-label").attr("transform", "translate(" + (this.x(a.date) + h + l) + "," + (this.y(a.value) + u - 10) + ")").text("\u0642\u06CC\u0645\u062A \u0627\u0628\u0637\u0627\u0644 \u0647\u0631 \u0648\u0627\u062D\u062F"),
                    this.focus.select("#vertical-text-nav").attr("transform", "translate(" + (this.x(a.date) + h + l) + "," + (this.y(a.value) + u + 5) + ")").text(this.numberWithCommas(a.value2) + " \u0631\u06CC\u0627\u0644\u0621\u0621"),
                    this.focus.select("#vertical-text-date").attr("transform", "translate(" + (this.x(a.date) + h + l) + "," + (this.y(a.value) + u + 17) + ")").text(a.originDate),
                    this.focus.select("#vertical-rect-issuanceNav").attr("x", this.x(a.date) + l - 10).attr("y", this.y(a.value) + u - 45),
                    this.focus.select("#vertical-rect-redemptionNav").attr("x", this.x(a.date) + l - 10).attr("y", this.y(a.value) + u - 20)
                } catch {}
            }
            ,
            this.getTickValues = () => {
                this.dateLabelWidth = this.selectedTrend() === y0.daily ? 70 : 80;
                let i = this.x.domain()
                  , r = i.length
                  , s = Math.floor(this.dimensions.mainWidth / this.dateLabelWidth);
                if (i.length <= 4 || r < s)
                    return i;
                if (this.dimensions.mainWidth <= this.smallDeviceWidth) {
                    let c = Math.floor(r / 2);
                    return [i[0], i[c], ...i.slice(-1)]
                }
                let o = []
                  , a = Math.round(r / s);
                for (let c = 0; c <= s; c++)
                    c * a <= r - 1 && o.push(i[c * a]);
                return o
            }
            ,
            this.getDifferenceInDays = (i, r) => (i.getTime() - r.getTime()) / (1e3 * 3600 * 24)
        }
        ngOnDestroy() {
            this.sub?.unsubscribe()
        }
        ngAfterViewInit() {
            this.sub = ci(500).pipe(He( () => this.initializeChart().then( () => this.drawChart().then( () => this.createResizeObserve())))).subscribe()
        }
        createResizeObserve() {
            new ResizeObserver( () => {
                this.onResized()
            }
            ).observe(this.rootDom)
        }
        calTicksValue() {
            this.selectedTrend() === y0.daily ? this.ticksValue = this.dimensions.mainWidth > 450 ? 8 : 5 : this.ticksValue = this.dimensions.mainWidth > 410 ? 5 : 3
        }
        onResized() {
            this.rootDom && (this.dimensions.mainWidth = this.rootDom.parentElement.clientWidth,
            this.calTicksValue(),
            this.dimensions.width = this.dimensions.mainWidth - this.dimensions.margin.left - this.dimensions.margin.right,
            !(this.dimensions.width <= 0) && (this.svg.attr("width", this.dimensions.mainWidth),
            this.x = p4().range([10, this.dimensions.width]),
            this.x2 = p4().range([10, this.dimensions.width]),
            this.defs.attr("width", this.dimensions.width - 10),
            this.xAxis = Lh(this.x).tickPadding(2).ticks(this.ticksValue).tickFormat(i => this.formatX(i)),
            this.zoom.translateExtent([[0, 0], [this.dimensions.width, this.dimensions.height]]).extent([[0, 0], [this.dimensions.width, this.dimensions.height]]),
            this.rect.attr("width", this.dimensions.width + 5),
            this.defaultText.attr("x", this.dimensions.width / 2 + this.defaultTextPosition),
            this.updateChart()))
        }
        drawChart() {
            return ue(this, null, function*() {
                this.svg && (this.hideDefaultText(),
                this.focus?.style("display", "none"),
                this.data = [],
                this.updateChart())
            })
        }
        updateChart() {
            try {
                if (this.calTicksValue(),
                !this.chartData?.length) {
                    this.showDefaultText();
                    return
                }
                this.chartData?.length === 1 && this.chartData.push(this.chartData.at(0)),
                this.range = [0, this.chartData.length - 1],
                this.selectedTrend() === y0.daily ? this.data = this.chartData.filter( (a, c) => c >= this.range[0] && c <= this.range[1]).map(a => ({
                    date: yK(a.d),
                    value: +a.v,
                    originDate: a.d
                })) : this.data = this.chartData.filter( (a, c) => c >= this.range[0] && c <= this.range[1]).map(a => ({
                    date: yr.jDateToDate(a.d),
                    value: +a.v,
                    value2: +a?.v,
                    originDate: a.d
                })),
                this.minValue = gc(this.data, a => a.value),
                this.maxValue = Fh(this.data, a => a.value);
                let i = Number.parseFloat(this.maxValue) - Number.parseFloat(this.minValue)
                  , r = Number.parseFloat(this.minValue) - i < 0 ? 0 : Number.parseFloat(this.minValue) - i / 2
                  , s = Number.parseFloat(this.maxValue) + i / 2
                  , o = this.data.map(a => a.date);
                this.x.domain(o),
                this.y.domain([r, s]),
                this.x2.domain(this.x.domain()),
                this.gY.call(this.yAxis).call(a => a.select(".domain").remove()).call(a => a.selectAll(".tick line").attr("x1", 10).attr("x2", this.dimensions.width).attr("y1", 0).attr("y2", 0).attr("opacity", "1").attr("stroke-width", "1px").attr("stroke-opacity", .1)).call(a => a.selectAll(".tick text").attr("opacity", "1").attr("x", -this.dimensions.margin.left - this.mobileMarginRight + this.mobilePadding + 10)),
                this.xAxis = Lh(this.x).tickPadding(2).ticks(this.ticksValue).tickValues(this.getTickValues()).tickFormat(a => this.formatX(a)),
                this.gX.call(this.xAxis).call(a => a.selectAll(".tick text").attr("opacity", "1")),
                this.linePath.datum(this.data).transition().ease(f4).duration(1e3).attr("d", this.line),
                this.dateLabelSpaceRatio = (this.dimensions.width - 10) / this.data.length
            } catch {}
        }
        formatAbbreviation(i) {
            if (Number.parseFloat(this.maxValue) - Number.parseFloat(this.minValue) <= 100)
                return i.toString().withSeparator();
            let s = SK(i);
            switch (s[s.length - 1]) {
            case "k":
                return s.slice(0, -1) + "K";
            case "m":
                return s.slice(0, -1) + "M";
            case "g":
            case "G":
                return s.slice(0, -1) + "B";
            default:
                return s
            }
        }
        formatX(i) {
            if (this.selectedTrend() === y0.daily)
                return i.getHours().toString().padStart(2, "0") + ":" + i.getMinutes().toString().padStart(2, "0");
            {
                let r = i.toLocaleDateString("en-US").split("/");
                return yr.getFormattedJDate(new Date(r[2],r[0] - 1,r[1]))
            }
        }
        initializeChart() {
            return ue(this, null, function*() {
                this.rootDom && (this.dimensions.width = this.dimensions.mainWidth - this.dimensions.margin.left - this.dimensions.margin.right,
                this.dimensions.height = this.dimensions.mainHeight - this.dimensions.margin.top - this.dimensions.margin.bottom,
                this.defaultTextPosition = this.isMobile() ? -50 : 130,
                this.mobilePadding = this.isMobile() ? 25 : 0,
                this.mobileMarginRight = this.isMobile() ? -10 : 0,
                this.svg = pl(`#${this.chartId()}`).style("max-height", this.dimensions.mainWidth + "px").style("height", "auto").append("svg").attr("id", "lineChartSvg").attr("width", this.dimensions.mainWidth).attr("height", this.dimensions.mainHeight).style("margin-right", this.mobileMarginRight),
                this.x = g4().range([10, this.dimensions.width]),
                this.x2 = g4().range([10, this.dimensions.width]),
                this.y = V5().range([this.dimensions.height, 0]),
                this.xAxis = Lh(this.x).tickPadding(2).ticks(this.ticksValue).tickSize(0).tickFormat(i => this.formatX(i)),
                this.yAxis = H5(this.y).tickPadding(2).ticks(5).tickFormat(i => this.formatAbbreviation(i)),
                this.defs = this.svg.append("defs").append("svg:clipPath").attr("id", "clip").append("svg:rect").attr("width", this.dimensions.width - 10).attr("height", this.dimensions.height).attr("x", 10).attr("y", 0),
                this.Line_chart = this.svg.append("g").attr("class", "path").attr("transform", "translate(" + (this.dimensions.margin.left - 5) + "," + this.dimensions.margin.top + ")").attr("clip-path", "url(#clip)"),
                this.linePath = this.Line_chart.append("path").attr("class", "line").attr("fill", "none").attr("stroke", "steelblue").attr("stroke-width", "2.5px"),
                this.path = this.svg.append("g").attr("class", "path").attr("transform", "translate(" + (this.dimensions.margin.left - 5) + "," + this.dimensions.margin.top + ")"),
                this.zoom = Zv().scaleExtent([1, 80]).translateExtent([[0, 0], [this.dimensions.width, this.dimensions.height]]).extent([[0, 0], [this.dimensions.width, this.dimensions.height]]).on("zoom", this.zoomed.bind(this)),
                this.gY = this.path.append("g").attr("class", "axis axis--y").attr("font-size", 10).style("font-family", "IRANSansX").attr("font-weight", "400"),
                this.gX = this.path.append("g").attr("class", "axis axis--x").attr("font-size", 10).style("font-family", "IRANSansX").attr("font-weight", "400").attr("stroke-width", "0px").attr("transform", "translate(0," + this.dimensions.height + ")"),
                this.line = Qv().x(i => this.x(i.date)).y(i => this.y(i.value)),
                this.createDefaultText(),
                this.tooltipType() === V1.Default ? this.createFocus() : this.tooltipType() === V1.Fund && this.createFundFocus())
            })
        }
        createDefaultText() {
            this.defaultText = this.svg.append("text").text("").attr("id", "defaultText").attr("y", 100).attr("x", this.dimensions.width / 2 + this.defaultTextPosition).attr("font-size", this.isMobile() ? 12 : 14).attr("fill", "#6c757d").attr("font-weight", "400")
        }
        showDefaultText() {
            this.chartData && !this.chartData.length && this.defaultText.text("\u062F\u0627\u062F\u0647 \u0627\u06CC \u062C\u0647\u062A \u0646\u0645\u0627\u06CC\u0634 \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"),
            this.linePath.datum([]).transition().ease(f4).duration(1e3).attr("d", this.line),
            this.gY.call(i => i.selectAll(".tick line").attr("opacity", "0")).call(i => i.selectAll(".tick text").attr("opacity", "0")),
            this.gX.call(i => i.selectAll(".tick text").attr("opacity", "0"))
        }
        hideDefaultText() {
            this.defaultText?.text("")
        }
        createFocus() {
            this.focus = this.svg.append("g").attr("class", "focus").style("font-family", "IRANSansX").style("display", "none"),
            this.focus.append("line").attr("id", "vertical-line").attr("stroke", "#666").attr("stroke-width", 1).attr("stroke-opacity", .7).attr("stroke-dasharray", "3,3").attr("y1", -this.dimensions.height + this.dimensions.margin.top).attr("y2", this.dimensions.margin.bottom),
            this.focus.append("line").attr("id", "horizontal-line").attr("stroke", "#666").attr("stroke-width", 1).attr("stroke-opacity", .7).attr("stroke-dasharray", "3,3").attr("x1", this.dimensions.margin.left),
            this.focus.append("circle").attr("class", "circle").attr("r", 3).attr("dy", 3).attr("stroke", "steelblue").attr("fill", "#fff"),
            this.focus.append("rect").attr("id", "vertical-rect").attr("width", 80).attr("height", 25).attr("fill", "#d1d1d1"),
            this.focus.append("rect").attr("id", "horizontal-rect").attr("width", 80).attr("height", 25).attr("fill", "#d1d1d1"),
            this.focus.append("text").attr("id", "vertical-text").attr("text-anchor", "middle").attr("fill", "black").attr("font-size", 12),
            this.focus.append("text").attr("id", "horizontal-text").attr("text-anchor", "middle").attr("fill", "black").attr("font-size", 12),
            this.rect = this.svg.append("rect").attr("class", "zoom").attr("fill", "none").attr("pointer-events", "all").attr("width", this.dimensions.width + 5).attr("height", this.dimensions.height).attr("transform", "translate(" + (this.dimensions.margin.left - 5) + "," + this.dimensions.margin.top + ")").on("pointerup", () => {
                this.focus.style("display", "none"),
                this.isChartZoomed.emit(!0)
            }
            ).on("pointerout", () => {
                this.focus.style("display", "none")
            }
            ).on("pointermove", this.mouseMove.bind(this)),
            this.zoomable() && this.rect.call(this.zoom)
        }
        createFundFocus() {
            this.focus = this.svg.append("g").attr("class", "focus").style("font-family", "IRANSansX").style("display", "none"),
            this.focus.append("line").attr("id", "vertical-line").attr("stroke", "#666").attr("stroke-width", 1).attr("stroke-opacity", .7).attr("stroke-dasharray", "3,3"),
            this.focus.append("circle").attr("class", "circle").attr("r", 3).attr("dy", 3).attr("stroke", "steelblue").attr("stroke-width", 2).attr("fill", "#fff"),
            this.focus.append("rect").attr("id", "vertical-rect-issuanceNav").attr("width", 90).attr("height", 25).attr("fill", "#a3bce6"),
            this.focus.append("rect").attr("id", "vertical-rect-redemptionNav").attr("width", 90).attr("height", 42).attr("fill", "#ebf0f7"),
            this.focus.append("text").attr("id", "vertical-text-issuanceNav").attr("text-anchor", "middle").attr("fill", "black").attr("font-size", 12),
            this.focus.append("text").attr("id", "vertical-text-nav-label").attr("text-anchor", "middle").attr("fill", "black").attr("font-size", 10),
            this.focus.append("text").attr("id", "vertical-text-nav").attr("text-anchor", "middle").attr("fill", "black").attr("font-size", 11),
            this.focus.append("text").attr("id", "vertical-text-date").attr("text-anchor", "middle").attr("fill", "black").attr("font-size", 11),
            this.rect = this.svg.append("rect").attr("class", "zoom").attr("fill", "none").attr("pointer-events", "all").attr("width", this.dimensions.width + 5).attr("height", this.dimensions.height).attr("transform", "translate(" + (this.dimensions.margin.left - 5) + "," + this.dimensions.margin.top + ")").on("pointerdown", () => this.focus.style("display", null)).on("pointerup", () => {
                this.focus.style("display", "none")
            }
            ).on("pointerout", () => {
                this.focus.style("display", "none")
            }
            ).on("pointermove", this.fundMouseMove.bind(this))
        }
        numberWithCommas(i) {
            return i.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")
        }
        zoomed(i) {
            if (!this.data.length)
                return;
            let r = i.transform;
            this.x.domain(r.rescaleX(this.x2).domain()),
            this.xAxis = Lh(this.x).tickPadding(2).ticks(this.ticksValue).tickFormat(s => this.formatX(s)),
            this.Line_chart.select(".line").attr("d", this.line),
            this.path.select(".axis--x").call(this.xAxis)
        }
        get rootDom() {
            return document.getElementById(this.chartId())
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["lib-d3-line-chart"]],
        inputs: {
            selectedTrend: [1, "selectedTrend"],
            chartId: [1, "chartId"],
            isMobile: [1, "isMobile"],
            zoomable: [1, "zoomable"],
            DoNotCallDefaultApi: [1, "DoNotCallDefaultApi"],
            tooltipType: [1, "tooltipType"]
        },
        outputs: {
            isChartZoomed: "isChartZoomed",
            periodChanged: "periodChanged"
        },
        decls: 2,
        vars: 1,
        consts: [[2, "width", "100%", "min-height", "200px"], [3, "id"]],
        template: function(r, s) {
            r & 1 && (H(0, "div", 0),
            me(1, "div", 1),
            W()),
            r & 2 && (Q(),
            H0("id", s.chartId()))
        },
        styles: [`svg[_ngcontent-%COMP%]{width:100%}
/*# sourceMappingURL=d3-line-chart.component-44KHKYBC.css.map */`],
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var N6e = new Uint32Array(65536);
var bK = ["\u06F0", "\u06F1", "\u06F2", "\u06F3", "\u06F4", "\u06F5", "\u06F6", "\u06F7", "\u06F8", "\u06F9"];
var xK = /[۰۱۲۳۴۵۶۷۸۹]/g;
var wK = e => {
    if (typeof e != "string")
        throw TypeError("PersianTools: digitsFaToEn - The input must be string");
    return String(e).replace(xK, t => `${bK.indexOf(t)}`)
}
;
var CM = "\u0627\u0628\u067E\u062A\u062B\u062C\u0686\u062D\u062E\u062F\u0630\u0631\u0632\u0698\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063A\u0641\u0642\u06A9\u06AF\u0644\u0645\u0646\u0648\u0647\u06CC\u06F0\u06F1\u06F2\u06F3\u06F4\u06F5\u06F6\u06F7\u06F8\u06F9\u064E\u0650\u064F\u200C\u0622\u0627\u064B"
  , CK = CM + "\u0652\u064C\u064D\u064B\u064F\u0650\u064E\u0651\u0654\u0670\u0621\u0643\u200C\u0629\u06C0\u0623\u0625\u064A\u0640\u0626\u0624\u060C"
  , EK = function(e, t, n) {
    t === void 0 && (t = !1),
    n === void 0 && (n = /["'-+()؟\s.]/g);
    let i = e.replace(n, "");
    return new RegExp(`^[${t ? CK : CM}]+$`).test(i)
};
var EM = e => {
    if (typeof e != "number" && typeof e != "string")
        return "";
    let t = e.toString().replace(/,/g, "")
      , n = EK(t) ? wK(t) : t;
    if (!n.match(/^-?\d+(\.\d+)?$/))
        return "";
    let i = n.startsWith("-")
      , r = i ? n.slice(1) : n
      , [s,o] = r.split(".")
      , a = s.replace(/\B(?=(\d{3})+(?!\d))/g, ",")
      , c = o ? `${a}.${o}` : a;
    return i ? `-${c}` : c
}
;
var TK = {
    \u0635\u0641\u0631: 0,
    \u06CC\u06A9: 1,
    \u062F\u0648: 2,
    \u0633\u0647: 3,
    \u0686\u0647\u0627\u0631: 4,
    \u067E\u0646\u062C: 5,
    \u0634\u0634: 6,
    \u0634\u06CC\u0634: 6,
    \u0647\u0641\u062A: 7,
    \u0647\u0634\u062A: 8,
    \u0646\u0647: 9,
    \u062F\u0647: 10,
    \u06CC\u0627\u0632\u062F\u0647: 11,
    \u062F\u0648\u0627\u0632\u062F\u0647: 12,
    \u0633\u06CC\u0632\u062F\u0647: 13,
    \u0686\u0647\u0627\u0631\u062F\u0647: 14,
    \u067E\u0627\u0646\u0632\u062F\u0647: 15,
    \u0634\u0627\u0646\u0632\u062F\u0647: 16,
    \u0647\u0641\u062F\u0647: 17,
    \u0647\u062C\u062F\u0647: 18,
    \u0646\u0648\u0632\u062F\u0647: 19,
    \u0628\u06CC\u0633\u062A: 20,
    \u0633\u06CC: 30,
    \u0686\u0647\u0644: 40,
    \u067E\u0646\u062C\u0627\u0647: 50,
    \u0634\u0635\u062A: 60,
    \u0647\u0641\u062A\u0627\u062F: 70,
    \u0647\u0634\u062A\u0627\u062F: 80,
    \u0646\u0648\u062F: 90
}
  , OK = {
    \u0635\u062F: 100,
    \u06CC\u06A9\u0635\u062F: 100,
    \u062F\u0648\u06CC\u0633\u062A: 200,
    \u0633\u06CC\u0635\u062F: 300,
    \u0686\u0647\u0627\u0631\u0635\u062F: 400,
    \u067E\u0627\u0646\u0635\u062F: 500,
    \u0634\u0634\u0635\u062F: 600,
    \u0647\u0641\u062A\u0635\u062F: 700,
    \u0647\u0634\u062A\u0635\u062F: 800,
    \u0646\u0647\u0635\u062F: 900
}
  , MK = {
    \u0647\u0632\u0627\u0631: 1e3,
    \u0645\u06CC\u0644\u06CC\u0648\u0646: 1e6,
    \u0628\u06CC\u0644\u06CC\u0648\u0646: 1e9,
    \u0645\u06CC\u0644\u06CC\u0627\u0631\u062F: 1e9,
    \u062A\u0631\u06CC\u0644\u06CC\u0648\u0646: 1e12
};
var PK = [...Object.keys(TK), ...Object.keys(OK), ...Object.keys(MK)]
  , kK = ["\u0648", " \u0648 "]
  , AK = ["\u0645\u0646\u0641\u06CC", "\u0645\u062B\u0628\u062A"]
  , U6e = [...PK, ...kK, ...AK];
var H6e = new RegExp("([\u06F0-\u06F90-9-_.*]{16,20})","img");
var Ji = "\u0647\u0645\u0631\u0627\u0647 \u0627\u0648\u0644"
  , w8 = "\u0627\u06CC\u0631\u0627\u0646\u0633\u0644"
  , Np = "\u0631\u0627\u06CC\u062A\u0644"
  , TM = {
    910: {
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        province: [],
        type: ["permanent", "credit"],
        operator: Ji
    },
    914: {
        province: ["\u0622\u0630\u0631\u0628\u0627\u06CC\u062C\u0627\u0646 \u0634\u0631\u0642\u06CC", "\u0627\u0631\u062F\u0628\u06CC\u0644", "\u0627\u0635\u0641\u0647\u0627\u0646"],
        base: "\u0622\u0630\u0631\u0628\u0627\u06CC\u062C\u0627\u0646 \u063A\u0631\u0628\u06CC",
        type: ["permanent", "credit"],
        operator: Ji
    },
    911: {
        province: ["\u06AF\u0644\u0633\u062A\u0627\u0646", "\u06AF\u06CC\u0644\u0627\u0646"],
        base: "\u0645\u0627\u0632\u0646\u062F\u0631\u0627\u0646",
        type: ["permanent", "credit"],
        operator: Ji
    },
    912: {
        province: ["\u0627\u0644\u0628\u0631\u0632", "\u0632\u0646\u062C\u0627\u0646", "\u0633\u0645\u0646\u0627\u0646", "\u0642\u0632\u0648\u06CC\u0646", "\u0642\u0645", "\u0628\u0631\u062E\u06CC \u0627\u0632 \u0634\u0647\u0631\u0633\u062A\u0627\u0646 \u0647\u0627\u06CC \u0627\u0633\u062A\u0627\u0646 \u0645\u0631\u06A9\u0632\u06CC"],
        base: "\u062A\u0647\u0631\u0627\u0646",
        type: ["permanent"],
        operator: Ji
    },
    913: {
        province: ["\u06CC\u0632\u062F", "\u0686\u0647\u0627\u0631\u0645\u062D\u0627\u0644 \u0648 \u0628\u062E\u062A\u06CC\u0627\u0631\u06CC", "\u06A9\u0631\u0645\u0627\u0646"],
        base: "\u0627\u0635\u0641\u0647\u0627\u0646",
        type: ["permanent", "credit"],
        operator: Ji
    },
    915: {
        province: ["\u062E\u0631\u0627\u0633\u0627\u0646 \u0634\u0645\u0627\u0644\u06CC", "\u062E\u0631\u0627\u0633\u0627\u0646 \u062C\u0646\u0648\u0628\u06CC", "\u0633\u06CC\u0633\u062A\u0627\u0646 \u0648 \u0628\u0644\u0648\u0686\u0633\u062A\u0627\u0646"],
        base: "\u062E\u0631\u0627\u0633\u0627\u0646 \u0631\u0636\u0648\u06CC",
        type: ["permanent", "credit"],
        operator: Ji
    },
    916: {
        province: ["\u0644\u0631\u0633\u062A\u0627\u0646", "\u0641\u0627\u0631\u0633", "\u0627\u0635\u0641\u0647\u0627\u0646"],
        base: "\u062E\u0648\u0632\u0633\u062A\u0627\u0646",
        type: ["permanent", "credit"],
        operator: Ji
    },
    917: {
        province: ["\u0628\u0648\u0634\u0647\u0631", "\u06A9\u0647\u06AF\u06CC\u0644\u0648\u06CC\u0647 \u0648 \u0628\u0648\u06CC\u0631 \u0627\u062D\u0645\u062F", "\u0647\u0631\u0645\u0632\u06AF\u0627\u0646"],
        base: "\u0641\u0627\u0631\u0633",
        type: ["permanent", "credit"],
        operator: Ji
    },
    918: {
        province: ["\u06A9\u0631\u062F\u0633\u062A\u0627\u0646", "\u0627\u06CC\u0644\u0627\u0645", "\u0647\u0645\u062F\u0627\u0646"],
        base: "\u06A9\u0631\u0645\u0627\u0646\u0634\u0627\u0647",
        type: ["permanent", "credit"],
        operator: Ji
    },
    919: {
        province: ["\u0627\u0644\u0628\u0631\u0632", "\u0633\u0645\u0646\u0627\u0646", "\u0642\u0645", "\u0642\u0632\u0648\u06CC\u0646", "\u0632\u0646\u062C\u0627\u0646"],
        base: "\u062A\u0647\u0631\u0627\u0646",
        type: ["credit"],
        operator: Ji
    },
    990: {
        province: [],
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        type: ["credit"],
        operator: Ji
    },
    991: {
        province: [],
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        type: ["permanent", "credit"],
        operator: Ji
    },
    992: {
        province: [],
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        type: ["credit"],
        operator: Ji
    },
    993: {
        province: [],
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        type: ["credit"],
        operator: Ji
    },
    994: {
        province: [],
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        type: ["credit"],
        operator: Ji
    },
    995: {
        province: [],
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        type: ["permanent", "credit"],
        operator: Ji
    },
    996: {
        province: [],
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        type: ["permanent", "credit"],
        operator: Ji
    }
}
  , OM = {
    932: {
        province: [],
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        type: ["credit"],
        operator: "\u062A\u0627\u0644\u06CC\u0627"
    }
}
  , MM = {
    920: {
        province: [],
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        type: ["permanent"],
        operator: Np
    },
    921: {
        province: [],
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        type: ["credit"],
        operator: Np
    },
    922: {
        province: [],
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        type: ["credit"],
        operator: Np
    },
    923: {
        province: [],
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        type: ["credit"],
        operator: Np
    }
}
  , Ws = {
    province: [],
    base: "\u06A9\u0634\u0648\u0631\u06CC",
    type: ["permanent", "credit"],
    operator: w8
}
  , PM = {
    930: Ws,
    933: Ws,
    935: Ws,
    936: Ws,
    937: Ws,
    938: Ws,
    939: Ws,
    901: Ws,
    902: Ws,
    903: Ws,
    905: Ws,
    900: Ws,
    904: {
        province: [],
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        model: "\u0633\u06CC\u0645\u200C\u06A9\u0627\u0631\u062A \u06A9\u0648\u062F\u06A9",
        type: ["credit"],
        operator: w8
    },
    941: {
        province: [],
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        model: "TD-LTE",
        type: ["credit"],
        operator: w8
    }
}
  , kM = {
    998: {
        province: [],
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        type: ["credit"],
        operator: "\u0634\u0627\u062A\u0644 \u0645\u0648\u0628\u0627\u06CC\u0644"
    }
}
  , AM = {
    999: {
        base: "\u06A9\u0634\u0648\u0631\u06CC",
        province: [],
        type: ["permanent", "credit"],
        operator: "\u0622\u067E\u062A\u0644"
    }
}
  , G6e = [...Object.keys(TM), ...Object.keys(OM), ...Object.keys(MM), ...Object.keys(PM), ...Object.keys(kM), ...Object.keys(AM)]
  , V6e = C(C(C(C(C(C({}, TM), OM), PM), kM), MM), AM);
var Z6e = ( () => {
    let t = class t {
        constructor() {
            this.chartId = Ee.required(),
            this.width = Ee(),
            this.height = Ee(),
            this.showTooltip = Ee(!1),
            this.showLabel = Ee(!1),
            this.slicesClass = Ee(""),
            this.injector = z(On),
            this.data = Ee.required(),
            this.dimensions = {
                width: 250,
                height: 250,
                margin: 20
            },
            this.radius = 0,
            xi(sn(window, "scroll").pipe(He( () => {
                this.tooltipGroup?.style("display", "none")
            }
            )))
        }
        ngAfterViewInit() {
            k5( () => {
                if (this.data() && this.radius === 0) {
                    this.dimensions.width = this.width() ?? this.dimensions.width,
                    this.dimensions.height = this.height() ?? this.dimensions.height,
                    this.radius = Math.min(this.dimensions.width, this.dimensions.height) / 2 - this.dimensions.margin;
                    let i = Yv().innerRadius(this.radius * .4).outerRadius(this.radius).cornerRadius(3)
                      , r = Jv().padAngle(5 / this.radius).sort(null)
                      , s = pl(`#${this.chartId()}`);
                    this.svg = s.append("svg").attr("width", this.dimensions.width).attr("height", this.dimensions.height).attr("id", "svg-donut").attr("viewBox", [-this.dimensions.width / 2, -this.dimensions.height / 2, this.dimensions.width, this.dimensions.height]).attr("style", "max-width: 100%; height: auto;"),
                    this.svg.append("g").selectAll().data( () => r(this.data().map(o => +o.label).filter(o => o > 0))).join("path").attr("d", o => i(o)).data(this.data().filter(o => +o.label > 0)).attr("fill", o => o.color).attr("stroke-width", 2).attr("cursor", "pointer").attr("class", this.slicesClass()).attr("id", o => "data-" + this.data().findIndex(a => a.name === o.name)).on("mousemove", o => {
                        this.showTooltipHandler(o)
                    }
                    ).on("touchmove", o => {
                        this.showTooltipHandler(o)
                    }
                    ).on("touchstart", o => {
                        this.showTooltipHandler(o)
                    }
                    ).on("touchend", () => {
                        this.hideTooltipHandler()
                    }
                    ).on("pointerout", () => {
                        this.hideTooltipHandler()
                    }
                    ),
                    this.svg.append("g").attr("text-anchor", "middle").selectAll().data( () => r(this.data().map(o => +o.label).filter(o => o > 0))).join("text").attr("transform", o => `translate(${i.centroid(o)[0]},${i.centroid(o)[1] + 8})`).data(this.data()).call(o => o.append("tspan").text(a => this.showLabel() ? +a.label < 10 ? "" : a.label + "%" : "").attr("fill", "var(--bs-body-bg)").attr("font-size", "14px").attr("font-weight", "700")).on("mousemove", o => {
                        this.showTooltipHandler(o)
                    }
                    ).on("touchmove", o => {
                        this.showTooltipHandler(o)
                    }
                    ).on("touchstart", o => {
                        this.showTooltipHandler(o)
                    }
                    ).on("touchend", () => {
                        this.hideTooltipHandler()
                    }
                    ).on("pointerout", () => {
                        this.hideTooltipHandler()
                    }
                    )
                }
            }
            , {
                injector: this.injector
            }),
            this.showTooltip() && this.createFocusElement()
        }
        createFocusElement() {
            this.tooltipGroup = pl(`#${this.chartId()}`).append("div").attr("class", "toolTip").attr("id", "tooltip-container")
        }
        preventScroll() {}
        hideTooltipHandler() {
            setTimeout( () => this.tooltipGroup.style("display", "none"), 10),
            this.svg.selectAll("path").attr("stroke", null)
        }
        showTooltipHandler(i) {
            if (i) {
                let {x: r, y: s} = {
                    x: i.type.includes("mouse") ? i?.clientX : i?.touches?.[0]?.clientX,
                    y: i.type.includes("mouse") ? i?.clientY : i?.touches?.[0]?.clientY
                }
                  , o = document.elementFromPoint(r, s)?.id
                  , a = +o.split("")[o.length - 1];
                a >= 0 && document.getElementById("svg-donut")?.getBoundingClientRect().left < r && document.getElementById("svg-donut")?.getBoundingClientRect().right > r && document.getElementById("svg-donut")?.getBoundingClientRect().top < s && document.getElementById("svg-donut")?.getBoundingClientRect().bottom > s && this.data()[a] ? (this.tooltipGroup.style("display", "inline-block").style("left", r - 40 + "px").style("top", i?.touches?.[0]?.clientY - 85 + "px").attr("text-anchor", "middle").html("\u0627\u0631\u0632\u0634 \u0646\u0645\u0627\u062F " + this.data()[a].name + "<br>" + EM(Math.round(this.data()[a].value)) + " \u0631\u064A\u0627\u0644 "),
                this.svg.select("#" + o).attr("stroke", "rgba(0,0,0, 0.7)")) : this.hideTooltipHandler()
            }
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["donut-chart"]],
        inputs: {
            chartId: [1, "chartId"],
            width: [1, "width"],
            height: [1, "height"],
            showTooltip: [1, "showTooltip"],
            showLabel: [1, "showLabel"],
            slicesClass: [1, "slicesClass"],
            data: [1, "data"]
        },
        decls: 1,
        vars: 1,
        consts: [[2, "text-align", "center", 3, "swipe", "scroll", "id"]],
        template: function(r, s) {
            r & 1 && (H(0, "div", 0),
            Qe("swipe", function() {
                return s.preventScroll()
            })("scroll", function() {
                return s.preventScroll()
            }),
            W()),
            r & 2 && ye("id", s.chartId())
        },
        styles: [`.toolTip{position:absolute;display:none;width:auto;height:auto;background:var(--color-principal);border-radius:var(--rounded);box-shadow:var(--bs-box-shadow-sm);color:var(--bs-body-color);padding:5px;text-align:center}
/*# sourceMappingURL=donut-chart.component-EGZHYYFS.css.map */
`],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var ige = ( () => {
    let t = class t {
        constructor() {
            this.isOpen = !1,
            this.isOpenSubject = new Ne(!1),
            this.isOpenObs$ = this.isOpenSubject.asObservable().pipe(ss(20))
        }
        hideDrawerMenu() {
            this.isOpenSubject.next(!1)
        }
        showDrawerMenu() {
            this.isOpenSubject.next(!0)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var C8 = function(e) {
    return e[e.None = 0] = "None",
    e[e.Setting = 1] = "Setting",
    e[e.Confirm = 2] = "Confirm",
    e[e.AddSymbolPanelWithSearch = 3] = "AddSymbolPanelWithSearch",
    e[e.AddSymbolPanel = 4] = "AddSymbolPanel",
    e[e.FundConsult = 5] = "FundConsult",
    e[e.FundBuy = 6] = "FundBuy",
    e[e.FundSell = 7] = "FundSell",
    e[e.FundConfirm = 8] = "FundConfirm",
    e[e.FundIncrease = 9] = "FundIncrease",
    e
}(C8 || {});
function IK(e, t) {}
var IM = ( () => {
    let t = class t {
        get OverlayType() {
            return C8
        }
        constructor(i) {
            this.overlayService = i,
            this.appDynamic = sc($5),
            this.isMobile = Ee(!1),
            this.currentComponentName = null,
            this.overlay = xi(this.overlayService.overlayState$.pipe(He(r => {
                !this.currentComponentName && r?.component ? this.createComponent(r) : r.component && r.option?.componentName !== this.currentComponentName ? this.createComponent(r) : !r.component && this.currentComponentName && this.clearComponent(r)
            }
            )))
        }
        closeForm() {
            this.overlayService.hideOverlay()
        }
        createComponent(i) {
            this.clearComponent(i);
            let s = (this.appDynamic()?.viewContainerRef).createComponent(i?.component);
            i?.class && (s.location.nativeElement.className = i.class),
            i.input?.forEach(o => {
                s.setInput(o.inputName, o.inputValue)
            }
            ),
            i?.output?.forEach(o => {
                s.instance[o?.outputName]?.subscribe(a => {
                    o?.outputCallBack?.(a),
                    o?.closeForm && this.closeForm()
                }
                )
            }
            ),
            this.currentComponentName = i.option.componentName
        }
        clearComponent(i) {
            this.currentComponentName = null;
            let r;
            if (!this.appDynamic || !i?.component) {
                r = this.appDynamic()?.viewContainerRef,
                r?.clear();
                return
            }
            r = this.appDynamic()?.viewContainerRef,
            r?.clear()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(Mt(u5))
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["overlay-management"]],
        viewQuery: function(r, s) {
            r & 1 && cc(s.appDynamic, $5, 5),
            r & 2 && lc()
        },
        inputs: {
            isMobile: [1, "isMobile"]
        },
        decls: 1,
        vars: 0,
        consts: [["appDynamic", ""]],
        template: function(r, s) {
            r & 1 && at(0, IK, 0, 0, "ng-template", 0)
        },
        dependencies: [$5],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var RK = e => ({
    active: e
})
  , DK = e => ({
    "overlay-management--show": e
});
function NK(e, t) {}
var bge = ( () => {
    let t = class t {
        constructor(i) {
            this.overlayService = i,
            this.closed = $t(),
            this.overlayState = xi(this.overlayService.overlayState$)
        }
        closeHandler() {
            this.overlayService.overlaySubject.value.isShow && this.closed.emit()
        }
        clickOutSideOverlay() {
            this.overlayService.hideOverlay()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(Mt(u5))
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["drawer-menu"]],
        outputs: {
            closed: "closed"
        },
        decls: 5,
        vars: 8,
        consts: [[1, "overlay", "position-absolute", 3, "click", "ngClass"], ["swipeUpDown", "", 1, "overlay-management", "bg-principal", "bg-principal-4x-dark", "rounded-top-4", "shadow-lg", "d-flex", "flex-column", 3, "swipeHide", "touchOutside", "ngClass"], [1, "d-flex", "flex-column", "overflow-hidden", 3, "isMobile"]],
        template: function(r, s) {
            if (r & 1 && (at(0, NK, 0, 0),
            H(1, "div")(2, "div", 0),
            Qe("click", function() {
                return s.clickOutSideOverlay()
            }),
            W(),
            H(3, "div", 1),
            Qe("swipeHide", function() {
                return s.closeHandler()
            })("touchOutside", function() {
                let a;
                return ((a = s.overlayState()) == null ? null : a.isShow) && s.closeHandler()
            }),
            me(4, "overlay-management", 2),
            W()()),
            r & 2) {
                let o, a;
                et(s.overlayState() ? 0 : -1),
                Q(2),
                ye("ngClass", Dn(4, RK, (o = s.overlayState()) == null ? null : o.isShow)),
                Q(),
                ye("ngClass", Dn(6, DK, (a = s.overlayState()) == null ? null : a.isShow)),
                Q(),
                ye("isMobile", !0)
            }
        },
        dependencies: [fc, ir, i_, n_, IM],
        styles: [`.drawer-menu-overlay[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0}.drawer-menu-overlay[_ngcontent-%COMP%]:before{content:"";position:absolute;top:10px;right:50%;width:50px;margin-right:-25px;height:5px;border-radius:10px}
/*# sourceMappingURL=drawer-menu.component-7G2UKSSI.css.map */`],
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var Dge = ( () => {
    let t = class t extends fn {
        constructor() {
            super(...arguments),
            this.userService = z($r),
            this.userDeviceService = z(ur),
            this.showModal = wt(!1),
            this.data = new lt,
            this.data$ = this.data.asObservable(),
            this.fetchMedia$ = this.data$.pipe(Vt(Yn))
        }
        getData$(i, r=!0) {
            return this.userDeviceService.deviceType$.pipe(mt(s => s !== _n.Unknown), Lt(1), Vt(s => {
                let o = `Features?Key=${i}&DeviceType=${s}&ThemeType=${r ? 0 : 1}`;
                return this.httpService.get(this.mtsPath + this.apiUrls.easy + o)
            }
            ), Vt(s => Yn(s).pipe(ai(o => this.getMedia(o)))), Z8( (s, o) => [...s, o], []), He(s => this.data.next(s.toSort( (o, a) => o.pageNumber - a.pageNumber))))
        }
        getMedia(i) {
            return this.httpService.getBlob(`${this.mtsPath + this.apiUrls.easy}media/${i.mediaId}`, {
                responseType: "blob"
            }).pipe(Vt(r => eE(r)), We(r => (i.media = r,
            i)))
        }
        showSliderModal() {
            this.showModal.set(!0)
        }
        closeSliderModal(i) {
            this.showModal.set(!1),
            this.httpService.put(this.mtsPath + this.apiUrls.easy + "Features", {
                body: {
                    featureId: i,
                    deviceType: this.userDeviceService.deviceType == _n.Mobile ? 0 : 1
                }
            }).subscribe()
        }
    }
    ;
    t.\u0275fac = ( () => {
        let i;
        return function(s) {
            return (i || (i = Tn(t)))(s || t)
        }
    }
    )(),
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var FK = ["symbol-candle", ""]
  , LK = e => ({
    "--candlestick-bg": e
});
function BK(e, t) {
    if (e & 1 && (H(0, "div", 1)(1, "div", 3)(2, "div", 4)(3, "div", 5),
    me(4, "div", 6),
    W()()()()),
    e & 2) {
        let n, i = Te(), r = uc(3);
        ye("triggers", i.isMobile() ? "click:blur" : "mouseenter:mouseleave")("ngbPopover", r),
        Q(2),
        ye("ngStyle", Dn(11, LK, ((n = i.symbol()) == null ? null : n.lastTradedPrice) >= ((n = i.symbol()) == null ? null : n.firstTradedPrice) ? " #1bbf89" : "#db524b")),
        Q(),
        C5("left", i.candleParent().left + "%")("right", i.candleParent().right + "%"),
        Q(),
        C5("left", i.candleBody().left + "%")("right", i.candleBody().right + "%")
    }
}
function UK(e, t) {
    if (e & 1 && (H(0, "div", 7),
    oe(1, " O : "),
    H(2, "span"),
    oe(3),
    ha(4, "number"),
    W()(),
    H(5, "div", 7),
    oe(6, " H : "),
    H(7, "span"),
    oe(8),
    ha(9, "number"),
    W()(),
    H(10, "div", 7),
    oe(11, " L : "),
    H(12, "span"),
    oe(13),
    ha(14, "number"),
    W()(),
    H(15, "div", 7),
    oe(16, " C : "),
    H(17, "span"),
    oe(18),
    ha(19, "number"),
    W()()),
    e & 2) {
        let n, i, r, s, o = Te();
        Q(3),
        Mn(da(4, 4, (n = o.symbol()) == null ? null : n.firstTradedPrice)),
        Q(5),
        Mn(da(9, 6, (i = o.symbol()) == null ? null : i.maxDailyTradedPrice)),
        Q(5),
        Mn(da(14, 8, (r = o.symbol()) == null ? null : r.minDailyTradedPrice)),
        Q(5),
        Mn(da(19, 10, (s = o.symbol()) == null ? null : s.lastTradedPrice))
    }
}
var zge = ( () => {
    let t = class t {
        constructor() {
            this.symbol = Ee(),
            this.isMobile = Ee(!0),
            this.candleParent = wt({
                right: 0,
                left: 0
            }),
            this.candleBody = wt({
                right: 0,
                left: 0
            })
        }
        ngOnInit() {
            this.symbol && (this.calculateCandlePercent(),
            this.calculateCandleBodyPercent())
        }
        ngOnChanges(i) {
            i.symbol.currentValue !== i.symbol.previousValue && (this.calculateCandlePercent(),
            this.calculateCandleBodyPercent())
        }
        calculateCandlePercent() {
            this.candleParent.set({
                left: (this.symbol().minDailyTradedPrice - this.symbol().minDailyPrice) / (this.symbol().maxDailyPrice - this.symbol().minDailyPrice) * 100,
                right: (this.symbol().maxDailyPrice - this.symbol().maxDailyTradedPrice) / (this.symbol().maxDailyPrice - this.symbol().minDailyPrice) * 100
            })
        }
        calculateCandleBodyPercent() {
            this.candleBody.set({
                left: ((this.symbol().firstTradedPrice > this.symbol().lastTradedPrice ? this.symbol().lastTradedPrice : this.symbol().firstTradedPrice) - this.symbol().minDailyTradedPrice) / (this.symbol().maxDailyTradedPrice - this.symbol().minDailyTradedPrice) * 100,
                right: (this.symbol().maxDailyTradedPrice - (this.symbol().firstTradedPrice > this.symbol().lastTradedPrice ? this.symbol().firstTradedPrice : this.symbol().lastTradedPrice)) / (this.symbol().maxDailyTradedPrice - this.symbol().minDailyTradedPrice) * 100
            })
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["", "symbol-candle", ""]],
        inputs: {
            symbol: [1, "symbol"],
            isMobile: [1, "isMobile"]
        },
        features: [js],
        attrs: FK,
        decls: 4,
        vars: 1,
        consts: [["popUp", ""], ["id", "priceChart", 1, "price-chart", "d-flex", "flex-column", "justify-content-end", "w-100", "cud", 3, "triggers", "ngbPopover"], [1, "priceChart_centerline"], [1, "progress"], [1, "candlestick", 3, "ngStyle"], ["ng", "", 1, "candlestick-shadow"], [1, "candlestick-realbody"], [1, "mb-1", "fw-bold", "text-end"]],
        template: function(r, s) {
            if (r & 1 && (at(0, BK, 5, 13, "div", 1),
            me(1, "div", 2),
            at(2, UK, 20, 12, "ng-template", null, 0, hc)),
            r & 2) {
                let o;
                et(((o = s.symbol()) == null ? null : o.totalNumberOfSharesTraded) > 0 ? 0 : -1)
            }
        },
        dependencies: [Dv, Lv],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
function HK(e, t) {
    if (e & 1 && (H(0, "li", 10),
    oe(1),
    W()),
    e & 2) {
        let n = t.$implicit;
        Q(),
        Jn(" ", n, " ")
    }
}
function GK(e, t) {
    if (e & 1 && (H(0, "div", 1)(1, "ul", 9),
    us(2, HK, 2, 1, "li", 10, ls),
    W()()),
    e & 2) {
        let n, i = Te(2);
        Q(2),
        hs((n = i.integratedGroupType()) == null ? null : n.headers)
    }
}
function VK(e, t) {
    if (e & 1 && (H(0, "span", 11),
    oe(1),
    W()),
    e & 2) {
        let n = Te(3);
        Q(),
        Mn(n.symbolName())
    }
}
function $K(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div", 2)(1, "div"),
        oe(2, " \u0633\u0627\u0639\u062A \u0645\u062C\u0627\u0632 \u062B\u0628\u062A \u0633\u0641\u0627\u0631\u0634\u0627\u062A "),
        at(3, VK, 2, 1, "span", 11),
        W(),
        H(4, "svg-icon", 12),
        Qe("click", function() {
            yt(n);
            let r = Te(2);
            return St(r.handleClose())
        }),
        W()()
    }
    if (e & 2) {
        let n = Te(2);
        Q(3),
        et(n.symbolName() ? 3 : -1),
        Q(),
        ye("iconName", n.icons == null ? null : n.icons.Close)
    }
}
function WK(e, t) {
    if (e & 1 && (H(0, "div", 4)(1, "span", 13),
    oe(2, "|"),
    W(),
    me(3, "hr", 14),
    H(4, "span", 15),
    oe(5),
    W(),
    me(6, "hr", 14),
    W()),
    e & 2) {
        let n = t.$implicit;
        ye("ngClass", n == null ? null : n.classes),
        Q(5),
        Mn(n == null ? null : n.text)
    }
}
function jK(e, t) {
    if (e & 1 && (H(0, "div", 5),
    oe(1),
    W()),
    e & 2) {
        let n = t.$implicit;
        ye("ngClass", n == null ? null : n.classes),
        Q(),
        Jn(" ", n == null ? null : n.value, " ")
    }
}
function qK(e, t) {
    if (e & 1 && me(0, "div", 7),
    e & 2) {
        let n = t.$implicit;
        ye("ngClass", n)
    }
}
function zK(e, t) {
    if (e & 1 && (H(0, "div", 0),
    at(1, GK, 4, 0, "div", 1)(2, $K, 5, 2, "div", 2),
    H(3, "div", 3)(4, "div"),
    us(5, WK, 7, 2, "div", 4, ls),
    W(),
    H(7, "div"),
    us(8, jK, 2, 2, "div", 5, ls),
    W(),
    H(10, "div", 6),
    us(11, qK, 1, 1, "div", 7, ls),
    W(),
    H(13, "div")(14, "div")(15, "span", 8),
    oe(16, "\u0631\u0648\u0632\u0647\u0627\u06CC \u0647\u0641\u062A\u0647:"),
    W(),
    H(17, "span"),
    oe(18),
    W()()()()()),
    e & 2) {
        let n, i, r, s, o = Te();
        Q(),
        et(o.showHeaders() ? 1 : -1),
        Q(),
        et(!o.showHeaders() && o.showCloseButton() ? 2 : -1),
        Q(),
        ye("ngClass", o.showHeaders() ? "p-2 p-md-3" : "p-2"),
        Q(),
        fr("d-flex align-items-center justify-content-between text-center text-muted " + (o.showCompactSize() ? "small" : "")),
        Q(),
        hs((n = o.integratedGroupType()) == null ? null : n.titles),
        Q(2),
        fr("d-flex " + (o.showCompactSize() ? "small" : "")),
        Q(),
        hs((i = o.integratedGroupType()) == null ? null : i.times),
        Q(2),
        fr("d-flex " + (o.showCompactSize() ? "mb-1 small" : "mb-3")),
        Q(),
        hs((r = o.integratedGroupType()) == null ? null : r.progress),
        Q(2),
        fr("d-flex justify-content-between align-items-center " + (o.showCompactSize() ? "small" : "")),
        Q(5),
        Mn((s = o.integratedGroupType()) == null ? null : s.weekText)
    }
}
var RM = ( () => {
    let t = class t {
        constructor() {
            this.icons = Wt,
            this.integratedGroupType = oc.required(),
            this.symbolGroup = Ee(),
            this.symbolIsin = Ee(),
            this.showHeaders = Ee(!1),
            this.showCloseButton = oc(!0),
            this.symbolGroupChangeStatus = Ee(),
            this.showCompactSize = Ee(!1),
            this.show = oc(!1),
            this.symbolName = oc(""),
            this.closeChange = $t()
        }
        handleClose() {
            this.closeChange.emit(!0)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["symbol-group-market-time-item"]],
        inputs: {
            integratedGroupType: [1, "integratedGroupType"],
            symbolGroup: [1, "symbolGroup"],
            symbolIsin: [1, "symbolIsin"],
            showHeaders: [1, "showHeaders"],
            showCloseButton: [1, "showCloseButton"],
            symbolGroupChangeStatus: [1, "symbolGroupChangeStatus"],
            showCompactSize: [1, "showCompactSize"],
            show: [1, "show"],
            symbolName: [1, "symbolName"]
        },
        outputs: {
            integratedGroupType: "integratedGroupTypeChange",
            showCloseButton: "showCloseButtonChange",
            show: "showChange",
            symbolName: "symbolNameChange",
            closeChange: "closeChange"
        },
        decls: 1,
        vars: 1,
        consts: [[1, "bg-principal-2x-dark-mobile", "bg-principal-7x", "card", "mb-2", "shadow-sm"], [1, "bg-principal-2x", "bg-principal-4x-dark", "card-header", "p-0", "overflow-hidden"], [1, "card-header", "d-flex", "justify-content-between", "align-items-center", "pe-3", "bg-principal-4x-dark"], [1, "card-body", 3, "ngClass"], [1, "d-flex", "align-items-center", "justify-content-center", "text-center", "integrated-group-item", "small", 3, "ngClass"], [1, "p-0", 3, "ngClass"], [2, "height", "5px"], [1, "h-100", 3, "ngClass"], [1, "fw-bold"], [1, "list-group", "list-group-flush", "p-0", "m-0", 2, "--bs-list-group-bg", "transparent"], [1, "list-group-item", "px-2", "px-md-3", "border-principal-3x-dark-mobile", "border-principal-6x-dark"], [1, "text-primary"], ["width", "20", "height", "20", 1, "text-muted", "cup", 3, "click", "iconName"], [1, "opacity-5"], [1, "flex-fill"], [1, "text-center", "px-2"]],
        template: function(r, s) {
            r & 1 && at(0, zK, 19, 12, "div", 0),
            r & 2 && et(s.show() ? 0 : -1)
        },
        dependencies: [ir, Fn],
        styles: [`.integrated-group-item:last-child:after{content:"|";display:inline-block;color:#787c85;opacity:.5}
/*# sourceMappingURL=symbol-group-market-time-item.style-SOL3J6CD.css.map */
`],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
function XK(e, t) {
    if (e & 1 && me(0, "symbol-group-market-time-item", 5),
    e & 2) {
        let n = t.$implicit;
        ye("showHeaders", !0)("integratedGroupType", n)("show", !0)
    }
}
var DM = ( () => {
    let t = class t {
        constructor(i) {
            this.modalService = i,
            this.GroupTypeConstants = Fo
        }
        handleClose() {
            this.modalService.dismissAll()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(Mt(Jc))
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["symbol-group-market-time-list"]],
        decls: 8,
        vars: 0,
        consts: [["data-cy", "symbol-group-market-time-list-header", 1, "modal-header", "align-items-center"], [1, "modal-title", "fw-bold"], ["type", "button", "aria-label", "Close", 1, "btn-close", "ms-auto", "me-0", "p-0", "cup", 3, "click"], ["aria-hidden", "true"], ["data-cy", "symbol-group-market-time-list-detail", 1, "modal-body", "bg-principal-3x-dark-mobile"], [3, "showHeaders", "integratedGroupType", "show"]],
        template: function(r, s) {
            r & 1 && (H(0, "div", 0)(1, "span", 1),
            oe(2, "\u0633\u0627\u0639\u062A \u0645\u062C\u0627\u0632 \u062B\u0628\u062A \u0633\u0641\u0627\u0631\u0634\u0627\u062A"),
            W(),
            H(3, "button", 2),
            Qe("click", function() {
                return s.handleClose()
            }),
            me(4, "span", 3),
            W()(),
            H(5, "div", 4),
            us(6, XK, 1, 3, "symbol-group-market-time-item", 5, ls),
            W()),
            r & 2 && (Q(6),
            hs(s.GroupTypeConstants.IntegratedGroupTypes))
        },
        dependencies: [RM],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
function KK(e, t) {
    e & 1 && (H(0, "span", 7),
    oe(1, "\u062F\u0631 \u062D\u0627\u0644 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC ..."),
    W())
}
function YK(e, t) {
    e & 1 && (H(0, "span", 8),
    oe(1, "\u062F\u0631 \u062D\u0627\u0644 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC..."),
    W())
}
function QK(e, t) {
    if (e & 1 && (H(0, "div", 0),
    me(1, "div", 1),
    H(2, "div", 2),
    me(3, "svg-icon", 3)(4, "div", 4),
    H(5, "div", 5),
    me(6, "div", 6),
    at(7, KK, 2, 0, "span", 7)(8, YK, 2, 0, "span", 8),
    W()(),
    me(9, "svg-icon", 9),
    W()),
    e & 2) {
        let n = Te();
        Q(3),
        ye("iconName", n.icons.LogoDarkLight),
        Q(4),
        et(n.isMobile() ? 8 : 7),
        Q(2),
        ye("iconName", n.icons.Mofidlogo)
    }
}
var f7e = ( () => {
    let t = class t {
        constructor(i) {
            this.authService = i,
            this.startupService = z(Sh),
            this.icons = Wt,
            this.isMobile = Ee(!0),
            this.showLoading = wt(!0),
            this.isSecondaryAuth = this.startupService.authenticationType === aa.Secondary
        }
        ngOnInit() {
            setTimeout( () => {
                this.showLoading.set(!1)
            }
            , 500),
            this.isSecondaryAuth || setTimeout( () => {
                this.authService.waitingForLogin && (this.authService.waitingForLogin = !1,
                this.authService.setLoginError(Sr.General))
            }
            , 1e4)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(Mt(Ir))
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["waiting-for-login"]],
        inputs: {
            isMobile: [1, "isMobile"]
        },
        decls: 1,
        vars: 1,
        consts: [[1, "d-flex", "justify-content-between", "align-items-center", "position-fixed", "full-offset", "bg-principal", "p-2", "flex-column", 2, "z-index", "1000"], [1, "mt-5"], [1, "text-center", "mt-2", "d-flex", "flex-column", "gap-3"], ["height", "80", 1, "mb-1", 3, "iconName"], ["dir", "ltr", 1, "d-flex", "align-items-center", "justify-content-center", "p-1"], [1, "w-100", "d-flex", "flex-column", "justify-center", "align-items-center"], [1, "spinner", "spinner-border"], [1, "w-100", "mt-3", 2, "z-index", "103"], [1, "w-100", "mt-3"], ["width", "150", 1, "mb-4", 3, "iconName"]],
        template: function(r, s) {
            r & 1 && at(0, QK, 10, 3, "div", 0),
            r & 2 && et(!s.isSecondaryAuth && s.authService.waitingForLogin || s.showLoading() ? 0 : -1)
        },
        dependencies: [Fn],
        encapsulation: 2
    });
    let e = t;
    return e
}
)();
var JK = G5("~s")
  , ZK = {
    mainWidth: 500,
    mainHeight: 150,
    width: 0,
    barWidth: 10,
    height: 0,
    margin: {
        top: 10,
        right: 70,
        bottom: 10,
        left: 15
    }
}
  , y7e = ( () => {
    let t = class t {
        constructor() {
            this.isMobile = Ee(!1),
            this.chartId = Ee.required(),
            this.items = Ee.required(),
            this.barThickness = Ee(),
            this.barColor = Ee(),
            this.loadingMode = Ee(!1),
            this.showAllDates = Ee(!1),
            this.height = Ee(),
            this.barWidth = Ee(void 0),
            this.dimension = C({}, ZK),
            this.rectBarItems = [],
            this.showStartEndLabel = () => {
                let i = this.xScale.domain()
                  , r = Math.round(i.length / 4) + 1;
                if (this.label.selectAll(".date-text").remove(),
                this.showAllDates())
                    for (let s = 0; s <= i.length - 1; s++)
                        this.showDate(i[s]);
                else {
                    for (let s = 0; s < 3; s++)
                        this.showDate(i[s * r]);
                    this.showDate(i[i.length - 1])
                }
            }
            ,
            this.mouseMove = i => {
                if (!this.rectBarItems.length)
                    return;
                let r = i.x;
                if (r < 50)
                    return;
                this.focus.style("display", null);
                let s = this.rectBarItems.map(a => a.x).reduce( (a, c) => Math.abs(c - r) < Math.abs(a - r) ? c : a)
                  , o = this.rectBarItems.find(a => a.x === s);
                this.showLabel(o.date, o.value)
            }
        }
        ngOnChanges(i) {
            let {firstChange: r=void 0, currentValue: s=void 0} = i?.items ?? {};
            r || this.purifyItems(s)
        }
        ngAfterViewInit() {
            this.rootDOM = document.getElementById(this.chartId()),
            this.calculateDimension(),
            this.purifyItems(),
            this.observeResizing()
        }
        calculateDimension() {
            let {mainWidth: i, mainHeight: r, margin: s} = this.dimension
              , {top: o, right: a, bottom: c, left: l} = s;
            this.dimension.mainWidth = this.rootDOM.clientWidth,
            this.dimension.width = i - l - a,
            this.dimension.height = r - o - c,
            this.dimension.barWidth = this.barWidth() ?? (this.isMobile() ? 6 : 10)
        }
        purifyItems(i) {
            let s = (i || this.items())?.map(o => ({
                date: o.date,
                value: o.val
            }));
            this.generateChart(s)
        }
        observeResizing() {
            new ResizeObserver( () => {
                if (!this.rootDOM)
                    return;
                this.calculateDimension();
                let r = this.items()?.map(s => ({
                    date: s.date,
                    value: s.val
                }));
                this.generateChart(r)
            }
            ).observe(this.rootDOM)
        }
        generateChart(i) {
            this.rectBarItems = [];
            let r = i.length ? zv(i, (s, o) => +s.date?.replaceAll("/", "") - +o.date?.replaceAll("/", "")) : [];
            this.removeChartElements(),
            this.svgDOM = pl(`#${this.chartId()}`).style("max-height", this.dimension.mainWidth + "px").style("height", "auto").append("svg").attr("id", "barChartSvg").attr("width", "100%").attr("height", this.height() ? this.height() : this.dimension.mainHeight),
            this.createYGroup(i),
            this.createXGroup(r),
            this.createPositiveGroup(i),
            gc(i, s => +s.value) < 0 && this.createNegativeGroup(i),
            this.label = this.svgDOM.append("g").attr("class", "label").style("font-family", "IRANSansX"),
            this.focus = this.svgDOM.append("g").attr("class", "focus").style("font-family", "IRANSansX"),
            i.length && (this.showStartEndLabel(),
            this.generateRectBarData(),
            this.createFocus())
        }
        removeChartElements() {
            this.focus?.remove(),
            this.label?.remove(),
            this.positiveBarGroup?.remove(),
            this.negativeBarGroup?.remove(),
            this.yGroup?.remove(),
            this.svgDOM?.remove()
        }
        createYGroup(i) {
            this.yScale = V5().range([this.dimension.height, this.dimension.margin.top]),
            this.yScale.domain([gc(i, s => +s.value) > 0 ? 0 : gc(i, s => +s.value), Fh(i, s => +s.value)]),
            this.yGroup = this.svgDOM.append("g").attr("class", "axis axis--y").attr("font-size", 10).style("font-family", "IRANSansX").attr("font-weight", "400");
            let r = H5(this.yScale).ticks(5).tickFormat(s => this.formatAbbreviation(s));
            this.yGroup.call(r).call(s => s.select(".domain").remove()).call(s => s.selectAll(".tick line").attr("x1", this.dimension.margin.left + 40).attr("x2", this.dimension.margin.left + 40 + this.dimension.mainWidth - this.dimension.margin.right).attr("opacity", "1").attr("stroke-width", "1px").attr("stroke-opacity", .1)).call(s => s.selectAll(".tick text").style("direction", "ltr").attr("opacity", "1").attr("x", this.dimension.margin.left + 20))
        }
        createXGroup(i) {
            this.xScale = Xv().range([0, this.dimension.width]),
            this.xScale.domain(i.map(r => r.date))
        }
        createPositiveGroup(i) {
            this.positiveBarGroup = this.svgDOM.append("g"),
            this.positiveBarGroup.selectAll(".bar").data(i.filter(r => r.value >= 0)).enter().append("rect").attr("class", "bar").attr("rx", 3).attr("ry", 3).attr("x", r => this.xScale(r.date) + this.dimension.margin.left + 50).attr("y", r => this.yScale(r.value)).attr("width", this.barThickness() ? this.barThickness() : this.dimension.barWidth).attr("fill", this.barColor() ? this.barColor() : gc(i, r => +r.value) < 0 ? "#1bbf89" : "#366184").attr("height", r => Math.abs(this.yScale(0) - this.yScale(+(r?.value ?? .1))))
        }
        createNegativeGroup(i) {
            this.negativeBarGroup = this.svgDOM.append("g"),
            this.negativeBarGroup.selectAll(".bar").data(i.filter(r => r.value < 0)).enter().append("rect").attr("class", "bar").attr("rx", 3).attr("ry", 3).attr("x", r => this.xScale(r.date) + this.dimension.margin.left + 50).attr("y", () => this.yScale(0)).attr("width", this.barThickness() ? this.barThickness() : this.dimension.barWidth).attr("height", r => Math.abs(this.yScale(0) - this.yScale(-r.value))).attr("fill", "#db524b")
        }
        generateRectBarData() {
            this.svgDOM.selectAll(".bar")?._groups?.[0]?.forEach(r => {
                this.rectBarItems.push(ve(C({}, r?.__data__), {
                    x: r?.getClientRects()?.[0]?.x
                }))
            }
            )
        }
        createFocus() {
            this.dimension.width <= 0 || (this.showAllDates() || (this.focus.append("rect").attr("id", "rect-date-text").attr("width", 70).attr("height", 16).attr("rx", 3).attr("fill", "#a3bce6").attr("y", 8),
            this.focus.append("text").attr("id", "date-text").attr("text-anchor", "middle").attr("fill", "black").attr("font-size", 10)),
            this.focus.append("rect").attr("id", "rect-value-text").attr("width", 70).attr("height", 16).attr("rx", 3).attr("fill", "#a3bce6").attr("y", -4),
            this.focus.append("line").attr("id", "vertical-line").attr("stroke", "#666").attr("stroke-width", 1).attr("stroke-opacity", .7).attr("stroke-dasharray", "3,3").attr("y1", -this.dimension.height).attr("y2", -10),
            this.focus.append("text").attr("id", "value-text").attr("text-anchor", "middle").attr("fill", "black").attr("font-size", 10).style("direction", "ltr"),
            this.svgDOM.append("rect").attr("class", "zoom").attr("fill", "none").attr("pointer-events", "all").attr("width", this.dimension.width + 50).attr("height", this.dimension.height).attr("transform", "translate(" + this.dimension.margin.left + "," + this.dimension.margin.top + ")").on("pointerup", () => {
                this.focus.style("display", "none"),
                this.label.style("display", null)
            }
            ).on("pointerout", () => {
                this.focus.style("display", "none"),
                this.label.style("display", null)
            }
            ).on("pointermove", this.mouseMove.bind(this)),
            this.focus.style("display", "none"))
        }
        formatAbbreviation(i) {
            let r = Fh(this.items(), c => c.val)
              , s = gc(this.items(), c => c.val)
              , o = Number.parseFloat(r) - Number.parseFloat(s);
            if (this.items().length > 1 && o <= 100)
                return i;
            let a = JK(i);
            switch (a[a.length - 1]) {
            case "k":
                return a.slice(0, -1) + "K";
            case "m":
                return a.slice(0, -1) + "M";
            case "g":
            case "G":
                return a.slice(0, -1) + "B";
            default:
                return a
            }
        }
        showDate(i) {
            +this.xScale(i) >= 0 && this.label.append("text").attr("class", "date-text").attr("text-anchor", "middle").attr("fill", "currentColor").attr("font-size", 10).attr("transform", "translate(" + (+this.xScale(i) + this.dimension.margin.left + 50) + "," + (this.dimension.height + this.dimension.margin.bottom + (this.showAllDates() ? 10 : 5)) + ")" + (this.showAllDates() ? "rotate(330)" : "")).text(i)
        }
        showLabel(i, r) {
            let s = 0;
            this.isMobile() && this.rectBarItems[this.rectBarItems.length - 1].date === i && (s = -10),
            this.focus.select("#rect-date-text").attr("x", +this.xScale(i) + this.dimension.margin.left + s + 17),
            this.focus.select("#rect-value-text").attr("x", +this.xScale(i) + this.dimension.margin.left + s + 17),
            this.focus.select("#date-text").attr("transform", "translate(" + (+this.xScale(i) + this.dimension.margin.left + s + 52) + ",20)").text(i),
            this.focus.select("#vertical-line").attr("transform", "translate(" + (+this.xScale(i) + this.dimension.margin.left + (this.isMobile() ? 53 : 55)) + "," + (this.dimension.height + this.dimension.margin.bottom + 5) + ")"),
            this.focus.select("#value-text").attr("transform", "translate(" + (+this.xScale(i) + this.dimension.margin.left + s + 52) + ",10)").text(WS(r))
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["bar-chart"]],
        inputs: {
            isMobile: [1, "isMobile"],
            chartId: [1, "chartId"],
            items: [1, "items"],
            barThickness: [1, "barThickness"],
            barColor: [1, "barColor"],
            loadingMode: [1, "loadingMode"],
            showAllDates: [1, "showAllDates"],
            height: [1, "height"],
            barWidth: [1, "barWidth"]
        },
        features: [js],
        decls: 1,
        vars: 1,
        consts: [[1, "w-100", "rounded", "mb-1", "position-relative", "z-2", "pt-3", 2, "min-height", "130px", 3, "id"]],
        template: function(r, s) {
            r & 1 && me(0, "div", 0),
            r & 2 && ye("id", s.chartId())
        },
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var eY = function(e) {
    return e.IndividualBuyPower = "individualbuypower",
    e.NetIndividual = "netindividual",
    e.PerCapita = "percapita",
    e
}(eY || {});
function tY(e, t) {
    if (e & 1 && me(0, "svg-icon", 1),
    e & 2) {
        let n = Te();
        fr("icon " + n.clockClass()),
        ye("title", n.tooltip())("iconName", n.icon())
    }
}
var NM = ( () => {
    let t = class t {
        constructor() {
            this.clockClass = Ee(),
            this.tooltip = Ee(),
            this.icon = Ee(Wt.Clock)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["clock-icon"]],
        inputs: {
            clockClass: [1, "clockClass"],
            tooltip: [1, "tooltip"],
            icon: [1, "icon"]
        },
        decls: 1,
        vars: 1,
        consts: [["data-cy", "clock-state-class", "width", "20", "height", "20", 3, "title", "iconName", "class"], ["data-cy", "clock-state-class", "width", "20", "height", "20", 3, "title", "iconName"]],
        template: function(r, s) {
            r & 1 && at(0, tY, 1, 4, "svg-icon", 0),
            r & 2 && et(s.icon() ? 0 : -1)
        },
        dependencies: [Fn],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var FM = ( () => {
    let t = class t {
        constructor() {
            this.clock = Ee()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["clock"]],
        inputs: {
            clock: [1, "clock"]
        },
        decls: 2,
        vars: 1,
        consts: [["id", "easy-clock-id", 1, "fw-bold", "ss03"]],
        template: function(r, s) {
            r & 1 && (H(0, "span", 0),
            oe(1),
            W()),
            r & 2 && (Q(),
            Mn(s.clock()))
        },
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
function nY(e, t) {
    if (e & 1 && me(0, "clock", 0),
    e & 2) {
        let n = Te();
        ye("clock", n.clock())
    }
}
function iY(e, t) {
    if (e & 1 && me(0, "clock-icon", 1),
    e & 2) {
        let n = Te();
        ye("clockClass", n.clockClass())("tooltip", n.tooltip())("icon", n.icon())
    }
}
var Fp = ( () => {
    let t = class t {
        onClick() {
            this.clickable() && this.handleOpen()
        }
        constructor(i, r) {
            this.modalService = i,
            this.timeService = r,
            this.clickable = Ee(!0),
            this.showClockText = Ee(!0),
            this.showClockIcon = Ee(!0),
            this.clockClass = Ee.required(),
            this.tooltip = Ee.required(),
            this.icon = Ee.required(),
            this.clockChange = $t(),
            this.clock = wt("")
        }
        ngOnInit() {
            this.getClock()
        }
        ngOnDestroy() {
            this.sub && this.sub.unsubscribe()
        }
        handleOpen() {
            this.modalService.open(DM, {
                scrollable: !0
            })
        }
        handleClock(i) {
            this.clockChange.emit(i)
        }
        getClock() {
            this.sub = this.timeService.serverTimeObs$.subscribe(i => {
                this.clock.set(i),
                this.clockChange.emit(i)
            }
            )
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(Mt(Jc),Mt(Rp))
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["clock-management"]],
        hostBindings: function(r, s) {
            r & 1 && Qe("click", function() {
                return s.onClick()
            })
        },
        inputs: {
            clickable: [1, "clickable"],
            showClockText: [1, "showClockText"],
            showClockIcon: [1, "showClockIcon"],
            clockClass: [1, "clockClass"],
            tooltip: [1, "tooltip"],
            icon: [1, "icon"]
        },
        outputs: {
            clockChange: "clockChange"
        },
        decls: 2,
        vars: 2,
        consts: [[3, "clock"], [3, "clockClass", "tooltip", "icon"]],
        template: function(r, s) {
            r & 1 && at(0, nY, 1, 1, "clock", 0)(1, iY, 1, 3, "clock-icon", 1),
            r & 2 && (et(s.showClockText() ? 0 : -1),
            Q(),
            et(s.showClockIcon() ? 1 : -1))
        },
        dependencies: [FM, NM],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var X7e = ( () => {
    let t = class t {
        constructor(i) {
            this.timeService = i,
            this.clockComponent = sc(Fp),
            this.clockChange = $t(),
            this.clock = Ee(),
            this.showClockText = Ee(!0),
            this.showClockIcon = Ee(!0),
            this.clockClass = wt(""),
            this.iconName = wt(Wt.Clock),
            this.tooltip = wt("")
        }
        onClockChange(i) {
            this.clockChange.emit(i);
            let r = this.timeService.isMarketOpenSub.getValue();
            r !== null && (r ? (this.clockClass.set("text-success"),
            this.tooltip.set("\u0628\u0627\u0632\u0627\u0631 \u0628\u0627\u0632 \u0627\u0633\u062A"),
            this.iconName.set(Wt.Clock)) : (this.clockClass.set("text-danger"),
            this.tooltip.set("\u0628\u0627\u0632\u0627\u0631 \u0628\u0633\u062A\u0647 \u0627\u0633\u062A"),
            this.iconName.set(Wt.ClockError)))
        }
        openClockModal() {
            this.clockComponent().handleOpen()
        }
        handleOpen() {
            this.clockComponent().handleOpen()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(Mt(Rp))
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["app-clock"]],
        viewQuery: function(r, s) {
            r & 1 && cc(s.clockComponent, Fp, 5),
            r & 2 && lc()
        },
        inputs: {
            clock: [1, "clock"],
            showClockText: [1, "showClockText"],
            showClockIcon: [1, "showClockIcon"]
        },
        outputs: {
            clockChange: "clockChange"
        },
        decls: 1,
        vars: 5,
        consts: [[3, "clockChange", "tooltip", "clockClass", "showClockIcon", "showClockText", "icon"]],
        template: function(r, s) {
            r & 1 && (H(0, "clock-management", 0),
            Qe("clockChange", function(a) {
                return s.onClockChange(a)
            }),
            W()),
            r & 2 && ye("tooltip", s.tooltip())("clockClass", s.clockClass())("showClockIcon", s.showClockIcon())("showClockText", s.showClockText())("icon", s.iconName())
        },
        dependencies: [Fp],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var rY = (e, t) => ({
    "notify-top": e,
    "notify-bottom-offset": t
});
function sY(e, t) {
    if (e & 1 && (H(0, "small", 7),
    oe(1),
    W()),
    e & 2) {
        let n = Te().$implicit
          , i = Te(2);
        Q(),
        Jn("(", i.notifications()[n].count, ")")
    }
}
function oY(e, t) {
    if (e & 1 && (H(0, "span", 8),
    oe(1),
    me(2, "svg-icon", 9),
    W()),
    e & 2) {
        let n, i = Te().$implicit, r = Te(2);
        Q(),
        Jn(" ", (n = (n = r.notifications()[i]) == null ? null : n.detailText) !== null && n !== void 0 ? n : "\u062C\u0632\u0626\u06CC\u0627\u062A", " "),
        Q(),
        ye("iconName", r.icons.ChevronLeft)
    }
}
function aY(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div", 4),
        Qe("click", function() {
            let r = yt(n).$implicit
              , s = Te(2);
            return St(s.onNotifyClick(r))
        }),
        H(1, "span", 5),
        me(2, "svg-icon", 6),
        oe(3),
        W(),
        at(4, sY, 2, 1, "small", 7)(5, oY, 3, 2, "span", 8),
        W()
    }
    if (e & 2) {
        let n = t.$implicit
          , i = Te(2);
        ye("ngClass", i.notifications()[n].classes),
        Q(2),
        ye("iconName", i.notifications()[n].icon),
        Q(),
        Jn(" ", i.notifications()[n].text, " "),
        Q(),
        et(i.notifications()[n].showCount ? 4 : -1),
        Q(),
        et(i.notifications()[n].extra ? 5 : -1)
    }
}
function cY(e, t) {
    if (e & 1 && (H(0, "div", 1),
    ha(1, "async"),
    us(2, aY, 6, 5, "div", 3, ls),
    W()),
    e & 2) {
        let n = Te();
        ye("ngClass", u4(3, rY, da(1, 1, n.notifyService.notifyOrderForm$), n.isStockDetailsAvailable())),
        Q(2),
        hs(n.Object.keys(n.notifications()))
    }
}
function lY(e, t) {
    if (e & 1 && (H(0, "small", 7),
    oe(1),
    W()),
    e & 2) {
        let n = Te().$implicit
          , i = Te(2);
        Q(),
        Jn("(", i.notifications()[n].count, ")")
    }
}
function uY(e, t) {
    if (e & 1 && (H(0, "span", 8),
    oe(1),
    me(2, "svg-icon", 9),
    W()),
    e & 2) {
        let n, i = Te().$implicit, r = Te(2);
        Q(),
        Jn(" ", (n = (n = r.notifications()[i]) == null ? null : n.detailText) !== null && n !== void 0 ? n : "\u062C\u0632\u0626\u06CC\u0627\u062A", " "),
        Q(),
        ye("iconName", r.icons.ChevronLeft)
    }
}
function hY(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div", 11, 0),
        Qe("click", function() {
            let r = yt(n).$implicit
              , s = Te(2);
            return St(s.onNotifyClick(r))
        })("mouseover", function() {
            yt(n);
            let r = Te(2);
            return St(r.onMouseOver())
        })("mouseout", function(r) {
            yt(n);
            let s = uc(1)
              , o = Te(2);
            return St(o.onMouseOut(r, s))
        }),
        me(2, "svg-icon", 6),
        H(3, "span", 12),
        oe(4),
        W(),
        at(5, lY, 2, 1, "small", 7)(6, uY, 3, 2, "span", 8),
        W()
    }
    if (e & 2) {
        let n = t.$implicit
          , i = Te(2);
        ye("ngClass", i.notifications()[n].classes),
        Q(2),
        ye("iconName", i.notifications()[n].icon),
        Q(2),
        Mn(i.notifications()[n].text),
        Q(),
        et(i.notifications()[n].showCount ? 5 : -1),
        Q(),
        et(i.notifications()[n].extra ? 6 : -1)
    }
}
function dY(e, t) {
    if (e & 1 && (H(0, "div", 2),
    us(1, hY, 7, 5, "div", 10, ls),
    W()),
    e & 2) {
        let n = Te();
        Q(),
        hs(n.Object.keys(n.notifications()))
    }
}
var LM = "notify__item--show";
var u9e = ( () => {
    let t = class t {
        get showNotifTime() {
            return this.isMobile() ? 3e3 : 5e3
        }
        constructor(i, r, s) {
            this.notifyService = i,
            this.sidePanelServiceService = r,
            this.router = s,
            this.icons = Wt,
            this.isMobile = Ee(!0),
            this.Object = Object,
            this.notifications = wt({}),
            this.notifMouseFocus = !1,
            this.counter = 0,
            this.isStockDetailsAvailable = xi(this.notifyService.isStockDetailsAvailable$),
            i.notify$.subscribe(o => this.handleNotification(o))
        }
        handleNotification(i) {
            let r = this.counter++;
            this.checkDuplicateMessages(i.text) || this.showFlow(i, r).pipe(Lt(1)).subscribe()
        }
        checkDuplicateMessages(i) {
            let r = !1;
            return this.Object.keys(this.notifications()).some(s => {
                if (this.notifications()[s].text === i)
                    return this.notifications.update(a => {
                        let c = C({}, a);
                        return c[s].count++,
                        c
                    }
                    ),
                    r = !0,
                    !0
            }
            ),
            r
        }
        showFlow(i, r) {
            let s = `${r}`;
            this.notifications.update(a => {
                let c = C({}, a);
                return c[s] = {
                    count: 1,
                    text: i.text,
                    classes: [i.class],
                    icon: i.icon,
                    showCount: i.showCount,
                    extra: i.extra,
                    detailText: i.detailText
                },
                c
            }
            );
            let o = i.extra ? 2e3 : 0;
            return Be(this.notifications()[s]).pipe(ss(200), li(a => (this.showNotif(s, a.text),
            Be(this.notifications()[s]).pipe(ss(this.showNotifTime + o), ss(((this.notifications()[s]?.count ?? 1) - 1) * 300), li( () => this.removeNotification(s))))))
        }
        removeNotification(i) {
            return this.notifMouseFocus ? Be(null) : (this.removeNotifClass(i),
            Be(this.notifications()[i]).pipe(ss(200), He( () => this.removeNotif(i))))
        }
        waitForDuplicatedNotif(i) {
            let r = 1
              , s = Be(i).pipe(ss(2e3));
            for (; r < this.notifications()[i].count; )
                s = s.pipe(ss(2e3)),
                r++;
            return s
        }
        showNotif(i, r) {
            this.notifications()[i] && this.notifications.update(s => {
                let o = C({}, s);
                return o[i].classes.push(LM),
                o[i].classes.push(o[i].extra ? "cup" : ""),
                o[i].text = r,
                o
            }
            )
        }
        removeNotif(i) {
            this.notifications()[i] && (this.counter--,
            this.notifications.update(r => {
                let s = C({}, r);
                return delete s[i],
                s
            }
            ))
        }
        removeNotifClass(i) {
            if (!this.notifications()[i])
                return;
            let r = this.notifications()[i].classes.findIndex(s => s === LM);
            r > -1 && this.notifications.update(s => {
                let o = C({}, s);
                return o[i].classes.splice(r, 1),
                o
            }
            )
        }
        onMouseOver() {
            this.notifMouseFocus = !0
        }
        onMouseOut(i, r) {
            let s = i.toElement || i.relatedTarget;
            s?.parentNode === r || s === r || (this.notifMouseFocus = !1,
            setTimeout( () => {
                let o = this.counter;
                for (; o >= 0; )
                    this.notifications()[`${o}`] && this.removeNotification(`${o}`).subscribe(),
                    o--
            }
            , 2e3))
        }
        onNotifyClick(i) {
            if (typeof this.notifications()[i].extra == "string")
                if (this.isMobile())
                    this.router.navigateByUrl(this.notifications()[i].extra.toString());
                else {
                    let r = GS(this.notifications()[i].extra.toString().substring(1), this.notifications()[i]?.detailText);
                    this.sidePanelServiceService.openSidePanelFromRoute(r)
                }
            else
                typeof this.notifications()[i].extra == "function" && this.notifications()[i].extra()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(Mt(Ls),Mt(cE),Mt(_r))
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["app-notify"]],
        inputs: {
            isMobile: [1, "isMobile"]
        },
        decls: 2,
        vars: 2,
        consts: [["parent", ""], [1, "notify", "d-flex", "flex-column", "justify-content-end", 3, "ngClass"], [1, "notify", "d-flex", "flex-column", "justify-content-end"], ["data-cy", "notify-class", 1, "d-flex", "justify-content-between", "align-items-center", "notify__item", "rounded", "p-1", 3, "ngClass"], ["data-cy", "notify-class", 1, "d-flex", "justify-content-between", "align-items-center", "notify__item", "rounded", "p-1", 3, "click", "ngClass"], ["data-cy", "notify-message", 1, "d-flex", "align-items-center"], ["width", "20", "height", "20", 1, "px-2", "py-1", 3, "iconName"], [1, "me-1"], [1, "text-nowrap", "ms-1"], ["width", "20", "height", "20", 1, "", 3, "iconName"], ["data-cy", "notify-class", 1, "d-flex", "justify-content-between", "align-items-center", "notify__item", "rounded", "p-2", 3, "ngClass"], ["data-cy", "notify-class", 1, "d-flex", "justify-content-between", "align-items-center", "notify__item", "rounded", "p-2", 3, "click", "mouseover", "mouseout", "ngClass"], ["data-cy", "notify-message", 1, "flex-grow-1"]],
        template: function(r, s) {
            r & 1 && at(0, cY, 4, 6, "div", 1)(1, dY, 3, 0, "div", 2),
            r & 2 && (et(s.isMobile() ? 0 : -1),
            Q(),
            et(s.isMobile() ? -1 : 1))
        },
        dependencies: [ir, Fv, Fn],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
function fY(e, t) {
    e & 1 && (H(0, "div", 13),
    oe(1, "\u0644\u06CC\u0646\u06A9 \u0647\u0627\u06CC \u06A9\u0645\u06A9\u06CC \u0628\u0631\u0648\u0632 \u0631\u0633\u0627\u0646\u06CC :"),
    W())
}
function pY(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div", 16),
        Qe("click", function() {
            let r = yt(n).$implicit
              , s = Te(2);
            return St(s.downloadBrowserLinkClickHandler(r.link))
        }),
        me(1, "img", 17),
        H(2, "span", 18),
        oe(3),
        W()()
    }
    if (e & 2) {
        let n = t.$implicit;
        Q(),
        ye("title", n.linkTitle)("ngSrc", n.icon),
        Q(2),
        Mn(n.linkTitle)
    }
}
function gY(e, t) {
    if (e & 1) {
        let n = an();
        me(0, "div", 0),
        H(1, "div", 1)(2, "div", 2)(3, "div", 3),
        me(4, "svg-icon", 4),
        W(),
        H(5, "svg-icon", 5),
        Qe("click", function() {
            yt(n);
            let r = Te();
            return St(r.checkBrowserVersionIsOld.set(!1))
        }),
        W(),
        H(6, "div", 6),
        oe(7, "\u0646\u0633\u062E\u0647 \u0645\u0631\u0648\u0631\u06AF\u0631 \u0634\u0645\u0627 \u0642\u062F\u06CC\u0645\u06CC \u0627\u0633\u062A!"),
        W(),
        H(8, "div", 7)(9, "strong", 8),
        oe(10, "\u06A9\u0627\u0631\u0628\u0631 \u06AF\u0631\u0627\u0645\u06CC!"),
        W(),
        H(11, "p", 9),
        oe(12, "\u062C\u0647\u062A \u06A9\u0633\u0628 \u062A\u062C\u0631\u0628\u0647 \u0628\u0647\u062A\u0631 \u062F\u0631 \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0627\u0632 \u0627\u06CC\u0632\u06CC \u062A\u0631\u06CC\u062F\u0631 \u0645\u0631\u0648\u0631\u06AF\u0631 \u062E\u0648\u062F \u0631\u0627 \u0628\u0631\u0648\u0632 \u0646\u0645\u0627\u06CC\u06CC\u062F."),
        W(),
        H(13, "a", 10),
        me(14, "svg-icon", 11),
        oe(15, " \u0631\u0627\u0647\u0646\u0645\u0627\u06CC \u0628\u0631\u0648\u0632 \u0631\u0633\u0627\u0646\u06CC \u0645\u0631\u0648\u0631\u06AF\u0631 "),
        me(16, "svg-icon", 12),
        W(),
        at(17, fY, 2, 0, "div", 13),
        W(),
        H(18, "div", 14),
        us(19, pY, 4, 3, "div", 15, ls),
        W()()()
    }
    if (e & 2) {
        let n, i = Te();
        Q(4),
        ye("iconName", i.icons.InfoBox),
        Q(),
        ye("iconName", i.icons.Close),
        Q(9),
        ye("iconName", i.icons.QuestionBox),
        Q(2),
        ye("iconName", i.icons.ChevronLeft),
        Q(),
        et((n = i.helpLinks()) != null && n.length ? 17 : -1),
        Q(2),
        hs(i.helpLinks())
    }
}
var O9e = ( () => {
    let t = class t {
        ngOnInit() {
            this.userDeviceService.deviceType$.pipe(mt(i => i !== _n.Unknown)).subscribe(i => {
                if (this.checkBrowserVersionIsOld.set(!this.userDeviceService.isValidBrowserVersion(i)),
                this.checkBrowserVersionIsOld()) {
                    let r = KS.filter(s => this.userDeviceService.browser.includes(s.browserName)).flatMap(s => s.linksInfo);
                    this.getLInkList(i, r)
                }
            }
            )
        }
        getLInkList(i, r) {
            this.userDeviceService.isAndroid ? this.helpLinks.set(r.filter(s => s.os === "android")) : this.userDeviceService.isiOS ? this.helpLinks.set(r.filter(s => s.os === "ios")) : i === _n.Desktop && this.helpLinks.set(r.filter(s => s.os === "desktop"))
        }
        downloadBrowserLinkClickHandler(i) {
            window.open(i, "_blank")
        }
        constructor(i) {
            this.userDeviceService = i,
            this.icons = Wt,
            this.checkBrowserVersionIsOld = wt(!1),
            this.helpLinks = wt([])
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(Mt(ur))
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["user-warning-modal"]],
        decls: 1,
        vars: 1,
        consts: [[1, "overlay", "active", 2, "right", "0", "z-index", "10001"], [1, "position-fixed", "full-offset", "d-flex", "align-items-center", "justify-content-center", 2, "z-index", "10001"], [1, "bg-principal", "m-4", "p-5", "rounded", "shadow-lg", "text-dark", "position-relative", 2, "min-width", "380px"], [1, "text-center"], ["width", "48", "height", "48", 1, "text-global", 3, "iconName"], ["width", "24", "height", "24", 1, "cup", "text-secondary", "position-absolute", "end-0", "top-0", "p-3", 3, "click", "iconName"], [1, "text-warning", "h6", "text-center"], [1, "text-secondary"], [1, "me-2", "d-block"], [1, "m-0"], ["href", "https://learning.emofid.com/how-to-clear-cache", "target", "_blank", 1, "text-body", "d-flex", "align-items-center", "rounded", "py-1", "px-3", "bg-principal-3x", "bg-principal-4x-dark", "my-2", 2, "gap", "0.5rem"], ["width", "24", "height", "24", 1, "text-secondary", 3, "iconName"], ["width", "24", "height", "24", 1, "text-secondary", "ms-auto", 3, "iconName"], [1, "text-secondary", "mt-2", "text-muted", "text-center"], [1, "d-flex", "justify-content-center", "mt-4", 2, "gap", "1.5rem"], [1, "text-center", "cup", "text-body", "d-flex", "flex-column", "align-items-center", 2, "gap", "0.5rem"], [1, "text-center", "cup", "text-body", "d-flex", "flex-column", "align-items-center", 2, "gap", "0.5rem", 3, "click"], ["width", "24px", 1, "flex-grow-1", 3, "title", "ngSrc"], [1, "d-block"]],
        template: function(r, s) {
            r & 1 && at(0, gY, 21, 5),
            r & 2 && et(s.checkBrowserVersionIsOld() ? 0 : -1)
        },
        dependencies: [Fn],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var Lp = e => ({
    "position-absolute": e
});
function mY(e, t) {
    e & 1 && (H(0, "div", 19),
    oe(1, "\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632 \u0631\u0633\u0627\u0646\u06CC \u0644\u062D\u0638\u0647\u200C\u0627\u06CC \u0642\u06CC\u0645\u062A\u200C\u0647\u0627:"),
    W(),
    H(2, "ol", 20)(3, "li"),
    oe(4, "\u062F\u0633\u062A\u0631\u0633\u06CC \u0648 \u0633\u0631\u0639\u062A \u0627\u06CC\u0646\u062A\u0631\u0646\u062A \u062E\u0648\u062F \u0631\u0627 \u0628\u0631\u0631\u0633\u06CC \u0646\u0645\u0627\u06CC\u06CC\u062F."),
    W(),
    H(5, "li"),
    oe(6, "\u0641\u06CC\u0644\u062A\u0631 \u0634\u06A9\u0646 \u062E\u0648\u062F \u0631\u0627 \u062E\u0627\u0645\u0648\u0634 \u06A9\u0646\u06CC\u062F."),
    W(),
    H(7, "li"),
    oe(8, " \u0646\u0631\u0645\u200C\u0627\u0641\u0632\u0627\u0631 \u0631\u0627 \u0627\u0632 \u0645\u0646\u0648\u06CC \u0633\u0627\u06CC\u0631 "),
    hl(),
    H(9, "svg", 21),
    me(10, "use", 22),
    W(),
    oe(11, " \u0631\u0627\u0647\u200C\u0627\u0646\u062F\u0627\u0632\u06CC \u0645\u062C\u062F\u062F \u06A9\u0646\u06CC\u062F. "),
    W()())
}
function vY(e, t) {
    if (e & 1 && (H(0, "div", 12),
    hl(),
    H(1, "svg", 15),
    me(2, "use", 16),
    W(),
    oe(3),
    H(4, "svg", 17),
    me(5, "use", 18),
    W(),
    at(6, mY, 12, 0, "ng-template", null, 0, hc),
    W()),
    e & 2) {
        let n = uc(7)
          , i = Te(2);
        ye("ngClass", Dn(3, Lp, !i.isMobile()))("ngbPopover", n),
        Q(3),
        Jn(" ", i.barMessage(), " ")
    }
}
function _Y(e, t) {
    if (e & 1 && (H(0, "div", 13),
    hl(),
    H(1, "svg", 21),
    me(2, "use", 23),
    W(),
    oe(3),
    W()),
    e & 2) {
        let n = Te(2);
        ye("ngClass", Dn(2, Lp, !n.isMobile())),
        Q(3),
        Jn(" ", n.barMessage(), " ")
    }
}
function yY(e, t) {
    if (e & 1 && (H(0, "div", 14),
    hl(),
    H(1, "svg", 21),
    me(2, "use", 24),
    W(),
    oe(3),
    W()),
    e & 2) {
        let n = Te(2);
        ye("ngClass", Dn(2, Lp, !n.isMobile())),
        Q(3),
        Jn(" ", n.barMessage(), " ")
    }
}
function SY(e, t) {
    if (e & 1 && at(0, vY, 8, 5, "div", 12)(1, _Y, 4, 4, "div", 13)(2, yY, 4, 4, "div", 14),
    e & 2) {
        let n = Te();
        et(n.lsStatus() === n.connectionState.Disconnected || n.lsStatus() === n.connectionState.NotConnected ? 0 : -1),
        Q(),
        et(n.lsStatus() === n.connectionState.Connecting ? 1 : -1),
        Q(),
        et(n.lsStatus() === n.connectionState.Connected ? 2 : -1)
    }
}
function bY(e, t) {
    if (e & 1 && (H(0, "div", 11),
    hl(),
    H(1, "svg", 21),
    me(2, "use", 16),
    W(),
    oe(3),
    W()),
    e & 2) {
        let n = Te();
        ye("ngClass", Dn(2, Lp, !n.isMobile())),
        Q(3),
        Jn(" ", n.barMessage(), " ")
    }
}
var L9e = ( () => {
    let t = class t {
        get connectionState() {
            return Rt
        }
        constructor(i, r) {
            this.lsService = i,
            this.internetConnectionService = r,
            this.isMobile = Ee.required(),
            this.lsStatus = wt(Rt.Unknown),
            this.showInternetConnectionBar = wt(!1),
            this.barMessage = wt(""),
            this.subs = [],
            this.lsBarBeginningWaitPassed = !1,
            this.lsConnectionInitialized = !1
        }
        ngOnInit() {
            this.subscribeToInternetConnection(),
            this.subscribeToLsChangeState()
        }
        subscribeToLsChangeState() {
            this.checkIfLsCouldConnectAtStartup();
            let i = this.lsService.connectionState$.pipe(Jp(1)).subscribe(r => {
                if (this.lsStatus.set(r),
                this.lsBarBeginningWaitPassed)
                    switch (r) {
                    case Rt.Connected:
                        this.lsConnectionInitialized ? (this.barMessage.set("\u0627\u0631\u062A\u0628\u0627\u0637 \u0628\u0631\u0642\u0631\u0627\u0631 \u0634\u062F."),
                        ci(2e3).subscribe( () => {
                            this.barMessage.set("")
                        }
                        )) : (this.lsConnectionInitialized = !0,
                        this.barMessage.set(""));
                        break;
                    case Rt.NotConnected:
                    case Rt.Disconnected:
                        this.barMessage.set("\u0645\u0645\u06A9\u0646 \u0627\u0633\u062A \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0642\u06CC\u0645\u062A\u06CC \u0628\u0627\u0632\u0627\u0631 \u0628\u0631\u0648\u0632 \u0646\u0628\u0627\u0634\u062F.");
                        break;
                    case Rt.Connecting:
                        this.barMessage.set("\u062F\u0631 \u062D\u0627\u0644 \u0627\u062A\u0635\u0627\u0644...");
                        break
                    }
            }
            );
            this.subs.push(i)
        }
        checkIfLsCouldConnectAtStartup() {
            ci(5e3).subscribe( () => {
                this.lsBarBeginningWaitPassed = !0,
                this.lsStatus() === Rt.Disconnected && this.barMessage.set("\u0645\u0645\u06A9\u0646 \u0627\u0633\u062A \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0642\u06CC\u0645\u062A\u06CC \u0628\u0627\u0632\u0627\u0631 \u0628\u0631\u0648\u0632 \u0646\u0628\u0627\u0634\u062F.")
            }
            )
        }
        subscribeToInternetConnection() {
            this.internetConnectionService.networkStatus$.subscribe(i => {
                this.showInternetConnectionBar.set(!i),
                i ? this.barMessage.set("") : this.barMessage.set("\u0627\u062A\u0635\u0627\u0644 \u0627\u06CC\u0646\u062A\u0631\u0646\u062A \u062E\u0648\u062F \u0631\u0627 \u0628\u0631\u0631\u0633\u06CC \u06A9\u0646\u06CC\u062F.")
            }
            )
        }
        ngOnDestroy() {
            this.subs.forEach(i => i.unsubscribe())
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(Mt(Ql),Mt($2))
    }
    ,
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["connection-state"]],
        inputs: {
            isMobile: [1, "isMobile"]
        },
        decls: 17,
        vars: 2,
        consts: [["description", ""], [1, "d-none"], ["id", "ls-not-connect", "width", "24", "height", "24", "viewBox", "0 0 24 24", "fill", "none", "xmlns", "http://www.w3.org/2000/svg"], ["fill-rule", "evenodd", "clip-rule", "evenodd", "d", "M22.7071 2.70711C23.0976 2.31658 23.0976 1.68342 22.7071 1.29289C22.3166 0.902369 21.6834 0.902369 21.2929 1.29289L19.5 3.08579L17.7071 1.29289C17.3166 0.902369 16.6834 0.902369 16.2929 1.29289C15.9024 1.68342 15.9024 2.31658 16.2929 2.70711L18.0858 4.5L16.2929 6.29289C15.9024 6.68342 15.9024 7.31658 16.2929 7.70711C16.6834 8.09763 17.3166 8.09763 17.7071 7.70711L19.5 5.91421L21.2929 7.70711C21.6834 8.09763 22.3166 8.09763 22.7071 7.70711C23.0976 7.31658 23.0976 6.68342 22.7071 6.29289L20.9142 4.5L22.7071 2.70711ZM19.9833 12.0262C19.9995 11.7893 20 11.4796 20 11C20 10.4477 20.4477 10 21 10C21.5523 10 22 10.4477 22 11V11.032C22 11.4706 22 11.8491 21.9787 12.1624C21.9561 12.4922 21.9066 12.8221 21.7716 13.1481C21.4672 13.8831 20.8831 14.4672 20.1481 14.7716C19.8221 14.9066 19.4922 14.9561 19.1624 14.9787C18.8491 15 18.4707 15 18.032 15H18.032H18H13V16.0082C13.0476 16.0105 13.0938 16.0133 13.1382 16.0169C13.3668 16.0356 13.6366 16.0797 13.908 16.218C14.2843 16.4097 14.5903 16.7157 14.782 17.092C14.9203 17.3634 14.9644 17.6332 14.9831 17.8618C14.9867 17.9062 14.9895 17.9524 14.9918 18H21C21.5523 18 22 18.4477 22 19C22 19.5523 21.5523 20 21 20H14.9918C14.9895 20.0476 14.9867 20.0938 14.9831 20.1382C14.9644 20.3668 14.9203 20.6366 14.782 20.908C14.5903 21.2843 14.2843 21.5903 13.908 21.782C13.6366 21.9203 13.3668 21.9644 13.1382 21.9831C12.9301 22.0001 12.6843 22 12.4319 22L12.4 22H11.6L11.5681 22C11.3157 22 11.0699 22.0001 10.8618 21.9831C10.6332 21.9644 10.3634 21.9203 10.092 21.782C9.7157 21.5903 9.40974 21.2843 9.21799 20.908C9.07969 20.6366 9.03562 20.3668 9.01695 20.1382C9.01332 20.0938 9.01046 20.0476 9.00821 20H3C2.44772 20 2 19.5523 2 19C2 18.4477 2.44772 18 3 18H9.00821C9.01046 17.9524 9.01332 17.9062 9.01695 17.8618C9.03562 17.6332 9.07969 17.3634 9.21799 17.092C9.40974 16.7157 9.7157 16.4097 10.092 16.218C10.3634 16.0797 10.6332 16.0356 10.8618 16.0169C10.9062 16.0133 10.9524 16.0105 11 16.0082V15H6.2H6.16148H6.16145C5.6343 15 5.17954 15 4.80497 14.9694C4.40963 14.9371 4.01641 14.8658 3.63803 14.673C3.07354 14.3854 2.6146 13.9265 2.32698 13.362C2.13419 12.9836 2.06287 12.5904 2.03057 12.195C1.99997 11.8205 1.99998 11.3657 2 10.8386V10.8386V10.8V8.2V8.16143V8.16142C1.99998 7.63428 1.99997 7.17953 2.03057 6.80497C2.06287 6.40963 2.13419 6.01641 2.32698 5.63803C2.6146 5.07354 3.07354 4.6146 3.63803 4.32698C4.01641 4.13419 4.40963 4.06287 4.80497 4.03057C5.17954 3.99996 5.6343 3.99998 6.16144 4H6.16145H6.16145H6.16145H6.16146L6.2 4H13.5C14.0523 4 14.5 4.44771 14.5 5C14.5 5.55228 14.0523 6 13.5 6H6.2C5.62345 6 5.25118 6.00078 4.96784 6.02393C4.69618 6.04612 4.59546 6.0838 4.54601 6.10899C4.35785 6.20487 4.20487 6.35785 4.109 6.54601C4.0838 6.59545 4.04613 6.69617 4.02393 6.96783C4.00078 7.25117 4 7.62345 4 8.2V10.8C4 11.3766 4.00078 11.7488 4.02393 12.0322C4.04613 12.3038 4.0838 12.4045 4.109 12.454C4.20487 12.6422 4.35785 12.7951 4.54601 12.891C4.59546 12.9162 4.69618 12.9539 4.96784 12.9761C5.25118 12.9992 5.62345 13 6.2 13H11.999H12H12.001L18 13C18.4796 13 18.7893 12.9995 19.0262 12.9833C19.2542 12.9677 19.3411 12.9411 19.3827 12.9239C19.6277 12.8224 19.8224 12.6277 19.9239 12.3827C19.9411 12.3411 19.9677 12.2542 19.9833 12.0262ZM11.0115 18.0114L11.0103 18.0246C11.0008 18.1412 11 18.3035 11 18.6V19V19.4C11 19.6965 11.0008 19.8588 11.0103 19.9754L11.0115 19.9886L11.0246 19.9897C11.1412 19.9992 11.3035 20 11.6 20H12.4C12.6965 20 12.8588 19.9992 12.9754 19.9897L12.9886 19.9886L12.9897 19.9754C12.9992 19.8588 13 19.6965 13 19.4V19V18.6C13 18.3035 12.9992 18.1412 12.9897 18.0246L12.9886 18.0114L12.9754 18.0103C12.8588 18.0008 12.6965 18 12.4 18H12H11.6C11.3035 18 11.1412 18.0008 11.0246 18.0103L11.0115 18.0114ZM6 9C6 8.73478 6.10536 8.48043 6.2929 8.29289C6.48043 8.10536 6.73479 8 7 8H8C8.26522 8 8.51957 8.10536 8.70711 8.29289C8.89465 8.48043 9 8.73478 9 9V10C9 10.5523 8.55229 11 8 11H7C6.44772 11 6 10.5523 6 10V9Z", "fill", "currentColor"], ["id", "ls-connect", "width", "24", "height", "24", "viewBox", "0 0 24 24", "fill", "none", "xmlns", "http://www.w3.org/2000/svg"], ["fill-rule", "evenodd", "clip-rule", "evenodd", "d", "M17.3544 3.28473C18.3375 2.78272 19.5705 2.94479 20.3913 3.76556C21.4121 4.78636 21.4121 6.44139 20.3913 7.46218C19.3705 8.48297 17.7154 8.48297 16.6947 7.46218L16.4142 7.18174H17.2124C17.7646 7.18174 18.2124 6.73402 18.2124 6.18174C18.2124 5.62945 17.7646 5.18174 17.2124 5.18174L14 5.18174C13.4477 5.18174 13 5.62945 13 6.18174L13 9.39409C13 9.94638 13.4477 10.3941 14 10.3941C14.5523 10.3941 15 9.94638 15 9.3941L15 8.59595L15.2804 8.87639C17.0823 10.6782 20.0036 10.6782 21.8055 8.87639C23.6073 7.07455 23.6073 4.15319 21.8055 2.35135C20.3537 0.899578 18.1774 0.618766 16.4448 1.50354C15.9529 1.75472 15.7578 2.35707 16.009 2.84893C16.2602 3.34079 16.8625 3.53591 17.3544 3.28473ZM6.2 3.99996L6.16146 3.99996H6.16145C5.63431 3.99994 5.17954 3.99993 4.80497 4.03053C4.40963 4.06283 4.01641 4.13415 3.63803 4.32694L3.63803 4.32694C3.07354 4.61456 2.6146 5.07351 2.32698 5.63799C2.13419 6.01637 2.06287 6.40959 2.03057 6.80494C1.99997 7.17951 1.99998 7.63427 2 8.16142V8.16142V8.19996V10.8V10.8385C1.99998 11.3657 1.99997 11.8204 2.03057 12.195C2.06287 12.5903 2.13419 12.9836 2.32698 13.3619C2.6146 13.9264 3.07354 14.3854 3.63803 14.673C4.01641 14.8658 4.40963 14.9371 4.80497 14.9694C5.17954 15 5.6343 15 6.16145 15H6.16148H6.2H11V16.0082C10.9524 16.0104 10.9062 16.0133 10.8618 16.0169C10.6332 16.0356 10.3634 16.0797 10.092 16.218C9.7157 16.4097 9.40974 16.7157 9.21799 17.092C9.07969 17.3634 9.03562 17.6331 9.01695 17.8617C9.01332 17.9062 9.01046 17.9524 9.00822 18H3C2.44772 18 2 18.4477 2 19C2 19.5523 2.44772 20 3 20H9.00822C9.01046 20.0476 9.01332 20.0937 9.01695 20.1382C9.03562 20.3668 9.07969 20.6365 9.21799 20.908C9.40974 21.2843 9.7157 21.5902 10.092 21.782C10.3634 21.9203 10.6332 21.9643 10.8618 21.983C11.0699 22 11.3157 22 11.568 22H11.5681H11.5681H11.5681L11.6 22H12.4L12.4319 22H12.4319H12.432H12.432C12.6843 22 12.9301 22 13.1382 21.983C13.3668 21.9643 13.6366 21.9203 13.908 21.782C14.2843 21.5902 14.5903 21.2843 14.782 20.908C14.9203 20.6365 14.9644 20.3668 14.9831 20.1382C14.9867 20.0937 14.9895 20.0476 14.9918 20H21C21.5523 20 22 19.5523 22 19C22 18.4477 21.5523 18 21 18H14.9918C14.9895 17.9524 14.9867 17.9062 14.9831 17.8617C14.9644 17.6331 14.9203 17.3634 14.782 17.092C14.5903 16.7157 14.2843 16.4097 13.908 16.218C13.6366 16.0797 13.3668 16.0356 13.1382 16.0169C13.0938 16.0133 13.0476 16.0104 13 16.0082V15H17.8H17.8386H17.8386C18.3657 15 18.8205 15 19.195 14.9694C19.5904 14.9371 19.9836 14.8658 20.362 14.673C20.9265 14.3854 21.3854 13.9264 21.673 13.3619C21.9238 12.8698 21.7281 12.2677 21.236 12.0169C20.7439 11.7662 20.1417 11.9619 19.891 12.454C19.7951 12.6421 19.6422 12.7951 19.454 12.891C19.4045 12.9162 19.3038 12.9538 19.0322 12.976C18.7488 12.9992 18.3766 13 17.8 13L6.2 13C5.62345 13 5.25117 12.9992 4.96784 12.976C4.69617 12.9538 4.59545 12.9162 4.54601 12.891C4.35785 12.7951 4.20487 12.6421 4.109 12.454L3.27871 12.877L4.109 12.454C4.0838 12.4045 4.04612 12.3038 4.02393 12.0321C4.00078 11.7488 4 11.3765 4 10.8V8.19996C4 7.62341 4.00078 7.25114 4.02393 6.9678C4.04612 6.69614 4.0838 6.59542 4.109 6.54597L4.109 6.54597C4.20487 6.35781 4.35785 6.20483 4.54601 6.10896C4.59545 6.08376 4.69617 6.04609 4.96784 6.02389C5.25117 6.00074 5.62345 5.99996 6.2 5.99996L10.5 5.99996C11.0523 5.99996 11.5 5.55225 11.5 4.99996C11.5 4.44768 11.0523 3.99996 10.5 3.99996L6.2 3.99996ZM11.0103 18.0246L11.0115 18.0114L11.0246 18.0103C11.1412 18.0007 11.3035 18 11.6 18H12H12.4C12.6965 18 12.8588 18.0007 12.9754 18.0103L12.9886 18.0114L12.9897 18.0246C12.9992 18.1412 13 18.3034 13 18.6V19V19.4C13 19.6965 12.9992 19.8588 12.9897 19.9753L12.9886 19.9885L12.9754 19.9897C12.8588 19.9992 12.6965 20 12.4 20H11.6C11.3035 20 11.1412 19.9992 11.0246 19.9897L11.0115 19.9885L11.0103 19.9753C11.0008 19.8588 11 19.6965 11 19.4V19V18.6C11 18.3034 11.0008 18.1412 11.0103 18.0246ZM6.2929 8.29287C6.10536 8.4804 6 8.73476 6 8.99997V9.99997C6 10.5523 6.44772 11 7 11H8C8.55229 11 9 10.5523 9 9.99997V8.99997C9 8.73476 8.89465 8.4804 8.70711 8.29287C8.51957 8.10533 8.26522 7.99997 8 7.99997H7C6.73479 7.99997 6.48043 8.10533 6.2929 8.29287Z", "fill", "currentColor"], ["id", "ls-connecting", "width", "24", "height", "24", "viewBox", "0 0 24 24", "fill", "none", "xmlns", "http://www.w3.org/2000/svg"], ["id", "question-box", "width", "24", "height", "24", "viewBox", "0 0 24 24", "fill", "none", "xmlns", "http://www.w3.org/2000/svg"], ["fill-rule", "evenodd", "clip-rule", "evenodd", "d", "M10.9562 2H11H13H13.0438C14.4068 1.99999 15.4908 1.99999 16.3654 2.07144C17.261 2.14462 18.0247 2.29768 18.7239 2.65396C19.8529 3.2292 20.7708 4.14708 21.346 5.27606C21.7023 5.9753 21.8554 6.73898 21.9286 7.63458C22 8.50914 22 9.59313 22 10.9561V10.9562V11V13.0001V13.0439V13.044C22 14.407 22 15.491 21.9286 16.3655C21.8554 17.2611 21.7023 18.0248 21.346 18.7241C20.7708 19.853 19.8529 20.7709 18.7239 21.3462C18.0247 21.7024 17.261 21.8555 16.3654 21.9287C15.4909 22.0001 14.4069 22.0001 13.0439 22.0001H13.0438H13H11H10.9562H10.9561C9.59313 22.0001 8.50914 22.0001 7.63458 21.9287C6.73898 21.8555 5.9753 21.7024 5.27606 21.3462C4.14708 20.7709 3.2292 19.853 2.65396 18.7241C2.29768 18.0248 2.14462 17.2611 2.07144 16.3655C1.99999 15.491 1.99999 14.4069 2 13.0439V13.0001V11V10.9562C1.99999 9.5932 1.99999 8.50917 2.07144 7.63458C2.14462 6.73898 2.29768 5.9753 2.65396 5.27606C3.2292 4.14708 4.14708 3.2292 5.27606 2.65396C5.9753 2.29768 6.73898 2.14462 7.63458 2.07144C8.50917 1.99999 9.5932 1.99999 10.9562 2ZM7.79744 4.0648C7.02552 4.12787 6.55435 4.24729 6.18404 4.43597C5.43139 4.81947 4.81947 5.43139 4.43597 6.18404C4.24729 6.55435 4.12787 7.02552 4.0648 7.79744C4.00078 8.58104 4 9.58337 4 11V13.0001C4 14.4168 4.00078 15.4191 4.0648 16.2027C4.12787 16.9746 4.24729 17.4458 4.43597 17.8161C4.81947 18.5687 5.43139 19.1807 6.18404 19.5641C6.55435 19.7528 7.02552 19.8723 7.79744 19.9353C8.58104 19.9993 9.58337 20.0001 11 20.0001H13C14.4166 20.0001 15.419 19.9993 16.2026 19.9353C16.9745 19.8723 17.4457 19.7528 17.816 19.5641C18.5686 19.1807 19.1805 18.5687 19.564 17.8161C19.7527 17.4458 19.8721 16.9746 19.9352 16.2027C19.9992 15.4191 20 14.4168 20 13.0001V11C20 9.58337 19.9992 8.58104 19.9352 7.79744C19.8721 7.02552 19.7527 6.55435 19.564 6.18404C19.1805 5.43139 18.5686 4.81947 17.816 4.43597C17.4457 4.24729 16.9745 4.12787 16.2026 4.0648C15.419 4.00078 14.4166 4 13 4H11C9.58337 4 8.58104 4.00078 7.79744 4.0648ZM14 16.4999C14 15.9477 13.5523 15.4999 13 15.4999H12C11.4477 15.4999 11 15.9477 11 16.4999V17.4999C11 18.0522 11.4477 18.4999 12 18.4999H13C13.5523 18.4999 14 18.0522 14 17.4999V16.4999ZM10.5 9.5C10.5 8.39543 11.3954 7.5 12.5 7.5C13.3693 7.5 14.1114 8.0551 14.3865 8.83325C14.5705 9.35396 15.1418 9.62689 15.6625 9.44284C16.1833 9.25879 16.4562 8.68747 16.2721 8.16675C15.7235 6.61451 14.2432 5.5 12.5 5.5C10.2909 5.5 8.5 7.29086 8.5 9.5C8.5 11.0881 9.40692 11.9643 10.1525 12.5484L10.1695 12.5617L10.1871 12.5743L11.5001 13.5141C11.5076 14.0599 11.9524 14.5 12.5 14.5C13.0523 14.5 13.5 14.0523 13.5 13.5C13.5 12.8636 13.193 12.2662 12.6754 11.8958L11.3693 10.961C10.7945 10.5082 10.5 10.1483 10.5 9.5Z", "fill", "currentColor"], ["id", "dots-grid", "width", "24", "height", "24", "viewBox", "0 0 24 24", "fill", "none", "xmlns", "http://www.w3.org/2000/svg"], ["fill-rule", "evenodd", "clip-rule", "evenodd", "d", "M11.8 3.00001L11.7769 3.00001C11.6578 2.99996 11.5155 2.99991 11.3902 3.01015C11.245 3.02201 11.037 3.05245 10.819 3.1635C10.5368 3.30731 10.3073 3.53678 10.1635 3.81903C10.0525 4.03697 10.022 4.24496 10.0101 4.39018C9.9999 4.5155 9.99996 4.65776 10 4.77687L10 4.80001L10 5.20001L10 5.22315C9.99996 5.34227 9.99991 5.48452 10.0101 5.60984C10.022 5.75506 10.0525 5.96305 10.1635 6.181C10.3073 6.46324 10.5368 6.69271 10.819 6.83652C11.037 6.94757 11.245 6.97801 11.3902 6.98988C11.5155 7.00012 11.6578 7.00006 11.7769 7.00002L11.8 7.00001L12.2 7.00001L12.2232 7.00002H12.2232C12.3423 7.00006 12.4845 7.00012 12.6098 6.98988C12.7551 6.97801 12.9631 6.94757 13.181 6.83652C13.4632 6.69271 13.6927 6.46324 13.8365 6.181C13.9476 5.96305 13.978 5.75506 13.9899 5.60984C14.0001 5.48452 14.0001 5.34226 14 5.22314L14 5.20001V4.80001L14 4.77688C14.0001 4.65777 14.0001 4.5155 13.9899 4.39018C13.978 4.24496 13.9476 4.03697 13.8365 3.81903C13.6927 3.53678 13.4632 3.30731 13.181 3.1635C12.9631 3.05245 12.7551 3.02201 12.6098 3.01015C12.4845 2.99991 12.3423 2.99996 12.2231 3.00001L12.2 3.00001L11.8 3.00001ZM4.00001 3.00001C3.44773 3.00001 3.00001 3.44773 3.00001 4.00001V5.00001C3.00001 5.5523 3.44773 6.00001 4.00001 6.00001H5.00001C5.5523 6.00001 6.00001 5.5523 6.00001 5.00001V4.00001C6.00001 3.44773 5.5523 3.00001 5.00001 3.00001H4.00001ZM19 3.00001C18.4477 3.00001 18 3.44773 18 4.00001V5.00001C18 5.5523 18.4477 6.00001 19 6.00001H20C20.5523 6.00001 21 5.5523 21 5.00001V4.00001C21 3.44773 20.5523 3.00001 20 3.00001H19ZM11.3 9.50001L11.2769 9.50001C11.1578 9.49996 11.0155 9.49991 10.8902 9.51015C10.745 9.52201 10.537 9.55245 10.319 9.6635C10.0368 9.80731 9.80731 10.0368 9.6635 10.319C9.55245 10.537 9.52201 10.745 9.51015 10.8902C9.49991 11.0155 9.49996 11.1578 9.50001 11.2769L9.50001 11.3V12.7L9.50001 12.7232C9.49996 12.8423 9.49991 12.9845 9.51015 13.1098C9.52201 13.2551 9.55245 13.4631 9.6635 13.681C9.80731 13.9632 10.0368 14.1927 10.319 14.3365C10.537 14.4476 10.745 14.478 10.8902 14.4899C11.0155 14.5001 11.1577 14.5001 11.2769 14.5H11.2769L11.3 14.5H12.7L12.7231 14.5H12.7232C12.8423 14.5001 12.9845 14.5001 13.1098 14.4899C13.2551 14.478 13.4631 14.4476 13.681 14.3365C13.9632 14.1927 14.1927 13.9632 14.3365 13.681C14.4476 13.4631 14.478 13.2551 14.4899 13.1098C14.5001 12.9845 14.5001 12.8423 14.5 12.7232V12.7231L14.5 12.7V11.3L14.5 11.2769V11.2769C14.5001 11.1577 14.5001 11.0155 14.4899 10.8902C14.478 10.745 14.4476 10.537 14.3365 10.319C14.1927 10.0368 13.9632 9.80731 13.681 9.6635C13.4631 9.55245 13.2551 9.52201 13.1098 9.51015C12.9845 9.49991 12.8423 9.49996 12.7232 9.50001L12.7 9.50001H11.3ZM18.8 10L18.7769 10C18.6578 9.99996 18.5155 9.99991 18.3902 10.0101C18.245 10.022 18.037 10.0525 17.819 10.1635C17.5368 10.3073 17.3073 10.5368 17.1635 10.819C17.0525 11.037 17.022 11.245 17.0101 11.3902C16.9999 11.5155 17 11.6578 17 11.7769L17 11.8V12.2L17 12.2231C17 12.3423 16.9999 12.4845 17.0101 12.6098C17.022 12.7551 17.0525 12.9631 17.1635 13.181C17.3073 13.4632 17.5368 13.6927 17.819 13.8365C18.037 13.9476 18.245 13.978 18.3902 13.9899C18.5155 14.0001 18.6578 14.0001 18.7769 14L18.8 14H19.2L19.2231 14C19.3423 14.0001 19.4845 14.0001 19.6098 13.9899C19.7551 13.978 19.9631 13.9476 20.181 13.8365C20.4632 13.6927 20.6927 13.4632 20.8365 13.181C20.9476 12.9631 20.978 12.7551 20.9899 12.6098C21.0001 12.4846 21.0001 12.3424 21 12.2233V12.2232L21 12.2V11.8L21 11.7769V11.7768C21.0001 11.6577 21.0001 11.5155 20.9899 11.3902C20.978 11.245 20.9476 11.037 20.8365 10.819C20.6927 10.5368 20.4632 10.3073 20.181 10.1635C19.9631 10.0525 19.7551 10.022 19.6098 10.0101C19.4845 9.99991 19.3423 9.99996 19.2232 10L19.2 10H18.8ZM4.80001 10L4.77687 10C4.65776 9.99996 4.5155 9.99991 4.39018 10.0101C4.24496 10.022 4.03697 10.0525 3.81903 10.1635C3.53678 10.3073 3.30731 10.5368 3.1635 10.819C3.05245 11.037 3.02201 11.245 3.01015 11.3902C2.99991 11.5155 2.99996 11.6578 3.00001 11.7769L3.00001 11.8V12.2L3.00001 12.2232C2.99996 12.3423 2.99991 12.4845 3.01015 12.6098C3.02201 12.7551 3.05245 12.9631 3.1635 13.181C3.30731 13.4632 3.53678 13.6927 3.81903 13.8365C4.03697 13.9476 4.24496 13.978 4.39018 13.9899C4.5155 14.0001 4.65775 14.0001 4.77686 14H4.77688L4.80001 14H5.20001L5.22314 14H5.22316C5.34228 14.0001 5.48453 14.0001 5.60984 13.9899C5.75506 13.978 5.96305 13.9476 6.181 13.8365C6.46324 13.6927 6.69271 13.4632 6.83652 13.181C6.94757 12.9631 6.97801 12.7551 6.98988 12.6098C7.00012 12.4845 7.00006 12.3423 7.00002 12.2232V12.2232L7.00001 12.2V11.8L7.00002 11.7769V11.7769C7.00006 11.6577 7.00012 11.5155 6.98988 11.3902C6.97801 11.245 6.94757 11.037 6.83652 10.819C6.69271 10.5368 6.46324 10.3073 6.181 10.1635C5.96305 10.0525 5.75506 10.022 5.60984 10.0101C5.48452 9.99991 5.34227 9.99996 5.22315 10L5.20001 10H4.80001ZM11.7769 17C11.6578 17 11.5155 16.9999 11.3902 17.0101C11.245 17.022 11.037 17.0525 10.819 17.1635C10.5368 17.3073 10.3073 17.5368 10.1635 17.819C10.0525 18.037 10.022 18.245 10.0101 18.3902C9.99991 18.5155 9.99996 18.6578 10 18.7769L10 18.8V19.2L10 19.2232C9.99996 19.3423 9.99991 19.4845 10.0101 19.6098C10.022 19.7551 10.0525 19.9631 10.1635 20.181C10.3073 20.4632 10.5368 20.6927 10.819 20.8365C11.037 20.9476 11.245 20.978 11.3902 20.9899C11.5155 21.0001 11.6577 21.0001 11.7768 21H11.7769L11.8 21H12.2L12.2232 21H12.2233C12.3424 21.0001 12.4846 21.0001 12.6098 20.9899C12.7551 20.978 12.9631 20.9476 13.181 20.8365C13.4632 20.6927 13.6927 20.4632 13.8365 20.181C13.9476 19.9631 13.978 19.7551 13.9899 19.6098C14.0001 19.4845 14.0001 19.3423 14 19.2232V19.2231L14 19.2V18.8L14 18.7769V18.7769C14.0001 18.6577 14.0001 18.5155 13.9899 18.3902C13.978 18.245 13.9476 18.037 13.8365 17.819C13.6927 17.5368 13.4632 17.3073 13.181 17.1635C12.9631 17.0525 12.7551 17.022 12.6098 17.0101C12.4845 16.9999 12.3423 17 12.2231 17L12.2 17H11.8L11.7769 17ZM4.00001 18C3.44773 18 3.00001 18.4477 3.00001 19V20C3.00001 20.5523 3.44773 21 4.00001 21H5.00001C5.5523 21 6.00001 20.5523 6.00001 20V19C6.00001 18.4477 5.5523 18 5.00001 18H4.00001ZM19 18C18.4477 18 18 18.4477 18 19V20C18 20.5523 18.4477 21 19 21H20C20.5523 21 21 20.5523 21 20V19C21 18.4477 20.5523 18 20 18H19Z", "fill", "currentColor"], [1, "bg-danger", "text-light", "w-100", "py-1", "text-center", 2, "z-index", "1000", 3, "ngClass"], ["triggers", "click:blur", "popoverClass", "signal-increase-popover-width", 1, "bg-danger", "text-light", "w-100", "py-1", "text-center", "cup", 2, "z-index", "1000", 3, "ngClass", "ngbPopover"], [1, "bg-warning", "w-100", "py-1", "text-center", 2, "z-index", "1000", 3, "ngClass"], [1, "bg-success", "text-light", "w-100", "py-1", "text-center", 2, "z-index", "1000", 3, "ngClass"], ["width", "18", "height", "18", "viewBox", "0 0 24 24", "fill", "none", "xmlns", "http://www.w3.org/2000/svg"], ["href", "#ls-not-connect"], ["width", "18", "height", "18", "viewBox", "0 0 24 24", "xmlns", "http://www.w3.org/2000/svg", 1, "ms-1"], ["href", "#question-box"], [1, "mb-2"], [1, "ps-4", "mb-0"], ["width", "18", "height", "18", "viewBox", "0 0 24 24", "xmlns", "http://www.w3.org/2000/svg"], ["href", "#dots-grid"], ["href", "#ls-connecting"], ["href", "#ls-connect"]],
        template: function(r, s) {
            r & 1 && (hl(),
            H(0, "svg", 1)(1, "symbol", 2),
            me(2, "path", 3),
            W(),
            H(3, "symbol", 4),
            oe(4, " > "),
            me(5, "path", 5),
            W(),
            H(6, "symbol", 6),
            oe(7, " > "),
            me(8, "path", 5),
            W(),
            H(9, "symbol", 7),
            oe(10, " > "),
            me(11, "path", 8),
            W(),
            H(12, "symbol", 9),
            oe(13, " > "),
            me(14, "path", 10),
            W()(),
            at(15, SY, 3, 3)(16, bY, 4, 4, "div", 11)),
            r & 2 && (Q(15),
            et(s.barMessage() && !s.showInternetConnectionBar() ? 15 : -1),
            Q(),
            et(s.showInternetConnectionBar() ? 16 : -1))
        },
        dependencies: [ir, NE],
        styles: [`.signal-increase-popover-width{min-width:350px}
/*# sourceMappingURL=connection-state.style-IW4NV7EX.css.map */
`],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var xY = e => ({
    disabled: e
});
function wY(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div", 4),
        Qe("click", function() {
            yt(n);
            let r = Te();
            return St(r.allDeselected.emit(!0))
        }),
        me(1, "svg-icon", 6),
        H(2, "small", 3),
        oe(3, " \u0644\u063A\u0648 \u0627\u0646\u062A\u062E\u0627\u0628"),
        W()()
    }
    if (e & 2) {
        let n = Te();
        Q(),
        ye("iconName", n.icons.CheckBoxGroup)
    }
}
function CY(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div", 4),
        Qe("click", function() {
            yt(n);
            let r = Te();
            return St(r.allSelected.emit(!0))
        }),
        me(1, "svg-icon", 7),
        H(2, "small", 3),
        oe(3, " \u0627\u0646\u062A\u062E\u0627\u0628 \u0647\u0645\u0647"),
        W()()
    }
    if (e & 2) {
        let n = Te();
        Q(),
        ye("iconName", n.icons.CheckBoxGroup)
    }
}
function EY(e, t) {
    if (e & 1 && oe(0),
    e & 2) {
        let n = Te();
        Jn(" (", n.selectedCount(), ") ")
    }
}
var j9e = ( () => {
    let t = class t extends za {
        constructor() {
            super(...arguments),
            this.icons = Wt,
            this.allSelected = $t(),
            this.allDeselected = $t(),
            this.removeClicked = $t(),
            this.taskbarClosed = $t(),
            this.selectedCount = Ee(),
            this.allDataCount = Ee(),
            this.areAllSelected = $0( () => this.selectedCount() === this.allDataCount())
        }
        handleClose() {
            this.allDeselected.emit(!0),
            this.taskbarClosed.emit(!0)
        }
    }
    ;
    t.\u0275fac = ( () => {
        let i;
        return function(s) {
            return (i || (i = Tn(t)))(s || t)
        }
    }
    )(),
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["multi-select-toolbar"]],
        inputs: {
            selectedCount: [1, "selectedCount"],
            allDataCount: [1, "allDataCount"]
        },
        outputs: {
            allSelected: "allSelected",
            allDeselected: "allDeselected",
            removeClicked: "removeClicked",
            taskbarClosed: "taskbarClosed"
        },
        features: [bo],
        decls: 12,
        vars: 10,
        consts: [[1, "text-center", "col", "p-0"], [1, "text-center", "col", "p-0", "flex-grow-1", 3, "click", "ngClass"], ["width", "24", "height", "24", 1, "px-2", "d-block", "text-primary", "cup", 3, "iconName"], [1, "fw-light"], [1, "text-center", "col", "p-0", 3, "click"], ["width", "24", "height", "24", 1, "text-body", "d-block", "text-opacity-50", "cup", 3, "iconName"], ["width", "24", "height", "24", 1, "d-block", "text-primary", 3, "iconName"], ["width", "24", "height", "24", 1, "d-block", "text-primary", "cup", 3, "iconName"]],
        template: function(r, s) {
            r & 1 && (H(0, "div"),
            at(1, wY, 4, 1, "div", 0)(2, CY, 4, 1, "div", 0),
            H(3, "div", 1),
            Qe("click", function() {
                return s.removeClicked.emit(!0)
            }),
            me(4, "svg-icon", 2),
            H(5, "small", 3),
            oe(6, " \u062D\u0630\u0641 "),
            at(7, EY, 1, 1),
            W()(),
            H(8, "div", 4),
            Qe("click", function() {
                return s.handleClose()
            }),
            me(9, "svg-icon", 5),
            H(10, "small", 3),
            oe(11, " \u0628\u0633\u062A\u0646 "),
            W()()()),
            r & 2 && (cs("shadow  toolbar p-2 d-flex justify-content-between align-items-center bg-principal-3x bg-principal-4x-dark  ", s.IsMobile() ? "rounded" : "mx-4 my-1 rounded-3", ""),
            Q(),
            et(s.areAllSelected() ? 1 : 2),
            Q(2),
            ye("ngClass", Dn(8, xY, !s.selectedCount())),
            Q(),
            ye("iconName", s.icons.Delete),
            Q(3),
            et(s.selectedCount() ? 7 : -1),
            Q(2),
            ye("iconName", s.icons.Close))
        },
        dependencies: [ir, Fn],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
function TY(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div", 0)(1, "div", 1)(2, "div", 2),
        me(3, "svg-icon", 3),
        W(),
        H(4, "div", 4)(5, "span", 5),
        oe(6),
        W()(),
        H(7, "p", 6),
        oe(8),
        W()(),
        H(9, "div", 7)(10, "button", 8),
        Qe("click", function() {
            yt(n);
            let r = Te();
            return St(r.closeEvent.emit(!0))
        }),
        oe(11, " \u0627\u0646\u0635\u0631\u0627\u0641 "),
        W(),
        H(12, "button", 9),
        Qe("click", function() {
            yt(n);
            let r = Te();
            return r.confirmEvent.emit(!0),
            St(r.closeModal())
        }),
        oe(13, " \u062A\u0627\u06CC\u06CC\u062F "),
        W()()()
    }
    if (e & 2) {
        let n = Te();
        Q(3),
        ye("iconName", n.icon()),
        Q(3),
        Jn(" ", n.title(), ""),
        Q(2),
        Mn(n.description())
    }
}
function OY(e, t) {
    if (e & 1) {
        let n = an();
        H(0, "div", 4)(1, "span", 10),
        oe(2),
        W()(),
        H(3, "div", 11)(4, "div", 12)(5, "div", 13)(6, "div", 2),
        me(7, "svg-icon", 3),
        W(),
        H(8, "p", 14),
        oe(9),
        W()()()(),
        H(10, "div", 15),
        me(11, "div", 16),
        H(12, "div", 17),
        Qe("click", function() {
            yt(n);
            let r = Te();
            return St(r.closeEvent.emit(!0))
        }),
        oe(13, "\u0627\u0646\u0635\u0631\u0627\u0641"),
        W(),
        H(14, "button", 18),
        Qe("click", function() {
            yt(n);
            let r = Te();
            return r.confirmEvent.emit(!0),
            St(r.closeModal())
        }),
        oe(15, " \u062A\u0627\u06CC\u06CC\u062F "),
        W()()
    }
    if (e & 2) {
        let n = Te();
        Q(2),
        Jn(" ", n.title(), ""),
        Q(5),
        ye("iconName", n.icon()),
        Q(2),
        Mn(n.description())
    }
}
var Z9e = ( () => {
    let t = class t extends za {
        constructor() {
            super(...arguments),
            this.closeEvent = $t(),
            this.confirmEvent = $t(),
            this.icon = Ee(),
            this.title = Ee(),
            this.description = Ee()
        }
    }
    ;
    t.\u0275fac = ( () => {
        let i;
        return function(s) {
            return (i || (i = Tn(t)))(s || t)
        }
    }
    )(),
    t.\u0275cmp = Ye({
        type: t,
        selectors: [["action-confirm"]],
        inputs: {
            icon: [1, "icon"],
            title: [1, "title"],
            description: [1, "description"]
        },
        outputs: {
            closeEvent: "closeEvent",
            confirmEvent: "confirmEvent"
        },
        features: [bo],
        decls: 2,
        vars: 1,
        consts: [[1, "p-3", "text-center"], [1, "text-center", "align-items-center", "d-flex", "flex-column", "justify-content-center", "text-center"], [1, "rounded", "bg-danger", "bg-opacity-10", "d-inline-flex", "p-2", "mb-3"], ["width", "36", "height", "36", 1, "text-danger", 3, "iconName"], [1, "modal-header", "align-items-center", "d-flex", "justify-content-between"], [1, "fw-bold", "h6"], [1, "text-body-tertiary", "m-0"], [1, "d-flex", "gap-1", "mt-3"], ["type", "button", 1, "btn", "btn-outline-secondary", "flex-grow-1", 3, "click"], ["data-cy", "buy-transaction-cancel-confirm-btn", "type", "button", 1, "btn", "btn-danger", "flex-grow-1", 3, "click"], [1, "modal-title", "fw-bold"], [1, "modal-body", "py-4"], [1, "text-global"], [1, "text-center"], [1, "text-body", "fw-bold", "m-0"], [1, "modal-footer"], [1, "m-0", "d-flex", "gap-2"], ["type", "button", 1, "btn", "btn-outline-secondary", 3, "click"], ["data-cy", "buy-transaction-cancel-confirm-btn", "type", "button", 1, "btn", "btn-danger", 3, "click"]],
        template: function(r, s) {
            r & 1 && at(0, TY, 14, 3, "div", 0)(1, OY, 16, 3),
            r & 2 && et(s.IsMobile() ? 0 : 1)
        },
        dependencies: [fc, Fn],
        encapsulation: 2,
        changeDetection: 0
    });
    let e = t;
    return e
}
)();
var Ame = ( () => {
    let t = class t {
        constructor() {
            this.authService = z(Ir),
            this.gtagService = z(sl),
            this.userService = z($r),
            this.error403Counter = 0,
            this.error401Counter = 0
        }
        intercept(i, r) {
            let s = this.authService.getToken();
            if (s) {
                let o = i.clone({
                    headers: i.headers.set("Authorization", "Bearer " + s).set("Accept-language", "fa")
                })
                  , a = new Date().getTime();
                return r.handle(o).pipe(He( () => {
                    this.gtagService.sendApiRequestType(i.url, {
                        method: i.method,
                        latency: +((new Date().getTime() - a) / 1e3).toFixed(1)
                    })
                }
                ), on(c => (c.status === 403 && (this.error403Counter++,
                this.error403Counter >= 2 && !this.userService.isGuestUser && !this.userService.isEasy2User && this.authService.logOutFromApp(),
                this.error403Counter >= 30 && (this.userService.isGuestUser || this.userService.isEasy2User) && this.authService.logOutFromApp()),
                c.status === 401 && (this.error401Counter++,
                this.error401Counter >= 2 && !this.userService.isGuestUser && !this.userService.isEasy2User && this.authService.logOutFromApp(),
                this.error401Counter >= 30 && (this.userService.isGuestUser || this.userService.isEasy2User) && this.authService.logOutFromApp()),
                Hr(c))))
            } else
                return r.handle(i)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac
    });
    let e = t;
    return e
}
)();
var Nme = ( () => {
    let t = class t {
        constructor(i, r) {
            this.versionService = i,
            this.userDeviceService = r,
            this.showNewVersionSub = new Ne(!1),
            this.showNewVersion$ = this.showNewVersionSub.asObservable(),
            this.desktopShowUpdate = !1,
            this.mobileShowUpdate = !1,
            this.desktopTitles = ["\u0628\u0631\u0648\u0632 \u0631\u0633\u0627\u0646\u06CC \u06F1\u06F4\u06F0\u06F3/\u06F0\u06F2/\u06F0\u06F4"],
            this.desktopUpdateLists = [[{
                title: "\u0645\u0641\u06CC\u062F \u06A9\u0627\u0631\u062A",
                changes: ["\u0627\u0641\u0632\u0627\u06CC\u0634 \u0633\u0642\u0641 \u0628\u0631\u062F\u0627\u0634\u062A \u0622\u0646\u06CC \u0628\u0647 \u06F2\u06F0\u06F0 \u0645\u06CC\u0644\u06CC\u0648\u0646 \u062A\u0648\u0645\u0627\u0646", "\u0627\u0636\u0627\u0641\u0647 \u0634\u062F\u0646 \u0642\u0627\u0628\u0644\u06CC\u062A \u0645\u0633\u062F\u0648\u062F \u0633\u0627\u0632\u06CC \u0645\u0641\u06CC\u062F \u06A9\u0627\u0631\u062A"]
            }]],
            this.mobileTitles = ["\u0628\u0631\u0648\u0632 \u0631\u0633\u0627\u0646\u06CC \u06F1\u06F4\u06F0\u06F3/\u06F0\u06F2/\u06F0\u06F4"],
            this.mobileUpdateLists = [[{
                title: "\u0645\u0641\u06CC\u062F \u06A9\u0627\u0631\u062A",
                changes: ["\u0627\u0641\u0632\u0627\u06CC\u0634 \u0633\u0642\u0641 \u0628\u0631\u062F\u0627\u0634\u062A \u0622\u0646\u06CC \u0628\u0647 \u06F2\u06F0\u06F0 \u0645\u06CC\u0644\u06CC\u0648\u0646 \u062A\u0648\u0645\u0627\u0646", "\u0627\u0636\u0627\u0641\u0647 \u0634\u062F\u0646 \u0642\u0627\u0628\u0644\u06CC\u062A \u0645\u0633\u062F\u0648\u062F \u0633\u0627\u0632\u06CC \u0645\u0641\u06CC\u062F \u06A9\u0627\u0631\u062A"]
            }]],
            this.userDeviceService.deviceType$.pipe(mt(s => s !== _n.Unknown)).subscribe(s => {
                this.detectAppNewVersion(s)
            }
            )
        }
        detectAppNewVersion(i) {
            (i === _n.Desktop && this.desktopShowUpdate || i === _n.Mobile && this.mobileShowUpdate) && this.versionService.isNewVersion() ? this.changeShowNewVersion(!0) : this.versionService.isNewVersion() && this.versionService.setCurrentVersion()
        }
        changeShowNewVersion(i) {
            this.showNewVersionSub.next(i)
        }
        closeReleaseNote() {
            this.changeShowNewVersion(!1),
            this.versionService.setCurrentVersion()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(fT),xe(ur))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var Lme = {
    config: {
        domain: "",
        client: "",
        version: "",
        token: ""
    },
    pathname(e) {
        return `${this.config.domain}/${encodeURIComponent(this.config.version)}/${e}?client=${encodeURIComponent(this.config.client)}`
    },
    getFetchOptions() {
        return {
            headers: {
                Authorization: `Bearer ${this.config.token}`
            },
            credentials: "same-origin"
        }
    },
    getAllCharts() {
        return ue(this, null, function*() {
            try {
                let e = yield fetch(`${this.pathname("charts")}`, this.getFetchOptions());
                if (!e.ok)
                    throw new Error(`Getting chart content response was not OK. Status: ${e.status}.`);
                let t = yield e.json();
                if (t.status !== "ok")
                    throw new Error("Get chart content request failed: " + t.message);
                return t.data
            } catch {}
        })
    },
    removeChart(e) {
        return ue(this, null, function*() {
            try {
                let t = yield fetch(`${this.pathname("charts")}&chart=${encodeURIComponent(e)}`, ve(C({}, this.getFetchOptions()), {
                    method: "DELETE"
                }));
                if (!t.ok)
                    throw new Error(`Remove chart response was not OK. Status: ${t.status}.`);
                let n = yield t.json();
                if (n.status !== "ok")
                    throw new Error("Remove drawing template request failed: " + n.message)
            } catch {}
        })
    },
    saveChart(n) {
        return ue(this, null, function*() {
            var i = n
              , {id: e} = i
              , t = er(i, ["id"]);
            try {
                let r = new FormData;
                for (let c in t)
                    r.append(c, t[c]);
                let s = this.pathname("charts");
                e && (s += `&chart=${encodeURIComponent(e)}`);
                let o = yield fetch(s, ve(C({}, this.getFetchOptions()), {
                    method: "POST",
                    body: r
                }));
                if (!o.ok)
                    throw new Error(`Saving chart content response was not OK. Status: ${o.status}.`);
                let a = yield o.json();
                if (a.status !== "ok")
                    throw new Error("Saving chart content request failed: " + a.message);
                return (a.id ? a.id : e).toString()
            } catch {}
        })
    },
    getChartContent(e) {
        return ue(this, null, function*() {
            try {
                let t = yield fetch(`${this.pathname("charts")}&chart=${encodeURIComponent(e)}`, C({}, this.getFetchOptions()));
                if (!t.ok)
                    throw new Error(`Getting chart content response was not OK. Status: ${t.status}.`);
                let n = yield t.json();
                if (n.status !== "ok")
                    throw new Error("Get chart content request failed: " + n.message);
                return n.data.content
            } catch {}
        })
    },
    removeStudyTemplate(t) {
        return ue(this, arguments, function*({name: e}) {
            try {
                let n = yield fetch(`${this.pathname("study_templates")}&template=${encodeURIComponent(e)}`, ve(C({}, this.getFetchOptions()), {
                    method: "DELETE"
                }));
                if (!n.ok)
                    throw new Error(`Remove study template response was not OK. Status: ${n.status}.`);
                let i = yield n.json();
                if (i.status !== "ok")
                    throw new Error("Remove study template request failed: " + i.message)
            } catch {}
        })
    },
    getStudyTemplateContent(t) {
        return ue(this, arguments, function*({name: e}) {
            try {
                let n = yield fetch(`${this.pathname("study_templates")}&template=${encodeURIComponent(e)}`, C({}, this.getFetchOptions()));
                if (!n.ok)
                    throw new Error(`Get study template response was not OK. Status: ${n.status}.`);
                let i = yield n.json();
                if (i.status !== "ok")
                    throw new Error("Get study template request failed: " + i.message);
                return i.data.content
            } catch {}
        })
    },
    saveStudyTemplate(n) {
        return ue(this, arguments, function*({content: e, name: t}) {
            try {
                let i = new FormData;
                i.append("name", t),
                i.append("content", e);
                let r = yield fetch(this.pathname("study_templates"), C({
                    method: "POST",
                    body: i
                }, this.getFetchOptions()));
                if (!r.ok)
                    throw new Error(`Save study template response was not OK. Status: ${r.status}.`);
                let s = yield r.json();
                return {
                    error: s.status === "ok" ? "" : s.status
                }
            } catch {}
        })
    },
    getAllStudyTemplates() {
        return ue(this, null, function*() {
            let e = t => t.map(n => ({
                is_default: !1,
                name: n.name
            }));
            try {
                let t = yield fetch(this.pathname("study_templates"), C({}, this.getFetchOptions()));
                if (!t.ok)
                    throw new Error(`Study templates list response was not OK. Status: ${t.status}.`);
                let n = yield t.json();
                if (n.status !== "ok")
                    throw new Error("Study templates list request failed: " + n.message);
                return e(n.data)
            } catch {}
        })
    },
    removeDrawingTemplate(e, t) {
        return ue(this, null, function*() {
            try {
                let n = yield fetch(`${this.pathname("drawing_templates")}&tool=${encodeURIComponent(e)}&name=${encodeURIComponent(t)}`, C({
                    method: "DELETE"
                }, this.getFetchOptions()));
                if (!n.ok)
                    throw new Error(`Remove drawing template response was not OK. Status: ${n.status}.`);
                let i = yield n.json();
                if (i.status !== "ok")
                    throw new Error("Remove drawing template request failed: " + i.message)
            } catch {}
        })
    },
    loadDrawingTemplate(e, t) {
        return ue(this, null, function*() {
            try {
                let n = yield fetch(`${this.pathname("drawing_templates")}&tool=${encodeURIComponent(e)}&name=${encodeURIComponent(t)}`, C({}, this.getFetchOptions()));
                if (!n.ok)
                    throw new Error(`Load drawing template response was not OK. Status: ${n.status}.`);
                let i = yield n.json();
                if (i.status !== "ok")
                    throw new Error("Drawing template request failed: " + i.message);
                return i.data.content
            } catch {}
        })
    },
    saveDrawingTemplate(e, t, n) {
        return ue(this, null, function*() {
            try {
                let i = new FormData;
                i.append("content", n);
                let r = yield fetch(`${this.pathname("drawing_templates")}&tool=${encodeURIComponent(e)}&name=${encodeURIComponent(t)}`, C({
                    method: "POST",
                    body: i
                }, this.getFetchOptions()));
                if (!r.ok)
                    throw new Error(`Save drawing template response was not OK. Status: ${r.status}.`);
                let s = yield r.json();
                if (s.status !== "ok")
                    throw new Error("Save drawing template request failed: " + s.message)
            } catch {}
        })
    },
    getDrawingTemplates(e) {
        return ue(this, null, function*() {
            try {
                let t = yield fetch(`${this.pathname("drawing_templates")}&tool=${encodeURIComponent(e)}`, C({}, this.getFetchOptions()));
                if (!t.ok)
                    throw new Error(`Get drawing templates response was not OK. Status: ${t.status}.`);
                let n = yield t.json();
                if (n.status !== "ok")
                    throw new Error("Drawing templates request failed: " + n.message);
                return n.data
            } catch {}
        })
    },
    getAllChartTemplates() {
        return ue(this, null, function*() {})
    },
    saveChartTemplate() {
        return ue(this, null, function*() {})
    },
    getChartTemplateContent() {
        return ue(this, null, function*() {})
    }
};
var qme = ( () => {
    let t = class t {
        constructor() {
            this.notificationService = z(Ls)
        }
        notifyInfo(i, r=0) {
            let s = ci(r).subscribe( () => {
                this.notificationService.alert(i, ti.secondary)
            }
            );
            function o() {
                s.unsubscribe()
            }
            return {
                cancel: o
            }
        }
        notifyError(i) {
            this.notificationService.alert(i, ti.danger)
        }
        notifySuccess(i) {
            this.notificationService.alert(i, ti.success)
        }
        notifyWarning(i) {
            this.notificationService.alert(i, ti.warning)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var BM = function(e) {
    return e[e.none = 1] = "none",
    e[e.asc = 2] = "asc",
    e[e.decs = -1] = "decs",
    e
}(BM || {})
  , Kme = ( () => {
    let t = class t {
        constructor(i) {
            this.localStorageService = i,
            this.getLocalSortStorage()
        }
        writeLocalSortStorage() {
            this.localStorageService.setItem(Vn.sortStore, JSON.stringify(this.sortObject))
        }
        getLocalSortStorage() {
            this.localStorageService.getItem(Vn.sortStore) || this.localStorageService.setItem(Vn.sortStore, "[]"),
            this.sortObject = JSON.parse(this.localStorageService.getItem(Vn.sortStore))
        }
        getLocationSort(i) {
            this.getLocalSortStorage();
            let r = this.sortObject.find(s => s.locationKey === i && s.sortDirection !== BM.none);
            return C({}, r)
        }
        setByKey(i) {
            if (this.getLocalSortStorage(),
            this.sortObject.length) {
                let r = this.sortObject.findIndex(s => s.locationKey === i.locationKey);
                r > -1 ? (this.sortObject[r].sortDirection = i.sortDirection,
                this.sortObject[r].field = i.field) : this.sortObject.push(C({}, i))
            } else
                this.sortObject.push(C({}, i));
            this.writeLocalSortStorage()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(Tc))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var UM = 1 * 1024 * 1024
  , HM = 512
  , MY = 1
  , PY = .7
  , Zme = ( () => {
    let t = class t {
        compress(i) {
            let r = i.type || "image/jpeg"
              , s = new FileReader;
            return s.readAsDataURL(i),
            yo.create(o => {
                s.onload = a => {
                    let c = this.createImage(a)
                      , l = c.width > c.height ? c.width : c.height
                      , u = l > HM ? HM / l : MY
                      , h = i.size > UM ? UM / i.size : PY;
                    c.onload = () => {
                        let d = document.createElement("canvas");
                        d.width = c.width * u,
                        d.height = c.height * u;
                        let f = d.getContext("2d");
                        f.drawImage(c, 0, 0, d.width, d.height),
                        f.canvas.toBlob(g => {
                            o.next(new File([g],i.name,{
                                type: r,
                                lastModified: Date.now()
                            }))
                        }
                        , r, h)
                    }
                }
                ,
                s.onerror = a => o.error(a)
            }
            )
        }
        createImage(i) {
            let r = i.target.result
              , s = new Image;
            return s.src = r,
            s
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var GM = ( () => {
    let t = class t {
        sendMessage(i, r) {
            let s = new BroadcastChannel(i.toString());
            s.postMessage({
                type: i,
                payload: r
            }),
            s.close()
        }
        subscribeToMessage(i, r) {
            let s = new BroadcastChannel(i.toString());
            return s.onmessage = o => {
                r(o.data.payload)
            }
            ,
            () => {
                s.close()
            }
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var VM = ( () => {
    let t = class t {
        constructor() {
            this._workers = {}
        }
        get isWebWorkerSupported() {
            return typeof Worker < "u"
        }
        initializeWorker(i, r) {
            if (this._workers[i])
                throw new Error("This worker is already initialized!");
            this._workers[i] = r
        }
        isWorkerAvailable(i) {
            return !!this._workers[i]
        }
        startProcess(i) {
            if (!this.isWebWorkerSupported)
                throw new Error("Web worker not supported!");
            let r = i.pScope;
            if (!this._workers[r])
                throw new Error(`No worker available for provided scope: "${r}"`);
            if (typeof i.command.onMessageCallBack == "function") {
                let s = ({data: o}) => {
                    typeof i.command.onMessageCallBack == "function" && o?.pId === i.pId && i.command.onMessageCallBack(o)
                }
                ;
                this._workers[r].addEventListener("message", s),
                i.listenUntil?.pipe(Lt(1)).subscribe( () => {
                    this._workers[r]?.removeEventListener("message", s)
                }
                )
            }
            this._workers[r].postMessage({
                pId: i.pId,
                command: i.command.title,
                data: i.command.data
            })
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var M8 = {};
function kY(e, t) {
    if (M8[e] = (M8[e] || 0) + 1,
    typeof t == "function")
        return E8(e, (...i) => ve(C({}, t(...i)), {
            type: e
        }));
    switch (t ? t._as : "empty") {
    case "empty":
        return E8(e, () => ({
            type: e
        }));
    case "props":
        return E8(e, i => ve(C({}, i), {
            type: e
        }));
    default:
        throw new Error("Unexpected config.")
    }
}
function AY() {
    return {
        _as: "props",
        _p: void 0
    }
}
function E8(e, t) {
    return Object.defineProperty(t, "type", {
        value: e,
        writable: !1
    })
}
function IY(e) {
    return e.charAt(0).toUpperCase() + e.substring(1)
}
function RY(e) {
    return e.charAt(0).toLowerCase() + e.substring(1)
}
function DY(e, t) {
    if (e == null)
        throw new Error(`${t} must be defined.`)
}
function h8e(e) {
    let {source: t, events: n} = e;
    return Object.keys(n).reduce( (i, r) => ve(C({}, i), {
        [NY(r)]: kY(FY(t, r), n[r])
    }), {})
}
function d8e() {
    return AY()
}
function NY(e) {
    return e.trim().split(" ").map( (t, n) => n === 0 ? RY(t) : IY(t)).join("")
}
function FY(e, t) {
    return `[${e}] ${t}`
}
var rP = "@ngrx/store/init"
  , wh = ( () => {
    let t = class t extends Ne {
        constructor() {
            super({
                type: rP
            })
        }
        next(i) {
            if (typeof i == "function")
                throw new TypeError(`
        Dispatch expected an object, instead it received a function.
        If you're using the createAction function, make sure to invoke the function
        before dispatching the action. For example, someAction should be someAction().`);
            if (typeof i > "u")
                throw new TypeError("Actions must be objects");
            if (typeof i.type > "u")
                throw new TypeError("Actions must have a type property");
            super.next(i)
        }
        complete() {}
        ngOnDestroy() {
            super.complete()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac
    });
    let e = t;
    return e
}
)()
  , LY = [wh]
  , sP = new Je("@ngrx/store Internal Root Guard")
  , $M = new Je("@ngrx/store Internal Initial State")
  , I8 = new Je("@ngrx/store Initial State")
  , oP = new Je("@ngrx/store Reducer Factory")
  , WM = new Je("@ngrx/store Internal Reducer Factory Provider")
  , aP = new Je("@ngrx/store Initial Reducers")
  , T8 = new Je("@ngrx/store Internal Initial Reducers")
  , jM = new Je("@ngrx/store Store Features")
  , qM = new Je("@ngrx/store Internal Store Reducers")
  , O8 = new Je("@ngrx/store Internal Feature Reducers")
  , zM = new Je("@ngrx/store Internal Feature Configs")
  , cP = new Je("@ngrx/store Internal Store Features")
  , XM = new Je("@ngrx/store Internal Feature Reducers Token")
  , lP = new Je("@ngrx/store Feature Reducers")
  , KM = new Je("@ngrx/store User Provided Meta Reducers")
  , Bp = new Je("@ngrx/store Meta Reducers")
  , YM = new Je("@ngrx/store Internal Resolved Meta Reducers")
  , QM = new Je("@ngrx/store User Runtime Checks Config")
  , JM = new Je("@ngrx/store Internal User Runtime Checks Config")
  , h5 = new Je("@ngrx/store Internal Runtime Checks")
  , R8 = new Je("@ngrx/store Check if Action types are unique")
  , f8e = new Je("@ngrx/store Root Store Provider")
  , p8e = new Je("@ngrx/store Feature State Provider");
function D8(e, t={}) {
    let n = Object.keys(e)
      , i = {};
    for (let s = 0; s < n.length; s++) {
        let o = n[s];
        typeof e[o] == "function" && (i[o] = e[o])
    }
    let r = Object.keys(i);
    return function(o, a) {
        o = o === void 0 ? t : o;
        let c = !1
          , l = {};
        for (let u = 0; u < r.length; u++) {
            let h = r[u]
              , d = i[h]
              , f = o[h]
              , g = d(f, a);
            l[h] = g,
            c = c || g !== f
        }
        return c ? l : o
    }
}
function BY(e, t) {
    return Object.keys(e).filter(n => n !== t).reduce( (n, i) => Object.assign(n, {
        [i]: e[i]
    }), {})
}
function uP(...e) {
    return function(t) {
        if (e.length === 0)
            return t;
        let n = e[e.length - 1];
        return e.slice(0, -1).reduceRight( (r, s) => s(r), n(t))
    }
}
function hP(e, t) {
    return Array.isArray(t) && t.length > 0 && (e = uP.apply(null, [...t, e])),
    (n, i) => {
        let r = e(n);
        return (s, o) => (s = s === void 0 ? i : s,
        r(s, o))
    }
}
function UY(e) {
    let t = Array.isArray(e) && e.length > 0 ? uP(...e) : n => n;
    return (n, i) => (n = t(n),
    (r, s) => (r = r === void 0 ? i : r,
    n(r, s)))
}
var d5 = class extends yo {
}
  , Up = class extends wh {
}
  , HY = "@ngrx/store/update-reducers"
  , Hp = ( () => {
    let t = class t extends Ne {
        get currentReducers() {
            return this.reducers
        }
        constructor(i, r, s, o) {
            super(o(s, r)),
            this.dispatcher = i,
            this.initialState = r,
            this.reducers = s,
            this.reducerFactory = o
        }
        addFeature(i) {
            this.addFeatures([i])
        }
        addFeatures(i) {
            let r = i.reduce( (s, {reducers: o, reducerFactory: a, metaReducers: c, initialState: l, key: u}) => {
                let h = typeof o == "function" ? UY(c)(o, l) : hP(a, c)(o, l);
                return s[u] = h,
                s
            }
            , {});
            this.addReducers(r)
        }
        removeFeature(i) {
            this.removeFeatures([i])
        }
        removeFeatures(i) {
            this.removeReducers(i.map(r => r.key))
        }
        addReducer(i, r) {
            this.addReducers({
                [i]: r
            })
        }
        addReducers(i) {
            this.reducers = C(C({}, this.reducers), i),
            this.updateReducers(Object.keys(i))
        }
        removeReducer(i) {
            this.removeReducers([i])
        }
        removeReducers(i) {
            i.forEach(r => {
                this.reducers = BY(this.reducers, r)
            }
            ),
            this.updateReducers(i)
        }
        updateReducers(i) {
            this.next(this.reducerFactory(this.reducers, this.initialState)),
            this.dispatcher.next({
                type: HY,
                features: i
            })
        }
        ngOnDestroy() {
            this.complete()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(Up),xe(I8),xe(aP),xe(oP))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac
    });
    let e = t;
    return e
}
)()
  , GY = [Hp, {
    provide: d5,
    useExisting: Hp
}, {
    provide: Up,
    useExisting: wh
}]
  , N8 = ( () => {
    let t = class t extends lt {
        ngOnDestroy() {
            this.complete()
        }
    }
    ;
    t.\u0275fac = ( () => {
        let i;
        return function(s) {
            return (i || (i = Tn(t)))(s || t)
        }
    }
    )(),
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac
    });
    let e = t;
    return e
}
)()
  , VY = [N8]
  , Gp = class extends yo {
}
  , ZM = ( () => {
    let t = class t extends Ne {
        constructor(i, r, s, o) {
            super(o);
            let c = i.pipe(K8(X8)).pipe(F0(r))
              , l = {
                state: o
            }
              , u = c.pipe(N0($Y, l));
            this.stateSubscription = u.subscribe( ({state: h, action: d}) => {
                this.next(h),
                s.next(d)
            }
            ),
            this.state = xi(this, {
                manualCleanup: !0,
                requireSync: !0
            })
        }
        ngOnDestroy() {
            this.stateSubscription.unsubscribe(),
            this.complete()
        }
    }
    ;
    t.INIT = rP,
    t.\u0275fac = function(r) {
        return new (r || t)(xe(wh),xe(d5),xe(N8),xe(I8))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac
    });
    let e = t;
    return e
}
)();
function $Y(e={
    state: void 0
}, [t,n]) {
    let {state: i} = e;
    return {
        state: n(i, t),
        action: t
    }
}
var WY = [ZM, {
    provide: Gp,
    useExisting: ZM
}]
  , F8 = ( () => {
    let t = class t extends yo {
        constructor(i, r, s, o) {
            super(),
            this.actionsObserver = r,
            this.reducerManager = s,
            this.injector = o,
            this.source = i,
            this.state = i.state
        }
        select(i, ...r) {
            return qY.call(null, i, ...r)(this)
        }
        selectSignal(i, r) {
            return $0( () => i(this.state()), r)
        }
        lift(i) {
            let r = new t(this,this.actionsObserver,this.reducerManager);
            return r.operator = i,
            r
        }
        dispatch(i, r) {
            if (typeof i == "function")
                return this.processDispatchFn(i, r);
            this.actionsObserver.next(i)
        }
        next(i) {
            this.actionsObserver.next(i)
        }
        error(i) {
            this.actionsObserver.error(i)
        }
        complete() {
            this.actionsObserver.complete()
        }
        addReducer(i, r) {
            this.reducerManager.addReducer(i, r)
        }
        removeReducer(i) {
            this.reducerManager.removeReducer(i)
        }
        processDispatchFn(i, r) {
            DY(this.injector, "Store Injector");
            let s = r?.injector ?? zY() ?? this.injector;
            return k5( () => {
                let o = i();
                Tv( () => this.dispatch(o))
            }
            , {
                injector: s
            })
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(Gp),xe(wh),xe(Hp),xe(On))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac
    });
    let e = t;
    return e
}
)()
  , jY = [F8];
function qY(e, t, ...n) {
    return function(r) {
        let s;
        if (typeof e == "string") {
            let o = [t, ...n].filter(Boolean);
            s = r.pipe(iv(e, ...o))
        } else if (typeof e == "function")
            s = r.pipe(We(o => e(o, t)));
        else
            throw new TypeError(`Unexpected type '${typeof e}' in select operator, expected 'string' or 'function'`);
        return s.pipe(R0())
    }
}
function zY() {
    try {
        return z(On)
    } catch {
        return
    }
}
var L8 = "https://ngrx.io/guide/store/configuration/runtime-checks";
function eP(e) {
    return e === void 0
}
function tP(e) {
    return e === null
}
function dP(e) {
    return Array.isArray(e)
}
function XY(e) {
    return typeof e == "string"
}
function KY(e) {
    return typeof e == "boolean"
}
function YY(e) {
    return typeof e == "number"
}
function fP(e) {
    return typeof e == "object" && e !== null
}
function QY(e) {
    return fP(e) && !dP(e)
}
function JY(e) {
    if (!QY(e))
        return !1;
    let t = Object.getPrototypeOf(e);
    return t === Object.prototype || t === null
}
function P8(e) {
    return typeof e == "function"
}
function ZY(e) {
    return P8(e) && e.hasOwnProperty("\u0275cmp")
}
function eQ(e, t) {
    return Object.prototype.hasOwnProperty.call(e, t)
}
function nP(e, t) {
    return e === t
}
function tQ(e, t, n) {
    for (let i = 0; i < e.length; i++)
        if (!n(e[i], t[i]))
            return !0;
    return !1
}
function pP(e, t=nP, n=nP) {
    let i = null, r = null, s;
    function o() {
        i = null,
        r = null
    }
    function a(u=void 0) {
        s = {
            result: u
        }
    }
    function c() {
        s = void 0
    }
    function l() {
        if (s !== void 0)
            return s.result;
        if (!i)
            return r = e.apply(null, arguments),
            i = arguments,
            r;
        if (!tQ(arguments, i, t))
            return r;
        let u = e.apply(null, arguments);
        return i = arguments,
        n(r, u) ? r : (r = u,
        u)
    }
    return {
        memoized: l,
        reset: o,
        setResult: a,
        clearResult: c
    }
}
function g8e(...e) {
    return iQ(pP)(...e)
}
function nQ(e, t, n, i) {
    if (n === void 0) {
        let s = t.map(o => o(e));
        return i.memoized.apply(null, s)
    }
    let r = t.map(s => s(e, n));
    return i.memoized.apply(null, [...r, n])
}
function iQ(e, t={
    stateFn: nQ
}) {
    return function(...n) {
        let i = n;
        if (Array.isArray(i[0])) {
            let[u,...h] = i;
            i = [...u, ...h]
        } else
            i.length === 1 && rQ(i[0]) && (i = sQ(i[0]));
        let r = i.slice(0, i.length - 1)
          , s = i[i.length - 1]
          , o = r.filter(u => u.release && typeof u.release == "function")
          , a = e(function(...u) {
            return s.apply(null, u)
        })
          , c = pP(function(u, h) {
            return t.stateFn.apply(null, [u, r, h, a])
        });
        function l() {
            c.reset(),
            a.reset(),
            o.forEach(u => u.release())
        }
        return Object.assign(c.memoized, {
            release: l,
            projector: a.memoized,
            setResult: c.setResult,
            clearResult: c.clearResult
        })
    }
}
function rQ(e) {
    return !!e && typeof e == "object" && Object.values(e).every(t => typeof t == "function")
}
function sQ(e) {
    let t = Object.values(e)
      , n = Object.keys(e)
      , i = (...r) => n.reduce( (s, o, a) => ve(C({}, s), {
        [o]: r[a]
    }), {});
    return [...t, i]
}
function oQ(e) {
    return e instanceof Je ? z(e) : e
}
function aQ(e, t) {
    return t.map( (n, i) => {
        if (e[i]instanceof Je) {
            let r = z(e[i]);
            return {
                key: n.key,
                reducerFactory: r.reducerFactory ? r.reducerFactory : D8,
                metaReducers: r.metaReducers ? r.metaReducers : [],
                initialState: r.initialState
            }
        }
        return n
    }
    )
}
function cQ(e) {
    return e.map(t => t instanceof Je ? z(t) : t)
}
function gP(e) {
    return typeof e == "function" ? e() : e
}
function lQ(e, t) {
    return e.concat(t)
}
function uQ() {
    if (z(F8, {
        optional: !0,
        skipSelf: !0
    }))
        throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");
    return "guarded"
}
function hQ(e, t) {
    return function(n, i) {
        let r = t.action(i) ? k8(i) : i
          , s = e(n, r);
        return t.state() ? k8(s) : s
    }
}
function k8(e) {
    Object.freeze(e);
    let t = P8(e);
    return Object.getOwnPropertyNames(e).forEach(n => {
        if (!n.startsWith("\u0275") && eQ(e, n) && (!t || n !== "caller" && n !== "callee" && n !== "arguments")) {
            let i = e[n];
            (fP(i) || P8(i)) && !Object.isFrozen(i) && k8(i)
        }
    }
    ),
    e
}
function dQ(e, t) {
    return function(n, i) {
        if (t.action(i)) {
            let s = A8(i);
            iP(s, "action")
        }
        let r = e(n, i);
        if (t.state()) {
            let s = A8(r);
            iP(s, "state")
        }
        return r
    }
}
function A8(e, t=[]) {
    return (eP(e) || tP(e)) && t.length === 0 ? {
        path: ["root"],
        value: e
    } : Object.keys(e).reduce( (i, r) => {
        if (i)
            return i;
        let s = e[r];
        return ZY(s) ? i : eP(s) || tP(s) || YY(s) || KY(s) || XY(s) || dP(s) ? !1 : JY(s) ? A8(s, [...t, r]) : {
            path: [...t, r],
            value: s
        }
    }
    , !1)
}
function iP(e, t) {
    if (e === !1)
        return;
    let n = e.path.join(".")
      , i = new Error(`Detected unserializable ${t} at "${n}". ${L8}#strict${t}serializability`);
    throw i.value = e.value,
    i.unserializablePath = n,
    i
}
function fQ(e, t) {
    return function(n, i) {
        if (t.action(i) && !Rn.isInAngularZone())
            throw new Error(`Action '${i.type}' running outside NgZone. ${L8}#strictactionwithinngzone`);
        return e(n, i)
    }
}
function pQ(e) {
    return wv() ? C({
        strictStateSerializability: !1,
        strictActionSerializability: !1,
        strictStateImmutability: !0,
        strictActionImmutability: !0,
        strictActionWithinNgZone: !1,
        strictActionTypeUniqueness: !1
    }, e) : {
        strictStateSerializability: !1,
        strictActionSerializability: !1,
        strictStateImmutability: !1,
        strictActionImmutability: !1,
        strictActionWithinNgZone: !1,
        strictActionTypeUniqueness: !1
    }
}
function gQ({strictActionSerializability: e, strictStateSerializability: t}) {
    return n => e || t ? dQ(n, {
        action: i => e && !B8(i),
        state: () => t
    }) : n
}
function mQ({strictActionImmutability: e, strictStateImmutability: t}) {
    return n => e || t ? hQ(n, {
        action: i => e && !B8(i),
        state: () => t
    }) : n
}
function B8(e) {
    return e.type.startsWith("@ngrx")
}
function vQ({strictActionWithinNgZone: e}) {
    return t => e ? fQ(t, {
        action: n => e && !B8(n)
    }) : t
}
function _Q(e) {
    return [{
        provide: JM,
        useValue: e
    }, {
        provide: QM,
        useFactory: yQ,
        deps: [JM]
    }, {
        provide: h5,
        deps: [QM],
        useFactory: pQ
    }, {
        provide: Bp,
        multi: !0,
        deps: [h5],
        useFactory: mQ
    }, {
        provide: Bp,
        multi: !0,
        deps: [h5],
        useFactory: gQ
    }, {
        provide: Bp,
        multi: !0,
        deps: [h5],
        useFactory: vQ
    }]
}
function mP() {
    return [{
        provide: R8,
        multi: !0,
        deps: [h5],
        useFactory: SQ
    }]
}
function yQ(e) {
    return e
}
function SQ(e) {
    if (!e.strictActionTypeUniqueness)
        return;
    let t = Object.entries(M8).filter( ([,n]) => n > 1).map( ([n]) => n);
    if (t.length)
        throw new Error(`Action types are registered more than once, ${t.map(n => `"${n}"`).join(", ")}. ${L8}#strictactiontypeuniqueness`)
}
function bQ(e={}, t={}) {
    return [{
        provide: sP,
        useFactory: uQ
    }, {
        provide: $M,
        useValue: t.initialState
    }, {
        provide: I8,
        useFactory: gP,
        deps: [$M]
    }, {
        provide: T8,
        useValue: e
    }, {
        provide: qM,
        useExisting: e instanceof Je ? e : T8
    }, {
        provide: aP,
        deps: [T8, [new e4(qM)]],
        useFactory: oQ
    }, {
        provide: KM,
        useValue: t.metaReducers ? t.metaReducers : []
    }, {
        provide: YM,
        deps: [Bp, KM],
        useFactory: lQ
    }, {
        provide: WM,
        useValue: t.reducerFactory ? t.reducerFactory : D8
    }, {
        provide: oP,
        deps: [WM, YM],
        useFactory: hP
    }, LY, GY, VY, WY, jY, _Q(t.runtimeChecks), mP()]
}
function xQ(e, t, n={}) {
    return [{
        provide: zM,
        multi: !0,
        useValue: e instanceof Object ? {} : n
    }, {
        provide: jM,
        multi: !0,
        useValue: {
            key: e instanceof Object ? e.name : e,
            reducerFactory: !(n instanceof Je) && n.reducerFactory ? n.reducerFactory : D8,
            metaReducers: !(n instanceof Je) && n.metaReducers ? n.metaReducers : [],
            initialState: !(n instanceof Je) && n.initialState ? n.initialState : void 0
        }
    }, {
        provide: cP,
        deps: [zM, jM],
        useFactory: aQ
    }, {
        provide: O8,
        multi: !0,
        useValue: e instanceof Object ? e.reducer : t
    }, {
        provide: XM,
        multi: !0,
        useExisting: t instanceof Je ? t : O8
    }, {
        provide: lP,
        multi: !0,
        deps: [O8, [new e4(XM)]],
        useFactory: cQ
    }, mP()]
}
var vP = ( () => {
    let t = class t {
        constructor(i, r, s, o, a, c) {}
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(wh),xe(d5),xe(N8),xe(F8),xe(sP, 8),xe(R8, 8))
    }
    ,
    t.\u0275mod = nr({
        type: t
    }),
    t.\u0275inj = tr({});
    let e = t;
    return e
}
)()
  , wQ = ( () => {
    let t = class t {
        constructor(i, r, s, o, a) {
            this.features = i,
            this.featureReducers = r,
            this.reducerManager = s;
            let c = i.map( (l, u) => {
                let d = r.shift()[u];
                return ve(C({}, l), {
                    reducers: d,
                    initialState: gP(l.initialState)
                })
            }
            );
            s.addFeatures(c)
        }
        ngOnDestroy() {
            this.reducerManager.removeFeatures(this.features)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(cP),xe(lP),xe(Hp),xe(vP),xe(R8, 8))
    }
    ,
    t.\u0275mod = nr({
        type: t
    }),
    t.\u0275inj = tr({});
    let e = t;
    return e
}
)()
  , m8e = ( () => {
    let t = class t {
        static forRoot(i, r) {
            return {
                ngModule: vP,
                providers: [...bQ(i, r)]
            }
        }
        static forFeature(i, r, s={}) {
            return {
                ngModule: wQ,
                providers: [...xQ(i, r, s)]
            }
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275mod = nr({
        type: t
    }),
    t.\u0275inj = tr({});
    let e = t;
    return e
}
)();
function v8e(...e) {
    let t = e.pop()
      , n = e.map(i => i.type);
    return {
        reducer: t,
        types: n
    }
}
function _8e(e, ...t) {
    let n = new Map;
    for (let i of t)
        for (let r of i.types) {
            let s = n.get(r);
            if (s) {
                let o = (a, c) => i.reducer(s(a, c), c);
                n.set(r, o)
            } else
                n.set(r, i.reducer)
        }
    return function(i=e, r) {
        let s = n.get(r.type);
        return s ? s(i, r) : i
    }
}
var k8e = ( () => {
    let t = class t extends fn {
        constructor(i) {
            super(),
            this.accountService = i,
            this.initializeResult = !1,
            this.firstTimeLsConnect = !1,
            this.connectionState = Rt.Disconnected,
            this.connectionStateSubject = new Ne(this.connectionState),
            this.connectionState$ = this.connectionStateSubject.asObservable(),
            this.lsConnectedSubject = new Ne(this.firstTimeLsConnect),
            this.lsConnected$ = this.lsConnectedSubject.asObservable(),
            e3(this.unsubscribeAllAndDisconnect)
        }
        start() {
            this.lsClient = new V3(this.environment.setting.marketSheetLsUrl[0],"lsadapter-conf");
            let i = this.accountService?.userAccountInfo?.value?.customerIsin;
            this.environment.setting.lsUrl.includes("stage") && (i === "11290080931413" || i === "11290069635676" ? i = "11290937779334" : (i === "11290011810777" || i === "11290222222220") && (i = "11290859862836")),
            this.lsClient.connectionDetails.setUser(i),
            this.lsClient.connectionOptions.setCookieHandlingRequired(!0),
            this.lsClient.connectionOptions.setEarlyWSOpenEnabled(!1),
            this.lsClient.connectionDetails.setPassword("xxxxx"),
            this.lsClient.connect(),
            this.lsClient.addListener({
                onServerError: r => {
                    this.changeConnectionState(Rt.NotConnected),
                    this.environment.env !== Yt.PROD && console.log(r)
                }
                ,
                onStatusChange: r => {
                    try {
                        let s = r.split(":");
                        s.length > 0 && (s[0] === "CONNECTED" ? this.changeConnectionState(Rt.Connected) : s[0] === "CONNECTING" ? this.changeConnectionState(Rt.Connecting) : s[0] === "DISCONNECTED" ? this.changeConnectionState(Rt.Disconnected) : this.changeConnectionState(Rt.Unknown))
                    } catch (s) {
                        console.log(s),
                        this.changeConnectionState(Rt.Unknown)
                    }
                }
            }),
            this.initializeResult = !0
        }
        changeConnectionState(i) {
            this.connectionState = i,
            this.connectionStateSubject.next(i),
            !this.firstTimeLsConnect && i === Rt.Connected && (this.firstTimeLsConnect = !0,
            this.lsConnectedSubject.next(!0))
        }
        ngOnDestroy() {
            this.disconnect()
        }
        unsubscribeAllAndDisconnect() {
            try {
                this?.unsubscribeAll(),
                this?.disconnect()
            } catch (i) {
                console.log(i)
            }
        }
        disconnect() {
            this.lsClient?.disconnect()
        }
        subscribeToLsOnLsConnection(i) {
            return this.lsConnected$.subscribe(s => {
                s && i.call(null)
            }
            )
        }
        subscribeToLsBySchema(i, r) {
            let s = this.getSubscriptionModelBySchema(i, r);
            return this.subscriptionToItems(s, r)
        }
        getSubscriptionModelBySchema(i, r) {
            let s = Zn.LsSchemasTopic.find(a => a.schema === i)?.topic;
            return {
                mode: Zn.RawModeSchemas.indexOf(i) > -1 ? Tl.Raw : Tl.Merge,
                adapterName: Zn.LsAdapterName.find(a => a.topic === Zn.LsSchemasTopic.find(c => c.schema === i)?.topic)?.value,
                schema: this.getSchema(Zn.LsSchemas.find(a => a.type === i)?.schema),
                isSnapshot: Zn.SnapshotSchemas.indexOf(i) > -1 ? xa.Yes : xa.No,
                items: [s + (r ? ":" + r : "")],
                changeType: Zn.FullModeChangeSchemas.indexOf(i) > -1 ? ba.Full : ba.Field
            }
        }
        getSchema(i) {
            return Object.keys(i).map(r => i[r])
        }
        subscriptionToItems(i, r) {
            let s = new Bc(i.mode,i.items,i.schema);
            s.setDataAdapter(i.adapterName),
            s.setRequestedSnapshot(i.isSnapshot);
            let o = new lt
              , a = o.asObservable();
            return s.addListener({
                onItemUpdate: c => {
                    try {
                        if (i.changeType === ba.Field)
                            c.forEachChangedField( (l, u, h) => {
                                let d = {
                                    inst: r ?? "",
                                    name: l,
                                    pos: u,
                                    val: h
                                };
                                o.next(d)
                            }
                            );
                        else {
                            let l = {};
                            i.schema.forEach(h => {
                                l[h] = c.getValue(h)
                            }
                            );
                            let u = {
                                inst: r ?? "",
                                name: "",
                                pos: 0,
                                val: l
                            };
                            o.next(u)
                        }
                    } catch (l) {
                        console.log(l)
                    }
                }
            }),
            this.lsClient.subscribe(s),
            a
        }
        unsubscribeAll() {
            try {
                this.lsClient?.getSubscriptions()?.forEach(r => {
                    r?.unsubscribe()
                }
                )
            } catch (i) {
                console.log(i)
            }
        }
        unsubscribeSchema(i, r) {
            let s = this.getSchema(Zn.LsSchemas.find(a => a.type === i).schema)
              , o = !1;
            return r ? o = this.unsubscribeItem(r, i, s) : o = this.unsubscribe(i, s),
            o
        }
        unsubscribeSymbolByDynamicSchema(i, r) {
            let s = !1;
            return s = this.unsubscribeItem(i, null, r),
            s
        }
        unsubscribeItem(i, r, s) {
            if (!this.initializeResult)
                return !1;
            if (!i || !r)
                return;
            let o = Zn.LsSchemasTopic.find(l => l.schema === r).topic + ":" + i
              , a = this.lsClient?.getSubscriptions()
              , c = !1;
            return a.forEach(l => {
                let u = l.getItems()
                  , h = l.getFields();
                if (u[0] === o && this.isEqual(h, s))
                    try {
                        this.lsClient.unsubscribe(l),
                        c = !0
                    } catch {
                        c = !1
                    }
            }
            ),
            c
        }
        unsubscribe(i, r) {
            if (!this.initializeResult)
                return !1;
            if (!i)
                return;
            let s = this.lsClient?.getSubscriptions()
              , o = !1;
            return s.forEach(a => {
                let c = a.getFields();
                if (this.isEqual(c, r))
                    try {
                        this.lsClient.unsubscribe(a),
                        o = !0
                    } catch {
                        o = !1
                    }
            }
            ),
            o
        }
        isEqual(i, r) {
            if (i.length !== r.length)
                return !1;
            for (let s of i) {
                let o = s;
                if (!r.includes(o))
                    return !1
            }
            return !0
        }
        logSubs() {
            let i = this.lsClient?.getSubscriptions();
            console.log("@@@@ current ls subscriptions", i)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)(xe(go))
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var V8e = ( () => {
    let t = class t {
        constructor() {
            this.environment = z(bn),
            this.accountService = z(go),
            this.gtagService = z(sl),
            this.easyWorker = z(VM),
            this.unleashService = z(zE),
            this.lsService = z(Ql),
            this.unsubscribe_all = new lt,
            e3(this.lsService.unsubscribeAllAndDisconnect),
            this.environment.env !== Yt.PROD && setInterval( () => {}
            , 1e4),
            this.lsService.connectionState$.pipe(In(this.unsubscribe_all)).subscribe(i => {
                let r = "";
                switch (i) {
                case Rt.Connected:
                    r = "Connected";
                    break;
                case Rt.Connecting:
                    r = "Connecting";
                    break;
                case Rt.Disconnected:
                    r = "Disconnected";
                    break;
                default:
                    r = "Unknown";
                    break
                }
                this.gtagService.sendGtagEvent("network_connectivity", "network_status", r)
            }
            )
        }
        start() {
            let i = this.accountService?.userAccountInfo?.value?.customerIsin;
            this.environment.setting.lsUrl.includes("stage") && (i === "11290080931413" || i === "11290069635676" ? i = "11290937779334" : (i === "11290011810777" || i === "11290222222220") && (i = "11290859862836")),
            nc(this.unleashService.isFeatureEnabledStartsWithServerResponse$("web-worker"), ci(1e3)).pipe(Lt(1)).subscribe(r => {
                this.lsService.setConfig({
                    customerIsin: i,
                    lsUrl: this.environment.setting.lsUrl,
                    webWorkerFeatureToggle: r === !0,
                    workerService: this.easyWorker
                }),
                this.lsService.start()
            }
            )
        }
        ngOnDestroy() {
            this.lsService.onDestroy(),
            this.unsubscribe_all.next()
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var Ir = ( () => {
    let t = class t extends fn {
        constructor() {
            if (super(),
            this.accountService = z(go),
            this.broadcastService = z(GM),
            this.localStorage = z(Tc),
            this.startupService = z(Sh),
            this.notifyService = z(Ls),
            this.internetConnectivity = z($2),
            this.userService = z($r),
            this.userDeviceService = z(ur),
            this.router = z(_r),
            this.gtagService = z(sl),
            this.settings = uT(this.environment),
            this.manager = new lT(this.settings),
            this.waitingForLogin = !0,
            this.checkUserFailedSub = new lt,
            this.checkLoginSuccessSub = new Ne(Sr.None),
            this.checkUserFailed$ = this.checkUserFailedSub.asObservable(),
            this.checkLoginSuccess$ = this.checkLoginSuccessSub.asObservable(),
            this.deviceUniqueId = Ml(),
            this._oidcUserKey = "oidc-user",
            this.logoutFromAppSubject = new lt,
            this.logoutFromApp$ = this.logoutFromAppSubject.asObservable(),
            this.broadcastService.subscribeToMessage(V2.Logout, i => {
                i !== this.deviceUniqueId && setTimeout( () => {
                    this.logout()
                }
                , 200)
            }
            ),
            this.internetConnectivity.networkStatus$.pipe(Lt(1), He(i => {
                i || this.checkLoginSuccessSub.next(Sr.InternetIsDisconnected)
            }
            )).subscribe(),
            this.startupService.authenticationType !== aa.Secondary)
                this.manager.getUser().then(i => {
                    this.user = i,
                    this.accountService.setUserAccountInfo(this.accessToken),
                    this.isAuthorizedUser(),
                    i && this.isLoggedIn() ? this.userChecked() : i && this.userExpired && this.logOutFromApp()
                }
                ),
                this.manager.events.addUserLoaded(i => {
                    if (this.user = i,
                    this.accountService.setUserAccountInfo(this.accessToken),
                    this.localStorage.getItem(Vn.loggedIn) || this.localStorage.setItem(Vn.loggedIn, "true"),
                    sessionStorage.removeItem(Vn.isGuestUser),
                    this.isAuthorizedUser(),
                    this.isLoggedIn()) {
                        this.sameLogin();
                        let s = this.localStorage.getItem("redirect-after-login");
                        s || (s = "/");
                        let o = s.split("?")[1];
                        o && (s = s.split("?")[0]);
                        let a = new URLSearchParams(o)
                          , c = {};
                        a.forEach( (l, u) => {
                            c[u] = l
                        }
                        ),
                        this.router.navigate([s], {
                            queryParams: c
                        })
                    }
                }
                );
            else {
                let i = JSON.parse(sessionStorage.getItem(this._oidcUserKey));
                i && (this.user = i,
                this.accountService.setUserAccountInfo(this.accessToken),
                this.isAuthorizedUser(),
                i && this.isLoggedIn() ? this.userChecked() : i && this.userExpired && this.logout())
            }
        }
        get getUser() {
            return this.startupService.authenticationType !== aa.Secondary ? this.manager.getUser() : Promise.resolve(this.user)
        }
        get easyApiUrl() {
            return this.mtsPath + this.apiUrls.easy
        }
        get userExpired() {
            let i = this.user?.expires_at ? this.user?.expires_at - Date.now() / 1e3 : void 0;
            return i !== void 0 ? i <= 0 : !0
        }
        get accessToken() {
            let i = this.getToken();
            return i ? F2(i) : null
        }
        isLoggedIn() {
            return this.user !== null && !this.userExpired
        }
        sameLogin() {
            this.userDeviceService.UserDeviceInfo$.pipe(Qn(i => !!i), He(i => {
                let r = this.localStorage.getItem(Vn.uuid);
                return r ? this.msgSenderUniqId = r : (this.msgSenderUniqId = Ml(),
                this.localStorage.setItem(Vn.uuid, this.msgSenderUniqId)),
                this.httpService.post(`${this.easyApiUrl}account/same-login`, {
                    body: C({
                        uuid: this.msgSenderUniqId
                    }, i),
                    dontCheckSameLogin: !0,
                    maxRetryAttempts: 3
                }).pipe(He( () => this.userChecked())).subscribe()
            }
            )).subscribe()
        }
        getToken() {
            return this.user !== null ? this.user?.access_token : null
        }
        startAuthentication() {
            return this.waitingForLogin = !0,
            this.startupService.authenticationType === aa.Secondary ? this.router.navigateByUrl("/login").then( () => Promise.resolve()) : this.manager.signinRedirect()
        }
        logout() {
            sessionStorage.removeItem(Vn.isGuestUser),
            this.logoutOms().pipe(dr( () => {
                this.startupService.authenticationType === aa.Secondary ? (sessionStorage.removeItem(this._oidcUserKey),
                window.location.href = this.environment.appUrl + "/login") : this.user && this.isLoggedIn() ? this.logOutFromApp() : window.location.href = this.environment.appUrl
            }
            )).subscribe()
        }
        logOutFromApp() {
            this.userService.userUnChecked(),
            this.logoutFromAppSubject.next(!0),
            this.localStorage.removeItem(Vn.loggedIn),
            this.logOutOtherTabsAfterLogOut(),
            this.manager.signoutRedirect().then( () => {
                this.manager.removeUser()
            }
            )
        }
        completeAuthentication() {
            return this.manager.signinRedirectCallback().then( () => {
                this.gtagService.sendGtagEvent("redirect-to-app")
            }
            ).catch(i => {
                let r = Sr.General;
                this.logOutFromApp(),
                (`${i}`.indexOf("iat is in the future") >= 0 || `${i}`.indexOf("exp is in the past") >= 0) && (r = Sr.DateError),
                this.checkLoginSuccessSub.next(r)
            }
            )
        }
        setLoginError(i) {
            this.checkLoginSuccessSub.next(i)
        }
        redirectToSignIn() {
            this.manager.signinRedirect()
        }
        loginForPasswordGrantType(i) {
            this.localStorage.removeItem(Vn.loggedIn),
            sessionStorage.removeItem(Vn.isGuestUser),
            sessionStorage.removeItem(this._oidcUserKey);
            let r = {
                headers: new Gv().set("Content-Type", "application/x-www-form-urlencoded")
            }
              , s = new URLSearchParams;
            return s.set("username", i.username),
            s.set("password", i.password),
            s.set("grant_type", "password"),
            s.set("client_id", this.environment.oidcSettings.client_id),
            this.httpService.post(this.environment.oidcSettings.authority + "/connect/token", {
                body: s.toString(),
                options: r,
                dontCheckSameLogin: !0
            }).pipe(We(o => (o.expires_at || (o.expires_at = Math.trunc(Date.now() / 1e3 + o.expires_in)),
            o)), He(o => {
                sessionStorage.setItem(this._oidcUserKey, JSON.stringify(o)),
                this.user = o,
                this.accountService.setUserAccountInfo(this.accessToken),
                this.localStorage.getItem(Vn.loggedIn) || this.localStorage.setItem(Vn.loggedIn, "true");
                let c = this.localStorage.getItem("redirect-after-login");
                c || (c = "/"),
                this.router.navigate([c]),
                this.isAuthorizedUser(),
                this.sameLogin()
            }
            ), on(o => {
                throw o?.error?.error === "invalid_grant" && this.notifyService.alert(o?.error?.error_description, ti.danger, !1),
                o(o)
            }
            ))
        }
        redirectToLoginPage() {
            window.location.href = this.environment.appUrl
        }
        userChecked() {
            this.userService.getValue() || (this.userService.userChecked(),
            this.checkUserFailedSub.next(!1),
            this.waitingForLogin = !1)
        }
        logoutOms() {
            return this.httpService.post(`${this.easyApiUrl}account/logout`, null)
        }
        isAuthorizedUser() {
            return this.accessToken && (this.accessToken.contract || (this.setLoginError(Sr.GuestUser),
            this.userService.isGuestUser = !0),
            this.accessToken.contract && this.accessToken.contract.lastIndexOf("OmsMofid_1.0") < 0 && (this.setLoginError(Sr.Easy2User),
            this.userService.isGuestUser = !0,
            this.userService.isEasy2User = !0),
            !this.hasClaim(i3.EContract2) && this.isForceContract2() && this.setLoginError(Sr.ForceContract2),
            this.hasClaim(i3.OptionSellOnline) && this.setLoginError(Sr.OnlineOptionUser)),
            null
        }
        isForceContract2() {
            return this.accessToken?.isforce_contract === "true"
        }
        hasClaim(i) {
            return this.accessToken?.contract?.includes(i)
        }
        logOutOtherTabsAfterLogOut() {
            this.broadcastService.sendMessage(V2.Logout, this.deviceUniqueId)
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var t_e = ( () => {
    let t = class t {
        transform(i) {
            return i ? Jf(i) : null
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275pipe = ac({
        name: "eDigit",
        type: t,
        pure: !0
    });
    let e = t;
    return e
}
)();
var _P = g5(r_());
var r_e = ( () => {
    let t = class t {
        transform(i, r) {
            if (i && yr.isValidDate(i)) {
                let s = (0,
                _P.default)(new Date(i))
                  , o = s.locale("fa").format("YYYY/MM/DD");
                return r === "time" && (o = `${s.locale("en").format("HH:mm:ss")} ${o}`),
                r === "justTime" && (o = `${s.locale("en").format("HH:mm:ss")}`),
                r === "justTime-3.5" && (o = `${s.add(-3, "hours").add(-30, "minutes").locale("en").format("hh:mm:ss")}`),
                o
            }
            return null
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275pipe = ac({
        name: "jdate",
        type: t,
        pure: !0
    });
    let e = t;
    return e
}
)();
var a_e = ( () => {
    let t = class t {
        transform(i, r=!0) {
            return i && yr.isValidDate(i) ? yr.getJDateLongString(i, r) : null
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275pipe = ac({
        name: "jdateLong",
        type: t,
        pure: !0
    });
    let e = t;
    return e
}
)();
var u_e = ( () => {
    let t = class t {
        transform(i, r, s) {
            let o = r ? " " + i.toString().slice(-8, -3) : ""
              , a = s ? yr.getPersianDayOfWeek(i) + " " : ""
              , c = yr.getPersianMonth(i)
              , l = yr.getJDate(new Date(i))
              , u = yr.getJDate(new Date)
              , h = l.substring(l.lastIndexOf("/") + 1)
              , d = l.substring(0, 4)
              , f = u.substring(0, 4)
              , g = d !== f ? " " + d : "";
            return `${a}${h} ${c}${g}${o}`
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275pipe = ac({
        name: "stringDate",
        type: t,
        pure: !0
    });
    let e = t;
    return e
}
)();
function v_e(e) {
    e = e.trim(),
    e = e === "\u063A\u067E\u0622\u0630\u0631" ? "\u063A\u067E\u0627\u0630\u0631" : e,
    window.open(`https://codal.ir/ReportList.aspx?search&Symbol=${e}`, "_blank")
}
function b_e(e, t, n) {
    return t === 0 || !t || !n || n === 0 ? 0 : e > 0 && t > 0 ? Math.round((e - t) / t * 1e4) / 100 : 0
}
function x_e(e, t, n, i, r, s, o, a=1) {
    let c = 0;
    if (e || t || n)
        r === hu || i === 0 ? c = e : i === 2 ? c = t : i === 1 && (c = o ? t : e);
    else
        return 0;
    return s * c * a * (1 - (n ?? 0))
}
function w_e(e, t, n, i, r) {
    if (e == n3.Buy)
        return t * (1 + i) / (1 - r);
    if (e == n3.Sell)
        return n * (1 + r) / (1 + i)
}
var T_e = ( () => {
    let t = class t extends R6 {
        constructor() {
            super(),
            this.overrides = {
                swipe: {
                    velocity: .1,
                    threshold: 1
                },
                press: {
                    time: 500
                }
            },
            this.options = {
                touchAction: "pan-y"
            }
        }
    }
    ;
    t.\u0275fac = function(r) {
        return new (r || t)
    }
    ,
    t.\u0275prov = re({
        token: t,
        factory: t.\u0275fac,
        providedIn: "root"
    });
    let e = t;
    return e
}
)();
var yP = class {
    getSource(t) {
        return (n, i) => this.loadData(t, n, i, t?.length).pipe(We(r => r))
    }
    constructor(t, n) {
        this._offset$ = new Ne(0),
        this.loading$ = new Ne(!1),
        this.hasMore$ = new Ne(!0),
        this.remainingCount$ = new Ne(0),
        this.totalCount$ = new Ne(0);
        let i = this.getSource(t);
        this._limit$ = new Ne(n || 10),
        this._dataSource$ = cl(this._offset$, this._limit$).pipe(He( () => this.loading$.next(!0)), Vt( ([r,s]) => i(r, s).pipe(We( ({data: o, totalElement: a}) => ({
            offset: r,
            data: o,
            totalElement: a,
            limit: s
        })))), He( ({totalElement: r, offset: s, limit: o}) => {
            this.hasMore$.next(r > s + o),
            this.remainingCount$.next(Math.max(r - s - o, 0)),
            this.totalCount$.next(r)
        }
        ), N0( (r, s) => s.offset == 0 ? s.data : [...r, ...s.data], []), He( () => this.loading$.next(!1)))
    }
    subscribe(t, n, i) {
        return this._dataSource$.subscribe(...arguments)
    }
    reload() {
        this._offset$.next(0)
    }
    loadMore() {
        this.loading$.getValue() || this._offset$.next(this._offset$.getValue() + this._limit$.getValue())
    }
    loadData(t, n, i, r) {
        return new yo(s => {
            s.next({
                data: this.getIndexedArray(i, n, t, r),
                totalElement: r
            })
        }
        )
    }
    getIndexedArray(t, n, i, r) {
        return t = Math.min(n + t, r) - n,
        t <= 0 ? [] : i.slice(n, n + t)
    }
}
;
var f5 = class {
    and(t) {
        return new Vp(this,t)
    }
    andNot(t) {
        return new U8(this,t)
    }
    or(t) {
        return new $p(this,t)
    }
    orNot(t) {
        return new H8(this,t)
    }
    not() {
        return new G8(this)
    }
}
  , Vp = class extends f5 {
    constructor(t, n) {
        super(),
        this.left = t,
        this.right = n
    }
    isSatisfiedBy(t) {
        return this.left.isSatisfiedBy(t) && this.right.isSatisfiedBy(t)
    }
    toString() {
        return "(" + this.left.toString() + " and " + this.right.toString() + ")"
    }
}
  , U8 = class extends Vp {
    isSatisfiedBy(t) {
        return super.isSatisfiedBy(t) !== !0
    }
    toString() {
        return "not " + super.toString()
    }
}
  , $p = class extends f5 {
    constructor(t, n) {
        super(),
        this.left = t,
        this.right = n
    }
    isSatisfiedBy(t) {
        return this.left.isSatisfiedBy(t) || this.right.isSatisfiedBy(t)
    }
    toString() {
        return "(" + this.left.toString() + " or " + this.right.toString() + ")"
    }
}
  , H8 = class extends $p {
    isSatisfiedBy(t) {
        return super.isSatisfiedBy(t) !== !0
    }
    toString() {
        return "not " + super.toString()
    }
}
  , G8 = class extends f5 {
    constructor(t) {
        super(),
        this.other = t
    }
    isSatisfiedBy(t) {
        return !this.other.isSatisfiedBy(t)
    }
    toString() {
        return "(not " + this.other.toString() + ")"
    }
}
;
export {wf as a, Ef as b, Ny as c, cse as d, lse as e, A6 as f, use as g, Io as h, Do as i, AR as j, _r as k, kse as l, Ase as m, GD as n, VD as o, Ise as p, jse as q, gu as r, Zf as s, _g as t, qS as u, sae as v, oae as w, cae as x, fi as y, HS as z, mg as A, Ei as B, Qse as C, eN as D, Id as E, GS as F, xg as G, Fd as H, Ld as I, lN as J, y as K, VS as L, hu as M, Qf as N, Rt as O, K as P, se as Q, voe as R, _oe as S, woe as T, Coe as U, nN as V, Eoe as W, Toe as X, Ooe as Y, Moe as Z, Poe as _, koe as $, Aoe as aa, rN as ba, du as ca, Voe as da, $oe as ea, Woe as fa, sN as ga, joe as ha, qoe as ia, zle as ja, Xle as ka, Kle as la, Jf as ma, Xoe as na, Ml as oa, Koe as pa, Yoe as qa, aN as ra, Qoe as sa, Joe as ta, Zoe as ua, eae as va, Jle as wa, eE as xa, yr as ya, dae as za, fae as Aa, pae as Ba, gae as Ca, mae as Da, vae as Ea, i0e as Fa, o0e as Ga, wae as Ha, wc as Ia, Cae as Ja, Eae as Ka, c0e as La, l0e as Ma, tE as Na, d0e as Oa, S2 as Pa, m0e as Qa, nE as Ra, iE as Sa, rE as Ta, Mae as Ua, YS as Va, QS as Wa, wa as Xa, Pae as Ya, Yt as Za, pu as _a, bn as $a, fce as ab, t_e as bb, r_e as cb, a_e as db, u_e as eb, v_e as fb, Qt as gb, nt as hb, Dce as ib, Lce as jb, Bce as kb, uN as lb, hN as mb, wz as nb, dT as ob, ti as pb, dN as qb, n3 as rb, b3e as sb, y0 as tb, x3e as ub, wg as vb, b_e as wb, x_e as xb, w_e as yb, VM as zb, Yl as Ab, _n as Bb, T_e as Cb, Bd as Db, rle as Eb, yP as Fb, f5 as Gb, i3 as Hb, N2 as Ib, jE as Jb, Vn as Kb, Tc as Lb, $r as Mb, r3 as Nb, fn as Ob, ur as Pb, y2e as Qb, go as Rb, I2e as Sb, Qc as Tb, W9 as Ub, W2e as Vb, X2e as Wb, Ale as Xb, l4e as Yb, Ql as Zb, H0e as _b, sE as $b, G0e as ac, V0e as bc, $0e as cc, rue as dc, oE as ec, aK as fc, v4e as gc, Ls as hc, w4e as ic, F4e as jc, U4e as kc, j4e as lc, lK as mc, Rp as nc, due as oc, Ame as pc, Nme as qc, cE as rc, Lme as sc, AE as tc, V5e as uc, sq as vc, d9 as wc, $5e as xc, IE as yc, W5e as zc, RE as Ac, NE as Bc, j5e as Cc, q5e as Dc, Jc as Ec, zE as Fc, qme as Gc, Kme as Hc, Zme as Ic, kY as Jc, AY as Kc, h8e as Lc, d8e as Mc, rP as Nc, wh as Oc, I8 as Pc, d5 as Qc, Up as Rc, HY as Sc, N8 as Tc, Gp as Uc, F8 as Vc, g8e as Wc, vP as Xc, wQ as Yc, m8e as Zc, v8e as _c, _8e as $c, k8e as ad, V8e as bd, Ir as cd, upe as dd, za as ed, Ape as fd, Rpe as gd, Hpe as hd, Jpe as id, c6e as jd, u5 as kd, C6e as ld, I6e as md, EM as nd, Z6e as od, ige as pd, C8 as qd, bge as rd, Dge as sd, zge as td, RM as ud, f7e as vd, y7e as wd, eY as xd, Fp as yd, X7e as zd, u9e as Ad, O9e as Bd, L9e as Cd, j9e as Dd, Z9e as Ed};
//# sourceMappingURL=chunk-OFJ5SZPL.js.map
